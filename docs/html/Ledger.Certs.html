<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Certs</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Background">\section{Certificates}

</a><a id="25" class="Markup">\begin{code}[hide]</a>
<a id="44" class="Symbol">{-#</a> <a id="48" class="Keyword">OPTIONS</a> <a id="56" class="Pragma">--safe</a> <a id="63" class="Symbol">#-}</a>

<a id="68" class="Keyword">open</a> <a id="73" class="Keyword">import</a> <a id="80" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="95" class="Keyword">open</a> <a id="100" class="Keyword">import</a> <a id="107" href="Ledger.Types.GovStructure.html" class="Module">Ledger.Types.GovStructure</a>

<a id="134" class="Keyword">module</a> <a id="141" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="154" class="Symbol">(</a><a id="155" href="Ledger.Certs.html#155" class="Bound">gs</a> <a id="158" class="Symbol">:</a> <a id="160" class="Symbol">_)</a> <a id="163" class="Symbol">(</a><a id="164" class="Keyword">open</a> <a id="169" href="Ledger.Types.GovStructure.html#235" class="Module">GovStructure</a> <a id="182" href="Ledger.Certs.html#155" class="Bound">gs</a><a id="184" class="Symbol">)</a> <a id="186" class="Keyword">where</a>

<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="226" class="Keyword">open</a> <a id="231" class="Keyword">import</a> <a id="238" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a> <a id="263" href="Ledger.Certs.html#155" class="Bound">gs</a>
<a id="266" class="Keyword">open</a> <a id="271" href="Ledger.Address.html#1583" class="Module">RwdAddr</a>
<a id="279" class="Markup">\end{code}</a><a id="289" class="Background">

\begin{figure*}[h]
\emph{Derived types}
</a><a id="331" class="Markup">\begin{code}</a>
<a id="344" class="Keyword">data</a> <a id="DepositPurpose"></a><a id="349" href="Ledger.Certs.html#349" class="Datatype">DepositPurpose</a> <a id="364" class="Symbol">:</a> <a id="366" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="371" class="Keyword">where</a>
  <a id="DepositPurpose.CredentialDeposit"></a><a id="379" href="Ledger.Certs.html#379" class="InductiveConstructor">CredentialDeposit</a>  <a id="398" class="Symbol">:</a> <a id="400" href="Ledger.Address.html#764" class="Datatype">Credential</a>   <a id="413" class="Symbol">→</a> <a id="415" href="Ledger.Certs.html#349" class="Datatype">DepositPurpose</a>
  <a id="DepositPurpose.PoolDeposit"></a><a id="432" href="Ledger.Certs.html#432" class="InductiveConstructor">PoolDeposit</a>        <a id="451" class="Symbol">:</a> <a id="453" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a>      <a id="466" class="Symbol">→</a> <a id="468" href="Ledger.Certs.html#349" class="Datatype">DepositPurpose</a>
  <a id="DepositPurpose.DRepDeposit"></a><a id="485" href="Ledger.Certs.html#485" class="InductiveConstructor">DRepDeposit</a>        <a id="504" class="Symbol">:</a> <a id="506" href="Ledger.Address.html#764" class="Datatype">Credential</a>   <a id="519" class="Symbol">→</a> <a id="521" href="Ledger.Certs.html#349" class="Datatype">DepositPurpose</a>
  <a id="DepositPurpose.GovActionDeposit"></a><a id="538" href="Ledger.Certs.html#538" class="InductiveConstructor">GovActionDeposit</a>   <a id="557" class="Symbol">:</a> <a id="559" href="Ledger.GovernanceActions.html#1185" class="Function">GovActionID</a>  <a id="572" class="Symbol">→</a> <a id="574" href="Ledger.Certs.html#349" class="Datatype">DepositPurpose</a>

<a id="Deposits"></a><a id="590" href="Ledger.Certs.html#590" class="Function">Deposits</a> <a id="599" class="Symbol">=</a> <a id="601" href="Ledger.Certs.html#349" class="Datatype">DepositPurpose</a> <a id="616" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="618" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
<a id="623" class="Markup">\end{code}</a><a id="633" class="Background">
</a><a id="634" class="Markup">\begin{code}[hide]</a>
<a id="653" class="Keyword">instance</a>
  <a id="664" class="Keyword">unquoteDecl</a> <a id="DecEq-DepositPurpose"></a><a id="676" href="Ledger.Certs.html#676" class="Function">DecEq-DepositPurpose</a> <a id="697" class="Symbol">=</a> <a id="699" href="Tactic.Derive.DecEq.html#3506" class="Function">derive-DecEq</a>
    <a id="716" class="Symbol">((</a><a id="718" class="Keyword">quote</a> <a id="724" href="Ledger.Certs.html#349" class="Datatype">DepositPurpose</a> <a id="739" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="741" href="Ledger.Certs.html#676" class="Function">DecEq-DepositPurpose</a><a id="761" class="Symbol">)</a> <a id="763" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="765" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="767" class="Symbol">)</a>
<a id="769" class="Markup">\end{code}</a><a id="779" class="Background">
\caption{Deposit types}
\end{figure*}

\begin{figure*}[h!]
\begin{AgdaMultiCode}
\begin{NoConway}
</a><a id="878" class="Markup">\begin{code}</a>
<a id="891" class="Keyword">record</a> <a id="PoolParams"></a><a id="898" href="Ledger.Certs.html#898" class="Record">PoolParams</a> <a id="909" class="Symbol">:</a> <a id="911" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="916" class="Keyword">where</a>
<a id="922" class="Markup">\end{code}</a><a id="932" class="Background">
</a><a id="933" class="Markup">\begin{code}[hide]</a>
  <a id="954" class="Keyword">field</a>
<a id="960" class="Markup">\end{code}</a><a id="970" class="Background">
</a><a id="971" class="Markup">\begin{code}</a>
    <a id="PoolParams.rewardAddr"></a><a id="988" href="Ledger.Certs.html#988" class="Field">rewardAddr</a> <a id="999" class="Symbol">:</a> <a id="1001" href="Ledger.Address.html#764" class="Datatype">Credential</a>
<a id="1012" class="Markup">\end{code}</a><a id="1022" class="Background">
\end{NoConway}
</a><a id="1038" class="Markup">\begin{code}</a>
<a id="1051" class="Keyword">data</a> <a id="DCert"></a><a id="1056" href="Ledger.Certs.html#1056" class="Datatype">DCert</a> <a id="1062" class="Symbol">:</a> <a id="1064" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1069" class="Keyword">where</a>
  <a id="DCert.delegate"></a><a id="1077" href="Ledger.Certs.html#1077" class="InductiveConstructor">delegate</a>    <a id="1089" class="Symbol">:</a> <a id="1091" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="1102" class="Symbol">→</a> <a id="1104" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1110" href="Ledger.GovernanceActions.html#1215" class="Datatype">VDeleg</a> <a id="1117" class="Symbol">→</a> <a id="1119" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1125" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="1133" class="Symbol">→</a> <a id="1135" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="1140" class="Symbol">→</a> <a id="1142" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
  <a id="DCert.dereg"></a><a id="1150" href="Ledger.Certs.html#1150" class="InductiveConstructor">dereg</a>       <a id="1162" class="Symbol">:</a> <a id="1164" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="1175" class="Symbol">→</a> <a id="1177" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="1182" class="Symbol">→</a> <a id="1184" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
  <a id="DCert.regpool"></a><a id="1192" href="Ledger.Certs.html#1192" class="InductiveConstructor">regpool</a>     <a id="1204" class="Symbol">:</a> <a id="1206" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="1214" class="Symbol">→</a> <a id="1216" href="Ledger.Certs.html#898" class="Record">PoolParams</a> <a id="1227" class="Symbol">→</a> <a id="1229" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
  <a id="DCert.retirepool"></a><a id="1237" href="Ledger.Certs.html#1237" class="InductiveConstructor">retirepool</a>  <a id="1249" class="Symbol">:</a> <a id="1251" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="1259" class="Symbol">→</a> <a id="1261" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a> <a id="1267" class="Symbol">→</a> <a id="1269" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
  <a id="DCert.regdrep"></a><a id="1277" href="Ledger.Certs.html#1277" class="InductiveConstructor">regdrep</a>     <a id="1289" class="Symbol">:</a> <a id="1291" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="1302" class="Symbol">→</a> <a id="1304" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="1309" class="Symbol">→</a> <a id="1311" href="Ledger.GovernanceActions.html#1399" class="Record">Anchor</a> <a id="1318" class="Symbol">→</a> <a id="1320" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
  <a id="DCert.deregdrep"></a><a id="1328" href="Ledger.Certs.html#1328" class="InductiveConstructor">deregdrep</a>   <a id="1340" class="Symbol">:</a> <a id="1342" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
  <a id="DCert.ccreghot"></a><a id="1363" href="Ledger.Certs.html#1363" class="InductiveConstructor">ccreghot</a>    <a id="1375" class="Symbol">:</a> <a id="1377" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="1388" class="Symbol">→</a> <a id="1390" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1396" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="1407" class="Symbol">→</a> <a id="1409" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
<a id="1415" class="Markup">\end{code}</a><a id="1425" class="Background">
\begin{NoConway}
</a><a id="1443" class="Markup">\begin{code}</a>
<a id="cwitness"></a><a id="1456" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1465" class="Symbol">:</a> <a id="1467" href="Ledger.Certs.html#1056" class="Datatype">DCert</a> <a id="1473" class="Symbol">→</a> <a id="1475" href="Ledger.Address.html#764" class="Datatype">Credential</a>
<a id="1486" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1495" class="Symbol">(</a><a id="1496" href="Ledger.Certs.html#1077" class="InductiveConstructor">delegate</a> <a id="1505" href="Ledger.Certs.html#1505" class="Bound">c</a> <a id="1507" class="Symbol">_</a> <a id="1509" class="Symbol">_</a> <a id="1511" class="Symbol">_)</a>  <a id="1515" class="Symbol">=</a> <a id="1517" href="Ledger.Certs.html#1505" class="Bound">c</a>
<a id="1519" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Ledger.Certs.html#1150" class="InductiveConstructor">dereg</a> <a id="1535" href="Ledger.Certs.html#1535" class="Bound">c</a> <a id="1537" class="Symbol">_)</a>         <a id="1548" class="Symbol">=</a> <a id="1550" href="Ledger.Certs.html#1535" class="Bound">c</a>
<a id="1552" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1561" class="Symbol">(</a><a id="1562" href="Ledger.Certs.html#1192" class="InductiveConstructor">regpool</a> <a id="1570" href="Ledger.Certs.html#1570" class="Bound">kh</a> <a id="1573" class="Symbol">_)</a>      <a id="1581" class="Symbol">=</a> <a id="1583" href="Ledger.Address.html#790" class="InductiveConstructor">KeyHashObj</a> <a id="1594" href="Ledger.Certs.html#1570" class="Bound">kh</a>
<a id="1597" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1606" class="Symbol">(</a><a id="1607" href="Ledger.Certs.html#1237" class="InductiveConstructor">retirepool</a> <a id="1618" href="Ledger.Certs.html#1618" class="Bound">kh</a> <a id="1621" class="Symbol">_)</a>   <a id="1626" class="Symbol">=</a> <a id="1628" href="Ledger.Address.html#790" class="InductiveConstructor">KeyHashObj</a> <a id="1639" href="Ledger.Certs.html#1618" class="Bound">kh</a>
<a id="1642" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1651" class="Symbol">(</a><a id="1652" href="Ledger.Certs.html#1277" class="InductiveConstructor">regdrep</a> <a id="1660" href="Ledger.Certs.html#1660" class="Bound">c</a> <a id="1662" class="Symbol">_</a> <a id="1664" class="Symbol">_)</a>     <a id="1671" class="Symbol">=</a> <a id="1673" href="Ledger.Certs.html#1660" class="Bound">c</a>
<a id="1675" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1684" class="Symbol">(</a><a id="1685" href="Ledger.Certs.html#1328" class="InductiveConstructor">deregdrep</a> <a id="1695" href="Ledger.Certs.html#1695" class="Bound">c</a><a id="1696" class="Symbol">)</a>       <a id="1704" class="Symbol">=</a> <a id="1706" href="Ledger.Certs.html#1695" class="Bound">c</a>
<a id="1708" href="Ledger.Certs.html#1456" class="Function">cwitness</a> <a id="1717" class="Symbol">(</a><a id="1718" href="Ledger.Certs.html#1363" class="InductiveConstructor">ccreghot</a> <a id="1727" href="Ledger.Certs.html#1727" class="Bound">c</a> <a id="1729" class="Symbol">_)</a>      <a id="1737" class="Symbol">=</a> <a id="1739" href="Ledger.Certs.html#1727" class="Bound">c</a>
<a id="1741" class="Markup">\end{code}</a><a id="1751" class="Background">
\end{NoConway}
\end{AgdaMultiCode}
\caption{Delegation definitions}
\end{figure*}

\begin{figure*}[h!]
\begin{AgdaMultiCode}
</a><a id="1877" class="Markup">\begin{code}</a>
<a id="1890" class="Keyword">record</a> <a id="CertEnv"></a><a id="1897" href="Ledger.Certs.html#1897" class="Record">CertEnv</a> <a id="1905" class="Symbol">:</a> <a id="1907" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1912" class="Keyword">where</a>
<a id="1918" class="Markup">\end{code}</a><a id="1928" class="Background">
</a><a id="1929" class="Markup">\begin{code}[hide]</a>
  <a id="1950" class="Keyword">constructor</a> <a id="⟦_,_,_,_,_⟧ᶜ"></a><a id="1962" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟦_,_,_,_,_⟧ᶜ</a>
  <a id="1977" class="Keyword">field</a>
<a id="1983" class="Markup">\end{code}</a><a id="1993" class="Background">
</a><a id="1994" class="Markup">\begin{code}</a>
    <a id="CertEnv.epoch"></a><a id="2011" href="Ledger.Certs.html#2011" class="Field">epoch</a>     <a id="2021" class="Symbol">:</a> <a id="2023" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a>
    <a id="CertEnv.pp"></a><a id="2033" href="Ledger.Certs.html#2033" class="Field">pp</a>        <a id="2043" class="Symbol">:</a> <a id="2045" href="Ledger.PParams.html#2073" class="Record">PParams</a>
    <a id="CertEnv.votes"></a><a id="2057" href="Ledger.Certs.html#2057" class="Field">votes</a>     <a id="2067" class="Symbol">:</a> <a id="2069" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2074" href="Ledger.GovernanceActions.html#8288" class="Record">GovVote</a>
    <a id="CertEnv.wdrls"></a><a id="2086" href="Ledger.Certs.html#2086" class="Field">wdrls</a>     <a id="2096" class="Symbol">:</a> <a id="2098" href="Ledger.Address.html#1583" class="Record">RwdAddr</a> <a id="2106" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2108" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="CertEnv.deposits"></a><a id="2117" href="Ledger.Certs.html#2117" class="Field">deposits</a>  <a id="2127" class="Symbol">:</a> <a id="2129" href="Ledger.Certs.html#590" class="Function">Deposits</a>

<a id="2139" class="Keyword">record</a> <a id="DState"></a><a id="2146" href="Ledger.Certs.html#2146" class="Record">DState</a> <a id="2153" class="Symbol">:</a> <a id="2155" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2160" class="Keyword">where</a>
<a id="2166" class="Markup">\end{code}</a><a id="2176" class="Background">
</a><a id="2177" class="Markup">\begin{code}[hide]</a>
  <a id="2198" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ᵈ"></a><a id="2210" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟦_,_,_⟧ᵈ</a>
  <a id="2221" class="Keyword">field</a>
<a id="2227" class="Markup">\end{code}</a><a id="2237" class="Background">
</a><a id="2238" class="Markup">\begin{code}</a>
    <a id="DState.voteDelegs"></a><a id="2255" href="Ledger.Certs.html#2255" class="Field">voteDelegs</a>   <a id="2268" class="Symbol">:</a> <a id="2270" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="2281" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2283" href="Ledger.GovernanceActions.html#1215" class="Datatype">VDeleg</a>
    <a id="DState.stakeDelegs"></a><a id="2294" href="Ledger.Certs.html#2294" class="Field">stakeDelegs</a>  <a id="2307" class="Symbol">:</a> <a id="2309" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="2320" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2322" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a>
    <a id="DState.rewards"></a><a id="2334" href="Ledger.Certs.html#2334" class="Field">rewards</a>      <a id="2347" class="Symbol">:</a> <a id="2349" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="2360" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2362" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
<a id="2367" class="Markup">\end{code}</a><a id="2377" class="Background">
\begin{NoConway}
</a><a id="2395" class="Markup">\begin{code}</a>

<a id="2409" class="Keyword">record</a> <a id="PState"></a><a id="2416" href="Ledger.Certs.html#2416" class="Record">PState</a> <a id="2423" class="Symbol">:</a> <a id="2425" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2430" class="Keyword">where</a>
<a id="2436" class="Markup">\end{code}</a><a id="2446" class="Background">
</a><a id="2447" class="Markup">\begin{code}[hide]</a>
  <a id="2468" class="Keyword">constructor</a> <a id="⟦_,_⟧ᵖ"></a><a id="2480" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟦_,_⟧ᵖ</a>
  <a id="2489" class="Keyword">field</a>
<a id="2495" class="Markup">\end{code}</a><a id="2505" class="Background">
</a><a id="2506" class="Markup">\begin{code}</a>
    <a id="PState.pools"></a><a id="2523" href="Ledger.Certs.html#2523" class="Field">pools</a>     <a id="2533" class="Symbol">:</a> <a id="2535" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="2543" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2545" href="Ledger.Certs.html#898" class="Record">PoolParams</a>
    <a id="PState.retiring"></a><a id="2560" href="Ledger.Certs.html#2560" class="Field">retiring</a>  <a id="2570" class="Symbol">:</a> <a id="2572" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="2580" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2582" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a>
<a id="2588" class="Markup">\end{code}</a><a id="2598" class="Background">
\end{NoConway}
</a><a id="2614" class="Markup">\begin{code}</a>

<a id="2628" class="Keyword">record</a> <a id="GState"></a><a id="2635" href="Ledger.Certs.html#2635" class="Record">GState</a> <a id="2642" class="Symbol">:</a> <a id="2644" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2649" class="Keyword">where</a>
<a id="2655" class="Markup">\end{code}</a><a id="2665" class="Background">
</a><a id="2666" class="Markup">\begin{code}[hide]</a>
  <a id="2687" class="Keyword">constructor</a> <a id="⟦_,_⟧ᵛ"></a><a id="2699" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦_,_⟧ᵛ</a>
  <a id="2708" class="Keyword">field</a>
<a id="2714" class="Markup">\end{code}</a><a id="2724" class="Background">
</a><a id="2725" class="Markup">\begin{code}</a>
    <a id="GState.dreps"></a><a id="2742" href="Ledger.Certs.html#2742" class="Field">dreps</a>      <a id="2753" class="Symbol">:</a> <a id="2755" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="2766" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2768" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a>
    <a id="GState.ccHotKeys"></a><a id="2778" href="Ledger.Certs.html#2778" class="Field">ccHotKeys</a>  <a id="2789" class="Symbol">:</a> <a id="2791" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="2802" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="2804" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2810" href="Ledger.Address.html#764" class="Datatype">Credential</a>

<a id="2822" class="Keyword">record</a> <a id="CertState"></a><a id="2829" href="Ledger.Certs.html#2829" class="Record">CertState</a> <a id="2839" class="Symbol">:</a> <a id="2841" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2846" class="Keyword">where</a>
<a id="2852" class="Markup">\end{code}</a><a id="2862" class="Background">
</a><a id="2863" class="Markup">\begin{code}[hide]</a>
  <a id="2884" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ᶜˢ"></a><a id="2896" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦_,_,_⟧ᶜˢ</a>
  <a id="2908" class="Keyword">field</a>
<a id="2914" class="Markup">\end{code}</a><a id="2924" class="Background">
</a><a id="2925" class="Markup">\begin{code}</a>
    <a id="CertState.dState"></a><a id="2942" href="Ledger.Certs.html#2942" class="Field">dState</a> <a id="2949" class="Symbol">:</a> <a id="2951" href="Ledger.Certs.html#2146" class="Record">DState</a>
    <a id="CertState.pState"></a><a id="2962" href="Ledger.Certs.html#2962" class="Field">pState</a> <a id="2969" class="Symbol">:</a> <a id="2971" href="Ledger.Certs.html#2416" class="Record">PState</a>
    <a id="CertState.gState"></a><a id="2982" href="Ledger.Certs.html#2982" class="Field">gState</a> <a id="2989" class="Symbol">:</a> <a id="2991" href="Ledger.Certs.html#2635" class="Record">GState</a>

<a id="2999" class="Keyword">record</a> <a id="DelegEnv"></a><a id="3006" href="Ledger.Certs.html#3006" class="Record">DelegEnv</a> <a id="3015" class="Symbol">:</a> <a id="3017" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3022" class="Keyword">where</a>
<a id="3028" class="Markup">\end{code}</a><a id="3038" class="Background">
</a><a id="3039" class="Markup">\begin{code}[hide]</a>
  <a id="3060" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ᵈᵉ"></a><a id="3072" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">⟦_,_,_⟧ᵈᵉ</a>
  <a id="3084" class="Keyword">field</a>
<a id="3090" class="Markup">\end{code}</a><a id="3100" class="Background">
</a><a id="3101" class="Markup">\begin{code}</a>
    <a id="DelegEnv.pparams"></a><a id="3118" href="Ledger.Certs.html#3118" class="Field">pparams</a>  <a id="3127" class="Symbol">:</a> <a id="3129" href="Ledger.PParams.html#2073" class="Record">PParams</a>
    <a id="DelegEnv.pools"></a><a id="3141" href="Ledger.Certs.html#3141" class="Field">pools</a>    <a id="3150" class="Symbol">:</a> <a id="3152" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="3160" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3162" href="Ledger.Certs.html#898" class="Record">PoolParams</a>
    <a id="DelegEnv.deposits"></a><a id="3177" href="Ledger.Certs.html#3177" class="Field">deposits</a> <a id="3186" class="Symbol">:</a> <a id="3188" href="Ledger.Certs.html#590" class="Function">Deposits</a>

<a id="GovCertEnv"></a><a id="3198" href="Ledger.Certs.html#3198" class="Function">GovCertEnv</a>  <a id="3210" class="Symbol">=</a> <a id="3212" href="Ledger.Certs.html#1897" class="Record">CertEnv</a>
<a id="PoolEnv"></a><a id="3220" href="Ledger.Certs.html#3220" class="Function">PoolEnv</a>     <a id="3232" class="Symbol">=</a> <a id="3234" href="Ledger.PParams.html#2073" class="Record">PParams</a>
<a id="3242" class="Markup">\end{code}</a><a id="3252" class="Background">
\end{AgdaMultiCode}
\caption{Types used for CERTS transition system}
\end{figure*}


</a><a id="3338" class="Markup">\begin{code}[hide]</a>
<a id="3357" class="Keyword">private</a> <a id="3365" class="Keyword">variable</a>
  <a id="3376" href="Ledger.Certs.html#3376" class="Generalizable">an</a> <a id="3379" class="Symbol">:</a> <a id="3381" href="Ledger.GovernanceActions.html#1399" class="Record">Anchor</a>
  <a id="3390" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a> <a id="3396" href="Ledger.Certs.html#3396" class="Generalizable">dReps&#39;</a> <a id="3403" class="Symbol">:</a> <a id="3405" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="3416" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3418" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a>
  <a id="3426" href="Ledger.Certs.html#3426" class="Generalizable">pools</a> <a id="3432" class="Symbol">:</a> <a id="3434" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="3442" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3444" href="Ledger.Certs.html#898" class="Record">PoolParams</a>
  <a id="3457" href="Ledger.Certs.html#3457" class="Generalizable">vDelegs</a> <a id="3465" class="Symbol">:</a> <a id="3467" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="3478" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3480" href="Ledger.GovernanceActions.html#1215" class="Datatype">VDeleg</a>
  <a id="3489" href="Ledger.Certs.html#3489" class="Generalizable">sDelegs</a> <a id="3497" class="Symbol">:</a> <a id="3499" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="3510" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3512" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a>
  <a id="3522" href="Ledger.Certs.html#3522" class="Generalizable">retiring</a> <a id="3531" class="Symbol">:</a> <a id="3533" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a> <a id="3541" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3543" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a>
  <a id="3551" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a> <a id="3558" class="Symbol">:</a> <a id="3560" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="3571" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3573" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3579" href="Ledger.Address.html#764" class="Datatype">Credential</a>
  <a id="3592" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a> <a id="3597" class="Symbol">:</a> <a id="3599" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="3610" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3612" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3619" href="Ledger.Certs.html#3619" class="Generalizable">dCert</a> <a id="3625" class="Symbol">:</a> <a id="3627" href="Ledger.Certs.html#1056" class="Datatype">DCert</a>
  <a id="3635" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="3637" href="Ledger.Certs.html#3637" class="Generalizable">c&#39;</a> <a id="3640" class="Symbol">:</a> <a id="3642" href="Ledger.Address.html#764" class="Datatype">Credential</a>
  <a id="3655" href="Ledger.Certs.html#3655" class="Generalizable">mc</a> <a id="3658" class="Symbol">:</a> <a id="3660" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3666" href="Ledger.Address.html#764" class="Datatype">Credential</a>
  <a id="3679" href="Ledger.Certs.html#3679" class="Generalizable">mv</a> <a id="3682" class="Symbol">:</a> <a id="3684" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3690" href="Ledger.GovernanceActions.html#1215" class="Datatype">VDeleg</a>
  <a id="3699" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="3701" class="Symbol">:</a> <a id="3703" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3710" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="3712" class="Symbol">:</a> <a id="3714" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a>
  <a id="3722" href="Ledger.Certs.html#3722" class="Generalizable">kh</a> <a id="3725" href="Ledger.Certs.html#3725" class="Generalizable">kh&#39;</a> <a id="3729" class="Symbol">:</a> <a id="3731" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a>
  <a id="3741" href="Ledger.Certs.html#3741" class="Generalizable">mkh</a> <a id="3745" class="Symbol">:</a> <a id="3747" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3753" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a>
  <a id="3763" href="Ledger.Certs.html#3763" class="Generalizable">st</a> <a id="3766" href="Ledger.Certs.html#3766" class="Generalizable">st&#39;</a> <a id="3770" class="Symbol">:</a> <a id="3772" href="Ledger.Certs.html#2829" class="Record">CertState</a>
  <a id="3784" href="Ledger.Certs.html#3784" class="Generalizable">stᵍ</a> <a id="3788" href="Ledger.Certs.html#3788" class="Generalizable">stᵍ&#39;</a> <a id="3793" class="Symbol">:</a> <a id="3795" href="Ledger.Certs.html#2635" class="Record">GState</a>
  <a id="3804" href="Ledger.Certs.html#3804" class="Generalizable">stᵈ</a> <a id="3808" href="Ledger.Certs.html#3808" class="Generalizable">stᵈ&#39;</a> <a id="3813" class="Symbol">:</a> <a id="3815" href="Ledger.Certs.html#2146" class="Record">DState</a>
  <a id="3824" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="3828" href="Ledger.Certs.html#3828" class="Generalizable">stᵖ&#39;</a> <a id="3833" class="Symbol">:</a> <a id="3835" href="Ledger.Certs.html#2416" class="Record">PState</a>
  <a id="3844" href="Ledger.Certs.html#3844" class="Generalizable">Γ</a> <a id="3846" class="Symbol">:</a> <a id="3848" href="Ledger.Certs.html#1897" class="Record">CertEnv</a>
  <a id="3858" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="3861" class="Symbol">:</a> <a id="3863" href="Ledger.PParams.html#2073" class="Record">PParams</a>
  <a id="3873" href="Ledger.Certs.html#3873" class="Generalizable">vs</a> <a id="3876" class="Symbol">:</a> <a id="3878" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3883" href="Ledger.GovernanceActions.html#8288" class="Record">GovVote</a>
  <a id="3893" href="Ledger.Certs.html#3893" class="Generalizable">poolParams</a> <a id="3904" class="Symbol">:</a> <a id="3906" href="Ledger.Certs.html#898" class="Record">PoolParams</a>
  <a id="3919" href="Ledger.Certs.html#3919" class="Generalizable">wdrls</a>  <a id="3926" class="Symbol">:</a> <a id="3928" href="Ledger.Address.html#1583" class="Record">RwdAddr</a> <a id="3936" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3938" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3945" href="Ledger.Certs.html#3945" class="Generalizable">dreps</a> <a id="3951" class="Symbol">:</a> <a id="3953" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="3964" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3966" href="Ledger.Types.Epoch.html#335" class="Function">Epoch</a>
  <a id="3974" href="Ledger.Certs.html#3974" class="Generalizable">ccHotKeys</a> <a id="3984" class="Symbol">:</a> <a id="3986" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="3997" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="3999" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4005" href="Ledger.Address.html#764" class="Datatype">Credential</a>
  <a id="4018" href="Ledger.Certs.html#4018" class="Generalizable">voteDelegs</a> <a id="4029" class="Symbol">:</a> <a id="4031" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="4042" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="4044" href="Ledger.GovernanceActions.html#1215" class="Datatype">VDeleg</a>
  <a id="4053" href="Ledger.Certs.html#4053" class="Generalizable">stakeDelegs</a> <a id="4065" class="Symbol">:</a> <a id="4067" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="4078" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="4080" href="Ledger.Crypto.html#1629" class="Function">KeyHash</a>
  <a id="4090" href="Ledger.Certs.html#4090" class="Generalizable">rewards</a> <a id="4098" class="Symbol">:</a> <a id="4100" href="Ledger.Address.html#764" class="Datatype">Credential</a> <a id="4111" href="Ledger.Set.Theory.html#1515" class="Function Operator">⇀</a> <a id="4113" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="4120" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="4125" class="Symbol">:</a> <a id="4127" href="Ledger.Certs.html#590" class="Function">Deposits</a>
<a id="4136" class="Markup">\end{code}</a><a id="4146" class="Background">

\subsection{Removal of Pointer Addresses, Genesis Delegations and MIR Certificates}

In the Conway era, support for pointer addresses, genesis delegations
and MIR certificates is removed. In \DState, this means that the four
fields relating to those features are no longer present, and \DelegEnv
contains none of the fields it used to in the Shelley era.

Note that pointer addresses are still usable, only their staking
functionality has been retired. So all funds locked behind pointer
addresses are still accessible, they just don&#39;t count towards the
stake distribution anymore. Genesis delegations and MIR certificates
have been superceded by the new governance mechanisms, in particular
the \TreasuryWdrl governance action in case of the MIR certificates.

\subsection{Explicit Deposits}

Registration and deregistration of staking credentials are now
required to explicitly state the deposit that is being paid or
refunded. This aligns them better with other design decisions such as
having explicit transaction fees and helps make this information
visible to light clients and hardware wallets. While not shown in the
figures, the old certificates without explicit deposits will still be
supported for some time for backwards compatibility.

\subsection{Delegation}

Registered credentials can now delegate to a DRep as well as to a
stake pool. This is achieved by giving the \delegate certificate two
optional fields, corresponding to a DRep and stake pool. Stake can be
delegated for voting and block production simultaneously, since these
are two separate features. In fact, preventing this could weaken the
security of the chain, since security relies on high participation of
honest stake holders.

\subsection{Governance Certificate Rules}

The rules for transition systems dealing with individual certificates
are defined in
\begin{NoConway}
Figures~\ref{fig:sts:aux-cert-deleg}, \ref{fig:sts:aux-cert-pool}
\end{NoConway}
\begin{Conway}
Figures~\ref{fig:sts:aux-cert-deleg}
\end{Conway}
\ and~\ref{fig:sts:aux-cert-gov}. GOVCERT
deals with the new certificates relating to DReps and the
constitutional committee.

\begin{itemize}
\item \GOVCERTregdrep registers (or re-registers) a DRep. In case of
  registation, a deposit needs to be paid. Either way, the activity
  period of the DRep is reset.
\item \GOVCERTderegdrep deregisters a DRep.
\item \GOVCERTccreghot registers a ``hot&#39;&#39; credential for constitutional
  committee members.\footnote{By ``hot&#39;&#39; and ``cold&#39;&#39; credentials we mean
    the following: a cold credential is used to register a hot credential,
    and then the hot credential is used for voting. The idea is that the
    access to the cold credential is kept in a secure location, while the
    hot credential is more conveniently accessed.  If the hot credential
    is compromised, it can be changed using the cold credential.}
  We check that the cold key did not previously
  resign from the committee. Note that we intentionally do not check
  if the cold key is actually part of the committee; if it isn&#39;t, then
  the corresponding hot key does not carry any voting power. By allowing
  this, a newly elected member of the constitutional committee can
  immediately delegate their vote to a hot key and use it to vote. Since
  votes are counted after previous actions have been enacted, this allows
  constitutional committee members to act without a delay of one epoch.
\end{itemize}

\begin{figure*}[h]
\begin{AgdaMultiCode}
</a><a id="7616" class="Markup">\begin{code}[hide]</a>
<a id="7635" class="Keyword">data</a>
<a id="7640" class="Markup">\end{code}</a><a id="7650" class="Background">
</a><a id="7651" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,DELEG⦈_"></a><a id="7666" href="Ledger.Certs.html#7666" class="Datatype Operator">_⊢_⇀⦇_,DELEG⦈_</a>     <a id="7685" class="Symbol">:</a> <a id="7687" href="Ledger.Certs.html#3006" class="Record">DelegEnv</a> <a id="7696" class="Symbol">→</a> <a id="7698" href="Ledger.Certs.html#2146" class="Record">DState</a> <a id="7705" class="Symbol">→</a> <a id="7707" href="Ledger.Certs.html#1056" class="Datatype">DCert</a> <a id="7713" class="Symbol">→</a> <a id="7715" href="Ledger.Certs.html#2146" class="Record">DState</a> <a id="7722" class="Symbol">→</a> <a id="7724" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="7729" class="Markup">\end{code}</a><a id="7739" class="Background">
</a><a id="7740" class="Markup">\begin{code}[hide]</a>
<a id="7759" class="Keyword">data</a>
<a id="7764" class="Markup">\end{code}</a><a id="7774" class="Background">
</a><a id="7775" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,POOL⦈_"></a><a id="7790" href="Ledger.Certs.html#7790" class="Datatype Operator">_⊢_⇀⦇_,POOL⦈_</a>      <a id="7809" class="Symbol">:</a> <a id="7811" href="Ledger.Certs.html#3220" class="Function">PoolEnv</a> <a id="7819" class="Symbol">→</a> <a id="7821" href="Ledger.Certs.html#2416" class="Record">PState</a> <a id="7828" class="Symbol">→</a> <a id="7830" href="Ledger.Certs.html#1056" class="Datatype">DCert</a> <a id="7836" class="Symbol">→</a> <a id="7838" href="Ledger.Certs.html#2416" class="Record">PState</a> <a id="7845" class="Symbol">→</a> <a id="7847" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="7852" class="Markup">\end{code}</a><a id="7862" class="Background">
</a><a id="7863" class="Markup">\begin{code}[hide]</a>
<a id="7882" class="Keyword">data</a>
<a id="7887" class="Markup">\end{code}</a><a id="7897" class="Background">
</a><a id="7898" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,GOVCERT⦈_"></a><a id="7913" href="Ledger.Certs.html#7913" class="Datatype Operator">_⊢_⇀⦇_,GOVCERT⦈_</a>   <a id="7932" class="Symbol">:</a> <a id="7934" href="Ledger.Certs.html#3198" class="Function">GovCertEnv</a> <a id="7945" class="Symbol">→</a> <a id="7947" href="Ledger.Certs.html#2635" class="Record">GState</a> <a id="7954" class="Symbol">→</a> <a id="7956" href="Ledger.Certs.html#1056" class="Datatype">DCert</a> <a id="7962" class="Symbol">→</a> <a id="7964" href="Ledger.Certs.html#2635" class="Record">GState</a> <a id="7971" class="Symbol">→</a> <a id="7973" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="7978" class="Markup">\end{code}</a><a id="7988" class="Background">
</a><a id="7989" class="Markup">\begin{code}[hide]</a>
<a id="8008" class="Keyword">data</a>
<a id="8013" class="Markup">\end{code}</a><a id="8023" class="Background">
</a><a id="8024" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,CERT⦈_"></a><a id="8039" href="Ledger.Certs.html#8039" class="Datatype Operator">_⊢_⇀⦇_,CERT⦈_</a>      <a id="8058" class="Symbol">:</a> <a id="8060" href="Ledger.Certs.html#1897" class="Record">CertEnv</a> <a id="8068" class="Symbol">→</a> <a id="8070" href="Ledger.Certs.html#2829" class="Record">CertState</a> <a id="8080" class="Symbol">→</a> <a id="8082" href="Ledger.Certs.html#1056" class="Datatype">DCert</a> <a id="8088" class="Symbol">→</a> <a id="8090" href="Ledger.Certs.html#2829" class="Record">CertState</a> <a id="8100" class="Symbol">→</a> <a id="8102" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8107" class="Markup">\end{code}</a><a id="8117" class="Background">
</a><a id="8118" class="Markup">\begin{code}[hide]</a>
<a id="8137" class="Keyword">data</a>
<a id="8142" class="Markup">\end{code}</a><a id="8152" class="Background">
</a><a id="8153" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,CERTBASE⦈_"></a><a id="8168" href="Ledger.Certs.html#8168" class="Datatype Operator">_⊢_⇀⦇_,CERTBASE⦈_</a>  <a id="8187" class="Symbol">:</a> <a id="8189" href="Ledger.Certs.html#1897" class="Record">CertEnv</a> <a id="8197" class="Symbol">→</a> <a id="8199" href="Ledger.Certs.html#2829" class="Record">CertState</a> <a id="8209" class="Symbol">→</a> <a id="8211" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="8213" class="Symbol">→</a> <a id="8215" href="Ledger.Certs.html#2829" class="Record">CertState</a> <a id="8225" class="Symbol">→</a> <a id="8227" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8232" class="Markup">\end{code}</a><a id="8242" class="Background">
</a><a id="8243" class="Markup">\begin{code}[hide]</a>
<a id="8262" class="Keyword">module</a> <a id="8269" href="Ledger.Certs.html#8269" class="Module">_</a> <a id="8271" class="Keyword">where</a>
<a id="8277" class="Markup">\end{code}</a><a id="8287" class="Background">
</a><a id="8288" class="Markup">\begin{code}</a>
  <a id="8303" href="Ledger.Certs.html#8303" class="Function Operator">_⊢_⇀⦇_,CERTS⦈_</a>     <a id="8322" class="Symbol">:</a> <a id="8324" href="Ledger.Certs.html#1897" class="Record">CertEnv</a> <a id="8332" class="Symbol">→</a> <a id="8334" href="Ledger.Certs.html#2829" class="Record">CertState</a> <a id="8344" class="Symbol">→</a> <a id="8346" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8351" href="Ledger.Certs.html#1056" class="Datatype">DCert</a> <a id="8357" class="Symbol">→</a> <a id="8359" href="Ledger.Certs.html#2829" class="Record">CertState</a> <a id="8369" class="Symbol">→</a> <a id="8371" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="8378" href="Ledger.Certs.html#8303" class="Function Operator">_⊢_⇀⦇_,CERTS⦈_</a> <a id="8393" class="Symbol">=</a> <a id="8395" href="Interface.STS.html#3353" class="Function">ReflexiveTransitiveClosureᵇ</a> <a id="8423" href="Ledger.Certs.html#8168" class="Datatype Operator">_⊢_⇀⦇_,CERTBASE⦈_</a> <a id="8441" href="Ledger.Certs.html#8039" class="Datatype Operator">_⊢_⇀⦇_,CERT⦈_</a>
<a id="8455" class="Markup">\end{code}</a><a id="8465" class="Background">
\end{AgdaMultiCode}
\caption{Types for the transition systems relating to certificates}
\label{fig:sts:certs-types}
\end{figure*}


\begin{figure*}[h]
\begin{AgdaSuppressSpace}
</a><a id="8643" class="Markup">\begin{code}[hide]</a>
<a id="8662" class="Keyword">data</a> <a id="8667" href="Ledger.Certs.html#7666" class="Datatype Operator">_⊢_⇀⦇_,DELEG⦈_</a> <a id="8682" class="Keyword">where</a>
<a id="8688" class="Markup">\end{code}</a><a id="8698" class="Background">
</a><a id="8699" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,DELEG⦈_.DELEG-delegate"></a><a id="8714" href="Ledger.Certs.html#8714" class="InductiveConstructor">DELEG-delegate</a> <a id="8729" class="Symbol">:</a> <a id="8731" class="Keyword">let</a> <a id="8735" class="Keyword">open</a> <a id="8740" href="Ledger.PParams.html#2073" class="Module">PParams</a> <a id="8748" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="8751" class="Keyword">in</a>
    <a id="8758" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="8760" class="Symbol">(</a><a id="8761" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="8763" href="Interface.IsSet.html#480" class="Function Operator">∉</a> <a id="8765" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="8769" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a> <a id="8774" class="Symbol">→</a> <a id="8776" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="8778" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8780" href="Ledger.PParams.html#2724" class="Function">keyDeposit</a><a id="8790" class="Symbol">)</a>
    <a id="8796" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="8798" class="Symbol">(</a><a id="8799" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="8801" href="Interface.IsSet.html#476" class="Function Operator">∈</a> <a id="8803" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="8807" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a> <a id="8812" class="Symbol">→</a> <a id="8814" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="8816" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8818" class="Number">0</a><a id="8819" class="Symbol">)</a>
    <a id="8825" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="8827" href="Ledger.Certs.html#3741" class="Generalizable">mkh</a> <a id="8831" href="Interface.IsSet.html#476" class="Function Operator">∈</a> <a id="8833" href="Ledger.Set.Theory.html#413" class="Function">mapˢ</a> <a id="8838" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8843" class="Symbol">(</a><a id="8844" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="8848" href="Ledger.Certs.html#3426" class="Generalizable">pools</a><a id="8853" class="Symbol">)</a> <a id="8855" href="Axiom.Set.html#8665" class="Function Operator">∪</a> <a id="8857" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="8859" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="8867" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a>
      <a id="8875" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="8914" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">⟦</a> <a id="8916" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="8919" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">,</a> <a id="8921" href="Ledger.Certs.html#3426" class="Generalizable">pools</a> <a id="8927" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">,</a> <a id="8929" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="8934" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">⟧ᵈᵉ</a> <a id="8938" href="Ledger.Certs.html#7666" class="Datatype Operator">⊢</a>
        <a id="8948" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟦</a> <a id="8950" href="Ledger.Certs.html#3457" class="Generalizable">vDelegs</a> <a id="8958" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="8960" href="Ledger.Certs.html#3489" class="Generalizable">sDelegs</a> <a id="8968" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="8970" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a> <a id="8975" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟧ᵈ</a> <a id="8978" href="Ledger.Certs.html#7666" class="Datatype Operator">⇀⦇</a> <a id="8981" href="Ledger.Certs.html#1077" class="InductiveConstructor">delegate</a> <a id="8990" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="8992" href="Ledger.Certs.html#3679" class="Generalizable">mv</a> <a id="8995" href="Ledger.Certs.html#3741" class="Generalizable">mkh</a> <a id="8999" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="9001" href="Ledger.Certs.html#7666" class="Datatype Operator">,DELEG⦈</a>
        <a id="9017" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟦</a> <a id="9019" href="Axiom.Set.Map.html#6873" class="Function">insertIfJust</a> <a id="9032" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9034" href="Ledger.Certs.html#3679" class="Generalizable">mv</a> <a id="9037" href="Ledger.Certs.html#3457" class="Generalizable">vDelegs</a> <a id="9045" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="9047" href="Axiom.Set.Map.html#6873" class="Function">insertIfJust</a> <a id="9060" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9062" href="Ledger.Certs.html#3741" class="Generalizable">mkh</a> <a id="9066" href="Ledger.Certs.html#3489" class="Generalizable">sDelegs</a> <a id="9074" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="9076" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a> <a id="9081" href="Axiom.Set.Map.html#6390" class="Function Operator">∪ˡ</a> <a id="9084" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="9086" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9088" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9090" class="Number">0</a> <a id="9092" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="9094" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟧ᵈ</a>

  <a id="_⊢_⇀⦇_,DELEG⦈_.DELEG-dereg"></a><a id="9100" href="Ledger.Certs.html#9100" class="InductiveConstructor">DELEG-dereg</a> <a id="9112" class="Symbol">:</a>
    <a id="9118" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="9120" class="Symbol">(</a><a id="9121" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9123" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9125" class="Number">0</a><a id="9126" class="Symbol">)</a> <a id="9128" href="Interface.IsSet.html#476" class="Function Operator">∈</a> <a id="9130" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a>
    <a id="9139" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="9141" class="Symbol">(</a><a id="9142" href="Ledger.Certs.html#379" class="InductiveConstructor">CredentialDeposit</a> <a id="9160" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9162" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9164" href="Ledger.Certs.html#3699" class="Generalizable">d</a><a id="9165" class="Symbol">)</a> <a id="9167" href="Interface.IsSet.html#476" class="Function Operator">∈</a> <a id="9169" href="Ledger.Certs.html#4120" class="Generalizable">deps</a>
      <a id="9180" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="9219" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">⟦</a> <a id="9221" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="9224" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">,</a> <a id="9226" href="Ledger.Certs.html#3426" class="Generalizable">pools</a> <a id="9232" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">,</a> <a id="9234" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="9239" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">⟧ᵈᵉ</a> <a id="9243" href="Ledger.Certs.html#7666" class="Datatype Operator">⊢</a>  <a id="9246" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟦</a> <a id="9248" href="Ledger.Certs.html#3457" class="Generalizable">vDelegs</a> <a id="9256" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="9258" href="Ledger.Certs.html#3489" class="Generalizable">sDelegs</a> <a id="9266" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="9268" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a> <a id="9273" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟧ᵈ</a> <a id="9276" href="Ledger.Certs.html#7666" class="Datatype Operator">⇀⦇</a> <a id="9279" href="Ledger.Certs.html#1150" class="InductiveConstructor">dereg</a> <a id="9285" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9287" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="9289" href="Ledger.Certs.html#7666" class="Datatype Operator">,DELEG⦈</a>
                          <a id="9323" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟦</a> <a id="9325" href="Ledger.Certs.html#3457" class="Generalizable">vDelegs</a> <a id="9333" href="Axiom.Set.Map.html#10177" class="Function Operator">∣</a> <a id="9335" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="9337" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9339" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="9341" href="Axiom.Set.Map.html#10177" class="Function Operator">ᶜ</a> <a id="9343" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="9345" href="Ledger.Certs.html#3489" class="Generalizable">sDelegs</a> <a id="9353" href="Axiom.Set.Map.html#10177" class="Function Operator">∣</a> <a id="9355" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="9357" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9359" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="9361" href="Axiom.Set.Map.html#10177" class="Function Operator">ᶜ</a> <a id="9363" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="9365" href="Ledger.Certs.html#3592" class="Generalizable">rwds</a> <a id="9370" href="Axiom.Set.Map.html#10177" class="Function Operator">∣</a> <a id="9372" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="9374" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="9376" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="9378" href="Axiom.Set.Map.html#10177" class="Function Operator">ᶜ</a> <a id="9380" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟧ᵈ</a>
<a id="9383" class="Markup">\end{code}</a><a id="9393" class="Background">
\end{AgdaSuppressSpace}
\caption{Auxiliary DELEG transition system}
\label{fig:sts:aux-cert-deleg}
\end{figure*}

\begin{NoConway}
\begin{figure*}[h]
\begin{AgdaSuppressSpace}
</a><a id="9570" class="Markup">\begin{code}[hide]</a>
<a id="9589" class="Keyword">data</a> <a id="9594" href="Ledger.Certs.html#7790" class="Datatype Operator">_⊢_⇀⦇_,POOL⦈_</a> <a id="9608" class="Keyword">where</a>
<a id="9614" class="Markup">\end{code}</a><a id="9624" class="Background">
</a><a id="9625" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,POOL⦈_.POOL-regpool"></a><a id="9640" href="Ledger.Certs.html#9640" class="InductiveConstructor">POOL-regpool</a> <a id="9653" class="Symbol">:</a>
    <a id="9659" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="9661" href="Ledger.Certs.html#3722" class="Generalizable">kh</a> <a id="9664" href="Interface.IsSet.html#480" class="Function Operator">∉</a> <a id="9666" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="9670" href="Ledger.Certs.html#3426" class="Generalizable">pools</a>
      <a id="9682" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="9721" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="9724" href="Ledger.Certs.html#7790" class="Datatype Operator">⊢</a>  <a id="9727" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟦</a> <a id="9729" href="Ledger.Certs.html#3426" class="Generalizable">pools</a> <a id="9735" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">,</a> <a id="9737" href="Ledger.Certs.html#3522" class="Generalizable">retiring</a> <a id="9746" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟧ᵖ</a> <a id="9749" href="Ledger.Certs.html#7790" class="Datatype Operator">⇀⦇</a> <a id="9752" href="Ledger.Certs.html#1192" class="InductiveConstructor">regpool</a> <a id="9760" href="Ledger.Certs.html#3722" class="Generalizable">kh</a> <a id="9763" href="Ledger.Certs.html#3893" class="Generalizable">poolParams</a> <a id="9774" href="Ledger.Certs.html#7790" class="Datatype Operator">,POOL⦈</a>
            <a id="9793" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟦</a> <a id="9795" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="9797" href="Ledger.Certs.html#3722" class="Generalizable">kh</a> <a id="9800" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9802" href="Ledger.Certs.html#3893" class="Generalizable">poolParams</a> <a id="9813" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="9815" href="Axiom.Set.Map.html#6390" class="Function Operator">∪ˡ</a> <a id="9818" href="Ledger.Certs.html#3426" class="Generalizable">pools</a> <a id="9824" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">,</a> <a id="9826" href="Ledger.Certs.html#3522" class="Generalizable">retiring</a> <a id="9835" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟧ᵖ</a>

  <a id="_⊢_⇀⦇_,POOL⦈_.POOL-retirepool"></a><a id="9841" href="Ledger.Certs.html#9841" class="InductiveConstructor">POOL-retirepool</a> <a id="9857" class="Symbol">:</a>
    <a id="9863" href="Interface.STS.html#216" class="Function Operator">────────────────────────────────</a>
    <a id="9900" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="9903" href="Ledger.Certs.html#7790" class="Datatype Operator">⊢</a> <a id="9905" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟦</a> <a id="9907" href="Ledger.Certs.html#3426" class="Generalizable">pools</a> <a id="9913" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">,</a> <a id="9915" href="Ledger.Certs.html#3522" class="Generalizable">retiring</a> <a id="9924" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟧ᵖ</a> <a id="9927" href="Ledger.Certs.html#7790" class="Datatype Operator">⇀⦇</a> <a id="9930" href="Ledger.Certs.html#1237" class="InductiveConstructor">retirepool</a> <a id="9941" href="Ledger.Certs.html#3722" class="Generalizable">kh</a> <a id="9944" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="9946" href="Ledger.Certs.html#7790" class="Datatype Operator">,POOL⦈</a> <a id="9953" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟦</a> <a id="9955" href="Ledger.Certs.html#3426" class="Generalizable">pools</a> <a id="9961" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">,</a> <a id="9963" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="9965" href="Ledger.Certs.html#3722" class="Generalizable">kh</a> <a id="9968" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9970" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="9972" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="9974" href="Axiom.Set.Map.html#6390" class="Function Operator">∪ˡ</a> <a id="9977" href="Ledger.Certs.html#3522" class="Generalizable">retiring</a> <a id="9986" href="Ledger.Certs.html#2480" class="InductiveConstructor Operator">⟧ᵖ</a>
<a id="9989" class="Markup">\end{code}</a><a id="9999" class="Background">
\end{AgdaSuppressSpace}
\caption{Auxiliary POOL transition system}
\label{fig:sts:aux-cert-pool}
\end{figure*}
\end{NoConway}

\begin{figure*}[h]
\begin{AgdaSuppressSpace}
</a><a id="10172" class="Markup">\begin{code}[hide]</a>
<a id="10191" class="Keyword">data</a> <a id="10196" href="Ledger.Certs.html#7913" class="Datatype Operator">_⊢_⇀⦇_,GOVCERT⦈_</a> <a id="10213" class="Keyword">where</a>
<a id="10219" class="Markup">\end{code}</a><a id="10229" class="Background">
</a><a id="10230" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,GOVCERT⦈_.GOVCERT-regdrep"></a><a id="10245" href="Ledger.Certs.html#10245" class="InductiveConstructor">GOVCERT-regdrep</a> <a id="10261" class="Symbol">:</a> <a id="10263" class="Symbol">∀</a> <a id="10265" class="Symbol">{</a><a id="10266" href="Ledger.Certs.html#10266" class="Bound">pp</a><a id="10268" class="Symbol">}</a> <a id="10270" class="Symbol">→</a> <a id="10272" class="Keyword">let</a> <a id="10276" class="Keyword">open</a> <a id="10281" href="Ledger.PParams.html#2073" class="Module">PParams</a> <a id="10289" href="Ledger.Certs.html#10266" class="Bound">pp</a> <a id="10292" class="Keyword">in</a>
    <a id="10299" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="10301" class="Symbol">(</a><a id="10302" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="10304" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="10306" href="Ledger.PParams.html#3790" class="Field">drepDeposit</a> <a id="10318" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10320" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10322" href="Interface.IsSet.html#480" class="Function Operator">∉</a> <a id="10324" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="10328" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a><a id="10333" class="Symbol">)</a> <a id="10335" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="10337" class="Symbol">(</a><a id="10338" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="10340" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="10342" class="Number">0</a> <a id="10344" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10346" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10348" href="Interface.IsSet.html#476" class="Function Operator">∈</a> <a id="10350" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="10354" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a><a id="10359" class="Symbol">)</a>
      <a id="10367" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="10406" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟦</a> <a id="10408" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="10410" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="10412" href="Ledger.Certs.html#10266" class="Bound">pp</a> <a id="10415" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="10417" href="Ledger.Certs.html#3873" class="Generalizable">vs</a> <a id="10420" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="10422" href="Ledger.Certs.html#3919" class="Generalizable">wdrls</a> <a id="10428" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="10430" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="10435" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟧ᶜ</a> <a id="10438" href="Ledger.Certs.html#7913" class="Datatype Operator">⊢</a>  <a id="10441" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="10443" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a> <a id="10449" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="10451" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a> <a id="10458" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a> <a id="10461" href="Ledger.Certs.html#7913" class="Datatype Operator">⇀⦇</a> <a id="10464" href="Ledger.Certs.html#1277" class="InductiveConstructor">regdrep</a> <a id="10472" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10474" href="Ledger.Certs.html#3699" class="Generalizable">d</a> <a id="10476" href="Ledger.Certs.html#3376" class="Generalizable">an</a> <a id="10479" href="Ledger.Certs.html#7913" class="Datatype Operator">,GOVCERT⦈</a>
                                  <a id="10523" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="10525" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="10527" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10529" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10531" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="10533" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="10535" href="Ledger.PParams.html#3835" class="Field">drepActivity</a> <a id="10548" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="10550" href="Axiom.Set.Map.html#6390" class="Function Operator">∪ˡ</a> <a id="10553" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a> <a id="10559" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="10561" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a> <a id="10568" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a>

  <a id="_⊢_⇀⦇_,GOVCERT⦈_.GOVCERT-deregdrep"></a><a id="10574" href="Ledger.Certs.html#10574" class="InductiveConstructor">GOVCERT-deregdrep</a> <a id="10592" class="Symbol">:</a>
    <a id="10598" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="10600" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10602" href="Interface.IsSet.html#476" class="Function Operator">∈</a> <a id="10604" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="10608" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a>
      <a id="10620" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="10659" href="Ledger.Certs.html#3844" class="Generalizable">Γ</a> <a id="10661" href="Ledger.Certs.html#7913" class="Datatype Operator">⊢</a> <a id="10663" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="10665" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a> <a id="10671" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="10673" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a> <a id="10680" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a> <a id="10683" href="Ledger.Certs.html#7913" class="Datatype Operator">⇀⦇</a> <a id="10686" href="Ledger.Certs.html#1328" class="InductiveConstructor">deregdrep</a> <a id="10696" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10698" href="Ledger.Certs.html#7913" class="Datatype Operator">,GOVCERT⦈</a> <a id="10708" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="10710" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a> <a id="10716" href="Axiom.Set.Map.html#10177" class="Function Operator">∣</a> <a id="10718" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="10720" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10722" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="10724" href="Axiom.Set.Map.html#10177" class="Function Operator">ᶜ</a> <a id="10726" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="10728" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a> <a id="10735" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a>

  <a id="_⊢_⇀⦇_,GOVCERT⦈_.GOVCERT-ccreghot"></a><a id="10741" href="Ledger.Certs.html#10741" class="InductiveConstructor">GOVCERT-ccreghot</a> <a id="10758" class="Symbol">:</a>
    <a id="10764" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="10766" class="Symbol">(</a><a id="10767" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10769" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10771" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10778" class="Symbol">)</a> <a id="10780" href="Interface.IsSet.html#480" class="Function Operator">∉</a> <a id="10782" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a>
      <a id="10795" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="10834" href="Ledger.Certs.html#3844" class="Generalizable">Γ</a> <a id="10836" href="Ledger.Certs.html#7913" class="Datatype Operator">⊢</a> <a id="10838" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="10840" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a> <a id="10846" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="10848" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a> <a id="10855" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a> <a id="10858" href="Ledger.Certs.html#7913" class="Datatype Operator">⇀⦇</a> <a id="10861" href="Ledger.Certs.html#1363" class="InductiveConstructor">ccreghot</a> <a id="10870" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10872" href="Ledger.Certs.html#3655" class="Generalizable">mc</a> <a id="10875" href="Ledger.Certs.html#7913" class="Datatype Operator">,GOVCERT⦈</a> <a id="10885" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="10887" href="Ledger.Certs.html#3390" class="Generalizable">dReps</a> <a id="10893" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="10895" href="Interface.HasSingleton.html#348" class="Field Operator">❴</a> <a id="10897" href="Ledger.Certs.html#3635" class="Generalizable">c</a> <a id="10899" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10901" href="Ledger.Certs.html#3655" class="Generalizable">mc</a> <a id="10904" href="Interface.HasSingleton.html#348" class="Field Operator">❵</a> <a id="10906" href="Axiom.Set.Map.html#6390" class="Function Operator">∪ˡ</a> <a id="10909" href="Ledger.Certs.html#3551" class="Generalizable">ccKeys</a> <a id="10916" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a>
<a id="10919" class="Markup">\end{code}</a><a id="10929" class="Background">
\end{AgdaSuppressSpace}
\caption{Auxiliary GOVCERT transition system}
\label{fig:sts:aux-cert-gov}
\end{figure*}

Figure~\ref{fig:sts:certs} assembles the CERTS transition system by
bundling the previously defined pieces together into the CERT system,
and then taking the reflexive-transitive closure of CERT together with
CERTBASE as the base case. CERTBASE does the following:

\begin{itemize}
\item check the correctness of withdrawals and ensure that withdrawals
  only happen from credentials that have delegated their voting power;
\item set the rewards of the credentials that withdrew funds to zero;
\item and set the activity timer of all DReps that voted to \drepActivity
  epochs in the future.
\end{itemize}

\begin{figure*}[h]
\emph{CERT transitions}
\begin{AgdaSuppressSpace}
</a><a id="11720" class="Markup">\begin{code}[hide]</a>
<a id="11739" class="Keyword">data</a> <a id="11744" href="Ledger.Certs.html#8039" class="Datatype Operator">_⊢_⇀⦇_,CERT⦈_</a> <a id="11758" class="Keyword">where</a>
<a id="11764" class="Markup">\end{code}</a><a id="11774" class="Background">
</a><a id="11775" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,CERT⦈_.CERT-deleg"></a><a id="11790" href="Ledger.Certs.html#11790" class="InductiveConstructor">CERT-deleg</a> <a id="11801" class="Symbol">:</a>
    <a id="11807" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="11809" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">⟦</a> <a id="11811" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="11814" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">,</a> <a id="11816" href="Ledger.Certs.html#2523" class="Field">PState.pools</a> <a id="11829" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="11833" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">,</a> <a id="11835" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="11840" href="Ledger.Certs.html#3072" class="InductiveConstructor Operator">⟧ᵈᵉ</a> <a id="11844" href="Ledger.Certs.html#7666" class="Datatype Operator">⊢</a> <a id="11846" href="Ledger.Certs.html#3804" class="Generalizable">stᵈ</a> <a id="11850" href="Ledger.Certs.html#7666" class="Datatype Operator">⇀⦇</a> <a id="11853" href="Ledger.Certs.html#3619" class="Generalizable">dCert</a> <a id="11859" href="Ledger.Certs.html#7666" class="Datatype Operator">,DELEG⦈</a> <a id="11867" href="Ledger.Certs.html#3808" class="Generalizable">stᵈ&#39;</a>
      <a id="11878" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="11917" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟦</a> <a id="11919" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="11921" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="11923" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="11926" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="11928" href="Ledger.Certs.html#3873" class="Generalizable">vs</a> <a id="11931" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="11933" href="Ledger.Certs.html#3919" class="Generalizable">wdrls</a> <a id="11939" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="11941" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="11946" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟧ᶜ</a> <a id="11949" href="Ledger.Certs.html#8039" class="Datatype Operator">⊢</a> <a id="11951" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a> <a id="11953" href="Ledger.Certs.html#3804" class="Generalizable">stᵈ</a> <a id="11957" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="11959" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="11963" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="11965" href="Ledger.Certs.html#3784" class="Generalizable">stᵍ</a> <a id="11969" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a> <a id="11973" href="Ledger.Certs.html#8039" class="Datatype Operator">⇀⦇</a> <a id="11976" href="Ledger.Certs.html#3619" class="Generalizable">dCert</a> <a id="11982" href="Ledger.Certs.html#8039" class="Datatype Operator">,CERT⦈</a> <a id="11989" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a> <a id="11991" href="Ledger.Certs.html#3808" class="Generalizable">stᵈ&#39;</a> <a id="11996" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="11998" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="12002" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12004" href="Ledger.Certs.html#3784" class="Generalizable">stᵍ</a> <a id="12008" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a>

  <a id="_⊢_⇀⦇_,CERT⦈_.CERT-pool"></a><a id="12015" href="Ledger.Certs.html#12015" class="InductiveConstructor">CERT-pool</a> <a id="12025" class="Symbol">:</a>
    <a id="12031" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="12033" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="12036" href="Ledger.Certs.html#7790" class="Datatype Operator">⊢</a> <a id="12038" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="12042" href="Ledger.Certs.html#7790" class="Datatype Operator">⇀⦇</a> <a id="12045" href="Ledger.Certs.html#3619" class="Generalizable">dCert</a> <a id="12051" href="Ledger.Certs.html#7790" class="Datatype Operator">,POOL⦈</a> <a id="12058" href="Ledger.Certs.html#3828" class="Generalizable">stᵖ&#39;</a>
      <a id="12069" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="12108" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟦</a> <a id="12110" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="12112" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12114" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="12117" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12119" href="Ledger.Certs.html#3873" class="Generalizable">vs</a> <a id="12122" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12124" href="Ledger.Certs.html#3919" class="Generalizable">wdrls</a> <a id="12130" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12132" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="12137" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟧ᶜ</a> <a id="12140" href="Ledger.Certs.html#8039" class="Datatype Operator">⊢</a> <a id="12142" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a> <a id="12144" href="Ledger.Certs.html#3804" class="Generalizable">stᵈ</a> <a id="12148" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12150" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="12154" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12156" href="Ledger.Certs.html#3784" class="Generalizable">stᵍ</a> <a id="12160" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a> <a id="12164" href="Ledger.Certs.html#8039" class="Datatype Operator">⇀⦇</a> <a id="12167" href="Ledger.Certs.html#3619" class="Generalizable">dCert</a> <a id="12173" href="Ledger.Certs.html#8039" class="Datatype Operator">,CERT⦈</a> <a id="12180" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a> <a id="12182" href="Ledger.Certs.html#3804" class="Generalizable">stᵈ</a> <a id="12186" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12188" href="Ledger.Certs.html#3828" class="Generalizable">stᵖ&#39;</a> <a id="12193" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12195" href="Ledger.Certs.html#3784" class="Generalizable">stᵍ</a> <a id="12199" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a>

  <a id="_⊢_⇀⦇_,CERT⦈_.CERT-vdel"></a><a id="12206" href="Ledger.Certs.html#12206" class="InductiveConstructor">CERT-vdel</a> <a id="12216" class="Symbol">:</a>
    <a id="12222" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="12224" href="Ledger.Certs.html#3844" class="Generalizable">Γ</a> <a id="12226" href="Ledger.Certs.html#7913" class="Datatype Operator">⊢</a> <a id="12228" href="Ledger.Certs.html#3784" class="Generalizable">stᵍ</a> <a id="12232" href="Ledger.Certs.html#7913" class="Datatype Operator">⇀⦇</a> <a id="12235" href="Ledger.Certs.html#3619" class="Generalizable">dCert</a> <a id="12241" href="Ledger.Certs.html#7913" class="Datatype Operator">,GOVCERT⦈</a> <a id="12251" href="Ledger.Certs.html#3788" class="Generalizable">stᵍ&#39;</a>
      <a id="12262" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="12301" href="Ledger.Certs.html#3844" class="Generalizable">Γ</a> <a id="12303" href="Ledger.Certs.html#8039" class="Datatype Operator">⊢</a> <a id="12305" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a> <a id="12307" href="Ledger.Certs.html#3804" class="Generalizable">stᵈ</a> <a id="12311" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12313" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="12317" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12319" href="Ledger.Certs.html#3784" class="Generalizable">stᵍ</a> <a id="12323" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a> <a id="12327" href="Ledger.Certs.html#8039" class="Datatype Operator">⇀⦇</a> <a id="12330" href="Ledger.Certs.html#3619" class="Generalizable">dCert</a> <a id="12336" href="Ledger.Certs.html#8039" class="Datatype Operator">,CERT⦈</a> <a id="12343" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a> <a id="12345" href="Ledger.Certs.html#3804" class="Generalizable">stᵈ</a> <a id="12349" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12351" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="12355" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12357" href="Ledger.Certs.html#3788" class="Generalizable">stᵍ&#39;</a> <a id="12362" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a>
<a id="12366" class="Markup">\end{code}</a><a id="12376" class="Background">
\end{AgdaSuppressSpace}
\emph{CERTBASE transition}
\begin{AgdaSuppressSpace}
</a><a id="12454" class="Markup">\begin{code}[hide]</a>
<a id="12473" class="Keyword">data</a> <a id="12478" href="Ledger.Certs.html#8168" class="Datatype Operator">_⊢_⇀⦇_,CERTBASE⦈_</a> <a id="12496" class="Keyword">where</a>
<a id="12502" class="Markup">\end{code}</a><a id="12512" class="Background">
</a><a id="12513" class="Markup">\begin{code}</a>
  <a id="_⊢_⇀⦇_,CERTBASE⦈_.CERT-base"></a><a id="12528" href="Ledger.Certs.html#12528" class="InductiveConstructor">CERT-base</a> <a id="12538" class="Symbol">:</a>
    <a id="12544" class="Keyword">let</a> <a id="12548" class="Keyword">open</a> <a id="12553" href="Ledger.PParams.html#2073" class="Module">PParams</a> <a id="12561" href="Ledger.Certs.html#3858" class="Generalizable">pp</a>
        <a id="12572" href="Ledger.Certs.html#12572" class="Bound">refresh</a>         <a id="12588" class="Symbol">=</a> <a id="12590" href="Axiom.Set.html#7518" class="Function">mapPartial</a> <a id="12601" href="Ledger.GovernanceActions.html#9448" class="Function">getDRepVote</a> <a id="12613" class="Symbol">(</a><a id="12614" href="Axiom.Set.html#5431" class="Function">fromList</a> <a id="12623" href="Ledger.Certs.html#3873" class="Generalizable">vs</a><a id="12625" class="Symbol">)</a>
        <a id="12635" href="Ledger.Certs.html#12635" class="Bound">refreshedDReps</a>  <a id="12651" class="Symbol">=</a> <a id="12653" href="Axiom.Set.Map.html#10346" class="Function">mapValueRestricted</a> <a id="12672" class="Symbol">(</a><a id="12673" href="Function.Base.html#725" class="Function">const</a> <a id="12679" class="Symbol">(</a><a id="12680" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="12682" href="Interface.HasAdd.html#135" class="Field Operator">+</a> <a id="12684" href="Ledger.PParams.html#3835" class="Function">drepActivity</a><a id="12696" class="Symbol">))</a> <a id="12699" href="Ledger.Certs.html#3945" class="Generalizable">dreps</a> <a id="12705" href="Ledger.Certs.html#12572" class="Bound">refresh</a>
        <a id="12721" href="Ledger.Certs.html#12721" class="Bound">wdrlCreds</a>       <a id="12737" class="Symbol">=</a> <a id="12739" href="Ledger.Set.Theory.html#413" class="Function">mapˢ</a> <a id="12744" href="Ledger.Address.html#1637" class="Field">stake</a> <a id="12750" class="Symbol">(</a><a id="12751" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="12755" href="Ledger.Certs.html#3919" class="Generalizable">wdrls</a><a id="12760" class="Symbol">)</a>
    <a id="12766" class="Keyword">in</a>
    <a id="12773" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="12775" href="Ledger.Certs.html#12721" class="Bound">wdrlCreds</a> <a id="12785" href="Axiom.Set.html#1639" class="Function Operator">⊆</a> <a id="12787" href="Interface.IsSet.html#934" class="Function">dom</a> <a id="12791" href="Ledger.Certs.html#4018" class="Generalizable">voteDelegs</a>
    <a id="12806" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="12808" href="Ledger.Set.Theory.html#413" class="Function">mapˢ</a> <a id="12813" class="Symbol">(</a><a id="12814" href="Class.Bifunctor.html#1036" class="Function">map₁</a> <a id="12819" href="Ledger.Address.html#1637" class="Field">stake</a><a id="12824" class="Symbol">)</a> <a id="12826" class="Symbol">(</a><a id="12827" href="Ledger.Certs.html#3919" class="Generalizable">wdrls</a> <a id="12833" href="Axiom.Set.Map.html#2282" class="Function Operator">ˢ</a><a id="12834" class="Symbol">)</a> <a id="12836" href="Axiom.Set.html#1639" class="Function Operator">⊆</a> <a id="12838" href="Ledger.Certs.html#4090" class="Generalizable">rewards</a> <a id="12846" href="Axiom.Set.Map.html#2282" class="Function Operator">ˢ</a>
      <a id="12854" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="12893" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟦</a> <a id="12895" href="Ledger.Certs.html#3710" class="Generalizable">e</a> <a id="12897" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12899" href="Ledger.Certs.html#3858" class="Generalizable">pp</a> <a id="12902" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12904" href="Ledger.Certs.html#3873" class="Generalizable">vs</a> <a id="12907" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12909" href="Ledger.Certs.html#3919" class="Generalizable">wdrls</a> <a id="12915" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">,</a> <a id="12917" href="Ledger.Certs.html#4120" class="Generalizable">deps</a> <a id="12922" href="Ledger.Certs.html#1962" class="InductiveConstructor Operator">⟧ᶜ</a> <a id="12925" href="Ledger.Certs.html#8168" class="Datatype Operator">⊢</a> <a id="12927" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a>
        <a id="12937" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟦</a> <a id="12939" href="Ledger.Certs.html#4018" class="Generalizable">voteDelegs</a> <a id="12950" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="12952" href="Ledger.Certs.html#4053" class="Generalizable">stakeDelegs</a> <a id="12964" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="12966" href="Ledger.Certs.html#4090" class="Generalizable">rewards</a> <a id="12974" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟧ᵈ</a> <a id="12977" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12979" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a> <a id="12983" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="12985" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="12987" href="Ledger.Certs.html#3945" class="Generalizable">dreps</a> <a id="12993" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="12995" href="Ledger.Certs.html#3974" class="Generalizable">ccHotKeys</a> <a id="13005" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a> <a id="13008" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a> <a id="13012" href="Ledger.Certs.html#8168" class="Datatype Operator">⇀⦇</a> <a id="13015" class="Symbol">_</a> <a id="13017" href="Ledger.Certs.html#8168" class="Datatype Operator">,CERTBASE⦈</a> <a id="13028" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟦</a>
        <a id="13038" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟦</a> <a id="13040" href="Ledger.Certs.html#4018" class="Generalizable">voteDelegs</a> <a id="13051" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="13053" href="Ledger.Certs.html#4053" class="Generalizable">stakeDelegs</a> <a id="13065" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">,</a> <a id="13067" href="Axiom.Set.Map.html#8835" class="Function">constMap</a> <a id="13076" href="Ledger.Certs.html#12721" class="Bound">wdrlCreds</a> <a id="13086" class="Number">0</a> <a id="13088" href="Axiom.Set.Map.html#6390" class="Function Operator">∪ˡ</a> <a id="13091" href="Ledger.Certs.html#4090" class="Generalizable">rewards</a> <a id="13099" href="Ledger.Certs.html#2210" class="InductiveConstructor Operator">⟧ᵈ</a>
        <a id="13110" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="13112" href="Ledger.Certs.html#3824" class="Generalizable">stᵖ</a>
        <a id="13124" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">,</a> <a id="13126" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟦</a> <a id="13128" href="Ledger.Certs.html#12635" class="Bound">refreshedDReps</a> <a id="13143" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">,</a> <a id="13145" href="Ledger.Certs.html#3974" class="Generalizable">ccHotKeys</a> <a id="13155" href="Ledger.Certs.html#2699" class="InductiveConstructor Operator">⟧ᵛ</a> <a id="13158" href="Ledger.Certs.html#2896" class="InductiveConstructor Operator">⟧ᶜˢ</a>
<a id="13162" class="Markup">\end{code}</a><a id="13172" class="Background">
\end{AgdaSuppressSpace}
\caption{CERTS rules}
\label{fig:sts:certs}
\end{figure*}
</a></pre></body></html>