<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Foreign.HSLedger.Gov</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Ledger.Conway.Foreign.HSLedger.Gov.html" class="Module">Ledger.Conway.Foreign.HSLedger.Gov</a> <a id="43" class="Keyword">where</a>

<a id="50" class="Keyword">open</a> <a id="55" class="Keyword">import</a> <a id="62" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="77" class="Keyword">using</a> <a id="83" class="Symbol">(</a><a id="84" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="88" class="Symbol">)</a>

<a id="91" class="Keyword">open</a> <a id="96" class="Keyword">import</a> <a id="103" href="Ledger.Conway.Foreign.HSLedger.Address.html" class="Module">Ledger.Conway.Foreign.HSLedger.Address</a>
<a id="142" class="Keyword">open</a> <a id="147" class="Keyword">import</a> <a id="154" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html" class="Module">Ledger.Conway.Foreign.HSLedger.BaseTypes</a>
<a id="195" class="Keyword">open</a> <a id="200" class="Keyword">import</a> <a id="207" href="Ledger.Conway.Foreign.HSLedger.Enact.html" class="Module">Ledger.Conway.Foreign.HSLedger.Enact</a>
<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Ledger.Conway.Foreign.HSLedger.PParams.html" class="Module">Ledger.Conway.Foreign.HSLedger.PParams</a>
<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="Ledger.Conway.Foreign.HSLedger.Gov.Core.html" class="Module">Ledger.Conway.Foreign.HSLedger.Gov.Core</a>
<a id="347" class="Keyword">open</a> <a id="352" class="Keyword">import</a> <a id="359" href="Ledger.Conway.Foreign.HSLedger.Cert.html" class="Module">Ledger.Conway.Foreign.HSLedger.Cert</a>

<a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="440" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>
<a id="453" class="Keyword">open</a> <a id="458" class="Keyword">import</a> <a id="465" href="Ledger.Enact.html" class="Module">Ledger.Enact</a> <a id="478" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>
<a id="491" class="Keyword">open</a> <a id="496" class="Keyword">import</a> <a id="503" href="Ledger.Conway.Conformance.Gov.html" class="Module">Ledger.Conway.Conformance.Gov</a> <a id="533" href="Function.Base.html#4736" class="Function">it</a> <a id="536" href="Function.Base.html#4736" class="Function">it</a>
<a id="539" class="Keyword">import</a> <a id="546" href="Ledger.Gov.html" class="Module">Ledger.Gov</a> <a id="557" href="Function.Base.html#4736" class="Function">it</a> <a id="560" class="Symbol">as</a> <a id="L"></a><a id="563" href="Ledger.Conway.Foreign.HSLedger.Gov.html#563" class="Module">L</a>
<a id="565" class="Keyword">open</a> <a id="570" class="Keyword">import</a> <a id="577" href="Ledger.Gov.Properties.html" class="Module">Ledger.Gov.Properties</a> <a id="599" href="Function.Base.html#4736" class="Function">it</a>

<a id="603" class="Keyword">instance</a>

  <a id="HsTy-GovEnv"></a><a id="615" href="Ledger.Conway.Foreign.HSLedger.Gov.html#615" class="Function">HsTy-GovEnv</a> <a id="627" class="Symbol">=</a> <a id="629" href="Foreign.HaskellTypes.Deriving.html#11591" class="Macro Operator">autoHsType</a> <a id="640" href="Ledger.Conway.Conformance.Gov.html#703" class="Record">GovEnv</a> <a id="647" href="Foreign.HaskellTypes.Deriving.html#11591" class="Macro Operator">⊣</a> <a id="649" href="Foreign.HaskellTypes.Deriving.html#3298" class="Function">withConstructor</a> <a id="665" class="String">&quot;MkGovEnv&quot;</a>
                                  <a id="710" href="Foreign.HaskellTypes.Deriving.html#3584" class="Function Operator">•</a> <a id="712" href="Foreign.HaskellTypes.Deriving.html#3480" class="Function">fieldPrefix</a> <a id="724" class="String">&quot;ge&quot;</a>
  <a id="Conv-GovEnv"></a><a id="731" href="Ledger.Conway.Foreign.HSLedger.Gov.html#731" class="Function">Conv-GovEnv</a> <a id="743" class="Symbol">=</a> <a id="745" href="Foreign.Convertible.Deriving.html#6924" class="Macro">autoConvert</a> <a id="757" href="Ledger.Conway.Conformance.Gov.html#703" class="Record">GovEnv</a>


<a id="766" class="Comment">-- NeedsHash depends on a GovAction, so a little bit of manual work is</a>
<a id="837" class="Comment">-- required to get the types using it into Haskell.</a>

<a id="890" class="Comment">-- First we define to/fromNeedsHash that replaces the ⊤ cases by a</a>
<a id="957" class="Comment">-- dummy GovActionID.</a>

<a id="toNeedsHash"></a><a id="980" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="992" class="Symbol">:</a> <a id="994" class="Symbol">∀</a> <a id="996" class="Symbol">{</a><a id="997" href="Ledger.Conway.Foreign.HSLedger.Gov.html#997" class="Bound">action</a><a id="1003" class="Symbol">}</a> <a id="1005" class="Symbol">→</a> <a id="1007" href="Ledger.GovernanceActions.html#428" class="Function">GovActionID</a> <a id="1019" class="Symbol">→</a> <a id="1021" href="Ledger.GovernanceActions.html#1265" class="Function">NeedsHash</a> <a id="1031" href="Ledger.Conway.Foreign.HSLedger.Gov.html#997" class="Bound">action</a>
<a id="1038" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="1050" class="Symbol">{</a><a id="1051" href="Ledger.GovernanceActions.html#740" class="InductiveConstructor">NoConfidence</a><a id="1063" class="Symbol">}</a>           <a id="1075" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1075" class="Bound">x</a> <a id="1077" class="Symbol">=</a> <a id="1079" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1075" class="Bound">x</a>
<a id="1081" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="1093" class="Symbol">{</a><a id="1094" href="Ledger.GovernanceActions.html#815" class="InductiveConstructor">UpdateCommittee</a> <a id="1110" class="Symbol">_</a> <a id="1112" class="Symbol">_</a> <a id="1114" class="Symbol">_}</a>  <a id="1118" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1118" class="Bound">x</a> <a id="1120" class="Symbol">=</a> <a id="1122" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1118" class="Bound">x</a>
<a id="1124" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="1136" class="Symbol">{</a><a id="1137" href="Ledger.GovernanceActions.html#890" class="InductiveConstructor">NewConstitution</a> <a id="1153" class="Symbol">_</a> <a id="1155" class="Symbol">_}</a>    <a id="1161" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1161" class="Bound">x</a> <a id="1163" class="Symbol">=</a> <a id="1165" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1161" class="Bound">x</a>
<a id="1167" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="1179" class="Symbol">{</a><a id="1180" href="Ledger.GovernanceActions.html#965" class="InductiveConstructor">TriggerHF</a> <a id="1190" class="Symbol">_}</a>            <a id="1204" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1204" class="Bound">x</a> <a id="1206" class="Symbol">=</a> <a id="1208" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1204" class="Bound">x</a>
<a id="1210" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="1222" class="Symbol">{</a><a id="1223" href="Ledger.GovernanceActions.html#1040" class="InductiveConstructor">ChangePParams</a> <a id="1237" class="Symbol">_}</a>        <a id="1247" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1247" class="Bound">x</a> <a id="1249" class="Symbol">=</a> <a id="1251" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1247" class="Bound">x</a>
<a id="1253" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="1265" class="Symbol">{</a><a id="1266" href="Ledger.GovernanceActions.html#1115" class="InductiveConstructor">TreasuryWdrl</a> <a id="1279" class="Symbol">_}</a>         <a id="1290" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1290" class="Bound">x</a> <a id="1292" class="Symbol">=</a> <a id="1294" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
<a id="1297" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a> <a id="1309" class="Symbol">{</a><a id="1310" href="Ledger.GovernanceActions.html#1190" class="InductiveConstructor">Info</a><a id="1314" class="Symbol">}</a>                   <a id="1334" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1334" class="Bound">x</a> <a id="1336" class="Symbol">=</a> <a id="1338" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>

<a id="fromNeedsHash"></a><a id="1342" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1356" class="Symbol">:</a> <a id="1358" class="Symbol">∀</a> <a id="1360" class="Symbol">{</a><a id="1361" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1361" class="Bound">action</a><a id="1367" class="Symbol">}</a> <a id="1369" class="Symbol">→</a> <a id="1371" href="Ledger.GovernanceActions.html#1265" class="Function">NeedsHash</a> <a id="1381" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1361" class="Bound">action</a> <a id="1388" class="Symbol">→</a> <a id="1390" href="Ledger.GovernanceActions.html#428" class="Function">GovActionID</a>
<a id="1402" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1416" class="Symbol">{</a><a id="1417" href="Ledger.GovernanceActions.html#740" class="InductiveConstructor">NoConfidence</a><a id="1429" class="Symbol">}</a>           <a id="1441" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1441" class="Bound">x</a> <a id="1443" class="Symbol">=</a> <a id="1445" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1441" class="Bound">x</a>
<a id="1447" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1461" class="Symbol">{</a><a id="1462" href="Ledger.GovernanceActions.html#815" class="InductiveConstructor">UpdateCommittee</a> <a id="1478" class="Symbol">_</a> <a id="1480" class="Symbol">_</a> <a id="1482" class="Symbol">_}</a>  <a id="1486" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1486" class="Bound">x</a> <a id="1488" class="Symbol">=</a> <a id="1490" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1486" class="Bound">x</a>
<a id="1492" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1506" class="Symbol">{</a><a id="1507" href="Ledger.GovernanceActions.html#890" class="InductiveConstructor">NewConstitution</a> <a id="1523" class="Symbol">_</a> <a id="1525" class="Symbol">_}</a>    <a id="1531" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1531" class="Bound">x</a> <a id="1533" class="Symbol">=</a> <a id="1535" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1531" class="Bound">x</a>
<a id="1537" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1551" class="Symbol">{</a><a id="1552" href="Ledger.GovernanceActions.html#965" class="InductiveConstructor">TriggerHF</a> <a id="1562" class="Symbol">_}</a>            <a id="1576" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1576" class="Bound">x</a> <a id="1578" class="Symbol">=</a> <a id="1580" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1576" class="Bound">x</a>
<a id="1582" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1596" class="Symbol">{</a><a id="1597" href="Ledger.GovernanceActions.html#1040" class="InductiveConstructor">ChangePParams</a> <a id="1611" class="Symbol">_}</a>        <a id="1621" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1621" class="Bound">x</a> <a id="1623" class="Symbol">=</a> <a id="1625" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1621" class="Bound">x</a>
<a id="1627" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1641" class="Symbol">{</a><a id="1642" href="Ledger.GovernanceActions.html#1115" class="InductiveConstructor">TreasuryWdrl</a> <a id="1655" class="Symbol">_}</a>         <a id="1666" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1666" class="Bound">x</a> <a id="1668" class="Symbol">=</a> <a id="1670" class="Number">0</a> <a id="1672" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1674" class="Number">0</a>
<a id="1676" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="1690" class="Symbol">{</a><a id="1691" href="Ledger.GovernanceActions.html#1190" class="InductiveConstructor">Info</a><a id="1695" class="Symbol">}</a>                   <a id="1715" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1715" class="Bound">x</a> <a id="1717" class="Symbol">=</a> <a id="1719" class="Number">0</a> <a id="1721" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1723" class="Number">0</a>

<a id="1726" class="Comment">-- Then we define non-dependent versions of the types that use</a>
<a id="1789" class="Comment">-- NeedsHash.</a>

<a id="1804" class="Keyword">record</a> <a id="GovProposal&#39;"></a><a id="1811" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1811" class="Record">GovProposal&#39;</a> <a id="1824" class="Symbol">:</a> <a id="1826" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1831" class="Keyword">where</a>
  <a id="1839" class="Keyword">field</a>
    <a id="GovProposal&#39;.action"></a><a id="1849" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1849" class="Field">action</a>      <a id="1861" class="Symbol">:</a> <a id="1863" href="Ledger.GovernanceActions.html#715" class="Datatype">GovAction</a>
    <a id="GovProposal&#39;.prevAction"></a><a id="1877" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1877" class="Field">prevAction</a>  <a id="1889" class="Symbol">:</a> <a id="1891" href="Ledger.GovernanceActions.html#428" class="Function">GovActionID</a>       <a id="1909" class="Comment">-- NeedsHash action</a>
    <a id="GovProposal&#39;.policy"></a><a id="1933" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1933" class="Field">policy</a>      <a id="1945" class="Symbol">:</a> <a id="1947" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1953" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>
    <a id="GovProposal&#39;.deposit"></a><a id="1968" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1968" class="Field">deposit</a>     <a id="1980" class="Symbol">:</a> <a id="1982" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="GovProposal&#39;.returnAddr"></a><a id="1991" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1991" class="Field">returnAddr</a>  <a id="2003" class="Symbol">:</a> <a id="2005" href="Ledger.Address.html#1211" class="Record">RwdAddr</a>
    <a id="GovProposal&#39;.anchor"></a><a id="2017" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2017" class="Field">anchor</a>      <a id="2029" class="Symbol">:</a> <a id="2031" href="Ledger.GovernanceActions.html#642" class="Record">Anchor</a>

<a id="2039" class="Keyword">record</a> <a id="GovActionState&#39;"></a><a id="2046" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2046" class="Record">GovActionState&#39;</a> <a id="2062" class="Symbol">:</a> <a id="2064" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2069" class="Keyword">where</a>
  <a id="2077" class="Keyword">field</a>
    <a id="GovActionState&#39;.votes"></a><a id="2087" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2087" class="Field">votes</a>       <a id="2099" class="Symbol">:</a> <a id="2101" href="Ledger.GovernanceActions.html#392" class="Function">Voter</a> <a id="2107" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2109" href="Ledger.GovernanceActions.html#1687" class="Datatype">Vote</a>
    <a id="GovActionState&#39;.returnAddr"></a><a id="2118" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2118" class="Field">returnAddr</a>  <a id="2130" class="Symbol">:</a> <a id="2132" href="Ledger.Address.html#1211" class="Record">RwdAddr</a>
    <a id="GovActionState&#39;.expiresIn"></a><a id="2144" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2144" class="Field">expiresIn</a>   <a id="2156" class="Symbol">:</a> <a id="2158" href="Ledger.Types.Epoch.html#476" class="Function">Epoch</a>
    <a id="GovActionState&#39;.action"></a><a id="2168" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2168" class="Field">action</a>      <a id="2180" class="Symbol">:</a> <a id="2182" href="Ledger.GovernanceActions.html#715" class="Datatype">GovAction</a>
    <a id="GovActionState&#39;.prevAction"></a><a id="2196" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2196" class="Field">prevAction</a>  <a id="2208" class="Symbol">:</a> <a id="2210" href="Ledger.GovernanceActions.html#428" class="Function">GovActionID</a>       <a id="2228" class="Comment">-- NeedsHash action</a>

<a id="2249" class="Comment">-- We can convert between the dependent and non-dependent versions</a>
<a id="2316" class="Comment">-- using to/fromNeedsHash.</a>

<a id="2344" class="Keyword">private</a>
  <a id="mkGovProposal&#39;"></a><a id="2354" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2354" class="Function">mkGovProposal&#39;</a> <a id="2369" class="Symbol">:</a> <a id="2371" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="2383" href="Ledger.GovernanceActions.html#1883" class="Record">GovProposal</a> <a id="2395" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1811" class="Record">GovProposal&#39;</a>
  <a id="2410" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2354" class="Function">mkGovProposal&#39;</a> <a id="2425" class="Symbol">=</a> <a id="2427" class="Symbol">λ</a> <a id="2429" class="Keyword">where</a>
    <a id="2439" class="Symbol">.</a><a id="2440" href="Foreign.Convertible.html#149" class="Field">to</a>   <a id="2445" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2445" class="Bound">p</a> <a id="2447" class="Symbol">→</a> <a id="2449" class="Keyword">let</a> <a id="2453" class="Keyword">module</a> <a id="p"></a><a id="2460" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2460" class="Module">p</a> <a id="2462" class="Symbol">=</a> <a id="2464" href="Ledger.GovernanceActions.html#1883" class="Module">GovProposal</a>  <a id="2477" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2445" class="Bound">p</a> <a id="2479" class="Keyword">in</a> <a id="2482" class="Keyword">record</a><a id="2488" class="Symbol">{</a> <a id="2490" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2460" class="Module">p</a><a id="2491" class="Symbol">;</a> <a id="2493" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1877" class="Field">prevAction</a> <a id="2504" class="Symbol">=</a> <a id="2506" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="2520" href="Ledger.GovernanceActions.html#1948" class="Field">p.prevAction</a> <a id="2533" class="Symbol">}</a>
    <a id="2539" class="Symbol">.</a><a id="2540" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2545" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2545" class="Bound">p</a> <a id="2547" class="Symbol">→</a> <a id="2549" class="Keyword">let</a> <a id="2553" class="Keyword">module</a> <a id="p"></a><a id="2560" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2560" class="Module">p</a> <a id="2562" class="Symbol">=</a> <a id="2564" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1811" class="Module">GovProposal&#39;</a> <a id="2577" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2545" class="Bound">p</a> <a id="2579" class="Keyword">in</a> <a id="2582" class="Keyword">record</a><a id="2588" class="Symbol">{</a> <a id="2590" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2560" class="Module">p</a><a id="2591" class="Symbol">;</a> <a id="2593" href="Ledger.GovernanceActions.html#1948" class="Field">prevAction</a> <a id="2604" class="Symbol">=</a> <a id="2606" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a>   <a id="2620" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1877" class="Field">p.prevAction</a> <a id="2633" class="Symbol">}</a>

  <a id="mkGovActionState&#39;"></a><a id="2638" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2638" class="Function">mkGovActionState&#39;</a> <a id="2656" class="Symbol">:</a> <a id="2658" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="2670" href="Ledger.GovernanceActions.html#2096" class="Record">GovActionState</a> <a id="2685" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2046" class="Record">GovActionState&#39;</a>
  <a id="2703" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2638" class="Function">mkGovActionState&#39;</a> <a id="2721" class="Symbol">=</a> <a id="2723" class="Symbol">λ</a> <a id="2725" class="Keyword">where</a>
    <a id="2735" class="Symbol">.</a><a id="2736" href="Foreign.Convertible.html#149" class="Field">to</a>   <a id="2741" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2741" class="Bound">s</a> <a id="2743" class="Symbol">→</a> <a id="2745" class="Keyword">let</a> <a id="2749" class="Keyword">module</a> <a id="s"></a><a id="2756" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2756" class="Module">s</a> <a id="2758" class="Symbol">=</a> <a id="2760" href="Ledger.GovernanceActions.html#2096" class="Module">GovActionState</a>  <a id="2776" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2741" class="Bound">s</a> <a id="2778" class="Keyword">in</a> <a id="2781" class="Keyword">record</a><a id="2787" class="Symbol">{</a> <a id="2789" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2756" class="Module">s</a><a id="2790" class="Symbol">;</a> <a id="2792" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2196" class="Field">prevAction</a> <a id="2803" class="Symbol">=</a> <a id="2805" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1342" class="Function">fromNeedsHash</a> <a id="2819" href="Ledger.GovernanceActions.html#2245" class="Field">s.prevAction</a> <a id="2832" class="Symbol">}</a>
    <a id="2838" class="Symbol">.</a><a id="2839" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2844" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2844" class="Bound">s</a> <a id="2846" class="Symbol">→</a> <a id="2848" class="Keyword">let</a> <a id="2852" class="Keyword">module</a> <a id="s"></a><a id="2859" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2859" class="Module">s</a> <a id="2861" class="Symbol">=</a> <a id="2863" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2046" class="Module">GovActionState&#39;</a> <a id="2879" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2844" class="Bound">s</a> <a id="2881" class="Keyword">in</a> <a id="2884" class="Keyword">record</a><a id="2890" class="Symbol">{</a> <a id="2892" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2859" class="Module">s</a><a id="2893" class="Symbol">;</a> <a id="2895" href="Ledger.GovernanceActions.html#2245" class="Field">prevAction</a> <a id="2906" class="Symbol">=</a> <a id="2908" href="Ledger.Conway.Foreign.HSLedger.Gov.html#980" class="Function">toNeedsHash</a>   <a id="2922" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2196" class="Field">s.prevAction</a> <a id="2935" class="Symbol">}</a>

<a id="2938" class="Comment">-- Auto-generated conversions for the non-dependent types</a>

<a id="2997" class="Keyword">instance</a>
  <a id="HsTy-GovProposal&#39;"></a><a id="3008" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3008" class="Function">HsTy-GovProposal&#39;</a> <a id="3026" class="Symbol">=</a> <a id="3028" href="Foreign.HaskellTypes.Deriving.html#11591" class="Macro Operator">autoHsType</a> <a id="3039" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1811" class="Record">GovProposal&#39;</a> <a id="3052" href="Foreign.HaskellTypes.Deriving.html#11591" class="Macro Operator">⊣</a> <a id="3054" href="Foreign.HaskellTypes.Deriving.html#3187" class="Function">withName</a> <a id="3063" class="String">&quot;GovProposal&quot;</a>
                                              <a id="3123" href="Foreign.HaskellTypes.Deriving.html#3584" class="Function Operator">•</a> <a id="3125" href="Foreign.HaskellTypes.Deriving.html#3298" class="Function">withConstructor</a> <a id="3141" class="String">&quot;MkGovProposal&quot;</a>
                                              <a id="3203" href="Foreign.HaskellTypes.Deriving.html#3584" class="Function Operator">•</a> <a id="3205" href="Foreign.HaskellTypes.Deriving.html#3480" class="Function">fieldPrefix</a> <a id="3217" class="String">&quot;gp&quot;</a>
  <a id="Conv-GovProposal&#39;"></a><a id="3224" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3224" class="Function">Conv-GovProposal&#39;</a> <a id="3242" class="Symbol">=</a> <a id="3244" href="Foreign.Convertible.Deriving.html#6924" class="Macro">autoConvert</a> <a id="3256" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1811" class="Record">GovProposal&#39;</a>

  <a id="HsTy-GovActionState&#39;"></a><a id="3272" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3272" class="Function">HsTy-GovActionState&#39;</a> <a id="3293" class="Symbol">=</a> <a id="3295" href="Foreign.HaskellTypes.Deriving.html#11591" class="Macro Operator">autoHsType</a> <a id="3306" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2046" class="Record">GovActionState&#39;</a> <a id="3322" href="Foreign.HaskellTypes.Deriving.html#11591" class="Macro Operator">⊣</a> <a id="3324" href="Foreign.HaskellTypes.Deriving.html#3187" class="Function">withName</a> <a id="3333" class="String">&quot;GovActionState&quot;</a>
                                                    <a id="3402" href="Foreign.HaskellTypes.Deriving.html#3584" class="Function Operator">•</a> <a id="3404" href="Foreign.HaskellTypes.Deriving.html#3298" class="Function">withConstructor</a> <a id="3420" class="String">&quot;MkGovActionState&quot;</a>
                                                    <a id="3491" href="Foreign.HaskellTypes.Deriving.html#3584" class="Function Operator">•</a> <a id="3493" href="Foreign.HaskellTypes.Deriving.html#3480" class="Function">fieldPrefix</a> <a id="3505" class="String">&quot;gas&quot;</a>
  <a id="Conv-GovActionState&#39;"></a><a id="3513" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3513" class="Function">Conv-GovActionState&#39;</a> <a id="3534" class="Symbol">=</a> <a id="3536" href="Foreign.Convertible.Deriving.html#6924" class="Macro">autoConvert</a> <a id="3548" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2046" class="Record">GovActionState&#39;</a>

<a id="3565" class="Comment">-- And finally we compose everything into conversions for the dependent types</a>

<a id="3644" class="Keyword">instance</a>
  <a id="HsTy-GovProposal"></a><a id="3655" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3655" class="Function">HsTy-GovProposal</a> <a id="3672" class="Symbol">=</a> <a id="3674" href="Foreign.HaskellTypes.html#676" class="Function">MkHsType</a> <a id="3683" href="Ledger.GovernanceActions.html#1883" class="Record">GovProposal</a> <a id="3695" class="Symbol">(</a><a id="3696" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="3703" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1811" class="Record">GovProposal&#39;</a><a id="3715" class="Symbol">)</a>
  <a id="Conv-GovProposal"></a><a id="3719" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3719" class="Function">Conv-GovProposal</a> <a id="3736" class="Symbol">=</a> <a id="3738" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2354" class="Function">mkGovProposal&#39;</a> <a id="3753" href="Foreign.Convertible.html#959" class="Function Operator">⨾</a> <a id="3755" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3224" class="Function">Conv-GovProposal&#39;</a>

  <a id="HsTy-GovActionState"></a><a id="3776" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3776" class="Function">HsTy-GovActionState</a> <a id="3796" class="Symbol">=</a> <a id="3798" href="Foreign.HaskellTypes.html#676" class="Function">MkHsType</a> <a id="3807" href="Ledger.GovernanceActions.html#2096" class="Record">GovActionState</a> <a id="3822" class="Symbol">(</a><a id="3823" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="3830" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2046" class="Record">GovActionState&#39;</a><a id="3845" class="Symbol">)</a>
  <a id="Conv-GovActionState"></a><a id="3849" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3849" class="Function">Conv-GovActionState</a> <a id="3869" class="Symbol">=</a> <a id="3871" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2638" class="Function">mkGovActionState&#39;</a> <a id="3889" href="Foreign.Convertible.html#959" class="Function Operator">⨾</a> <a id="3891" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3513" class="Function">Conv-GovActionState&#39;</a>

<a id="3913" class="Keyword">unquoteDecl</a> <a id="3925" class="Symbol">=</a> <a id="3927" class="Keyword">do</a>
  hsTypeAlias GovActionID
  hsTypeAlias GovState
  hsTypeAlias Voter

<a id="4000" class="Comment">-- Computational function</a>

<a id="gov-step"></a><a id="4027" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4027" class="Function">gov-step</a> <a id="4036" class="Symbol">:</a> <a id="4038" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="4045" class="Symbol">(</a><a id="4046" href="Ledger.Conway.Conformance.Gov.html#703" class="Record">GovEnv</a> <a id="4053" class="Symbol">→</a> <a id="4055" href="Ledger.Gov.html#1218" class="Function">GovState</a> <a id="4064" class="Symbol">→</a> <a id="4066" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4071" class="Symbol">(</a><a id="4072" href="Ledger.GovernanceActions.html#1738" class="Record">GovVote</a> <a id="4080" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4082" href="Ledger.GovernanceActions.html#1883" class="Record">GovProposal</a><a id="4093" class="Symbol">)</a> <a id="4095" class="Symbol">→</a> <a id="4097" href="Interface.ComputationalRelation.html#235" class="Datatype">ComputationResult</a> <a id="4115" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="4122" href="Ledger.Gov.html#1218" class="Function">GovState</a><a id="4130" class="Symbol">)</a>
<a id="4132" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4027" class="Function">gov-step</a> <a id="4141" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4141" class="Bound">Γ</a> <a id="4143" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4143" class="Bound">govSt</a> <a id="4149" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4149" class="Bound">gvps</a> <a id="4154" class="Symbol">=</a> <a id="4156" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="4159" class="Symbol">(</a><a id="4160" href="Interface.ComputationalRelation.html#2976" class="Function">compute</a> <a id="4168" href="Ledger.Gov.Properties.html#8086" class="Function">Computational-GOVS</a> <a id="4187" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="4189" href="Ledger.Conway.Conformance.Gov.html#735" class="Function">txid</a> <a id="4194" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4196" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4337" class="Function">e&#39;</a> <a id="4199" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4201" href="Ledger.Conway.Conformance.Gov.html#782" class="Function">pparams</a> <a id="4209" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4211" href="Ledger.Conway.Conformance.Gov.html#808" class="Function">ppolicy</a> <a id="4219" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4221" href="Ledger.Conway.Conformance.Gov.html#843" class="Function">enactState</a> <a id="4232" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4234" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="4237" href="Ledger.Conway.Conformance.Gov.html#872" class="Function">certState</a> <a id="4247" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4249" href="Ledger.Conway.Conformance.Gov.html#900" class="Function">rewardCreds</a> <a id="4261" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="4263" class="Symbol">(</a><a id="4264" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="4269" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4143" class="Bound">govSt</a><a id="4274" class="Symbol">)</a> <a id="4276" class="Symbol">(</a><a id="4277" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="4282" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4149" class="Bound">gvps</a><a id="4286" class="Symbol">))</a>
  <a id="4291" class="Keyword">where</a> <a id="4297" class="Keyword">open</a> <a id="4302" href="Ledger.Conway.Conformance.Gov.html#703" class="Module">GovEnv</a> <a id="4309" class="Symbol">(</a><a id="4310" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="4315" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4141" class="Bound">Γ</a><a id="4316" class="Symbol">)</a> <a id="4318" class="Keyword">renaming</a> <a id="4327" class="Symbol">(</a><a id="4328" href="Ledger.Conway.Conformance.Gov.html#758" class="Field">epoch</a> <a id="4334" class="Symbol">to</a> <a id="4337" class="Field">e&#39;</a><a id="4339" class="Symbol">)</a>

<a id="4342" class="Symbol">{-#</a> <a id="4346" class="Keyword">COMPILE</a> <a id="4354" class="Keyword">GHC</a> <a id="4358" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4027" class="Function">gov-step</a> <a id="4367" class="Pragma">as</a> <a id="4370" class="Pragma">govStep</a> <a id="4378" class="Symbol">#-}</a>
</pre></body></html>