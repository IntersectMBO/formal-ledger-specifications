<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Prelude.Numeric.UnitInterval</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Comment">-- Rational number in the unit interval.</a>
<a id="66" class="Keyword">module</a> <a id="73" href="Ledger.Prelude.Numeric.UnitInterval.html" class="Module">Ledger.Prelude.Numeric.UnitInterval</a> <a id="109" class="Keyword">where</a>

<a id="116" class="Keyword">open</a> <a id="121" class="Keyword">import</a> <a id="128" href="Prelude.html" class="Module">Prelude</a>
  <a id="138" class="Keyword">hiding</a> <a id="145" class="Symbol">(</a><a id="146" href="Data.Sum.Base.html#811" class="Function Operator">[_,_]</a><a id="151" class="Symbol">;</a> <a id="153" href="Data.List.Base.html#4907" class="Function Operator">[_]</a><a id="156" class="Symbol">;</a> <a id="158" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a><a id="161" class="Symbol">)</a>

<a id="164" class="Keyword">open</a> <a id="169" class="Keyword">import</a> <a id="176" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="197" class="Keyword">open</a> <a id="202" class="Keyword">import</a> <a id="209" href="Class.Show.html" class="Module">Class.Show</a> <a id="220" class="Keyword">using</a> <a id="226" class="Symbol">(</a><a id="227" href="Class.Show.Core.html#125" class="Record">Show</a><a id="231" class="Symbol">;</a> <a id="233" href="Class.Show.Core.html#187" class="Field">show</a><a id="237" class="Symbol">)</a>
<a id="239" class="Keyword">open</a> <a id="244" class="Keyword">import</a> <a id="251" href="Data.Irrelevant.html" class="Module">Data.Irrelevant</a> <a id="267" class="Keyword">using</a> <a id="273" class="Symbol">(</a><a id="274" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[_]</a><a id="277" class="Symbol">)</a>
<a id="279" class="Keyword">open</a> <a id="284" class="Keyword">import</a> <a id="291" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="305" class="Keyword">using</a> <a id="311" class="Symbol">(</a><a id="312" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="313" class="Symbol">;</a> <a id="315" href="Data.Rational.Base.html#2544" class="Datatype Operator">_≤_</a><a id="318" class="Symbol">;</a> <a id="320" href="Data.Rational.Properties.html#19598" class="Function Operator">_≤?_</a><a id="324" class="Symbol">;</a> <a id="326" href="Data.Rational.Base.html#6394" class="Function Operator">_*_</a><a id="329" class="Symbol">;</a> <a id="331" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a><a id="342" class="Symbol">)</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Data.Rational.Properties.html" class="Module">Data.Rational.Properties</a>
<a id="381" class="Keyword">open</a> <a id="386" class="Keyword">import</a> <a id="393" href="Data.Rational.Show.html" class="Module">Data.Rational.Show</a> <a id="412" class="Keyword">using</a> <a id="418" class="Symbol">()</a> <a id="421" class="Keyword">renaming</a> <a id="430" class="Symbol">(</a><a id="431" href="Data.Rational.Show.html#429" class="Function">show</a> <a id="436" class="Symbol">to</a> <a id="439" class="Function">ℚshow</a><a id="444" class="Symbol">)</a>
<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Data.Refinement.html" class="Module">Data.Refinement</a> <a id="474" class="Keyword">using</a> <a id="480" class="Symbol">(</a><a id="481" href="Data.Refinement.Base.html#1082" class="Function">Refinement-syntax</a><a id="498" class="Symbol">;</a> <a id="500" href="Data.Refinement.Base.html#789" class="Field">value</a><a id="505" class="Symbol">;</a> <a id="507" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">_,_</a><a id="510" class="Symbol">)</a>

<a id="513" class="Keyword">open</a> <a id="518" href="Data.Rational.Properties.html#26415" class="Module">≤-Reasoning</a>

<a id="531" class="Comment">-- inUnitInterval predicate</a>
<a id="inUnitInterval"></a><a id="559" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="574" class="Symbol">:</a> <a id="576" class="Symbol">(</a><a id="577" href="Ledger.Prelude.Numeric.UnitInterval.html#577" class="Bound">x</a> <a id="579" class="Symbol">:</a> <a id="581" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="582" class="Symbol">)</a> <a id="584" class="Symbol">→</a> <a id="586" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="591" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="606" href="Ledger.Prelude.Numeric.UnitInterval.html#606" class="Bound">x</a> <a id="608" class="Symbol">=</a> <a id="610" class="Symbol">(</a><a id="611" class="Number">0</a> <a id="613" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="615" href="Ledger.Prelude.Numeric.UnitInterval.html#606" class="Bound">x</a><a id="616" class="Symbol">)</a> <a id="618" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="620" class="Symbol">(</a><a id="621" href="Ledger.Prelude.Numeric.UnitInterval.html#606" class="Bound">x</a> <a id="623" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="625" class="Number">1</a><a id="626" class="Symbol">)</a>

<a id="629" class="Comment">-- Decide whether a rational number is in the unit interval.</a>
<a id="isInUnitInterval"></a><a id="690" href="Ledger.Prelude.Numeric.UnitInterval.html#690" class="Function">isInUnitInterval</a> <a id="707" class="Symbol">:</a> <a id="709" class="Symbol">(</a><a id="710" href="Ledger.Prelude.Numeric.UnitInterval.html#710" class="Bound">x</a> <a id="712" class="Symbol">:</a> <a id="714" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="715" class="Symbol">)</a> <a id="717" class="Symbol">→</a> <a id="719" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="723" class="Symbol">(</a><a id="724" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="739" href="Ledger.Prelude.Numeric.UnitInterval.html#710" class="Bound">x</a><a id="740" class="Symbol">)</a>
<a id="742" href="Ledger.Prelude.Numeric.UnitInterval.html#690" class="Function">isInUnitInterval</a> <a id="759" href="Ledger.Prelude.Numeric.UnitInterval.html#759" class="Bound">x</a> <a id="761" class="Symbol">=</a> <a id="763" class="Symbol">(</a><a id="764" class="Number">0</a> <a id="766" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="769" href="Ledger.Prelude.Numeric.UnitInterval.html#759" class="Bound">x</a><a id="770" class="Symbol">)</a> <a id="772" href="Relation.Nullary.Decidable.Core.html#3432" class="Function Operator">×-dec</a> <a id="778" class="Symbol">(</a><a id="779" href="Ledger.Prelude.Numeric.UnitInterval.html#759" class="Bound">x</a> <a id="781" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="784" class="Number">1</a><a id="785" class="Symbol">)</a>

<a id="788" class="Comment">-- Multiplying with a number from the unit interval only decreases.</a>
<a id="inUnitInterval-*-≤y"></a><a id="856" href="Ledger.Prelude.Numeric.UnitInterval.html#856" class="Function">inUnitInterval-*-≤y</a> <a id="876" class="Symbol">:</a> <a id="878" class="Symbol">∀</a> <a id="880" class="Symbol">(</a><a id="881" href="Ledger.Prelude.Numeric.UnitInterval.html#881" class="Bound">x</a> <a id="883" href="Ledger.Prelude.Numeric.UnitInterval.html#883" class="Bound">y</a> <a id="885" class="Symbol">:</a> <a id="887" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="888" class="Symbol">)</a> <a id="890" class="Symbol">→</a> <a id="892" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="907" href="Ledger.Prelude.Numeric.UnitInterval.html#881" class="Bound">x</a> <a id="909" class="Symbol">→</a> <a id="911" class="Number">0</a> <a id="913" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="915" href="Ledger.Prelude.Numeric.UnitInterval.html#883" class="Bound">y</a> <a id="917" class="Symbol">→</a> <a id="919" href="Ledger.Prelude.Numeric.UnitInterval.html#881" class="Bound">x</a> <a id="921" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="923" href="Ledger.Prelude.Numeric.UnitInterval.html#883" class="Bound">y</a> <a id="925" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="927" href="Ledger.Prelude.Numeric.UnitInterval.html#883" class="Bound">y</a>
<a id="929" href="Ledger.Prelude.Numeric.UnitInterval.html#856" class="Function">inUnitInterval-*-≤y</a> <a id="949" href="Ledger.Prelude.Numeric.UnitInterval.html#949" class="Bound">x</a> <a id="951" href="Ledger.Prelude.Numeric.UnitInterval.html#951" class="Bound">y</a> <a id="953" class="Symbol">(</a><a id="954" href="Ledger.Prelude.Numeric.UnitInterval.html#954" class="Bound">0≤x</a> <a id="958" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="960" href="Ledger.Prelude.Numeric.UnitInterval.html#960" class="Bound">x≤1</a><a id="963" class="Symbol">)</a> <a id="965" href="Ledger.Prelude.Numeric.UnitInterval.html#965" class="Bound">0≤y</a> <a id="969" class="Symbol">=</a>
  <a id="973" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="983" href="Ledger.Prelude.Numeric.UnitInterval.html#949" class="Bound">x</a> <a id="985" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="987" href="Ledger.Prelude.Numeric.UnitInterval.html#951" class="Bound">y</a>  <a id="990" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="993" href="Data.Rational.Properties.html#47905" class="Function">*-monoʳ-≤-nonNeg</a> <a id="1010" href="Ledger.Prelude.Numeric.UnitInterval.html#951" class="Bound">y</a> <a id="1012" class="Symbol">⦃</a> <a id="1014" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a> <a id="1026" href="Ledger.Prelude.Numeric.UnitInterval.html#965" class="Bound">0≤y</a> <a id="1030" class="Symbol">⦄</a> <a id="1032" href="Ledger.Prelude.Numeric.UnitInterval.html#960" class="Bound">x≤1</a> <a id="1036" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1042" class="Number">1</a> <a id="1044" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1046" href="Ledger.Prelude.Numeric.UnitInterval.html#951" class="Bound">y</a>  <a id="1049" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1052" href="Data.Rational.Properties.html#42770" class="Function">*-identityˡ</a> <a id="1064" class="Symbol">_</a> <a id="1066" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1072" href="Ledger.Prelude.Numeric.UnitInterval.html#951" class="Bound">y</a>      <a id="1079" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1082" class="Comment">-- Left multiplication by unit interval element preserves non-negativity.</a>
<a id="inUnitInterval-*-0≤"></a><a id="1156" href="Ledger.Prelude.Numeric.UnitInterval.html#1156" class="Function">inUnitInterval-*-0≤</a> <a id="1176" class="Symbol">:</a> <a id="1178" class="Symbol">∀</a> <a id="1180" class="Symbol">(</a><a id="1181" href="Ledger.Prelude.Numeric.UnitInterval.html#1181" class="Bound">x</a> <a id="1183" href="Ledger.Prelude.Numeric.UnitInterval.html#1183" class="Bound">y</a> <a id="1185" class="Symbol">:</a> <a id="1187" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="1188" class="Symbol">)</a> <a id="1190" class="Symbol">→</a> <a id="1192" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="1207" href="Ledger.Prelude.Numeric.UnitInterval.html#1183" class="Bound">y</a> <a id="1209" class="Symbol">→</a> <a id="1211" class="Number">0</a> <a id="1213" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1215" href="Ledger.Prelude.Numeric.UnitInterval.html#1181" class="Bound">x</a> <a id="1217" class="Symbol">→</a> <a id="1219" class="Number">0</a> <a id="1221" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1223" href="Ledger.Prelude.Numeric.UnitInterval.html#1181" class="Bound">x</a> <a id="1225" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1227" href="Ledger.Prelude.Numeric.UnitInterval.html#1183" class="Bound">y</a>
<a id="1229" href="Ledger.Prelude.Numeric.UnitInterval.html#1156" class="Function">inUnitInterval-*-0≤</a> <a id="1249" href="Ledger.Prelude.Numeric.UnitInterval.html#1249" class="Bound">x</a> <a id="1251" href="Ledger.Prelude.Numeric.UnitInterval.html#1251" class="Bound">y</a> <a id="1253" class="Symbol">(</a><a id="1254" href="Ledger.Prelude.Numeric.UnitInterval.html#1254" class="Bound">0≤y</a> <a id="1258" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1260" class="Symbol">_)</a> <a id="1263" href="Ledger.Prelude.Numeric.UnitInterval.html#1263" class="Bound">0≤x</a> <a id="1267" class="Symbol">=</a>
  <a id="1271" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1281" class="Number">0</a>      <a id="1288" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1291" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="1295" class="Symbol">(</a><a id="1296" href="Data.Rational.Properties.html#43151" class="Function">*-zeroʳ</a> <a id="1304" href="Ledger.Prelude.Numeric.UnitInterval.html#1249" class="Bound">x</a><a id="1305" class="Symbol">)</a> <a id="1307" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1313" href="Ledger.Prelude.Numeric.UnitInterval.html#1249" class="Bound">x</a> <a id="1315" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1317" class="Number">0</a>  <a id="1320" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1323" href="Data.Rational.Properties.html#48249" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1340" href="Ledger.Prelude.Numeric.UnitInterval.html#1249" class="Bound">x</a> <a id="1342" class="Symbol">⦃</a> <a id="1344" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a> <a id="1356" href="Ledger.Prelude.Numeric.UnitInterval.html#1263" class="Bound">0≤x</a> <a id="1360" class="Symbol">⦄</a> <a id="1362" href="Ledger.Prelude.Numeric.UnitInterval.html#1254" class="Bound">0≤y</a> <a id="1366" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1372" href="Ledger.Prelude.Numeric.UnitInterval.html#1249" class="Bound">x</a> <a id="1374" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1376" href="Ledger.Prelude.Numeric.UnitInterval.html#1251" class="Bound">y</a>  <a id="1379" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1382" class="Comment">-- Left multiplication by unit interval element preserves being upper boundeded by 1.</a>
<a id="inUnitInterval-*-≤1"></a><a id="1468" href="Ledger.Prelude.Numeric.UnitInterval.html#1468" class="Function">inUnitInterval-*-≤1</a> <a id="1488" class="Symbol">:</a> <a id="1490" class="Symbol">∀</a> <a id="1492" class="Symbol">(</a><a id="1493" href="Ledger.Prelude.Numeric.UnitInterval.html#1493" class="Bound">x</a> <a id="1495" href="Ledger.Prelude.Numeric.UnitInterval.html#1495" class="Bound">y</a> <a id="1497" class="Symbol">:</a> <a id="1499" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="1500" class="Symbol">)</a> <a id="1502" class="Symbol">→</a> <a id="1504" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="1519" href="Ledger.Prelude.Numeric.UnitInterval.html#1493" class="Bound">x</a> <a id="1521" class="Symbol">→</a> <a id="1523" href="Ledger.Prelude.Numeric.UnitInterval.html#1495" class="Bound">y</a> <a id="1525" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1527" class="Number">1</a> <a id="1529" class="Symbol">→</a> <a id="1531" href="Ledger.Prelude.Numeric.UnitInterval.html#1493" class="Bound">x</a> <a id="1533" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1535" href="Ledger.Prelude.Numeric.UnitInterval.html#1495" class="Bound">y</a> <a id="1537" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1539" class="Number">1</a>
<a id="1541" href="Ledger.Prelude.Numeric.UnitInterval.html#1468" class="Function">inUnitInterval-*-≤1</a> <a id="1561" href="Ledger.Prelude.Numeric.UnitInterval.html#1561" class="Bound">x</a> <a id="1563" href="Ledger.Prelude.Numeric.UnitInterval.html#1563" class="Bound">y</a> <a id="1565" class="Symbol">(</a><a id="1566" href="Ledger.Prelude.Numeric.UnitInterval.html#1566" class="Bound">0≤x</a> <a id="1570" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1572" href="Ledger.Prelude.Numeric.UnitInterval.html#1572" class="Bound">x≤1</a><a id="1575" class="Symbol">)</a> <a id="1577" href="Ledger.Prelude.Numeric.UnitInterval.html#1577" class="Bound">y≤1</a> <a id="1581" class="Symbol">=</a>
  <a id="1585" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1595" href="Ledger.Prelude.Numeric.UnitInterval.html#1561" class="Bound">x</a> <a id="1597" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1599" href="Ledger.Prelude.Numeric.UnitInterval.html#1563" class="Bound">y</a>  <a id="1602" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1605" href="Data.Rational.Properties.html#48249" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1622" href="Ledger.Prelude.Numeric.UnitInterval.html#1561" class="Bound">x</a> <a id="1624" class="Symbol">⦃</a> <a id="1626" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a> <a id="1638" href="Ledger.Prelude.Numeric.UnitInterval.html#1566" class="Bound">0≤x</a> <a id="1642" class="Symbol">⦄</a> <a id="1644" href="Ledger.Prelude.Numeric.UnitInterval.html#1577" class="Bound">y≤1</a> <a id="1648" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1654" href="Ledger.Prelude.Numeric.UnitInterval.html#1561" class="Bound">x</a> <a id="1656" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1658" class="Number">1</a>  <a id="1661" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1664" href="Data.Rational.Properties.html#42876" class="Function">*-identityʳ</a> <a id="1676" class="Symbol">_</a> <a id="1678" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1684" href="Ledger.Prelude.Numeric.UnitInterval.html#1561" class="Bound">x</a>      <a id="1691" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1694" href="Ledger.Prelude.Numeric.UnitInterval.html#1572" class="Bound">x≤1</a> <a id="1698" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1704" class="Number">1</a>      <a id="1711" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1714" class="Comment">-- UnitInterval: rational number in the unit interval [0, 1].</a>
<a id="UnitInterval"></a><a id="1776" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a> <a id="1789" class="Symbol">:</a> <a id="1791" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1796" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a> <a id="1809" class="Symbol">=</a> <a id="1811" href="Data.Refinement.Base.html#1082" class="Function">[</a> <a id="1813" href="Ledger.Prelude.Numeric.UnitInterval.html#1813" class="Bound">x</a> <a id="1815" href="Data.Refinement.Base.html#1082" class="Function">∈</a> <a id="1817" href="Data.Rational.Base.html#1421" class="Record">ℚ</a> <a id="1819" href="Data.Refinement.Base.html#1082" class="Function">∣</a> <a id="1821" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="1836" href="Ledger.Prelude.Numeric.UnitInterval.html#1813" class="Bound">x</a> <a id="1838" href="Data.Refinement.Base.html#1082" class="Function">]</a>

<a id="1841" class="Keyword">instance</a>
  <a id="Show-UnitInterval"></a><a id="1852" href="Ledger.Prelude.Numeric.UnitInterval.html#1852" class="Function">Show-UnitInterval</a> <a id="1870" class="Symbol">:</a> <a id="1872" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="1877" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a>
  <a id="1892" href="Ledger.Prelude.Numeric.UnitInterval.html#1852" class="Function">Show-UnitInterval</a> <a id="1910" class="Symbol">.</a><a id="1911" href="Class.Show.Core.html#187" class="Field">show</a> <a id="1916" class="Symbol">=</a> <a id="1918" href="Ledger.Prelude.Numeric.UnitInterval.html#439" class="Function">ℚshow</a> <a id="1924" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1926" href="Data.Refinement.Base.html#789" class="Field">value</a>

<a id="1933" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="1968" class="Comment">--  unboundRational</a>
<a id="fromUnitInterval"></a><a id="1988" href="Ledger.Prelude.Numeric.UnitInterval.html#1988" class="Function">fromUnitInterval</a> <a id="2005" class="Symbol">:</a> <a id="2007" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a> <a id="2020" class="Symbol">→</a> <a id="2022" href="Data.Rational.Base.html#1421" class="Record">ℚ</a>
<a id="2024" href="Ledger.Prelude.Numeric.UnitInterval.html#1988" class="Function">fromUnitInterval</a> <a id="2041" class="Symbol">=</a> <a id="2043" href="Data.Refinement.Base.html#789" class="Field">value</a>

<a id="2050" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="2085" class="Comment">--  unboundRational</a>
<a id="toUnitInterval"></a><a id="2105" href="Ledger.Prelude.Numeric.UnitInterval.html#2105" class="Function">toUnitInterval</a> <a id="2120" class="Symbol">:</a> <a id="2122" href="Data.Rational.Base.html#1421" class="Record">ℚ</a> <a id="2124" class="Symbol">→</a> <a id="2126" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2132" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a>
<a id="2145" href="Ledger.Prelude.Numeric.UnitInterval.html#2105" class="Function">toUnitInterval</a> <a id="2160" href="Ledger.Prelude.Numeric.UnitInterval.html#2160" class="Bound">x</a> <a id="2162" class="Keyword">with</a> <a id="2167" href="Ledger.Prelude.Numeric.UnitInterval.html#690" class="Function">isInUnitInterval</a> <a id="2184" href="Ledger.Prelude.Numeric.UnitInterval.html#2160" class="Bound">x</a>
<a id="2186" class="Symbol">...</a> <a id="2190" class="Symbol">|</a> <a id="2192" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2195" href="Ledger.Prelude.Numeric.UnitInterval.html#2195" class="Bound">¬p</a> <a id="2198" class="Symbol">=</a> <a id="2200" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2208" class="Symbol">...</a> <a id="2212" class="Symbol">|</a> <a id="2214" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2218" href="Ledger.Prelude.Numeric.UnitInterval.html#2218" class="Bound">p</a> <a id="2220" class="Symbol">=</a> <a id="2222" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2227" class="Symbol">(</a><a id="2228" class="Bound">x</a> <a id="2230" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="2232" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2234" href="Ledger.Prelude.Numeric.UnitInterval.html#2218" class="Bound">p</a> <a id="2236" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="2237" class="Symbol">)</a>

<a id="2240" class="Comment">-- Helper function to make an element of the Refinement type</a>
<a id="2301" class="Comment">-- that is useful in the case where Agda can infer the evidence</a>
<a id="2365" class="Comment">-- automatically by computation.</a>
<a id="2398" class="Comment">-- Usage example:  mkUnitInterval (+ 2 / 10)</a>
<a id="mkUnitInterval"></a><a id="2443" href="Ledger.Prelude.Numeric.UnitInterval.html#2443" class="Function">mkUnitInterval</a> <a id="2458" class="Symbol">:</a> <a id="2460" class="Symbol">∀</a> <a id="2462" class="Symbol">(</a><a id="2463" href="Ledger.Prelude.Numeric.UnitInterval.html#2463" class="Bound">x</a> <a id="2465" class="Symbol">:</a> <a id="2467" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="2468" class="Symbol">)</a> <a id="2470" class="Symbol">→</a> <a id="2472" class="Symbol">{</a><a id="2473" href="Data.Bool.Base.html#1358" class="Function">T</a> <a id="2475" class="Symbol">(</a><a id="2476" href="Relation.Nullary.Decidable.Core.html#2032" class="Field">does</a> <a id="2481" class="Symbol">(</a><a id="2482" href="Ledger.Prelude.Numeric.UnitInterval.html#690" class="Function">isInUnitInterval</a> <a id="2499" href="Ledger.Prelude.Numeric.UnitInterval.html#2463" class="Bound">x</a><a id="2500" class="Symbol">))}</a> <a id="2504" class="Symbol">→</a> <a id="2506" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a>
<a id="2519" href="Ledger.Prelude.Numeric.UnitInterval.html#2443" class="Function">mkUnitInterval</a> <a id="2534" href="Ledger.Prelude.Numeric.UnitInterval.html#2534" class="Bound">x</a> <a id="2536" class="Symbol">{</a><a id="2537" href="Ledger.Prelude.Numeric.UnitInterval.html#2537" class="Bound">evidence</a><a id="2545" class="Symbol">}</a> <a id="2547" class="Keyword">with</a> <a id="2552" href="Ledger.Prelude.Numeric.UnitInterval.html#690" class="Function">isInUnitInterval</a> <a id="2569" href="Ledger.Prelude.Numeric.UnitInterval.html#2534" class="Bound">x</a> <a id="2571" class="Keyword">in</a> <a id="2574" class="Argument">eq</a>
<a id="2577" class="Symbol">...</a> <a id="2581" class="Symbol">|</a> <a id="2583" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="2587" class="Symbol">_</a> <a id="2589" class="Keyword">rewrite</a> <a id="2597" href="Relation.Binary.PropositionalEquality.Core.html#1481" class="Function">cong</a> <a id="2602" href="Relation.Nullary.Decidable.Core.html#2032" class="Field">does</a> <a id="2607" href="Ledger.Prelude.Numeric.UnitInterval.html#2574" class="Bound">eq</a> <a id="2610" class="Symbol">=</a> <a id="2612" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="2619" class="Bound">evidence</a>
<a id="2628" class="Symbol">...</a> <a id="2632" class="Symbol">|</a> <a id="2634" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2638" href="Ledger.Prelude.Numeric.UnitInterval.html#2638" class="Bound">p</a> <a id="2640" class="Symbol">=</a> <a id="2642" class="Bound">x</a> <a id="2644" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="2646" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2648" href="Ledger.Prelude.Numeric.UnitInterval.html#2638" class="Bound">p</a> <a id="2650" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a>

<a id="2653" class="Comment">-- Clamp a rational number to the unit interval.</a>
<a id="2702" class="Comment">-- Values below 0 or above 1 are set to 0 or 1, respectively.</a>
<a id="clamp"></a><a id="2764" href="Ledger.Prelude.Numeric.UnitInterval.html#2764" class="Function">clamp</a> <a id="2770" class="Symbol">:</a> <a id="2772" href="Data.Rational.Base.html#1421" class="Record">ℚ</a> <a id="2774" class="Symbol">→</a> <a id="2776" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a>
<a id="2789" href="Ledger.Prelude.Numeric.UnitInterval.html#2764" class="Function">clamp</a> <a id="2795" href="Ledger.Prelude.Numeric.UnitInterval.html#2795" class="Bound">x</a> <a id="2797" class="Keyword">with</a> <a id="2802" class="Number">0</a> <a id="2804" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="2807" href="Ledger.Prelude.Numeric.UnitInterval.html#2795" class="Bound">x</a>
<a id="2809" class="Symbol">...</a> <a id="2813" class="Symbol">|</a> <a id="2815" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="2819" class="Symbol">_</a> <a id="2821" class="Symbol">=</a> <a id="2823" href="Ledger.Prelude.Numeric.UnitInterval.html#2443" class="Function">mkUnitInterval</a> <a id="2838" class="Number">0</a>
<a id="2840" class="Symbol">...</a> <a id="2844" class="Symbol">|</a> <a id="2846" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2850" href="Ledger.Prelude.Numeric.UnitInterval.html#2850" class="Bound">0≤x</a> <a id="2854" class="Keyword">with</a> <a id="2859" class="Bound">x</a> <a id="2861" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="2864" class="Number">1</a>
<a id="2866" class="Symbol">...</a>     <a id="2874" class="Symbol">|</a> <a id="2876" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="2880" class="Symbol">_</a>   <a id="2884" class="Symbol">=</a> <a id="2886" href="Ledger.Prelude.Numeric.UnitInterval.html#2443" class="Function">mkUnitInterval</a> <a id="2901" class="Number">1</a>
<a id="2903" class="Symbol">...</a>     <a id="2911" class="Symbol">|</a> <a id="2913" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2917" href="Ledger.Prelude.Numeric.UnitInterval.html#2917" class="Bound">x≤1</a> <a id="2921" class="Symbol">=</a> <a id="2923" class="Symbol">(</a><a id="2924" class="Bound">x</a> <a id="2926" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="2928" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2930" class="Bound">0≤x</a> <a id="2934" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2936" href="Ledger.Prelude.Numeric.UnitInterval.html#2917" class="Bound">x≤1</a> <a id="2940" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="2941" class="Symbol">)</a>

<a id="2944" class="Comment">-- UnitInterval Properties</a>

<a id="2972" class="Comment">-- The predicate for &#39;UnitInterval&#39; also holds in a proof-relevant context.</a>
<a id="fromUnitInterval-inUnitInterval"></a><a id="3048" href="Ledger.Prelude.Numeric.UnitInterval.html#3048" class="Function">fromUnitInterval-inUnitInterval</a>
  <a id="3082" class="Symbol">:</a> <a id="3084" class="Symbol">∀</a> <a id="3086" class="Symbol">(</a><a id="3087" href="Ledger.Prelude.Numeric.UnitInterval.html#3087" class="Bound">x</a> <a id="3089" class="Symbol">:</a> <a id="3091" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a><a id="3103" class="Symbol">)</a> <a id="3105" class="Symbol">→</a> <a id="3107" href="Ledger.Prelude.Numeric.UnitInterval.html#559" class="Function">inUnitInterval</a> <a id="3122" class="Symbol">(</a><a id="3123" href="Ledger.Prelude.Numeric.UnitInterval.html#1988" class="Function">fromUnitInterval</a> <a id="3140" href="Ledger.Prelude.Numeric.UnitInterval.html#3087" class="Bound">x</a><a id="3141" class="Symbol">)</a>
<a id="3143" href="Ledger.Prelude.Numeric.UnitInterval.html#3048" class="Function">fromUnitInterval-inUnitInterval</a> <a id="3175" class="Symbol">(</a><a id="3176" href="Ledger.Prelude.Numeric.UnitInterval.html#3176" class="Bound">x</a> <a id="3178" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="3180" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3182" href="Ledger.Prelude.Numeric.UnitInterval.html#3182" class="Bound">p0</a> <a id="3185" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3186" class="Symbol">)</a> <a id="3188" class="Keyword">with</a> <a id="3193" href="Ledger.Prelude.Numeric.UnitInterval.html#690" class="Function">isInUnitInterval</a> <a id="3210" href="Ledger.Prelude.Numeric.UnitInterval.html#3176" class="Bound">x</a>
<a id="3212" class="Symbol">...</a> <a id="3216" class="Symbol">|</a> <a id="3218" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3221" href="Ledger.Prelude.Numeric.UnitInterval.html#3221" class="Bound">¬p</a> <a id="3224" class="Symbol">=</a> <a id="3226" href="Data.Empty.html#1129" class="Function">⊥-elim-irr</a> <a id="3237" class="Symbol">(</a><a id="3238" href="Ledger.Prelude.Numeric.UnitInterval.html#3221" class="Bound">¬p</a> <a id="3241" class="Bound">p0</a><a id="3243" class="Symbol">)</a>
<a id="3245" class="Symbol">...</a> <a id="3249" class="Symbol">|</a> <a id="3251" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3255" href="Ledger.Prelude.Numeric.UnitInterval.html#3255" class="Bound">p</a> <a id="3257" class="Symbol">=</a> <a id="3259" href="Ledger.Prelude.Numeric.UnitInterval.html#3255" class="Bound">p</a>

<a id="3262" class="Comment">-- Left multiplication by unit interval element preserves non-negativity.</a>
<a id="UnitInterval-*-0≤"></a><a id="3336" href="Ledger.Prelude.Numeric.UnitInterval.html#3336" class="Function">UnitInterval-*-0≤</a>
  <a id="3356" class="Symbol">:</a> <a id="3358" class="Symbol">∀</a> <a id="3360" class="Symbol">(</a><a id="3361" href="Ledger.Prelude.Numeric.UnitInterval.html#3361" class="Bound">x</a> <a id="3363" class="Symbol">:</a> <a id="3365" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="3366" class="Symbol">)</a> <a id="3368" class="Symbol">(</a><a id="3369" href="Ledger.Prelude.Numeric.UnitInterval.html#3369" class="Bound">y</a> <a id="3371" class="Symbol">:</a> <a id="3373" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a><a id="3385" class="Symbol">)</a> <a id="3387" class="Symbol">→</a> <a id="3389" class="Number">0</a> <a id="3391" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="3393" href="Ledger.Prelude.Numeric.UnitInterval.html#3361" class="Bound">x</a> <a id="3395" class="Symbol">→</a> <a id="3397" class="Number">0</a> <a id="3399" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="3401" href="Ledger.Prelude.Numeric.UnitInterval.html#3361" class="Bound">x</a> <a id="3403" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="3405" href="Ledger.Prelude.Numeric.UnitInterval.html#1988" class="Function">fromUnitInterval</a> <a id="3422" href="Ledger.Prelude.Numeric.UnitInterval.html#3369" class="Bound">y</a>
<a id="3424" href="Ledger.Prelude.Numeric.UnitInterval.html#3336" class="Function">UnitInterval-*-0≤</a> <a id="3442" href="Ledger.Prelude.Numeric.UnitInterval.html#3442" class="Bound">x</a> <a id="3444" href="Ledger.Prelude.Numeric.UnitInterval.html#3444" class="Bound">y</a> <a id="3446" href="Ledger.Prelude.Numeric.UnitInterval.html#3446" class="Bound">0≤x</a> <a id="3450" class="Symbol">=</a>
  <a id="3454" href="Ledger.Prelude.Numeric.UnitInterval.html#1156" class="Function">inUnitInterval-*-0≤</a> <a id="3474" href="Ledger.Prelude.Numeric.UnitInterval.html#3442" class="Bound">x</a> <a id="3476" class="Symbol">(</a><a id="3477" href="Data.Refinement.Base.html#789" class="Field">value</a> <a id="3483" href="Ledger.Prelude.Numeric.UnitInterval.html#3444" class="Bound">y</a><a id="3484" class="Symbol">)</a> <a id="3486" class="Symbol">(</a><a id="3487" href="Ledger.Prelude.Numeric.UnitInterval.html#3048" class="Function">fromUnitInterval-inUnitInterval</a> <a id="3519" href="Ledger.Prelude.Numeric.UnitInterval.html#3444" class="Bound">y</a><a id="3520" class="Symbol">)</a> <a id="3522" href="Ledger.Prelude.Numeric.UnitInterval.html#3446" class="Bound">0≤x</a>

<a id="3527" class="Comment">-- to/from is the identity</a>
<a id="prop-toUnitInterval-fromUnitInterval"></a><a id="3554" href="Ledger.Prelude.Numeric.UnitInterval.html#3554" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3591" class="Symbol">:</a> <a id="3593" class="Symbol">∀</a> <a id="3595" class="Symbol">(</a><a id="3596" href="Ledger.Prelude.Numeric.UnitInterval.html#3596" class="Bound">x</a> <a id="3598" class="Symbol">:</a> <a id="3600" href="Ledger.Prelude.Numeric.UnitInterval.html#1776" class="Function">UnitInterval</a><a id="3612" class="Symbol">)</a>
  <a id="3616" class="Symbol">→</a> <a id="3618" href="Ledger.Prelude.Numeric.UnitInterval.html#2105" class="Function">toUnitInterval</a> <a id="3633" class="Symbol">(</a><a id="3634" href="Ledger.Prelude.Numeric.UnitInterval.html#1988" class="Function">fromUnitInterval</a> <a id="3651" href="Ledger.Prelude.Numeric.UnitInterval.html#3596" class="Bound">x</a><a id="3652" class="Symbol">)</a> <a id="3654" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3656" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3661" href="Ledger.Prelude.Numeric.UnitInterval.html#3596" class="Bound">x</a>
<a id="3663" href="Ledger.Prelude.Numeric.UnitInterval.html#3554" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3700" class="Symbol">(</a><a id="3701" href="Ledger.Prelude.Numeric.UnitInterval.html#3701" class="Bound">x</a> <a id="3703" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="3705" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3707" href="Ledger.Prelude.Numeric.UnitInterval.html#3707" class="Bound">p0</a> <a id="3710" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3711" class="Symbol">)</a> <a id="3713" class="Keyword">with</a> <a id="3718" href="Ledger.Prelude.Numeric.UnitInterval.html#690" class="Function">isInUnitInterval</a> <a id="3735" href="Ledger.Prelude.Numeric.UnitInterval.html#3701" class="Bound">x</a>
<a id="3737" class="Symbol">...</a> <a id="3741" class="Symbol">|</a> <a id="3743" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3746" href="Ledger.Prelude.Numeric.UnitInterval.html#3746" class="Bound">¬p</a> <a id="3749" class="Symbol">=</a> <a id="3751" href="Data.Empty.html#1129" class="Function">⊥-elim-irr</a> <a id="3762" class="Symbol">(</a><a id="3763" href="Ledger.Prelude.Numeric.UnitInterval.html#3746" class="Bound">¬p</a> <a id="3766" class="Bound">p0</a><a id="3768" class="Symbol">)</a>
<a id="3770" class="Symbol">...</a> <a id="3774" class="Symbol">|</a> <a id="3776" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3780" href="Ledger.Prelude.Numeric.UnitInterval.html#3780" class="Bound">p</a> <a id="3782" class="Symbol">=</a> <a id="3784" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre></body></html>