<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Prelude.Numeric.UnitInterval</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Comment">-- Rational number in the unit interval.</a>
<a id="67" class="Keyword">module</a> <a id="74" href="Ledger.Prelude.Numeric.UnitInterval.html" class="Module">Ledger.Prelude.Numeric.UnitInterval</a> <a id="110" class="Keyword">where</a>

<a id="117" class="Keyword">open</a> <a id="122" class="Keyword">import</a> <a id="129" href="Prelude.html" class="Module">Prelude</a>
  <a id="139" class="Keyword">hiding</a> <a id="146" class="Symbol">(</a><a id="147" href="Data.Sum.Base.html#811" class="Function Operator">[_,_]</a><a id="152" class="Symbol">;</a> <a id="154" href="Data.List.Base.html#4907" class="Function Operator">[_]</a><a id="157" class="Symbol">;</a> <a id="159" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a><a id="162" class="Symbol">)</a>

<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="198" class="Keyword">open</a> <a id="203" class="Keyword">import</a> <a id="210" href="Class.Show.html" class="Module">Class.Show</a> <a id="221" class="Keyword">using</a> <a id="227" class="Symbol">(</a><a id="228" href="Class.Show.Core.html#125" class="Record">Show</a><a id="232" class="Symbol">;</a> <a id="234" href="Class.Show.Core.html#187" class="Field">show</a><a id="238" class="Symbol">)</a>
<a id="240" class="Keyword">open</a> <a id="245" class="Keyword">import</a> <a id="252" href="Data.Irrelevant.html" class="Module">Data.Irrelevant</a> <a id="268" class="Keyword">using</a> <a id="274" class="Symbol">(</a><a id="275" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[_]</a><a id="278" class="Symbol">)</a>
<a id="280" class="Keyword">open</a> <a id="285" class="Keyword">import</a> <a id="292" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="306" class="Keyword">using</a> <a id="312" class="Symbol">(</a><a id="313" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="314" class="Symbol">;</a> <a id="316" href="Data.Rational.Base.html#2544" class="Datatype Operator">_≤_</a><a id="319" class="Symbol">;</a> <a id="321" href="Data.Rational.Properties.html#19598" class="Function Operator">_≤?_</a><a id="325" class="Symbol">;</a> <a id="327" href="Data.Rational.Base.html#6394" class="Function Operator">_*_</a><a id="330" class="Symbol">;</a> <a id="332" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a><a id="343" class="Symbol">)</a>
<a id="345" class="Keyword">open</a> <a id="350" class="Keyword">import</a> <a id="357" href="Data.Rational.Properties.html" class="Module">Data.Rational.Properties</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Data.Rational.Show.html" class="Module">Data.Rational.Show</a> <a id="413" class="Keyword">using</a> <a id="419" class="Symbol">()</a> <a id="422" class="Keyword">renaming</a> <a id="431" class="Symbol">(</a><a id="432" href="Data.Rational.Show.html#429" class="Function">show</a> <a id="437" class="Symbol">to</a> <a id="440" class="Function">ℚshow</a><a id="445" class="Symbol">)</a>
<a id="447" class="Keyword">open</a> <a id="452" class="Keyword">import</a> <a id="459" href="Data.Refinement.html" class="Module">Data.Refinement</a> <a id="475" class="Keyword">using</a> <a id="481" class="Symbol">(</a><a id="482" href="Data.Refinement.Base.html#1082" class="Function">Refinement-syntax</a><a id="499" class="Symbol">;</a> <a id="501" href="Data.Refinement.Base.html#789" class="Field">value</a><a id="506" class="Symbol">;</a> <a id="508" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">_,_</a><a id="511" class="Symbol">)</a>

<a id="514" class="Keyword">open</a> <a id="519" href="Data.Rational.Properties.html#26415" class="Module">≤-Reasoning</a>

<a id="532" class="Comment">-- inUnitInterval predicate</a>
<a id="inUnitInterval"></a><a id="560" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="575" class="Symbol">:</a> <a id="577" class="Symbol">(</a><a id="578" href="Ledger.Prelude.Numeric.UnitInterval.html#578" class="Bound">x</a> <a id="580" class="Symbol">:</a> <a id="582" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="583" class="Symbol">)</a> <a id="585" class="Symbol">→</a> <a id="587" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="592" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="607" href="Ledger.Prelude.Numeric.UnitInterval.html#607" class="Bound">x</a> <a id="609" class="Symbol">=</a> <a id="611" class="Symbol">(</a><a id="612" class="Number">0</a> <a id="614" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="616" href="Ledger.Prelude.Numeric.UnitInterval.html#607" class="Bound">x</a><a id="617" class="Symbol">)</a> <a id="619" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="621" class="Symbol">(</a><a id="622" href="Ledger.Prelude.Numeric.UnitInterval.html#607" class="Bound">x</a> <a id="624" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="626" class="Number">1</a><a id="627" class="Symbol">)</a>

<a id="630" class="Comment">-- Decide whether a rational number is in the unit interval.</a>
<a id="isInUnitInterval"></a><a id="691" href="Ledger.Prelude.Numeric.UnitInterval.html#691" class="Function">isInUnitInterval</a> <a id="708" class="Symbol">:</a> <a id="710" class="Symbol">(</a><a id="711" href="Ledger.Prelude.Numeric.UnitInterval.html#711" class="Bound">x</a> <a id="713" class="Symbol">:</a> <a id="715" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="716" class="Symbol">)</a> <a id="718" class="Symbol">→</a> <a id="720" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="724" class="Symbol">(</a><a id="725" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="740" href="Ledger.Prelude.Numeric.UnitInterval.html#711" class="Bound">x</a><a id="741" class="Symbol">)</a>
<a id="743" href="Ledger.Prelude.Numeric.UnitInterval.html#691" class="Function">isInUnitInterval</a> <a id="760" href="Ledger.Prelude.Numeric.UnitInterval.html#760" class="Bound">x</a> <a id="762" class="Symbol">=</a> <a id="764" class="Symbol">(</a><a id="765" class="Number">0</a> <a id="767" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="770" href="Ledger.Prelude.Numeric.UnitInterval.html#760" class="Bound">x</a><a id="771" class="Symbol">)</a> <a id="773" href="Relation.Nullary.Decidable.Core.html#3432" class="Function Operator">×-dec</a> <a id="779" class="Symbol">(</a><a id="780" href="Ledger.Prelude.Numeric.UnitInterval.html#760" class="Bound">x</a> <a id="782" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="785" class="Number">1</a><a id="786" class="Symbol">)</a>

<a id="789" class="Comment">-- Multiplying with a number from the unit interval only decreases.</a>
<a id="inUnitInterval-*-≤y"></a><a id="857" href="Ledger.Prelude.Numeric.UnitInterval.html#857" class="Function">inUnitInterval-*-≤y</a> <a id="877" class="Symbol">:</a> <a id="879" class="Symbol">∀</a> <a id="881" class="Symbol">(</a><a id="882" href="Ledger.Prelude.Numeric.UnitInterval.html#882" class="Bound">x</a> <a id="884" href="Ledger.Prelude.Numeric.UnitInterval.html#884" class="Bound">y</a> <a id="886" class="Symbol">:</a> <a id="888" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="889" class="Symbol">)</a> <a id="891" class="Symbol">→</a> <a id="893" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="908" href="Ledger.Prelude.Numeric.UnitInterval.html#882" class="Bound">x</a> <a id="910" class="Symbol">→</a> <a id="912" class="Number">0</a> <a id="914" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="916" href="Ledger.Prelude.Numeric.UnitInterval.html#884" class="Bound">y</a> <a id="918" class="Symbol">→</a> <a id="920" href="Ledger.Prelude.Numeric.UnitInterval.html#882" class="Bound">x</a> <a id="922" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="924" href="Ledger.Prelude.Numeric.UnitInterval.html#884" class="Bound">y</a> <a id="926" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="928" href="Ledger.Prelude.Numeric.UnitInterval.html#884" class="Bound">y</a>
<a id="930" href="Ledger.Prelude.Numeric.UnitInterval.html#857" class="Function">inUnitInterval-*-≤y</a> <a id="950" href="Ledger.Prelude.Numeric.UnitInterval.html#950" class="Bound">x</a> <a id="952" href="Ledger.Prelude.Numeric.UnitInterval.html#952" class="Bound">y</a> <a id="954" class="Symbol">(</a><a id="955" href="Ledger.Prelude.Numeric.UnitInterval.html#955" class="Bound">0≤x</a> <a id="959" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="961" href="Ledger.Prelude.Numeric.UnitInterval.html#961" class="Bound">x≤1</a><a id="964" class="Symbol">)</a> <a id="966" href="Ledger.Prelude.Numeric.UnitInterval.html#966" class="Bound">0≤y</a> <a id="970" class="Symbol">=</a>
  <a id="974" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="984" href="Ledger.Prelude.Numeric.UnitInterval.html#950" class="Bound">x</a> <a id="986" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="988" href="Ledger.Prelude.Numeric.UnitInterval.html#952" class="Bound">y</a>  <a id="991" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="994" href="Data.Rational.Properties.html#47905" class="Function">*-monoʳ-≤-nonNeg</a> <a id="1011" href="Ledger.Prelude.Numeric.UnitInterval.html#952" class="Bound">y</a> <a id="1013" class="Symbol">⦃</a> <a id="1015" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a> <a id="1027" href="Ledger.Prelude.Numeric.UnitInterval.html#966" class="Bound">0≤y</a> <a id="1031" class="Symbol">⦄</a> <a id="1033" href="Ledger.Prelude.Numeric.UnitInterval.html#961" class="Bound">x≤1</a> <a id="1037" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1043" class="Number">1</a> <a id="1045" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1047" href="Ledger.Prelude.Numeric.UnitInterval.html#952" class="Bound">y</a>  <a id="1050" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1053" href="Data.Rational.Properties.html#42770" class="Function">*-identityˡ</a> <a id="1065" class="Symbol">_</a> <a id="1067" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1073" href="Ledger.Prelude.Numeric.UnitInterval.html#952" class="Bound">y</a>      <a id="1080" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1083" class="Comment">-- Left multiplication by unit interval element preserves non-negativity.</a>
<a id="inUnitInterval-*-0≤"></a><a id="1157" href="Ledger.Prelude.Numeric.UnitInterval.html#1157" class="Function">inUnitInterval-*-0≤</a> <a id="1177" class="Symbol">:</a> <a id="1179" class="Symbol">∀</a> <a id="1181" class="Symbol">(</a><a id="1182" href="Ledger.Prelude.Numeric.UnitInterval.html#1182" class="Bound">x</a> <a id="1184" href="Ledger.Prelude.Numeric.UnitInterval.html#1184" class="Bound">y</a> <a id="1186" class="Symbol">:</a> <a id="1188" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="1189" class="Symbol">)</a> <a id="1191" class="Symbol">→</a> <a id="1193" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="1208" href="Ledger.Prelude.Numeric.UnitInterval.html#1184" class="Bound">y</a> <a id="1210" class="Symbol">→</a> <a id="1212" class="Number">0</a> <a id="1214" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1216" href="Ledger.Prelude.Numeric.UnitInterval.html#1182" class="Bound">x</a> <a id="1218" class="Symbol">→</a> <a id="1220" class="Number">0</a> <a id="1222" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1224" href="Ledger.Prelude.Numeric.UnitInterval.html#1182" class="Bound">x</a> <a id="1226" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1228" href="Ledger.Prelude.Numeric.UnitInterval.html#1184" class="Bound">y</a>
<a id="1230" href="Ledger.Prelude.Numeric.UnitInterval.html#1157" class="Function">inUnitInterval-*-0≤</a> <a id="1250" href="Ledger.Prelude.Numeric.UnitInterval.html#1250" class="Bound">x</a> <a id="1252" href="Ledger.Prelude.Numeric.UnitInterval.html#1252" class="Bound">y</a> <a id="1254" class="Symbol">(</a><a id="1255" href="Ledger.Prelude.Numeric.UnitInterval.html#1255" class="Bound">0≤y</a> <a id="1259" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1261" class="Symbol">_)</a> <a id="1264" href="Ledger.Prelude.Numeric.UnitInterval.html#1264" class="Bound">0≤x</a> <a id="1268" class="Symbol">=</a>
  <a id="1272" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1282" class="Number">0</a>      <a id="1289" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1292" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="1296" class="Symbol">(</a><a id="1297" href="Data.Rational.Properties.html#43151" class="Function">*-zeroʳ</a> <a id="1305" href="Ledger.Prelude.Numeric.UnitInterval.html#1250" class="Bound">x</a><a id="1306" class="Symbol">)</a> <a id="1308" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1314" href="Ledger.Prelude.Numeric.UnitInterval.html#1250" class="Bound">x</a> <a id="1316" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1318" class="Number">0</a>  <a id="1321" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1324" href="Data.Rational.Properties.html#48249" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1341" href="Ledger.Prelude.Numeric.UnitInterval.html#1250" class="Bound">x</a> <a id="1343" class="Symbol">⦃</a> <a id="1345" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a> <a id="1357" href="Ledger.Prelude.Numeric.UnitInterval.html#1264" class="Bound">0≤x</a> <a id="1361" class="Symbol">⦄</a> <a id="1363" href="Ledger.Prelude.Numeric.UnitInterval.html#1255" class="Bound">0≤y</a> <a id="1367" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1373" href="Ledger.Prelude.Numeric.UnitInterval.html#1250" class="Bound">x</a> <a id="1375" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1377" href="Ledger.Prelude.Numeric.UnitInterval.html#1252" class="Bound">y</a>  <a id="1380" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1383" class="Comment">-- Left multiplication by unit interval element preserves being upper boundeded by 1.</a>
<a id="inUnitInterval-*-≤1"></a><a id="1469" href="Ledger.Prelude.Numeric.UnitInterval.html#1469" class="Function">inUnitInterval-*-≤1</a> <a id="1489" class="Symbol">:</a> <a id="1491" class="Symbol">∀</a> <a id="1493" class="Symbol">(</a><a id="1494" href="Ledger.Prelude.Numeric.UnitInterval.html#1494" class="Bound">x</a> <a id="1496" href="Ledger.Prelude.Numeric.UnitInterval.html#1496" class="Bound">y</a> <a id="1498" class="Symbol">:</a> <a id="1500" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="1501" class="Symbol">)</a> <a id="1503" class="Symbol">→</a> <a id="1505" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="1520" href="Ledger.Prelude.Numeric.UnitInterval.html#1494" class="Bound">x</a> <a id="1522" class="Symbol">→</a> <a id="1524" href="Ledger.Prelude.Numeric.UnitInterval.html#1496" class="Bound">y</a> <a id="1526" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1528" class="Number">1</a> <a id="1530" class="Symbol">→</a> <a id="1532" href="Ledger.Prelude.Numeric.UnitInterval.html#1494" class="Bound">x</a> <a id="1534" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1536" href="Ledger.Prelude.Numeric.UnitInterval.html#1496" class="Bound">y</a> <a id="1538" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="1540" class="Number">1</a>
<a id="1542" href="Ledger.Prelude.Numeric.UnitInterval.html#1469" class="Function">inUnitInterval-*-≤1</a> <a id="1562" href="Ledger.Prelude.Numeric.UnitInterval.html#1562" class="Bound">x</a> <a id="1564" href="Ledger.Prelude.Numeric.UnitInterval.html#1564" class="Bound">y</a> <a id="1566" class="Symbol">(</a><a id="1567" href="Ledger.Prelude.Numeric.UnitInterval.html#1567" class="Bound">0≤x</a> <a id="1571" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1573" href="Ledger.Prelude.Numeric.UnitInterval.html#1573" class="Bound">x≤1</a><a id="1576" class="Symbol">)</a> <a id="1578" href="Ledger.Prelude.Numeric.UnitInterval.html#1578" class="Bound">y≤1</a> <a id="1582" class="Symbol">=</a>
  <a id="1586" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1596" href="Ledger.Prelude.Numeric.UnitInterval.html#1562" class="Bound">x</a> <a id="1598" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1600" href="Ledger.Prelude.Numeric.UnitInterval.html#1564" class="Bound">y</a>  <a id="1603" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1606" href="Data.Rational.Properties.html#48249" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1623" href="Ledger.Prelude.Numeric.UnitInterval.html#1562" class="Bound">x</a> <a id="1625" class="Symbol">⦃</a> <a id="1627" href="Data.Rational.Base.html#5864" class="Function">nonNegative</a> <a id="1639" href="Ledger.Prelude.Numeric.UnitInterval.html#1567" class="Bound">0≤x</a> <a id="1643" class="Symbol">⦄</a> <a id="1645" href="Ledger.Prelude.Numeric.UnitInterval.html#1578" class="Bound">y≤1</a> <a id="1649" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1655" href="Ledger.Prelude.Numeric.UnitInterval.html#1562" class="Bound">x</a> <a id="1657" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="1659" class="Number">1</a>  <a id="1662" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1665" href="Data.Rational.Properties.html#42876" class="Function">*-identityʳ</a> <a id="1677" class="Symbol">_</a> <a id="1679" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1685" href="Ledger.Prelude.Numeric.UnitInterval.html#1562" class="Bound">x</a>      <a id="1692" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1695" href="Ledger.Prelude.Numeric.UnitInterval.html#1573" class="Bound">x≤1</a> <a id="1699" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1705" class="Number">1</a>      <a id="1712" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1715" class="Comment">-- UnitInterval: rational number in the unit interval [0, 1].</a>
<a id="UnitInterval"></a><a id="1777" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a> <a id="1790" class="Symbol">:</a> <a id="1792" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1797" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a> <a id="1810" class="Symbol">=</a> <a id="1812" href="Data.Refinement.Base.html#1082" class="Function">[</a> <a id="1814" href="Ledger.Prelude.Numeric.UnitInterval.html#1814" class="Bound">x</a> <a id="1816" href="Data.Refinement.Base.html#1082" class="Function">∈</a> <a id="1818" href="Data.Rational.Base.html#1421" class="Record">ℚ</a> <a id="1820" href="Data.Refinement.Base.html#1082" class="Function">∣</a> <a id="1822" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="1837" href="Ledger.Prelude.Numeric.UnitInterval.html#1814" class="Bound">x</a> <a id="1839" href="Data.Refinement.Base.html#1082" class="Function">]</a>

<a id="1842" class="Keyword">instance</a>
  <a id="Show-UnitInterval"></a><a id="1853" href="Ledger.Prelude.Numeric.UnitInterval.html#1853" class="Function">Show-UnitInterval</a> <a id="1871" class="Symbol">:</a> <a id="1873" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="1878" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a>
  <a id="1893" href="Ledger.Prelude.Numeric.UnitInterval.html#1853" class="Function">Show-UnitInterval</a> <a id="1911" class="Symbol">.</a><a id="1912" href="Class.Show.Core.html#187" class="Field">show</a> <a id="1917" class="Symbol">=</a> <a id="1919" href="Ledger.Prelude.Numeric.UnitInterval.html#440" class="Function">ℚshow</a> <a id="1925" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1927" href="Data.Refinement.Base.html#789" class="Field">value</a>

<a id="1934" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="1969" class="Comment">--  unboundRational</a>
<a id="fromUnitInterval"></a><a id="1989" href="Ledger.Prelude.Numeric.UnitInterval.html#1989" class="Function">fromUnitInterval</a> <a id="2006" class="Symbol">:</a> <a id="2008" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a> <a id="2021" class="Symbol">→</a> <a id="2023" href="Data.Rational.Base.html#1421" class="Record">ℚ</a>
<a id="2025" href="Ledger.Prelude.Numeric.UnitInterval.html#1989" class="Function">fromUnitInterval</a> <a id="2042" class="Symbol">=</a> <a id="2044" href="Data.Refinement.Base.html#789" class="Field">value</a>

<a id="2051" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="2086" class="Comment">--  unboundRational</a>
<a id="toUnitInterval"></a><a id="2106" href="Ledger.Prelude.Numeric.UnitInterval.html#2106" class="Function">toUnitInterval</a> <a id="2121" class="Symbol">:</a> <a id="2123" href="Data.Rational.Base.html#1421" class="Record">ℚ</a> <a id="2125" class="Symbol">→</a> <a id="2127" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2133" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a>
<a id="2146" href="Ledger.Prelude.Numeric.UnitInterval.html#2106" class="Function">toUnitInterval</a> <a id="2161" href="Ledger.Prelude.Numeric.UnitInterval.html#2161" class="Bound">x</a> <a id="2163" class="Keyword">with</a> <a id="2168" href="Ledger.Prelude.Numeric.UnitInterval.html#691" class="Function">isInUnitInterval</a> <a id="2185" href="Ledger.Prelude.Numeric.UnitInterval.html#2161" class="Bound">x</a>
<a id="2187" class="Symbol">...</a> <a id="2191" class="Symbol">|</a> <a id="2193" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2196" href="Ledger.Prelude.Numeric.UnitInterval.html#2196" class="Bound">¬p</a> <a id="2199" class="Symbol">=</a> <a id="2201" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2209" class="Symbol">...</a> <a id="2213" class="Symbol">|</a> <a id="2215" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2219" href="Ledger.Prelude.Numeric.UnitInterval.html#2219" class="Bound">p</a> <a id="2221" class="Symbol">=</a> <a id="2223" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2228" class="Symbol">(</a><a id="2229" class="Bound">x</a> <a id="2231" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="2233" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2235" href="Ledger.Prelude.Numeric.UnitInterval.html#2219" class="Bound">p</a> <a id="2237" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="2238" class="Symbol">)</a>

<a id="2241" class="Comment">-- Helper function to make an element of the Refinement type</a>
<a id="2302" class="Comment">-- that is useful in the case where Agda can infer the evidence</a>
<a id="2366" class="Comment">-- automatically by computation.</a>
<a id="2399" class="Comment">-- Usage example:  mkUnitInterval (+ 2 / 10)</a>
<a id="mkUnitInterval"></a><a id="2444" href="Ledger.Prelude.Numeric.UnitInterval.html#2444" class="Function">mkUnitInterval</a> <a id="2459" class="Symbol">:</a> <a id="2461" class="Symbol">∀</a> <a id="2463" class="Symbol">(</a><a id="2464" href="Ledger.Prelude.Numeric.UnitInterval.html#2464" class="Bound">x</a> <a id="2466" class="Symbol">:</a> <a id="2468" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="2469" class="Symbol">)</a> <a id="2471" class="Symbol">→</a> <a id="2473" class="Symbol">{</a><a id="2474" href="Data.Bool.Base.html#1358" class="Function">T</a> <a id="2476" class="Symbol">(</a><a id="2477" href="Relation.Nullary.Decidable.Core.html#2032" class="Field">does</a> <a id="2482" class="Symbol">(</a><a id="2483" href="Ledger.Prelude.Numeric.UnitInterval.html#691" class="Function">isInUnitInterval</a> <a id="2500" href="Ledger.Prelude.Numeric.UnitInterval.html#2464" class="Bound">x</a><a id="2501" class="Symbol">))}</a> <a id="2505" class="Symbol">→</a> <a id="2507" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a>
<a id="2520" href="Ledger.Prelude.Numeric.UnitInterval.html#2444" class="Function">mkUnitInterval</a> <a id="2535" href="Ledger.Prelude.Numeric.UnitInterval.html#2535" class="Bound">x</a> <a id="2537" class="Symbol">{</a><a id="2538" href="Ledger.Prelude.Numeric.UnitInterval.html#2538" class="Bound">evidence</a><a id="2546" class="Symbol">}</a> <a id="2548" class="Keyword">with</a> <a id="2553" href="Ledger.Prelude.Numeric.UnitInterval.html#691" class="Function">isInUnitInterval</a> <a id="2570" href="Ledger.Prelude.Numeric.UnitInterval.html#2535" class="Bound">x</a> <a id="2572" class="Keyword">in</a> <a id="2575" class="Argument">eq</a>
<a id="2578" class="Symbol">...</a> <a id="2582" class="Symbol">|</a> <a id="2584" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="2588" class="Symbol">_</a> <a id="2590" class="Keyword">rewrite</a> <a id="2598" href="Relation.Binary.PropositionalEquality.Core.html#1481" class="Function">cong</a> <a id="2603" href="Relation.Nullary.Decidable.Core.html#2032" class="Field">does</a> <a id="2608" href="Ledger.Prelude.Numeric.UnitInterval.html#2575" class="Bound">eq</a> <a id="2611" class="Symbol">=</a> <a id="2613" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="2620" class="Bound">evidence</a>
<a id="2629" class="Symbol">...</a> <a id="2633" class="Symbol">|</a> <a id="2635" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2639" href="Ledger.Prelude.Numeric.UnitInterval.html#2639" class="Bound">p</a> <a id="2641" class="Symbol">=</a> <a id="2643" class="Bound">x</a> <a id="2645" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="2647" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2649" href="Ledger.Prelude.Numeric.UnitInterval.html#2639" class="Bound">p</a> <a id="2651" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a>

<a id="2654" class="Comment">-- Clamp a rational number to the unit interval.</a>
<a id="2703" class="Comment">-- Values below 0 or above 1 are set to 0 or 1, respectively.</a>
<a id="clamp"></a><a id="2765" href="Ledger.Prelude.Numeric.UnitInterval.html#2765" class="Function">clamp</a> <a id="2771" class="Symbol">:</a> <a id="2773" href="Data.Rational.Base.html#1421" class="Record">ℚ</a> <a id="2775" class="Symbol">→</a> <a id="2777" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a>
<a id="2790" href="Ledger.Prelude.Numeric.UnitInterval.html#2765" class="Function">clamp</a> <a id="2796" href="Ledger.Prelude.Numeric.UnitInterval.html#2796" class="Bound">x</a> <a id="2798" class="Keyword">with</a> <a id="2803" class="Number">0</a> <a id="2805" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="2808" href="Ledger.Prelude.Numeric.UnitInterval.html#2796" class="Bound">x</a>
<a id="2810" class="Symbol">...</a> <a id="2814" class="Symbol">|</a> <a id="2816" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="2820" class="Symbol">_</a> <a id="2822" class="Symbol">=</a> <a id="2824" href="Ledger.Prelude.Numeric.UnitInterval.html#2444" class="Function">mkUnitInterval</a> <a id="2839" class="Number">0</a>
<a id="2841" class="Symbol">...</a> <a id="2845" class="Symbol">|</a> <a id="2847" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2851" href="Ledger.Prelude.Numeric.UnitInterval.html#2851" class="Bound">0≤x</a> <a id="2855" class="Keyword">with</a> <a id="2860" class="Bound">x</a> <a id="2862" href="Data.Rational.Properties.html#19598" class="Function Operator">≤?</a> <a id="2865" class="Number">1</a>
<a id="2867" class="Symbol">...</a>     <a id="2875" class="Symbol">|</a> <a id="2877" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="2881" class="Symbol">_</a>   <a id="2885" class="Symbol">=</a> <a id="2887" href="Ledger.Prelude.Numeric.UnitInterval.html#2444" class="Function">mkUnitInterval</a> <a id="2902" class="Number">1</a>
<a id="2904" class="Symbol">...</a>     <a id="2912" class="Symbol">|</a> <a id="2914" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2918" href="Ledger.Prelude.Numeric.UnitInterval.html#2918" class="Bound">x≤1</a> <a id="2922" class="Symbol">=</a> <a id="2924" class="Symbol">(</a><a id="2925" class="Bound">x</a> <a id="2927" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="2929" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2931" class="Bound">0≤x</a> <a id="2935" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2937" href="Ledger.Prelude.Numeric.UnitInterval.html#2918" class="Bound">x≤1</a> <a id="2941" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="2942" class="Symbol">)</a>

<a id="2945" class="Comment">-- UnitInterval Properties</a>

<a id="2973" class="Comment">-- The predicate for &#39;UnitInterval&#39; also holds in a proof-relevant context.</a>
<a id="fromUnitInterval-inUnitInterval"></a><a id="3049" href="Ledger.Prelude.Numeric.UnitInterval.html#3049" class="Function">fromUnitInterval-inUnitInterval</a>
  <a id="3083" class="Symbol">:</a> <a id="3085" class="Symbol">∀</a> <a id="3087" class="Symbol">(</a><a id="3088" href="Ledger.Prelude.Numeric.UnitInterval.html#3088" class="Bound">x</a> <a id="3090" class="Symbol">:</a> <a id="3092" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a><a id="3104" class="Symbol">)</a> <a id="3106" class="Symbol">→</a> <a id="3108" href="Ledger.Prelude.Numeric.UnitInterval.html#560" class="Function">inUnitInterval</a> <a id="3123" class="Symbol">(</a><a id="3124" href="Ledger.Prelude.Numeric.UnitInterval.html#1989" class="Function">fromUnitInterval</a> <a id="3141" href="Ledger.Prelude.Numeric.UnitInterval.html#3088" class="Bound">x</a><a id="3142" class="Symbol">)</a>
<a id="3144" href="Ledger.Prelude.Numeric.UnitInterval.html#3049" class="Function">fromUnitInterval-inUnitInterval</a> <a id="3176" class="Symbol">(</a><a id="3177" href="Ledger.Prelude.Numeric.UnitInterval.html#3177" class="Bound">x</a> <a id="3179" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="3181" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3183" href="Ledger.Prelude.Numeric.UnitInterval.html#3183" class="Bound">p0</a> <a id="3186" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3187" class="Symbol">)</a> <a id="3189" class="Keyword">with</a> <a id="3194" href="Ledger.Prelude.Numeric.UnitInterval.html#691" class="Function">isInUnitInterval</a> <a id="3211" href="Ledger.Prelude.Numeric.UnitInterval.html#3177" class="Bound">x</a>
<a id="3213" class="Symbol">...</a> <a id="3217" class="Symbol">|</a> <a id="3219" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3222" href="Ledger.Prelude.Numeric.UnitInterval.html#3222" class="Bound">¬p</a> <a id="3225" class="Symbol">=</a> <a id="3227" href="Data.Empty.html#1129" class="Function">⊥-elim-irr</a> <a id="3238" class="Symbol">(</a><a id="3239" href="Ledger.Prelude.Numeric.UnitInterval.html#3222" class="Bound">¬p</a> <a id="3242" class="Bound">p0</a><a id="3244" class="Symbol">)</a>
<a id="3246" class="Symbol">...</a> <a id="3250" class="Symbol">|</a> <a id="3252" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3256" href="Ledger.Prelude.Numeric.UnitInterval.html#3256" class="Bound">p</a> <a id="3258" class="Symbol">=</a> <a id="3260" href="Ledger.Prelude.Numeric.UnitInterval.html#3256" class="Bound">p</a>

<a id="3263" class="Comment">-- Left multiplication by unit interval element preserves non-negativity.</a>
<a id="UnitInterval-*-0≤"></a><a id="3337" href="Ledger.Prelude.Numeric.UnitInterval.html#3337" class="Function">UnitInterval-*-0≤</a>
  <a id="3357" class="Symbol">:</a> <a id="3359" class="Symbol">∀</a> <a id="3361" class="Symbol">(</a><a id="3362" href="Ledger.Prelude.Numeric.UnitInterval.html#3362" class="Bound">x</a> <a id="3364" class="Symbol">:</a> <a id="3366" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="3367" class="Symbol">)</a> <a id="3369" class="Symbol">(</a><a id="3370" href="Ledger.Prelude.Numeric.UnitInterval.html#3370" class="Bound">y</a> <a id="3372" class="Symbol">:</a> <a id="3374" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a><a id="3386" class="Symbol">)</a> <a id="3388" class="Symbol">→</a> <a id="3390" class="Number">0</a> <a id="3392" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="3394" href="Ledger.Prelude.Numeric.UnitInterval.html#3362" class="Bound">x</a> <a id="3396" class="Symbol">→</a> <a id="3398" class="Number">0</a> <a id="3400" href="Data.Rational.Base.html#2544" class="Datatype Operator">≤</a> <a id="3402" href="Ledger.Prelude.Numeric.UnitInterval.html#3362" class="Bound">x</a> <a id="3404" href="Data.Rational.Base.html#6394" class="Function Operator">*</a> <a id="3406" href="Ledger.Prelude.Numeric.UnitInterval.html#1989" class="Function">fromUnitInterval</a> <a id="3423" href="Ledger.Prelude.Numeric.UnitInterval.html#3370" class="Bound">y</a>
<a id="3425" href="Ledger.Prelude.Numeric.UnitInterval.html#3337" class="Function">UnitInterval-*-0≤</a> <a id="3443" href="Ledger.Prelude.Numeric.UnitInterval.html#3443" class="Bound">x</a> <a id="3445" href="Ledger.Prelude.Numeric.UnitInterval.html#3445" class="Bound">y</a> <a id="3447" href="Ledger.Prelude.Numeric.UnitInterval.html#3447" class="Bound">0≤x</a> <a id="3451" class="Symbol">=</a>
  <a id="3455" href="Ledger.Prelude.Numeric.UnitInterval.html#1157" class="Function">inUnitInterval-*-0≤</a> <a id="3475" href="Ledger.Prelude.Numeric.UnitInterval.html#3443" class="Bound">x</a> <a id="3477" class="Symbol">(</a><a id="3478" href="Data.Refinement.Base.html#789" class="Field">value</a> <a id="3484" href="Ledger.Prelude.Numeric.UnitInterval.html#3445" class="Bound">y</a><a id="3485" class="Symbol">)</a> <a id="3487" class="Symbol">(</a><a id="3488" href="Ledger.Prelude.Numeric.UnitInterval.html#3049" class="Function">fromUnitInterval-inUnitInterval</a> <a id="3520" href="Ledger.Prelude.Numeric.UnitInterval.html#3445" class="Bound">y</a><a id="3521" class="Symbol">)</a> <a id="3523" href="Ledger.Prelude.Numeric.UnitInterval.html#3447" class="Bound">0≤x</a>

<a id="3528" class="Comment">-- to/from is the identity</a>
<a id="prop-toUnitInterval-fromUnitInterval"></a><a id="3555" href="Ledger.Prelude.Numeric.UnitInterval.html#3555" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3592" class="Symbol">:</a> <a id="3594" class="Symbol">∀</a> <a id="3596" class="Symbol">(</a><a id="3597" href="Ledger.Prelude.Numeric.UnitInterval.html#3597" class="Bound">x</a> <a id="3599" class="Symbol">:</a> <a id="3601" href="Ledger.Prelude.Numeric.UnitInterval.html#1777" class="Function">UnitInterval</a><a id="3613" class="Symbol">)</a>
  <a id="3617" class="Symbol">→</a> <a id="3619" href="Ledger.Prelude.Numeric.UnitInterval.html#2106" class="Function">toUnitInterval</a> <a id="3634" class="Symbol">(</a><a id="3635" href="Ledger.Prelude.Numeric.UnitInterval.html#1989" class="Function">fromUnitInterval</a> <a id="3652" href="Ledger.Prelude.Numeric.UnitInterval.html#3597" class="Bound">x</a><a id="3653" class="Symbol">)</a> <a id="3655" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3657" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3662" href="Ledger.Prelude.Numeric.UnitInterval.html#3597" class="Bound">x</a>
<a id="3664" href="Ledger.Prelude.Numeric.UnitInterval.html#3555" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3701" class="Symbol">(</a><a id="3702" href="Ledger.Prelude.Numeric.UnitInterval.html#3702" class="Bound">x</a> <a id="3704" href="Data.Refinement.Base.html#777" class="InductiveConstructor Operator">,</a> <a id="3706" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3708" href="Ledger.Prelude.Numeric.UnitInterval.html#3708" class="Bound">p0</a> <a id="3711" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3712" class="Symbol">)</a> <a id="3714" class="Keyword">with</a> <a id="3719" href="Ledger.Prelude.Numeric.UnitInterval.html#691" class="Function">isInUnitInterval</a> <a id="3736" href="Ledger.Prelude.Numeric.UnitInterval.html#3702" class="Bound">x</a>
<a id="3738" class="Symbol">...</a> <a id="3742" class="Symbol">|</a> <a id="3744" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3747" href="Ledger.Prelude.Numeric.UnitInterval.html#3747" class="Bound">¬p</a> <a id="3750" class="Symbol">=</a> <a id="3752" href="Data.Empty.html#1129" class="Function">⊥-elim-irr</a> <a id="3763" class="Symbol">(</a><a id="3764" href="Ledger.Prelude.Numeric.UnitInterval.html#3747" class="Bound">¬p</a> <a id="3767" class="Bound">p0</a><a id="3769" class="Symbol">)</a>
<a id="3771" class="Symbol">...</a> <a id="3775" class="Symbol">|</a> <a id="3777" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3781" href="Ledger.Prelude.Numeric.UnitInterval.html#3781" class="Bound">p</a> <a id="3783" class="Symbol">=</a> <a id="3785" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

</pre></body></html>