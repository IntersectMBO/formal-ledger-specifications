<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Foreign.HSLedger.NewEpoch</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html" class="Module">Ledger.Conway.Foreign.HSLedger.NewEpoch</a> <a id="48" class="Keyword">where</a>

<a id="55" class="Keyword">open</a> <a id="60" class="Keyword">import</a> <a id="67" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html" class="Module">Ledger.Conway.Foreign.HSLedger.BaseTypes</a>
<a id="108" class="Keyword">open</a> <a id="113" class="Keyword">import</a> <a id="120" href="Ledger.Conway.Foreign.HSLedger.Epoch.html" class="Module">Ledger.Conway.Foreign.HSLedger.Epoch</a>
<a id="157" class="Keyword">open</a> <a id="162" class="Keyword">import</a> <a id="169" href="Ledger.Conway.Foreign.HSLedger.Rewards.html" class="Module">Ledger.Conway.Foreign.HSLedger.Rewards</a>

<a id="209" class="Keyword">open</a> <a id="214" class="Keyword">import</a> <a id="221" href="Ledger.Conway.Conformance.Epoch.html" class="Module">Ledger.Conway.Conformance.Epoch</a> <a id="253" href="Function.Base.html#4755" class="Function">it</a> <a id="256" href="Function.Base.html#4755" class="Function">it</a>
<a id="259" class="Keyword">open</a> <a id="264" class="Keyword">import</a> <a id="271" href="Ledger.Conway.Conformance.Epoch.Properties.html" class="Module">Ledger.Conway.Conformance.Epoch.Properties</a> <a id="314" href="Function.Base.html#4755" class="Function">it</a> <a id="317" href="Function.Base.html#4755" class="Function">it</a>

<a id="321" class="Keyword">import</a> <a id="328" href="Data.String.html" class="Module">Data.String</a> <a id="340" class="Symbol">as</a> <a id="343" class="Module">S</a>

<a id="346" class="Keyword">instance</a>
  <a id="Show-NEWEPOCH"></a><a id="357" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#357" class="Function">Show-NEWEPOCH</a> <a id="371" class="Symbol">:</a> <a id="373" class="Symbol">∀</a> <a id="375" class="Symbol">{</a><a id="376" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#376" class="Bound">eps</a> <a id="380" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#380" class="Bound">e</a> <a id="382" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#382" class="Bound">eps&#39;</a><a id="386" class="Symbol">}</a> <a id="388" class="Symbol">→</a> <a id="390" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="395" class="Symbol">(_</a> <a id="398" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⊢</a> <a id="400" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#376" class="Bound">eps</a> <a id="404" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⇀⦇</a> <a id="407" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#380" class="Bound">e</a> <a id="409" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">,NEWEPOCH⦈</a> <a id="420" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#382" class="Bound">eps&#39;</a><a id="424" class="Symbol">)</a>
  <a id="428" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#357" class="Function">Show-NEWEPOCH</a> <a id="442" class="Symbol">.</a><a id="443" href="Class.Show.Core.html#187" class="Field">show</a> <a id="448" class="Symbol">(</a><a id="449" href="Ledger.Conway.Conformance.Epoch.html#5580" class="InductiveConstructor">NEWEPOCH-New</a> <a id="462" class="Symbol">(_</a> <a id="465" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="467" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#467" class="Bound">e</a><a id="468" class="Symbol">))</a>        <a id="478" class="Symbol">=</a> <a id="480" class="String">&quot;NEWEPOCH-New &quot;</a> <a id="496" href="Data.String.Base.html#2425" class="Function Operator">S.++</a> <a id="501" href="Class.Show.Core.html#187" class="Field">show</a> <a id="506" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#467" class="Bound">e</a>
  <a id="510" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#357" class="Function">Show-NEWEPOCH</a> <a id="524" class="Symbol">.</a><a id="525" href="Class.Show.Core.html#187" class="Field">show</a> <a id="530" class="Symbol">(</a><a id="531" href="Ledger.Conway.Conformance.Epoch.html#5816" class="InductiveConstructor">NEWEPOCH-Not-New</a> <a id="548" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#548" class="Bound">x</a><a id="549" class="Symbol">)</a>          <a id="560" class="Symbol">=</a> <a id="562" class="String">&quot;NEWEPOCH-Not-New&quot;</a>
  <a id="583" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#357" class="Function">Show-NEWEPOCH</a> <a id="597" class="Symbol">.</a><a id="598" href="Class.Show.Core.html#187" class="Field">show</a> <a id="603" class="Symbol">(</a><a id="604" href="Ledger.Conway.Conformance.Epoch.html#5979" class="InductiveConstructor">NEWEPOCH-No-Reward-Update</a> <a id="630" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#630" class="Bound">x</a><a id="631" class="Symbol">)</a> <a id="633" class="Symbol">=</a> <a id="635" class="String">&quot;NEWEPOCH-No-Reward-Update&quot;</a>

<a id="664" class="Keyword">instance</a>
  <a id="HsTy-NewEpochState"></a><a id="675" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#675" class="Function">HsTy-NewEpochState</a> <a id="694" class="Symbol">=</a> <a id="696" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">autoHsType</a> <a id="707" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a> <a id="721" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">⊣</a> <a id="723" href="Foreign.HaskellTypes.Deriving.html#3237" class="Function">withConstructor</a> <a id="739" class="String">&quot;MkNewEpochState&quot;</a>
  <a id="Conv-NewEpochState"></a><a id="759" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#759" class="Function">Conv-NewEpochState</a> <a id="778" class="Symbol">=</a> <a id="780" href="Foreign.Convertible.Deriving.html#6814" class="Macro">autoConvert</a> <a id="792" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a>

<a id="newepoch-step"></a><a id="807" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#807" class="Function">newepoch-step</a> <a id="821" class="Symbol">:</a> <a id="823" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="830" class="Symbol">(</a><a id="831" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="833" class="Symbol">→</a> <a id="835" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a> <a id="849" class="Symbol">→</a> <a id="851" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a> <a id="857" class="Symbol">→</a> <a id="859" href="Interface.ComputationalRelation.html#237" class="Datatype">ComputationResult</a> <a id="877" href="Data.Empty.html#914" class="Function">⊥</a> <a id="879" class="Symbol">(</a><a id="880" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a> <a id="894" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="896" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="902" class="Symbol">))</a>
<a id="905" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#807" class="Function">newepoch-step</a> <a id="919" class="Symbol">_</a> <a id="921" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#921" class="Bound">newEpochSt</a> <a id="932" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#932" class="Bound">e</a> <a id="934" class="Symbol">=</a>
  <a id="938" class="Keyword">let</a> <a id="942" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#942" class="Bound">r</a> <a id="944" class="Symbol">=</a> <a id="946" href="Ledger.Conway.Conformance.Epoch.Properties.html#4718" class="Function">Computational-NEWEPOCH</a> <a id="969" class="Symbol">.</a><a id="970" href="Interface.ComputationalRelation.html#2884" class="Field">computeProof</a> <a id="983" class="Symbol">_</a> <a id="985" class="Symbol">(</a><a id="986" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="991" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#921" class="Bound">newEpochSt</a><a id="1001" class="Symbol">)</a> <a id="1003" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#932" class="Bound">e</a>
  <a id="1007" class="Keyword">in</a> <a id="1010" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="1015" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#942" class="Bound">r</a> <a id="1017" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="1020" class="Symbol">λ</a> <a id="1022" class="Keyword">where</a>
    <a id="1032" class="Symbol">(</a><a id="1033" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="1041" class="Symbol">(</a><a id="1042" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#1042" class="Bound">s</a> <a id="1044" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1046" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#1046" class="Bound">p</a><a id="1047" class="Symbol">))</a> <a id="1050" class="Symbol">→</a> <a id="1052" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="1055" class="Symbol">(</a><a id="1056" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="1064" class="Symbol">(</a><a id="1065" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#1042" class="Bound">s</a> <a id="1067" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1069" href="Class.Show.Core.html#187" class="Field">show</a> <a id="1074" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#1046" class="Bound">p</a><a id="1075" class="Symbol">))</a>

<a id="1079" class="Symbol">{-#</a> <a id="1083" class="Keyword">COMPILE</a> <a id="1091" class="Keyword">GHC</a> <a id="1095" href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html#807" class="Function">newepoch-step</a> <a id="1109" class="Pragma">as</a> <a id="1112" class="Pragma">newEpochStep</a> <a id="1125" class="Symbol">#-}</a>

</pre></body></html>