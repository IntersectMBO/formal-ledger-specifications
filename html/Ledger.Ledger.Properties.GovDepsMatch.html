<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Ledger.Properties.GovDepsMatch</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>
<a id="57" class="Keyword">open</a> <a id="62" class="Keyword">import</a> <a id="69" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a>

<a id="86" class="Keyword">module</a> <a id="93" href="Ledger.Ledger.Properties.GovDepsMatch.html" class="Module">Ledger.Ledger.Properties.GovDepsMatch</a>
  <a id="133" class="Symbol">(</a><a id="134" href="Ledger.Ledger.Properties.GovDepsMatch.html#134" class="Bound">txs</a> <a id="138" class="Symbol">:</a> <a id="140" class="Symbol">_)</a> <a id="143" class="Symbol">(</a><a id="144" class="Keyword">open</a> <a id="149" href="Ledger.Transaction.html#867" class="Module">TransactionStructure</a> <a id="170" href="Ledger.Ledger.Properties.GovDepsMatch.html#134" class="Bound">txs</a><a id="173" class="Symbol">)</a>
  <a id="177" class="Symbol">(</a><a id="178" href="Ledger.Ledger.Properties.GovDepsMatch.html#178" class="Bound">abs</a> <a id="182" class="Symbol">:</a> <a id="184" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a> <a id="202" href="Ledger.Ledger.Properties.GovDepsMatch.html#134" class="Bound">txs</a><a id="205" class="Symbol">)</a> <a id="207" class="Symbol">(</a><a id="208" class="Keyword">open</a> <a id="213" href="Ledger.Abstract.html#578" class="Module">AbstractFunctions</a> <a id="231" href="Ledger.Ledger.Properties.GovDepsMatch.html#178" class="Bound">abs</a><a id="234" class="Symbol">)</a>
  <a id="238" class="Keyword">where</a>


<a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="271" href="Ledger.Transaction.html#1809" class="Function">govStructure</a> <a id="284" class="Keyword">using</a> <a id="290" class="Symbol">(</a><a id="291" href="Ledger.Certs.html#332" class="Datatype">DepositPurpose</a><a id="305" class="Symbol">)</a>
<a id="307" class="Keyword">open</a> <a id="312" class="Keyword">import</a> <a id="319" href="Ledger.Ledger.html" class="Module">Ledger.Ledger</a> <a id="333" href="Ledger.Ledger.Properties.GovDepsMatch.html#134" class="Bound">txs</a> <a id="337" href="Ledger.Ledger.Properties.GovDepsMatch.html#178" class="Bound">abs</a>
<a id="341" class="Keyword">open</a> <a id="346" class="Keyword">import</a> <a id="353" href="Ledger.Ledger.Properties.html" class="Module">Ledger.Ledger.Properties</a> <a id="378" href="Ledger.Ledger.Properties.GovDepsMatch.html#134" class="Bound">txs</a> <a id="382" href="Ledger.Ledger.Properties.GovDepsMatch.html#178" class="Bound">abs</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Ledger.Utxo.html" class="Module">Ledger.Utxo</a> <a id="437" href="Ledger.Ledger.Properties.GovDepsMatch.html#134" class="Bound">txs</a> <a id="441" href="Ledger.Ledger.Properties.GovDepsMatch.html#178" class="Bound">abs</a>

<a id="446" class="Keyword">open</a> <a id="451" class="Keyword">import</a> <a id="458" href="Axiom.Set.Properties.html" class="Module">Axiom.Set.Properties</a> <a id="479" href="Axiom.Set.html#10669" class="Function">th</a>
<a id="482" class="Keyword">import</a> <a id="489" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="522" class="Symbol">as</a> <a id="525" class="Module">SetoidReasoning</a>

<a id="542" class="Keyword">open</a> <a id="547" href="Relation.Binary.Reasoning.Setoid.html" class="Module">SetoidReasoning</a> <a id="563" class="Symbol">(</a><a id="564" href="Axiom.Set.Properties.html#3967" class="Function">≡ᵉ-Setoid</a><a id="573" class="Symbol">{</a><a id="574" href="Ledger.Certs.html#332" class="Datatype">DepositPurpose</a><a id="588" class="Symbol">})</a>


<a id="LEDGER-govDepsMatch"></a><a id="593" href="Ledger.Ledger.Properties.GovDepsMatch.html#593" class="Function">LEDGER-govDepsMatch</a> <a id="613" class="Symbol">:</a>  <a id="616" href="Interface.STS.html#3874" class="Function">LedgerInvariant</a> <a id="632" href="Ledger.Ledger.html#2581" class="Datatype Operator">_⊢_⇀⦇_,LEDGER⦈_</a> <a id="648" href="Ledger.Ledger.Properties.html#4161" class="Function">govDepsMatch</a>


<a id="663" href="Ledger.Ledger.Properties.GovDepsMatch.html#593" class="Function">LEDGER-govDepsMatch</a> <a id="683" class="Symbol">(</a><a id="684" href="Ledger.Ledger.html#3637" class="InductiveConstructor">LEDGER-I⋯</a> <a id="694" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="699" class="Symbol">(</a><a id="700" href="Ledger.Ledger.Properties.html#4360" class="InductiveConstructor">UTXOW-UTXOS</a> <a id="712" class="Symbol">(</a><a id="713" href="Ledger.Utxo.html#13500" class="InductiveConstructor">Scripts-No</a> <a id="724" class="Symbol">_)))</a> <a id="729" href="Ledger.Ledger.Properties.GovDepsMatch.html#729" class="Bound">aprioriMatch</a> <a id="742" class="Symbol">=</a> <a id="744" href="Ledger.Ledger.Properties.GovDepsMatch.html#729" class="Bound">aprioriMatch</a>

<a id="758" href="Ledger.Ledger.Properties.GovDepsMatch.html#593" class="Function">LEDGER-govDepsMatch</a> <a id="778" class="Symbol">{</a><a id="779" href="Ledger.Ledger.Properties.GovDepsMatch.html#779" class="Bound">Γ</a><a id="780" class="Symbol">}{</a><a id="782" href="Ledger.Ledger.Properties.GovDepsMatch.html#782" class="Bound">s</a><a id="783" class="Symbol">}{</a><a id="785" href="Ledger.Ledger.Properties.GovDepsMatch.html#785" class="Bound">tx</a><a id="787" class="Symbol">}{</a><a id="789" href="Ledger.Ledger.Properties.GovDepsMatch.html#789" class="Bound">s&#39;</a><a id="791" class="Symbol">}</a>
    <a id="797" href="Ledger.Ledger.Properties.GovDepsMatch.html#797" class="Bound">utxosts</a><a id="804" class="Symbol">@(</a><a id="806" href="Ledger.Ledger.html#3584" class="InductiveConstructor">LEDGER-V⋯</a> <a id="816" href="Ledger.Ledger.Properties.GovDepsMatch.html#816" class="Bound">tx-valid</a> <a id="825" class="Symbol">(</a><a id="826" href="Ledger.Ledger.Properties.html#4360" class="InductiveConstructor">UTXOW-UTXOS</a> <a id="838" class="Symbol">(</a><a id="839" href="Ledger.Utxo.html#12986" class="InductiveConstructor">Scripts-Yes</a> <a id="851" href="Ledger.Ledger.Properties.GovDepsMatch.html#851" class="Bound">x</a><a id="852" class="Symbol">))</a> <a id="855" class="Symbol">_</a> <a id="857" href="Ledger.Ledger.Properties.GovDepsMatch.html#857" class="Bound">GOV-sts</a><a id="864" class="Symbol">)</a> <a id="866" href="Ledger.Ledger.Properties.GovDepsMatch.html#866" class="Bound">aprioriMatch</a> <a id="879" class="Symbol">=</a>
    <a id="885" class="Keyword">let</a>  <a id="890" class="Keyword">open</a> <a id="895" href="Ledger.Transaction.html#4221" class="Module">Tx</a> <a id="898" href="Ledger.Ledger.Properties.GovDepsMatch.html#785" class="Bound">tx</a><a id="900" class="Symbol">;</a> <a id="902" class="Keyword">open</a> <a id="907" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="914" href="Ledger.Transaction.html#4253" class="Function">body</a>
         <a id="928" class="Keyword">open</a> <a id="933" href="Ledger.Ledger.html#545" class="Module">LEnv</a> <a id="938" href="Ledger.Ledger.Properties.GovDepsMatch.html#779" class="Bound">Γ</a> <a id="940" class="Keyword">renaming</a> <a id="949" class="Symbol">(</a><a id="950" href="Ledger.Ledger.html#633" class="Field">pparams</a> <a id="958" class="Symbol">to</a> <a id="961" class="Field">pp</a><a id="963" class="Symbol">)</a>
         <a id="974" class="Keyword">open</a> <a id="979" href="Ledger.PParams.html#1570" class="Module">PParams</a> <a id="987" href="Ledger.Ledger.Properties.GovDepsMatch.html#961" class="Function">pp</a> <a id="990" class="Keyword">using</a> <a id="996" class="Symbol">(</a><a id="997" href="Ledger.PParams.html#3236" class="Field">govActionDeposit</a><a id="1013" class="Symbol">)</a>
         <a id="1024" class="Keyword">open</a> <a id="1029" href="Ledger.Ledger.html#809" class="Module">LState</a> <a id="1036" href="Ledger.Ledger.Properties.GovDepsMatch.html#782" class="Bound">s</a>
         <a id="1047" class="Keyword">open</a> <a id="1052" href="Ledger.Ledger.html#809" class="Module">LState</a> <a id="1059" href="Ledger.Ledger.Properties.GovDepsMatch.html#789" class="Bound">s&#39;</a> <a id="1062" class="Keyword">renaming</a> <a id="1071" class="Symbol">(</a><a id="1072" href="Ledger.Ledger.html#895" class="Field">govSt</a> <a id="1078" class="Symbol">to</a> <a id="1081" class="Field">govSt&#39;</a><a id="1087" class="Symbol">;</a> <a id="1089" href="Ledger.Ledger.html#921" class="Field">certState</a> <a id="1099" class="Symbol">to</a> <a id="1102" class="Field">certState&#39;</a><a id="1112" class="Symbol">)</a>
         <a id="1123" class="Keyword">open</a> <a id="1128" href="Ledger.Ledger.Properties.html#4812" class="Module">LEDGER-PROPS</a> <a id="1141" href="Ledger.Ledger.Properties.GovDepsMatch.html#785" class="Bound">tx</a> <a id="1144" href="Ledger.Ledger.Properties.GovDepsMatch.html#779" class="Bound">Γ</a> <a id="1146" href="Ledger.Ledger.Properties.GovDepsMatch.html#782" class="Bound">s</a> <a id="1148" class="Keyword">using</a> <a id="1154" class="Symbol">(</a><a id="1155" href="Ledger.Ledger.Properties.html#5094" class="Function">utxoDeps</a><a id="1163" class="Symbol">;</a> <a id="1165" href="Ledger.Ledger.Properties.html#5776" class="Function">updateGovStates</a><a id="1180" class="Symbol">;</a> <a id="1182" href="Ledger.Ledger.Properties.html#6119" class="Function">STS→GovSt≡</a><a id="1192" class="Symbol">)</a>
         <a id="1203" class="Keyword">open</a> <a id="1208" href="Ledger.Ledger.Properties.html#7336" class="Module">SetoidProperties</a> <a id="1225" href="Ledger.Ledger.Properties.GovDepsMatch.html#785" class="Bound">tx</a> <a id="1228" href="Ledger.Ledger.Properties.GovDepsMatch.html#779" class="Bound">Γ</a> <a id="1230" href="Ledger.Ledger.Properties.GovDepsMatch.html#782" class="Bound">s</a> <a id="1232" class="Keyword">using</a> <a id="1238" class="Symbol">(</a><a id="1239" href="Ledger.Ledger.Properties.html#22252" class="Function">|ᵒ-GAs-pres</a><a id="1250" class="Symbol">;</a> <a id="1252" href="Ledger.Ledger.Properties.html#14722" class="Function">props-dpMap-votes-invar</a><a id="1275" class="Symbol">;</a> <a id="1277" href="Ledger.Ledger.Properties.html#18569" class="Function">utxo-govst-connex</a><a id="1294" class="Symbol">;</a> <a id="1296" href="Ledger.Ledger.Properties.html#11117" class="Function">noGACerts</a><a id="1305" class="Symbol">)</a>
    <a id="1311" class="Keyword">in</a>
    <a id="1318" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
      <a id="1330" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="1338" href="Ledger.Ledger.Properties.html#3949" class="Function">isGADeposit</a> <a id="1350" class="Symbol">(</a><a id="1351" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1355" class="Symbol">(</a><a id="1356" href="Ledger.Utxo.html#9297" class="Function">updateDeposits</a> <a id="1371" href="Ledger.Ledger.Properties.GovDepsMatch.html#961" class="Function">pp</a> <a id="1374" href="Ledger.Transaction.html#4253" class="Function">body</a> <a id="1379" href="Ledger.Ledger.Properties.html#5094" class="Function">utxoDeps</a><a id="1387" class="Symbol">))</a>
        <a id="1398" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="1401" href="Ledger.Ledger.Properties.html#11117" class="Function">noGACerts</a> <a id="1411" href="Ledger.Transaction.html#2911" class="Function">txcerts</a> <a id="1419" class="Symbol">(</a><a id="1420" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="1443" href="Ledger.Transaction.html#3009" class="Function">txprop</a> <a id="1450" href="Ledger.Transaction.html#3245" class="Function">txid</a> <a id="1455" href="Ledger.PParams.html#3236" class="Function">govActionDeposit</a> <a id="1472" href="Ledger.Ledger.Properties.html#5094" class="Function">utxoDeps</a><a id="1480" class="Symbol">)</a> <a id="1482" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
      <a id="1490" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="1498" href="Ledger.Ledger.Properties.html#3949" class="Function">isGADeposit</a> <a id="1510" class="Symbol">(</a><a id="1511" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1515" class="Symbol">(</a><a id="1516" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="1539" href="Ledger.Transaction.html#3009" class="Function">txprop</a> <a id="1546" href="Ledger.Transaction.html#3245" class="Function">txid</a> <a id="1551" href="Ledger.PParams.html#3236" class="Function">govActionDeposit</a> <a id="1568" href="Ledger.Ledger.Properties.html#5094" class="Function">utxoDeps</a><a id="1576" class="Symbol">))</a>
        <a id="1587" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">≈⟨</a> <a id="1590" href="Ledger.Ledger.Properties.html#18569" class="Function">utxo-govst-connex</a> <a id="1608" href="Ledger.Transaction.html#3009" class="Function">txprop</a> <a id="1615" href="Ledger.Ledger.Properties.GovDepsMatch.html#866" class="Bound">aprioriMatch</a> <a id="1628" href="Relation.Binary.Reasoning.Syntax.html#7111" class="Function">⟩</a>
      <a id="1636" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1645" class="Symbol">(</a><a id="1646" href="Ledger.Ledger.Properties.html#3870" class="Function">dpMap</a> <a id="1652" class="Symbol">(</a><a id="1653" href="Ledger.Ledger.Properties.html#5776" class="Function">updateGovStates</a> <a id="1669" class="Symbol">(</a><a id="1670" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1674" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1679" href="Ledger.Transaction.html#3009" class="Function">txprop</a><a id="1685" class="Symbol">)</a> <a id="1687" class="Number">0</a> <a id="1689" href="Ledger.Ledger.html#895" class="Function">govSt</a><a id="1694" class="Symbol">))</a>
        <a id="1705" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="1709" href="Ledger.Ledger.Properties.html#14722" class="Function">props-dpMap-votes-invar</a> <a id="1733" href="Ledger.Transaction.html#2973" class="Function">txvote</a> <a id="1740" href="Ledger.Transaction.html#3009" class="Function">txprop</a> <a id="1747" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="1755" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1764" class="Symbol">(</a><a id="1765" href="Ledger.Ledger.Properties.html#3870" class="Function">dpMap</a> <a id="1771" class="Symbol">(</a><a id="1772" href="Ledger.Ledger.Properties.html#5776" class="Function">updateGovStates</a> <a id="1788" class="Symbol">(</a><a id="1789" href="Ledger.Ledger.html#1707" class="Function">txgov</a> <a id="1795" href="Ledger.Transaction.html#4253" class="Function">body</a><a id="1799" class="Symbol">)</a> <a id="1801" class="Number">0</a> <a id="1803" href="Ledger.Ledger.html#895" class="Function">govSt</a> <a id="1809" class="Symbol">))</a>
        <a id="1820" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">≈˘⟨</a> <a id="1824" href="Ledger.Ledger.Properties.html#22252" class="Function">|ᵒ-GAs-pres</a> <a id="1836" class="Number">0</a> <a id="1838" href="Ledger.Ledger.html#895" class="Function">govSt</a> <a id="1844" href="Ledger.Ledger.Properties.GovDepsMatch.html#1102" class="Function">certState&#39;</a> <a id="1855" href="Relation.Binary.Reasoning.Syntax.html#7462" class="Function">⟩</a>
      <a id="1863" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1872" class="Symbol">(</a><a id="1873" href="Ledger.Ledger.Properties.html#3870" class="Function">dpMap</a> <a id="1879" class="Symbol">(</a><a id="1880" href="Ledger.Ledger.Properties.html#5776" class="Function">updateGovStates</a> <a id="1896" class="Symbol">(</a><a id="1897" href="Ledger.Ledger.html#1707" class="Function">txgov</a> <a id="1903" href="Ledger.Transaction.html#4253" class="Function">body</a><a id="1907" class="Symbol">)</a> <a id="1909" class="Number">0</a> <a id="1911" class="Symbol">(</a><a id="1912" href="Ledger.Ledger.html#1825" class="Function">rmOrphanDRepVotes</a> <a id="1930" href="Ledger.Ledger.Properties.GovDepsMatch.html#1102" class="Function">certState&#39;</a> <a id="1941" href="Ledger.Ledger.html#895" class="Function">govSt</a><a id="1946" class="Symbol">)))</a>
        <a id="1958" href="Relation.Binary.Reasoning.Syntax.html#11539" class="Function">≡˘⟨</a> <a id="1962" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="1967" class="Symbol">(</a><a id="1968" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1977" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1979" href="Ledger.Ledger.Properties.html#3870" class="Function">dpMap</a> <a id="1985" class="Symbol">)</a> <a id="1987" class="Symbol">(</a><a id="1988" href="Ledger.Ledger.Properties.html#6119" class="Function">STS→GovSt≡</a> <a id="1999" href="Ledger.Ledger.Properties.GovDepsMatch.html#797" class="Bound">utxosts</a> <a id="2007" href="Ledger.Ledger.Properties.GovDepsMatch.html#816" class="Bound">tx-valid</a><a id="2015" class="Symbol">)</a> <a id="2017" href="Relation.Binary.Reasoning.Syntax.html#11539" class="Function">⟩</a>
      <a id="2025" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="2034" class="Symbol">(</a><a id="2035" href="Ledger.Ledger.Properties.html#3870" class="Function">dpMap</a> <a id="2041" href="Ledger.Ledger.Properties.GovDepsMatch.html#1081" class="Function">govSt&#39;</a><a id="2047" class="Symbol">)</a> <a id="2049" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="2052" href="Ledger.Ledger.Properties.GovDepsMatch.html#593" class="Function">LEDGER-govDepsMatch</a> <a id="2072" class="Symbol">{</a><a id="2073" class="Argument">s&#39;</a> <a id="2076" class="Symbol">=</a> <a id="2078" href="Ledger.Ledger.Properties.GovDepsMatch.html#2078" class="Bound">s&#39;</a><a id="2080" class="Symbol">}</a> <a id="2082" href="Ledger.Ledger.Properties.GovDepsMatch.html#2082" class="Bound">utxosts</a><a id="2089" class="Symbol">@(</a><a id="2091" href="Ledger.Ledger.html#2643" class="InductiveConstructor">LEDGER-V</a> <a id="2100" class="Symbol">(()</a> <a id="2104" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2106" href="Ledger.Ledger.Properties.html#4360" class="InductiveConstructor">UTXOW-UTXOS</a> <a id="2118" class="Symbol">(</a><a id="2119" href="Ledger.Utxo.html#13500" class="InductiveConstructor">Scripts-No</a> <a id="2130" class="Symbol">(_</a> <a id="2133" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2135" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="2139" class="Symbol">))</a> <a id="2142" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2144" class="Symbol">_</a> <a id="2146" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2148" href="Ledger.Ledger.Properties.GovDepsMatch.html#2148" class="Bound">GOV-sts</a><a id="2155" class="Symbol">))</a> <a id="2158" href="Ledger.Ledger.Properties.GovDepsMatch.html#2158" class="Bound">aprioriMatch</a>

</pre></body></html>