<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Utxo</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a>

<a id="159" class="Keyword">module</a> <a id="166" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a>
  <a id="203" class="Symbol">(</a><a id="204" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a> <a id="208" class="Symbol">:</a> <a id="210" class="Symbol">_)</a> <a id="213" class="Symbol">(</a><a id="214" class="Keyword">open</a> <a id="219" href="Ledger.Dijkstra.Specification.Transaction.html#1329" class="Module">TransactionStructure</a> <a id="240" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a><a id="243" class="Symbol">)</a>
  <a id="247" class="Symbol">(</a><a id="248" href="Ledger.Dijkstra.Specification.Utxo.html#248" class="Bound">abs</a> <a id="252" class="Symbol">:</a> <a id="254" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="272" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a><a id="275" class="Symbol">)</a> <a id="277" class="Symbol">(</a><a id="278" class="Keyword">open</a> <a id="283" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="301" href="Ledger.Dijkstra.Specification.Utxo.html#248" class="Bound">abs</a><a id="304" class="Symbol">)</a>
  <a id="308" class="Keyword">where</a>

<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="363" href="Ledger.Dijkstra.Specification.Transaction.html#2505" class="Function">govStructure</a>
<a id="376" class="Keyword">open</a> <a id="381" class="Keyword">import</a> <a id="388" href="Ledger.Dijkstra.Specification.Script.Validation.html" class="Module">Ledger.Dijkstra.Specification.Script.Validation</a> <a id="436" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a> <a id="440" href="Ledger.Dijkstra.Specification.Utxo.html#248" class="Bound">abs</a>
<a id="444" class="Keyword">open</a> <a id="449" class="Keyword">import</a> <a id="456" href="Ledger.Dijkstra.Specification.Fees.html" class="Module">Ledger.Dijkstra.Specification.Fees</a> <a id="491" class="Keyword">using</a> <a id="497" class="Symbol">(</a><a id="498" href="Ledger.Dijkstra.Specification.Fees.html#1004" class="Function">scriptsCost</a><a id="509" class="Symbol">)</a>

<a id="512" class="Keyword">import</a> <a id="519" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="548" class="Symbol">as</a> <a id="551" class="Module">List</a>
<a id="556" class="Keyword">import</a> <a id="563" href="Data.List.Relation.Unary.AllPairs.html" class="Module">Data.List.Relation.Unary.AllPairs</a> <a id="597" class="Symbol">as</a> <a id="600" class="Module">List</a>
<a id="605" class="Keyword">import</a> <a id="612" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="640" class="Symbol">as</a> <a id="643" class="Module">Sum</a>

<a id="648" class="Keyword">private</a> <a id="656" class="Keyword">variable</a>
  <a id="667" href="Ledger.Dijkstra.Specification.Utxo.html#667" class="Generalizable">ℓ</a> <a id="669" class="Symbol">:</a> <a id="671" href="Ledger.Dijkstra.Specification.Transaction.html#768" class="Datatype">TxLevel</a>

<a id="totExUnits"></a><a id="680" href="Ledger.Dijkstra.Specification.Utxo.html#680" class="Function">totExUnits</a> <a id="691" class="Symbol">:</a> <a id="693" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Record">Tx</a> <a id="696" href="Ledger.Dijkstra.Specification.Utxo.html#667" class="Generalizable">ℓ</a> <a id="698" class="Symbol">→</a> <a id="700" href="Ledger.Dijkstra.Specification.Script.Base.html#1023" class="Function">ExUnits</a>
<a id="708" href="Ledger.Dijkstra.Specification.Utxo.html#680" class="Function">totExUnits</a> <a id="719" href="Ledger.Dijkstra.Specification.Utxo.html#719" class="Bound">tx</a> <a id="722" class="Symbol">=</a> <a id="724" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">∑[</a> <a id="727" href="Ledger.Dijkstra.Specification.Utxo.html#727" class="Bound">(_</a> <a id="730" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="732" href="Ledger.Dijkstra.Specification.Utxo.html#732" class="Bound">eu</a><a id="734" href="Ledger.Dijkstra.Specification.Utxo.html#727" class="Bound">)</a> <a id="736" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">←</a> <a id="738" href="Ledger.Dijkstra.Specification.Transaction.html#5876" class="Field">RedeemersOf</a> <a id="750" href="Ledger.Dijkstra.Specification.Utxo.html#719" class="Bound">tx</a> <a id="753" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">]</a> <a id="755" href="Ledger.Dijkstra.Specification.Utxo.html#732" class="Bound">eu</a>

<a id="759" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="807" href="Ledger.Dijkstra.Specification.Utxo.html#807" class="Function">utxoEntrySizeWithoutVal</a> <a id="831" class="Symbol">:</a> <a id="833" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#429" class="Function">MemoryEstimate</a>
<a id="848" href="Ledger.Dijkstra.Specification.Utxo.html#807" class="Function">utxoEntrySizeWithoutVal</a> <a id="872" class="Symbol">=</a> <a id="874" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="877" href="Ledger.Dijkstra.Specification.Utxo.html#877" class="Function">utxoEntrySize</a> <a id="891" class="Symbol">:</a> <a id="893" href="Ledger.Dijkstra.Specification.Transaction.html#3077" class="Function">TxOut</a> <a id="899" class="Symbol">→</a> <a id="901" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#429" class="Function">MemoryEstimate</a>
<a id="916" href="Ledger.Dijkstra.Specification.Utxo.html#877" class="Function">utxoEntrySize</a> <a id="930" class="Symbol">(_</a> <a id="933" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="935" href="Ledger.Dijkstra.Specification.Utxo.html#935" class="Bound">v</a> <a id="937" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="939" class="Symbol">_</a> <a id="941" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="943" class="Symbol">_)</a> <a id="946" class="Symbol">=</a> <a id="948" href="Ledger.Dijkstra.Specification.Utxo.html#807" class="Function">utxoEntrySizeWithoutVal</a> <a id="972" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="974" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#978" class="Function">size</a> <a id="979" href="Ledger.Dijkstra.Specification.Utxo.html#935" class="Bound">v</a>

<a id="982" class="Keyword">open</a> <a id="987" href="Ledger.Dijkstra.Specification.PParams.html#1960" class="Module">PParams</a>


<a id="997" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="1004" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a> <a id="1012" class="Symbol">:</a> <a id="1014" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1019" class="Keyword">where</a>
  <a id="1027" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="1037" href="Ledger.Dijkstra.Specification.Utxo.html#1037" class="Field">slot</a>              <a id="1055" class="Symbol">:</a> <a id="1057" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="1066" href="Ledger.Dijkstra.Specification.Utxo.html#1066" class="Field">pparams</a>           <a id="1084" class="Symbol">:</a> <a id="1086" href="Ledger.Dijkstra.Specification.PParams.html#1960" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="1098" href="Ledger.Dijkstra.Specification.Utxo.html#1098" class="Field">treasury</a>          <a id="1116" class="Symbol">:</a> <a id="1118" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
    <a id="UTxOEnv.utxo₀"></a><a id="1131" href="Ledger.Dijkstra.Specification.Utxo.html#1131" class="Field">utxo₀</a>             <a id="1149" class="Symbol">:</a> <a id="1151" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a>
    <a id="UTxOEnv.depositsChange"></a><a id="1160" href="Ledger.Dijkstra.Specification.Utxo.html#1160" class="Field">depositsChange</a>    <a id="1178" class="Symbol">:</a> <a id="1180" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
    <a id="UTxOEnv.allScripts"></a><a id="1186" href="Ledger.Dijkstra.Specification.Utxo.html#1186" class="Field">allScripts</a>        <a id="1204" class="Symbol">:</a> <a id="1206" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1208" href="Ledger.Dijkstra.Specification.Script.Base.html#2510" class="Function">Script</a>
    <a id="UTxOEnv.allData"></a><a id="1219" href="Ledger.Dijkstra.Specification.Utxo.html#1219" class="Field">allData</a>           <a id="1237" class="Symbol">:</a> <a id="1239" href="Ledger.Dijkstra.Specification.Script.Base.html#1788" class="Function">DataHash</a> <a id="1248" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1250" href="Ledger.Dijkstra.Specification.Script.Base.html#1835" class="Function">Datum</a>

<a id="1257" class="Keyword">record</a> <a id="SubUTxOEnv"></a><a id="1264" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a> <a id="1275" class="Symbol">:</a> <a id="1277" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1282" class="Keyword">where</a>
  <a id="1290" class="Keyword">field</a>
    <a id="SubUTxOEnv.slot"></a><a id="1300" href="Ledger.Dijkstra.Specification.Utxo.html#1300" class="Field">slot</a>             <a id="1317" class="Symbol">:</a> <a id="1319" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="SubUTxOEnv.pparams"></a><a id="1328" href="Ledger.Dijkstra.Specification.Utxo.html#1328" class="Field">pparams</a>          <a id="1345" class="Symbol">:</a> <a id="1347" href="Ledger.Dijkstra.Specification.PParams.html#1960" class="Record">PParams</a>
    <a id="SubUTxOEnv.treasury"></a><a id="1359" href="Ledger.Dijkstra.Specification.Utxo.html#1359" class="Field">treasury</a>         <a id="1376" class="Symbol">:</a> <a id="1378" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
    <a id="SubUTxOEnv.utxo₀"></a><a id="1391" href="Ledger.Dijkstra.Specification.Utxo.html#1391" class="Field">utxo₀</a>            <a id="1408" class="Symbol">:</a> <a id="1410" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a>
    <a id="SubUTxOEnv.isTopLevelValid"></a><a id="1419" href="Ledger.Dijkstra.Specification.Utxo.html#1419" class="Field">isTopLevelValid</a>  <a id="1436" class="Symbol">:</a> <a id="1438" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
    <a id="SubUTxOEnv.allScripts"></a><a id="1447" href="Ledger.Dijkstra.Specification.Utxo.html#1447" class="Field">allScripts</a>       <a id="1464" class="Symbol">:</a> <a id="1466" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1468" href="Ledger.Dijkstra.Specification.Script.Base.html#2510" class="Function">Script</a>
    <a id="SubUTxOEnv.allData"></a><a id="1479" href="Ledger.Dijkstra.Specification.Utxo.html#1479" class="Field">allData</a>          <a id="1496" class="Symbol">:</a> <a id="1498" href="Ledger.Dijkstra.Specification.Script.Base.html#1788" class="Function">DataHash</a> <a id="1507" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1509" href="Ledger.Dijkstra.Specification.Script.Base.html#1835" class="Function">Datum</a>


<a id="1517" class="Keyword">record</a> <a id="UTxOState"></a><a id="1524" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="1534" class="Symbol">:</a> <a id="1536" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1541" class="Keyword">where</a>
  <a id="1549" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ᵘ"></a><a id="1561" href="Ledger.Dijkstra.Specification.Utxo.html#1561" class="InductiveConstructor Operator">⟦_,_,_⟧ᵘ</a>
  <a id="1572" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="1582" href="Ledger.Dijkstra.Specification.Utxo.html#1582" class="Field">utxo</a>       <a id="1593" class="Symbol">:</a> <a id="1595" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="1604" href="Ledger.Dijkstra.Specification.Utxo.html#1604" class="Field">fees</a>       <a id="1615" class="Symbol">:</a> <a id="1617" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
    <a id="UTxOState.donations"></a><a id="1626" href="Ledger.Dijkstra.Specification.Utxo.html#1626" class="Field">donations</a>  <a id="1637" class="Symbol">:</a> <a id="1639" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>


<a id="1651" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="1658" href="Ledger.Dijkstra.Specification.Utxo.html#1658" class="Record">HasUTxOState</a> <a id="1671" class="Symbol">{</a><a id="1672" href="Ledger.Dijkstra.Specification.Utxo.html#1672" class="Bound">a</a><a id="1673" class="Symbol">}</a> <a id="1675" class="Symbol">(</a><a id="1676" href="Ledger.Dijkstra.Specification.Utxo.html#1676" class="Bound">A</a> <a id="1678" class="Symbol">:</a> <a id="1680" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1685" href="Ledger.Dijkstra.Specification.Utxo.html#1672" class="Bound">a</a><a id="1686" class="Symbol">)</a> <a id="1688" class="Symbol">:</a> <a id="1690" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1695" href="Ledger.Dijkstra.Specification.Utxo.html#1672" class="Bound">a</a> <a id="1697" class="Keyword">where</a>
  <a id="1705" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="1711" href="Ledger.Dijkstra.Specification.Utxo.html#1711" class="Field">UTxOStateOf</a> <a id="1723" class="Symbol">:</a> <a id="1725" href="Ledger.Dijkstra.Specification.Utxo.html#1676" class="Bound">A</a> <a id="1727" class="Symbol">→</a> <a id="1729" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a>
<a id="1739" class="Keyword">open</a> <a id="1744" href="Ledger.Dijkstra.Specification.Utxo.html#1658" class="Module">HasUTxOState</a> <a id="1757" class="Symbol">⦃...⦄</a> <a id="1763" class="Keyword">public</a>

<a id="1771" class="Keyword">record</a> <a id="HasIsTopLevelValidFlag"></a><a id="1778" href="Ledger.Dijkstra.Specification.Utxo.html#1778" class="Record">HasIsTopLevelValidFlag</a> <a id="1801" class="Symbol">{</a><a id="1802" href="Ledger.Dijkstra.Specification.Utxo.html#1802" class="Bound">a</a><a id="1803" class="Symbol">}</a> <a id="1805" class="Symbol">(</a><a id="1806" href="Ledger.Dijkstra.Specification.Utxo.html#1806" class="Bound">A</a> <a id="1808" class="Symbol">:</a> <a id="1810" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1815" href="Ledger.Dijkstra.Specification.Utxo.html#1802" class="Bound">a</a><a id="1816" class="Symbol">)</a> <a id="1818" class="Symbol">:</a> <a id="1820" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1825" href="Ledger.Dijkstra.Specification.Utxo.html#1802" class="Bound">a</a> <a id="1827" class="Keyword">where</a>
  <a id="1835" class="Keyword">field</a> <a id="HasIsTopLevelValidFlag.IsTopLevelValidFlagOf"></a><a id="1841" href="Ledger.Dijkstra.Specification.Utxo.html#1841" class="Field">IsTopLevelValidFlagOf</a> <a id="1863" class="Symbol">:</a> <a id="1865" href="Ledger.Dijkstra.Specification.Utxo.html#1806" class="Bound">A</a> <a id="1867" class="Symbol">→</a> <a id="1869" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="1874" class="Keyword">open</a> <a id="1879" href="Ledger.Dijkstra.Specification.Utxo.html#1778" class="Module">HasIsTopLevelValidFlag</a> <a id="1902" class="Symbol">⦃...⦄</a> <a id="1908" class="Keyword">public</a>

<a id="1916" class="Keyword">record</a> <a id="HasDepositsChange"></a><a id="1923" href="Ledger.Dijkstra.Specification.Utxo.html#1923" class="Record">HasDepositsChange</a> <a id="1941" class="Symbol">{</a><a id="1942" href="Ledger.Dijkstra.Specification.Utxo.html#1942" class="Bound">a</a><a id="1943" class="Symbol">}</a> <a id="1945" class="Symbol">(</a><a id="1946" href="Ledger.Dijkstra.Specification.Utxo.html#1946" class="Bound">A</a> <a id="1948" class="Symbol">:</a> <a id="1950" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1955" href="Ledger.Dijkstra.Specification.Utxo.html#1942" class="Bound">a</a><a id="1956" class="Symbol">)</a> <a id="1958" class="Symbol">:</a> <a id="1960" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1965" href="Ledger.Dijkstra.Specification.Utxo.html#1942" class="Bound">a</a> <a id="1967" class="Keyword">where</a>
  <a id="1975" class="Keyword">field</a> <a id="HasDepositsChange.DepositsChangeOf"></a><a id="1981" href="Ledger.Dijkstra.Specification.Utxo.html#1981" class="Field">DepositsChangeOf</a> <a id="1998" class="Symbol">:</a> <a id="2000" href="Ledger.Dijkstra.Specification.Utxo.html#1946" class="Bound">A</a> <a id="2002" class="Symbol">→</a> <a id="2004" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
<a id="2006" class="Keyword">open</a> <a id="2011" href="Ledger.Dijkstra.Specification.Utxo.html#1923" class="Module">HasDepositsChange</a> <a id="2029" class="Symbol">⦃...⦄</a> <a id="2035" class="Keyword">public</a>

<a id="2043" class="Keyword">record</a> <a id="HasScriptPool"></a><a id="2050" href="Ledger.Dijkstra.Specification.Utxo.html#2050" class="Record">HasScriptPool</a> <a id="2064" class="Symbol">{</a><a id="2065" href="Ledger.Dijkstra.Specification.Utxo.html#2065" class="Bound">a</a><a id="2066" class="Symbol">}</a> <a id="2068" class="Symbol">(</a><a id="2069" href="Ledger.Dijkstra.Specification.Utxo.html#2069" class="Bound">A</a> <a id="2071" class="Symbol">:</a> <a id="2073" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2078" href="Ledger.Dijkstra.Specification.Utxo.html#2065" class="Bound">a</a><a id="2079" class="Symbol">)</a> <a id="2081" class="Symbol">:</a> <a id="2083" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2088" href="Ledger.Dijkstra.Specification.Utxo.html#2065" class="Bound">a</a> <a id="2090" class="Keyword">where</a>
  <a id="2098" class="Keyword">field</a> <a id="HasScriptPool.ScriptPoolOf"></a><a id="2104" href="Ledger.Dijkstra.Specification.Utxo.html#2104" class="Field">ScriptPoolOf</a> <a id="2117" class="Symbol">:</a> <a id="2119" href="Ledger.Dijkstra.Specification.Utxo.html#2069" class="Bound">A</a> <a id="2121" class="Symbol">→</a> <a id="2123" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2125" href="Ledger.Dijkstra.Specification.Script.Base.html#2510" class="Function">Script</a>
<a id="2132" class="Keyword">open</a> <a id="2137" href="Ledger.Dijkstra.Specification.Utxo.html#2050" class="Module">HasScriptPool</a> <a id="2151" class="Symbol">⦃...⦄</a> <a id="2157" class="Keyword">public</a>

<a id="2165" class="Keyword">record</a> <a id="HasDataPool"></a><a id="2172" href="Ledger.Dijkstra.Specification.Utxo.html#2172" class="Record">HasDataPool</a> <a id="2184" class="Symbol">{</a><a id="2185" href="Ledger.Dijkstra.Specification.Utxo.html#2185" class="Bound">a</a><a id="2186" class="Symbol">}</a> <a id="2188" class="Symbol">(</a><a id="2189" href="Ledger.Dijkstra.Specification.Utxo.html#2189" class="Bound">A</a> <a id="2191" class="Symbol">:</a> <a id="2193" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2198" href="Ledger.Dijkstra.Specification.Utxo.html#2185" class="Bound">a</a><a id="2199" class="Symbol">)</a> <a id="2201" class="Symbol">:</a> <a id="2203" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2208" href="Ledger.Dijkstra.Specification.Utxo.html#2185" class="Bound">a</a> <a id="2210" class="Keyword">where</a>
  <a id="2218" class="Keyword">field</a> <a id="HasDataPool.DataPoolOf"></a><a id="2224" href="Ledger.Dijkstra.Specification.Utxo.html#2224" class="Field">DataPoolOf</a> <a id="2235" class="Symbol">:</a> <a id="2237" href="Ledger.Dijkstra.Specification.Utxo.html#2189" class="Bound">A</a> <a id="2239" class="Symbol">→</a> <a id="2241" href="Ledger.Dijkstra.Specification.Script.Base.html#1788" class="Function">DataHash</a> <a id="2250" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2252" href="Ledger.Dijkstra.Specification.Script.Base.html#1835" class="Function">Datum</a>
<a id="2258" class="Keyword">open</a> <a id="2263" href="Ledger.Dijkstra.Specification.Utxo.html#2172" class="Module">HasDataPool</a> <a id="2275" class="Symbol">⦃...⦄</a> <a id="2281" class="Keyword">public</a>

<a id="2289" class="Keyword">record</a> <a id="HasSlot"></a><a id="2296" href="Ledger.Dijkstra.Specification.Utxo.html#2296" class="Record">HasSlot</a> <a id="2304" class="Symbol">{</a><a id="2305" href="Ledger.Dijkstra.Specification.Utxo.html#2305" class="Bound">a</a><a id="2306" class="Symbol">}</a> <a id="2308" class="Symbol">(</a><a id="2309" href="Ledger.Dijkstra.Specification.Utxo.html#2309" class="Bound">A</a> <a id="2311" class="Symbol">:</a> <a id="2313" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2318" href="Ledger.Dijkstra.Specification.Utxo.html#2305" class="Bound">a</a><a id="2319" class="Symbol">)</a> <a id="2321" class="Symbol">:</a> <a id="2323" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2328" href="Ledger.Dijkstra.Specification.Utxo.html#2305" class="Bound">a</a> <a id="2330" class="Keyword">where</a>
  <a id="2338" class="Keyword">field</a> <a id="HasSlot.SlotOf"></a><a id="2344" href="Ledger.Dijkstra.Specification.Utxo.html#2344" class="Field">SlotOf</a> <a id="2351" class="Symbol">:</a> <a id="2353" href="Ledger.Dijkstra.Specification.Utxo.html#2309" class="Bound">A</a> <a id="2355" class="Symbol">→</a> <a id="2357" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
<a id="2362" class="Keyword">open</a> <a id="2367" href="Ledger.Dijkstra.Specification.Utxo.html#2296" class="Module">HasSlot</a> <a id="2375" class="Symbol">⦃...⦄</a> <a id="2381" class="Keyword">public</a>

<a id="2389" class="Keyword">instance</a>
  <a id="HasSlot-UTxOEnv"></a><a id="2400" href="Ledger.Dijkstra.Specification.Utxo.html#2400" class="Function">HasSlot-UTxOEnv</a> <a id="2416" class="Symbol">:</a> <a id="2418" href="Ledger.Dijkstra.Specification.Utxo.html#2296" class="Record">HasSlot</a> <a id="2426" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>
  <a id="2436" href="Ledger.Dijkstra.Specification.Utxo.html#2400" class="Function">HasSlot-UTxOEnv</a> <a id="2452" class="Symbol">.</a><a id="2453" href="Ledger.Dijkstra.Specification.Utxo.html#2344" class="Field">SlotOf</a> <a id="2460" class="Symbol">=</a> <a id="2462" href="Ledger.Dijkstra.Specification.Utxo.html#1037" class="Field">UTxOEnv.slot</a>

  <a id="HasPParams-UTxOEnv"></a><a id="2478" href="Ledger.Dijkstra.Specification.Utxo.html#2478" class="Function">HasPParams-UTxOEnv</a> <a id="2497" class="Symbol">:</a> <a id="2499" href="Ledger.Dijkstra.Specification.PParams.html#4403" class="Record">HasPParams</a> <a id="2510" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>
  <a id="2520" href="Ledger.Dijkstra.Specification.Utxo.html#2478" class="Function">HasPParams-UTxOEnv</a> <a id="2539" class="Symbol">.</a><a id="2540" href="Ledger.Dijkstra.Specification.PParams.html#4454" class="Field">PParamsOf</a> <a id="2550" class="Symbol">=</a> <a id="2552" href="Ledger.Dijkstra.Specification.Utxo.html#1066" class="Field">UTxOEnv.pparams</a>

  <a id="HasTreasury-UTxOEnv"></a><a id="2571" href="Ledger.Dijkstra.Specification.Utxo.html#2571" class="Function">HasTreasury-UTxOEnv</a> <a id="2591" class="Symbol">:</a> <a id="2593" href="Ledger.Prelude.Base.html#837" class="Record">HasTreasury</a> <a id="2605" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>
  <a id="2615" href="Ledger.Dijkstra.Specification.Utxo.html#2571" class="Function">HasTreasury-UTxOEnv</a> <a id="2635" class="Symbol">.</a><a id="2636" href="Ledger.Prelude.Base.html#889" class="Field">TreasuryOf</a> <a id="2647" class="Symbol">=</a> <a id="2649" href="Ledger.Dijkstra.Specification.Utxo.html#1098" class="Field">UTxOEnv.treasury</a>

  <a id="HasUTxO-UTxOEnv"></a><a id="2669" href="Ledger.Dijkstra.Specification.Utxo.html#2669" class="Function">HasUTxO-UTxOEnv</a> <a id="2685" class="Symbol">:</a> <a id="2687" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Record">HasUTxO</a> <a id="2695" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>
  <a id="2705" href="Ledger.Dijkstra.Specification.Utxo.html#2669" class="Function">HasUTxO-UTxOEnv</a> <a id="2721" class="Symbol">.</a><a id="2722" href="Ledger.Dijkstra.Specification.Transaction.html#3454" class="Field">UTxOOf</a> <a id="2729" class="Symbol">=</a> <a id="2731" href="Ledger.Dijkstra.Specification.Utxo.html#1131" class="Field">UTxOEnv.utxo₀</a>

  <a id="HasDepositsChange-UTxOEnv"></a><a id="2748" href="Ledger.Dijkstra.Specification.Utxo.html#2748" class="Function">HasDepositsChange-UTxOEnv</a> <a id="2774" class="Symbol">:</a> <a id="2776" href="Ledger.Dijkstra.Specification.Utxo.html#1923" class="Record">HasDepositsChange</a> <a id="2794" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>
  <a id="2804" href="Ledger.Dijkstra.Specification.Utxo.html#2748" class="Function">HasDepositsChange-UTxOEnv</a> <a id="2830" class="Symbol">.</a><a id="2831" href="Ledger.Dijkstra.Specification.Utxo.html#1981" class="Field">DepositsChangeOf</a> <a id="2848" class="Symbol">=</a> <a id="2850" href="Ledger.Dijkstra.Specification.Utxo.html#1160" class="Field">UTxOEnv.depositsChange</a>

  <a id="HasScriptPool-UTxOEnv"></a><a id="2876" href="Ledger.Dijkstra.Specification.Utxo.html#2876" class="Function">HasScriptPool-UTxOEnv</a> <a id="2898" class="Symbol">:</a> <a id="2900" href="Ledger.Dijkstra.Specification.Utxo.html#2050" class="Record">HasScriptPool</a> <a id="2914" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>
  <a id="2924" href="Ledger.Dijkstra.Specification.Utxo.html#2876" class="Function">HasScriptPool-UTxOEnv</a> <a id="2946" class="Symbol">.</a><a id="2947" href="Ledger.Dijkstra.Specification.Utxo.html#2104" class="Field">ScriptPoolOf</a> <a id="2960" class="Symbol">=</a> <a id="2962" href="Ledger.Dijkstra.Specification.Utxo.html#1186" class="Field">UTxOEnv.allScripts</a>

  <a id="HasDataPool-UTxOEnv"></a><a id="2984" href="Ledger.Dijkstra.Specification.Utxo.html#2984" class="Function">HasDataPool-UTxOEnv</a> <a id="3004" class="Symbol">:</a> <a id="3006" href="Ledger.Dijkstra.Specification.Utxo.html#2172" class="Record">HasDataPool</a> <a id="3018" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>
  <a id="3028" href="Ledger.Dijkstra.Specification.Utxo.html#2984" class="Function">HasDataPool-UTxOEnv</a> <a id="3048" class="Symbol">.</a><a id="3049" href="Ledger.Dijkstra.Specification.Utxo.html#2224" class="Field">DataPoolOf</a> <a id="3060" class="Symbol">=</a> <a id="3062" href="Ledger.Dijkstra.Specification.Utxo.html#1219" class="Field">UTxOEnv.allData</a>

  <a id="HasSlot-SubUTxOEnv"></a><a id="3081" href="Ledger.Dijkstra.Specification.Utxo.html#3081" class="Function">HasSlot-SubUTxOEnv</a> <a id="3100" class="Symbol">:</a> <a id="3102" href="Ledger.Dijkstra.Specification.Utxo.html#2296" class="Record">HasSlot</a> <a id="3110" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a>
  <a id="3123" href="Ledger.Dijkstra.Specification.Utxo.html#3081" class="Function">HasSlot-SubUTxOEnv</a> <a id="3142" class="Symbol">.</a><a id="3143" href="Ledger.Dijkstra.Specification.Utxo.html#2344" class="Field">SlotOf</a> <a id="3150" class="Symbol">=</a> <a id="3152" href="Ledger.Dijkstra.Specification.Utxo.html#1300" class="Field">SubUTxOEnv.slot</a>

  <a id="HasPParams-SubUTxOEnv"></a><a id="3171" href="Ledger.Dijkstra.Specification.Utxo.html#3171" class="Function">HasPParams-SubUTxOEnv</a> <a id="3193" class="Symbol">:</a> <a id="3195" href="Ledger.Dijkstra.Specification.PParams.html#4403" class="Record">HasPParams</a> <a id="3206" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a>
  <a id="3219" href="Ledger.Dijkstra.Specification.Utxo.html#3171" class="Function">HasPParams-SubUTxOEnv</a> <a id="3241" class="Symbol">.</a><a id="3242" href="Ledger.Dijkstra.Specification.PParams.html#4454" class="Field">PParamsOf</a> <a id="3252" class="Symbol">=</a> <a id="3254" href="Ledger.Dijkstra.Specification.Utxo.html#1328" class="Field">SubUTxOEnv.pparams</a>

  <a id="HasTreasury-SubUTxOEnv"></a><a id="3276" href="Ledger.Dijkstra.Specification.Utxo.html#3276" class="Function">HasTreasury-SubUTxOEnv</a> <a id="3299" class="Symbol">:</a> <a id="3301" href="Ledger.Prelude.Base.html#837" class="Record">HasTreasury</a> <a id="3313" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a>
  <a id="3326" href="Ledger.Dijkstra.Specification.Utxo.html#3276" class="Function">HasTreasury-SubUTxOEnv</a> <a id="3349" class="Symbol">.</a><a id="3350" href="Ledger.Prelude.Base.html#889" class="Field">TreasuryOf</a> <a id="3361" class="Symbol">=</a> <a id="3363" href="Ledger.Dijkstra.Specification.Utxo.html#1359" class="Field">SubUTxOEnv.treasury</a>

  <a id="HasUTxO-SubUTxOEnv"></a><a id="3386" href="Ledger.Dijkstra.Specification.Utxo.html#3386" class="Function">HasUTxO-SubUTxOEnv</a> <a id="3405" class="Symbol">:</a> <a id="3407" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Record">HasUTxO</a> <a id="3415" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a>
  <a id="3428" href="Ledger.Dijkstra.Specification.Utxo.html#3386" class="Function">HasUTxO-SubUTxOEnv</a> <a id="3447" class="Symbol">.</a><a id="3448" href="Ledger.Dijkstra.Specification.Transaction.html#3454" class="Field">UTxOOf</a> <a id="3455" class="Symbol">=</a> <a id="3457" href="Ledger.Dijkstra.Specification.Utxo.html#1391" class="Field">SubUTxOEnv.utxo₀</a>

  <a id="HasIsTopLevelValidFlag-SubUTxOEnv"></a><a id="3477" href="Ledger.Dijkstra.Specification.Utxo.html#3477" class="Function">HasIsTopLevelValidFlag-SubUTxOEnv</a> <a id="3511" class="Symbol">:</a> <a id="3513" href="Ledger.Dijkstra.Specification.Utxo.html#1778" class="Record">HasIsTopLevelValidFlag</a> <a id="3536" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a>
  <a id="3549" href="Ledger.Dijkstra.Specification.Utxo.html#3477" class="Function">HasIsTopLevelValidFlag-SubUTxOEnv</a> <a id="3583" class="Symbol">.</a><a id="3584" href="Ledger.Dijkstra.Specification.Utxo.html#1841" class="Field">IsTopLevelValidFlagOf</a> <a id="3606" class="Symbol">=</a> <a id="3608" href="Ledger.Dijkstra.Specification.Utxo.html#1419" class="Field">SubUTxOEnv.isTopLevelValid</a>

  <a id="HasScriptPool-SubUTxOEnv"></a><a id="3638" href="Ledger.Dijkstra.Specification.Utxo.html#3638" class="Function">HasScriptPool-SubUTxOEnv</a> <a id="3663" class="Symbol">:</a> <a id="3665" href="Ledger.Dijkstra.Specification.Utxo.html#2050" class="Record">HasScriptPool</a> <a id="3679" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a>
  <a id="3692" href="Ledger.Dijkstra.Specification.Utxo.html#3638" class="Function">HasScriptPool-SubUTxOEnv</a> <a id="3717" class="Symbol">.</a><a id="3718" href="Ledger.Dijkstra.Specification.Utxo.html#2104" class="Field">ScriptPoolOf</a> <a id="3731" class="Symbol">=</a> <a id="3733" href="Ledger.Dijkstra.Specification.Utxo.html#1447" class="Field">SubUTxOEnv.allScripts</a>

  <a id="HasDataPool-SubUTxOEnv"></a><a id="3758" href="Ledger.Dijkstra.Specification.Utxo.html#3758" class="Function">HasDataPool-SubUTxOEnv</a> <a id="3781" class="Symbol">:</a> <a id="3783" href="Ledger.Dijkstra.Specification.Utxo.html#2172" class="Record">HasDataPool</a> <a id="3795" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a>
  <a id="3808" href="Ledger.Dijkstra.Specification.Utxo.html#3758" class="Function">HasDataPool-SubUTxOEnv</a> <a id="3831" class="Symbol">.</a><a id="3832" href="Ledger.Dijkstra.Specification.Utxo.html#2224" class="Field">DataPoolOf</a> <a id="3843" class="Symbol">=</a> <a id="3845" href="Ledger.Dijkstra.Specification.Utxo.html#1479" class="Field">SubUTxOEnv.allData</a>

  <a id="HasUTxO-UTxOState"></a><a id="3867" href="Ledger.Dijkstra.Specification.Utxo.html#3867" class="Function">HasUTxO-UTxOState</a> <a id="3885" class="Symbol">:</a> <a id="3887" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Record">HasUTxO</a> <a id="3895" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a>
  <a id="3907" href="Ledger.Dijkstra.Specification.Utxo.html#3867" class="Function">HasUTxO-UTxOState</a> <a id="3925" class="Symbol">.</a><a id="3926" href="Ledger.Dijkstra.Specification.Transaction.html#3454" class="Field">UTxOOf</a> <a id="3933" class="Symbol">=</a> <a id="3935" href="Ledger.Dijkstra.Specification.Utxo.html#1582" class="Field">UTxOState.utxo</a>

  <a id="HasFee-UTxOState"></a><a id="3953" href="Ledger.Dijkstra.Specification.Utxo.html#3953" class="Function">HasFee-UTxOState</a> <a id="3970" class="Symbol">:</a> <a id="3972" href="Ledger.Prelude.Base.html#621" class="Record">HasFees</a> <a id="3980" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a>
  <a id="3992" href="Ledger.Dijkstra.Specification.Utxo.html#3953" class="Function">HasFee-UTxOState</a> <a id="4009" class="Symbol">.</a><a id="4010" href="Ledger.Prelude.Base.html#669" class="Field">FeesOf</a> <a id="4017" class="Symbol">=</a> <a id="4019" href="Ledger.Dijkstra.Specification.Utxo.html#1604" class="Field">UTxOState.fees</a>

  <a id="HasDonations-UTxOState"></a><a id="4037" href="Ledger.Dijkstra.Specification.Utxo.html#4037" class="Function">HasDonations-UTxOState</a> <a id="4060" class="Symbol">:</a> <a id="4062" href="Ledger.Prelude.Base.html#501" class="Record">HasDonations</a> <a id="4075" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a>
  <a id="4087" href="Ledger.Dijkstra.Specification.Utxo.html#4037" class="Function">HasDonations-UTxOState</a> <a id="4110" class="Symbol">.</a><a id="4111" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="4123" class="Symbol">=</a> <a id="4125" href="Ledger.Dijkstra.Specification.Utxo.html#1626" class="Field">UTxOState.donations</a>

  <a id="4148" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="4160" href="Ledger.Dijkstra.Specification.Utxo.html#4160" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-SubUTxOEnv"></a><a id="4176" href="Ledger.Dijkstra.Specification.Utxo.html#4176" class="Function">HasCast-SubUTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="4195" href="Ledger.Dijkstra.Specification.Utxo.html#4195" class="Function">HasCast-UTxOState</a> <a id="4213" class="Symbol">=</a> <a id="4215" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="4234" class="Symbol">(</a> <a id="4236" class="Symbol">(</a><a id="4237" class="Keyword">quote</a> <a id="4243" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a>    <a id="4254" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4256" href="Ledger.Dijkstra.Specification.Utxo.html#4160" class="Function">HasCast-UTxOEnv</a>  <a id="4273" class="Symbol">)</a> <a id="4275" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
      <a id="4283" class="Symbol">(</a><a id="4284" class="Keyword">quote</a> <a id="4290" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a> <a id="4301" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4303" href="Ledger.Dijkstra.Specification.Utxo.html#4176" class="Function">HasCast-SubUTxOEnv</a>  <a id="4323" class="Symbol">)</a> <a id="4325" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="4331" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="4333" class="Symbol">(</a><a id="4334" class="Keyword">quote</a> <a id="4340" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a>  <a id="4351" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4353" href="Ledger.Dijkstra.Specification.Utxo.html#4195" class="Function">HasCast-UTxOState</a><a id="4370" class="Symbol">)</a> <a id="4372" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="4373" class="Symbol">)</a>


<a id="outs"></a><a id="4377" href="Ledger.Dijkstra.Specification.Utxo.html#4377" class="Function">outs</a> <a id="4382" class="Symbol">:</a> <a id="4384" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Record">Tx</a> <a id="4387" href="Ledger.Dijkstra.Specification.Utxo.html#667" class="Generalizable">ℓ</a>  <a id="4390" class="Symbol">→</a> <a id="4392" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a>
<a id="4397" href="Ledger.Dijkstra.Specification.Utxo.html#4377" class="Function">outs</a> <a id="4402" href="Ledger.Dijkstra.Specification.Utxo.html#4402" class="Bound">tx</a> <a id="4405" class="Symbol">=</a> <a id="4407" href="Axiom.Set.Map.html#6936" class="Function">mapKeys</a> <a id="4415" class="Symbol">(</a><a id="4416" href="Ledger.Dijkstra.Specification.Transaction.html#6811" class="Field">TxIdOf</a> <a id="4423" href="Ledger.Dijkstra.Specification.Utxo.html#4402" class="Bound">tx</a> <a id="4426" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="4428" class="Symbol">)</a> <a id="4430" class="Symbol">(</a><a id="4431" href="Ledger.Dijkstra.Specification.Transaction.html#8457" class="Field">TxOutsOf</a> <a id="4440" href="Ledger.Dijkstra.Specification.Utxo.html#4402" class="Bound">tx</a><a id="4442" class="Symbol">)</a>

<a id="balance"></a><a id="4445" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="4453" class="Symbol">:</a> <a id="4455" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a> <a id="4460" class="Symbol">→</a> <a id="4462" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
<a id="4468" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="4476" href="Ledger.Dijkstra.Specification.Utxo.html#4476" class="Bound">utxo</a> <a id="4481" class="Symbol">=</a> <a id="4483" href="abstract-set-theory.FiniteSetTheory.html#4509" class="Function">∑ˢ[</a> <a id="4487" href="Ledger.Dijkstra.Specification.Utxo.html#4487" class="Bound">v</a> <a id="4489" href="abstract-set-theory.FiniteSetTheory.html#4509" class="Function">←</a> <a id="4491" href="Ledger.Dijkstra.Specification.Transaction.html#14961" class="Function">valuesOfUTxO</a> <a id="4504" href="Ledger.Dijkstra.Specification.Utxo.html#4476" class="Bound">utxo</a> <a id="4509" href="abstract-set-theory.FiniteSetTheory.html#4509" class="Function">]</a> <a id="4511" href="Ledger.Dijkstra.Specification.Utxo.html#4487" class="Bound">v</a>

<a id="cbalance"></a><a id="4514" href="Ledger.Dijkstra.Specification.Utxo.html#4514" class="Function">cbalance</a> <a id="4523" class="Symbol">:</a> <a id="4525" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a> <a id="4530" class="Symbol">→</a> <a id="4532" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
<a id="4537" href="Ledger.Dijkstra.Specification.Utxo.html#4514" class="Function">cbalance</a> <a id="4546" href="Ledger.Dijkstra.Specification.Utxo.html#4546" class="Bound">utxo</a> <a id="4551" class="Symbol">=</a> <a id="4553" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="4558" class="Symbol">(</a><a id="4559" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="4567" href="Ledger.Dijkstra.Specification.Utxo.html#4546" class="Bound">utxo</a><a id="4571" class="Symbol">)</a>

<a id="refScriptsSize"></a><a id="4574" href="Ledger.Dijkstra.Specification.Utxo.html#4574" class="Function">refScriptsSize</a> <a id="4589" class="Symbol">:</a> <a id="4591" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="4602" class="Symbol">→</a> <a id="4604" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a> <a id="4609" class="Symbol">→</a> <a id="4611" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="4613" href="Ledger.Dijkstra.Specification.Utxo.html#4574" class="Function">refScriptsSize</a> <a id="4628" href="Ledger.Dijkstra.Specification.Utxo.html#4628" class="Bound">txTop</a> <a id="4634" href="Ledger.Dijkstra.Specification.Utxo.html#4634" class="Bound">utxo</a> <a id="4639" class="Symbol">=</a>
 <a id="4642" href="Axiom.Set.Sum.html#1759" class="Function">∑ˡ[</a> <a id="4646" href="Ledger.Dijkstra.Specification.Utxo.html#4646" class="Bound">x</a> <a id="4648" href="Axiom.Set.Sum.html#1759" class="Function">←</a> <a id="4650" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="4660" class="Symbol">(</a><a id="4661" href="Ledger.Dijkstra.Specification.Transaction.html#16833" class="Function">allReferenceScripts</a> <a id="4681" href="Ledger.Dijkstra.Specification.Utxo.html#4628" class="Bound">txTop</a> <a id="4687" href="Ledger.Dijkstra.Specification.Utxo.html#4634" class="Bound">utxo</a><a id="4691" class="Symbol">)</a> <a id="4693" href="Axiom.Set.Sum.html#1759" class="Function">]</a> <a id="4695" href="Ledger.Dijkstra.Specification.Abstract.html#1160" class="Field">scriptSize</a> <a id="4706" href="Ledger.Dijkstra.Specification.Utxo.html#4646" class="Bound">x</a>

<a id="minfee"></a><a id="4709" href="Ledger.Dijkstra.Specification.Utxo.html#4709" class="Function">minfee</a> <a id="4716" class="Symbol">:</a> <a id="4718" href="Ledger.Dijkstra.Specification.PParams.html#1960" class="Record">PParams</a> <a id="4726" class="Symbol">→</a> <a id="4728" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="4739" class="Symbol">→</a> <a id="4741" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a> <a id="4746" class="Symbol">→</a> <a id="4748" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
<a id="4753" href="Ledger.Dijkstra.Specification.Utxo.html#4709" class="Function">minfee</a> <a id="4760" href="Ledger.Dijkstra.Specification.Utxo.html#4760" class="Bound">pp</a> <a id="4763" href="Ledger.Dijkstra.Specification.Utxo.html#4763" class="Bound">txTop</a> <a id="4769" href="Ledger.Dijkstra.Specification.Utxo.html#4769" class="Bound">utxo</a> <a id="4774" class="Symbol">=</a> <a id="4776" href="Ledger.Dijkstra.Specification.Utxo.html#4760" class="Bound">pp</a> <a id="4779" class="Symbol">.</a><a id="4780" href="Ledger.Dijkstra.Specification.PParams.html#2385" class="Field">a</a> <a id="4782" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="4784" class="Symbol">(</a><a id="4785" href="Ledger.Dijkstra.Specification.Transaction.html#6917" class="Field">SizeOf</a> <a id="4792" href="Ledger.Dijkstra.Specification.Utxo.html#4763" class="Bound">txTop</a><a id="4797" class="Symbol">)</a> <a id="4799" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4801" href="Ledger.Dijkstra.Specification.Utxo.html#4760" class="Bound">pp</a> <a id="4804" class="Symbol">.</a><a id="4805" href="Ledger.Dijkstra.Specification.PParams.html#2423" class="Field">b</a>
                       <a id="4830" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4832" href="Ledger.Dijkstra.Specification.Abstract.html#951" class="Field">txScriptFee</a> <a id="4844" class="Symbol">(</a><a id="4845" href="Ledger.Dijkstra.Specification.Utxo.html#4760" class="Bound">pp</a> <a id="4848" class="Symbol">.</a><a id="4849" href="Ledger.Dijkstra.Specification.PParams.html#2716" class="Field">prices</a><a id="4855" class="Symbol">)</a> <a id="4857" class="Symbol">(</a><a id="4858" href="Ledger.Dijkstra.Specification.Utxo.html#680" class="Function">totExUnits</a> <a id="4869" href="Ledger.Dijkstra.Specification.Utxo.html#4763" class="Bound">txTop</a><a id="4874" class="Symbol">)</a>
                       <a id="4899" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4901" href="Ledger.Dijkstra.Specification.Fees.html#1004" class="Function">scriptsCost</a> <a id="4913" href="Ledger.Dijkstra.Specification.Utxo.html#4760" class="Bound">pp</a> <a id="4916" class="Symbol">(</a><a id="4917" href="Ledger.Dijkstra.Specification.Utxo.html#4574" class="Function">refScriptsSize</a> <a id="4932" href="Ledger.Dijkstra.Specification.Utxo.html#4763" class="Bound">txTop</a> <a id="4938" href="Ledger.Dijkstra.Specification.Utxo.html#4769" class="Bound">utxo</a><a id="4942" class="Symbol">)</a>


<a id="4946" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="4957" href="Ledger.Dijkstra.Specification.Utxo.html#4957" class="Function">HasCoin-UTxO</a> <a id="4970" class="Symbol">:</a> <a id="4972" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="4980" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a>
  <a id="4987" href="Ledger.Dijkstra.Specification.Utxo.html#4957" class="Function">HasCoin-UTxO</a> <a id="5000" class="Symbol">.</a><a id="5001" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="5009" class="Symbol">=</a> <a id="5011" href="Ledger.Dijkstra.Specification.Utxo.html#4514" class="Function">cbalance</a>


<a id="5022" class="Keyword">data</a> <a id="inInterval"></a><a id="5027" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="5038" class="Symbol">(</a><a id="5039" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5044" class="Symbol">:</a> <a id="5046" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="5050" class="Symbol">)</a> <a id="5052" class="Symbol">:</a> <a id="5054" class="Symbol">(</a><a id="5055" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5061" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="5066" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5068" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5074" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="5078" class="Symbol">)</a> <a id="5080" class="Symbol">→</a> <a id="5082" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5087" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="5095" href="Ledger.Dijkstra.Specification.Utxo.html#5095" class="InductiveConstructor">both</a>   <a id="5102" class="Symbol">:</a> <a id="5104" class="Symbol">∀</a> <a id="5106" class="Symbol">{</a><a id="5107" href="Ledger.Dijkstra.Specification.Utxo.html#5107" class="Bound">l</a> <a id="5109" href="Ledger.Dijkstra.Specification.Utxo.html#5109" class="Bound">r</a><a id="5110" class="Symbol">}</a>  <a id="5113" class="Symbol">→</a> <a id="5115" href="Ledger.Dijkstra.Specification.Utxo.html#5107" class="Bound">l</a> <a id="5117" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="5119" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5124" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5126" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5131" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="5133" href="Ledger.Dijkstra.Specification.Utxo.html#5109" class="Bound">r</a>  <a id="5136" class="Symbol">→</a>  <a id="5139" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="5150" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5155" class="Symbol">(</a><a id="5156" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5161" href="Ledger.Dijkstra.Specification.Utxo.html#5107" class="Bound">l</a>   <a id="5165" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5167" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5172" href="Ledger.Dijkstra.Specification.Utxo.html#5109" class="Bound">r</a><a id="5173" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="5177" href="Ledger.Dijkstra.Specification.Utxo.html#5177" class="InductiveConstructor">lower</a>  <a id="5184" class="Symbol">:</a> <a id="5186" class="Symbol">∀</a> <a id="5188" class="Symbol">{</a><a id="5189" href="Ledger.Dijkstra.Specification.Utxo.html#5189" class="Bound">l</a><a id="5190" class="Symbol">}</a>    <a id="5195" class="Symbol">→</a> <a id="5197" href="Ledger.Dijkstra.Specification.Utxo.html#5189" class="Bound">l</a> <a id="5199" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="5201" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a>             <a id="5218" class="Symbol">→</a>  <a id="5221" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="5232" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5237" class="Symbol">(</a><a id="5238" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5243" href="Ledger.Dijkstra.Specification.Utxo.html#5189" class="Bound">l</a>   <a id="5247" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5249" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="5256" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="5260" href="Ledger.Dijkstra.Specification.Utxo.html#5260" class="InductiveConstructor">upper</a>  <a id="5267" class="Symbol">:</a> <a id="5269" class="Symbol">∀</a> <a id="5271" class="Symbol">{</a><a id="5272" href="Ledger.Dijkstra.Specification.Utxo.html#5272" class="Bound">r</a><a id="5273" class="Symbol">}</a>    <a id="5278" class="Symbol">→</a> <a id="5280" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5285" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="5287" href="Ledger.Dijkstra.Specification.Utxo.html#5272" class="Bound">r</a>             <a id="5301" class="Symbol">→</a>  <a id="5304" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="5315" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5320" class="Symbol">(</a><a id="5321" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="5330" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5332" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5337" href="Ledger.Dijkstra.Specification.Utxo.html#5272" class="Bound">r</a><a id="5338" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="5342" href="Ledger.Dijkstra.Specification.Utxo.html#5342" class="InductiveConstructor">none</a>   <a id="5349" class="Symbol">:</a>                                    <a id="5386" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="5397" href="Ledger.Dijkstra.Specification.Utxo.html#5039" class="Bound">slot</a> <a id="5402" class="Symbol">(</a><a id="5403" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="5412" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5414" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="5421" class="Symbol">)</a>


<a id="5425" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="5495" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="5506" href="Ledger.Dijkstra.Specification.Utxo.html#5506" class="Function">Dec-inInterval</a> <a id="5521" class="Symbol">:</a> <a id="5523" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="5534" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a>
  <a id="5539" href="Ledger.Dijkstra.Specification.Utxo.html#5506" class="Function">Dec-inInterval</a> <a id="5554" class="Symbol">{</a><a id="5555" href="Ledger.Dijkstra.Specification.Utxo.html#5555" class="Bound">slot</a><a id="5559" class="Symbol">}</a> <a id="5561" class="Symbol">{</a><a id="5562" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5567" href="Ledger.Dijkstra.Specification.Utxo.html#5567" class="Bound">x</a>  <a id="5570" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5572" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5577" href="Ledger.Dijkstra.Specification.Utxo.html#5577" class="Bound">y</a> <a id="5579" class="Symbol">}</a> <a id="5581" class="Symbol">.</a><a id="5582" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="5586" class="Keyword">with</a> <a id="5591" href="Ledger.Dijkstra.Specification.Utxo.html#5567" class="Bound">x</a> <a id="5593" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="5596" href="Ledger.Dijkstra.Specification.Utxo.html#5555" class="Bound">slot</a> <a id="5601" class="Symbol">|</a> <a id="5603" href="Ledger.Dijkstra.Specification.Utxo.html#5555" class="Bound">slot</a> <a id="5608" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="5611" href="Ledger.Dijkstra.Specification.Utxo.html#5577" class="Bound">y</a>
  <a id="5615" class="Symbol">...</a> <a id="5619" class="Symbol">|</a> <a id="5621" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="5624" href="Ledger.Dijkstra.Specification.Utxo.html#5624" class="Bound">¬p₁</a> <a id="5628" class="Symbol">|</a> <a id="5630" class="Symbol">_</a>      <a id="5637" class="Symbol">=</a> <a id="5639" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="5642" class="Symbol">λ</a> <a id="5644" class="Keyword">where</a> <a id="5650" class="Symbol">(</a><a id="5651" href="Ledger.Dijkstra.Specification.Utxo.html#5095" class="InductiveConstructor">both</a> <a id="5656" class="Symbol">(</a><a id="5657" href="Ledger.Dijkstra.Specification.Utxo.html#5657" class="Bound">h₁</a> <a id="5660" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5662" href="Ledger.Dijkstra.Specification.Utxo.html#5662" class="Bound">h₂</a><a id="5664" class="Symbol">))</a> <a id="5667" class="Symbol">→</a> <a id="5669" href="Ledger.Dijkstra.Specification.Utxo.html#5624" class="Bound">¬p₁</a> <a id="5673" href="Ledger.Dijkstra.Specification.Utxo.html#5657" class="Bound">h₁</a>
  <a id="5678" class="Symbol">...</a> <a id="5682" class="Symbol">|</a> <a id="5684" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5688" href="Ledger.Dijkstra.Specification.Utxo.html#5688" class="Bound">p₁</a> <a id="5691" class="Symbol">|</a> <a id="5693" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="5696" href="Ledger.Dijkstra.Specification.Utxo.html#5696" class="Bound">¬p₂</a> <a id="5700" class="Symbol">=</a> <a id="5702" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="5705" class="Symbol">λ</a> <a id="5707" class="Keyword">where</a> <a id="5713" class="Symbol">(</a><a id="5714" href="Ledger.Dijkstra.Specification.Utxo.html#5095" class="InductiveConstructor">both</a> <a id="5719" class="Symbol">(</a><a id="5720" href="Ledger.Dijkstra.Specification.Utxo.html#5720" class="Bound">h₁</a> <a id="5723" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5725" href="Ledger.Dijkstra.Specification.Utxo.html#5725" class="Bound">h₂</a><a id="5727" class="Symbol">))</a> <a id="5730" class="Symbol">→</a> <a id="5732" href="Ledger.Dijkstra.Specification.Utxo.html#5696" class="Bound">¬p₂</a> <a id="5736" href="Ledger.Dijkstra.Specification.Utxo.html#5725" class="Bound">h₂</a>
  <a id="5741" class="Symbol">...</a> <a id="5745" class="Symbol">|</a> <a id="5747" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5751" href="Ledger.Dijkstra.Specification.Utxo.html#5751" class="Bound">p₁</a> <a id="5754" class="Symbol">|</a> <a id="5756" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5760" href="Ledger.Dijkstra.Specification.Utxo.html#5760" class="Bound">p₂</a> <a id="5763" class="Symbol">=</a> <a id="5765" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5769" class="Symbol">(</a><a id="5770" href="Ledger.Dijkstra.Specification.Utxo.html#5095" class="InductiveConstructor">both</a> <a id="5775" class="Symbol">(</a><a id="5776" href="Ledger.Dijkstra.Specification.Utxo.html#5751" class="Bound">p₁</a> <a id="5779" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5781" href="Ledger.Dijkstra.Specification.Utxo.html#5760" class="Bound">p₂</a><a id="5783" class="Symbol">))</a>
  <a id="5788" href="Ledger.Dijkstra.Specification.Utxo.html#5506" class="Function">Dec-inInterval</a> <a id="5803" class="Symbol">{</a><a id="5804" href="Ledger.Dijkstra.Specification.Utxo.html#5804" class="Bound">slot</a><a id="5808" class="Symbol">}</a> <a id="5810" class="Symbol">{</a><a id="5811" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5816" href="Ledger.Dijkstra.Specification.Utxo.html#5816" class="Bound">x</a>  <a id="5819" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5821" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="5828" class="Symbol">}</a> <a id="5830" class="Symbol">.</a><a id="5831" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="5835" class="Keyword">with</a> <a id="5840" href="Ledger.Dijkstra.Specification.Utxo.html#5816" class="Bound">x</a> <a id="5842" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="5845" href="Ledger.Dijkstra.Specification.Utxo.html#5804" class="Bound">slot</a>
  <a id="5852" class="Symbol">...</a> <a id="5856" class="Symbol">|</a> <a id="5858" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="5861" href="Ledger.Dijkstra.Specification.Utxo.html#5861" class="Bound">¬p</a> <a id="5864" class="Symbol">=</a> <a id="5866" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="5870" class="Symbol">(λ</a> <a id="5873" class="Keyword">where</a> <a id="5879" class="Symbol">(</a><a id="5880" href="Ledger.Dijkstra.Specification.Utxo.html#5177" class="InductiveConstructor">lower</a> <a id="5886" href="Ledger.Dijkstra.Specification.Utxo.html#5886" class="Bound">h</a><a id="5887" class="Symbol">)</a> <a id="5889" class="Symbol">→</a> <a id="5891" href="Ledger.Dijkstra.Specification.Utxo.html#5861" class="Bound">¬p</a> <a id="5894" href="Ledger.Dijkstra.Specification.Utxo.html#5886" class="Bound">h</a><a id="5895" class="Symbol">)</a>
  <a id="5899" class="Symbol">...</a> <a id="5903" class="Symbol">|</a> <a id="5905" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5909" href="Ledger.Dijkstra.Specification.Utxo.html#5909" class="Bound">p</a> <a id="5911" class="Symbol">=</a> <a id="5913" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5917" class="Symbol">(</a><a id="5918" href="Ledger.Dijkstra.Specification.Utxo.html#5177" class="InductiveConstructor">lower</a> <a id="5924" href="Ledger.Dijkstra.Specification.Utxo.html#5909" class="Bound">p</a><a id="5925" class="Symbol">)</a>
  <a id="5929" href="Ledger.Dijkstra.Specification.Utxo.html#5506" class="Function">Dec-inInterval</a> <a id="5944" class="Symbol">{</a><a id="5945" href="Ledger.Dijkstra.Specification.Utxo.html#5945" class="Bound">slot</a><a id="5949" class="Symbol">}</a> <a id="5951" class="Symbol">{</a><a id="5952" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5960" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5962" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5967" href="Ledger.Dijkstra.Specification.Utxo.html#5967" class="Bound">x</a> <a id="5969" class="Symbol">}</a> <a id="5971" class="Symbol">.</a><a id="5972" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="5976" class="Keyword">with</a> <a id="5981" href="Ledger.Dijkstra.Specification.Utxo.html#5945" class="Bound">slot</a> <a id="5986" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="5989" href="Ledger.Dijkstra.Specification.Utxo.html#5967" class="Bound">x</a>
  <a id="5993" class="Symbol">...</a> <a id="5997" class="Symbol">|</a> <a id="5999" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6002" href="Ledger.Dijkstra.Specification.Utxo.html#6002" class="Bound">¬p</a> <a id="6005" class="Symbol">=</a> <a id="6007" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="6011" class="Symbol">(λ</a> <a id="6014" class="Keyword">where</a> <a id="6020" class="Symbol">(</a><a id="6021" href="Ledger.Dijkstra.Specification.Utxo.html#5260" class="InductiveConstructor">upper</a> <a id="6027" href="Ledger.Dijkstra.Specification.Utxo.html#6027" class="Bound">h</a><a id="6028" class="Symbol">)</a> <a id="6030" class="Symbol">→</a> <a id="6032" href="Ledger.Dijkstra.Specification.Utxo.html#6002" class="Bound">¬p</a> <a id="6035" href="Ledger.Dijkstra.Specification.Utxo.html#6027" class="Bound">h</a><a id="6036" class="Symbol">)</a>
  <a id="6040" class="Symbol">...</a> <a id="6044" class="Symbol">|</a> <a id="6046" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6050" href="Ledger.Dijkstra.Specification.Utxo.html#6050" class="Bound">p</a> <a id="6052" class="Symbol">=</a> <a id="6054" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6058" class="Symbol">(</a><a id="6059" href="Ledger.Dijkstra.Specification.Utxo.html#5260" class="InductiveConstructor">upper</a> <a id="6065" href="Ledger.Dijkstra.Specification.Utxo.html#6050" class="Bound">p</a><a id="6066" class="Symbol">)</a>
  <a id="6070" href="Ledger.Dijkstra.Specification.Utxo.html#5506" class="Function">Dec-inInterval</a> <a id="6085" class="Symbol">{</a><a id="6086" href="Ledger.Dijkstra.Specification.Utxo.html#6086" class="Bound">slot</a><a id="6090" class="Symbol">}</a> <a id="6092" class="Symbol">{</a><a id="6093" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="6101" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6103" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="6110" class="Symbol">}</a> <a id="6112" class="Symbol">.</a><a id="6113" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="6117" class="Symbol">=</a> <a id="6119" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6123" href="Ledger.Dijkstra.Specification.Utxo.html#5342" class="InductiveConstructor">none</a>

<a id="coinPolicies"></a><a id="6129" href="Ledger.Dijkstra.Specification.Utxo.html#6129" class="Function">coinPolicies</a> <a id="6142" class="Symbol">:</a> <a id="6144" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="6146" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
<a id="6157" href="Ledger.Dijkstra.Specification.Utxo.html#6129" class="Function">coinPolicies</a> <a id="6170" class="Symbol">=</a> <a id="6172" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="6181" class="Symbol">(</a><a id="6182" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="6189" class="Number">1</a><a id="6190" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="6193" href="Ledger.Dijkstra.Specification.Utxo.html#6193" class="Function">isAdaOnly</a> <a id="6203" class="Symbol">:</a> <a id="6205" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a> <a id="6211" class="Symbol">→</a> <a id="6213" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6218" href="Ledger.Dijkstra.Specification.Utxo.html#6193" class="Function">isAdaOnly</a> <a id="6228" href="Ledger.Dijkstra.Specification.Utxo.html#6228" class="Bound">v</a> <a id="6230" class="Symbol">=</a> <a id="6232" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="6241" href="Ledger.Dijkstra.Specification.Utxo.html#6228" class="Bound">v</a> <a id="6243" href="Axiom.Set.html#2772" class="Function Operator">≡ᵉ</a> <a id="6246" href="Ledger.Dijkstra.Specification.Utxo.html#6129" class="Function">coinPolicies</a>


<a id="collateralCheck"></a><a id="6261" href="Ledger.Dijkstra.Specification.Utxo.html#6261" class="Function">collateralCheck</a> <a id="6277" class="Symbol">:</a> <a id="6279" href="Ledger.Dijkstra.Specification.PParams.html#1960" class="Record">PParams</a> <a id="6287" class="Symbol">→</a> <a id="6289" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="6300" class="Symbol">→</a> <a id="6302" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a> <a id="6307" class="Symbol">→</a> <a id="6309" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6314" href="Ledger.Dijkstra.Specification.Utxo.html#6261" class="Function">collateralCheck</a> <a id="6330" href="Ledger.Dijkstra.Specification.Utxo.html#6330" class="Bound">pp</a> <a id="6333" href="Ledger.Dijkstra.Specification.Utxo.html#6333" class="Bound">txTop</a> <a id="6339" href="Ledger.Dijkstra.Specification.Utxo.html#6339" class="Bound">utxo</a> <a id="6344" class="Symbol">=</a>
  <a id="6348" href="Axiom.Set.html#9909" class="Function">All</a> <a id="6352" class="Symbol">(λ</a> <a id="6355" class="Symbol">(</a><a id="6356" href="Ledger.Dijkstra.Specification.Utxo.html#6356" class="Bound">addr</a> <a id="6361" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6363" class="Symbol">_)</a> <a id="6366" class="Symbol">→</a> <a id="6368" href="Ledger.Core.Specification.Address.html#3297" class="Function">isVKeyAddr</a> <a id="6379" href="Ledger.Dijkstra.Specification.Utxo.html#6356" class="Bound">addr</a><a id="6383" class="Symbol">)</a> <a id="6385" class="Symbol">(</a><a id="6386" href="Class.IsSet.html#959" class="Function">range</a> <a id="6392" class="Symbol">(</a><a id="6393" href="Ledger.Dijkstra.Specification.Utxo.html#6339" class="Bound">utxo</a> <a id="6398" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="6400" href="Ledger.Dijkstra.Specification.Transaction.html#6075" class="Field">CollateralInputsOf</a> <a id="6419" href="Ledger.Dijkstra.Specification.Utxo.html#6333" class="Bound">txTop</a><a id="6424" class="Symbol">))</a>
  <a id="6429" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6431" href="Ledger.Dijkstra.Specification.Utxo.html#6193" class="Function">isAdaOnly</a> <a id="6441" class="Symbol">(</a><a id="6442" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="6450" class="Symbol">(</a><a id="6451" href="Ledger.Dijkstra.Specification.Utxo.html#6339" class="Bound">utxo</a> <a id="6456" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="6458" href="Ledger.Dijkstra.Specification.Transaction.html#6075" class="Field">CollateralInputsOf</a> <a id="6477" href="Ledger.Dijkstra.Specification.Utxo.html#6333" class="Bound">txTop</a><a id="6482" class="Symbol">))</a>
  <a id="6487" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6489" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="6494" class="Symbol">(</a><a id="6495" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="6503" class="Symbol">(</a><a id="6504" href="Ledger.Dijkstra.Specification.Utxo.html#6339" class="Bound">utxo</a> <a id="6509" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="6511" href="Ledger.Dijkstra.Specification.Transaction.html#6075" class="Field">CollateralInputsOf</a> <a id="6530" href="Ledger.Dijkstra.Specification.Utxo.html#6333" class="Bound">txTop</a><a id="6535" class="Symbol">))</a> <a id="6538" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="6540" class="Number">100</a> <a id="6544" href="Class.HasOrder.Core.html#827" class="Function Operator">≥</a> <a id="6546" class="Symbol">(</a><a id="6547" href="Ledger.Dijkstra.Specification.Transaction.html#6240" class="Field">TxFeesOf</a> <a id="6556" href="Ledger.Dijkstra.Specification.Utxo.html#6333" class="Bound">txTop</a><a id="6561" class="Symbol">)</a> <a id="6563" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="6565" href="Ledger.Dijkstra.Specification.Utxo.html#6330" class="Bound">pp</a> <a id="6568" class="Symbol">.</a><a id="6569" href="Ledger.Dijkstra.Specification.PParams.html#3158" class="Field">collateralPercentage</a>
  <a id="6592" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6594" class="Symbol">(</a><a id="6595" href="Ledger.Dijkstra.Specification.Transaction.html#6075" class="Field">CollateralInputsOf</a> <a id="6614" href="Ledger.Dijkstra.Specification.Utxo.html#6333" class="Bound">txTop</a><a id="6619" class="Symbol">)</a> <a id="6621" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="6623" href="Class.HasEmptySet.html#287" class="Field">∅</a>


<a id="6627" class="Keyword">module</a> <a id="6634" href="Ledger.Dijkstra.Specification.Utxo.html#6634" class="Module">_</a> <a id="6636" class="Symbol">(</a><a id="6637" href="Ledger.Dijkstra.Specification.Utxo.html#6637" class="Bound">txTop</a> <a id="6643" class="Symbol">:</a> <a id="6645" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a><a id="6655" class="Symbol">)</a> <a id="6657" class="Symbol">(</a><a id="6658" href="Ledger.Dijkstra.Specification.Utxo.html#6658" class="Bound">depositsChange</a> <a id="6673" class="Symbol">:</a> <a id="6675" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a><a id="6676" class="Symbol">)</a> <a id="6678" class="Keyword">where</a>

  <a id="6687" href="Ledger.Dijkstra.Specification.Utxo.html#6687" class="Function">depositRefundsBatch</a> <a id="6707" class="Symbol">:</a> <a id="6709" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="6716" href="Ledger.Dijkstra.Specification.Utxo.html#6687" class="Function">depositRefundsBatch</a> <a id="6736" class="Symbol">=</a> <a id="6738" href="Prelude.html#3409" class="Function">negPart</a> <a id="6746" href="Ledger.Dijkstra.Specification.Utxo.html#6658" class="Bound">depositsChange</a>

  <a id="6764" href="Ledger.Dijkstra.Specification.Utxo.html#6764" class="Function">newDepositsBatch</a> <a id="6781" class="Symbol">:</a> <a id="6783" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="6790" href="Ledger.Dijkstra.Specification.Utxo.html#6764" class="Function">newDepositsBatch</a> <a id="6807" class="Symbol">=</a> <a id="6809" href="Prelude.html#3332" class="Function">posPart</a> <a id="6817" href="Ledger.Dijkstra.Specification.Utxo.html#6658" class="Bound">depositsChange</a>

  <a id="6835" href="Ledger.Dijkstra.Specification.Utxo.html#6835" class="Function">consumed</a> <a id="6844" class="Symbol">:</a> <a id="6846" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a> <a id="6851" class="Symbol">→</a> <a id="6853" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="6861" href="Ledger.Dijkstra.Specification.Utxo.html#6835" class="Function">consumed</a> <a id="6870" href="Ledger.Dijkstra.Specification.Utxo.html#6870" class="Bound">utxo</a> <a id="6875" class="Symbol">=</a>  <a id="6878" href="Ledger.Dijkstra.Specification.Utxo.html#7009" class="Function">consumedTx</a> <a id="6889" href="Ledger.Dijkstra.Specification.Utxo.html#6637" class="Bound">txTop</a> <a id="6895" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="6897" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="6904" href="Ledger.Dijkstra.Specification.Utxo.html#6687" class="Function">depositRefundsBatch</a>
                <a id="6940" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="6942" href="Axiom.Set.Sum.html#1759" class="Function">∑ˡ[</a> <a id="6946" href="Ledger.Dijkstra.Specification.Utxo.html#6946" class="Bound">stx</a> <a id="6950" href="Axiom.Set.Sum.html#1759" class="Function">←</a> <a id="6952" href="Ledger.Dijkstra.Specification.Transaction.html#6390" class="Field">SubTransactionsOf</a> <a id="6970" href="Ledger.Dijkstra.Specification.Utxo.html#6637" class="Bound">txTop</a> <a id="6976" href="Axiom.Set.Sum.html#1759" class="Function">]</a> <a id="6978" class="Symbol">(</a><a id="6979" href="Ledger.Dijkstra.Specification.Utxo.html#7009" class="Function">consumedTx</a> <a id="6990" href="Ledger.Dijkstra.Specification.Utxo.html#6946" class="Bound">stx</a><a id="6993" class="Symbol">)</a>
    <a id="6999" class="Keyword">where</a>
    <a id="7009" href="Ledger.Dijkstra.Specification.Utxo.html#7009" class="Function">consumedTx</a> <a id="7020" class="Symbol">:</a> <a id="7022" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Record">Tx</a> <a id="7025" href="Ledger.Dijkstra.Specification.Utxo.html#667" class="Generalizable">ℓ</a> <a id="7027" class="Symbol">→</a> <a id="7029" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
    <a id="7039" href="Ledger.Dijkstra.Specification.Utxo.html#7009" class="Function">consumedTx</a> <a id="7050" href="Ledger.Dijkstra.Specification.Utxo.html#7050" class="Bound">tx</a> <a id="7053" class="Symbol">=</a>  <a id="7056" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="7064" class="Symbol">(</a><a id="7065" href="Ledger.Dijkstra.Specification.Utxo.html#6870" class="Bound">utxo</a> <a id="7070" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="7072" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="7086" href="Ledger.Dijkstra.Specification.Utxo.html#7050" class="Bound">tx</a><a id="7088" class="Symbol">)</a>
                     <a id="7111" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="7113" href="Ledger.Dijkstra.Specification.Transaction.html#7449" class="Field">MintedValueOf</a> <a id="7127" href="Ledger.Dijkstra.Specification.Utxo.html#7050" class="Bound">tx</a>
                     <a id="7151" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="7153" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="7160" class="Symbol">(</a><a id="7161" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="7169" class="Symbol">(</a><a id="7170" href="Ledger.Core.Specification.Address.html#1975" class="Field">WithdrawalsOf</a> <a id="7184" href="Ledger.Dijkstra.Specification.Utxo.html#7050" class="Bound">tx</a><a id="7186" class="Symbol">))</a>

  <a id="7192" href="Ledger.Dijkstra.Specification.Utxo.html#7192" class="Function">produced</a> <a id="7201" class="Symbol">:</a> <a id="7203" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="7211" href="Ledger.Dijkstra.Specification.Utxo.html#7192" class="Function">produced</a> <a id="7220" class="Symbol">=</a>  <a id="7223" href="Ledger.Dijkstra.Specification.Utxo.html#7349" class="Function">producedTx</a> <a id="7234" href="Ledger.Dijkstra.Specification.Utxo.html#6637" class="Bound">txTop</a> <a id="7240" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="7242" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="7249" href="Ledger.Dijkstra.Specification.Utxo.html#6764" class="Function">newDepositsBatch</a>
              <a id="7280" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="7282" href="Axiom.Set.Sum.html#1759" class="Function">∑ˡ[</a> <a id="7286" href="Ledger.Dijkstra.Specification.Utxo.html#7286" class="Bound">stx</a> <a id="7290" href="Axiom.Set.Sum.html#1759" class="Function">←</a> <a id="7292" href="Ledger.Dijkstra.Specification.Transaction.html#6390" class="Field">SubTransactionsOf</a> <a id="7310" href="Ledger.Dijkstra.Specification.Utxo.html#6637" class="Bound">txTop</a> <a id="7316" href="Axiom.Set.Sum.html#1759" class="Function">]</a> <a id="7318" class="Symbol">(</a><a id="7319" href="Ledger.Dijkstra.Specification.Utxo.html#7349" class="Function">producedTx</a> <a id="7330" href="Ledger.Dijkstra.Specification.Utxo.html#7286" class="Bound">stx</a><a id="7333" class="Symbol">)</a>
    <a id="7339" class="Keyword">where</a>
    <a id="7349" href="Ledger.Dijkstra.Specification.Utxo.html#7349" class="Function">producedTx</a> <a id="7360" class="Symbol">:</a> <a id="7362" class="Symbol">∀</a> <a id="7364" class="Symbol">{</a><a id="7365" href="Ledger.Dijkstra.Specification.Utxo.html#7365" class="Bound">ℓ</a><a id="7366" class="Symbol">}</a> <a id="7368" class="Symbol">→</a> <a id="7370" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Record">Tx</a> <a id="7373" href="Ledger.Dijkstra.Specification.Utxo.html#7365" class="Bound">ℓ</a> <a id="7375" class="Symbol">→</a> <a id="7377" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
    <a id="7387" href="Ledger.Dijkstra.Specification.Utxo.html#7349" class="Function">producedTx</a> <a id="7398" class="Symbol">{</a><a id="7399" href="Ledger.Dijkstra.Specification.Transaction.html#802" class="InductiveConstructor">TxLevelSub</a><a id="7409" class="Symbol">}</a> <a id="7411" href="Ledger.Dijkstra.Specification.Utxo.html#7411" class="Bound">tx</a> <a id="7414" class="Symbol">=</a>  <a id="7417" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="7425" class="Symbol">(</a><a id="7426" href="Ledger.Dijkstra.Specification.Utxo.html#4377" class="Function">outs</a> <a id="7431" href="Ledger.Dijkstra.Specification.Utxo.html#7411" class="Bound">tx</a><a id="7433" class="Symbol">)</a> <a id="7435" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="7437" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="7444" class="Symbol">(</a><a id="7445" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="7457" href="Ledger.Dijkstra.Specification.Utxo.html#7411" class="Bound">tx</a><a id="7459" class="Symbol">)</a>
    <a id="7465" href="Ledger.Dijkstra.Specification.Utxo.html#7349" class="Function">producedTx</a> <a id="7476" class="Symbol">{</a><a id="7477" href="Ledger.Dijkstra.Specification.Transaction.html#791" class="InductiveConstructor">TxLevelTop</a><a id="7487" class="Symbol">}</a> <a id="7489" href="Ledger.Dijkstra.Specification.Utxo.html#7489" class="Bound">tx</a> <a id="7492" class="Symbol">=</a>
      <a id="7500" href="Ledger.Dijkstra.Specification.Utxo.html#4445" class="Function">balance</a> <a id="7508" class="Symbol">(</a><a id="7509" href="Ledger.Dijkstra.Specification.Utxo.html#4377" class="Function">outs</a> <a id="7514" href="Ledger.Dijkstra.Specification.Utxo.html#7489" class="Bound">tx</a><a id="7516" class="Symbol">)</a> <a id="7518" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="7520" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="7527" class="Symbol">(</a><a id="7528" href="Ledger.Dijkstra.Specification.Transaction.html#6240" class="Field">TxFeesOf</a> <a id="7537" href="Ledger.Dijkstra.Specification.Utxo.html#7489" class="Bound">tx</a><a id="7539" class="Symbol">)</a> <a id="7541" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="7543" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="7550" class="Symbol">(</a><a id="7551" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="7563" href="Ledger.Dijkstra.Specification.Utxo.html#7489" class="Bound">tx</a><a id="7565" class="Symbol">)</a>


<a id="7569" class="Keyword">private</a>
  <a id="7579" class="Keyword">variable</a>
    <a id="7592" href="Ledger.Dijkstra.Specification.Utxo.html#7592" class="Generalizable">A</a>        <a id="7601" class="Symbol">:</a> <a id="7603" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="7612" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a>        <a id="7621" class="Symbol">:</a> <a id="7623" href="Ledger.Dijkstra.Specification.Utxo.html#7592" class="Generalizable">A</a>
    <a id="7629" href="Ledger.Dijkstra.Specification.Utxo.html#7629" class="Generalizable">s</a> <a id="7631" href="Ledger.Dijkstra.Specification.Utxo.html#7631" class="Generalizable">s&#39;</a>     <a id="7638" class="Symbol">:</a> <a id="7640" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a>
    <a id="7654" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a>    <a id="7663" class="Symbol">:</a> <a id="7665" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a>
    <a id="7680" href="Ledger.Dijkstra.Specification.Utxo.html#7680" class="Generalizable">txSub</a>    <a id="7689" class="Symbol">:</a> <a id="7691" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a>


<a id="allP2ScriptsWithContext"></a><a id="7704" href="Ledger.Dijkstra.Specification.Utxo.html#7704" class="Function">allP2ScriptsWithContext</a> <a id="7728" class="Symbol">:</a> <a id="7730" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a> <a id="7738" class="Symbol">→</a> <a id="7740" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="7751" class="Symbol">→</a> <a id="7753" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7758" class="Symbol">(</a><a id="7759" href="Ledger.Dijkstra.Specification.Script.Base.html#2432" class="Function">P2Script</a> <a id="7768" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="7770" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7775" href="Ledger.Dijkstra.Specification.Script.Base.html#1773" class="Function">Data</a> <a id="7780" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="7782" href="Ledger.Dijkstra.Specification.Script.Base.html#1023" class="Function">ExUnits</a> <a id="7790" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="7792" href="Ledger.Dijkstra.Specification.Script.Base.html#994" class="Function">CostModel</a><a id="7801" class="Symbol">)</a>
<a id="7803" href="Ledger.Dijkstra.Specification.Utxo.html#7704" class="Function">allP2ScriptsWithContext</a> <a id="7827" href="Ledger.Dijkstra.Specification.Utxo.html#7827" class="Bound">Γ</a> <a id="7829" href="Ledger.Dijkstra.Specification.Utxo.html#7829" class="Bound">txTop</a> <a id="7835" class="Symbol">=</a>
  <a id="7839" href="Ledger.Dijkstra.Specification.Utxo.html#7942" class="Function">p2ScriptsWithContext</a> <a id="7860" href="Ledger.Dijkstra.Specification.Utxo.html#7829" class="Bound">txTop</a> <a id="7866" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="7869" href="Data.List.Base.html#4384" class="Function">concatMap</a> <a id="7879" href="Ledger.Dijkstra.Specification.Utxo.html#7942" class="Function">p2ScriptsWithContext</a> <a id="7900" class="Symbol">(</a><a id="7901" href="Ledger.Dijkstra.Specification.Transaction.html#6390" class="Field">SubTransactionsOf</a> <a id="7919" href="Ledger.Dijkstra.Specification.Utxo.html#7829" class="Bound">txTop</a><a id="7924" class="Symbol">)</a>
    <a id="7930" class="Keyword">where</a>
      <a id="7942" href="Ledger.Dijkstra.Specification.Utxo.html#7942" class="Function">p2ScriptsWithContext</a> <a id="7963" class="Symbol">:</a> <a id="7965" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Record">Tx</a> <a id="7968" href="Ledger.Dijkstra.Specification.Utxo.html#667" class="Generalizable">ℓ</a> <a id="7970" class="Symbol">→</a> <a id="7972" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7977" class="Symbol">(</a><a id="7978" href="Ledger.Dijkstra.Specification.Script.Base.html#2432" class="Function">P2Script</a> <a id="7987" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="7989" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7994" href="Ledger.Dijkstra.Specification.Script.Base.html#1773" class="Function">Data</a> <a id="7999" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8001" href="Ledger.Dijkstra.Specification.Script.Base.html#1023" class="Function">ExUnits</a> <a id="8009" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8011" href="Ledger.Dijkstra.Specification.Script.Base.html#994" class="Function">CostModel</a><a id="8020" class="Symbol">)</a>
      <a id="8028" href="Ledger.Dijkstra.Specification.Utxo.html#7942" class="Function">p2ScriptsWithContext</a> <a id="8049" href="Ledger.Dijkstra.Specification.Utxo.html#8049" class="Bound">t</a> <a id="8051" class="Symbol">=</a>
        <a id="8061" href="Ledger.Dijkstra.Specification.Script.Validation.html#5525" class="Function">collectP2ScriptsWithContext</a> <a id="8089" class="Symbol">(</a><a id="8090" href="Ledger.Dijkstra.Specification.PParams.html#4454" class="Field">PParamsOf</a> <a id="8100" href="Ledger.Dijkstra.Specification.Utxo.html#7827" class="Bound">Γ</a><a id="8101" class="Symbol">)</a>
                                    <a id="8139" href="Ledger.Dijkstra.Specification.Utxo.html#7829" class="Bound">txTop</a>
                                    <a id="8181" class="Symbol">(</a><a id="8182" href="Ledger.Dijkstra.Specification.Transaction.html#3454" class="Field">UTxOOf</a> <a id="8189" href="Ledger.Dijkstra.Specification.Utxo.html#7827" class="Bound">Γ</a><a id="8190" class="Symbol">)</a>        <a id="8199" class="Comment">-- (1)</a>
                                    <a id="8242" class="Symbol">(</a><a id="8243" href="Ledger.Dijkstra.Specification.Utxo.html#2224" class="Field">DataPoolOf</a> <a id="8254" href="Ledger.Dijkstra.Specification.Utxo.html#7827" class="Bound">Γ</a><a id="8255" class="Symbol">)</a>    <a id="8260" class="Comment">-- (2)</a>
                                    <a id="8303" class="Symbol">(</a><a id="8304" href="Ledger.Dijkstra.Specification.Utxo.html#2104" class="Field">ScriptPoolOf</a> <a id="8317" href="Ledger.Dijkstra.Specification.Utxo.html#7827" class="Bound">Γ</a><a id="8318" class="Symbol">)</a>  <a id="8321" class="Comment">-- (3)</a>


<a id="8330" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="8335" href="Ledger.Dijkstra.Specification.Utxo.html#8335" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="8350" class="Symbol">:</a> <a id="8352" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a> <a id="8360" class="Symbol">→</a> <a id="8362" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="8364" class="Symbol">→</a> <a id="8366" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="8377" class="Symbol">→</a> <a id="8379" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="8381" class="Symbol">→</a> <a id="8383" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="8388" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXOS⦈_.UTXOS"></a><a id="8397" href="Ledger.Dijkstra.Specification.Utxo.html#8397" class="InductiveConstructor">UTXOS</a> <a id="8403" class="Symbol">:</a>
    <a id="8409" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="8411" href="Ledger.Dijkstra.Specification.Script.Validation.html#6554" class="Function">evalP2Scripts</a> <a id="8425" class="Symbol">(</a><a id="8426" href="Ledger.Dijkstra.Specification.Utxo.html#7704" class="Function">allP2ScriptsWithContext</a> <a id="8450" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a> <a id="8452" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a><a id="8457" class="Symbol">)</a> <a id="8459" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="8461" href="Ledger.Dijkstra.Specification.Transaction.html#8884" class="Field">IsValidFlagOf</a> <a id="8475" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a>
      <a id="8487" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="8526" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a> <a id="8528" href="Ledger.Dijkstra.Specification.Utxo.html#8335" class="Datatype Operator">⊢</a> <a id="8530" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="8533" href="Ledger.Dijkstra.Specification.Utxo.html#8335" class="Datatype Operator">⇀⦇</a> <a id="8536" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="8542" href="Ledger.Dijkstra.Specification.Utxo.html#8335" class="Datatype Operator">,UTXOS⦈</a> <a id="8550" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>


<a id="8555" class="Keyword">private</a>
  <a id="8565" class="Keyword">variable</a>
    <a id="8578" href="Ledger.Dijkstra.Specification.Utxo.html#8578" class="Generalizable">utxo</a> <a id="8583" class="Symbol">:</a> <a id="8585" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a>
    <a id="8594" href="Ledger.Dijkstra.Specification.Utxo.html#8594" class="Generalizable">fees</a> <a id="8599" class="Symbol">:</a> <a id="8601" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
    <a id="8610" href="Ledger.Dijkstra.Specification.Utxo.html#8610" class="Generalizable">donations</a> <a id="8620" class="Symbol">:</a> <a id="8622" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>


<a id="8634" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SUBUTXO⦈_"></a><a id="8639" href="Ledger.Dijkstra.Specification.Utxo.html#8639" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXO⦈_</a> <a id="8656" class="Symbol">:</a> <a id="8658" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a> <a id="8669" class="Symbol">→</a> <a id="8671" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="8681" class="Symbol">→</a> <a id="8683" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a> <a id="8694" class="Symbol">→</a> <a id="8696" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="8706" class="Symbol">→</a> <a id="8708" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="8713" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,SUBUTXO⦈_.SUBUTXO"></a><a id="8722" href="Ledger.Dijkstra.Specification.Utxo.html#8722" class="InductiveConstructor">SUBUTXO</a> <a id="8730" class="Symbol">:</a>

    <a id="8737" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="8739" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="8753" href="Ledger.Dijkstra.Specification.Utxo.html#7680" class="Generalizable">txSub</a> <a id="8759" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="8761" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="8767" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="8769" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="8780" class="Symbol">(</a><a id="8781" href="Ledger.Dijkstra.Specification.Utxo.html#2344" class="Field">SlotOf</a> <a id="8788" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a><a id="8789" class="Symbol">)</a> <a id="8791" class="Symbol">(</a><a id="8792" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="8808" href="Ledger.Dijkstra.Specification.Utxo.html#7680" class="Generalizable">txSub</a><a id="8813" class="Symbol">)</a>
    <a id="8819" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="8821" href="Ledger.Core.Specification.Address.html#1839" class="Field">MaybeNetworkIdOf</a> <a id="8838" href="Ledger.Dijkstra.Specification.Utxo.html#7680" class="Generalizable">txSub</a> <a id="8844" href="Prelude.html#2945" class="Function Operator">~</a> <a id="8846" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8851" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
      <a id="8867" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
    <a id="8904" class="Keyword">let</a>
         <a id="8917" href="Ledger.Dijkstra.Specification.Utxo.html#8917" class="Bound">s₁</a> <a id="8920" class="Symbol">=</a> <a id="8922" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="8925" href="Ledger.Dijkstra.Specification.Utxo.html#1841" class="Field">IsTopLevelValidFlagOf</a> <a id="8947" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a>
              <a id="8963" href="Class.ToBool.html#342" class="Function Operator">then</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{8970}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Utxo.html#8578}{\htmlId{8971}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{8976}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#7179}{\htmlId{8978}{\htmlClass{Field}{\text{SpendInputsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7680}{\htmlId{8992}{\htmlClass{Generalizable}{\text{txSub}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{8998}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,\,\htmlId{8999}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#7640}{\htmlId{9001}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#4377}{\htmlId{9004}{\htmlClass{Function}{\text{outs}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7680}{\htmlId{9009}{\htmlClass{Generalizable}{\text{txSub}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8594}{\htmlId{9017}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8610}{\htmlId{9024}{\htmlClass{Generalizable}{\text{donations}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{9034}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Prelude.Base.html#554}{\htmlId{9036}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7680}{\htmlId{9048}{\htmlClass{Generalizable}{\text{txSub}}}}\, \end{pmatrix}$</a> <a id="9056" href="Class.ToBool.html#342" class="Function Operator">else</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Utxo.html#8578}{\htmlId{9063}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8594}{\htmlId{9070}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8610}{\htmlId{9077}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a>
    <a id="9093" class="Keyword">in</a>
      <a id="9102" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a> <a id="9104" href="Ledger.Dijkstra.Specification.Utxo.html#8639" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Utxo.html#8578}{\htmlId{9108}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8594}{\htmlId{9115}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8610}{\htmlId{9122}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="9134" href="Ledger.Dijkstra.Specification.Utxo.html#8639" class="Datatype Operator">⇀⦇</a> <a id="9137" href="Ledger.Dijkstra.Specification.Utxo.html#7680" class="Generalizable">txSub</a> <a id="9143" href="Ledger.Dijkstra.Specification.Utxo.html#8639" class="Datatype Operator">,SUBUTXO⦈</a> <a id="9153" href="Ledger.Dijkstra.Specification.Utxo.html#8917" class="Bound">s₁</a>


<a id="9158" class="Keyword">unquoteDecl</a> <a id="SUBUTXO-premises"></a><a id="9170" href="Ledger.Dijkstra.Specification.Utxo.html#9170" class="Function">SUBUTXO-premises</a> <a id="9187" class="Symbol">=</a> <a id="9189" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="9201" href="Ledger.Dijkstra.Specification.Utxo.html#9170" class="Function">SUBUTXO-premises</a> <a id="9218" class="Symbol">(</a><a id="9219" class="Keyword">quote</a> <a id="9225" href="Ledger.Dijkstra.Specification.Utxo.html#8722" class="InductiveConstructor">SUBUTXO</a><a id="9232" class="Symbol">)</a>


<a id="9236" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="9241" href="Ledger.Dijkstra.Specification.Utxo.html#9241" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="9255" class="Symbol">:</a> <a id="9257" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a> <a id="9265" class="Symbol">→</a> <a id="9267" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="9277" class="Symbol">→</a> <a id="9279" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="9290" class="Symbol">→</a> <a id="9292" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="9302" class="Symbol">→</a> <a id="9304" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="9309" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO"></a><a id="9318" href="Ledger.Dijkstra.Specification.Utxo.html#9318" class="InductiveConstructor">UTXO</a> <a id="9323" class="Symbol">:</a>

    <a id="9330" class="Keyword">let</a>
         <a id="9343" href="Ledger.Dijkstra.Specification.Utxo.html#9343" class="Bound">pp</a>        <a id="9353" class="Symbol">=</a> <a id="9355" href="Ledger.Dijkstra.Specification.PParams.html#4454" class="Field">PParamsOf</a> <a id="9365" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a>
         <a id="9376" href="Ledger.Dijkstra.Specification.Utxo.html#9376" class="Bound">utxo₀</a>     <a id="9386" class="Symbol">=</a> <a id="9388" href="Ledger.Dijkstra.Specification.Transaction.html#3454" class="Field">UTxOOf</a> <a id="9395" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a>
         <a id="9406" href="Ledger.Dijkstra.Specification.Utxo.html#9406" class="Bound">overhead</a>  <a id="9416" class="Symbol">=</a> <a id="9418" class="Number">160</a>
    <a id="9426" class="Keyword">in</a>
    <a id="9433" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="9435" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="9449" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9455" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="9457" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="9463" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9465" href="Ledger.Dijkstra.Specification.Utxo.html#5027" class="Datatype">inInterval</a> <a id="9476" class="Symbol">(</a><a id="9477" href="Ledger.Dijkstra.Specification.Utxo.html#2344" class="Field">SlotOf</a> <a id="9484" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a><a id="9485" class="Symbol">)</a> <a id="9487" class="Symbol">(</a><a id="9488" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="9504" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a><a id="9509" class="Symbol">)</a>
    <a id="9515" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9517" href="Ledger.Dijkstra.Specification.Utxo.html#4709" class="Function">minfee</a> <a id="9524" href="Ledger.Dijkstra.Specification.Utxo.html#9343" class="Bound">pp</a> <a id="9527" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9533" href="Ledger.Dijkstra.Specification.Utxo.html#8578" class="Generalizable">utxo</a> <a id="9538" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9540" href="Ledger.Dijkstra.Specification.Transaction.html#6240" class="Field">TxFeesOf</a> <a id="9549" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a>
    <a id="9559" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9561" href="Ledger.Dijkstra.Specification.Utxo.html#6835" class="Function">consumed</a> <a id="9570" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9576" class="Symbol">(</a><a id="9577" href="Ledger.Dijkstra.Specification.Utxo.html#1981" class="Field">DepositsChangeOf</a> <a id="9594" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a><a id="9595" class="Symbol">)</a> <a id="9597" href="Ledger.Dijkstra.Specification.Utxo.html#9376" class="Bound">utxo₀</a> <a id="9603" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="9605" href="Ledger.Dijkstra.Specification.Utxo.html#7192" class="Function">produced</a> <a id="9614" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9620" class="Symbol">(</a><a id="9621" href="Ledger.Dijkstra.Specification.Utxo.html#1981" class="Field">DepositsChangeOf</a> <a id="9638" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a><a id="9639" class="Symbol">)</a>
    <a id="9645" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9647" href="Ledger.Dijkstra.Specification.Transaction.html#6917" class="Field">SizeOf</a> <a id="9654" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9660" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9662" href="Ledger.Dijkstra.Specification.PParams.html#2053" class="Field">maxTxSize</a> <a id="9672" href="Ledger.Dijkstra.Specification.Utxo.html#9343" class="Bound">pp</a>
    <a id="9679" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9681" href="Ledger.Dijkstra.Specification.Utxo.html#4574" class="Function">refScriptsSize</a> <a id="9696" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9702" href="Ledger.Dijkstra.Specification.Utxo.html#9376" class="Bound">utxo₀</a> <a id="9708" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9710" href="Ledger.Dijkstra.Specification.Utxo.html#9343" class="Bound">pp</a> <a id="9713" class="Symbol">.</a><a id="9714" href="Ledger.Dijkstra.Specification.PParams.html#2797" class="Field">maxRefScriptSizePerTx</a>
    <a id="9740" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9742" href="Ledger.Dijkstra.Specification.Transaction.html#15059" class="Function">allSpendInputs</a> <a id="9757" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9763" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="9765" href="Class.IsSet.html#916" class="Function">dom</a> <a id="9769" href="Ledger.Dijkstra.Specification.Utxo.html#9376" class="Bound">utxo₀</a>                          <a id="9800" class="Comment">-- (1)</a>
    <a id="9811" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9813" href="Ledger.Dijkstra.Specification.Transaction.html#15441" class="Function">allReferenceInputs</a> <a id="9832" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9838" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="9840" href="Class.IsSet.html#916" class="Function">dom</a> <a id="9844" href="Ledger.Dijkstra.Specification.Utxo.html#9376" class="Bound">utxo₀</a>                      <a id="9871" class="Comment">-- (1)</a>
    <a id="9882" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9884" href="Ledger.Dijkstra.Specification.Transaction.html#18880" class="Function">NoOverlappingSpendInputs</a> <a id="9909" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a>                            <a id="9942" class="Comment">-- (2)</a>
    <a id="9953" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="9955" href="Ledger.Dijkstra.Specification.Transaction.html#5876" class="Field">RedeemersOf</a> <a id="9967" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="9973" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="9975" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="9977" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="9979" class="Symbol">→</a> <a id="9981" href="Ledger.Dijkstra.Specification.Utxo.html#6261" class="Function">collateralCheck</a> <a id="9997" href="Ledger.Dijkstra.Specification.Utxo.html#9343" class="Bound">pp</a> <a id="10000" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="10006" href="Ledger.Dijkstra.Specification.Utxo.html#9376" class="Bound">utxo₀</a>
    <a id="10016" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="10018" href="Ledger.Dijkstra.Specification.Transaction.html#19134" class="Function">allMintedCoin</a> <a id="10032" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="10038" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="10040" class="Number">0</a>

    <a id="10047" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="10049" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="10052" href="Ledger.Dijkstra.Specification.Utxo.html#10052" class="Bound">(_</a> <a id="10055" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10057" href="Ledger.Dijkstra.Specification.Utxo.html#10057" class="Bound">o</a><a id="10058" href="Ledger.Dijkstra.Specification.Utxo.html#10052" class="Bound">)</a> <a id="10060" href="Class.IsSet.html#576" class="Function">∈</a> <a id="10062" href="Ledger.Prelude.html#2407" class="Function Operator">∣</a> <a id="10064" href="Ledger.Dijkstra.Specification.Transaction.html#8457" class="Field">TxOutsOf</a> <a id="10073" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="10079" href="Ledger.Prelude.html#2407" class="Function Operator">∣</a> <a id="10081" href="Class.IsSet.html#576" class="Function">]</a>
      <a id="10089" class="Symbol">(</a><a id="10090" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="10097" class="Symbol">((</a><a id="10099" href="Ledger.Dijkstra.Specification.Utxo.html#9406" class="Bound">overhead</a> <a id="10108" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10110" href="Ledger.Dijkstra.Specification.Utxo.html#877" class="Function">utxoEntrySize</a> <a id="10124" href="Ledger.Dijkstra.Specification.Utxo.html#10057" class="Bound">o</a><a id="10125" class="Symbol">)</a> <a id="10127" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="10129" href="Ledger.Dijkstra.Specification.PParams.html#2675" class="Field">coinsPerUTxOByte</a> <a id="10146" href="Ledger.Dijkstra.Specification.Utxo.html#9343" class="Bound">pp</a><a id="10148" class="Symbol">)</a> <a id="10150" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1033" class="Function Operator">≤ᵗ</a> <a id="10153" href="Ledger.Dijkstra.Specification.Transaction.html#14855" class="Function">txOutToValue</a> <a id="10166" href="Ledger.Dijkstra.Specification.Utxo.html#10057" class="Bound">o</a><a id="10167" class="Symbol">)</a>
      <a id="10175" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10177" class="Symbol">(</a><a id="10178" href="Ledger.Dijkstra.Specification.Abstract.html#1001" class="Field">serializedSize</a> <a id="10193" class="Symbol">(</a><a id="10194" href="Ledger.Dijkstra.Specification.Transaction.html#14855" class="Function">txOutToValue</a> <a id="10207" href="Ledger.Dijkstra.Specification.Utxo.html#10057" class="Bound">o</a><a id="10208" class="Symbol">)</a> <a id="10210" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="10212" href="Ledger.Dijkstra.Specification.PParams.html#2217" class="Field">maxValSize</a> <a id="10223" href="Ledger.Dijkstra.Specification.Utxo.html#9343" class="Bound">pp</a><a id="10225" class="Symbol">)</a>

    <a id="10232" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="10234" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="10237" href="Ledger.Dijkstra.Specification.Utxo.html#10237" class="Bound">(</a><a id="10238" href="Ledger.Dijkstra.Specification.Utxo.html#10238" class="Bound">a</a> <a id="10240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10242" href="Ledger.Dijkstra.Specification.Utxo.html#10237" class="Bound">_)</a> <a id="10245" href="Class.IsSet.html#576" class="Function">∈</a> <a id="10247" href="Class.IsSet.html#959" class="Function">range</a> <a id="10253" class="Symbol">(</a><a id="10254" href="Ledger.Dijkstra.Specification.Transaction.html#8457" class="Field">TxOutsOf</a> <a id="10263" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a><a id="10268" class="Symbol">)</a> <a id="10270" href="Class.IsSet.html#576" class="Function">]</a>
      <a id="10278" class="Symbol">(</a><a id="10279" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="10287" class="Symbol">(</a><a id="10288" href="Function.Base.html#725" class="Function">const</a> <a id="10294" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="10295" class="Symbol">)</a> <a id="10297" class="Symbol">(λ</a> <a id="10300" href="Ledger.Dijkstra.Specification.Utxo.html#10300" class="Bound">a</a> <a id="10302" class="Symbol">→</a> <a id="10304" href="Ledger.Core.Specification.Address.html#2100" class="Field">AttrSizeOf</a> <a id="10315" href="Ledger.Dijkstra.Specification.Utxo.html#10300" class="Bound">a</a> <a id="10317" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="10319" class="Number">64</a><a id="10321" class="Symbol">))</a> <a id="10324" href="Ledger.Dijkstra.Specification.Utxo.html#10238" class="Bound">a</a> <a id="10326" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10328" class="Symbol">(</a><a id="10329" href="Ledger.Core.Specification.Address.html#3266" class="Function">netId</a> <a id="10335" href="Ledger.Dijkstra.Specification.Utxo.html#10238" class="Bound">a</a> <a id="10337" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="10339" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a><a id="10348" class="Symbol">)</a>

    <a id="10355" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="10357" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="10360" href="Ledger.Dijkstra.Specification.Utxo.html#10360" class="Bound">a</a> <a id="10362" href="Class.IsSet.html#576" class="Function">∈</a> <a id="10364" href="Class.IsSet.html#916" class="Function">dom</a> <a id="10368" class="Symbol">(</a><a id="10369" href="Ledger.Core.Specification.Address.html#1975" class="Field">WithdrawalsOf</a> <a id="10383" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a><a id="10388" class="Symbol">)</a><a id="10389" href="Class.IsSet.html#576" class="Function">]</a> <a id="10391" href="Ledger.Core.Specification.Address.html#1716" class="Field">NetworkIdOf</a> <a id="10403" href="Ledger.Dijkstra.Specification.Utxo.html#10360" class="Bound">a</a> <a id="10405" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="10407" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="10421" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="10423" href="Ledger.Core.Specification.Address.html#1839" class="Field">MaybeNetworkIdOf</a> <a id="10440" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="10446" href="Prelude.html#2945" class="Function Operator">~</a> <a id="10448" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10453" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="10467" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="10469" href="Ledger.Dijkstra.Specification.Transaction.html#8743" class="Field">CurrentTreasuryOf</a> <a id="10487" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a>  <a id="10494" href="Prelude.html#2945" class="Function Operator">~</a> <a id="10496" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10501" class="Symbol">(</a><a id="10502" href="Ledger.Prelude.Base.html#889" class="Field">TreasuryOf</a> <a id="10513" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a><a id="10514" class="Symbol">)</a>
    <a id="10520" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="10522" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a> <a id="10524" href="Ledger.Dijkstra.Specification.Utxo.html#8335" class="Datatype Operator">⊢</a> <a id="10526" class="Symbol">_</a> <a id="10528" href="Ledger.Dijkstra.Specification.Utxo.html#8335" class="Datatype Operator">⇀⦇</a> <a id="10531" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="10537" href="Ledger.Dijkstra.Specification.Utxo.html#8335" class="Datatype Operator">,UTXOS⦈</a> <a id="10545" class="Symbol">_</a>
      <a id="10553" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
    <a id="10590" class="Keyword">let</a>
         <a id="10603" href="Ledger.Dijkstra.Specification.Utxo.html#10603" class="Bound">s₁</a> <a id="10606" class="Symbol">=</a> <a id="10608" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="10611" href="Ledger.Dijkstra.Specification.Transaction.html#8884" class="Field">IsValidFlagOf</a> <a id="10625" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="10631" href="Class.ToBool.html#342" class="Function Operator">then</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{10638}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Utxo.html#8578}{\htmlId{10639}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{10644}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#7179}{\htmlId{10646}{\htmlClass{Field}{\text{SpendInputsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7654}{\htmlId{10660}{\htmlClass{Generalizable}{\text{txTop}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{10666}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,\,\htmlId{10667}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#7640}{\htmlId{10669}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#4377}{\htmlId{10672}{\htmlClass{Function}{\text{outs}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7654}{\htmlId{10677}{\htmlClass{Generalizable}{\text{txTop}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8594}{\htmlId{10685}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{10690}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#6240}{\htmlId{10692}{\htmlClass{Field}{\text{TxFeesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7654}{\htmlId{10701}{\htmlClass{Generalizable}{\text{txTop}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8610}{\htmlId{10709}{\htmlClass{Generalizable}{\text{donations}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{10719}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Prelude.Base.html#554}{\htmlId{10721}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7654}{\htmlId{10733}{\htmlClass{Generalizable}{\text{txTop}}}}\, \end{pmatrix}$</a> <a id="10741" href="Class.ToBool.html#342" class="Function Operator">else</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Utxo.html#8578}{\htmlId{10748}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{10753}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\htmlId{10755}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#6075}{\htmlId{10756}{\htmlClass{Field}{\text{CollateralInputsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7654}{\htmlId{10775}{\htmlClass{Generalizable}{\text{txTop}}}}\,\,\htmlId{10780}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{10782}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8594}{\htmlId{10786}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{10791}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#4514}{\htmlId{10793}{\htmlClass{Function}{\text{cbalance}}}}\, \,\htmlId{10802}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Utxo.html#8578}{\htmlId{10803}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13536}{\htmlId{10808}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#6075}{\htmlId{10810}{\htmlClass{Field}{\text{CollateralInputsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#7654}{\htmlId{10829}{\htmlClass{Generalizable}{\text{txTop}}}}\,\,\htmlId{10834}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8610}{\htmlId{10838}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a>
    <a id="10854" class="Keyword">in</a>
      <a id="10863" href="Ledger.Dijkstra.Specification.Utxo.html#7612" class="Generalizable">Γ</a> <a id="10865" href="Ledger.Dijkstra.Specification.Utxo.html#9241" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Utxo.html#8578}{\htmlId{10869}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8594}{\htmlId{10876}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#8610}{\htmlId{10883}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="10895" href="Ledger.Dijkstra.Specification.Utxo.html#9241" class="Datatype Operator">⇀⦇</a> <a id="10898" href="Ledger.Dijkstra.Specification.Utxo.html#7654" class="Generalizable">txTop</a> <a id="10904" href="Ledger.Dijkstra.Specification.Utxo.html#9241" class="Datatype Operator">,UTXO⦈</a> <a id="10911" href="Ledger.Dijkstra.Specification.Utxo.html#10603" class="Bound">s₁</a>

</pre></body></html>