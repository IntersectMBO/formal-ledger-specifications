<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Utxo</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a>

<a id="159" class="Keyword">module</a> <a id="166" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a>
  <a id="203" class="Symbol">(</a><a id="204" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a> <a id="208" class="Symbol">:</a> <a id="210" class="Symbol">_)</a> <a id="213" class="Symbol">(</a><a id="214" class="Keyword">open</a> <a id="219" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Module">TransactionStructure</a> <a id="240" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a><a id="243" class="Symbol">)</a>
  <a id="247" class="Symbol">(</a><a id="248" href="Ledger.Dijkstra.Specification.Utxo.html#248" class="Bound">abs</a> <a id="252" class="Symbol">:</a> <a id="254" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="272" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a><a id="275" class="Symbol">)</a> <a id="277" class="Symbol">(</a><a id="278" class="Keyword">open</a> <a id="283" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="301" href="Ledger.Dijkstra.Specification.Utxo.html#248" class="Bound">abs</a><a id="304" class="Symbol">)</a>
  <a id="308" class="Keyword">where</a>

<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="363" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>
<a id="376" class="Keyword">open</a> <a id="381" class="Keyword">import</a> <a id="388" href="Ledger.Dijkstra.Specification.Script.Validation.html" class="Module">Ledger.Dijkstra.Specification.Script.Validation</a> <a id="436" href="Ledger.Dijkstra.Specification.Utxo.html#204" class="Bound">txs</a> <a id="440" href="Ledger.Dijkstra.Specification.Utxo.html#248" class="Bound">abs</a>
<a id="444" class="Keyword">open</a> <a id="449" class="Keyword">import</a> <a id="456" href="Ledger.Dijkstra.Specification.Fees.html" class="Module">Ledger.Dijkstra.Specification.Fees</a> <a id="491" class="Keyword">using</a> <a id="497" class="Symbol">(</a><a id="498" href="Ledger.Dijkstra.Specification.Fees.html#1004" class="Function">scriptsCost</a><a id="509" class="Symbol">)</a>

<a id="512" class="Keyword">import</a> <a id="519" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="548" class="Symbol">as</a> <a id="551" class="Module">List</a>
<a id="556" class="Keyword">import</a> <a id="563" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="591" class="Symbol">as</a> <a id="594" class="Module">Sum</a>

<a id="599" class="Keyword">private</a> <a id="607" class="Keyword">variable</a>
  <a id="618" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="620" class="Symbol">:</a> <a id="622" href="Ledger.Dijkstra.Specification.Transaction.html#718" class="Datatype">TxLevel</a>

<a id="totExUnits"></a><a id="631" href="Ledger.Dijkstra.Specification.Utxo.html#631" class="Function">totExUnits</a> <a id="642" class="Symbol">:</a> <a id="644" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="647" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="649" class="Symbol">→</a> <a id="651" href="Ledger.Dijkstra.Specification.Script.Base.html#1023" class="Function">ExUnits</a>
<a id="659" href="Ledger.Dijkstra.Specification.Utxo.html#631" class="Function">totExUnits</a> <a id="670" href="Ledger.Dijkstra.Specification.Utxo.html#670" class="Bound">tx</a> <a id="673" class="Symbol">=</a> <a id="675" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">∑[</a> <a id="678" href="Ledger.Dijkstra.Specification.Utxo.html#678" class="Bound">(_</a> <a id="681" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="683" href="Ledger.Dijkstra.Specification.Utxo.html#683" class="Bound">eu</a><a id="685" href="Ledger.Dijkstra.Specification.Utxo.html#678" class="Bound">)</a> <a id="687" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">←</a> <a id="689" href="Ledger.Dijkstra.Specification.Transaction.html#5826" class="Field">RedeemersOf</a> <a id="701" href="Ledger.Dijkstra.Specification.Utxo.html#670" class="Bound">tx</a> <a id="704" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">]</a> <a id="706" href="Ledger.Dijkstra.Specification.Utxo.html#683" class="Bound">eu</a>

<a id="710" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="758" href="Ledger.Dijkstra.Specification.Utxo.html#758" class="Function">utxoEntrySizeWithoutVal</a> <a id="782" class="Symbol">:</a> <a id="784" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#429" class="Function">MemoryEstimate</a>
<a id="799" href="Ledger.Dijkstra.Specification.Utxo.html#758" class="Function">utxoEntrySizeWithoutVal</a> <a id="823" class="Symbol">=</a> <a id="825" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="828" href="Ledger.Dijkstra.Specification.Utxo.html#828" class="Function">utxoEntrySize</a> <a id="842" class="Symbol">:</a> <a id="844" href="Ledger.Dijkstra.Specification.Transaction.html#14527" class="Function">TxOutʰ</a> <a id="851" class="Symbol">→</a> <a id="853" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#429" class="Function">MemoryEstimate</a>
<a id="868" href="Ledger.Dijkstra.Specification.Utxo.html#828" class="Function">utxoEntrySize</a> <a id="882" href="Ledger.Dijkstra.Specification.Utxo.html#882" class="Bound">o</a> <a id="884" class="Symbol">=</a> <a id="886" href="Ledger.Dijkstra.Specification.Utxo.html#758" class="Function">utxoEntrySizeWithoutVal</a> <a id="910" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="912" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#978" class="Function">size</a> <a id="917" class="Symbol">(</a><a id="918" href="Ledger.Dijkstra.Specification.Transaction.html#14699" class="Function">getValueʰ</a> <a id="928" href="Ledger.Dijkstra.Specification.Utxo.html#882" class="Bound">o</a><a id="929" class="Symbol">)</a>

<a id="932" class="Keyword">open</a> <a id="937" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Module">PParams</a>


<a id="947" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="954" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="962" class="Symbol">:</a> <a id="964" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="969" class="Keyword">where</a>
  <a id="977" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="987" href="Ledger.Dijkstra.Specification.Utxo.html#987" class="Field">slot</a>              <a id="1005" class="Symbol">:</a> <a id="1007" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="1016" href="Ledger.Dijkstra.Specification.Utxo.html#1016" class="Field">pparams</a>           <a id="1034" class="Symbol">:</a> <a id="1036" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="1048" href="Ledger.Dijkstra.Specification.Utxo.html#1048" class="Field">treasury</a>          <a id="1066" class="Symbol">:</a> <a id="1068" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
    <a id="UTxOEnv.utxo₀"></a><a id="1081" href="Ledger.Dijkstra.Specification.Utxo.html#1081" class="Field">utxo₀</a>             <a id="1099" class="Symbol">:</a> <a id="1101" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
    <a id="UTxOEnv.isTopLevelValid"></a><a id="1110" href="Ledger.Dijkstra.Specification.Utxo.html#1110" class="Field">isTopLevelValid</a>   <a id="1128" class="Symbol">:</a> <a id="1130" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
    <a id="UTxOEnv.allScripts"></a><a id="1139" href="Ledger.Dijkstra.Specification.Utxo.html#1139" class="Field">allScripts</a>        <a id="1157" class="Symbol">:</a> <a id="1159" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1161" href="Ledger.Dijkstra.Specification.Script.Base.html#2457" class="Function">Script</a>
    <a id="UTxOEnv.allData"></a><a id="1172" href="Ledger.Dijkstra.Specification.Utxo.html#1172" class="Field">allData</a>           <a id="1190" class="Symbol">:</a> <a id="1192" href="Ledger.Dijkstra.Specification.Script.Base.html#1735" class="Function">DataHash</a> <a id="1201" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1203" href="Ledger.Dijkstra.Specification.Script.Base.html#1782" class="Function">Datum</a>

<a id="1210" class="Keyword">record</a> <a id="UTxOState"></a><a id="1217" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="1227" class="Symbol">:</a> <a id="1229" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1234" class="Keyword">where</a>
  <a id="1242" class="Keyword">constructor</a> <a id="⟦_,_,_,_⟧ᵘ"></a><a id="1254" href="Ledger.Dijkstra.Specification.Utxo.html#1254" class="InductiveConstructor Operator">⟦_,_,_,_⟧ᵘ</a>
  <a id="1267" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="1277" href="Ledger.Dijkstra.Specification.Utxo.html#1277" class="Field">utxo</a>       <a id="1288" class="Symbol">:</a> <a id="1290" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="1299" href="Ledger.Dijkstra.Specification.Utxo.html#1299" class="Field">fees</a>       <a id="1310" class="Symbol">:</a> <a id="1312" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
    <a id="UTxOState.deposits"></a><a id="1321" href="Ledger.Dijkstra.Specification.Utxo.html#1321" class="Field">deposits</a>   <a id="1332" class="Symbol">:</a> <a id="1334" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
    <a id="UTxOState.donations"></a><a id="1347" href="Ledger.Dijkstra.Specification.Utxo.html#1347" class="Field">donations</a>  <a id="1358" class="Symbol">:</a> <a id="1360" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>


<a id="1372" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="1379" href="Ledger.Dijkstra.Specification.Utxo.html#1379" class="Record">HasUTxOState</a> <a id="1392" class="Symbol">{</a><a id="1393" href="Ledger.Dijkstra.Specification.Utxo.html#1393" class="Bound">a</a><a id="1394" class="Symbol">}</a> <a id="1396" class="Symbol">(</a><a id="1397" href="Ledger.Dijkstra.Specification.Utxo.html#1397" class="Bound">A</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1406" href="Ledger.Dijkstra.Specification.Utxo.html#1393" class="Bound">a</a><a id="1407" class="Symbol">)</a> <a id="1409" class="Symbol">:</a> <a id="1411" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1416" href="Ledger.Dijkstra.Specification.Utxo.html#1393" class="Bound">a</a> <a id="1418" class="Keyword">where</a>
  <a id="1426" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="1432" href="Ledger.Dijkstra.Specification.Utxo.html#1432" class="Field">UTxOStateOf</a> <a id="1444" class="Symbol">:</a> <a id="1446" href="Ledger.Dijkstra.Specification.Utxo.html#1397" class="Bound">A</a> <a id="1448" class="Symbol">→</a> <a id="1450" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
<a id="1460" class="Keyword">open</a> <a id="1465" href="Ledger.Dijkstra.Specification.Utxo.html#1379" class="Module">HasUTxOState</a> <a id="1478" class="Symbol">⦃...⦄</a> <a id="1484" class="Keyword">public</a>

<a id="1492" class="Keyword">record</a> <a id="HasIsTopLevelValidFlag"></a><a id="1499" href="Ledger.Dijkstra.Specification.Utxo.html#1499" class="Record">HasIsTopLevelValidFlag</a> <a id="1522" class="Symbol">{</a><a id="1523" href="Ledger.Dijkstra.Specification.Utxo.html#1523" class="Bound">a</a><a id="1524" class="Symbol">}</a> <a id="1526" class="Symbol">(</a><a id="1527" href="Ledger.Dijkstra.Specification.Utxo.html#1527" class="Bound">A</a> <a id="1529" class="Symbol">:</a> <a id="1531" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1536" href="Ledger.Dijkstra.Specification.Utxo.html#1523" class="Bound">a</a><a id="1537" class="Symbol">)</a> <a id="1539" class="Symbol">:</a> <a id="1541" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1546" href="Ledger.Dijkstra.Specification.Utxo.html#1523" class="Bound">a</a> <a id="1548" class="Keyword">where</a>
  <a id="1556" class="Keyword">field</a> <a id="HasIsTopLevelValidFlag.IsTopLevelValidFlagOf"></a><a id="1562" href="Ledger.Dijkstra.Specification.Utxo.html#1562" class="Field">IsTopLevelValidFlagOf</a> <a id="1584" class="Symbol">:</a> <a id="1586" href="Ledger.Dijkstra.Specification.Utxo.html#1527" class="Bound">A</a> <a id="1588" class="Symbol">→</a> <a id="1590" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="1595" class="Keyword">open</a> <a id="1600" href="Ledger.Dijkstra.Specification.Utxo.html#1499" class="Module">HasIsTopLevelValidFlag</a> <a id="1623" class="Symbol">⦃...⦄</a> <a id="1629" class="Keyword">public</a>

<a id="1637" class="Keyword">record</a> <a id="HasScriptPool"></a><a id="1644" href="Ledger.Dijkstra.Specification.Utxo.html#1644" class="Record">HasScriptPool</a> <a id="1658" class="Symbol">{</a><a id="1659" href="Ledger.Dijkstra.Specification.Utxo.html#1659" class="Bound">a</a><a id="1660" class="Symbol">}</a> <a id="1662" class="Symbol">(</a><a id="1663" href="Ledger.Dijkstra.Specification.Utxo.html#1663" class="Bound">A</a> <a id="1665" class="Symbol">:</a> <a id="1667" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1672" href="Ledger.Dijkstra.Specification.Utxo.html#1659" class="Bound">a</a><a id="1673" class="Symbol">)</a> <a id="1675" class="Symbol">:</a> <a id="1677" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1682" href="Ledger.Dijkstra.Specification.Utxo.html#1659" class="Bound">a</a> <a id="1684" class="Keyword">where</a>
  <a id="1692" class="Keyword">field</a> <a id="HasScriptPool.ScriptPoolOf"></a><a id="1698" href="Ledger.Dijkstra.Specification.Utxo.html#1698" class="Field">ScriptPoolOf</a> <a id="1711" class="Symbol">:</a> <a id="1713" href="Ledger.Dijkstra.Specification.Utxo.html#1663" class="Bound">A</a> <a id="1715" class="Symbol">→</a> <a id="1717" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1719" href="Ledger.Dijkstra.Specification.Script.Base.html#2457" class="Function">Script</a>
<a id="1726" class="Keyword">open</a> <a id="1731" href="Ledger.Dijkstra.Specification.Utxo.html#1644" class="Module">HasScriptPool</a> <a id="1745" class="Symbol">⦃...⦄</a> <a id="1751" class="Keyword">public</a>

<a id="1759" class="Keyword">record</a> <a id="HasDataPool"></a><a id="1766" href="Ledger.Dijkstra.Specification.Utxo.html#1766" class="Record">HasDataPool</a> <a id="1778" class="Symbol">{</a><a id="1779" href="Ledger.Dijkstra.Specification.Utxo.html#1779" class="Bound">a</a><a id="1780" class="Symbol">}</a> <a id="1782" class="Symbol">(</a><a id="1783" href="Ledger.Dijkstra.Specification.Utxo.html#1783" class="Bound">A</a> <a id="1785" class="Symbol">:</a> <a id="1787" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1792" href="Ledger.Dijkstra.Specification.Utxo.html#1779" class="Bound">a</a><a id="1793" class="Symbol">)</a> <a id="1795" class="Symbol">:</a> <a id="1797" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1802" href="Ledger.Dijkstra.Specification.Utxo.html#1779" class="Bound">a</a> <a id="1804" class="Keyword">where</a>
  <a id="1812" class="Keyword">field</a> <a id="HasDataPool.DataPoolOf"></a><a id="1818" href="Ledger.Dijkstra.Specification.Utxo.html#1818" class="Field">DataPoolOf</a> <a id="1829" class="Symbol">:</a> <a id="1831" href="Ledger.Dijkstra.Specification.Utxo.html#1783" class="Bound">A</a> <a id="1833" class="Symbol">→</a> <a id="1835" href="Ledger.Dijkstra.Specification.Script.Base.html#1735" class="Function">DataHash</a> <a id="1844" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1846" href="Ledger.Dijkstra.Specification.Script.Base.html#1782" class="Function">Datum</a>
<a id="1852" class="Keyword">open</a> <a id="1857" href="Ledger.Dijkstra.Specification.Utxo.html#1766" class="Module">HasDataPool</a> <a id="1869" class="Symbol">⦃...⦄</a> <a id="1875" class="Keyword">public</a>

<a id="1883" class="Keyword">record</a> <a id="HasSlot"></a><a id="1890" href="Ledger.Dijkstra.Specification.Utxo.html#1890" class="Record">HasSlot</a> <a id="1898" class="Symbol">{</a><a id="1899" href="Ledger.Dijkstra.Specification.Utxo.html#1899" class="Bound">a</a><a id="1900" class="Symbol">}</a> <a id="1902" class="Symbol">(</a><a id="1903" href="Ledger.Dijkstra.Specification.Utxo.html#1903" class="Bound">A</a> <a id="1905" class="Symbol">:</a> <a id="1907" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1912" href="Ledger.Dijkstra.Specification.Utxo.html#1899" class="Bound">a</a><a id="1913" class="Symbol">)</a> <a id="1915" class="Symbol">:</a> <a id="1917" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1922" href="Ledger.Dijkstra.Specification.Utxo.html#1899" class="Bound">a</a> <a id="1924" class="Keyword">where</a>
  <a id="1932" class="Keyword">field</a> <a id="HasSlot.SlotOf"></a><a id="1938" href="Ledger.Dijkstra.Specification.Utxo.html#1938" class="Field">SlotOf</a> <a id="1945" class="Symbol">:</a> <a id="1947" href="Ledger.Dijkstra.Specification.Utxo.html#1903" class="Bound">A</a> <a id="1949" class="Symbol">→</a> <a id="1951" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
<a id="1956" class="Keyword">open</a> <a id="1961" href="Ledger.Dijkstra.Specification.Utxo.html#1890" class="Module">HasSlot</a> <a id="1969" class="Symbol">⦃...⦄</a> <a id="1975" class="Keyword">public</a>

<a id="1983" class="Keyword">instance</a>
  <a id="HasSlot-UTxOEnv"></a><a id="1994" href="Ledger.Dijkstra.Specification.Utxo.html#1994" class="Function">HasSlot-UTxOEnv</a> <a id="2010" class="Symbol">:</a> <a id="2012" href="Ledger.Dijkstra.Specification.Utxo.html#1890" class="Record">HasSlot</a> <a id="2020" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="2030" href="Ledger.Dijkstra.Specification.Utxo.html#1994" class="Function">HasSlot-UTxOEnv</a> <a id="2046" class="Symbol">.</a><a id="2047" href="Ledger.Dijkstra.Specification.Utxo.html#1938" class="Field">SlotOf</a> <a id="2054" class="Symbol">=</a> <a id="2056" href="Ledger.Dijkstra.Specification.Utxo.html#987" class="Field">UTxOEnv.slot</a>

  <a id="HasPParams-UTxOEnv"></a><a id="2072" href="Ledger.Dijkstra.Specification.Utxo.html#2072" class="Function">HasPParams-UTxOEnv</a> <a id="2091" class="Symbol">:</a> <a id="2093" href="Ledger.Dijkstra.Specification.PParams.html#4274" class="Record">HasPParams</a> <a id="2104" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="2114" href="Ledger.Dijkstra.Specification.Utxo.html#2072" class="Function">HasPParams-UTxOEnv</a> <a id="2133" class="Symbol">.</a><a id="2134" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="2144" class="Symbol">=</a> <a id="2146" href="Ledger.Dijkstra.Specification.Utxo.html#1016" class="Field">UTxOEnv.pparams</a>

  <a id="HasTreasury-UTxOEnv"></a><a id="2165" href="Ledger.Dijkstra.Specification.Utxo.html#2165" class="Function">HasTreasury-UTxOEnv</a> <a id="2185" class="Symbol">:</a> <a id="2187" href="Ledger.Prelude.Base.html#837" class="Record">HasTreasury</a> <a id="2199" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="2209" href="Ledger.Dijkstra.Specification.Utxo.html#2165" class="Function">HasTreasury-UTxOEnv</a> <a id="2229" class="Symbol">.</a><a id="2230" href="Ledger.Prelude.Base.html#889" class="Field">TreasuryOf</a> <a id="2241" class="Symbol">=</a> <a id="2243" href="Ledger.Dijkstra.Specification.Utxo.html#1048" class="Field">UTxOEnv.treasury</a>

  <a id="HasUTxO-UTxOEnv"></a><a id="2263" href="Ledger.Dijkstra.Specification.Utxo.html#2263" class="Function">HasUTxO-UTxOEnv</a> <a id="2279" class="Symbol">:</a> <a id="2281" href="Ledger.Dijkstra.Specification.Transaction.html#3354" class="Record">HasUTxO</a> <a id="2289" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="2299" href="Ledger.Dijkstra.Specification.Utxo.html#2263" class="Function">HasUTxO-UTxOEnv</a> <a id="2315" class="Symbol">.</a><a id="2316" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="2323" class="Symbol">=</a> <a id="2325" href="Ledger.Dijkstra.Specification.Utxo.html#1081" class="Field">UTxOEnv.utxo₀</a>

  <a id="HasIsTopLevelValidFlag-UTxOEnv"></a><a id="2342" href="Ledger.Dijkstra.Specification.Utxo.html#2342" class="Function">HasIsTopLevelValidFlag-UTxOEnv</a> <a id="2373" class="Symbol">:</a> <a id="2375" href="Ledger.Dijkstra.Specification.Utxo.html#1499" class="Record">HasIsTopLevelValidFlag</a> <a id="2398" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="2408" href="Ledger.Dijkstra.Specification.Utxo.html#2342" class="Function">HasIsTopLevelValidFlag-UTxOEnv</a> <a id="2439" class="Symbol">.</a><a id="2440" href="Ledger.Dijkstra.Specification.Utxo.html#1562" class="Field">IsTopLevelValidFlagOf</a> <a id="2462" class="Symbol">=</a> <a id="2464" href="Ledger.Dijkstra.Specification.Utxo.html#1110" class="Field">UTxOEnv.isTopLevelValid</a>

  <a id="HasUTxO-UTxOState"></a><a id="2491" href="Ledger.Dijkstra.Specification.Utxo.html#2491" class="Function">HasUTxO-UTxOState</a> <a id="2509" class="Symbol">:</a> <a id="2511" href="Ledger.Dijkstra.Specification.Transaction.html#3354" class="Record">HasUTxO</a> <a id="2519" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="2531" href="Ledger.Dijkstra.Specification.Utxo.html#2491" class="Function">HasUTxO-UTxOState</a> <a id="2549" class="Symbol">.</a><a id="2550" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="2557" class="Symbol">=</a> <a id="2559" href="Ledger.Dijkstra.Specification.Utxo.html#1277" class="Field">UTxOState.utxo</a>

  <a id="HasFee-UTxOState"></a><a id="2577" href="Ledger.Dijkstra.Specification.Utxo.html#2577" class="Function">HasFee-UTxOState</a> <a id="2594" class="Symbol">:</a> <a id="2596" href="Ledger.Prelude.Base.html#621" class="Record">HasFees</a> <a id="2604" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="2616" href="Ledger.Dijkstra.Specification.Utxo.html#2577" class="Function">HasFee-UTxOState</a> <a id="2633" class="Symbol">.</a><a id="2634" href="Ledger.Prelude.Base.html#669" class="Field">FeesOf</a> <a id="2641" class="Symbol">=</a> <a id="2643" href="Ledger.Dijkstra.Specification.Utxo.html#1299" class="Field">UTxOState.fees</a>

  <a id="HasDeposits-UTxOState"></a><a id="2661" href="Ledger.Dijkstra.Specification.Utxo.html#2661" class="Function">HasDeposits-UTxOState</a> <a id="2683" class="Symbol">:</a> <a id="2685" href="Ledger.Dijkstra.Specification.Certs.html#3601" class="Record">HasDeposits</a> <a id="2697" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="2709" href="Ledger.Dijkstra.Specification.Utxo.html#2661" class="Function">HasDeposits-UTxOState</a> <a id="2731" class="Symbol">.</a><a id="2732" href="Ledger.Dijkstra.Specification.Certs.html#3653" class="Field">DepositsOf</a> <a id="2743" class="Symbol">=</a> <a id="2745" href="Ledger.Dijkstra.Specification.Utxo.html#1321" class="Field">UTxOState.deposits</a>

  <a id="HasDonations-UTxOState"></a><a id="2767" href="Ledger.Dijkstra.Specification.Utxo.html#2767" class="Function">HasDonations-UTxOState</a> <a id="2790" class="Symbol">:</a> <a id="2792" href="Ledger.Prelude.Base.html#501" class="Record">HasDonations</a> <a id="2805" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="2817" href="Ledger.Dijkstra.Specification.Utxo.html#2767" class="Function">HasDonations-UTxOState</a> <a id="2840" class="Symbol">.</a><a id="2841" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="2853" class="Symbol">=</a> <a id="2855" href="Ledger.Dijkstra.Specification.Utxo.html#1347" class="Field">UTxOState.donations</a>

  <a id="HasScriptPool-UTxOEnv"></a><a id="2878" href="Ledger.Dijkstra.Specification.Utxo.html#2878" class="Function">HasScriptPool-UTxOEnv</a> <a id="2900" class="Symbol">:</a> <a id="2902" href="Ledger.Dijkstra.Specification.Utxo.html#1644" class="Record">HasScriptPool</a> <a id="2916" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="2926" href="Ledger.Dijkstra.Specification.Utxo.html#2878" class="Function">HasScriptPool-UTxOEnv</a> <a id="2948" class="Symbol">.</a><a id="2949" href="Ledger.Dijkstra.Specification.Utxo.html#1698" class="Field">ScriptPoolOf</a> <a id="2962" class="Symbol">=</a> <a id="2964" href="Ledger.Dijkstra.Specification.Utxo.html#1139" class="Field">UTxOEnv.allScripts</a>

  <a id="HasDataPool-UTxOEnv"></a><a id="2986" href="Ledger.Dijkstra.Specification.Utxo.html#2986" class="Function">HasDataPool-UTxOEnv</a> <a id="3006" class="Symbol">:</a> <a id="3008" href="Ledger.Dijkstra.Specification.Utxo.html#1766" class="Record">HasDataPool</a> <a id="3020" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="3030" href="Ledger.Dijkstra.Specification.Utxo.html#2986" class="Function">HasDataPool-UTxOEnv</a> <a id="3050" class="Symbol">.</a><a id="3051" href="Ledger.Dijkstra.Specification.Utxo.html#1818" class="Field">DataPoolOf</a> <a id="3062" class="Symbol">=</a> <a id="3064" href="Ledger.Dijkstra.Specification.Utxo.html#1172" class="Field">UTxOEnv.allData</a>

  <a id="3083" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="3095" href="Ledger.Dijkstra.Specification.Utxo.html#3095" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="3111" href="Ledger.Dijkstra.Specification.Utxo.html#3111" class="Function">HasCast-UTxOState</a> <a id="3129" class="Symbol">=</a> <a id="3131" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="3150" class="Symbol">(</a> <a id="3152" class="Symbol">(</a><a id="3153" class="Keyword">quote</a> <a id="3159" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>   <a id="3169" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3171" href="Ledger.Dijkstra.Specification.Utxo.html#3095" class="Function">HasCast-UTxOEnv</a>  <a id="3188" class="Symbol">)</a> <a id="3190" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="3196" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="3198" class="Symbol">(</a><a id="3199" class="Keyword">quote</a> <a id="3205" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="3215" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3217" href="Ledger.Dijkstra.Specification.Utxo.html#3111" class="Function">HasCast-UTxOState</a><a id="3234" class="Symbol">)</a> <a id="3236" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="3237" class="Symbol">)</a>

<a id="3240" class="Keyword">opaque</a>


  <a id="outs"></a><a id="3251" href="Ledger.Dijkstra.Specification.Utxo.html#3251" class="Function">outs</a> <a id="3256" class="Symbol">:</a> <a id="3258" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="3261" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a>  <a id="3264" class="Symbol">→</a> <a id="3266" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
  <a id="3273" href="Ledger.Dijkstra.Specification.Utxo.html#3251" class="Function">outs</a> <a id="3278" href="Ledger.Dijkstra.Specification.Utxo.html#3278" class="Bound">tx</a> <a id="3281" class="Symbol">=</a> <a id="3283" href="Axiom.Set.Map.html#6936" class="Function">mapKeys</a> <a id="3291" class="Symbol">(</a><a id="3292" href="Ledger.Dijkstra.Specification.Transaction.html#6761" class="Field">TxIdOf</a> <a id="3299" href="Ledger.Dijkstra.Specification.Utxo.html#3278" class="Bound">tx</a> <a id="3302" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3304" class="Symbol">)</a> <a id="3306" class="Symbol">(</a><a id="3307" href="Ledger.Dijkstra.Specification.Transaction.html#8407" class="Field">TxOutsOf</a> <a id="3316" href="Ledger.Dijkstra.Specification.Utxo.html#3278" class="Bound">tx</a><a id="3318" class="Symbol">)</a>

  <a id="balance"></a><a id="3323" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="3331" class="Symbol">:</a> <a id="3333" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="3338" class="Symbol">→</a> <a id="3340" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="3348" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="3356" href="Ledger.Dijkstra.Specification.Utxo.html#3356" class="Bound">utxo</a> <a id="3361" class="Symbol">=</a> <a id="3363" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">∑[</a> <a id="3366" href="Ledger.Dijkstra.Specification.Utxo.html#3366" class="Bound">x</a> <a id="3368" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">←</a> <a id="3370" href="Axiom.Set.Map.html#7108" class="Function">mapValues</a> <a id="3380" href="Ledger.Dijkstra.Specification.Transaction.html#14614" class="Function">txOutHash</a> <a id="3390" href="Ledger.Dijkstra.Specification.Utxo.html#3356" class="Bound">utxo</a> <a id="3395" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">]</a> <a id="3397" href="Ledger.Dijkstra.Specification.Transaction.html#14699" class="Function">getValueʰ</a> <a id="3407" href="Ledger.Dijkstra.Specification.Utxo.html#3366" class="Bound">x</a>

  <a id="cbalance"></a><a id="3412" href="Ledger.Dijkstra.Specification.Utxo.html#3412" class="Function">cbalance</a> <a id="3421" class="Symbol">:</a> <a id="3423" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="3428" class="Symbol">→</a> <a id="3430" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="3437" href="Ledger.Dijkstra.Specification.Utxo.html#3412" class="Function">cbalance</a> <a id="3446" href="Ledger.Dijkstra.Specification.Utxo.html#3446" class="Bound">utxo</a> <a id="3451" class="Symbol">=</a> <a id="3453" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="3458" class="Symbol">(</a><a id="3459" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="3467" href="Ledger.Dijkstra.Specification.Utxo.html#3446" class="Bound">utxo</a><a id="3471" class="Symbol">)</a>

  <a id="refScriptsSize"></a><a id="3476" href="Ledger.Dijkstra.Specification.Utxo.html#3476" class="Function">refScriptsSize</a> <a id="3491" class="Symbol">:</a> <a id="3493" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="3496" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="3498" class="Symbol">→</a> <a id="3500" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="3505" class="Symbol">→</a> <a id="3507" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="3511" href="Ledger.Dijkstra.Specification.Utxo.html#3476" class="Function">refScriptsSize</a> <a id="3526" href="Ledger.Dijkstra.Specification.Utxo.html#3526" class="Bound">tx</a> <a id="3529" href="Ledger.Dijkstra.Specification.Utxo.html#3529" class="Bound">utxo</a> <a id="3534" class="Symbol">=</a> <a id="3536" href="Data.Nat.ListAction.html#612" class="Function">sum</a> <a id="3540" class="Symbol">(</a><a id="3541" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3545" href="Ledger.Dijkstra.Specification.Abstract.html#1160" class="Field">scriptSize</a> <a id="3556" class="Symbol">(</a><a id="3557" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="3567" class="Symbol">(</a><a id="3568" href="Ledger.Dijkstra.Specification.Transaction.html#15362" class="Function">referenceScripts</a> <a id="3585" href="Ledger.Dijkstra.Specification.Utxo.html#3526" class="Bound">tx</a> <a id="3588" href="Ledger.Dijkstra.Specification.Utxo.html#3529" class="Bound">utxo</a><a id="3592" class="Symbol">)))</a>

  <a id="minfee"></a><a id="3599" href="Ledger.Dijkstra.Specification.Utxo.html#3599" class="Function">minfee</a> <a id="3606" class="Symbol">:</a> <a id="3608" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a> <a id="3616" class="Symbol">→</a> <a id="3618" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="3621" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="3623" class="Symbol">→</a> <a id="3625" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="3630" class="Symbol">→</a> <a id="3632" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="3639" href="Ledger.Dijkstra.Specification.Utxo.html#3599" class="Function">minfee</a> <a id="3646" href="Ledger.Dijkstra.Specification.Utxo.html#3646" class="Bound">pp</a> <a id="3649" href="Ledger.Dijkstra.Specification.Utxo.html#3649" class="Bound">tx</a> <a id="3652" href="Ledger.Dijkstra.Specification.Utxo.html#3652" class="Bound">utxo</a> <a id="3657" class="Symbol">=</a>  <a id="3660" href="Ledger.Dijkstra.Specification.Utxo.html#3646" class="Bound">pp</a> <a id="3663" class="Symbol">.</a><a id="3664" href="Ledger.Dijkstra.Specification.PParams.html#2309" class="Field">a</a> <a id="3666" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3668" class="Symbol">(</a><a id="3669" href="Ledger.Dijkstra.Specification.Transaction.html#6867" class="Field">SizeOf</a> <a id="3676" href="Ledger.Dijkstra.Specification.Utxo.html#3649" class="Bound">tx</a><a id="3678" class="Symbol">)</a> <a id="3680" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3682" href="Ledger.Dijkstra.Specification.Utxo.html#3646" class="Bound">pp</a> <a id="3685" class="Symbol">.</a><a id="3686" href="Ledger.Dijkstra.Specification.PParams.html#2347" class="Field">b</a>
                       <a id="3711" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3713" href="Ledger.Dijkstra.Specification.Abstract.html#951" class="Field">txScriptFee</a> <a id="3725" class="Symbol">(</a><a id="3726" href="Ledger.Dijkstra.Specification.Utxo.html#3646" class="Bound">pp</a> <a id="3729" class="Symbol">.</a><a id="3730" href="Ledger.Dijkstra.Specification.PParams.html#2640" class="Field">prices</a><a id="3736" class="Symbol">)</a> <a id="3738" class="Symbol">(</a><a id="3739" href="Ledger.Dijkstra.Specification.Utxo.html#631" class="Function">totExUnits</a> <a id="3750" href="Ledger.Dijkstra.Specification.Utxo.html#3649" class="Bound">tx</a><a id="3752" class="Symbol">)</a>
                       <a id="3777" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3779" href="Ledger.Dijkstra.Specification.Fees.html#1004" class="Function">scriptsCost</a> <a id="3791" href="Ledger.Dijkstra.Specification.Utxo.html#3646" class="Bound">pp</a> <a id="3794" class="Symbol">(</a><a id="3795" href="Ledger.Dijkstra.Specification.Utxo.html#3476" class="Function">refScriptsSize</a> <a id="3810" href="Ledger.Dijkstra.Specification.Utxo.html#3649" class="Bound">tx</a> <a id="3813" href="Ledger.Dijkstra.Specification.Utxo.html#3652" class="Bound">utxo</a><a id="3817" class="Symbol">)</a>


<a id="3821" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="3832" href="Ledger.Dijkstra.Specification.Utxo.html#3832" class="Function">HasCoin-UTxO</a> <a id="3845" class="Symbol">:</a> <a id="3847" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="3855" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
  <a id="3862" href="Ledger.Dijkstra.Specification.Utxo.html#3832" class="Function">HasCoin-UTxO</a> <a id="3875" class="Symbol">.</a><a id="3876" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="3884" class="Symbol">=</a> <a id="3886" href="Ledger.Dijkstra.Specification.Utxo.html#3412" class="Function">cbalance</a>


<a id="certDeposit"></a><a id="3897" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="3909" class="Symbol">:</a> <a id="3911" href="Ledger.Dijkstra.Specification.Certs.html#1305" class="Datatype">DCert</a> <a id="3917" class="Symbol">→</a> <a id="3919" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a> <a id="3927" class="Symbol">→</a> <a id="3929" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
<a id="3938" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="3950" class="Symbol">(</a><a id="3951" href="Ledger.Dijkstra.Specification.Certs.html#1326" class="InductiveConstructor">delegate</a> <a id="3960" href="Ledger.Dijkstra.Specification.Utxo.html#3960" class="Bound">c</a> <a id="3962" class="Symbol">_</a> <a id="3964" class="Symbol">_</a> <a id="3966" href="Ledger.Dijkstra.Specification.Utxo.html#3966" class="Bound">v</a><a id="3967" class="Symbol">)</a> <a id="3969" class="Symbol">_</a>   <a id="3973" class="Symbol">=</a> <a id="3975" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3977" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="3995" href="Ledger.Dijkstra.Specification.Utxo.html#3960" class="Bound">c</a> <a id="3997" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3999" href="Ledger.Dijkstra.Specification.Utxo.html#3966" class="Bound">v</a> <a id="4001" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4003" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="4015" class="Symbol">(</a><a id="4016" href="Ledger.Dijkstra.Specification.Certs.html#2016" class="InductiveConstructor">reg</a> <a id="4020" href="Ledger.Dijkstra.Specification.Utxo.html#4020" class="Bound">c</a> <a id="4022" class="Symbol">_)</a>          <a id="4034" href="Ledger.Dijkstra.Specification.Utxo.html#4034" class="Bound">pp</a>  <a id="4038" class="Symbol">=</a> <a id="4040" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4042" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="4060" href="Ledger.Dijkstra.Specification.Utxo.html#4020" class="Bound">c</a> <a id="4062" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4064" href="Ledger.Dijkstra.Specification.Utxo.html#4034" class="Bound">pp</a> <a id="4067" class="Symbol">.</a><a id="4068" href="Ledger.Dijkstra.Specification.PParams.html#2385" class="Field">keyDeposit</a> <a id="4079" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4081" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="4093" class="Symbol">(</a><a id="4094" href="Ledger.Dijkstra.Specification.Certs.html#1447" class="InductiveConstructor">regpool</a> <a id="4102" href="Ledger.Dijkstra.Specification.Utxo.html#4102" class="Bound">kh</a> <a id="4105" class="Symbol">_)</a>     <a id="4112" href="Ledger.Dijkstra.Specification.Utxo.html#4112" class="Bound">pp</a>  <a id="4116" class="Symbol">=</a> <a id="4118" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4120" href="Ledger.Dijkstra.Specification.Certs.html#710" class="InductiveConstructor">PoolDeposit</a> <a id="4132" href="Ledger.Dijkstra.Specification.Utxo.html#4102" class="Bound">kh</a> <a id="4135" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4137" href="Ledger.Dijkstra.Specification.Utxo.html#4112" class="Bound">pp</a> <a id="4140" class="Symbol">.</a><a id="4141" href="Ledger.Dijkstra.Specification.PParams.html#2426" class="Field">poolDeposit</a> <a id="4153" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4155" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="4167" class="Symbol">(</a><a id="4168" href="Ledger.Dijkstra.Specification.Certs.html#1537" class="InductiveConstructor">regdrep</a> <a id="4176" href="Ledger.Dijkstra.Specification.Utxo.html#4176" class="Bound">c</a> <a id="4178" href="Ledger.Dijkstra.Specification.Utxo.html#4178" class="Bound">v</a> <a id="4180" class="Symbol">_)</a>    <a id="4186" class="Symbol">_</a>   <a id="4190" class="Symbol">=</a> <a id="4192" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4194" href="Ledger.Dijkstra.Specification.Certs.html#763" class="InductiveConstructor">DRepDeposit</a> <a id="4206" href="Ledger.Dijkstra.Specification.Utxo.html#4176" class="Bound">c</a> <a id="4208" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4210" href="Ledger.Dijkstra.Specification.Utxo.html#4178" class="Bound">v</a> <a id="4212" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4214" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="CatchallClause Function">certDeposit</a><a id="4225" class="CatchallClause"> </a><a id="4226" class="CatchallClause Symbol">_</a><a id="4227" class="CatchallClause">                  </a><a id="4245" class="CatchallClause Symbol">_</a>   <a id="4249" class="Symbol">=</a> <a id="4251" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="certRefund"></a><a id="4254" href="Ledger.Dijkstra.Specification.Utxo.html#4254" class="Function">certRefund</a> <a id="4265" class="Symbol">:</a> <a id="4267" href="Ledger.Dijkstra.Specification.Certs.html#1305" class="Datatype">DCert</a> <a id="4273" class="Symbol">→</a> <a id="4275" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4277" href="Ledger.Dijkstra.Specification.Certs.html#627" class="Datatype">DepositPurpose</a>
<a id="4292" href="Ledger.Dijkstra.Specification.Utxo.html#4254" class="Function">certRefund</a> <a id="4303" class="Symbol">(</a><a id="4304" href="Ledger.Dijkstra.Specification.Certs.html#1399" class="InductiveConstructor">dereg</a> <a id="4310" href="Ledger.Dijkstra.Specification.Utxo.html#4310" class="Bound">c</a> <a id="4312" class="Symbol">_)</a>      <a id="4320" class="Symbol">=</a> <a id="4322" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4324" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="4342" href="Ledger.Dijkstra.Specification.Utxo.html#4310" class="Bound">c</a> <a id="4344" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4346" href="Ledger.Dijkstra.Specification.Utxo.html#4254" class="Function">certRefund</a> <a id="4357" class="Symbol">(</a><a id="4358" href="Ledger.Dijkstra.Specification.Certs.html#1588" class="InductiveConstructor">deregdrep</a> <a id="4368" href="Ledger.Dijkstra.Specification.Utxo.html#4368" class="Bound">c</a> <a id="4370" class="Symbol">_)</a>  <a id="4374" class="Symbol">=</a> <a id="4376" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4378" href="Ledger.Dijkstra.Specification.Certs.html#763" class="InductiveConstructor">DRepDeposit</a> <a id="4390" href="Ledger.Dijkstra.Specification.Utxo.html#4368" class="Bound">c</a> <a id="4392" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4394" href="Ledger.Dijkstra.Specification.Utxo.html#4254" class="CatchallClause Function">certRefund</a><a id="4404" class="CatchallClause"> </a><a id="4405" class="CatchallClause Symbol">_</a>                <a id="4422" class="Symbol">=</a> <a id="4424" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="4427" class="Keyword">data</a> <a id="ValidCertDeposits"></a><a id="4432" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="4450" class="Symbol">(</a><a id="4451" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4454" class="Symbol">:</a> <a id="4456" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a><a id="4463" class="Symbol">)</a> <a id="4465" class="Symbol">(</a><a id="4466" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="4471" class="Symbol">:</a> <a id="4473" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a><a id="4481" class="Symbol">)</a> <a id="4483" class="Symbol">:</a> <a id="4485" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4490" href="Ledger.Dijkstra.Specification.Certs.html#1305" class="Datatype">DCert</a> <a id="4496" class="Symbol">→</a> <a id="4498" href="Agda.Primitive.html#388" class="Primitive">Set</a>
  <a id="4504" class="Keyword">where</a>
  <a id="ValidCertDeposits.[]"></a><a id="4512" href="Ledger.Dijkstra.Specification.Utxo.html#4512" class="InductiveConstructor">[]</a>         <a id="4523" class="Symbol">:</a> <a id="4525" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="4543" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4546" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="4551" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="ValidCertDeposits.delegate"></a><a id="4556" href="Ledger.Dijkstra.Specification.Utxo.html#4556" class="InductiveConstructor">delegate</a>   <a id="4567" class="Symbol">:</a> <a id="4569" class="Symbol">∀</a> <a id="4571" class="Symbol">{</a><a id="4572" href="Ledger.Dijkstra.Specification.Utxo.html#4572" class="Bound">c</a> <a id="4574" href="Ledger.Dijkstra.Specification.Utxo.html#4574" class="Bound">del</a> <a id="4578" href="Ledger.Dijkstra.Specification.Utxo.html#4578" class="Bound">kh</a> <a id="4581" href="Ledger.Dijkstra.Specification.Utxo.html#4581" class="Bound">v</a> <a id="4583" href="Ledger.Dijkstra.Specification.Utxo.html#4583" class="Bound">certs</a><a id="4588" class="Symbol">}</a>
             <a id="4603" class="Symbol">→</a> <a id="4605" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="4623" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4626" class="Symbol">(</a><a id="4627" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="4632" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="4635" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4637" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="4655" href="Ledger.Dijkstra.Specification.Utxo.html#4572" class="Bound">c</a> <a id="4657" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4659" href="Ledger.Dijkstra.Specification.Utxo.html#4581" class="Bound">v</a> <a id="4661" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4662" class="Symbol">)</a> <a id="4664" href="Ledger.Dijkstra.Specification.Utxo.html#4583" class="Bound">certs</a>
             <a id="4683" class="Symbol">→</a> <a id="4685" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="4703" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4706" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="4711" class="Symbol">(</a><a id="4712" href="Ledger.Dijkstra.Specification.Certs.html#1326" class="InductiveConstructor">delegate</a> <a id="4721" href="Ledger.Dijkstra.Specification.Utxo.html#4572" class="Bound">c</a> <a id="4723" href="Ledger.Dijkstra.Specification.Utxo.html#4574" class="Bound">del</a> <a id="4727" href="Ledger.Dijkstra.Specification.Utxo.html#4578" class="Bound">kh</a> <a id="4730" href="Ledger.Dijkstra.Specification.Utxo.html#4581" class="Bound">v</a> <a id="4732" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4734" href="Ledger.Dijkstra.Specification.Utxo.html#4583" class="Bound">certs</a><a id="4739" class="Symbol">)</a>
  <a id="ValidCertDeposits.regpool"></a><a id="4743" href="Ledger.Dijkstra.Specification.Utxo.html#4743" class="InductiveConstructor">regpool</a>    <a id="4754" class="Symbol">:</a> <a id="4756" class="Symbol">∀</a> <a id="4758" class="Symbol">{</a><a id="4759" href="Ledger.Dijkstra.Specification.Utxo.html#4759" class="Bound">kh</a> <a id="4762" href="Ledger.Dijkstra.Specification.Utxo.html#4762" class="Bound">p</a> <a id="4764" href="Ledger.Dijkstra.Specification.Utxo.html#4764" class="Bound">certs</a><a id="4769" class="Symbol">}</a>
             <a id="4784" class="Symbol">→</a> <a id="4786" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="4804" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4807" class="Symbol">(</a><a id="4808" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="4813" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="4816" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4818" href="Ledger.Dijkstra.Specification.Certs.html#710" class="InductiveConstructor">PoolDeposit</a> <a id="4830" href="Ledger.Dijkstra.Specification.Utxo.html#4759" class="Bound">kh</a> <a id="4833" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4835" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4838" class="Symbol">.</a><a id="4839" href="Ledger.Dijkstra.Specification.PParams.html#2426" class="Field">poolDeposit</a> <a id="4851" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4852" class="Symbol">)</a> <a id="4854" href="Ledger.Dijkstra.Specification.Utxo.html#4764" class="Bound">certs</a>
             <a id="4873" class="Symbol">→</a> <a id="4875" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="4893" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4896" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="4901" class="Symbol">(</a><a id="4902" href="Ledger.Dijkstra.Specification.Certs.html#1447" class="InductiveConstructor">regpool</a> <a id="4910" href="Ledger.Dijkstra.Specification.Utxo.html#4759" class="Bound">kh</a> <a id="4913" href="Ledger.Dijkstra.Specification.Utxo.html#4762" class="Bound">p</a> <a id="4915" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4917" href="Ledger.Dijkstra.Specification.Utxo.html#4764" class="Bound">certs</a><a id="4922" class="Symbol">)</a>
  <a id="ValidCertDeposits.regdrep"></a><a id="4926" href="Ledger.Dijkstra.Specification.Utxo.html#4926" class="InductiveConstructor">regdrep</a>    <a id="4937" class="Symbol">:</a> <a id="4939" class="Symbol">∀</a> <a id="4941" class="Symbol">{</a><a id="4942" href="Ledger.Dijkstra.Specification.Utxo.html#4942" class="Bound">c</a> <a id="4944" href="Ledger.Dijkstra.Specification.Utxo.html#4944" class="Bound">v</a> <a id="4946" href="Ledger.Dijkstra.Specification.Utxo.html#4946" class="Bound">a</a> <a id="4948" href="Ledger.Dijkstra.Specification.Utxo.html#4948" class="Bound">certs</a><a id="4953" class="Symbol">}</a>
             <a id="4968" class="Symbol">→</a> <a id="4970" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="4988" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="4991" class="Symbol">(</a><a id="4992" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="4997" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="5000" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5002" href="Ledger.Dijkstra.Specification.Certs.html#763" class="InductiveConstructor">DRepDeposit</a> <a id="5014" href="Ledger.Dijkstra.Specification.Utxo.html#4942" class="Bound">c</a> <a id="5016" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5018" href="Ledger.Dijkstra.Specification.Utxo.html#4944" class="Bound">v</a> <a id="5020" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5021" class="Symbol">)</a> <a id="5023" href="Ledger.Dijkstra.Specification.Utxo.html#4948" class="Bound">certs</a>
             <a id="5042" class="Symbol">→</a> <a id="5044" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5062" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5065" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5070" class="Symbol">(</a><a id="5071" href="Ledger.Dijkstra.Specification.Certs.html#1537" class="InductiveConstructor">regdrep</a> <a id="5079" href="Ledger.Dijkstra.Specification.Utxo.html#4942" class="Bound">c</a> <a id="5081" href="Ledger.Dijkstra.Specification.Utxo.html#4944" class="Bound">v</a> <a id="5083" href="Ledger.Dijkstra.Specification.Utxo.html#4946" class="Bound">a</a> <a id="5085" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5087" href="Ledger.Dijkstra.Specification.Utxo.html#4948" class="Bound">certs</a><a id="5092" class="Symbol">)</a>
  <a id="ValidCertDeposits.reg"></a><a id="5096" href="Ledger.Dijkstra.Specification.Utxo.html#5096" class="InductiveConstructor">reg</a>        <a id="5107" class="Symbol">:</a> <a id="5109" class="Symbol">∀</a> <a id="5111" class="Symbol">{</a><a id="5112" href="Ledger.Dijkstra.Specification.Utxo.html#5112" class="Bound">c</a> <a id="5114" href="Ledger.Dijkstra.Specification.Utxo.html#5114" class="Bound">v</a> <a id="5116" href="Ledger.Dijkstra.Specification.Utxo.html#5116" class="Bound">certs</a><a id="5121" class="Symbol">}</a>
             <a id="5136" class="Symbol">→</a> <a id="5138" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5156" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5159" class="Symbol">(</a><a id="5160" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5165" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="5168" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5170" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="5188" href="Ledger.Dijkstra.Specification.Utxo.html#5112" class="Bound">c</a> <a id="5190" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5192" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5195" class="Symbol">.</a><a id="5196" href="Ledger.Dijkstra.Specification.PParams.html#2385" class="Field">keyDeposit</a> <a id="5207" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5208" class="Symbol">)</a> <a id="5210" href="Ledger.Dijkstra.Specification.Utxo.html#5116" class="Bound">certs</a>
             <a id="5229" class="Symbol">→</a> <a id="5231" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5249" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5252" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5257" class="Symbol">(</a><a id="5258" href="Ledger.Dijkstra.Specification.Certs.html#2016" class="InductiveConstructor">reg</a> <a id="5262" href="Ledger.Dijkstra.Specification.Utxo.html#5112" class="Bound">c</a> <a id="5264" href="Ledger.Dijkstra.Specification.Utxo.html#5114" class="Bound">v</a> <a id="5266" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5268" href="Ledger.Dijkstra.Specification.Utxo.html#5116" class="Bound">certs</a><a id="5273" class="Symbol">)</a>
  <a id="ValidCertDeposits.dereg"></a><a id="5277" href="Ledger.Dijkstra.Specification.Utxo.html#5277" class="InductiveConstructor">dereg</a>      <a id="5288" class="Symbol">:</a> <a id="5290" class="Symbol">∀</a> <a id="5292" class="Symbol">{</a><a id="5293" href="Ledger.Dijkstra.Specification.Utxo.html#5293" class="Bound">c</a> <a id="5295" href="Ledger.Dijkstra.Specification.Utxo.html#5295" class="Bound">md</a> <a id="5298" href="Ledger.Dijkstra.Specification.Utxo.html#5298" class="Bound">d</a> <a id="5300" href="Ledger.Dijkstra.Specification.Utxo.html#5300" class="Bound">certs</a><a id="5305" class="Symbol">}</a>
             <a id="5320" class="Symbol">→</a> <a id="5322" class="Symbol">(</a><a id="5323" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="5341" href="Ledger.Dijkstra.Specification.Utxo.html#5293" class="Bound">c</a> <a id="5343" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5345" href="Ledger.Dijkstra.Specification.Utxo.html#5298" class="Bound">d</a><a id="5346" class="Symbol">)</a> <a id="5348" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5350" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a>
             <a id="5368" class="Symbol">→</a> <a id="5370" href="Ledger.Dijkstra.Specification.Utxo.html#5295" class="Bound">md</a> <a id="5373" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5375" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5383" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5385" href="Ledger.Dijkstra.Specification.Utxo.html#5295" class="Bound">md</a> <a id="5388" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5390" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5395" href="Ledger.Dijkstra.Specification.Utxo.html#5298" class="Bound">d</a>
             <a id="5410" class="Symbol">→</a> <a id="5412" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5430" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5433" class="Symbol">(</a><a id="5434" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5439" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="5441" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5443" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="5461" href="Ledger.Dijkstra.Specification.Utxo.html#5293" class="Bound">c</a> <a id="5463" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5465" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="5466" class="Symbol">)</a> <a id="5468" href="Ledger.Dijkstra.Specification.Utxo.html#5300" class="Bound">certs</a>
             <a id="5487" class="Symbol">→</a> <a id="5489" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5507" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5510" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5515" class="Symbol">(</a><a id="5516" href="Ledger.Dijkstra.Specification.Certs.html#1399" class="InductiveConstructor">dereg</a> <a id="5522" href="Ledger.Dijkstra.Specification.Utxo.html#5293" class="Bound">c</a> <a id="5524" href="Ledger.Dijkstra.Specification.Utxo.html#5295" class="Bound">md</a> <a id="5527" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5529" href="Ledger.Dijkstra.Specification.Utxo.html#5300" class="Bound">certs</a><a id="5534" class="Symbol">)</a>
  <a id="ValidCertDeposits.deregdrep"></a><a id="5538" href="Ledger.Dijkstra.Specification.Utxo.html#5538" class="InductiveConstructor">deregdrep</a>  <a id="5549" class="Symbol">:</a> <a id="5551" class="Symbol">∀</a> <a id="5553" class="Symbol">{</a><a id="5554" href="Ledger.Dijkstra.Specification.Utxo.html#5554" class="Bound">c</a> <a id="5556" href="Ledger.Dijkstra.Specification.Utxo.html#5556" class="Bound">d</a> <a id="5558" href="Ledger.Dijkstra.Specification.Utxo.html#5558" class="Bound">certs</a><a id="5563" class="Symbol">}</a>
             <a id="5578" class="Symbol">→</a> <a id="5580" class="Symbol">(</a><a id="5581" href="Ledger.Dijkstra.Specification.Certs.html#763" class="InductiveConstructor">DRepDeposit</a> <a id="5593" href="Ledger.Dijkstra.Specification.Utxo.html#5554" class="Bound">c</a> <a id="5595" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5597" href="Ledger.Dijkstra.Specification.Utxo.html#5556" class="Bound">d</a><a id="5598" class="Symbol">)</a> <a id="5600" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5602" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a>
             <a id="5620" class="Symbol">→</a> <a id="5622" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5640" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5643" class="Symbol">(</a><a id="5644" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5649" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="5651" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5653" href="Ledger.Dijkstra.Specification.Certs.html#763" class="InductiveConstructor">DRepDeposit</a> <a id="5665" href="Ledger.Dijkstra.Specification.Utxo.html#5554" class="Bound">c</a> <a id="5667" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5669" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="5670" class="Symbol">)</a> <a id="5672" href="Ledger.Dijkstra.Specification.Utxo.html#5558" class="Bound">certs</a>
             <a id="5691" class="Symbol">→</a> <a id="5693" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5711" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5714" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5719" class="Symbol">(</a><a id="5720" href="Ledger.Dijkstra.Specification.Certs.html#1588" class="InductiveConstructor">deregdrep</a> <a id="5730" href="Ledger.Dijkstra.Specification.Utxo.html#5554" class="Bound">c</a> <a id="5732" href="Ledger.Dijkstra.Specification.Utxo.html#5556" class="Bound">d</a> <a id="5734" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5736" href="Ledger.Dijkstra.Specification.Utxo.html#5558" class="Bound">certs</a><a id="5741" class="Symbol">)</a>
  <a id="ValidCertDeposits.ccreghot"></a><a id="5745" href="Ledger.Dijkstra.Specification.Utxo.html#5745" class="InductiveConstructor">ccreghot</a>   <a id="5756" class="Symbol">:</a> <a id="5758" class="Symbol">∀</a> <a id="5760" class="Symbol">{</a><a id="5761" href="Ledger.Dijkstra.Specification.Utxo.html#5761" class="Bound">c</a> <a id="5763" href="Ledger.Dijkstra.Specification.Utxo.html#5763" class="Bound">v</a> <a id="5765" href="Ledger.Dijkstra.Specification.Utxo.html#5765" class="Bound">certs</a><a id="5770" class="Symbol">}</a>
             <a id="5785" class="Symbol">→</a> <a id="5787" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5805" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5808" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5813" href="Ledger.Dijkstra.Specification.Utxo.html#5765" class="Bound">certs</a>
             <a id="5832" class="Symbol">→</a> <a id="5834" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5852" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5855" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5860" class="Symbol">(</a><a id="5861" href="Ledger.Dijkstra.Specification.Certs.html#1630" class="InductiveConstructor">ccreghot</a> <a id="5870" href="Ledger.Dijkstra.Specification.Utxo.html#5761" class="Bound">c</a> <a id="5872" href="Ledger.Dijkstra.Specification.Utxo.html#5763" class="Bound">v</a> <a id="5874" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5876" href="Ledger.Dijkstra.Specification.Utxo.html#5765" class="Bound">certs</a><a id="5881" class="Symbol">)</a>
  <a id="ValidCertDeposits.retirepool"></a><a id="5885" href="Ledger.Dijkstra.Specification.Utxo.html#5885" class="InductiveConstructor">retirepool</a> <a id="5896" class="Symbol">:</a> <a id="5898" class="Symbol">∀</a> <a id="5900" class="Symbol">{</a><a id="5901" href="Ledger.Dijkstra.Specification.Utxo.html#5901" class="Bound">kh</a> <a id="5904" href="Ledger.Dijkstra.Specification.Utxo.html#5904" class="Bound">e</a> <a id="5906" href="Ledger.Dijkstra.Specification.Utxo.html#5906" class="Bound">certs</a><a id="5911" class="Symbol">}</a>
             <a id="5926" class="Symbol">→</a> <a id="5928" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5946" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5949" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="5954" href="Ledger.Dijkstra.Specification.Utxo.html#5906" class="Bound">certs</a>
             <a id="5973" class="Symbol">→</a> <a id="5975" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="5993" href="Ledger.Dijkstra.Specification.Utxo.html#4451" class="Bound">pp</a> <a id="5996" href="Ledger.Dijkstra.Specification.Utxo.html#4466" class="Bound">deps</a> <a id="6001" class="Symbol">(</a><a id="6002" href="Ledger.Dijkstra.Specification.Certs.html#1497" class="InductiveConstructor">retirepool</a> <a id="6013" href="Ledger.Dijkstra.Specification.Utxo.html#5901" class="Bound">kh</a> <a id="6016" href="Ledger.Dijkstra.Specification.Utxo.html#5904" class="Bound">e</a>  <a id="6019" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6021" href="Ledger.Dijkstra.Specification.Utxo.html#5906" class="Bound">certs</a><a id="6026" class="Symbol">)</a>


<a id="6030" class="Keyword">private</a>
  <a id="validCertDeposits?"></a><a id="6040" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6059" class="Symbol">:</a> <a id="6061" class="Symbol">∀</a> <a id="6063" class="Symbol">{</a><a id="6064" href="Ledger.Dijkstra.Specification.Utxo.html#6064" class="Bound">pp</a><a id="6066" class="Symbol">}</a> <a id="6068" href="Ledger.Dijkstra.Specification.Utxo.html#6068" class="Bound">deps</a> <a id="6073" href="Ledger.Dijkstra.Specification.Utxo.html#6073" class="Bound">certs</a> <a id="6079" class="Symbol">→</a> <a id="6081" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="6085" class="Symbol">(</a><a id="6086" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="6104" href="Ledger.Dijkstra.Specification.Utxo.html#6064" class="Bound">pp</a> <a id="6107" href="Ledger.Dijkstra.Specification.Utxo.html#6068" class="Bound">deps</a> <a id="6112" href="Ledger.Dijkstra.Specification.Utxo.html#6073" class="Bound">certs</a><a id="6117" class="Symbol">)</a>
  <a id="6121" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6140" href="Ledger.Dijkstra.Specification.Utxo.html#6140" class="Bound">deps</a> <a id="6145" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="6148" class="Symbol">=</a> <a id="6150" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6154" href="Ledger.Dijkstra.Specification.Utxo.html#4512" class="InductiveConstructor">[]</a>
  <a id="6159" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6178" href="Ledger.Dijkstra.Specification.Utxo.html#6178" class="Bound">deps</a> <a id="6183" class="Symbol">(</a><a id="6184" href="Ledger.Dijkstra.Specification.Certs.html#1326" class="InductiveConstructor">delegate</a> <a id="6193" class="Symbol">_</a> <a id="6195" class="Symbol">_</a> <a id="6197" class="Symbol">_</a> <a id="6199" class="Symbol">_</a> <a id="6201" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6203" href="Ledger.Dijkstra.Specification.Utxo.html#6203" class="Bound">certs</a><a id="6208" class="Symbol">)</a> <a id="6210" class="Symbol">=</a>
    <a id="6216" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6223" href="Ledger.Dijkstra.Specification.Utxo.html#4556" class="InductiveConstructor">delegate</a> <a id="6232" class="Symbol">(λ</a> <a id="6235" class="Keyword">where</a> <a id="6241" class="Symbol">(</a><a id="6242" href="Ledger.Dijkstra.Specification.Utxo.html#4556" class="InductiveConstructor">delegate</a> <a id="6251" href="Ledger.Dijkstra.Specification.Utxo.html#6251" class="Bound">p</a><a id="6252" class="Symbol">)</a> <a id="6254" class="Symbol">→</a> <a id="6256" href="Ledger.Dijkstra.Specification.Utxo.html#6251" class="Bound">p</a><a id="6257" class="Symbol">)</a> <a id="6259" class="Symbol">(</a><a id="6260" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6279" class="Symbol">_</a> <a id="6281" class="Symbol">_)</a>
  <a id="6286" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6305" href="Ledger.Dijkstra.Specification.Utxo.html#6305" class="Bound">deps</a> <a id="6310" class="Symbol">(</a><a id="6311" href="Ledger.Dijkstra.Specification.Certs.html#1447" class="InductiveConstructor">regpool</a> <a id="6319" class="Symbol">_</a> <a id="6321" class="Symbol">_</a> <a id="6323" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6325" href="Ledger.Dijkstra.Specification.Utxo.html#6325" class="Bound">certs</a><a id="6330" class="Symbol">)</a> <a id="6332" class="Symbol">=</a>
    <a id="6338" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6345" href="Ledger.Dijkstra.Specification.Utxo.html#4743" class="InductiveConstructor">regpool</a> <a id="6353" class="Symbol">(λ</a> <a id="6356" class="Keyword">where</a> <a id="6362" class="Symbol">(</a><a id="6363" href="Ledger.Dijkstra.Specification.Utxo.html#4743" class="InductiveConstructor">regpool</a> <a id="6371" href="Ledger.Dijkstra.Specification.Utxo.html#6371" class="Bound">p</a><a id="6372" class="Symbol">)</a> <a id="6374" class="Symbol">→</a> <a id="6376" href="Ledger.Dijkstra.Specification.Utxo.html#6371" class="Bound">p</a><a id="6377" class="Symbol">)</a> <a id="6379" class="Symbol">(</a><a id="6380" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6399" class="Symbol">_</a> <a id="6401" class="Symbol">_)</a>
  <a id="6406" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6425" href="Ledger.Dijkstra.Specification.Utxo.html#6425" class="Bound">deps</a> <a id="6430" class="Symbol">(</a><a id="6431" href="Ledger.Dijkstra.Specification.Certs.html#1537" class="InductiveConstructor">regdrep</a> <a id="6439" class="Symbol">_</a> <a id="6441" class="Symbol">_</a> <a id="6443" class="Symbol">_</a> <a id="6445" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6447" href="Ledger.Dijkstra.Specification.Utxo.html#6447" class="Bound">certs</a><a id="6452" class="Symbol">)</a> <a id="6454" class="Symbol">=</a>
    <a id="6460" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6467" href="Ledger.Dijkstra.Specification.Utxo.html#4926" class="InductiveConstructor">regdrep</a> <a id="6475" class="Symbol">(λ</a> <a id="6478" class="Keyword">where</a> <a id="6484" class="Symbol">(</a><a id="6485" href="Ledger.Dijkstra.Specification.Utxo.html#4926" class="InductiveConstructor">regdrep</a> <a id="6493" href="Ledger.Dijkstra.Specification.Utxo.html#6493" class="Bound">p</a><a id="6494" class="Symbol">)</a> <a id="6496" class="Symbol">→</a> <a id="6498" href="Ledger.Dijkstra.Specification.Utxo.html#6493" class="Bound">p</a><a id="6499" class="Symbol">)</a> <a id="6501" class="Symbol">(</a><a id="6502" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6521" class="Symbol">_</a> <a id="6523" class="Symbol">_)</a>
  <a id="6528" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6547" href="Ledger.Dijkstra.Specification.Utxo.html#6547" class="Bound">deps</a> <a id="6552" class="Symbol">(</a><a id="6553" href="Ledger.Dijkstra.Specification.Certs.html#1497" class="InductiveConstructor">retirepool</a> <a id="6564" class="Symbol">_</a> <a id="6566" class="Symbol">_</a> <a id="6568" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6570" href="Ledger.Dijkstra.Specification.Utxo.html#6570" class="Bound">certs</a><a id="6575" class="Symbol">)</a> <a id="6577" class="Symbol">=</a>
    <a id="6583" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6590" href="Ledger.Dijkstra.Specification.Utxo.html#5885" class="InductiveConstructor">retirepool</a> <a id="6601" class="Symbol">(λ</a> <a id="6604" class="Keyword">where</a> <a id="6610" class="Symbol">(</a><a id="6611" href="Ledger.Dijkstra.Specification.Utxo.html#5885" class="InductiveConstructor">retirepool</a> <a id="6622" href="Ledger.Dijkstra.Specification.Utxo.html#6622" class="Bound">p</a><a id="6623" class="Symbol">)</a> <a id="6625" class="Symbol">→</a> <a id="6627" href="Ledger.Dijkstra.Specification.Utxo.html#6622" class="Bound">p</a><a id="6628" class="Symbol">)</a> <a id="6630" class="Symbol">(</a><a id="6631" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6650" class="Symbol">_</a> <a id="6652" class="Symbol">_)</a>
  <a id="6657" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6676" href="Ledger.Dijkstra.Specification.Utxo.html#6676" class="Bound">deps</a> <a id="6681" class="Symbol">(</a><a id="6682" href="Ledger.Dijkstra.Specification.Certs.html#1630" class="InductiveConstructor">ccreghot</a> <a id="6691" class="Symbol">_</a> <a id="6693" class="Symbol">_</a> <a id="6695" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6697" href="Ledger.Dijkstra.Specification.Utxo.html#6697" class="Bound">certs</a><a id="6702" class="Symbol">)</a> <a id="6704" class="Symbol">=</a>
    <a id="6710" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6717" href="Ledger.Dijkstra.Specification.Utxo.html#5745" class="InductiveConstructor">ccreghot</a> <a id="6726" class="Symbol">(λ</a> <a id="6729" class="Keyword">where</a> <a id="6735" class="Symbol">(</a><a id="6736" href="Ledger.Dijkstra.Specification.Utxo.html#5745" class="InductiveConstructor">ccreghot</a> <a id="6745" href="Ledger.Dijkstra.Specification.Utxo.html#6745" class="Bound">p</a><a id="6746" class="Symbol">)</a> <a id="6748" class="Symbol">→</a> <a id="6750" href="Ledger.Dijkstra.Specification.Utxo.html#6745" class="Bound">p</a><a id="6751" class="Symbol">)</a> <a id="6753" class="Symbol">(</a><a id="6754" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6773" class="Symbol">_</a> <a id="6775" class="Symbol">_)</a>
  <a id="6780" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6799" href="Ledger.Dijkstra.Specification.Utxo.html#6799" class="Bound">deps</a> <a id="6804" class="Symbol">(</a><a id="6805" href="Ledger.Dijkstra.Specification.Certs.html#2016" class="InductiveConstructor">reg</a> <a id="6809" class="Symbol">_</a> <a id="6811" class="Symbol">_</a> <a id="6813" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6815" href="Ledger.Dijkstra.Specification.Utxo.html#6815" class="Bound">certs</a><a id="6820" class="Symbol">)</a> <a id="6822" class="Symbol">=</a>
    <a id="6828" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6835" href="Ledger.Dijkstra.Specification.Utxo.html#5096" class="InductiveConstructor">reg</a> <a id="6839" class="Symbol">(λ</a> <a id="6842" class="Keyword">where</a> <a id="6848" class="Symbol">(</a><a id="6849" href="Ledger.Dijkstra.Specification.Utxo.html#5096" class="InductiveConstructor">reg</a> <a id="6853" href="Ledger.Dijkstra.Specification.Utxo.html#6853" class="Bound">p</a><a id="6854" class="Symbol">)</a> <a id="6856" class="Symbol">→</a> <a id="6858" href="Ledger.Dijkstra.Specification.Utxo.html#6853" class="Bound">p</a><a id="6859" class="Symbol">)</a> <a id="6861" class="Symbol">(</a><a id="6862" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6881" class="Symbol">_</a> <a id="6883" class="Symbol">_)</a>
  <a id="6888" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="6907" href="Ledger.Dijkstra.Specification.Utxo.html#6907" class="Bound">deps</a> <a id="6912" class="Symbol">(</a><a id="6913" href="Ledger.Dijkstra.Specification.Certs.html#1399" class="InductiveConstructor">dereg</a> <a id="6919" href="Ledger.Dijkstra.Specification.Utxo.html#6919" class="Bound">c</a> <a id="6921" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="6929" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6931" href="Ledger.Dijkstra.Specification.Utxo.html#6931" class="Bound">certs</a><a id="6936" class="Symbol">)</a> <a id="6938" class="Keyword">with</a> <a id="6943" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="6945" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="6963" href="Ledger.Dijkstra.Specification.Utxo.html#6919" class="Bound">c</a> <a id="6965" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="6967" href="Class.IsSet.html#916" class="Function">dom</a> <a id="6971" href="Ledger.Dijkstra.Specification.Utxo.html#6907" class="Bound">deps</a> <a id="6976" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="6980" class="Symbol">...</a> <a id="6984" class="Symbol">|</a> <a id="6986" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6990" href="Ledger.Dijkstra.Specification.Utxo.html#6990" class="Bound">p</a> <a id="6992" class="Symbol">=</a> <a id="6994" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="7001" class="Symbol">(</a><a id="7002" href="Ledger.Dijkstra.Specification.Utxo.html#5277" class="InductiveConstructor">dereg</a> <a id="7008" class="Symbol">(</a><a id="7009" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="7015" class="Symbol">(</a><a id="7016" href="Function.Bundles.html#4832" class="Field">Equivalence.from</a> <a id="7033" href="Axiom.Set.Rel.html#2687" class="Function">dom∈</a> <a id="7038" href="Ledger.Dijkstra.Specification.Utxo.html#6990" class="Bound">p</a><a id="7039" class="Symbol">))</a> <a id="7042" class="Symbol">(</a><a id="7043" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7048" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7052" class="Symbol">))</a> <a id="7055" class="Symbol">(λ</a> <a id="7058" class="Symbol">{</a> <a id="7060" class="Symbol">(</a><a id="7061" href="Ledger.Dijkstra.Specification.Utxo.html#5277" class="InductiveConstructor">dereg</a> <a id="7067" class="Symbol">_</a> <a id="7069" class="Symbol">_</a> <a id="7071" href="Ledger.Dijkstra.Specification.Utxo.html#7071" class="Bound">p</a><a id="7072" class="Symbol">)</a> <a id="7074" class="Symbol">→</a> <a id="7076" href="Ledger.Dijkstra.Specification.Utxo.html#7071" class="Bound">p</a> <a id="7078" class="Symbol">})</a> <a id="7081" class="Symbol">(</a><a id="7082" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="7101" class="Symbol">_</a> <a id="7103" class="Symbol">_)</a>
  <a id="7108" class="Symbol">...</a> <a id="7112" class="Symbol">|</a> <a id="7114" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="7117" href="Ledger.Dijkstra.Specification.Utxo.html#7117" class="Bound">¬p</a> <a id="7120" class="Symbol">=</a> <a id="7122" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="7125" class="Symbol">λ</a> <a id="7127" class="Symbol">{</a> <a id="7129" class="Symbol">(</a><a id="7130" href="Ledger.Dijkstra.Specification.Utxo.html#5277" class="InductiveConstructor">dereg</a> <a id="7136" href="Ledger.Dijkstra.Specification.Utxo.html#7136" class="Bound">x</a> <a id="7138" class="Symbol">_</a> <a id="7140" class="Symbol">_)</a> <a id="7143" class="Symbol">→</a> <a id="7145" href="Ledger.Dijkstra.Specification.Utxo.html#7117" class="Bound">¬p</a> <a id="7148" class="Symbol">(</a><a id="7149" href="Function.Bundles.html#4808" class="Field">Equivalence.to</a> <a id="7164" href="Axiom.Set.Rel.html#2687" class="Function">dom∈</a> <a id="7169" class="Symbol">(_</a> <a id="7172" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7174" href="Ledger.Dijkstra.Specification.Utxo.html#7136" class="Bound">x</a><a id="7175" class="Symbol">))</a> <a id="7178" class="Symbol">}</a>
  <a id="7182" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="7201" href="Ledger.Dijkstra.Specification.Utxo.html#7201" class="Bound">deps</a> <a id="7206" class="Symbol">(</a><a id="7207" href="Ledger.Dijkstra.Specification.Certs.html#1399" class="InductiveConstructor">dereg</a> <a id="7213" href="Ledger.Dijkstra.Specification.Utxo.html#7213" class="Bound">c</a> <a id="7215" class="Symbol">(</a><a id="7216" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7221" href="Ledger.Dijkstra.Specification.Utxo.html#7221" class="Bound">d</a><a id="7222" class="Symbol">)</a> <a id="7224" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7226" href="Ledger.Dijkstra.Specification.Utxo.html#7226" class="Bound">certs</a><a id="7231" class="Symbol">)</a> <a id="7233" class="Keyword">with</a> <a id="7238" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="7240" class="Symbol">(</a><a id="7241" href="Ledger.Dijkstra.Specification.Certs.html#657" class="InductiveConstructor">CredentialDeposit</a> <a id="7259" href="Ledger.Dijkstra.Specification.Utxo.html#7213" class="Bound">c</a> <a id="7261" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7263" href="Ledger.Dijkstra.Specification.Utxo.html#7221" class="Bound">d</a><a id="7264" class="Symbol">)</a> <a id="7266" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7268" href="Ledger.Dijkstra.Specification.Utxo.html#7201" class="Bound">deps</a> <a id="7273" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="7277" class="Symbol">...</a> <a id="7281" class="Symbol">|</a> <a id="7283" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="7287" href="Ledger.Dijkstra.Specification.Utxo.html#7287" class="Bound">p</a> <a id="7289" class="Symbol">=</a> <a id="7291" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="7298" class="Symbol">(</a><a id="7299" href="Ledger.Dijkstra.Specification.Utxo.html#5277" class="InductiveConstructor">dereg</a> <a id="7305" href="Ledger.Dijkstra.Specification.Utxo.html#7287" class="Bound">p</a> <a id="7307" class="Symbol">(</a><a id="7308" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7313" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7317" class="Symbol">))</a> <a id="7320" class="Symbol">(λ</a> <a id="7323" class="Symbol">{</a> <a id="7325" class="Symbol">(</a><a id="7326" href="Ledger.Dijkstra.Specification.Utxo.html#5277" class="InductiveConstructor">dereg</a> <a id="7332" class="Symbol">_</a> <a id="7334" class="Symbol">_</a> <a id="7336" href="Ledger.Dijkstra.Specification.Utxo.html#7336" class="Bound">p</a><a id="7337" class="Symbol">)</a> <a id="7339" class="Symbol">→</a> <a id="7341" href="Ledger.Dijkstra.Specification.Utxo.html#7336" class="Bound">p</a> <a id="7343" class="Symbol">})</a> <a id="7346" class="Symbol">(</a><a id="7347" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="7366" class="Symbol">_</a> <a id="7368" class="Symbol">_)</a>
  <a id="7373" class="Symbol">...</a> <a id="7377" class="Symbol">|</a> <a id="7379" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="7382" href="Ledger.Dijkstra.Specification.Utxo.html#7382" class="Bound">¬p</a> <a id="7385" class="Symbol">=</a> <a id="7387" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="7390" class="Symbol">λ</a> <a id="7392" class="Symbol">{</a> <a id="7394" class="Symbol">(</a><a id="7395" href="Ledger.Dijkstra.Specification.Utxo.html#5277" class="InductiveConstructor">dereg</a> <a id="7401" href="Ledger.Dijkstra.Specification.Utxo.html#7401" class="Bound">x</a> <a id="7403" class="Symbol">(</a><a id="7404" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7409" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7413" class="Symbol">)</a> <a id="7415" class="Symbol">_)</a> <a id="7418" class="Symbol">→</a> <a id="7420" href="Ledger.Dijkstra.Specification.Utxo.html#7382" class="Bound">¬p</a> <a id="7423" href="Ledger.Dijkstra.Specification.Utxo.html#7401" class="Bound">x</a> <a id="7425" class="Symbol">}</a>
  <a id="7429" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="7448" href="Ledger.Dijkstra.Specification.Utxo.html#7448" class="Bound">deps</a> <a id="7453" class="Symbol">(</a><a id="7454" href="Ledger.Dijkstra.Specification.Certs.html#1588" class="InductiveConstructor">deregdrep</a> <a id="7464" href="Ledger.Dijkstra.Specification.Utxo.html#7464" class="Bound">c</a> <a id="7466" href="Ledger.Dijkstra.Specification.Utxo.html#7466" class="Bound">d</a> <a id="7468" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7470" href="Ledger.Dijkstra.Specification.Utxo.html#7470" class="Bound">certs</a><a id="7475" class="Symbol">)</a> <a id="7477" class="Keyword">with</a> <a id="7482" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="7484" class="Symbol">(</a><a id="7485" href="Ledger.Dijkstra.Specification.Certs.html#763" class="InductiveConstructor">DRepDeposit</a> <a id="7497" href="Ledger.Dijkstra.Specification.Utxo.html#7464" class="Bound">c</a> <a id="7499" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7501" href="Ledger.Dijkstra.Specification.Utxo.html#7466" class="Bound">d</a><a id="7502" class="Symbol">)</a> <a id="7504" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7506" href="Ledger.Dijkstra.Specification.Utxo.html#7448" class="Bound">deps</a> <a id="7511" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="7515" class="Symbol">...</a> <a id="7519" class="Symbol">|</a> <a id="7521" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="7525" href="Ledger.Dijkstra.Specification.Utxo.html#7525" class="Bound">p</a> <a id="7527" class="Symbol">=</a> <a id="7529" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="7536" class="Symbol">(</a><a id="7537" href="Ledger.Dijkstra.Specification.Utxo.html#5538" class="InductiveConstructor">deregdrep</a> <a id="7547" href="Ledger.Dijkstra.Specification.Utxo.html#7525" class="Bound">p</a><a id="7548" class="Symbol">)</a>  <a id="7551" class="Symbol">(λ</a> <a id="7554" class="Keyword">where</a> <a id="7560" class="Symbol">(</a><a id="7561" href="Ledger.Dijkstra.Specification.Utxo.html#5538" class="InductiveConstructor">deregdrep</a> <a id="7571" class="Symbol">_</a> <a id="7573" href="Ledger.Dijkstra.Specification.Utxo.html#7573" class="Bound">v</a><a id="7574" class="Symbol">)</a> <a id="7576" class="Symbol">→</a> <a id="7578" href="Ledger.Dijkstra.Specification.Utxo.html#7573" class="Bound">v</a><a id="7579" class="Symbol">)</a> <a id="7581" class="Symbol">(</a><a id="7582" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="7601" class="Symbol">_</a> <a id="7603" class="Symbol">_)</a>
  <a id="7608" class="Symbol">...</a> <a id="7612" class="Symbol">|</a> <a id="7614" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="7617" href="Ledger.Dijkstra.Specification.Utxo.html#7617" class="Bound">¬p</a> <a id="7620" class="Symbol">=</a> <a id="7622" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="7625" class="Symbol">(λ</a> <a id="7628" class="Keyword">where</a> <a id="7634" class="Symbol">(</a><a id="7635" href="Ledger.Dijkstra.Specification.Utxo.html#5538" class="InductiveConstructor">deregdrep</a> <a id="7645" href="Ledger.Dijkstra.Specification.Utxo.html#7645" class="Bound">p</a> <a id="7647" class="Symbol">_)</a> <a id="7650" class="Symbol">→</a> <a id="7652" href="Ledger.Dijkstra.Specification.Utxo.html#7617" class="Bound">¬p</a> <a id="7655" href="Ledger.Dijkstra.Specification.Utxo.html#7645" class="Bound">p</a><a id="7656" class="Symbol">)</a>

<a id="7659" class="Keyword">instance</a>
  <a id="Dec-ValidCertDeposits"></a><a id="7670" href="Ledger.Dijkstra.Specification.Utxo.html#7670" class="Function">Dec-ValidCertDeposits</a> <a id="7692" class="Symbol">:</a> <a id="7694" class="Symbol">∀</a> <a id="7696" class="Symbol">{</a><a id="7697" href="Ledger.Dijkstra.Specification.Utxo.html#7697" class="Bound">pp</a> <a id="7700" href="Ledger.Dijkstra.Specification.Utxo.html#7700" class="Bound">deps</a> <a id="7705" href="Ledger.Dijkstra.Specification.Utxo.html#7705" class="Bound">certs</a><a id="7710" class="Symbol">}</a> <a id="7712" class="Symbol">→</a> <a id="7714" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="7732" href="Ledger.Dijkstra.Specification.Utxo.html#7697" class="Bound">pp</a> <a id="7735" href="Ledger.Dijkstra.Specification.Utxo.html#7700" class="Bound">deps</a> <a id="7740" href="Ledger.Dijkstra.Specification.Utxo.html#7705" class="Bound">certs</a> <a id="7746" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
  <a id="7750" href="Ledger.Dijkstra.Specification.Utxo.html#7670" class="Function">Dec-ValidCertDeposits</a> <a id="7772" class="Symbol">=</a> <a id="7774" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="7776" class="Symbol">(</a><a id="7777" href="Ledger.Dijkstra.Specification.Utxo.html#6040" class="Function">validCertDeposits?</a> <a id="7796" class="Symbol">_</a> <a id="7798" class="Symbol">_)</a>


<a id="updateCertDeposits"></a><a id="7803" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a>  <a id="7823" class="Symbol">:</a> <a id="7825" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a> <a id="7833" class="Symbol">→</a> <a id="7835" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7840" href="Ledger.Dijkstra.Specification.Certs.html#1305" class="Datatype">DCert</a> <a id="7846" class="Symbol">→</a> <a id="7848" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a> <a id="7857" class="Symbol">→</a> <a id="7859" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
<a id="7868" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="7887" href="Ledger.Dijkstra.Specification.Utxo.html#7887" class="Bound">pp</a> <a id="7890" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="7893" href="Ledger.Dijkstra.Specification.Utxo.html#7893" class="Bound">deposits</a> <a id="7902" class="Symbol">=</a> <a id="7904" href="Ledger.Dijkstra.Specification.Utxo.html#7893" class="Bound">deposits</a>
<a id="7913" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="7932" href="Ledger.Dijkstra.Specification.Utxo.html#7932" class="Bound">pp</a> <a id="7935" class="Symbol">(</a><a id="7936" href="Ledger.Dijkstra.Specification.Certs.html#2016" class="InductiveConstructor">reg</a> <a id="7940" href="Ledger.Dijkstra.Specification.Utxo.html#7940" class="Bound">c</a> <a id="7942" href="Ledger.Dijkstra.Specification.Utxo.html#7942" class="Bound">v</a> <a id="7944" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7946" href="Ledger.Dijkstra.Specification.Utxo.html#7946" class="Bound">certs</a><a id="7951" class="Symbol">)</a> <a id="7953" href="Ledger.Dijkstra.Specification.Utxo.html#7953" class="Bound">deposits</a>
  <a id="7964" class="Symbol">=</a> <a id="7966" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="7985" href="Ledger.Dijkstra.Specification.Utxo.html#7932" class="Bound">pp</a> <a id="7988" href="Ledger.Dijkstra.Specification.Utxo.html#7946" class="Bound">certs</a> <a id="7994" class="Symbol">(</a><a id="7995" href="Ledger.Dijkstra.Specification.Utxo.html#7953" class="Bound">deposits</a> <a id="8004" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="8007" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="8019" class="Symbol">(</a><a id="8020" href="Ledger.Dijkstra.Specification.Certs.html#2016" class="InductiveConstructor">reg</a> <a id="8024" href="Ledger.Dijkstra.Specification.Utxo.html#7940" class="Bound">c</a> <a id="8026" href="Ledger.Dijkstra.Specification.Utxo.html#7942" class="Bound">v</a><a id="8027" class="Symbol">)</a> <a id="8029" href="Ledger.Dijkstra.Specification.Utxo.html#7932" class="Bound">pp</a><a id="8031" class="Symbol">)</a>
<a id="8033" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8052" href="Ledger.Dijkstra.Specification.Utxo.html#8052" class="Bound">pp</a> <a id="8055" class="Symbol">(</a><a id="8056" href="Ledger.Dijkstra.Specification.Certs.html#1326" class="InductiveConstructor">delegate</a> <a id="8065" href="Ledger.Dijkstra.Specification.Utxo.html#8065" class="Bound">c</a> <a id="8067" href="Ledger.Dijkstra.Specification.Utxo.html#8067" class="Bound">vd</a> <a id="8070" href="Ledger.Dijkstra.Specification.Utxo.html#8070" class="Bound">khs</a> <a id="8074" href="Ledger.Dijkstra.Specification.Utxo.html#8074" class="Bound">v</a> <a id="8076" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8078" href="Ledger.Dijkstra.Specification.Utxo.html#8078" class="Bound">certs</a><a id="8083" class="Symbol">)</a> <a id="8085" href="Ledger.Dijkstra.Specification.Utxo.html#8085" class="Bound">deposits</a>
  <a id="8096" class="Symbol">=</a> <a id="8098" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8117" href="Ledger.Dijkstra.Specification.Utxo.html#8052" class="Bound">pp</a> <a id="8120" href="Ledger.Dijkstra.Specification.Utxo.html#8078" class="Bound">certs</a> <a id="8126" class="Symbol">(</a><a id="8127" href="Ledger.Dijkstra.Specification.Utxo.html#8085" class="Bound">deposits</a> <a id="8136" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="8139" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="8151" class="Symbol">(</a><a id="8152" href="Ledger.Dijkstra.Specification.Certs.html#1326" class="InductiveConstructor">delegate</a> <a id="8161" href="Ledger.Dijkstra.Specification.Utxo.html#8065" class="Bound">c</a> <a id="8163" href="Ledger.Dijkstra.Specification.Utxo.html#8067" class="Bound">vd</a> <a id="8166" href="Ledger.Dijkstra.Specification.Utxo.html#8070" class="Bound">khs</a> <a id="8170" href="Ledger.Dijkstra.Specification.Utxo.html#8074" class="Bound">v</a><a id="8171" class="Symbol">)</a> <a id="8173" href="Ledger.Dijkstra.Specification.Utxo.html#8052" class="Bound">pp</a><a id="8175" class="Symbol">)</a>
<a id="8177" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8196" href="Ledger.Dijkstra.Specification.Utxo.html#8196" class="Bound">pp</a> <a id="8199" class="Symbol">(</a><a id="8200" href="Ledger.Dijkstra.Specification.Certs.html#1447" class="InductiveConstructor">regpool</a> <a id="8208" href="Ledger.Dijkstra.Specification.Utxo.html#8208" class="Bound">kh</a> <a id="8211" href="Ledger.Dijkstra.Specification.Utxo.html#8211" class="Bound">p</a> <a id="8213" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8215" href="Ledger.Dijkstra.Specification.Utxo.html#8215" class="Bound">certs</a><a id="8220" class="Symbol">)</a> <a id="8222" href="Ledger.Dijkstra.Specification.Utxo.html#8222" class="Bound">deposits</a>
  <a id="8233" class="Comment">-- pool deposits are not added a second time if they are already present</a>
  <a id="8308" class="Comment">-- (reregistrations or duplicate certificates).</a>
  <a id="8358" class="Symbol">=</a> <a id="8360" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8379" href="Ledger.Dijkstra.Specification.Utxo.html#8196" class="Bound">pp</a> <a id="8382" href="Ledger.Dijkstra.Specification.Utxo.html#8215" class="Bound">certs</a> <a id="8388" class="Symbol">(</a><a id="8389" href="Ledger.Dijkstra.Specification.Utxo.html#8222" class="Bound">deposits</a> <a id="8398" href="Axiom.Set.Map.html#7640" class="Function Operator">∪ˡ</a> <a id="8401" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="8413" class="Symbol">(</a><a id="8414" href="Ledger.Dijkstra.Specification.Certs.html#1447" class="InductiveConstructor">regpool</a> <a id="8422" href="Ledger.Dijkstra.Specification.Utxo.html#8208" class="Bound">kh</a> <a id="8425" href="Ledger.Dijkstra.Specification.Utxo.html#8211" class="Bound">p</a><a id="8426" class="Symbol">)</a> <a id="8428" href="Ledger.Dijkstra.Specification.Utxo.html#8196" class="Bound">pp</a><a id="8430" class="Symbol">)</a>
<a id="8432" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8451" href="Ledger.Dijkstra.Specification.Utxo.html#8451" class="Bound">pp</a> <a id="8454" class="Symbol">(</a><a id="8455" href="Ledger.Dijkstra.Specification.Certs.html#1537" class="InductiveConstructor">regdrep</a> <a id="8463" href="Ledger.Dijkstra.Specification.Utxo.html#8463" class="Bound">c</a> <a id="8465" href="Ledger.Dijkstra.Specification.Utxo.html#8465" class="Bound">v</a> <a id="8467" href="Ledger.Dijkstra.Specification.Utxo.html#8467" class="Bound">a</a> <a id="8469" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8471" href="Ledger.Dijkstra.Specification.Utxo.html#8471" class="Bound">certs</a><a id="8476" class="Symbol">)</a> <a id="8478" href="Ledger.Dijkstra.Specification.Utxo.html#8478" class="Bound">deposits</a>
  <a id="8489" class="Symbol">=</a> <a id="8491" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8510" href="Ledger.Dijkstra.Specification.Utxo.html#8451" class="Bound">pp</a> <a id="8513" href="Ledger.Dijkstra.Specification.Utxo.html#8471" class="Bound">certs</a> <a id="8519" class="Symbol">(</a><a id="8520" href="Ledger.Dijkstra.Specification.Utxo.html#8478" class="Bound">deposits</a> <a id="8529" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="8532" href="Ledger.Dijkstra.Specification.Utxo.html#3897" class="Function">certDeposit</a> <a id="8544" class="Symbol">(</a><a id="8545" href="Ledger.Dijkstra.Specification.Certs.html#1537" class="InductiveConstructor">regdrep</a> <a id="8553" href="Ledger.Dijkstra.Specification.Utxo.html#8463" class="Bound">c</a> <a id="8555" href="Ledger.Dijkstra.Specification.Utxo.html#8465" class="Bound">v</a> <a id="8557" href="Ledger.Dijkstra.Specification.Utxo.html#8467" class="Bound">a</a><a id="8558" class="Symbol">)</a> <a id="8560" href="Ledger.Dijkstra.Specification.Utxo.html#8451" class="Bound">pp</a><a id="8562" class="Symbol">)</a>
<a id="8564" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8583" href="Ledger.Dijkstra.Specification.Utxo.html#8583" class="Bound">pp</a> <a id="8586" class="Symbol">(</a><a id="8587" href="Ledger.Dijkstra.Specification.Certs.html#1399" class="InductiveConstructor">dereg</a> <a id="8593" href="Ledger.Dijkstra.Specification.Utxo.html#8593" class="Bound">c</a> <a id="8595" href="Ledger.Dijkstra.Specification.Utxo.html#8595" class="Bound">v</a> <a id="8597" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8599" href="Ledger.Dijkstra.Specification.Utxo.html#8599" class="Bound">certs</a><a id="8604" class="Symbol">)</a> <a id="8606" href="Ledger.Dijkstra.Specification.Utxo.html#8606" class="Bound">deposits</a>
  <a id="8617" class="Symbol">=</a> <a id="8619" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8638" href="Ledger.Dijkstra.Specification.Utxo.html#8583" class="Bound">pp</a> <a id="8641" href="Ledger.Dijkstra.Specification.Utxo.html#8599" class="Bound">certs</a> <a id="8647" class="Symbol">(</a><a id="8648" href="Ledger.Dijkstra.Specification.Utxo.html#8606" class="Bound">deposits</a> <a id="8657" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="8659" href="Ledger.Dijkstra.Specification.Utxo.html#4254" class="Function">certRefund</a> <a id="8670" class="Symbol">(</a><a id="8671" href="Ledger.Dijkstra.Specification.Certs.html#1399" class="InductiveConstructor">dereg</a> <a id="8677" href="Ledger.Dijkstra.Specification.Utxo.html#8593" class="Bound">c</a> <a id="8679" href="Ledger.Dijkstra.Specification.Utxo.html#8595" class="Bound">v</a><a id="8680" class="Symbol">)</a><a id="8681" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="8682" class="Symbol">)</a>
<a id="8684" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8703" href="Ledger.Dijkstra.Specification.Utxo.html#8703" class="Bound">pp</a> <a id="8706" class="Symbol">(</a><a id="8707" href="Ledger.Dijkstra.Specification.Certs.html#1588" class="InductiveConstructor">deregdrep</a> <a id="8717" href="Ledger.Dijkstra.Specification.Utxo.html#8717" class="Bound">c</a> <a id="8719" href="Ledger.Dijkstra.Specification.Utxo.html#8719" class="Bound">v</a> <a id="8721" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8723" href="Ledger.Dijkstra.Specification.Utxo.html#8723" class="Bound">certs</a><a id="8728" class="Symbol">)</a> <a id="8730" href="Ledger.Dijkstra.Specification.Utxo.html#8730" class="Bound">deposits</a>
  <a id="8741" class="Symbol">=</a> <a id="8743" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8762" href="Ledger.Dijkstra.Specification.Utxo.html#8703" class="Bound">pp</a> <a id="8765" href="Ledger.Dijkstra.Specification.Utxo.html#8723" class="Bound">certs</a> <a id="8771" class="Symbol">(</a><a id="8772" href="Ledger.Dijkstra.Specification.Utxo.html#8730" class="Bound">deposits</a> <a id="8781" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="8783" href="Ledger.Dijkstra.Specification.Utxo.html#4254" class="Function">certRefund</a> <a id="8794" class="Symbol">(</a><a id="8795" href="Ledger.Dijkstra.Specification.Certs.html#1588" class="InductiveConstructor">deregdrep</a> <a id="8805" href="Ledger.Dijkstra.Specification.Utxo.html#8717" class="Bound">c</a> <a id="8807" href="Ledger.Dijkstra.Specification.Utxo.html#8719" class="Bound">v</a><a id="8808" class="Symbol">)</a><a id="8809" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="8810" class="Symbol">)</a>
<a id="8812" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="CatchallClause Function">updateCertDeposits</a><a id="8830" class="CatchallClause"> </a><a id="8831" href="Ledger.Dijkstra.Specification.Utxo.html#8831" class="CatchallClause Bound">pp</a><a id="8833" class="CatchallClause"> </a><a id="8834" class="CatchallClause Symbol">(_</a><a id="8836" class="CatchallClause"> </a><a id="8837" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="8838" class="CatchallClause"> </a><a id="8839" href="Ledger.Dijkstra.Specification.Utxo.html#8839" class="CatchallClause Bound">certs</a><a id="8844" class="CatchallClause Symbol">)</a><a id="8845" class="CatchallClause"> </a><a id="8846" href="Ledger.Dijkstra.Specification.Utxo.html#8846" class="CatchallClause Bound">deposits</a>
  <a id="8857" class="Symbol">=</a> <a id="8859" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="8878" href="Ledger.Dijkstra.Specification.Utxo.html#8831" class="Bound">pp</a> <a id="8881" href="Ledger.Dijkstra.Specification.Utxo.html#8839" class="Bound">certs</a> <a id="8887" href="Ledger.Dijkstra.Specification.Utxo.html#8846" class="Bound">deposits</a>

<a id="updateProposalDeposits"></a><a id="8897" href="Ledger.Dijkstra.Specification.Utxo.html#8897" class="Function">updateProposalDeposits</a> <a id="8920" class="Symbol">:</a> <a id="8922" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8927" href="Ledger.Dijkstra.Specification.Gov.Actions.html#2849" class="Record">GovProposal</a> <a id="8939" class="Symbol">→</a> <a id="8941" href="Ledger.Dijkstra.Specification.Transaction.html#1329" class="Field">TxId</a> <a id="8946" class="Symbol">→</a> <a id="8948" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a> <a id="8953" class="Symbol">→</a> <a id="8955" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a> <a id="8964" class="Symbol">→</a> <a id="8966" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
<a id="8975" href="Ledger.Dijkstra.Specification.Utxo.html#8897" class="Function">updateProposalDeposits</a> <a id="8998" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="9008" class="Symbol">_</a>     <a id="9014" class="Symbol">_</a>      <a id="9021" href="Ledger.Dijkstra.Specification.Utxo.html#9021" class="Bound">deposits</a>  <a id="9031" class="Symbol">=</a> <a id="9033" href="Ledger.Dijkstra.Specification.Utxo.html#9021" class="Bound">deposits</a>
<a id="9042" href="Ledger.Dijkstra.Specification.Utxo.html#8897" class="Function">updateProposalDeposits</a> <a id="9065" class="Symbol">(_</a> <a id="9068" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9070" href="Ledger.Dijkstra.Specification.Utxo.html#9070" class="Bound">ps</a><a id="9072" class="Symbol">)</a>  <a id="9075" href="Ledger.Dijkstra.Specification.Utxo.html#9075" class="Bound">txid</a>  <a id="9081" href="Ledger.Dijkstra.Specification.Utxo.html#9081" class="Bound">gaDep</a>  <a id="9088" href="Ledger.Dijkstra.Specification.Utxo.html#9088" class="Bound">deposits</a>  <a id="9098" class="Symbol">=</a>
  <a id="9102" href="Ledger.Dijkstra.Specification.Utxo.html#8897" class="Function">updateProposalDeposits</a> <a id="9125" href="Ledger.Dijkstra.Specification.Utxo.html#9070" class="Bound">ps</a> <a id="9128" href="Ledger.Dijkstra.Specification.Utxo.html#9075" class="Bound">txid</a> <a id="9133" href="Ledger.Dijkstra.Specification.Utxo.html#9081" class="Bound">gaDep</a> <a id="9139" href="Ledger.Dijkstra.Specification.Utxo.html#9088" class="Bound">deposits</a>
  <a id="9150" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="9153" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="9155" href="Ledger.Dijkstra.Specification.Certs.html#816" class="InductiveConstructor">GovActionDeposit</a> <a id="9172" class="Symbol">(</a><a id="9173" href="Ledger.Dijkstra.Specification.Utxo.html#9075" class="Bound">txid</a> <a id="9178" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9180" href="Data.List.Base.html#4746" class="Function">length</a> <a id="9187" href="Ledger.Dijkstra.Specification.Utxo.html#9070" class="Bound">ps</a><a id="9189" class="Symbol">)</a> <a id="9191" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9193" href="Ledger.Dijkstra.Specification.Utxo.html#9081" class="Bound">gaDep</a> <a id="9199" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>

<a id="updateDeposits"></a><a id="9202" href="Ledger.Dijkstra.Specification.Utxo.html#9202" class="Function">updateDeposits</a> <a id="9217" class="Symbol">:</a> <a id="9219" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a> <a id="9227" class="Symbol">→</a> <a id="9229" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="9232" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="9234" class="Symbol">→</a> <a id="9236" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a> <a id="9245" class="Symbol">→</a> <a id="9247" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
<a id="9256" href="Ledger.Dijkstra.Specification.Utxo.html#9202" class="Function">updateDeposits</a> <a id="9271" href="Ledger.Dijkstra.Specification.Utxo.html#9271" class="Bound">pp</a> <a id="9274" href="Ledger.Dijkstra.Specification.Utxo.html#9274" class="Bound">tx</a> <a id="9277" class="Symbol">=</a>
  <a id="9281" href="Ledger.Dijkstra.Specification.Utxo.html#7803" class="Function">updateCertDeposits</a> <a id="9300" href="Ledger.Dijkstra.Specification.Utxo.html#9271" class="Bound">pp</a> <a id="9303" class="Symbol">(</a><a id="9304" href="Ledger.Dijkstra.Specification.Transaction.html#7637" class="Field">DCertsOf</a> <a id="9313" href="Ledger.Dijkstra.Specification.Utxo.html#9274" class="Bound">tx</a><a id="9315" class="Symbol">)</a>
  <a id="9319" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="9321" href="Ledger.Dijkstra.Specification.Utxo.html#8897" class="Function">updateProposalDeposits</a> <a id="9344" class="Symbol">(</a><a id="9345" href="Ledger.Dijkstra.Specification.Transaction.html#7876" class="Field">ListOfGovProposalsOf</a> <a id="9366" href="Ledger.Dijkstra.Specification.Utxo.html#9274" class="Bound">tx</a><a id="9368" class="Symbol">)</a> <a id="9370" class="Symbol">(</a><a id="9371" href="Ledger.Dijkstra.Specification.Transaction.html#6761" class="Field">TxIdOf</a> <a id="9378" href="Ledger.Dijkstra.Specification.Utxo.html#9274" class="Bound">tx</a><a id="9380" class="Symbol">)</a> <a id="9382" class="Symbol">(</a><a id="9383" href="Ledger.Dijkstra.Specification.Utxo.html#9271" class="Bound">pp</a> <a id="9386" class="Symbol">.</a><a id="9387" href="Ledger.Dijkstra.Specification.PParams.html#3493" class="Field">govActionDeposit</a><a id="9403" class="Symbol">)</a>

<a id="9406" class="Keyword">data</a> <a id="inInterval"></a><a id="9411" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="9422" class="Symbol">(</a><a id="9423" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9428" class="Symbol">:</a> <a id="9430" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="9434" class="Symbol">)</a> <a id="9436" class="Symbol">:</a> <a id="9438" class="Symbol">(</a><a id="9439" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9445" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="9450" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9452" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9458" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="9462" class="Symbol">)</a> <a id="9464" class="Symbol">→</a> <a id="9466" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="9471" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="9479" href="Ledger.Dijkstra.Specification.Utxo.html#9479" class="InductiveConstructor">both</a>   <a id="9486" class="Symbol">:</a> <a id="9488" class="Symbol">∀</a> <a id="9490" class="Symbol">{</a><a id="9491" href="Ledger.Dijkstra.Specification.Utxo.html#9491" class="Bound">l</a> <a id="9493" href="Ledger.Dijkstra.Specification.Utxo.html#9493" class="Bound">r</a><a id="9494" class="Symbol">}</a>  <a id="9497" class="Symbol">→</a> <a id="9499" href="Ledger.Dijkstra.Specification.Utxo.html#9491" class="Bound">l</a> <a id="9501" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9503" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9508" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9510" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9515" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9517" href="Ledger.Dijkstra.Specification.Utxo.html#9493" class="Bound">r</a>  <a id="9520" class="Symbol">→</a>  <a id="9523" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="9534" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9539" class="Symbol">(</a><a id="9540" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9545" href="Ledger.Dijkstra.Specification.Utxo.html#9491" class="Bound">l</a>   <a id="9549" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9551" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9556" href="Ledger.Dijkstra.Specification.Utxo.html#9493" class="Bound">r</a><a id="9557" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="9561" href="Ledger.Dijkstra.Specification.Utxo.html#9561" class="InductiveConstructor">lower</a>  <a id="9568" class="Symbol">:</a> <a id="9570" class="Symbol">∀</a> <a id="9572" class="Symbol">{</a><a id="9573" href="Ledger.Dijkstra.Specification.Utxo.html#9573" class="Bound">l</a><a id="9574" class="Symbol">}</a>    <a id="9579" class="Symbol">→</a> <a id="9581" href="Ledger.Dijkstra.Specification.Utxo.html#9573" class="Bound">l</a> <a id="9583" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9585" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a>             <a id="9602" class="Symbol">→</a>  <a id="9605" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="9616" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9621" class="Symbol">(</a><a id="9622" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9627" href="Ledger.Dijkstra.Specification.Utxo.html#9573" class="Bound">l</a>   <a id="9631" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9633" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9640" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="9644" href="Ledger.Dijkstra.Specification.Utxo.html#9644" class="InductiveConstructor">upper</a>  <a id="9651" class="Symbol">:</a> <a id="9653" class="Symbol">∀</a> <a id="9655" class="Symbol">{</a><a id="9656" href="Ledger.Dijkstra.Specification.Utxo.html#9656" class="Bound">r</a><a id="9657" class="Symbol">}</a>    <a id="9662" class="Symbol">→</a> <a id="9664" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9669" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9671" href="Ledger.Dijkstra.Specification.Utxo.html#9656" class="Bound">r</a>             <a id="9685" class="Symbol">→</a>  <a id="9688" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="9699" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9704" class="Symbol">(</a><a id="9705" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="9714" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9716" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9721" href="Ledger.Dijkstra.Specification.Utxo.html#9656" class="Bound">r</a><a id="9722" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="9726" href="Ledger.Dijkstra.Specification.Utxo.html#9726" class="InductiveConstructor">none</a>   <a id="9733" class="Symbol">:</a>                                    <a id="9770" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="9781" href="Ledger.Dijkstra.Specification.Utxo.html#9423" class="Bound">slot</a> <a id="9786" class="Symbol">(</a><a id="9787" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="9796" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9798" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9805" class="Symbol">)</a>


<a id="9809" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="9879" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="9890" href="Ledger.Dijkstra.Specification.Utxo.html#9890" class="Function">Dec-inInterval</a> <a id="9905" class="Symbol">:</a> <a id="9907" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="9918" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a>
  <a id="9923" href="Ledger.Dijkstra.Specification.Utxo.html#9890" class="Function">Dec-inInterval</a> <a id="9938" class="Symbol">{</a><a id="9939" href="Ledger.Dijkstra.Specification.Utxo.html#9939" class="Bound">slot</a><a id="9943" class="Symbol">}</a> <a id="9945" class="Symbol">{</a><a id="9946" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9951" href="Ledger.Dijkstra.Specification.Utxo.html#9951" class="Bound">x</a>  <a id="9954" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9956" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9961" href="Ledger.Dijkstra.Specification.Utxo.html#9961" class="Bound">y</a> <a id="9963" class="Symbol">}</a> <a id="9965" class="Symbol">.</a><a id="9966" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9970" class="Keyword">with</a> <a id="9975" href="Ledger.Dijkstra.Specification.Utxo.html#9951" class="Bound">x</a> <a id="9977" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9980" href="Ledger.Dijkstra.Specification.Utxo.html#9939" class="Bound">slot</a> <a id="9985" class="Symbol">|</a> <a id="9987" href="Ledger.Dijkstra.Specification.Utxo.html#9939" class="Bound">slot</a> <a id="9992" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9995" href="Ledger.Dijkstra.Specification.Utxo.html#9961" class="Bound">y</a>
  <a id="9999" class="Symbol">...</a> <a id="10003" class="Symbol">|</a> <a id="10005" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10008" href="Ledger.Dijkstra.Specification.Utxo.html#10008" class="Bound">¬p₁</a> <a id="10012" class="Symbol">|</a> <a id="10014" class="Symbol">_</a>      <a id="10021" class="Symbol">=</a> <a id="10023" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10026" class="Symbol">λ</a> <a id="10028" class="Keyword">where</a> <a id="10034" class="Symbol">(</a><a id="10035" href="Ledger.Dijkstra.Specification.Utxo.html#9479" class="InductiveConstructor">both</a> <a id="10040" class="Symbol">(</a><a id="10041" href="Ledger.Dijkstra.Specification.Utxo.html#10041" class="Bound">h₁</a> <a id="10044" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10046" href="Ledger.Dijkstra.Specification.Utxo.html#10046" class="Bound">h₂</a><a id="10048" class="Symbol">))</a> <a id="10051" class="Symbol">→</a> <a id="10053" href="Ledger.Dijkstra.Specification.Utxo.html#10008" class="Bound">¬p₁</a> <a id="10057" href="Ledger.Dijkstra.Specification.Utxo.html#10041" class="Bound">h₁</a>
  <a id="10062" class="Symbol">...</a> <a id="10066" class="Symbol">|</a> <a id="10068" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10072" href="Ledger.Dijkstra.Specification.Utxo.html#10072" class="Bound">p₁</a> <a id="10075" class="Symbol">|</a> <a id="10077" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10080" href="Ledger.Dijkstra.Specification.Utxo.html#10080" class="Bound">¬p₂</a> <a id="10084" class="Symbol">=</a> <a id="10086" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10089" class="Symbol">λ</a> <a id="10091" class="Keyword">where</a> <a id="10097" class="Symbol">(</a><a id="10098" href="Ledger.Dijkstra.Specification.Utxo.html#9479" class="InductiveConstructor">both</a> <a id="10103" class="Symbol">(</a><a id="10104" href="Ledger.Dijkstra.Specification.Utxo.html#10104" class="Bound">h₁</a> <a id="10107" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10109" href="Ledger.Dijkstra.Specification.Utxo.html#10109" class="Bound">h₂</a><a id="10111" class="Symbol">))</a> <a id="10114" class="Symbol">→</a> <a id="10116" href="Ledger.Dijkstra.Specification.Utxo.html#10080" class="Bound">¬p₂</a> <a id="10120" href="Ledger.Dijkstra.Specification.Utxo.html#10109" class="Bound">h₂</a>
  <a id="10125" class="Symbol">...</a> <a id="10129" class="Symbol">|</a> <a id="10131" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10135" href="Ledger.Dijkstra.Specification.Utxo.html#10135" class="Bound">p₁</a> <a id="10138" class="Symbol">|</a> <a id="10140" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10144" href="Ledger.Dijkstra.Specification.Utxo.html#10144" class="Bound">p₂</a> <a id="10147" class="Symbol">=</a> <a id="10149" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10153" class="Symbol">(</a><a id="10154" href="Ledger.Dijkstra.Specification.Utxo.html#9479" class="InductiveConstructor">both</a> <a id="10159" class="Symbol">(</a><a id="10160" href="Ledger.Dijkstra.Specification.Utxo.html#10135" class="Bound">p₁</a> <a id="10163" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10165" href="Ledger.Dijkstra.Specification.Utxo.html#10144" class="Bound">p₂</a><a id="10167" class="Symbol">))</a>
  <a id="10172" href="Ledger.Dijkstra.Specification.Utxo.html#9890" class="Function">Dec-inInterval</a> <a id="10187" class="Symbol">{</a><a id="10188" href="Ledger.Dijkstra.Specification.Utxo.html#10188" class="Bound">slot</a><a id="10192" class="Symbol">}</a> <a id="10194" class="Symbol">{</a><a id="10195" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10200" href="Ledger.Dijkstra.Specification.Utxo.html#10200" class="Bound">x</a>  <a id="10203" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10205" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10212" class="Symbol">}</a> <a id="10214" class="Symbol">.</a><a id="10215" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="10219" class="Keyword">with</a> <a id="10224" href="Ledger.Dijkstra.Specification.Utxo.html#10200" class="Bound">x</a> <a id="10226" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="10229" href="Ledger.Dijkstra.Specification.Utxo.html#10188" class="Bound">slot</a>
  <a id="10236" class="Symbol">...</a> <a id="10240" class="Symbol">|</a> <a id="10242" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10245" href="Ledger.Dijkstra.Specification.Utxo.html#10245" class="Bound">¬p</a> <a id="10248" class="Symbol">=</a> <a id="10250" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="10254" class="Symbol">(λ</a> <a id="10257" class="Keyword">where</a> <a id="10263" class="Symbol">(</a><a id="10264" href="Ledger.Dijkstra.Specification.Utxo.html#9561" class="InductiveConstructor">lower</a> <a id="10270" href="Ledger.Dijkstra.Specification.Utxo.html#10270" class="Bound">h</a><a id="10271" class="Symbol">)</a> <a id="10273" class="Symbol">→</a> <a id="10275" href="Ledger.Dijkstra.Specification.Utxo.html#10245" class="Bound">¬p</a> <a id="10278" href="Ledger.Dijkstra.Specification.Utxo.html#10270" class="Bound">h</a><a id="10279" class="Symbol">)</a>
  <a id="10283" class="Symbol">...</a> <a id="10287" class="Symbol">|</a> <a id="10289" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10293" href="Ledger.Dijkstra.Specification.Utxo.html#10293" class="Bound">p</a> <a id="10295" class="Symbol">=</a> <a id="10297" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10301" class="Symbol">(</a><a id="10302" href="Ledger.Dijkstra.Specification.Utxo.html#9561" class="InductiveConstructor">lower</a> <a id="10308" href="Ledger.Dijkstra.Specification.Utxo.html#10293" class="Bound">p</a><a id="10309" class="Symbol">)</a>
  <a id="10313" href="Ledger.Dijkstra.Specification.Utxo.html#9890" class="Function">Dec-inInterval</a> <a id="10328" class="Symbol">{</a><a id="10329" href="Ledger.Dijkstra.Specification.Utxo.html#10329" class="Bound">slot</a><a id="10333" class="Symbol">}</a> <a id="10335" class="Symbol">{</a><a id="10336" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10344" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10346" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10351" href="Ledger.Dijkstra.Specification.Utxo.html#10351" class="Bound">x</a> <a id="10353" class="Symbol">}</a> <a id="10355" class="Symbol">.</a><a id="10356" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="10360" class="Keyword">with</a> <a id="10365" href="Ledger.Dijkstra.Specification.Utxo.html#10329" class="Bound">slot</a> <a id="10370" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="10373" href="Ledger.Dijkstra.Specification.Utxo.html#10351" class="Bound">x</a>
  <a id="10377" class="Symbol">...</a> <a id="10381" class="Symbol">|</a> <a id="10383" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="10386" href="Ledger.Dijkstra.Specification.Utxo.html#10386" class="Bound">¬p</a> <a id="10389" class="Symbol">=</a> <a id="10391" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="10395" class="Symbol">(λ</a> <a id="10398" class="Keyword">where</a> <a id="10404" class="Symbol">(</a><a id="10405" href="Ledger.Dijkstra.Specification.Utxo.html#9644" class="InductiveConstructor">upper</a> <a id="10411" href="Ledger.Dijkstra.Specification.Utxo.html#10411" class="Bound">h</a><a id="10412" class="Symbol">)</a> <a id="10414" class="Symbol">→</a> <a id="10416" href="Ledger.Dijkstra.Specification.Utxo.html#10386" class="Bound">¬p</a> <a id="10419" href="Ledger.Dijkstra.Specification.Utxo.html#10411" class="Bound">h</a><a id="10420" class="Symbol">)</a>
  <a id="10424" class="Symbol">...</a> <a id="10428" class="Symbol">|</a> <a id="10430" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10434" href="Ledger.Dijkstra.Specification.Utxo.html#10434" class="Bound">p</a> <a id="10436" class="Symbol">=</a> <a id="10438" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10442" class="Symbol">(</a><a id="10443" href="Ledger.Dijkstra.Specification.Utxo.html#9644" class="InductiveConstructor">upper</a> <a id="10449" href="Ledger.Dijkstra.Specification.Utxo.html#10434" class="Bound">p</a><a id="10450" class="Symbol">)</a>
  <a id="10454" href="Ledger.Dijkstra.Specification.Utxo.html#9890" class="Function">Dec-inInterval</a> <a id="10469" class="Symbol">{</a><a id="10470" href="Ledger.Dijkstra.Specification.Utxo.html#10470" class="Bound">slot</a><a id="10474" class="Symbol">}</a> <a id="10476" class="Symbol">{</a><a id="10477" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10485" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10487" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10494" class="Symbol">}</a> <a id="10496" class="Symbol">.</a><a id="10497" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="10501" class="Symbol">=</a> <a id="10503" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="10507" href="Ledger.Dijkstra.Specification.Utxo.html#9726" class="InductiveConstructor">none</a>

  <a id="HasCoin-UTxOState"></a><a id="10515" href="Ledger.Dijkstra.Specification.Utxo.html#10515" class="Function">HasCoin-UTxOState</a> <a id="10533" class="Symbol">:</a> <a id="10535" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="10543" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="10555" href="Ledger.Dijkstra.Specification.Utxo.html#10515" class="Function">HasCoin-UTxOState</a> <a id="10573" class="Symbol">.</a><a id="10574" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="10582" href="Ledger.Dijkstra.Specification.Utxo.html#10582" class="Bound">s</a> <a id="10584" class="Symbol">=</a> <a id="10586" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="10594" class="Symbol">(</a><a id="10595" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="10602" href="Ledger.Dijkstra.Specification.Utxo.html#10582" class="Bound">s</a><a id="10603" class="Symbol">)</a>
                               <a id="10636" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10638" class="Symbol">(</a><a id="10639" href="Ledger.Prelude.Base.html#669" class="Field">FeesOf</a> <a id="10646" href="Ledger.Dijkstra.Specification.Utxo.html#10582" class="Bound">s</a><a id="10647" class="Symbol">)</a>
                               <a id="10680" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10682" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="10690" class="Symbol">(</a><a id="10691" href="Ledger.Dijkstra.Specification.Certs.html#3653" class="Field">DepositsOf</a> <a id="10702" href="Ledger.Dijkstra.Specification.Utxo.html#10582" class="Bound">s</a><a id="10703" class="Symbol">)</a>
                               <a id="10736" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10738" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="10750" href="Ledger.Dijkstra.Specification.Utxo.html#10582" class="Bound">s</a>

<a id="coinPolicies"></a><a id="10753" href="Ledger.Dijkstra.Specification.Utxo.html#10753" class="Function">coinPolicies</a> <a id="10766" class="Symbol">:</a> <a id="10768" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="10770" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
<a id="10781" href="Ledger.Dijkstra.Specification.Utxo.html#10753" class="Function">coinPolicies</a> <a id="10794" class="Symbol">=</a> <a id="10796" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="10805" class="Symbol">(</a><a id="10806" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="10813" class="Number">1</a><a id="10814" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="10817" href="Ledger.Dijkstra.Specification.Utxo.html#10817" class="Function">isAdaOnly</a> <a id="10827" class="Symbol">:</a> <a id="10829" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a> <a id="10835" class="Symbol">→</a> <a id="10837" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="10842" href="Ledger.Dijkstra.Specification.Utxo.html#10817" class="Function">isAdaOnly</a> <a id="10852" href="Ledger.Dijkstra.Specification.Utxo.html#10852" class="Bound">v</a> <a id="10854" class="Symbol">=</a> <a id="10856" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="10865" href="Ledger.Dijkstra.Specification.Utxo.html#10852" class="Bound">v</a> <a id="10867" href="Axiom.Set.html#2772" class="Function Operator">≡ᵉ</a> <a id="10870" href="Ledger.Dijkstra.Specification.Utxo.html#10753" class="Function">coinPolicies</a>


<a id="collateralCheck"></a><a id="10885" href="Ledger.Dijkstra.Specification.Utxo.html#10885" class="Function">collateralCheck</a> <a id="10901" class="Symbol">:</a> <a id="10903" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a> <a id="10911" class="Symbol">→</a> <a id="10913" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="10924" class="Symbol">→</a> <a id="10926" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="10931" class="Symbol">→</a> <a id="10933" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="10938" href="Ledger.Dijkstra.Specification.Utxo.html#10885" class="Function">collateralCheck</a> <a id="10954" href="Ledger.Dijkstra.Specification.Utxo.html#10954" class="Bound">pp</a> <a id="10957" href="Ledger.Dijkstra.Specification.Utxo.html#10957" class="Bound">txTop</a> <a id="10963" href="Ledger.Dijkstra.Specification.Utxo.html#10963" class="Bound">utxo</a> <a id="10968" class="Symbol">=</a>
  <a id="10972" href="Axiom.Set.html#9909" class="Function">All</a> <a id="10976" class="Symbol">(λ</a> <a id="10979" class="Symbol">(</a><a id="10980" href="Ledger.Dijkstra.Specification.Utxo.html#10980" class="Bound">addr</a> <a id="10985" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10987" class="Symbol">_)</a> <a id="10990" class="Symbol">→</a> <a id="10992" href="Ledger.Core.Specification.Address.html#3161" class="Function">isVKeyAddr</a> <a id="11003" href="Ledger.Dijkstra.Specification.Utxo.html#10980" class="Bound">addr</a><a id="11007" class="Symbol">)</a> <a id="11009" class="Symbol">(</a><a id="11010" href="Class.IsSet.html#959" class="Function">range</a> <a id="11016" class="Symbol">(</a><a id="11017" href="Ledger.Dijkstra.Specification.Utxo.html#10963" class="Bound">utxo</a> <a id="11022" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="11024" href="Ledger.Dijkstra.Specification.Transaction.html#6025" class="Field">CollateralInputsOf</a> <a id="11043" href="Ledger.Dijkstra.Specification.Utxo.html#10957" class="Bound">txTop</a><a id="11048" class="Symbol">))</a>
  <a id="11053" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11055" href="Ledger.Dijkstra.Specification.Utxo.html#10817" class="Function">isAdaOnly</a> <a id="11065" class="Symbol">(</a><a id="11066" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="11074" class="Symbol">(</a><a id="11075" href="Ledger.Dijkstra.Specification.Utxo.html#10963" class="Bound">utxo</a> <a id="11080" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="11082" href="Ledger.Dijkstra.Specification.Transaction.html#6025" class="Field">CollateralInputsOf</a> <a id="11101" href="Ledger.Dijkstra.Specification.Utxo.html#10957" class="Bound">txTop</a><a id="11106" class="Symbol">))</a>
  <a id="11111" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11113" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="11118" class="Symbol">(</a><a id="11119" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="11127" class="Symbol">(</a><a id="11128" href="Ledger.Dijkstra.Specification.Utxo.html#10963" class="Bound">utxo</a> <a id="11133" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="11135" href="Ledger.Dijkstra.Specification.Transaction.html#6025" class="Field">CollateralInputsOf</a> <a id="11154" href="Ledger.Dijkstra.Specification.Utxo.html#10957" class="Bound">txTop</a><a id="11159" class="Symbol">))</a> <a id="11162" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11164" class="Number">100</a> <a id="11168" href="Class.HasOrder.Core.html#827" class="Function Operator">≥</a> <a id="11170" class="Symbol">(</a><a id="11171" href="Ledger.Dijkstra.Specification.Transaction.html#6190" class="Field">TxFeesOf</a> <a id="11180" href="Ledger.Dijkstra.Specification.Utxo.html#10957" class="Bound">txTop</a><a id="11185" class="Symbol">)</a> <a id="11187" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11189" href="Ledger.Dijkstra.Specification.Utxo.html#10954" class="Bound">pp</a> <a id="11192" class="Symbol">.</a><a id="11193" href="Ledger.Dijkstra.Specification.PParams.html#3082" class="Field">collateralPercentage</a>
  <a id="11216" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11218" class="Symbol">(</a><a id="11219" href="Ledger.Dijkstra.Specification.Transaction.html#6025" class="Field">CollateralInputsOf</a> <a id="11238" href="Ledger.Dijkstra.Specification.Utxo.html#10957" class="Bound">txTop</a><a id="11243" class="Symbol">)</a> <a id="11245" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="11247" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="11250" class="Comment">-- NOTE:</a>
<a id="11259" class="Comment">-- Collateral is *top-level only* in Dijkstra.  In this first-pass model,</a>
<a id="11333" class="Comment">-- we keep Conway&#39;s collateral predicate, but interpret it as covering the entire</a>
<a id="11415" class="Comment">-- batch&#39;s phase-2 validation (top-level tx + all subtransactions).</a>
<a id="11483" class="Comment">--</a>
<a id="11486" class="Comment">-- The precise relationship between collateral, per-script execution units, and</a>
<a id="11566" class="Comment">-- fee/minfee accounting may be refined as the CIPs and ledger design stabilize.</a>

<a id="batchOuts"></a><a id="11648" href="Ledger.Dijkstra.Specification.Utxo.html#11648" class="Function">batchOuts</a> <a id="11658" class="Symbol">:</a> <a id="11660" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="11671" class="Symbol">→</a> <a id="11673" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
<a id="11678" href="Ledger.Dijkstra.Specification.Utxo.html#11648" class="Function">batchOuts</a> <a id="11688" href="Ledger.Dijkstra.Specification.Utxo.html#11688" class="Bound">txTop</a> <a id="11694" class="Symbol">=</a> <a id="11696" href="Data.List.Base.html#4126" class="Function">foldr</a> <a id="11702" class="Symbol">(λ</a> <a id="11705" href="Ledger.Dijkstra.Specification.Utxo.html#11705" class="Bound">sub</a> <a id="11709" href="Ledger.Dijkstra.Specification.Utxo.html#11709" class="Bound">acc</a> <a id="11713" class="Symbol">→</a> <a id="11715" href="Ledger.Dijkstra.Specification.Utxo.html#3251" class="Function">outs</a> <a id="11720" href="Ledger.Dijkstra.Specification.Utxo.html#11705" class="Bound">sub</a> <a id="11724" href="Axiom.Set.Map.html#7640" class="Function Operator">∪ˡ</a> <a id="11727" href="Ledger.Dijkstra.Specification.Utxo.html#11709" class="Bound">acc</a><a id="11730" class="Symbol">)</a> <a id="11732" class="Symbol">(</a><a id="11733" href="Ledger.Dijkstra.Specification.Utxo.html#3251" class="Function">outs</a> <a id="11738" href="Ledger.Dijkstra.Specification.Utxo.html#11688" class="Bound">txTop</a><a id="11743" class="Symbol">)</a> <a id="11745" class="Symbol">(</a><a id="11746" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="11764" href="Ledger.Dijkstra.Specification.Utxo.html#11688" class="Bound">txTop</a><a id="11769" class="Symbol">)</a>

<a id="utxoView"></a><a id="11772" href="Ledger.Dijkstra.Specification.Utxo.html#11772" class="Function">utxoView</a> <a id="11781" class="Symbol">:</a> <a id="11783" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="11788" class="Symbol">→</a> <a id="11790" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="11801" class="Symbol">→</a> <a id="11803" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
<a id="11808" href="Ledger.Dijkstra.Specification.Utxo.html#11772" class="Function">utxoView</a> <a id="11817" href="Ledger.Dijkstra.Specification.Utxo.html#11817" class="Bound">utxo</a> <a id="11822" href="Ledger.Dijkstra.Specification.Utxo.html#11822" class="Bound">txTop</a> <a id="11828" class="Symbol">=</a> <a id="11830" href="Ledger.Dijkstra.Specification.Utxo.html#11817" class="Bound">utxo</a> <a id="11835" href="Axiom.Set.Map.html#7640" class="Function Operator">∪ˡ</a> <a id="11838" href="Ledger.Dijkstra.Specification.Utxo.html#11648" class="Function">batchOuts</a> <a id="11848" href="Ledger.Dijkstra.Specification.Utxo.html#11822" class="Bound">txTop</a>

<a id="11855" class="Keyword">module</a> <a id="Accounting"></a><a id="11862" href="Ledger.Dijkstra.Specification.Utxo.html#11862" class="Module">Accounting</a> <a id="11873" class="Symbol">(</a><a id="11874" href="Ledger.Dijkstra.Specification.Utxo.html#11874" class="Bound">pp</a> <a id="11877" class="Symbol">:</a> <a id="11879" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a><a id="11886" class="Symbol">)</a> <a id="11888" class="Symbol">(</a><a id="11889" href="Ledger.Dijkstra.Specification.Utxo.html#11889" class="Bound">txTop</a> <a id="11895" class="Symbol">:</a> <a id="11897" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a><a id="11907" class="Symbol">)</a> <a id="11909" class="Symbol">(</a><a id="11910" href="Ledger.Dijkstra.Specification.Utxo.html#11910" class="Bound">deposits₀</a> <a id="11920" class="Symbol">:</a> <a id="11922" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a><a id="11930" class="Symbol">)</a> <a id="11932" class="Keyword">where</a>

  <a id="Accounting.updateDepositsBatch"></a><a id="11941" href="Ledger.Dijkstra.Specification.Utxo.html#11941" class="Function">updateDepositsBatch</a> <a id="11961" class="Symbol">:</a> <a id="11963" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
  <a id="11974" href="Ledger.Dijkstra.Specification.Utxo.html#11941" class="Function">updateDepositsBatch</a> <a id="11994" class="Symbol">=</a> <a id="11996" href="Data.List.Base.html#4227" class="Function">foldl</a>  <a id="12003" href="Ledger.Dijkstra.Specification.Utxo.html#12152" class="Function">updateStep</a>
                               <a id="12045" class="Symbol">(</a><a id="12046" href="Ledger.Dijkstra.Specification.Utxo.html#9202" class="Function">updateDeposits</a> <a id="12061" href="Ledger.Dijkstra.Specification.Utxo.html#11874" class="Bound">pp</a> <a id="12064" href="Ledger.Dijkstra.Specification.Utxo.html#11889" class="Bound">txTop</a> <a id="12070" href="Ledger.Dijkstra.Specification.Utxo.html#11910" class="Bound">deposits₀</a><a id="12079" class="Symbol">)</a>
                               <a id="12112" class="Symbol">(</a><a id="12113" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="12131" href="Ledger.Dijkstra.Specification.Utxo.html#11889" class="Bound">txTop</a><a id="12136" class="Symbol">)</a>
    <a id="12142" class="Keyword">where</a>
    <a id="12152" href="Ledger.Dijkstra.Specification.Utxo.html#12152" class="Function">updateStep</a> <a id="12163" class="Symbol">:</a> <a id="12165" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a> <a id="12174" class="Symbol">→</a> <a id="12176" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">SubLevelTx</a> <a id="12187" class="Symbol">→</a> <a id="12189" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
    <a id="12202" href="Ledger.Dijkstra.Specification.Utxo.html#12152" class="Function">updateStep</a> <a id="12213" href="Ledger.Dijkstra.Specification.Utxo.html#12213" class="Bound">deps</a> <a id="12218" href="Ledger.Dijkstra.Specification.Utxo.html#12218" class="Bound">txSub</a> <a id="12224" class="Symbol">=</a> <a id="12226" href="Ledger.Dijkstra.Specification.Utxo.html#9202" class="Function">updateDeposits</a> <a id="12241" href="Ledger.Dijkstra.Specification.Utxo.html#11874" class="Bound">pp</a> <a id="12244" href="Ledger.Dijkstra.Specification.Utxo.html#12218" class="Bound">txSub</a> <a id="12250" href="Ledger.Dijkstra.Specification.Utxo.html#12213" class="Bound">deps</a>

  <a id="Accounting.depositsChangeBatch"></a><a id="12258" href="Ledger.Dijkstra.Specification.Utxo.html#12258" class="Function">depositsChangeBatch</a> <a id="12278" class="Symbol">:</a> <a id="12280" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
  <a id="12284" href="Ledger.Dijkstra.Specification.Utxo.html#12258" class="Function">depositsChangeBatch</a> <a id="12304" class="Symbol">=</a> <a id="12306" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="12314" href="Ledger.Dijkstra.Specification.Utxo.html#11941" class="Function">updateDepositsBatch</a> <a id="12334" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="12336" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="12344" href="Ledger.Dijkstra.Specification.Utxo.html#11910" class="Bound">deposits₀</a>

  <a id="Accounting.depositRefundsBatch"></a><a id="12357" href="Ledger.Dijkstra.Specification.Utxo.html#12357" class="Function">depositRefundsBatch</a> <a id="12377" class="Symbol">:</a> <a id="12379" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="12386" href="Ledger.Dijkstra.Specification.Utxo.html#12357" class="Function">depositRefundsBatch</a> <a id="12406" class="Symbol">=</a> <a id="12408" href="Prelude.html#3409" class="Function">negPart</a> <a id="12416" href="Ledger.Dijkstra.Specification.Utxo.html#12258" class="Function">depositsChangeBatch</a>

  <a id="Accounting.newDepositsBatch"></a><a id="12439" href="Ledger.Dijkstra.Specification.Utxo.html#12439" class="Function">newDepositsBatch</a> <a id="12456" class="Symbol">:</a> <a id="12458" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="12465" href="Ledger.Dijkstra.Specification.Utxo.html#12439" class="Function">newDepositsBatch</a> <a id="12482" class="Symbol">=</a> <a id="12484" href="Prelude.html#3332" class="Function">posPart</a> <a id="12492" href="Ledger.Dijkstra.Specification.Utxo.html#12258" class="Function">depositsChangeBatch</a>

  <a id="Accounting.consumed"></a><a id="12515" href="Ledger.Dijkstra.Specification.Utxo.html#12515" class="Function">consumed</a> <a id="12524" class="Symbol">:</a> <a id="12526" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="12534" class="Symbol">→</a> <a id="12536" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="12544" href="Ledger.Dijkstra.Specification.Utxo.html#12515" class="Function">consumed</a> <a id="12553" href="Ledger.Dijkstra.Specification.Utxo.html#12553" class="Bound">Γ</a> <a id="12555" class="Symbol">=</a> <a id="12557" href="Data.List.Base.html#4227" class="Function">foldl</a>  <a id="12564" class="Symbol">(λ</a> <a id="12567" href="Ledger.Dijkstra.Specification.Utxo.html#12567" class="Bound">acc</a> <a id="12571" href="Ledger.Dijkstra.Specification.Utxo.html#12571" class="Bound">tx</a> <a id="12574" class="Symbol">→</a> <a id="12576" href="Ledger.Dijkstra.Specification.Utxo.html#12567" class="Bound">acc</a> <a id="12580" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12582" href="Ledger.Dijkstra.Specification.Utxo.html#12729" class="Function">consumedTx</a> <a id="12593" href="Ledger.Dijkstra.Specification.Utxo.html#12571" class="Bound">tx</a><a id="12595" class="Symbol">)</a>
                      <a id="12619" class="Symbol">(</a><a id="12620" href="Ledger.Dijkstra.Specification.Utxo.html#12729" class="Function">consumedTx</a> <a id="12631" href="Ledger.Dijkstra.Specification.Utxo.html#11889" class="Bound">txTop</a> <a id="12637" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12639" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="12646" href="Ledger.Dijkstra.Specification.Utxo.html#12357" class="Function">depositRefundsBatch</a><a id="12665" class="Symbol">)</a>
                      <a id="12689" class="Symbol">(</a><a id="12690" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="12708" href="Ledger.Dijkstra.Specification.Utxo.html#11889" class="Bound">txTop</a><a id="12713" class="Symbol">)</a>
    <a id="12719" class="Keyword">where</a>
    <a id="12729" href="Ledger.Dijkstra.Specification.Utxo.html#12729" class="Function">consumedTx</a> <a id="12740" class="Symbol">:</a> <a id="12742" class="Symbol">∀</a> <a id="12744" class="Symbol">{</a><a id="12745" href="Ledger.Dijkstra.Specification.Utxo.html#12745" class="Bound">ℓ</a><a id="12746" class="Symbol">}</a> <a id="12748" class="Symbol">→</a> <a id="12750" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="12753" href="Ledger.Dijkstra.Specification.Utxo.html#12745" class="Bound">ℓ</a> <a id="12755" class="Symbol">→</a> <a id="12757" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
    <a id="12767" href="Ledger.Dijkstra.Specification.Utxo.html#12729" class="Function">consumedTx</a> <a id="12778" href="Ledger.Dijkstra.Specification.Utxo.html#12778" class="Bound">tx</a> <a id="12781" class="Symbol">=</a>  <a id="12784" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="12792" class="Symbol">(</a><a id="12793" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="12800" href="Ledger.Dijkstra.Specification.Utxo.html#12553" class="Bound">Γ</a> <a id="12802" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="12804" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="12818" href="Ledger.Dijkstra.Specification.Utxo.html#12778" class="Bound">tx</a><a id="12820" class="Symbol">)</a>
                     <a id="12843" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12845" href="Ledger.Dijkstra.Specification.Transaction.html#7399" class="Field">MintedValueOf</a> <a id="12859" href="Ledger.Dijkstra.Specification.Utxo.html#12778" class="Bound">tx</a>
                     <a id="12883" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12885" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="12892" class="Symbol">(</a><a id="12893" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="12901" class="Symbol">(</a><a id="12902" href="Ledger.Core.Specification.Address.html#1839" class="Field">WithdrawalsOf</a> <a id="12916" href="Ledger.Dijkstra.Specification.Utxo.html#12778" class="Bound">tx</a><a id="12918" class="Symbol">))</a>

  <a id="Accounting.produced"></a><a id="12924" href="Ledger.Dijkstra.Specification.Utxo.html#12924" class="Function">produced</a> <a id="12933" class="Symbol">:</a> <a id="12935" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="12943" href="Ledger.Dijkstra.Specification.Utxo.html#12924" class="Function">produced</a> <a id="12952" class="Symbol">=</a> <a id="12954" href="Data.List.Base.html#4227" class="Function">foldl</a>  <a id="12961" class="Symbol">(λ</a> <a id="12964" href="Ledger.Dijkstra.Specification.Utxo.html#12964" class="Bound">acc</a> <a id="12968" href="Ledger.Dijkstra.Specification.Utxo.html#12968" class="Bound">tx</a> <a id="12971" class="Symbol">→</a> <a id="12973" href="Ledger.Dijkstra.Specification.Utxo.html#12964" class="Bound">acc</a> <a id="12977" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12979" href="Ledger.Dijkstra.Specification.Utxo.html#13119" class="Function">producedTx</a> <a id="12990" href="Ledger.Dijkstra.Specification.Utxo.html#12968" class="Bound">tx</a><a id="12992" class="Symbol">)</a>
                    <a id="13014" class="Symbol">(</a><a id="13015" href="Ledger.Dijkstra.Specification.Utxo.html#13119" class="Function">producedTx</a> <a id="13026" href="Ledger.Dijkstra.Specification.Utxo.html#11889" class="Bound">txTop</a> <a id="13032" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13034" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="13041" href="Ledger.Dijkstra.Specification.Utxo.html#12439" class="Function">newDepositsBatch</a><a id="13057" class="Symbol">)</a>
                    <a id="13079" class="Symbol">(</a><a id="13080" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="13098" href="Ledger.Dijkstra.Specification.Utxo.html#11889" class="Bound">txTop</a><a id="13103" class="Symbol">)</a>
    <a id="13109" class="Keyword">where</a>
    <a id="13119" href="Ledger.Dijkstra.Specification.Utxo.html#13119" class="Function">producedTx</a> <a id="13130" class="Symbol">:</a> <a id="13132" class="Symbol">∀</a> <a id="13134" class="Symbol">{</a><a id="13135" href="Ledger.Dijkstra.Specification.Utxo.html#13135" class="Bound">ℓ</a><a id="13136" class="Symbol">}</a> <a id="13138" class="Symbol">→</a> <a id="13140" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="13143" href="Ledger.Dijkstra.Specification.Utxo.html#13135" class="Bound">ℓ</a> <a id="13145" class="Symbol">→</a> <a id="13147" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
    <a id="13157" href="Ledger.Dijkstra.Specification.Utxo.html#13119" class="Function">producedTx</a> <a id="13168" class="Symbol">{</a><a id="13169" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a><a id="13179" class="Symbol">}</a> <a id="13181" href="Ledger.Dijkstra.Specification.Utxo.html#13181" class="Bound">tx</a> <a id="13184" class="Symbol">=</a>  <a id="13187" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="13195" class="Symbol">(</a><a id="13196" href="Ledger.Dijkstra.Specification.Utxo.html#3251" class="Function">outs</a> <a id="13201" href="Ledger.Dijkstra.Specification.Utxo.html#13181" class="Bound">tx</a><a id="13203" class="Symbol">)</a> <a id="13205" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13207" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="13214" class="Symbol">(</a><a id="13215" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="13227" href="Ledger.Dijkstra.Specification.Utxo.html#13181" class="Bound">tx</a><a id="13229" class="Symbol">)</a>
    <a id="13235" href="Ledger.Dijkstra.Specification.Utxo.html#13119" class="Function">producedTx</a> <a id="13246" class="Symbol">{</a><a id="13247" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a><a id="13257" class="Symbol">}</a> <a id="13259" href="Ledger.Dijkstra.Specification.Utxo.html#13259" class="Bound">tx</a> <a id="13262" class="Symbol">=</a>
      <a id="13270" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="13278" class="Symbol">(</a><a id="13279" href="Ledger.Dijkstra.Specification.Utxo.html#3251" class="Function">outs</a> <a id="13284" href="Ledger.Dijkstra.Specification.Utxo.html#13259" class="Bound">tx</a><a id="13286" class="Symbol">)</a> <a id="13288" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13290" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="13297" class="Symbol">(</a><a id="13298" href="Ledger.Dijkstra.Specification.Transaction.html#6190" class="Field">TxFeesOf</a> <a id="13307" href="Ledger.Dijkstra.Specification.Utxo.html#13259" class="Bound">tx</a><a id="13309" class="Symbol">)</a> <a id="13311" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13313" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="13320" class="Symbol">(</a><a id="13321" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="13333" href="Ledger.Dijkstra.Specification.Utxo.html#13259" class="Bound">tx</a><a id="13335" class="Symbol">)</a>


<a id="13339" class="Comment">-- union a list of sets</a>
<a id="concatMapˡ"></a><a id="13363" href="Ledger.Dijkstra.Specification.Utxo.html#13363" class="Function">concatMapˡ</a> <a id="13374" class="Symbol">:</a> <a id="13376" class="Symbol">{</a><a id="13377" href="Ledger.Dijkstra.Specification.Utxo.html#13377" class="Bound">A</a> <a id="13379" href="Ledger.Dijkstra.Specification.Utxo.html#13379" class="Bound">B</a> <a id="13381" class="Symbol">:</a> <a id="13383" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="13387" class="Symbol">}</a> <a id="13389" class="Symbol">→</a> <a id="13391" class="Symbol">(</a><a id="13392" href="Ledger.Dijkstra.Specification.Utxo.html#13377" class="Bound">A</a> <a id="13394" class="Symbol">→</a> <a id="13396" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="13398" href="Ledger.Dijkstra.Specification.Utxo.html#13379" class="Bound">B</a><a id="13399" class="Symbol">)</a> <a id="13401" class="Symbol">→</a> <a id="13403" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="13408" href="Ledger.Dijkstra.Specification.Utxo.html#13377" class="Bound">A</a> <a id="13410" class="Symbol">→</a> <a id="13412" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="13414" href="Ledger.Dijkstra.Specification.Utxo.html#13379" class="Bound">B</a>
<a id="13416" href="Ledger.Dijkstra.Specification.Utxo.html#13363" class="Function">concatMapˡ</a> <a id="13427" href="Ledger.Dijkstra.Specification.Utxo.html#13427" class="Bound">f</a> <a id="13429" href="Ledger.Dijkstra.Specification.Utxo.html#13429" class="Bound">as</a> <a id="13432" class="Symbol">=</a> <a id="13434" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="13440" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="13442" href="Axiom.Set.html#2286" class="Function">unions</a> <a id="13449" class="Symbol">(</a><a id="13450" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="13459" class="Symbol">(</a><a id="13460" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="13464" href="Ledger.Dijkstra.Specification.Utxo.html#13427" class="Bound">f</a> <a id="13466" href="Ledger.Dijkstra.Specification.Utxo.html#13429" class="Bound">as</a><a id="13468" class="Symbol">))</a>
<a id="13471" class="Comment">-- maybe move this to agda-sets or src-lib-exts</a>

<a id="13520" class="Comment">-- No-double-spend across the batch: the collection of all spending inputs must</a>
<a id="13600" class="Comment">-- be pairwise disjoint.  NOTE: using `batchSpendInputs` alone is insufficient,</a>
<a id="13680" class="Comment">-- because set union would silently erase duplicates.</a>
<a id="PairwiseDisjoint"></a><a id="13734" href="Ledger.Dijkstra.Specification.Utxo.html#13734" class="Function">PairwiseDisjoint</a> <a id="13751" class="Symbol">:</a> <a id="13753" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="13758" class="Symbol">(</a><a id="13759" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="13761" href="Ledger.Dijkstra.Specification.Transaction.html#2993" class="Function">TxIn</a><a id="13765" class="Symbol">)</a> <a id="13767" class="Symbol">→</a> <a id="13769" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="13774" href="Ledger.Dijkstra.Specification.Utxo.html#13734" class="Function">PairwiseDisjoint</a> <a id="13791" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="13801" class="Symbol">=</a> <a id="13803" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="13805" href="Ledger.Dijkstra.Specification.Utxo.html#13734" class="Function">PairwiseDisjoint</a> <a id="13822" class="Symbol">(</a><a id="13823" href="Ledger.Dijkstra.Specification.Utxo.html#13823" class="Bound">X</a> <a id="13825" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="13827" href="Ledger.Dijkstra.Specification.Utxo.html#13827" class="Bound">Xs</a><a id="13829" class="Symbol">)</a>  <a id="13832" class="Symbol">=</a> <a id="13834" href="Data.List.Relation.Unary.All.html#1638" class="Datatype">List.All</a> <a id="13843" class="Symbol">(λ</a> <a id="13846" href="Ledger.Dijkstra.Specification.Utxo.html#13846" class="Bound">Y</a> <a id="13848" class="Symbol">→</a> <a id="13850" href="Axiom.Set.html#3515" class="Function">disjoint</a> <a id="13859" href="Ledger.Dijkstra.Specification.Utxo.html#13823" class="Bound">X</a> <a id="13861" href="Ledger.Dijkstra.Specification.Utxo.html#13846" class="Bound">Y</a><a id="13862" class="Symbol">)</a> <a id="13864" href="Ledger.Dijkstra.Specification.Utxo.html#13827" class="Bound">Xs</a> <a id="13867" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="13869" href="Ledger.Dijkstra.Specification.Utxo.html#13734" class="Function">PairwiseDisjoint</a> <a id="13886" href="Ledger.Dijkstra.Specification.Utxo.html#13827" class="Bound">Xs</a>

<a id="p2ScriptsWithContext"></a><a id="13890" href="Ledger.Dijkstra.Specification.Utxo.html#13890" class="Function">p2ScriptsWithContext</a> <a id="13911" class="Symbol">:</a> <a id="13913" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="13921" class="Symbol">→</a> <a id="13923" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="13926" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="13928" class="Symbol">→</a> <a id="13930" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="13935" class="Symbol">(</a><a id="13936" href="Ledger.Dijkstra.Specification.Script.Base.html#2379" class="Function">P2Script</a> <a id="13945" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="13947" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="13952" href="Ledger.Dijkstra.Specification.Script.Base.html#1720" class="Function">Data</a> <a id="13957" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="13959" href="Ledger.Dijkstra.Specification.Script.Base.html#1023" class="Function">ExUnits</a> <a id="13967" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="13969" href="Ledger.Dijkstra.Specification.Script.Base.html#994" class="Function">CostModel</a><a id="13978" class="Symbol">)</a>
<a id="13980" href="Ledger.Dijkstra.Specification.Utxo.html#13890" class="Function">p2ScriptsWithContext</a> <a id="14001" href="Ledger.Dijkstra.Specification.Utxo.html#14001" class="Bound">Γ</a> <a id="14003" href="Ledger.Dijkstra.Specification.Utxo.html#14003" class="Bound">t</a> <a id="14005" class="Symbol">=</a>
  <a id="14009" href="Ledger.Dijkstra.Specification.Script.Validation.html#5525" class="Function">collectP2ScriptsWithContext</a> <a id="14037" class="Symbol">(</a><a id="14038" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="14048" href="Ledger.Dijkstra.Specification.Utxo.html#14001" class="Bound">Γ</a><a id="14049" class="Symbol">)</a> <a id="14051" href="Ledger.Dijkstra.Specification.Utxo.html#14003" class="Bound">t</a>
                              <a id="14083" class="Symbol">(</a><a id="14084" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="14091" href="Ledger.Dijkstra.Specification.Utxo.html#14001" class="Bound">Γ</a><a id="14092" class="Symbol">)</a>        <a id="14101" class="Comment">-- pre-batch snapshot</a>
                              <a id="14153" class="Symbol">(</a><a id="14154" href="Ledger.Dijkstra.Specification.Utxo.html#1818" class="Field">DataPoolOf</a> <a id="14165" href="Ledger.Dijkstra.Specification.Utxo.html#14001" class="Bound">Γ</a><a id="14166" class="Symbol">)</a>    <a id="14171" class="Comment">-- batch datum-by-hash pool</a>
                              <a id="14229" class="Symbol">(</a><a id="14230" href="Ledger.Dijkstra.Specification.Utxo.html#1698" class="Field">ScriptPoolOf</a> <a id="14243" href="Ledger.Dijkstra.Specification.Utxo.html#14001" class="Bound">Γ</a><a id="14244" class="Symbol">)</a>  <a id="14247" class="Comment">-- batch script universe</a>

<a id="allDCerts"></a><a id="14273" href="Ledger.Dijkstra.Specification.Utxo.html#14273" class="Function">allDCerts</a> <a id="14283" class="Symbol">:</a> <a id="14285" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="14296" class="Symbol">→</a> <a id="14298" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="14303" href="Ledger.Dijkstra.Specification.Certs.html#1305" class="Datatype">DCert</a>
<a id="14309" href="Ledger.Dijkstra.Specification.Utxo.html#14273" class="Function">allDCerts</a> <a id="14319" href="Ledger.Dijkstra.Specification.Utxo.html#14319" class="Bound">t</a> <a id="14321" class="Symbol">=</a> <a id="14323" href="Ledger.Dijkstra.Specification.Transaction.html#7637" class="Field">DCertsOf</a> <a id="14332" href="Ledger.Dijkstra.Specification.Utxo.html#14319" class="Bound">t</a> <a id="14334" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="14337" href="Data.List.Base.html#4384" class="Function">concatMap</a> <a id="14347" href="Ledger.Dijkstra.Specification.Transaction.html#7637" class="Field">DCertsOf</a> <a id="14356" class="Symbol">(</a><a id="14357" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="14375" href="Ledger.Dijkstra.Specification.Utxo.html#14319" class="Bound">t</a><a id="14376" class="Symbol">)</a>

<a id="allSpendInputs"></a><a id="14379" href="Ledger.Dijkstra.Specification.Utxo.html#14379" class="Function">allSpendInputs</a> <a id="14394" class="Symbol">:</a> <a id="14396" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="14407" class="Symbol">→</a> <a id="14409" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="14411" href="Ledger.Dijkstra.Specification.Transaction.html#2993" class="Function">TxIn</a>
<a id="14416" href="Ledger.Dijkstra.Specification.Utxo.html#14379" class="Function">allSpendInputs</a> <a id="14431" href="Ledger.Dijkstra.Specification.Utxo.html#14431" class="Bound">t</a> <a id="14433" class="Symbol">=</a> <a id="14435" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="14449" href="Ledger.Dijkstra.Specification.Utxo.html#14431" class="Bound">t</a> <a id="14451" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="14453" href="Ledger.Dijkstra.Specification.Utxo.html#13363" class="Function">concatMapˡ</a> <a id="14464" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="14478" class="Symbol">(</a><a id="14479" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="14497" href="Ledger.Dijkstra.Specification.Utxo.html#14431" class="Bound">t</a><a id="14498" class="Symbol">)</a>

<a id="14501" class="Comment">-- Reference inputs are validated against the &quot;batch output view,&quot; so they may</a>
<a id="14580" class="Comment">-- point to outputs produced in the same batch (including self-usable outputs).</a>
<a id="allReferenceInputs"></a><a id="14660" href="Ledger.Dijkstra.Specification.Utxo.html#14660" class="Function">allReferenceInputs</a> <a id="14679" class="Symbol">:</a> <a id="14681" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="14692" class="Symbol">→</a> <a id="14694" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="14696" href="Ledger.Dijkstra.Specification.Transaction.html#2993" class="Function">TxIn</a>
<a id="14701" href="Ledger.Dijkstra.Specification.Utxo.html#14660" class="Function">allReferenceInputs</a> <a id="14720" href="Ledger.Dijkstra.Specification.Utxo.html#14720" class="Bound">t</a> <a id="14722" class="Symbol">=</a> <a id="14724" href="Ledger.Dijkstra.Specification.Transaction.html#7262" class="Field">ReferenceInputsOf</a> <a id="14742" href="Ledger.Dijkstra.Specification.Utxo.html#14720" class="Bound">t</a> <a id="14744" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="14746" href="Ledger.Dijkstra.Specification.Utxo.html#13363" class="Function">concatMapˡ</a> <a id="14757" href="Ledger.Dijkstra.Specification.Transaction.html#7262" class="Field">ReferenceInputsOf</a> <a id="14775" class="Symbol">(</a><a id="14776" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="14794" href="Ledger.Dijkstra.Specification.Utxo.html#14720" class="Bound">t</a><a id="14795" class="Symbol">)</a>

<a id="allSpendInputsList"></a><a id="14798" href="Ledger.Dijkstra.Specification.Utxo.html#14798" class="Function">allSpendInputsList</a> <a id="14817" class="Symbol">:</a> <a id="14819" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="14830" class="Symbol">→</a> <a id="14832" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="14837" class="Symbol">(</a><a id="14838" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="14840" href="Ledger.Dijkstra.Specification.Transaction.html#2993" class="Function">TxIn</a><a id="14844" class="Symbol">)</a>
<a id="14846" href="Ledger.Dijkstra.Specification.Utxo.html#14798" class="Function">allSpendInputsList</a> <a id="14865" href="Ledger.Dijkstra.Specification.Utxo.html#14865" class="Bound">t</a> <a id="14867" class="Symbol">=</a> <a id="14869" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="14883" href="Ledger.Dijkstra.Specification.Utxo.html#14865" class="Bound">t</a> <a id="14885" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="14887" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="14891" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="14905" class="Symbol">(</a><a id="14906" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="14924" href="Ledger.Dijkstra.Specification.Utxo.html#14865" class="Bound">t</a><a id="14925" class="Symbol">)</a>

<a id="noOverlappingSpendInputs"></a><a id="14928" href="Ledger.Dijkstra.Specification.Utxo.html#14928" class="Function">noOverlappingSpendInputs</a> <a id="14953" class="Symbol">:</a> <a id="14955" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="14966" class="Symbol">→</a> <a id="14968" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="14973" href="Ledger.Dijkstra.Specification.Utxo.html#14928" class="Function">noOverlappingSpendInputs</a> <a id="14998" class="Symbol">=</a> <a id="15000" href="Ledger.Dijkstra.Specification.Utxo.html#13734" class="Function">PairwiseDisjoint</a> <a id="15017" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="15019" href="Ledger.Dijkstra.Specification.Utxo.html#14798" class="Function">allSpendInputsList</a>

<a id="15039" class="Comment">-- Total Ada minted across the entire batch (top-level tx + all sub-txs).</a>
<a id="allMintedCoin"></a><a id="15113" href="Ledger.Dijkstra.Specification.Utxo.html#15113" class="Function">allMintedCoin</a> <a id="15127" class="Symbol">:</a> <a id="15129" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="15140" class="Symbol">→</a> <a id="15142" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
<a id="15147" href="Ledger.Dijkstra.Specification.Utxo.html#15113" class="Function">allMintedCoin</a> <a id="15161" href="Ledger.Dijkstra.Specification.Utxo.html#15161" class="Bound">txTop</a> <a id="15167" class="Symbol">=</a> <a id="15169" href="Data.List.Base.html#4227" class="Function">foldl</a> <a id="15175" class="Symbol">(λ</a> <a id="15178" href="Ledger.Dijkstra.Specification.Utxo.html#15178" class="Bound">acc</a> <a id="15182" href="Ledger.Dijkstra.Specification.Utxo.html#15182" class="Bound">txSub</a> <a id="15188" class="Symbol">→</a> <a id="15190" href="Ledger.Dijkstra.Specification.Utxo.html#15178" class="Bound">acc</a> <a id="15194" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="15196" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="15201" class="Symbol">(</a><a id="15202" href="Ledger.Dijkstra.Specification.Transaction.html#7399" class="Field">MintedValueOf</a> <a id="15216" href="Ledger.Dijkstra.Specification.Utxo.html#15182" class="Bound">txSub</a><a id="15221" class="Symbol">))</a>
                            <a id="15252" class="Symbol">(</a><a id="15253" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="15258" class="Symbol">(</a><a id="15259" href="Ledger.Dijkstra.Specification.Transaction.html#7399" class="Field">MintedValueOf</a> <a id="15273" href="Ledger.Dijkstra.Specification.Utxo.html#15161" class="Bound">txTop</a><a id="15278" class="Symbol">))</a>
                            <a id="15309" class="Symbol">(</a><a id="15310" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="15328" href="Ledger.Dijkstra.Specification.Utxo.html#15161" class="Bound">txTop</a><a id="15333" class="Symbol">)</a>
    <a id="15339" class="Comment">-- To maintain the total Ada supply invariant, this must satisfy</a>
    <a id="15408" class="Comment">-- `batchMintedCoin ≡ 0`; this is the generalization of Conway&#39;s</a>
    <a id="15477" class="Comment">-- `coin mint ≡ 0`.</a>

<a id="15498" class="Comment">-- UTxO change in case Tx.isValid ≡ true. case</a>
<a id="utxo✓"></a><a id="15545" href="Ledger.Dijkstra.Specification.Utxo.html#15545" class="Function">utxo✓</a> <a id="15551" class="Symbol">:</a> <a id="15553" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="15558" class="Symbol">→</a> <a id="15560" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="15563" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="15565" class="Symbol">→</a> <a id="15567" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
<a id="15572" href="Ledger.Dijkstra.Specification.Utxo.html#15545" class="Function">utxo✓</a> <a id="15578" class="Symbol">{</a><a id="15579" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a><a id="15589" class="Symbol">}</a> <a id="15591" href="Ledger.Dijkstra.Specification.Utxo.html#15591" class="Bound">utxo</a> <a id="15596" href="Ledger.Dijkstra.Specification.Utxo.html#15596" class="Bound">tx</a> <a id="15599" class="Symbol">=</a> <a id="15601" class="Symbol">(</a><a id="15602" href="Ledger.Dijkstra.Specification.Utxo.html#15591" class="Bound">utxo</a> <a id="15607" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="15609" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="15623" href="Ledger.Dijkstra.Specification.Utxo.html#15596" class="Bound">tx</a> <a id="15626" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="15627" class="Symbol">)</a> <a id="15629" href="Axiom.Set.Map.html#7640" class="Function Operator">∪ˡ</a> <a id="15632" href="Ledger.Dijkstra.Specification.Utxo.html#3251" class="Function">outs</a> <a id="15637" href="Ledger.Dijkstra.Specification.Utxo.html#15596" class="Bound">tx</a>
<a id="15640" href="Ledger.Dijkstra.Specification.Utxo.html#15545" class="Function">utxo✓</a> <a id="15646" class="Symbol">{</a><a id="15647" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a><a id="15657" class="Symbol">}</a> <a id="15659" href="Ledger.Dijkstra.Specification.Utxo.html#15659" class="Bound">utxo</a> <a id="15664" href="Ledger.Dijkstra.Specification.Utxo.html#15664" class="Bound">tx</a> <a id="15667" class="Symbol">=</a> <a id="15669" class="Symbol">(</a><a id="15670" href="Ledger.Dijkstra.Specification.Utxo.html#15659" class="Bound">utxo</a> <a id="15675" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="15677" href="Ledger.Dijkstra.Specification.Utxo.html#14379" class="Function">allSpendInputs</a> <a id="15692" href="Ledger.Dijkstra.Specification.Utxo.html#15664" class="Bound">tx</a> <a id="15695" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="15696" class="Symbol">)</a> <a id="15698" href="Axiom.Set.Map.html#7640" class="Function Operator">∪ˡ</a> <a id="15701" href="Ledger.Dijkstra.Specification.Utxo.html#11648" class="Function">batchOuts</a> <a id="15711" href="Ledger.Dijkstra.Specification.Utxo.html#15664" class="Bound">tx</a>
                              <a id="15744" class="Comment">-- ^ remove ALL spend inputs; add ALL outputs (top + subs)</a>

<a id="15804" class="Comment">-- Donations change in case Tx.isValid ≡ true.</a>
<a id="donations✓"></a><a id="15851" href="Ledger.Dijkstra.Specification.Utxo.html#15851" class="Function">donations✓</a> <a id="15862" class="Symbol">:</a> <a id="15864" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a> <a id="15874" class="Symbol">→</a> <a id="15876" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="15879" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="15881" class="Symbol">→</a> <a id="15883" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>
<a id="15893" href="Ledger.Dijkstra.Specification.Utxo.html#15851" class="Function">donations✓</a> <a id="15904" class="Symbol">{</a><a id="15905" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a><a id="15915" class="Symbol">}</a> <a id="15917" href="Ledger.Dijkstra.Specification.Utxo.html#15917" class="Bound">dons</a> <a id="15922" href="Ledger.Dijkstra.Specification.Utxo.html#15922" class="Bound">tx</a> <a id="15925" class="Symbol">=</a> <a id="15927" href="Ledger.Dijkstra.Specification.Utxo.html#15917" class="Bound">dons</a> <a id="15932" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="15934" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="15946" href="Ledger.Dijkstra.Specification.Utxo.html#15922" class="Bound">tx</a>
<a id="15949" href="Ledger.Dijkstra.Specification.Utxo.html#15851" class="Function">donations✓</a> <a id="15960" class="Symbol">{</a><a id="15961" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a><a id="15971" class="Symbol">}</a> <a id="15973" href="Ledger.Dijkstra.Specification.Utxo.html#15973" class="Bound">dons</a> <a id="15978" href="Ledger.Dijkstra.Specification.Utxo.html#15978" class="Bound">tx</a> <a id="15981" class="Symbol">=</a> <a id="15983" href="Ledger.Dijkstra.Specification.Utxo.html#15973" class="Bound">dons</a> <a id="15988" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="15990" href="Data.List.Base.html#4227" class="Function">foldl</a>  <a id="15997" class="Symbol">(λ</a> <a id="16000" href="Ledger.Dijkstra.Specification.Utxo.html#16000" class="Bound">acc</a> <a id="16004" href="Ledger.Dijkstra.Specification.Utxo.html#16004" class="Bound">txSub</a> <a id="16010" class="Symbol">→</a> <a id="16012" href="Ledger.Dijkstra.Specification.Utxo.html#16000" class="Bound">acc</a> <a id="16016" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="16018" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="16030" href="Ledger.Dijkstra.Specification.Utxo.html#16004" class="Bound">txSub</a><a id="16035" class="Symbol">)</a>
                                                <a id="16085" class="Symbol">(</a><a id="16086" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="16098" href="Ledger.Dijkstra.Specification.Utxo.html#15978" class="Bound">tx</a><a id="16100" class="Symbol">)</a> <a id="16102" class="Symbol">(</a><a id="16103" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="16121" href="Ledger.Dijkstra.Specification.Utxo.html#15978" class="Bound">tx</a><a id="16123" class="Symbol">)</a>

<a id="16126" class="Comment">-- Fees change in case Tx.isValid ≡ true.</a>
<a id="fees✓"></a><a id="16168" href="Ledger.Dijkstra.Specification.Utxo.html#16168" class="Function">fees✓</a> <a id="16174" class="Symbol">:</a> <a id="16176" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a> <a id="16181" class="Symbol">→</a> <a id="16183" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="16186" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="16188" class="Symbol">→</a> <a id="16190" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
<a id="16195" href="Ledger.Dijkstra.Specification.Utxo.html#16168" class="Function">fees✓</a> <a id="16201" class="Symbol">{</a><a id="16202" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a><a id="16212" class="Symbol">}</a> <a id="16214" href="Ledger.Dijkstra.Specification.Utxo.html#16214" class="Bound">fees</a> <a id="16219" class="Symbol">_</a> <a id="16221" class="Symbol">=</a> <a id="16223" href="Ledger.Dijkstra.Specification.Utxo.html#16214" class="Bound">fees</a>
<a id="16228" href="Ledger.Dijkstra.Specification.Utxo.html#16168" class="Function">fees✓</a> <a id="16234" class="Symbol">{</a><a id="16235" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a><a id="16245" class="Symbol">}</a> <a id="16247" href="Ledger.Dijkstra.Specification.Utxo.html#16247" class="Bound">fees</a> <a id="16252" href="Ledger.Dijkstra.Specification.Utxo.html#16252" class="Bound">tx</a> <a id="16255" class="Symbol">=</a> <a id="16257" href="Ledger.Dijkstra.Specification.Utxo.html#16247" class="Bound">fees</a> <a id="16262" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="16264" href="Ledger.Dijkstra.Specification.Transaction.html#6190" class="Field">TxFeesOf</a> <a id="16273" href="Ledger.Dijkstra.Specification.Utxo.html#16252" class="Bound">tx</a>

<a id="16277" class="Comment">-- UTxO change in case Tx.isValid ≡ false.</a>
<a id="utxo×"></a><a id="16320" href="Ledger.Dijkstra.Specification.Utxo.html#16320" class="Function">utxo×</a> <a id="16326" class="Symbol">:</a> <a id="16328" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="16333" class="Symbol">→</a> <a id="16335" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="16338" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="16340" class="Symbol">→</a> <a id="16342" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
<a id="16347" href="Ledger.Dijkstra.Specification.Utxo.html#16320" class="Function">utxo×</a> <a id="16353" class="Symbol">{</a><a id="16354" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a><a id="16364" class="Symbol">}</a> <a id="16366" href="Ledger.Dijkstra.Specification.Utxo.html#16366" class="Bound">utxo</a> <a id="16371" class="Symbol">_</a> <a id="16373" class="Symbol">=</a> <a id="16375" href="Ledger.Dijkstra.Specification.Utxo.html#16366" class="Bound">utxo</a>
<a id="16380" href="Ledger.Dijkstra.Specification.Utxo.html#16320" class="Function">utxo×</a> <a id="16386" class="Symbol">{</a><a id="16387" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a><a id="16397" class="Symbol">}</a> <a id="16399" href="Ledger.Dijkstra.Specification.Utxo.html#16399" class="Bound">utxo</a> <a id="16404" href="Ledger.Dijkstra.Specification.Utxo.html#16404" class="Bound">t</a> <a id="16406" class="Symbol">=</a> <a id="16408" href="Ledger.Dijkstra.Specification.Utxo.html#16399" class="Bound">utxo</a> <a id="16413" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="16415" class="Symbol">(</a><a id="16416" href="Ledger.Dijkstra.Specification.Transaction.html#6025" class="Field">CollateralInputsOf</a> <a id="16435" href="Ledger.Dijkstra.Specification.Utxo.html#16404" class="Bound">t</a><a id="16436" class="Symbol">)</a> <a id="16438" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a>

<a id="16441" class="Comment">-- Fees change in case Tx.isValid ≡ false.</a>
<a id="fees×"></a><a id="16484" href="Ledger.Dijkstra.Specification.Utxo.html#16484" class="Function">fees×</a> <a id="16490" class="Symbol">:</a> <a id="16492" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a> <a id="16497" class="Symbol">→</a> <a id="16499" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="16504" class="Symbol">→</a> <a id="16506" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="16509" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="16511" class="Symbol">→</a> <a id="16513" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
<a id="16518" href="Ledger.Dijkstra.Specification.Utxo.html#16484" class="Function">fees×</a> <a id="16524" class="Symbol">{</a><a id="16525" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a><a id="16535" class="Symbol">}</a> <a id="16537" href="Ledger.Dijkstra.Specification.Utxo.html#16537" class="Bound">fees</a> <a id="16542" class="Symbol">_</a> <a id="16544" class="Symbol">_</a> <a id="16546" class="Symbol">=</a> <a id="16548" href="Ledger.Dijkstra.Specification.Utxo.html#16537" class="Bound">fees</a>
<a id="16553" href="Ledger.Dijkstra.Specification.Utxo.html#16484" class="Function">fees×</a> <a id="16559" class="Symbol">{</a><a id="16560" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a><a id="16570" class="Symbol">}</a> <a id="16572" href="Ledger.Dijkstra.Specification.Utxo.html#16572" class="Bound">fees</a> <a id="16577" href="Ledger.Dijkstra.Specification.Utxo.html#16577" class="Bound">utxo</a> <a id="16582" href="Ledger.Dijkstra.Specification.Utxo.html#16582" class="Bound">tx</a> <a id="16585" class="Symbol">=</a> <a id="16587" href="Ledger.Dijkstra.Specification.Utxo.html#16572" class="Bound">fees</a> <a id="16592" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="16594" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="16599" class="Symbol">(</a><a id="16600" href="Ledger.Dijkstra.Specification.Utxo.html#3323" class="Function">balance</a> <a id="16608" class="Symbol">(</a><a id="16609" href="Ledger.Dijkstra.Specification.Utxo.html#16577" class="Bound">utxo</a> <a id="16614" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="16616" href="Ledger.Dijkstra.Specification.Transaction.html#6025" class="Field">CollateralInputsOf</a> <a id="16635" href="Ledger.Dijkstra.Specification.Utxo.html#16582" class="Bound">tx</a><a id="16637" class="Symbol">))</a>

<a id="allP2ScriptsWithContext"></a><a id="16641" href="Ledger.Dijkstra.Specification.Utxo.html#16641" class="Function">allP2ScriptsWithContext</a> <a id="16665" class="Symbol">:</a> <a id="16667" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="16675" class="Symbol">→</a> <a id="16677" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="16688" class="Symbol">→</a> <a id="16690" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="16695" class="Symbol">(</a><a id="16696" href="Ledger.Dijkstra.Specification.Script.Base.html#2379" class="Function">P2Script</a> <a id="16705" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="16707" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="16712" href="Ledger.Dijkstra.Specification.Script.Base.html#1720" class="Function">Data</a> <a id="16717" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="16719" href="Ledger.Dijkstra.Specification.Script.Base.html#1023" class="Function">ExUnits</a> <a id="16727" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="16729" href="Ledger.Dijkstra.Specification.Script.Base.html#994" class="Function">CostModel</a><a id="16738" class="Symbol">)</a>
<a id="16740" href="Ledger.Dijkstra.Specification.Utxo.html#16641" class="Function">allP2ScriptsWithContext</a> <a id="16764" href="Ledger.Dijkstra.Specification.Utxo.html#16764" class="Bound">Γ</a> <a id="16766" href="Ledger.Dijkstra.Specification.Utxo.html#16766" class="Bound">t</a> <a id="16768" class="Symbol">=</a>
  <a id="16772" href="Ledger.Dijkstra.Specification.Utxo.html#13890" class="Function">p2ScriptsWithContext</a> <a id="16793" href="Ledger.Dijkstra.Specification.Utxo.html#16764" class="Bound">Γ</a> <a id="16795" href="Ledger.Dijkstra.Specification.Utxo.html#16766" class="Bound">t</a> <a id="16797" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="16800" href="Data.List.Base.html#4384" class="Function">concatMap</a> <a id="16810" class="Symbol">(</a><a id="16811" href="Ledger.Dijkstra.Specification.Utxo.html#13890" class="Function">p2ScriptsWithContext</a> <a id="16832" href="Ledger.Dijkstra.Specification.Utxo.html#16764" class="Bound">Γ</a><a id="16833" class="Symbol">)</a> <a id="16835" class="Symbol">(</a><a id="16836" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="16854" href="Ledger.Dijkstra.Specification.Utxo.html#16766" class="Bound">t</a><a id="16855" class="Symbol">)</a>

<a id="16858" class="Comment">-- Deposits change in case Tx.isValid ≡ true.</a>
<a id="deposits✓"></a><a id="16904" href="Ledger.Dijkstra.Specification.Utxo.html#16904" class="Function">deposits✓</a> <a id="16914" class="Symbol">:</a> <a id="16916" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="16924" class="Symbol">→</a> <a id="16926" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a> <a id="16935" class="Symbol">→</a> <a id="16937" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="16940" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="16942" class="Symbol">→</a> <a id="16944" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>
<a id="16953" href="Ledger.Dijkstra.Specification.Utxo.html#16904" class="Function">deposits✓</a> <a id="16963" class="Symbol">{</a><a id="16964" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a><a id="16974" class="Symbol">}</a> <a id="16976" href="Ledger.Dijkstra.Specification.Utxo.html#16976" class="Bound">Γ</a> <a id="16978" href="Ledger.Dijkstra.Specification.Utxo.html#16978" class="Bound">deps</a> <a id="16983" href="Ledger.Dijkstra.Specification.Utxo.html#16983" class="Bound">tx</a> <a id="16986" class="Symbol">=</a> <a id="16988" href="Ledger.Dijkstra.Specification.Utxo.html#9202" class="Function">updateDeposits</a> <a id="17003" class="Symbol">(</a><a id="17004" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="17014" href="Ledger.Dijkstra.Specification.Utxo.html#16976" class="Bound">Γ</a><a id="17015" class="Symbol">)</a> <a id="17017" href="Ledger.Dijkstra.Specification.Utxo.html#16983" class="Bound">tx</a> <a id="17020" href="Ledger.Dijkstra.Specification.Utxo.html#16978" class="Bound">deps</a>
<a id="17025" href="Ledger.Dijkstra.Specification.Utxo.html#16904" class="Function">deposits✓</a> <a id="17035" class="Symbol">{</a><a id="17036" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a><a id="17046" class="Symbol">}</a> <a id="17048" href="Ledger.Dijkstra.Specification.Utxo.html#17048" class="Bound">Γ</a> <a id="17050" href="Ledger.Dijkstra.Specification.Utxo.html#17050" class="Bound">deps</a> <a id="17055" href="Ledger.Dijkstra.Specification.Utxo.html#17055" class="Bound">tx</a> <a id="17058" class="Symbol">=</a> <a id="17060" href="Data.List.Base.html#4126" class="Function">foldr</a>  <a id="17067" class="Symbol">(</a><a id="17068" href="Ledger.Dijkstra.Specification.Utxo.html#9202" class="Function">updateDeposits</a> <a id="17083" class="Symbol">(</a><a id="17084" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="17094" href="Ledger.Dijkstra.Specification.Utxo.html#17048" class="Bound">Γ</a><a id="17095" class="Symbol">))</a>
                                          <a id="17140" class="Symbol">(</a><a id="17141" href="Ledger.Dijkstra.Specification.Utxo.html#9202" class="Function">updateDeposits</a> <a id="17156" class="Symbol">(</a><a id="17157" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="17167" href="Ledger.Dijkstra.Specification.Utxo.html#17048" class="Bound">Γ</a><a id="17168" class="Symbol">)</a> <a id="17170" href="Ledger.Dijkstra.Specification.Utxo.html#17055" class="Bound">tx</a> <a id="17173" href="Ledger.Dijkstra.Specification.Utxo.html#17050" class="Bound">deps</a><a id="17177" class="Symbol">)</a>
                                          <a id="17221" class="Symbol">(</a><a id="17222" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="17240" href="Ledger.Dijkstra.Specification.Utxo.html#17055" class="Bound">tx</a><a id="17242" class="Symbol">)</a>

<a id="17245" class="Comment">-- UTxOState change in case Tx.isValid ≡ true.</a>
<a id="scripts✓"></a><a id="17292" href="Ledger.Dijkstra.Specification.Utxo.html#17292" class="Function">scripts✓</a> <a id="17301" class="Symbol">:</a> <a id="17303" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="17311" class="Symbol">→</a> <a id="17313" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="17323" class="Symbol">→</a> <a id="17325" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="17328" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="17330" class="Symbol">→</a> <a id="17332" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
<a id="17342" href="Ledger.Dijkstra.Specification.Utxo.html#17292" class="Function">scripts✓</a> <a id="17351" href="Ledger.Dijkstra.Specification.Utxo.html#17351" class="Bound">Γ</a> <a id="17353" href="Ledger.Dijkstra.Specification.Utxo.html#17353" class="Bound">s</a> <a id="17355" href="Ledger.Dijkstra.Specification.Utxo.html#17355" class="Bound">t</a> <a id="17357" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Utxo.html#15545}{\htmlId{17361}{\htmlClass{Function}{\text{utxo✓}}}}\, \,\htmlId{17367}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#3404}{\htmlId{17368}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17353}{\htmlId{17375}{\htmlClass{Bound}{\text{s}}}}\,\,\htmlId{17376}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17355}{\htmlId{17378}{\htmlClass{Bound}{\text{t}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#16168}{\htmlId{17382}{\htmlClass{Function}{\text{fees✓}}}}\, \,\htmlId{17388}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Prelude.Base.html#669}{\htmlId{17389}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17353}{\htmlId{17396}{\htmlClass{Bound}{\text{s}}}}\,\,\htmlId{17397}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17355}{\htmlId{17399}{\htmlClass{Bound}{\text{t}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#16904}{\htmlId{17403}{\htmlClass{Function}{\text{deposits✓}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17351}{\htmlId{17413}{\htmlClass{Bound}{\text{Γ}}}}\, \,\htmlId{17415}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Certs.html#3653}{\htmlId{17416}{\htmlClass{Field}{\text{DepositsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17353}{\htmlId{17427}{\htmlClass{Bound}{\text{s}}}}\,\,\htmlId{17428}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17355}{\htmlId{17430}{\htmlClass{Bound}{\text{t}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#15851}{\htmlId{17434}{\htmlClass{Function}{\text{donations✓}}}}\, \,\htmlId{17445}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Prelude.Base.html#554}{\htmlId{17446}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17353}{\htmlId{17458}{\htmlClass{Bound}{\text{s}}}}\,\,\htmlId{17459}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17355}{\htmlId{17461}{\htmlClass{Bound}{\text{t}}}}\, \end{pmatrix}$</a>

<a id="17466" class="Comment">-- UTxOState change in case Tx.isValid ≡ false.</a>
<a id="scripts×"></a><a id="17514" href="Ledger.Dijkstra.Specification.Utxo.html#17514" class="Function">scripts×</a> <a id="17523" class="Symbol">:</a> <a id="17525" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="17533" class="Symbol">→</a> <a id="17535" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="17545" class="Symbol">→</a> <a id="17547" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="17550" href="Ledger.Dijkstra.Specification.Utxo.html#618" class="Generalizable">ℓ</a> <a id="17552" class="Symbol">→</a> <a id="17554" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
<a id="17564" href="Ledger.Dijkstra.Specification.Utxo.html#17514" class="Function">scripts×</a> <a id="17573" href="Ledger.Dijkstra.Specification.Utxo.html#17573" class="Bound">Γ</a> <a id="17575" href="Ledger.Dijkstra.Specification.Utxo.html#17575" class="Bound">s</a> <a id="17577" href="Ledger.Dijkstra.Specification.Utxo.html#17577" class="Bound">t</a> <a id="17579" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Utxo.html#16320}{\htmlId{17583}{\htmlClass{Function}{\text{utxo×}}}}\, \,\htmlId{17589}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#3404}{\htmlId{17590}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17575}{\htmlId{17597}{\htmlClass{Bound}{\text{s}}}}\,\,\htmlId{17598}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17577}{\htmlId{17600}{\htmlClass{Bound}{\text{t}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Utxo.html#16484}{\htmlId{17604}{\htmlClass{Function}{\text{fees×}}}}\, \,\htmlId{17610}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Prelude.Base.html#669}{\htmlId{17611}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17575}{\htmlId{17618}{\htmlClass{Bound}{\text{s}}}}\,\,\htmlId{17619}{\htmlClass{Symbol}{\text{)}}}\, \,\htmlId{17621}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#3404}{\htmlId{17622}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17575}{\htmlId{17629}{\htmlClass{Bound}{\text{s}}}}\,\,\htmlId{17630}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17577}{\htmlId{17632}{\htmlClass{Bound}{\text{t}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Certs.html#3653}{\htmlId{17636}{\htmlClass{Field}{\text{DepositsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17575}{\htmlId{17647}{\htmlClass{Bound}{\text{s}}}}\, \\ \,\href{Ledger.Prelude.Base.html#554}{\htmlId{17651}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#17575}{\htmlId{17663}{\htmlClass{Bound}{\text{s}}}}\, \end{pmatrix}$</a>


<a id="17669" class="Keyword">private</a> <a id="17677" class="Keyword">variable</a>
  <a id="17688" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a>        <a id="17697" class="Symbol">:</a> <a id="17699" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a>
  <a id="17709" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="17711" href="Ledger.Dijkstra.Specification.Utxo.html#17711" class="Generalizable">s&#39;</a>     <a id="17718" class="Symbol">:</a> <a id="17720" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="17732" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>    <a id="17741" class="Symbol">:</a> <a id="17743" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a>
  <a id="17756" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a>    <a id="17765" class="Symbol">:</a> <a id="17767" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">SubLevelTx</a>
  <a id="17780" href="Ledger.Dijkstra.Specification.Utxo.html#17780" class="Generalizable">deposits</a> <a id="17789" class="Symbol">:</a> <a id="17791" href="Ledger.Dijkstra.Specification.Certs.html#868" class="Function">Deposits</a>


<a id="17802" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SUBUTXOS⦈_"></a><a id="17807" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXOS⦈_</a> <a id="17825" class="Symbol">:</a> <a id="17827" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="17835" class="Symbol">→</a> <a id="17837" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="17847" class="Symbol">→</a> <a id="17849" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">SubLevelTx</a> <a id="17860" class="Symbol">→</a> <a id="17862" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="17872" class="Symbol">→</a> <a id="17874" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="17879" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,SUBUTXOS⦈_.SUBUTXOS-scripts✓"></a><a id="17888" href="Ledger.Dijkstra.Specification.Utxo.html#17888" class="InductiveConstructor">SUBUTXOS-scripts✓</a> <a id="17906" class="Symbol">:</a>

    <a id="17913" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="17915" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="17933" class="Symbol">(</a><a id="17934" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="17944" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a><a id="17945" class="Symbol">)</a> <a id="17947" href="Ledger.Dijkstra.Specification.Utxo.html#17780" class="Generalizable">deposits</a> <a id="17956" class="Symbol">(</a><a id="17957" href="Ledger.Dijkstra.Specification.Transaction.html#7637" class="Field">DCertsOf</a> <a id="17966" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a><a id="17971" class="Symbol">)</a>
    <a id="17977" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="17979" href="Ledger.Dijkstra.Specification.Utxo.html#1562" class="Field">IsTopLevelValidFlagOf</a> <a id="18001" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18003" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="18005" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="18016" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="18055" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18057" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">⊢</a> <a id="18059" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18061" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">⇀⦇</a> <a id="18064" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="18070" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">,SUBUTXOS⦈</a> <a id="18081" href="Ledger.Dijkstra.Specification.Utxo.html#17292" class="Function">scripts✓</a> <a id="18090" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18092" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18094" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a>

  <a id="_⊢_⇀⦇_,SUBUTXOS⦈_.SUBUTXOS-scripts×"></a><a id="18103" href="Ledger.Dijkstra.Specification.Utxo.html#18103" class="InductiveConstructor">SUBUTXOS-scripts×</a> <a id="18121" class="Symbol">:</a>

    <a id="18128" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="18130" href="Ledger.Dijkstra.Specification.Utxo.html#1562" class="Field">IsTopLevelValidFlagOf</a> <a id="18152" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18154" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="18156" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="18168" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="18207" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18209" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">⊢</a> <a id="18211" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18213" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">⇀⦇</a> <a id="18216" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="18222" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">,SUBUTXOS⦈</a> <a id="18233" href="Ledger.Dijkstra.Specification.Utxo.html#17514" class="Function">scripts×</a> <a id="18242" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18244" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18246" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a>


<a id="18254" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="18259" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="18274" class="Symbol">:</a> <a id="18276" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="18284" class="Symbol">→</a> <a id="18286" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="18296" class="Symbol">→</a> <a id="18298" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="18309" class="Symbol">→</a> <a id="18311" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="18321" class="Symbol">→</a> <a id="18323" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="18328" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXOS⦈_.UTXOS-scripts✓"></a><a id="18337" href="Ledger.Dijkstra.Specification.Utxo.html#18337" class="InductiveConstructor">UTXOS-scripts✓</a> <a id="18352" class="Symbol">:</a>

    <a id="18359" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="18361" href="Ledger.Dijkstra.Specification.Utxo.html#4432" class="Datatype">ValidCertDeposits</a> <a id="18379" class="Symbol">(</a><a id="18380" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="18390" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a><a id="18391" class="Symbol">)</a> <a id="18393" href="Ledger.Dijkstra.Specification.Utxo.html#17780" class="Generalizable">deposits</a> <a id="18402" class="Symbol">(</a><a id="18403" href="Ledger.Dijkstra.Specification.Utxo.html#14273" class="Function">allDCerts</a> <a id="18413" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="18418" class="Symbol">)</a>
    <a id="18424" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="18426" href="Ledger.Dijkstra.Specification.Script.Validation.html#6495" class="Function">evalP2Scripts</a> <a id="18440" class="Symbol">(</a><a id="18441" href="Ledger.Dijkstra.Specification.Utxo.html#16641" class="Function">allP2ScriptsWithContext</a> <a id="18465" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18467" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="18472" class="Symbol">)</a> <a id="18474" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="18476" href="Ledger.Dijkstra.Specification.Transaction.html#8834" class="Field">IsValidFlagOf</a> <a id="18490" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>
    <a id="18500" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="18502" href="Ledger.Dijkstra.Specification.Transaction.html#8834" class="Field">IsValidFlagOf</a> <a id="18516" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="18522" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="18524" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="18535" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="18574" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18576" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">⊢</a> <a id="18578" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18580" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">⇀⦇</a> <a id="18583" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="18589" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">,UTXOS⦈</a> <a id="18597" href="Ledger.Dijkstra.Specification.Utxo.html#17292" class="Function">scripts✓</a> <a id="18606" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18608" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18610" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>

  <a id="_⊢_⇀⦇_,UTXOS⦈_.UTXOS-scripts×"></a><a id="18619" href="Ledger.Dijkstra.Specification.Utxo.html#18619" class="InductiveConstructor">UTXOS-scripts×</a> <a id="18634" class="Symbol">:</a>

    <a id="18641" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="18643" href="Ledger.Dijkstra.Specification.Script.Validation.html#6495" class="Function">evalP2Scripts</a> <a id="18657" class="Symbol">(</a><a id="18658" href="Ledger.Dijkstra.Specification.Utxo.html#16641" class="Function">allP2ScriptsWithContext</a> <a id="18682" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18684" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="18689" class="Symbol">)</a> <a id="18691" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="18693" href="Ledger.Dijkstra.Specification.Transaction.html#8834" class="Field">IsValidFlagOf</a> <a id="18707" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>
    <a id="18717" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="18719" href="Ledger.Dijkstra.Specification.Transaction.html#8834" class="Field">IsValidFlagOf</a> <a id="18733" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="18739" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="18741" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="18753" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="18792" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18794" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">⊢</a> <a id="18796" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18798" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">⇀⦇</a> <a id="18801" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="18807" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">,UTXOS⦈</a> <a id="18815" href="Ledger.Dijkstra.Specification.Utxo.html#17514" class="Function">scripts×</a> <a id="18824" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="18826" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="18828" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>


<a id="18836" class="Keyword">unquoteDecl</a> <a id="UTXOS-scripts✓-premises"></a><a id="18848" href="Ledger.Dijkstra.Specification.Utxo.html#18848" class="Function">UTXOS-scripts✓-premises</a> <a id="18872" class="Symbol">=</a> <a id="18874" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="18886" href="Ledger.Dijkstra.Specification.Utxo.html#18848" class="Function">UTXOS-scripts✓-premises</a> <a id="18910" class="Symbol">(</a><a id="18911" class="Keyword">quote</a> <a id="18917" href="Ledger.Dijkstra.Specification.Utxo.html#18337" class="InductiveConstructor">UTXOS-scripts✓</a><a id="18931" class="Symbol">)</a>
<a id="18933" class="Keyword">unquoteDecl</a> <a id="UTXOS-scripts×-premises"></a><a id="18945" href="Ledger.Dijkstra.Specification.Utxo.html#18945" class="Function">UTXOS-scripts×-premises</a> <a id="18969" class="Symbol">=</a> <a id="18971" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="18983" href="Ledger.Dijkstra.Specification.Utxo.html#18945" class="Function">UTXOS-scripts×-premises</a> <a id="19007" class="Symbol">(</a><a id="19008" class="Keyword">quote</a> <a id="19014" href="Ledger.Dijkstra.Specification.Utxo.html#18619" class="InductiveConstructor">UTXOS-scripts×</a><a id="19028" class="Symbol">)</a>

<a id="_⋀_"></a><a id="19031" href="Ledger.Dijkstra.Specification.Utxo.html#19031" class="Function Operator">_⋀_</a> <a id="19035" class="Symbol">=</a> <a id="19037" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a>  <a id="19042" class="Comment">-- synonym that improves readability of UTXO premises</a>


<a id="19098" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SUBUTXO⦈_"></a><a id="19103" href="Ledger.Dijkstra.Specification.Utxo.html#19103" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXO⦈_</a> <a id="19120" class="Symbol">:</a> <a id="19122" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="19130" class="Symbol">→</a> <a id="19132" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="19142" class="Symbol">→</a> <a id="19144" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">SubLevelTx</a> <a id="19155" class="Symbol">→</a> <a id="19157" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="19167" class="Symbol">→</a> <a id="19169" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="19174" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,SUBUTXO⦈_.SUBUTXO"></a><a id="19183" href="Ledger.Dijkstra.Specification.Utxo.html#19183" class="InductiveConstructor">SUBUTXO</a> <a id="19191" class="Symbol">:</a>
    <a id="19197" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="19199" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="19213" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="19219" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="19221" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="19227" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="19229" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="19243" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="19249" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="19251" href="Ledger.Dijkstra.Specification.Transaction.html#7262" class="Field">ReferenceInputsOf</a> <a id="19269" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="19275" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="19277" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="19283" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="19285" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="19296" class="Symbol">(</a><a id="19297" href="Ledger.Dijkstra.Specification.Utxo.html#1938" class="Field">SlotOf</a> <a id="19304" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a><a id="19305" class="Symbol">)</a> <a id="19307" class="Symbol">(</a><a id="19308" href="Ledger.Dijkstra.Specification.Transaction.html#6979" class="Field">ValidIntervalOf</a> <a id="19324" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a><a id="19329" class="Symbol">)</a>
    <a id="19335" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="19337" href="Ledger.Core.Specification.Address.html#1703" class="Field">MaybeNetworkIdOf</a> <a id="19354" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="19360" href="Prelude.html#2945" class="Function Operator">~</a> <a id="19362" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="19367" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="19381" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="19383" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="19385" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">⊢</a> <a id="19387" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="19389" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">⇀⦇</a> <a id="19392" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="19398" href="Ledger.Dijkstra.Specification.Utxo.html#17807" class="Datatype Operator">,SUBUTXOS⦈</a> <a id="19409" href="Ledger.Dijkstra.Specification.Utxo.html#17711" class="Generalizable">s&#39;</a>
      <a id="19418" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="19457" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="19459" href="Ledger.Dijkstra.Specification.Utxo.html#19103" class="Datatype Operator">⊢</a> <a id="19461" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="19463" href="Ledger.Dijkstra.Specification.Utxo.html#19103" class="Datatype Operator">⇀⦇</a> <a id="19466" href="Ledger.Dijkstra.Specification.Utxo.html#17756" class="Generalizable">txSub</a> <a id="19472" href="Ledger.Dijkstra.Specification.Utxo.html#19103" class="Datatype Operator">,SUBUTXO⦈</a> <a id="19482" href="Ledger.Dijkstra.Specification.Utxo.html#17711" class="Generalizable">s&#39;</a>

<a id="19486" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="19491" href="Ledger.Dijkstra.Specification.Utxo.html#19491" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="19505" class="Symbol">:</a> <a id="19507" href="Ledger.Dijkstra.Specification.Utxo.html#954" class="Record">UTxOEnv</a> <a id="19515" class="Symbol">→</a> <a id="19517" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="19527" class="Symbol">→</a> <a id="19529" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="19540" class="Symbol">→</a> <a id="19542" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a> <a id="19552" class="Symbol">→</a> <a id="19554" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="19559" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO"></a><a id="19568" href="Ledger.Dijkstra.Specification.Utxo.html#19568" class="InductiveConstructor">UTXO</a> <a id="19573" class="Symbol">:</a>

    <a id="19580" class="Keyword">let</a>  <a id="19585" class="Keyword">open</a> <a id="19590" href="Ledger.Dijkstra.Specification.Utxo.html#11862" class="Module">Accounting</a> <a id="19601" class="Symbol">(</a><a id="19602" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="19612" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a><a id="19613" class="Symbol">)</a> <a id="19615" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="19621" class="Symbol">(</a><a id="19622" href="Ledger.Dijkstra.Specification.Certs.html#3653" class="Field">DepositsOf</a> <a id="19633" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a><a id="19634" class="Symbol">)</a>

         <a id="19646" href="Ledger.Dijkstra.Specification.Utxo.html#19646" class="Bound">pp</a>        <a id="19656" class="Symbol">=</a> <a id="19658" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="19668" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a>
         <a id="19679" href="Ledger.Dijkstra.Specification.Utxo.html#19679" class="Bound">utxo₀</a>     <a id="19689" class="Symbol">=</a> <a id="19691" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="19698" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a>
         <a id="19709" href="Ledger.Dijkstra.Specification.Utxo.html#19709" class="Bound">utxo</a>      <a id="19719" class="Symbol">=</a> <a id="19721" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="19728" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a>
         <a id="19739" href="Ledger.Dijkstra.Specification.Utxo.html#19739" class="Bound">overhead</a>  <a id="19749" class="Symbol">=</a> <a id="19751" class="Number">160</a>

         <a id="19765" href="Ledger.Dijkstra.Specification.Utxo.html#19765" class="Bound">txOutsʰ</a> <a id="19773" class="Symbol">:</a> <a id="19775" href="Ledger.Dijkstra.Specification.Transaction.html#1326" class="Field">Ix</a> <a id="19778" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="19780" href="Ledger.Dijkstra.Specification.Transaction.html#14527" class="Function">TxOutʰ</a>
         <a id="19796" href="Ledger.Dijkstra.Specification.Utxo.html#19765" class="Bound">txOutsʰ</a> <a id="19804" class="Symbol">=</a> <a id="19806" href="Axiom.Set.Map.html#7108" class="Function">mapValues</a> <a id="19816" href="Ledger.Dijkstra.Specification.Transaction.html#14614" class="Function">txOutHash</a> <a id="19826" class="Symbol">(</a><a id="19827" href="Ledger.Dijkstra.Specification.Transaction.html#8407" class="Field">TxOutsOf</a> <a id="19836" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="19841" class="Symbol">)</a>
    <a id="19847" class="Keyword">in</a>
    <a id="19854" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="19856" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="19870" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="19876" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="19878" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="19884" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="19886" href="Ledger.Dijkstra.Specification.Transaction.html#7129" class="Field">SpendInputsOf</a> <a id="19900" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="19906" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="19908" href="Ledger.Dijkstra.Specification.Transaction.html#7262" class="Field">ReferenceInputsOf</a> <a id="19926" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="19932" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="19934" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="19940" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="19942" href="Ledger.Dijkstra.Specification.Utxo.html#9411" class="Datatype">inInterval</a> <a id="19953" class="Symbol">(</a><a id="19954" href="Ledger.Dijkstra.Specification.Utxo.html#1938" class="Field">SlotOf</a> <a id="19961" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a><a id="19962" class="Symbol">)</a> <a id="19964" class="Symbol">(</a><a id="19965" href="Ledger.Dijkstra.Specification.Transaction.html#6979" class="Field">ValidIntervalOf</a> <a id="19981" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="19986" class="Symbol">)</a>
    <a id="19992" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="19994" href="Ledger.Dijkstra.Specification.Utxo.html#3599" class="Function">minfee</a> <a id="20001" href="Ledger.Dijkstra.Specification.Utxo.html#19646" class="Bound">pp</a> <a id="20004" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20010" href="Ledger.Dijkstra.Specification.Utxo.html#19709" class="Bound">utxo</a> <a id="20015" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="20017" href="Ledger.Dijkstra.Specification.Transaction.html#6190" class="Field">TxFeesOf</a> <a id="20026" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>
    <a id="20036" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20038" href="Ledger.Dijkstra.Specification.Utxo.html#12515" class="Function">consumed</a> <a id="20047" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="20049" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="20051" href="Ledger.Dijkstra.Specification.Utxo.html#12924" class="Function">produced</a>
    <a id="20064" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20066" href="Ledger.Dijkstra.Specification.Transaction.html#6867" class="Field">SizeOf</a> <a id="20073" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20079" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="20081" href="Ledger.Dijkstra.Specification.PParams.html#1977" class="Field">maxTxSize</a> <a id="20091" href="Ledger.Dijkstra.Specification.Utxo.html#19646" class="Bound">pp</a>
    <a id="20098" class="Comment">-- ∙ refScriptsSize utxo tx ≤ pp .maxRefScriptSizePerTx     -- TODO: Dijkstra analog</a>

    <a id="20188" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20190" href="Ledger.Dijkstra.Specification.Utxo.html#14379" class="Function">allSpendInputs</a> <a id="20205" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20211" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="20213" href="Class.IsSet.html#916" class="Function">dom</a> <a id="20217" href="Ledger.Dijkstra.Specification.Utxo.html#19679" class="Bound">utxo₀</a>                          <a id="20248" class="Comment">-- (1)</a>
    <a id="20259" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20261" href="Ledger.Dijkstra.Specification.Utxo.html#14928" class="Function">noOverlappingSpendInputs</a> <a id="20286" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>                            <a id="20319" class="Comment">-- (2)</a>
    <a id="20330" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20332" href="Ledger.Dijkstra.Specification.Utxo.html#14660" class="Function">allReferenceInputs</a> <a id="20351" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20357" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="20359" href="Class.IsSet.html#916" class="Function">dom</a> <a id="20363" class="Symbol">(</a><a id="20364" href="Ledger.Dijkstra.Specification.Utxo.html#11772" class="Function">utxoView</a> <a id="20373" href="Ledger.Dijkstra.Specification.Utxo.html#19679" class="Bound">utxo₀</a> <a id="20379" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="20384" class="Symbol">)</a>     <a id="20390" class="Comment">-- (3)</a>
    <a id="20401" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20403" href="Ledger.Dijkstra.Specification.Transaction.html#18361" class="Function">requiredGuardsInTopLevel</a> <a id="20428" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20434" class="Symbol">(</a><a id="20435" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="20453" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="20458" class="Symbol">)</a>  <a id="20461" class="Comment">-- (4)</a>
    <a id="20472" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20474" href="Ledger.Dijkstra.Specification.Transaction.html#5826" class="Field">RedeemersOf</a> <a id="20486" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20492" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="20494" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="20496" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="20498" class="Symbol">→</a> <a id="20500" href="Ledger.Dijkstra.Specification.Utxo.html#10885" class="Function">collateralCheck</a> <a id="20516" href="Ledger.Dijkstra.Specification.Utxo.html#19646" class="Bound">pp</a> <a id="20519" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20525" href="Ledger.Dijkstra.Specification.Utxo.html#19679" class="Bound">utxo₀</a>
    <a id="20535" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20537" href="Ledger.Dijkstra.Specification.Utxo.html#15113" class="Function">allMintedCoin</a> <a id="20551" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20557" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="20559" class="Number">0</a>

    <a id="20566" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20568" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="20571" href="Ledger.Dijkstra.Specification.Utxo.html#20571" class="Bound">(_</a> <a id="20574" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20576" href="Ledger.Dijkstra.Specification.Utxo.html#20576" class="Bound">txout</a><a id="20581" href="Ledger.Dijkstra.Specification.Utxo.html#20571" class="Bound">)</a> <a id="20583" href="Class.IsSet.html#576" class="Function">∈</a> <a id="20585" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="20587" href="Ledger.Dijkstra.Specification.Utxo.html#19765" class="Bound">txOutsʰ</a> <a id="20595" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="20597" href="Class.IsSet.html#576" class="Function">]</a>
      <a id="20605" class="Symbol">(</a><a id="20606" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="20613" class="Symbol">((</a><a id="20615" href="Ledger.Dijkstra.Specification.Utxo.html#19739" class="Bound">overhead</a> <a id="20624" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="20626" href="Ledger.Dijkstra.Specification.Utxo.html#828" class="Function">utxoEntrySize</a> <a id="20640" href="Ledger.Dijkstra.Specification.Utxo.html#20576" class="Bound">txout</a><a id="20645" class="Symbol">)</a> <a id="20647" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="20649" href="Ledger.Dijkstra.Specification.PParams.html#2599" class="Field">coinsPerUTxOByte</a> <a id="20666" href="Ledger.Dijkstra.Specification.Utxo.html#19646" class="Bound">pp</a><a id="20668" class="Symbol">)</a> <a id="20670" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1033" class="Function Operator">≤ᵗ</a> <a id="20673" href="Ledger.Dijkstra.Specification.Transaction.html#14699" class="Function">getValueʰ</a> <a id="20683" href="Ledger.Dijkstra.Specification.Utxo.html#20576" class="Bound">txout</a><a id="20688" class="Symbol">)</a>
      <a id="20696" href="Ledger.Dijkstra.Specification.Utxo.html#19031" class="Function Operator">⋀</a> <a id="20698" class="Symbol">(</a><a id="20699" href="Ledger.Dijkstra.Specification.Abstract.html#1001" class="Field">serializedSize</a> <a id="20714" class="Symbol">(</a><a id="20715" href="Ledger.Dijkstra.Specification.Transaction.html#14699" class="Function">getValueʰ</a> <a id="20725" href="Ledger.Dijkstra.Specification.Utxo.html#20576" class="Bound">txout</a><a id="20730" class="Symbol">)</a> <a id="20732" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="20734" href="Ledger.Dijkstra.Specification.PParams.html#2141" class="Field">maxValSize</a> <a id="20745" href="Ledger.Dijkstra.Specification.Utxo.html#19646" class="Bound">pp</a><a id="20747" class="Symbol">)</a>

    <a id="20754" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20756" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="20759" href="Ledger.Dijkstra.Specification.Utxo.html#20759" class="Bound">(</a><a id="20760" href="Ledger.Dijkstra.Specification.Utxo.html#20760" class="Bound">a</a> <a id="20762" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20764" href="Ledger.Dijkstra.Specification.Utxo.html#20759" class="Bound">_)</a> <a id="20767" href="Class.IsSet.html#576" class="Function">∈</a> <a id="20769" href="Class.IsSet.html#959" class="Function">range</a> <a id="20775" href="Ledger.Dijkstra.Specification.Utxo.html#19765" class="Bound">txOutsʰ</a> <a id="20783" href="Class.IsSet.html#576" class="Function">]</a>
      <a id="20791" class="Symbol">(</a><a id="20792" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="20800" class="Symbol">(</a><a id="20801" href="Function.Base.html#725" class="Function">const</a> <a id="20807" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="20808" class="Symbol">)</a> <a id="20810" class="Symbol">(λ</a> <a id="20813" href="Ledger.Dijkstra.Specification.Utxo.html#20813" class="Bound">a</a> <a id="20815" class="Symbol">→</a> <a id="20817" href="Ledger.Core.Specification.Address.html#1964" class="Field">AttrSizeOf</a> <a id="20828" href="Ledger.Dijkstra.Specification.Utxo.html#20813" class="Bound">a</a> <a id="20830" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="20832" class="Number">64</a><a id="20834" class="Symbol">))</a> <a id="20837" href="Ledger.Dijkstra.Specification.Utxo.html#20760" class="Bound">a</a> <a id="20839" href="Ledger.Dijkstra.Specification.Utxo.html#19031" class="Function Operator">⋀</a> <a id="20841" class="Symbol">(</a><a id="20842" href="Ledger.Core.Specification.Address.html#3130" class="Function">netId</a> <a id="20848" href="Ledger.Dijkstra.Specification.Utxo.html#20760" class="Bound">a</a> <a id="20850" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="20852" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a><a id="20861" class="Symbol">)</a>

    <a id="20868" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20870" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="20873" href="Ledger.Dijkstra.Specification.Utxo.html#20873" class="Bound">a</a> <a id="20875" href="Class.IsSet.html#576" class="Function">∈</a> <a id="20877" href="Class.IsSet.html#916" class="Function">dom</a> <a id="20881" class="Symbol">(</a><a id="20882" href="Ledger.Core.Specification.Address.html#1839" class="Field">WithdrawalsOf</a> <a id="20896" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a><a id="20901" class="Symbol">)</a><a id="20902" href="Class.IsSet.html#576" class="Function">]</a> <a id="20904" href="Ledger.Core.Specification.Address.html#1580" class="Field">NetworkIdOf</a> <a id="20916" href="Ledger.Dijkstra.Specification.Utxo.html#20873" class="Bound">a</a> <a id="20918" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="20920" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="20934" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20936" href="Ledger.Core.Specification.Address.html#1703" class="Field">MaybeNetworkIdOf</a> <a id="20953" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="20959" href="Prelude.html#2945" class="Function Operator">~</a> <a id="20961" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="20966" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="20980" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="20982" href="Ledger.Dijkstra.Specification.Transaction.html#8693" class="Field">CurrentTreasuryOf</a> <a id="21000" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a>  <a id="21007" href="Prelude.html#2945" class="Function Operator">~</a> <a id="21009" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="21014" class="Symbol">(</a><a id="21015" href="Ledger.Prelude.Base.html#889" class="Field">TreasuryOf</a> <a id="21026" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a><a id="21027" class="Symbol">)</a>
    <a id="21033" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="21035" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="21037" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">⊢</a> <a id="21039" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="21041" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">⇀⦇</a> <a id="21044" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="21050" href="Ledger.Dijkstra.Specification.Utxo.html#18259" class="Datatype Operator">,UTXOS⦈</a> <a id="21058" href="Ledger.Dijkstra.Specification.Utxo.html#17711" class="Generalizable">s&#39;</a>
      <a id="21067" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="21106" href="Ledger.Dijkstra.Specification.Utxo.html#17688" class="Generalizable">Γ</a> <a id="21108" href="Ledger.Dijkstra.Specification.Utxo.html#19491" class="Datatype Operator">⊢</a> <a id="21110" href="Ledger.Dijkstra.Specification.Utxo.html#17709" class="Generalizable">s</a> <a id="21112" href="Ledger.Dijkstra.Specification.Utxo.html#19491" class="Datatype Operator">⇀⦇</a> <a id="21115" href="Ledger.Dijkstra.Specification.Utxo.html#17732" class="Generalizable">txTop</a> <a id="21121" href="Ledger.Dijkstra.Specification.Utxo.html#19491" class="Datatype Operator">,UTXO⦈</a> <a id="21128" href="Ledger.Dijkstra.Specification.Utxo.html#17711" class="Generalizable">s&#39;</a>

</pre></body></html>