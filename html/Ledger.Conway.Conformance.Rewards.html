<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Rewards</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="74" class="Keyword">open</a> <a id="79" class="Keyword">import</a> <a id="86" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="127" class="Keyword">module</a> <a id="134" href="Ledger.Conway.Conformance.Rewards.html" class="Module">Ledger.Conway.Conformance.Rewards</a>
  <a id="170" class="Symbol">(</a><a id="171" href="Ledger.Conway.Conformance.Rewards.html#171" class="Bound">txs</a> <a id="175" class="Symbol">:</a> <a id="177" class="Symbol">_)</a> <a id="180" class="Symbol">(</a><a id="181" class="Keyword">open</a> <a id="186" href="Ledger.Conway.Specification.Transaction.html#999" class="Module">TransactionStructure</a> <a id="207" href="Ledger.Conway.Conformance.Rewards.html#171" class="Bound">txs</a><a id="210" class="Symbol">)</a>
  <a id="214" class="Symbol">(</a><a id="215" href="Ledger.Conway.Conformance.Rewards.html#215" class="Bound">abs</a> <a id="219" class="Symbol">:</a> <a id="221" href="Ledger.Conway.Specification.Abstract.html#654" class="Record">AbstractFunctions</a> <a id="239" href="Ledger.Conway.Conformance.Rewards.html#171" class="Bound">txs</a><a id="242" class="Symbol">)</a>
  <a id="246" class="Keyword">where</a>

<a id="253" class="Keyword">open</a> <a id="258" class="Keyword">import</a> <a id="265" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="325" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="383" href="Ledger.Conway.Conformance.Rewards.html#171" class="Bound">txs</a> <a id="387" href="Ledger.Conway.Conformance.Rewards.html#215" class="Bound">abs</a>
<a id="391" class="Keyword">open</a> <a id="396" class="Keyword">import</a> <a id="403" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="434" href="Ledger.Conway.Conformance.Rewards.html#171" class="Bound">txs</a> <a id="438" href="Ledger.Conway.Conformance.Rewards.html#215" class="Bound">abs</a>

<a id="443" class="Keyword">open</a> <a id="448" class="Keyword">import</a> <a id="455" href="Ledger.Conway.Specification.Rewards.html" class="Module">Ledger.Conway.Specification.Rewards</a> <a id="491" href="Ledger.Conway.Conformance.Rewards.html#171" class="Bound">txs</a> <a id="495" href="Ledger.Conway.Conformance.Rewards.html#215" class="Bound">abs</a>
  <a id="501" class="Keyword">hiding</a> <a id="508" class="Symbol">(</a><a id="509" href="Ledger.Conway.Specification.Rewards.html#8220" class="Datatype Operator">_⊢_⇀⦇_,SNAP⦈_</a><a id="522" class="Symbol">)</a> <a id="524" class="Keyword">public</a>

<a id="532" class="Keyword">private</a> <a id="540" class="Keyword">variable</a>
  <a id="551" href="Ledger.Conway.Conformance.Rewards.html#551" class="Generalizable">lstate</a> <a id="558" class="Symbol">:</a> <a id="560" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a>
  <a id="569" href="Ledger.Conway.Conformance.Rewards.html#569" class="Generalizable">mark</a> <a id="574" href="Ledger.Conway.Conformance.Rewards.html#574" class="Generalizable">set</a> <a id="578" href="Ledger.Conway.Conformance.Rewards.html#578" class="Generalizable">go</a> <a id="581" class="Symbol">:</a> <a id="583" href="Ledger.Conway.Specification.Rewards.html#6433" class="Record">Snapshot</a>
  <a id="594" href="Ledger.Conway.Conformance.Rewards.html#594" class="Generalizable">feeSS</a> <a id="600" class="Symbol">:</a> <a id="602" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>

<a id="608" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SNAP⦈_"></a><a id="613" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">_⊢_⇀⦇_,SNAP⦈_</a> <a id="627" class="Symbol">:</a> <a id="629" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a> <a id="636" class="Symbol">→</a> <a id="638" href="Ledger.Conway.Specification.Rewards.html#7745" class="Record">Snapshots</a> <a id="648" class="Symbol">→</a> <a id="650" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="652" class="Symbol">→</a> <a id="654" href="Ledger.Conway.Specification.Rewards.html#7745" class="Record">Snapshots</a> <a id="664" class="Symbol">→</a> <a id="666" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="671" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,SNAP⦈_.SNAP"></a><a id="679" href="Ledger.Conway.Conformance.Rewards.html#679" class="InductiveConstructor">SNAP</a> <a id="684" class="Symbol">:</a> <a id="686" class="Keyword">let</a> <a id="690" class="Keyword">open</a> <a id="695" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">LState</a> <a id="702" href="Ledger.Conway.Conformance.Rewards.html#551" class="Generalizable">lstate</a>
             <a id="722" class="Keyword">open</a> <a id="727" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">UTxOState</a> <a id="737" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a>
             <a id="757" class="Keyword">open</a> <a id="762" href="Ledger.Conway.Conformance.Certs.html#956" class="Module">CertState</a> <a id="772" href="Ledger.Conway.Conformance.Ledger.html#887" class="Function">certState</a>
             <a id="795" href="Ledger.Conway.Conformance.Rewards.html#795" class="Bound">stake</a> <a id="801" class="Symbol">=</a> <a id="803" href="Ledger.Conway.Specification.Rewards.html#7046" class="Function">stakeDistr</a> <a id="814" href="Ledger.Conway.Specification.Utxo.html#1294" class="Function">utxo</a> <a id="819" class="Symbol">(</a><a id="820" class="Keyword">record</a> <a id="827" class="Symbol">{</a> <a id="829" href="Ledger.Conway.Conformance.Rewards.html#829" class="Module">DState</a> <a id="836" href="Ledger.Conway.Conformance.Certs.html#1015" class="Function">dState</a> <a id="843" class="Symbol">})</a> <a id="846" href="Ledger.Conway.Conformance.Certs.html#1035" class="Function">pState</a>
    <a id="857" class="Keyword">in</a>
    <a id="864" href="Ledger.Conway.Conformance.Rewards.html#551" class="Generalizable">lstate</a> <a id="871" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Rewards.html#569}{\htmlId{875}{\htmlClass{Generalizable}{\text{mark}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#574}{\htmlId{882}{\htmlClass{Generalizable}{\text{set}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#578}{\htmlId{888}{\htmlClass{Generalizable}{\text{go}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#594}{\htmlId{893}{\htmlClass{Generalizable}{\text{feeSS}}}}\, \end{pmatrix}$</a> <a id="901" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">⇀⦇</a> <a id="904" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="907" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">,SNAP⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Rewards.html#795}{\htmlId{916}{\htmlClass{Bound}{\text{stake}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#569}{\htmlId{924}{\htmlClass{Generalizable}{\text{mark}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#574}{\htmlId{931}{\htmlClass{Generalizable}{\text{set}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#1316}{\htmlId{937}{\htmlClass{Function}{\text{fees}}}}\, \end{pmatrix}$</a>
</pre></body></html>