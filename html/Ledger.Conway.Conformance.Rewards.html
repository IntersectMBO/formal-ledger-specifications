<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Rewards</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Core.Specification.Abstract.html" class="Module">Ledger.Core.Specification.Abstract</a>
<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a>

<a id="123" class="Keyword">module</a> <a id="130" href="Ledger.Conway.Conformance.Rewards.html" class="Module">Ledger.Conway.Conformance.Rewards</a>
  <a id="166" class="Symbol">(</a><a id="167" href="Ledger.Conway.Conformance.Rewards.html#167" class="Bound">txs</a> <a id="171" class="Symbol">:</a> <a id="173" href="Ledger.Core.Specification.Transaction.html#896" class="Record">TransactionStructure</a><a id="193" class="Symbol">)</a> <a id="195" class="Symbol">(</a><a id="196" class="Keyword">open</a> <a id="201" href="Ledger.Core.Specification.Transaction.html#896" class="Module">TransactionStructure</a> <a id="222" href="Ledger.Conway.Conformance.Rewards.html#167" class="Bound">txs</a><a id="225" class="Symbol">)</a>
  <a id="229" class="Symbol">(</a><a id="230" href="Ledger.Conway.Conformance.Rewards.html#230" class="Bound">abs</a> <a id="234" class="Symbol">:</a> <a id="236" href="Ledger.Core.Specification.Abstract.html#826" class="Record">AbstractFunctions</a> <a id="254" href="Ledger.Conway.Conformance.Rewards.html#167" class="Bound">txs</a><a id="257" class="Symbol">)</a>
  <a id="261" class="Keyword">where</a>

<a id="268" class="Keyword">open</a> <a id="273" class="Keyword">import</a> <a id="280" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="296" class="Keyword">open</a> <a id="301" class="Keyword">import</a> <a id="308" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="340" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
<a id="353" class="Keyword">open</a> <a id="358" class="Keyword">import</a> <a id="365" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="398" href="Ledger.Conway.Conformance.Rewards.html#167" class="Bound">txs</a> <a id="402" href="Ledger.Conway.Conformance.Rewards.html#230" class="Bound">abs</a>
<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="449" href="Ledger.Conway.Conformance.Rewards.html#167" class="Bound">txs</a> <a id="453" href="Ledger.Conway.Conformance.Rewards.html#230" class="Bound">abs</a>

<a id="458" class="Keyword">open</a> <a id="463" class="Keyword">import</a> <a id="470" href="Ledger.Conway.Specification.Rewards.html" class="Module">Ledger.Conway.Specification.Rewards</a> <a id="506" href="Ledger.Conway.Conformance.Rewards.html#167" class="Bound">txs</a> <a id="510" href="Ledger.Conway.Conformance.Rewards.html#230" class="Bound">abs</a>
  <a id="516" class="Keyword">hiding</a> <a id="523" class="Symbol">(</a><a id="524" href="Ledger.Conway.Specification.Rewards.html#8209" class="Datatype Operator">_⊢_⇀⦇_,SNAP⦈_</a><a id="537" class="Symbol">)</a> <a id="539" class="Keyword">public</a>

<a id="547" class="Keyword">private</a> <a id="555" class="Keyword">variable</a>
  <a id="566" href="Ledger.Conway.Conformance.Rewards.html#566" class="Generalizable">lstate</a> <a id="573" class="Symbol">:</a> <a id="575" href="Ledger.Conway.Conformance.Ledger.html#738" class="Record">LState</a>
  <a id="584" href="Ledger.Conway.Conformance.Rewards.html#584" class="Generalizable">mark</a> <a id="589" href="Ledger.Conway.Conformance.Rewards.html#589" class="Generalizable">set</a> <a id="593" href="Ledger.Conway.Conformance.Rewards.html#593" class="Generalizable">go</a> <a id="596" class="Symbol">:</a> <a id="598" href="Ledger.Conway.Specification.Rewards.html#6487" class="Record">Snapshot</a>
  <a id="609" href="Ledger.Conway.Conformance.Rewards.html#609" class="Generalizable">feeSS</a> <a id="615" class="Symbol">:</a> <a id="617" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>

<a id="623" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SNAP⦈_"></a><a id="628" href="Ledger.Conway.Conformance.Rewards.html#628" class="Datatype Operator">_⊢_⇀⦇_,SNAP⦈_</a> <a id="642" class="Symbol">:</a> <a id="644" href="Ledger.Conway.Conformance.Ledger.html#738" class="Record">LState</a> <a id="651" class="Symbol">→</a> <a id="653" href="Ledger.Conway.Specification.Rewards.html#7734" class="Record">Snapshots</a> <a id="663" class="Symbol">→</a> <a id="665" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="667" class="Symbol">→</a> <a id="669" href="Ledger.Conway.Specification.Rewards.html#7734" class="Record">Snapshots</a> <a id="679" class="Symbol">→</a> <a id="681" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="686" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,SNAP⦈_.SNAP"></a><a id="694" href="Ledger.Conway.Conformance.Rewards.html#694" class="InductiveConstructor">SNAP</a> <a id="699" class="Symbol">:</a> <a id="701" class="Keyword">let</a> <a id="705" class="Keyword">open</a> <a id="710" href="Ledger.Conway.Conformance.Ledger.html#738" class="Module">LState</a> <a id="717" href="Ledger.Conway.Conformance.Rewards.html#566" class="Generalizable">lstate</a>
             <a id="737" class="Keyword">open</a> <a id="742" href="Ledger.Conway.Specification.Utxo.html#1306" class="Module">UTxOState</a> <a id="752" href="Ledger.Conway.Conformance.Ledger.html#793" class="Function">utxoSt</a>
             <a id="772" class="Keyword">open</a> <a id="777" href="Ledger.Conway.Conformance.Certs.html#958" class="Module">CertState</a> <a id="787" href="Ledger.Conway.Conformance.Ledger.html#846" class="Function">certState</a>
             <a id="810" href="Ledger.Conway.Conformance.Rewards.html#810" class="Bound">stake</a> <a id="816" class="Symbol">=</a> <a id="818" href="Ledger.Conway.Specification.Rewards.html#7100" class="Function">stakeDistr</a> <a id="829" href="Ledger.Conway.Specification.Utxo.html#1370" class="Function">utxo</a> <a id="834" class="Symbol">(</a><a id="835" class="Keyword">record</a> <a id="842" class="Symbol">{</a> <a id="844" href="Ledger.Conway.Conformance.Rewards.html#844" class="Module">DState</a> <a id="851" href="Ledger.Conway.Conformance.Certs.html#1017" class="Function">dState</a> <a id="858" class="Symbol">})</a> <a id="861" href="Ledger.Conway.Conformance.Certs.html#1037" class="Function">pState</a>
    <a id="872" class="Keyword">in</a>
    <a id="879" href="Ledger.Conway.Conformance.Rewards.html#566" class="Generalizable">lstate</a> <a id="886" href="Ledger.Conway.Conformance.Rewards.html#628" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Rewards.html#584}{\htmlId{890}{\htmlClass{Generalizable}{\text{mark}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#589}{\htmlId{897}{\htmlClass{Generalizable}{\text{set}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#593}{\htmlId{903}{\htmlClass{Generalizable}{\text{go}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#609}{\htmlId{908}{\htmlClass{Generalizable}{\text{feeSS}}}}\, \end{pmatrix}$</a> <a id="916" href="Ledger.Conway.Conformance.Rewards.html#628" class="Datatype Operator">⇀⦇</a> <a id="919" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="922" href="Ledger.Conway.Conformance.Rewards.html#628" class="Datatype Operator">,SNAP⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Rewards.html#810}{\htmlId{931}{\htmlClass{Bound}{\text{stake}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#584}{\htmlId{939}{\htmlClass{Generalizable}{\text{mark}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#589}{\htmlId{946}{\htmlClass{Generalizable}{\text{set}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#1392}{\htmlId{952}{\htmlClass{Function}{\text{fees}}}}\, \end{pmatrix}$</a>
</pre></body></html>