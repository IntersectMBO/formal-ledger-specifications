<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Rewards</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Core.Specification.Abstract.html" class="Module">Ledger.Core.Specification.Abstract</a>
<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="125" class="Keyword">module</a> <a id="132" href="Ledger.Conway.Conformance.Rewards.html" class="Module">Ledger.Conway.Conformance.Rewards</a>
  <a id="168" class="Symbol">(</a><a id="169" href="Ledger.Conway.Conformance.Rewards.html#169" class="Bound">txs</a> <a id="173" class="Symbol">:</a> <a id="175" href="Ledger.Conway.Specification.Transaction.html#991" class="Record">TransactionStructure</a><a id="195" class="Symbol">)</a> <a id="197" class="Symbol">(</a><a id="198" class="Keyword">open</a> <a id="203" href="Ledger.Conway.Specification.Transaction.html#991" class="Module">TransactionStructure</a> <a id="224" href="Ledger.Conway.Conformance.Rewards.html#169" class="Bound">txs</a><a id="227" class="Symbol">)</a>
  <a id="231" class="Symbol">(</a><a id="232" href="Ledger.Conway.Conformance.Rewards.html#232" class="Bound">abs</a> <a id="236" class="Symbol">:</a> <a id="238" href="Ledger.Core.Specification.Abstract.html#828" class="Record">AbstractFunctions</a> <a id="256" href="Ledger.Conway.Conformance.Rewards.html#169" class="Bound">txs</a><a id="259" class="Symbol">)</a>
  <a id="263" class="Keyword">where</a>

<a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="342" href="Ledger.Conway.Specification.Transaction.html#2065" class="Function">govStructure</a>
<a id="355" class="Keyword">open</a> <a id="360" class="Keyword">import</a> <a id="367" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="400" href="Ledger.Conway.Conformance.Rewards.html#169" class="Bound">txs</a> <a id="404" href="Ledger.Conway.Conformance.Rewards.html#232" class="Bound">abs</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="451" href="Ledger.Conway.Conformance.Rewards.html#169" class="Bound">txs</a> <a id="455" href="Ledger.Conway.Conformance.Rewards.html#232" class="Bound">abs</a>

<a id="460" class="Keyword">open</a> <a id="465" class="Keyword">import</a> <a id="472" href="Ledger.Conway.Specification.Rewards.html" class="Module">Ledger.Conway.Specification.Rewards</a> <a id="508" href="Ledger.Conway.Conformance.Rewards.html#169" class="Bound">txs</a> <a id="512" href="Ledger.Conway.Conformance.Rewards.html#232" class="Bound">abs</a>
  <a id="518" class="Keyword">hiding</a> <a id="525" class="Symbol">(</a><a id="526" href="Ledger.Conway.Specification.Rewards.html#8211" class="Datatype Operator">_⊢_⇀⦇_,SNAP⦈_</a><a id="539" class="Symbol">)</a> <a id="541" class="Keyword">public</a>

<a id="549" class="Keyword">private</a> <a id="557" class="Keyword">variable</a>
  <a id="568" href="Ledger.Conway.Conformance.Rewards.html#568" class="Generalizable">lstate</a> <a id="575" class="Symbol">:</a> <a id="577" href="Ledger.Conway.Conformance.Ledger.html#732" class="Record">LState</a>
  <a id="586" href="Ledger.Conway.Conformance.Rewards.html#586" class="Generalizable">mark</a> <a id="591" href="Ledger.Conway.Conformance.Rewards.html#591" class="Generalizable">set</a> <a id="595" href="Ledger.Conway.Conformance.Rewards.html#595" class="Generalizable">go</a> <a id="598" class="Symbol">:</a> <a id="600" href="Ledger.Conway.Specification.Rewards.html#6489" class="Record">Snapshot</a>
  <a id="611" href="Ledger.Conway.Conformance.Rewards.html#611" class="Generalizable">feeSS</a> <a id="617" class="Symbol">:</a> <a id="619" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>

<a id="625" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SNAP⦈_"></a><a id="630" href="Ledger.Conway.Conformance.Rewards.html#630" class="Datatype Operator">_⊢_⇀⦇_,SNAP⦈_</a> <a id="644" class="Symbol">:</a> <a id="646" href="Ledger.Conway.Conformance.Ledger.html#732" class="Record">LState</a> <a id="653" class="Symbol">→</a> <a id="655" href="Ledger.Conway.Specification.Rewards.html#7736" class="Record">Snapshots</a> <a id="665" class="Symbol">→</a> <a id="667" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="669" class="Symbol">→</a> <a id="671" href="Ledger.Conway.Specification.Rewards.html#7736" class="Record">Snapshots</a> <a id="681" class="Symbol">→</a> <a id="683" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="688" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,SNAP⦈_.SNAP"></a><a id="696" href="Ledger.Conway.Conformance.Rewards.html#696" class="InductiveConstructor">SNAP</a> <a id="701" class="Symbol">:</a> <a id="703" class="Keyword">let</a> <a id="707" class="Keyword">open</a> <a id="712" href="Ledger.Conway.Conformance.Ledger.html#732" class="Module">LState</a> <a id="719" href="Ledger.Conway.Conformance.Rewards.html#568" class="Generalizable">lstate</a>
             <a id="739" class="Keyword">open</a> <a id="744" href="Ledger.Conway.Specification.Utxo.html#1300" class="Module">UTxOState</a> <a id="754" href="Ledger.Conway.Conformance.Ledger.html#787" class="Function">utxoSt</a>
             <a id="774" class="Keyword">open</a> <a id="779" href="Ledger.Conway.Conformance.Certs.html#958" class="Module">CertState</a> <a id="789" href="Ledger.Conway.Conformance.Ledger.html#840" class="Function">certState</a>
             <a id="812" href="Ledger.Conway.Conformance.Rewards.html#812" class="Bound">stake</a> <a id="818" class="Symbol">=</a> <a id="820" href="Ledger.Conway.Specification.Rewards.html#7102" class="Function">stakeDistr</a> <a id="831" href="Ledger.Conway.Specification.Utxo.html#1364" class="Function">utxo</a> <a id="836" class="Symbol">(</a><a id="837" class="Keyword">record</a> <a id="844" class="Symbol">{</a> <a id="846" href="Ledger.Conway.Conformance.Rewards.html#846" class="Module">DState</a> <a id="853" href="Ledger.Conway.Conformance.Certs.html#1017" class="Function">dState</a> <a id="860" class="Symbol">})</a> <a id="863" href="Ledger.Conway.Conformance.Certs.html#1037" class="Function">pState</a>
    <a id="874" class="Keyword">in</a>
    <a id="881" href="Ledger.Conway.Conformance.Rewards.html#568" class="Generalizable">lstate</a> <a id="888" href="Ledger.Conway.Conformance.Rewards.html#630" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Rewards.html#586}{\htmlId{892}{\htmlClass{Generalizable}{\text{mark}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#591}{\htmlId{899}{\htmlClass{Generalizable}{\text{set}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#595}{\htmlId{905}{\htmlClass{Generalizable}{\text{go}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#611}{\htmlId{910}{\htmlClass{Generalizable}{\text{feeSS}}}}\, \end{pmatrix}$</a> <a id="918" href="Ledger.Conway.Conformance.Rewards.html#630" class="Datatype Operator">⇀⦇</a> <a id="921" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="924" href="Ledger.Conway.Conformance.Rewards.html#630" class="Datatype Operator">,SNAP⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Rewards.html#812}{\htmlId{933}{\htmlClass{Bound}{\text{stake}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#586}{\htmlId{941}{\htmlClass{Generalizable}{\text{mark}}}}\, \\ \,\href{Ledger.Conway.Conformance.Rewards.html#591}{\htmlId{948}{\htmlClass{Generalizable}{\text{set}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#1386}{\htmlId{954}{\htmlClass{Function}{\text{fees}}}}\, \end{pmatrix}$</a>
</pre></body></html>