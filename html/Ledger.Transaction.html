<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Transaction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>
<a id="25" class="Comment">--------------------------------------------------------------------------------</a>
<a id="106" class="Comment">-- NOTE: Everything in this module is part of TransactionStructure</a>
<a id="173" class="Comment">--------------------------------------------------------------------------------</a>
<a id="254" class="Keyword">module</a> <a id="261" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a> <a id="280" class="Keyword">where</a>

<a id="287" class="Keyword">import</a> <a id="294" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="310" class="Symbol">as</a> <a id="313" class="Module">M</a>

<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="343" class="Keyword">renaming</a> <a id="352" class="Symbol">(</a><a id="353" href="abstract-set-theory.FiniteSetTheory.html#2895" class="Function">filterᵐ</a> <a id="361" class="Symbol">to</a> <a id="364" class="Function">filter</a><a id="370" class="Symbol">)</a>

<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="399" class="Keyword">open</a> <a id="404" class="Keyword">import</a> <a id="411" href="Ledger.Types.Epoch.html" class="Module">Ledger.Types.Epoch</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Ledger.Types.GovStructure.html" class="Module">Ledger.Types.GovStructure</a>
<a id="468" class="Keyword">import</a> <a id="475" href="Ledger.PParams.html" class="Module">Ledger.PParams</a>
<a id="490" class="Keyword">import</a> <a id="497" href="Ledger.Script.html" class="Module">Ledger.Script</a>
<a id="511" class="Keyword">import</a> <a id="518" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a>
<a id="543" class="Keyword">import</a> <a id="550" href="Ledger.Certs.html" class="Module">Ledger.Certs</a>
<a id="563" class="Keyword">import</a> <a id="570" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a>
<a id="590" class="Keyword">import</a> <a id="597" href="Ledger.Address.html" class="Module">Ledger.Address</a>

<a id="613" class="Keyword">open</a> <a id="618" class="Keyword">import</a> <a id="625" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>
<a id="645" class="Keyword">open</a> <a id="650" class="Keyword">import</a> <a id="657" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="684" class="Keyword">using</a> <a id="690" class="Symbol">(</a><a id="691" href="Relation.Nullary.Decidable.Core.html#4636" class="Function Operator">⌊_⌋</a><a id="694" class="Symbol">)</a>

<a id="697" class="Keyword">data</a> <a id="Tag"></a><a id="702" href="Ledger.Transaction.html#702" class="Datatype">Tag</a> <a id="706" class="Symbol">:</a> <a id="708" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="713" class="Keyword">where</a>
  <a id="Tag.Spend"></a><a id="721" href="Ledger.Transaction.html#721" class="InductiveConstructor">Spend</a> <a id="Tag.Mint"></a><a id="727" href="Ledger.Transaction.html#727" class="InductiveConstructor">Mint</a> <a id="Tag.Cert"></a><a id="732" href="Ledger.Transaction.html#732" class="InductiveConstructor">Cert</a> <a id="Tag.Rewrd"></a><a id="737" href="Ledger.Transaction.html#737" class="InductiveConstructor">Rewrd</a> <a id="Tag.Vote"></a><a id="743" href="Ledger.Transaction.html#743" class="InductiveConstructor">Vote</a> <a id="Tag.Propose"></a><a id="748" href="Ledger.Transaction.html#748" class="InductiveConstructor">Propose</a> <a id="756" class="Symbol">:</a> <a id="758" href="Ledger.Transaction.html#702" class="Datatype">Tag</a>
<a id="762" class="Keyword">unquoteDecl</a> <a id="DecEq-Tag"></a><a id="774" href="Ledger.Transaction.html#774" class="Function">DecEq-Tag</a> <a id="784" class="Symbol">=</a> <a id="786" href="Tactic.Derive.DecEq.html#3519" class="Function">derive-DecEq</a> <a id="799" class="Symbol">((</a><a id="801" class="Keyword">quote</a> <a id="807" href="Ledger.Transaction.html#702" class="Datatype">Tag</a> <a id="811" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="813" href="Ledger.Transaction.html#774" class="Function">DecEq-Tag</a><a id="822" class="Symbol">)</a> <a id="824" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="826" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="828" class="Symbol">)</a>



<a id="833" class="Keyword">record</a> <a id="TransactionStructure"></a><a id="840" href="Ledger.Transaction.html#840" class="Record">TransactionStructure</a> <a id="861" class="Symbol">:</a> <a id="863" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="869" class="Keyword">where</a>
  <a id="877" class="Keyword">field</a>


    <a id="TransactionStructure.Ix"></a><a id="889" href="Ledger.Transaction.html#889" class="Field">Ix</a> <a id="TransactionStructure.TxId"></a><a id="892" href="Ledger.Transaction.html#892" class="Field">TxId</a> <a id="TransactionStructure.AuxiliaryData"></a><a id="897" href="Ledger.Transaction.html#897" class="Field">AuxiliaryData</a> <a id="911" class="Symbol">:</a> <a id="913" href="Agda.Primitive.html#388" class="Primitive">Type</a>



    <a id="925" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-Ix"></a><a id="927" href="Ledger.Transaction.html#927" class="Field">DecEq-Ix</a>   <a id="938" class="Symbol">⦄</a> <a id="940" class="Symbol">:</a> <a id="942" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="948" href="Ledger.Transaction.html#889" class="Field">Ix</a>
    <a id="955" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-TxId"></a><a id="957" href="Ledger.Transaction.html#957" class="Field">DecEq-TxId</a> <a id="968" class="Symbol">⦄</a> <a id="970" class="Symbol">:</a> <a id="972" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="978" href="Ledger.Transaction.html#892" class="Field">TxId</a>
    <a id="TransactionStructure.adHashingScheme"></a><a id="987" href="Ledger.Transaction.html#987" class="Field">adHashingScheme</a> <a id="1003" class="Symbol">:</a> <a id="1005" href="Ledger.Crypto.html#99" class="Record">isHashableSet</a> <a id="1019" href="Ledger.Transaction.html#897" class="Field">AuxiliaryData</a>
  <a id="1035" class="Keyword">open</a> <a id="1040" href="Ledger.Crypto.html#99" class="Module">isHashableSet</a> <a id="1054" href="Ledger.Transaction.html#987" class="Field">adHashingScheme</a> <a id="1070" class="Keyword">renaming</a> <a id="1079" class="Symbol">(</a><a id="1080" href="Ledger.Crypto.html#176" class="Field">THash</a> <a id="1086" class="Symbol">to</a> <a id="1089" class="Field">ADHash</a><a id="1095" class="Symbol">)</a> <a id="1097" class="Keyword">public</a>

  <a id="1107" class="Keyword">field</a> <a id="TransactionStructure.globalConstants"></a><a id="1113" href="Ledger.Transaction.html#1113" class="Field">globalConstants</a> <a id="1129" class="Symbol">:</a> <a id="1131" class="Symbol">_</a>
  <a id="1135" class="Keyword">open</a> <a id="1140" href="Ledger.Types.Epoch.html#1962" class="Module">GlobalConstants</a> <a id="1156" href="Ledger.Transaction.html#1113" class="Field">globalConstants</a> <a id="1172" class="Keyword">public</a>

  <a id="1182" class="Keyword">field</a> <a id="TransactionStructure.crypto"></a><a id="1188" href="Ledger.Transaction.html#1188" class="Field">crypto</a> <a id="1195" class="Symbol">:</a> <a id="1197" class="Symbol">_</a>
  <a id="1201" class="Keyword">open</a> <a id="1206" href="Ledger.Crypto.html#1043" class="Module">Crypto</a> <a id="1213" href="Ledger.Transaction.html#1188" class="Field">crypto</a> <a id="1220" class="Keyword">public</a>
  <a id="1229" class="Keyword">open</a> <a id="1234" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a> <a id="1254" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="1265" class="Keyword">public</a>
  <a id="1274" class="Keyword">open</a> <a id="1279" href="Ledger.Address.html" class="Module">Ledger.Address</a> <a id="1294" href="Ledger.Types.Epoch.html#2001" class="Function">Network</a> <a id="1302" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="1310" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="1321" class="Symbol">⦃</a> <a id="1323" href="Function.Base.html#4736" class="Function">it</a> <a id="1326" class="Symbol">⦄</a> <a id="1328" class="Symbol">⦃</a> <a id="1330" href="Function.Base.html#4736" class="Function">it</a> <a id="1333" class="Symbol">⦄</a> <a id="1335" class="Symbol">⦃</a> <a id="1337" href="Function.Base.html#4736" class="Function">it</a> <a id="1340" class="Symbol">⦄</a> <a id="1342" class="Keyword">public</a>

  <a id="1352" class="Keyword">field</a> <a id="TransactionStructure.epochStructure"></a><a id="1358" href="Ledger.Transaction.html#1358" class="Field">epochStructure</a> <a id="1373" class="Symbol">:</a> <a id="1375" class="Symbol">_</a>
  <a id="1379" class="Keyword">open</a> <a id="1384" href="Ledger.Types.Epoch.html#475" class="Module">EpochStructure</a> <a id="1399" href="Ledger.Transaction.html#1358" class="Field">epochStructure</a> <a id="1414" class="Keyword">public</a>
  <a id="1423" class="Keyword">open</a> <a id="1428" href="Ledger.Script.html" class="Module">Ledger.Script</a> <a id="1442" href="Ledger.Transaction.html#1188" class="Field">crypto</a> <a id="1449" href="Ledger.Transaction.html#1358" class="Field">epochStructure</a> <a id="1464" class="Keyword">public</a>

  <a id="1474" class="Keyword">field</a> <a id="TransactionStructure.scriptStructure"></a><a id="1480" href="Ledger.Transaction.html#1480" class="Field">scriptStructure</a> <a id="1496" class="Symbol">:</a> <a id="1498" class="Symbol">_</a>
  <a id="1502" class="Keyword">open</a> <a id="1507" href="Ledger.Script.html#4958" class="Module">ScriptStructure</a> <a id="1523" href="Ledger.Transaction.html#1480" class="Field">scriptStructure</a> <a id="1539" class="Keyword">public</a>
  <a id="1548" class="Keyword">open</a> <a id="1553" href="Ledger.PParams.html" class="Module">Ledger.PParams</a> <a id="1568" href="Ledger.Transaction.html#1188" class="Field">crypto</a> <a id="1575" href="Ledger.Transaction.html#1358" class="Field">epochStructure</a> <a id="1590" href="Ledger.Transaction.html#1480" class="Field">scriptStructure</a> <a id="1606" class="Keyword">public</a>

  <a id="1616" class="Keyword">field</a> <a id="TransactionStructure.govParams"></a><a id="1622" href="Ledger.Transaction.html#1622" class="Field">govParams</a> <a id="1632" class="Symbol">:</a> <a id="1634" class="Symbol">_</a>
  <a id="1638" class="Keyword">open</a> <a id="1643" href="Ledger.PParams.html#14424" class="Module">GovParams</a> <a id="1653" href="Ledger.Transaction.html#1622" class="Field">govParams</a> <a id="1663" class="Keyword">public</a>

  <a id="1673" class="Keyword">field</a> <a id="TransactionStructure.tokenAlgebra"></a><a id="1679" href="Ledger.Transaction.html#1679" class="Field">tokenAlgebra</a> <a id="1692" class="Symbol">:</a> <a id="1694" href="Ledger.TokenAlgebra.html#453" class="Record">TokenAlgebra</a>
  <a id="1709" class="Keyword">open</a> <a id="1714" href="Ledger.TokenAlgebra.html#453" class="Module">TokenAlgebra</a> <a id="1727" href="Ledger.Transaction.html#1679" class="Field">tokenAlgebra</a> <a id="1740" class="Keyword">public</a>

  <a id="1750" class="Keyword">field</a> <a id="TransactionStructure.txidBytes"></a><a id="1756" href="Ledger.Transaction.html#1756" class="Field">txidBytes</a> <a id="1766" class="Symbol">:</a> <a id="1768" href="Ledger.Transaction.html#892" class="Field">TxId</a> <a id="1773" class="Symbol">→</a> <a id="1775" href="Ledger.Crypto.html#591" class="Function">Ser</a>

  <a id="TransactionStructure.govStructure"></a><a id="1782" href="Ledger.Transaction.html#1782" class="Function">govStructure</a> <a id="1795" class="Symbol">:</a> <a id="1797" href="Ledger.Types.GovStructure.html#235" class="Record">GovStructure</a>
  <a id="1812" href="Ledger.Transaction.html#1782" class="Function">govStructure</a> <a id="1825" class="Symbol">=</a> <a id="1827" class="Keyword">record</a>
    <a id="1838" class="Comment">-- TODO: figure out what to do with the hash</a>
    <a id="1887" class="Symbol">{</a> <a id="1889" href="Ledger.Types.GovStructure.html#270" class="Field">TxId</a> <a id="1894" class="Symbol">=</a> <a id="1896" href="Ledger.Transaction.html#892" class="Field">TxId</a><a id="1900" class="Symbol">;</a> <a id="1902" href="Ledger.Types.GovStructure.html#275" class="Field">DocHash</a> <a id="1910" class="Symbol">=</a> <a id="1912" href="Ledger.Transaction.html#1089" class="Function">ADHash</a>
    <a id="1923" class="Symbol">;</a> <a id="1925" href="Ledger.Types.GovStructure.html#335" class="Field">crypto</a> <a id="1932" class="Symbol">=</a> <a id="1934" href="Ledger.Transaction.html#1188" class="Field">crypto</a>
    <a id="1945" class="Symbol">;</a> <a id="1947" href="Ledger.Types.GovStructure.html#383" class="Field">epochStructure</a> <a id="1962" class="Symbol">=</a> <a id="1964" href="Ledger.Transaction.html#1358" class="Field">epochStructure</a>
    <a id="1983" class="Symbol">;</a> <a id="1985" href="Ledger.Types.GovStructure.html#455" class="Field">scriptStructure</a> <a id="2001" class="Symbol">=</a> <a id="2003" href="Ledger.Transaction.html#1480" class="Field">scriptStructure</a>
    <a id="2023" class="Symbol">;</a> <a id="2025" href="Ledger.Types.GovStructure.html#634" class="Field">govParams</a> <a id="2035" class="Symbol">=</a> <a id="2037" href="Ledger.Transaction.html#1622" class="Field">govParams</a>
    <a id="2051" class="Symbol">;</a> <a id="2053" href="Ledger.Types.GovStructure.html#699" class="Field">globalConstants</a> <a id="2069" class="Symbol">=</a> <a id="2071" href="Ledger.Transaction.html#1113" class="Field">globalConstants</a>
    <a id="2091" class="Symbol">}</a>

  <a id="2096" class="Keyword">module</a> <a id="TransactionStructure.GovernanceActions"></a><a id="2103" href="Ledger.Transaction.html#2103" class="Module">GovernanceActions</a> <a id="2121" class="Symbol">=</a> <a id="2123" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a> <a id="2148" href="Ledger.Transaction.html#1782" class="Function">govStructure</a>
  <a id="2163" class="Keyword">open</a> <a id="2168" href="Ledger.Transaction.html#2103" class="Module">GovernanceActions</a> <a id="2186" class="Keyword">hiding</a> <a id="2193" class="Symbol">(</a><a id="2194" href="Ledger.GovernanceActions.html#2328" class="Datatype">Vote</a><a id="2198" class="Symbol">;</a> <a id="2200" href="Ledger.GovernanceActions.html#2348" class="InductiveConstructor">yes</a><a id="2203" class="Symbol">;</a> <a id="2205" href="Ledger.GovernanceActions.html#2352" class="InductiveConstructor">no</a><a id="2207" class="Symbol">;</a> <a id="2209" href="Ledger.GovernanceActions.html#2355" class="InductiveConstructor">abstain</a><a id="2216" class="Symbol">)</a> <a id="2218" class="Keyword">public</a>

  <a id="2228" class="Keyword">open</a> <a id="2233" class="Keyword">import</a> <a id="2240" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="2253" href="Ledger.Transaction.html#1782" class="Function">govStructure</a>


  <a id="TransactionStructure.TxIn"></a><a id="2270" href="Ledger.Transaction.html#2270" class="Function">TxIn</a>     <a id="2279" class="Symbol">=</a> <a id="2281" href="Ledger.Transaction.html#892" class="Field">TxId</a> <a id="2286" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2288" href="Ledger.Transaction.html#889" class="Field">Ix</a>
  <a id="TransactionStructure.TxOut"></a><a id="2293" href="Ledger.Transaction.html#2293" class="Function">TxOut</a>    <a id="2302" class="Symbol">=</a> <a id="2304" href="Ledger.Address.html#2325" class="Function">Addr</a> <a id="2309" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2311" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="2317" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2319" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2325" class="Symbol">(</a><a id="2326" href="Ledger.Script.html#1773" class="Function">Datum</a> <a id="2332" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="2334" href="Ledger.Script.html#1726" class="Function">DataHash</a><a id="2342" class="Symbol">)</a> <a id="2344" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2346" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2352" href="Ledger.Script.html#5353" class="Function">Script</a>
  <a id="TransactionStructure.UTxO"></a><a id="2361" href="Ledger.Transaction.html#2361" class="Function">UTxO</a>     <a id="2370" class="Symbol">=</a> <a id="2372" href="Ledger.Transaction.html#2270" class="Function">TxIn</a> <a id="2377" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2379" href="Ledger.Transaction.html#2293" class="Function">TxOut</a>
  <a id="TransactionStructure.Wdrl"></a><a id="2387" href="Ledger.Transaction.html#2387" class="Function">Wdrl</a>     <a id="2396" class="Symbol">=</a> <a id="2398" href="Ledger.Address.html#1337" class="Record">RwdAddr</a> <a id="2406" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2408" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="TransactionStructure.RdmrPtr"></a><a id="2415" href="Ledger.Transaction.html#2415" class="Function">RdmrPtr</a>  <a id="2424" class="Symbol">=</a> <a id="2426" href="Ledger.Transaction.html#702" class="Datatype">Tag</a> <a id="2430" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2432" href="Ledger.Transaction.html#889" class="Field">Ix</a>

  <a id="TransactionStructure.ProposedPPUpdates"></a><a id="2438" href="Ledger.Transaction.html#2438" class="Function">ProposedPPUpdates</a>  <a id="2457" class="Symbol">=</a> <a id="2459" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="2467" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2469" href="Ledger.PParams.html#14522" class="Function">PParamsUpdate</a>
  <a id="TransactionStructure.Update"></a><a id="2485" href="Ledger.Transaction.html#2485" class="Function">Update</a>             <a id="2504" class="Symbol">=</a> <a id="2506" href="Ledger.Transaction.html#2438" class="Function">ProposedPPUpdates</a> <a id="2524" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2526" href="Ledger.Types.Epoch.html#543" class="Function">Epoch</a>


  <a id="2536" class="Keyword">record</a> <a id="TransactionStructure.HasUTxO"></a><a id="2543" href="Ledger.Transaction.html#2543" class="Record">HasUTxO</a> <a id="2551" class="Symbol">{</a><a id="2552" href="Ledger.Transaction.html#2552" class="Bound">a</a><a id="2553" class="Symbol">}</a> <a id="2555" class="Symbol">(</a><a id="2556" href="Ledger.Transaction.html#2556" class="Bound">A</a> <a id="2558" class="Symbol">:</a> <a id="2560" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2565" href="Ledger.Transaction.html#2552" class="Bound">a</a><a id="2566" class="Symbol">)</a> <a id="2568" class="Symbol">:</a> <a id="2570" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2575" href="Ledger.Transaction.html#2552" class="Bound">a</a> <a id="2577" class="Keyword">where</a>
    <a id="2587" class="Keyword">field</a> <a id="2593" href="Ledger.Transaction.html#2593" class="Field">UTxOOf</a> <a id="2600" class="Symbol">:</a> <a id="2602" href="Ledger.Transaction.html#2556" class="Bound">A</a> <a id="2604" class="Symbol">→</a> <a id="2606" href="Ledger.Transaction.html#2361" class="Function">UTxO</a>
  <a id="2613" class="Keyword">open</a> <a id="2618" href="Ledger.Transaction.html#2543" class="Module">HasUTxO</a> <a id="2626" class="Symbol">⦃...⦄</a> <a id="2632" class="Keyword">public</a>


  <a id="2643" class="Keyword">record</a> <a id="TransactionStructure.TxBody"></a><a id="2650" href="Ledger.Transaction.html#2650" class="Record">TxBody</a> <a id="2657" class="Symbol">:</a> <a id="2659" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2664" class="Keyword">where</a>
    <a id="2674" class="Keyword">field</a>
      <a id="2686" href="Ledger.Transaction.html#2686" class="Field">txins</a>          <a id="2701" class="Symbol">:</a> <a id="2703" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2705" href="Ledger.Transaction.html#2270" class="Function">TxIn</a>
      <a id="2716" href="Ledger.Transaction.html#2716" class="Field">refInputs</a>      <a id="2731" class="Symbol">:</a> <a id="2733" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2735" href="Ledger.Transaction.html#2270" class="Function">TxIn</a>
      <a id="2746" href="Ledger.Transaction.html#2746" class="Field">txouts</a>         <a id="2761" class="Symbol">:</a> <a id="2763" href="Ledger.Transaction.html#889" class="Field">Ix</a> <a id="2766" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2768" href="Ledger.Transaction.html#2293" class="Function">TxOut</a>
      <a id="2780" href="Ledger.Transaction.html#2780" class="Field">txfee</a>          <a id="2795" class="Symbol">:</a> <a id="2797" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="2808" href="Ledger.Transaction.html#2808" class="Field">mint</a>           <a id="2823" class="Symbol">:</a> <a id="2825" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
      <a id="2837" href="Ledger.Transaction.html#2837" class="Field">txvldt</a>         <a id="2852" class="Symbol">:</a> <a id="2854" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2860" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a> <a id="2865" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2867" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2873" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a>
      <a id="2884" href="Ledger.Transaction.html#2884" class="Field">txcerts</a>        <a id="2899" class="Symbol">:</a> <a id="2901" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2906" href="Ledger.Certs.html#1324" class="Datatype">DCert</a>
      <a id="2918" href="Ledger.Transaction.html#2918" class="Field">txwdrls</a>        <a id="2933" class="Symbol">:</a> <a id="2935" href="Ledger.Transaction.html#2387" class="Function">Wdrl</a>
      <a id="2946" href="Ledger.Transaction.html#2946" class="Field">txvote</a>         <a id="2961" class="Symbol">:</a> <a id="2963" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2968" href="Ledger.GovernanceActions.html#2379" class="Record">GovVote</a>
      <a id="2982" href="Ledger.Transaction.html#2982" class="Field">txprop</a>         <a id="2997" class="Symbol">:</a> <a id="2999" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3004" href="Ledger.GovernanceActions.html#2524" class="Record">GovProposal</a>
      <a id="3022" href="Ledger.Transaction.html#3022" class="Field">txdonation</a>     <a id="3037" class="Symbol">:</a> <a id="3039" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="3050" href="Ledger.Transaction.html#3050" class="Field">txup</a>           <a id="3065" class="Symbol">:</a> <a id="3067" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3073" href="Ledger.Transaction.html#2485" class="Function">Update</a>
      <a id="3086" href="Ledger.Transaction.html#3086" class="Field">txADhash</a>       <a id="3101" class="Symbol">:</a> <a id="3103" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3109" href="Ledger.Transaction.html#1089" class="Function">ADHash</a>
      <a id="3122" href="Ledger.Transaction.html#3122" class="Field">txNetworkId</a>    <a id="3137" class="Symbol">:</a> <a id="3139" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3145" href="Ledger.Types.Epoch.html#2001" class="Function">Network</a>
      <a id="3159" href="Ledger.Transaction.html#3159" class="Field">curTreasury</a>    <a id="3174" class="Symbol">:</a> <a id="3176" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3182" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="3193" href="Ledger.Transaction.html#3193" class="Field">txsize</a>         <a id="3208" class="Symbol">:</a> <a id="3210" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
      <a id="3218" href="Ledger.Transaction.html#3218" class="Field">txid</a>           <a id="3233" class="Symbol">:</a> <a id="3235" href="Ledger.Transaction.html#892" class="Field">TxId</a>
      <a id="3246" href="Ledger.Transaction.html#3246" class="Field">collateral</a>     <a id="3261" class="Symbol">:</a> <a id="3263" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3265" href="Ledger.Transaction.html#2270" class="Function">TxIn</a>
      <a id="3276" href="Ledger.Transaction.html#3276" class="Field">reqSigHash</a>     <a id="3291" class="Symbol">:</a> <a id="3293" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3295" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a>
      <a id="3309" href="Ledger.Transaction.html#3309" class="Field">scriptIntHash</a>  <a id="3324" class="Symbol">:</a> <a id="3326" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3332" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>


  <a id="3347" class="Keyword">record</a> <a id="TransactionStructure.HasTxBody"></a><a id="3354" href="Ledger.Transaction.html#3354" class="Record">HasTxBody</a> <a id="3364" class="Symbol">{</a><a id="3365" href="Ledger.Transaction.html#3365" class="Bound">a</a><a id="3366" class="Symbol">}</a> <a id="3368" class="Symbol">(</a><a id="3369" href="Ledger.Transaction.html#3369" class="Bound">A</a> <a id="3371" class="Symbol">:</a> <a id="3373" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3378" href="Ledger.Transaction.html#3365" class="Bound">a</a><a id="3379" class="Symbol">)</a> <a id="3381" class="Symbol">:</a> <a id="3383" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3388" href="Ledger.Transaction.html#3365" class="Bound">a</a> <a id="3390" class="Keyword">where</a>
    <a id="3400" class="Keyword">field</a> <a id="3406" href="Ledger.Transaction.html#3406" class="Field">TxBodyOf</a> <a id="3415" class="Symbol">:</a> <a id="3417" href="Ledger.Transaction.html#3369" class="Bound">A</a> <a id="3419" class="Symbol">→</a> <a id="3421" href="Ledger.Transaction.html#2650" class="Record">TxBody</a>
  <a id="3430" class="Keyword">open</a> <a id="3435" href="Ledger.Transaction.html#3354" class="Module">HasTxBody</a>  <a id="3446" class="Symbol">⦃...⦄</a> <a id="3452" class="Keyword">public</a>

  <a id="3462" class="Keyword">record</a> <a id="TransactionStructure.Hastxfee"></a><a id="3469" href="Ledger.Transaction.html#3469" class="Record">Hastxfee</a> <a id="3478" class="Symbol">{</a><a id="3479" href="Ledger.Transaction.html#3479" class="Bound">a</a><a id="3480" class="Symbol">}</a> <a id="3482" class="Symbol">(</a><a id="3483" href="Ledger.Transaction.html#3483" class="Bound">A</a> <a id="3485" class="Symbol">:</a> <a id="3487" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3492" href="Ledger.Transaction.html#3479" class="Bound">a</a><a id="3493" class="Symbol">)</a> <a id="3495" class="Symbol">:</a> <a id="3497" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3502" href="Ledger.Transaction.html#3479" class="Bound">a</a> <a id="3504" class="Keyword">where</a>
    <a id="3514" class="Keyword">field</a> <a id="3520" href="Ledger.Transaction.html#3520" class="Field">txfeeOf</a> <a id="3528" class="Symbol">:</a> <a id="3530" href="Ledger.Transaction.html#3483" class="Bound">A</a> <a id="3532" class="Symbol">→</a> <a id="3534" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3541" class="Keyword">open</a> <a id="3546" href="Ledger.Transaction.html#3469" class="Module">Hastxfee</a>   <a id="3557" class="Symbol">⦃...⦄</a> <a id="3563" class="Keyword">public</a>

  <a id="3573" class="Keyword">record</a> <a id="TransactionStructure.Hastxcerts"></a><a id="3580" href="Ledger.Transaction.html#3580" class="Record">Hastxcerts</a> <a id="3591" class="Symbol">{</a><a id="3592" href="Ledger.Transaction.html#3592" class="Bound">a</a><a id="3593" class="Symbol">}</a> <a id="3595" class="Symbol">(</a><a id="3596" href="Ledger.Transaction.html#3596" class="Bound">A</a> <a id="3598" class="Symbol">:</a> <a id="3600" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3605" href="Ledger.Transaction.html#3592" class="Bound">a</a><a id="3606" class="Symbol">)</a> <a id="3608" class="Symbol">:</a> <a id="3610" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3615" href="Ledger.Transaction.html#3592" class="Bound">a</a> <a id="3617" class="Keyword">where</a>
    <a id="3627" class="Keyword">field</a> <a id="3633" href="Ledger.Transaction.html#3633" class="Field">txcertsOf</a> <a id="3643" class="Symbol">:</a> <a id="3645" href="Ledger.Transaction.html#3596" class="Bound">A</a> <a id="3647" class="Symbol">→</a> <a id="3649" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3654" href="Ledger.Certs.html#1324" class="Datatype">DCert</a>
  <a id="3662" class="Keyword">open</a> <a id="3667" href="Ledger.Transaction.html#3580" class="Module">Hastxcerts</a> <a id="3678" class="Symbol">⦃...⦄</a> <a id="3684" class="Keyword">public</a>

  <a id="3694" class="Keyword">record</a> <a id="TransactionStructure.Hastxprop"></a><a id="3701" href="Ledger.Transaction.html#3701" class="Record">Hastxprop</a> <a id="3711" class="Symbol">{</a><a id="3712" href="Ledger.Transaction.html#3712" class="Bound">a</a><a id="3713" class="Symbol">}</a> <a id="3715" class="Symbol">(</a><a id="3716" href="Ledger.Transaction.html#3716" class="Bound">A</a> <a id="3718" class="Symbol">:</a> <a id="3720" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3725" href="Ledger.Transaction.html#3712" class="Bound">a</a><a id="3726" class="Symbol">)</a> <a id="3728" class="Symbol">:</a> <a id="3730" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3735" href="Ledger.Transaction.html#3712" class="Bound">a</a> <a id="3737" class="Keyword">where</a>
    <a id="3747" class="Keyword">field</a> <a id="3753" href="Ledger.Transaction.html#3753" class="Field">txpropOf</a>  <a id="3763" class="Symbol">:</a> <a id="3765" href="Ledger.Transaction.html#3716" class="Bound">A</a> <a id="3767" class="Symbol">→</a> <a id="3769" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3774" href="Ledger.GovernanceActions.html#2524" class="Record">GovProposal</a>
  <a id="3788" class="Keyword">open</a> <a id="3793" href="Ledger.Transaction.html#3701" class="Module">Hastxprop</a>  <a id="3804" class="Symbol">⦃...⦄</a> <a id="3810" class="Keyword">public</a>

  <a id="3820" class="Keyword">record</a> <a id="TransactionStructure.Hastxid"></a><a id="3827" href="Ledger.Transaction.html#3827" class="Record">Hastxid</a>    <a id="3838" class="Symbol">{</a><a id="3839" href="Ledger.Transaction.html#3839" class="Bound">a</a><a id="3840" class="Symbol">}</a> <a id="3842" class="Symbol">(</a><a id="3843" href="Ledger.Transaction.html#3843" class="Bound">A</a> <a id="3845" class="Symbol">:</a> <a id="3847" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3852" href="Ledger.Transaction.html#3839" class="Bound">a</a><a id="3853" class="Symbol">)</a> <a id="3855" class="Symbol">:</a> <a id="3857" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3862" href="Ledger.Transaction.html#3839" class="Bound">a</a> <a id="3864" class="Keyword">where</a> 
    <a id="3875" class="Keyword">field</a> <a id="3881" href="Ledger.Transaction.html#3881" class="Field">txidOf</a>    <a id="3891" class="Symbol">:</a> <a id="3893" href="Ledger.Transaction.html#3843" class="Bound">A</a> <a id="3895" class="Symbol">→</a> <a id="3897" href="Ledger.Transaction.html#892" class="Field">TxId</a>
  <a id="3904" class="Keyword">open</a> <a id="3909" href="Ledger.Transaction.html#3827" class="Module">Hastxid</a>    <a id="3920" class="Symbol">⦃...⦄</a> <a id="3926" class="Keyword">public</a>


  <a id="3937" class="Keyword">record</a> <a id="TransactionStructure.TxWitnesses"></a><a id="3944" href="Ledger.Transaction.html#3944" class="Record">TxWitnesses</a> <a id="3956" class="Symbol">:</a> <a id="3958" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3963" class="Keyword">where</a>
    <a id="3973" class="Keyword">field</a>
      <a id="3985" href="Ledger.Transaction.html#3985" class="Field">vkSigs</a>   <a id="3994" class="Symbol">:</a> <a id="3996" href="Ledger.Crypto.html#582" class="Function">VKey</a> <a id="4001" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4003" href="Ledger.Crypto.html#587" class="Function">Sig</a>
      <a id="4013" href="Ledger.Transaction.html#4013" class="Field">scripts</a>  <a id="4022" class="Symbol">:</a> <a id="4024" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4026" href="Ledger.Script.html#5353" class="Function">Script</a>
      <a id="4039" href="Ledger.Transaction.html#4039" class="Field">txdats</a>   <a id="4048" class="Symbol">:</a> <a id="4050" href="Ledger.Script.html#1726" class="Function">DataHash</a> <a id="4059" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4061" href="Ledger.Script.html#1773" class="Function">Datum</a>
      <a id="4073" href="Ledger.Transaction.html#4073" class="Field">txrdmrs</a>  <a id="4082" class="Symbol">:</a> <a id="4084" href="Ledger.Transaction.html#2415" class="Function">RdmrPtr</a>  <a id="4093" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4095" href="Ledger.Script.html#1791" class="Function">Redeemer</a> <a id="4104" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4106" href="Ledger.Script.html#1021" class="Function">ExUnits</a>

    <a id="TransactionStructure.TxWitnesses.scriptsP1"></a><a id="4119" href="Ledger.Transaction.html#4119" class="Function">scriptsP1</a> <a id="4129" class="Symbol">:</a> <a id="4131" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4133" href="Ledger.Script.html#645" class="Function">P1Script</a>
    <a id="4146" href="Ledger.Transaction.html#4119" class="Function">scriptsP1</a> <a id="4156" class="Symbol">=</a> <a id="4158" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="4169" href="Data.Sum.html#787" class="Function">isInj₁</a> <a id="4176" href="Ledger.Transaction.html#4013" class="Field">scripts</a>

  <a id="4187" class="Keyword">record</a> <a id="TransactionStructure.Tx"></a><a id="4194" href="Ledger.Transaction.html#4194" class="Record">Tx</a> <a id="4197" class="Symbol">:</a> <a id="4199" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4204" class="Keyword">where</a>
    <a id="4214" class="Keyword">field</a>
      <a id="4226" href="Ledger.Transaction.html#4226" class="Field">body</a>     <a id="4235" class="Symbol">:</a> <a id="4237" href="Ledger.Transaction.html#2650" class="Record">TxBody</a>
      <a id="4250" href="Ledger.Transaction.html#4250" class="Field">wits</a>     <a id="4259" class="Symbol">:</a> <a id="4261" href="Ledger.Transaction.html#3944" class="Record">TxWitnesses</a>
      <a id="4279" href="Ledger.Transaction.html#4279" class="Field">isValid</a>  <a id="4288" class="Symbol">:</a> <a id="4290" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
      <a id="4301" href="Ledger.Transaction.html#4301" class="Field">txAD</a>     <a id="4310" class="Symbol">:</a> <a id="4312" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4318" href="Ledger.Transaction.html#897" class="Field">AuxiliaryData</a>


  <a id="4336" class="Keyword">instance</a>
    <a id="TransactionStructure.HasTxBody-Tx"></a><a id="4349" href="Ledger.Transaction.html#4349" class="Function">HasTxBody-Tx</a> <a id="4362" class="Symbol">:</a> <a id="4364" href="Ledger.Transaction.html#3354" class="Record">HasTxBody</a> <a id="4374" href="Ledger.Transaction.html#4194" class="Record">Tx</a>
    <a id="4381" href="Ledger.Transaction.html#4349" class="Function">HasTxBody-Tx</a> <a id="4394" class="Symbol">.</a><a id="4395" href="Ledger.Transaction.html#3406" class="Field">TxBodyOf</a> <a id="4404" class="Symbol">=</a> <a id="4406" href="Ledger.Transaction.html#4226" class="Field">Tx.body</a>

    <a id="TransactionStructure.Hastxfee-Tx"></a><a id="4419" href="Ledger.Transaction.html#4419" class="Function">Hastxfee-Tx</a> <a id="4431" class="Symbol">:</a> <a id="4433" href="Ledger.Transaction.html#3469" class="Record">Hastxfee</a> <a id="4442" href="Ledger.Transaction.html#4194" class="Record">Tx</a>
    <a id="4449" href="Ledger.Transaction.html#4419" class="Function">Hastxfee-Tx</a> <a id="4461" class="Symbol">.</a><a id="4462" href="Ledger.Transaction.html#3520" class="Field">txfeeOf</a> <a id="4470" class="Symbol">=</a> <a id="4472" href="Ledger.Transaction.html#2780" class="Field">TxBody.txfee</a> <a id="4485" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4487" href="Ledger.Transaction.html#3406" class="Field">TxBodyOf</a>
    
    <a id="TransactionStructure.Hastxcerts-Tx"></a><a id="4505" href="Ledger.Transaction.html#4505" class="Function">Hastxcerts-Tx</a> <a id="4519" class="Symbol">:</a> <a id="4521" href="Ledger.Transaction.html#3580" class="Record">Hastxcerts</a> <a id="4532" href="Ledger.Transaction.html#4194" class="Record">Tx</a>
    <a id="4539" href="Ledger.Transaction.html#4505" class="Function">Hastxcerts-Tx</a> <a id="4553" class="Symbol">.</a><a id="4554" href="Ledger.Transaction.html#3633" class="Field">txcertsOf</a> <a id="4564" class="Symbol">=</a> <a id="4566" href="Ledger.Transaction.html#2884" class="Field">TxBody.txcerts</a> <a id="4581" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4583" href="Ledger.Transaction.html#3406" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.Hastxprop-Tx"></a><a id="4597" href="Ledger.Transaction.html#4597" class="Function">Hastxprop-Tx</a> <a id="4610" class="Symbol">:</a> <a id="4612" href="Ledger.Transaction.html#3701" class="Record">Hastxprop</a> <a id="4622" href="Ledger.Transaction.html#4194" class="Record">Tx</a>
    <a id="4629" href="Ledger.Transaction.html#4597" class="Function">Hastxprop-Tx</a> <a id="4642" class="Symbol">.</a><a id="4643" href="Ledger.Transaction.html#3753" class="Field">txpropOf</a> <a id="4652" class="Symbol">=</a> <a id="4654" href="Ledger.Transaction.html#2982" class="Field">TxBody.txprop</a> <a id="4668" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4670" href="Ledger.Transaction.html#3406" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.HasWdrls-TxBody"></a><a id="4684" href="Ledger.Transaction.html#4684" class="Function">HasWdrls-TxBody</a> <a id="4700" class="Symbol">:</a> <a id="4702" href="Ledger.Certs.html#2964" class="Record">HasWdrls</a> <a id="4711" href="Ledger.Transaction.html#2650" class="Record">TxBody</a>
    <a id="4722" href="Ledger.Transaction.html#4684" class="Function">HasWdrls-TxBody</a> <a id="4738" class="Symbol">.</a><a id="4739" href="Ledger.Certs.html#3013" class="Field">wdrlsOf</a> <a id="4747" class="Symbol">=</a> <a id="4749" href="Ledger.Transaction.html#2918" class="Field">TxBody.txwdrls</a>

    <a id="TransactionStructure.HasWdrls-Tx"></a><a id="4769" href="Ledger.Transaction.html#4769" class="Function">HasWdrls-Tx</a> <a id="4781" class="Symbol">:</a> <a id="4783" href="Ledger.Certs.html#2964" class="Record">HasWdrls</a> <a id="4792" href="Ledger.Transaction.html#4194" class="Record">Tx</a>
    <a id="4799" href="Ledger.Transaction.html#4769" class="Function">HasWdrls-Tx</a> <a id="4811" class="Symbol">.</a><a id="4812" href="Ledger.Certs.html#3013" class="Field">wdrlsOf</a> <a id="4820" class="Symbol">=</a> <a id="4822" href="Ledger.Certs.html#3013" class="Field">wdrlsOf</a> <a id="4830" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4832" href="Ledger.Transaction.html#3406" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.Hastxid-Tx"></a><a id="4846" href="Ledger.Transaction.html#4846" class="Function">Hastxid-Tx</a> <a id="4857" class="Symbol">:</a> <a id="4859" href="Ledger.Transaction.html#3827" class="Record">Hastxid</a> <a id="4867" href="Ledger.Transaction.html#4194" class="Record">Tx</a>
    <a id="4874" href="Ledger.Transaction.html#4846" class="Function">Hastxid-Tx</a> <a id="4885" class="Symbol">.</a><a id="4886" href="Ledger.Transaction.html#3881" class="Field">txidOf</a> <a id="4893" class="Symbol">=</a> <a id="4895" href="Ledger.Transaction.html#3218" class="Field">TxBody.txid</a> <a id="4907" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4909" href="Ledger.Transaction.html#3406" class="Field">TxBodyOf</a>


  <a id="TransactionStructure.getValue"></a><a id="4922" href="Ledger.Transaction.html#4922" class="Function">getValue</a> <a id="4931" class="Symbol">:</a> <a id="4933" href="Ledger.Transaction.html#2293" class="Function">TxOut</a> <a id="4939" class="Symbol">→</a> <a id="4941" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="4949" href="Ledger.Transaction.html#4922" class="Function">getValue</a> <a id="4958" class="Symbol">(_</a> <a id="4961" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4963" href="Ledger.Transaction.html#4963" class="Bound">v</a> <a id="4965" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4967" class="Symbol">_)</a> <a id="4970" class="Symbol">=</a> <a id="4972" href="Ledger.Transaction.html#4963" class="Bound">v</a>

  <a id="TransactionStructure.TxOutʰ"></a><a id="4977" href="Ledger.Transaction.html#4977" class="Function">TxOutʰ</a> <a id="4984" class="Symbol">=</a> <a id="4986" href="Ledger.Address.html#2325" class="Function">Addr</a> <a id="4991" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4993" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="4999" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5001" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5007" class="Symbol">(</a><a id="5008" href="Ledger.Script.html#1773" class="Function">Datum</a> <a id="5014" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5016" href="Ledger.Script.html#1726" class="Function">DataHash</a><a id="5024" class="Symbol">)</a> <a id="5026" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5028" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5034" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>

  <a id="TransactionStructure.txOutHash"></a><a id="5048" href="Ledger.Transaction.html#5048" class="Function">txOutHash</a> <a id="5058" class="Symbol">:</a> <a id="5060" href="Ledger.Transaction.html#2293" class="Function">TxOut</a> <a id="5066" class="Symbol">→</a> <a id="5068" href="Ledger.Transaction.html#4977" class="Function">TxOutʰ</a>
  <a id="5077" href="Ledger.Transaction.html#5048" class="Function">txOutHash</a> <a id="5087" class="Symbol">(</a><a id="5088" href="Ledger.Transaction.html#5088" class="Bound">a</a> <a id="5090" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5092" href="Ledger.Transaction.html#5092" class="Bound">v</a> <a id="5094" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5096" href="Ledger.Transaction.html#5096" class="Bound">d</a> <a id="5098" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5100" href="Ledger.Transaction.html#5100" class="Bound">s</a><a id="5101" class="Symbol">)</a> <a id="5103" class="Symbol">=</a> <a id="5105" href="Ledger.Transaction.html#5088" class="Bound">a</a> <a id="5107" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5109" class="Symbol">(</a><a id="5110" href="Ledger.Transaction.html#5092" class="Bound">v</a> <a id="5112" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5114" class="Symbol">(</a><a id="5115" href="Ledger.Transaction.html#5096" class="Bound">d</a> <a id="5117" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5119" href="Data.Maybe.Base.html#1934" class="Function">M.map</a> <a id="5125" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="5130" href="Ledger.Transaction.html#5100" class="Bound">s</a><a id="5131" class="Symbol">))</a>

  <a id="TransactionStructure.getValueʰ"></a><a id="5137" href="Ledger.Transaction.html#5137" class="Function">getValueʰ</a> <a id="5147" class="Symbol">:</a> <a id="5149" href="Ledger.Transaction.html#4977" class="Function">TxOutʰ</a> <a id="5156" class="Symbol">→</a> <a id="5158" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="5166" href="Ledger.Transaction.html#5137" class="Function">getValueʰ</a> <a id="5176" class="Symbol">(_</a> <a id="5179" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5181" href="Ledger.Transaction.html#5181" class="Bound">v</a> <a id="5183" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5185" class="Symbol">_)</a> <a id="5188" class="Symbol">=</a> <a id="5190" href="Ledger.Transaction.html#5181" class="Bound">v</a>

  <a id="TransactionStructure.txinsVKey"></a><a id="5195" href="Ledger.Transaction.html#5195" class="Function">txinsVKey</a> <a id="5205" class="Symbol">:</a> <a id="5207" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5209" href="Ledger.Transaction.html#2270" class="Function">TxIn</a> <a id="5214" class="Symbol">→</a> <a id="5216" href="Ledger.Transaction.html#2361" class="Function">UTxO</a> <a id="5221" class="Symbol">→</a> <a id="5223" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5225" href="Ledger.Transaction.html#2270" class="Function">TxIn</a>
  <a id="5232" href="Ledger.Transaction.html#5195" class="Function">txinsVKey</a> <a id="5242" href="Ledger.Transaction.html#5242" class="Bound">txins</a> <a id="5248" href="Ledger.Transaction.html#5248" class="Bound">utxo</a> <a id="5253" class="Symbol">=</a> <a id="5255" href="Ledger.Transaction.html#5242" class="Bound">txins</a> <a id="5261" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="5263" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5267" class="Symbol">(</a><a id="5268" href="Ledger.Transaction.html#5248" class="Bound">utxo</a> <a id="5273" href="abstract-set-theory.FiniteSetTheory.html#3088" class="Function Operator">∣^&#39;</a> <a id="5277" class="Symbol">(</a><a id="5278" href="Ledger.Address.html#2580" class="Function">isVKeyAddr</a> <a id="5289" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5291" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="5296" class="Symbol">))</a>

  <a id="TransactionStructure.scriptOuts"></a><a id="5302" href="Ledger.Transaction.html#5302" class="Function">scriptOuts</a> <a id="5313" class="Symbol">:</a> <a id="5315" href="Ledger.Transaction.html#2361" class="Function">UTxO</a> <a id="5320" class="Symbol">→</a> <a id="5322" href="Ledger.Transaction.html#2361" class="Function">UTxO</a>
  <a id="5329" href="Ledger.Transaction.html#5302" class="Function">scriptOuts</a> <a id="5340" href="Ledger.Transaction.html#5340" class="Bound">utxo</a> <a id="5345" class="Symbol">=</a> <a id="5347" href="Ledger.Transaction.html#364" class="Function">filter</a> <a id="5354" class="Symbol">(λ</a> <a id="5357" class="Symbol">(_</a> <a id="5360" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5362" href="Ledger.Transaction.html#5362" class="Bound">addr</a> <a id="5367" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5369" class="Symbol">_)</a> <a id="5372" class="Symbol">→</a> <a id="5374" href="Ledger.Address.html#2608" class="Function">isScriptAddr</a> <a id="5387" href="Ledger.Transaction.html#5362" class="Bound">addr</a><a id="5391" class="Symbol">)</a> <a id="5393" href="Ledger.Transaction.html#5340" class="Bound">utxo</a>

  <a id="TransactionStructure.txinsScript"></a><a id="5401" href="Ledger.Transaction.html#5401" class="Function">txinsScript</a> <a id="5413" class="Symbol">:</a> <a id="5415" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5417" href="Ledger.Transaction.html#2270" class="Function">TxIn</a> <a id="5422" class="Symbol">→</a> <a id="5424" href="Ledger.Transaction.html#2361" class="Function">UTxO</a> <a id="5429" class="Symbol">→</a> <a id="5431" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5433" href="Ledger.Transaction.html#2270" class="Function">TxIn</a>
  <a id="5440" href="Ledger.Transaction.html#5401" class="Function">txinsScript</a> <a id="5452" href="Ledger.Transaction.html#5452" class="Bound">txins</a> <a id="5458" href="Ledger.Transaction.html#5458" class="Bound">utxo</a> <a id="5463" class="Symbol">=</a> <a id="5465" href="Ledger.Transaction.html#5452" class="Bound">txins</a> <a id="5471" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="5473" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5477" class="Symbol">(</a><a id="5478" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5484" class="Symbol">(</a><a id="5485" href="Ledger.Transaction.html#5302" class="Function">scriptOuts</a> <a id="5496" href="Ledger.Transaction.html#5458" class="Bound">utxo</a><a id="5500" class="Symbol">))</a>

  <a id="TransactionStructure.refScripts"></a><a id="5506" href="Ledger.Transaction.html#5506" class="Function">refScripts</a> <a id="5517" class="Symbol">:</a> <a id="5519" href="Ledger.Transaction.html#4194" class="Record">Tx</a> <a id="5522" class="Symbol">→</a> <a id="5524" href="Ledger.Transaction.html#2361" class="Function">UTxO</a> <a id="5529" class="Symbol">→</a> <a id="5531" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5536" href="Ledger.Script.html#5353" class="Function">Script</a>
  <a id="5545" href="Ledger.Transaction.html#5506" class="Function">refScripts</a> <a id="5556" href="Ledger.Transaction.html#5556" class="Bound">tx</a> <a id="5559" href="Ledger.Transaction.html#5559" class="Bound">utxo</a> <a id="5564" class="Symbol">=</a>
    <a id="5570" href="Data.List.Base.html#4628" class="Function">mapMaybe</a> <a id="5579" class="Symbol">(</a><a id="5580" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5586" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5588" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5594" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5596" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="5601" class="Symbol">)</a> <a id="5603" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5605" href="abstract-set-theory.FiniteSetTheory.html#2463" class="Function">setToList</a> <a id="5615" class="Symbol">(</a><a id="5616" href="Class.IsSet.html#959" class="Function">range</a> <a id="5622" class="Symbol">(</a><a id="5623" href="Ledger.Transaction.html#5559" class="Bound">utxo</a> <a id="5628" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="5630" class="Symbol">(</a><a id="5631" href="Ledger.Transaction.html#2686" class="Function">txins</a> <a id="5637" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="5639" href="Ledger.Transaction.html#2716" class="Function">refInputs</a><a id="5648" class="Symbol">)))</a>
    <a id="5656" class="Keyword">where</a> <a id="5662" class="Keyword">open</a> <a id="5667" href="Ledger.Transaction.html#4194" class="Module">Tx</a><a id="5669" class="Symbol">;</a> <a id="5671" class="Keyword">open</a> <a id="5676" href="Ledger.Transaction.html#2650" class="Module">TxBody</a> <a id="5683" class="Symbol">(</a><a id="5684" href="Ledger.Transaction.html#5556" class="Bound">tx</a> <a id="5687" class="Symbol">.</a><a id="5688" href="Ledger.Transaction.html#4226" class="Field">body</a><a id="5692" class="Symbol">)</a>

  <a id="TransactionStructure.txscripts"></a><a id="5697" href="Ledger.Transaction.html#5697" class="Function">txscripts</a> <a id="5707" class="Symbol">:</a> <a id="5709" href="Ledger.Transaction.html#4194" class="Record">Tx</a> <a id="5712" class="Symbol">→</a> <a id="5714" href="Ledger.Transaction.html#2361" class="Function">UTxO</a> <a id="5719" class="Symbol">→</a> <a id="5721" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5723" href="Ledger.Script.html#5353" class="Function">Script</a>
  <a id="5732" href="Ledger.Transaction.html#5697" class="Function">txscripts</a> <a id="5742" href="Ledger.Transaction.html#5742" class="Bound">tx</a> <a id="5745" href="Ledger.Transaction.html#5745" class="Bound">utxo</a> <a id="5750" class="Symbol">=</a> <a id="5752" href="Ledger.Transaction.html#4013" class="Field">scripts</a> <a id="5760" class="Symbol">(</a><a id="5761" href="Ledger.Transaction.html#5742" class="Bound">tx</a> <a id="5764" class="Symbol">.</a><a id="5765" href="Ledger.Transaction.html#4250" class="Field">wits</a><a id="5769" class="Symbol">)</a> <a id="5771" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="5773" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="5782" class="Symbol">(</a><a id="5783" href="Ledger.Transaction.html#5506" class="Function">refScripts</a> <a id="5794" href="Ledger.Transaction.html#5742" class="Bound">tx</a> <a id="5797" href="Ledger.Transaction.html#5745" class="Bound">utxo</a><a id="5801" class="Symbol">)</a>
    <a id="5807" class="Keyword">where</a> <a id="5813" class="Keyword">open</a> <a id="5818" href="Ledger.Transaction.html#4194" class="Module">Tx</a><a id="5820" class="Symbol">;</a> <a id="5822" class="Keyword">open</a> <a id="5827" href="Ledger.Transaction.html#3944" class="Module">TxWitnesses</a>

  <a id="TransactionStructure.lookupScriptHash"></a><a id="5842" href="Ledger.Transaction.html#5842" class="Function">lookupScriptHash</a> <a id="5859" class="Symbol">:</a> <a id="5861" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="5872" class="Symbol">→</a> <a id="5874" href="Ledger.Transaction.html#4194" class="Record">Tx</a> <a id="5877" class="Symbol">→</a> <a id="5879" href="Ledger.Transaction.html#2361" class="Function">UTxO</a> <a id="5884" class="Symbol">→</a> <a id="5886" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5892" href="Ledger.Script.html#5353" class="Function">Script</a>
  <a id="5901" href="Ledger.Transaction.html#5842" class="Function">lookupScriptHash</a> <a id="5918" href="Ledger.Transaction.html#5918" class="Bound">sh</a> <a id="5921" href="Ledger.Transaction.html#5921" class="Bound">tx</a> <a id="5924" href="Ledger.Transaction.html#5924" class="Bound">utxo</a> <a id="5929" class="Symbol">=</a>
    <a id="5935" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="5938" href="Ledger.Transaction.html#5918" class="Bound">sh</a> <a id="5941" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5943" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="5948" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5954" class="Symbol">(</a><a id="5955" href="Ledger.Transaction.html#6024" class="Function">m</a> <a id="5957" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="5958" class="Symbol">)</a> <a id="5960" href="Class.ToBool.html#389" class="Function Operator">then</a>
      <a id="5971" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5976" class="Symbol">(</a><a id="5977" href="Axiom.Set.Map.html#13563" class="Function">lookupᵐ</a> <a id="5985" href="Ledger.Transaction.html#6024" class="Function">m</a> <a id="5987" href="Ledger.Transaction.html#5918" class="Bound">sh</a><a id="5989" class="Symbol">)</a>
    <a id="5995" href="Class.ToBool.html#389" class="Function Operator">else</a>
      <a id="6006" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="6018" class="Keyword">where</a> <a id="6024" href="Ledger.Transaction.html#6024" class="Function">m</a> <a id="6026" class="Symbol">=</a> <a id="6028" href="Ledger.Prelude.html#2030" class="Function">setToMap</a> <a id="6037" class="Symbol">(</a><a id="6038" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="6043" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="6045" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="6050" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="6052" href="Function.Base.html#704" class="Function">id</a> <a id="6055" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="6057" class="Symbol">(</a><a id="6058" href="Ledger.Transaction.html#5697" class="Function">txscripts</a> <a id="6068" href="Ledger.Transaction.html#5921" class="Bound">tx</a> <a id="6071" href="Ledger.Transaction.html#5924" class="Bound">utxo</a><a id="6075" class="Symbol">))</a>


  <a id="TransactionStructure.isP2Script"></a><a id="6082" href="Ledger.Transaction.html#6082" class="Function">isP2Script</a> <a id="6093" class="Symbol">:</a> <a id="6095" href="Ledger.Script.html#5353" class="Function">Script</a> <a id="6102" class="Symbol">→</a> <a id="6104" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="6111" href="Ledger.Transaction.html#6082" class="Function">isP2Script</a> <a id="6122" class="Symbol">=</a> <a id="6124" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="6126" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6128" href="Data.Maybe.Base.html#1117" class="Function">is-just</a> <a id="6136" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6138" href="Data.Sum.html#870" class="Function">isInj₂</a>

  <a id="TransactionStructure.isP2Script?"></a><a id="6148" href="Ledger.Transaction.html#6148" class="Function">isP2Script?</a> <a id="6160" class="Symbol">:</a> <a id="6162" class="Symbol">∀</a> <a id="6164" class="Symbol">{</a><a id="6165" href="Ledger.Transaction.html#6165" class="Bound">s</a><a id="6166" class="Symbol">}</a> <a id="6168" class="Symbol">→</a> <a id="6170" href="Ledger.Transaction.html#6082" class="Function">isP2Script</a> <a id="6181" href="Ledger.Transaction.html#6165" class="Bound">s</a> <a id="6183" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="6187" href="Ledger.Transaction.html#6148" class="Function">isP2Script?</a> <a id="6199" class="Symbol">{</a><a id="6200" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="6205" href="Ledger.Transaction.html#6205" class="Bound">x</a><a id="6206" class="Symbol">}</a> <a id="6208" class="Symbol">.</a><a id="6209" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="6213" class="Symbol">=</a> <a id="6215" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6218" class="Symbol">λ</a> <a id="6220" class="Symbol">()</a>
  <a id="6225" href="Ledger.Transaction.html#6148" class="Function">isP2Script?</a> <a id="6237" class="Symbol">{</a><a id="6238" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6243" href="Ledger.Transaction.html#6243" class="Bound">y</a><a id="6244" class="Symbol">}</a> <a id="6246" class="Symbol">.</a><a id="6247" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="6251" class="Symbol">=</a> <a id="6253" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6257" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>

  <a id="6263" class="Keyword">instance</a>
    <a id="TransactionStructure.HasCoin-TxOut"></a><a id="6276" href="Ledger.Transaction.html#6276" class="Function">HasCoin-TxOut</a> <a id="6290" class="Symbol">:</a> <a id="6292" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="6300" href="Ledger.Transaction.html#2293" class="Function">TxOut</a>
    <a id="6310" href="Ledger.Transaction.html#6276" class="Function">HasCoin-TxOut</a> <a id="6324" class="Symbol">.</a><a id="6325" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="6333" class="Symbol">=</a> <a id="6335" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="6340" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6342" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="6348" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6350" href="Data.Product.Base.html#650" class="Field">proj₂</a>

</pre></body></html>