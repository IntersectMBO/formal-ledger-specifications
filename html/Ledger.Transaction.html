<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Transaction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>
<a id="25" class="Comment">--------------------------------------------------------------------------------</a>
<a id="106" class="Comment">-- NOTE: Everything in this module is part of TransactionStructure</a>
<a id="173" class="Comment">--------------------------------------------------------------------------------</a>
<a id="254" class="Keyword">module</a> <a id="261" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a> <a id="280" class="Keyword">where</a>

<a id="287" class="Keyword">import</a> <a id="294" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="310" class="Symbol">as</a> <a id="313" class="Module">M</a>

<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="343" class="Keyword">renaming</a> <a id="352" class="Symbol">(</a><a id="353" href="abstract-set-theory.FiniteSetTheory.html#2895" class="Function">filterᵐ</a> <a id="361" class="Symbol">to</a> <a id="364" class="Function">filter</a><a id="370" class="Symbol">)</a>

<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="399" class="Keyword">open</a> <a id="404" class="Keyword">import</a> <a id="411" href="Ledger.Types.Epoch.html" class="Module">Ledger.Types.Epoch</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Ledger.Types.GovStructure.html" class="Module">Ledger.Types.GovStructure</a>
<a id="468" class="Keyword">import</a> <a id="475" href="Ledger.PParams.html" class="Module">Ledger.PParams</a>
<a id="490" class="Keyword">import</a> <a id="497" href="Ledger.Script.html" class="Module">Ledger.Script</a>
<a id="511" class="Keyword">import</a> <a id="518" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a>
<a id="543" class="Keyword">import</a> <a id="550" href="Ledger.Certs.html" class="Module">Ledger.Certs</a>
<a id="563" class="Keyword">import</a> <a id="570" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a>
<a id="590" class="Keyword">import</a> <a id="597" href="Ledger.Address.html" class="Module">Ledger.Address</a>

<a id="613" class="Keyword">open</a> <a id="618" class="Keyword">import</a> <a id="625" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>
<a id="645" class="Keyword">open</a> <a id="650" class="Keyword">import</a> <a id="657" href="MyDebugOptions.html" class="Module">MyDebugOptions</a>
<a id="672" class="Keyword">open</a> <a id="677" class="Keyword">import</a> <a id="684" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="711" class="Keyword">using</a> <a id="717" class="Symbol">(</a><a id="718" href="Relation.Nullary.Decidable.Core.html#4636" class="Function Operator">⌊_⌋</a><a id="721" class="Symbol">)</a>

<a id="724" class="Keyword">data</a> <a id="Tag"></a><a id="729" href="Ledger.Transaction.html#729" class="Datatype">Tag</a> <a id="733" class="Symbol">:</a> <a id="735" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="740" class="Keyword">where</a>
  <a id="Tag.Spend"></a><a id="748" href="Ledger.Transaction.html#748" class="InductiveConstructor">Spend</a> <a id="Tag.Mint"></a><a id="754" href="Ledger.Transaction.html#754" class="InductiveConstructor">Mint</a> <a id="Tag.Cert"></a><a id="759" href="Ledger.Transaction.html#759" class="InductiveConstructor">Cert</a> <a id="Tag.Rewrd"></a><a id="764" href="Ledger.Transaction.html#764" class="InductiveConstructor">Rewrd</a> <a id="Tag.Vote"></a><a id="770" href="Ledger.Transaction.html#770" class="InductiveConstructor">Vote</a> <a id="Tag.Propose"></a><a id="775" href="Ledger.Transaction.html#775" class="InductiveConstructor">Propose</a> <a id="783" class="Symbol">:</a> <a id="785" href="Ledger.Transaction.html#729" class="Datatype">Tag</a>
<a id="789" class="Keyword">unquoteDecl</a> <a id="DecEq-Tag"></a><a id="801" href="Ledger.Transaction.html#801" class="Function">DecEq-Tag</a> <a id="811" class="Symbol">=</a> <a id="813" href="Tactic.Derive.DecEq.html#3519" class="Function">derive-DecEq</a> <a id="826" class="Symbol">((</a><a id="828" class="Keyword">quote</a> <a id="834" href="Ledger.Transaction.html#729" class="Datatype">Tag</a> <a id="838" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="840" href="Ledger.Transaction.html#801" class="Function">DecEq-Tag</a><a id="849" class="Symbol">)</a> <a id="851" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="853" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="855" class="Symbol">)</a>



<a id="860" class="Keyword">record</a> <a id="TransactionStructure"></a><a id="867" href="Ledger.Transaction.html#867" class="Record">TransactionStructure</a> <a id="888" class="Symbol">:</a> <a id="890" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="896" class="Keyword">where</a>
  <a id="904" class="Keyword">field</a>


    <a id="TransactionStructure.Ix"></a><a id="916" href="Ledger.Transaction.html#916" class="Field">Ix</a> <a id="TransactionStructure.TxId"></a><a id="919" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="TransactionStructure.AuxiliaryData"></a><a id="924" href="Ledger.Transaction.html#924" class="Field">AuxiliaryData</a> <a id="938" class="Symbol">:</a> <a id="940" href="Agda.Primitive.html#388" class="Primitive">Type</a>



    <a id="952" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-Ix"></a><a id="954" href="Ledger.Transaction.html#954" class="Field">DecEq-Ix</a>   <a id="965" class="Symbol">⦄</a> <a id="967" class="Symbol">:</a> <a id="969" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="975" href="Ledger.Transaction.html#916" class="Field">Ix</a>
    <a id="982" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-TxId"></a><a id="984" href="Ledger.Transaction.html#984" class="Field">DecEq-TxId</a> <a id="995" class="Symbol">⦄</a> <a id="997" class="Symbol">:</a> <a id="999" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="1005" href="Ledger.Transaction.html#919" class="Field">TxId</a>
    <a id="TransactionStructure.adHashingScheme"></a><a id="1014" href="Ledger.Transaction.html#1014" class="Field">adHashingScheme</a> <a id="1030" class="Symbol">:</a> <a id="1032" href="Ledger.Crypto.html#99" class="Record">isHashableSet</a> <a id="1046" href="Ledger.Transaction.html#924" class="Field">AuxiliaryData</a>
  <a id="1062" class="Keyword">open</a> <a id="1067" href="Ledger.Crypto.html#99" class="Module">isHashableSet</a> <a id="1081" href="Ledger.Transaction.html#1014" class="Field">adHashingScheme</a> <a id="1097" class="Keyword">renaming</a> <a id="1106" class="Symbol">(</a><a id="1107" href="Ledger.Crypto.html#176" class="Field">THash</a> <a id="1113" class="Symbol">to</a> <a id="1116" class="Field">ADHash</a><a id="1122" class="Symbol">)</a> <a id="1124" class="Keyword">public</a>

  <a id="1134" class="Keyword">field</a> <a id="TransactionStructure.globalConstants"></a><a id="1140" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a> <a id="1156" class="Symbol">:</a> <a id="1158" class="Symbol">_</a>
  <a id="1162" class="Keyword">open</a> <a id="1167" href="Ledger.Types.Epoch.html#1895" class="Module">GlobalConstants</a> <a id="1183" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a> <a id="1199" class="Keyword">public</a>

  <a id="1209" class="Keyword">field</a> <a id="TransactionStructure.crypto"></a><a id="1215" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1222" class="Symbol">:</a> <a id="1224" class="Symbol">_</a>
  <a id="1228" class="Keyword">open</a> <a id="1233" href="Ledger.Crypto.html#1043" class="Module">Crypto</a> <a id="1240" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1247" class="Keyword">public</a>
  <a id="1256" class="Keyword">open</a> <a id="1261" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a> <a id="1281" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="1292" class="Keyword">public</a>
  <a id="1301" class="Keyword">open</a> <a id="1306" href="Ledger.Address.html" class="Module">Ledger.Address</a> <a id="1321" href="Ledger.Types.Epoch.html#1934" class="Function">Network</a> <a id="1329" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="1337" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="1348" class="Symbol">⦃</a> <a id="1350" href="Function.Base.html#4736" class="Function">it</a> <a id="1353" class="Symbol">⦄</a> <a id="1355" class="Symbol">⦃</a> <a id="1357" href="Function.Base.html#4736" class="Function">it</a> <a id="1360" class="Symbol">⦄</a> <a id="1362" class="Symbol">⦃</a> <a id="1364" href="Function.Base.html#4736" class="Function">it</a> <a id="1367" class="Symbol">⦄</a> <a id="1369" class="Keyword">public</a>

  <a id="1379" class="Keyword">field</a> <a id="TransactionStructure.epochStructure"></a><a id="1385" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1400" class="Symbol">:</a> <a id="1402" class="Symbol">_</a>
  <a id="1406" class="Keyword">open</a> <a id="1411" href="Ledger.Types.Epoch.html#408" class="Module">EpochStructure</a> <a id="1426" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1441" class="Keyword">public</a>
  <a id="1450" class="Keyword">open</a> <a id="1455" href="Ledger.Script.html" class="Module">Ledger.Script</a> <a id="1469" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1476" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1491" class="Keyword">public</a>

  <a id="1501" class="Keyword">field</a> <a id="TransactionStructure.scriptStructure"></a><a id="1507" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="1523" class="Symbol">:</a> <a id="1525" class="Symbol">_</a>
  <a id="1529" class="Keyword">open</a> <a id="1534" href="Ledger.Script.html#4951" class="Module">ScriptStructure</a> <a id="1550" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="1566" class="Keyword">public</a>
  <a id="1575" class="Keyword">open</a> <a id="1580" href="Ledger.PParams.html" class="Module">Ledger.PParams</a> <a id="1595" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1602" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1617" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="1633" class="Keyword">public</a>

  <a id="1643" class="Keyword">field</a> <a id="TransactionStructure.govParams"></a><a id="1649" href="Ledger.Transaction.html#1649" class="Field">govParams</a> <a id="1659" class="Symbol">:</a> <a id="1661" class="Symbol">_</a>
  <a id="1665" class="Keyword">open</a> <a id="1670" href="Ledger.PParams.html#14142" class="Module">GovParams</a> <a id="1680" href="Ledger.Transaction.html#1649" class="Field">govParams</a> <a id="1690" class="Keyword">public</a>

  <a id="1700" class="Keyword">field</a> <a id="TransactionStructure.tokenAlgebra"></a><a id="1706" href="Ledger.Transaction.html#1706" class="Field">tokenAlgebra</a> <a id="1719" class="Symbol">:</a> <a id="1721" href="Ledger.TokenAlgebra.html#453" class="Record">TokenAlgebra</a>
  <a id="1736" class="Keyword">open</a> <a id="1741" href="Ledger.TokenAlgebra.html#453" class="Module">TokenAlgebra</a> <a id="1754" href="Ledger.Transaction.html#1706" class="Field">tokenAlgebra</a> <a id="1767" class="Keyword">public</a>

  <a id="1777" class="Keyword">field</a> <a id="TransactionStructure.txidBytes"></a><a id="1783" href="Ledger.Transaction.html#1783" class="Field">txidBytes</a> <a id="1793" class="Symbol">:</a> <a id="1795" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="1800" class="Symbol">→</a> <a id="1802" href="Ledger.Crypto.html#591" class="Function">Ser</a>

  <a id="TransactionStructure.govStructure"></a><a id="1809" href="Ledger.Transaction.html#1809" class="Function">govStructure</a> <a id="1822" class="Symbol">:</a> <a id="1824" href="Ledger.Types.GovStructure.html#235" class="Record">GovStructure</a>
  <a id="1839" href="Ledger.Transaction.html#1809" class="Function">govStructure</a> <a id="1852" class="Symbol">=</a> <a id="1854" class="Keyword">record</a>
    <a id="1865" class="Comment">-- TODO: figure out what to do with the hash</a>
    <a id="1914" class="Symbol">{</a> <a id="1916" href="Ledger.Types.GovStructure.html#270" class="Field">TxId</a> <a id="1921" class="Symbol">=</a> <a id="1923" href="Ledger.Transaction.html#919" class="Field">TxId</a><a id="1927" class="Symbol">;</a> <a id="1929" href="Ledger.Types.GovStructure.html#275" class="Field">DocHash</a> <a id="1937" class="Symbol">=</a> <a id="1939" href="Ledger.Transaction.html#1116" class="Function">ADHash</a>
    <a id="1950" class="Symbol">;</a> <a id="1952" href="Ledger.Types.GovStructure.html#335" class="Field">crypto</a> <a id="1959" class="Symbol">=</a> <a id="1961" href="Ledger.Transaction.html#1215" class="Field">crypto</a>
    <a id="1972" class="Symbol">;</a> <a id="1974" href="Ledger.Types.GovStructure.html#383" class="Field">epochStructure</a> <a id="1989" class="Symbol">=</a> <a id="1991" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a>
    <a id="2010" class="Symbol">;</a> <a id="2012" href="Ledger.Types.GovStructure.html#455" class="Field">scriptStructure</a> <a id="2028" class="Symbol">=</a> <a id="2030" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a>
    <a id="2050" class="Symbol">;</a> <a id="2052" href="Ledger.Types.GovStructure.html#634" class="Field">govParams</a> <a id="2062" class="Symbol">=</a> <a id="2064" href="Ledger.Transaction.html#1649" class="Field">govParams</a>
    <a id="2078" class="Symbol">;</a> <a id="2080" href="Ledger.Types.GovStructure.html#699" class="Field">globalConstants</a> <a id="2096" class="Symbol">=</a> <a id="2098" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a>
    <a id="2118" class="Symbol">}</a>

  <a id="2123" class="Keyword">module</a> <a id="TransactionStructure.GovernanceActions"></a><a id="2130" href="Ledger.Transaction.html#2130" class="Module">GovernanceActions</a> <a id="2148" class="Symbol">=</a> <a id="2150" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a> <a id="2175" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>
  <a id="2190" class="Keyword">open</a> <a id="2195" href="Ledger.Transaction.html#2130" class="Module">GovernanceActions</a> <a id="2213" class="Keyword">hiding</a> <a id="2220" class="Symbol">(</a><a id="2221" href="Ledger.GovernanceActions.html#2176" class="Datatype">Vote</a><a id="2225" class="Symbol">;</a> <a id="2227" href="Ledger.GovernanceActions.html#2196" class="InductiveConstructor">yes</a><a id="2230" class="Symbol">;</a> <a id="2232" href="Ledger.GovernanceActions.html#2200" class="InductiveConstructor">no</a><a id="2234" class="Symbol">;</a> <a id="2236" href="Ledger.GovernanceActions.html#2203" class="InductiveConstructor">abstain</a><a id="2243" class="Symbol">)</a> <a id="2245" class="Keyword">public</a>

  <a id="2255" class="Keyword">open</a> <a id="2260" class="Keyword">import</a> <a id="2267" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="2280" href="Ledger.Transaction.html#1809" class="Function">govStructure</a> <a id="2293" class="Keyword">using</a> <a id="2299" class="Symbol">(</a><a id="2300" href="Ledger.Certs.html#1324" class="Datatype">DCert</a><a id="2305" class="Symbol">)</a>


  <a id="TransactionStructure.TxIn"></a><a id="2311" href="Ledger.Transaction.html#2311" class="Function">TxIn</a>     <a id="2320" class="Symbol">=</a> <a id="2322" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="2327" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2329" href="Ledger.Transaction.html#916" class="Field">Ix</a>
  <a id="TransactionStructure.TxOut"></a><a id="2334" href="Ledger.Transaction.html#2334" class="Function">TxOut</a>    <a id="2343" class="Symbol">=</a> <a id="2345" href="Ledger.Address.html#2324" class="Function">Addr</a> <a id="2350" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2352" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="2358" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2360" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2366" class="Symbol">(</a><a id="2367" href="Ledger.Script.html#1766" class="Function">Datum</a> <a id="2373" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="2375" href="Ledger.Script.html#1719" class="Function">DataHash</a><a id="2383" class="Symbol">)</a> <a id="2385" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2387" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2393" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="TransactionStructure.UTxO"></a><a id="2402" href="Ledger.Transaction.html#2402" class="Function">UTxO</a>     <a id="2411" class="Symbol">=</a> <a id="2413" href="Ledger.Transaction.html#2311" class="Function">TxIn</a> <a id="2418" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2420" href="Ledger.Transaction.html#2334" class="Function">TxOut</a>
  <a id="TransactionStructure.Wdrl"></a><a id="2428" href="Ledger.Transaction.html#2428" class="Function">Wdrl</a>     <a id="2437" class="Symbol">=</a> <a id="2439" href="Ledger.Address.html#1336" class="Record">RwdAddr</a> <a id="2447" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2449" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="TransactionStructure.RdmrPtr"></a><a id="2456" href="Ledger.Transaction.html#2456" class="Function">RdmrPtr</a>  <a id="2465" class="Symbol">=</a> <a id="2467" href="Ledger.Transaction.html#729" class="Datatype">Tag</a> <a id="2471" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2473" href="Ledger.Transaction.html#916" class="Field">Ix</a>

  <a id="TransactionStructure.ProposedPPUpdates"></a><a id="2479" href="Ledger.Transaction.html#2479" class="Function">ProposedPPUpdates</a>  <a id="2498" class="Symbol">=</a> <a id="2500" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="2508" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2510" href="Ledger.PParams.html#14240" class="Function">PParamsUpdate</a>
  <a id="TransactionStructure.Update"></a><a id="2526" href="Ledger.Transaction.html#2526" class="Function">Update</a>             <a id="2545" class="Symbol">=</a> <a id="2547" href="Ledger.Transaction.html#2479" class="Function">ProposedPPUpdates</a> <a id="2565" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2567" href="Ledger.Types.Epoch.html#476" class="Function">Epoch</a>


  <a id="2577" class="Keyword">record</a> <a id="TransactionStructure.HasUTxO"></a><a id="2584" href="Ledger.Transaction.html#2584" class="Record">HasUTxO</a> <a id="2592" class="Symbol">{</a><a id="2593" href="Ledger.Transaction.html#2593" class="Bound">a</a><a id="2594" class="Symbol">}</a> <a id="2596" class="Symbol">(</a><a id="2597" href="Ledger.Transaction.html#2597" class="Bound">A</a> <a id="2599" class="Symbol">:</a> <a id="2601" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2606" href="Ledger.Transaction.html#2593" class="Bound">a</a><a id="2607" class="Symbol">)</a> <a id="2609" class="Symbol">:</a> <a id="2611" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2616" href="Ledger.Transaction.html#2593" class="Bound">a</a> <a id="2618" class="Keyword">where</a>
    <a id="2628" class="Keyword">field</a> <a id="2634" href="Ledger.Transaction.html#2634" class="Field">UTxOOf</a> <a id="2641" class="Symbol">:</a> <a id="2643" href="Ledger.Transaction.html#2597" class="Bound">A</a> <a id="2645" class="Symbol">→</a> <a id="2647" href="Ledger.Transaction.html#2402" class="Function">UTxO</a>
  <a id="2654" class="Keyword">open</a> <a id="2659" href="Ledger.Transaction.html#2584" class="Module">HasUTxO</a> <a id="2667" class="Symbol">⦃...⦄</a> <a id="2673" class="Keyword">public</a>


  <a id="2684" class="Keyword">record</a> <a id="TransactionStructure.TxBody"></a><a id="2691" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="2698" class="Symbol">:</a> <a id="2700" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2705" class="Keyword">where</a>
    <a id="2715" class="Keyword">field</a>
      <a id="2727" href="Ledger.Transaction.html#2727" class="Field">txins</a>          <a id="2742" class="Symbol">:</a> <a id="2744" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2746" href="Ledger.Transaction.html#2311" class="Function">TxIn</a>
      <a id="2757" href="Ledger.Transaction.html#2757" class="Field">refInputs</a>      <a id="2772" class="Symbol">:</a> <a id="2774" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2776" href="Ledger.Transaction.html#2311" class="Function">TxIn</a>
      <a id="2787" href="Ledger.Transaction.html#2787" class="Field">txouts</a>         <a id="2802" class="Symbol">:</a> <a id="2804" href="Ledger.Transaction.html#916" class="Field">Ix</a> <a id="2807" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2809" href="Ledger.Transaction.html#2334" class="Function">TxOut</a>
      <a id="2821" href="Ledger.Transaction.html#2821" class="Field">txfee</a>          <a id="2836" class="Symbol">:</a> <a id="2838" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="2849" href="Ledger.Transaction.html#2849" class="Field">mint</a>           <a id="2864" class="Symbol">:</a> <a id="2866" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
      <a id="2878" href="Ledger.Transaction.html#2878" class="Field">txvldt</a>         <a id="2893" class="Symbol">:</a> <a id="2895" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2901" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a> <a id="2906" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2908" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2914" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a>
      <a id="2925" href="Ledger.Transaction.html#2925" class="Field">txcerts</a>        <a id="2940" class="Symbol">:</a> <a id="2942" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2947" href="Ledger.Certs.html#1324" class="Datatype">DCert</a>
      <a id="2959" href="Ledger.Transaction.html#2959" class="Field">txwdrls</a>        <a id="2974" class="Symbol">:</a> <a id="2976" href="Ledger.Transaction.html#2428" class="Function">Wdrl</a>
      <a id="2987" href="Ledger.Transaction.html#2987" class="Field">txvote</a>         <a id="3002" class="Symbol">:</a> <a id="3004" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3009" href="Ledger.GovernanceActions.html#2227" class="Record">GovVote</a>
      <a id="3023" href="Ledger.Transaction.html#3023" class="Field">txprop</a>         <a id="3038" class="Symbol">:</a> <a id="3040" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3045" href="Ledger.GovernanceActions.html#2372" class="Record">GovProposal</a>
      <a id="3063" href="Ledger.Transaction.html#3063" class="Field">txdonation</a>     <a id="3078" class="Symbol">:</a> <a id="3080" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="3091" href="Ledger.Transaction.html#3091" class="Field">txup</a>           <a id="3106" class="Symbol">:</a> <a id="3108" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3114" href="Ledger.Transaction.html#2526" class="Function">Update</a>
      <a id="3127" href="Ledger.Transaction.html#3127" class="Field">txADhash</a>       <a id="3142" class="Symbol">:</a> <a id="3144" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3150" href="Ledger.Transaction.html#1116" class="Function">ADHash</a>
      <a id="3163" href="Ledger.Transaction.html#3163" class="Field">txNetworkId</a>    <a id="3178" class="Symbol">:</a> <a id="3180" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3186" href="Ledger.Types.Epoch.html#1934" class="Function">Network</a>
      <a id="3200" href="Ledger.Transaction.html#3200" class="Field">curTreasury</a>    <a id="3215" class="Symbol">:</a> <a id="3217" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3223" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="3234" href="Ledger.Transaction.html#3234" class="Field">txsize</a>         <a id="3249" class="Symbol">:</a> <a id="3251" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
      <a id="3259" href="Ledger.Transaction.html#3259" class="Field">txid</a>           <a id="3274" class="Symbol">:</a> <a id="3276" href="Ledger.Transaction.html#919" class="Field">TxId</a>
      <a id="3287" href="Ledger.Transaction.html#3287" class="Field">collateral</a>     <a id="3302" class="Symbol">:</a> <a id="3304" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3306" href="Ledger.Transaction.html#2311" class="Function">TxIn</a>
      <a id="3317" href="Ledger.Transaction.html#3317" class="Field">reqSigHash</a>     <a id="3332" class="Symbol">:</a> <a id="3334" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3336" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a>
      <a id="3350" href="Ledger.Transaction.html#3350" class="Field">scriptIntHash</a>  <a id="3365" class="Symbol">:</a> <a id="3367" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3373" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>


  <a id="3388" class="Keyword">record</a> <a id="TransactionStructure.HasTxBody"></a><a id="3395" href="Ledger.Transaction.html#3395" class="Record">HasTxBody</a> <a id="3405" class="Symbol">{</a><a id="3406" href="Ledger.Transaction.html#3406" class="Bound">a</a><a id="3407" class="Symbol">}</a> <a id="3409" class="Symbol">(</a><a id="3410" href="Ledger.Transaction.html#3410" class="Bound">A</a> <a id="3412" class="Symbol">:</a> <a id="3414" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3419" href="Ledger.Transaction.html#3406" class="Bound">a</a><a id="3420" class="Symbol">)</a> <a id="3422" class="Symbol">:</a> <a id="3424" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3429" href="Ledger.Transaction.html#3406" class="Bound">a</a> <a id="3431" class="Keyword">where</a>
    <a id="3441" class="Keyword">field</a> <a id="3447" href="Ledger.Transaction.html#3447" class="Field">TxBodyOf</a> <a id="3456" class="Symbol">:</a> <a id="3458" href="Ledger.Transaction.html#3410" class="Bound">A</a> <a id="3460" class="Symbol">→</a> <a id="3462" href="Ledger.Transaction.html#2691" class="Record">TxBody</a>
  <a id="3471" class="Keyword">open</a> <a id="3476" href="Ledger.Transaction.html#3395" class="Module">HasTxBody</a>  <a id="3487" class="Symbol">⦃...⦄</a> <a id="3493" class="Keyword">public</a>

  <a id="3503" class="Keyword">record</a> <a id="TransactionStructure.Hastxfee"></a><a id="3510" href="Ledger.Transaction.html#3510" class="Record">Hastxfee</a> <a id="3519" class="Symbol">{</a><a id="3520" href="Ledger.Transaction.html#3520" class="Bound">a</a><a id="3521" class="Symbol">}</a> <a id="3523" class="Symbol">(</a><a id="3524" href="Ledger.Transaction.html#3524" class="Bound">A</a> <a id="3526" class="Symbol">:</a> <a id="3528" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3533" href="Ledger.Transaction.html#3520" class="Bound">a</a><a id="3534" class="Symbol">)</a> <a id="3536" class="Symbol">:</a> <a id="3538" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3543" href="Ledger.Transaction.html#3520" class="Bound">a</a> <a id="3545" class="Keyword">where</a>
    <a id="3555" class="Keyword">field</a> <a id="3561" href="Ledger.Transaction.html#3561" class="Field">txfeeOf</a> <a id="3569" class="Symbol">:</a> <a id="3571" href="Ledger.Transaction.html#3524" class="Bound">A</a> <a id="3573" class="Symbol">→</a> <a id="3575" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3582" class="Keyword">open</a> <a id="3587" href="Ledger.Transaction.html#3510" class="Module">Hastxfee</a>   <a id="3598" class="Symbol">⦃...⦄</a> <a id="3604" class="Keyword">public</a>

  <a id="3614" class="Keyword">record</a> <a id="TransactionStructure.Hastxcerts"></a><a id="3621" href="Ledger.Transaction.html#3621" class="Record">Hastxcerts</a> <a id="3632" class="Symbol">{</a><a id="3633" href="Ledger.Transaction.html#3633" class="Bound">a</a><a id="3634" class="Symbol">}</a> <a id="3636" class="Symbol">(</a><a id="3637" href="Ledger.Transaction.html#3637" class="Bound">A</a> <a id="3639" class="Symbol">:</a> <a id="3641" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3646" href="Ledger.Transaction.html#3633" class="Bound">a</a><a id="3647" class="Symbol">)</a> <a id="3649" class="Symbol">:</a> <a id="3651" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3656" href="Ledger.Transaction.html#3633" class="Bound">a</a> <a id="3658" class="Keyword">where</a>
    <a id="3668" class="Keyword">field</a> <a id="3674" href="Ledger.Transaction.html#3674" class="Field">txcertsOf</a> <a id="3684" class="Symbol">:</a> <a id="3686" href="Ledger.Transaction.html#3637" class="Bound">A</a> <a id="3688" class="Symbol">→</a> <a id="3690" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3695" href="Ledger.Certs.html#1324" class="Datatype">DCert</a>
  <a id="3703" class="Keyword">open</a> <a id="3708" href="Ledger.Transaction.html#3621" class="Module">Hastxcerts</a> <a id="3719" class="Symbol">⦃...⦄</a> <a id="3725" class="Keyword">public</a>

  <a id="3735" class="Keyword">record</a> <a id="TransactionStructure.Hastxprop"></a><a id="3742" href="Ledger.Transaction.html#3742" class="Record">Hastxprop</a> <a id="3752" class="Symbol">{</a><a id="3753" href="Ledger.Transaction.html#3753" class="Bound">a</a><a id="3754" class="Symbol">}</a> <a id="3756" class="Symbol">(</a><a id="3757" href="Ledger.Transaction.html#3757" class="Bound">A</a> <a id="3759" class="Symbol">:</a> <a id="3761" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3766" href="Ledger.Transaction.html#3753" class="Bound">a</a><a id="3767" class="Symbol">)</a> <a id="3769" class="Symbol">:</a> <a id="3771" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3776" href="Ledger.Transaction.html#3753" class="Bound">a</a> <a id="3778" class="Keyword">where</a>
    <a id="3788" class="Keyword">field</a> <a id="3794" href="Ledger.Transaction.html#3794" class="Field">txpropOf</a>  <a id="3804" class="Symbol">:</a> <a id="3806" href="Ledger.Transaction.html#3757" class="Bound">A</a> <a id="3808" class="Symbol">→</a> <a id="3810" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3815" href="Ledger.GovernanceActions.html#2372" class="Record">GovProposal</a>
  <a id="3829" class="Keyword">open</a> <a id="3834" href="Ledger.Transaction.html#3742" class="Module">Hastxprop</a>  <a id="3845" class="Symbol">⦃...⦄</a> <a id="3851" class="Keyword">public</a>

  <a id="3861" class="Keyword">record</a> <a id="TransactionStructure.Hastxwdrls"></a><a id="3868" href="Ledger.Transaction.html#3868" class="Record">Hastxwdrls</a> <a id="3879" class="Symbol">{</a><a id="3880" href="Ledger.Transaction.html#3880" class="Bound">a</a><a id="3881" class="Symbol">}</a> <a id="3883" class="Symbol">(</a><a id="3884" href="Ledger.Transaction.html#3884" class="Bound">A</a> <a id="3886" class="Symbol">:</a> <a id="3888" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3893" href="Ledger.Transaction.html#3880" class="Bound">a</a><a id="3894" class="Symbol">)</a> <a id="3896" class="Symbol">:</a> <a id="3898" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3903" href="Ledger.Transaction.html#3880" class="Bound">a</a> <a id="3905" class="Keyword">where</a>
    <a id="3915" class="Keyword">field</a> <a id="3921" href="Ledger.Transaction.html#3921" class="Field">txwdrlsOf</a> <a id="3931" class="Symbol">:</a> <a id="3933" href="Ledger.Transaction.html#3884" class="Bound">A</a> <a id="3935" class="Symbol">→</a> <a id="3937" href="Ledger.Transaction.html#2428" class="Function">Wdrl</a>
  <a id="3944" class="Keyword">open</a> <a id="3949" href="Ledger.Transaction.html#3868" class="Module">Hastxwdrls</a> <a id="3960" class="Symbol">⦃...⦄</a> <a id="3966" class="Keyword">public</a>


  <a id="3977" class="Keyword">record</a> <a id="TransactionStructure.TxWitnesses"></a><a id="3984" href="Ledger.Transaction.html#3984" class="Record">TxWitnesses</a> <a id="3996" class="Symbol">:</a> <a id="3998" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4003" class="Keyword">where</a>
    <a id="4013" class="Keyword">field</a>
      <a id="4025" href="Ledger.Transaction.html#4025" class="Field">vkSigs</a>   <a id="4034" class="Symbol">:</a> <a id="4036" href="Ledger.Crypto.html#582" class="Function">VKey</a> <a id="4041" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4043" href="Ledger.Crypto.html#587" class="Function">Sig</a>
      <a id="4053" href="Ledger.Transaction.html#4053" class="Field">scripts</a>  <a id="4062" class="Symbol">:</a> <a id="4064" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4066" href="Ledger.Script.html#5346" class="Function">Script</a>
      <a id="4079" href="Ledger.Transaction.html#4079" class="Field">txdats</a>   <a id="4088" class="Symbol">:</a> <a id="4090" href="Ledger.Script.html#1719" class="Function">DataHash</a> <a id="4099" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4101" href="Ledger.Script.html#1766" class="Function">Datum</a>
      <a id="4113" href="Ledger.Transaction.html#4113" class="Field">txrdmrs</a>  <a id="4122" class="Symbol">:</a> <a id="4124" href="Ledger.Transaction.html#2456" class="Function">RdmrPtr</a>  <a id="4133" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4135" href="Ledger.Script.html#1784" class="Function">Redeemer</a> <a id="4144" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4146" href="Ledger.Script.html#1014" class="Function">ExUnits</a>

    <a id="TransactionStructure.TxWitnesses.scriptsP1"></a><a id="4159" href="Ledger.Transaction.html#4159" class="Function">scriptsP1</a> <a id="4169" class="Symbol">:</a> <a id="4171" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4173" href="Ledger.Script.html#638" class="Function">P1Script</a>
    <a id="4186" href="Ledger.Transaction.html#4159" class="Function">scriptsP1</a> <a id="4196" class="Symbol">=</a> <a id="4198" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="4209" href="Data.Sum.html#787" class="Function">isInj₁</a> <a id="4216" href="Ledger.Transaction.html#4053" class="Field">scripts</a>

  <a id="4227" class="Keyword">record</a> <a id="TransactionStructure.Tx"></a><a id="4234" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="4237" class="Symbol">:</a> <a id="4239" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4244" class="Keyword">where</a>
    <a id="4254" class="Keyword">field</a>
      <a id="4266" href="Ledger.Transaction.html#4266" class="Field">body</a>     <a id="4275" class="Symbol">:</a> <a id="4277" href="Ledger.Transaction.html#2691" class="Record">TxBody</a>
      <a id="4290" href="Ledger.Transaction.html#4290" class="Field">wits</a>     <a id="4299" class="Symbol">:</a> <a id="4301" href="Ledger.Transaction.html#3984" class="Record">TxWitnesses</a>
      <a id="4319" href="Ledger.Transaction.html#4319" class="Field">isValid</a>  <a id="4328" class="Symbol">:</a> <a id="4330" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
      <a id="4341" href="Ledger.Transaction.html#4341" class="Field">txAD</a>     <a id="4350" class="Symbol">:</a> <a id="4352" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4358" href="Ledger.Transaction.html#924" class="Field">AuxiliaryData</a>


  <a id="4376" class="Keyword">instance</a>
    <a id="TransactionStructure.HasTxBody-Tx"></a><a id="4389" href="Ledger.Transaction.html#4389" class="Function">HasTxBody-Tx</a> <a id="4402" class="Symbol">:</a> <a id="4404" href="Ledger.Transaction.html#3395" class="Record">HasTxBody</a> <a id="4414" href="Ledger.Transaction.html#4234" class="Record">Tx</a>
    <a id="4421" href="Ledger.Transaction.html#4389" class="Function">HasTxBody-Tx</a> <a id="4434" class="Symbol">.</a><a id="4435" href="Ledger.Transaction.html#3447" class="Field">TxBodyOf</a> <a id="4444" class="Symbol">=</a> <a id="4446" href="Ledger.Transaction.html#4266" class="Field">Tx.body</a>



  <a id="TransactionStructure.getValue"></a><a id="4459" href="Ledger.Transaction.html#4459" class="Function">getValue</a> <a id="4468" class="Symbol">:</a> <a id="4470" href="Ledger.Transaction.html#2334" class="Function">TxOut</a> <a id="4476" class="Symbol">→</a> <a id="4478" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="4486" href="Ledger.Transaction.html#4459" class="Function">getValue</a> <a id="4495" class="Symbol">(_</a> <a id="4498" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4500" href="Ledger.Transaction.html#4500" class="Bound">v</a> <a id="4502" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4504" class="Symbol">_)</a> <a id="4507" class="Symbol">=</a> <a id="4509" href="Ledger.Transaction.html#4500" class="Bound">v</a>

  <a id="TransactionStructure.TxOutʰ"></a><a id="4514" href="Ledger.Transaction.html#4514" class="Function">TxOutʰ</a> <a id="4521" class="Symbol">=</a> <a id="4523" href="Ledger.Address.html#2324" class="Function">Addr</a> <a id="4528" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4530" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="4536" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4538" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4544" class="Symbol">(</a><a id="4545" href="Ledger.Script.html#1766" class="Function">Datum</a> <a id="4551" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4553" href="Ledger.Script.html#1719" class="Function">DataHash</a><a id="4561" class="Symbol">)</a> <a id="4563" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4565" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4571" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>

  <a id="TransactionStructure.txOutHash"></a><a id="4585" href="Ledger.Transaction.html#4585" class="Function">txOutHash</a> <a id="4595" class="Symbol">:</a> <a id="4597" href="Ledger.Transaction.html#2334" class="Function">TxOut</a> <a id="4603" class="Symbol">→</a> <a id="4605" href="Ledger.Transaction.html#4514" class="Function">TxOutʰ</a>
  <a id="4614" href="Ledger.Transaction.html#4585" class="Function">txOutHash</a> <a id="4624" class="Symbol">(</a><a id="4625" href="Ledger.Transaction.html#4625" class="Bound">a</a> <a id="4627" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4629" href="Ledger.Transaction.html#4629" class="Bound">v</a> <a id="4631" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4633" href="Ledger.Transaction.html#4633" class="Bound">d</a> <a id="4635" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4637" href="Ledger.Transaction.html#4637" class="Bound">s</a><a id="4638" class="Symbol">)</a> <a id="4640" class="Symbol">=</a> <a id="4642" href="Ledger.Transaction.html#4625" class="Bound">a</a> <a id="4644" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4646" class="Symbol">(</a><a id="4647" href="Ledger.Transaction.html#4629" class="Bound">v</a> <a id="4649" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4651" class="Symbol">(</a><a id="4652" href="Ledger.Transaction.html#4633" class="Bound">d</a> <a id="4654" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4656" href="Data.Maybe.Base.html#1934" class="Function">M.map</a> <a id="4662" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="4667" href="Ledger.Transaction.html#4637" class="Bound">s</a><a id="4668" class="Symbol">))</a>

  <a id="TransactionStructure.getValueʰ"></a><a id="4674" href="Ledger.Transaction.html#4674" class="Function">getValueʰ</a> <a id="4684" class="Symbol">:</a> <a id="4686" href="Ledger.Transaction.html#4514" class="Function">TxOutʰ</a> <a id="4693" class="Symbol">→</a> <a id="4695" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="4703" href="Ledger.Transaction.html#4674" class="Function">getValueʰ</a> <a id="4713" class="Symbol">(_</a> <a id="4716" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4718" href="Ledger.Transaction.html#4718" class="Bound">v</a> <a id="4720" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4722" class="Symbol">_)</a> <a id="4725" class="Symbol">=</a> <a id="4727" href="Ledger.Transaction.html#4718" class="Bound">v</a>

  <a id="TransactionStructure.txinsVKey"></a><a id="4732" href="Ledger.Transaction.html#4732" class="Function">txinsVKey</a> <a id="4742" class="Symbol">:</a> <a id="4744" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4746" href="Ledger.Transaction.html#2311" class="Function">TxIn</a> <a id="4751" class="Symbol">→</a> <a id="4753" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="4758" class="Symbol">→</a> <a id="4760" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4762" href="Ledger.Transaction.html#2311" class="Function">TxIn</a>
  <a id="4769" href="Ledger.Transaction.html#4732" class="Function">txinsVKey</a> <a id="4779" href="Ledger.Transaction.html#4779" class="Bound">txins</a> <a id="4785" href="Ledger.Transaction.html#4785" class="Bound">utxo</a> <a id="4790" class="Symbol">=</a> <a id="4792" href="Ledger.Transaction.html#4779" class="Bound">txins</a> <a id="4798" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="4800" href="Class.IsSet.html#916" class="Function">dom</a> <a id="4804" class="Symbol">(</a><a id="4805" href="Ledger.Transaction.html#4785" class="Bound">utxo</a> <a id="4810" href="abstract-set-theory.FiniteSetTheory.html#3088" class="Function Operator">∣^&#39;</a> <a id="4814" class="Symbol">(</a><a id="4815" href="Ledger.Address.html#2579" class="Function">isVKeyAddr</a> <a id="4826" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4828" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="4833" class="Symbol">))</a>

  <a id="TransactionStructure.scriptOuts"></a><a id="4839" href="Ledger.Transaction.html#4839" class="Function">scriptOuts</a> <a id="4850" class="Symbol">:</a> <a id="4852" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="4857" class="Symbol">→</a> <a id="4859" href="Ledger.Transaction.html#2402" class="Function">UTxO</a>
  <a id="4866" href="Ledger.Transaction.html#4839" class="Function">scriptOuts</a> <a id="4877" href="Ledger.Transaction.html#4877" class="Bound">utxo</a> <a id="4882" class="Symbol">=</a> <a id="4884" href="Ledger.Transaction.html#364" class="Function">filter</a> <a id="4891" class="Symbol">(λ</a> <a id="4894" class="Symbol">(_</a> <a id="4897" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4899" href="Ledger.Transaction.html#4899" class="Bound">addr</a> <a id="4904" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4906" class="Symbol">_)</a> <a id="4909" class="Symbol">→</a> <a id="4911" href="Ledger.Address.html#2607" class="Function">isScriptAddr</a> <a id="4924" href="Ledger.Transaction.html#4899" class="Bound">addr</a><a id="4928" class="Symbol">)</a> <a id="4930" href="Ledger.Transaction.html#4877" class="Bound">utxo</a>

  <a id="TransactionStructure.txinsScript"></a><a id="4938" href="Ledger.Transaction.html#4938" class="Function">txinsScript</a> <a id="4950" class="Symbol">:</a> <a id="4952" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4954" href="Ledger.Transaction.html#2311" class="Function">TxIn</a> <a id="4959" class="Symbol">→</a> <a id="4961" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="4966" class="Symbol">→</a> <a id="4968" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4970" href="Ledger.Transaction.html#2311" class="Function">TxIn</a>
  <a id="4977" href="Ledger.Transaction.html#4938" class="Function">txinsScript</a> <a id="4989" href="Ledger.Transaction.html#4989" class="Bound">txins</a> <a id="4995" href="Ledger.Transaction.html#4995" class="Bound">utxo</a> <a id="5000" class="Symbol">=</a> <a id="5002" href="Ledger.Transaction.html#4989" class="Bound">txins</a> <a id="5008" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="5010" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5014" class="Symbol">(</a><a id="5015" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5021" class="Symbol">(</a><a id="5022" href="Ledger.Transaction.html#4839" class="Function">scriptOuts</a> <a id="5033" href="Ledger.Transaction.html#4995" class="Bound">utxo</a><a id="5037" class="Symbol">))</a>

  <a id="TransactionStructure.refScripts"></a><a id="5043" href="Ledger.Transaction.html#5043" class="Function">refScripts</a> <a id="5054" class="Symbol">:</a> <a id="5056" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="5059" class="Symbol">→</a> <a id="5061" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="5066" class="Symbol">→</a> <a id="5068" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5073" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="5082" href="Ledger.Transaction.html#5043" class="Function">refScripts</a> <a id="5093" href="Ledger.Transaction.html#5093" class="Bound">tx</a> <a id="5096" href="Ledger.Transaction.html#5096" class="Bound">utxo</a> <a id="5101" class="Symbol">=</a>
    <a id="5107" href="Data.List.Base.html#4628" class="Function">mapMaybe</a> <a id="5116" class="Symbol">(</a><a id="5117" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5123" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5125" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5131" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5133" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="5138" class="Symbol">)</a> <a id="5140" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5142" href="abstract-set-theory.FiniteSetTheory.html#2463" class="Function">setToList</a> <a id="5152" class="Symbol">(</a><a id="5153" href="Class.IsSet.html#959" class="Function">range</a> <a id="5159" class="Symbol">(</a><a id="5160" href="Ledger.Transaction.html#5096" class="Bound">utxo</a> <a id="5165" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="5167" class="Symbol">(</a><a id="5168" href="Ledger.Transaction.html#2727" class="Function">txins</a> <a id="5174" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="5176" href="Ledger.Transaction.html#2757" class="Function">refInputs</a><a id="5185" class="Symbol">)))</a>
    <a id="5193" class="Keyword">where</a> <a id="5199" class="Keyword">open</a> <a id="5204" href="Ledger.Transaction.html#4234" class="Module">Tx</a><a id="5206" class="Symbol">;</a> <a id="5208" class="Keyword">open</a> <a id="5213" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="5220" class="Symbol">(</a><a id="5221" href="Ledger.Transaction.html#5093" class="Bound">tx</a> <a id="5224" class="Symbol">.</a><a id="5225" href="Ledger.Transaction.html#4266" class="Field">body</a><a id="5229" class="Symbol">)</a>

  <a id="TransactionStructure.txscripts"></a><a id="5234" href="Ledger.Transaction.html#5234" class="Function">txscripts</a> <a id="5244" class="Symbol">:</a> <a id="5246" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="5249" class="Symbol">→</a> <a id="5251" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="5256" class="Symbol">→</a> <a id="5258" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5260" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="5269" href="Ledger.Transaction.html#5234" class="Function">txscripts</a> <a id="5279" href="Ledger.Transaction.html#5279" class="Bound">tx</a> <a id="5282" href="Ledger.Transaction.html#5282" class="Bound">utxo</a> <a id="5287" class="Symbol">=</a> <a id="5289" href="Ledger.Transaction.html#4053" class="Field">scripts</a> <a id="5297" class="Symbol">(</a><a id="5298" href="Ledger.Transaction.html#5279" class="Bound">tx</a> <a id="5301" class="Symbol">.</a><a id="5302" href="Ledger.Transaction.html#4290" class="Field">wits</a><a id="5306" class="Symbol">)</a> <a id="5308" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="5310" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="5319" class="Symbol">(</a><a id="5320" href="Ledger.Transaction.html#5043" class="Function">refScripts</a> <a id="5331" href="Ledger.Transaction.html#5279" class="Bound">tx</a> <a id="5334" href="Ledger.Transaction.html#5282" class="Bound">utxo</a><a id="5338" class="Symbol">)</a>
    <a id="5344" class="Keyword">where</a> <a id="5350" class="Keyword">open</a> <a id="5355" href="Ledger.Transaction.html#4234" class="Module">Tx</a><a id="5357" class="Symbol">;</a> <a id="5359" class="Keyword">open</a> <a id="5364" href="Ledger.Transaction.html#3984" class="Module">TxWitnesses</a>

  <a id="TransactionStructure.lookupScriptHash"></a><a id="5379" href="Ledger.Transaction.html#5379" class="Function">lookupScriptHash</a> <a id="5396" class="Symbol">:</a> <a id="5398" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="5409" class="Symbol">→</a> <a id="5411" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="5414" class="Symbol">→</a> <a id="5416" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="5421" class="Symbol">→</a> <a id="5423" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5429" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="5438" href="Ledger.Transaction.html#5379" class="Function">lookupScriptHash</a> <a id="5455" href="Ledger.Transaction.html#5455" class="Bound">sh</a> <a id="5458" href="Ledger.Transaction.html#5458" class="Bound">tx</a> <a id="5461" href="Ledger.Transaction.html#5461" class="Bound">utxo</a> <a id="5466" class="Symbol">=</a>
    <a id="5472" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="5475" href="Ledger.Transaction.html#5455" class="Bound">sh</a> <a id="5478" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5480" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="5485" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5491" class="Symbol">(</a><a id="5492" href="Ledger.Transaction.html#5561" class="Function">m</a> <a id="5494" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="5495" class="Symbol">)</a> <a id="5497" href="Class.ToBool.html#389" class="Function Operator">then</a>
      <a id="5508" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5513" class="Symbol">(</a><a id="5514" href="Axiom.Set.Map.html#13563" class="Function">lookupᵐ</a> <a id="5522" href="Ledger.Transaction.html#5561" class="Function">m</a> <a id="5524" href="Ledger.Transaction.html#5455" class="Bound">sh</a><a id="5526" class="Symbol">)</a>
    <a id="5532" href="Class.ToBool.html#389" class="Function Operator">else</a>
      <a id="5543" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="5555" class="Keyword">where</a> <a id="5561" href="Ledger.Transaction.html#5561" class="Function">m</a> <a id="5563" class="Symbol">=</a> <a id="5565" href="Ledger.Prelude.html#1880" class="Function">setToMap</a> <a id="5574" class="Symbol">(</a><a id="5575" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="5580" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="5582" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="5587" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="5589" href="Function.Base.html#704" class="Function">id</a> <a id="5592" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="5594" class="Symbol">(</a><a id="5595" href="Ledger.Transaction.html#5234" class="Function">txscripts</a> <a id="5605" href="Ledger.Transaction.html#5458" class="Bound">tx</a> <a id="5608" href="Ledger.Transaction.html#5461" class="Bound">utxo</a><a id="5612" class="Symbol">))</a>


  <a id="TransactionStructure.isP2Script"></a><a id="5619" href="Ledger.Transaction.html#5619" class="Function">isP2Script</a> <a id="5630" class="Symbol">:</a> <a id="5632" href="Ledger.Script.html#5346" class="Function">Script</a> <a id="5639" class="Symbol">→</a> <a id="5641" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5648" href="Ledger.Transaction.html#5619" class="Function">isP2Script</a> <a id="5659" class="Symbol">=</a> <a id="5661" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="5663" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5665" href="Data.Maybe.Base.html#1117" class="Function">is-just</a> <a id="5673" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5675" href="Data.Sum.html#870" class="Function">isInj₂</a>

  <a id="TransactionStructure.isP2Script?"></a><a id="5685" href="Ledger.Transaction.html#5685" class="Function">isP2Script?</a> <a id="5697" class="Symbol">:</a> <a id="5699" class="Symbol">∀</a> <a id="5701" class="Symbol">{</a><a id="5702" href="Ledger.Transaction.html#5702" class="Bound">s</a><a id="5703" class="Symbol">}</a> <a id="5705" class="Symbol">→</a> <a id="5707" href="Ledger.Transaction.html#5619" class="Function">isP2Script</a> <a id="5718" href="Ledger.Transaction.html#5702" class="Bound">s</a> <a id="5720" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="5724" href="Ledger.Transaction.html#5685" class="Function">isP2Script?</a> <a id="5736" class="Symbol">{</a><a id="5737" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="5742" href="Ledger.Transaction.html#5742" class="Bound">x</a><a id="5743" class="Symbol">}</a> <a id="5745" class="Symbol">.</a><a id="5746" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="5750" class="Symbol">=</a> <a id="5752" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="5755" class="Symbol">λ</a> <a id="5757" class="Symbol">()</a>
  <a id="5762" href="Ledger.Transaction.html#5685" class="Function">isP2Script?</a> <a id="5774" class="Symbol">{</a><a id="5775" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="5780" href="Ledger.Transaction.html#5780" class="Bound">y</a><a id="5781" class="Symbol">}</a> <a id="5783" class="Symbol">.</a><a id="5784" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="5788" class="Symbol">=</a> <a id="5790" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="5794" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>

  <a id="5800" class="Keyword">instance</a>
    <a id="TransactionStructure.HasCoin-TxOut"></a><a id="5813" href="Ledger.Transaction.html#5813" class="Function">HasCoin-TxOut</a> <a id="5827" class="Symbol">:</a> <a id="5829" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="5837" href="Ledger.Transaction.html#2334" class="Function">TxOut</a>
    <a id="5847" href="Ledger.Transaction.html#5813" class="Function">HasCoin-TxOut</a> <a id="5861" class="Symbol">.</a><a id="5862" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="5870" class="Symbol">=</a> <a id="5872" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="5877" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5879" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5885" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5887" href="Data.Product.Base.html#650" class="Field">proj₂</a>

</pre></body></html>