<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Transaction</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>
<a id="25" class="Comment">--------------------------------------------------------------------------------</a>
<a id="106" class="Comment">-- NOTE: Everything in this module is part of TransactionStructure</a>
<a id="173" class="Comment">--------------------------------------------------------------------------------</a>
<a id="254" class="Keyword">module</a> <a id="261" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a> <a id="280" class="Keyword">where</a>

<a id="287" class="Keyword">import</a> <a id="294" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="310" class="Symbol">as</a> <a id="313" class="Module">M</a>

<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="343" class="Keyword">renaming</a> <a id="352" class="Symbol">(</a><a id="353" href="abstract-set-theory.FiniteSetTheory.html#2895" class="Function">filterᵐ</a> <a id="361" class="Symbol">to</a> <a id="364" class="Function">filter</a><a id="370" class="Symbol">)</a>

<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="399" class="Keyword">open</a> <a id="404" class="Keyword">import</a> <a id="411" href="Ledger.Types.Epoch.html" class="Module">Ledger.Types.Epoch</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Ledger.Types.GovStructure.html" class="Module">Ledger.Types.GovStructure</a>
<a id="468" class="Keyword">import</a> <a id="475" href="Ledger.PParams.html" class="Module">Ledger.PParams</a>
<a id="490" class="Keyword">import</a> <a id="497" href="Ledger.Script.html" class="Module">Ledger.Script</a>
<a id="511" class="Keyword">import</a> <a id="518" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a>
<a id="543" class="Keyword">import</a> <a id="550" href="Ledger.Certs.html" class="Module">Ledger.Certs</a>
<a id="563" class="Keyword">import</a> <a id="570" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a>
<a id="590" class="Keyword">import</a> <a id="597" href="Ledger.Address.html" class="Module">Ledger.Address</a>

<a id="613" class="Keyword">open</a> <a id="618" class="Keyword">import</a> <a id="625" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>
<a id="645" class="Keyword">open</a> <a id="650" class="Keyword">import</a> <a id="657" href="MyDebugOptions.html" class="Module">MyDebugOptions</a>
<a id="672" class="Keyword">open</a> <a id="677" class="Keyword">import</a> <a id="684" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="711" class="Keyword">using</a> <a id="717" class="Symbol">(</a><a id="718" href="Relation.Nullary.Decidable.Core.html#4636" class="Function Operator">⌊_⌋</a><a id="721" class="Symbol">)</a>

<a id="724" class="Keyword">data</a> <a id="Tag"></a><a id="729" href="Ledger.Transaction.html#729" class="Datatype">Tag</a> <a id="733" class="Symbol">:</a> <a id="735" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="740" class="Keyword">where</a>
  <a id="Tag.Spend"></a><a id="748" href="Ledger.Transaction.html#748" class="InductiveConstructor">Spend</a> <a id="Tag.Mint"></a><a id="754" href="Ledger.Transaction.html#754" class="InductiveConstructor">Mint</a> <a id="Tag.Cert"></a><a id="759" href="Ledger.Transaction.html#759" class="InductiveConstructor">Cert</a> <a id="Tag.Rewrd"></a><a id="764" href="Ledger.Transaction.html#764" class="InductiveConstructor">Rewrd</a> <a id="Tag.Vote"></a><a id="770" href="Ledger.Transaction.html#770" class="InductiveConstructor">Vote</a> <a id="Tag.Propose"></a><a id="775" href="Ledger.Transaction.html#775" class="InductiveConstructor">Propose</a> <a id="783" class="Symbol">:</a> <a id="785" href="Ledger.Transaction.html#729" class="Datatype">Tag</a>
<a id="789" class="Keyword">unquoteDecl</a> <a id="DecEq-Tag"></a><a id="801" href="Ledger.Transaction.html#801" class="Function">DecEq-Tag</a> <a id="811" class="Symbol">=</a> <a id="813" href="Tactic.Derive.DecEq.html#3519" class="Function">derive-DecEq</a> <a id="826" class="Symbol">((</a><a id="828" class="Keyword">quote</a> <a id="834" href="Ledger.Transaction.html#729" class="Datatype">Tag</a> <a id="838" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="840" href="Ledger.Transaction.html#801" class="Function">DecEq-Tag</a><a id="849" class="Symbol">)</a> <a id="851" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="853" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="855" class="Symbol">)</a>



<a id="860" class="Keyword">record</a> <a id="TransactionStructure"></a><a id="867" href="Ledger.Transaction.html#867" class="Record">TransactionStructure</a> <a id="888" class="Symbol">:</a> <a id="890" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="896" class="Keyword">where</a>
  <a id="904" class="Keyword">field</a>


    <a id="TransactionStructure.Ix"></a><a id="916" href="Ledger.Transaction.html#916" class="Field">Ix</a> <a id="TransactionStructure.TxId"></a><a id="919" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="TransactionStructure.AuxiliaryData"></a><a id="924" href="Ledger.Transaction.html#924" class="Field">AuxiliaryData</a> <a id="938" class="Symbol">:</a> <a id="940" href="Agda.Primitive.html#388" class="Primitive">Type</a>



    <a id="952" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-Ix"></a><a id="954" href="Ledger.Transaction.html#954" class="Field">DecEq-Ix</a>   <a id="965" class="Symbol">⦄</a> <a id="967" class="Symbol">:</a> <a id="969" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="975" href="Ledger.Transaction.html#916" class="Field">Ix</a>
    <a id="982" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-TxId"></a><a id="984" href="Ledger.Transaction.html#984" class="Field">DecEq-TxId</a> <a id="995" class="Symbol">⦄</a> <a id="997" class="Symbol">:</a> <a id="999" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="1005" href="Ledger.Transaction.html#919" class="Field">TxId</a>
    <a id="TransactionStructure.adHashingScheme"></a><a id="1014" href="Ledger.Transaction.html#1014" class="Field">adHashingScheme</a> <a id="1030" class="Symbol">:</a> <a id="1032" href="Ledger.Crypto.html#99" class="Record">isHashableSet</a> <a id="1046" href="Ledger.Transaction.html#924" class="Field">AuxiliaryData</a>
  <a id="1062" class="Keyword">open</a> <a id="1067" href="Ledger.Crypto.html#99" class="Module">isHashableSet</a> <a id="1081" href="Ledger.Transaction.html#1014" class="Field">adHashingScheme</a> <a id="1097" class="Keyword">renaming</a> <a id="1106" class="Symbol">(</a><a id="1107" href="Ledger.Crypto.html#176" class="Field">THash</a> <a id="1113" class="Symbol">to</a> <a id="1116" class="Field">ADHash</a><a id="1122" class="Symbol">)</a> <a id="1124" class="Keyword">public</a>

  <a id="1134" class="Keyword">field</a> <a id="TransactionStructure.globalConstants"></a><a id="1140" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a> <a id="1156" class="Symbol">:</a> <a id="1158" class="Symbol">_</a>
  <a id="1162" class="Keyword">open</a> <a id="1167" href="Ledger.Types.Epoch.html#1962" class="Module">GlobalConstants</a> <a id="1183" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a> <a id="1199" class="Keyword">public</a>

  <a id="1209" class="Keyword">field</a> <a id="TransactionStructure.crypto"></a><a id="1215" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1222" class="Symbol">:</a> <a id="1224" class="Symbol">_</a>
  <a id="1228" class="Keyword">open</a> <a id="1233" href="Ledger.Crypto.html#1043" class="Module">Crypto</a> <a id="1240" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1247" class="Keyword">public</a>
  <a id="1256" class="Keyword">open</a> <a id="1261" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a> <a id="1281" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="1292" class="Keyword">public</a>
  <a id="1301" class="Keyword">open</a> <a id="1306" href="Ledger.Address.html" class="Module">Ledger.Address</a> <a id="1321" href="Ledger.Types.Epoch.html#2001" class="Function">Network</a> <a id="1329" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="1337" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="1348" class="Symbol">⦃</a> <a id="1350" href="Function.Base.html#4736" class="Function">it</a> <a id="1353" class="Symbol">⦄</a> <a id="1355" class="Symbol">⦃</a> <a id="1357" href="Function.Base.html#4736" class="Function">it</a> <a id="1360" class="Symbol">⦄</a> <a id="1362" class="Symbol">⦃</a> <a id="1364" href="Function.Base.html#4736" class="Function">it</a> <a id="1367" class="Symbol">⦄</a> <a id="1369" class="Keyword">public</a>

  <a id="1379" class="Keyword">field</a> <a id="TransactionStructure.epochStructure"></a><a id="1385" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1400" class="Symbol">:</a> <a id="1402" class="Symbol">_</a>
  <a id="1406" class="Keyword">open</a> <a id="1411" href="Ledger.Types.Epoch.html#475" class="Module">EpochStructure</a> <a id="1426" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1441" class="Keyword">public</a>
  <a id="1450" class="Keyword">open</a> <a id="1455" href="Ledger.Script.html" class="Module">Ledger.Script</a> <a id="1469" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1476" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1491" class="Keyword">public</a>

  <a id="1501" class="Keyword">field</a> <a id="TransactionStructure.scriptStructure"></a><a id="1507" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="1523" class="Symbol">:</a> <a id="1525" class="Symbol">_</a>
  <a id="1529" class="Keyword">open</a> <a id="1534" href="Ledger.Script.html#4951" class="Module">ScriptStructure</a> <a id="1550" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="1566" class="Keyword">public</a>
  <a id="1575" class="Keyword">open</a> <a id="1580" href="Ledger.PParams.html" class="Module">Ledger.PParams</a> <a id="1595" href="Ledger.Transaction.html#1215" class="Field">crypto</a> <a id="1602" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a> <a id="1617" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="1633" class="Keyword">public</a>

  <a id="1643" class="Keyword">field</a> <a id="TransactionStructure.govParams"></a><a id="1649" href="Ledger.Transaction.html#1649" class="Field">govParams</a> <a id="1659" class="Symbol">:</a> <a id="1661" class="Symbol">_</a>
  <a id="1665" class="Keyword">open</a> <a id="1670" href="Ledger.PParams.html#14424" class="Module">GovParams</a> <a id="1680" href="Ledger.Transaction.html#1649" class="Field">govParams</a> <a id="1690" class="Keyword">public</a>

  <a id="1700" class="Keyword">field</a> <a id="TransactionStructure.tokenAlgebra"></a><a id="1706" href="Ledger.Transaction.html#1706" class="Field">tokenAlgebra</a> <a id="1719" class="Symbol">:</a> <a id="1721" href="Ledger.TokenAlgebra.html#453" class="Record">TokenAlgebra</a>
  <a id="1736" class="Keyword">open</a> <a id="1741" href="Ledger.TokenAlgebra.html#453" class="Module">TokenAlgebra</a> <a id="1754" href="Ledger.Transaction.html#1706" class="Field">tokenAlgebra</a> <a id="1767" class="Keyword">public</a>

  <a id="1777" class="Keyword">field</a> <a id="TransactionStructure.txidBytes"></a><a id="1783" href="Ledger.Transaction.html#1783" class="Field">txidBytes</a> <a id="1793" class="Symbol">:</a> <a id="1795" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="1800" class="Symbol">→</a> <a id="1802" href="Ledger.Crypto.html#591" class="Function">Ser</a>

  <a id="TransactionStructure.govStructure"></a><a id="1809" href="Ledger.Transaction.html#1809" class="Function">govStructure</a> <a id="1822" class="Symbol">:</a> <a id="1824" href="Ledger.Types.GovStructure.html#235" class="Record">GovStructure</a>
  <a id="1839" href="Ledger.Transaction.html#1809" class="Function">govStructure</a> <a id="1852" class="Symbol">=</a> <a id="1854" class="Keyword">record</a>
    <a id="1865" class="Comment">-- TODO: figure out what to do with the hash</a>
    <a id="1914" class="Symbol">{</a> <a id="1916" href="Ledger.Types.GovStructure.html#270" class="Field">TxId</a> <a id="1921" class="Symbol">=</a> <a id="1923" href="Ledger.Transaction.html#919" class="Field">TxId</a><a id="1927" class="Symbol">;</a> <a id="1929" href="Ledger.Types.GovStructure.html#275" class="Field">DocHash</a> <a id="1937" class="Symbol">=</a> <a id="1939" href="Ledger.Transaction.html#1116" class="Function">ADHash</a>
    <a id="1950" class="Symbol">;</a> <a id="1952" href="Ledger.Types.GovStructure.html#335" class="Field">crypto</a> <a id="1959" class="Symbol">=</a> <a id="1961" href="Ledger.Transaction.html#1215" class="Field">crypto</a>
    <a id="1972" class="Symbol">;</a> <a id="1974" href="Ledger.Types.GovStructure.html#383" class="Field">epochStructure</a> <a id="1989" class="Symbol">=</a> <a id="1991" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a>
    <a id="2010" class="Symbol">;</a> <a id="2012" href="Ledger.Types.GovStructure.html#455" class="Field">scriptStructure</a> <a id="2028" class="Symbol">=</a> <a id="2030" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a>
    <a id="2050" class="Symbol">;</a> <a id="2052" href="Ledger.Types.GovStructure.html#634" class="Field">govParams</a> <a id="2062" class="Symbol">=</a> <a id="2064" href="Ledger.Transaction.html#1649" class="Field">govParams</a>
    <a id="2078" class="Symbol">;</a> <a id="2080" href="Ledger.Types.GovStructure.html#699" class="Field">globalConstants</a> <a id="2096" class="Symbol">=</a> <a id="2098" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a>
    <a id="2118" class="Symbol">}</a>

  <a id="2123" class="Keyword">module</a> <a id="TransactionStructure.GovernanceActions"></a><a id="2130" href="Ledger.Transaction.html#2130" class="Module">GovernanceActions</a> <a id="2148" class="Symbol">=</a> <a id="2150" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a> <a id="2175" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>
  <a id="2190" class="Keyword">open</a> <a id="2195" href="Ledger.Transaction.html#2130" class="Module">GovernanceActions</a> <a id="2213" class="Keyword">hiding</a> <a id="2220" class="Symbol">(</a><a id="2221" href="Ledger.GovernanceActions.html#2328" class="Datatype">Vote</a><a id="2225" class="Symbol">;</a> <a id="2227" href="Ledger.GovernanceActions.html#2348" class="InductiveConstructor">yes</a><a id="2230" class="Symbol">;</a> <a id="2232" href="Ledger.GovernanceActions.html#2352" class="InductiveConstructor">no</a><a id="2234" class="Symbol">;</a> <a id="2236" href="Ledger.GovernanceActions.html#2355" class="InductiveConstructor">abstain</a><a id="2243" class="Symbol">)</a> <a id="2245" class="Keyword">public</a>

  <a id="2255" class="Keyword">open</a> <a id="2260" class="Keyword">import</a> <a id="2267" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="2280" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>


  <a id="TransactionStructure.TxIn"></a><a id="2297" href="Ledger.Transaction.html#2297" class="Function">TxIn</a>     <a id="2306" class="Symbol">=</a> <a id="2308" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="2313" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2315" href="Ledger.Transaction.html#916" class="Field">Ix</a>
  <a id="TransactionStructure.TxOut"></a><a id="2320" href="Ledger.Transaction.html#2320" class="Function">TxOut</a>    <a id="2329" class="Symbol">=</a> <a id="2331" href="Ledger.Address.html#2325" class="Function">Addr</a> <a id="2336" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2338" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="2344" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2346" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2352" class="Symbol">(</a><a id="2353" href="Ledger.Script.html#1766" class="Function">Datum</a> <a id="2359" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="2361" href="Ledger.Script.html#1719" class="Function">DataHash</a><a id="2369" class="Symbol">)</a> <a id="2371" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2373" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2379" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="TransactionStructure.UTxO"></a><a id="2388" href="Ledger.Transaction.html#2388" class="Function">UTxO</a>     <a id="2397" class="Symbol">=</a> <a id="2399" href="Ledger.Transaction.html#2297" class="Function">TxIn</a> <a id="2404" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2406" href="Ledger.Transaction.html#2320" class="Function">TxOut</a>
  <a id="TransactionStructure.Wdrl"></a><a id="2414" href="Ledger.Transaction.html#2414" class="Function">Wdrl</a>     <a id="2423" class="Symbol">=</a> <a id="2425" href="Ledger.Address.html#1337" class="Record">RwdAddr</a> <a id="2433" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2435" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="TransactionStructure.RdmrPtr"></a><a id="2442" href="Ledger.Transaction.html#2442" class="Function">RdmrPtr</a>  <a id="2451" class="Symbol">=</a> <a id="2453" href="Ledger.Transaction.html#729" class="Datatype">Tag</a> <a id="2457" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2459" href="Ledger.Transaction.html#916" class="Field">Ix</a>

  <a id="TransactionStructure.ProposedPPUpdates"></a><a id="2465" href="Ledger.Transaction.html#2465" class="Function">ProposedPPUpdates</a>  <a id="2484" class="Symbol">=</a> <a id="2486" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="2494" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2496" href="Ledger.PParams.html#14522" class="Function">PParamsUpdate</a>
  <a id="TransactionStructure.Update"></a><a id="2512" href="Ledger.Transaction.html#2512" class="Function">Update</a>             <a id="2531" class="Symbol">=</a> <a id="2533" href="Ledger.Transaction.html#2465" class="Function">ProposedPPUpdates</a> <a id="2551" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2553" href="Ledger.Types.Epoch.html#543" class="Function">Epoch</a>


  <a id="2563" class="Keyword">record</a> <a id="TransactionStructure.HasUTxO"></a><a id="2570" href="Ledger.Transaction.html#2570" class="Record">HasUTxO</a> <a id="2578" class="Symbol">{</a><a id="2579" href="Ledger.Transaction.html#2579" class="Bound">a</a><a id="2580" class="Symbol">}</a> <a id="2582" class="Symbol">(</a><a id="2583" href="Ledger.Transaction.html#2583" class="Bound">A</a> <a id="2585" class="Symbol">:</a> <a id="2587" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2592" href="Ledger.Transaction.html#2579" class="Bound">a</a><a id="2593" class="Symbol">)</a> <a id="2595" class="Symbol">:</a> <a id="2597" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2602" href="Ledger.Transaction.html#2579" class="Bound">a</a> <a id="2604" class="Keyword">where</a>
    <a id="2614" class="Keyword">field</a> <a id="2620" href="Ledger.Transaction.html#2620" class="Field">UTxOOf</a> <a id="2627" class="Symbol">:</a> <a id="2629" href="Ledger.Transaction.html#2583" class="Bound">A</a> <a id="2631" class="Symbol">→</a> <a id="2633" href="Ledger.Transaction.html#2388" class="Function">UTxO</a>
  <a id="2640" class="Keyword">open</a> <a id="2645" href="Ledger.Transaction.html#2570" class="Module">HasUTxO</a> <a id="2653" class="Symbol">⦃...⦄</a> <a id="2659" class="Keyword">public</a>


  <a id="2670" class="Keyword">record</a> <a id="TransactionStructure.TxBody"></a><a id="2677" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="2684" class="Symbol">:</a> <a id="2686" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2691" class="Keyword">where</a>
    <a id="2701" class="Keyword">field</a>
      <a id="2713" href="Ledger.Transaction.html#2713" class="Field">txins</a>          <a id="2728" class="Symbol">:</a> <a id="2730" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2732" href="Ledger.Transaction.html#2297" class="Function">TxIn</a>
      <a id="2743" href="Ledger.Transaction.html#2743" class="Field">refInputs</a>      <a id="2758" class="Symbol">:</a> <a id="2760" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2762" href="Ledger.Transaction.html#2297" class="Function">TxIn</a>
      <a id="2773" href="Ledger.Transaction.html#2773" class="Field">txouts</a>         <a id="2788" class="Symbol">:</a> <a id="2790" href="Ledger.Transaction.html#916" class="Field">Ix</a> <a id="2793" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2795" href="Ledger.Transaction.html#2320" class="Function">TxOut</a>
      <a id="2807" href="Ledger.Transaction.html#2807" class="Field">txfee</a>          <a id="2822" class="Symbol">:</a> <a id="2824" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="2835" href="Ledger.Transaction.html#2835" class="Field">mint</a>           <a id="2850" class="Symbol">:</a> <a id="2852" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
      <a id="2864" href="Ledger.Transaction.html#2864" class="Field">txvldt</a>         <a id="2879" class="Symbol">:</a> <a id="2881" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2887" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a> <a id="2892" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2894" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2900" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a>
      <a id="2911" href="Ledger.Transaction.html#2911" class="Field">txcerts</a>        <a id="2926" class="Symbol">:</a> <a id="2928" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2933" href="Ledger.Certs.html#1324" class="Datatype">DCert</a>
      <a id="2945" href="Ledger.Transaction.html#2945" class="Field">txwdrls</a>        <a id="2960" class="Symbol">:</a> <a id="2962" href="Ledger.Transaction.html#2414" class="Function">Wdrl</a>
      <a id="2973" href="Ledger.Transaction.html#2973" class="Field">txvote</a>         <a id="2988" class="Symbol">:</a> <a id="2990" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2995" href="Ledger.GovernanceActions.html#2379" class="Record">GovVote</a>
      <a id="3009" href="Ledger.Transaction.html#3009" class="Field">txprop</a>         <a id="3024" class="Symbol">:</a> <a id="3026" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3031" href="Ledger.GovernanceActions.html#2524" class="Record">GovProposal</a>
      <a id="3049" href="Ledger.Transaction.html#3049" class="Field">txdonation</a>     <a id="3064" class="Symbol">:</a> <a id="3066" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="3077" href="Ledger.Transaction.html#3077" class="Field">txup</a>           <a id="3092" class="Symbol">:</a> <a id="3094" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3100" href="Ledger.Transaction.html#2512" class="Function">Update</a>
      <a id="3113" href="Ledger.Transaction.html#3113" class="Field">txADhash</a>       <a id="3128" class="Symbol">:</a> <a id="3130" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3136" href="Ledger.Transaction.html#1116" class="Function">ADHash</a>
      <a id="3149" href="Ledger.Transaction.html#3149" class="Field">txNetworkId</a>    <a id="3164" class="Symbol">:</a> <a id="3166" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3172" href="Ledger.Types.Epoch.html#2001" class="Function">Network</a>
      <a id="3186" href="Ledger.Transaction.html#3186" class="Field">curTreasury</a>    <a id="3201" class="Symbol">:</a> <a id="3203" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3209" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
      <a id="3220" href="Ledger.Transaction.html#3220" class="Field">txsize</a>         <a id="3235" class="Symbol">:</a> <a id="3237" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
      <a id="3245" href="Ledger.Transaction.html#3245" class="Field">txid</a>           <a id="3260" class="Symbol">:</a> <a id="3262" href="Ledger.Transaction.html#919" class="Field">TxId</a>
      <a id="3273" href="Ledger.Transaction.html#3273" class="Field">collateral</a>     <a id="3288" class="Symbol">:</a> <a id="3290" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3292" href="Ledger.Transaction.html#2297" class="Function">TxIn</a>
      <a id="3303" href="Ledger.Transaction.html#3303" class="Field">reqSigHash</a>     <a id="3318" class="Symbol">:</a> <a id="3320" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3322" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a>
      <a id="3336" href="Ledger.Transaction.html#3336" class="Field">scriptIntHash</a>  <a id="3351" class="Symbol">:</a> <a id="3353" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3359" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>


  <a id="3374" class="Keyword">record</a> <a id="TransactionStructure.HasTxBody"></a><a id="3381" href="Ledger.Transaction.html#3381" class="Record">HasTxBody</a> <a id="3391" class="Symbol">{</a><a id="3392" href="Ledger.Transaction.html#3392" class="Bound">a</a><a id="3393" class="Symbol">}</a> <a id="3395" class="Symbol">(</a><a id="3396" href="Ledger.Transaction.html#3396" class="Bound">A</a> <a id="3398" class="Symbol">:</a> <a id="3400" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3405" href="Ledger.Transaction.html#3392" class="Bound">a</a><a id="3406" class="Symbol">)</a> <a id="3408" class="Symbol">:</a> <a id="3410" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3415" href="Ledger.Transaction.html#3392" class="Bound">a</a> <a id="3417" class="Keyword">where</a>
    <a id="3427" class="Keyword">field</a> <a id="3433" href="Ledger.Transaction.html#3433" class="Field">TxBodyOf</a> <a id="3442" class="Symbol">:</a> <a id="3444" href="Ledger.Transaction.html#3396" class="Bound">A</a> <a id="3446" class="Symbol">→</a> <a id="3448" href="Ledger.Transaction.html#2677" class="Record">TxBody</a>
  <a id="3457" class="Keyword">open</a> <a id="3462" href="Ledger.Transaction.html#3381" class="Module">HasTxBody</a>  <a id="3473" class="Symbol">⦃...⦄</a> <a id="3479" class="Keyword">public</a>

  <a id="3489" class="Keyword">record</a> <a id="TransactionStructure.Hastxfee"></a><a id="3496" href="Ledger.Transaction.html#3496" class="Record">Hastxfee</a> <a id="3505" class="Symbol">{</a><a id="3506" href="Ledger.Transaction.html#3506" class="Bound">a</a><a id="3507" class="Symbol">}</a> <a id="3509" class="Symbol">(</a><a id="3510" href="Ledger.Transaction.html#3510" class="Bound">A</a> <a id="3512" class="Symbol">:</a> <a id="3514" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3519" href="Ledger.Transaction.html#3506" class="Bound">a</a><a id="3520" class="Symbol">)</a> <a id="3522" class="Symbol">:</a> <a id="3524" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3529" href="Ledger.Transaction.html#3506" class="Bound">a</a> <a id="3531" class="Keyword">where</a>
    <a id="3541" class="Keyword">field</a> <a id="3547" href="Ledger.Transaction.html#3547" class="Field">txfeeOf</a> <a id="3555" class="Symbol">:</a> <a id="3557" href="Ledger.Transaction.html#3510" class="Bound">A</a> <a id="3559" class="Symbol">→</a> <a id="3561" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3568" class="Keyword">open</a> <a id="3573" href="Ledger.Transaction.html#3496" class="Module">Hastxfee</a>   <a id="3584" class="Symbol">⦃...⦄</a> <a id="3590" class="Keyword">public</a>

  <a id="3600" class="Keyword">record</a> <a id="TransactionStructure.Hastxcerts"></a><a id="3607" href="Ledger.Transaction.html#3607" class="Record">Hastxcerts</a> <a id="3618" class="Symbol">{</a><a id="3619" href="Ledger.Transaction.html#3619" class="Bound">a</a><a id="3620" class="Symbol">}</a> <a id="3622" class="Symbol">(</a><a id="3623" href="Ledger.Transaction.html#3623" class="Bound">A</a> <a id="3625" class="Symbol">:</a> <a id="3627" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3632" href="Ledger.Transaction.html#3619" class="Bound">a</a><a id="3633" class="Symbol">)</a> <a id="3635" class="Symbol">:</a> <a id="3637" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3642" href="Ledger.Transaction.html#3619" class="Bound">a</a> <a id="3644" class="Keyword">where</a>
    <a id="3654" class="Keyword">field</a> <a id="3660" href="Ledger.Transaction.html#3660" class="Field">txcertsOf</a> <a id="3670" class="Symbol">:</a> <a id="3672" href="Ledger.Transaction.html#3623" class="Bound">A</a> <a id="3674" class="Symbol">→</a> <a id="3676" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3681" href="Ledger.Certs.html#1324" class="Datatype">DCert</a>
  <a id="3689" class="Keyword">open</a> <a id="3694" href="Ledger.Transaction.html#3607" class="Module">Hastxcerts</a> <a id="3705" class="Symbol">⦃...⦄</a> <a id="3711" class="Keyword">public</a>

  <a id="3721" class="Keyword">record</a> <a id="TransactionStructure.Hastxprop"></a><a id="3728" href="Ledger.Transaction.html#3728" class="Record">Hastxprop</a> <a id="3738" class="Symbol">{</a><a id="3739" href="Ledger.Transaction.html#3739" class="Bound">a</a><a id="3740" class="Symbol">}</a> <a id="3742" class="Symbol">(</a><a id="3743" href="Ledger.Transaction.html#3743" class="Bound">A</a> <a id="3745" class="Symbol">:</a> <a id="3747" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3752" href="Ledger.Transaction.html#3739" class="Bound">a</a><a id="3753" class="Symbol">)</a> <a id="3755" class="Symbol">:</a> <a id="3757" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3762" href="Ledger.Transaction.html#3739" class="Bound">a</a> <a id="3764" class="Keyword">where</a>
    <a id="3774" class="Keyword">field</a> <a id="3780" href="Ledger.Transaction.html#3780" class="Field">txpropOf</a>  <a id="3790" class="Symbol">:</a> <a id="3792" href="Ledger.Transaction.html#3743" class="Bound">A</a> <a id="3794" class="Symbol">→</a> <a id="3796" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3801" href="Ledger.GovernanceActions.html#2524" class="Record">GovProposal</a>
  <a id="3815" class="Keyword">open</a> <a id="3820" href="Ledger.Transaction.html#3728" class="Module">Hastxprop</a>  <a id="3831" class="Symbol">⦃...⦄</a> <a id="3837" class="Keyword">public</a>

  <a id="3847" class="Keyword">record</a> <a id="TransactionStructure.Hastxid"></a><a id="3854" href="Ledger.Transaction.html#3854" class="Record">Hastxid</a>    <a id="3865" class="Symbol">{</a><a id="3866" href="Ledger.Transaction.html#3866" class="Bound">a</a><a id="3867" class="Symbol">}</a> <a id="3869" class="Symbol">(</a><a id="3870" href="Ledger.Transaction.html#3870" class="Bound">A</a> <a id="3872" class="Symbol">:</a> <a id="3874" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3879" href="Ledger.Transaction.html#3866" class="Bound">a</a><a id="3880" class="Symbol">)</a> <a id="3882" class="Symbol">:</a> <a id="3884" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3889" href="Ledger.Transaction.html#3866" class="Bound">a</a> <a id="3891" class="Keyword">where</a> 
    <a id="3902" class="Keyword">field</a> <a id="3908" href="Ledger.Transaction.html#3908" class="Field">txidOf</a>    <a id="3918" class="Symbol">:</a> <a id="3920" href="Ledger.Transaction.html#3870" class="Bound">A</a> <a id="3922" class="Symbol">→</a> <a id="3924" href="Ledger.Transaction.html#919" class="Field">TxId</a>
  <a id="3931" class="Keyword">open</a> <a id="3936" href="Ledger.Transaction.html#3854" class="Module">Hastxid</a>    <a id="3947" class="Symbol">⦃...⦄</a> <a id="3953" class="Keyword">public</a>


  <a id="3964" class="Keyword">record</a> <a id="TransactionStructure.TxWitnesses"></a><a id="3971" href="Ledger.Transaction.html#3971" class="Record">TxWitnesses</a> <a id="3983" class="Symbol">:</a> <a id="3985" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3990" class="Keyword">where</a>
    <a id="4000" class="Keyword">field</a>
      <a id="4012" href="Ledger.Transaction.html#4012" class="Field">vkSigs</a>   <a id="4021" class="Symbol">:</a> <a id="4023" href="Ledger.Crypto.html#582" class="Function">VKey</a> <a id="4028" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4030" href="Ledger.Crypto.html#587" class="Function">Sig</a>
      <a id="4040" href="Ledger.Transaction.html#4040" class="Field">scripts</a>  <a id="4049" class="Symbol">:</a> <a id="4051" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4053" href="Ledger.Script.html#5346" class="Function">Script</a>
      <a id="4066" href="Ledger.Transaction.html#4066" class="Field">txdats</a>   <a id="4075" class="Symbol">:</a> <a id="4077" href="Ledger.Script.html#1719" class="Function">DataHash</a> <a id="4086" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4088" href="Ledger.Script.html#1766" class="Function">Datum</a>
      <a id="4100" href="Ledger.Transaction.html#4100" class="Field">txrdmrs</a>  <a id="4109" class="Symbol">:</a> <a id="4111" href="Ledger.Transaction.html#2442" class="Function">RdmrPtr</a>  <a id="4120" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4122" href="Ledger.Script.html#1784" class="Function">Redeemer</a> <a id="4131" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4133" href="Ledger.Script.html#1014" class="Function">ExUnits</a>

    <a id="TransactionStructure.TxWitnesses.scriptsP1"></a><a id="4146" href="Ledger.Transaction.html#4146" class="Function">scriptsP1</a> <a id="4156" class="Symbol">:</a> <a id="4158" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4160" href="Ledger.Script.html#638" class="Function">P1Script</a>
    <a id="4173" href="Ledger.Transaction.html#4146" class="Function">scriptsP1</a> <a id="4183" class="Symbol">=</a> <a id="4185" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="4196" href="Data.Sum.html#787" class="Function">isInj₁</a> <a id="4203" href="Ledger.Transaction.html#4040" class="Field">scripts</a>

  <a id="4214" class="Keyword">record</a> <a id="TransactionStructure.Tx"></a><a id="4221" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="4224" class="Symbol">:</a> <a id="4226" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4231" class="Keyword">where</a>
    <a id="4241" class="Keyword">field</a>
      <a id="4253" href="Ledger.Transaction.html#4253" class="Field">body</a>     <a id="4262" class="Symbol">:</a> <a id="4264" href="Ledger.Transaction.html#2677" class="Record">TxBody</a>
      <a id="4277" href="Ledger.Transaction.html#4277" class="Field">wits</a>     <a id="4286" class="Symbol">:</a> <a id="4288" href="Ledger.Transaction.html#3971" class="Record">TxWitnesses</a>
      <a id="4306" href="Ledger.Transaction.html#4306" class="Field">isValid</a>  <a id="4315" class="Symbol">:</a> <a id="4317" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
      <a id="4328" href="Ledger.Transaction.html#4328" class="Field">txAD</a>     <a id="4337" class="Symbol">:</a> <a id="4339" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4345" href="Ledger.Transaction.html#924" class="Field">AuxiliaryData</a>


  <a id="4363" class="Keyword">instance</a>
    <a id="TransactionStructure.HasTxBody-Tx"></a><a id="4376" href="Ledger.Transaction.html#4376" class="Function">HasTxBody-Tx</a> <a id="4389" class="Symbol">:</a> <a id="4391" href="Ledger.Transaction.html#3381" class="Record">HasTxBody</a> <a id="4401" href="Ledger.Transaction.html#4221" class="Record">Tx</a>
    <a id="4408" href="Ledger.Transaction.html#4376" class="Function">HasTxBody-Tx</a> <a id="4421" class="Symbol">.</a><a id="4422" href="Ledger.Transaction.html#3433" class="Field">TxBodyOf</a> <a id="4431" class="Symbol">=</a> <a id="4433" href="Ledger.Transaction.html#4253" class="Field">Tx.body</a>

    <a id="TransactionStructure.Hastxfee-Tx"></a><a id="4446" href="Ledger.Transaction.html#4446" class="Function">Hastxfee-Tx</a> <a id="4458" class="Symbol">:</a> <a id="4460" href="Ledger.Transaction.html#3496" class="Record">Hastxfee</a> <a id="4469" href="Ledger.Transaction.html#4221" class="Record">Tx</a>
    <a id="4476" href="Ledger.Transaction.html#4446" class="Function">Hastxfee-Tx</a> <a id="4488" class="Symbol">.</a><a id="4489" href="Ledger.Transaction.html#3547" class="Field">txfeeOf</a> <a id="4497" class="Symbol">=</a> <a id="4499" href="Ledger.Transaction.html#2807" class="Field">TxBody.txfee</a> <a id="4512" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4514" href="Ledger.Transaction.html#3433" class="Field">TxBodyOf</a>
    
    <a id="TransactionStructure.Hastxcerts-Tx"></a><a id="4532" href="Ledger.Transaction.html#4532" class="Function">Hastxcerts-Tx</a> <a id="4546" class="Symbol">:</a> <a id="4548" href="Ledger.Transaction.html#3607" class="Record">Hastxcerts</a> <a id="4559" href="Ledger.Transaction.html#4221" class="Record">Tx</a>
    <a id="4566" href="Ledger.Transaction.html#4532" class="Function">Hastxcerts-Tx</a> <a id="4580" class="Symbol">.</a><a id="4581" href="Ledger.Transaction.html#3660" class="Field">txcertsOf</a> <a id="4591" class="Symbol">=</a> <a id="4593" href="Ledger.Transaction.html#2911" class="Field">TxBody.txcerts</a> <a id="4608" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4610" href="Ledger.Transaction.html#3433" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.Hastxprop-Tx"></a><a id="4624" href="Ledger.Transaction.html#4624" class="Function">Hastxprop-Tx</a> <a id="4637" class="Symbol">:</a> <a id="4639" href="Ledger.Transaction.html#3728" class="Record">Hastxprop</a> <a id="4649" href="Ledger.Transaction.html#4221" class="Record">Tx</a>
    <a id="4656" href="Ledger.Transaction.html#4624" class="Function">Hastxprop-Tx</a> <a id="4669" class="Symbol">.</a><a id="4670" href="Ledger.Transaction.html#3780" class="Field">txpropOf</a> <a id="4679" class="Symbol">=</a> <a id="4681" href="Ledger.Transaction.html#3009" class="Field">TxBody.txprop</a> <a id="4695" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4697" href="Ledger.Transaction.html#3433" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.HasWdrls-TxBody"></a><a id="4711" href="Ledger.Transaction.html#4711" class="Function">HasWdrls-TxBody</a> <a id="4727" class="Symbol">:</a> <a id="4729" href="Ledger.Certs.html#2964" class="Record">HasWdrls</a> <a id="4738" href="Ledger.Transaction.html#2677" class="Record">TxBody</a>
    <a id="4749" href="Ledger.Transaction.html#4711" class="Function">HasWdrls-TxBody</a> <a id="4765" class="Symbol">.</a><a id="4766" href="Ledger.Certs.html#3013" class="Field">wdrlsOf</a> <a id="4774" class="Symbol">=</a> <a id="4776" href="Ledger.Transaction.html#2945" class="Field">TxBody.txwdrls</a>

    <a id="TransactionStructure.HasWdrls-Tx"></a><a id="4796" href="Ledger.Transaction.html#4796" class="Function">HasWdrls-Tx</a> <a id="4808" class="Symbol">:</a> <a id="4810" href="Ledger.Certs.html#2964" class="Record">HasWdrls</a> <a id="4819" href="Ledger.Transaction.html#4221" class="Record">Tx</a>
    <a id="4826" href="Ledger.Transaction.html#4796" class="Function">HasWdrls-Tx</a> <a id="4838" class="Symbol">.</a><a id="4839" href="Ledger.Certs.html#3013" class="Field">wdrlsOf</a> <a id="4847" class="Symbol">=</a> <a id="4849" href="Ledger.Certs.html#3013" class="Field">wdrlsOf</a> <a id="4857" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4859" href="Ledger.Transaction.html#3433" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.Hastxid-Tx"></a><a id="4873" href="Ledger.Transaction.html#4873" class="Function">Hastxid-Tx</a> <a id="4884" class="Symbol">:</a> <a id="4886" href="Ledger.Transaction.html#3854" class="Record">Hastxid</a> <a id="4894" href="Ledger.Transaction.html#4221" class="Record">Tx</a>
    <a id="4901" href="Ledger.Transaction.html#4873" class="Function">Hastxid-Tx</a> <a id="4912" class="Symbol">.</a><a id="4913" href="Ledger.Transaction.html#3908" class="Field">txidOf</a> <a id="4920" class="Symbol">=</a> <a id="4922" href="Ledger.Transaction.html#3245" class="Field">TxBody.txid</a> <a id="4934" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4936" href="Ledger.Transaction.html#3433" class="Field">TxBodyOf</a>


  <a id="TransactionStructure.getValue"></a><a id="4949" href="Ledger.Transaction.html#4949" class="Function">getValue</a> <a id="4958" class="Symbol">:</a> <a id="4960" href="Ledger.Transaction.html#2320" class="Function">TxOut</a> <a id="4966" class="Symbol">→</a> <a id="4968" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="4976" href="Ledger.Transaction.html#4949" class="Function">getValue</a> <a id="4985" class="Symbol">(_</a> <a id="4988" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4990" href="Ledger.Transaction.html#4990" class="Bound">v</a> <a id="4992" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4994" class="Symbol">_)</a> <a id="4997" class="Symbol">=</a> <a id="4999" href="Ledger.Transaction.html#4990" class="Bound">v</a>

  <a id="TransactionStructure.TxOutʰ"></a><a id="5004" href="Ledger.Transaction.html#5004" class="Function">TxOutʰ</a> <a id="5011" class="Symbol">=</a> <a id="5013" href="Ledger.Address.html#2325" class="Function">Addr</a> <a id="5018" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5020" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="5026" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5028" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5034" class="Symbol">(</a><a id="5035" href="Ledger.Script.html#1766" class="Function">Datum</a> <a id="5041" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5043" href="Ledger.Script.html#1719" class="Function">DataHash</a><a id="5051" class="Symbol">)</a> <a id="5053" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5055" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5061" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>

  <a id="TransactionStructure.txOutHash"></a><a id="5075" href="Ledger.Transaction.html#5075" class="Function">txOutHash</a> <a id="5085" class="Symbol">:</a> <a id="5087" href="Ledger.Transaction.html#2320" class="Function">TxOut</a> <a id="5093" class="Symbol">→</a> <a id="5095" href="Ledger.Transaction.html#5004" class="Function">TxOutʰ</a>
  <a id="5104" href="Ledger.Transaction.html#5075" class="Function">txOutHash</a> <a id="5114" class="Symbol">(</a><a id="5115" href="Ledger.Transaction.html#5115" class="Bound">a</a> <a id="5117" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5119" href="Ledger.Transaction.html#5119" class="Bound">v</a> <a id="5121" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5123" href="Ledger.Transaction.html#5123" class="Bound">d</a> <a id="5125" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5127" href="Ledger.Transaction.html#5127" class="Bound">s</a><a id="5128" class="Symbol">)</a> <a id="5130" class="Symbol">=</a> <a id="5132" href="Ledger.Transaction.html#5115" class="Bound">a</a> <a id="5134" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5136" class="Symbol">(</a><a id="5137" href="Ledger.Transaction.html#5119" class="Bound">v</a> <a id="5139" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5141" class="Symbol">(</a><a id="5142" href="Ledger.Transaction.html#5123" class="Bound">d</a> <a id="5144" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5146" href="Data.Maybe.Base.html#1934" class="Function">M.map</a> <a id="5152" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="5157" href="Ledger.Transaction.html#5127" class="Bound">s</a><a id="5158" class="Symbol">))</a>

  <a id="TransactionStructure.getValueʰ"></a><a id="5164" href="Ledger.Transaction.html#5164" class="Function">getValueʰ</a> <a id="5174" class="Symbol">:</a> <a id="5176" href="Ledger.Transaction.html#5004" class="Function">TxOutʰ</a> <a id="5183" class="Symbol">→</a> <a id="5185" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="5193" href="Ledger.Transaction.html#5164" class="Function">getValueʰ</a> <a id="5203" class="Symbol">(_</a> <a id="5206" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5208" href="Ledger.Transaction.html#5208" class="Bound">v</a> <a id="5210" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5212" class="Symbol">_)</a> <a id="5215" class="Symbol">=</a> <a id="5217" href="Ledger.Transaction.html#5208" class="Bound">v</a>

  <a id="TransactionStructure.txinsVKey"></a><a id="5222" href="Ledger.Transaction.html#5222" class="Function">txinsVKey</a> <a id="5232" class="Symbol">:</a> <a id="5234" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5236" href="Ledger.Transaction.html#2297" class="Function">TxIn</a> <a id="5241" class="Symbol">→</a> <a id="5243" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="5248" class="Symbol">→</a> <a id="5250" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5252" href="Ledger.Transaction.html#2297" class="Function">TxIn</a>
  <a id="5259" href="Ledger.Transaction.html#5222" class="Function">txinsVKey</a> <a id="5269" href="Ledger.Transaction.html#5269" class="Bound">txins</a> <a id="5275" href="Ledger.Transaction.html#5275" class="Bound">utxo</a> <a id="5280" class="Symbol">=</a> <a id="5282" href="Ledger.Transaction.html#5269" class="Bound">txins</a> <a id="5288" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="5290" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5294" class="Symbol">(</a><a id="5295" href="Ledger.Transaction.html#5275" class="Bound">utxo</a> <a id="5300" href="abstract-set-theory.FiniteSetTheory.html#3088" class="Function Operator">∣^&#39;</a> <a id="5304" class="Symbol">(</a><a id="5305" href="Ledger.Address.html#2580" class="Function">isVKeyAddr</a> <a id="5316" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5318" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="5323" class="Symbol">))</a>

  <a id="TransactionStructure.scriptOuts"></a><a id="5329" href="Ledger.Transaction.html#5329" class="Function">scriptOuts</a> <a id="5340" class="Symbol">:</a> <a id="5342" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="5347" class="Symbol">→</a> <a id="5349" href="Ledger.Transaction.html#2388" class="Function">UTxO</a>
  <a id="5356" href="Ledger.Transaction.html#5329" class="Function">scriptOuts</a> <a id="5367" href="Ledger.Transaction.html#5367" class="Bound">utxo</a> <a id="5372" class="Symbol">=</a> <a id="5374" href="Ledger.Transaction.html#364" class="Function">filter</a> <a id="5381" class="Symbol">(λ</a> <a id="5384" class="Symbol">(_</a> <a id="5387" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5389" href="Ledger.Transaction.html#5389" class="Bound">addr</a> <a id="5394" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5396" class="Symbol">_)</a> <a id="5399" class="Symbol">→</a> <a id="5401" href="Ledger.Address.html#2608" class="Function">isScriptAddr</a> <a id="5414" href="Ledger.Transaction.html#5389" class="Bound">addr</a><a id="5418" class="Symbol">)</a> <a id="5420" href="Ledger.Transaction.html#5367" class="Bound">utxo</a>

  <a id="TransactionStructure.txinsScript"></a><a id="5428" href="Ledger.Transaction.html#5428" class="Function">txinsScript</a> <a id="5440" class="Symbol">:</a> <a id="5442" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5444" href="Ledger.Transaction.html#2297" class="Function">TxIn</a> <a id="5449" class="Symbol">→</a> <a id="5451" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="5456" class="Symbol">→</a> <a id="5458" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5460" href="Ledger.Transaction.html#2297" class="Function">TxIn</a>
  <a id="5467" href="Ledger.Transaction.html#5428" class="Function">txinsScript</a> <a id="5479" href="Ledger.Transaction.html#5479" class="Bound">txins</a> <a id="5485" href="Ledger.Transaction.html#5485" class="Bound">utxo</a> <a id="5490" class="Symbol">=</a> <a id="5492" href="Ledger.Transaction.html#5479" class="Bound">txins</a> <a id="5498" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="5500" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5504" class="Symbol">(</a><a id="5505" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5511" class="Symbol">(</a><a id="5512" href="Ledger.Transaction.html#5329" class="Function">scriptOuts</a> <a id="5523" href="Ledger.Transaction.html#5485" class="Bound">utxo</a><a id="5527" class="Symbol">))</a>

  <a id="TransactionStructure.refScripts"></a><a id="5533" href="Ledger.Transaction.html#5533" class="Function">refScripts</a> <a id="5544" class="Symbol">:</a> <a id="5546" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="5549" class="Symbol">→</a> <a id="5551" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="5556" class="Symbol">→</a> <a id="5558" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5563" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="5572" href="Ledger.Transaction.html#5533" class="Function">refScripts</a> <a id="5583" href="Ledger.Transaction.html#5583" class="Bound">tx</a> <a id="5586" href="Ledger.Transaction.html#5586" class="Bound">utxo</a> <a id="5591" class="Symbol">=</a>
    <a id="5597" href="Data.List.Base.html#4628" class="Function">mapMaybe</a> <a id="5606" class="Symbol">(</a><a id="5607" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5613" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5615" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="5621" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5623" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="5628" class="Symbol">)</a> <a id="5630" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5632" href="abstract-set-theory.FiniteSetTheory.html#2463" class="Function">setToList</a> <a id="5642" class="Symbol">(</a><a id="5643" href="Class.IsSet.html#959" class="Function">range</a> <a id="5649" class="Symbol">(</a><a id="5650" href="Ledger.Transaction.html#5586" class="Bound">utxo</a> <a id="5655" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="5657" class="Symbol">(</a><a id="5658" href="Ledger.Transaction.html#2713" class="Function">txins</a> <a id="5664" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="5666" href="Ledger.Transaction.html#2743" class="Function">refInputs</a><a id="5675" class="Symbol">)))</a>
    <a id="5683" class="Keyword">where</a> <a id="5689" class="Keyword">open</a> <a id="5694" href="Ledger.Transaction.html#4221" class="Module">Tx</a><a id="5696" class="Symbol">;</a> <a id="5698" class="Keyword">open</a> <a id="5703" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="5710" class="Symbol">(</a><a id="5711" href="Ledger.Transaction.html#5583" class="Bound">tx</a> <a id="5714" class="Symbol">.</a><a id="5715" href="Ledger.Transaction.html#4253" class="Field">body</a><a id="5719" class="Symbol">)</a>

  <a id="TransactionStructure.txscripts"></a><a id="5724" href="Ledger.Transaction.html#5724" class="Function">txscripts</a> <a id="5734" class="Symbol">:</a> <a id="5736" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="5739" class="Symbol">→</a> <a id="5741" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="5746" class="Symbol">→</a> <a id="5748" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5750" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="5759" href="Ledger.Transaction.html#5724" class="Function">txscripts</a> <a id="5769" href="Ledger.Transaction.html#5769" class="Bound">tx</a> <a id="5772" href="Ledger.Transaction.html#5772" class="Bound">utxo</a> <a id="5777" class="Symbol">=</a> <a id="5779" href="Ledger.Transaction.html#4040" class="Field">scripts</a> <a id="5787" class="Symbol">(</a><a id="5788" href="Ledger.Transaction.html#5769" class="Bound">tx</a> <a id="5791" class="Symbol">.</a><a id="5792" href="Ledger.Transaction.html#4277" class="Field">wits</a><a id="5796" class="Symbol">)</a> <a id="5798" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="5800" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="5809" class="Symbol">(</a><a id="5810" href="Ledger.Transaction.html#5533" class="Function">refScripts</a> <a id="5821" href="Ledger.Transaction.html#5769" class="Bound">tx</a> <a id="5824" href="Ledger.Transaction.html#5772" class="Bound">utxo</a><a id="5828" class="Symbol">)</a>
    <a id="5834" class="Keyword">where</a> <a id="5840" class="Keyword">open</a> <a id="5845" href="Ledger.Transaction.html#4221" class="Module">Tx</a><a id="5847" class="Symbol">;</a> <a id="5849" class="Keyword">open</a> <a id="5854" href="Ledger.Transaction.html#3971" class="Module">TxWitnesses</a>

  <a id="TransactionStructure.lookupScriptHash"></a><a id="5869" href="Ledger.Transaction.html#5869" class="Function">lookupScriptHash</a> <a id="5886" class="Symbol">:</a> <a id="5888" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="5899" class="Symbol">→</a> <a id="5901" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="5904" class="Symbol">→</a> <a id="5906" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="5911" class="Symbol">→</a> <a id="5913" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5919" href="Ledger.Script.html#5346" class="Function">Script</a>
  <a id="5928" href="Ledger.Transaction.html#5869" class="Function">lookupScriptHash</a> <a id="5945" href="Ledger.Transaction.html#5945" class="Bound">sh</a> <a id="5948" href="Ledger.Transaction.html#5948" class="Bound">tx</a> <a id="5951" href="Ledger.Transaction.html#5951" class="Bound">utxo</a> <a id="5956" class="Symbol">=</a>
    <a id="5962" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="5965" href="Ledger.Transaction.html#5945" class="Bound">sh</a> <a id="5968" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5970" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="5975" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5981" class="Symbol">(</a><a id="5982" href="Ledger.Transaction.html#6051" class="Function">m</a> <a id="5984" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="5985" class="Symbol">)</a> <a id="5987" href="Class.ToBool.html#389" class="Function Operator">then</a>
      <a id="5998" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6003" class="Symbol">(</a><a id="6004" href="Axiom.Set.Map.html#13563" class="Function">lookupᵐ</a> <a id="6012" href="Ledger.Transaction.html#6051" class="Function">m</a> <a id="6014" href="Ledger.Transaction.html#5945" class="Bound">sh</a><a id="6016" class="Symbol">)</a>
    <a id="6022" href="Class.ToBool.html#389" class="Function Operator">else</a>
      <a id="6033" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="6045" class="Keyword">where</a> <a id="6051" href="Ledger.Transaction.html#6051" class="Function">m</a> <a id="6053" class="Symbol">=</a> <a id="6055" href="Ledger.Prelude.html#1897" class="Function">setToMap</a> <a id="6064" class="Symbol">(</a><a id="6065" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="6070" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="6072" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="6077" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="6079" href="Function.Base.html#704" class="Function">id</a> <a id="6082" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="6084" class="Symbol">(</a><a id="6085" href="Ledger.Transaction.html#5724" class="Function">txscripts</a> <a id="6095" href="Ledger.Transaction.html#5948" class="Bound">tx</a> <a id="6098" href="Ledger.Transaction.html#5951" class="Bound">utxo</a><a id="6102" class="Symbol">))</a>


  <a id="TransactionStructure.isP2Script"></a><a id="6109" href="Ledger.Transaction.html#6109" class="Function">isP2Script</a> <a id="6120" class="Symbol">:</a> <a id="6122" href="Ledger.Script.html#5346" class="Function">Script</a> <a id="6129" class="Symbol">→</a> <a id="6131" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="6138" href="Ledger.Transaction.html#6109" class="Function">isP2Script</a> <a id="6149" class="Symbol">=</a> <a id="6151" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="6153" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6155" href="Data.Maybe.Base.html#1117" class="Function">is-just</a> <a id="6163" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6165" href="Data.Sum.html#870" class="Function">isInj₂</a>

  <a id="TransactionStructure.isP2Script?"></a><a id="6175" href="Ledger.Transaction.html#6175" class="Function">isP2Script?</a> <a id="6187" class="Symbol">:</a> <a id="6189" class="Symbol">∀</a> <a id="6191" class="Symbol">{</a><a id="6192" href="Ledger.Transaction.html#6192" class="Bound">s</a><a id="6193" class="Symbol">}</a> <a id="6195" class="Symbol">→</a> <a id="6197" href="Ledger.Transaction.html#6109" class="Function">isP2Script</a> <a id="6208" href="Ledger.Transaction.html#6192" class="Bound">s</a> <a id="6210" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="6214" href="Ledger.Transaction.html#6175" class="Function">isP2Script?</a> <a id="6226" class="Symbol">{</a><a id="6227" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="6232" href="Ledger.Transaction.html#6232" class="Bound">x</a><a id="6233" class="Symbol">}</a> <a id="6235" class="Symbol">.</a><a id="6236" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="6240" class="Symbol">=</a> <a id="6242" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="6245" class="Symbol">λ</a> <a id="6247" class="Symbol">()</a>
  <a id="6252" href="Ledger.Transaction.html#6175" class="Function">isP2Script?</a> <a id="6264" class="Symbol">{</a><a id="6265" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6270" href="Ledger.Transaction.html#6270" class="Bound">y</a><a id="6271" class="Symbol">}</a> <a id="6273" class="Symbol">.</a><a id="6274" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="6278" class="Symbol">=</a> <a id="6280" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6284" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>

  <a id="6290" class="Keyword">instance</a>
    <a id="TransactionStructure.HasCoin-TxOut"></a><a id="6303" href="Ledger.Transaction.html#6303" class="Function">HasCoin-TxOut</a> <a id="6317" class="Symbol">:</a> <a id="6319" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="6327" href="Ledger.Transaction.html#2320" class="Function">TxOut</a>
    <a id="6337" href="Ledger.Transaction.html#6303" class="Function">HasCoin-TxOut</a> <a id="6351" class="Symbol">.</a><a id="6352" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="6360" class="Symbol">=</a> <a id="6362" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="6367" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6369" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="6375" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6377" href="Data.Product.Base.html#650" class="Field">proj₂</a>

</pre></body></html>