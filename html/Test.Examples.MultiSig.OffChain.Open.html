<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Test.Examples.MultiSig.OffChain.Open</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Test.Examples.MultiSig.OffChain.Open.html" class="Module">Test.Examples.MultiSig.OffChain.Open</a> <a id="69" class="Keyword">where</a>

<a id="76" class="Keyword">open</a> <a id="81" class="Keyword">import</a> <a id="88" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="103" class="Keyword">open</a> <a id="108" class="Keyword">import</a> <a id="115" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="156" class="Keyword">open</a> <a id="161" class="Keyword">import</a> <a id="168" href="Test.Examples.MultiSig.Datum.html" class="Module">Test.Examples.MultiSig.Datum</a>
<a id="197" class="Keyword">open</a> <a id="202" class="Keyword">import</a> <a id="209" href="Test.Examples.MultiSig.Validator.html" class="Module">Test.Examples.MultiSig.Validator</a>
<a id="242" class="Keyword">open</a> <a id="247" class="Keyword">import</a> <a id="254" href="Test.Examples.MultiSig.OffChain.Lib.html" class="Module">Test.Examples.MultiSig.OffChain.Lib</a>
<a id="290" class="Keyword">open</a> <a id="295" class="Keyword">import</a> <a id="302" href="Test.Prelude.html" class="Module">Test.Prelude</a> <a id="315" href="Test.Examples.MultiSig.Datum.html#642" class="Function">MultiSigData</a>
<a id="328" class="Keyword">open</a> <a id="333" class="Keyword">import</a> <a id="340" href="Test.SymbolicData.html" class="Module">Test.SymbolicData</a> <a id="358" href="Test.Examples.MultiSig.Datum.html#642" class="Function">MultiSigData</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Test.LedgerImplementation.html" class="Module">Test.LedgerImplementation</a> <a id="409" href="Test.SymbolicData.html#240" class="Function">SData</a> <a id="415" href="Test.SymbolicData.html#240" class="Function">SData</a>
<a id="421" class="Keyword">open</a> <a id="426" class="Keyword">import</a> <a id="433" href="Test.AbstractImplementation.html" class="Module">Test.AbstractImplementation</a> <a id="461" href="Test.SymbolicData.html#2904" class="Function">valContext</a>
<a id="472" class="Keyword">open</a> <a id="477" class="Keyword">import</a> <a id="484" href="Test.Lib.html" class="Module">Test.Lib</a> <a id="493" href="Test.SymbolicData.html#2904" class="Function">valContext</a>

<a id="505" class="Keyword">open</a> <a id="510" class="Keyword">import</a> <a id="517" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="558" class="Keyword">open</a> <a id="563" href="Ledger.Conway.Specification.Transaction.html#991" class="Module">TransactionStructure</a> <a id="584" href="Test.LedgerImplementation.html#4277" class="Function">SVTransactionStructure</a>
<a id="607" class="Keyword">open</a> <a id="612" href="Test.LedgerImplementation.html#1058" class="Module">Implementation</a>

<a id="openTxOut"></a><a id="628" href="Test.Examples.MultiSig.OffChain.Open.html#628" class="Function">openTxOut</a> <a id="638" class="Symbol">:</a> <a id="640" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="646" class="Symbol">→</a> <a id="648" href="Test.LedgerImplementation.html#1452" class="Function">PlutusScript</a> <a id="661" class="Symbol">→</a> <a id="663" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a>
<a id="669" href="Test.Examples.MultiSig.OffChain.Open.html#628" class="Function">openTxOut</a> <a id="679" href="Test.Examples.MultiSig.OffChain.Open.html#679" class="Bound">v</a> <a id="681" href="Test.Examples.MultiSig.OffChain.Open.html#681" class="Bound">script</a> <a id="688" class="Symbol">=</a> <a id="690" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="695" class="Symbol">(</a><a id="696" class="Keyword">record</a> <a id="703" class="Symbol">{</a> <a id="705" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="709" class="Symbol">=</a> <a id="711" class="Number">0</a> <a id="713" class="Symbol">;</a>
                           <a id="742" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="746" class="Symbol">=</a> <a id="748" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="758" class="Symbol">(</a><a id="759" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="765" href="Test.Examples.MultiSig.OffChain.Open.html#681" class="Bound">script</a><a id="771" class="Symbol">)</a> <a id="773" class="Symbol">;</a>
                           <a id="802" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="808" class="Symbol">=</a> <a id="810" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="815" class="Symbol">(</a><a id="816" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="826" class="Symbol">(</a><a id="827" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="833" href="Test.Examples.MultiSig.OffChain.Open.html#681" class="Bound">script</a><a id="839" class="Symbol">))</a> <a id="842" class="Symbol">})</a>
                           <a id="872" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="874" href="Test.Examples.MultiSig.OffChain.Open.html#679" class="Bound">v</a>
                           <a id="903" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="905" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="910" class="Symbol">(</a><a id="911" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="916" class="Symbol">(</a><a id="917" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="922" class="Symbol">(</a><a id="923" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="928" href="Test.Examples.MultiSig.Datum.html#195" class="InductiveConstructor">Holding</a><a id="935" class="Symbol">)))</a> <a id="939" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="941" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="950" class="Comment">-- txid, wallet, value at script, script index</a>
<a id="openTx"></a><a id="997" href="Test.Examples.MultiSig.OffChain.Open.html#997" class="Function">openTx</a> <a id="1004" class="Symbol">:</a> <a id="1006" class="Symbol">(</a><a id="1007" href="Test.Examples.MultiSig.OffChain.Open.html#1007" class="Bound">id</a> <a id="1010" href="Test.Examples.MultiSig.OffChain.Open.html#1010" class="Bound">w</a> <a id="1012" href="Test.Examples.MultiSig.OffChain.Open.html#1012" class="Bound">v</a> <a id="1014" href="Test.Examples.MultiSig.OffChain.Open.html#1014" class="Bound">tw</a> <a id="1017" class="Symbol">:</a> <a id="1019" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1020" class="Symbol">)</a> <a id="1022" class="Symbol">→</a> <a id="1024" href="Test.LedgerImplementation.html#1452" class="Function">PlutusScript</a> <a id="1037" class="Symbol">→</a> <a id="1039" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a>
<a id="1042" href="Test.Examples.MultiSig.OffChain.Open.html#997" class="Function">openTx</a> <a id="1049" href="Test.Examples.MultiSig.OffChain.Open.html#1049" class="Bound">id</a> <a id="1052" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a> <a id="1054" href="Test.Examples.MultiSig.OffChain.Open.html#1054" class="Bound">v</a> <a id="1056" href="Test.Examples.MultiSig.OffChain.Open.html#1056" class="Bound">tw</a> <a id="1059" href="Test.Examples.MultiSig.OffChain.Open.html#1059" class="Bound">script</a> <a id="1066" class="Symbol">=</a> <a id="1068" class="Keyword">record</a> <a id="1075" class="Symbol">{</a> <a id="1077" href="Ledger.Conway.Specification.Transaction.html#4700" class="Field">body</a> <a id="1082" class="Symbol">=</a> <a id="1084" class="Keyword">record</a> <a id="1091" href="Test.Examples.MultiSig.OffChain.Lib.html#566" class="Function">defaultTxBody</a>
                         <a id="1130" class="Symbol">{</a> <a id="1132" href="Ledger.Conway.Specification.Transaction.html#3018" class="Field">txIns</a> <a id="1138" class="Symbol">=</a> <a id="1140" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="1164" class="Symbol">((</a><a id="1166" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a> <a id="1168" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1170" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a><a id="1171" class="Symbol">)</a> <a id="1173" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1175" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1177" class="Symbol">)</a>
                         <a id="1204" class="Symbol">;</a> <a id="1206" href="Ledger.Conway.Specification.Transaction.html#3126" class="Field">txOuts</a> <a id="1213" class="Symbol">=</a> <a id="1215" href="Test.Lib.html#5515" class="Function">fromListIx</a> <a id="1226" class="Symbol">((</a><a id="1228" href="Test.Examples.MultiSig.OffChain.Open.html#1056" class="Bound">tw</a> <a id="1231" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1233" href="Test.Examples.MultiSig.OffChain.Open.html#628" class="Function">openTxOut</a> <a id="1243" href="Test.Examples.MultiSig.OffChain.Open.html#1054" class="Bound">v</a> <a id="1245" href="Test.Examples.MultiSig.OffChain.Open.html#1059" class="Bound">script</a><a id="1251" class="Symbol">)</a>
                                               <a id="1300" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1302" class="Symbol">(</a><a id="1303" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a>
                                                 <a id="1354" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1356" class="Symbol">((</a><a id="1358" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1363" class="Symbol">(</a><a id="1364" class="Keyword">record</a> <a id="1371" class="Symbol">{</a> <a id="1373" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="1377" class="Symbol">=</a> <a id="1379" class="Number">0</a> <a id="1381" class="Symbol">;</a>
                                                                    <a id="1451" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="1455" class="Symbol">=</a> <a id="1457" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1468" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a> <a id="1470" class="Symbol">;</a>
                                                                    <a id="1540" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="1546" class="Symbol">=</a> <a id="1548" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1553" class="Symbol">(</a><a id="1554" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1565" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a><a id="1566" class="Symbol">)</a> <a id="1568" class="Symbol">}))</a>
                                               <a id="1619" class="Comment">-- , 10000000000 , nothing , nothing))</a>
                                               <a id="1705" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1707" class="Symbol">((</a><a id="1709" class="Number">1000000000000</a> <a id="1723" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1725" class="Number">10000000000</a><a id="1736" class="Symbol">)</a> <a id="1738" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1740" href="Test.Examples.MultiSig.OffChain.Open.html#1054" class="Bound">v</a><a id="1741" class="Symbol">)</a> <a id="1743" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1745" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1753" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1755" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1762" class="Symbol">))</a>
                                               <a id="1812" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1814" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1816" class="Symbol">)</a>
                         <a id="1843" class="Symbol">;</a> <a id="1845" href="Ledger.Conway.Specification.Transaction.html#3166" class="Field">txId</a> <a id="1850" class="Symbol">=</a> <a id="1852" href="Test.Examples.MultiSig.OffChain.Open.html#1049" class="Bound">id</a>
                         <a id="1880" class="Symbol">;</a> <a id="1882" href="Ledger.Conway.Specification.Transaction.html#3090" class="Field">collateralInputs</a> <a id="1899" class="Symbol">=</a> <a id="1901" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="1925" class="Symbol">((</a><a id="1927" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a> <a id="1929" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1931" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a><a id="1932" class="Symbol">)</a> <a id="1934" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1936" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1938" class="Symbol">)</a>
                         <a id="1965" class="Symbol">}</a> <a id="1967" class="Symbol">;</a>
                <a id="1985" href="Ledger.Conway.Specification.Transaction.html#4724" class="Field">wits</a> <a id="1990" class="Symbol">=</a> <a id="1992" class="Keyword">record</a> <a id="1999" class="Symbol">{</a> <a id="2001" href="Ledger.Conway.Specification.Transaction.html#4464" class="Field">vkSigs</a> <a id="2008" class="Symbol">=</a> <a id="2010" href="Axiom.Set.Map.html#2713" class="Function">fromListᵐ</a> <a id="2020" class="Symbol">((</a><a id="2022" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a> <a id="2024" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2026" class="Symbol">(</a><a id="2027" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="2031" class="Symbol">{{</a><a id="2033" href="Ledger.Core.Specification.TokenAlgebra.Base.html#1272" class="Function">addValue</a><a id="2041" class="Symbol">}}</a> <a id="2044" href="Test.Examples.MultiSig.OffChain.Open.html#1052" class="Bound">w</a> <a id="2046" href="Test.Examples.MultiSig.OffChain.Open.html#1049" class="Bound">id</a><a id="2048" class="Symbol">))</a> <a id="2051" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2053" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2055" class="Symbol">)</a> <a id="2057" class="Symbol">;</a>
                                <a id="2091" class="Comment">-- signature now is first number + txId ≡ second number</a>
                                <a id="2179" class="Comment">-- first number is needs to be the id for the script</a>
                                <a id="2264" href="Ledger.Conway.Specification.Transaction.html#4492" class="Field">scripts</a> <a id="2272" class="Symbol">=</a> <a id="2274" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2276" class="Symbol">;</a> <a id="2278" class="Comment">-- Ledger.Prelude.fromList ((inj₂ script) ∷ []) ;</a>
                                <a id="2360" href="Ledger.Conway.Specification.Transaction.html#4518" class="Field">txdats</a> <a id="2367" class="Symbol">=</a> <a id="2369" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2371" class="Symbol">;</a> <a id="2373" class="Comment">-- fromListᵐ ((inj₁ (inj₁ Holding) , (inj₁ (inj₁ Holding))) ∷ []) ;</a>
                                <a id="2473" href="Ledger.Conway.Specification.Transaction.html#4543" class="Field">txrdmrs</a> <a id="2481" class="Symbol">=</a> <a id="2483" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2485" class="Symbol">}</a> <a id="2487" class="Symbol">;</a>
                                <a id="2521" class="Comment">{-
                                  ; --  fromListᵐ (((Propose , (proj₁ script)) ,
                                                 --                inj₁ (inj₂ Pay) ,
                                                    --            (5 , w)) ∷ []) } ; -}</a>
                <a id="2794" href="Ledger.Conway.Specification.Transaction.html#4753" class="Field">txsize</a> <a id="2801" class="Symbol">=</a> <a id="2803" class="Number">10</a> <a id="2806" class="Symbol">;</a>
                <a id="2824" href="Ledger.Conway.Specification.Transaction.html#4772" class="Field">isValid</a> <a id="2832" class="Symbol">=</a> <a id="2834" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2839" class="Symbol">;</a>
                <a id="2857" href="Ledger.Conway.Specification.Transaction.html#4794" class="Field">txAD</a> <a id="2862" class="Symbol">=</a> <a id="2864" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2872" class="Symbol">}</a>
</pre></body></html>