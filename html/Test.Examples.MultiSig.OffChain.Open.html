<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Test.Examples.MultiSig.OffChain.Open</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Test.Examples.MultiSig.OffChain.Open.html" class="Module">Test.Examples.MultiSig.OffChain.Open</a> <a id="69" class="Keyword">where</a>

<a id="76" class="Keyword">open</a> <a id="81" class="Keyword">import</a> <a id="88" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="103" class="Keyword">open</a> <a id="108" class="Keyword">import</a> <a id="115" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="156" class="Keyword">open</a> <a id="161" class="Keyword">import</a> <a id="168" href="Test.Examples.MultiSig.Datum.html" class="Module">Test.Examples.MultiSig.Datum</a>
<a id="197" class="Keyword">open</a> <a id="202" class="Keyword">import</a> <a id="209" href="Test.Examples.MultiSig.Validator.html" class="Module">Test.Examples.MultiSig.Validator</a>
<a id="242" class="Keyword">open</a> <a id="247" class="Keyword">import</a> <a id="254" href="Test.Examples.MultiSig.OffChain.Lib.html" class="Module">Test.Examples.MultiSig.OffChain.Lib</a>
<a id="290" class="Keyword">open</a> <a id="295" class="Keyword">import</a> <a id="302" href="Test.Prelude.html" class="Module">Test.Prelude</a> <a id="315" href="Test.Examples.MultiSig.Datum.html#642" class="Function">MultiSigData</a>
<a id="328" class="Keyword">open</a> <a id="333" class="Keyword">import</a> <a id="340" href="Test.SymbolicData.html" class="Module">Test.SymbolicData</a> <a id="358" href="Test.Examples.MultiSig.Datum.html#642" class="Function">MultiSigData</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Test.LedgerImplementation.html" class="Module">Test.LedgerImplementation</a> <a id="409" href="Test.SymbolicData.html#240" class="Function">SData</a> <a id="415" href="Test.SymbolicData.html#240" class="Function">SData</a>
<a id="421" class="Keyword">open</a> <a id="426" class="Keyword">import</a> <a id="433" href="Test.Lib.html" class="Module">Test.Lib</a> <a id="442" href="Test.SymbolicData.html#2904" class="Function">valContext</a>

<a id="454" class="Keyword">open</a> <a id="459" href="Ledger.Conway.Specification.Transaction.html#999" class="Module">TransactionStructure</a> <a id="480" href="Test.LedgerImplementation.html#4278" class="Function">SVTransactionStructure</a>
<a id="503" class="Keyword">open</a> <a id="508" href="Test.LedgerImplementation.html#1055" class="Module">Implementation</a>

<a id="openTxOut"></a><a id="524" href="Test.Examples.MultiSig.OffChain.Open.html#524" class="Function">openTxOut</a> <a id="534" class="Symbol">:</a> <a id="536" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a> <a id="542" class="Symbol">→</a> <a id="544" href="Test.LedgerImplementation.html#1449" class="Function">PlutusScript</a> <a id="557" class="Symbol">→</a> <a id="559" href="Ledger.Conway.Specification.Transaction.html#2821" class="Function">TxOut</a>
<a id="565" href="Test.Examples.MultiSig.OffChain.Open.html#524" class="Function">openTxOut</a> <a id="575" href="Test.Examples.MultiSig.OffChain.Open.html#575" class="Bound">v</a> <a id="577" href="Test.Examples.MultiSig.OffChain.Open.html#577" class="Bound">script</a> <a id="584" class="Symbol">=</a> <a id="586" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="591" class="Symbol">(</a><a id="592" class="Keyword">record</a> <a id="599" class="Symbol">{</a> <a id="601" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="605" class="Symbol">=</a> <a id="607" class="Number">0</a> <a id="609" class="Symbol">;</a>
                           <a id="638" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="642" class="Symbol">=</a> <a id="644" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="654" class="Symbol">(</a><a id="655" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="661" href="Test.Examples.MultiSig.OffChain.Open.html#577" class="Bound">script</a><a id="667" class="Symbol">)</a> <a id="669" class="Symbol">;</a>
                           <a id="698" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="704" class="Symbol">=</a> <a id="706" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="711" class="Symbol">(</a><a id="712" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="722" class="Symbol">(</a><a id="723" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="729" href="Test.Examples.MultiSig.OffChain.Open.html#577" class="Bound">script</a><a id="735" class="Symbol">))</a> <a id="738" class="Symbol">})</a>
                           <a id="768" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="770" href="Test.Examples.MultiSig.OffChain.Open.html#575" class="Bound">v</a>
                           <a id="799" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="801" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="806" class="Symbol">(</a><a id="807" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="812" class="Symbol">(</a><a id="813" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="818" class="Symbol">(</a><a id="819" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="824" href="Test.Examples.MultiSig.Datum.html#195" class="InductiveConstructor">Holding</a><a id="831" class="Symbol">)))</a> <a id="835" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="837" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="846" class="Comment">-- txid, wallet, value at script, script index</a>
<a id="openTx"></a><a id="893" href="Test.Examples.MultiSig.OffChain.Open.html#893" class="Function">openTx</a> <a id="900" class="Symbol">:</a> <a id="902" class="Symbol">(</a><a id="903" href="Test.Examples.MultiSig.OffChain.Open.html#903" class="Bound">id</a> <a id="906" href="Test.Examples.MultiSig.OffChain.Open.html#906" class="Bound">w</a> <a id="908" href="Test.Examples.MultiSig.OffChain.Open.html#908" class="Bound">v</a> <a id="910" href="Test.Examples.MultiSig.OffChain.Open.html#910" class="Bound">tw</a> <a id="913" class="Symbol">:</a> <a id="915" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="916" class="Symbol">)</a> <a id="918" class="Symbol">→</a> <a id="920" href="Test.LedgerImplementation.html#1449" class="Function">PlutusScript</a> <a id="933" class="Symbol">→</a> <a id="935" href="Ledger.Conway.Specification.Transaction.html#4865" class="Record">Tx</a>
<a id="938" href="Test.Examples.MultiSig.OffChain.Open.html#893" class="Function">openTx</a> <a id="945" href="Test.Examples.MultiSig.OffChain.Open.html#945" class="Bound">id</a> <a id="948" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a> <a id="950" href="Test.Examples.MultiSig.OffChain.Open.html#950" class="Bound">v</a> <a id="952" href="Test.Examples.MultiSig.OffChain.Open.html#952" class="Bound">tw</a> <a id="955" href="Test.Examples.MultiSig.OffChain.Open.html#955" class="Bound">script</a> <a id="962" class="Symbol">=</a> <a id="964" class="Keyword">record</a> <a id="971" class="Symbol">{</a> <a id="973" href="Ledger.Conway.Specification.Transaction.html#4897" class="Field">body</a> <a id="978" class="Symbol">=</a> <a id="980" class="Keyword">record</a> <a id="987" href="Test.Examples.MultiSig.OffChain.Lib.html#538" class="Function">defaultTxBody</a>
                         <a id="1026" class="Symbol">{</a> <a id="1028" href="Ledger.Conway.Specification.Transaction.html#3215" class="Field">txIns</a> <a id="1034" class="Symbol">=</a> <a id="1036" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="1060" class="Symbol">((</a><a id="1062" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a> <a id="1064" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1066" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a><a id="1067" class="Symbol">)</a> <a id="1069" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1071" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1073" class="Symbol">)</a>
                         <a id="1100" class="Symbol">;</a> <a id="1102" href="Ledger.Conway.Specification.Transaction.html#3323" class="Field">txOuts</a> <a id="1109" class="Symbol">=</a> <a id="1111" href="Test.Lib.html#5531" class="Function">fromListIx</a> <a id="1122" class="Symbol">((</a><a id="1124" href="Test.Examples.MultiSig.OffChain.Open.html#952" class="Bound">tw</a> <a id="1127" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1129" href="Test.Examples.MultiSig.OffChain.Open.html#524" class="Function">openTxOut</a> <a id="1139" href="Test.Examples.MultiSig.OffChain.Open.html#950" class="Bound">v</a> <a id="1141" href="Test.Examples.MultiSig.OffChain.Open.html#955" class="Bound">script</a><a id="1147" class="Symbol">)</a>
                                               <a id="1196" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1198" class="Symbol">(</a><a id="1199" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a>
                                                 <a id="1250" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1252" class="Symbol">((</a><a id="1254" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1259" class="Symbol">(</a><a id="1260" class="Keyword">record</a> <a id="1267" class="Symbol">{</a> <a id="1269" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="1273" class="Symbol">=</a> <a id="1275" class="Number">0</a> <a id="1277" class="Symbol">;</a>
                                                                    <a id="1347" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="1351" class="Symbol">=</a> <a id="1353" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1364" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a> <a id="1366" class="Symbol">;</a>
                                                                    <a id="1436" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="1442" class="Symbol">=</a> <a id="1444" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1449" class="Symbol">(</a><a id="1450" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1461" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a><a id="1462" class="Symbol">)</a> <a id="1464" class="Symbol">}))</a>
                                               <a id="1515" class="Comment">-- , 10000000000 , nothing , nothing))</a>
                                               <a id="1601" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1603" class="Symbol">((</a><a id="1605" class="Number">1000000000000</a> <a id="1619" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1621" class="Number">10000000000</a><a id="1632" class="Symbol">)</a> <a id="1634" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1636" href="Test.Examples.MultiSig.OffChain.Open.html#950" class="Bound">v</a><a id="1637" class="Symbol">)</a> <a id="1639" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1641" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1649" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1651" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1658" class="Symbol">))</a>
                                               <a id="1708" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1710" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1712" class="Symbol">)</a>
                         <a id="1739" class="Symbol">;</a> <a id="1741" href="Ledger.Conway.Specification.Transaction.html#3363" class="Field">txId</a> <a id="1746" class="Symbol">=</a> <a id="1748" href="Test.Examples.MultiSig.OffChain.Open.html#945" class="Bound">id</a>
                         <a id="1776" class="Symbol">;</a> <a id="1778" href="Ledger.Conway.Specification.Transaction.html#3287" class="Field">collateralInputs</a> <a id="1795" class="Symbol">=</a> <a id="1797" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="1821" class="Symbol">((</a><a id="1823" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a> <a id="1825" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1827" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a><a id="1828" class="Symbol">)</a> <a id="1830" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1832" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1834" class="Symbol">)</a>
                         <a id="1861" class="Symbol">}</a> <a id="1863" class="Symbol">;</a>
                <a id="1881" href="Ledger.Conway.Specification.Transaction.html#4921" class="Field">wits</a> <a id="1886" class="Symbol">=</a> <a id="1888" class="Keyword">record</a> <a id="1895" class="Symbol">{</a> <a id="1897" href="Ledger.Conway.Specification.Transaction.html#4661" class="Field">vkSigs</a> <a id="1904" class="Symbol">=</a> <a id="1906" href="Axiom.Set.Map.html#2713" class="Function">fromListᵐ</a> <a id="1916" class="Symbol">((</a><a id="1918" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a> <a id="1920" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1922" class="Symbol">(</a><a id="1923" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="1927" class="Symbol">{{</a><a id="1929" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1274" class="Function">addValue</a><a id="1937" class="Symbol">}}</a> <a id="1940" href="Test.Examples.MultiSig.OffChain.Open.html#948" class="Bound">w</a> <a id="1942" href="Test.Examples.MultiSig.OffChain.Open.html#945" class="Bound">id</a><a id="1944" class="Symbol">))</a> <a id="1947" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1949" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1951" class="Symbol">)</a> <a id="1953" class="Symbol">;</a>
                                <a id="1987" class="Comment">-- signature now is first number + txId ≡ second number</a>
                                <a id="2075" class="Comment">-- first number is needs to be the id for the script</a>
                                <a id="2160" href="Ledger.Conway.Specification.Transaction.html#4689" class="Field">scripts</a> <a id="2168" class="Symbol">=</a> <a id="2170" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2172" class="Symbol">;</a> <a id="2174" class="Comment">-- Ledger.Prelude.fromList ((inj₂ script) ∷ []) ;</a>
                                <a id="2256" href="Ledger.Conway.Specification.Transaction.html#4715" class="Field">txdats</a> <a id="2263" class="Symbol">=</a> <a id="2265" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2267" class="Symbol">;</a> <a id="2269" class="Comment">-- fromListᵐ ((inj₁ (inj₁ Holding) , (inj₁ (inj₁ Holding))) ∷ []) ;</a>
                                <a id="2369" href="Ledger.Conway.Specification.Transaction.html#4740" class="Field">txrdmrs</a> <a id="2377" class="Symbol">=</a> <a id="2379" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2381" class="Symbol">}</a> <a id="2383" class="Symbol">;</a>
                                <a id="2417" class="Comment">{-
                                  ; --  fromListᵐ (((Propose , (proj₁ script)) ,
                                                 --                inj₁ (inj₂ Pay) ,
                                                    --            (5 , w)) ∷ []) } ; -}</a>
                <a id="2690" href="Ledger.Conway.Specification.Transaction.html#4950" class="Field">txsize</a> <a id="2697" class="Symbol">=</a> <a id="2699" class="Number">10</a> <a id="2702" class="Symbol">;</a>
                <a id="2720" href="Ledger.Conway.Specification.Transaction.html#4969" class="Field">isValid</a> <a id="2728" class="Symbol">=</a> <a id="2730" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2735" class="Symbol">;</a>
                <a id="2753" href="Ledger.Conway.Specification.Transaction.html#4991" class="Field">txAD</a> <a id="2758" class="Symbol">=</a> <a id="2760" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2768" class="Symbol">}</a>
</pre></body></html>