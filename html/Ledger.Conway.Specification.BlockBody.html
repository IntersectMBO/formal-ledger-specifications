<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.BlockBody</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Core.Specification.Abstract.html" class="Module">Ledger.Core.Specification.Abstract</a>
<a id="73" class="Keyword">open</a> <a id="78" class="Keyword">import</a> <a id="85" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="126" class="Keyword">module</a> <a id="133" href="Ledger.Conway.Specification.BlockBody.html" class="Module">Ledger.Conway.Specification.BlockBody</a>
  <a id="173" class="Symbol">(</a><a id="174" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a> <a id="178" class="Symbol">:</a> <a id="180" href="Ledger.Conway.Specification.Transaction.html#991" class="Record">TransactionStructure</a><a id="200" class="Symbol">)</a> <a id="202" class="Symbol">(</a><a id="203" class="Keyword">open</a> <a id="208" href="Ledger.Conway.Specification.Transaction.html#991" class="Module">TransactionStructure</a> <a id="229" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a><a id="232" class="Symbol">)</a>
  <a id="236" class="Symbol">(</a><a id="237" href="Ledger.Conway.Specification.BlockBody.html#237" class="Bound">abs</a> <a id="241" class="Symbol">:</a> <a id="243" href="Ledger.Core.Specification.Abstract.html#828" class="Record">AbstractFunctions</a> <a id="261" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a><a id="264" class="Symbol">)</a>
  <a id="268" class="Keyword">where</a>

<a id="275" class="Keyword">open</a> <a id="280" class="Keyword">import</a> <a id="287" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="349" href="Ledger.Conway.Specification.Transaction.html#2065" class="Function">govStructure</a>
<a id="362" class="Keyword">open</a> <a id="367" class="Keyword">import</a> <a id="374" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="409" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a> <a id="413" href="Ledger.Conway.Specification.BlockBody.html#237" class="Bound">abs</a>
<a id="417" class="Keyword">open</a> <a id="422" class="Keyword">import</a> <a id="429" href="Ledger.Conway.Specification.Rewards.html" class="Module">Ledger.Conway.Specification.Rewards</a> <a id="465" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a> <a id="469" href="Ledger.Conway.Specification.BlockBody.html#237" class="Bound">abs</a>
<a id="473" class="Keyword">open</a> <a id="478" class="Keyword">import</a> <a id="485" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>


<a id="527" class="Keyword">record</a> <a id="BHBody"></a><a id="534" href="Ledger.Conway.Specification.BlockBody.html#534" class="Record">BHBody</a> <a id="541" class="Symbol">:</a> <a id="543" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="548" class="Keyword">where</a>
  <a id="556" class="Keyword">field</a>
    <a id="BHBody.bvkcold"></a><a id="566" href="Ledger.Conway.Specification.BlockBody.html#566" class="Field">bvkcold</a> <a id="574" class="Symbol">:</a> <a id="576" href="Ledger.Core.Specification.Crypto.html#650" class="Function">VKey</a>
    <a id="BHBody.bsize"></a><a id="585" href="Ledger.Conway.Specification.BlockBody.html#585" class="Field">bsize</a>   <a id="593" class="Symbol">:</a> <a id="595" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
    <a id="BHBody.slot"></a><a id="601" href="Ledger.Conway.Specification.BlockBody.html#601" class="Field">slot</a>    <a id="609" class="Symbol">:</a> <a id="611" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="BHBody.bhash"></a><a id="620" href="Ledger.Conway.Specification.BlockBody.html#620" class="Field">bhash</a>   <a id="628" class="Symbol">:</a> <a id="630" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
    <a id="BHBody.hBbsize"></a><a id="642" href="Ledger.Conway.Specification.BlockBody.html#642" class="Field">hBbsize</a> <a id="650" class="Symbol">:</a> <a id="652" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="655" class="Keyword">record</a> <a id="BHeader"></a><a id="662" href="Ledger.Conway.Specification.BlockBody.html#662" class="Record">BHeader</a> <a id="670" class="Symbol">:</a> <a id="672" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="677" class="Keyword">where</a>
  <a id="685" class="Keyword">field</a>
    <a id="BHeader.bhbody"></a><a id="695" href="Ledger.Conway.Specification.BlockBody.html#695" class="Field">bhbody</a> <a id="702" class="Symbol">:</a> <a id="704" href="Ledger.Conway.Specification.BlockBody.html#534" class="Record">BHBody</a>
    <a id="BHeader.bhsig"></a><a id="715" href="Ledger.Conway.Specification.BlockBody.html#715" class="Field">bhsig</a>  <a id="722" class="Symbol">:</a> <a id="724" href="Ledger.Core.Specification.Crypto.html#655" class="Function">Sig</a>

<a id="729" class="Keyword">record</a> <a id="Block"></a><a id="736" href="Ledger.Conway.Specification.BlockBody.html#736" class="Record">Block</a> <a id="742" class="Symbol">:</a> <a id="744" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="749" class="Keyword">where</a>
  <a id="757" class="Keyword">field</a>
    <a id="Block.bheader"></a><a id="767" href="Ledger.Conway.Specification.BlockBody.html#767" class="Field">bheader</a>     <a id="779" class="Symbol">:</a> <a id="781" href="Ledger.Conway.Specification.BlockBody.html#662" class="Record">BHeader</a>
    <a id="Block.ts"></a><a id="793" href="Ledger.Conway.Specification.BlockBody.html#793" class="Field">ts</a>          <a id="805" class="Symbol">:</a> <a id="807" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="812" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a>
    <a id="Block.bBodySize"></a><a id="819" href="Ledger.Conway.Specification.BlockBody.html#819" class="Field">bBodySize</a>   <a id="831" class="Symbol">:</a> <a id="833" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
    <a id="Block.bBodyHash"></a><a id="839" href="Ledger.Conway.Specification.BlockBody.html#839" class="Field">bBodyHash</a>   <a id="851" class="Symbol">:</a> <a id="853" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
    <a id="Block.≡-bBodySize"></a><a id="865" href="Ledger.Conway.Specification.BlockBody.html#865" class="Field">≡-bBodySize</a> <a id="877" class="Symbol">:</a> <a id="879" href="Ledger.Conway.Specification.BlockBody.html#819" class="Field">bBodySize</a> <a id="889" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="891" href="Ledger.Conway.Specification.BlockBody.html#642" class="Field">BHBody.hBbsize</a> <a id="906" class="Symbol">(</a><a id="907" href="Ledger.Conway.Specification.BlockBody.html#695" class="Field">BHeader.bhbody</a> <a id="922" href="Ledger.Conway.Specification.BlockBody.html#767" class="Field">bheader</a><a id="929" class="Symbol">)</a>
    <a id="Block.≡-bBodyHash"></a><a id="935" href="Ledger.Conway.Specification.BlockBody.html#935" class="Field">≡-bBodyHash</a> <a id="947" class="Symbol">:</a> <a id="949" href="Ledger.Conway.Specification.BlockBody.html#839" class="Field">bBodyHash</a> <a id="959" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="961" href="Ledger.Conway.Specification.BlockBody.html#620" class="Field">BHBody.bhash</a> <a id="974" class="Symbol">(</a><a id="975" href="Ledger.Conway.Specification.BlockBody.html#695" class="Field">BHeader.bhbody</a> <a id="990" href="Ledger.Conway.Specification.BlockBody.html#767" class="Field">bheader</a><a id="997" class="Symbol">)</a>


<a id="BBodyEnv"></a><a id="1001" href="Ledger.Conway.Specification.BlockBody.html#1001" class="Function">BBodyEnv</a> <a id="1010" class="Symbol">:</a> <a id="1012" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1017" href="Ledger.Conway.Specification.BlockBody.html#1001" class="Function">BBodyEnv</a> <a id="1026" class="Symbol">=</a> <a id="1028" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a> <a id="1039" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1041" href="Ledger.Conway.Specification.PParams.html#718" class="Record">Acnt</a>

<a id="BBodyState"></a><a id="1047" href="Ledger.Conway.Specification.BlockBody.html#1047" class="Function">BBodyState</a> <a id="1058" class="Symbol">:</a> <a id="1060" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1065" href="Ledger.Conway.Specification.BlockBody.html#1047" class="Function">BBodyState</a> <a id="1076" class="Symbol">=</a> <a id="1078" href="Ledger.Conway.Specification.Ledger.html#991" class="Record">LState</a> <a id="1085" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1087" href="Ledger.Conway.Specification.Rewards.html#4923" class="Function">BlocksMade</a>

<a id="incrBlocks"></a><a id="1099" href="Ledger.Conway.Specification.BlockBody.html#1099" class="Function">incrBlocks</a> <a id="1110" class="Symbol">:</a> <a id="1112" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a> <a id="1120" class="Symbol">→</a> <a id="1122" href="Ledger.Conway.Specification.Rewards.html#4923" class="Function">BlocksMade</a> <a id="1133" class="Symbol">→</a> <a id="1135" href="Ledger.Conway.Specification.Rewards.html#4923" class="Function">BlocksMade</a>
<a id="1146" href="Ledger.Conway.Specification.BlockBody.html#1099" class="Function">incrBlocks</a> <a id="1157" href="Ledger.Conway.Specification.BlockBody.html#1157" class="Bound">hk</a> <a id="1160" href="Ledger.Conway.Specification.BlockBody.html#1160" class="Bound">b</a> <a id="1162" class="Symbol">=</a> <a id="1164" href="Ledger.Conway.Specification.BlockBody.html#1160" class="Bound">b</a> <a id="1166" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="1169" href="Axiom.Set.Map.html#5483" class="Function">singletonᵐ</a> <a id="1180" href="Ledger.Conway.Specification.BlockBody.html#1157" class="Bound">hk</a> <a id="1183" class="Number">1</a>

<a id="1186" class="Keyword">data</a> <a id="_⊢_⇀⦇_,BBODY⦈_"></a><a id="1191" href="Ledger.Conway.Specification.BlockBody.html#1191" class="Datatype Operator">_⊢_⇀⦇_,BBODY⦈_</a>
  <a id="1208" class="Symbol">:</a> <a id="1210" href="Ledger.Conway.Specification.BlockBody.html#1001" class="Function">BBodyEnv</a> <a id="1219" class="Symbol">→</a> <a id="1221" href="Ledger.Conway.Specification.BlockBody.html#1047" class="Function">BBodyState</a> <a id="1232" class="Symbol">→</a> <a id="1234" href="Ledger.Conway.Specification.BlockBody.html#736" class="Record">Block</a> <a id="1240" class="Symbol">→</a> <a id="1242" href="Ledger.Conway.Specification.BlockBody.html#1047" class="Function">BBodyState</a> <a id="1253" class="Symbol">→</a> <a id="1255" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1260" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,BBODY⦈_.BBODY-Block-Body"></a><a id="1269" href="Ledger.Conway.Specification.BlockBody.html#1269" class="InductiveConstructor">BBODY-Block-Body</a> <a id="1286" class="Symbol">:</a> <a id="1288" class="Symbol">∀</a> <a id="1290" class="Symbol">{</a><a id="1291" href="Ledger.Conway.Specification.BlockBody.html#1291" class="Bound">acnt</a> <a id="1296" href="Ledger.Conway.Specification.BlockBody.html#1296" class="Bound">ls</a> <a id="1299" href="Ledger.Conway.Specification.BlockBody.html#1299" class="Bound">ls&#39;</a> <a id="1303" href="Ledger.Conway.Specification.BlockBody.html#1303" class="Bound">b</a> <a id="1305" href="Ledger.Conway.Specification.BlockBody.html#1305" class="Bound">block</a> <a id="1311" href="Ledger.Conway.Specification.BlockBody.html#1311" class="Bound">es</a><a id="1313" class="Symbol">}</a> <a id="1315" class="Symbol">→</a>
    <a id="1321" class="Keyword">let</a>
      <a id="1331" class="Keyword">open</a> <a id="1336" href="Ledger.Conway.Specification.BlockBody.html#662" class="Module">BHeader</a>
      <a id="1350" class="Keyword">open</a> <a id="1355" href="Ledger.Conway.Specification.BlockBody.html#534" class="Module">BHBody</a>
      <a id="1368" class="Keyword">open</a> <a id="1373" href="Ledger.Conway.Specification.BlockBody.html#736" class="Module">Block</a>
      <a id="1385" class="Keyword">open</a> <a id="1390" href="Ledger.Conway.Specification.Enact.html#444" class="Module">EnactState</a>
      <a id="1407" href="Ledger.Conway.Specification.BlockBody.html#1407" class="Bound">txs</a> <a id="1411" class="Symbol">=</a> <a id="1413" href="Ledger.Conway.Specification.BlockBody.html#1305" class="Bound">block</a> <a id="1419" class="Symbol">.</a><a id="1420" href="Ledger.Conway.Specification.BlockBody.html#793" class="Field">ts</a>
      <a id="1429" href="Ledger.Conway.Specification.BlockBody.html#1429" class="Bound">bhb</a> <a id="1433" class="Symbol">=</a> <a id="1435" href="Ledger.Conway.Specification.BlockBody.html#1305" class="Bound">block</a> <a id="1441" class="Symbol">.</a><a id="1442" href="Ledger.Conway.Specification.BlockBody.html#767" class="Field">bheader</a> <a id="1450" class="Symbol">.</a><a id="1451" href="Ledger.Conway.Specification.BlockBody.html#695" class="Field">bhbody</a>
      <a id="1464" href="Ledger.Conway.Specification.BlockBody.html#1464" class="Bound">hk</a> <a id="1467" class="Symbol">=</a> <a id="1469" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="1474" class="Symbol">(</a><a id="1475" href="Ledger.Conway.Specification.BlockBody.html#1429" class="Bound">bhb</a> <a id="1479" class="Symbol">.</a><a id="1480" href="Ledger.Conway.Specification.BlockBody.html#566" class="Field">bvkcold</a><a id="1487" class="Symbol">)</a>
      <a id="1495" href="Ledger.Conway.Specification.BlockBody.html#1495" class="Bound">pp</a> <a id="1498" class="Symbol">=</a> <a id="1500" href="Ledger.Conway.Specification.PParams.html#3542" class="Field">PParamsOf</a> <a id="1510" href="Ledger.Conway.Specification.BlockBody.html#1311" class="Bound">es</a>
      <a id="1519" href="Ledger.Conway.Specification.BlockBody.html#1519" class="Bound">Γ</a>  <a id="1522" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.BlockBody.html#1429}{\htmlId{1526}{\htmlClass{Bound}{\text{bhb}}}}\, \,\htmlId{1530}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.BlockBody.html#601}{\htmlId{1531}{\htmlClass{Field}{\text{slot}}}}\, \\ \,\href{Ledger.Prelude.html#2302}{\htmlId{1538}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.BlockBody.html#1311}{\htmlId{1540}{\htmlClass{Bound}{\text{es}}}}\, \,\htmlId{1543}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Enact.html#549}{\htmlId{1544}{\htmlClass{Field}{\text{constitution}}}}\, \,\href{Ledger.Prelude.html#2302}{\htmlId{1557}{\htmlClass{Function Operator}{\text{∣}}}}\, \\ \,\href{Ledger.Conway.Specification.BlockBody.html#1495}{\htmlId{1561}{\htmlClass{Bound}{\text{pp}}}}\, \\ \,\href{Ledger.Conway.Specification.BlockBody.html#1311}{\htmlId{1566}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Ledger.Prelude.Base.html#889}{\htmlId{1571}{\htmlClass{Field}{\text{TreasuryOf}}}}\, \,\href{Ledger.Conway.Specification.BlockBody.html#1291}{\htmlId{1582}{\htmlClass{Bound}{\text{acnt}}}}\, \end{pmatrix}$</a>

     <a id="1595" class="Keyword">in</a>
    <a id="1602" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="1604" href="Ledger.Conway.Specification.BlockBody.html#1305" class="Bound">block</a> <a id="1610" class="Symbol">.</a><a id="1611" href="Ledger.Conway.Specification.BlockBody.html#819" class="Field">bBodySize</a> <a id="1621" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1623" href="Ledger.Conway.Specification.BlockBody.html#1429" class="Bound">bhb</a> <a id="1627" class="Symbol">.</a><a id="1628" href="Ledger.Conway.Specification.BlockBody.html#642" class="Field">hBbsize</a>
    <a id="1640" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="1642" href="Ledger.Conway.Specification.BlockBody.html#1305" class="Bound">block</a> <a id="1648" class="Symbol">.</a><a id="1649" href="Ledger.Conway.Specification.BlockBody.html#839" class="Field">bBodyHash</a> <a id="1659" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1661" href="Ledger.Conway.Specification.BlockBody.html#1429" class="Bound">bhb</a> <a id="1665" class="Symbol">.</a><a id="1666" href="Ledger.Conway.Specification.BlockBody.html#620" class="Field">bhash</a>
    <a id="1676" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="1678" href="Ledger.Conway.Specification.BlockBody.html#1519" class="Bound">Γ</a> <a id="1680" href="Ledger.Conway.Specification.Ledger.html#4908" class="Function Operator">⊢</a> <a id="1682" href="Ledger.Conway.Specification.BlockBody.html#1296" class="Bound">ls</a> <a id="1685" href="Ledger.Conway.Specification.Ledger.html#4908" class="Function Operator">⇀⦇</a> <a id="1688" href="Ledger.Conway.Specification.BlockBody.html#1407" class="Bound">txs</a> <a id="1692" href="Ledger.Conway.Specification.Ledger.html#4908" class="Function Operator">,LEDGERS⦈</a> <a id="1702" href="Ledger.Conway.Specification.BlockBody.html#1299" class="Bound">ls&#39;</a>
    <a id="1710" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
    <a id="1747" class="Symbol">(</a><a id="1748" href="Ledger.Conway.Specification.BlockBody.html#1311" class="Bound">es</a> <a id="1751" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1753" href="Ledger.Conway.Specification.BlockBody.html#1291" class="Bound">acnt</a><a id="1757" class="Symbol">)</a> <a id="1759" href="Ledger.Conway.Specification.BlockBody.html#1191" class="Datatype Operator">⊢</a> <a id="1761" href="Ledger.Conway.Specification.BlockBody.html#1296" class="Bound">ls</a> <a id="1764" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1766" href="Ledger.Conway.Specification.BlockBody.html#1303" class="Bound">b</a> <a id="1768" href="Ledger.Conway.Specification.BlockBody.html#1191" class="Datatype Operator">⇀⦇</a> <a id="1771" href="Ledger.Conway.Specification.BlockBody.html#1305" class="Bound">block</a> <a id="1777" href="Ledger.Conway.Specification.BlockBody.html#1191" class="Datatype Operator">,BBODY⦈</a> <a id="1785" class="Symbol">(</a><a id="1786" href="Ledger.Conway.Specification.BlockBody.html#1299" class="Bound">ls&#39;</a> <a id="1790" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1792" href="Ledger.Conway.Specification.BlockBody.html#1099" class="Function">incrBlocks</a> <a id="1803" href="Ledger.Conway.Specification.BlockBody.html#1464" class="Bound">hk</a> <a id="1806" href="Ledger.Conway.Specification.BlockBody.html#1303" class="Bound">b</a><a id="1807" class="Symbol">)</a>

</pre></body></html>