<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.BlockBody</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="75" class="Keyword">open</a> <a id="80" class="Keyword">import</a> <a id="87" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a>

<a id="126" class="Keyword">module</a> <a id="133" href="Ledger.Conway.Specification.BlockBody.html" class="Module">Ledger.Conway.Specification.BlockBody</a>
  <a id="173" class="Symbol">(</a><a id="174" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a> <a id="178" class="Symbol">:</a> <a id="180" href="Ledger.Core.Specification.Transaction.html#896" class="Record">TransactionStructure</a><a id="200" class="Symbol">)</a> <a id="202" class="Symbol">(</a><a id="203" class="Keyword">open</a> <a id="208" href="Ledger.Core.Specification.Transaction.html#896" class="Module">TransactionStructure</a> <a id="229" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a><a id="232" class="Symbol">)</a>
  <a id="236" class="Symbol">(</a><a id="237" href="Ledger.Conway.Specification.BlockBody.html#237" class="Bound">abs</a> <a id="241" class="Symbol">:</a> <a id="243" href="Ledger.Conway.Specification.Abstract.html#653" class="Record">AbstractFunctions</a> <a id="261" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a><a id="264" class="Symbol">)</a>
  <a id="268" class="Keyword">where</a>

<a id="275" class="Keyword">open</a> <a id="280" class="Keyword">import</a> <a id="287" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="349" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
<a id="362" class="Keyword">open</a> <a id="367" class="Keyword">import</a> <a id="374" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="409" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a> <a id="413" href="Ledger.Conway.Specification.BlockBody.html#237" class="Bound">abs</a>
<a id="417" class="Keyword">open</a> <a id="422" class="Keyword">import</a> <a id="429" href="Ledger.Conway.Specification.Rewards.html" class="Module">Ledger.Conway.Specification.Rewards</a> <a id="465" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a> <a id="469" href="Ledger.Conway.Specification.BlockBody.html#237" class="Bound">abs</a>
<a id="473" class="Keyword">open</a> <a id="478" class="Keyword">import</a> <a id="485" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a> <a id="525" href="Ledger.Conway.Specification.BlockBody.html#174" class="Bound">txs</a> <a id="529" href="Ledger.Conway.Specification.BlockBody.html#237" class="Bound">abs</a>


<a id="535" class="Keyword">record</a> <a id="BHBody"></a><a id="542" href="Ledger.Conway.Specification.BlockBody.html#542" class="Record">BHBody</a> <a id="549" class="Symbol">:</a> <a id="551" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="556" class="Keyword">where</a>
  <a id="564" class="Keyword">field</a>
    <a id="BHBody.bvkcold"></a><a id="574" href="Ledger.Conway.Specification.BlockBody.html#574" class="Field">bvkcold</a> <a id="582" class="Symbol">:</a> <a id="584" href="Ledger.Core.Specification.Crypto.html#650" class="Function">VKey</a>
    <a id="BHBody.bsize"></a><a id="593" href="Ledger.Conway.Specification.BlockBody.html#593" class="Field">bsize</a>   <a id="601" class="Symbol">:</a> <a id="603" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
    <a id="BHBody.slot"></a><a id="609" href="Ledger.Conway.Specification.BlockBody.html#609" class="Field">slot</a>    <a id="617" class="Symbol">:</a> <a id="619" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="BHBody.bhash"></a><a id="628" href="Ledger.Conway.Specification.BlockBody.html#628" class="Field">bhash</a>   <a id="636" class="Symbol">:</a> <a id="638" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
    <a id="BHBody.hBbsize"></a><a id="650" href="Ledger.Conway.Specification.BlockBody.html#650" class="Field">hBbsize</a> <a id="658" class="Symbol">:</a> <a id="660" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="663" class="Keyword">record</a> <a id="BHeader"></a><a id="670" href="Ledger.Conway.Specification.BlockBody.html#670" class="Record">BHeader</a> <a id="678" class="Symbol">:</a> <a id="680" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="685" class="Keyword">where</a>
  <a id="693" class="Keyword">field</a>
    <a id="BHeader.bhbody"></a><a id="703" href="Ledger.Conway.Specification.BlockBody.html#703" class="Field">bhbody</a> <a id="710" class="Symbol">:</a> <a id="712" href="Ledger.Conway.Specification.BlockBody.html#542" class="Record">BHBody</a>
    <a id="BHeader.bhsig"></a><a id="723" href="Ledger.Conway.Specification.BlockBody.html#723" class="Field">bhsig</a>  <a id="730" class="Symbol">:</a> <a id="732" href="Ledger.Core.Specification.Crypto.html#655" class="Function">Sig</a>

<a id="737" class="Keyword">record</a> <a id="Block"></a><a id="744" href="Ledger.Conway.Specification.BlockBody.html#744" class="Record">Block</a> <a id="750" class="Symbol">:</a> <a id="752" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="757" class="Keyword">where</a>
  <a id="765" class="Keyword">field</a>
    <a id="Block.bheader"></a><a id="775" href="Ledger.Conway.Specification.BlockBody.html#775" class="Field">bheader</a>     <a id="787" class="Symbol">:</a> <a id="789" href="Ledger.Conway.Specification.BlockBody.html#670" class="Record">BHeader</a>
    <a id="Block.ts"></a><a id="801" href="Ledger.Conway.Specification.BlockBody.html#801" class="Field">ts</a>          <a id="813" class="Symbol">:</a> <a id="815" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="820" href="Ledger.Conway.Specification.Transaction.html#1721" class="Record">Tx</a>
    <a id="Block.bBodySize"></a><a id="827" href="Ledger.Conway.Specification.BlockBody.html#827" class="Field">bBodySize</a>   <a id="839" class="Symbol">:</a> <a id="841" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
    <a id="Block.bBodyHash"></a><a id="847" href="Ledger.Conway.Specification.BlockBody.html#847" class="Field">bBodyHash</a>   <a id="859" class="Symbol">:</a> <a id="861" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
    <a id="Block.≡-bBodySize"></a><a id="873" href="Ledger.Conway.Specification.BlockBody.html#873" class="Field">≡-bBodySize</a> <a id="885" class="Symbol">:</a> <a id="887" href="Ledger.Conway.Specification.BlockBody.html#827" class="Field">bBodySize</a> <a id="897" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="899" href="Ledger.Conway.Specification.BlockBody.html#650" class="Field">BHBody.hBbsize</a> <a id="914" class="Symbol">(</a><a id="915" href="Ledger.Conway.Specification.BlockBody.html#703" class="Field">BHeader.bhbody</a> <a id="930" href="Ledger.Conway.Specification.BlockBody.html#775" class="Field">bheader</a><a id="937" class="Symbol">)</a>
    <a id="Block.≡-bBodyHash"></a><a id="943" href="Ledger.Conway.Specification.BlockBody.html#943" class="Field">≡-bBodyHash</a> <a id="955" class="Symbol">:</a> <a id="957" href="Ledger.Conway.Specification.BlockBody.html#847" class="Field">bBodyHash</a> <a id="967" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="969" href="Ledger.Conway.Specification.BlockBody.html#628" class="Field">BHBody.bhash</a> <a id="982" class="Symbol">(</a><a id="983" href="Ledger.Conway.Specification.BlockBody.html#703" class="Field">BHeader.bhbody</a> <a id="998" href="Ledger.Conway.Specification.BlockBody.html#775" class="Field">bheader</a><a id="1005" class="Symbol">)</a>


<a id="BBodyEnv"></a><a id="1009" href="Ledger.Conway.Specification.BlockBody.html#1009" class="Function">BBodyEnv</a> <a id="1018" class="Symbol">:</a> <a id="1020" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1025" href="Ledger.Conway.Specification.BlockBody.html#1009" class="Function">BBodyEnv</a> <a id="1034" class="Symbol">=</a> <a id="1036" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a> <a id="1047" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1049" href="Ledger.Conway.Specification.PParams.html#718" class="Record">Acnt</a>

<a id="BBodyState"></a><a id="1055" href="Ledger.Conway.Specification.BlockBody.html#1055" class="Function">BBodyState</a> <a id="1066" class="Symbol">:</a> <a id="1068" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1073" href="Ledger.Conway.Specification.BlockBody.html#1055" class="Function">BBodyState</a> <a id="1084" class="Symbol">=</a> <a id="1086" href="Ledger.Conway.Specification.Ledger.html#999" class="Record">LState</a> <a id="1093" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1095" href="Ledger.Conway.Specification.Rewards.html#4933" class="Function">BlocksMade</a>

<a id="incrBlocks"></a><a id="1107" href="Ledger.Conway.Specification.BlockBody.html#1107" class="Function">incrBlocks</a> <a id="1118" class="Symbol">:</a> <a id="1120" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a> <a id="1128" class="Symbol">→</a> <a id="1130" href="Ledger.Conway.Specification.Rewards.html#4933" class="Function">BlocksMade</a> <a id="1141" class="Symbol">→</a> <a id="1143" href="Ledger.Conway.Specification.Rewards.html#4933" class="Function">BlocksMade</a>
<a id="1154" href="Ledger.Conway.Specification.BlockBody.html#1107" class="Function">incrBlocks</a> <a id="1165" href="Ledger.Conway.Specification.BlockBody.html#1165" class="Bound">hk</a> <a id="1168" href="Ledger.Conway.Specification.BlockBody.html#1168" class="Bound">b</a> <a id="1170" class="Symbol">=</a> <a id="1172" href="Ledger.Conway.Specification.BlockBody.html#1168" class="Bound">b</a> <a id="1174" href="Axiom.Set.Map.Dec.html#2052" class="Function Operator">∪⁺</a> <a id="1177" href="Axiom.Set.Map.html#5481" class="Function">singletonᵐ</a> <a id="1188" href="Ledger.Conway.Specification.BlockBody.html#1165" class="Bound">hk</a> <a id="1191" class="Number">1</a>

<a id="1194" class="Keyword">data</a> <a id="_⊢_⇀⦇_,BBODY⦈_"></a><a id="1199" href="Ledger.Conway.Specification.BlockBody.html#1199" class="Datatype Operator">_⊢_⇀⦇_,BBODY⦈_</a>
  <a id="1216" class="Symbol">:</a> <a id="1218" href="Ledger.Conway.Specification.BlockBody.html#1009" class="Function">BBodyEnv</a> <a id="1227" class="Symbol">→</a> <a id="1229" href="Ledger.Conway.Specification.BlockBody.html#1055" class="Function">BBodyState</a> <a id="1240" class="Symbol">→</a> <a id="1242" href="Ledger.Conway.Specification.BlockBody.html#744" class="Record">Block</a> <a id="1248" class="Symbol">→</a> <a id="1250" href="Ledger.Conway.Specification.BlockBody.html#1055" class="Function">BBodyState</a> <a id="1261" class="Symbol">→</a> <a id="1263" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1268" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,BBODY⦈_.BBODY-Block-Body"></a><a id="1277" href="Ledger.Conway.Specification.BlockBody.html#1277" class="InductiveConstructor">BBODY-Block-Body</a> <a id="1294" class="Symbol">:</a> <a id="1296" class="Symbol">∀</a> <a id="1298" class="Symbol">{</a><a id="1299" href="Ledger.Conway.Specification.BlockBody.html#1299" class="Bound">acnt</a> <a id="1304" href="Ledger.Conway.Specification.BlockBody.html#1304" class="Bound">ls</a> <a id="1307" href="Ledger.Conway.Specification.BlockBody.html#1307" class="Bound">ls&#39;</a> <a id="1311" href="Ledger.Conway.Specification.BlockBody.html#1311" class="Bound">b</a> <a id="1313" href="Ledger.Conway.Specification.BlockBody.html#1313" class="Bound">block</a> <a id="1319" href="Ledger.Conway.Specification.BlockBody.html#1319" class="Bound">es</a><a id="1321" class="Symbol">}</a> <a id="1323" class="Symbol">→</a>
    <a id="1329" class="Keyword">let</a>
      <a id="1339" class="Keyword">open</a> <a id="1344" href="Ledger.Conway.Specification.BlockBody.html#670" class="Module">BHeader</a>
      <a id="1358" class="Keyword">open</a> <a id="1363" href="Ledger.Conway.Specification.BlockBody.html#542" class="Module">BHBody</a>
      <a id="1376" class="Keyword">open</a> <a id="1381" href="Ledger.Conway.Specification.BlockBody.html#744" class="Module">Block</a>
      <a id="1393" class="Keyword">open</a> <a id="1398" href="Ledger.Conway.Specification.Enact.html#444" class="Module">EnactState</a>
      <a id="1415" href="Ledger.Conway.Specification.BlockBody.html#1415" class="Bound">txs</a> <a id="1419" class="Symbol">=</a> <a id="1421" href="Ledger.Conway.Specification.BlockBody.html#1313" class="Bound">block</a> <a id="1427" class="Symbol">.</a><a id="1428" href="Ledger.Conway.Specification.BlockBody.html#801" class="Field">ts</a>
      <a id="1437" href="Ledger.Conway.Specification.BlockBody.html#1437" class="Bound">bhb</a> <a id="1441" class="Symbol">=</a> <a id="1443" href="Ledger.Conway.Specification.BlockBody.html#1313" class="Bound">block</a> <a id="1449" class="Symbol">.</a><a id="1450" href="Ledger.Conway.Specification.BlockBody.html#775" class="Field">bheader</a> <a id="1458" class="Symbol">.</a><a id="1459" href="Ledger.Conway.Specification.BlockBody.html#703" class="Field">bhbody</a>
      <a id="1472" href="Ledger.Conway.Specification.BlockBody.html#1472" class="Bound">hk</a> <a id="1475" class="Symbol">=</a> <a id="1477" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="1482" class="Symbol">(</a><a id="1483" href="Ledger.Conway.Specification.BlockBody.html#1437" class="Bound">bhb</a> <a id="1487" class="Symbol">.</a><a id="1488" href="Ledger.Conway.Specification.BlockBody.html#574" class="Field">bvkcold</a><a id="1495" class="Symbol">)</a>
      <a id="1503" href="Ledger.Conway.Specification.BlockBody.html#1503" class="Bound">pp</a> <a id="1506" class="Symbol">=</a> <a id="1508" href="Ledger.Conway.Specification.PParams.html#3542" class="Field">PParamsOf</a> <a id="1518" href="Ledger.Conway.Specification.BlockBody.html#1319" class="Bound">es</a>
      <a id="1527" href="Ledger.Conway.Specification.BlockBody.html#1527" class="Bound">Γ</a>  <a id="1530" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.BlockBody.html#1437}{\htmlId{1534}{\htmlClass{Bound}{\text{bhb}}}}\, \,\htmlId{1538}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.BlockBody.html#609}{\htmlId{1539}{\htmlClass{Field}{\text{slot}}}}\, \\ \,\href{Ledger.Prelude.html#2302}{\htmlId{1546}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.BlockBody.html#1319}{\htmlId{1548}{\htmlClass{Bound}{\text{es}}}}\, \,\htmlId{1551}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Enact.html#549}{\htmlId{1552}{\htmlClass{Field}{\text{constitution}}}}\, \,\href{Ledger.Prelude.html#2302}{\htmlId{1565}{\htmlClass{Function Operator}{\text{∣}}}}\, \\ \,\href{Ledger.Conway.Specification.BlockBody.html#1503}{\htmlId{1569}{\htmlClass{Bound}{\text{pp}}}}\, \\ \,\href{Ledger.Conway.Specification.BlockBody.html#1319}{\htmlId{1574}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Ledger.Prelude.Base.html#889}{\htmlId{1579}{\htmlClass{Field}{\text{TreasuryOf}}}}\, \,\href{Ledger.Conway.Specification.BlockBody.html#1299}{\htmlId{1590}{\htmlClass{Bound}{\text{acnt}}}}\, \end{pmatrix}$</a>

     <a id="1603" class="Keyword">in</a>
    <a id="1610" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="1612" href="Ledger.Conway.Specification.BlockBody.html#1313" class="Bound">block</a> <a id="1618" class="Symbol">.</a><a id="1619" href="Ledger.Conway.Specification.BlockBody.html#827" class="Field">bBodySize</a> <a id="1629" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1631" href="Ledger.Conway.Specification.BlockBody.html#1437" class="Bound">bhb</a> <a id="1635" class="Symbol">.</a><a id="1636" href="Ledger.Conway.Specification.BlockBody.html#650" class="Field">hBbsize</a>
    <a id="1648" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="1650" href="Ledger.Conway.Specification.BlockBody.html#1313" class="Bound">block</a> <a id="1656" class="Symbol">.</a><a id="1657" href="Ledger.Conway.Specification.BlockBody.html#847" class="Field">bBodyHash</a> <a id="1667" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1669" href="Ledger.Conway.Specification.BlockBody.html#1437" class="Bound">bhb</a> <a id="1673" class="Symbol">.</a><a id="1674" href="Ledger.Conway.Specification.BlockBody.html#628" class="Field">bhash</a>
    <a id="1684" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="1686" href="Ledger.Conway.Specification.BlockBody.html#1527" class="Bound">Γ</a> <a id="1688" href="Ledger.Conway.Specification.Ledger.html#4916" class="Function Operator">⊢</a> <a id="1690" href="Ledger.Conway.Specification.BlockBody.html#1304" class="Bound">ls</a> <a id="1693" href="Ledger.Conway.Specification.Ledger.html#4916" class="Function Operator">⇀⦇</a> <a id="1696" href="Ledger.Conway.Specification.BlockBody.html#1415" class="Bound">txs</a> <a id="1700" href="Ledger.Conway.Specification.Ledger.html#4916" class="Function Operator">,LEDGERS⦈</a> <a id="1710" href="Ledger.Conway.Specification.BlockBody.html#1307" class="Bound">ls&#39;</a>
    <a id="1718" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
    <a id="1755" class="Symbol">(</a><a id="1756" href="Ledger.Conway.Specification.BlockBody.html#1319" class="Bound">es</a> <a id="1759" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1761" href="Ledger.Conway.Specification.BlockBody.html#1299" class="Bound">acnt</a><a id="1765" class="Symbol">)</a> <a id="1767" href="Ledger.Conway.Specification.BlockBody.html#1199" class="Datatype Operator">⊢</a> <a id="1769" href="Ledger.Conway.Specification.BlockBody.html#1304" class="Bound">ls</a> <a id="1772" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1774" href="Ledger.Conway.Specification.BlockBody.html#1311" class="Bound">b</a> <a id="1776" href="Ledger.Conway.Specification.BlockBody.html#1199" class="Datatype Operator">⇀⦇</a> <a id="1779" href="Ledger.Conway.Specification.BlockBody.html#1313" class="Bound">block</a> <a id="1785" href="Ledger.Conway.Specification.BlockBody.html#1199" class="Datatype Operator">,BBODY⦈</a> <a id="1793" class="Symbol">(</a><a id="1794" href="Ledger.Conway.Specification.BlockBody.html#1307" class="Bound">ls&#39;</a> <a id="1798" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1800" href="Ledger.Conway.Specification.BlockBody.html#1107" class="Function">incrBlocks</a> <a id="1811" href="Ledger.Conway.Specification.BlockBody.html#1472" class="Bound">hk</a> <a id="1814" href="Ledger.Conway.Specification.BlockBody.html#1311" class="Bound">b</a><a id="1815" class="Symbol">)</a>

</pre></body></html>