<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Core.Specification.Transaction</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>
<a id="25" class="Comment">--------------------------------------------------------------------------------</a>
<a id="106" class="Comment">-- NOTE: Everything in this module is part of TransactionStructure</a>
<a id="173" class="Comment">--------------------------------------------------------------------------------</a>
<a id="254" class="Keyword">module</a> <a id="261" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a> <a id="299" class="Keyword">where</a>

<a id="306" class="Keyword">import</a> <a id="313" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="329" class="Symbol">as</a> <a id="332" class="Module">M</a>

<a id="335" class="Keyword">open</a> <a id="340" class="Keyword">import</a> <a id="347" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="362" class="Keyword">renaming</a> <a id="371" class="Symbol">(</a><a id="372" href="abstract-set-theory.FiniteSetTheory.html#4041" class="Function">filterᵐ</a> <a id="380" class="Symbol">to</a> <a id="383" class="Function">filter</a><a id="389" class="Symbol">)</a>

<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Ledger.Core.Specification.Crypto.html" class="Module">Ledger.Core.Specification.Crypto</a>
<a id="437" class="Keyword">open</a> <a id="442" class="Keyword">import</a> <a id="449" href="Ledger.Core.Specification.Epoch.html" class="Module">Ledger.Core.Specification.Epoch</a>
<a id="481" class="Keyword">open</a> <a id="486" class="Keyword">import</a> <a id="493" href="Ledger.Core.Specification.Gov.Base.html" class="Module">Ledger.Core.Specification.Gov.Base</a>
<a id="528" class="Keyword">import</a> <a id="535" href="Ledger.Core.Specification.Gov.Actions.html" class="Module">Ledger.Core.Specification.Gov.Actions</a>
<a id="573" class="Keyword">import</a> <a id="580" href="Ledger.Core.Specification.Script.Base.html" class="Module">Ledger.Core.Specification.Script.Base</a>
<a id="618" class="Keyword">import</a> <a id="625" href="Ledger.Core.Specification.TokenAlgebra.Base.html" class="Module">Ledger.Core.Specification.TokenAlgebra.Base</a>
<a id="669" class="Keyword">import</a> <a id="676" href="Ledger.Core.Specification.Address.html" class="Module">Ledger.Core.Specification.Address</a>
<a id="710" class="Keyword">import</a> <a id="717" href="Ledger.Conway.Specification.PParams.html" class="Module">Ledger.Conway.Specification.PParams</a>

<a id="754" class="Keyword">data</a> <a id="Tag"></a><a id="759" href="Ledger.Core.Specification.Transaction.html#759" class="Datatype">Tag</a> <a id="763" class="Symbol">:</a> <a id="765" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="770" class="Keyword">where</a>
  <a id="Tag.Spend"></a><a id="778" href="Ledger.Core.Specification.Transaction.html#778" class="InductiveConstructor">Spend</a> <a id="Tag.Mint"></a><a id="784" href="Ledger.Core.Specification.Transaction.html#784" class="InductiveConstructor">Mint</a> <a id="Tag.Cert"></a><a id="789" href="Ledger.Core.Specification.Transaction.html#789" class="InductiveConstructor">Cert</a> <a id="Tag.Rewrd"></a><a id="794" href="Ledger.Core.Specification.Transaction.html#794" class="InductiveConstructor">Rewrd</a> <a id="Tag.Vote"></a><a id="800" href="Ledger.Core.Specification.Transaction.html#800" class="InductiveConstructor">Vote</a> <a id="Tag.Propose"></a><a id="805" href="Ledger.Core.Specification.Transaction.html#805" class="InductiveConstructor">Propose</a> <a id="813" class="Symbol">:</a> <a id="815" href="Ledger.Core.Specification.Transaction.html#759" class="Datatype">Tag</a>
<a id="819" class="Keyword">unquoteDecl</a> <a id="DecEq-Tag"></a><a id="831" href="Ledger.Core.Specification.Transaction.html#831" class="Function">DecEq-Tag</a> <a id="841" class="Symbol">=</a> <a id="843" href="Tactic.Derive.DecEq.html#5150" class="Function">derive-DecEq</a> <a id="856" class="Symbol">((</a><a id="858" class="Keyword">quote</a> <a id="864" href="Ledger.Core.Specification.Transaction.html#759" class="Datatype">Tag</a> <a id="868" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="870" href="Ledger.Core.Specification.Transaction.html#831" class="Function">DecEq-Tag</a><a id="879" class="Symbol">)</a> <a id="881" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="883" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="885" class="Symbol">)</a>


<a id="889" class="Keyword">record</a> <a id="TransactionStructure"></a><a id="896" href="Ledger.Core.Specification.Transaction.html#896" class="Record">TransactionStructure</a> <a id="917" class="Symbol">:</a> <a id="919" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="925" class="Keyword">where</a>
  <a id="933" class="Keyword">field</a>


    <a id="TransactionStructure.Ix"></a><a id="945" href="Ledger.Core.Specification.Transaction.html#945" class="Field">Ix</a> <a id="TransactionStructure.TxId"></a><a id="948" href="Ledger.Core.Specification.Transaction.html#948" class="Field">TxId</a> <a id="TransactionStructure.AuxiliaryData"></a><a id="953" href="Ledger.Core.Specification.Transaction.html#953" class="Field">AuxiliaryData</a> <a id="967" class="Symbol">:</a> <a id="969" href="Agda.Primitive.html#388" class="Primitive">Type</a>


    <a id="980" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-Ix"></a><a id="982" href="Ledger.Core.Specification.Transaction.html#982" class="Field">DecEq-Ix</a>   <a id="993" class="Symbol">⦄</a> <a id="995" class="Symbol">:</a> <a id="997" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="1003" href="Ledger.Core.Specification.Transaction.html#945" class="Field">Ix</a>
    <a id="1010" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-TxId"></a><a id="1012" href="Ledger.Core.Specification.Transaction.html#1012" class="Field">DecEq-TxId</a> <a id="1023" class="Symbol">⦄</a> <a id="1025" class="Symbol">:</a> <a id="1027" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="1033" href="Ledger.Core.Specification.Transaction.html#948" class="Field">TxId</a>
    <a id="TransactionStructure.adHashingScheme"></a><a id="1042" href="Ledger.Core.Specification.Transaction.html#1042" class="Field">adHashingScheme</a> <a id="1058" class="Symbol">:</a> <a id="1060" href="Ledger.Core.Specification.Crypto.html#167" class="Record">isHashableSet</a> <a id="1074" href="Ledger.Core.Specification.Transaction.html#953" class="Field">AuxiliaryData</a>
  <a id="1090" class="Keyword">open</a> <a id="1095" href="Ledger.Core.Specification.Crypto.html#167" class="Module">isHashableSet</a> <a id="1109" href="Ledger.Core.Specification.Transaction.html#1042" class="Field">adHashingScheme</a> <a id="1125" class="Keyword">renaming</a> <a id="1134" class="Symbol">(</a><a id="1135" href="Ledger.Core.Specification.Crypto.html#244" class="Field">THash</a> <a id="1141" class="Symbol">to</a> <a id="1144" class="Field">ADHash</a><a id="1150" class="Symbol">)</a> <a id="1152" class="Keyword">public</a>

  <a id="1162" class="Keyword">field</a> <a id="TransactionStructure.globalConstants"></a><a id="1168" href="Ledger.Core.Specification.Transaction.html#1168" class="Field">globalConstants</a> <a id="1184" class="Symbol">:</a> <a id="1186" class="Symbol">_</a>
  <a id="1190" class="Keyword">open</a> <a id="1195" href="Ledger.Core.Specification.Epoch.html#2274" class="Module">GlobalConstants</a> <a id="1211" href="Ledger.Core.Specification.Transaction.html#1168" class="Field">globalConstants</a> <a id="1227" class="Keyword">public</a>

  <a id="1237" class="Keyword">field</a> <a id="TransactionStructure.cryptoStructure"></a><a id="1243" href="Ledger.Core.Specification.Transaction.html#1243" class="Field">cryptoStructure</a> <a id="1259" class="Symbol">:</a> <a id="1261" class="Symbol">_</a>
  <a id="1265" class="Keyword">open</a> <a id="1270" href="Ledger.Core.Specification.Crypto.html#1110" class="Module">CryptoStructure</a> <a id="1286" href="Ledger.Core.Specification.Transaction.html#1243" class="Field">cryptoStructure</a> <a id="1302" class="Keyword">public</a>
  <a id="1311" class="Keyword">open</a> <a id="1316" href="Ledger.Core.Specification.TokenAlgebra.Base.html" class="Module">Ledger.Core.Specification.TokenAlgebra.Base</a> <a id="1360" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a> <a id="1371" class="Keyword">public</a>
  <a id="1380" class="Keyword">open</a> <a id="1385" href="Ledger.Core.Specification.Address.html" class="Module">Ledger.Core.Specification.Address</a> <a id="1419" href="Ledger.Core.Specification.Epoch.html#2313" class="Function">Network</a> <a id="1427" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a> <a id="1435" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a> <a id="1446" class="Symbol">⦃</a> <a id="1448" href="Function.Base.html#4755" class="Function">it</a> <a id="1451" class="Symbol">⦄</a> <a id="1453" class="Symbol">⦃</a> <a id="1455" href="Function.Base.html#4755" class="Function">it</a> <a id="1458" class="Symbol">⦄</a> <a id="1460" class="Symbol">⦃</a> <a id="1462" href="Function.Base.html#4755" class="Function">it</a> <a id="1465" class="Symbol">⦄</a> <a id="1467" class="Keyword">public</a>

  <a id="1477" class="Keyword">field</a> <a id="TransactionStructure.epochStructure"></a><a id="1483" href="Ledger.Core.Specification.Transaction.html#1483" class="Field">epochStructure</a> <a id="1498" class="Symbol">:</a> <a id="1500" class="Symbol">_</a>
  <a id="1504" class="Keyword">open</a> <a id="1509" href="Ledger.Core.Specification.Epoch.html#578" class="Module">EpochStructure</a> <a id="1524" href="Ledger.Core.Specification.Transaction.html#1483" class="Field">epochStructure</a> <a id="1539" class="Keyword">public</a>
  <a id="1548" class="Keyword">open</a> <a id="1553" href="Ledger.Core.Specification.Script.Base.html" class="Module">Ledger.Core.Specification.Script.Base</a> <a id="1591" href="Ledger.Core.Specification.Transaction.html#1243" class="Field">cryptoStructure</a> <a id="1607" href="Ledger.Core.Specification.Transaction.html#1483" class="Field">epochStructure</a> <a id="1622" class="Keyword">public</a>

  <a id="1632" class="Keyword">field</a> <a id="TransactionStructure.scriptStructure"></a><a id="1638" href="Ledger.Core.Specification.Transaction.html#1638" class="Field">scriptStructure</a> <a id="1654" class="Symbol">:</a> <a id="1656" class="Symbol">_</a>
  <a id="1660" class="Keyword">open</a> <a id="1665" href="Ledger.Core.Specification.Script.Base.html#2046" class="Module">ScriptStructure</a> <a id="1681" href="Ledger.Core.Specification.Transaction.html#1638" class="Field">scriptStructure</a> <a id="1697" class="Keyword">public</a>
  <a id="1706" class="Keyword">open</a> <a id="1711" href="Ledger.Conway.Specification.PParams.html" class="Module">Ledger.Conway.Specification.PParams</a> <a id="1747" href="Ledger.Core.Specification.Transaction.html#1243" class="Field">cryptoStructure</a> <a id="1763" href="Ledger.Core.Specification.Transaction.html#1483" class="Field">epochStructure</a> <a id="1778" href="Ledger.Core.Specification.Transaction.html#1638" class="Field">scriptStructure</a> <a id="1794" class="Keyword">public</a>

  <a id="1804" class="Keyword">field</a> <a id="TransactionStructure.govParams"></a><a id="1810" href="Ledger.Core.Specification.Transaction.html#1810" class="Field">govParams</a> <a id="1820" class="Symbol">:</a> <a id="1822" class="Symbol">_</a>
  <a id="1826" class="Keyword">open</a> <a id="1831" href="Ledger.Conway.Specification.PParams.html#13995" class="Module">GovParams</a> <a id="1841" href="Ledger.Core.Specification.Transaction.html#1810" class="Field">govParams</a> <a id="1851" class="Keyword">public</a>

  <a id="1861" class="Keyword">field</a> <a id="TransactionStructure.tokenAlgebra"></a><a id="1867" href="Ledger.Core.Specification.Transaction.html#1867" class="Field">tokenAlgebra</a> <a id="1880" class="Symbol">:</a> <a id="1882" href="Ledger.Core.Specification.TokenAlgebra.Base.html#476" class="Record">TokenAlgebra</a>
  <a id="1897" class="Keyword">open</a> <a id="1902" href="Ledger.Core.Specification.TokenAlgebra.Base.html#476" class="Module">TokenAlgebra</a> <a id="1915" href="Ledger.Core.Specification.Transaction.html#1867" class="Field">tokenAlgebra</a> <a id="1928" class="Keyword">public</a>

  <a id="1938" class="Keyword">field</a> <a id="TransactionStructure.txidBytes"></a><a id="1944" href="Ledger.Core.Specification.Transaction.html#1944" class="Field">txidBytes</a> <a id="1954" class="Symbol">:</a> <a id="1956" href="Ledger.Core.Specification.Transaction.html#948" class="Field">TxId</a> <a id="1961" class="Symbol">→</a> <a id="1963" href="Ledger.Core.Specification.Crypto.html#659" class="Function">Ser</a>

  <a id="TransactionStructure.govStructure"></a><a id="1970" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a> <a id="1983" class="Symbol">:</a> <a id="1985" href="Ledger.Core.Specification.Gov.Base.html#322" class="Record">GovStructure</a>
  <a id="2000" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a> <a id="2013" class="Symbol">=</a> <a id="2015" class="Keyword">record</a>
    <a id="2026" class="Comment">-- TODO: figure out what to do with the hash</a>
    <a id="2075" class="Symbol">{</a> <a id="2077" href="Ledger.Core.Specification.Gov.Base.html#357" class="Field">TxId</a> <a id="2082" class="Symbol">=</a> <a id="2084" href="Ledger.Core.Specification.Transaction.html#948" class="Field">TxId</a><a id="2088" class="Symbol">;</a> <a id="2090" href="Ledger.Core.Specification.Gov.Base.html#362" class="Field">DocHash</a> <a id="2098" class="Symbol">=</a> <a id="2100" href="Ledger.Core.Specification.Transaction.html#1144" class="Function">ADHash</a>
    <a id="2111" class="Symbol">;</a> <a id="2113" href="Ledger.Core.Specification.Gov.Base.html#422" class="Field">cryptoStructure</a> <a id="2129" class="Symbol">=</a> <a id="2131" href="Ledger.Core.Specification.Transaction.html#1243" class="Field">cryptoStructure</a>
    <a id="2151" class="Symbol">;</a> <a id="2153" href="Ledger.Core.Specification.Gov.Base.html#497" class="Field">epochStructure</a> <a id="2168" class="Symbol">=</a> <a id="2170" href="Ledger.Core.Specification.Transaction.html#1483" class="Field">epochStructure</a>
    <a id="2189" class="Symbol">;</a> <a id="2191" href="Ledger.Core.Specification.Gov.Base.html#569" class="Field">scriptStructure</a> <a id="2207" class="Symbol">=</a> <a id="2209" href="Ledger.Core.Specification.Transaction.html#1638" class="Field">scriptStructure</a>
    <a id="2229" class="Symbol">;</a> <a id="2231" href="Ledger.Core.Specification.Gov.Base.html#787" class="Field">govParams</a> <a id="2241" class="Symbol">=</a> <a id="2243" href="Ledger.Core.Specification.Transaction.html#1810" class="Field">govParams</a>
    <a id="2257" class="Symbol">;</a> <a id="2259" href="Ledger.Core.Specification.Gov.Base.html#852" class="Field">globalConstants</a> <a id="2275" class="Symbol">=</a> <a id="2277" href="Ledger.Core.Specification.Transaction.html#1168" class="Field">globalConstants</a>
    <a id="2297" class="Symbol">}</a>

  <a id="2302" class="Keyword">module</a> <a id="TransactionStructure.GovActions"></a><a id="2309" href="Ledger.Core.Specification.Transaction.html#2309" class="Module">GovActions</a> <a id="2320" class="Symbol">=</a> <a id="2322" href="Ledger.Core.Specification.Gov.Actions.html" class="Module">Ledger.Core.Specification.Gov.Actions</a> <a id="2360" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
  <a id="2375" class="Keyword">open</a> <a id="2380" href="Ledger.Core.Specification.Transaction.html#2309" class="Module">GovActions</a> <a id="2391" class="Keyword">hiding</a> <a id="2398" class="Symbol">(</a><a id="2399" href="Ledger.Core.Specification.Gov.Actions.html#2025" class="Datatype">Vote</a><a id="2403" class="Symbol">;</a> <a id="2405" href="Ledger.Core.Specification.Gov.Actions.html#2045" class="InductiveConstructor">yes</a><a id="2408" class="Symbol">;</a> <a id="2410" href="Ledger.Core.Specification.Gov.Actions.html#2049" class="InductiveConstructor">no</a><a id="2412" class="Symbol">;</a> <a id="2414" href="Ledger.Core.Specification.Gov.Actions.html#2052" class="InductiveConstructor">abstain</a><a id="2421" class="Symbol">)</a> <a id="2423" class="Keyword">public</a>

  <a id="2433" class="Keyword">open</a> <a id="2438" class="Keyword">import</a> <a id="2445" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="2479" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>


  <a id="TransactionStructure.TxIn"></a><a id="2496" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a>               <a id="2515" class="Symbol">=</a> <a id="2517" href="Ledger.Core.Specification.Transaction.html#948" class="Field">TxId</a> <a id="2522" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2524" href="Ledger.Core.Specification.Transaction.html#945" class="Field">Ix</a>
  <a id="TransactionStructure.TxOut"></a><a id="2529" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a>              <a id="2548" class="Symbol">=</a> <a id="2550" href="Ledger.Core.Specification.Address.html#2475" class="Function">Addr</a> <a id="2555" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2557" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="2563" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2565" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2571" class="Symbol">(</a><a id="2572" href="Ledger.Core.Specification.Script.Base.html#1768" class="Function">Datum</a> <a id="2578" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="2580" href="Ledger.Core.Specification.Script.Base.html#1721" class="Function">DataHash</a><a id="2588" class="Symbol">)</a> <a id="2590" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2592" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2598" href="Ledger.Core.Specification.Script.Base.html#2441" class="Function">Script</a>
  <a id="TransactionStructure.UTxO"></a><a id="2607" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a>               <a id="2626" class="Symbol">=</a> <a id="2628" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a> <a id="2633" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2635" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a>
  <a id="TransactionStructure.RdmrPtr"></a><a id="2643" href="Ledger.Core.Specification.Transaction.html#2643" class="Function">RdmrPtr</a>            <a id="2662" class="Symbol">=</a> <a id="2664" href="Ledger.Core.Specification.Transaction.html#759" class="Datatype">Tag</a> <a id="2668" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2670" href="Ledger.Core.Specification.Transaction.html#945" class="Field">Ix</a>
  <a id="TransactionStructure.ProposedPPUpdates"></a><a id="2675" href="Ledger.Core.Specification.Transaction.html#2675" class="Function">ProposedPPUpdates</a>  <a id="2694" class="Symbol">=</a> <a id="2696" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a> <a id="2704" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2706" href="Ledger.Conway.Specification.PParams.html#14093" class="Function">PParamsUpdate</a>
  <a id="TransactionStructure.Update"></a><a id="2722" href="Ledger.Core.Specification.Transaction.html#2722" class="Function">Update</a>             <a id="2741" class="Symbol">=</a> <a id="2743" href="Ledger.Core.Specification.Transaction.html#2675" class="Function">ProposedPPUpdates</a> <a id="2761" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2763" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a>


  <a id="2773" class="Keyword">record</a> <a id="TransactionStructure.HasUTxO"></a><a id="2780" href="Ledger.Core.Specification.Transaction.html#2780" class="Record">HasUTxO</a> <a id="2788" class="Symbol">{</a><a id="2789" href="Ledger.Core.Specification.Transaction.html#2789" class="Bound">a</a><a id="2790" class="Symbol">}</a> <a id="2792" class="Symbol">(</a><a id="2793" href="Ledger.Core.Specification.Transaction.html#2793" class="Bound">A</a> <a id="2795" class="Symbol">:</a> <a id="2797" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2802" href="Ledger.Core.Specification.Transaction.html#2789" class="Bound">a</a><a id="2803" class="Symbol">)</a> <a id="2805" class="Symbol">:</a> <a id="2807" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2812" href="Ledger.Core.Specification.Transaction.html#2789" class="Bound">a</a> <a id="2814" class="Keyword">where</a>
    <a id="2824" class="Keyword">field</a> <a id="2830" href="Ledger.Core.Specification.Transaction.html#2830" class="Field">UTxOOf</a> <a id="2837" class="Symbol">:</a> <a id="2839" href="Ledger.Core.Specification.Transaction.html#2793" class="Bound">A</a> <a id="2841" class="Symbol">→</a> <a id="2843" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a>
  <a id="2850" class="Keyword">open</a> <a id="2855" href="Ledger.Core.Specification.Transaction.html#2780" class="Module">HasUTxO</a> <a id="2863" class="Symbol">⦃...⦄</a> <a id="2869" class="Keyword">public</a>


  <a id="2880" class="Keyword">record</a> <a id="TransactionStructure.TxWitnesses"></a><a id="2887" href="Ledger.Core.Specification.Transaction.html#2887" class="Record">TxWitnesses</a> <a id="2899" class="Symbol">:</a> <a id="2901" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2906" class="Keyword">where</a>
    <a id="2916" class="Keyword">field</a>
      <a id="2928" href="Ledger.Core.Specification.Transaction.html#2928" class="Field">vkSigs</a>   <a id="2937" class="Symbol">:</a> <a id="2939" href="Ledger.Core.Specification.Crypto.html#650" class="Function">VKey</a> <a id="2944" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2946" href="Ledger.Core.Specification.Crypto.html#655" class="Function">Sig</a>
      <a id="2956" href="Ledger.Core.Specification.Transaction.html#2956" class="Field">scripts</a>  <a id="2965" class="Symbol">:</a> <a id="2967" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2969" href="Ledger.Core.Specification.Script.Base.html#2441" class="Function">Script</a>
      <a id="2982" href="Ledger.Core.Specification.Transaction.html#2982" class="Field">txdats</a>   <a id="2991" class="Symbol">:</a> <a id="2993" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2995" href="Ledger.Core.Specification.Script.Base.html#1768" class="Function">Datum</a>
      <a id="3007" href="Ledger.Core.Specification.Transaction.html#3007" class="Field">txrdmrs</a>  <a id="3016" class="Symbol">:</a> <a id="3018" href="Ledger.Core.Specification.Transaction.html#2643" class="Function">RdmrPtr</a>  <a id="3027" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="3029" href="Ledger.Core.Specification.Script.Base.html#1786" class="Function">Redeemer</a> <a id="3038" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3040" href="Ledger.Core.Specification.Script.Base.html#1016" class="Function">ExUnits</a>

    <a id="TransactionStructure.TxWitnesses.scriptsP1"></a><a id="3053" href="Ledger.Core.Specification.Transaction.html#3053" class="Function">scriptsP1</a> <a id="3063" class="Symbol">:</a> <a id="3065" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3067" href="Ledger.Core.Specification.Script.Base.html#640" class="Function">P1Script</a>
    <a id="3080" href="Ledger.Core.Specification.Transaction.html#3053" class="Function">scriptsP1</a> <a id="3090" class="Symbol">=</a> <a id="3092" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3103" href="Ledger.Core.Specification.Script.Base.html#2973" class="Function">toP1Script</a> <a id="3114" href="Ledger.Core.Specification.Transaction.html#2956" class="Field">scripts</a>


  <a id="TransactionStructure.getValue"></a><a id="3126" href="Ledger.Core.Specification.Transaction.html#3126" class="Function">getValue</a> <a id="3135" class="Symbol">:</a> <a id="3137" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a> <a id="3143" class="Symbol">→</a> <a id="3145" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a>
  <a id="3153" href="Ledger.Core.Specification.Transaction.html#3126" class="Function">getValue</a> <a id="3162" class="Symbol">(_</a> <a id="3165" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3167" href="Ledger.Core.Specification.Transaction.html#3167" class="Bound">v</a> <a id="3169" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3171" class="Symbol">_)</a> <a id="3174" class="Symbol">=</a> <a id="3176" href="Ledger.Core.Specification.Transaction.html#3167" class="Bound">v</a>

  <a id="TransactionStructure.TxOutʰ"></a><a id="3181" href="Ledger.Core.Specification.Transaction.html#3181" class="Function">TxOutʰ</a> <a id="3188" class="Symbol">=</a> <a id="3190" href="Ledger.Core.Specification.Address.html#2475" class="Function">Addr</a> <a id="3195" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3197" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="3203" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3205" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3211" class="Symbol">(</a><a id="3212" href="Ledger.Core.Specification.Script.Base.html#1768" class="Function">Datum</a> <a id="3218" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3220" href="Ledger.Core.Specification.Script.Base.html#1721" class="Function">DataHash</a><a id="3228" class="Symbol">)</a> <a id="3230" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3232" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3238" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>

  <a id="TransactionStructure.txOutHash"></a><a id="3252" href="Ledger.Core.Specification.Transaction.html#3252" class="Function">txOutHash</a> <a id="3262" class="Symbol">:</a> <a id="3264" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a> <a id="3270" class="Symbol">→</a> <a id="3272" href="Ledger.Core.Specification.Transaction.html#3181" class="Function">TxOutʰ</a>
  <a id="3281" href="Ledger.Core.Specification.Transaction.html#3252" class="Function">txOutHash</a> <a id="3291" class="Symbol">(</a><a id="3292" href="Ledger.Core.Specification.Transaction.html#3292" class="Bound">a</a> <a id="3294" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3296" href="Ledger.Core.Specification.Transaction.html#3296" class="Bound">v</a> <a id="3298" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3300" href="Ledger.Core.Specification.Transaction.html#3300" class="Bound">d</a> <a id="3302" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3304" href="Ledger.Core.Specification.Transaction.html#3304" class="Bound">s</a><a id="3305" class="Symbol">)</a> <a id="3307" class="Symbol">=</a> <a id="3309" href="Ledger.Core.Specification.Transaction.html#3292" class="Bound">a</a> <a id="3311" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3313" class="Symbol">(</a><a id="3314" href="Ledger.Core.Specification.Transaction.html#3296" class="Bound">v</a> <a id="3316" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3318" class="Symbol">(</a><a id="3319" href="Ledger.Core.Specification.Transaction.html#3300" class="Bound">d</a> <a id="3321" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3323" href="Data.Maybe.Base.html#1934" class="Function">M.map</a> <a id="3329" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="3334" href="Ledger.Core.Specification.Transaction.html#3304" class="Bound">s</a><a id="3335" class="Symbol">))</a>

  <a id="TransactionStructure.getValueʰ"></a><a id="3341" href="Ledger.Core.Specification.Transaction.html#3341" class="Function">getValueʰ</a> <a id="3351" class="Symbol">:</a> <a id="3353" href="Ledger.Core.Specification.Transaction.html#3181" class="Function">TxOutʰ</a> <a id="3360" class="Symbol">→</a> <a id="3362" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a>
  <a id="3370" href="Ledger.Core.Specification.Transaction.html#3341" class="Function">getValueʰ</a> <a id="3380" class="Symbol">(_</a> <a id="3383" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3385" href="Ledger.Core.Specification.Transaction.html#3385" class="Bound">v</a> <a id="3387" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3389" class="Symbol">_)</a> <a id="3392" class="Symbol">=</a> <a id="3394" href="Ledger.Core.Specification.Transaction.html#3385" class="Bound">v</a>

  <a id="TransactionStructure.txInsVKey"></a><a id="3399" href="Ledger.Core.Specification.Transaction.html#3399" class="Function">txInsVKey</a> <a id="3409" class="Symbol">:</a> <a id="3411" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3413" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a> <a id="3418" class="Symbol">→</a> <a id="3420" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a> <a id="3425" class="Symbol">→</a> <a id="3427" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3429" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a>
  <a id="3436" href="Ledger.Core.Specification.Transaction.html#3399" class="Function">txInsVKey</a> <a id="3446" href="Ledger.Core.Specification.Transaction.html#3446" class="Bound">txIns</a> <a id="3452" href="Ledger.Core.Specification.Transaction.html#3452" class="Bound">utxo</a> <a id="3457" class="Symbol">=</a> <a id="3459" href="Ledger.Core.Specification.Transaction.html#3446" class="Bound">txIns</a> <a id="3465" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="3467" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3471" class="Symbol">(</a><a id="3472" href="Ledger.Core.Specification.Transaction.html#3452" class="Bound">utxo</a> <a id="3477" href="abstract-set-theory.FiniteSetTheory.html#4234" class="Function Operator">∣^&#39;</a> <a id="3481" class="Symbol">(</a><a id="3482" href="Ledger.Core.Specification.Address.html#2730" class="Function">isVKeyAddr</a> <a id="3493" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3495" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="3500" class="Symbol">))</a>

  <a id="TransactionStructure.scriptOuts"></a><a id="3506" href="Ledger.Core.Specification.Transaction.html#3506" class="Function">scriptOuts</a> <a id="3517" class="Symbol">:</a> <a id="3519" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a> <a id="3524" class="Symbol">→</a> <a id="3526" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a>
  <a id="3533" href="Ledger.Core.Specification.Transaction.html#3506" class="Function">scriptOuts</a> <a id="3544" href="Ledger.Core.Specification.Transaction.html#3544" class="Bound">utxo</a> <a id="3549" class="Symbol">=</a> <a id="3551" href="Ledger.Core.Specification.Transaction.html#383" class="Function">filter</a> <a id="3558" class="Symbol">(λ</a> <a id="3561" class="Symbol">(_</a> <a id="3564" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3566" href="Ledger.Core.Specification.Transaction.html#3566" class="Bound">addr</a> <a id="3571" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3573" class="Symbol">_)</a> <a id="3576" class="Symbol">→</a> <a id="3578" href="Ledger.Core.Specification.Address.html#2758" class="Function">isScriptAddr</a> <a id="3591" href="Ledger.Core.Specification.Transaction.html#3566" class="Bound">addr</a><a id="3595" class="Symbol">)</a> <a id="3597" href="Ledger.Core.Specification.Transaction.html#3544" class="Bound">utxo</a>

  <a id="TransactionStructure.txInsScript"></a><a id="3605" href="Ledger.Core.Specification.Transaction.html#3605" class="Function">txInsScript</a> <a id="3617" class="Symbol">:</a> <a id="3619" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3621" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a> <a id="3626" class="Symbol">→</a> <a id="3628" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a> <a id="3633" class="Symbol">→</a> <a id="3635" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3637" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a>
  <a id="3644" href="Ledger.Core.Specification.Transaction.html#3605" class="Function">txInsScript</a> <a id="3656" href="Ledger.Core.Specification.Transaction.html#3656" class="Bound">txIns</a> <a id="3662" href="Ledger.Core.Specification.Transaction.html#3662" class="Bound">utxo</a> <a id="3667" class="Symbol">=</a> <a id="3669" href="Ledger.Core.Specification.Transaction.html#3656" class="Bound">txIns</a> <a id="3675" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="3677" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3681" class="Symbol">(</a><a id="3682" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3688" class="Symbol">(</a><a id="3689" href="Ledger.Core.Specification.Transaction.html#3506" class="Function">scriptOuts</a> <a id="3700" href="Ledger.Core.Specification.Transaction.html#3662" class="Bound">utxo</a><a id="3704" class="Symbol">))</a>


  <a id="3711" class="Keyword">instance</a>
    <a id="TransactionStructure.HasCoin-TxOut"></a><a id="3724" href="Ledger.Core.Specification.Transaction.html#3724" class="Function">HasCoin-TxOut</a> <a id="3738" class="Symbol">:</a> <a id="3740" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="3748" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a>
    <a id="3758" href="Ledger.Core.Specification.Transaction.html#3724" class="Function">HasCoin-TxOut</a> <a id="3772" class="Symbol">.</a><a id="3773" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="3781" class="Symbol">=</a> <a id="3783" href="Ledger.Core.Specification.TokenAlgebra.Base.html#835" class="Function">coin</a> <a id="3788" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3790" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3796" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3798" href="Data.Product.Base.html#650" class="Field">proj₂</a>

</pre></body></html>