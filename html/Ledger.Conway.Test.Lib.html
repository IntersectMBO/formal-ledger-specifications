<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Test.Lib</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="52" class="Keyword">hiding</a> <a id="59" class="Symbol">(</a><a id="60" href="Axiom.Set.html#5718" class="Function">fromList</a><a id="68" class="Symbol">;</a> <a id="70" href="Class.Monoid.Core.html#195" class="Field">ε</a><a id="71" class="Symbol">;</a> <a id="73" href="Data.Nat.Base.html#7102" class="Function Operator">_/_</a><a id="76" class="Symbol">);</a> <a id="79" class="Keyword">open</a> <a id="84" href="Interface.ComputationalRelation.html#2799" class="Module">Computational</a>
<a id="98" class="Keyword">open</a> <a id="103" class="Keyword">import</a> <a id="110" href="Ledger.Conway.Test.Prelude.html" class="Module">Ledger.Conway.Test.Prelude</a>

<a id="138" class="Keyword">module</a> <a id="145" href="Ledger.Conway.Test.Lib.html" class="Module">Ledger.Conway.Test.Lib</a> <a id="168" class="Symbol">(</a><a id="169" href="Ledger.Conway.Test.Lib.html#169" class="Bound">A</a> <a id="171" href="Ledger.Conway.Test.Lib.html#171" class="Bound">D</a> <a id="173" class="Symbol">:</a> <a id="175" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="179" class="Symbol">)</a>
  <a id="183" class="Symbol">(</a><a id="184" href="Ledger.Conway.Test.Lib.html#184" class="Bound">scriptImp</a> <a id="194" class="Symbol">:</a> <a id="196" href="Ledger.Conway.Test.Prelude.html#141" class="Record">ScriptImplementation</a> <a id="217" href="Ledger.Conway.Test.Lib.html#169" class="Bound">A</a> <a id="219" href="Ledger.Conway.Test.Lib.html#171" class="Bound">D</a><a id="220" class="Symbol">)</a> <a id="222" class="Symbol">(</a><a id="223" class="Keyword">open</a> <a id="228" href="Ledger.Conway.Test.Prelude.html#141" class="Module">ScriptImplementation</a> <a id="249" href="Ledger.Conway.Test.Lib.html#184" class="Bound">scriptImp</a><a id="258" class="Symbol">)</a>
  <a id="262" class="Keyword">where</a>

<a id="269" class="Keyword">open</a> <a id="274" class="Keyword">import</a> <a id="281" href="Ledger.Conway.Test.LedgerImplementation.html" class="Module">Ledger.Conway.Test.LedgerImplementation</a> <a id="321" href="Ledger.Conway.Test.Lib.html#169" class="Bound">A</a> <a id="323" href="Ledger.Conway.Test.Lib.html#171" class="Bound">D</a> <a id="325" href="Ledger.Conway.Test.Lib.html#184" class="Bound">scriptImp</a>
<a id="335" class="Keyword">open</a> <a id="340" class="Keyword">import</a> <a id="347" href="Ledger.Conway.Script.Validation.html" class="Module">Ledger.Conway.Script.Validation</a> <a id="379" href="Ledger.Conway.Test.LedgerImplementation.html#4159" class="Function">SVTransactionStructure</a> <a id="402" href="Ledger.Conway.Test.LedgerImplementation.html#4742" class="Function">SVAbstractFunctions</a>
<a id="422" class="Keyword">open</a> <a id="427" class="Keyword">import</a> <a id="434" href="Ledger.Conway.Utxo.html" class="Module">Ledger.Conway.Utxo</a> <a id="453" href="Ledger.Conway.Test.LedgerImplementation.html#4159" class="Function">SVTransactionStructure</a> <a id="476" href="Ledger.Conway.Test.LedgerImplementation.html#4742" class="Function">SVAbstractFunctions</a>
<a id="496" class="Keyword">open</a> <a id="501" class="Keyword">import</a> <a id="508" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>
<a id="534" class="Keyword">open</a> <a id="539" href="Ledger.Conway.Transaction.html#872" class="Module">TransactionStructure</a> <a id="560" href="Ledger.Conway.Test.LedgerImplementation.html#4159" class="Function">SVTransactionStructure</a>
<a id="583" class="Keyword">open</a> <a id="588" class="Keyword">import</a> <a id="595" href="Ledger.Conway.Types.Epoch.html" class="Module">Ledger.Conway.Types.Epoch</a>
<a id="621" class="Keyword">open</a> <a id="626" class="Keyword">import</a> <a id="633" href="Ledger.Conway.Types.Numeric.html" class="Module">Ledger.Conway.Types.Numeric</a> <a id="661" class="Keyword">using</a> <a id="667" class="Symbol">(</a><a id="668" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2448" class="Function">mkUnitInterval</a><a id="682" class="Symbol">;</a> <a id="684" href="Ledger.Conway.Types.Numeric.html#250" class="Function">mkℕ⁺</a><a id="688" class="Symbol">)</a>
<a id="690" class="Keyword">open</a> <a id="695" href="Ledger.Conway.Types.Epoch.html#524" class="Module">EpochStructure</a> <a id="710" href="Ledger.Conway.Test.LedgerImplementation.html#2141" class="Function">SVEpochStructure</a>
<a id="727" class="Keyword">open</a> <a id="732" class="Keyword">import</a> <a id="739" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="752" class="Keyword">using</a> <a id="758" class="Symbol">(</a><a id="759" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a><a id="760" class="Symbol">;</a> <a id="762" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">+_</a><a id="764" class="Symbol">)</a>
<a id="766" class="Keyword">open</a> <a id="771" class="Keyword">import</a> <a id="778" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="792" class="Keyword">using</a> <a id="798" class="Symbol">(</a><a id="799" href="Data.Rational.Base.html#4367" class="Function">½</a><a id="800" class="Symbol">;</a> <a id="802" href="Data.Rational.Base.html#4346" class="Function">1ℚ</a> <a id="805" class="Symbol">;</a> <a id="807" href="Data.Rational.Base.html#1960" class="Function">mkℚ+</a> <a id="812" class="Symbol">;</a> <a id="814" href="Data.Rational.Base.html#3884" class="Function Operator">_/_</a><a id="817" class="Symbol">)</a>
<a id="819" class="Keyword">open</a> <a id="824" class="Keyword">import</a> <a id="831" href="Data.Nat.Coprimality.html" class="Module">Data.Nat.Coprimality</a> <a id="852" class="Keyword">using</a> <a id="858" class="Symbol">(</a><a id="859" href="Data.Nat.Coprimality.html#1190" class="Function">Coprime</a><a id="866" class="Symbol">;</a> <a id="868" href="Data.Nat.Coprimality.html#1733" class="Function">gcd≡1⇒coprime</a><a id="881" class="Symbol">)</a>
<a id="883" class="Keyword">open</a> <a id="888" href="Ledger.Conway.Test.LedgerImplementation.html#1060" class="Module">Implementation</a>

<a id="createEnv"></a><a id="904" href="Ledger.Conway.Test.Lib.html#904" class="Function">createEnv</a> <a id="914" class="Symbol">:</a> <a id="916" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="918" class="Symbol">→</a> <a id="920" href="Ledger.Conway.Utxo.html#1038" class="Record">UTxOEnv</a>
<a id="928" href="Ledger.Conway.Test.Lib.html#904" class="Function">createEnv</a> <a id="938" href="Ledger.Conway.Test.Lib.html#938" class="Bound">s</a> <a id="940" class="Symbol">=</a> <a id="942" class="Keyword">record</a> <a id="949" class="Symbol">{</a> <a id="951" href="Ledger.Conway.Utxo.html#1071" class="Field">slot</a> <a id="956" class="Symbol">=</a> <a id="958" href="Ledger.Conway.Test.Lib.html#938" class="Bound">s</a> <a id="960" class="Symbol">;</a> <a id="962" href="Ledger.Conway.Utxo.html#1116" class="Field">treasury</a> <a id="971" class="Symbol">=</a> <a id="973" class="Number">0</a> <a id="975" class="Symbol">;</a>
                   <a id="996" href="Ledger.Conway.Utxo.html#1092" class="Field">pparams</a> <a id="1004" class="Symbol">=</a> <a id="1006" class="Keyword">record</a>
                               <a id="1044" class="Symbol">{</a> <a id="1046" href="Ledger.Conway.PParams.html#1733" class="Field">maxBlockSize</a> <a id="1059" class="Symbol">=</a> <a id="1061" class="Number">90112</a>
                               <a id="1098" class="Symbol">;</a> <a id="1100" href="Ledger.Conway.PParams.html#1775" class="Field">maxTxSize</a> <a id="1110" class="Symbol">=</a> <a id="1112" class="Number">16384</a>
                               <a id="1149" class="Symbol">;</a> <a id="1151" href="Ledger.Conway.PParams.html#1817" class="Field">maxHeaderSize</a> <a id="1165" class="Symbol">=</a> <a id="1167" class="Number">1100</a>
                               <a id="1203" class="Symbol">;</a> <a id="1205" href="Ledger.Conway.PParams.html#1955" class="Field">maxValSize</a> <a id="1216" class="Symbol">=</a> <a id="1218" class="Number">5000</a>
                               <a id="1254" class="Symbol">;</a> <a id="1256" href="Ledger.Conway.PParams.html#1997" class="Field">maxCollateralInputs</a> <a id="1276" class="Symbol">=</a> <a id="1278" class="Number">3</a>
                               <a id="1311" class="Symbol">;</a> <a id="1313" href="Ledger.Conway.PParams.html#2041" class="Field">pv</a> <a id="1316" class="Symbol">=</a> <a id="1318" class="Number">8</a> <a id="1320" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1322" class="Number">0</a>
                               <a id="1355" class="Symbol">;</a> <a id="1357" href="Ledger.Conway.PParams.html#1859" class="Field">maxTxExUnits</a> <a id="1370" class="Symbol">=</a> <a id="1372" class="Number">10000000000</a> <a id="1384" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1386" class="Number">14000000</a>
                               <a id="1426" class="Symbol">;</a> <a id="1428" href="Ledger.Conway.PParams.html#1907" class="Field">maxBlockExUnits</a> <a id="1444" class="Symbol">=</a> <a id="1446" class="Number">40000000000</a> <a id="1458" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1460" class="Number">62000000</a>
                               <a id="1500" class="Symbol">;</a> <a id="1502" href="Ledger.Conway.PParams.html#2116" class="Field">a</a> <a id="1504" class="Symbol">=</a> <a id="1506" class="Number">44</a>
                               <a id="1540" class="Symbol">;</a> <a id="1542" href="Ledger.Conway.PParams.html#2158" class="Field">b</a> <a id="1544" class="Symbol">=</a> <a id="1546" class="Number">155381</a>
                               <a id="1584" class="Symbol">;</a> <a id="1586" href="Ledger.Conway.PParams.html#2735" class="Field">minUTxOValue</a> <a id="1599" class="Symbol">=</a> <a id="1601" class="Number">0</a>
                               <a id="1634" class="Symbol">;</a> <a id="1636" href="Ledger.Conway.PParams.html#2245" class="Field">poolDeposit</a> <a id="1648" class="Symbol">=</a> <a id="1650" class="Number">500000000</a> <a id="1660" class="Comment">-- lovelace</a>
                               <a id="1703" class="Symbol">;</a> <a id="1705" href="Ledger.Conway.PParams.html#2200" class="Field">keyDeposit</a> <a id="1716" class="Symbol">=</a> <a id="1718" class="Number">500000000</a> <a id="1728" class="Comment">-- lovelace</a>
                               <a id="1771" class="Symbol">;</a> <a id="1773" href="Ledger.Conway.PParams.html#2290" class="Field">monetaryExpansion</a> <a id="1791" class="Symbol">=</a> <a id="1793" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2448" class="Function">mkUnitInterval</a> <a id="1808" class="Symbol">(</a><a id="1809" href="Agda.Builtin.Int.html#263" class="InductiveConstructor Operator">+</a> <a id="1811" class="Number">3</a> <a id="1813" href="Data.Rational.Base.html#3884" class="Function Operator">/</a> <a id="1815" class="Number">1000</a><a id="1819" class="Symbol">)</a>
                               <a id="1852" class="Symbol">;</a> <a id="1854" href="Ledger.Conway.PParams.html#2360" class="Field">treasuryCut</a> <a id="1866" class="Symbol">=</a> <a id="1868" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2448" class="Function">mkUnitInterval</a> <a id="1883" class="Symbol">(</a><a id="1884" href="Agda.Builtin.Int.html#263" class="InductiveConstructor Operator">+</a> <a id="1886" class="Number">2</a> <a id="1888" href="Data.Rational.Base.html#3884" class="Function Operator">/</a> <a id="1890" class="Number">10</a><a id="1892" class="Symbol">)</a>
                               <a id="1925" class="Symbol">;</a> <a id="1927" href="Ledger.Conway.PParams.html#2430" class="Field">coinsPerUTxOByte</a> <a id="1944" class="Symbol">=</a> <a id="1946" class="Number">0</a>  <a id="1949" class="Comment">--lovelace</a>
                               <a id="1991" class="Comment">-- ^^^ was 4310, but that value resulted in failed tests once</a>
                               <a id="2084" class="Comment">-- we replaced `minUTxOValue` with `coinsPerUTxOByte`; see `HelloWorld.agda`</a>
                               <a id="2192" class="Comment">-- line 153: `isSuccess succeedExample ≡ true`</a>
                               <a id="2270" class="Symbol">;</a> <a id="2272" href="Ledger.Conway.PParams.html#2522" class="Field">minFeeRefScriptCoinsPerByte</a> <a id="2300" class="Symbol">=</a> <a id="2302" href="Data.Rational.Base.html#1960" class="Function">mkℚ+</a> <a id="2307" class="Number">15</a> <a id="2310" class="Number">1</a> <a id="2312" class="Symbol">(</a><a id="2313" href="Data.Nat.Coprimality.html#1733" class="Function">gcd≡1⇒coprime</a> <a id="2327" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="2331" class="Symbol">)</a> <a id="2333" class="Comment">-- see [1]</a>
                               <a id="2375" class="Symbol">;</a> <a id="2377" href="Ledger.Conway.PParams.html#2475" class="Field">prices</a> <a id="2384" class="Symbol">=</a> <a id="2386" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="2389" class="Comment">-- fix this</a>
                               <a id="2432" class="Symbol">;</a> <a id="2434" href="Ledger.Conway.PParams.html#2564" class="Field">maxRefScriptSizePerTx</a> <a id="2456" class="Symbol">=</a> <a id="2458" class="Number">200</a> <a id="2462" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="2464" class="Number">1024</a> <a id="2469" class="Comment">-- 200KiB</a>
                               <a id="2510" class="Symbol">;</a> <a id="2512" href="Ledger.Conway.PParams.html#2606" class="Field">maxRefScriptSizePerBlock</a> <a id="2537" class="Symbol">=</a> <a id="2539" class="Number">1024</a> <a id="2544" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="2546" class="Number">1024</a> <a id="2551" class="Comment">-- 1MiB</a>
                               <a id="2590" class="Symbol">;</a> <a id="2592" href="Ledger.Conway.PParams.html#2648" class="Field">refScriptCostStride</a>  <a id="2613" class="Symbol">=</a> <a id="2615" href="Ledger.Conway.Types.Numeric.html#250" class="Function">mkℕ⁺</a> <a id="2620" class="Number">25</a>
                               <a id="2654" class="Symbol">;</a> <a id="2656" href="Ledger.Conway.PParams.html#2691" class="Field">refScriptCostMultiplier</a> <a id="2680" class="Symbol">=</a> <a id="2682" href="Data.Rational.Base.html#1960" class="Function">mkℚ+</a> <a id="2687" class="Number">6</a> <a id="2689" class="Number">5</a> <a id="2691" class="Symbol">(</a><a id="2692" href="Data.Nat.Coprimality.html#1733" class="Function">gcd≡1⇒coprime</a> <a id="2706" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="2710" class="Symbol">)</a> <a id="2712" class="Comment">-- see [1]</a>
                               <a id="2754" class="Symbol">;</a> <a id="2756" href="Ledger.Conway.PParams.html#2895" class="Field">a0</a> <a id="2759" class="Symbol">=</a> <a id="2761" href="Data.Rational.Base.html#4346" class="Function">1ℚ</a> <a id="2764" class="Comment">-- don&#39;t know</a>
                               <a id="2809" class="Symbol">;</a> <a id="2811" href="Ledger.Conway.PParams.html#2807" class="Field">Emax</a> <a id="2816" class="Symbol">=</a> <a id="2818" class="Number">18</a>
                               <a id="2852" class="Symbol">;</a> <a id="2854" href="Ledger.Conway.PParams.html#2853" class="Field">nopt</a> <a id="2859" class="Symbol">=</a> <a id="2861" class="Number">0</a> <a id="2863" class="Comment">-- don&#39;t know</a>
                               <a id="2908" class="Symbol">;</a> <a id="2910" href="Ledger.Conway.PParams.html#2937" class="Field">collateralPercentage</a> <a id="2931" class="Symbol">=</a> <a id="2933" class="Number">150</a>
                               <a id="2968" class="Symbol">;</a> <a id="2970" href="Ledger.Conway.PParams.html#3073" class="Field">costmdls</a> <a id="2979" class="Symbol">=</a> <a id="2981" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="2984" class="Comment">-- fix this</a>
                               <a id="3027" class="Symbol">;</a> <a id="3029" href="Ledger.Conway.PParams.html#3180" class="Field">drepThresholds</a> <a id="3044" class="Symbol">=</a> <a id="3046" class="Keyword">record</a> <a id="3053" class="Comment">-- unknown so setting all to 50%</a>
                                                    <a id="3138" class="Symbol">{</a> <a id="3140" href="Ledger.Conway.PParams.html#1576" class="Field">P1</a> <a id="3143" class="Symbol">=</a> <a id="3145" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3199" class="Symbol">;</a> <a id="3201" href="Ledger.Conway.PParams.html#1579" class="Field">P2a</a> <a id="3205" class="Symbol">=</a> <a id="3207" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3261" class="Symbol">;</a> <a id="3263" href="Ledger.Conway.PParams.html#1583" class="Field">P2b</a> <a id="3267" class="Symbol">=</a> <a id="3269" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3323" class="Symbol">;</a> <a id="3325" href="Ledger.Conway.PParams.html#1587" class="Field">P3</a> <a id="3328" class="Symbol">=</a> <a id="3330" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3384" class="Symbol">;</a> <a id="3386" href="Ledger.Conway.PParams.html#1590" class="Field">P4</a> <a id="3389" class="Symbol">=</a> <a id="3391" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3445" class="Symbol">;</a> <a id="3447" href="Ledger.Conway.PParams.html#1593" class="Field">P5a</a> <a id="3451" class="Symbol">=</a> <a id="3453" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3507" class="Symbol">;</a> <a id="3509" href="Ledger.Conway.PParams.html#1597" class="Field">P5b</a> <a id="3513" class="Symbol">=</a> <a id="3515" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3569" class="Symbol">;</a> <a id="3571" href="Ledger.Conway.PParams.html#1601" class="Field">P5c</a> <a id="3575" class="Symbol">=</a> <a id="3577" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3631" class="Symbol">;</a> <a id="3633" href="Ledger.Conway.PParams.html#1605" class="Field">P5d</a> <a id="3637" class="Symbol">=</a> <a id="3639" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3693" class="Symbol">;</a> <a id="3695" href="Ledger.Conway.PParams.html#1609" class="Field">P6</a> <a id="3698" class="Symbol">=</a> <a id="3700" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3754" class="Symbol">}</a>
                               <a id="3787" class="Symbol">;</a> <a id="3789" href="Ledger.Conway.PParams.html#3125" class="Field">poolThresholds</a> <a id="3804" class="Symbol">=</a> <a id="3806" class="Keyword">record</a>
                                                    <a id="3865" class="Symbol">{</a> <a id="3867" href="Ledger.Conway.PParams.html#1664" class="Field">Q1</a> <a id="3870" class="Symbol">=</a> <a id="3872" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3926" class="Symbol">;</a> <a id="3928" href="Ledger.Conway.PParams.html#1667" class="Field">Q2a</a> <a id="3932" class="Symbol">=</a> <a id="3934" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="3988" class="Symbol">;</a> <a id="3990" href="Ledger.Conway.PParams.html#1671" class="Field">Q2b</a> <a id="3994" class="Symbol">=</a> <a id="3996" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="4050" class="Symbol">;</a> <a id="4052" href="Ledger.Conway.PParams.html#1675" class="Field">Q4</a> <a id="4055" class="Symbol">=</a> <a id="4057" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="4111" class="Symbol">;</a> <a id="4113" href="Ledger.Conway.PParams.html#1678" class="Field">Q5</a> <a id="4116" class="Symbol">=</a> <a id="4118" href="Data.Rational.Base.html#4367" class="Function">½</a>
                                                    <a id="4172" class="Symbol">}</a>
                               <a id="4205" class="Symbol">;</a> <a id="4207" href="Ledger.Conway.PParams.html#3319" class="Field">govActionLifetime</a> <a id="4225" class="Symbol">=</a> <a id="4227" class="Number">10</a> <a id="4230" class="Comment">-- unknown</a>
                               <a id="4272" class="Symbol">;</a> <a id="4274" href="Ledger.Conway.PParams.html#3361" class="Field">govActionDeposit</a> <a id="4291" class="Symbol">=</a> <a id="4293" class="Number">1000000</a> <a id="4301" class="Comment">-- unknown (set to 1 ada)</a>
                               <a id="4358" class="Symbol">;</a> <a id="4360" href="Ledger.Conway.PParams.html#3406" class="Field">drepDeposit</a> <a id="4372" class="Symbol">=</a> <a id="4374" class="Number">1000000</a> <a id="4382" class="Comment">-- unknown (set to 1 ada)</a>
                               <a id="4439" class="Symbol">;</a> <a id="4441" href="Ledger.Conway.PParams.html#3451" class="Field">drepActivity</a> <a id="4454" class="Symbol">=</a> <a id="4456" class="Number">13</a> <a id="4459" class="Comment">-- unknown</a>
                               <a id="4501" class="Symbol">;</a> <a id="4503" href="Ledger.Conway.PParams.html#3235" class="Field">ccMinSize</a> <a id="4513" class="Symbol">=</a> <a id="4515" class="Number">10</a> <a id="4518" class="Comment">-- unknown</a>
                               <a id="4560" class="Symbol">;</a> <a id="4562" href="Ledger.Conway.PParams.html#3277" class="Field">ccMaxTermLength</a> <a id="4578" class="Symbol">=</a> <a id="4580" class="Number">73</a> <a id="4583" class="Comment">-- unknown set to 1 year (73 epochs)</a>
                               <a id="4651" class="Symbol">}</a> <a id="4653" class="Symbol">}</a>

<a id="createUTxO"></a><a id="4656" href="Ledger.Conway.Test.Lib.html#4656" class="Function">createUTxO</a> <a id="4667" class="Symbol">:</a> <a id="4669" class="Symbol">(</a><a id="4670" href="Ledger.Conway.Test.Lib.html#4670" class="Bound">index</a> <a id="4676" class="Symbol">:</a> <a id="4678" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="4679" class="Symbol">)</a>
           <a id="4692" class="Symbol">→</a> <a id="4694" class="Symbol">(</a><a id="4695" href="Ledger.Conway.Test.Lib.html#4695" class="Bound">wallet</a> <a id="4702" class="Symbol">:</a> <a id="4704" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="4705" class="Symbol">)</a>
           <a id="4718" class="Symbol">→</a> <a id="4720" class="Symbol">(</a><a id="4721" href="Ledger.Conway.Test.Lib.html#4721" class="Bound">value</a> <a id="4727" class="Symbol">:</a> <a id="4729" href="Ledger.Conway.TokenAlgebra.Base.html#504" class="Function">Value</a><a id="4734" class="Symbol">)</a>
           <a id="4747" class="Symbol">→</a> <a id="4749" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4755" class="Symbol">(</a><a id="4756" href="Ledger.Conway.Test.Lib.html#171" class="Bound">D</a> <a id="4758" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4760" href="Ledger.Conway.Script.Base.html#1693" class="Function">DataHash</a><a id="4768" class="Symbol">)</a>
           <a id="4781" class="Symbol">→</a> <a id="4783" href="Ledger.Conway.Transaction.html#2334" class="Function">TxIn</a> <a id="4788" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4790" href="Ledger.Conway.Transaction.html#2357" class="Function">TxOut</a>
<a id="4796" href="Ledger.Conway.Test.Lib.html#4656" class="Function">createUTxO</a> <a id="4807" href="Ledger.Conway.Test.Lib.html#4807" class="Bound">index</a> <a id="4813" href="Ledger.Conway.Test.Lib.html#4813" class="Bound">wallet</a> <a id="4820" href="Ledger.Conway.Test.Lib.html#4820" class="Bound">value</a> <a id="4826" href="Ledger.Conway.Test.Lib.html#4826" class="Bound">d</a> <a id="4828" class="Symbol">=</a> <a id="4830" class="Symbol">(</a><a id="4831" href="Ledger.Conway.Test.Lib.html#4807" class="Bound">index</a> <a id="4837" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4839" href="Ledger.Conway.Test.Lib.html#4807" class="Bound">index</a><a id="4844" class="Symbol">)</a>
                                <a id="4878" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4880" class="Symbol">(</a><a id="4881" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="4886" class="Symbol">(</a><a id="4887" class="Keyword">record</a> <a id="4894" class="Symbol">{</a> <a id="4896" href="Ledger.Conway.Address.html#1106" class="Field">net</a> <a id="4900" class="Symbol">=</a> <a id="4902" class="Number">0</a> <a id="4904" class="Symbol">;</a> <a id="4906" href="Ledger.Conway.Address.html#1131" class="Field">pay</a> <a id="4910" class="Symbol">=</a> <a id="4912" href="Ledger.Conway.Address.html#274" class="InductiveConstructor">KeyHashObj</a> <a id="4923" href="Ledger.Conway.Test.Lib.html#4813" class="Bound">wallet</a> <a id="4930" class="Symbol">;</a> <a id="4932" href="Ledger.Conway.Address.html#1159" class="Field">stake</a> <a id="4938" class="Symbol">=</a> <a id="4940" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4945" class="Symbol">(</a><a id="4946" href="Ledger.Conway.Address.html#274" class="InductiveConstructor">KeyHashObj</a> <a id="4957" href="Ledger.Conway.Test.Lib.html#4813" class="Bound">wallet</a><a id="4963" class="Symbol">)</a> <a id="4965" class="Symbol">})</a>
                                  <a id="5002" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5004" href="Ledger.Conway.Test.Lib.html#4820" class="Bound">value</a> <a id="5010" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5012" href="Ledger.Conway.Test.Lib.html#4826" class="Bound">d</a> <a id="5014" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5016" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="5023" class="Symbol">)</a>

<a id="createInitUtxoState"></a><a id="5026" href="Ledger.Conway.Test.Lib.html#5026" class="Function">createInitUtxoState</a> <a id="5046" class="Symbol">:</a> <a id="5048" class="Symbol">(</a><a id="5049" href="Ledger.Conway.Test.Lib.html#5049" class="Bound">wallets</a> <a id="5057" class="Symbol">:</a> <a id="5059" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="5060" class="Symbol">)</a>
                    <a id="5082" class="Symbol">→</a> <a id="5084" class="Symbol">(</a><a id="5085" href="Ledger.Conway.Test.Lib.html#5085" class="Bound">value</a> <a id="5091" class="Symbol">:</a> <a id="5093" href="Ledger.Conway.TokenAlgebra.Base.html#504" class="Function">Value</a><a id="5098" class="Symbol">)</a>
                    <a id="5120" class="Symbol">→</a> <a id="5122" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5127" class="Symbol">(</a><a id="5128" href="Ledger.Conway.Transaction.html#2334" class="Function">TxIn</a> <a id="5133" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5135" href="Ledger.Conway.Transaction.html#2357" class="Function">TxOut</a><a id="5140" class="Symbol">)</a>
<a id="5142" href="Ledger.Conway.Test.Lib.html#5026" class="Function">createInitUtxoState</a> <a id="5162" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="5167" href="Ledger.Conway.Test.Lib.html#5167" class="Bound">value</a> <a id="5173" class="Symbol">=</a> <a id="5175" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="5178" href="Ledger.Conway.Test.Lib.html#5026" class="Function">createInitUtxoState</a> <a id="5198" class="Symbol">(</a><a id="5199" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5203" href="Ledger.Conway.Test.Lib.html#5203" class="Bound">wallet</a><a id="5209" class="Symbol">)</a> <a id="5211" href="Ledger.Conway.Test.Lib.html#5211" class="Bound">value</a> <a id="5217" class="Symbol">=</a> <a id="5219" href="Ledger.Conway.Test.Lib.html#4656" class="Function">createUTxO</a> <a id="5230" class="Symbol">(</a><a id="5231" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5235" href="Ledger.Conway.Test.Lib.html#5203" class="Bound">wallet</a><a id="5241" class="Symbol">)</a> <a id="5243" class="Symbol">(</a><a id="5244" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="5248" href="Ledger.Conway.Test.Lib.html#5203" class="Bound">wallet</a><a id="5254" class="Symbol">)</a> <a id="5256" href="Ledger.Conway.Test.Lib.html#5211" class="Bound">value</a> <a id="5262" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                                         <a id="5311" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5313" href="Ledger.Conway.Test.Lib.html#5026" class="Function">createInitUtxoState</a> <a id="5333" href="Ledger.Conway.Test.Lib.html#5203" class="Bound">wallet</a> <a id="5340" href="Ledger.Conway.Test.Lib.html#5211" class="Bound">value</a>

<a id="fromList&#39;"></a><a id="5347" href="Ledger.Conway.Test.Lib.html#5347" class="Function">fromList&#39;</a> <a id="5357" class="Symbol">:</a> <a id="5359" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5364" class="Symbol">(</a><a id="5365" href="Ledger.Conway.Transaction.html#2334" class="Function">TxIn</a> <a id="5370" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5372" href="Ledger.Conway.Transaction.html#2357" class="Function">TxOut</a><a id="5377" class="Symbol">)</a> <a id="5379" class="Symbol">→</a> <a id="5381" href="Ledger.Conway.Transaction.html#2425" class="Function">UTxO</a>
<a id="5386" href="Ledger.Conway.Test.Lib.html#5347" class="Function">fromList&#39;</a> <a id="5396" class="Symbol">=</a> <a id="5398" href="Axiom.Set.Map.html#2713" class="Function">fromListᵐ</a>

<a id="fromListIx"></a><a id="5409" href="Ledger.Conway.Test.Lib.html#5409" class="Function">fromListIx</a> <a id="5420" class="Symbol">:</a> <a id="5422" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5427" class="Symbol">(</a><a id="5428" href="Ledger.Conway.Test.LedgerImplementation.html#1872" class="Function">Implementation.Ix</a> <a id="5446" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5448" href="Ledger.Conway.Transaction.html#2357" class="Function">TxOut</a><a id="5453" class="Symbol">)</a> <a id="5455" class="Symbol">→</a> <a id="5457" href="Ledger.Conway.Test.LedgerImplementation.html#1872" class="Function">Implementation.Ix</a> <a id="5475" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="5477" href="Ledger.Conway.Transaction.html#2357" class="Function">TxOut</a>
<a id="5483" href="Ledger.Conway.Test.Lib.html#5409" class="Function">fromListIx</a> <a id="5494" class="Symbol">=</a> <a id="5496" href="Axiom.Set.Map.html#2713" class="Function">fromListᵐ</a>

<a id="applyScript"></a><a id="5507" href="Ledger.Conway.Test.Lib.html#5507" class="Function">applyScript</a> <a id="5519" class="Symbol">:</a> <a id="5521" class="Symbol">(</a><a id="5522" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5528" href="Ledger.Conway.Test.Lib.html#171" class="Bound">D</a> <a id="5530" class="Symbol">→</a> <a id="5532" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5538" href="Ledger.Conway.Test.Lib.html#171" class="Bound">D</a> <a id="5540" class="Symbol">→</a> <a id="5542" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="5546" class="Symbol">)</a> <a id="5548" class="Symbol">→</a> <a id="5550" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5555" href="Ledger.Conway.Test.Lib.html#171" class="Bound">D</a> <a id="5557" class="Symbol">→</a> <a id="5559" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="5564" href="Ledger.Conway.Test.Lib.html#5507" class="Function">applyScript</a> <a id="5576" href="Ledger.Conway.Test.Lib.html#5576" class="Bound">f</a> <a id="5578" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="5581" class="Symbol">=</a> <a id="5583" href="Ledger.Conway.Test.Lib.html#5576" class="Bound">f</a> <a id="5585" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5593" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="5601" href="Ledger.Conway.Test.Lib.html#5507" class="Function">applyScript</a> <a id="5613" href="Ledger.Conway.Test.Lib.html#5613" class="Bound">f</a> <a id="5615" class="Symbol">(_</a> <a id="5618" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5620" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5622" class="Symbol">)</a> <a id="5624" class="Symbol">=</a> <a id="5626" href="Ledger.Conway.Test.Lib.html#5613" class="Bound">f</a> <a id="5628" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5636" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="5644" href="Ledger.Conway.Test.Lib.html#5507" class="Function">applyScript</a> <a id="5656" href="Ledger.Conway.Test.Lib.html#5656" class="Bound">f</a> <a id="5658" class="Symbol">(</a><a id="5659" href="Ledger.Conway.Test.Lib.html#5659" class="Bound">redeemer</a> <a id="5668" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5670" href="Ledger.Conway.Test.Lib.html#5670" class="Bound">valcontext</a> <a id="5681" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5683" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5685" class="Symbol">)</a> <a id="5687" class="Symbol">=</a> <a id="5689" href="Ledger.Conway.Test.Lib.html#5656" class="Bound">f</a> <a id="5691" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5699" class="Symbol">(</a><a id="5700" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5705" href="Ledger.Conway.Test.Lib.html#5659" class="Bound">redeemer</a><a id="5713" class="Symbol">)</a>
<a id="5715" href="Ledger.Conway.Test.Lib.html#5507" class="Function">applyScript</a> <a id="5727" href="Ledger.Conway.Test.Lib.html#5727" class="Bound">f</a> <a id="5729" class="Symbol">(</a><a id="5730" href="Ledger.Conway.Test.Lib.html#5730" class="Bound">datum</a> <a id="5736" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5738" href="Ledger.Conway.Test.Lib.html#5738" class="Bound">redeemer</a> <a id="5747" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5749" href="Ledger.Conway.Test.Lib.html#5749" class="Bound">valcontext</a> <a id="5760" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5762" class="Symbol">_)</a> <a id="5765" class="Symbol">=</a> <a id="5767" href="Ledger.Conway.Test.Lib.html#5727" class="Bound">f</a> <a id="5769" class="Symbol">(</a><a id="5770" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5775" href="Ledger.Conway.Test.Lib.html#5730" class="Bound">datum</a><a id="5780" class="Symbol">)</a> <a id="5782" class="Symbol">(</a><a id="5783" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5788" href="Ledger.Conway.Test.Lib.html#5738" class="Bound">redeemer</a><a id="5796" class="Symbol">)</a>

<a id="notEmpty"></a><a id="5799" href="Ledger.Conway.Test.Lib.html#5799" class="Function">notEmpty</a> <a id="5808" class="Symbol">:</a> <a id="5810" class="Symbol">∀</a> <a id="5812" class="Symbol">{</a><a id="5813" href="Ledger.Conway.Test.Lib.html#5813" class="Bound">A</a> <a id="5815" class="Symbol">:</a> <a id="5817" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="5821" class="Symbol">}</a> <a id="5823" class="Symbol">→</a> <a id="5825" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5830" href="Ledger.Conway.Test.Lib.html#5813" class="Bound">A</a> <a id="5832" class="Symbol">→</a> <a id="5834" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="5839" href="Ledger.Conway.Test.Lib.html#5799" class="Function">notEmpty</a> <a id="5848" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="5851" class="Symbol">=</a> <a id="5853" href="Data.Empty.html#914" class="Function">⊥</a>
<a id="5855" href="Ledger.Conway.Test.Lib.html#5799" class="Function">notEmpty</a> <a id="5864" class="Symbol">(</a><a id="5865" href="Ledger.Conway.Test.Lib.html#5865" class="Bound">x</a> <a id="5867" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5869" href="Ledger.Conway.Test.Lib.html#5869" class="Bound">xs</a><a id="5871" class="Symbol">)</a> <a id="5873" class="Symbol">=</a> <a id="5875" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="isSuccess"></a><a id="5878" href="Ledger.Conway.Test.Lib.html#5878" class="Function">isSuccess</a> <a id="5888" class="Symbol">:</a> <a id="5890" href="Interface.ComputationalRelation.html#235" class="Datatype">ComputationResult</a> <a id="5908" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="5915" href="Ledger.Conway.Utxo.html#1390" class="Record">UTxOState</a> <a id="5925" class="Symbol">→</a> <a id="5927" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="5932" href="Ledger.Conway.Test.Lib.html#5878" class="Function">isSuccess</a> <a id="5942" class="Symbol">(</a><a id="5943" href="Interface.ComputationalRelation.html#308" class="InductiveConstructor">success</a> <a id="5951" href="Ledger.Conway.Test.Lib.html#5951" class="Bound">x</a><a id="5952" class="Symbol">)</a> <a id="5954" class="Symbol">=</a> <a id="5956" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="5961" href="Ledger.Conway.Test.Lib.html#5878" class="Function">isSuccess</a> <a id="5971" class="Symbol">(</a><a id="5972" href="Interface.ComputationalRelation.html#348" class="InductiveConstructor">failure</a> <a id="5980" href="Ledger.Conway.Test.Lib.html#5980" class="Bound">x</a><a id="5981" class="Symbol">)</a> <a id="5983" class="Symbol">=</a> <a id="5985" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>

<a id="5992" class="Comment">-- [1] https://github.com/IntersectMBO/cardano-ledger/blob/master/docs/adr/2024-08-14_009-refscripts-fee-change.md</a>
</pre></body></html>