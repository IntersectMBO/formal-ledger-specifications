<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Test.Examples.DEx.OffChain.Start</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Test.Examples.DEx.OffChain.Start.html" class="Module">Test.Examples.DEx.OffChain.Start</a> <a id="65" class="Keyword">where</a>

<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="99" class="Keyword">open</a> <a id="104" class="Keyword">import</a> <a id="111" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a> <a id="149" class="Keyword">using</a> <a id="155" class="Symbol">(</a><a id="156" href="Ledger.Core.Specification.Transaction.html#896" class="Record">TransactionStructure</a><a id="176" class="Symbol">)</a>

<a id="179" class="Keyword">open</a> <a id="184" class="Keyword">import</a> <a id="191" href="Test.Examples.DEx.Datum.html" class="Module">Test.Examples.DEx.Datum</a>
<a id="215" class="Keyword">open</a> <a id="220" class="Keyword">import</a> <a id="227" href="Test.Examples.DEx.OffChain.Lib.html" class="Module">Test.Examples.DEx.OffChain.Lib</a>
<a id="258" class="Keyword">open</a> <a id="263" class="Keyword">import</a> <a id="270" href="Test.Examples.DEx.Validator.html" class="Module">Test.Examples.DEx.Validator</a>
<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Test.Prelude.html" class="Module">Test.Prelude</a> <a id="323" href="Test.Examples.DEx.Datum.html#695" class="Function">DExData</a>
<a id="331" class="Keyword">open</a> <a id="336" class="Keyword">import</a> <a id="343" href="Test.SymbolicData.html" class="Module">Test.SymbolicData</a> <a id="361" href="Test.Examples.DEx.Datum.html#695" class="Function">DExData</a>
<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Test.LedgerImplementation.html" class="Module">Test.LedgerImplementation</a> <a id="407" href="Test.SymbolicData.html#240" class="Function">SData</a> <a id="413" href="Test.SymbolicData.html#240" class="Function">SData</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Test.Lib.html" class="Module">Test.Lib</a> <a id="440" href="Test.SymbolicData.html#2902" class="Function">valContext</a>

<a id="452" class="Keyword">open</a> <a id="457" href="Ledger.Core.Specification.Transaction.html#896" class="Module">TransactionStructure</a> <a id="478" href="Test.LedgerImplementation.html#4275" class="Function">SVTransactionStructure</a>
<a id="501" class="Keyword">open</a> <a id="506" href="Test.LedgerImplementation.html#1056" class="Module">Implementation</a>

<a id="522" class="Keyword">open</a> <a id="527" class="Keyword">import</a> <a id="534" href="Test.AbstractImplementation.html" class="Module">Test.AbstractImplementation</a> <a id="562" href="Test.SymbolicData.html#2902" class="Function">valContext</a>

<a id="574" class="Keyword">open</a> <a id="579" class="Keyword">import</a> <a id="586" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a> <a id="626" href="Test.LedgerImplementation.html#4275" class="Function">SVTransactionStructure</a> <a id="649" href="Test.AbstractImplementation.html#673" class="Function">SVAbstractFunctions</a>

<a id="670" class="Keyword">import</a> <a id="677" href="Data.Rational.Base.html" class="Module">Data.Rational.Base</a> <a id="696" class="Symbol">as</a> <a id="699" class="Module">Q</a>

<a id="startTxOut"></a><a id="702" href="Test.Examples.DEx.OffChain.Start.html#702" class="Function">startTxOut</a> <a id="713" class="Symbol">:</a> <a id="715" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="721" class="Symbol">→</a> <a id="723" href="Data.Rational.Base.html#1421" class="Record">Q.ℚ</a> <a id="727" class="Symbol">→</a> <a id="729" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="731" class="Symbol">→</a> <a id="733" href="Test.LedgerImplementation.html#1450" class="Function">PlutusScript</a> <a id="746" class="Symbol">→</a> <a id="748" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a>
<a id="754" href="Test.Examples.DEx.OffChain.Start.html#702" class="Function">startTxOut</a> <a id="765" href="Test.Examples.DEx.OffChain.Start.html#765" class="Bound">v</a> <a id="767" href="Test.Examples.DEx.OffChain.Start.html#767" class="Bound">r</a> <a id="769" href="Test.Examples.DEx.OffChain.Start.html#769" class="Bound">o</a> <a id="771" href="Test.Examples.DEx.OffChain.Start.html#771" class="Bound">script</a> <a id="778" class="Symbol">=</a> <a id="780" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="785" class="Symbol">(</a><a id="786" class="Keyword">record</a> <a id="793" class="Symbol">{</a> <a id="795" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="799" class="Symbol">=</a> <a id="801" class="Number">0</a> <a id="803" class="Symbol">;</a>
                           <a id="832" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="836" class="Symbol">=</a> <a id="838" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="848" class="Symbol">(</a><a id="849" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="855" href="Test.Examples.DEx.OffChain.Start.html#771" class="Bound">script</a><a id="861" class="Symbol">)</a> <a id="863" class="Symbol">;</a>
                           <a id="892" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="898" class="Symbol">=</a> <a id="900" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="905" class="Symbol">(</a><a id="906" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="916" class="Symbol">(</a><a id="917" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="923" href="Test.Examples.DEx.OffChain.Start.html#771" class="Bound">script</a><a id="929" class="Symbol">))</a> <a id="932" class="Symbol">})</a>
                           <a id="962" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="964" href="Test.Examples.DEx.OffChain.Start.html#765" class="Bound">v</a>
                           <a id="993" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="995" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1000" class="Symbol">(</a><a id="1001" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1006" class="Symbol">(</a><a id="1007" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1012" class="Symbol">(</a><a id="1013" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1018" class="Symbol">(</a><a id="1019" href="Test.Examples.DEx.Datum.html#389" class="InductiveConstructor">Always</a> <a id="1026" href="Test.Examples.DEx.OffChain.Start.html#767" class="Bound">r</a> <a id="1028" href="Test.Examples.DEx.OffChain.Start.html#769" class="Bound">o</a><a id="1029" class="Symbol">))))</a> <a id="1034" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1036" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>


<a id="startTx"></a><a id="1046" href="Test.Examples.DEx.OffChain.Start.html#1046" class="Function">startTx</a> <a id="1054" class="Symbol">:</a> <a id="1056" class="Symbol">(</a><a id="1057" href="Test.Examples.DEx.OffChain.Start.html#1057" class="Bound">id</a> <a id="1060" href="Test.Examples.DEx.OffChain.Start.html#1060" class="Bound">w</a> <a id="1062" href="Test.Examples.DEx.OffChain.Start.html#1062" class="Bound">tw</a> <a id="1065" class="Symbol">:</a> <a id="1067" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1068" class="Symbol">)</a> <a id="1070" class="Symbol">→</a> <a id="1072" class="Symbol">(</a><a id="1073" href="Test.Examples.DEx.OffChain.Start.html#1073" class="Bound">v</a> <a id="1075" class="Symbol">:</a> <a id="1077" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a><a id="1082" class="Symbol">)</a> <a id="1084" class="Symbol">→</a> <a id="1086" href="Data.Rational.Base.html#1421" class="Record">Q.ℚ</a> <a id="1090" class="Symbol">→</a> <a id="1092" href="Test.LedgerImplementation.html#1450" class="Function">PlutusScript</a> <a id="1105" class="Symbol">→</a> <a id="1107" href="Ledger.Conway.Specification.Transaction.html#1719" class="Record">Tx</a>
<a id="1110" href="Test.Examples.DEx.OffChain.Start.html#1046" class="Function">startTx</a> <a id="1118" href="Test.Examples.DEx.OffChain.Start.html#1118" class="Bound">id</a> <a id="1121" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a> <a id="1123" href="Test.Examples.DEx.OffChain.Start.html#1123" class="Bound">tw</a> <a id="1126" href="Test.Examples.DEx.OffChain.Start.html#1126" class="Bound">v</a> <a id="1128" href="Test.Examples.DEx.OffChain.Start.html#1128" class="Bound">r</a> <a id="1130" href="Test.Examples.DEx.OffChain.Start.html#1130" class="Bound">script</a> <a id="1137" class="Symbol">=</a> <a id="1139" class="Keyword">record</a> <a id="1146" class="Symbol">{</a> <a id="1148" href="Ledger.Conway.Specification.Transaction.html#1747" class="Field">body</a> <a id="1153" class="Symbol">=</a> <a id="1155" class="Keyword">record</a> <a id="1162" href="Test.Examples.DEx.OffChain.Lib.html#611" class="Function">defaultTxBody</a>
                         <a id="1201" class="Symbol">{</a> <a id="1203" href="Ledger.Conway.Specification.Transaction.html#382" class="Field">txIns</a> <a id="1209" class="Symbol">=</a> <a id="1211" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="1235" class="Symbol">((</a><a id="1237" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a> <a id="1239" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1241" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a><a id="1242" class="Symbol">)</a> <a id="1244" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1246" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1248" class="Symbol">)</a>
                         <a id="1275" class="Symbol">;</a> <a id="1277" href="Ledger.Conway.Specification.Transaction.html#484" class="Field">txOuts</a> <a id="1284" class="Symbol">=</a> <a id="1286" href="Test.Lib.html#5513" class="Function">fromListIx</a> <a id="1297" class="Symbol">((</a><a id="1299" href="Test.Examples.DEx.OffChain.Start.html#1123" class="Bound">tw</a> <a id="1302" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1304" href="Test.Examples.DEx.OffChain.Start.html#702" class="Function">startTxOut</a> <a id="1315" href="Test.Examples.DEx.OffChain.Start.html#1126" class="Bound">v</a> <a id="1317" href="Test.Examples.DEx.OffChain.Start.html#1128" class="Bound">r</a> <a id="1319" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a> <a id="1321" href="Test.Examples.DEx.OffChain.Start.html#1130" class="Bound">script</a><a id="1327" class="Symbol">)</a>
                                               <a id="1376" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1378" class="Symbol">(</a><a id="1379" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a>
                                                 <a id="1430" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1432" class="Symbol">((</a><a id="1434" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1439" class="Symbol">(</a><a id="1440" class="Keyword">record</a> <a id="1447" class="Symbol">{</a> <a id="1449" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="1453" class="Symbol">=</a> <a id="1455" class="Number">0</a> <a id="1457" class="Symbol">;</a>
                                                                    <a id="1527" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="1531" class="Symbol">=</a> <a id="1533" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1544" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a> <a id="1546" class="Symbol">;</a>
                                                                    <a id="1616" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="1622" class="Symbol">=</a> <a id="1624" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1629" class="Symbol">(</a><a id="1630" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1641" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a><a id="1642" class="Symbol">)</a> <a id="1644" class="Symbol">}))</a>
                                               <a id="1695" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1697" class="Symbol">((</a><a id="1699" href="Test.Examples.DEx.Validator.html#924" class="Function">startValue</a> <a id="1710" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1712" href="Test.Examples.DEx.Validator.html#883" class="Function">feeValue</a><a id="1720" class="Symbol">)</a> <a id="1722" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1724" href="Test.Examples.DEx.OffChain.Start.html#1126" class="Bound">v</a><a id="1725" class="Symbol">)</a> <a id="1727" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1729" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1737" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1739" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1746" class="Symbol">))</a>
                                               <a id="1796" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1798" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1800" class="Symbol">)</a>
                         <a id="1827" class="Symbol">;</a> <a id="1829" href="Ledger.Conway.Specification.Transaction.html#522" class="Field">txId</a> <a id="1834" class="Symbol">=</a> <a id="1836" href="Test.Examples.DEx.OffChain.Start.html#1118" class="Bound">id</a>
                         <a id="1864" class="Symbol">;</a> <a id="1866" href="Ledger.Conway.Specification.Transaction.html#450" class="Field">collateralInputs</a> <a id="1883" class="Symbol">=</a> <a id="1885" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="1909" class="Symbol">((</a><a id="1911" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a> <a id="1913" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1915" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a><a id="1916" class="Symbol">)</a> <a id="1918" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1920" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1922" class="Symbol">)</a>
                         <a id="1949" class="Symbol">}</a> <a id="1951" class="Symbol">;</a>
                <a id="1969" href="Ledger.Conway.Specification.Transaction.html#1769" class="Field">wits</a> <a id="1974" class="Symbol">=</a> <a id="1976" class="Keyword">record</a> <a id="1983" class="Symbol">{</a> <a id="1985" href="Ledger.Core.Specification.Transaction.html#2928" class="Field">vkSigs</a> <a id="1992" class="Symbol">=</a> <a id="1994" href="Axiom.Set.Map.html#2713" class="Function">fromListᵐ</a> <a id="2004" class="Symbol">((</a><a id="2006" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a> <a id="2008" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2010" class="Symbol">(</a><a id="2011" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="2015" class="Symbol">{{</a><a id="2017" href="Class.HasAdd.Instances.html#143" class="Function">addNat</a><a id="2023" class="Symbol">}}</a> <a id="2026" href="Test.Examples.DEx.OffChain.Start.html#1121" class="Bound">w</a> <a id="2028" href="Test.Examples.DEx.OffChain.Start.html#1118" class="Bound">id</a><a id="2030" class="Symbol">))</a> <a id="2033" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2035" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2037" class="Symbol">)</a> <a id="2039" class="Symbol">;</a>
                                <a id="2073" href="Ledger.Core.Specification.Transaction.html#2956" class="Field">scripts</a> <a id="2081" class="Symbol">=</a> <a id="2083" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2085" class="Symbol">;</a> 
                                <a id="2120" href="Ledger.Core.Specification.Transaction.html#2982" class="Field">txdats</a> <a id="2127" class="Symbol">=</a> <a id="2129" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2131" class="Symbol">;</a> 
                                <a id="2166" href="Ledger.Core.Specification.Transaction.html#3007" class="Field">txrdmrs</a> <a id="2174" class="Symbol">=</a> <a id="2176" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2178" class="Symbol">}</a> <a id="2180" class="Symbol">;</a>
                <a id="2198" href="Ledger.Conway.Specification.Transaction.html#1796" class="Field">txsize</a> <a id="2205" class="Symbol">=</a> <a id="2207" class="Number">10</a> <a id="2210" class="Symbol">;</a>
                <a id="2228" href="Ledger.Conway.Specification.Transaction.html#1813" class="Field">isValid</a> <a id="2236" class="Symbol">=</a> <a id="2238" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2243" class="Symbol">;</a>
                <a id="2261" href="Ledger.Conway.Specification.Transaction.html#1833" class="Field">txAD</a> <a id="2266" class="Symbol">=</a> <a id="2268" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2276" class="Symbol">}</a>
</pre></body></html>