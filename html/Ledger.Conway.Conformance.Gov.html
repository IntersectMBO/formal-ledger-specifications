<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Gov</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="74" class="Keyword">open</a> <a id="79" class="Keyword">import</a> <a id="86" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a>

<a id="125" class="Keyword">module</a> <a id="132" href="Ledger.Conway.Conformance.Gov.html" class="Module">Ledger.Conway.Conformance.Gov</a>
  <a id="164" class="Symbol">(</a><a id="165" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="169" class="Symbol">:</a> <a id="171" href="Ledger.Core.Specification.Transaction.html#896" class="Record">TransactionStructure</a><a id="191" class="Symbol">)</a> <a id="193" class="Symbol">(</a><a id="194" class="Keyword">open</a> <a id="199" href="Ledger.Core.Specification.Transaction.html#896" class="Module">TransactionStructure</a> <a id="220" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="224" class="Keyword">hiding</a> <a id="231" class="Symbol">(</a><a id="232" href="Ledger.Core.Specification.Epoch.html#858" class="Function">epoch</a><a id="237" class="Symbol">))</a>
  <a id="242" class="Symbol">(</a><a id="243" href="Ledger.Conway.Conformance.Gov.html#243" class="Bound">abs</a> <a id="247" class="Symbol">:</a> <a id="249" href="Ledger.Conway.Specification.Abstract.html#653" class="Record">AbstractFunctions</a> <a id="267" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a><a id="270" class="Symbol">)</a> <a id="272" class="Symbol">(</a><a id="273" class="Keyword">open</a> <a id="278" href="Ledger.Conway.Specification.Abstract.html#653" class="Module">AbstractFunctions</a> <a id="296" href="Ledger.Conway.Conformance.Gov.html#243" class="Bound">abs</a><a id="299" class="Symbol">)</a>
  <a id="303" class="Keyword">where</a>

<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Axiom.Set.Properties.html" class="Module">Axiom.Set.Properties</a> <a id="371" href="Axiom.Set.html#10936" class="Function">th</a> <a id="374" class="Keyword">using</a> <a id="380" class="Symbol">(</a><a id="381" href="Axiom.Set.Properties.html#17410" class="Function">∃-sublist-⇔</a><a id="392" class="Symbol">)</a>

<a id="395" class="Keyword">open</a> <a id="400" class="Keyword">import</a> <a id="407" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="441" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
<a id="454" class="Keyword">open</a> <a id="459" class="Keyword">import</a> <a id="466" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="501" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="505" href="Ledger.Conway.Conformance.Gov.html#243" class="Bound">abs</a>

<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="554" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
<a id="567" class="Keyword">open</a> <a id="572" class="Keyword">import</a> <a id="579" href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="Module">Ledger.Conway.Conformance.Equivalence.Certs</a> <a id="623" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="627" href="Ledger.Conway.Conformance.Gov.html#243" class="Bound">abs</a>
<a id="631" class="Keyword">open</a> <a id="636" class="Keyword">import</a> <a id="643" href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="Module">Ledger.Conway.Conformance.Equivalence.Convert</a>

<a id="690" class="Keyword">open</a> <a id="695" class="Keyword">import</a> <a id="702" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="734" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="738" class="Keyword">using</a> <a id="744" class="Symbol">(</a><a id="745" href="Ledger.Conway.Specification.Gov.html#1459" class="Function">GovState</a><a id="753" class="Symbol">)</a> <a id="755" class="Keyword">public</a>
<a id="762" class="Keyword">import</a> <a id="769" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="801" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="805" class="Symbol">as</a> <a id="L"></a><a id="808" href="Ledger.Conway.Conformance.Gov.html#808" class="Module">L</a>


<a id="812" class="Keyword">record</a> <a id="GovEnv"></a><a id="819" href="Ledger.Conway.Conformance.Gov.html#819" class="Record">GovEnv</a> <a id="826" class="Symbol">:</a> <a id="828" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="833" class="Keyword">where</a>
  <a id="841" class="Keyword">field</a>
    <a id="GovEnv.txid"></a><a id="851" href="Ledger.Conway.Conformance.Gov.html#851" class="Field">txid</a>        <a id="863" class="Symbol">:</a> <a id="865" href="Ledger.Core.Specification.Transaction.html#948" class="Field">TxId</a>
    <a id="GovEnv.epoch"></a><a id="874" href="Ledger.Conway.Conformance.Gov.html#874" class="Field">epoch</a>       <a id="886" class="Symbol">:</a> <a id="888" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a>
    <a id="GovEnv.pparams"></a><a id="898" href="Ledger.Conway.Conformance.Gov.html#898" class="Field">pparams</a>     <a id="910" class="Symbol">:</a> <a id="912" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a>
    <a id="GovEnv.ppolicy"></a><a id="924" href="Ledger.Conway.Conformance.Gov.html#924" class="Field">ppolicy</a>     <a id="936" class="Symbol">:</a> <a id="938" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="944" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="GovEnv.enactState"></a><a id="959" href="Ledger.Conway.Conformance.Gov.html#959" class="Field">enactState</a>  <a id="971" class="Symbol">:</a> <a id="973" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a>
    <a id="GovEnv.certState"></a><a id="988" href="Ledger.Conway.Conformance.Gov.html#988" class="Field">certState</a>   <a id="1000" class="Symbol">:</a> <a id="1002" href="Ledger.Conway.Conformance.Certs.html#952" class="Record">CertState</a>
    <a id="GovEnv.rewardCreds"></a><a id="1016" href="Ledger.Conway.Conformance.Gov.html#1016" class="Field">rewardCreds</a> <a id="1028" class="Symbol">:</a> <a id="1030" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1032" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a>

<a id="1044" class="Keyword">instance</a>
  <a id="1055" class="Keyword">unquoteDecl</a> <a id="HasCast-GovEnv"></a><a id="1067" href="Ledger.Conway.Conformance.Gov.html#1067" class="Function">HasCast-GovEnv</a> <a id="1082" class="Symbol">=</a> <a id="1084" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1103" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="1105" class="Symbol">(</a><a id="1106" class="Keyword">quote</a> <a id="1112" href="Ledger.Conway.Conformance.Gov.html#819" class="Record">GovEnv</a> <a id="1119" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1121" href="Ledger.Conway.Conformance.Gov.html#1067" class="Function">HasCast-GovEnv</a><a id="1135" class="Symbol">)</a> <a id="1137" href="Data.List.Base.html#4907" class="Function Operator">]</a>

<a id="_⊢_⇀⦇_,GOVS⦈_"></a><a id="1140" href="Ledger.Conway.Conformance.Gov.html#1140" class="Function Operator">_⊢_⇀⦇_,GOVS⦈_</a> <a id="1154" class="Symbol">:</a> <a id="1156" href="Ledger.Conway.Conformance.Gov.html#819" class="Record">GovEnv</a> <a id="1163" class="Symbol">→</a> <a id="1165" href="Ledger.Conway.Specification.Gov.html#1459" class="Function">GovState</a> <a id="1174" class="Symbol">→</a> <a id="1176" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1181" class="Symbol">(</a><a id="1182" href="Ledger.Core.Specification.Gov.Actions.html#2289" class="Record">GovVote</a> <a id="1190" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1192" href="Ledger.Core.Specification.Gov.Actions.html#3598" class="Record">GovProposal</a><a id="1203" class="Symbol">)</a> <a id="1205" class="Symbol">→</a> <a id="1207" href="Ledger.Conway.Specification.Gov.html#1459" class="Function">GovState</a> <a id="1216" class="Symbol">→</a> <a id="1218" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1223" href="Ledger.Conway.Conformance.Gov.html#1223" class="Bound">Γ</a> <a id="1225" href="Ledger.Conway.Conformance.Gov.html#1140" class="Function Operator">⊢</a> <a id="1227" href="Ledger.Conway.Conformance.Gov.html#1227" class="Bound">govSt</a> <a id="1233" href="Ledger.Conway.Conformance.Gov.html#1140" class="Function Operator">⇀⦇</a> <a id="1236" href="Ledger.Conway.Conformance.Gov.html#1236" class="Bound">gvps</a> <a id="1241" href="Ledger.Conway.Conformance.Gov.html#1140" class="Function Operator">,GOVS⦈</a> <a id="1248" href="Ledger.Conway.Conformance.Gov.html#1248" class="Bound">govSt&#39;</a>
  <a id="1257" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Gov.html#851}{\htmlId{1261}{\htmlClass{Function}{\text{txid}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#874}{\htmlId{1268}{\htmlClass{Function}{\text{epoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#898}{\htmlId{1276}{\htmlClass{Function}{\text{pparams}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#924}{\htmlId{1286}{\htmlClass{Function}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#959}{\htmlId{1296}{\htmlClass{Function}{\text{enactState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{1309}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Gov.html#988}{\htmlId{1314}{\htmlClass{Function}{\text{certState}}}}\, \\
  \,\href{Ledger.Conway.Conformance.Gov.html#1016}{\htmlId{1328}{\htmlClass{Function}{\text{rewardCreds}}}}\, \end{pmatrix}$</a> <a id="1342" href="Ledger.Conway.Specification.Gov.html#16519" class="Function Operator">L.⊢</a> <a id="1346" href="Ledger.Conway.Specification.Ledger.html#2915" class="Function">rmOrphanDRepVotes</a> <a id="1364" class="Symbol">(</a><a id="1365" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="1370" href="Ledger.Conway.Conformance.Gov.html#988" class="Function">certState</a><a id="1379" class="Symbol">)</a> <a id="1381" href="Ledger.Conway.Conformance.Gov.html#1227" class="Bound">govSt</a>  <a id="1388" href="Ledger.Conway.Specification.Gov.html#16519" class="Function Operator">⇀⦇</a> <a id="1391" href="Ledger.Conway.Conformance.Gov.html#1236" class="Bound">gvps</a> <a id="1396" href="Ledger.Conway.Specification.Gov.html#16519" class="Function Operator">,GOVS⦈</a> <a id="1403" href="Ledger.Conway.Conformance.Gov.html#1248" class="Bound">govSt&#39;</a>
  <a id="1412" class="Keyword">where</a> <a id="1418" class="Keyword">open</a> <a id="1423" href="Ledger.Conway.Conformance.Gov.html#819" class="Module">GovEnv</a> <a id="1430" href="Ledger.Conway.Conformance.Gov.html#1223" class="Bound">Γ</a>
</pre></body></html>