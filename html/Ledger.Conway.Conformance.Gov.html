<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Gov</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Core.Specification.Abstract.html" class="Module">Ledger.Core.Specification.Abstract</a>
<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="125" class="Keyword">module</a> <a id="132" href="Ledger.Conway.Conformance.Gov.html" class="Module">Ledger.Conway.Conformance.Gov</a>
  <a id="164" class="Symbol">(</a><a id="165" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="169" class="Symbol">:</a> <a id="171" href="Ledger.Conway.Specification.Transaction.html#991" class="Record">TransactionStructure</a><a id="191" class="Symbol">)</a> <a id="193" class="Symbol">(</a><a id="194" class="Keyword">open</a> <a id="199" href="Ledger.Conway.Specification.Transaction.html#991" class="Module">TransactionStructure</a> <a id="220" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="224" class="Keyword">hiding</a> <a id="231" class="Symbol">(</a><a id="232" href="Ledger.Core.Specification.Epoch.html#858" class="Function">epoch</a><a id="237" class="Symbol">))</a>
  <a id="242" class="Symbol">(</a><a id="243" href="Ledger.Conway.Conformance.Gov.html#243" class="Bound">abs</a> <a id="247" class="Symbol">:</a> <a id="249" href="Ledger.Core.Specification.Abstract.html#828" class="Record">AbstractFunctions</a> <a id="267" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a><a id="270" class="Symbol">)</a>
  <a id="274" class="Keyword">where</a>

<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="309" class="Keyword">open</a> <a id="314" class="Keyword">import</a> <a id="321" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="353" href="Ledger.Conway.Specification.Transaction.html#2065" class="Function">govStructure</a>
<a id="366" class="Keyword">open</a> <a id="371" class="Keyword">import</a> <a id="378" href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="Module">Ledger.Conway.Conformance.Equivalence.Certs</a> <a id="422" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="426" href="Ledger.Conway.Conformance.Gov.html#243" class="Bound">abs</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="Module">Ledger.Conway.Conformance.Equivalence.Convert</a>

<a id="489" class="Keyword">open</a> <a id="494" class="Keyword">import</a> <a id="501" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="535" href="Ledger.Conway.Specification.Transaction.html#2065" class="Function">govStructure</a>
<a id="548" class="Keyword">open</a> <a id="553" class="Keyword">import</a> <a id="560" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="592" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="596" class="Keyword">using</a> <a id="602" class="Symbol">(</a><a id="603" href="Ledger.Conway.Specification.Gov.html#1461" class="Function">GovState</a><a id="611" class="Symbol">)</a> <a id="613" class="Keyword">public</a>
<a id="620" class="Keyword">import</a> <a id="627" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="659" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="663" class="Symbol">as</a> <a id="L"></a><a id="666" href="Ledger.Conway.Conformance.Gov.html#666" class="Module">L</a>
<a id="668" class="Keyword">open</a> <a id="673" class="Keyword">import</a> <a id="680" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="715" href="Ledger.Conway.Conformance.Gov.html#165" class="Bound">txs</a> <a id="719" href="Ledger.Conway.Conformance.Gov.html#243" class="Bound">abs</a>


<a id="725" class="Keyword">record</a> <a id="GovEnv"></a><a id="732" href="Ledger.Conway.Conformance.Gov.html#732" class="Record">GovEnv</a> <a id="739" class="Symbol">:</a> <a id="741" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="746" class="Keyword">where</a>
  <a id="754" class="Keyword">field</a>
    <a id="GovEnv.txid"></a><a id="764" href="Ledger.Conway.Conformance.Gov.html#764" class="Field">txid</a>        <a id="776" class="Symbol">:</a> <a id="778" href="Ledger.Conway.Specification.Transaction.html#1043" class="Field">TxId</a>
    <a id="GovEnv.epoch"></a><a id="787" href="Ledger.Conway.Conformance.Gov.html#787" class="Field">epoch</a>       <a id="799" class="Symbol">:</a> <a id="801" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a>
    <a id="GovEnv.pparams"></a><a id="811" href="Ledger.Conway.Conformance.Gov.html#811" class="Field">pparams</a>     <a id="823" class="Symbol">:</a> <a id="825" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a>
    <a id="GovEnv.ppolicy"></a><a id="837" href="Ledger.Conway.Conformance.Gov.html#837" class="Field">ppolicy</a>     <a id="849" class="Symbol">:</a> <a id="851" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="857" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="GovEnv.enactState"></a><a id="872" href="Ledger.Conway.Conformance.Gov.html#872" class="Field">enactState</a>  <a id="884" class="Symbol">:</a> <a id="886" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a>
    <a id="GovEnv.certState"></a><a id="901" href="Ledger.Conway.Conformance.Gov.html#901" class="Field">certState</a>   <a id="913" class="Symbol">:</a> <a id="915" href="Ledger.Conway.Conformance.Certs.html#958" class="Record">CertState</a>
    <a id="GovEnv.rewardCreds"></a><a id="929" href="Ledger.Conway.Conformance.Gov.html#929" class="Field">rewardCreds</a> <a id="941" class="Symbol">:</a> <a id="943" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="945" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a>

<a id="957" class="Keyword">instance</a>
  <a id="968" class="Keyword">unquoteDecl</a> <a id="HasCast-GovEnv"></a><a id="980" href="Ledger.Conway.Conformance.Gov.html#980" class="Function">HasCast-GovEnv</a> <a id="995" class="Symbol">=</a> <a id="997" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1016" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="1018" class="Symbol">(</a><a id="1019" class="Keyword">quote</a> <a id="1025" href="Ledger.Conway.Conformance.Gov.html#732" class="Record">GovEnv</a> <a id="1032" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1034" href="Ledger.Conway.Conformance.Gov.html#980" class="Function">HasCast-GovEnv</a><a id="1048" class="Symbol">)</a> <a id="1050" href="Data.List.Base.html#4907" class="Function Operator">]</a>

<a id="_⊢_⇀⦇_,GOVS⦈_"></a><a id="1053" href="Ledger.Conway.Conformance.Gov.html#1053" class="Function Operator">_⊢_⇀⦇_,GOVS⦈_</a> <a id="1067" class="Symbol">:</a> <a id="1069" href="Ledger.Conway.Conformance.Gov.html#732" class="Record">GovEnv</a> <a id="1076" class="Symbol">→</a> <a id="1078" href="Ledger.Conway.Specification.Gov.html#1461" class="Function">GovState</a> <a id="1087" class="Symbol">→</a> <a id="1089" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1094" class="Symbol">(</a><a id="1095" href="Ledger.Core.Specification.Gov.Actions.html#2290" class="Record">GovVote</a> <a id="1103" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1105" href="Ledger.Core.Specification.Gov.Actions.html#3599" class="Record">GovProposal</a><a id="1116" class="Symbol">)</a> <a id="1118" class="Symbol">→</a> <a id="1120" href="Ledger.Conway.Specification.Gov.html#1461" class="Function">GovState</a> <a id="1129" class="Symbol">→</a> <a id="1131" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1136" href="Ledger.Conway.Conformance.Gov.html#1136" class="Bound">Γ</a> <a id="1138" href="Ledger.Conway.Conformance.Gov.html#1053" class="Function Operator">⊢</a> <a id="1140" href="Ledger.Conway.Conformance.Gov.html#1140" class="Bound">govSt</a> <a id="1146" href="Ledger.Conway.Conformance.Gov.html#1053" class="Function Operator">⇀⦇</a> <a id="1149" href="Ledger.Conway.Conformance.Gov.html#1149" class="Bound">gvps</a> <a id="1154" href="Ledger.Conway.Conformance.Gov.html#1053" class="Function Operator">,GOVS⦈</a> <a id="1161" href="Ledger.Conway.Conformance.Gov.html#1161" class="Bound">govSt&#39;</a>
  <a id="1170" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Gov.html#764}{\htmlId{1174}{\htmlClass{Function}{\text{txid}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#787}{\htmlId{1181}{\htmlClass{Function}{\text{epoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#811}{\htmlId{1189}{\htmlClass{Function}{\text{pparams}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#837}{\htmlId{1199}{\htmlClass{Function}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#872}{\htmlId{1209}{\htmlClass{Function}{\text{enactState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{1222}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Gov.html#901}{\htmlId{1227}{\htmlClass{Function}{\text{certState}}}}\, \\
  \,\href{Ledger.Conway.Conformance.Gov.html#929}{\htmlId{1241}{\htmlClass{Function}{\text{rewardCreds}}}}\, \end{pmatrix}$</a> <a id="1255" href="Ledger.Conway.Specification.Gov.html#16525" class="Function Operator">L.⊢</a> <a id="1259" href="Ledger.Conway.Specification.Ledger.html#2907" class="Function">rmOrphanDRepVotes</a> <a id="1277" class="Symbol">(</a><a id="1278" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="1283" href="Ledger.Conway.Conformance.Gov.html#901" class="Function">certState</a><a id="1292" class="Symbol">)</a> <a id="1294" href="Ledger.Conway.Conformance.Gov.html#1140" class="Bound">govSt</a>  <a id="1301" href="Ledger.Conway.Specification.Gov.html#16525" class="Function Operator">⇀⦇</a> <a id="1304" href="Ledger.Conway.Conformance.Gov.html#1149" class="Bound">gvps</a> <a id="1309" href="Ledger.Conway.Specification.Gov.html#16525" class="Function Operator">,GOVS⦈</a> <a id="1316" href="Ledger.Conway.Conformance.Gov.html#1161" class="Bound">govSt&#39;</a>
  <a id="1325" class="Keyword">where</a> <a id="1331" class="Keyword">open</a> <a id="1336" href="Ledger.Conway.Conformance.Gov.html#732" class="Module">GovEnv</a> <a id="1343" href="Ledger.Conway.Conformance.Gov.html#1136" class="Bound">Γ</a>
</pre></body></html>