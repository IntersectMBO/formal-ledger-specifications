<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Foreign.HSLedger.ExternalStructures</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Ledger.Conway.Foreign.ExternalFunctions.html" class="Module">Ledger.Conway.Foreign.ExternalFunctions</a>

<a id="54" class="Keyword">module</a> <a id="61" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html" class="Module">Ledger.Conway.Foreign.HSLedger.ExternalStructures</a> <a id="111" class="Symbol">(</a><a id="112" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#112" class="Bound">externalFunctions</a> <a id="130" class="Symbol">:</a> <a id="132" href="Ledger.Conway.Foreign.ExternalFunctions.html#132" class="Record">ExternalFunctions</a><a id="149" class="Symbol">)</a> <a id="151" class="Keyword">where</a>

<a id="158" class="Keyword">open</a> <a id="163" class="Keyword">import</a> <a id="170" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="184" class="Keyword">open</a> <a id="189" class="Keyword">import</a> <a id="196" href="Ledger.Types.Epoch.html" class="Module">Ledger.Types.Epoch</a>
<a id="215" class="Keyword">open</a> <a id="220" class="Keyword">import</a> <a id="227" href="Ledger.Conway.Foreign.HSLedger.Core.html" class="Module">Ledger.Conway.Foreign.HSLedger.Core</a>

<a id="HSGlobalConstants"></a><a id="264" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#264" class="Function">HSGlobalConstants</a> <a id="282" class="Symbol">=</a> <a id="284" href="Ledger.Types.Epoch.html#1895" class="Record">GlobalConstants</a> <a id="300" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="302" class="Keyword">record</a> <a id="309" class="Symbol">{</a><a id="310" href="Ledger.Conway.Foreign.HSLedger.Core.html#1624" class="Module">Implementation</a><a id="324" class="Symbol">}</a>
<a id="326" class="Keyword">instance</a>
  <a id="HSEpochStructure"></a><a id="337" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#337" class="Function">HSEpochStructure</a> <a id="354" class="Symbol">=</a> <a id="356" href="Ledger.Types.Epoch.html#408" class="Record">EpochStructure</a>  <a id="372" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="374" href="Ledger.Types.Epoch.html#2307" class="Function">ℕEpochStructure</a> <a id="390" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#264" class="Function">HSGlobalConstants</a>

  <a id="HSCrypto"></a><a id="411" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#411" class="Function">HSCrypto</a> <a id="420" class="Symbol">:</a> <a id="422" href="Ledger.Crypto.html#1043" class="Record">Crypto</a>
  <a id="431" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#411" class="Function">HSCrypto</a> <a id="440" class="Symbol">=</a> <a id="442" class="Keyword">record</a>
    <a id="453" class="Symbol">{</a> <a id="455" href="Ledger.Conway.Foreign.HSLedger.Core.html#1624" class="Module">Implementation</a>
    <a id="474" class="Symbol">;</a> <a id="476" href="Ledger.Crypto.html#1072" class="Field">pkk</a> <a id="480" class="Symbol">=</a> <a id="482" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#559" class="Function">HSPKKScheme</a>
    <a id="498" class="Symbol">}</a>
    <a id="504" class="Keyword">where</a>
    <a id="514" class="Keyword">open</a> <a id="519" href="Ledger.Conway.Foreign.ExternalFunctions.html#132" class="Module">ExternalFunctions</a> <a id="537" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#112" class="Bound">externalFunctions</a>
    <a id="559" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#559" class="Function">HSPKKScheme</a> <a id="571" class="Symbol">:</a> <a id="573" href="Ledger.Crypto.html#539" class="Record">PKKScheme</a>
    <a id="587" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#559" class="Function">HSPKKScheme</a> <a id="599" class="Symbol">=</a> <a id="601" class="Keyword">record</a>
      <a id="614" class="Symbol">{</a> <a id="616" href="Ledger.Conway.Foreign.HSLedger.Core.html#1624" class="Module">Implementation</a>
      <a id="637" class="Symbol">;</a> <a id="639" href="Ledger.Crypto.html#651" class="Field">isSigned</a>         <a id="656" class="Symbol">=</a> <a id="658" class="Symbol">λ</a> <a id="660" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#660" class="Bound">a</a> <a id="662" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#662" class="Bound">b</a> <a id="664" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#664" class="Bound">m</a> <a id="666" class="Symbol">→</a> <a id="668" href="Ledger.Conway.Foreign.ExternalFunctions.html#170" class="Field">extIsSigned</a> <a id="680" class="Symbol">(</a><a id="681" href="Ledger.Conway.Foreign.HSLedger.Core.html#924" class="Field">HSVKey.hvkVKey</a> <a id="696" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#660" class="Bound">a</a><a id="697" class="Symbol">)</a> <a id="699" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#662" class="Bound">b</a> <a id="701" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#664" class="Bound">m</a> <a id="703" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="705" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="716" class="Symbol">;</a> <a id="718" href="Ledger.Crypto.html#700" class="Field">sign</a>             <a id="735" class="Symbol">=</a> <a id="737" class="Symbol">λ</a> <a id="739" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#739" class="Bound">_</a> <a id="741" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#741" class="Bound">_</a> <a id="743" class="Symbol">→</a> <a id="745" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>
        <a id="758" class="Comment">-- we can&#39;t prove correctness since the function is provided by the Haskell implementation</a>
      <a id="855" class="Symbol">;</a> <a id="857" href="Ledger.Crypto.html#849" class="Field">isSigned-correct</a> <a id="874" class="Symbol">=</a> <a id="876" href="Ledger.Conway.Foreign.Util.html#82" class="Postulate">error</a> <a id="882" class="String">&quot;isSigned-correct evaluated&quot;</a>
      <a id="917" class="Symbol">;</a> <a id="919" href="Ledger.Crypto.html#814" class="Field">Dec-isSigned</a>     <a id="936" class="Symbol">=</a> <a id="938" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="940" class="Symbol">(_</a> <a id="943" href="Class.DecEq.Core.html#159" class="Field Operator">≟</a> <a id="945" class="Symbol">_)</a>
      <a id="954" class="Symbol">}</a>

<a id="957" class="Comment">-- No P2 scripts for now</a>

<a id="983" class="Keyword">open</a> <a id="988" class="Keyword">import</a> <a id="995" href="Ledger.Script.html" class="Module">Ledger.Script</a> <a id="1009" href="Function.Base.html#4736" class="Function">it</a> <a id="1012" href="Function.Base.html#4736" class="Function">it</a>
<a id="1015" class="Keyword">open</a> <a id="1020" class="Keyword">import</a> <a id="1027" href="Ledger.Conway.Conformance.Script.html" class="Module">Ledger.Conway.Conformance.Script</a> <a id="1060" href="Function.Base.html#4736" class="Function">it</a> <a id="1063" href="Function.Base.html#4736" class="Function">it</a> <a id="1066" class="Keyword">public</a>

<a id="1074" class="Keyword">instance</a>
  <a id="HSScriptStructure"></a><a id="1085" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1085" class="Function">HSScriptStructure</a> <a id="1103" class="Symbol">:</a> <a id="1105" href="Ledger.Script.html#5001" class="Record">ScriptStructure</a>
  <a id="1123" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1085" class="Function">HSScriptStructure</a> <a id="1141" class="Symbol">=</a> <a id="1143" class="Keyword">record</a>
    <a id="1154" class="Symbol">{</a> <a id="1156" href="Ledger.Script.html#5040" class="Field">p1s</a> <a id="1160" class="Symbol">=</a> <a id="1162" href="Ledger.Conway.Conformance.Script.html#1251" class="Function">P1ScriptStructure-HTL</a>
    <a id="1188" class="Symbol">;</a> <a id="1190" href="Ledger.Script.html#5110" class="Field">hashRespectsUnion</a> <a id="1208" class="Symbol">=</a> <a id="1210" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1281" class="Function">hashRespectsUnion</a>
    <a id="1232" class="Symbol">;</a> <a id="1234" href="Ledger.Script.html#5227" class="Field">ps</a> <a id="1237" class="Symbol">=</a> <a id="1239" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1501" class="Function">HSP2ScriptStructure</a>
    <a id="1263" class="Symbol">}</a>
    <a id="1269" class="Keyword">where</a>
      <a id="1281" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1281" class="Function">hashRespectsUnion</a> <a id="1299" class="Symbol">:</a> <a id="1301" class="Symbol">∀</a> <a id="1303" class="Symbol">{</a><a id="1304" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1304" class="Bound">A</a> <a id="1306" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1306" class="Bound">B</a> <a id="1308" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1308" class="Bound">ℍ</a><a id="1309" class="Symbol">}</a>
        <a id="1319" class="Symbol">→</a> <a id="1321" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="1330" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1304" class="Bound">A</a> <a id="1332" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1308" class="Bound">ℍ</a> <a id="1334" class="Symbol">→</a> <a id="1336" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="1345" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1306" class="Bound">B</a> <a id="1347" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1308" class="Bound">ℍ</a>
        <a id="1357" class="Symbol">→</a> <a id="1359" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="1368" class="Symbol">(</a><a id="1369" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1304" class="Bound">A</a> <a id="1371" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1373" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1306" class="Bound">B</a><a id="1374" class="Symbol">)</a> <a id="1376" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1308" class="Bound">ℍ</a>
      <a id="1384" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1281" class="Function">hashRespectsUnion</a> <a id="1402" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1402" class="Bound">a</a> <a id="1404" class="Symbol">_</a> <a id="1406" class="Symbol">.</a><a id="1407" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="1412" class="Symbol">(</a><a id="1413" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1418" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1418" class="Bound">x</a><a id="1419" class="Symbol">)</a> <a id="1421" class="Symbol">=</a> <a id="1423" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="1428" class="Symbol">⦃</a> <a id="1430" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1402" class="Bound">a</a> <a id="1432" class="Symbol">⦄</a> <a id="1434" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1418" class="Bound">x</a>
      <a id="1442" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1281" class="Function">hashRespectsUnion</a> <a id="1460" class="Symbol">_</a> <a id="1462" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1462" class="Bound">b</a> <a id="1464" class="Symbol">.</a><a id="1465" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="1470" class="Symbol">(</a><a id="1471" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1476" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1476" class="Bound">y</a><a id="1477" class="Symbol">)</a> <a id="1479" class="Symbol">=</a> <a id="1481" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="1486" class="Symbol">⦃</a> <a id="1488" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1462" class="Bound">b</a> <a id="1490" class="Symbol">⦄</a> <a id="1492" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1476" class="Bound">y</a>

      <a id="1501" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1501" class="Function">HSP2ScriptStructure</a> <a id="1521" class="Symbol">:</a> <a id="1523" href="Ledger.Script.html#897" class="Record">PlutusStructure</a>
      <a id="1545" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1501" class="Function">HSP2ScriptStructure</a> <a id="1565" class="Symbol">=</a> <a id="1567" class="Keyword">record</a>
        <a id="1582" class="Symbol">{</a> <a id="1584" href="Ledger.Conway.Foreign.HSLedger.Core.html#1624" class="Module">Implementation</a>
        <a id="1607" class="Symbol">;</a> <a id="1609" href="Ledger.Script.html#1809" class="Field">validPlutusScript</a> <a id="1627" class="Symbol">=</a> <a id="1629" class="Symbol">λ</a> <a id="1631" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1631" class="Bound">_</a> <a id="1633" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1633" class="Bound">_</a> <a id="1635" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1635" class="Bound">_</a> <a id="1637" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1637" class="Bound">_</a> <a id="1639" class="Symbol">→</a> <a id="1641" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
        <a id="1651" class="Symbol">;</a> <a id="1653" href="Ledger.Script.html#972" class="Field">PlutusScript</a> <a id="1666" class="Symbol">=</a> <a id="1668" href="Ledger.Conway.Conformance.Script.html#997" class="Record">HSPlutusScript</a>
        <a id="1691" class="Symbol">}</a>

<a id="1694" class="Keyword">open</a> <a id="1699" class="Keyword">import</a> <a id="1706" href="Ledger.PParams.html" class="Module">Ledger.PParams</a> <a id="1721" href="Function.Base.html#4736" class="Function">it</a> <a id="1724" href="Function.Base.html#4736" class="Function">it</a> <a id="1727" href="Function.Base.html#4736" class="Function">it</a> <a id="1730" class="Keyword">hiding</a> <a id="1737" class="Symbol">(</a><a id="1738" href="Ledger.PParams.html#674" class="Record">Acnt</a><a id="1742" class="Symbol">;</a> <a id="1744" href="Ledger.PParams.html#1285" class="Record">DrepThresholds</a><a id="1758" class="Symbol">;</a> <a id="1760" href="Ledger.PParams.html#1373" class="Record">PoolThresholds</a><a id="1774" class="Symbol">)</a>

<a id="HsGovParams"></a><a id="1777" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1777" class="Function">HsGovParams</a> <a id="1789" class="Symbol">:</a> <a id="1791" href="Ledger.PParams.html#13772" class="Record">GovParams</a>
<a id="1801" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1777" class="Function">HsGovParams</a> <a id="1813" class="Symbol">=</a> <a id="1815" class="Keyword">record</a>
  <a id="1824" class="Symbol">{</a> <a id="1826" href="Ledger.Conway.Foreign.HSLedger.Core.html#1624" class="Module">Implementation</a>
  <a id="1843" class="Symbol">;</a> <a id="1845" href="Ledger.PParams.html#13804" class="Field">ppUpd</a> <a id="1851" class="Symbol">=</a> <a id="1853" class="Keyword">let</a> <a id="1857" class="Keyword">open</a> <a id="1862" href="Ledger.PParams.html#13377" class="Module">PParamsDiff</a> <a id="1874" class="Keyword">in</a> <a id="1877" class="Symbol">λ</a> <a id="1879" class="Keyword">where</a>
      <a id="1891" class="Symbol">.</a><a id="1892" href="Ledger.PParams.html#13417" class="Field">UpdateT</a>      <a id="1905" class="Symbol">→</a> <a id="1907" href="Ledger.PParams.html#4900" class="Record">PParamsUpdate</a>
      <a id="1927" class="Symbol">.</a><a id="1928" href="Ledger.PParams.html#13482" class="Field">updateGroups</a> <a id="1941" class="Symbol">→</a> <a id="1943" href="Ledger.PParams.html#9039" class="Function">modifiedUpdateGroups</a>
      <a id="1970" class="Symbol">.</a><a id="1971" href="Ledger.PParams.html#13436" class="Field">applyUpdate</a>  <a id="1984" class="Symbol">→</a> <a id="1986" href="Ledger.PParams.html#10100" class="Function">applyPParamsUpdate</a>
      <a id="2011" class="Symbol">.</a><a id="2012" href="Ledger.PParams.html#13530" class="Field">ppWF?</a> <a id="2018" class="Symbol">{</a><a id="2019" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2019" class="Bound">u</a><a id="2020" class="Symbol">}</a>    <a id="2025" class="Symbol">→</a> <a id="2027" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2125" class="Function">ppWF</a> <a id="2032" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2019" class="Bound">u</a>
  <a id="2036" class="Symbol">}</a>
  <a id="2040" class="Keyword">where</a>
    <a id="2050" class="Keyword">open</a> <a id="2055" href="Ledger.PParams.html#4871" class="Module">PParamsUpdate</a>
    <a id="2073" class="Comment">-- FIXME Replace `trustMe` with an actual proof</a>
    <a id="2125" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2125" class="Function">ppWF</a> <a id="2130" class="Symbol">:</a> <a id="2132" class="Symbol">(</a><a id="2133" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2133" class="Bound">u</a> <a id="2135" class="Symbol">:</a> <a id="2137" href="Ledger.PParams.html#4900" class="Record">PParamsUpdate</a><a id="2150" class="Symbol">)</a> <a id="2152" class="Symbol">→</a>
      <a id="2160" class="Symbol">((</a><a id="2162" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2162" class="Bound">pp</a> <a id="2165" class="Symbol">:</a> <a id="2167" href="Ledger.PParams.html#1443" class="Record">PParams</a><a id="2174" class="Symbol">)</a> <a id="2176" class="Symbol">→</a>
      <a id="2184" href="Ledger.PParams.html#3603" class="Function">paramsWellFormed</a> <a id="2201" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2162" class="Bound">pp</a> <a id="2204" class="Symbol">→</a>
      <a id="2212" href="Ledger.PParams.html#3603" class="Function">paramsWellFormed</a> <a id="2229" class="Symbol">(</a><a id="2230" href="Ledger.PParams.html#10100" class="Function">applyPParamsUpdate</a> <a id="2249" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2162" class="Bound">pp</a> <a id="2252" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2133" class="Bound">u</a><a id="2253" class="Symbol">))</a>
      <a id="2262" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
    <a id="2268" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2125" class="Function">ppWF</a> <a id="2273" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2273" class="Bound">u</a> <a id="2275" class="Keyword">with</a> <a id="2280" href="Ledger.PParams.html#6918" class="Function">paramsUpdateWellFormed?</a> <a id="2304" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2273" class="Bound">u</a>
    <a id="2310" class="Symbol">...</a> <a id="2314" class="Symbol">|</a> <a id="2316" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="2320" class="Symbol">_</a> <a id="2322" class="Symbol">=</a> <a id="2324" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="2326" class="Symbol">(</a><a id="2327" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="2331" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2380" class="Postulate">trustMe</a><a id="2338" class="Symbol">)</a>
      <a id="2346" class="Keyword">where</a>
        <a id="2360" class="Keyword">postulate</a>
          <a id="2380" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2380" class="Postulate">trustMe</a> <a id="2388" class="Symbol">:</a>
            <a id="2402" class="Symbol">((</a><a id="2404" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2404" class="Bound">pp</a> <a id="2407" class="Symbol">:</a> <a id="2409" href="Ledger.PParams.html#1443" class="Record">PParams</a><a id="2416" class="Symbol">)</a> <a id="2418" class="Symbol">→</a>
            <a id="2432" href="Ledger.PParams.html#3603" class="Function">paramsWellFormed</a> <a id="2449" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2404" class="Bound">pp</a> <a id="2452" class="Symbol">→</a>
            <a id="2466" href="Ledger.PParams.html#3603" class="Function">paramsWellFormed</a> <a id="2483" class="Symbol">(</a><a id="2484" href="Ledger.PParams.html#10100" class="Function">applyPParamsUpdate</a> <a id="2503" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2404" class="Bound">pp</a> <a id="2506" class="Bound">u</a><a id="2507" class="Symbol">))</a>
    <a id="2514" class="Symbol">...</a> <a id="2518" class="Symbol">|</a> <a id="2520" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="2523" class="Symbol">_</a>  <a id="2526" class="Symbol">=</a> <a id="2528" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="2530" class="Symbol">(</a><a id="2531" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="2534" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2583" class="Postulate">trustMe</a><a id="2541" class="Symbol">)</a>
      <a id="2549" class="Keyword">where</a>
        <a id="2563" class="Keyword">postulate</a>
          <a id="2583" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2583" class="Postulate">trustMe</a> <a id="2591" class="Symbol">:</a>
            <a id="2605" href="Relation.Nullary.Negation.Core.html#658" class="Function Operator">¬</a><a id="2606" class="Symbol">((</a><a id="2608" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2608" class="Bound">pp</a> <a id="2611" class="Symbol">:</a> <a id="2613" href="Ledger.PParams.html#1443" class="Record">PParams</a><a id="2620" class="Symbol">)</a> <a id="2622" class="Symbol">→</a>
            <a id="2636" href="Ledger.PParams.html#3603" class="Function">paramsWellFormed</a> <a id="2653" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2608" class="Bound">pp</a> <a id="2656" class="Symbol">→</a>
            <a id="2670" href="Ledger.PParams.html#3603" class="Function">paramsWellFormed</a> <a id="2687" class="Symbol">(</a><a id="2688" href="Ledger.PParams.html#10100" class="Function">applyPParamsUpdate</a> <a id="2707" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2608" class="Bound">pp</a> <a id="2710" class="Bound">u</a><a id="2711" class="Symbol">))</a>

<a id="2715" class="Keyword">instance</a>
  <a id="HSTransactionStructure"></a><a id="2726" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2726" class="Function">HSTransactionStructure</a> <a id="2749" class="Symbol">:</a> <a id="2751" href="Ledger.Transaction.html#867" class="Record">TransactionStructure</a>
  <a id="2774" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2726" class="Function">HSTransactionStructure</a> <a id="2797" class="Symbol">=</a> <a id="2799" class="Keyword">record</a>
    <a id="2810" class="Symbol">{</a> <a id="2812" href="Ledger.Conway.Foreign.HSLedger.Core.html#1624" class="Module">Implementation</a>
    <a id="2831" class="Symbol">;</a> <a id="2833" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a>  <a id="2849" class="Symbol">=</a> <a id="2851" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#337" class="Function">HSEpochStructure</a>
    <a id="2872" class="Symbol">;</a> <a id="2874" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a> <a id="2890" class="Symbol">=</a> <a id="2892" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#264" class="Function">HSGlobalConstants</a>
    <a id="2914" class="Symbol">;</a> <a id="2916" href="Ledger.Transaction.html#1215" class="Field">crypto</a>          <a id="2932" class="Symbol">=</a> <a id="2934" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#411" class="Function">HSCrypto</a>
    <a id="2947" class="Symbol">;</a> <a id="2949" href="Ledger.Transaction.html#1649" class="Field">govParams</a>       <a id="2965" class="Symbol">=</a> <a id="2967" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1777" class="Function">HsGovParams</a>
    <a id="2983" class="Symbol">;</a> <a id="2985" href="Ledger.Transaction.html#1783" class="Field">txidBytes</a>       <a id="3001" class="Symbol">=</a> <a id="3003" href="Function.Base.html#704" class="Function">id</a>
    <a id="3010" class="Symbol">;</a> <a id="3012" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="3028" class="Symbol">=</a> <a id="3030" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#1085" class="Function">HSScriptStructure</a>
    <a id="3052" class="Symbol">;</a> <a id="3054" href="Ledger.Transaction.html#1014" class="Field">adHashingScheme</a> <a id="3070" class="Symbol">=</a> <a id="3072" href="Ledger.Conway.Foreign.HSLedger.Core.html#1467" class="Function">isHashableSet-ℕ</a>
    <a id="3092" class="Symbol">}</a>

<a id="3095" class="Keyword">open</a> <a id="3100" href="Ledger.Transaction.html#867" class="Module">TransactionStructure</a> <a id="3121" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2726" class="Function">HSTransactionStructure</a> <a id="3144" class="Keyword">public</a>
<a id="3151" class="Keyword">open</a> <a id="3156" class="Keyword">import</a> <a id="3163" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="3176" href="Ledger.Transaction.html#1809" class="Function">govStructure</a> <a id="3189" class="Keyword">public</a>

<a id="3197" class="Keyword">open</a> <a id="3202" class="Keyword">import</a> <a id="3209" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a> <a id="3225" href="Function.Base.html#4736" class="Function">it</a>

<a id="3229" class="Keyword">instance</a>
  <a id="HSAbstractFunctions"></a><a id="3240" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3240" class="Function">HSAbstractFunctions</a> <a id="3260" class="Symbol">:</a> <a id="3262" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a>
  <a id="3282" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3240" class="Function">HSAbstractFunctions</a> <a id="3302" class="Symbol">=</a> <a id="3304" class="Keyword">record</a>
    <a id="3315" class="Symbol">{</a> <a id="3317" href="Ledger.Conway.Foreign.HSLedger.Core.html#1624" class="Module">Implementation</a>
    <a id="3336" class="Symbol">;</a> <a id="3338" href="Ledger.Abstract.html#617" class="Field">txscriptfee</a> <a id="3350" class="Symbol">=</a> <a id="3352" class="Symbol">λ</a> <a id="3354" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3354" class="Bound">tt</a> <a id="3357" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3357" class="Bound">y</a> <a id="3359" class="Symbol">→</a> <a id="3361" class="Number">0</a>
    <a id="3367" class="Symbol">;</a> <a id="3369" href="Ledger.Abstract.html#664" class="Field">serSize</a>     <a id="3381" class="Symbol">=</a> <a id="3383" class="Symbol">λ</a> <a id="3385" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3385" class="Bound">v</a> <a id="3387" class="Symbol">→</a> <a id="3389" class="Number">0</a>
    <a id="3395" class="Symbol">;</a> <a id="3397" href="Ledger.Abstract.html#710" class="Field">indexOfImp</a>  <a id="3409" class="Symbol">=</a> <a id="3411" class="Keyword">record</a>
      <a id="3424" class="Symbol">{</a> <a id="3426" href="Ledger.Abstract.html#252" class="Field">indexOfDCert</a>    <a id="3442" class="Symbol">=</a> <a id="3444" class="Symbol">λ</a> <a id="3446" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3446" class="Bound">_</a> <a id="3448" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3448" class="Bound">_</a> <a id="3450" class="Symbol">→</a> <a id="3452" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="3466" class="Symbol">;</a> <a id="3468" href="Ledger.Abstract.html#304" class="Field">indexOfRwdAddr</a>  <a id="3484" class="Symbol">=</a> <a id="3486" class="Symbol">λ</a> <a id="3488" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3488" class="Bound">_</a> <a id="3490" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3490" class="Bound">_</a> <a id="3492" class="Symbol">→</a> <a id="3494" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="3508" class="Symbol">;</a> <a id="3510" href="Ledger.Abstract.html#352" class="Field">indexOfTxIn</a>     <a id="3526" class="Symbol">=</a> <a id="3528" class="Symbol">λ</a> <a id="3530" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3530" class="Bound">_</a> <a id="3532" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3532" class="Bound">_</a> <a id="3534" class="Symbol">→</a> <a id="3536" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="3550" class="Symbol">;</a> <a id="3552" href="Ledger.Abstract.html#399" class="Field">indexOfPolicyId</a> <a id="3568" class="Symbol">=</a> <a id="3570" class="Symbol">λ</a> <a id="3572" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3572" class="Bound">_</a> <a id="3574" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3574" class="Bound">_</a> <a id="3576" class="Symbol">→</a> <a id="3578" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="3592" class="Symbol">;</a> <a id="3594" href="Ledger.Abstract.html#458" class="Field">indexOfVote</a>     <a id="3610" class="Symbol">=</a> <a id="3612" class="Symbol">λ</a> <a id="3614" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3614" class="Bound">_</a> <a id="3616" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3616" class="Bound">_</a> <a id="3618" class="Symbol">→</a> <a id="3620" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="3634" class="Symbol">;</a> <a id="3636" href="Ledger.Abstract.html#510" class="Field">indexOfProposal</a> <a id="3652" class="Symbol">=</a> <a id="3654" class="Symbol">λ</a> <a id="3656" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3656" class="Bound">_</a> <a id="3658" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3658" class="Bound">_</a> <a id="3660" class="Symbol">→</a> <a id="3662" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
      <a id="3676" class="Symbol">}</a>
    <a id="3682" class="Symbol">;</a> <a id="3684" href="Ledger.Abstract.html#741" class="Field">runPLCScript</a> <a id="3697" class="Symbol">=</a> <a id="3699" class="Symbol">λ</a> <a id="3701" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3701" class="Bound">_</a> <a id="3703" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3703" class="Bound">_</a> <a id="3705" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3705" class="Bound">_</a> <a id="3707" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3707" class="Bound">_</a> <a id="3709" class="Symbol">→</a> <a id="3711" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
    <a id="3721" class="Symbol">;</a> <a id="3723" href="Ledger.Abstract.html#814" class="Field">scriptSize</a> <a id="3734" class="Symbol">=</a> <a id="3736" class="Symbol">λ</a> <a id="3738" class="Keyword">where</a> 
        <a id="3753" class="Symbol">(</a><a id="3754" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3759" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3759" class="Bound">x</a><a id="3760" class="Symbol">)</a> <a id="3762" class="Symbol">→</a> <a id="3764" href="Ledger.Conway.Conformance.Script.html#763" class="Field">HSTimelock.tlScriptSize</a> <a id="3788" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3759" class="Bound">x</a>
        <a id="3798" class="Symbol">(</a><a id="3799" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3804" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3804" class="Bound">x</a><a id="3805" class="Symbol">)</a> <a id="3807" class="Symbol">→</a> <a id="3809" href="Ledger.Conway.Conformance.Script.html#1098" class="Field">HSPlutusScript.psScriptSize</a> <a id="3837" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3804" class="Bound">x</a>
    <a id="3843" class="Symbol">}</a>

<a id="3846" class="Keyword">open</a> <a id="3851" class="Keyword">import</a> <a id="3858" href="Ledger.Address.html" class="Module">Ledger.Address</a> <a id="3873" href="Ledger.Types.Epoch.html#1934" class="Function">Network</a> <a id="3881" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="3889" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a> <a id="3900" class="Keyword">using</a> <a id="3906" class="Symbol">()</a> <a id="3909" class="Keyword">public</a>
</pre></body></html>