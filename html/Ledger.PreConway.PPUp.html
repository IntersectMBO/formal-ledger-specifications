<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.PreConway.PPUp</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="59" class="Keyword">open</a> <a id="64" class="Keyword">import</a> <a id="71" href="Algebra.html" class="Module">Algebra</a><a id="78" class="Symbol">;</a> <a id="80" class="Keyword">open</a> <a id="85" class="Keyword">import</a> <a id="92" href="stdlib.Algebra.Literals.html" class="Module">stdlib.Algebra.Literals</a>
<a id="116" class="Keyword">import</a> <a id="123" href="Data.Product.Properties.html" class="Module">Data.Product.Properties</a> <a id="147" class="Symbol">as</a> <a id="150" class="Module">×</a>
<a id="152" class="Keyword">import</a> <a id="159" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="168" class="Symbol">as</a> <a id="171" class="Module">ℕ</a><a id="172" class="Symbol">;</a> <a id="174" class="Keyword">import</a> <a id="181" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="201" class="Symbol">as</a> <a id="204" class="Module">ℕ</a>

<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="234" class="Keyword">hiding</a> <a id="241" class="Symbol">(</a><a id="242" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a><a id="245" class="Symbol">)</a>
<a id="247" class="Keyword">open</a> <a id="252" class="Keyword">import</a> <a id="259" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>

<a id="286" class="Keyword">module</a> <a id="293" href="Ledger.PreConway.PPUp.html" class="Module">Ledger.PreConway.PPUp</a> <a id="315" class="Symbol">(</a><a id="316" href="Ledger.PreConway.PPUp.html#316" class="Bound">txs</a> <a id="320" class="Symbol">:</a> <a id="322" class="Symbol">_)</a> <a id="325" class="Symbol">(</a><a id="326" class="Keyword">open</a> <a id="331" href="Ledger.Conway.Transaction.html#910" class="Module">TransactionStructure</a> <a id="352" href="Ledger.PreConway.PPUp.html#316" class="Bound">txs</a><a id="355" class="Symbol">)</a> <a id="357" class="Keyword">where</a>

<a id="364" class="Keyword">open</a> <a id="369" href="Algebra.Bundles.html#18455" class="Module">Semiring</a> <a id="378" href="Ledger.Conway.Types.Epoch.html#561" class="Function">Slotʳ</a> <a id="384" class="Keyword">using</a> <a id="390" class="Symbol">(</a><a id="391" href="Algebra.Bundles.html#18634" class="Field Operator">_*_</a><a id="394" class="Symbol">)</a>
<a id="396" class="Keyword">open</a> <a id="401" href="stdlib.Algebra.Literals.html#210" class="Module">Semiring-Lit</a> <a id="414" href="Ledger.Conway.Types.Epoch.html#561" class="Function">Slotʳ</a>

<a id="421" class="Keyword">private</a> <a id="429" class="Keyword">variable</a> <a id="438" href="Ledger.PreConway.PPUp.html#438" class="Generalizable">m</a> <a id="440" href="Ledger.PreConway.PPUp.html#440" class="Generalizable">n</a> <a id="442" class="Symbol">:</a> <a id="444" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>


<a id="GenesisDelegation"></a><a id="448" href="Ledger.PreConway.PPUp.html#448" class="Function">GenesisDelegation</a> <a id="466" class="Symbol">=</a> <a id="468" href="Ledger.Conway.Crypto.html#1317" class="Function">KeyHash</a> <a id="476" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="478" class="Symbol">(</a><a id="479" href="Ledger.Conway.Crypto.html#1317" class="Function">KeyHash</a> <a id="487" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="489" href="Ledger.Conway.Crypto.html#1317" class="Function">KeyHash</a><a id="496" class="Symbol">)</a>

<a id="499" class="Keyword">record</a> <a id="PPUpdateState"></a><a id="506" href="Ledger.PreConway.PPUp.html#506" class="Record">PPUpdateState</a> <a id="520" class="Symbol">:</a> <a id="522" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="527" class="Keyword">where</a>
  <a id="535" class="Keyword">field</a>
    <a id="PPUpdateState.pup"></a><a id="545" href="Ledger.PreConway.PPUp.html#545" class="Field">pup</a>   <a id="551" class="Symbol">:</a> <a id="553" href="Ledger.Conway.Transaction.html#2550" class="Function">ProposedPPUpdates</a>
    <a id="PPUpdateState.fpup"></a><a id="575" href="Ledger.PreConway.PPUp.html#575" class="Field">fpup</a>  <a id="581" class="Symbol">:</a> <a id="583" href="Ledger.Conway.Transaction.html#2550" class="Function">ProposedPPUpdates</a>

<a id="602" class="Keyword">record</a> <a id="PPUpdateEnv"></a><a id="609" href="Ledger.PreConway.PPUp.html#609" class="Record">PPUpdateEnv</a> <a id="621" class="Symbol">:</a> <a id="623" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="628" class="Keyword">where</a>
  <a id="636" class="Keyword">field</a>
    <a id="PPUpdateEnv.slot"></a><a id="646" href="Ledger.PreConway.PPUp.html#646" class="Field">slot</a>       <a id="657" class="Symbol">:</a> <a id="659" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a>
    <a id="PPUpdateEnv.pparams"></a><a id="668" href="Ledger.PreConway.PPUp.html#668" class="Field">pparams</a>    <a id="679" class="Symbol">:</a> <a id="681" href="Ledger.Conway.PParams.html#1717" class="Record">PParams</a>
    <a id="PPUpdateEnv.genDelegs"></a><a id="693" href="Ledger.PreConway.PPUp.html#693" class="Field">genDelegs</a>  <a id="704" class="Symbol">:</a> <a id="706" href="Ledger.PreConway.PPUp.html#448" class="Function">GenesisDelegation</a>


<a id="viablePParams"></a><a id="726" href="Ledger.PreConway.PPUp.html#726" class="Function">viablePParams</a> <a id="740" class="Symbol">:</a> <a id="742" href="Ledger.Conway.PParams.html#1717" class="Record">PParams</a> <a id="750" class="Symbol">→</a> <a id="752" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="757" href="Ledger.PreConway.PPUp.html#726" class="Function">viablePParams</a> <a id="771" href="Ledger.PreConway.PPUp.html#771" class="Bound">pp</a> <a id="774" class="Symbol">=</a> <a id="776" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="778" class="Comment">-- TODO: block size check</a>

<a id="isViableUpdate"></a><a id="805" href="Ledger.PreConway.PPUp.html#805" class="Function">isViableUpdate</a> <a id="820" class="Symbol">:</a> <a id="822" href="Ledger.Conway.PParams.html#1717" class="Record">PParams</a> <a id="830" class="Symbol">→</a> <a id="832" href="Ledger.Conway.PParams.html#14669" class="Function">PParamsUpdate</a> <a id="846" class="Symbol">→</a> <a id="848" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="853" href="Ledger.PreConway.PPUp.html#805" class="Function">isViableUpdate</a> <a id="868" href="Ledger.PreConway.PPUp.html#868" class="Bound">pp</a> <a id="871" href="Ledger.PreConway.PPUp.html#871" class="Bound">pup</a> <a id="875" class="Keyword">with</a> <a id="880" href="Ledger.Conway.PParams.html#14235" class="Function">applyUpdate</a> <a id="892" href="Ledger.PreConway.PPUp.html#868" class="Bound">pp</a> <a id="895" href="Ledger.PreConway.PPUp.html#871" class="Bound">pup</a>
<a id="899" class="Symbol">...</a> <a id="903" class="Symbol">|</a> <a id="905" href="Ledger.PreConway.PPUp.html#905" class="Bound">pp&#39;</a> <a id="909" class="Symbol">=</a> <a id="911" href="Ledger.Conway.PParams.html#1115" class="Datatype">pvCanFollow</a> <a id="923" class="Symbol">(</a><a id="924" href="Ledger.Conway.PParams.html#2064" class="Field">PParams.pv</a> <a id="935" class="Bound">pp</a><a id="937" class="Symbol">)</a> <a id="939" class="Symbol">(</a><a id="940" href="Ledger.Conway.PParams.html#2064" class="Field">PParams.pv</a> <a id="951" href="Ledger.PreConway.PPUp.html#905" class="Bound">pp&#39;</a><a id="954" class="Symbol">)</a> <a id="956" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="958" href="Ledger.PreConway.PPUp.html#726" class="Function">viablePParams</a> <a id="972" href="Ledger.PreConway.PPUp.html#905" class="Bound">pp&#39;</a>


<a id="978" class="Keyword">private</a> <a id="986" class="Keyword">variable</a>
  <a id="997" href="Ledger.PreConway.PPUp.html#997" class="Generalizable">Γ</a> <a id="999" class="Symbol">:</a> <a id="1001" href="Ledger.PreConway.PPUp.html#609" class="Record">PPUpdateEnv</a>
  <a id="1015" href="Ledger.PreConway.PPUp.html#1015" class="Generalizable">s</a> <a id="1017" class="Symbol">:</a> <a id="1019" href="Ledger.PreConway.PPUp.html#506" class="Record">PPUpdateState</a>
  <a id="1035" href="Ledger.PreConway.PPUp.html#1035" class="Generalizable">e</a> <a id="1037" class="Symbol">:</a> <a id="1039" href="Ledger.Conway.Types.Epoch.html#592" class="Function">Epoch</a>
  <a id="1047" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a> <a id="1051" href="Ledger.PreConway.PPUp.html#1051" class="Generalizable">pupˢ</a> <a id="1056" href="Ledger.PreConway.PPUp.html#1056" class="Generalizable">fpupˢ</a> <a id="1062" class="Symbol">:</a> <a id="1064" href="Ledger.Conway.Transaction.html#2550" class="Function">ProposedPPUpdates</a>

<a id="1083" class="Keyword">instance</a>
  <a id="Dec-pvCanFollow"></a><a id="1094" href="Ledger.PreConway.PPUp.html#1094" class="Function">Dec-pvCanFollow</a> <a id="1110" class="Symbol">:</a> <a id="1112" href="Ledger.Conway.PParams.html#1115" class="Datatype">pvCanFollow</a> <a id="1124" href="Class.Decidable.Core.html#773" class="Function Operator">⁇²</a>
  <a id="1129" href="Ledger.PreConway.PPUp.html#1094" class="Function">Dec-pvCanFollow</a> <a id="1145" class="Symbol">{(</a><a id="1147" href="Ledger.PreConway.PPUp.html#1147" class="Bound">m</a> <a id="1149" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1151" href="Ledger.PreConway.PPUp.html#1151" class="Bound">n</a><a id="1152" class="Symbol">)}</a> <a id="1155" class="Symbol">{</a><a id="1156" href="Ledger.PreConway.PPUp.html#1156" class="Bound">pv</a><a id="1158" class="Symbol">}</a> <a id="1160" class="Symbol">.</a><a id="1161" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="1165" class="Keyword">with</a> <a id="1170" href="Ledger.PreConway.PPUp.html#1156" class="Bound">pv</a> <a id="1173" href="Class.DecEq.Core.html#159" class="Field Operator">≟</a> <a id="1175" class="Symbol">(</a><a id="1176" href="Ledger.PreConway.PPUp.html#1147" class="Bound">m</a> <a id="1178" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1180" class="Number">1</a> <a id="1182" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1184" class="Number">0</a><a id="1185" class="Symbol">)</a> <a id="1187" class="Symbol">|</a> <a id="1189" href="Ledger.PreConway.PPUp.html#1156" class="Bound">pv</a> <a id="1192" href="Class.DecEq.Core.html#159" class="Field Operator">≟</a> <a id="1194" class="Symbol">(</a><a id="1195" href="Ledger.PreConway.PPUp.html#1147" class="Bound">m</a> <a id="1197" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1199" href="Ledger.PreConway.PPUp.html#1151" class="Bound">n</a> <a id="1201" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1203" class="Number">1</a><a id="1204" class="Symbol">)</a>
  <a id="1208" class="Symbol">...</a> <a id="1212" class="Symbol">|</a> <a id="1214" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1217" href="Ledger.PreConway.PPUp.html#1217" class="Bound">¬p</a>    <a id="1223" class="Symbol">|</a> <a id="1225" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1228" href="Ledger.PreConway.PPUp.html#1228" class="Bound">¬p₁</a>   <a id="1234" class="Symbol">=</a> <a id="1236" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1239" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1241" class="Symbol">λ</a> <a id="1243" class="Keyword">where</a> <a id="1249" href="Ledger.Conway.PParams.html#1162" class="InductiveConstructor">canFollowMajor</a> <a id="1264" class="Symbol">→</a> <a id="1266" href="Ledger.PreConway.PPUp.html#1217" class="Bound">¬p</a>  <a id="1270" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                                           <a id="1318" href="Ledger.Conway.PParams.html#1213" class="InductiveConstructor">canFollowMinor</a> <a id="1333" class="Symbol">→</a> <a id="1335" href="Ledger.PreConway.PPUp.html#1228" class="Bound">¬p₁</a> <a id="1339" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="1346" class="Symbol">...</a> <a id="1350" class="Symbol">|</a> <a id="1352" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1355" href="Ledger.PreConway.PPUp.html#1355" class="Bound">¬p</a>    <a id="1361" class="Symbol">|</a> <a id="1363" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1367" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1372" class="Symbol">=</a> <a id="1374" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1378" href="Ledger.Conway.PParams.html#1213" class="InductiveConstructor">canFollowMinor</a>
  <a id="1395" class="Symbol">...</a> <a id="1399" class="Symbol">|</a> <a id="1401" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1405" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1410" class="Symbol">|</a> <a id="1412" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1415" href="Ledger.PreConway.PPUp.html#1415" class="Bound">¬p</a>    <a id="1421" class="Symbol">=</a> <a id="1423" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1427" href="Ledger.Conway.PParams.html#1162" class="InductiveConstructor">canFollowMajor</a>
  <a id="1444" class="Symbol">...</a> <a id="1448" class="Symbol">|</a> <a id="1450" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1454" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1459" class="Symbol">|</a> <a id="1461" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1465" href="Ledger.PreConway.PPUp.html#1465" class="Bound">p</a>    <a id="1470" class="Symbol">=</a> <a id="1472" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="1479" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1481" href="Data.Nat.Properties.html#17808" class="Function">ℕ.m+1+n≢m</a> <a id="1491" class="Bound">m</a> <a id="1493" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1495" href="Data.Product.Properties.html#3393" class="Function">×.×-≡,≡←≡</a> <a id="1505" href="Ledger.PreConway.PPUp.html#1465" class="Bound">p</a> <a id="1507" class="Symbol">.</a><a id="1508" href="Data.Product.Base.html#636" class="Field">proj₁</a>

<a id="1515" class="Keyword">data</a> <a id="_⊢_⇀⦇_,PPUP⦈_"></a><a id="1520" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">_⊢_⇀⦇_,PPUP⦈_</a> <a id="1534" class="Symbol">:</a> <a id="1536" href="Ledger.PreConway.PPUp.html#609" class="Record">PPUpdateEnv</a> <a id="1548" class="Symbol">→</a> <a id="1550" href="Ledger.PreConway.PPUp.html#506" class="Record">PPUpdateState</a> <a id="1564" class="Symbol">→</a> <a id="1566" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1572" href="Ledger.Conway.Transaction.html#2597" class="Function">Update</a> <a id="1579" class="Symbol">→</a> <a id="1581" href="Ledger.PreConway.PPUp.html#506" class="Record">PPUpdateState</a> <a id="1595" class="Symbol">→</a> <a id="1597" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1602" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,PPUP⦈_.PPUpdateEmpty"></a><a id="1612" href="Ledger.PreConway.PPUp.html#1612" class="InductiveConstructor">PPUpdateEmpty</a> <a id="1626" class="Symbol">:</a> <a id="1628" href="Ledger.PreConway.PPUp.html#997" class="Generalizable">Γ</a> <a id="1630" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">⊢</a> <a id="1632" href="Ledger.PreConway.PPUp.html#1015" class="Generalizable">s</a> <a id="1634" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">⇀⦇</a> <a id="1637" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1645" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">,PPUP⦈</a> <a id="1652" href="Ledger.PreConway.PPUp.html#1015" class="Generalizable">s</a>

  <a id="_⊢_⇀⦇_,PPUP⦈_.PPUpdateCurrent"></a><a id="1657" href="Ledger.PreConway.PPUp.html#1657" class="InductiveConstructor">PPUpdateCurrent</a> <a id="1673" class="Symbol">:</a> <a id="1675" class="Keyword">let</a> <a id="1679" class="Keyword">open</a> <a id="1684" href="Ledger.PreConway.PPUp.html#609" class="Module">PPUpdateEnv</a> <a id="1696" href="Ledger.PreConway.PPUp.html#997" class="Generalizable">Γ</a> <a id="1698" class="Keyword">in</a>
    <a id="1705" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1709" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a> <a id="1713" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="1715" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1719" href="Ledger.PreConway.PPUp.html#693" class="Function">genDelegs</a>
    <a id="1733" class="Symbol">→</a> <a id="1735" href="Axiom.Set.html#9724" class="Function">All</a> <a id="1739" class="Symbol">(</a><a id="1740" href="Ledger.PreConway.PPUp.html#805" class="Function">isViableUpdate</a> <a id="1755" href="Ledger.PreConway.PPUp.html#668" class="Function">pparams</a><a id="1762" class="Symbol">)</a> <a id="1764" class="Symbol">(</a><a id="1765" href="Class.IsSet.html#959" class="Function">range</a> <a id="1771" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a><a id="1774" class="Symbol">)</a>
    <a id="1780" class="Symbol">→</a> <a id="1782" href="Ledger.PreConway.PPUp.html#646" class="Function">slot</a> <a id="1787" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1789" class="Number">2</a> <a id="1791" href="Algebra.Bundles.html#18634" class="Function Operator">*</a> <a id="1793" href="Ledger.Conway.Types.Epoch.html#882" class="Function">StabilityWindow</a> <a id="1809" href="Class.HasOrder.Core.html#641" class="Field Operator">&lt;</a> <a id="1811" href="Ledger.Conway.Types.Epoch.html#843" class="Function">firstSlot</a> <a id="1821" class="Symbol">(</a><a id="1822" href="Ledger.Conway.Types.Epoch.html#804" class="Function">epoch</a> <a id="1828" href="Ledger.PreConway.PPUp.html#646" class="Function">slot</a> <a id="1833" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1835" class="Number">1</a><a id="1836" class="Symbol">)</a>
    <a id="1842" class="Symbol">→</a> <a id="1844" href="Ledger.Conway.Types.Epoch.html#804" class="Function">epoch</a> <a id="1850" href="Ledger.PreConway.PPUp.html#646" class="Function">slot</a> <a id="1855" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1857" href="Ledger.PreConway.PPUp.html#1035" class="Generalizable">e</a>
    <a id="1863" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
    <a id="1900" href="Ledger.PreConway.PPUp.html#997" class="Generalizable">Γ</a> <a id="1902" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">⊢</a> <a id="1904" class="Keyword">record</a> <a id="1911" class="Symbol">{</a> <a id="1913" href="Ledger.PreConway.PPUp.html#545" class="Field">pup</a> <a id="1917" class="Symbol">=</a> <a id="1919" href="Ledger.PreConway.PPUp.html#1051" class="Generalizable">pupˢ</a> <a id="1924" class="Symbol">;</a> <a id="1926" href="Ledger.PreConway.PPUp.html#575" class="Field">fpup</a> <a id="1931" class="Symbol">=</a> <a id="1933" href="Ledger.PreConway.PPUp.html#1056" class="Generalizable">fpupˢ</a> <a id="1939" class="Symbol">}</a> <a id="1941" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">⇀⦇</a> <a id="1944" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1949" class="Symbol">(</a><a id="1950" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a> <a id="1954" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1956" href="Ledger.PreConway.PPUp.html#1035" class="Generalizable">e</a><a id="1957" class="Symbol">)</a> <a id="1959" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">,PPUP⦈</a>
        <a id="1974" class="Keyword">record</a> <a id="1981" class="Symbol">{</a> <a id="1983" href="Ledger.PreConway.PPUp.html#545" class="Field">pup</a> <a id="1987" class="Symbol">=</a> <a id="1989" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a> <a id="1993" href="Axiom.Set.Map.html#6320" class="Function Operator">∪ˡ</a> <a id="1996" href="Ledger.PreConway.PPUp.html#1051" class="Generalizable">pupˢ</a> <a id="2001" class="Symbol">;</a> <a id="2003" href="Ledger.PreConway.PPUp.html#575" class="Field">fpup</a> <a id="2008" class="Symbol">=</a> <a id="2010" href="Ledger.PreConway.PPUp.html#1056" class="Generalizable">fpupˢ</a> <a id="2016" class="Symbol">}</a>

  <a id="_⊢_⇀⦇_,PPUP⦈_.PPUpdateFuture"></a><a id="2021" href="Ledger.PreConway.PPUp.html#2021" class="InductiveConstructor">PPUpdateFuture</a> <a id="2036" class="Symbol">:</a> <a id="2038" class="Keyword">let</a> <a id="2042" class="Keyword">open</a> <a id="2047" href="Ledger.PreConway.PPUp.html#609" class="Module">PPUpdateEnv</a> <a id="2059" href="Ledger.PreConway.PPUp.html#997" class="Generalizable">Γ</a> <a id="2061" class="Keyword">in</a>
    <a id="2068" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2072" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a> <a id="2076" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="2078" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2082" href="Ledger.PreConway.PPUp.html#693" class="Function">genDelegs</a>
    <a id="2096" class="Symbol">→</a> <a id="2098" href="Axiom.Set.html#9724" class="Function">All</a> <a id="2102" class="Symbol">(</a><a id="2103" href="Ledger.PreConway.PPUp.html#805" class="Function">isViableUpdate</a> <a id="2118" href="Ledger.PreConway.PPUp.html#668" class="Function">pparams</a><a id="2125" class="Symbol">)</a> <a id="2127" class="Symbol">(</a><a id="2128" href="Class.IsSet.html#959" class="Function">range</a> <a id="2134" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a><a id="2137" class="Symbol">)</a>
    <a id="2143" class="Symbol">→</a> <a id="2145" href="Ledger.Conway.Types.Epoch.html#843" class="Function">firstSlot</a> <a id="2155" class="Symbol">(</a><a id="2156" href="Ledger.Conway.Types.Epoch.html#804" class="Function">epoch</a> <a id="2162" href="Ledger.PreConway.PPUp.html#646" class="Function">slot</a> <a id="2167" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2169" class="Number">1</a><a id="2170" class="Symbol">)</a> <a id="2172" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="2174" href="Ledger.PreConway.PPUp.html#646" class="Function">slot</a> <a id="2179" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2181" class="Number">2</a> <a id="2183" href="Algebra.Bundles.html#18634" class="Function Operator">*</a> <a id="2185" href="Ledger.Conway.Types.Epoch.html#882" class="Function">StabilityWindow</a>
    <a id="2205" class="Symbol">→</a> <a id="2207" href="Ledger.Conway.Types.Epoch.html#804" class="Function">epoch</a> <a id="2213" href="Ledger.PreConway.PPUp.html#646" class="Function">slot</a> <a id="2218" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2220" class="Number">1</a> <a id="2222" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2224" href="Ledger.PreConway.PPUp.html#1035" class="Generalizable">e</a>
    <a id="2230" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
    <a id="2267" href="Ledger.PreConway.PPUp.html#997" class="Generalizable">Γ</a> <a id="2269" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">⊢</a> <a id="2271" class="Keyword">record</a> <a id="2278" class="Symbol">{</a> <a id="2280" href="Ledger.PreConway.PPUp.html#545" class="Field">pup</a> <a id="2284" class="Symbol">=</a> <a id="2286" href="Ledger.PreConway.PPUp.html#1051" class="Generalizable">pupˢ</a> <a id="2291" class="Symbol">;</a> <a id="2293" href="Ledger.PreConway.PPUp.html#575" class="Field">fpup</a> <a id="2298" class="Symbol">=</a> <a id="2300" href="Ledger.PreConway.PPUp.html#1056" class="Generalizable">fpupˢ</a> <a id="2306" class="Symbol">}</a> <a id="2308" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">⇀⦇</a> <a id="2311" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2316" class="Symbol">(</a><a id="2317" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a> <a id="2321" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2323" href="Ledger.PreConway.PPUp.html#1035" class="Generalizable">e</a><a id="2324" class="Symbol">)</a> <a id="2326" href="Ledger.PreConway.PPUp.html#1520" class="Datatype Operator">,PPUP⦈</a>
        <a id="2341" class="Keyword">record</a> <a id="2348" class="Symbol">{</a> <a id="2350" href="Ledger.PreConway.PPUp.html#545" class="Field">pup</a> <a id="2354" class="Symbol">=</a> <a id="2356" href="Ledger.PreConway.PPUp.html#1051" class="Generalizable">pupˢ</a> <a id="2361" class="Symbol">;</a> <a id="2363" href="Ledger.PreConway.PPUp.html#575" class="Field">fpup</a> <a id="2368" class="Symbol">=</a> <a id="2370" href="Ledger.PreConway.PPUp.html#1047" class="Generalizable">pup</a> <a id="2374" href="Axiom.Set.Map.html#6320" class="Function Operator">∪ˡ</a> <a id="2377" href="Ledger.PreConway.PPUp.html#1056" class="Generalizable">fpupˢ</a> <a id="2383" class="Symbol">}</a>

</pre></body></html>