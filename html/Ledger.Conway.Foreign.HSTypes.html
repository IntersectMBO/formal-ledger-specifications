<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Foreign.HSTypes</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Ledger.Conway.Foreign.HSTypes.html" class="Module">Ledger.Conway.Foreign.HSTypes</a> <a id="38" class="Keyword">where</a>

<a id="45" class="Symbol">{-#</a> <a id="49" class="Keyword">FOREIGN</a> <a id="57" class="Pragma">GHC</a>
  <a id="63" class="Symbol">{-#</a> <a id="67" class="Pragma">LANGUAGE</a> <a id="76" class="Pragma">DeriveGeneric</a> <a id="90" class="Symbol">#-}</a>
  <a id="96" class="Symbol">{-#</a> <a id="100" class="Pragma">LANGUAGE</a> <a id="109" class="Pragma">DeriveFunctor</a> <a id="123" class="Symbol">#-}</a>
<a id="127" class="Symbol">#-}</a>

<a id="132" class="Keyword">open</a> <a id="137" class="Keyword">import</a> <a id="144" href="Prelude.html" class="Module">Prelude</a>

<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Foreign.Haskell.html" class="Module">Foreign.Haskell</a>
<a id="181" class="Keyword">open</a> <a id="186" class="Keyword">import</a> <a id="193" href="Foreign.Haskell.Coerce.html" class="Module">Foreign.Haskell.Coerce</a>
<a id="216" class="Keyword">open</a> <a id="221" class="Keyword">import</a> <a id="228" href="Foreign.Haskell.Either.html" class="Module">Foreign.Haskell.Either</a>
<a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="Data.Rational.Base.html" class="Module">Data.Rational.Base</a>

<a id="283" class="Symbol">{-#</a> <a id="287" class="Keyword">FOREIGN</a> <a id="295" class="Pragma">GHC</a>
  <a id="301" class="Pragma">import</a> <a id="308" class="Pragma">GHC.Generics</a> <a id="321" class="Pragma">(Generic)</a>
  <a id="333" class="Pragma">import</a> <a id="340" class="Pragma">Data.Void</a> <a id="350" class="Pragma">(Void)</a>
  <a id="359" class="Pragma">import</a> <a id="366" class="Pragma">Prelude</a> <a id="374" class="Pragma">hiding</a> <a id="381" class="Pragma">(Rational)</a>
  <a id="394" class="Pragma">import</a> <a id="401" class="Pragma">GHC.Real</a> <a id="410" class="Pragma">(Ratio(..))</a>
<a id="422" class="Symbol">#-}</a>

<a id="427" class="Comment">-- * The empty type</a>

<a id="448" class="Keyword">data</a> <a id="Empty"></a><a id="453" href="Ledger.Conway.Foreign.HSTypes.html#453" class="Datatype">Empty</a> <a id="459" class="Symbol">:</a> <a id="461" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="466" class="Keyword">where</a>
<a id="472" class="Symbol">{-#</a> <a id="476" class="Keyword">COMPILE</a> <a id="484" class="Keyword">GHC</a> <a id="488" href="Ledger.Conway.Foreign.HSTypes.html#453" class="Datatype">Empty</a> <a id="494" class="Pragma">=</a> <a id="496" class="Pragma">data</a> <a id="501" class="Pragma">Void</a> <a id="506" class="Pragma">()</a> <a id="509" class="Symbol">#-}</a>

<a id="514" class="Comment">-- * Rational</a>

<a id="529" class="Keyword">data</a> <a id="Rational"></a><a id="534" href="Ledger.Conway.Foreign.HSTypes.html#534" class="Datatype">Rational</a> <a id="543" class="Symbol">:</a> <a id="545" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="550" class="Keyword">where</a>
  <a id="Rational._,_"></a><a id="558" href="Ledger.Conway.Foreign.HSTypes.html#558" class="InductiveConstructor Operator">_,_</a> <a id="562" class="Symbol">:</a> <a id="564" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a> <a id="566" class="Symbol">→</a> <a id="568" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="570" class="Symbol">→</a> <a id="572" href="Ledger.Conway.Foreign.HSTypes.html#534" class="Datatype">Rational</a>
<a id="581" class="Symbol">{-#</a> <a id="585" class="Keyword">COMPILE</a> <a id="593" class="Keyword">GHC</a> <a id="597" href="Ledger.Conway.Foreign.HSTypes.html#534" class="Datatype">Rational</a> <a id="606" class="Pragma">=</a> <a id="608" class="Pragma">data</a> <a id="613" class="Pragma">Rational</a> <a id="622" class="Pragma">((:%))</a> <a id="629" class="Symbol">#-}</a>

<a id="634" class="Comment">-- We&#39;ll generate code with qualified references to Rational in this</a>
<a id="703" class="Comment">-- module, so make sure to define it.</a>
<a id="741" class="Symbol">{-#</a> <a id="745" class="Keyword">FOREIGN</a> <a id="753" class="Pragma">GHC</a> <a id="757" class="Pragma">type</a> <a id="762" class="Pragma">Rational</a> <a id="771" class="Pragma">=</a> <a id="773" class="Pragma">Ratio</a> <a id="779" class="Pragma">Integer</a> <a id="787" class="Symbol">#-}</a>

<a id="792" class="Comment">-- * Maps and Sets</a>

<a id="812" class="Keyword">record</a> <a id="HSMap"></a><a id="819" href="Ledger.Conway.Foreign.HSTypes.html#819" class="Record">HSMap</a> <a id="825" href="Ledger.Conway.Foreign.HSTypes.html#825" class="Bound">K</a> <a id="827" href="Ledger.Conway.Foreign.HSTypes.html#827" class="Bound">V</a> <a id="829" class="Symbol">:</a> <a id="831" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="836" class="Keyword">where</a>
  <a id="844" class="Keyword">constructor</a> <a id="MkHSMap"></a><a id="856" href="Ledger.Conway.Foreign.HSTypes.html#856" class="InductiveConstructor">MkHSMap</a>
  <a id="866" class="Keyword">field</a> <a id="HSMap.assocList"></a><a id="872" href="Ledger.Conway.Foreign.HSTypes.html#872" class="Field">assocList</a> <a id="882" class="Symbol">:</a> <a id="884" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="889" class="Symbol">(</a><a id="890" href="Foreign.Haskell.Pair.html#534" class="Record">Pair</a> <a id="895" href="Ledger.Conway.Foreign.HSTypes.html#825" class="Bound">K</a> <a id="897" href="Ledger.Conway.Foreign.HSTypes.html#827" class="Bound">V</a><a id="898" class="Symbol">)</a>

<a id="901" class="Keyword">record</a> <a id="HSSet"></a><a id="908" href="Ledger.Conway.Foreign.HSTypes.html#908" class="Record">HSSet</a> <a id="914" href="Ledger.Conway.Foreign.HSTypes.html#914" class="Bound">A</a> <a id="916" class="Symbol">:</a> <a id="918" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="923" class="Keyword">where</a>
  <a id="931" class="Keyword">constructor</a> <a id="MkHSSet"></a><a id="943" href="Ledger.Conway.Foreign.HSTypes.html#943" class="InductiveConstructor">MkHSSet</a>
  <a id="953" class="Keyword">field</a> <a id="HSSet.elems"></a><a id="959" href="Ledger.Conway.Foreign.HSTypes.html#959" class="Field">elems</a> <a id="965" class="Symbol">:</a> <a id="967" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="972" href="Ledger.Conway.Foreign.HSTypes.html#914" class="Bound">A</a>

<a id="975" class="Symbol">{-#</a> <a id="979" class="Keyword">FOREIGN</a> <a id="987" class="Pragma">GHC</a>
  <a id="993" class="Pragma">newtype</a> <a id="1001" class="Pragma">HSMap</a> <a id="1007" class="Pragma">k</a> <a id="1009" class="Pragma">v</a> <a id="1011" class="Pragma">=</a> <a id="1013" class="Pragma">MkHSMap</a> <a id="1021" class="Pragma">[(k,</a> <a id="1026" class="Pragma">v)]</a>
    <a id="1034" class="Pragma">deriving</a> <a id="1043" class="Pragma">(Generic,</a> <a id="1053" class="Pragma">Show,</a> <a id="1059" class="Pragma">Eq,</a> <a id="1063" class="Pragma">Ord)</a>
  <a id="1070" class="Pragma">newtype</a> <a id="1078" class="Pragma">HSSet</a> <a id="1084" class="Pragma">a</a> <a id="1086" class="Pragma">=</a> <a id="1088" class="Pragma">MkHSSet</a> <a id="1096" class="Pragma">[a]</a>
    <a id="1104" class="Pragma">deriving</a> <a id="1113" class="Pragma">(Generic,</a> <a id="1123" class="Pragma">Show,</a> <a id="1129" class="Pragma">Eq,</a> <a id="1133" class="Pragma">Ord)</a>
<a id="1138" class="Symbol">#-}</a>
<a id="1142" class="Symbol">{-#</a> <a id="1146" class="Keyword">COMPILE</a> <a id="1154" class="Keyword">GHC</a> <a id="1158" href="Ledger.Conway.Foreign.HSTypes.html#819" class="Record">HSMap</a> <a id="1164" class="Pragma">=</a> <a id="1166" class="Pragma">data</a> <a id="1171" class="Pragma">HSMap</a> <a id="1177" class="Pragma">(MkHSMap)</a> <a id="1187" class="Symbol">#-}</a>
<a id="1191" class="Symbol">{-#</a> <a id="1195" class="Keyword">COMPILE</a> <a id="1203" class="Keyword">GHC</a> <a id="1207" href="Ledger.Conway.Foreign.HSTypes.html#908" class="Record">HSSet</a> <a id="1213" class="Pragma">=</a> <a id="1215" class="Pragma">data</a> <a id="1220" class="Pragma">HSSet</a> <a id="1226" class="Pragma">(MkHSSet)</a> <a id="1236" class="Symbol">#-}</a>

<a id="1241" class="Comment">-- * ComputationResult</a>

<a id="1265" class="Keyword">data</a> <a id="ComputationResult"></a><a id="1270" href="Ledger.Conway.Foreign.HSTypes.html#1270" class="Datatype">ComputationResult</a> <a id="1288" href="Ledger.Conway.Foreign.HSTypes.html#1288" class="Bound">E</a> <a id="1290" href="Ledger.Conway.Foreign.HSTypes.html#1290" class="Bound">A</a> <a id="1292" class="Symbol">:</a> <a id="1294" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1299" class="Keyword">where</a>
  <a id="ComputationResult.Success"></a><a id="1307" href="Ledger.Conway.Foreign.HSTypes.html#1307" class="InductiveConstructor">Success</a> <a id="1315" class="Symbol">:</a> <a id="1317" href="Ledger.Conway.Foreign.HSTypes.html#1290" class="Bound">A</a> <a id="1319" class="Symbol">→</a> <a id="1321" href="Ledger.Conway.Foreign.HSTypes.html#1270" class="Datatype">ComputationResult</a> <a id="1339" href="Ledger.Conway.Foreign.HSTypes.html#1288" class="Bound">E</a> <a id="1341" href="Ledger.Conway.Foreign.HSTypes.html#1290" class="Bound">A</a>
  <a id="ComputationResult.Failure"></a><a id="1345" href="Ledger.Conway.Foreign.HSTypes.html#1345" class="InductiveConstructor">Failure</a> <a id="1353" class="Symbol">:</a> <a id="1355" href="Ledger.Conway.Foreign.HSTypes.html#1288" class="Bound">E</a> <a id="1357" class="Symbol">→</a> <a id="1359" href="Ledger.Conway.Foreign.HSTypes.html#1270" class="Datatype">ComputationResult</a> <a id="1377" href="Ledger.Conway.Foreign.HSTypes.html#1288" class="Bound">E</a> <a id="1379" href="Ledger.Conway.Foreign.HSTypes.html#1290" class="Bound">A</a>

<a id="1382" class="Symbol">{-#</a> <a id="1386" class="Keyword">FOREIGN</a> <a id="1394" class="Pragma">GHC</a>
  <a id="1400" class="Pragma">data</a> <a id="1405" class="Pragma">ComputationResult</a> <a id="1423" class="Pragma">e</a> <a id="1425" class="Pragma">a</a> <a id="1427" class="Pragma">=</a> <a id="1429" class="Pragma">Success</a> <a id="1437" class="Pragma">a</a> <a id="1439" class="Pragma">|</a> <a id="1441" class="Pragma">Failure</a> <a id="1449" class="Pragma">e</a>
    <a id="1455" class="Pragma">deriving</a> <a id="1464" class="Pragma">(Functor,</a> <a id="1474" class="Pragma">Eq,</a> <a id="1478" class="Pragma">Show,</a> <a id="1484" class="Pragma">Generic)</a>

  <a id="1496" class="Pragma">instance</a> <a id="1505" class="Pragma">Applicative</a> <a id="1517" class="Pragma">(ComputationResult</a> <a id="1536" class="Pragma">e)</a> <a id="1539" class="Pragma">where</a>
    <a id="1549" class="Pragma">pure</a> <a id="1554" class="Pragma">=</a> <a id="1556" class="Pragma">Success</a>
    <a id="1568" class="Pragma">(Success</a> <a id="1577" class="Pragma">f)</a> <a id="1580" class="Pragma">&lt;*&gt;</a> <a id="1584" class="Pragma">x</a> <a id="1586" class="Pragma">=</a> <a id="1588" class="Pragma">f</a> <a id="1590" class="Pragma">&lt;$&gt;</a> <a id="1594" class="Pragma">x</a>
    <a id="1600" class="Pragma">(Failure</a> <a id="1609" class="Pragma">e)</a> <a id="1612" class="Pragma">&lt;*&gt;</a> <a id="1616" class="Pragma">_</a> <a id="1618" class="Pragma">=</a> <a id="1620" class="Pragma">Failure</a> <a id="1628" class="Pragma">e</a>

  <a id="1633" class="Pragma">instance</a> <a id="1642" class="Pragma">Monad</a> <a id="1648" class="Pragma">(ComputationResult</a> <a id="1667" class="Pragma">e)</a> <a id="1670" class="Pragma">where</a>
    <a id="1680" class="Pragma">return</a> <a id="1687" class="Pragma">=</a> <a id="1689" class="Pragma">pure</a>
    <a id="1698" class="Pragma">(Success</a> <a id="1707" class="Pragma">a)</a> <a id="1710" class="Pragma">&gt;&gt;=</a> <a id="1714" class="Pragma">m</a> <a id="1716" class="Pragma">=</a> <a id="1718" class="Pragma">m</a> <a id="1720" class="Pragma">a</a>
    <a id="1726" class="Pragma">(Failure</a> <a id="1735" class="Pragma">e)</a> <a id="1738" class="Pragma">&gt;&gt;=</a> <a id="1742" class="Pragma">_</a> <a id="1744" class="Pragma">=</a> <a id="1746" class="Pragma">Failure</a> <a id="1754" class="Pragma">e</a>
<a id="1756" class="Symbol">#-}</a>
<a id="1760" class="Symbol">{-#</a> <a id="1764" class="Keyword">COMPILE</a> <a id="1772" class="Keyword">GHC</a> <a id="1776" href="Ledger.Conway.Foreign.HSTypes.html#1270" class="Datatype">ComputationResult</a> <a id="1794" class="Pragma">=</a> <a id="1796" class="Pragma">data</a> <a id="1801" class="Pragma">ComputationResult</a> <a id="1819" class="Pragma">(Success</a> <a id="1828" class="Pragma">|</a> <a id="1830" class="Pragma">Failure)</a> <a id="1839" class="Symbol">#-}</a>
</pre></body></html>