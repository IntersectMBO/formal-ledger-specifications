<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Utxo.Properties.PoV</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>
<a id="61" class="Keyword">open</a> <a id="66" class="Keyword">import</a> <a id="73" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>

<a id="100" class="Keyword">module</a> <a id="107" href="Ledger.Conway.Utxo.Properties.PoV.html" class="Module">Ledger.Conway.Utxo.Properties.PoV</a>
  <a id="143" class="Symbol">(</a><a id="144" href="Ledger.Conway.Utxo.Properties.PoV.html#144" class="Bound">txs</a> <a id="148" class="Symbol">:</a> <a id="150" class="Symbol">_)</a> <a id="153" class="Symbol">(</a><a id="154" class="Keyword">open</a> <a id="159" href="Ledger.Conway.Transaction.html#910" class="Module">TransactionStructure</a> <a id="180" href="Ledger.Conway.Utxo.Properties.PoV.html#144" class="Bound">txs</a><a id="183" class="Symbol">)</a>
  <a id="187" class="Symbol">(</a><a id="188" href="Ledger.Conway.Utxo.Properties.PoV.html#188" class="Bound">abs</a> <a id="192" class="Symbol">:</a> <a id="194" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="212" href="Ledger.Conway.Utxo.Properties.PoV.html#144" class="Bound">txs</a><a id="215" class="Symbol">)</a>
  <a id="219" class="Keyword">where</a>


<a id="227" class="Keyword">open</a> <a id="232" class="Keyword">import</a> <a id="239" href="Ledger.Conway.Certs.html" class="Module">Ledger.Conway.Certs</a> <a id="259" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a>
<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Ledger.Conway.Utxo.html" class="Module">Ledger.Conway.Utxo</a> <a id="330" href="Ledger.Conway.Utxo.Properties.PoV.html#144" class="Bound">txs</a> <a id="334" href="Ledger.Conway.Utxo.Properties.PoV.html#188" class="Bound">abs</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Ledger.Conway.Utxo.Properties.html" class="Module">Ledger.Conway.Utxo.Properties</a> <a id="380" href="Ledger.Conway.Utxo.Properties.PoV.html#144" class="Bound">txs</a> <a id="384" href="Ledger.Conway.Utxo.Properties.PoV.html#188" class="Bound">abs</a> <a id="388" class="Keyword">using</a> <a id="394" class="Symbol">(</a><a id="395" href="Ledger.Conway.Utxo.Properties.html#13593" class="Function">χ</a><a id="396" class="Symbol">;</a> <a id="398" class="Keyword">module</a> <a id="405" href="Ledger.Conway.Utxo.Properties.html#13640" class="Module">DepositHelpers</a><a id="419" class="Symbol">)</a>
<a id="421" class="Keyword">open</a> <a id="426" href="Ledger.Conway.Utxo.html#2747" class="Module">UTxOState</a><a id="435" class="Symbol">;</a> <a id="437" class="Keyword">open</a> <a id="442" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a><a id="444" class="Symbol">;</a> <a id="446" class="Keyword">open</a> <a id="451" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a>


<a id="UTXOpov"></a><a id="460" href="Ledger.Conway.Utxo.Properties.PoV.html#460" class="Function">UTXOpov</a> <a id="468" class="Symbol">:</a> <a id="470" class="Symbol">{</a><a id="471" href="Ledger.Conway.Utxo.Properties.PoV.html#471" class="Bound">Γ</a> <a id="473" class="Symbol">:</a> <a id="475" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a><a id="482" class="Symbol">}</a> <a id="484" class="Symbol">{</a><a id="485" href="Ledger.Conway.Utxo.Properties.PoV.html#485" class="Bound">tx</a> <a id="488" class="Symbol">:</a> <a id="490" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a><a id="492" class="Symbol">}</a> <a id="494" class="Symbol">{</a><a id="495" href="Ledger.Conway.Utxo.Properties.PoV.html#495" class="Bound">s</a> <a id="497" href="Ledger.Conway.Utxo.Properties.PoV.html#497" class="Bound">s&#39;</a> <a id="500" class="Symbol">:</a> <a id="502" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a><a id="511" class="Symbol">}</a>
  <a id="515" class="Symbol">→</a> <a id="517" href="Ledger.Conway.Transaction.html#3993" class="Field">txidOf</a> <a id="524" href="Ledger.Conway.Utxo.Properties.PoV.html#485" class="Bound">tx</a> <a id="527" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="529" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="534" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="540" class="Symbol">(</a><a id="541" href="Class.IsSet.html#916" class="Function">dom</a> <a id="545" class="Symbol">(</a><a id="546" href="Ledger.Conway.Transaction.html#2705" class="Field">UTxOOf</a> <a id="553" href="Ledger.Conway.Utxo.Properties.PoV.html#495" class="Bound">s</a><a id="554" class="Symbol">))</a>
  <a id="559" class="Symbol">→</a> <a id="561" href="Ledger.Conway.Utxo.Properties.PoV.html#471" class="Bound">Γ</a> <a id="563" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">⊢</a> <a id="565" href="Ledger.Conway.Utxo.Properties.PoV.html#495" class="Bound">s</a> <a id="567" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">⇀⦇</a> <a id="570" href="Ledger.Conway.Utxo.Properties.PoV.html#485" class="Bound">tx</a> <a id="573" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">,UTXO⦈</a> <a id="580" href="Ledger.Conway.Utxo.Properties.PoV.html#497" class="Bound">s&#39;</a>
  <a id="585" class="Symbol">→</a> <a id="587" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="595" href="Ledger.Conway.Utxo.Properties.PoV.html#495" class="Bound">s</a> <a id="597" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="599" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="607" class="Symbol">(</a><a id="608" href="Ledger.Conway.Certs.html#3041" class="Field">wdrlsOf</a> <a id="616" href="Ledger.Conway.Utxo.Properties.PoV.html#485" class="Bound">tx</a><a id="618" class="Symbol">)</a> <a id="620" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="622" href="Ledger.Conway.Utxo.Properties.html#13593" class="Function">χ</a> <a id="624" class="Symbol">(</a><a id="625" href="Ledger.Conway.Utxo.Properties.PoV.html#485" class="Bound">tx</a> <a id="628" class="Symbol">.</a><a id="629" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a><a id="636" class="Symbol">)</a> <a id="638" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="640" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="648" href="Ledger.Conway.Utxo.Properties.PoV.html#497" class="Bound">s&#39;</a>


<a id="653" class="Comment">-- Proof.</a>
<a id="663" href="Ledger.Conway.Utxo.Properties.PoV.html#460" class="Function">UTXOpov</a> <a id="671" href="Ledger.Conway.Utxo.Properties.PoV.html#671" class="Bound">h&#39;</a> <a id="674" href="Ledger.Conway.Utxo.Properties.PoV.html#674" class="Bound">step</a><a id="678" class="Symbol">@(</a><a id="680" href="Ledger.Conway.Utxo.html#15429" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="696" class="Symbol">_</a> <a id="698" href="Ledger.Conway.Utxo.Properties.PoV.html#698" class="Bound">Γ</a> <a id="700" class="Symbol">_</a> <a id="702" class="Symbol">_</a> <a id="704" class="Symbol">_</a> <a id="706" class="Symbol">_</a> <a id="708" class="Symbol">_</a> <a id="710" class="Symbol">_</a> <a id="712" href="Ledger.Conway.Utxo.Properties.PoV.html#712" class="Bound">newBal</a> <a id="719" href="Ledger.Conway.Utxo.Properties.PoV.html#719" class="Bound">noMintAda</a> <a id="729" class="Symbol">_</a> <a id="731" class="Symbol">_</a> <a id="733" class="Symbol">_</a> <a id="735" class="Symbol">_</a> <a id="737" class="Symbol">_</a> <a id="739" class="Symbol">_</a> <a id="741" class="Symbol">_</a> <a id="743" class="Symbol">_</a> <a id="745" class="Symbol">_</a> <a id="747" class="Symbol">(</a><a id="748" href="Ledger.Conway.Utxo.html#13002" class="InductiveConstructor">Scripts-Yes</a> <a id="760" class="Symbol">(_</a> <a id="763" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="765" class="Symbol">_</a> <a id="767" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="769" href="Ledger.Conway.Utxo.Properties.PoV.html#769" class="Bound">valid</a><a id="774" class="Symbol">)))</a>
  <a id="780" class="Symbol">=</a> <a id="782" href="Ledger.Conway.Utxo.Properties.html#24876" class="Function">DepositHelpers.pov-scripts</a> <a id="809" href="Ledger.Conway.Utxo.Properties.PoV.html#674" class="Bound">step</a> <a id="814" href="Ledger.Conway.Utxo.Properties.PoV.html#671" class="Bound">h&#39;</a> <a id="817" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="822" href="Ledger.Conway.Utxo.Properties.PoV.html#769" class="Bound">valid</a>

<a id="829" href="Ledger.Conway.Utxo.Properties.PoV.html#460" class="Function">UTXOpov</a> <a id="837" href="Ledger.Conway.Utxo.Properties.PoV.html#837" class="Bound">h&#39;</a> <a id="840" href="Ledger.Conway.Utxo.Properties.PoV.html#840" class="Bound">step</a><a id="844" class="Symbol">@(</a><a id="846" href="Ledger.Conway.Utxo.html#15429" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="862" class="Symbol">_</a> <a id="864" class="Symbol">_</a> <a id="866" class="Symbol">_</a> <a id="868" class="Symbol">_</a> <a id="870" class="Symbol">_</a> <a id="872" class="Symbol">_</a> <a id="874" class="Symbol">_</a> <a id="876" class="Symbol">_</a> <a id="878" class="Symbol">_</a> <a id="880" class="Symbol">_</a> <a id="882" class="Symbol">_</a> <a id="884" class="Symbol">_</a> <a id="886" class="Symbol">_</a> <a id="888" class="Symbol">_</a> <a id="890" class="Symbol">_</a> <a id="892" class="Symbol">_</a> <a id="894" class="Symbol">_</a> <a id="896" class="Symbol">_</a> <a id="898" class="Symbol">_</a> <a id="900" class="Symbol">(</a><a id="901" href="Ledger.Conway.Utxo.html#13516" class="InductiveConstructor">Scripts-No</a> <a id="912" class="Symbol">(_</a> <a id="915" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="917" href="Ledger.Conway.Utxo.Properties.PoV.html#917" class="Bound">invalid</a><a id="924" class="Symbol">)))</a>
  <a id="930" class="Symbol">=</a> <a id="932" href="Ledger.Conway.Utxo.Properties.html#25324" class="Function">DepositHelpers.pov-no-scripts</a> <a id="962" href="Ledger.Conway.Utxo.Properties.PoV.html#840" class="Bound">step</a> <a id="967" href="Ledger.Conway.Utxo.Properties.PoV.html#837" class="Bound">h&#39;</a> <a id="970" href="Ledger.Conway.Utxo.Properties.PoV.html#917" class="Bound">invalid</a>

</pre></body></html>