<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Foreign.Convertible.Deriving</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Foreign.Convertible.Deriving.html" class="Module">Foreign.Convertible.Deriving</a> <a id="37" class="Keyword">where</a>

<a id="44" class="Keyword">open</a> <a id="49" class="Keyword">import</a> <a id="56" href="Level.html" class="Module">Level</a>
<a id="62" class="Keyword">open</a> <a id="67" class="Keyword">import</a> <a id="74" href="MetaPrelude.html" class="Module">MetaPrelude</a>
<a id="86" class="Keyword">open</a> <a id="91" class="Keyword">import</a> <a id="98" href="Meta.html" class="Module">Meta</a>

<a id="104" class="Keyword">import</a> <a id="111" href="Data.List.html" class="Module">Data.List</a> <a id="121" class="Symbol">as</a> <a id="124" class="Module">L</a>
<a id="126" class="Keyword">import</a> <a id="133" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="152" class="Symbol">as</a> <a id="155" class="Module">NE</a>
<a id="158" class="Keyword">import</a> <a id="165" href="Data.String.html" class="Module">Data.String</a> <a id="177" class="Symbol">as</a> <a id="180" class="Module">S</a>
<a id="182" class="Keyword">import</a> <a id="189" href="Data.Product.html" class="Module">Data.Product</a> <a id="202" class="Symbol">as</a> <a id="205" class="Module">P</a>

<a id="208" class="Keyword">open</a> <a id="213" class="Keyword">import</a> <a id="220" href="Relation.Nullary.html" class="Module">Relation.Nullary</a>
<a id="237" class="Keyword">open</a> <a id="242" class="Keyword">import</a> <a id="249" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a>

<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Reflection.Tactic.html" class="Module">Reflection.Tactic</a>
<a id="307" class="Keyword">open</a> <a id="312" class="Keyword">import</a> <a id="319" href="Reflection.AST.Term.html" class="Module">Reflection.AST.Term</a>
<a id="339" class="Keyword">open</a> <a id="344" class="Keyword">import</a> <a id="351" href="Reflection.AST.DeBruijn.html" class="Module">Reflection.AST.DeBruijn</a>
<a id="375" class="Keyword">import</a> <a id="382" href="Reflection.TCM.html" class="Module">Reflection.TCM</a> <a id="397" class="Symbol">as</a> <a id="400" class="Module">R</a>
<a id="402" class="Keyword">open</a> <a id="407" class="Keyword">import</a> <a id="414" href="Reflection.Utils.html" class="Module">Reflection.Utils</a>
<a id="431" class="Keyword">open</a> <a id="436" class="Keyword">import</a> <a id="443" href="Reflection.Utils.TCI.html" class="Module">Reflection.Utils.TCI</a>
<a id="464" class="Keyword">import</a> <a id="471" href="Function.Identity.Effectful.html" class="Module">Function.Identity.Effectful</a> <a id="499" class="Symbol">as</a> <a id="502" class="Module">Identity</a>

<a id="512" class="Keyword">open</a> <a id="517" class="Keyword">import</a> <a id="524" href="Class.DecEq.html" class="Module">Class.DecEq</a>
<a id="536" class="Keyword">open</a> <a id="541" class="Keyword">import</a> <a id="548" href="Class.DecEq.html" class="Module">Class.DecEq</a>
<a id="560" class="Keyword">open</a> <a id="565" class="Keyword">import</a> <a id="572" href="Class.Functor.html" class="Module">Class.Functor</a>
<a id="586" class="Keyword">open</a> <a id="591" class="Keyword">import</a> <a id="598" href="Class.Monad.html" class="Module">Class.Monad</a>
<a id="610" class="Keyword">open</a> <a id="615" class="Keyword">import</a> <a id="622" href="Class.MonadTC.Instances.html" class="Module">Class.MonadTC.Instances</a>
<a id="646" class="Keyword">open</a> <a id="651" class="Keyword">import</a> <a id="658" href="Class.Traversable.html" class="Module">Class.Traversable</a>
<a id="676" class="Keyword">open</a> <a id="681" class="Keyword">import</a> <a id="688" href="Class.Show.html" class="Module">Class.Show</a>
<a id="699" class="Keyword">open</a> <a id="704" class="Keyword">import</a> <a id="711" href="Class.MonadReader.html" class="Module">Class.MonadReader</a>

<a id="730" class="Keyword">open</a> <a id="735" class="Keyword">import</a> <a id="742" href="Tactic.Substitute.html" class="Module">Tactic.Substitute</a>
<a id="760" class="Keyword">open</a> <a id="765" class="Keyword">import</a> <a id="772" href="Foreign.Convertible.html" class="Module">Foreign.Convertible</a>
<a id="792" class="Keyword">open</a> <a id="797" class="Keyword">import</a> <a id="804" href="Foreign.HaskellTypes.html" class="Module">Foreign.HaskellTypes</a>
<a id="825" class="Keyword">open</a> <a id="830" class="Keyword">import</a> <a id="837" href="Foreign.HaskellTypes.Deriving.html" class="Module">Foreign.HaskellTypes.Deriving</a>

<a id="868" class="Keyword">private</a> <a id="876" class="Keyword">instance</a>
  <a id="887" href="Foreign.Convertible.Deriving.html#887" class="Function">_</a> <a id="889" class="Symbol">=</a> <a id="891" href="Class.Monad.Core.html#610" class="Function">Functor-M</a> <a id="901" class="Symbol">{</a><a id="902" href="Reflection.TCI.html#616" class="Function">TC</a><a id="904" class="Symbol">}</a>

<a id="907" class="Comment">-- TODO: move to agda-stdlib-meta</a>
<a id="liftTC"></a><a id="941" href="Foreign.Convertible.Deriving.html#941" class="Function">liftTC</a> <a id="948" class="Symbol">:</a> <a id="950" class="Symbol">∀</a> <a id="952" class="Symbol">{</a><a id="953" href="Foreign.Convertible.Deriving.html#953" class="Bound">a</a><a id="954" class="Symbol">}</a> <a id="956" class="Symbol">{</a><a id="957" href="Foreign.Convertible.Deriving.html#957" class="Bound">A</a> <a id="959" class="Symbol">:</a> <a id="961" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="965" href="Foreign.Convertible.Deriving.html#953" class="Bound">a</a><a id="966" class="Symbol">}</a> <a id="968" class="Symbol">→</a> <a id="970" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="975" href="Foreign.Convertible.Deriving.html#957" class="Bound">A</a> <a id="977" class="Symbol">→</a> <a id="979" href="Reflection.TCI.html#616" class="Function">TC</a> <a id="982" href="Foreign.Convertible.Deriving.html#957" class="Bound">A</a>
<a id="984" href="Foreign.Convertible.Deriving.html#941" class="Function">liftTC</a> <a id="991" href="Foreign.Convertible.Deriving.html#991" class="Bound">m</a> <a id="993" class="Symbol">_</a> <a id="995" class="Symbol">=</a> <a id="997" href="Foreign.Convertible.Deriving.html#991" class="Bound">m</a>

<a id="1000" class="Keyword">private</a>

  <a id="1011" class="Keyword">open</a> <a id="1016" href="Class.MonadReader.html#232" class="Module">MonadReader</a> <a id="1028" class="Symbol">⦃...⦄</a>

  <a id="1037" class="Keyword">variable</a>
    <a id="1050" href="Foreign.Convertible.Deriving.html#1050" class="Generalizable">A</a> <a id="1052" href="Foreign.Convertible.Deriving.html#1052" class="Generalizable">B</a> <a id="1054" href="Foreign.Convertible.Deriving.html#1054" class="Generalizable">C</a> <a id="1056" class="Symbol">:</a> <a id="1058" href="Agda.Primitive.html#388" class="Primitive">Set</a>

  <a id="TyViewTel"></a><a id="1065" href="Foreign.Convertible.Deriving.html#1065" class="Function">TyViewTel</a> <a id="1075" class="Symbol">=</a> <a id="1077" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1082" class="Symbol">(</a><a id="1083" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="1087" class="Symbol">(</a><a id="1088" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1092" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="1096" class="Symbol">))</a>

  <a id="substTel"></a><a id="1102" href="Foreign.Convertible.Deriving.html#1102" class="Function">substTel</a> <a id="1111" class="Symbol">:</a> <a id="1113" href="Tactic.Substitute.html#338" class="Function">Subst</a> <a id="1119" href="Foreign.Convertible.Deriving.html#1065" class="Function">TyViewTel</a>
  <a id="1131" href="Foreign.Convertible.Deriving.html#1102" class="Function">substTel</a> <a id="1140" href="Foreign.Convertible.Deriving.html#1140" class="Bound">x</a> <a id="1142" href="Foreign.Convertible.Deriving.html#1142" class="Bound">s</a> <a id="1144" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1147" class="Symbol">=</a> <a id="1149" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="1154" href="Foreign.Convertible.Deriving.html#1102" class="Function">substTel</a> <a id="1163" href="Foreign.Convertible.Deriving.html#1163" class="Bound">x</a> <a id="1165" href="Foreign.Convertible.Deriving.html#1165" class="Bound">s</a> <a id="1167" class="Symbol">(</a><a id="1168" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1172" href="Foreign.Convertible.Deriving.html#1172" class="Bound">z</a> <a id="1174" href="Foreign.Convertible.Deriving.html#1174" class="Bound">t</a> <a id="1176" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1178" href="Foreign.Convertible.Deriving.html#1178" class="Bound">tel</a><a id="1181" class="Symbol">)</a> <a id="1183" class="Symbol">=</a> <a id="1185" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1189" href="Foreign.Convertible.Deriving.html#1172" class="Bound">z</a> <a id="1191" class="Symbol">(</a><a id="1192" href="Tactic.Substitute.html#437" class="Function">substArg</a> <a id="1201" href="Foreign.Convertible.Deriving.html#1163" class="Bound">x</a> <a id="1203" href="Foreign.Convertible.Deriving.html#1165" class="Bound">s</a> <a id="1205" href="Foreign.Convertible.Deriving.html#1174" class="Bound">t</a><a id="1206" class="Symbol">)</a> <a id="1208" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1210" class="Symbol">(</a><a id="1211" href="Foreign.Convertible.Deriving.html#1102" class="Function">substTel</a> <a id="1220" class="Symbol">(</a><a id="1221" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="1227" href="Foreign.Convertible.Deriving.html#1163" class="Bound">x</a><a id="1228" class="Symbol">)</a> <a id="1230" href="Foreign.Convertible.Deriving.html#1165" class="Bound">s</a> <a id="1232" href="Foreign.Convertible.Deriving.html#1178" class="Bound">tel</a><a id="1235" class="Symbol">)</a>
    <a id="1241" class="Comment">-- Note: `abs` is abused in TyViewTel and doesn&#39;t actually scope over the `t`</a>

  <a id="1322" class="Comment">-- Substitute leading level parameters with lzero</a>
  <a id="smashLevels"></a><a id="1374" href="Foreign.Convertible.Deriving.html#1374" class="Function">smashLevels</a> <a id="1386" class="Symbol">:</a> <a id="1388" href="Foreign.Convertible.Deriving.html#1065" class="Function">TyViewTel</a> <a id="1398" class="Symbol">→</a> <a id="1400" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1402" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1404" href="Foreign.Convertible.Deriving.html#1065" class="Function">TyViewTel</a>
  <a id="1416" href="Foreign.Convertible.Deriving.html#1374" class="Function">smashLevels</a> <a id="1428" class="Symbol">(</a><a id="1429" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1433" href="Foreign.Convertible.Deriving.html#1433" class="Bound">s</a> <a id="1435" class="Symbol">(</a><a id="1436" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="1440" href="Foreign.Convertible.Deriving.html#1440" class="Bound">i</a> <a id="1442" class="Symbol">(</a><a id="1443" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="1447" class="Symbol">(</a><a id="1448" class="Keyword">quote</a> <a id="1454" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="1459" class="Symbol">)</a> <a id="1461" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1463" class="Symbol">))</a> <a id="1466" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1468" href="Foreign.Convertible.Deriving.html#1468" class="Bound">tel</a><a id="1471" class="Symbol">)</a> <a id="1473" class="Symbol">=</a>
    <a id="1479" href="Data.Product.Base.html#2173" class="Function">P.map</a> <a id="1485" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="1491" class="Symbol">(</a><a id="1492" href="Foreign.Convertible.Deriving.html#1102" class="Function">substTel</a> <a id="1501" class="Number">0</a> <a id="1503" class="Symbol">(</a><a id="1504" class="Keyword">quote</a> <a id="1510" href="Level.html#521" class="Function">0ℓ</a> <a id="1513" href="Reflection.Syntax.html#2899" class="InductiveConstructor Operator">∙</a><a id="1514" class="Symbol">))</a> <a id="1517" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1519" href="Foreign.Convertible.Deriving.html#1374" class="Function">smashLevels</a> <a id="1531" href="Foreign.Convertible.Deriving.html#1468" class="Bound">tel</a>
  <a id="1537" href="Foreign.Convertible.Deriving.html#1374" class="CatchallClause Function">smashLevels</a><a id="1548" class="CatchallClause"> </a><a id="1549" href="Foreign.Convertible.Deriving.html#1549" class="CatchallClause Bound">tel</a> <a id="1553" class="Symbol">=</a> <a id="1555" class="Symbol">(</a><a id="1556" class="Number">0</a> <a id="1558" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1560" href="Foreign.Convertible.Deriving.html#1549" class="Bound">tel</a><a id="1563" class="Symbol">)</a>

  <a id="tyViewToTel"></a><a id="1568" href="Foreign.Convertible.Deriving.html#1568" class="Function">tyViewToTel</a> <a id="1580" class="Symbol">:</a> <a id="1582" href="Foreign.Convertible.Deriving.html#1065" class="Function">TyViewTel</a> <a id="1592" class="Symbol">→</a> <a id="1594" href="Reflection.AST.Term.html#2011" class="Function">Telescope</a>
  <a id="1606" href="Foreign.Convertible.Deriving.html#1568" class="Function">tyViewToTel</a> <a id="1618" class="Symbol">=</a> <a id="1620" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="1626" class="Symbol">λ</a> <a id="1628" class="Keyword">where</a> <a id="1634" class="Symbol">(</a><a id="1635" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1639" href="Foreign.Convertible.Deriving.html#1639" class="Bound">s</a> <a id="1641" href="Foreign.Convertible.Deriving.html#1641" class="Bound">a</a><a id="1642" class="Symbol">)</a> <a id="1644" class="Symbol">→</a> <a id="1646" href="Foreign.Convertible.Deriving.html#1639" class="Bound">s</a> <a id="1648" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1650" href="Foreign.Convertible.Deriving.html#1641" class="Bound">a</a>

  <a id="hideTyView"></a><a id="1655" href="Foreign.Convertible.Deriving.html#1655" class="Function">hideTyView</a> <a id="1666" class="Symbol">:</a> <a id="1668" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="1672" class="Symbol">(</a><a id="1673" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1677" href="Foreign.Convertible.Deriving.html#1050" class="Generalizable">A</a><a id="1678" class="Symbol">)</a> <a id="1680" class="Symbol">→</a> <a id="1682" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="1686" class="Symbol">(</a><a id="1687" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1691" href="Foreign.Convertible.Deriving.html#1050" class="Generalizable">A</a><a id="1692" class="Symbol">)</a>
  <a id="1696" href="Foreign.Convertible.Deriving.html#1655" class="Function">hideTyView</a> <a id="1707" class="Symbol">(</a><a id="1708" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1712" href="Foreign.Convertible.Deriving.html#1712" class="Bound">s</a> <a id="1714" class="Symbol">(</a><a id="1715" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="1719" class="Symbol">(</a><a id="1720" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="1729" class="Symbol">_</a> <a id="1731" href="Foreign.Convertible.Deriving.html#1731" class="Bound">m</a><a id="1732" class="Symbol">)</a> <a id="1734" href="Foreign.Convertible.Deriving.html#1734" class="Bound">x</a><a id="1735" class="Symbol">))</a> <a id="1738" class="Symbol">=</a> <a id="1740" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1744" href="Foreign.Convertible.Deriving.html#1712" class="Bound">s</a> <a id="1746" class="Symbol">(</a><a id="1747" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="1751" class="Symbol">(</a><a id="1752" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="1761" href="Agda.Builtin.Reflection.html#2770" class="InductiveConstructor">hidden</a> <a id="1768" href="Foreign.Convertible.Deriving.html#1731" class="Bound">m</a><a id="1769" class="Symbol">)</a> <a id="1771" href="Foreign.Convertible.Deriving.html#1734" class="Bound">x</a><a id="1772" class="Symbol">)</a>

  <a id="1777" class="Comment">-- The type of a Convertible instance. For parameterised types adds the appropriate instance</a>
  <a id="1872" class="Comment">-- arguments and instantiates level arguments to lzero. For instance,</a>
  <a id="1944" class="Comment">-- instanceType _⊎_ Hs.Either = {A B : Set} {a b : Set} → ⦃ Convertible A a ⦄ → ⦃ Convertible B b ⦄</a>
  <a id="2046" class="Comment">--                              Convertible (A ⊎ B) (Hs.Either a b)</a>
  <a id="instanceType"></a><a id="2116" href="Foreign.Convertible.Deriving.html#2116" class="Function">instanceType</a> <a id="2129" class="Symbol">:</a> <a id="2131" class="Symbol">(</a><a id="2132" href="Foreign.Convertible.Deriving.html#2132" class="Bound">agdaName</a> <a id="2141" href="Foreign.Convertible.Deriving.html#2141" class="Bound">hsName</a> <a id="2148" class="Symbol">:</a> <a id="2150" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="2154" class="Symbol">)</a> <a id="2156" class="Symbol">→</a> <a id="2158" href="Reflection.TCI.html#616" class="Function">TC</a> <a id="2161" href="Reflection.Utils.html#737" class="Function">TypeView</a>
  <a id="2172" href="Foreign.Convertible.Deriving.html#2116" class="Function">instanceType</a> <a id="2185" href="Foreign.Convertible.Deriving.html#2185" class="Bound">agdaName</a> <a id="2194" href="Foreign.Convertible.Deriving.html#2194" class="Bound">hsName</a> <a id="2201" class="Symbol">=</a> <a id="2203" class="Keyword">do</a>
    <a id="2210" href="Foreign.Convertible.Deriving.html#2210" class="Bound">aLvls</a> <a id="2216" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2218" href="Foreign.Convertible.Deriving.html#2218" class="Bound">agdaParams</a> <a id="2229" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="2231" href="Foreign.Convertible.Deriving.html#1374" class="Function">smashLevels</a> <a id="2243" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="2247" href="Reflection.Utils.TCI.html#7774" class="Function">getParamsAndIndices</a> <a id="2267" href="Foreign.Convertible.Deriving.html#2185" class="Bound">agdaName</a>
    <a id="2280" href="Foreign.Convertible.Deriving.html#2280" class="Bound">hLvls</a> <a id="2286" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2288" href="Foreign.Convertible.Deriving.html#2288" class="Bound">hsParams</a>   <a id="2299" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="2301" href="Foreign.Convertible.Deriving.html#1374" class="Function">smashLevels</a> <a id="2313" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="2317" href="Reflection.Utils.TCI.html#7774" class="Function">getParamsAndIndices</a> <a id="2337" href="Foreign.Convertible.Deriving.html#2194" class="Bound">hsName</a>
    <a id="2348" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2353" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="2355" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="2362" class="Symbol">(</a><a id="2363" href="Data.List.Base.html#5044" class="Function">length</a> <a id="2370" href="Foreign.Convertible.Deriving.html#2218" class="Bound">agdaParams</a> <a id="2381" href="Class.DecEq.Core.html#188" class="Function Operator">==</a> <a id="2384" href="Data.List.Base.html#5044" class="Function">length</a> <a id="2391" href="Foreign.Convertible.Deriving.html#2288" class="Bound">hsParams</a><a id="2399" class="Symbol">)</a>
      <a id="2407" class="Keyword">where</a> <a id="2413" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="2419" class="Symbol">→</a> <a id="2421" href="Foreign.Convertible.Deriving.html#941" class="Function">liftTC</a> <a id="2428" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2430" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="2445" class="String">&quot;%q and %q have different number of parameters&quot;</a> <a id="2493" href="Foreign.Convertible.Deriving.html#2185" class="Bound">agdaName</a> <a id="2502" href="Foreign.Convertible.Deriving.html#2194" class="Bound">hsName</a>
    <a id="2513" class="Keyword">let</a> <a id="2517" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2519" class="Symbol">=</a> <a id="2521" href="Data.List.Base.html#5044" class="Function">length</a> <a id="2528" href="Foreign.Convertible.Deriving.html#2218" class="Bound">agdaParams</a>
        <a id="2547" href="Foreign.Convertible.Deriving.html#2547" class="Bound">l₀</a> <a id="2550" class="Symbol">=</a> <a id="2552" class="Keyword">quote</a> <a id="2558" href="Level.html#521" class="Function">0ℓ</a> <a id="2561" href="Reflection.Syntax.html#2899" class="InductiveConstructor Operator">∙</a>
    <a id="2567" href="Foreign.Convertible.Deriving.html#2567" class="Bound">agdaTy</a> <a id="2574" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="2576" href="Reflection.Utils.TCI.html#9109" class="Function">applyWithVisibility</a> <a id="2596" href="Foreign.Convertible.Deriving.html#2185" class="Bound">agdaName</a> <a id="2605" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2607" href="Data.List.Base.html#5319" class="Function">L.replicate</a> <a id="2619" href="Foreign.Convertible.Deriving.html#2210" class="Bound">aLvls</a> <a id="2625" href="Foreign.Convertible.Deriving.html#2547" class="Bound">l₀</a> <a id="2628" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="2631" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="2637" href="Reflection.Syntax.html#1452" class="InductiveConstructor">♯</a> <a id="2639" class="Symbol">(</a><a id="2640" href="Data.List.Base.html#8687" class="Function">take</a> <a id="2645" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2647" class="Symbol">(</a><a id="2648" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="2657" class="Symbol">(</a><a id="2658" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2660" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2662" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a><a id="2663" class="Symbol">)))</a>
    <a id="2671" href="Foreign.Convertible.Deriving.html#2671" class="Bound">hsTy</a>   <a id="2678" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="2680" href="Reflection.Utils.TCI.html#9109" class="Function">applyWithVisibility</a> <a id="2700" href="Foreign.Convertible.Deriving.html#2194" class="Bound">hsName</a>   <a id="2709" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2711" href="Data.List.Base.html#5319" class="Function">L.replicate</a> <a id="2723" href="Foreign.Convertible.Deriving.html#2280" class="Bound">hLvls</a> <a id="2729" href="Foreign.Convertible.Deriving.html#2547" class="Bound">l₀</a> <a id="2732" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="2735" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="2741" href="Reflection.Syntax.html#1452" class="InductiveConstructor">♯</a> <a id="2743" class="Symbol">(</a><a id="2744" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="2753" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a><a id="2754" class="Symbol">)</a>
    <a id="2760" class="Keyword">let</a> <a id="2764" href="Foreign.Convertible.Deriving.html#2764" class="Bound">instHead</a> <a id="2773" class="Symbol">=</a> <a id="2775" href="Reflection.AST.DeBruijn.html#1479" class="Function">weaken</a> <a id="2782" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2784" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2786" class="Keyword">quote</a> <a id="2792" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="2804" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∙⟦</a> <a id="2807" href="Foreign.Convertible.Deriving.html#2567" class="Bound">agdaTy</a> <a id="2814" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∣</a> <a id="2816" href="Foreign.Convertible.Deriving.html#2671" class="Bound">hsTy</a> <a id="2821" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">⟧</a>
        <a id="2831" href="Foreign.Convertible.Deriving.html#2831" class="Bound">tel</a>      <a id="2840" class="Symbol">=</a> <a id="2842" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="2848" href="Foreign.Convertible.Deriving.html#1655" class="Function">hideTyView</a> <a id="2859" class="Symbol">(</a><a id="2860" href="Foreign.Convertible.Deriving.html#2218" class="Bound">agdaParams</a> <a id="2871" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="2874" href="Foreign.Convertible.Deriving.html#2288" class="Bound">hsParams</a><a id="2882" class="Symbol">)</a> <a id="2884" href="Data.List.Base.html#1734" class="Function Operator">++</a>
                   <a id="2906" href="Data.List.Base.html#5319" class="Function">L.replicate</a> <a id="2918" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2920" class="Symbol">(</a><a id="2921" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="2925" class="String">&quot;_&quot;</a> <a id="2929" class="Symbol">(</a><a id="2930" href="Reflection.AST.Argument.html#1453" class="InductiveConstructor">iArg</a> <a id="2935" class="Symbol">(</a><a id="2936" class="Keyword">quote</a> <a id="2942" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="2954" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∙⟦</a> <a id="2957" href="Reflection.Syntax.html#1452" class="InductiveConstructor">♯</a> <a id="2959" class="Symbol">(</a><a id="2960" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2962" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2964" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2966" href="Data.Nat.Base.html#4456" class="Primitive Operator">∸</a> <a id="2968" class="Number">1</a><a id="2969" class="Symbol">)</a> <a id="2971" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∣</a> <a id="2973" href="Reflection.Syntax.html#1452" class="InductiveConstructor">♯</a> <a id="2975" class="Symbol">(</a><a id="2976" href="Foreign.Convertible.Deriving.html#2517" class="Bound">n</a> <a id="2978" href="Data.Nat.Base.html#4456" class="Primitive Operator">∸</a> <a id="2980" class="Number">1</a><a id="2981" class="Symbol">)</a> <a id="2983" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">⟧</a><a id="2984" class="Symbol">)))</a>
    <a id="2992" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="2999" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3001" href="Foreign.Convertible.Deriving.html#2831" class="Bound">tel</a> <a id="3005" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3007" href="Foreign.Convertible.Deriving.html#2764" class="Bound">instHead</a>

  <a id="3019" class="Comment">-- Compute one clause of the Convertible instance. For instance,</a>
  <a id="3086" class="Comment">-- conversionClause Convertible.to to ((c₁ , _) , (c₂ , _)) generates</a>
  <a id="3158" class="Comment">-- .to (c₁ x₁ .. xn) = c₂ (to x₁) .. (to xn)</a>
  <a id="3205" class="Comment">-- where the xi are the visible constructor arguments.</a>
  <a id="conversionClause"></a><a id="3262" href="Foreign.Convertible.Deriving.html#3262" class="Function">conversionClause</a> <a id="3279" class="Symbol">:</a> <a id="3281" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3286" class="Symbol">→</a> <a id="3288" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3293" class="Symbol">→</a> <a id="3295" class="Symbol">(</a><a id="3296" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3301" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3303" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="3307" class="Symbol">)</a> <a id="3309" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3311" class="Symbol">(</a><a id="3312" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="3317" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3319" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="3323" class="Symbol">)</a> <a id="3325" class="Symbol">→</a> <a id="3327" href="Reflection.TCI.html#616" class="Function">TC</a> <a id="3330" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a>
  <a id="3339" href="Foreign.Convertible.Deriving.html#3262" class="Function">conversionClause</a> <a id="3356" href="Foreign.Convertible.Deriving.html#3356" class="Bound">prjP</a> <a id="3361" href="Foreign.Convertible.Deriving.html#3361" class="Bound">prjE</a> <a id="3366" class="Symbol">((</a><a id="3368" href="Foreign.Convertible.Deriving.html#3368" class="Bound">fromC</a> <a id="3374" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3376" href="Foreign.Convertible.Deriving.html#3376" class="Bound">fromTy</a><a id="3382" class="Symbol">)</a> <a id="3384" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3386" class="Symbol">(</a><a id="3387" href="Foreign.Convertible.Deriving.html#3387" class="Bound">toC</a> <a id="3391" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3393" href="Foreign.Convertible.Deriving.html#3393" class="Bound">toTy</a><a id="3397" class="Symbol">))</a> <a id="3400" class="Symbol">=</a> <a id="3402" class="Keyword">do</a>
    <a id="3409" class="Keyword">let</a> <a id="3413" href="Foreign.Convertible.Deriving.html#3413" class="Bound">isVis</a>   <a id="3421" class="Symbol">=</a> <a id="3423" class="Symbol">λ</a> <a id="3425" class="Symbol">{</a> <a id="3427" class="Symbol">(</a><a id="3428" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="3432" class="Symbol">_</a> <a id="3434" class="Symbol">(</a><a id="3435" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="3439" class="Symbol">(</a><a id="3440" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="3449" href="Agda.Builtin.Reflection.html#2762" class="InductiveConstructor">visible</a> <a id="3457" class="Symbol">_)</a> <a id="3460" class="Symbol">_))</a> <a id="3464" class="Symbol">→</a> <a id="3466" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="3470" class="Symbol">;</a> <a id="3472" class="CatchallClause Symbol">_</a> <a id="3474" class="Symbol">→</a> <a id="3476" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="3482" class="Symbol">}</a>
        <a id="3492" href="Foreign.Convertible.Deriving.html#3492" class="Bound">fromTel</a> <a id="3500" class="Symbol">=</a> <a id="3502" href="Data.List.Base.html#10858" class="Function">L.filterᵇ</a> <a id="3512" href="Foreign.Convertible.Deriving.html#3413" class="Bound">isVis</a> <a id="3518" class="Symbol">(</a><a id="3519" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3525" class="Symbol">(</a><a id="3526" href="Reflection.Utils.html#2446" class="Function">viewTy</a> <a id="3533" href="Foreign.Convertible.Deriving.html#3376" class="Bound">fromTy</a><a id="3539" class="Symbol">))</a>
        <a id="3550" href="Foreign.Convertible.Deriving.html#3550" class="Bound">toTel</a>   <a id="3558" class="Symbol">=</a> <a id="3560" href="Data.List.Base.html#10858" class="Function">L.filterᵇ</a> <a id="3570" href="Foreign.Convertible.Deriving.html#3413" class="Bound">isVis</a> <a id="3576" class="Symbol">(</a><a id="3577" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3583" class="Symbol">(</a><a id="3584" href="Reflection.Utils.html#2446" class="Function">viewTy</a> <a id="3591" href="Foreign.Convertible.Deriving.html#3393" class="Bound">toTy</a><a id="3595" class="Symbol">))</a>
        <a id="3606" href="Foreign.Convertible.Deriving.html#3606" class="Bound">n</a>       <a id="3614" class="Symbol">=</a> <a id="3616" href="Data.List.Base.html#5044" class="Function">length</a> <a id="3623" href="Foreign.Convertible.Deriving.html#3492" class="Bound">fromTel</a>
        <a id="3639" href="Foreign.Convertible.Deriving.html#3639" class="Bound">mkCon</a>  <a id="3646" href="Foreign.Convertible.Deriving.html#3646" class="Bound">c</a> <a id="3648" href="Foreign.Convertible.Deriving.html#3648" class="Bound">mkArg</a> <a id="3654" class="Symbol">=</a> <a id="3656" href="Agda.Builtin.Reflection.html#5194" class="InductiveConstructor">Term.con</a> <a id="3665" href="Foreign.Convertible.Deriving.html#3646" class="Bound">c</a>    <a id="3670" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3672" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="3678" class="Symbol">(</a><a id="3679" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="3684" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3686" href="Foreign.Convertible.Deriving.html#3648" class="Bound">mkArg</a> <a id="3692" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3694" href="Reflection.Syntax.html#1452" class="InductiveConstructor">♯</a><a id="3695" class="Symbol">)</a>  <a id="3698" class="Symbol">(</a><a id="3699" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="3708" href="Foreign.Convertible.Deriving.html#3606" class="Bound">n</a><a id="3709" class="Symbol">)</a>
        <a id="3719" href="Foreign.Convertible.Deriving.html#3719" class="Bound">mkConP</a> <a id="3726" href="Foreign.Convertible.Deriving.html#3726" class="Bound">c</a> <a id="3728" href="Foreign.Convertible.Deriving.html#3728" class="Bound">mkArg</a> <a id="3734" class="Symbol">=</a> <a id="3736" href="Agda.Builtin.Reflection.html#5814" class="InductiveConstructor">Pattern.con</a> <a id="3748" href="Foreign.Convertible.Deriving.html#3726" class="Bound">c</a> <a id="3750" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3752" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="3758" class="Symbol">(</a><a id="3759" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="3764" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3766" href="Foreign.Convertible.Deriving.html#3728" class="Bound">mkArg</a> <a id="3772" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3774" href="Reflection.Syntax.html#1581" class="InductiveConstructor Operator">`_</a><a id="3776" class="Symbol">)</a> <a id="3778" class="Symbol">(</a><a id="3779" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="3788" href="Foreign.Convertible.Deriving.html#3606" class="Bound">n</a><a id="3789" class="Symbol">)</a>
    <a id="3795" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="3800" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="3802" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="3809" class="Symbol">(</a><a id="3810" href="Foreign.Convertible.Deriving.html#3606" class="Bound">n</a> <a id="3812" href="Class.DecEq.Core.html#188" class="Function Operator">==</a> <a id="3815" href="Data.List.Base.html#5044" class="Function">length</a> <a id="3822" href="Foreign.Convertible.Deriving.html#3550" class="Bound">toTel</a><a id="3827" class="Symbol">)</a>
      <a id="3835" class="Keyword">where</a> <a id="3841" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="3847" class="Symbol">→</a> <a id="3849" href="Foreign.Convertible.Deriving.html#941" class="Function">liftTC</a> <a id="3856" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3858" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="3873" class="String">&quot;%q and %q have different number of arguments&quot;</a> <a id="3920" href="Foreign.Convertible.Deriving.html#3368" class="Bound">fromC</a> <a id="3926" href="Foreign.Convertible.Deriving.html#3387" class="Bound">toC</a>
    <a id="3934" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="3941" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3943" href="Agda.Builtin.Reflection.html#6106" class="InductiveConstructor">clause</a> <a id="3950" class="Symbol">(</a><a id="3951" href="Foreign.Convertible.Deriving.html#1568" class="Function">tyViewToTel</a> <a id="3963" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3965" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="3971" class="Symbol">(λ</a> <a id="3974" class="Keyword">where</a> <a id="3980" class="Symbol">(</a><a id="3981" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="3985" href="Foreign.Convertible.Deriving.html#3985" class="Bound">x</a> <a id="3987" class="Symbol">(</a><a id="3988" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="3992" href="Foreign.Convertible.Deriving.html#3992" class="Bound">i</a> <a id="3994" class="Symbol">_))</a> <a id="3998" class="Symbol">→</a> <a id="4000" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="4004" href="Foreign.Convertible.Deriving.html#3985" class="Bound">x</a> <a id="4006" class="Symbol">(</a><a id="4007" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="4011" href="Foreign.Convertible.Deriving.html#3992" class="Bound">i</a> <a id="4013" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a><a id="4020" class="Symbol">))</a> <a id="4023" href="Foreign.Convertible.Deriving.html#3492" class="Bound">fromTel</a><a id="4030" class="Symbol">)</a>
                    <a id="4052" class="Symbol">(</a><a id="4053" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="4058" class="Symbol">(</a><a id="4059" href="Agda.Builtin.Reflection.html#5977" class="InductiveConstructor">proj</a> <a id="4064" href="Foreign.Convertible.Deriving.html#3356" class="Bound">prjP</a><a id="4068" class="Symbol">)</a> <a id="4070" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4072" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="4077" class="Symbol">(</a><a id="4078" href="Foreign.Convertible.Deriving.html#3719" class="Bound">mkConP</a> <a id="4085" href="Foreign.Convertible.Deriving.html#3368" class="Bound">fromC</a> <a id="4091" href="Function.Base.html#704" class="Function">id</a><a id="4093" class="Symbol">)</a> <a id="4095" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4097" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4099" class="Symbol">)</a>
                    <a id="4121" class="Symbol">(</a><a id="4122" href="Foreign.Convertible.Deriving.html#3639" class="Bound">mkCon</a> <a id="4128" href="Foreign.Convertible.Deriving.html#3387" class="Bound">toC</a> <a id="4132" class="Symbol">(</a><a id="4133" href="Foreign.Convertible.Deriving.html#3361" class="Bound">prjE</a> <a id="4138" href="Reflection.Syntax.html#2923" class="InductiveConstructor Operator">∙⟦_⟧</a><a id="4142" class="Symbol">))</a>

  <a id="4148" class="Comment">-- Compute the clauses of a convertible instance.</a>
  <a id="instanceClauses"></a><a id="4200" href="Foreign.Convertible.Deriving.html#4200" class="Function">instanceClauses</a> <a id="4216" class="Symbol">:</a> <a id="4218" class="Symbol">(</a><a id="4219" href="Foreign.Convertible.Deriving.html#4219" class="Bound">agdaName</a> <a id="4228" href="Foreign.Convertible.Deriving.html#4228" class="Bound">hsName</a> <a id="4235" class="Symbol">:</a> <a id="4237" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="4241" class="Symbol">)</a> <a id="4243" class="Symbol">→</a> <a id="4245" href="Reflection.TCI.html#616" class="Function">TC</a> <a id="4248" class="Symbol">(</a><a id="4249" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4254" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a><a id="4260" class="Symbol">)</a>
  <a id="4264" href="Foreign.Convertible.Deriving.html#4200" class="Function">instanceClauses</a> <a id="4280" href="Foreign.Convertible.Deriving.html#4280" class="Bound">agdaName</a> <a id="4289" href="Foreign.Convertible.Deriving.html#4289" class="Bound">hsName</a> <a id="4296" class="Symbol">=</a> <a id="4298" class="Keyword">do</a>
    <a id="4305" href="Foreign.Convertible.Deriving.html#4305" class="Bound">agdaCons</a> <a id="4314" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4316" href="Class.MonadTC.html#9640" class="Function">getConstrs</a> <a id="4327" href="Foreign.Convertible.Deriving.html#4280" class="Bound">agdaName</a>
    <a id="4340" href="Foreign.Convertible.Deriving.html#4340" class="Bound">hsCons</a>   <a id="4349" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4351" href="Class.MonadTC.html#9640" class="Function">getConstrs</a> <a id="4362" href="Foreign.Convertible.Deriving.html#4289" class="Bound">hsName</a>
    <a id="4373" href="Foreign.Convertible.Deriving.html#4373" class="Bound">agdaPars</a> <a id="4382" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4384" href="Data.List.Base.html#5044" class="Function">length</a> <a id="4391" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="4395" href="Reflection.Utils.TCI.html#7774" class="Function">getParamsAndIndices</a> <a id="4415" href="Foreign.Convertible.Deriving.html#4280" class="Bound">agdaName</a>
    <a id="4428" href="Foreign.Convertible.Deriving.html#4428" class="Bound">hsPars</a>   <a id="4437" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4439" href="Data.List.Base.html#5044" class="Function">length</a> <a id="4446" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="4450" href="Reflection.Utils.TCI.html#7774" class="Function">getParamsAndIndices</a> <a id="4470" href="Foreign.Convertible.Deriving.html#4289" class="Bound">hsName</a>
    <a id="4481" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4486" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4488" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="4495" class="Symbol">(</a><a id="4496" href="Data.List.Base.html#5044" class="Function">length</a> <a id="4503" href="Foreign.Convertible.Deriving.html#4305" class="Bound">agdaCons</a> <a id="4512" href="Class.DecEq.Core.html#188" class="Function Operator">==</a> <a id="4515" href="Data.List.Base.html#5044" class="Function">length</a> <a id="4522" href="Foreign.Convertible.Deriving.html#4340" class="Bound">hsCons</a><a id="4528" class="Symbol">)</a>
      <a id="4536" class="Keyword">where</a> <a id="4542" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="4548" class="Symbol">→</a> <a id="4550" href="Foreign.Convertible.Deriving.html#941" class="Function">liftTC</a> <a id="4557" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4559" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="4574" class="String">&quot;%q and %q have different number of constructors&quot;</a> <a id="4624" href="Foreign.Convertible.Deriving.html#4280" class="Bound">agdaName</a> <a id="4633" href="Foreign.Convertible.Deriving.html#4289" class="Bound">hsName</a>
    <a id="4644" href="Foreign.Convertible.Deriving.html#4644" class="Bound">toClauses</a>   <a id="4656" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4658" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="4663" class="Symbol">(</a><a id="4664" href="Foreign.Convertible.Deriving.html#3262" class="Function">conversionClause</a> <a id="4681" class="Symbol">(</a><a id="4682" class="Keyword">quote</a> <a id="4688" href="Foreign.Convertible.html#149" class="Field">Convertible.to</a><a id="4702" class="Symbol">)</a>   <a id="4706" class="Symbol">(</a><a id="4707" class="Keyword">quote</a> <a id="4713" href="Foreign.Convertible.html#149" class="Field">to</a><a id="4715" class="Symbol">)</a>  <a id="4718" class="Symbol">)</a> <a id="4720" class="Symbol">(</a><a id="4721" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="4727" href="Foreign.Convertible.Deriving.html#4305" class="Bound">agdaCons</a> <a id="4736" href="Foreign.Convertible.Deriving.html#4340" class="Bound">hsCons</a><a id="4742" class="Symbol">)</a>
    <a id="4748" href="Foreign.Convertible.Deriving.html#4748" class="Bound">fromClauses</a> <a id="4760" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4762" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="4767" class="Symbol">(</a><a id="4768" href="Foreign.Convertible.Deriving.html#3262" class="Function">conversionClause</a> <a id="4785" class="Symbol">(</a><a id="4786" class="Keyword">quote</a> <a id="4792" href="Foreign.Convertible.html#170" class="Field">Convertible.from</a><a id="4808" class="Symbol">)</a> <a id="4810" class="Symbol">(</a><a id="4811" class="Keyword">quote</a> <a id="4817" href="Foreign.Convertible.html#170" class="Field">from</a><a id="4821" class="Symbol">))</a> <a id="4824" class="Symbol">(</a><a id="4825" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="4831" href="Foreign.Convertible.Deriving.html#4340" class="Bound">hsCons</a> <a id="4838" href="Foreign.Convertible.Deriving.html#4305" class="Bound">agdaCons</a><a id="4846" class="Symbol">)</a>
    <a id="4852" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="4859" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4861" href="Foreign.Convertible.Deriving.html#4644" class="Bound">toClauses</a> <a id="4871" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="4874" href="Foreign.Convertible.Deriving.html#4748" class="Bound">fromClauses</a>

  <a id="absurdClause"></a><a id="4889" href="Foreign.Convertible.Deriving.html#4889" class="Function">absurdClause</a> <a id="4902" class="Symbol">:</a> <a id="4904" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="4909" class="Symbol">→</a> <a id="4911" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a>
  <a id="4920" href="Foreign.Convertible.Deriving.html#4889" class="Function">absurdClause</a> <a id="4933" href="Foreign.Convertible.Deriving.html#4933" class="Bound">prj</a> <a id="4937" class="Symbol">=</a> <a id="4939" href="Agda.Builtin.Reflection.html#6188" class="InductiveConstructor">absurd-clause</a> <a id="4953" class="Symbol">((</a><a id="4955" class="String">&quot;x&quot;</a> <a id="4959" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4961" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="4966" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a><a id="4973" class="Symbol">)</a> <a id="4975" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4977" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4979" class="Symbol">)</a> <a id="4981" class="Symbol">(</a><a id="4982" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="4987" class="Symbol">(</a><a id="4988" href="Agda.Builtin.Reflection.html#5977" class="InductiveConstructor">proj</a> <a id="4993" href="Foreign.Convertible.Deriving.html#4933" class="Bound">prj</a><a id="4996" class="Symbol">)</a> <a id="4998" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5000" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="5005" class="Symbol">(</a><a id="5006" href="Agda.Builtin.Reflection.html#6012" class="InductiveConstructor">absurd</a> <a id="5013" class="Number">0</a><a id="5014" class="Symbol">)</a> <a id="5016" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5018" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5020" class="Symbol">)</a>

  <a id="5025" class="Comment">-- Compute conversion clauses for the current goal and wrap them in a pattern lambda.</a>
  <a id="patternLambda"></a><a id="5113" href="Foreign.Convertible.Deriving.html#5113" class="Function">patternLambda</a> <a id="5127" class="Symbol">:</a> <a id="5129" href="Reflection.TCI.html#616" class="Function">TC</a> <a id="5132" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="5139" href="Foreign.Convertible.Deriving.html#5113" class="Function">patternLambda</a> <a id="5153" class="Symbol">=</a> <a id="5155" class="Keyword">do</a>
    <a id="5162" class="Keyword">quote</a> <a id="5168" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="5180" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∙⟦</a> <a id="5183" href="Foreign.Convertible.Deriving.html#5183" class="Bound">`A</a> <a id="5186" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∣</a> <a id="5188" href="Foreign.Convertible.Deriving.html#5188" class="Bound">`B</a> <a id="5191" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">⟧</a> <a id="5193" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5195" href="Class.MonadTC.html#1868" class="Field">reduce</a> <a id="5202" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="5206" href="Class.MonadTC.html#9150" class="Function">goalTy</a>
      <a id="5219" class="Keyword">where</a> <a id="5225" href="Foreign.Convertible.Deriving.html#5225" class="CatchallClause Bound">t</a> <a id="5227" class="Symbol">→</a> <a id="5229" href="Foreign.Convertible.Deriving.html#941" class="Function">liftTC</a> <a id="5236" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5238" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="5253" class="String">&quot;Expected Convertible A B, got %t&quot;</a> <a id="5288" href="Foreign.Convertible.Deriving.html#5225" class="Bound">t</a>
    <a id="5294" href="Foreign.Convertible.Deriving.html#5294" class="Bound">agdaCons</a> <a id="5303" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5305" href="Class.MonadTC.html#9992" class="Function">getConstrsForType</a> <a id="5323" href="Foreign.Convertible.Deriving.html#5183" class="Bound">`A</a>
    <a id="5330" href="Foreign.Convertible.Deriving.html#5330" class="Bound">hsCons</a>   <a id="5339" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5341" href="Class.MonadTC.html#9992" class="Function">getConstrsForType</a> <a id="5359" href="Foreign.Convertible.Deriving.html#5188" class="Bound">`B</a>
    <a id="5366" href="Foreign.Convertible.Deriving.html#5366" class="Bound">toClauses</a>   <a id="5378" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5380" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="5385" class="Symbol">(</a><a id="5386" href="Foreign.Convertible.Deriving.html#3262" class="Function">conversionClause</a> <a id="5403" class="Symbol">(</a><a id="5404" class="Keyword">quote</a> <a id="5410" href="Foreign.Convertible.html#149" class="Field">Convertible.to</a><a id="5424" class="Symbol">)</a>   <a id="5428" class="Symbol">(</a><a id="5429" class="Keyword">quote</a> <a id="5435" href="Foreign.Convertible.html#149" class="Field">to</a><a id="5437" class="Symbol">)</a>  <a id="5440" class="Symbol">)</a> <a id="5442" class="Symbol">(</a><a id="5443" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="5449" href="Foreign.Convertible.Deriving.html#5294" class="Bound">agdaCons</a> <a id="5458" href="Foreign.Convertible.Deriving.html#5330" class="Bound">hsCons</a><a id="5464" class="Symbol">)</a>
    <a id="5470" href="Foreign.Convertible.Deriving.html#5470" class="Bound">fromClauses</a> <a id="5482" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5484" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="5489" class="Symbol">(</a><a id="5490" href="Foreign.Convertible.Deriving.html#3262" class="Function">conversionClause</a> <a id="5507" class="Symbol">(</a><a id="5508" class="Keyword">quote</a> <a id="5514" href="Foreign.Convertible.html#170" class="Field">Convertible.from</a><a id="5530" class="Symbol">)</a> <a id="5532" class="Symbol">(</a><a id="5533" class="Keyword">quote</a> <a id="5539" href="Foreign.Convertible.html#170" class="Field">from</a><a id="5543" class="Symbol">))</a> <a id="5546" class="Symbol">(</a><a id="5547" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="5553" href="Foreign.Convertible.Deriving.html#5330" class="Bound">hsCons</a> <a id="5560" href="Foreign.Convertible.Deriving.html#5294" class="Bound">agdaCons</a><a id="5568" class="Symbol">)</a>
    <a id="5574" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="5579" href="Foreign.Convertible.Deriving.html#5366" class="Bound">toClauses</a> <a id="5589" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="5592" href="Foreign.Convertible.Deriving.html#5470" class="Bound">fromClauses</a> <a id="5604" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="5607" class="Symbol">λ</a> <a id="5609" class="Keyword">where</a>
      <a id="5621" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>  <a id="5625" class="Symbol">→</a> <a id="5627" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="5634" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5636" href="Agda.Builtin.Reflection.html#5361" class="InductiveConstructor">pat-lam</a> <a id="5644" class="Symbol">(</a><a id="5645" href="Foreign.Convertible.Deriving.html#4889" class="Function">absurdClause</a> <a id="5658" class="Symbol">(</a><a id="5659" class="Keyword">quote</a> <a id="5665" href="Foreign.Convertible.html#149" class="Field">Convertible.to</a><a id="5679" class="Symbol">)</a> <a id="5681" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5683" href="Foreign.Convertible.Deriving.html#4889" class="Function">absurdClause</a> <a id="5696" class="Symbol">(</a><a id="5697" class="Keyword">quote</a> <a id="5703" href="Foreign.Convertible.html#170" class="Field">Convertible.from</a><a id="5719" class="Symbol">)</a> <a id="5721" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5723" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5725" class="Symbol">)</a> <a id="5727" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
      <a id="5736" href="Foreign.Convertible.Deriving.html#5736" class="CatchallClause Bound">cls</a> <a id="5740" class="Symbol">→</a> <a id="5742" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="5749" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5751" href="Agda.Builtin.Reflection.html#5361" class="InductiveConstructor">pat-lam</a> <a id="5759" href="Foreign.Convertible.Deriving.html#5736" class="Bound">cls</a> <a id="5763" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

<a id="doPatternLambda"></a><a id="5767" href="Foreign.Convertible.Deriving.html#5767" class="Function">doPatternLambda</a> <a id="5783" class="Symbol">:</a> <a id="5785" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5790" class="Symbol">→</a> <a id="5792" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="5797" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
<a id="5802" href="Foreign.Convertible.Deriving.html#5767" class="Function">doPatternLambda</a> <a id="5818" href="Foreign.Convertible.Deriving.html#5818" class="Bound">hole</a> <a id="5823" class="Symbol">=</a> <a id="5825" href="Foreign.Convertible.Deriving.html#5113" class="Function">patternLambda</a> <a id="5839" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="5843" href="Class.MonadTC.html#1118" class="Function">initTCEnvWithGoal</a> <a id="5861" href="Foreign.Convertible.Deriving.html#5818" class="Bound">hole</a>

<a id="5867" class="Comment">-- Deriving a Convertible instance. Usage</a>
<a id="5909" class="Comment">--   unquoteDecl iName = deriveConvertible iName (quote AgdaTy) (quote HsTy)</a>
<a id="deriveConvertible"></a><a id="5986" href="Foreign.Convertible.Deriving.html#5986" class="Function">deriveConvertible</a> <a id="6004" class="Symbol">:</a> <a id="6006" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6011" class="Symbol">→</a> <a id="6013" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6018" class="Symbol">→</a> <a id="6020" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6025" class="Symbol">→</a> <a id="6027" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="6032" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="6034" href="Foreign.Convertible.Deriving.html#5986" class="Function">deriveConvertible</a> <a id="6052" href="Foreign.Convertible.Deriving.html#6052" class="Bound">instName</a> <a id="6061" href="Foreign.Convertible.Deriving.html#6061" class="Bound">agdaName</a> <a id="6070" href="Foreign.Convertible.Deriving.html#6070" class="Bound">hsName</a> <a id="6077" class="Symbol">=</a> <a id="6079" href="Reflection.Tactic.html#904" class="Function">initUnquoteWithGoal</a> <a id="6099" class="Symbol">⦃</a> <a id="6101" href="Class.MonadTC.html#704" class="Function">defaultTCOptions</a> <a id="6118" class="Symbol">⦄</a> <a id="6120" class="Symbol">(</a><a id="6121" href="Agda.Builtin.Reflection.html#5477" class="InductiveConstructor">agda-sort</a> <a id="6131" class="Symbol">(</a><a id="6132" href="Agda.Builtin.Reflection.html#5660" class="InductiveConstructor">lit</a> <a id="6136" class="Number">0</a><a id="6137" class="Symbol">))</a> <a id="6140" class="Keyword">do</a>
  <a id="6145" href="Foreign.Convertible.Deriving.html#6145" class="Bound">agdaDef</a> <a id="6153" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6155" href="Class.MonadTC.html#2236" class="Field">getDefinition</a> <a id="6169" href="Foreign.Convertible.Deriving.html#6061" class="Bound">agdaName</a>
  <a id="6180" href="Foreign.Convertible.Deriving.html#6180" class="Bound">hsDef</a>   <a id="6188" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6190" href="Class.MonadTC.html#2236" class="Field">getDefinition</a> <a id="6204" href="Foreign.Convertible.Deriving.html#6070" class="Bound">hsName</a>
  <a id="6213" class="Comment">-- instName ← freshName $ &quot;Convertible&quot; S.++ show hsName</a>
  <a id="6272" href="Foreign.Convertible.Deriving.html#6272" class="Bound">instTel</a> <a id="6280" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6282" href="Foreign.Convertible.Deriving.html#6282" class="Bound">instTy</a> <a id="6289" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6291" href="Foreign.Convertible.Deriving.html#2116" class="Function">instanceType</a> <a id="6304" href="Foreign.Convertible.Deriving.html#6061" class="Bound">agdaName</a> <a id="6313" href="Foreign.Convertible.Deriving.html#6070" class="Bound">hsName</a>
  <a id="6322" href="Foreign.Convertible.Deriving.html#6322" class="Bound">inst</a>    <a id="6330" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6332" href="Class.MonadTC.html#2061" class="Field">declareDef</a> <a id="6343" class="Symbol">(</a><a id="6344" href="Reflection.AST.Argument.html#1453" class="InductiveConstructor">iArg</a> <a id="6349" href="Foreign.Convertible.Deriving.html#6052" class="Bound">instName</a><a id="6357" class="Symbol">)</a> <a id="6359" class="Symbol">(</a><a id="6360" href="Reflection.Utils.html#2562" class="Function">tyView</a> <a id="6367" class="Symbol">(</a><a id="6368" href="Foreign.Convertible.Deriving.html#6272" class="Bound">instTel</a> <a id="6376" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6378" href="Foreign.Convertible.Deriving.html#6282" class="Bound">instTy</a><a id="6384" class="Symbol">))</a>
  <a id="6389" href="Foreign.Convertible.Deriving.html#6389" class="Bound">clauses</a> <a id="6397" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6399" href="Foreign.Convertible.Deriving.html#4200" class="Function">instanceClauses</a> <a id="6415" href="Foreign.Convertible.Deriving.html#6061" class="Bound">agdaName</a> <a id="6424" href="Foreign.Convertible.Deriving.html#6070" class="Bound">hsName</a>
  <a id="6433" href="Class.MonadTC.html#2151" class="Field">defineFun</a> <a id="6443" href="Foreign.Convertible.Deriving.html#6052" class="Bound">instName</a> <a id="6452" href="Foreign.Convertible.Deriving.html#6389" class="Bound">clauses</a>
  <a id="6462" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="6469" class="Symbol">_</a>

<a id="6472" class="Comment">-- Macros providing an alternative interface. Usage</a>
<a id="6524" class="Comment">--   iName : ConvertibleType AgdaTy HsTy</a>
<a id="6565" class="Comment">--   iName = autoConvertible</a>
<a id="6594" class="Comment">-- or</a>
<a id="6600" class="Comment">--   iName = autoConvert AgdaTy</a>
<a id="6632" class="Keyword">macro</a>
  <a id="ConvertibleType"></a><a id="6640" href="Foreign.Convertible.Deriving.html#6640" class="Function">ConvertibleType</a> <a id="6656" class="Symbol">:</a> <a id="6658" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6663" class="Symbol">→</a> <a id="6665" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6670" class="Symbol">→</a> <a id="6672" href="Reflection.Tactic.html#489" class="Function">Tactic</a>
  <a id="6681" href="Foreign.Convertible.Deriving.html#6640" class="Function">ConvertibleType</a> <a id="6697" href="Foreign.Convertible.Deriving.html#6697" class="Bound">agdaName</a> <a id="6706" href="Foreign.Convertible.Deriving.html#6706" class="Bound">hsName</a> <a id="6713" class="Symbol">=</a> <a id="6715" href="Reflection.Tactic.html#837" class="Function">initTac</a> <a id="6723" class="Symbol">⦃</a> <a id="6725" href="Class.MonadTC.html#704" class="Function">defaultTCOptions</a> <a id="6742" class="Symbol">⦄</a> <a id="6744" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6750" href="Class.MonadTC.html#10521" class="Function">unifyWithGoal</a> <a id="6764" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6766" href="Reflection.Utils.html#2562" class="Function">tyView</a> <a id="6773" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="6777" href="Foreign.Convertible.Deriving.html#2116" class="Function">instanceType</a> <a id="6790" href="Foreign.Convertible.Deriving.html#6697" class="Bound">agdaName</a> <a id="6799" href="Foreign.Convertible.Deriving.html#6706" class="Bound">hsName</a>

  <a id="autoConvertible"></a><a id="6809" href="Foreign.Convertible.Deriving.html#6809" class="Function">autoConvertible</a> <a id="6825" class="Symbol">:</a> <a id="6827" href="Reflection.Tactic.html#489" class="Function">Tactic</a>
  <a id="6836" href="Foreign.Convertible.Deriving.html#6809" class="Function">autoConvertible</a> <a id="6852" class="Symbol">=</a> <a id="6854" href="Reflection.Tactic.html#837" class="Function">initTac</a> <a id="6862" class="Symbol">⦃</a> <a id="6864" href="Class.MonadTC.html#704" class="Function">defaultTCOptions</a> <a id="6881" class="Symbol">⦄</a> <a id="6883" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6889" href="Class.MonadTC.html#10521" class="Function">unifyWithGoal</a> <a id="6903" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="6907" href="Foreign.Convertible.Deriving.html#5113" class="Function">patternLambda</a>

  <a id="autoConvert"></a><a id="6924" href="Foreign.Convertible.Deriving.html#6924" class="Function">autoConvert</a> <a id="6936" class="Symbol">:</a> <a id="6938" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6943" class="Symbol">→</a> <a id="6945" href="Reflection.Tactic.html#489" class="Function">Tactic</a>
  <a id="6954" href="Foreign.Convertible.Deriving.html#6924" class="Function">autoConvert</a> <a id="6966" href="Foreign.Convertible.Deriving.html#6966" class="Bound">d</a> <a id="6968" href="Foreign.Convertible.Deriving.html#6968" class="Bound">hole</a> <a id="6973" class="Symbol">=</a> <a id="6975" class="Keyword">do</a>
    <a id="6982" href="Foreign.Convertible.Deriving.html#6982" class="Bound">hsTyMeta</a> <a id="6991" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6993" href="Reflection.TCM.html#1261" class="Function">R.newMeta</a> <a id="7003" href="Foreign.HaskellTypes.Deriving.html#1704" class="Function">`Set</a>
    <a id="7012" href="Agda.Builtin.Reflection.html#8929" class="Postulate">R.checkType</a> <a id="7024" href="Foreign.Convertible.Deriving.html#6968" class="Bound">hole</a> <a id="7029" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="7031" class="Keyword">quote</a> <a id="7037" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="7049" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∙⟦</a> <a id="7052" href="Foreign.Convertible.Deriving.html#6966" class="Bound">d</a> <a id="7054" href="Reflection.Syntax.html#2899" class="InductiveConstructor Operator">∙</a> <a id="7056" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">∣</a> <a id="7058" href="Foreign.Convertible.Deriving.html#6982" class="Bound">hsTyMeta</a> <a id="7067" href="Reflection.Syntax.html#2963" class="InductiveConstructor Operator">⟧</a>
    <a id="7073" href="Foreign.Convertible.Deriving.html#7073" class="Bound">hsTy</a> <a id="7078" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="7080" href="Foreign.HaskellTypes.Deriving.html#3951" class="Function">solveHsType</a> <a id="7092" class="Symbol">(</a><a id="7093" href="Foreign.Convertible.Deriving.html#6966" class="Bound">d</a> <a id="7095" href="Reflection.Syntax.html#2899" class="InductiveConstructor Operator">∙</a><a id="7096" class="Symbol">)</a>
    <a id="7102" href="Agda.Builtin.Reflection.html#8790" class="Postulate">R.unify</a> <a id="7110" href="Foreign.Convertible.Deriving.html#6982" class="Bound">hsTyMeta</a> <a id="7119" href="Foreign.Convertible.Deriving.html#7073" class="Bound">hsTy</a>
    <a id="7128" href="Agda.Builtin.Reflection.html#8790" class="Postulate">R.unify</a> <a id="7136" href="Foreign.Convertible.Deriving.html#6968" class="Bound">hole</a> <a id="7141" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="7145" href="Foreign.Convertible.Deriving.html#5767" class="Function">doPatternLambda</a> <a id="7161" href="Foreign.Convertible.Deriving.html#6968" class="Bound">hole</a>
</pre></body></html>