<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Ledger</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">import</a> <a id="33" href="Data.List.html" class="Module">Data.List</a> <a id="43" class="Symbol">as</a> <a id="46" class="Module">L</a>

<a id="49" class="Keyword">open</a> <a id="54" class="Keyword">import</a> <a id="61" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="76" class="Keyword">open</a> <a id="81" class="Keyword">import</a> <a id="88" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a> <a id="181" class="Keyword">using</a> <a id="187" class="Symbol">(</a><a id="188" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Record">TransactionStructure</a><a id="208" class="Symbol">)</a>

<a id="211" class="Keyword">module</a> <a id="218" href="Ledger.Dijkstra.Specification.Ledger.html" class="Module">Ledger.Dijkstra.Specification.Ledger</a>
  <a id="257" class="Symbol">(</a><a id="258" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="262" class="Symbol">:</a> <a id="264" class="Symbol">_)</a> <a id="267" class="Symbol">(</a><a id="268" class="Keyword">open</a> <a id="273" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Module">TransactionStructure</a> <a id="294" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a><a id="297" class="Symbol">)</a>
  <a id="301" class="Symbol">(</a><a id="302" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a> <a id="306" class="Symbol">:</a> <a id="308" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="326" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a><a id="329" class="Symbol">)</a> <a id="331" class="Symbol">(</a><a id="332" class="Keyword">open</a> <a id="337" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="355" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a><a id="358" class="Symbol">)</a>
  <a id="362" class="Keyword">where</a>

<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="415" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>
<a id="428" class="Keyword">open</a> <a id="433" class="Keyword">import</a> <a id="440" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="472" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>
<a id="485" class="Keyword">open</a> <a id="490" class="Keyword">import</a> <a id="497" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a> <a id="532" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="536" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a>
<a id="540" class="Keyword">open</a> <a id="545" class="Keyword">import</a> <a id="552" href="Ledger.Dijkstra.Specification.Utxow.html" class="Module">Ledger.Dijkstra.Specification.Utxow</a> <a id="588" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="592" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a>
<a id="596" class="Keyword">open</a> <a id="601" class="Keyword">import</a> <a id="608" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="644" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>

<a id="658" class="Keyword">open</a> <a id="663" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Module">Tx</a>
<a id="666" class="Keyword">open</a> <a id="671" href="Ledger.Conway.Specification.Certs.html#4021" class="Module">GState</a>
<a id="678" class="Keyword">open</a> <a id="683" href="Ledger.Conway.Specification.Gov.Actions.html#3822" class="Module">GovActionState</a>
<a id="698" class="Keyword">open</a> <a id="703" href="Ledger.Conway.Specification.Enact.html#448" class="Module">EnactState</a> <a id="714" class="Keyword">using</a> <a id="720" class="Symbol">(</a><a id="721" href="Ledger.Conway.Specification.Enact.html#484" class="Field">cc</a><a id="723" class="Symbol">)</a>
<a id="725" class="Comment">--</a>


<a id="730" class="Keyword">record</a> <a id="SubLedgerEnv"></a><a id="737" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="750" class="Symbol">:</a> <a id="752" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="757" class="Keyword">where</a>
  <a id="765" class="Keyword">field</a>
    <a id="SubLedgerEnv.slot"></a><a id="775" href="Ledger.Dijkstra.Specification.Ledger.html#775" class="Field">slot</a>        <a id="787" class="Symbol">:</a> <a id="789" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="SubLedgerEnv.ppolicy"></a><a id="798" href="Ledger.Dijkstra.Specification.Ledger.html#798" class="Field">ppolicy</a>     <a id="810" class="Symbol">:</a> <a id="812" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="818" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="SubLedgerEnv.pparams"></a><a id="833" href="Ledger.Dijkstra.Specification.Ledger.html#833" class="Field">pparams</a>     <a id="845" class="Symbol">:</a> <a id="847" href="Ledger.Conway.Specification.PParams.html#1689" class="Record">PParams</a>
    <a id="SubLedgerEnv.enactState"></a><a id="859" href="Ledger.Dijkstra.Specification.Ledger.html#859" class="Field">enactState</a>  <a id="871" class="Symbol">:</a> <a id="873" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
    <a id="SubLedgerEnv.treasury"></a><a id="888" href="Ledger.Dijkstra.Specification.Ledger.html#888" class="Field">treasury</a>    <a id="900" class="Symbol">:</a> <a id="902" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
    <a id="SubLedgerEnv.utxo₀"></a><a id="915" href="Ledger.Dijkstra.Specification.Ledger.html#915" class="Field">utxo₀</a>            <a id="932" class="Symbol">:</a> <a id="934" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
    <a id="SubLedgerEnv.isTopLevelValid"></a><a id="943" href="Ledger.Dijkstra.Specification.Ledger.html#943" class="Field">isTopLevelValid</a>  <a id="960" class="Symbol">:</a> <a id="962" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
    <a id="SubLedgerEnv.globalScripts"></a><a id="971" href="Ledger.Dijkstra.Specification.Ledger.html#971" class="Field">globalScripts</a>    <a id="988" class="Symbol">:</a> <a id="990" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="992" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
    <a id="SubLedgerEnv.globalData"></a><a id="1003" href="Ledger.Dijkstra.Specification.Ledger.html#1003" class="Field">globalData</a>       <a id="1020" class="Symbol">:</a> <a id="1022" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="1031" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1033" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>

<a id="1040" class="Keyword">record</a> <a id="LedgerEnv"></a><a id="1047" href="Ledger.Dijkstra.Specification.Ledger.html#1047" class="Record">LedgerEnv</a> <a id="1057" class="Symbol">:</a> <a id="1059" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1064" class="Keyword">where</a>
  <a id="1072" class="Keyword">field</a>
    <a id="LedgerEnv.slot"></a><a id="1082" href="Ledger.Dijkstra.Specification.Ledger.html#1082" class="Field">slot</a>        <a id="1094" class="Symbol">:</a> <a id="1096" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="LedgerEnv.ppolicy"></a><a id="1105" href="Ledger.Dijkstra.Specification.Ledger.html#1105" class="Field">ppolicy</a>     <a id="1117" class="Symbol">:</a> <a id="1119" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1125" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="LedgerEnv.pparams"></a><a id="1140" href="Ledger.Dijkstra.Specification.Ledger.html#1140" class="Field">pparams</a>     <a id="1152" class="Symbol">:</a> <a id="1154" href="Ledger.Conway.Specification.PParams.html#1689" class="Record">PParams</a>
    <a id="LedgerEnv.enactState"></a><a id="1166" href="Ledger.Dijkstra.Specification.Ledger.html#1166" class="Field">enactState</a>  <a id="1178" class="Symbol">:</a> <a id="1180" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
    <a id="LedgerEnv.treasury"></a><a id="1195" href="Ledger.Dijkstra.Specification.Ledger.html#1195" class="Field">treasury</a>    <a id="1207" class="Symbol">:</a> <a id="1209" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>


<a id="1220" class="Keyword">instance</a>
  <a id="1231" class="Keyword">unquoteDecl</a> <a id="HasCast-LedgerEnv"></a><a id="1243" href="Ledger.Dijkstra.Specification.Ledger.html#1243" class="Function">HasCast-LedgerEnv</a> <a id="HasCast-SubLedgerEnv"></a><a id="1261" href="Ledger.Dijkstra.Specification.Ledger.html#1261" class="Function">HasCast-SubLedgerEnv</a> <a id="1282" class="Symbol">=</a> <a id="1284" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1303" class="Symbol">((</a><a id="1305" class="Keyword">quote</a> <a id="1311" href="Ledger.Dijkstra.Specification.Ledger.html#1047" class="Record">LedgerEnv</a> <a id="1321" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1323" href="Ledger.Dijkstra.Specification.Ledger.html#1243" class="Function">HasCast-LedgerEnv</a><a id="1340" class="Symbol">)</a> <a id="1342" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1344" class="Symbol">(</a><a id="1345" class="Keyword">quote</a> <a id="1351" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="1364" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1366" href="Ledger.Dijkstra.Specification.Ledger.html#1261" class="Function">HasCast-SubLedgerEnv</a><a id="1386" class="Symbol">)</a> <a id="1388" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1390" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1392" class="Symbol">)</a>

  <a id="HasPParams-LedgerEnv"></a><a id="1397" href="Ledger.Dijkstra.Specification.Ledger.html#1397" class="Function">HasPParams-LedgerEnv</a> <a id="1418" class="Symbol">:</a> <a id="1420" href="Ledger.Conway.Specification.PParams.html#3493" class="Record">HasPParams</a> <a id="1431" href="Ledger.Dijkstra.Specification.Ledger.html#1047" class="Record">LedgerEnv</a>
  <a id="1443" href="Ledger.Dijkstra.Specification.Ledger.html#1397" class="Function">HasPParams-LedgerEnv</a> <a id="1464" class="Symbol">.</a><a id="1465" href="Ledger.Conway.Specification.PParams.html#3544" class="Field">PParamsOf</a> <a id="1475" class="Symbol">=</a> <a id="1477" href="Ledger.Dijkstra.Specification.Ledger.html#1140" class="Field">LedgerEnv.pparams</a>

  <a id="HasPParams-SubLedgerEnv"></a><a id="1498" href="Ledger.Dijkstra.Specification.Ledger.html#1498" class="Function">HasPParams-SubLedgerEnv</a> <a id="1522" class="Symbol">:</a> <a id="1524" href="Ledger.Conway.Specification.PParams.html#3493" class="Record">HasPParams</a> <a id="1535" href="Ledger.Dijkstra.Specification.Ledger.html#1047" class="Record">LedgerEnv</a>
  <a id="1547" href="Ledger.Dijkstra.Specification.Ledger.html#1498" class="Function">HasPParams-SubLedgerEnv</a> <a id="1571" class="Symbol">.</a><a id="1572" href="Ledger.Conway.Specification.PParams.html#3544" class="Field">PParamsOf</a> <a id="1582" class="Symbol">=</a> <a id="1584" href="Ledger.Dijkstra.Specification.Ledger.html#1140" class="Field">LedgerEnv.pparams</a>


<a id="1604" class="Keyword">record</a> <a id="LState"></a><a id="1611" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="1618" class="Symbol">:</a> <a id="1620" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1625" class="Keyword">where</a>


  <a id="1635" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ˡ"></a><a id="1647" href="Ledger.Dijkstra.Specification.Ledger.html#1647" class="InductiveConstructor Operator">⟦_,_,_⟧ˡ</a>


  <a id="1660" class="Keyword">field</a>
    <a id="LState.utxoSt"></a><a id="1670" href="Ledger.Dijkstra.Specification.Ledger.html#1670" class="Field">utxoSt</a>     <a id="1681" class="Symbol">:</a> <a id="1683" href="Ledger.Dijkstra.Specification.Utxo.html#710" class="Record">UTxOState</a>
    <a id="LState.govSt"></a><a id="1697" href="Ledger.Dijkstra.Specification.Ledger.html#1697" class="Field">govSt</a>      <a id="1708" class="Symbol">:</a> <a id="1710" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a>
    <a id="LState.certState"></a><a id="1723" href="Ledger.Dijkstra.Specification.Ledger.html#1723" class="Field">certState</a>  <a id="1734" class="Symbol">:</a> <a id="1736" href="Ledger.Conway.Specification.Certs.html#4152" class="Record">CertState</a>


<a id="1748" class="Keyword">record</a> <a id="HasLState"></a><a id="1755" href="Ledger.Dijkstra.Specification.Ledger.html#1755" class="Record">HasLState</a> <a id="1765" class="Symbol">{</a><a id="1766" href="Ledger.Dijkstra.Specification.Ledger.html#1766" class="Bound">a</a><a id="1767" class="Symbol">}</a> <a id="1769" class="Symbol">(</a><a id="1770" href="Ledger.Dijkstra.Specification.Ledger.html#1770" class="Bound">A</a> <a id="1772" class="Symbol">:</a> <a id="1774" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1779" href="Ledger.Dijkstra.Specification.Ledger.html#1766" class="Bound">a</a><a id="1780" class="Symbol">)</a> <a id="1782" class="Symbol">:</a> <a id="1784" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1789" href="Ledger.Dijkstra.Specification.Ledger.html#1766" class="Bound">a</a> <a id="1791" class="Keyword">where</a>
  <a id="1799" class="Keyword">field</a> <a id="HasLState.LStateOf"></a><a id="1805" href="Ledger.Dijkstra.Specification.Ledger.html#1805" class="Field">LStateOf</a> <a id="1814" class="Symbol">:</a> <a id="1816" href="Ledger.Dijkstra.Specification.Ledger.html#1770" class="Bound">A</a> <a id="1818" class="Symbol">→</a> <a id="1820" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a>
<a id="1827" class="Keyword">open</a> <a id="1832" href="Ledger.Dijkstra.Specification.Ledger.html#1755" class="Module">HasLState</a> <a id="1842" class="Symbol">⦃...⦄</a> <a id="1848" class="Keyword">public</a>

<a id="1856" class="Comment">-- instance</a>
<a id="1868" class="Comment">--   HasUTxOState-LState : HasUTxOState LState</a>
<a id="1915" class="Comment">--   HasUTxOState-LState .UTxOStateOf = LState.utxoSt</a>

<a id="1970" class="Comment">--   HasUTxO-LState : HasUTxO LState</a>
<a id="2007" class="Comment">--   HasUTxO-LState .UTxOOf = UTxOOf ∘ UTxOStateOf</a>

<a id="2059" class="Comment">--   HasGovState-LState : HasGovState LState</a>
<a id="2104" class="Comment">--   HasGovState-LState .GovStateOf = LState.govSt</a>

<a id="2156" class="Comment">--   HasCertState-LState : HasCertState LState</a>
<a id="2203" class="Comment">--   HasCertState-LState .CertStateOf = LState.certState</a>

<a id="2261" class="Comment">--   HasDeposits-LState : HasDeposits LState</a>
<a id="2306" class="Comment">--   HasDeposits-LState .DepositsOf = DepositsOf ∘ UTxOStateOf</a>

<a id="2370" class="Comment">--   HasPools-LState : HasPools LState</a>
<a id="2409" class="Comment">--   HasPools-LState .PoolsOf = PoolsOf ∘ CertStateOf</a>

<a id="2464" class="Comment">--   HasGState-LState : HasGState LState</a>
<a id="2505" class="Comment">--   HasGState-LState .GStateOf = GStateOf ∘ CertStateOf</a>

<a id="2563" class="Comment">--   HasDState-LState : HasDState LState</a>
<a id="2604" class="Comment">--   HasDState-LState .DStateOf = DStateOf ∘ CertStateOf</a>

<a id="2662" class="Comment">--   HasPState-LState : HasPState LState</a>
<a id="2703" class="Comment">--   HasPState-LState .PStateOf = PStateOf ∘ CertStateOf</a>

<a id="2761" class="Comment">--   HasVoteDelegs-LState : HasVoteDelegs LState</a>
<a id="2810" class="Comment">--   HasVoteDelegs-LState .VoteDelegsOf = VoteDelegsOf ∘ DStateOf ∘ CertStateOf</a>

<a id="2891" class="Comment">--   HasDonations-LState : HasDonations LState</a>
<a id="2938" class="Comment">--   HasDonations-LState .DonationsOf = DonationsOf ∘ UTxOStateOf</a>

<a id="3005" class="Comment">--   HasFees-LState : HasFees LState</a>
<a id="3042" class="Comment">--   HasFees-LState .FeesOf = FeesOf ∘ UTxOStateOf</a>

<a id="3094" class="Comment">--   HasCCHotKeys-LState : HasCCHotKeys LState</a>
<a id="3141" class="Comment">--   HasCCHotKeys-LState .CCHotKeysOf = CCHotKeysOf ∘ GStateOf</a>

<a id="3205" class="Comment">--   HasDReps-LState : HasDReps LState</a>
<a id="3244" class="Comment">--   HasDReps-LState .DRepsOf = DRepsOf ∘ CertStateOf</a>

<a id="3299" class="Comment">-- open CertState</a>
<a id="3317" class="Comment">-- open DState</a>
<a id="3332" class="Comment">-- open GovVotes</a>

<a id="3350" class="Keyword">instance</a>
  <a id="3361" class="Keyword">unquoteDecl</a> <a id="HasCast-LState"></a><a id="3373" href="Ledger.Dijkstra.Specification.Ledger.html#3373" class="Function">HasCast-LState</a> <a id="3388" class="Symbol">=</a> <a id="3390" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="3409" class="Symbol">((</a><a id="3411" class="Keyword">quote</a> <a id="3417" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="3424" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3426" href="Ledger.Dijkstra.Specification.Ledger.html#3373" class="Function">HasCast-LState</a><a id="3440" class="Symbol">)</a> <a id="3442" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3444" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="3446" class="Symbol">)</a>


<a id="txgov"></a><a id="3450" href="Ledger.Dijkstra.Specification.Ledger.html#3450" class="Function">txgov</a> <a id="3456" class="Symbol">:</a> <a id="3458" class="Symbol">∀</a> <a id="3460" class="Symbol">{</a><a id="3461" href="Ledger.Dijkstra.Specification.Ledger.html#3461" class="Bound">ℓ</a><a id="3462" class="Symbol">}</a> <a id="3464" class="Symbol">→</a> <a id="3466" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Record">TxBody</a> <a id="3473" href="Ledger.Dijkstra.Specification.Ledger.html#3461" class="Bound">ℓ</a> <a id="3475" class="Symbol">→</a> <a id="3477" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3482" class="Symbol">(</a><a id="3483" href="Ledger.Conway.Specification.Gov.Actions.html#2294" class="Record">GovVote</a> <a id="3491" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3493" href="Ledger.Conway.Specification.Gov.Actions.html#3603" class="Record">GovProposal</a><a id="3504" class="Symbol">)</a>
<a id="3506" href="Ledger.Dijkstra.Specification.Ledger.html#3450" class="Function">txgov</a> <a id="3512" href="Ledger.Dijkstra.Specification.Ledger.html#3512" class="Bound">txb</a> <a id="3516" class="Symbol">=</a> <a id="3518" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3522" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3527" href="Ledger.Dijkstra.Specification.Transaction.html#4332" class="Field">txGovProposals</a> <a id="3542" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="3545" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3549" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3554" href="Ledger.Dijkstra.Specification.Transaction.html#4288" class="Field">txGovVotes</a>
  <a id="3567" class="Keyword">where</a> <a id="3573" class="Keyword">open</a> <a id="3578" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="3585" href="Ledger.Dijkstra.Specification.Ledger.html#3512" class="Bound">txb</a>

<a id="3590" class="Comment">-- rmOrphanDRepVotes : CertState → GovState → GovState</a>
<a id="3645" class="Comment">-- rmOrphanDRepVotes cs govSt = L.map (map₂ go) govSt</a>
<a id="3699" class="Comment">--   where</a>
<a id="3710" class="Comment">--    ifDRepRegistered : Credential → Type</a>
<a id="3753" class="Comment">--    ifDRepRegistered c = c ∈ dom (DRepsOf cs)</a>

<a id="3802" class="Comment">--    go : GovActionState → GovActionState</a>
<a id="3845" class="Comment">--    go gas = record gas { votes = record (gas .votes) { gvDRep = filterKeys ifDRepRegistered (gas .votes .gvDRep) } }</a>

<a id="allColdCreds"></a><a id="3966" href="Ledger.Dijkstra.Specification.Ledger.html#3966" class="Function">allColdCreds</a> <a id="3979" class="Symbol">:</a> <a id="3981" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a> <a id="3990" class="Symbol">→</a> <a id="3992" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a> <a id="4003" class="Symbol">→</a> <a id="4005" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4007" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a>
<a id="4018" href="Ledger.Dijkstra.Specification.Ledger.html#3966" class="Function">allColdCreds</a> <a id="4031" href="Ledger.Dijkstra.Specification.Ledger.html#4031" class="Bound">govSt</a> <a id="4037" href="Ledger.Dijkstra.Specification.Ledger.html#4037" class="Bound">es</a> <a id="4040" class="Symbol">=</a>
  <a id="4044" href="Ledger.Conway.Specification.Enact.html#1366" class="Function">ccCreds</a> <a id="4052" class="Symbol">(</a><a id="4053" href="Ledger.Dijkstra.Specification.Ledger.html#4037" class="Bound">es</a> <a id="4056" class="Symbol">.</a><a id="4057" href="Ledger.Conway.Specification.Enact.html#484" class="Field">cc</a><a id="4059" class="Symbol">)</a> <a id="4061" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4063" href="Axiom.Set.html#7207" class="Function">concatMapˢ</a> <a id="4074" class="Symbol">(λ</a> <a id="4077" class="Symbol">(_</a> <a id="4080" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4082" href="Ledger.Dijkstra.Specification.Ledger.html#4082" class="Bound">st</a><a id="4084" class="Symbol">)</a> <a id="4086" class="Symbol">→</a> <a id="4088" href="Ledger.Conway.Specification.Gov.Actions.html#6886" class="Function">proposedCC</a> <a id="4099" class="Symbol">(</a><a id="4100" href="Ledger.Conway.Specification.Gov.Actions.html#1649" class="Field">GovActionOf</a> <a id="4112" href="Ledger.Dijkstra.Specification.Ledger.html#4082" class="Bound">st</a><a id="4114" class="Symbol">))</a> <a id="4117" class="Symbol">(</a><a id="4118" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="4127" href="Ledger.Dijkstra.Specification.Ledger.html#4031" class="Bound">govSt</a><a id="4132" class="Symbol">)</a>


<a id="4136" class="Keyword">private</a> <a id="4144" class="Keyword">variable</a>
  <a id="4155" href="Ledger.Dijkstra.Specification.Ledger.html#4155" class="Generalizable">Γ</a>                     <a id="4177" class="Symbol">:</a> <a id="4179" href="Ledger.Dijkstra.Specification.Ledger.html#1047" class="Record">LedgerEnv</a>
  <a id="4191" href="Ledger.Dijkstra.Specification.Ledger.html#4191" class="Generalizable">s</a> <a id="4193" href="Ledger.Dijkstra.Specification.Ledger.html#4193" class="Generalizable">s&#39;</a> <a id="4196" href="Ledger.Dijkstra.Specification.Ledger.html#4196" class="Generalizable">s&#39;&#39;</a>              <a id="4213" class="Symbol">:</a> <a id="4215" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a>
  <a id="4224" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Generalizable">utxoState</a> <a id="4234" href="Ledger.Dijkstra.Specification.Ledger.html#4234" class="Generalizable">utxoState&#39;</a>  <a id="4246" class="Symbol">:</a> <a id="4248" href="Ledger.Dijkstra.Specification.Utxo.html#710" class="Record">UTxOState</a>
  <a id="4260" href="Ledger.Dijkstra.Specification.Ledger.html#4260" class="Generalizable">utxo₀</a>                 <a id="4282" class="Symbol">:</a> <a id="4284" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
  <a id="4291" href="Ledger.Dijkstra.Specification.Ledger.html#4291" class="Generalizable">govState</a> <a id="4300" href="Ledger.Dijkstra.Specification.Ledger.html#4300" class="Generalizable">govState&#39;</a>    <a id="4313" class="Symbol">:</a> <a id="4315" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a>
  <a id="4326" href="Ledger.Dijkstra.Specification.Ledger.html#4326" class="Generalizable">certState</a> <a id="4336" href="Ledger.Dijkstra.Specification.Ledger.html#4336" class="Generalizable">certState&#39;</a>  <a id="4348" class="Symbol">:</a> <a id="4350" href="Ledger.Conway.Specification.Certs.html#4152" class="Record">CertState</a>
  <a id="4362" href="Ledger.Dijkstra.Specification.Ledger.html#4362" class="Generalizable">stx</a>                   <a id="4384" class="Symbol">:</a> <a id="4386" href="Ledger.Dijkstra.Specification.Transaction.html#5294" class="Function">SubLevelTx</a>
  <a id="4399" href="Ledger.Dijkstra.Specification.Ledger.html#4399" class="Generalizable">slot</a>                  <a id="4421" class="Symbol">:</a> <a id="4423" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
  <a id="4430" href="Ledger.Dijkstra.Specification.Ledger.html#4430" class="Generalizable">ppolicy</a>               <a id="4452" class="Symbol">:</a> <a id="4454" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4460" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
  <a id="4473" href="Ledger.Dijkstra.Specification.Ledger.html#4473" class="Generalizable">pp</a>                    <a id="4495" class="Symbol">:</a> <a id="4497" href="Ledger.Conway.Specification.PParams.html#1689" class="Record">PParams</a>
  <a id="4507" href="Ledger.Dijkstra.Specification.Ledger.html#4507" class="Generalizable">enactState</a>            <a id="4529" class="Symbol">:</a> <a id="4531" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
  <a id="4544" href="Ledger.Dijkstra.Specification.Ledger.html#4544" class="Generalizable">treasury</a>              <a id="4566" class="Symbol">:</a> <a id="4568" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
  <a id="4579" href="Ledger.Dijkstra.Specification.Ledger.html#4579" class="Generalizable">isTopLevelValid</a>       <a id="4601" class="Symbol">:</a> <a id="4603" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="4610" href="Ledger.Dijkstra.Specification.Ledger.html#4610" class="Generalizable">globalScripts</a>         <a id="4632" class="Symbol">:</a> <a id="4634" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4636" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
  <a id="4645" href="Ledger.Dijkstra.Specification.Ledger.html#4645" class="Generalizable">globalData</a>            <a id="4667" class="Symbol">:</a> <a id="4669" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="4678" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4680" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>


<a id="4688" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SUBLEDGER⦈_"></a><a id="4693" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">_⊢_⇀⦇_,SUBLEDGER⦈_</a> <a id="4712" class="Symbol">:</a> <a id="4714" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="4727" class="Symbol">→</a> <a id="4729" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="4736" class="Symbol">→</a> <a id="4738" href="Ledger.Dijkstra.Specification.Transaction.html#5294" class="Function">SubLevelTx</a> <a id="4749" class="Symbol">→</a> <a id="4751" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="4758" class="Symbol">→</a> <a id="4760" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4765" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,SUBLEDGER⦈_.SUBLEDGER-V"></a><a id="4773" href="Ledger.Dijkstra.Specification.Ledger.html#4773" class="InductiveConstructor">SUBLEDGER-V</a> <a id="4785" class="Symbol">:</a>
    <a id="4791" class="Keyword">let</a> <a id="4795" href="Ledger.Dijkstra.Specification.Ledger.html#4795" class="Bound">txb</a> <a id="4799" class="Symbol">=</a> <a id="4801" href="Ledger.Dijkstra.Specification.Ledger.html#4362" class="Generalizable">stx</a> <a id="4805" class="Symbol">.</a><a id="4806" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>



        <a id="4824" class="Keyword">open</a> <a id="4829" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="4836" href="Ledger.Dijkstra.Specification.Ledger.html#4795" class="Bound">txb</a>


    <a id="4846" class="Keyword">in</a>
      <a id="4855" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="4857" href="Ledger.Dijkstra.Specification.Ledger.html#4579" class="Generalizable">isTopLevelValid</a> <a id="4873" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4875" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="4886" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{4890}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{4897}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{4902}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4260}{\htmlId{4913}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4579}{\htmlId{4921}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4610}{\htmlId{4939}{\htmlClass{Generalizable}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4645}{\htmlId{4955}{\htmlClass{Generalizable}{\text{globalData}}}}\, \end{pmatrix}$</a>  <a id="4969" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⊢</a> <a id="4971" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Generalizable">utxoState</a> <a id="4981" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⇀⦇</a> <a id="4984" href="Ledger.Dijkstra.Specification.Ledger.html#4362" class="Generalizable">stx</a> <a id="4988" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">,SUBUTXOW⦈</a> <a id="4999" href="Ledger.Dijkstra.Specification.Ledger.html#4234" class="Generalizable">utxoState&#39;</a>
      <a id="5016" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{5020}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{5026}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{5033}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4288}{\htmlId{5038}{\htmlClass{Function}{\text{txGovVotes}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4105}{\htmlId{5051}{\htmlClass{Function}{\text{txWithdrawals}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#3966}{\htmlId{5067}{\htmlClass{Function}{\text{allColdCreds}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{5080}{\htmlClass{Generalizable}{\text{govState}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{5089}{\htmlClass{Generalizable}{\text{enactState}}}}\, \end{pmatrix}$</a> <a id="5102" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⊢</a> <a id="5104" href="Ledger.Dijkstra.Specification.Ledger.html#4326" class="Generalizable">certState</a> <a id="5114" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⇀⦇</a> <a id="5117" href="Ledger.Dijkstra.Specification.Transaction.html#4008" class="Function">txCerts</a> <a id="5125" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">,CERTS⦈</a> <a id="5133" href="Ledger.Dijkstra.Specification.Ledger.html#4336" class="Generalizable">certState&#39;</a>
      <a id="5150" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#3972}{\htmlId{5154}{\htmlClass{Function}{\text{txId}}}}\, \\ \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{5161}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{5167}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{5174}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{5179}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{5189}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4336}{\htmlId{5202}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \\ \,\href{Class.IsSet.html#916}{\htmlId{5215}{\htmlClass{Function}{\text{dom}}}}\, \,\htmlId{5219}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Certs.html#1733}{\htmlId{5220}{\htmlClass{Field}{\text{RewardsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{5230}{\htmlClass{Generalizable}{\text{certState}}}}\,\,\htmlId{5239}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}$</a> <a id="5243" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⊢</a> <a id="5245" class="Comment">{- rmOrphanDRepVotes certState&#39; -}</a> <a id="5280" href="Ledger.Dijkstra.Specification.Ledger.html#4291" class="Generalizable">govState</a> <a id="5289" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⇀⦇</a> <a id="5292" href="Ledger.Dijkstra.Specification.Ledger.html#3450" class="Function">txgov</a> <a id="5298" href="Ledger.Dijkstra.Specification.Ledger.html#4795" class="Bound">txb</a> <a id="5302" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">,GOVS⦈</a> <a id="5309" href="Ledger.Dijkstra.Specification.Ledger.html#4300" class="Generalizable">govState&#39;</a>
      <a id="5325" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{5366}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{5373}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{5383}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{5388}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{5401}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4260}{\htmlId{5412}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4579}{\htmlId{5420}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4610}{\htmlId{5438}{\htmlClass{Generalizable}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4645}{\htmlId{5454}{\htmlClass{Generalizable}{\text{globalData}}}}\, \end{pmatrix}$</a> <a id="5467" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{5471}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{5483}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{5494}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="5506" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">⇀⦇</a> <a id="5509" href="Ledger.Dijkstra.Specification.Ledger.html#4362" class="Generalizable">stx</a> <a id="5513" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">,SUBLEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4234}{\htmlId{5527}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{5540}{\htmlClass{Generalizable}{\text{govState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4336}{\htmlId{5552}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,SUBLEDGER⦈_.SUBLEDGER-I"></a><a id="5568" href="Ledger.Dijkstra.Specification.Ledger.html#5568" class="InductiveConstructor">SUBLEDGER-I</a> <a id="5580" class="Symbol">:</a>
      <a id="5588" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5590" href="Ledger.Dijkstra.Specification.Ledger.html#4579" class="Generalizable">isTopLevelValid</a> <a id="5606" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5608" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="5620" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{5624}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{5631}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{5636}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4260}{\htmlId{5647}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4579}{\htmlId{5655}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4610}{\htmlId{5673}{\htmlClass{Generalizable}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4645}{\htmlId{5689}{\htmlClass{Generalizable}{\text{globalData}}}}\, \end{pmatrix}$</a> <a id="5702" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⊢</a> <a id="5704" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Generalizable">utxoState</a> <a id="5714" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⇀⦇</a> <a id="5717" href="Ledger.Dijkstra.Specification.Ledger.html#4362" class="Generalizable">stx</a> <a id="5721" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">,SUBUTXOW⦈</a> <a id="5732" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Generalizable">utxoState</a>
      <a id="5748" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{5789}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{5796}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{5806}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{5811}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{5824}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4260}{\htmlId{5835}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4579}{\htmlId{5843}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4610}{\htmlId{5861}{\htmlClass{Generalizable}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4645}{\htmlId{5877}{\htmlClass{Generalizable}{\text{globalData}}}}\, \end{pmatrix}$</a> <a id="5890" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{5894}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{5906}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{5917}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="5929" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">⇀⦇</a> <a id="5932" href="Ledger.Dijkstra.Specification.Ledger.html#4362" class="Generalizable">stx</a> <a id="5936" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">,SUBLEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{5950}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{5962}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{5973}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="_⊢_⇀⦇_,SUBLEDGERS⦈_"></a><a id="5986" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">_⊢_⇀⦇_,SUBLEDGERS⦈_</a> <a id="6006" class="Symbol">:</a> <a id="6008" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="6021" class="Symbol">→</a> <a id="6023" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="6030" class="Symbol">→</a> <a id="6032" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6037" href="Ledger.Dijkstra.Specification.Transaction.html#5294" class="Function">SubLevelTx</a> <a id="6048" class="Symbol">→</a> <a id="6050" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="6057" class="Symbol">→</a> <a id="6059" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6064" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">_⊢_⇀⦇_,SUBLEDGERS⦈_</a> <a id="6084" class="Symbol">=</a> <a id="6086" href="Interface.STS.html#2048" class="Function">ReflexiveTransitiveClosure</a> <a id="6113" class="Symbol">{</a><a id="6114" class="Argument">sts</a> <a id="6118" class="Symbol">=</a> <a id="6120" href="Ledger.Dijkstra.Specification.Ledger.html#4693" class="Datatype Operator">_⊢_⇀⦇_,SUBLEDGER⦈_</a><a id="6138" class="Symbol">}</a>


<a id="6142" class="Keyword">private</a> <a id="6150" class="Keyword">variable</a>
  <a id="6161" href="Ledger.Dijkstra.Specification.Ledger.html#6161" class="Generalizable">utxoState&#39;&#39;</a> <a id="6173" class="Symbol">:</a> <a id="6175" href="Ledger.Dijkstra.Specification.Utxo.html#710" class="Record">UTxOState</a>
  <a id="6187" href="Ledger.Dijkstra.Specification.Ledger.html#6187" class="Generalizable">govState&#39;&#39;</a>  <a id="6199" class="Symbol">:</a> <a id="6201" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a>
  <a id="6212" href="Ledger.Dijkstra.Specification.Ledger.html#6212" class="Generalizable">certState&#39;&#39;</a> <a id="6224" class="Symbol">:</a> <a id="6226" href="Ledger.Conway.Specification.Certs.html#4152" class="Record">CertState</a>
  <a id="6238" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a>          <a id="6250" class="Symbol">:</a> <a id="6252" href="Ledger.Dijkstra.Specification.Transaction.html#5244" class="Function">TopLevelTx</a>


<a id="6265" class="Keyword">data</a> <a id="_⊢_⇀⦇_,LEDGER⦈_"></a><a id="6270" href="Ledger.Dijkstra.Specification.Ledger.html#6270" class="Datatype Operator">_⊢_⇀⦇_,LEDGER⦈_</a> <a id="6286" class="Symbol">:</a> <a id="6288" href="Ledger.Dijkstra.Specification.Ledger.html#1047" class="Record">LedgerEnv</a> <a id="6298" class="Symbol">→</a> <a id="6300" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="6307" class="Symbol">→</a> <a id="6309" href="Ledger.Dijkstra.Specification.Transaction.html#5244" class="Function">TopLevelTx</a> <a id="6320" class="Symbol">→</a> <a id="6322" href="Ledger.Dijkstra.Specification.Ledger.html#1611" class="Record">LState</a> <a id="6329" class="Symbol">→</a> <a id="6331" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6336" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-V"></a><a id="6344" href="Ledger.Dijkstra.Specification.Ledger.html#6344" class="InductiveConstructor">LEDGER-V</a> <a id="6353" class="Symbol">:</a>
    <a id="6359" class="Keyword">let</a>  <a id="6364" href="Ledger.Dijkstra.Specification.Ledger.html#6364" class="Bound">txb</a> <a id="6368" class="Symbol">=</a> <a id="6370" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="6373" class="Symbol">.</a><a id="6374" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>

         <a id="6391" href="Ledger.Dijkstra.Specification.Ledger.html#6391" class="Bound">utxo₀</a> <a id="6397" class="Symbol">=</a> <a id="6399" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="6406" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Generalizable">utxoState</a>

         <a id="6426" href="Ledger.Dijkstra.Specification.Ledger.html#6426" class="Bound">globalScripts</a> <a id="6440" class="Symbol">:</a> <a id="6442" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="6444" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
         <a id="6460" href="Ledger.Dijkstra.Specification.Ledger.html#6426" class="Bound">globalScripts</a> <a id="6474" class="Symbol">=</a> <a id="6476" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="6478" class="Comment">-- TODO</a>

         <a id="6496" href="Ledger.Dijkstra.Specification.Ledger.html#6496" class="Bound">globalData</a> <a id="6507" class="Symbol">:</a> <a id="6509" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="6518" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="6520" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
         <a id="6535" href="Ledger.Dijkstra.Specification.Ledger.html#6496" class="Bound">globalData</a> <a id="6546" class="Symbol">=</a> <a id="6548" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="6550" class="Comment">-- TODO</a>


         <a id="6569" class="Keyword">open</a> <a id="6574" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="6581" href="Ledger.Dijkstra.Specification.Ledger.html#6364" class="Bound">txb</a>


    <a id="6591" class="Keyword">in</a>
      <a id="6600" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="6602" href="Ledger.Dijkstra.Specification.Transaction.html#3625" class="Field">isValid</a> <a id="6610" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="6613" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6615" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="6626" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{6630}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{6637}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{6647}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{6652}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{6665}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6391}{\htmlId{6676}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{6684}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6238}{\htmlId{6692}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6426}{\htmlId{6697}{\htmlClass{Bound}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6496}{\htmlId{6713}{\htmlClass{Bound}{\text{globalData}}}}\, \end{pmatrix}$</a> <a id="6726" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{6730}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{6742}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{6753}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="6765" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">⇀⦇</a> <a id="6768" href="Ledger.Dijkstra.Specification.Transaction.html#4583" class="Function">txSubTransactions</a> <a id="6786" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">,SUBLEDGERS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4234}{\htmlId{6801}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{6814}{\htmlClass{Generalizable}{\text{govState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4336}{\htmlId{6826}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \end{pmatrix}$</a>
      <a id="6845" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{6849}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{6856}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{6861}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6391}{\htmlId{6872}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{6880}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6238}{\htmlId{6888}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6426}{\htmlId{6893}{\htmlClass{Bound}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6496}{\htmlId{6909}{\htmlClass{Bound}{\text{globalData}}}}\, \end{pmatrix}$</a>  <a id="6923" href="Ledger.Dijkstra.Specification.Utxow.html#2888" class="Datatype Operator">⊢</a> <a id="6925" href="Ledger.Dijkstra.Specification.Ledger.html#4234" class="Generalizable">utxoState&#39;</a> <a id="6936" href="Ledger.Dijkstra.Specification.Utxow.html#2888" class="Datatype Operator">⇀⦇</a> <a id="6939" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="6942" href="Ledger.Dijkstra.Specification.Utxow.html#2888" class="Datatype Operator">,UTXOW⦈</a> <a id="6950" href="Ledger.Dijkstra.Specification.Ledger.html#6161" class="Generalizable">utxoState&#39;&#39;</a>
      <a id="6968" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{6972}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{6978}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{6985}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4288}{\htmlId{6990}{\htmlClass{Function}{\text{txGovVotes}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4105}{\htmlId{7003}{\htmlClass{Function}{\text{txWithdrawals}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#3966}{\htmlId{7019}{\htmlClass{Function}{\text{allColdCreds}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{7032}{\htmlClass{Generalizable}{\text{govState}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{7041}{\htmlClass{Generalizable}{\text{enactState}}}}\, \end{pmatrix}$</a> <a id="7054" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⊢</a> <a id="7056" href="Ledger.Dijkstra.Specification.Ledger.html#4336" class="Generalizable">certState&#39;</a> <a id="7067" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⇀⦇</a> <a id="7070" href="Ledger.Dijkstra.Specification.Transaction.html#4008" class="Function">txCerts</a> <a id="7078" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">,CERTS⦈</a> <a id="7086" href="Ledger.Dijkstra.Specification.Ledger.html#6212" class="Generalizable">certState&#39;&#39;</a>
      <a id="7104" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#3972}{\htmlId{7108}{\htmlClass{Function}{\text{txId}}}}\, \\ \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{7115}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{7121}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{7128}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{7133}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{7143}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4336}{\htmlId{7156}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \\ \,\href{Class.IsSet.html#916}{\htmlId{7169}{\htmlClass{Function}{\text{dom}}}}\, \,\htmlId{7173}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Certs.html#1733}{\htmlId{7174}{\htmlClass{Field}{\text{RewardsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{7184}{\htmlClass{Generalizable}{\text{certState}}}}\,\,\htmlId{7193}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}$</a> <a id="7197" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⊢</a> <a id="7199" class="Comment">{- rmOrphanDRepVotes certState&#39; -}</a> <a id="7234" href="Ledger.Dijkstra.Specification.Ledger.html#4291" class="Generalizable">govState</a> <a id="7243" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⇀⦇</a> <a id="7246" href="Ledger.Dijkstra.Specification.Ledger.html#3450" class="Function">txgov</a> <a id="7252" href="Ledger.Dijkstra.Specification.Ledger.html#6364" class="Bound">txb</a> <a id="7256" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">,GOVS⦈</a> <a id="7263" href="Ledger.Dijkstra.Specification.Ledger.html#4300" class="Generalizable">govState&#39;</a>
      <a id="7279" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{7320}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{7327}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{7337}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{7342}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{7355}{\htmlClass{Generalizable}{\text{treasury}}}}\, \end{pmatrix}$</a> <a id="7366" href="Ledger.Dijkstra.Specification.Ledger.html#6270" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{7370}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{7382}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{7393}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="7405" href="Ledger.Dijkstra.Specification.Ledger.html#6270" class="Datatype Operator">⇀⦇</a> <a id="7408" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="7411" href="Ledger.Dijkstra.Specification.Ledger.html#6270" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#6161}{\htmlId{7422}{\htmlClass{Generalizable}{\text{utxoState&#39;&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6187}{\htmlId{7436}{\htmlClass{Generalizable}{\text{govState&#39;&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6212}{\htmlId{7449}{\htmlClass{Generalizable}{\text{certState&#39;&#39;}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-I"></a><a id="7466" href="Ledger.Dijkstra.Specification.Ledger.html#7466" class="InductiveConstructor">LEDGER-I</a> <a id="7475" class="Symbol">:</a>
    <a id="7481" class="Keyword">let</a>  <a id="7486" href="Ledger.Dijkstra.Specification.Ledger.html#7486" class="Bound">txb</a> <a id="7490" class="Symbol">=</a> <a id="7492" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="7495" class="Symbol">.</a><a id="7496" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>

         <a id="7513" href="Ledger.Dijkstra.Specification.Ledger.html#7513" class="Bound">utxo₀</a> <a id="7519" class="Symbol">=</a> <a id="7521" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="7528" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Generalizable">utxoState</a>

         <a id="7548" href="Ledger.Dijkstra.Specification.Ledger.html#7548" class="Bound">globalScripts</a> <a id="7562" class="Symbol">:</a> <a id="7564" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="7566" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
         <a id="7582" href="Ledger.Dijkstra.Specification.Ledger.html#7548" class="Bound">globalScripts</a> <a id="7596" class="Symbol">=</a> <a id="7598" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="7600" class="Comment">-- TODO</a>

         <a id="7618" href="Ledger.Dijkstra.Specification.Ledger.html#7618" class="Bound">globalData</a> <a id="7629" class="Symbol">:</a> <a id="7631" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="7640" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="7642" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
         <a id="7657" href="Ledger.Dijkstra.Specification.Ledger.html#7618" class="Bound">globalData</a> <a id="7668" class="Symbol">=</a> <a id="7670" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="7672" class="Comment">-- TODO</a>


         <a id="7691" class="Keyword">open</a> <a id="7696" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="7703" href="Ledger.Dijkstra.Specification.Ledger.html#7486" class="Bound">txb</a>


    <a id="7713" class="Keyword">in</a>
      <a id="7722" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="7724" href="Ledger.Dijkstra.Specification.Transaction.html#3625" class="Field">isValid</a> <a id="7732" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="7735" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7737" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="7749" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{7753}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{7760}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{7770}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{7775}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{7788}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7513}{\htmlId{7799}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{7807}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6238}{\htmlId{7815}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7548}{\htmlId{7820}{\htmlClass{Bound}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7618}{\htmlId{7836}{\htmlClass{Bound}{\text{globalData}}}}\, \end{pmatrix}$</a> <a id="7849" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{7853}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{7865}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{7876}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="7888" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">⇀⦇</a> <a id="7891" href="Ledger.Dijkstra.Specification.Transaction.html#4583" class="Function">txSubTransactions</a>  <a id="7910" href="Ledger.Dijkstra.Specification.Ledger.html#5986" class="Function Operator">,SUBLEDGERS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{7925}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{7937}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{7948}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>
      <a id="7966" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{7970}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{7977}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{7982}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7513}{\htmlId{7993}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{8001}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6238}{\htmlId{8009}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7548}{\htmlId{8014}{\htmlClass{Bound}{\text{globalScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7618}{\htmlId{8030}{\htmlClass{Bound}{\text{globalData}}}}\, \end{pmatrix}$</a> <a id="8043" href="Ledger.Dijkstra.Specification.Utxow.html#2888" class="Datatype Operator">⊢</a> <a id="8045" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Generalizable">utxoState</a> <a id="8055" href="Ledger.Dijkstra.Specification.Utxow.html#2888" class="Datatype Operator">⇀⦇</a> <a id="8058" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="8061" href="Ledger.Dijkstra.Specification.Utxow.html#2888" class="Datatype Operator">,UTXOW⦈</a> <a id="8069" href="Ledger.Dijkstra.Specification.Ledger.html#4234" class="Generalizable">utxoState&#39;</a>
      <a id="8086" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4399}{\htmlId{8127}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4430}{\htmlId{8134}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4473}{\htmlId{8144}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4507}{\htmlId{8149}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4544}{\htmlId{8162}{\htmlClass{Generalizable}{\text{treasury}}}}\, \end{pmatrix}$</a> <a id="8173" href="Ledger.Dijkstra.Specification.Ledger.html#6270" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4224}{\htmlId{8177}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{8189}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{8200}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="8212" href="Ledger.Dijkstra.Specification.Ledger.html#6270" class="Datatype Operator">⇀⦇</a> <a id="8215" href="Ledger.Dijkstra.Specification.Ledger.html#6238" class="Generalizable">tx</a> <a id="8218" href="Ledger.Dijkstra.Specification.Ledger.html#6270" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4234}{\htmlId{8229}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4291}{\htmlId{8242}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4326}{\htmlId{8253}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>

</pre></body></html>