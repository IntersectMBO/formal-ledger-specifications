<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Ledger</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">import</a> <a id="33" href="Data.List.html" class="Module">Data.List</a> <a id="43" class="Symbol">as</a> <a id="46" class="Module">L</a>

<a id="49" class="Keyword">open</a> <a id="54" class="Keyword">import</a> <a id="61" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="76" class="Keyword">open</a> <a id="81" class="Keyword">import</a> <a id="88" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a> <a id="181" class="Keyword">using</a> <a id="187" class="Symbol">(</a><a id="188" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Record">TransactionStructure</a><a id="208" class="Symbol">)</a>

<a id="211" class="Keyword">module</a> <a id="218" href="Ledger.Dijkstra.Specification.Ledger.html" class="Module">Ledger.Dijkstra.Specification.Ledger</a>
  <a id="257" class="Symbol">(</a><a id="258" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="262" class="Symbol">:</a> <a id="264" class="Symbol">_)</a> <a id="267" class="Symbol">(</a><a id="268" class="Keyword">open</a> <a id="273" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Module">TransactionStructure</a> <a id="294" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a><a id="297" class="Symbol">)</a>
  <a id="301" class="Symbol">(</a><a id="302" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a> <a id="306" class="Symbol">:</a> <a id="308" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="326" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a><a id="329" class="Symbol">)</a> <a id="331" class="Symbol">(</a><a id="332" class="Keyword">open</a> <a id="337" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="355" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a><a id="358" class="Symbol">)</a>
  <a id="362" class="Keyword">where</a>

<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="415" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>
<a id="428" class="Keyword">open</a> <a id="433" class="Keyword">import</a> <a id="440" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="472" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>
<a id="485" class="Keyword">open</a> <a id="490" class="Keyword">import</a> <a id="497" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a> <a id="532" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="536" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a>
<a id="540" class="Keyword">open</a> <a id="545" class="Keyword">import</a> <a id="552" href="Ledger.Dijkstra.Specification.Utxow.html" class="Module">Ledger.Dijkstra.Specification.Utxow</a> <a id="588" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="592" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a>
<a id="596" class="Keyword">open</a> <a id="601" class="Keyword">import</a> <a id="608" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="644" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>

<a id="658" class="Keyword">open</a> <a id="663" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Module">Tx</a>
<a id="666" class="Keyword">open</a> <a id="671" href="Ledger.Conway.Specification.Certs.html#4021" class="Module">GState</a>
<a id="678" class="Keyword">open</a> <a id="683" href="Ledger.Conway.Specification.Gov.Actions.html#3822" class="Module">GovActionState</a>
<a id="698" class="Keyword">open</a> <a id="703" href="Ledger.Conway.Specification.Enact.html#448" class="Module">EnactState</a> <a id="714" class="Keyword">using</a> <a id="720" class="Symbol">(</a><a id="721" href="Ledger.Conway.Specification.Enact.html#484" class="Field">cc</a><a id="723" class="Symbol">)</a>
<a id="725" class="Comment">--</a>


<a id="730" class="Keyword">record</a> <a id="SubLedgerEnv"></a><a id="737" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="750" class="Symbol">:</a> <a id="752" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="757" class="Keyword">where</a>
  <a id="765" class="Keyword">field</a>
    <a id="SubLedgerEnv.slot"></a><a id="775" href="Ledger.Dijkstra.Specification.Ledger.html#775" class="Field">slot</a>        <a id="787" class="Symbol">:</a> <a id="789" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="SubLedgerEnv.ppolicy"></a><a id="798" href="Ledger.Dijkstra.Specification.Ledger.html#798" class="Field">ppolicy</a>     <a id="810" class="Symbol">:</a> <a id="812" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="818" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="SubLedgerEnv.pparams"></a><a id="833" href="Ledger.Dijkstra.Specification.Ledger.html#833" class="Field">pparams</a>     <a id="845" class="Symbol">:</a> <a id="847" href="Ledger.Conway.Specification.PParams.html#1689" class="Record">PParams</a>
    <a id="SubLedgerEnv.enactState"></a><a id="859" href="Ledger.Dijkstra.Specification.Ledger.html#859" class="Field">enactState</a>  <a id="871" class="Symbol">:</a> <a id="873" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
    <a id="SubLedgerEnv.treasury"></a><a id="888" href="Ledger.Dijkstra.Specification.Ledger.html#888" class="Field">treasury</a>    <a id="900" class="Symbol">:</a> <a id="902" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
    <a id="SubLedgerEnv.utxo₀"></a><a id="915" href="Ledger.Dijkstra.Specification.Ledger.html#915" class="Field">utxo₀</a>            <a id="932" class="Symbol">:</a> <a id="934" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
    <a id="SubLedgerEnv.isTopLevelValid"></a><a id="943" href="Ledger.Dijkstra.Specification.Ledger.html#943" class="Field">isTopLevelValid</a>  <a id="960" class="Symbol">:</a> <a id="962" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
    <a id="SubLedgerEnv.allScripts"></a><a id="971" href="Ledger.Dijkstra.Specification.Ledger.html#971" class="Field">allScripts</a>    <a id="985" class="Symbol">:</a> <a id="987" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="989" href="Ledger.Conway.Specification.Script.Base.html#642" class="Function">P1Script</a> <a id="998" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1000" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1002" href="Ledger.Conway.Specification.Script.Base.html#2367" class="Function">P2Script</a>
    <a id="SubLedgerEnv.allData"></a><a id="1015" href="Ledger.Dijkstra.Specification.Ledger.html#1015" class="Field">allData</a>       <a id="1029" class="Symbol">:</a> <a id="1031" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="1040" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1042" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>

<a id="1049" class="Keyword">record</a> <a id="LedgerEnv"></a><a id="1056" href="Ledger.Dijkstra.Specification.Ledger.html#1056" class="Record">LedgerEnv</a> <a id="1066" class="Symbol">:</a> <a id="1068" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1073" class="Keyword">where</a>
  <a id="1081" class="Keyword">field</a>
    <a id="LedgerEnv.slot"></a><a id="1091" href="Ledger.Dijkstra.Specification.Ledger.html#1091" class="Field">slot</a>        <a id="1103" class="Symbol">:</a> <a id="1105" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="LedgerEnv.ppolicy"></a><a id="1114" href="Ledger.Dijkstra.Specification.Ledger.html#1114" class="Field">ppolicy</a>     <a id="1126" class="Symbol">:</a> <a id="1128" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1134" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="LedgerEnv.pparams"></a><a id="1149" href="Ledger.Dijkstra.Specification.Ledger.html#1149" class="Field">pparams</a>     <a id="1161" class="Symbol">:</a> <a id="1163" href="Ledger.Conway.Specification.PParams.html#1689" class="Record">PParams</a>
    <a id="LedgerEnv.enactState"></a><a id="1175" href="Ledger.Dijkstra.Specification.Ledger.html#1175" class="Field">enactState</a>  <a id="1187" class="Symbol">:</a> <a id="1189" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
    <a id="LedgerEnv.treasury"></a><a id="1204" href="Ledger.Dijkstra.Specification.Ledger.html#1204" class="Field">treasury</a>    <a id="1216" class="Symbol">:</a> <a id="1218" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>


<a id="1229" class="Keyword">instance</a>
  <a id="1240" class="Keyword">unquoteDecl</a> <a id="HasCast-LedgerEnv"></a><a id="1252" href="Ledger.Dijkstra.Specification.Ledger.html#1252" class="Function">HasCast-LedgerEnv</a> <a id="HasCast-SubLedgerEnv"></a><a id="1270" href="Ledger.Dijkstra.Specification.Ledger.html#1270" class="Function">HasCast-SubLedgerEnv</a> <a id="1291" class="Symbol">=</a> <a id="1293" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1312" class="Symbol">((</a><a id="1314" class="Keyword">quote</a> <a id="1320" href="Ledger.Dijkstra.Specification.Ledger.html#1056" class="Record">LedgerEnv</a> <a id="1330" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1332" href="Ledger.Dijkstra.Specification.Ledger.html#1252" class="Function">HasCast-LedgerEnv</a><a id="1349" class="Symbol">)</a> <a id="1351" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1353" class="Symbol">(</a><a id="1354" class="Keyword">quote</a> <a id="1360" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="1373" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1375" href="Ledger.Dijkstra.Specification.Ledger.html#1270" class="Function">HasCast-SubLedgerEnv</a><a id="1395" class="Symbol">)</a> <a id="1397" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1399" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1401" class="Symbol">)</a>

  <a id="HasPParams-LedgerEnv"></a><a id="1406" href="Ledger.Dijkstra.Specification.Ledger.html#1406" class="Function">HasPParams-LedgerEnv</a> <a id="1427" class="Symbol">:</a> <a id="1429" href="Ledger.Conway.Specification.PParams.html#3493" class="Record">HasPParams</a> <a id="1440" href="Ledger.Dijkstra.Specification.Ledger.html#1056" class="Record">LedgerEnv</a>
  <a id="1452" href="Ledger.Dijkstra.Specification.Ledger.html#1406" class="Function">HasPParams-LedgerEnv</a> <a id="1473" class="Symbol">.</a><a id="1474" href="Ledger.Conway.Specification.PParams.html#3544" class="Field">PParamsOf</a> <a id="1484" class="Symbol">=</a> <a id="1486" href="Ledger.Dijkstra.Specification.Ledger.html#1149" class="Field">LedgerEnv.pparams</a>

  <a id="HasPParams-SubLedgerEnv"></a><a id="1507" href="Ledger.Dijkstra.Specification.Ledger.html#1507" class="Function">HasPParams-SubLedgerEnv</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Ledger.Conway.Specification.PParams.html#3493" class="Record">HasPParams</a> <a id="1544" href="Ledger.Dijkstra.Specification.Ledger.html#1056" class="Record">LedgerEnv</a>
  <a id="1556" href="Ledger.Dijkstra.Specification.Ledger.html#1507" class="Function">HasPParams-SubLedgerEnv</a> <a id="1580" class="Symbol">.</a><a id="1581" href="Ledger.Conway.Specification.PParams.html#3544" class="Field">PParamsOf</a> <a id="1591" class="Symbol">=</a> <a id="1593" href="Ledger.Dijkstra.Specification.Ledger.html#1149" class="Field">LedgerEnv.pparams</a>


<a id="1613" class="Keyword">record</a> <a id="LState"></a><a id="1620" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="1627" class="Symbol">:</a> <a id="1629" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1634" class="Keyword">where</a>


  <a id="1644" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ˡ"></a><a id="1656" href="Ledger.Dijkstra.Specification.Ledger.html#1656" class="InductiveConstructor Operator">⟦_,_,_⟧ˡ</a>


  <a id="1669" class="Keyword">field</a>
    <a id="LState.utxoSt"></a><a id="1679" href="Ledger.Dijkstra.Specification.Ledger.html#1679" class="Field">utxoSt</a>     <a id="1690" class="Symbol">:</a> <a id="1692" href="Ledger.Dijkstra.Specification.Utxo.html#725" class="Record">UTxOState</a>
    <a id="LState.govSt"></a><a id="1706" href="Ledger.Dijkstra.Specification.Ledger.html#1706" class="Field">govSt</a>      <a id="1717" class="Symbol">:</a> <a id="1719" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a>
    <a id="LState.certState"></a><a id="1732" href="Ledger.Dijkstra.Specification.Ledger.html#1732" class="Field">certState</a>  <a id="1743" class="Symbol">:</a> <a id="1745" href="Ledger.Conway.Specification.Certs.html#4152" class="Record">CertState</a>


<a id="1757" class="Keyword">record</a> <a id="HasLState"></a><a id="1764" href="Ledger.Dijkstra.Specification.Ledger.html#1764" class="Record">HasLState</a> <a id="1774" class="Symbol">{</a><a id="1775" href="Ledger.Dijkstra.Specification.Ledger.html#1775" class="Bound">a</a><a id="1776" class="Symbol">}</a> <a id="1778" class="Symbol">(</a><a id="1779" href="Ledger.Dijkstra.Specification.Ledger.html#1779" class="Bound">A</a> <a id="1781" class="Symbol">:</a> <a id="1783" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1788" href="Ledger.Dijkstra.Specification.Ledger.html#1775" class="Bound">a</a><a id="1789" class="Symbol">)</a> <a id="1791" class="Symbol">:</a> <a id="1793" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1798" href="Ledger.Dijkstra.Specification.Ledger.html#1775" class="Bound">a</a> <a id="1800" class="Keyword">where</a>
  <a id="1808" class="Keyword">field</a> <a id="HasLState.LStateOf"></a><a id="1814" href="Ledger.Dijkstra.Specification.Ledger.html#1814" class="Field">LStateOf</a> <a id="1823" class="Symbol">:</a> <a id="1825" href="Ledger.Dijkstra.Specification.Ledger.html#1779" class="Bound">A</a> <a id="1827" class="Symbol">→</a> <a id="1829" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a>
<a id="1836" class="Keyword">open</a> <a id="1841" href="Ledger.Dijkstra.Specification.Ledger.html#1764" class="Module">HasLState</a> <a id="1851" class="Symbol">⦃...⦄</a> <a id="1857" class="Keyword">public</a>

<a id="1865" class="Comment">-- instance</a>
<a id="1877" class="Comment">--   HasUTxOState-LState : HasUTxOState LState</a>
<a id="1924" class="Comment">--   HasUTxOState-LState .UTxOStateOf = LState.utxoSt</a>

<a id="1979" class="Comment">--   HasUTxO-LState : HasUTxO LState</a>
<a id="2016" class="Comment">--   HasUTxO-LState .UTxOOf = UTxOOf ∘ UTxOStateOf</a>

<a id="2068" class="Comment">--   HasGovState-LState : HasGovState LState</a>
<a id="2113" class="Comment">--   HasGovState-LState .GovStateOf = LState.govSt</a>

<a id="2165" class="Comment">--   HasCertState-LState : HasCertState LState</a>
<a id="2212" class="Comment">--   HasCertState-LState .CertStateOf = LState.certState</a>

<a id="2270" class="Comment">--   HasDeposits-LState : HasDeposits LState</a>
<a id="2315" class="Comment">--   HasDeposits-LState .DepositsOf = DepositsOf ∘ UTxOStateOf</a>

<a id="2379" class="Comment">--   HasPools-LState : HasPools LState</a>
<a id="2418" class="Comment">--   HasPools-LState .PoolsOf = PoolsOf ∘ CertStateOf</a>

<a id="2473" class="Comment">--   HasGState-LState : HasGState LState</a>
<a id="2514" class="Comment">--   HasGState-LState .GStateOf = GStateOf ∘ CertStateOf</a>

<a id="2572" class="Comment">--   HasDState-LState : HasDState LState</a>
<a id="2613" class="Comment">--   HasDState-LState .DStateOf = DStateOf ∘ CertStateOf</a>

<a id="2671" class="Comment">--   HasPState-LState : HasPState LState</a>
<a id="2712" class="Comment">--   HasPState-LState .PStateOf = PStateOf ∘ CertStateOf</a>

<a id="2770" class="Comment">--   HasVoteDelegs-LState : HasVoteDelegs LState</a>
<a id="2819" class="Comment">--   HasVoteDelegs-LState .VoteDelegsOf = VoteDelegsOf ∘ DStateOf ∘ CertStateOf</a>

<a id="2900" class="Comment">--   HasDonations-LState : HasDonations LState</a>
<a id="2947" class="Comment">--   HasDonations-LState .DonationsOf = DonationsOf ∘ UTxOStateOf</a>

<a id="3014" class="Comment">--   HasFees-LState : HasFees LState</a>
<a id="3051" class="Comment">--   HasFees-LState .FeesOf = FeesOf ∘ UTxOStateOf</a>

<a id="3103" class="Comment">--   HasCCHotKeys-LState : HasCCHotKeys LState</a>
<a id="3150" class="Comment">--   HasCCHotKeys-LState .CCHotKeysOf = CCHotKeysOf ∘ GStateOf</a>

<a id="3214" class="Comment">--   HasDReps-LState : HasDReps LState</a>
<a id="3253" class="Comment">--   HasDReps-LState .DRepsOf = DRepsOf ∘ CertStateOf</a>

<a id="3308" class="Comment">-- open CertState</a>
<a id="3326" class="Comment">-- open DState</a>
<a id="3341" class="Comment">-- open GovVotes</a>

<a id="3359" class="Keyword">instance</a>
  <a id="3370" class="Keyword">unquoteDecl</a> <a id="HasCast-LState"></a><a id="3382" href="Ledger.Dijkstra.Specification.Ledger.html#3382" class="Function">HasCast-LState</a> <a id="3397" class="Symbol">=</a> <a id="3399" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="3418" class="Symbol">((</a><a id="3420" class="Keyword">quote</a> <a id="3426" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="3433" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3435" href="Ledger.Dijkstra.Specification.Ledger.html#3382" class="Function">HasCast-LState</a><a id="3449" class="Symbol">)</a> <a id="3451" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3453" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="3455" class="Symbol">)</a>


<a id="txgov"></a><a id="3459" href="Ledger.Dijkstra.Specification.Ledger.html#3459" class="Function">txgov</a> <a id="3465" class="Symbol">:</a> <a id="3467" class="Symbol">∀</a> <a id="3469" class="Symbol">{</a><a id="3470" href="Ledger.Dijkstra.Specification.Ledger.html#3470" class="Bound">ℓ</a><a id="3471" class="Symbol">}</a> <a id="3473" class="Symbol">→</a> <a id="3475" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Record">TxBody</a> <a id="3482" href="Ledger.Dijkstra.Specification.Ledger.html#3470" class="Bound">ℓ</a> <a id="3484" class="Symbol">→</a> <a id="3486" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3491" class="Symbol">(</a><a id="3492" href="Ledger.Conway.Specification.Gov.Actions.html#2294" class="Record">GovVote</a> <a id="3500" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3502" href="Ledger.Conway.Specification.Gov.Actions.html#3603" class="Record">GovProposal</a><a id="3513" class="Symbol">)</a>
<a id="3515" href="Ledger.Dijkstra.Specification.Ledger.html#3459" class="Function">txgov</a> <a id="3521" href="Ledger.Dijkstra.Specification.Ledger.html#3521" class="Bound">txb</a> <a id="3525" class="Symbol">=</a> <a id="3527" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3531" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3536" href="Ledger.Dijkstra.Specification.Transaction.html#4332" class="Field">txGovProposals</a> <a id="3551" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="3554" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3558" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3563" href="Ledger.Dijkstra.Specification.Transaction.html#4288" class="Field">txGovVotes</a>
  <a id="3576" class="Keyword">where</a> <a id="3582" class="Keyword">open</a> <a id="3587" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="3594" href="Ledger.Dijkstra.Specification.Ledger.html#3521" class="Bound">txb</a>

<a id="3599" class="Comment">-- rmOrphanDRepVotes : CertState → GovState → GovState</a>
<a id="3654" class="Comment">-- rmOrphanDRepVotes cs govSt = L.map (map₂ go) govSt</a>
<a id="3708" class="Comment">--   where</a>
<a id="3719" class="Comment">--    ifDRepRegistered : Credential → Type</a>
<a id="3762" class="Comment">--    ifDRepRegistered c = c ∈ dom (DRepsOf cs)</a>

<a id="3811" class="Comment">--    go : GovActionState → GovActionState</a>
<a id="3854" class="Comment">--    go gas = record gas { votes = record (gas .votes) { gvDRep = filterKeys ifDRepRegistered (gas .votes .gvDRep) } }</a>

<a id="allColdCreds"></a><a id="3975" href="Ledger.Dijkstra.Specification.Ledger.html#3975" class="Function">allColdCreds</a> <a id="3988" class="Symbol">:</a> <a id="3990" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a> <a id="3999" class="Symbol">→</a> <a id="4001" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a> <a id="4012" class="Symbol">→</a> <a id="4014" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4016" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a>
<a id="4027" href="Ledger.Dijkstra.Specification.Ledger.html#3975" class="Function">allColdCreds</a> <a id="4040" href="Ledger.Dijkstra.Specification.Ledger.html#4040" class="Bound">govSt</a> <a id="4046" href="Ledger.Dijkstra.Specification.Ledger.html#4046" class="Bound">es</a> <a id="4049" class="Symbol">=</a>
  <a id="4053" href="Ledger.Conway.Specification.Enact.html#1366" class="Function">ccCreds</a> <a id="4061" class="Symbol">(</a><a id="4062" href="Ledger.Dijkstra.Specification.Ledger.html#4046" class="Bound">es</a> <a id="4065" class="Symbol">.</a><a id="4066" href="Ledger.Conway.Specification.Enact.html#484" class="Field">cc</a><a id="4068" class="Symbol">)</a> <a id="4070" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4072" href="Axiom.Set.html#7207" class="Function">concatMapˢ</a> <a id="4083" class="Symbol">(λ</a> <a id="4086" class="Symbol">(_</a> <a id="4089" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4091" href="Ledger.Dijkstra.Specification.Ledger.html#4091" class="Bound">st</a><a id="4093" class="Symbol">)</a> <a id="4095" class="Symbol">→</a> <a id="4097" href="Ledger.Conway.Specification.Gov.Actions.html#6886" class="Function">proposedCC</a> <a id="4108" class="Symbol">(</a><a id="4109" href="Ledger.Conway.Specification.Gov.Actions.html#1649" class="Field">GovActionOf</a> <a id="4121" href="Ledger.Dijkstra.Specification.Ledger.html#4091" class="Bound">st</a><a id="4123" class="Symbol">))</a> <a id="4126" class="Symbol">(</a><a id="4127" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="4136" href="Ledger.Dijkstra.Specification.Ledger.html#4040" class="Bound">govSt</a><a id="4141" class="Symbol">)</a>


<a id="4145" class="Keyword">private</a> <a id="4153" class="Keyword">variable</a>
  <a id="4164" href="Ledger.Dijkstra.Specification.Ledger.html#4164" class="Generalizable">Γ</a>                     <a id="4186" class="Symbol">:</a> <a id="4188" href="Ledger.Dijkstra.Specification.Ledger.html#1056" class="Record">LedgerEnv</a>
  <a id="4200" href="Ledger.Dijkstra.Specification.Ledger.html#4200" class="Generalizable">s</a> <a id="4202" href="Ledger.Dijkstra.Specification.Ledger.html#4202" class="Generalizable">s&#39;</a> <a id="4205" href="Ledger.Dijkstra.Specification.Ledger.html#4205" class="Generalizable">s&#39;&#39;</a>              <a id="4222" class="Symbol">:</a> <a id="4224" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a>
  <a id="4233" href="Ledger.Dijkstra.Specification.Ledger.html#4233" class="Generalizable">utxoState</a> <a id="4243" href="Ledger.Dijkstra.Specification.Ledger.html#4243" class="Generalizable">utxoState&#39;</a>  <a id="4255" class="Symbol">:</a> <a id="4257" href="Ledger.Dijkstra.Specification.Utxo.html#725" class="Record">UTxOState</a>
  <a id="4269" href="Ledger.Dijkstra.Specification.Ledger.html#4269" class="Generalizable">utxo₀</a>                 <a id="4291" class="Symbol">:</a> <a id="4293" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
  <a id="4300" href="Ledger.Dijkstra.Specification.Ledger.html#4300" class="Generalizable">govState</a> <a id="4309" href="Ledger.Dijkstra.Specification.Ledger.html#4309" class="Generalizable">govState&#39;</a>    <a id="4322" class="Symbol">:</a> <a id="4324" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a>
  <a id="4335" href="Ledger.Dijkstra.Specification.Ledger.html#4335" class="Generalizable">certState</a> <a id="4345" href="Ledger.Dijkstra.Specification.Ledger.html#4345" class="Generalizable">certState&#39;</a>  <a id="4357" class="Symbol">:</a> <a id="4359" href="Ledger.Conway.Specification.Certs.html#4152" class="Record">CertState</a>
  <a id="4371" href="Ledger.Dijkstra.Specification.Ledger.html#4371" class="Generalizable">stx</a>                   <a id="4393" class="Symbol">:</a> <a id="4395" href="Ledger.Dijkstra.Specification.Transaction.html#5285" class="Function">SubLevelTx</a>
  <a id="4408" href="Ledger.Dijkstra.Specification.Ledger.html#4408" class="Generalizable">slot</a>                  <a id="4430" class="Symbol">:</a> <a id="4432" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
  <a id="4439" href="Ledger.Dijkstra.Specification.Ledger.html#4439" class="Generalizable">ppolicy</a>               <a id="4461" class="Symbol">:</a> <a id="4463" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4469" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
  <a id="4482" href="Ledger.Dijkstra.Specification.Ledger.html#4482" class="Generalizable">pp</a>                    <a id="4504" class="Symbol">:</a> <a id="4506" href="Ledger.Conway.Specification.PParams.html#1689" class="Record">PParams</a>
  <a id="4516" href="Ledger.Dijkstra.Specification.Ledger.html#4516" class="Generalizable">enactState</a>            <a id="4538" class="Symbol">:</a> <a id="4540" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
  <a id="4553" href="Ledger.Dijkstra.Specification.Ledger.html#4553" class="Generalizable">treasury</a>              <a id="4575" class="Symbol">:</a> <a id="4577" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
  <a id="4588" href="Ledger.Dijkstra.Specification.Ledger.html#4588" class="Generalizable">isTopLevelValid</a>       <a id="4610" class="Symbol">:</a> <a id="4612" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="4619" href="Ledger.Dijkstra.Specification.Ledger.html#4619" class="Generalizable">allScripts</a>         <a id="4638" class="Symbol">:</a> <a id="4640" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4642" href="Ledger.Conway.Specification.Script.Base.html#642" class="Function">P1Script</a> <a id="4651" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4653" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4655" href="Ledger.Conway.Specification.Script.Base.html#2367" class="Function">P2Script</a>
  <a id="4666" href="Ledger.Dijkstra.Specification.Ledger.html#4666" class="Generalizable">allData</a>            <a id="4685" class="Symbol">:</a> <a id="4687" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="4696" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4698" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>


<a id="4706" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SUBLEDGER⦈_"></a><a id="4711" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">_⊢_⇀⦇_,SUBLEDGER⦈_</a> <a id="4730" class="Symbol">:</a> <a id="4732" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="4745" class="Symbol">→</a> <a id="4747" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="4754" class="Symbol">→</a> <a id="4756" href="Ledger.Dijkstra.Specification.Transaction.html#5285" class="Function">SubLevelTx</a> <a id="4767" class="Symbol">→</a> <a id="4769" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="4776" class="Symbol">→</a> <a id="4778" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4783" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,SUBLEDGER⦈_.SUBLEDGER-V"></a><a id="4791" href="Ledger.Dijkstra.Specification.Ledger.html#4791" class="InductiveConstructor">SUBLEDGER-V</a> <a id="4803" class="Symbol">:</a>
    <a id="4809" class="Keyword">let</a> <a id="4813" href="Ledger.Dijkstra.Specification.Ledger.html#4813" class="Bound">txb</a> <a id="4817" class="Symbol">=</a> <a id="4819" href="Ledger.Dijkstra.Specification.Ledger.html#4371" class="Generalizable">stx</a> <a id="4823" class="Symbol">.</a><a id="4824" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>



        <a id="4842" class="Keyword">open</a> <a id="4847" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="4854" href="Ledger.Dijkstra.Specification.Ledger.html#4813" class="Bound">txb</a>


    <a id="4864" class="Keyword">in</a>
      <a id="4873" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="4875" href="Ledger.Dijkstra.Specification.Ledger.html#4588" class="Generalizable">isTopLevelValid</a> <a id="4891" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4893" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="4904" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{4908}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{4915}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{4920}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4269}{\htmlId{4931}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4588}{\htmlId{4939}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4619}{\htmlId{4957}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4666}{\htmlId{4970}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a>  <a id="4981" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⊢</a> <a id="4983" href="Ledger.Dijkstra.Specification.Ledger.html#4233" class="Generalizable">utxoState</a> <a id="4993" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⇀⦇</a> <a id="4996" href="Ledger.Dijkstra.Specification.Ledger.html#4371" class="Generalizable">stx</a> <a id="5000" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">,SUBUTXOW⦈</a> <a id="5011" href="Ledger.Dijkstra.Specification.Ledger.html#4243" class="Generalizable">utxoState&#39;</a>
      <a id="5028" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{5032}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{5038}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{5045}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4288}{\htmlId{5050}{\htmlClass{Function}{\text{txGovVotes}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4105}{\htmlId{5063}{\htmlClass{Function}{\text{txWithdrawals}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#3975}{\htmlId{5079}{\htmlClass{Function}{\text{allColdCreds}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{5092}{\htmlClass{Generalizable}{\text{govState}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{5101}{\htmlClass{Generalizable}{\text{enactState}}}}\, \end{pmatrix}$</a> <a id="5114" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⊢</a> <a id="5116" href="Ledger.Dijkstra.Specification.Ledger.html#4335" class="Generalizable">certState</a> <a id="5126" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⇀⦇</a> <a id="5129" href="Ledger.Dijkstra.Specification.Transaction.html#4008" class="Function">txCerts</a> <a id="5137" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">,CERTS⦈</a> <a id="5145" href="Ledger.Dijkstra.Specification.Ledger.html#4345" class="Generalizable">certState&#39;</a>
      <a id="5162" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#3972}{\htmlId{5166}{\htmlClass{Function}{\text{txId}}}}\, \\ \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{5173}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{5179}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{5186}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{5191}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{5201}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4345}{\htmlId{5214}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \\ \,\href{Class.IsSet.html#916}{\htmlId{5227}{\htmlClass{Function}{\text{dom}}}}\, \,\htmlId{5231}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Certs.html#1733}{\htmlId{5232}{\htmlClass{Field}{\text{RewardsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{5242}{\htmlClass{Generalizable}{\text{certState}}}}\,\,\htmlId{5251}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}$</a> <a id="5255" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⊢</a> <a id="5257" class="Comment">{- rmOrphanDRepVotes certState&#39; -}</a> <a id="5292" href="Ledger.Dijkstra.Specification.Ledger.html#4300" class="Generalizable">govState</a> <a id="5301" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⇀⦇</a> <a id="5304" href="Ledger.Dijkstra.Specification.Ledger.html#3459" class="Function">txgov</a> <a id="5310" href="Ledger.Dijkstra.Specification.Ledger.html#4813" class="Bound">txb</a> <a id="5314" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">,GOVS⦈</a> <a id="5321" href="Ledger.Dijkstra.Specification.Ledger.html#4309" class="Generalizable">govState&#39;</a>
      <a id="5337" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{5378}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{5385}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{5395}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{5400}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{5413}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4269}{\htmlId{5424}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4588}{\htmlId{5432}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4619}{\htmlId{5450}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4666}{\htmlId{5463}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="5473" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{5477}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{5489}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{5500}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="5512" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">⇀⦇</a> <a id="5515" href="Ledger.Dijkstra.Specification.Ledger.html#4371" class="Generalizable">stx</a> <a id="5519" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">,SUBLEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4243}{\htmlId{5533}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4309}{\htmlId{5546}{\htmlClass{Generalizable}{\text{govState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4345}{\htmlId{5558}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,SUBLEDGER⦈_.SUBLEDGER-I"></a><a id="5574" href="Ledger.Dijkstra.Specification.Ledger.html#5574" class="InductiveConstructor">SUBLEDGER-I</a> <a id="5586" class="Symbol">:</a>
      <a id="5594" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5596" href="Ledger.Dijkstra.Specification.Ledger.html#4588" class="Generalizable">isTopLevelValid</a> <a id="5612" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5614" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="5626" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{5630}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{5637}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{5642}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4269}{\htmlId{5653}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4588}{\htmlId{5661}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4619}{\htmlId{5679}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4666}{\htmlId{5692}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="5702" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⊢</a> <a id="5704" href="Ledger.Dijkstra.Specification.Ledger.html#4233" class="Generalizable">utxoState</a> <a id="5714" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">⇀⦇</a> <a id="5717" href="Ledger.Dijkstra.Specification.Ledger.html#4371" class="Generalizable">stx</a> <a id="5721" href="Ledger.Dijkstra.Specification.Utxow.html#700" class="Datatype Operator">,SUBUTXOW⦈</a> <a id="5732" href="Ledger.Dijkstra.Specification.Ledger.html#4233" class="Generalizable">utxoState</a>
      <a id="5748" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{5789}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{5796}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{5806}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{5811}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{5824}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4269}{\htmlId{5835}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4588}{\htmlId{5843}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4619}{\htmlId{5861}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4666}{\htmlId{5874}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="5884" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{5888}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{5900}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{5911}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="5923" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">⇀⦇</a> <a id="5926" href="Ledger.Dijkstra.Specification.Ledger.html#4371" class="Generalizable">stx</a> <a id="5930" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">,SUBLEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{5944}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{5956}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{5967}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="_⊢_⇀⦇_,SUBLEDGERS⦈_"></a><a id="5980" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">_⊢_⇀⦇_,SUBLEDGERS⦈_</a> <a id="6000" class="Symbol">:</a> <a id="6002" href="Ledger.Dijkstra.Specification.Ledger.html#737" class="Record">SubLedgerEnv</a> <a id="6015" class="Symbol">→</a> <a id="6017" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="6024" class="Symbol">→</a> <a id="6026" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6031" href="Ledger.Dijkstra.Specification.Transaction.html#5285" class="Function">SubLevelTx</a> <a id="6042" class="Symbol">→</a> <a id="6044" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="6051" class="Symbol">→</a> <a id="6053" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6058" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">_⊢_⇀⦇_,SUBLEDGERS⦈_</a> <a id="6078" class="Symbol">=</a> <a id="6080" href="Interface.STS.html#2048" class="Function">ReflexiveTransitiveClosure</a> <a id="6107" class="Symbol">{</a><a id="6108" class="Argument">sts</a> <a id="6112" class="Symbol">=</a> <a id="6114" href="Ledger.Dijkstra.Specification.Ledger.html#4711" class="Datatype Operator">_⊢_⇀⦇_,SUBLEDGER⦈_</a><a id="6132" class="Symbol">}</a>


<a id="6136" class="Keyword">private</a> <a id="6144" class="Keyword">variable</a>
  <a id="6155" href="Ledger.Dijkstra.Specification.Ledger.html#6155" class="Generalizable">utxoState&#39;&#39;</a> <a id="6167" class="Symbol">:</a> <a id="6169" href="Ledger.Dijkstra.Specification.Utxo.html#725" class="Record">UTxOState</a>
  <a id="6181" href="Ledger.Dijkstra.Specification.Ledger.html#6181" class="Generalizable">govState&#39;&#39;</a>  <a id="6193" class="Symbol">:</a> <a id="6195" href="Ledger.Conway.Specification.Gov.html#1401" class="Function">GovState</a>
  <a id="6206" href="Ledger.Dijkstra.Specification.Ledger.html#6206" class="Generalizable">certState&#39;&#39;</a> <a id="6218" class="Symbol">:</a> <a id="6220" href="Ledger.Conway.Specification.Certs.html#4152" class="Record">CertState</a>
  <a id="6232" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a>          <a id="6244" class="Symbol">:</a> <a id="6246" href="Ledger.Dijkstra.Specification.Transaction.html#5235" class="Function">TopLevelTx</a>


<a id="6259" class="Keyword">data</a> <a id="_⊢_⇀⦇_,LEDGER⦈_"></a><a id="6264" href="Ledger.Dijkstra.Specification.Ledger.html#6264" class="Datatype Operator">_⊢_⇀⦇_,LEDGER⦈_</a> <a id="6280" class="Symbol">:</a> <a id="6282" href="Ledger.Dijkstra.Specification.Ledger.html#1056" class="Record">LedgerEnv</a> <a id="6292" class="Symbol">→</a> <a id="6294" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="6301" class="Symbol">→</a> <a id="6303" href="Ledger.Dijkstra.Specification.Transaction.html#5235" class="Function">TopLevelTx</a> <a id="6314" class="Symbol">→</a> <a id="6316" href="Ledger.Dijkstra.Specification.Ledger.html#1620" class="Record">LState</a> <a id="6323" class="Symbol">→</a> <a id="6325" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6330" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-V"></a><a id="6338" href="Ledger.Dijkstra.Specification.Ledger.html#6338" class="InductiveConstructor">LEDGER-V</a> <a id="6347" class="Symbol">:</a>
    <a id="6353" class="Keyword">let</a>  <a id="6358" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Bound">txb</a> <a id="6362" class="Symbol">=</a> <a id="6364" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="6367" class="Symbol">.</a><a id="6368" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>


         <a id="6386" class="Keyword">open</a> <a id="6391" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="6398" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Bound">txb</a>


         <a id="6413" href="Ledger.Dijkstra.Specification.Ledger.html#6413" class="Bound">utxo₀</a> <a id="6419" class="Symbol">=</a> <a id="6421" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="6428" href="Ledger.Dijkstra.Specification.Ledger.html#4233" class="Generalizable">utxoState</a>

         <a id="6448" href="Ledger.Dijkstra.Specification.Ledger.html#6448" class="Bound">allScripts</a> <a id="6459" class="Symbol">:</a> <a id="6461" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="6463" href="Ledger.Conway.Specification.Script.Base.html#642" class="Function">P1Script</a> <a id="6472" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6474" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="6476" href="Ledger.Conway.Specification.Script.Base.html#2367" class="Function">P2Script</a>
         <a id="6494" href="Ledger.Dijkstra.Specification.Ledger.html#6448" class="Bound">allScripts</a> <a id="6505" class="Symbol">=</a> <a id="6507" href="Ledger.Dijkstra.Specification.Transaction.html#13991" class="Function">getAllScripts</a> <a id="6521" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="6524" href="Ledger.Dijkstra.Specification.Ledger.html#6413" class="Bound">utxo₀</a>

         <a id="6540" href="Ledger.Dijkstra.Specification.Ledger.html#6540" class="Bound">allData</a> <a id="6548" class="Symbol">:</a> <a id="6550" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="6559" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="6561" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
         <a id="6576" href="Ledger.Dijkstra.Specification.Ledger.html#6540" class="Bound">allData</a> <a id="6584" class="Symbol">=</a> <a id="6586" href="Ledger.Prelude.html#1789" class="Function">setToMap</a> <a id="6595" class="Symbol">(</a><a id="6596" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="6601" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="6603" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="6608" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="6610" href="Function.Base.html#704" class="Function">id</a> <a id="6613" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="6615" class="Symbol">(</a><a id="6616" href="Ledger.Dijkstra.Specification.Transaction.html#15101" class="Function">getAllData</a> <a id="6627" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="6630" href="Ledger.Dijkstra.Specification.Ledger.html#6413" class="Bound">utxo₀</a><a id="6635" class="Symbol">))</a>
    <a id="6642" class="Keyword">in</a>
      <a id="6651" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="6653" href="Ledger.Dijkstra.Specification.Transaction.html#3625" class="Field">isValid</a> <a id="6661" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="6664" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6666" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="6677" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{6681}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{6688}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{6698}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{6703}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{6716}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6413}{\htmlId{6727}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{6735}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6232}{\htmlId{6743}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6448}{\htmlId{6748}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6540}{\htmlId{6761}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="6771" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{6775}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{6787}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{6798}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="6810" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">⇀⦇</a> <a id="6813" href="Ledger.Dijkstra.Specification.Transaction.html#4583" class="Function">txSubTransactions</a> <a id="6831" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">,SUBLEDGERS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4243}{\htmlId{6846}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4309}{\htmlId{6859}{\htmlClass{Generalizable}{\text{govState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4345}{\htmlId{6871}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \end{pmatrix}$</a>
      <a id="6890" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{6894}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{6901}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{6906}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6413}{\htmlId{6917}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{6925}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6232}{\htmlId{6933}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6448}{\htmlId{6938}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6540}{\htmlId{6951}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a>  <a id="6962" href="Ledger.Dijkstra.Specification.Utxow.html#2422" class="Datatype Operator">⊢</a> <a id="6964" href="Ledger.Dijkstra.Specification.Ledger.html#4243" class="Generalizable">utxoState&#39;</a> <a id="6975" href="Ledger.Dijkstra.Specification.Utxow.html#2422" class="Datatype Operator">⇀⦇</a> <a id="6978" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="6981" href="Ledger.Dijkstra.Specification.Utxow.html#2422" class="Datatype Operator">,UTXOW⦈</a> <a id="6989" href="Ledger.Dijkstra.Specification.Ledger.html#6155" class="Generalizable">utxoState&#39;&#39;</a>
      <a id="7007" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{7011}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{7017}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{7024}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4288}{\htmlId{7029}{\htmlClass{Function}{\text{txGovVotes}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#4105}{\htmlId{7042}{\htmlClass{Function}{\text{txWithdrawals}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#3975}{\htmlId{7058}{\htmlClass{Function}{\text{allColdCreds}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{7071}{\htmlClass{Generalizable}{\text{govState}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{7080}{\htmlClass{Generalizable}{\text{enactState}}}}\, \end{pmatrix}$</a> <a id="7093" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⊢</a> <a id="7095" href="Ledger.Dijkstra.Specification.Ledger.html#4345" class="Generalizable">certState&#39;</a> <a id="7106" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">⇀⦇</a> <a id="7109" href="Ledger.Dijkstra.Specification.Transaction.html#4008" class="Function">txCerts</a> <a id="7117" href="Ledger.Conway.Specification.Certs.html#12345" class="Function Operator">,CERTS⦈</a> <a id="7125" href="Ledger.Dijkstra.Specification.Ledger.html#6206" class="Generalizable">certState&#39;&#39;</a>
      <a id="7143" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#3972}{\htmlId{7147}{\htmlClass{Function}{\text{txId}}}}\, \\ \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{7154}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{7160}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{7167}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{7172}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{7182}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4345}{\htmlId{7195}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \\ \,\href{Class.IsSet.html#916}{\htmlId{7208}{\htmlClass{Function}{\text{dom}}}}\, \,\htmlId{7212}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Certs.html#1733}{\htmlId{7213}{\htmlClass{Field}{\text{RewardsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{7223}{\htmlClass{Generalizable}{\text{certState}}}}\,\,\htmlId{7232}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}$</a> <a id="7236" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⊢</a> <a id="7238" class="Comment">{- rmOrphanDRepVotes certState&#39; -}</a> <a id="7273" href="Ledger.Dijkstra.Specification.Ledger.html#4300" class="Generalizable">govState</a> <a id="7282" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">⇀⦇</a> <a id="7285" href="Ledger.Dijkstra.Specification.Ledger.html#3459" class="Function">txgov</a> <a id="7291" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Bound">txb</a> <a id="7295" href="Ledger.Conway.Specification.Gov.html#16465" class="Function Operator">,GOVS⦈</a> <a id="7302" href="Ledger.Dijkstra.Specification.Ledger.html#4309" class="Generalizable">govState&#39;</a>
      <a id="7318" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{7359}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{7366}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{7376}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{7381}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{7394}{\htmlClass{Generalizable}{\text{treasury}}}}\, \end{pmatrix}$</a> <a id="7405" href="Ledger.Dijkstra.Specification.Ledger.html#6264" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{7409}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{7421}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{7432}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="7444" href="Ledger.Dijkstra.Specification.Ledger.html#6264" class="Datatype Operator">⇀⦇</a> <a id="7447" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="7450" href="Ledger.Dijkstra.Specification.Ledger.html#6264" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#6155}{\htmlId{7461}{\htmlClass{Generalizable}{\text{utxoState&#39;&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6181}{\htmlId{7475}{\htmlClass{Generalizable}{\text{govState&#39;&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6206}{\htmlId{7488}{\htmlClass{Generalizable}{\text{certState&#39;&#39;}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-I"></a><a id="7505" href="Ledger.Dijkstra.Specification.Ledger.html#7505" class="InductiveConstructor">LEDGER-I</a> <a id="7514" class="Symbol">:</a>
    <a id="7520" class="Keyword">let</a>  <a id="7525" href="Ledger.Dijkstra.Specification.Ledger.html#7525" class="Bound">txb</a> <a id="7529" class="Symbol">=</a> <a id="7531" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="7534" class="Symbol">.</a><a id="7535" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>


         <a id="7553" class="Keyword">open</a> <a id="7558" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="7565" href="Ledger.Dijkstra.Specification.Ledger.html#7525" class="Bound">txb</a>


         <a id="7580" href="Ledger.Dijkstra.Specification.Ledger.html#7580" class="Bound">utxo₀</a> <a id="7586" class="Symbol">=</a> <a id="7588" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="7595" href="Ledger.Dijkstra.Specification.Ledger.html#4233" class="Generalizable">utxoState</a>

         <a id="7615" href="Ledger.Dijkstra.Specification.Ledger.html#7615" class="Bound">allScripts</a> <a id="7626" class="Symbol">:</a> <a id="7628" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="7630" href="Ledger.Conway.Specification.Script.Base.html#642" class="Function">P1Script</a> <a id="7639" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="7641" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="7643" href="Ledger.Conway.Specification.Script.Base.html#2367" class="Function">P2Script</a>
         <a id="7661" href="Ledger.Dijkstra.Specification.Ledger.html#7615" class="Bound">allScripts</a> <a id="7672" class="Symbol">=</a> <a id="7674" href="Ledger.Dijkstra.Specification.Transaction.html#13991" class="Function">getAllScripts</a> <a id="7688" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="7691" href="Ledger.Dijkstra.Specification.Ledger.html#7580" class="Bound">utxo₀</a>

         <a id="7707" href="Ledger.Dijkstra.Specification.Ledger.html#7707" class="Bound">allData</a> <a id="7715" class="Symbol">:</a> <a id="7717" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="7726" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="7728" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
         <a id="7743" href="Ledger.Dijkstra.Specification.Ledger.html#7707" class="Bound">allData</a> <a id="7751" class="Symbol">=</a> <a id="7753" href="Ledger.Prelude.html#1789" class="Function">setToMap</a> <a id="7762" class="Symbol">(</a><a id="7763" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="7768" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="7770" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="7775" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="7777" href="Function.Base.html#704" class="Function">id</a> <a id="7780" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="7782" class="Symbol">(</a><a id="7783" href="Ledger.Dijkstra.Specification.Transaction.html#15101" class="Function">getAllData</a> <a id="7794" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="7797" href="Ledger.Dijkstra.Specification.Ledger.html#7580" class="Bound">utxo₀</a><a id="7802" class="Symbol">))</a>
    <a id="7809" class="Keyword">in</a>
      <a id="7818" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="7820" href="Ledger.Dijkstra.Specification.Transaction.html#3625" class="Field">isValid</a> <a id="7828" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="7831" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7833" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="7845" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{7849}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{7856}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{7866}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{7871}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{7884}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7580}{\htmlId{7895}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{7903}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6232}{\htmlId{7911}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7615}{\htmlId{7916}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7707}{\htmlId{7929}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="7939" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{7943}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{7955}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{7966}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="7978" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">⇀⦇</a> <a id="7981" href="Ledger.Dijkstra.Specification.Transaction.html#4583" class="Function">txSubTransactions</a>  <a id="8000" href="Ledger.Dijkstra.Specification.Ledger.html#5980" class="Function Operator">,SUBLEDGERS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{8015}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{8027}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{8038}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>
      <a id="8056" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{8060}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{8067}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{8072}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7580}{\htmlId{8083}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#3625}{\htmlId{8091}{\htmlClass{Field}{\text{isValid}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6232}{\htmlId{8099}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7615}{\htmlId{8104}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7707}{\htmlId{8117}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="8127" href="Ledger.Dijkstra.Specification.Utxow.html#2422" class="Datatype Operator">⊢</a> <a id="8129" href="Ledger.Dijkstra.Specification.Ledger.html#4233" class="Generalizable">utxoState</a> <a id="8139" href="Ledger.Dijkstra.Specification.Utxow.html#2422" class="Datatype Operator">⇀⦇</a> <a id="8142" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="8145" href="Ledger.Dijkstra.Specification.Utxow.html#2422" class="Datatype Operator">,UTXOW⦈</a> <a id="8153" href="Ledger.Dijkstra.Specification.Ledger.html#4243" class="Generalizable">utxoState&#39;</a>
      <a id="8170" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4408}{\htmlId{8211}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4439}{\htmlId{8218}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4482}{\htmlId{8228}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4516}{\htmlId{8233}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4553}{\htmlId{8246}{\htmlClass{Generalizable}{\text{treasury}}}}\, \end{pmatrix}$</a> <a id="8257" href="Ledger.Dijkstra.Specification.Ledger.html#6264" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4233}{\htmlId{8261}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{8273}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{8284}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="8296" href="Ledger.Dijkstra.Specification.Ledger.html#6264" class="Datatype Operator">⇀⦇</a> <a id="8299" href="Ledger.Dijkstra.Specification.Ledger.html#6232" class="Generalizable">tx</a> <a id="8302" href="Ledger.Dijkstra.Specification.Ledger.html#6264" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4243}{\htmlId{8313}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4300}{\htmlId{8326}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4335}{\htmlId{8337}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>

</pre></body></html>