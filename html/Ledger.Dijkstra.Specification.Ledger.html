<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Ledger</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">import</a> <a id="33" href="Data.List.html" class="Module">Data.List</a> <a id="43" class="Symbol">as</a> <a id="46" class="Module">L</a>

<a id="49" class="Keyword">open</a> <a id="54" class="Keyword">import</a> <a id="61" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="76" class="Keyword">open</a> <a id="81" class="Keyword">import</a> <a id="88" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a> <a id="181" class="Keyword">using</a> <a id="187" class="Symbol">(</a><a id="188" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Record">TransactionStructure</a><a id="208" class="Symbol">)</a>

<a id="211" class="Keyword">module</a> <a id="218" href="Ledger.Dijkstra.Specification.Ledger.html" class="Module">Ledger.Dijkstra.Specification.Ledger</a>
  <a id="257" class="Symbol">(</a><a id="258" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="262" class="Symbol">:</a> <a id="264" class="Symbol">_)</a> <a id="267" class="Symbol">(</a><a id="268" class="Keyword">open</a> <a id="273" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Module">TransactionStructure</a> <a id="294" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a><a id="297" class="Symbol">)</a>
  <a id="301" class="Symbol">(</a><a id="302" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a> <a id="306" class="Symbol">:</a> <a id="308" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="326" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a><a id="329" class="Symbol">)</a> <a id="331" class="Symbol">(</a><a id="332" class="Keyword">open</a> <a id="337" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="355" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a><a id="358" class="Symbol">)</a>
  <a id="362" class="Keyword">where</a>

<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Ledger.Dijkstra.Specification.Enact.html" class="Module">Ledger.Dijkstra.Specification.Enact</a> <a id="417" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Ledger.Dijkstra.Specification.Gov.html" class="Module">Ledger.Dijkstra.Specification.Gov</a> <a id="476" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>
<a id="489" class="Keyword">open</a> <a id="494" class="Keyword">import</a> <a id="501" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a> <a id="536" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="540" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a>
<a id="544" class="Keyword">open</a> <a id="549" class="Keyword">import</a> <a id="556" href="Ledger.Dijkstra.Specification.Utxow.html" class="Module">Ledger.Dijkstra.Specification.Utxow</a> <a id="592" href="Ledger.Dijkstra.Specification.Ledger.html#258" class="Bound">txs</a> <a id="596" href="Ledger.Dijkstra.Specification.Ledger.html#302" class="Bound">abs</a>
<a id="600" class="Keyword">open</a> <a id="605" class="Keyword">import</a> <a id="612" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="648" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>

<a id="662" class="Keyword">open</a> <a id="667" href="Ledger.Dijkstra.Specification.Enact.html#582" class="Module">EnactState</a> <a id="678" class="Keyword">using</a> <a id="684" class="Symbol">(</a><a id="685" href="Ledger.Dijkstra.Specification.Enact.html#618" class="Field">cc</a><a id="687" class="Symbol">)</a>


<a id="691" class="Keyword">record</a> <a id="SubLedgerEnv"></a><a id="698" href="Ledger.Dijkstra.Specification.Ledger.html#698" class="Record">SubLedgerEnv</a> <a id="711" class="Symbol">:</a> <a id="713" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="718" class="Keyword">where</a>
  <a id="726" class="Keyword">field</a>
    <a id="SubLedgerEnv.slot"></a><a id="736" href="Ledger.Dijkstra.Specification.Ledger.html#736" class="Field">slot</a>             <a id="753" class="Symbol">:</a> <a id="755" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="SubLedgerEnv.ppolicy"></a><a id="764" href="Ledger.Dijkstra.Specification.Ledger.html#764" class="Field">ppolicy</a>          <a id="781" class="Symbol">:</a> <a id="783" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="789" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="SubLedgerEnv.pparams"></a><a id="804" href="Ledger.Dijkstra.Specification.Ledger.html#804" class="Field">pparams</a>          <a id="821" class="Symbol">:</a> <a id="823" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a>
    <a id="SubLedgerEnv.enactState"></a><a id="835" href="Ledger.Dijkstra.Specification.Ledger.html#835" class="Field">enactState</a>       <a id="852" class="Symbol">:</a> <a id="854" href="Ledger.Dijkstra.Specification.Enact.html#582" class="Record">EnactState</a>
    <a id="SubLedgerEnv.treasury"></a><a id="869" href="Ledger.Dijkstra.Specification.Ledger.html#869" class="Field">treasury</a>         <a id="886" class="Symbol">:</a> <a id="888" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
    <a id="SubLedgerEnv.utxo₀"></a><a id="901" href="Ledger.Dijkstra.Specification.Ledger.html#901" class="Field">utxo₀</a>            <a id="918" class="Symbol">:</a> <a id="920" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
    <a id="SubLedgerEnv.isTopLevelValid"></a><a id="929" href="Ledger.Dijkstra.Specification.Ledger.html#929" class="Field">isTopLevelValid</a>  <a id="946" class="Symbol">:</a> <a id="948" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
    <a id="SubLedgerEnv.allScripts"></a><a id="957" href="Ledger.Dijkstra.Specification.Ledger.html#957" class="Field">allScripts</a>       <a id="974" class="Symbol">:</a> <a id="976" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="978" href="Ledger.Dijkstra.Specification.Script.Base.html#2457" class="Function">Script</a>
    <a id="SubLedgerEnv.allData"></a><a id="989" href="Ledger.Dijkstra.Specification.Ledger.html#989" class="Field">allData</a>          <a id="1006" class="Symbol">:</a> <a id="1008" href="Ledger.Dijkstra.Specification.Script.Base.html#1735" class="Function">DataHash</a> <a id="1017" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1019" href="Ledger.Dijkstra.Specification.Script.Base.html#1782" class="Function">Datum</a>

<a id="1026" class="Keyword">record</a> <a id="LedgerEnv"></a><a id="1033" href="Ledger.Dijkstra.Specification.Ledger.html#1033" class="Record">LedgerEnv</a> <a id="1043" class="Symbol">:</a> <a id="1045" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1050" class="Keyword">where</a>
  <a id="1058" class="Keyword">field</a>
    <a id="LedgerEnv.slot"></a><a id="1068" href="Ledger.Dijkstra.Specification.Ledger.html#1068" class="Field">slot</a>        <a id="1080" class="Symbol">:</a> <a id="1082" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="LedgerEnv.ppolicy"></a><a id="1091" href="Ledger.Dijkstra.Specification.Ledger.html#1091" class="Field">ppolicy</a>     <a id="1103" class="Symbol">:</a> <a id="1105" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1111" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="LedgerEnv.pparams"></a><a id="1126" href="Ledger.Dijkstra.Specification.Ledger.html#1126" class="Field">pparams</a>     <a id="1138" class="Symbol">:</a> <a id="1140" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a>
    <a id="LedgerEnv.enactState"></a><a id="1152" href="Ledger.Dijkstra.Specification.Ledger.html#1152" class="Field">enactState</a>  <a id="1164" class="Symbol">:</a> <a id="1166" href="Ledger.Dijkstra.Specification.Enact.html#582" class="Record">EnactState</a>
    <a id="LedgerEnv.treasury"></a><a id="1181" href="Ledger.Dijkstra.Specification.Ledger.html#1181" class="Field">treasury</a>    <a id="1193" class="Symbol">:</a> <a id="1195" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>


<a id="1206" class="Keyword">instance</a>
  <a id="1217" class="Keyword">unquoteDecl</a> <a id="HasCast-LedgerEnv"></a><a id="1229" href="Ledger.Dijkstra.Specification.Ledger.html#1229" class="Function">HasCast-LedgerEnv</a> <a id="HasCast-SubLedgerEnv"></a><a id="1247" href="Ledger.Dijkstra.Specification.Ledger.html#1247" class="Function">HasCast-SubLedgerEnv</a> <a id="1268" class="Symbol">=</a> <a id="1270" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1289" class="Symbol">((</a><a id="1291" class="Keyword">quote</a> <a id="1297" href="Ledger.Dijkstra.Specification.Ledger.html#1033" class="Record">LedgerEnv</a> <a id="1307" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1309" href="Ledger.Dijkstra.Specification.Ledger.html#1229" class="Function">HasCast-LedgerEnv</a><a id="1326" class="Symbol">)</a> <a id="1328" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1330" class="Symbol">(</a><a id="1331" class="Keyword">quote</a> <a id="1337" href="Ledger.Dijkstra.Specification.Ledger.html#698" class="Record">SubLedgerEnv</a> <a id="1350" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1352" href="Ledger.Dijkstra.Specification.Ledger.html#1247" class="Function">HasCast-SubLedgerEnv</a><a id="1372" class="Symbol">)</a> <a id="1374" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1376" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1378" class="Symbol">)</a>

  <a id="HasPParams-LedgerEnv"></a><a id="1383" href="Ledger.Dijkstra.Specification.Ledger.html#1383" class="Function">HasPParams-LedgerEnv</a> <a id="1404" class="Symbol">:</a> <a id="1406" href="Ledger.Dijkstra.Specification.PParams.html#4274" class="Record">HasPParams</a> <a id="1417" href="Ledger.Dijkstra.Specification.Ledger.html#1033" class="Record">LedgerEnv</a>
  <a id="1429" href="Ledger.Dijkstra.Specification.Ledger.html#1383" class="Function">HasPParams-LedgerEnv</a> <a id="1450" class="Symbol">.</a><a id="1451" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="1461" class="Symbol">=</a> <a id="1463" href="Ledger.Dijkstra.Specification.Ledger.html#1126" class="Field">LedgerEnv.pparams</a>

  <a id="HasPParams-SubLedgerEnv"></a><a id="1484" href="Ledger.Dijkstra.Specification.Ledger.html#1484" class="Function">HasPParams-SubLedgerEnv</a> <a id="1508" class="Symbol">:</a> <a id="1510" href="Ledger.Dijkstra.Specification.PParams.html#4274" class="Record">HasPParams</a> <a id="1521" href="Ledger.Dijkstra.Specification.Ledger.html#1033" class="Record">LedgerEnv</a>
  <a id="1533" href="Ledger.Dijkstra.Specification.Ledger.html#1484" class="Function">HasPParams-SubLedgerEnv</a> <a id="1557" class="Symbol">.</a><a id="1558" href="Ledger.Dijkstra.Specification.PParams.html#4325" class="Field">PParamsOf</a> <a id="1568" class="Symbol">=</a> <a id="1570" href="Ledger.Dijkstra.Specification.Ledger.html#1126" class="Field">LedgerEnv.pparams</a>


<a id="1590" class="Keyword">record</a> <a id="LState"></a><a id="1597" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="1604" class="Symbol">:</a> <a id="1606" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1611" class="Keyword">where</a>


  <a id="1621" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ˡ"></a><a id="1633" href="Ledger.Dijkstra.Specification.Ledger.html#1633" class="InductiveConstructor Operator">⟦_,_,_⟧ˡ</a>


  <a id="1646" class="Keyword">field</a>
    <a id="LState.utxoSt"></a><a id="1656" href="Ledger.Dijkstra.Specification.Ledger.html#1656" class="Field">utxoSt</a>     <a id="1667" class="Symbol">:</a> <a id="1669" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
    <a id="LState.govSt"></a><a id="1683" href="Ledger.Dijkstra.Specification.Ledger.html#1683" class="Field">govSt</a>      <a id="1694" class="Symbol">:</a> <a id="1696" href="Ledger.Dijkstra.Specification.Gov.html#1510" class="Function">GovState</a>
    <a id="LState.certState"></a><a id="1709" href="Ledger.Dijkstra.Specification.Ledger.html#1709" class="Field">certState</a>  <a id="1720" class="Symbol">:</a> <a id="1722" href="Ledger.Dijkstra.Specification.Certs.html#3352" class="Record">CertState</a>


<a id="1734" class="Keyword">record</a> <a id="HasLState"></a><a id="1741" href="Ledger.Dijkstra.Specification.Ledger.html#1741" class="Record">HasLState</a> <a id="1751" class="Symbol">{</a><a id="1752" href="Ledger.Dijkstra.Specification.Ledger.html#1752" class="Bound">a</a><a id="1753" class="Symbol">}</a> <a id="1755" class="Symbol">(</a><a id="1756" href="Ledger.Dijkstra.Specification.Ledger.html#1756" class="Bound">A</a> <a id="1758" class="Symbol">:</a> <a id="1760" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1765" href="Ledger.Dijkstra.Specification.Ledger.html#1752" class="Bound">a</a><a id="1766" class="Symbol">)</a> <a id="1768" class="Symbol">:</a> <a id="1770" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1775" href="Ledger.Dijkstra.Specification.Ledger.html#1752" class="Bound">a</a> <a id="1777" class="Keyword">where</a>
  <a id="1785" class="Keyword">field</a> <a id="HasLState.LStateOf"></a><a id="1791" href="Ledger.Dijkstra.Specification.Ledger.html#1791" class="Field">LStateOf</a> <a id="1800" class="Symbol">:</a> <a id="1802" href="Ledger.Dijkstra.Specification.Ledger.html#1756" class="Bound">A</a> <a id="1804" class="Symbol">→</a> <a id="1806" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a>
<a id="1813" class="Keyword">open</a> <a id="1818" href="Ledger.Dijkstra.Specification.Ledger.html#1741" class="Module">HasLState</a> <a id="1828" class="Symbol">⦃...⦄</a> <a id="1834" class="Keyword">public</a>

<a id="1842" class="Comment">-- instance</a>
<a id="1854" class="Comment">--   HasUTxOState-LState : HasUTxOState LState</a>
<a id="1901" class="Comment">--   HasUTxOState-LState .UTxOStateOf = LState.utxoSt</a>

<a id="1956" class="Comment">--   HasUTxO-LState : HasUTxO LState</a>
<a id="1993" class="Comment">--   HasUTxO-LState .UTxOOf = UTxOOf ∘ UTxOStateOf</a>

<a id="2045" class="Comment">--   HasGovState-LState : HasGovState LState</a>
<a id="2090" class="Comment">--   HasGovState-LState .GovStateOf = LState.govSt</a>

<a id="2142" class="Comment">--   HasCertState-LState : HasCertState LState</a>
<a id="2189" class="Comment">--   HasCertState-LState .CertStateOf = LState.certState</a>

<a id="2247" class="Comment">--   HasDeposits-LState : HasDeposits LState</a>
<a id="2292" class="Comment">--   HasDeposits-LState .DepositsOf = DepositsOf ∘ UTxOStateOf</a>

<a id="2356" class="Comment">--   HasPools-LState : HasPools LState</a>
<a id="2395" class="Comment">--   HasPools-LState .PoolsOf = PoolsOf ∘ CertStateOf</a>

<a id="2450" class="Comment">--   HasGState-LState : HasGState LState</a>
<a id="2491" class="Comment">--   HasGState-LState .GStateOf = GStateOf ∘ CertStateOf</a>

<a id="2549" class="Comment">--   HasDState-LState : HasDState LState</a>
<a id="2590" class="Comment">--   HasDState-LState .DStateOf = DStateOf ∘ CertStateOf</a>

<a id="2648" class="Comment">--   HasPState-LState : HasPState LState</a>
<a id="2689" class="Comment">--   HasPState-LState .PStateOf = PStateOf ∘ CertStateOf</a>

<a id="2747" class="Comment">--   HasVoteDelegs-LState : HasVoteDelegs LState</a>
<a id="2796" class="Comment">--   HasVoteDelegs-LState .VoteDelegsOf = VoteDelegsOf ∘ DStateOf ∘ CertStateOf</a>

<a id="2877" class="Comment">--   HasDonations-LState : HasDonations LState</a>
<a id="2924" class="Comment">--   HasDonations-LState .DonationsOf = DonationsOf ∘ UTxOStateOf</a>

<a id="2991" class="Comment">--   HasFees-LState : HasFees LState</a>
<a id="3028" class="Comment">--   HasFees-LState .FeesOf = FeesOf ∘ UTxOStateOf</a>

<a id="3080" class="Comment">--   HasCCHotKeys-LState : HasCCHotKeys LState</a>
<a id="3127" class="Comment">--   HasCCHotKeys-LState .CCHotKeysOf = CCHotKeysOf ∘ GStateOf</a>

<a id="3191" class="Comment">--   HasDReps-LState : HasDReps LState</a>
<a id="3230" class="Comment">--   HasDReps-LState .DRepsOf = DRepsOf ∘ CertStateOf</a>

<a id="3285" class="Comment">-- open CertState</a>
<a id="3303" class="Comment">-- open DState</a>
<a id="3318" class="Comment">-- open GovVotes</a>

<a id="3336" class="Keyword">instance</a>
  <a id="3347" class="Keyword">unquoteDecl</a> <a id="HasCast-LState"></a><a id="3359" href="Ledger.Dijkstra.Specification.Ledger.html#3359" class="Function">HasCast-LState</a> <a id="3374" class="Symbol">=</a> <a id="3376" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="3395" class="Symbol">((</a><a id="3397" class="Keyword">quote</a> <a id="3403" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="3410" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3412" href="Ledger.Dijkstra.Specification.Ledger.html#3359" class="Function">HasCast-LState</a><a id="3426" class="Symbol">)</a> <a id="3428" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3430" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="3432" class="Symbol">)</a>


<a id="txgov"></a><a id="3436" href="Ledger.Dijkstra.Specification.Ledger.html#3436" class="Function">txgov</a> <a id="3442" class="Symbol">:</a> <a id="3444" class="Symbol">∀</a> <a id="3446" class="Symbol">{</a><a id="3447" href="Ledger.Dijkstra.Specification.Ledger.html#3447" class="Bound">ℓ</a><a id="3448" class="Symbol">}</a> <a id="3450" class="Symbol">→</a> <a id="3452" href="Ledger.Dijkstra.Specification.Transaction.html#3744" class="Record">TxBody</a> <a id="3459" href="Ledger.Dijkstra.Specification.Ledger.html#3447" class="Bound">ℓ</a> <a id="3461" class="Symbol">→</a> <a id="3463" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3468" class="Symbol">(</a><a id="3469" href="Ledger.Dijkstra.Specification.Gov.Actions.html#1858" class="Record">GovVote</a> <a id="3477" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3479" href="Ledger.Dijkstra.Specification.Gov.Actions.html#2849" class="Record">GovProposal</a><a id="3490" class="Symbol">)</a>
<a id="3492" href="Ledger.Dijkstra.Specification.Ledger.html#3436" class="Function">txgov</a> <a id="3498" href="Ledger.Dijkstra.Specification.Ledger.html#3498" class="Bound">txb</a> <a id="3502" class="Symbol">=</a> <a id="3504" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3508" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3513" href="Ledger.Dijkstra.Specification.Transaction.html#4357" class="Field">txGovProposals</a> <a id="3528" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="3531" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3535" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3540" href="Ledger.Dijkstra.Specification.Transaction.html#4313" class="Field">txGovVotes</a>
  <a id="3553" class="Keyword">where</a> <a id="3559" class="Keyword">open</a> <a id="3564" href="Ledger.Dijkstra.Specification.Transaction.html#3744" class="Module">TxBody</a> <a id="3571" href="Ledger.Dijkstra.Specification.Ledger.html#3498" class="Bound">txb</a>

<a id="GovProposals+Votes"></a><a id="3576" href="Ledger.Dijkstra.Specification.Ledger.html#3576" class="Function">GovProposals+Votes</a> <a id="3595" class="Symbol">:</a> <a id="3597" class="Symbol">∀</a> <a id="3599" class="Symbol">{</a><a id="3600" href="Ledger.Dijkstra.Specification.Ledger.html#3600" class="Bound">ℓ</a><a id="3601" class="Symbol">}</a> <a id="3603" class="Symbol">→</a> <a id="3605" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="3608" href="Ledger.Dijkstra.Specification.Ledger.html#3600" class="Bound">ℓ</a> <a id="3610" class="Symbol">→</a> <a id="3612" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3617" class="Symbol">(</a><a id="3618" href="Ledger.Dijkstra.Specification.Gov.Actions.html#1858" class="Record">GovVote</a> <a id="3626" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3628" href="Ledger.Dijkstra.Specification.Gov.Actions.html#2849" class="Record">GovProposal</a><a id="3639" class="Symbol">)</a>
<a id="3641" href="Ledger.Dijkstra.Specification.Ledger.html#3576" class="Function">GovProposals+Votes</a> <a id="3660" href="Ledger.Dijkstra.Specification.Ledger.html#3660" class="Bound">tx</a> <a id="3663" class="Symbol">=</a> <a id="3665" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3669" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3674" class="Symbol">(</a><a id="3675" href="Ledger.Dijkstra.Specification.Transaction.html#7876" class="Field">ListOfGovProposalsOf</a> <a id="3696" href="Ledger.Dijkstra.Specification.Ledger.html#3660" class="Bound">tx</a><a id="3698" class="Symbol">)</a> <a id="3700" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="3703" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3707" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3712" class="Symbol">(</a><a id="3713" href="Ledger.Dijkstra.Specification.Transaction.html#8032" class="Field">ListOfGovVotesOf</a> <a id="3730" href="Ledger.Dijkstra.Specification.Ledger.html#3660" class="Bound">tx</a><a id="3732" class="Symbol">)</a>

<a id="rmOrphanDRepVotes"></a><a id="3735" href="Ledger.Dijkstra.Specification.Ledger.html#3735" class="Function">rmOrphanDRepVotes</a> <a id="3753" class="Symbol">:</a> <a id="3755" href="Ledger.Dijkstra.Specification.Certs.html#3352" class="Record">CertState</a> <a id="3765" class="Symbol">→</a> <a id="3767" href="Ledger.Dijkstra.Specification.Gov.html#1510" class="Function">GovState</a> <a id="3776" class="Symbol">→</a> <a id="3778" href="Ledger.Dijkstra.Specification.Gov.html#1510" class="Function">GovState</a>
<a id="3787" href="Ledger.Dijkstra.Specification.Ledger.html#3735" class="Function">rmOrphanDRepVotes</a> <a id="3805" href="Ledger.Dijkstra.Specification.Ledger.html#3805" class="Bound">cs</a> <a id="3808" href="Ledger.Dijkstra.Specification.Ledger.html#3808" class="Bound">govSt</a> <a id="3814" class="Symbol">=</a> <a id="3816" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="3822" class="Symbol">(</a><a id="3823" href="Class.Bifunctor.html#1152" class="Function">map₂</a> <a id="3828" href="Ledger.Dijkstra.Specification.Ledger.html#3935" class="Function">go</a><a id="3830" class="Symbol">)</a> <a id="3832" href="Ledger.Dijkstra.Specification.Ledger.html#3808" class="Bound">govSt</a>
  <a id="3840" class="Keyword">where</a>
   <a id="3849" href="Ledger.Dijkstra.Specification.Ledger.html#3849" class="Function">ifDRepRegistered</a> <a id="3866" class="Symbol">:</a> <a id="3868" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a> <a id="3879" class="Symbol">→</a> <a id="3881" href="Agda.Primitive.html#388" class="Primitive">Type</a>
   <a id="3889" href="Ledger.Dijkstra.Specification.Ledger.html#3849" class="Function">ifDRepRegistered</a> <a id="3906" href="Ledger.Dijkstra.Specification.Ledger.html#3906" class="Bound">c</a> <a id="3908" class="Symbol">=</a> <a id="3910" href="Ledger.Dijkstra.Specification.Ledger.html#3906" class="Bound">c</a> <a id="3912" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="3914" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3918" class="Symbol">(</a><a id="3919" href="Ledger.Dijkstra.Specification.Gov.Actions.html#4927" class="Field">DRepsOf</a> <a id="3927" href="Ledger.Dijkstra.Specification.Ledger.html#3805" class="Bound">cs</a><a id="3929" class="Symbol">)</a>

   <a id="3935" href="Ledger.Dijkstra.Specification.Ledger.html#3935" class="Function">go</a> <a id="3938" class="Symbol">:</a> <a id="3940" href="Ledger.Dijkstra.Specification.Gov.Actions.html#3406" class="Record">GovActionState</a> <a id="3955" class="Symbol">→</a> <a id="3957" href="Ledger.Dijkstra.Specification.Gov.Actions.html#3406" class="Record">GovActionState</a>
   <a id="3975" href="Ledger.Dijkstra.Specification.Ledger.html#3935" class="Function">go</a> <a id="3978" href="Ledger.Dijkstra.Specification.Ledger.html#3978" class="Bound">gas</a> <a id="3982" class="Symbol">=</a> <a id="3984" class="Keyword">record</a> <a id="3991" href="Ledger.Dijkstra.Specification.Ledger.html#3978" class="Bound">gas</a> <a id="3995" class="Symbol">{</a> <a id="3997" href="Ledger.Dijkstra.Specification.Gov.Actions.html#3446" class="Field">votes</a> <a id="4003" class="Symbol">=</a> <a id="4005" class="Keyword">record</a> <a id="4012" class="Symbol">(</a><a id="4013" href="Ledger.Dijkstra.Specification.Gov.Actions.html#4606" class="Field">GovVotesOf</a> <a id="4024" href="Ledger.Dijkstra.Specification.Ledger.html#3978" class="Bound">gas</a><a id="4027" class="Symbol">)</a> <a id="4029" class="Symbol">{</a> <a id="4031" href="Ledger.Dijkstra.Specification.Gov.Actions.html#2139" class="Field">gvDRep</a> <a id="4038" class="Symbol">=</a> <a id="4040" href="abstract-set-theory.FiniteSetTheory.html#4196" class="Function">filterKeys</a> <a id="4051" href="Ledger.Dijkstra.Specification.Ledger.html#3849" class="Function">ifDRepRegistered</a> <a id="4068" class="Symbol">(</a><a id="4069" href="Ledger.Dijkstra.Specification.Gov.Actions.html#2139" class="Field">GovVotes.gvDRep</a> <a id="4085" class="Symbol">(</a><a id="4086" href="Ledger.Dijkstra.Specification.Gov.Actions.html#4606" class="Field">GovVotesOf</a> <a id="4097" href="Ledger.Dijkstra.Specification.Ledger.html#3978" class="Bound">gas</a><a id="4100" class="Symbol">))</a> <a id="4103" class="Symbol">}</a> <a id="4105" class="Symbol">}</a>

<a id="allColdCreds"></a><a id="4108" href="Ledger.Dijkstra.Specification.Ledger.html#4108" class="Function">allColdCreds</a> <a id="4121" class="Symbol">:</a> <a id="4123" href="Ledger.Dijkstra.Specification.Gov.html#1510" class="Function">GovState</a> <a id="4132" class="Symbol">→</a> <a id="4134" href="Ledger.Dijkstra.Specification.Enact.html#582" class="Record">EnactState</a> <a id="4145" class="Symbol">→</a> <a id="4147" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4149" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a>
<a id="4160" href="Ledger.Dijkstra.Specification.Ledger.html#4108" class="Function">allColdCreds</a> <a id="4173" href="Ledger.Dijkstra.Specification.Ledger.html#4173" class="Bound">govSt</a> <a id="4179" href="Ledger.Dijkstra.Specification.Ledger.html#4179" class="Bound">es</a> <a id="4182" class="Symbol">=</a>
  <a id="4186" href="Ledger.Dijkstra.Specification.Enact.html#1500" class="Function">ccCreds</a> <a id="4194" class="Symbol">(</a><a id="4195" href="Ledger.Dijkstra.Specification.Ledger.html#4179" class="Bound">es</a> <a id="4198" class="Symbol">.</a><a id="4199" href="Ledger.Dijkstra.Specification.Enact.html#618" class="Field">cc</a><a id="4201" class="Symbol">)</a> <a id="4203" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4205" href="Axiom.Set.html#7207" class="Function">concatMapˢ</a> <a id="4216" class="Symbol">(λ</a> <a id="4219" class="Symbol">(_</a> <a id="4222" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4224" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Bound">st</a><a id="4226" class="Symbol">)</a> <a id="4228" class="Symbol">→</a> <a id="4230" href="Ledger.Dijkstra.Specification.Gov.Actions.html#3914" class="Function">proposedCC</a> <a id="4241" class="Symbol">(</a><a id="4242" href="Ledger.Dijkstra.Specification.Gov.Actions.html#4371" class="Field">GovActionOf</a> <a id="4254" href="Ledger.Dijkstra.Specification.Ledger.html#4224" class="Bound">st</a><a id="4256" class="Symbol">))</a> <a id="4259" class="Symbol">(</a><a id="4260" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="4269" href="Ledger.Dijkstra.Specification.Ledger.html#4173" class="Bound">govSt</a><a id="4274" class="Symbol">)</a>


<a id="4278" class="Keyword">private</a> <a id="4286" class="Keyword">variable</a>
  <a id="4297" href="Ledger.Dijkstra.Specification.Ledger.html#4297" class="Generalizable">Γ</a>                     <a id="4319" class="Symbol">:</a> <a id="4321" href="Ledger.Dijkstra.Specification.Ledger.html#1033" class="Record">LedgerEnv</a>
  <a id="4333" href="Ledger.Dijkstra.Specification.Ledger.html#4333" class="Generalizable">s</a> <a id="4335" href="Ledger.Dijkstra.Specification.Ledger.html#4335" class="Generalizable">s&#39;</a> <a id="4338" href="Ledger.Dijkstra.Specification.Ledger.html#4338" class="Generalizable">s&#39;&#39;</a>              <a id="4355" class="Symbol">:</a> <a id="4357" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a>
  <a id="4366" href="Ledger.Dijkstra.Specification.Ledger.html#4366" class="Generalizable">utxoState</a> <a id="4376" href="Ledger.Dijkstra.Specification.Ledger.html#4376" class="Generalizable">utxoState&#39;</a>  <a id="4388" class="Symbol">:</a> <a id="4390" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="4402" href="Ledger.Dijkstra.Specification.Ledger.html#4402" class="Generalizable">utxo₀</a>                 <a id="4424" class="Symbol">:</a> <a id="4426" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
  <a id="4433" href="Ledger.Dijkstra.Specification.Ledger.html#4433" class="Generalizable">govState</a> <a id="4442" href="Ledger.Dijkstra.Specification.Ledger.html#4442" class="Generalizable">govState&#39;</a>    <a id="4455" class="Symbol">:</a> <a id="4457" href="Ledger.Dijkstra.Specification.Gov.html#1510" class="Function">GovState</a>
  <a id="4468" href="Ledger.Dijkstra.Specification.Ledger.html#4468" class="Generalizable">certState</a> <a id="4478" href="Ledger.Dijkstra.Specification.Ledger.html#4478" class="Generalizable">certState&#39;</a>  <a id="4490" class="Symbol">:</a> <a id="4492" href="Ledger.Dijkstra.Specification.Certs.html#3352" class="Record">CertState</a>
  <a id="4504" href="Ledger.Dijkstra.Specification.Ledger.html#4504" class="Generalizable">stx</a>                   <a id="4526" class="Symbol">:</a> <a id="4528" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">SubLevelTx</a>
  <a id="4541" href="Ledger.Dijkstra.Specification.Ledger.html#4541" class="Generalizable">slot</a>                  <a id="4563" class="Symbol">:</a> <a id="4565" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
  <a id="4572" href="Ledger.Dijkstra.Specification.Ledger.html#4572" class="Generalizable">ppolicy</a>               <a id="4594" class="Symbol">:</a> <a id="4596" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4602" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
  <a id="4615" href="Ledger.Dijkstra.Specification.Ledger.html#4615" class="Generalizable">pp</a>                    <a id="4637" class="Symbol">:</a> <a id="4639" href="Ledger.Dijkstra.Specification.PParams.html#1884" class="Record">PParams</a>
  <a id="4649" href="Ledger.Dijkstra.Specification.Ledger.html#4649" class="Generalizable">enactState</a>            <a id="4671" class="Symbol">:</a> <a id="4673" href="Ledger.Dijkstra.Specification.Enact.html#582" class="Record">EnactState</a>
  <a id="4686" href="Ledger.Dijkstra.Specification.Ledger.html#4686" class="Generalizable">treasury</a>              <a id="4708" class="Symbol">:</a> <a id="4710" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>
  <a id="4721" href="Ledger.Dijkstra.Specification.Ledger.html#4721" class="Generalizable">isTopLevelValid</a>       <a id="4743" class="Symbol">:</a> <a id="4745" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
  <a id="4752" href="Ledger.Dijkstra.Specification.Ledger.html#4752" class="Generalizable">allScripts</a>            <a id="4774" class="Symbol">:</a> <a id="4776" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4778" href="Ledger.Dijkstra.Specification.Script.Base.html#2457" class="Function">Script</a>
  <a id="4787" href="Ledger.Dijkstra.Specification.Ledger.html#4787" class="Generalizable">allData</a>               <a id="4809" class="Symbol">:</a> <a id="4811" href="Ledger.Dijkstra.Specification.Script.Base.html#1735" class="Function">DataHash</a> <a id="4820" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4822" href="Ledger.Dijkstra.Specification.Script.Base.html#1782" class="Function">Datum</a>


<a id="4830" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SUBLEDGER⦈_"></a><a id="4835" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">_⊢_⇀⦇_,SUBLEDGER⦈_</a> <a id="4854" class="Symbol">:</a> <a id="4856" href="Ledger.Dijkstra.Specification.Ledger.html#698" class="Record">SubLedgerEnv</a> <a id="4869" class="Symbol">→</a> <a id="4871" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="4878" class="Symbol">→</a> <a id="4880" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">SubLevelTx</a> <a id="4891" class="Symbol">→</a> <a id="4893" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="4900" class="Symbol">→</a> <a id="4902" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4907" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,SUBLEDGER⦈_.SUBLEDGER-V"></a><a id="4915" href="Ledger.Dijkstra.Specification.Ledger.html#4915" class="InductiveConstructor">SUBLEDGER-V</a> <a id="4927" class="Symbol">:</a>
      <a id="4935" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="4937" href="Ledger.Dijkstra.Specification.Ledger.html#4721" class="Generalizable">isTopLevelValid</a> <a id="4953" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4955" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="4966" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{4970}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{4977}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{4982}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4402}{\htmlId{4993}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4721}{\htmlId{5001}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4752}{\htmlId{5019}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4787}{\htmlId{5032}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a>  <a id="5043" href="Ledger.Dijkstra.Specification.Utxow.html#3020" class="Datatype Operator">⊢</a> <a id="5045" href="Ledger.Dijkstra.Specification.Ledger.html#4366" class="Generalizable">utxoState</a> <a id="5055" href="Ledger.Dijkstra.Specification.Utxow.html#3020" class="Datatype Operator">⇀⦇</a> <a id="5058" href="Ledger.Dijkstra.Specification.Ledger.html#4504" class="Generalizable">stx</a> <a id="5062" href="Ledger.Dijkstra.Specification.Utxow.html#3020" class="Datatype Operator">,SUBUTXOW⦈</a> <a id="5073" href="Ledger.Dijkstra.Specification.Ledger.html#4376" class="Generalizable">utxoState&#39;</a>
      <a id="5090" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{5094}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{5100}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{5107}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#8032}{\htmlId{5112}{\htmlClass{Field}{\text{ListOfGovVotesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4504}{\htmlId{5129}{\htmlClass{Generalizable}{\text{stx}}}}\, \\ \,\href{Ledger.Core.Specification.Address.html#1839}{\htmlId{5135}{\htmlClass{Field}{\text{WithdrawalsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4504}{\htmlId{5149}{\htmlClass{Generalizable}{\text{stx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4108}{\htmlId{5155}{\htmlClass{Function}{\text{allColdCreds}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{5168}{\htmlClass{Generalizable}{\text{govState}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{5177}{\htmlClass{Generalizable}{\text{enactState}}}}\, \end{pmatrix}$</a> <a id="5190" href="Ledger.Dijkstra.Specification.Certs.html#12707" class="Function Operator">⊢</a> <a id="5192" href="Ledger.Dijkstra.Specification.Ledger.html#4468" class="Generalizable">certState</a> <a id="5202" href="Ledger.Dijkstra.Specification.Certs.html#12707" class="Function Operator">⇀⦇</a> <a id="5205" href="Ledger.Dijkstra.Specification.Transaction.html#7637" class="Field">DCertsOf</a> <a id="5214" href="Ledger.Dijkstra.Specification.Ledger.html#4504" class="Generalizable">stx</a> <a id="5218" href="Ledger.Dijkstra.Specification.Certs.html#12707" class="Function Operator">,CERTS⦈</a> <a id="5226" href="Ledger.Dijkstra.Specification.Ledger.html#4478" class="Generalizable">certState&#39;</a>
      <a id="5243" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#6761}{\htmlId{5247}{\htmlClass{Field}{\text{TxIdOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4504}{\htmlId{5254}{\htmlClass{Generalizable}{\text{stx}}}}\, \\ \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{5260}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{5266}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{5273}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{5278}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{5288}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4478}{\htmlId{5301}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \\ \,\href{Class.IsSet.html#916}{\htmlId{5314}{\htmlClass{Function}{\text{dom}}}}\, \,\htmlId{5318}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Certs.html#4225}{\htmlId{5319}{\htmlClass{Field}{\text{RewardsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{5329}{\htmlClass{Generalizable}{\text{certState}}}}\,\,\htmlId{5338}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}$</a> <a id="5342" href="Ledger.Dijkstra.Specification.Gov.html#17187" class="Function Operator">⊢</a> <a id="5344" href="Ledger.Dijkstra.Specification.Ledger.html#3735" class="Function">rmOrphanDRepVotes</a> <a id="5362" href="Ledger.Dijkstra.Specification.Ledger.html#4478" class="Generalizable">certState&#39;</a> <a id="5373" href="Ledger.Dijkstra.Specification.Ledger.html#4433" class="Generalizable">govState</a> <a id="5382" href="Ledger.Dijkstra.Specification.Gov.html#17187" class="Function Operator">⇀⦇</a> <a id="5385" href="Ledger.Dijkstra.Specification.Ledger.html#3576" class="Function">GovProposals+Votes</a> <a id="5404" href="Ledger.Dijkstra.Specification.Ledger.html#4504" class="Generalizable">stx</a> <a id="5408" href="Ledger.Dijkstra.Specification.Gov.html#17187" class="Function Operator">,GOVS⦈</a> <a id="5415" href="Ledger.Dijkstra.Specification.Ledger.html#4442" class="Generalizable">govState&#39;</a>
      <a id="5431" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{5472}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{5479}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{5489}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{5494}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{5507}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4402}{\htmlId{5518}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4721}{\htmlId{5526}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4752}{\htmlId{5544}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4787}{\htmlId{5557}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="5567" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{5571}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{5583}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{5594}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="5606" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">⇀⦇</a> <a id="5609" href="Ledger.Dijkstra.Specification.Ledger.html#4504" class="Generalizable">stx</a> <a id="5613" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">,SUBLEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4376}{\htmlId{5627}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4442}{\htmlId{5640}{\htmlClass{Generalizable}{\text{govState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4478}{\htmlId{5652}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,SUBLEDGER⦈_.SUBLEDGER-I"></a><a id="5668" href="Ledger.Dijkstra.Specification.Ledger.html#5668" class="InductiveConstructor">SUBLEDGER-I</a> <a id="5680" class="Symbol">:</a>
      <a id="5688" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5690" href="Ledger.Dijkstra.Specification.Ledger.html#4721" class="Generalizable">isTopLevelValid</a> <a id="5706" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5708" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="5720" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{5724}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{5731}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{5736}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4402}{\htmlId{5747}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4721}{\htmlId{5755}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4752}{\htmlId{5773}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4787}{\htmlId{5786}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="5796" href="Ledger.Dijkstra.Specification.Utxow.html#3020" class="Datatype Operator">⊢</a> <a id="5798" href="Ledger.Dijkstra.Specification.Ledger.html#4366" class="Generalizable">utxoState</a> <a id="5808" href="Ledger.Dijkstra.Specification.Utxow.html#3020" class="Datatype Operator">⇀⦇</a> <a id="5811" href="Ledger.Dijkstra.Specification.Ledger.html#4504" class="Generalizable">stx</a> <a id="5815" href="Ledger.Dijkstra.Specification.Utxow.html#3020" class="Datatype Operator">,SUBUTXOW⦈</a> <a id="5826" href="Ledger.Dijkstra.Specification.Ledger.html#4366" class="Generalizable">utxoState</a>
      <a id="5842" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{5883}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{5890}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{5900}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{5905}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{5918}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4402}{\htmlId{5929}{\htmlClass{Generalizable}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4721}{\htmlId{5937}{\htmlClass{Generalizable}{\text{isTopLevelValid}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4752}{\htmlId{5955}{\htmlClass{Generalizable}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4787}{\htmlId{5968}{\htmlClass{Generalizable}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="5978" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{5982}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{5994}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{6005}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="6017" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">⇀⦇</a> <a id="6020" href="Ledger.Dijkstra.Specification.Ledger.html#4504" class="Generalizable">stx</a> <a id="6024" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">,SUBLEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{6038}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{6050}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{6061}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="_⊢_⇀⦇_,SUBLEDGERS⦈_"></a><a id="6074" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">_⊢_⇀⦇_,SUBLEDGERS⦈_</a> <a id="6094" class="Symbol">:</a> <a id="6096" href="Ledger.Dijkstra.Specification.Ledger.html#698" class="Record">SubLedgerEnv</a> <a id="6109" class="Symbol">→</a> <a id="6111" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="6118" class="Symbol">→</a> <a id="6120" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6125" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">SubLevelTx</a> <a id="6136" class="Symbol">→</a> <a id="6138" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="6145" class="Symbol">→</a> <a id="6147" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="6152" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">_⊢_⇀⦇_,SUBLEDGERS⦈_</a> <a id="6172" class="Symbol">=</a> <a id="6174" href="Interface.STS.html#2048" class="Function">ReflexiveTransitiveClosure</a> <a id="6201" class="Symbol">{</a><a id="6202" class="Argument">sts</a> <a id="6206" class="Symbol">=</a> <a id="6208" href="Ledger.Dijkstra.Specification.Ledger.html#4835" class="Datatype Operator">_⊢_⇀⦇_,SUBLEDGER⦈_</a><a id="6226" class="Symbol">}</a>


<a id="6230" class="Keyword">private</a> <a id="6238" class="Keyword">variable</a>
  <a id="6249" href="Ledger.Dijkstra.Specification.Ledger.html#6249" class="Generalizable">utxoState&#39;&#39;</a> <a id="6261" class="Symbol">:</a> <a id="6263" href="Ledger.Dijkstra.Specification.Utxo.html#1217" class="Record">UTxOState</a>
  <a id="6275" href="Ledger.Dijkstra.Specification.Ledger.html#6275" class="Generalizable">govState&#39;&#39;</a>  <a id="6287" class="Symbol">:</a> <a id="6289" href="Ledger.Dijkstra.Specification.Gov.html#1510" class="Function">GovState</a>
  <a id="6300" href="Ledger.Dijkstra.Specification.Ledger.html#6300" class="Generalizable">certState&#39;&#39;</a> <a id="6312" class="Symbol">:</a> <a id="6314" href="Ledger.Dijkstra.Specification.Certs.html#3352" class="Record">CertState</a>
  <a id="6326" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a>          <a id="6338" class="Symbol">:</a> <a id="6340" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a>


<a id="6353" class="Keyword">data</a> <a id="_⊢_⇀⦇_,LEDGER⦈_"></a><a id="6358" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Datatype Operator">_⊢_⇀⦇_,LEDGER⦈_</a> <a id="6374" class="Symbol">:</a> <a id="6376" href="Ledger.Dijkstra.Specification.Ledger.html#1033" class="Record">LedgerEnv</a> <a id="6386" class="Symbol">→</a> <a id="6388" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="6395" class="Symbol">→</a> <a id="6397" href="Ledger.Dijkstra.Specification.Transaction.html#5270" class="Function">TopLevelTx</a> <a id="6408" class="Symbol">→</a> <a id="6410" href="Ledger.Dijkstra.Specification.Ledger.html#1597" class="Record">LState</a> <a id="6417" class="Symbol">→</a> <a id="6419" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6424" class="Keyword">where</a>
  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-V"></a><a id="6432" href="Ledger.Dijkstra.Specification.Ledger.html#6432" class="InductiveConstructor">LEDGER-V</a> <a id="6441" class="Symbol">:</a>
    <a id="6447" class="Keyword">let</a>  <a id="6452" class="Comment">-- Pre-batch snapshot of UTxO</a>
         <a id="6491" href="Ledger.Dijkstra.Specification.Ledger.html#6491" class="Bound">utxo₀</a> <a id="6497" class="Symbol">:</a> <a id="6499" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
         <a id="6513" href="Ledger.Dijkstra.Specification.Ledger.html#6491" class="Bound">utxo₀</a> <a id="6519" class="Symbol">=</a> <a id="6521" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="6528" href="Ledger.Dijkstra.Specification.Ledger.html#4366" class="Generalizable">utxoState</a>

         <a id="6548" href="Ledger.Dijkstra.Specification.Ledger.html#6548" class="Bound">allScripts</a> <a id="6559" class="Symbol">:</a> <a id="6561" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="6563" href="Ledger.Dijkstra.Specification.Script.Base.html#2457" class="Function">Script</a>
         <a id="6579" href="Ledger.Dijkstra.Specification.Ledger.html#6548" class="Bound">allScripts</a> <a id="6590" class="Symbol">=</a> <a id="6592" href="Ledger.Dijkstra.Specification.Transaction.html#16440" class="Function">getAllScripts</a> <a id="6606" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="6609" href="Ledger.Dijkstra.Specification.Ledger.html#6491" class="Bound">utxo₀</a>

         <a id="6625" href="Ledger.Dijkstra.Specification.Ledger.html#6625" class="Bound">allData</a> <a id="6633" class="Symbol">:</a> <a id="6635" href="Ledger.Dijkstra.Specification.Script.Base.html#1735" class="Function">DataHash</a> <a id="6644" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="6646" href="Ledger.Dijkstra.Specification.Script.Base.html#1782" class="Function">Datum</a>
         <a id="6661" href="Ledger.Dijkstra.Specification.Ledger.html#6625" class="Bound">allData</a> <a id="6669" class="Symbol">=</a> <a id="6671" href="Ledger.Prelude.html#1789" class="Function">setToMap</a> <a id="6680" class="Symbol">(</a><a id="6681" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="6686" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="6688" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="6693" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="6695" href="Function.Base.html#704" class="Function">id</a> <a id="6698" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="6700" class="Symbol">(</a><a id="6701" href="Ledger.Dijkstra.Specification.Transaction.html#16630" class="Function">getAllData</a> <a id="6712" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="6715" href="Ledger.Dijkstra.Specification.Ledger.html#6491" class="Bound">utxo₀</a><a id="6720" class="Symbol">))</a>

    <a id="6728" class="Keyword">in</a>
      <a id="6737" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="6739" href="Ledger.Dijkstra.Specification.Transaction.html#8834" class="Field">IsValidFlagOf</a> <a id="6753" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="6756" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6758" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
      <a id="6769" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{6773}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{6780}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{6790}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{6795}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{6808}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6491}{\htmlId{6819}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#8834}{\htmlId{6827}{\htmlClass{Field}{\text{IsValidFlagOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6326}{\htmlId{6841}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6548}{\htmlId{6846}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6625}{\htmlId{6859}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="6869" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{6873}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{6885}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{6896}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="6908" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">⇀⦇</a> <a id="6911" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="6929" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="6932" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">,SUBLEDGERS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4376}{\htmlId{6947}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4442}{\htmlId{6960}{\htmlClass{Generalizable}{\text{govState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4478}{\htmlId{6972}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \end{pmatrix}$</a>
      <a id="6991" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{6995}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{7002}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{7007}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6491}{\htmlId{7018}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#8834}{\htmlId{7026}{\htmlClass{Field}{\text{IsValidFlagOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6326}{\htmlId{7040}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6548}{\htmlId{7045}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6625}{\htmlId{7058}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a>  <a id="7069" href="Ledger.Dijkstra.Specification.Utxow.html#4806" class="Datatype Operator">⊢</a> <a id="7071" href="Ledger.Dijkstra.Specification.Ledger.html#4376" class="Generalizable">utxoState&#39;</a> <a id="7082" href="Ledger.Dijkstra.Specification.Utxow.html#4806" class="Datatype Operator">⇀⦇</a> <a id="7085" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="7088" href="Ledger.Dijkstra.Specification.Utxow.html#4806" class="Datatype Operator">,UTXOW⦈</a> <a id="7096" href="Ledger.Dijkstra.Specification.Ledger.html#6249" class="Generalizable">utxoState&#39;&#39;</a>
      <a id="7114" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{7118}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{7124}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{7131}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#8032}{\htmlId{7136}{\htmlClass{Field}{\text{ListOfGovVotesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6326}{\htmlId{7153}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Core.Specification.Address.html#1839}{\htmlId{7158}{\htmlClass{Field}{\text{WithdrawalsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6326}{\htmlId{7172}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4108}{\htmlId{7177}{\htmlClass{Function}{\text{allColdCreds}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{7190}{\htmlClass{Generalizable}{\text{govState}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{7199}{\htmlClass{Generalizable}{\text{enactState}}}}\, \end{pmatrix}$</a> <a id="7212" href="Ledger.Dijkstra.Specification.Certs.html#12707" class="Function Operator">⊢</a> <a id="7214" href="Ledger.Dijkstra.Specification.Ledger.html#4478" class="Generalizable">certState&#39;</a> <a id="7225" href="Ledger.Dijkstra.Specification.Certs.html#12707" class="Function Operator">⇀⦇</a> <a id="7228" href="Ledger.Dijkstra.Specification.Transaction.html#7637" class="Field">DCertsOf</a> <a id="7237" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="7240" href="Ledger.Dijkstra.Specification.Certs.html#12707" class="Function Operator">,CERTS⦈</a> <a id="7248" href="Ledger.Dijkstra.Specification.Ledger.html#6300" class="Generalizable">certState&#39;&#39;</a>
      <a id="7266" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#6761}{\htmlId{7270}{\htmlClass{Field}{\text{TxIdOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6326}{\htmlId{7277}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Core.Specification.Epoch.html#858}{\htmlId{7282}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{7288}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{7295}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{7300}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{7310}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4478}{\htmlId{7323}{\htmlClass{Generalizable}{\text{certState&#39;}}}}\, \\ \,\href{Class.IsSet.html#916}{\htmlId{7336}{\htmlClass{Function}{\text{dom}}}}\, \,\htmlId{7340}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Certs.html#4225}{\htmlId{7341}{\htmlClass{Field}{\text{RewardsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{7351}{\htmlClass{Generalizable}{\text{certState}}}}\,\,\htmlId{7360}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}$</a> <a id="7364" href="Ledger.Dijkstra.Specification.Gov.html#17187" class="Function Operator">⊢</a> <a id="7366" href="Ledger.Dijkstra.Specification.Ledger.html#3735" class="Function">rmOrphanDRepVotes</a> <a id="7384" href="Ledger.Dijkstra.Specification.Ledger.html#4478" class="Generalizable">certState&#39;</a> <a id="7395" href="Ledger.Dijkstra.Specification.Ledger.html#4433" class="Generalizable">govState</a> <a id="7404" href="Ledger.Dijkstra.Specification.Gov.html#17187" class="Function Operator">⇀⦇</a> <a id="7407" href="Ledger.Dijkstra.Specification.Ledger.html#3576" class="Function">GovProposals+Votes</a> <a id="7426" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="7429" href="Ledger.Dijkstra.Specification.Gov.html#17187" class="Function Operator">,GOVS⦈</a> <a id="7436" href="Ledger.Dijkstra.Specification.Ledger.html#4442" class="Generalizable">govState&#39;</a>
      <a id="7452" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{7493}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{7500}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{7510}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{7515}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{7528}{\htmlClass{Generalizable}{\text{treasury}}}}\, \end{pmatrix}$</a> <a id="7539" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{7543}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{7555}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{7566}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="7578" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Datatype Operator">⇀⦇</a> <a id="7581" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="7584" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#6249}{\htmlId{7595}{\htmlClass{Generalizable}{\text{utxoState&#39;&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6275}{\htmlId{7609}{\htmlClass{Generalizable}{\text{govState&#39;&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#6300}{\htmlId{7622}{\htmlClass{Generalizable}{\text{certState&#39;&#39;}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-I"></a><a id="7639" href="Ledger.Dijkstra.Specification.Ledger.html#7639" class="InductiveConstructor">LEDGER-I</a> <a id="7648" class="Symbol">:</a>
    <a id="7654" class="Keyword">let</a>  <a id="7659" href="Ledger.Dijkstra.Specification.Ledger.html#7659" class="Bound">utxo₀</a> <a id="7665" class="Symbol">:</a> <a id="7667" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
         <a id="7681" href="Ledger.Dijkstra.Specification.Ledger.html#7659" class="Bound">utxo₀</a> <a id="7687" class="Symbol">=</a> <a id="7689" href="Ledger.Dijkstra.Specification.Transaction.html#3404" class="Field">UTxOOf</a> <a id="7696" href="Ledger.Dijkstra.Specification.Ledger.html#4366" class="Generalizable">utxoState</a>

         <a id="7716" href="Ledger.Dijkstra.Specification.Ledger.html#7716" class="Bound">allScripts</a> <a id="7727" class="Symbol">:</a> <a id="7729" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="7731" href="Ledger.Dijkstra.Specification.Script.Base.html#2457" class="Function">Script</a>
         <a id="7747" href="Ledger.Dijkstra.Specification.Ledger.html#7716" class="Bound">allScripts</a> <a id="7758" class="Symbol">=</a> <a id="7760" href="Ledger.Dijkstra.Specification.Transaction.html#16440" class="Function">getAllScripts</a> <a id="7774" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="7777" href="Ledger.Dijkstra.Specification.Ledger.html#7659" class="Bound">utxo₀</a>

         <a id="7793" href="Ledger.Dijkstra.Specification.Ledger.html#7793" class="Bound">allData</a> <a id="7801" class="Symbol">:</a> <a id="7803" href="Ledger.Dijkstra.Specification.Script.Base.html#1735" class="Function">DataHash</a> <a id="7812" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="7814" href="Ledger.Dijkstra.Specification.Script.Base.html#1782" class="Function">Datum</a>
         <a id="7829" href="Ledger.Dijkstra.Specification.Ledger.html#7793" class="Bound">allData</a> <a id="7837" class="Symbol">=</a> <a id="7839" href="Ledger.Prelude.html#1789" class="Function">setToMap</a> <a id="7848" class="Symbol">(</a><a id="7849" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="7854" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="7856" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="7861" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="7863" href="Function.Base.html#704" class="Function">id</a> <a id="7866" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="7868" class="Symbol">(</a><a id="7869" href="Ledger.Dijkstra.Specification.Transaction.html#16630" class="Function">getAllData</a> <a id="7880" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="7883" href="Ledger.Dijkstra.Specification.Ledger.html#7659" class="Bound">utxo₀</a><a id="7888" class="Symbol">))</a>
    <a id="7895" class="Keyword">in</a>
      <a id="7904" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="7906" href="Ledger.Dijkstra.Specification.Transaction.html#8834" class="Field">IsValidFlagOf</a> <a id="7920" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="7923" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7925" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
      <a id="7937" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{7941}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{7948}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{7958}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{7963}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{7976}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7659}{\htmlId{7987}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#8834}{\htmlId{7995}{\htmlClass{Field}{\text{IsValidFlagOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6326}{\htmlId{8009}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7716}{\htmlId{8014}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7793}{\htmlId{8027}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="8037" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{8041}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{8053}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{8064}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="8076" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">⇀⦇</a> <a id="8079" href="Ledger.Dijkstra.Specification.Transaction.html#6340" class="Field">SubTransactionsOf</a> <a id="8097" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a>  <a id="8101" href="Ledger.Dijkstra.Specification.Ledger.html#6074" class="Function Operator">,SUBLEDGERS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{8116}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{8128}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{8139}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>
      <a id="8157" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{8161}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{8168}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{8173}{\htmlClass{Generalizable}{\text{treasury}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7659}{\htmlId{8184}{\htmlClass{Bound}{\text{utxo₀}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Transaction.html#8834}{\htmlId{8192}{\htmlClass{Field}{\text{IsValidFlagOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Ledger.html#6326}{\htmlId{8206}{\htmlClass{Generalizable}{\text{tx}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7716}{\htmlId{8211}{\htmlClass{Bound}{\text{allScripts}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#7793}{\htmlId{8224}{\htmlClass{Bound}{\text{allData}}}}\, \end{pmatrix}$</a> <a id="8234" href="Ledger.Dijkstra.Specification.Utxow.html#4806" class="Datatype Operator">⊢</a> <a id="8236" href="Ledger.Dijkstra.Specification.Ledger.html#4366" class="Generalizable">utxoState</a> <a id="8246" href="Ledger.Dijkstra.Specification.Utxow.html#4806" class="Datatype Operator">⇀⦇</a> <a id="8249" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="8252" href="Ledger.Dijkstra.Specification.Utxow.html#4806" class="Datatype Operator">,UTXOW⦈</a> <a id="8260" href="Ledger.Dijkstra.Specification.Ledger.html#4376" class="Generalizable">utxoState&#39;</a>
      <a id="8277" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4541}{\htmlId{8318}{\htmlClass{Generalizable}{\text{slot}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4572}{\htmlId{8325}{\htmlClass{Generalizable}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4615}{\htmlId{8335}{\htmlClass{Generalizable}{\text{pp}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4649}{\htmlId{8340}{\htmlClass{Generalizable}{\text{enactState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4686}{\htmlId{8353}{\htmlClass{Generalizable}{\text{treasury}}}}\, \end{pmatrix}$</a> <a id="8364" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4366}{\htmlId{8368}{\htmlClass{Generalizable}{\text{utxoState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{8380}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{8391}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a> <a id="8403" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Datatype Operator">⇀⦇</a> <a id="8406" href="Ledger.Dijkstra.Specification.Ledger.html#6326" class="Generalizable">tx</a> <a id="8409" href="Ledger.Dijkstra.Specification.Ledger.html#6358" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Ledger.html#4376}{\htmlId{8420}{\htmlClass{Generalizable}{\text{utxoState&#39;}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4433}{\htmlId{8433}{\htmlClass{Generalizable}{\text{govState}}}}\, \\ \,\href{Ledger.Dijkstra.Specification.Ledger.html#4468}{\htmlId{8444}{\htmlClass{Generalizable}{\text{certState}}}}\, \end{pmatrix}$</a>

</pre></body></html>