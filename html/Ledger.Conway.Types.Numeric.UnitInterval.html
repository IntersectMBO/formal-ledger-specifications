<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Types.Numeric.UnitInterval</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Comment">-- Rational number in the unit interval.</a>
<a id="66" class="Keyword">module</a> <a id="73" href="Ledger.Conway.Types.Numeric.UnitInterval.html" class="Module">Ledger.Conway.Types.Numeric.UnitInterval</a> <a id="114" class="Keyword">where</a>

<a id="121" class="Keyword">open</a> <a id="126" class="Keyword">import</a> <a id="133" href="Prelude.html" class="Module">Prelude</a>
  <a id="143" class="Keyword">hiding</a> <a id="150" class="Symbol">(</a><a id="151" href="Data.Sum.Base.html#811" class="Function Operator">[_,_]</a><a id="156" class="Symbol">;</a> <a id="158" href="Data.List.Base.html#5205" class="Function Operator">[_]</a><a id="161" class="Symbol">;</a> <a id="163" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a><a id="166" class="Symbol">)</a>

<a id="169" class="Keyword">open</a> <a id="174" class="Keyword">import</a> <a id="181" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="202" class="Keyword">open</a> <a id="207" class="Keyword">import</a> <a id="214" href="Class.Show.html" class="Module">Class.Show</a> <a id="225" class="Keyword">using</a> <a id="231" class="Symbol">(</a><a id="232" href="Class.Show.Core.html#125" class="Record">Show</a><a id="236" class="Symbol">;</a> <a id="238" href="Class.Show.Core.html#187" class="Field">show</a><a id="242" class="Symbol">)</a>
<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Data.Irrelevant.html" class="Module">Data.Irrelevant</a> <a id="272" class="Keyword">using</a> <a id="278" class="Symbol">(</a><a id="279" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[_]</a><a id="282" class="Symbol">)</a>
<a id="284" class="Keyword">import</a> <a id="291" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="305" class="Symbol">as</a> <a id="308" class="Module">ℚ</a>
<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Data.Rational.Properties.html" class="Module">Data.Rational.Properties</a>
<a id="347" class="Keyword">import</a> <a id="354" href="Data.Rational.Show.html" class="Module">Data.Rational.Show</a> <a id="373" class="Symbol">as</a> <a id="376" class="Module">ℚshow</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="408" class="Keyword">using</a> <a id="414" class="Symbol">(</a><a id="415" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="416" class="Symbol">;</a> <a id="418" href="Data.Rational.Base.html#2465" class="Datatype Operator">_≤_</a><a id="421" class="Symbol">;</a> <a id="423" href="Data.Rational.Properties.html#19360" class="Function Operator">_≤?_</a><a id="427" class="Symbol">;</a> <a id="429" href="Data.Rational.Base.html#6315" class="Function Operator">_*_</a><a id="432" class="Symbol">)</a>
<a id="434" class="Keyword">open</a> <a id="439" class="Keyword">import</a> <a id="446" href="Data.Refinement.html" class="Module">Data.Refinement</a> <a id="462" class="Keyword">using</a> <a id="468" class="Symbol">(</a><a id="469" href="Data.Refinement.Base.html#1052" class="Function">Refinement-syntax</a><a id="486" class="Symbol">;</a> <a id="488" href="Data.Refinement.Base.html#759" class="Field">value</a><a id="493" class="Symbol">;</a> <a id="495" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">_,_</a><a id="498" class="Symbol">)</a>

<a id="501" class="Keyword">open</a> <a id="506" class="Keyword">import</a> <a id="513" href="Tactic.EquationalReasoning.html" class="Module">Tactic.EquationalReasoning</a> <a id="540" class="Keyword">using</a> <a id="546" class="Symbol">(</a><a id="547" class="Keyword">module</a> <a id="554" href="Tactic.EquationalReasoning.html#418" class="Module">≡-Reasoning</a><a id="565" class="Symbol">)</a>
<a id="567" class="Keyword">open</a> <a id="572" href="Data.Rational.Properties.html#26177" class="Module">≤-Reasoning</a>

<a id="585" class="Comment">-- inUnitInterval predicate</a>
<a id="inUnitInterval"></a><a id="613" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="628" class="Symbol">:</a> <a id="630" class="Symbol">(</a><a id="631" href="Ledger.Conway.Types.Numeric.UnitInterval.html#631" class="Bound">x</a> <a id="633" class="Symbol">:</a> <a id="635" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="636" class="Symbol">)</a> <a id="638" class="Symbol">→</a> <a id="640" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="645" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="660" href="Ledger.Conway.Types.Numeric.UnitInterval.html#660" class="Bound">x</a> <a id="662" class="Symbol">=</a> <a id="664" class="Symbol">(</a><a id="665" class="Number">0</a> <a id="667" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="669" href="Ledger.Conway.Types.Numeric.UnitInterval.html#660" class="Bound">x</a><a id="670" class="Symbol">)</a> <a id="672" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="674" class="Symbol">(</a><a id="675" href="Ledger.Conway.Types.Numeric.UnitInterval.html#660" class="Bound">x</a> <a id="677" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="679" class="Number">1</a><a id="680" class="Symbol">)</a>

<a id="683" class="Comment">-- Decide whether a rational number is in the unit interval.</a>
<a id="isInUnitInterval"></a><a id="744" href="Ledger.Conway.Types.Numeric.UnitInterval.html#744" class="Function">isInUnitInterval</a> <a id="761" class="Symbol">:</a> <a id="763" class="Symbol">(</a><a id="764" href="Ledger.Conway.Types.Numeric.UnitInterval.html#764" class="Bound">x</a> <a id="766" class="Symbol">:</a> <a id="768" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="769" class="Symbol">)</a> <a id="771" class="Symbol">→</a> <a id="773" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="777" class="Symbol">(</a><a id="778" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="793" href="Ledger.Conway.Types.Numeric.UnitInterval.html#764" class="Bound">x</a><a id="794" class="Symbol">)</a>
<a id="796" href="Ledger.Conway.Types.Numeric.UnitInterval.html#744" class="Function">isInUnitInterval</a> <a id="813" href="Ledger.Conway.Types.Numeric.UnitInterval.html#813" class="Bound">x</a> <a id="815" class="Symbol">=</a> <a id="817" class="Symbol">(</a><a id="818" class="Number">0</a> <a id="820" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="823" href="Ledger.Conway.Types.Numeric.UnitInterval.html#813" class="Bound">x</a><a id="824" class="Symbol">)</a> <a id="826" href="Relation.Nullary.Decidable.Core.html#3103" class="Function Operator">×-dec</a> <a id="832" class="Symbol">(</a><a id="833" href="Ledger.Conway.Types.Numeric.UnitInterval.html#813" class="Bound">x</a> <a id="835" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="838" class="Number">1</a><a id="839" class="Symbol">)</a>

<a id="842" class="Comment">-- Multiplying with a number from the unit interval only decreases.</a>
<a id="inUnitInterval-*-≤y"></a><a id="910" href="Ledger.Conway.Types.Numeric.UnitInterval.html#910" class="Function">inUnitInterval-*-≤y</a> <a id="930" class="Symbol">:</a> <a id="932" class="Symbol">∀</a> <a id="934" class="Symbol">(</a><a id="935" href="Ledger.Conway.Types.Numeric.UnitInterval.html#935" class="Bound">x</a> <a id="937" href="Ledger.Conway.Types.Numeric.UnitInterval.html#937" class="Bound">y</a> <a id="939" class="Symbol">:</a> <a id="941" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="942" class="Symbol">)</a> <a id="944" class="Symbol">→</a> <a id="946" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="961" href="Ledger.Conway.Types.Numeric.UnitInterval.html#935" class="Bound">x</a> <a id="963" class="Symbol">→</a> <a id="965" class="Number">0</a> <a id="967" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="969" href="Ledger.Conway.Types.Numeric.UnitInterval.html#937" class="Bound">y</a> <a id="971" class="Symbol">→</a> <a id="973" href="Ledger.Conway.Types.Numeric.UnitInterval.html#935" class="Bound">x</a> <a id="975" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="977" href="Ledger.Conway.Types.Numeric.UnitInterval.html#937" class="Bound">y</a> <a id="979" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="981" href="Ledger.Conway.Types.Numeric.UnitInterval.html#937" class="Bound">y</a>
<a id="983" href="Ledger.Conway.Types.Numeric.UnitInterval.html#910" class="Function">inUnitInterval-*-≤y</a> <a id="1003" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1003" class="Bound">x</a> <a id="1005" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1005" class="Bound">y</a> <a id="1007" class="Symbol">(</a><a id="1008" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1008" class="Bound">0≤x</a> <a id="1012" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1014" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1014" class="Bound">x≤1</a><a id="1017" class="Symbol">)</a> <a id="1019" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1019" class="Bound">0≤y</a> <a id="1023" class="Symbol">=</a>
  <a id="1027" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1037" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1003" class="Bound">x</a> <a id="1039" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1041" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1005" class="Bound">y</a>  <a id="1044" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1047" href="Data.Rational.Properties.html#47711" class="Function">*-monoʳ-≤-nonNeg</a> <a id="1064" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1005" class="Bound">y</a> <a id="1066" class="Symbol">⦃</a> <a id="1068" href="Data.Rational.Base.html#5785" class="Function">ℚ.nonNegative</a> <a id="1082" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1019" class="Bound">0≤y</a> <a id="1086" class="Symbol">⦄</a> <a id="1088" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1014" class="Bound">x≤1</a> <a id="1092" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1098" class="Number">1</a> <a id="1100" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1102" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1005" class="Bound">y</a>  <a id="1105" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1108" href="Data.Rational.Properties.html#42576" class="Function">*-identityˡ</a> <a id="1120" class="Symbol">_</a> <a id="1122" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1128" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1005" class="Bound">y</a>      <a id="1135" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1138" class="Comment">-- Left multiplication by unit interval element preserves non-negativity.</a>
<a id="inUnitInterval-*-0≤"></a><a id="1212" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1212" class="Function">inUnitInterval-*-0≤</a> <a id="1232" class="Symbol">:</a> <a id="1234" class="Symbol">∀</a> <a id="1236" class="Symbol">(</a><a id="1237" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1237" class="Bound">x</a> <a id="1239" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1239" class="Bound">y</a> <a id="1241" class="Symbol">:</a> <a id="1243" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="1244" class="Symbol">)</a> <a id="1246" class="Symbol">→</a> <a id="1248" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="1263" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1237" class="Bound">x</a> <a id="1265" class="Symbol">→</a> <a id="1267" class="Number">0</a> <a id="1269" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1271" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1239" class="Bound">y</a> <a id="1273" class="Symbol">→</a> <a id="1275" class="Number">0</a> <a id="1277" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1279" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1237" class="Bound">x</a> <a id="1281" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1283" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1239" class="Bound">y</a>
<a id="1285" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1212" class="Function">inUnitInterval-*-0≤</a> <a id="1305" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1305" class="Bound">x</a> <a id="1307" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1307" class="Bound">y</a> <a id="1309" class="Symbol">(</a><a id="1310" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1310" class="Bound">0≤x</a> <a id="1314" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1316" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1316" class="Bound">x≤1</a><a id="1319" class="Symbol">)</a> <a id="1321" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1321" class="Bound">0≤y</a> <a id="1325" class="Symbol">=</a>
  <a id="1329" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1339" class="Number">0</a>      <a id="1346" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1349" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="1353" class="Symbol">(</a><a id="1354" href="Data.Rational.Properties.html#42957" class="Function">*-zeroʳ</a> <a id="1362" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1305" class="Bound">x</a><a id="1363" class="Symbol">)</a> <a id="1365" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1371" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1305" class="Bound">x</a> <a id="1373" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1375" class="Number">0</a>  <a id="1378" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1381" href="Data.Rational.Properties.html#48056" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1398" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1305" class="Bound">x</a> <a id="1400" class="Symbol">⦃</a> <a id="1402" href="Data.Rational.Base.html#5785" class="Function">ℚ.nonNegative</a> <a id="1416" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1310" class="Bound">0≤x</a> <a id="1420" class="Symbol">⦄</a> <a id="1422" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1321" class="Bound">0≤y</a> <a id="1426" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1432" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1305" class="Bound">x</a> <a id="1434" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1436" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1307" class="Bound">y</a>  <a id="1439" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1442" class="Comment">-- Left multiplication by unit interval element preserves being upper boundeded by 1.</a>
<a id="inUnitInterval-*-≤1"></a><a id="1528" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1528" class="Function">inUnitInterval-*-≤1</a> <a id="1548" class="Symbol">:</a> <a id="1550" class="Symbol">∀</a> <a id="1552" class="Symbol">(</a><a id="1553" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1553" class="Bound">x</a> <a id="1555" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1555" class="Bound">y</a> <a id="1557" class="Symbol">:</a> <a id="1559" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="1560" class="Symbol">)</a> <a id="1562" class="Symbol">→</a> <a id="1564" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="1579" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1553" class="Bound">x</a> <a id="1581" class="Symbol">→</a> <a id="1583" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1555" class="Bound">y</a> <a id="1585" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1587" class="Number">1</a> <a id="1589" class="Symbol">→</a> <a id="1591" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1553" class="Bound">x</a> <a id="1593" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1595" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1555" class="Bound">y</a> <a id="1597" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1599" class="Number">1</a>
<a id="1601" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1528" class="Function">inUnitInterval-*-≤1</a> <a id="1621" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1621" class="Bound">x</a> <a id="1623" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1623" class="Bound">y</a> <a id="1625" class="Symbol">(</a><a id="1626" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1626" class="Bound">0≤x</a> <a id="1630" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1632" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1632" class="Bound">x≤1</a><a id="1635" class="Symbol">)</a> <a id="1637" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1637" class="Bound">y≤1</a> <a id="1641" class="Symbol">=</a>
  <a id="1645" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1655" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1621" class="Bound">x</a> <a id="1657" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1659" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1623" class="Bound">y</a>  <a id="1662" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1665" href="Data.Rational.Properties.html#48056" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1682" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1621" class="Bound">x</a> <a id="1684" class="Symbol">⦃</a> <a id="1686" href="Data.Rational.Base.html#5785" class="Function">ℚ.nonNegative</a> <a id="1700" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1626" class="Bound">0≤x</a> <a id="1704" class="Symbol">⦄</a> <a id="1706" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1637" class="Bound">y≤1</a> <a id="1710" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1716" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1621" class="Bound">x</a> <a id="1718" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1720" class="Number">1</a>  <a id="1723" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1726" href="Data.Rational.Properties.html#42682" class="Function">*-identityʳ</a> <a id="1738" class="Symbol">_</a> <a id="1740" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1746" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1621" class="Bound">x</a>      <a id="1753" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1756" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1632" class="Bound">x≤1</a> <a id="1760" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1766" class="Number">1</a>      <a id="1773" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1776" class="Comment">-- The product of two numbers from the unit interval is also in the unit interval.</a>
<a id="inUnitInterval-*"></a><a id="1859" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1859" class="Function">inUnitInterval-*</a> <a id="1876" class="Symbol">:</a> <a id="1878" class="Symbol">∀</a> <a id="1880" class="Symbol">(</a><a id="1881" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1881" class="Bound">x</a> <a id="1883" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1883" class="Bound">y</a> <a id="1885" class="Symbol">:</a> <a id="1887" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="1888" class="Symbol">)</a>
  <a id="1892" class="Symbol">→</a> <a id="1894" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="1909" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1881" class="Bound">x</a> <a id="1911" class="Symbol">→</a> <a id="1913" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="1928" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1883" class="Bound">y</a> <a id="1930" class="Symbol">→</a> <a id="1932" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="1947" class="Symbol">(</a><a id="1948" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1881" class="Bound">x</a> <a id="1950" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1952" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1883" class="Bound">y</a><a id="1953" class="Symbol">)</a>
<a id="1955" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1859" class="Function">inUnitInterval-*</a> <a id="1972" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1972" class="Bound">x</a> <a id="1974" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1974" class="Bound">y</a> <a id="1976" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1976" class="Bound">ux</a> <a id="1979" class="Symbol">(</a><a id="1980" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1980" class="Bound">0≤y</a> <a id="1984" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1986" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1986" class="Bound">y≤1</a><a id="1989" class="Symbol">)</a> <a id="1991" class="Symbol">=</a>
  <a id="1995" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1212" class="Function">inUnitInterval-*-0≤</a> <a id="2015" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1972" class="Bound">x</a> <a id="2017" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1974" class="Bound">y</a> <a id="2019" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1976" class="Bound">ux</a> <a id="2022" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1980" class="Bound">0≤y</a>
  <a id="2028" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2030" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1528" class="Function">inUnitInterval-*-≤1</a> <a id="2050" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1972" class="Bound">x</a> <a id="2052" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1974" class="Bound">y</a> <a id="2054" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1976" class="Bound">ux</a> <a id="2057" href="Ledger.Conway.Types.Numeric.UnitInterval.html#1986" class="Bound">y≤1</a>

<a id="2062" class="Comment">-- UnitInterval: rational number in the unit interval [0, 1].</a>
<a id="UnitInterval"></a><a id="2124" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a> <a id="2137" class="Symbol">:</a> <a id="2139" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="2144" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a> <a id="2157" class="Symbol">=</a> <a id="2159" href="Data.Refinement.Base.html#1052" class="Function">[</a> <a id="2161" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2161" class="Bound">x</a> <a id="2163" href="Data.Refinement.Base.html#1052" class="Function">∈</a> <a id="2165" href="Data.Rational.Base.html#1342" class="Record">ℚ</a> <a id="2167" href="Data.Refinement.Base.html#1052" class="Function">∣</a> <a id="2169" href="Ledger.Conway.Types.Numeric.UnitInterval.html#613" class="Function">inUnitInterval</a> <a id="2184" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2161" class="Bound">x</a> <a id="2186" href="Data.Refinement.Base.html#1052" class="Function">]</a>

<a id="2189" class="Keyword">instance</a>
  <a id="Show-UnitInterval"></a><a id="2200" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2200" class="Function">Show-UnitInterval</a> <a id="2218" class="Symbol">:</a> <a id="2220" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="2225" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a>
  <a id="2240" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2200" class="Function">Show-UnitInterval</a> <a id="2258" class="Symbol">.</a><a id="2259" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2264" class="Symbol">=</a> <a id="2266" href="Data.Rational.Show.html#398" class="Function">ℚshow.show</a> <a id="2277" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2279" href="Data.Refinement.Base.html#759" class="Field">value</a>

<a id="2286" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="2321" class="Comment">--  unboundRational</a>
<a id="fromUnitInterval"></a><a id="2341" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2341" class="Function">fromUnitInterval</a> <a id="2358" class="Symbol">:</a> <a id="2360" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a> <a id="2373" class="Symbol">→</a> <a id="2375" href="Data.Rational.Base.html#1342" class="Record">ℚ</a>
<a id="2377" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2341" class="Function">fromUnitInterval</a> <a id="2394" class="Symbol">=</a> <a id="2396" href="Data.Refinement.Base.html#759" class="Field">value</a>

<a id="2403" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="2438" class="Comment">--  unboundRational</a>
<a id="toUnitInterval"></a><a id="2458" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2458" class="Function">toUnitInterval</a> <a id="2473" class="Symbol">:</a> <a id="2475" href="Data.Rational.Base.html#1342" class="Record">ℚ</a> <a id="2477" class="Symbol">→</a> <a id="2479" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2485" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a>
<a id="2498" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2458" class="Function">toUnitInterval</a> <a id="2513" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2513" class="Bound">x</a> <a id="2515" class="Keyword">with</a> <a id="2520" href="Ledger.Conway.Types.Numeric.UnitInterval.html#744" class="Function">isInUnitInterval</a> <a id="2537" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2513" class="Bound">x</a>
<a id="2539" class="Symbol">...</a> <a id="2543" class="Symbol">|</a> <a id="2545" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="2548" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2548" class="Bound">¬p</a> <a id="2551" class="Symbol">=</a> <a id="2553" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2561" class="Symbol">...</a> <a id="2565" class="Symbol">|</a> <a id="2567" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="2571" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2571" class="Bound">p</a> <a id="2573" class="Symbol">=</a> <a id="2575" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2580" class="Symbol">(</a><a id="2581" class="Bound">x</a> <a id="2583" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="2585" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2587" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2571" class="Bound">p</a> <a id="2589" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="2590" class="Symbol">)</a>

<a id="2593" class="Comment">-- Helper function to make an element of the Refinement type</a>
<a id="2654" class="Comment">-- that is useful in the case where Agda can infer the evidence</a>
<a id="2718" class="Comment">-- automatically by computation.</a>
<a id="2751" class="Comment">-- Usage example:  mkUnitInterval (+ 2 / 10)</a>
<a id="mkUnitInterval"></a><a id="2796" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2796" class="Function">mkUnitInterval</a> <a id="2811" class="Symbol">:</a> <a id="2813" class="Symbol">∀</a> <a id="2815" class="Symbol">(</a><a id="2816" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2816" class="Bound">x</a> <a id="2818" class="Symbol">:</a> <a id="2820" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="2821" class="Symbol">)</a> <a id="2823" class="Symbol">→</a> <a id="2825" class="Symbol">{</a><a id="2826" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="2828" class="Symbol">(</a><a id="2829" href="Relation.Nullary.Decidable.Core.html#1927" class="Field">does</a> <a id="2834" class="Symbol">(</a><a id="2835" href="Ledger.Conway.Types.Numeric.UnitInterval.html#744" class="Function">isInUnitInterval</a> <a id="2852" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2816" class="Bound">x</a><a id="2853" class="Symbol">))}</a> <a id="2857" class="Symbol">→</a> <a id="2859" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a>
<a id="2872" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2796" class="Function">mkUnitInterval</a> <a id="2887" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2887" class="Bound">x</a> <a id="2889" class="Symbol">{</a><a id="2890" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2890" class="Bound">evidence</a><a id="2898" class="Symbol">}</a> <a id="2900" class="Keyword">with</a> <a id="2905" href="Ledger.Conway.Types.Numeric.UnitInterval.html#744" class="Function">isInUnitInterval</a> <a id="2922" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2887" class="Bound">x</a> <a id="2924" class="Keyword">in</a> <a id="2927" class="Argument">eq</a>
<a id="2930" class="Symbol">...</a> <a id="2934" class="Symbol">|</a> <a id="2936" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="2940" class="Symbol">_</a> <a id="2942" class="Keyword">rewrite</a> <a id="2950" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="2955" href="Relation.Nullary.Decidable.Core.html#1927" class="Field">does</a> <a id="2960" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2927" class="Bound">eq</a> <a id="2963" class="Symbol">=</a> <a id="2965" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="2972" class="Bound">evidence</a>
<a id="2981" class="Symbol">...</a> <a id="2985" class="Symbol">|</a> <a id="2987" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="2991" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2991" class="Bound">p</a> <a id="2993" class="Symbol">=</a> <a id="2995" class="Bound">x</a> <a id="2997" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="2999" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3001" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2991" class="Bound">p</a> <a id="3003" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a>

<a id="3006" class="Comment">-- Clamp a rational number to the unit interval.</a>
<a id="3055" class="Comment">-- Values below 0 or above 1 are set to 0 or 1, respectively.</a>
<a id="clamp"></a><a id="3117" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3117" class="Function">clamp</a> <a id="3123" class="Symbol">:</a> <a id="3125" href="Data.Rational.Base.html#1342" class="Record">ℚ</a> <a id="3127" class="Symbol">→</a> <a id="3129" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a>
<a id="3142" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3117" class="Function">clamp</a> <a id="3148" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3148" class="Bound">x</a> <a id="3150" class="Keyword">with</a> <a id="3155" class="Number">0</a> <a id="3157" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="3160" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3148" class="Bound">x</a>
<a id="3162" class="Symbol">...</a> <a id="3166" class="Symbol">|</a> <a id="3168" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="3172" class="Symbol">_</a> <a id="3174" class="Symbol">=</a> <a id="3176" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2796" class="Function">mkUnitInterval</a> <a id="3191" class="Number">0</a>
<a id="3193" class="Symbol">...</a> <a id="3197" class="Symbol">|</a> <a id="3199" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="3203" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3203" class="Bound">0≤x</a> <a id="3207" class="Keyword">with</a> <a id="3212" class="Bound">x</a> <a id="3214" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="3217" class="Number">1</a>
<a id="3219" class="Symbol">...</a>     <a id="3227" class="Symbol">|</a> <a id="3229" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="3233" class="Symbol">_</a>   <a id="3237" class="Symbol">=</a> <a id="3239" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2796" class="Function">mkUnitInterval</a> <a id="3254" class="Number">1</a>
<a id="3256" class="Symbol">...</a>     <a id="3264" class="Symbol">|</a> <a id="3266" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="3270" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3270" class="Bound">x≤1</a> <a id="3274" class="Symbol">=</a> <a id="3276" class="Symbol">(</a><a id="3277" class="Bound">x</a> <a id="3279" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="3281" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3283" class="Bound">0≤x</a> <a id="3287" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3289" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3270" class="Bound">x≤1</a> <a id="3293" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3294" class="Symbol">)</a>

<a id="3297" class="Comment">-- UnitInterval Properties</a>

<a id="3325" class="Comment">-- to/from is the identity</a>
<a id="prop-toUnitInterval-fromUnitInterval"></a><a id="3352" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3352" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3389" class="Symbol">:</a> <a id="3391" class="Symbol">∀</a> <a id="3393" class="Symbol">(</a><a id="3394" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3394" class="Bound">x</a> <a id="3396" class="Symbol">:</a> <a id="3398" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2124" class="Function">UnitInterval</a><a id="3410" class="Symbol">)</a>
  <a id="3414" class="Symbol">→</a> <a id="3416" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2458" class="Function">toUnitInterval</a> <a id="3431" class="Symbol">(</a><a id="3432" href="Ledger.Conway.Types.Numeric.UnitInterval.html#2341" class="Function">fromUnitInterval</a> <a id="3449" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3394" class="Bound">x</a><a id="3450" class="Symbol">)</a> <a id="3452" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3454" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3459" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3394" class="Bound">x</a>

<a id="3462" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3352" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3499" class="Symbol">(</a><a id="3500" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3500" class="Bound">x</a> <a id="3502" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="3504" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3506" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3506" class="Bound">p0</a> <a id="3509" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3510" class="Symbol">)</a> <a id="3512" class="Keyword">with</a> <a id="3517" href="Ledger.Conway.Types.Numeric.UnitInterval.html#744" class="Function">isInUnitInterval</a> <a id="3534" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3500" class="Bound">x</a>
<a id="3536" class="Symbol">...</a> <a id="3540" class="Symbol">|</a> <a id="3542" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="3545" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3545" class="Bound">¬p</a> <a id="3548" class="Symbol">=</a> <a id="3550" href="Data.Empty.html#1129" class="Function">⊥-elim-irr</a> <a id="3561" class="Symbol">(</a><a id="3562" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3545" class="Bound">¬p</a> <a id="3565" class="Bound">p0</a><a id="3567" class="Symbol">)</a>
<a id="3569" class="Symbol">...</a> <a id="3573" class="Symbol">|</a> <a id="3575" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="3579" href="Ledger.Conway.Types.Numeric.UnitInterval.html#3579" class="Bound">p</a> <a id="3581" class="Symbol">=</a> <a id="3583" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre></body></html>