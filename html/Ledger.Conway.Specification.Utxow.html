<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Utxow</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="75" class="Keyword">open</a> <a id="80" class="Keyword">import</a> <a id="87" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a>

<a id="126" class="Keyword">module</a> <a id="133" href="Ledger.Conway.Specification.Utxow.html" class="Module">Ledger.Conway.Specification.Utxow</a>
  <a id="169" class="Symbol">(</a><a id="170" href="Ledger.Conway.Specification.Utxow.html#170" class="Bound">txs</a> <a id="174" class="Symbol">:</a> <a id="176" href="Ledger.Core.Specification.Transaction.html#896" class="Record">TransactionStructure</a><a id="196" class="Symbol">)</a> <a id="198" class="Symbol">(</a><a id="199" class="Keyword">open</a> <a id="204" href="Ledger.Core.Specification.Transaction.html#896" class="Module">TransactionStructure</a> <a id="225" href="Ledger.Conway.Specification.Utxow.html#170" class="Bound">txs</a><a id="228" class="Symbol">)</a>
  <a id="232" class="Symbol">(</a><a id="233" href="Ledger.Conway.Specification.Utxow.html#233" class="Bound">abs</a> <a id="237" class="Symbol">:</a> <a id="239" href="Ledger.Conway.Specification.Abstract.html#653" class="Record">AbstractFunctions</a> <a id="257" href="Ledger.Conway.Specification.Utxow.html#170" class="Bound">txs</a><a id="260" class="Symbol">)</a>
  <a id="264" class="Keyword">where</a>

<a id="271" class="Keyword">open</a> <a id="276" class="Keyword">import</a> <a id="283" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="345" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Ledger.Conway.Specification.Script.Validation.html" class="Module">Ledger.Conway.Specification.Script.Validation</a> <a id="416" href="Ledger.Conway.Specification.Utxow.html#170" class="Bound">txs</a> <a id="420" href="Ledger.Conway.Specification.Utxow.html#233" class="Bound">abs</a>
<a id="424" class="Keyword">open</a> <a id="429" class="Keyword">import</a> <a id="436" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a> <a id="476" href="Ledger.Conway.Specification.Utxow.html#170" class="Bound">txs</a> <a id="480" href="Ledger.Conway.Specification.Utxow.html#233" class="Bound">abs</a>
<a id="484" class="Keyword">open</a> <a id="489" class="Keyword">import</a> <a id="496" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="529" href="Ledger.Conway.Specification.Utxow.html#170" class="Bound">txs</a> <a id="533" href="Ledger.Conway.Specification.Utxow.html#233" class="Bound">abs</a>

<a id="538" class="Keyword">open</a> <a id="543" class="Keyword">import</a> <a id="550" href="Ledger.Core.Specification.Crypto.html" class="Module">Ledger.Core.Specification.Crypto</a>


<a id="585" class="Keyword">module</a> <a id="592" href="Ledger.Conway.Specification.Utxow.html#592" class="Module">_</a> <a id="594" class="Symbol">(</a><a id="595" href="Ledger.Conway.Specification.Utxow.html#595" class="Bound">o</a> <a id="597" class="Symbol">:</a> <a id="599" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a><a id="604" class="Symbol">)</a> <a id="606" class="Keyword">where</a>
  <a id="614" href="Ledger.Conway.Specification.Utxow.html#614" class="Function">d</a> <a id="616" class="Symbol">=</a> <a id="618" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="624" class="Symbol">(</a><a id="625" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="631" class="Symbol">(</a><a id="632" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="638" href="Ledger.Conway.Specification.Utxow.html#595" class="Bound">o</a><a id="639" class="Symbol">))</a>
  <a id="644" class="Keyword">data</a> <a id="649" href="Ledger.Conway.Specification.Utxow.html#649" class="Datatype">HasInlineDatum</a> <a id="664" class="Symbol">:</a> <a id="666" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="670" class="Keyword">where</a>
    <a id="680" href="Ledger.Conway.Specification.Utxow.html#680" class="InductiveConstructor">InlineDatum</a>  <a id="693" class="Symbol">:</a> <a id="695" class="Symbol">∀</a> <a id="697" class="Symbol">{</a><a id="698" href="Ledger.Conway.Specification.Utxow.html#698" class="Bound">d&#39;</a><a id="700" class="Symbol">}</a> <a id="702" class="Symbol">→</a> <a id="704" href="Ledger.Conway.Specification.Utxow.html#614" class="Function">d</a> <a id="706" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="708" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="713" class="Symbol">(</a><a id="714" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="719" href="Ledger.Conway.Specification.Utxow.html#698" class="Bound">d&#39;</a><a id="721" class="Symbol">)</a> <a id="723" class="Symbol">→</a> <a id="725" href="Ledger.Conway.Specification.Utxow.html#649" class="Datatype">HasInlineDatum</a>

<a id="741" class="Keyword">instance</a>
  <a id="Dec-HasInlineDatum"></a><a id="752" href="Ledger.Conway.Specification.Utxow.html#752" class="Function">Dec-HasInlineDatum</a> <a id="771" class="Symbol">:</a> <a id="773" class="Symbol">∀</a> <a id="775" class="Symbol">{</a><a id="776" href="Ledger.Conway.Specification.Utxow.html#776" class="Bound">o</a><a id="777" class="Symbol">}</a> <a id="779" class="Symbol">→</a> <a id="781" href="Ledger.Conway.Specification.Utxow.html#649" class="Datatype">HasInlineDatum</a> <a id="796" href="Ledger.Conway.Specification.Utxow.html#776" class="Bound">o</a> <a id="798" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
  <a id="802" href="Ledger.Conway.Specification.Utxow.html#752" class="Function">Dec-HasInlineDatum</a> <a id="821" class="Symbol">{_</a> <a id="824" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="826" class="Symbol">_</a> <a id="828" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="830" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="835" class="Symbol">(</a><a id="836" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="841" href="Ledger.Conway.Specification.Utxow.html#841" class="Bound">x</a><a id="842" class="Symbol">)</a> <a id="844" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="846" class="Symbol">_}</a> <a id="849" class="Symbol">=</a> <a id="851" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="853" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="857" class="Symbol">(</a><a id="858" href="Ledger.Conway.Specification.Utxow.html#680" class="InductiveConstructor">InlineDatum</a> <a id="870" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="874" class="Symbol">)</a>
  <a id="878" href="Ledger.Conway.Specification.Utxow.html#752" class="Function">Dec-HasInlineDatum</a> <a id="897" class="Symbol">{_</a> <a id="900" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="902" class="Symbol">_</a> <a id="904" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="906" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="911" class="Symbol">(</a><a id="912" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="917" href="Ledger.Conway.Specification.Utxow.html#917" class="Bound">x</a><a id="918" class="Symbol">)</a> <a id="920" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="922" class="Symbol">_}</a> <a id="925" class="Symbol">=</a> <a id="927" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="929" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="932" class="Symbol">λ</a> <a id="934" class="Keyword">where</a>
    <a id="944" class="Symbol">(</a><a id="945" href="Ledger.Conway.Specification.Utxow.html#680" class="InductiveConstructor">InlineDatum</a> <a id="957" href="Ledger.Conway.Specification.Utxow.html#957" class="Bound">x</a><a id="958" class="Symbol">)</a> <a id="960" class="Symbol">→</a> <a id="962" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="967" href="Ledger.Conway.Specification.Utxow.html#957" class="Bound">x</a> <a id="969" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="972" class="Symbol">λ</a> <a id="974" class="Symbol">()</a>
  <a id="979" href="Ledger.Conway.Specification.Utxow.html#752" class="Function">Dec-HasInlineDatum</a> <a id="998" class="Symbol">{_</a> <a id="1001" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1003" class="Symbol">_</a> <a id="1005" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1007" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1015" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1017" class="Symbol">_}</a> <a id="1020" class="Symbol">=</a> <a id="1022" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="1024" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1027" class="Symbol">λ</a> <a id="1029" class="Keyword">where</a>
    <a id="1039" class="Symbol">(</a><a id="1040" href="Ledger.Conway.Specification.Utxow.html#680" class="InductiveConstructor">InlineDatum</a> <a id="1052" href="Ledger.Conway.Specification.Utxow.html#1052" class="Bound">x</a><a id="1053" class="Symbol">)</a> <a id="1055" class="Symbol">→</a> <a id="1057" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="1062" href="Ledger.Conway.Specification.Utxow.html#1052" class="Bound">x</a> <a id="1064" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="1067" class="Symbol">λ</a> <a id="1069" class="Symbol">()</a>

<a id="1073" class="Keyword">module</a> <a id="1080" href="Ledger.Conway.Specification.Utxow.html#1080" class="Module">_</a> <a id="1082" class="Symbol">(</a><a id="1083" href="Ledger.Conway.Specification.Utxow.html#1083" class="Bound">txb</a> <a id="1087" class="Symbol">:</a> <a id="1089" href="Ledger.Conway.Specification.Transaction.html#352" class="Record">TxBody</a><a id="1095" class="Symbol">)</a> <a id="1097" class="Symbol">(</a><a id="1098" class="Keyword">let</a> <a id="1102" class="Keyword">open</a> <a id="1107" href="Ledger.Conway.Specification.Transaction.html#352" class="Module">TxBody</a> <a id="1114" href="Ledger.Conway.Specification.Utxow.html#1083" class="Bound">txb</a><a id="1117" class="Symbol">)</a> <a id="1119" class="Keyword">where</a>
  <a id="1127" class="Keyword">data</a> <a id="1132" href="Ledger.Conway.Specification.Utxow.html#1132" class="Datatype">UsesV3Features</a> <a id="1147" class="Symbol">:</a> <a id="1149" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1153" class="Keyword">where</a>
    <a id="1163" href="Ledger.Conway.Specification.Utxow.html#1163" class="InductiveConstructor">HasVotes</a> <a id="1172" class="Symbol">:</a> <a id="1174" href="Ledger.Conway.Specification.Transaction.html#793" class="Field">txGovVotes</a> <a id="1185" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="1187" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1190" class="Symbol">→</a> <a id="1192" href="Ledger.Conway.Specification.Utxow.html#1132" class="Datatype">UsesV3Features</a>
    <a id="1211" href="Ledger.Conway.Specification.Utxow.html#1211" class="InductiveConstructor">HasProps</a> <a id="1220" class="Symbol">:</a> <a id="1222" href="Ledger.Conway.Specification.Transaction.html#833" class="Field">txGovProposals</a> <a id="1237" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="1239" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1242" class="Symbol">→</a> <a id="1244" href="Ledger.Conway.Specification.Utxow.html#1132" class="Datatype">UsesV3Features</a>
    <a id="1263" href="Ledger.Conway.Specification.Utxow.html#1263" class="InductiveConstructor">HasDonation</a> <a id="1275" class="Symbol">:</a> <a id="1277" href="Ledger.Conway.Specification.Transaction.html#756" class="Field">txDonation</a> <a id="1288" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="1290" class="Number">0</a> <a id="1292" class="Symbol">→</a> <a id="1294" href="Ledger.Conway.Specification.Utxow.html#1132" class="Datatype">UsesV3Features</a>
    <a id="1313" href="Ledger.Conway.Specification.Utxow.html#1313" class="InductiveConstructor">HasTreasure</a> <a id="1325" class="Symbol">:</a> <a id="1327" href="Ledger.Conway.Specification.Transaction.html#918" class="Field">currentTreasury</a> <a id="1343" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="1345" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Ledger.Conway.Specification.Utxow.html#1132" class="Datatype">UsesV3Features</a>

<a id="1371" class="Keyword">instance</a>
  <a id="Dec-UsesV3Features"></a><a id="1382" href="Ledger.Conway.Specification.Utxow.html#1382" class="Function">Dec-UsesV3Features</a> <a id="1401" class="Symbol">:</a> <a id="1403" class="Symbol">∀</a> <a id="1405" class="Symbol">{</a><a id="1406" href="Ledger.Conway.Specification.Utxow.html#1406" class="Bound">txb</a><a id="1409" class="Symbol">}</a> <a id="1411" class="Symbol">→</a> <a id="1413" href="Ledger.Conway.Specification.Utxow.html#1132" class="Datatype">UsesV3Features</a> <a id="1428" href="Ledger.Conway.Specification.Utxow.html#1406" class="Bound">txb</a> <a id="1432" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
  <a id="1436" href="Ledger.Conway.Specification.Utxow.html#1382" class="Function">Dec-UsesV3Features</a> <a id="1455" class="Symbol">{</a><a id="1456" class="Keyword">record</a> <a id="1463" class="Symbol">{</a> <a id="1465" href="Ledger.Conway.Specification.Transaction.html#793" class="Field">txGovVotes</a> <a id="1476" class="Symbol">=</a> <a id="1478" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1481" class="Symbol">;</a> <a id="1483" href="Ledger.Conway.Specification.Transaction.html#833" class="Field">txGovProposals</a> <a id="1498" class="Symbol">=</a> <a id="1500" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1503" class="Symbol">;</a> <a id="1505" href="Ledger.Conway.Specification.Transaction.html#756" class="Field">txDonation</a> <a id="1516" class="Symbol">=</a> <a id="1518" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="1523" class="Symbol">;</a> <a id="1525" href="Ledger.Conway.Specification.Transaction.html#918" class="Field">currentTreasury</a> <a id="1541" class="Symbol">=</a> <a id="1543" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1551" class="Symbol">}}</a>
    <a id="1558" class="Symbol">=</a> <a id="1560" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="1562" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1565" class="Symbol">λ</a> <a id="1567" class="Keyword">where</a> <a id="1573" class="Symbol">(</a><a id="1574" href="Ledger.Conway.Specification.Utxow.html#1163" class="InductiveConstructor">HasVotes</a> <a id="1583" href="Ledger.Conway.Specification.Utxow.html#1583" class="Bound">x</a><a id="1584" class="Symbol">)</a>    <a id="1589" class="Symbol">→</a> <a id="1591" href="Ledger.Conway.Specification.Utxow.html#1583" class="Bound">x</a> <a id="1593" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                   <a id="1617" class="Symbol">(</a><a id="1618" href="Ledger.Conway.Specification.Utxow.html#1211" class="InductiveConstructor">HasProps</a> <a id="1627" href="Ledger.Conway.Specification.Utxow.html#1627" class="Bound">x</a><a id="1628" class="Symbol">)</a>    <a id="1633" class="Symbol">→</a> <a id="1635" href="Ledger.Conway.Specification.Utxow.html#1627" class="Bound">x</a> <a id="1637" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                   <a id="1661" class="Symbol">(</a><a id="1662" href="Ledger.Conway.Specification.Utxow.html#1263" class="InductiveConstructor">HasDonation</a> <a id="1674" href="Ledger.Conway.Specification.Utxow.html#1674" class="Bound">x</a><a id="1675" class="Symbol">)</a> <a id="1677" class="Symbol">→</a> <a id="1679" href="Ledger.Conway.Specification.Utxow.html#1674" class="Bound">x</a> <a id="1681" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                   <a id="1705" class="Symbol">(</a><a id="1706" href="Ledger.Conway.Specification.Utxow.html#1313" class="InductiveConstructor">HasTreasure</a> <a id="1718" href="Ledger.Conway.Specification.Utxow.html#1718" class="Bound">x</a><a id="1719" class="Symbol">)</a> <a id="1721" class="Symbol">→</a> <a id="1723" href="Ledger.Conway.Specification.Utxow.html#1718" class="Bound">x</a> <a id="1725" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="1732" href="Ledger.Conway.Specification.Utxow.html#1382" class="Function">Dec-UsesV3Features</a> <a id="1751" class="Symbol">{</a><a id="1752" class="Keyword">record</a> <a id="1759" class="Symbol">{</a> <a id="1761" href="Ledger.Conway.Specification.Transaction.html#793" class="Field">txGovVotes</a> <a id="1772" class="Symbol">=</a> <a id="1774" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1777" class="Symbol">;</a> <a id="1779" href="Ledger.Conway.Specification.Transaction.html#833" class="Field">txGovProposals</a> <a id="1794" class="Symbol">=</a> <a id="1796" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1799" class="Symbol">;</a> <a id="1801" href="Ledger.Conway.Specification.Transaction.html#756" class="Field">txDonation</a> <a id="1812" class="Symbol">=</a> <a id="1814" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="1819" class="Symbol">;</a> <a id="1821" href="Ledger.Conway.Specification.Transaction.html#918" class="Field">currentTreasury</a> <a id="1837" class="Symbol">=</a> <a id="1839" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1844" href="Ledger.Conway.Specification.Utxow.html#1844" class="Bound">x</a> <a id="1846" class="Symbol">}}</a>
    <a id="1853" class="Symbol">=</a> <a id="1855" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="1857" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1861" class="Symbol">(</a><a id="1862" href="Ledger.Conway.Specification.Utxow.html#1313" class="InductiveConstructor">HasTreasure</a> <a id="1874" class="Symbol">(λ</a> <a id="1877" class="Symbol">()))</a>
  <a id="1884" href="Ledger.Conway.Specification.Utxow.html#1382" class="Function">Dec-UsesV3Features</a> <a id="1903" class="Symbol">{</a><a id="1904" class="Keyword">record</a> <a id="1911" class="Symbol">{</a> <a id="1913" href="Ledger.Conway.Specification.Transaction.html#793" class="Field">txGovVotes</a> <a id="1924" class="Symbol">=</a> <a id="1926" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1929" class="Symbol">;</a> <a id="1931" href="Ledger.Conway.Specification.Transaction.html#833" class="Field">txGovProposals</a> <a id="1946" class="Symbol">=</a> <a id="1948" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1951" class="Symbol">;</a> <a id="1953" href="Ledger.Conway.Specification.Transaction.html#756" class="Field">txDonation</a> <a id="1964" class="Symbol">=</a> <a id="1966" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1970" href="Ledger.Conway.Specification.Utxow.html#1970" class="Bound">txDonation</a> <a id="1981" class="Symbol">}}</a>
    <a id="1988" class="Symbol">=</a> <a id="1990" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="1992" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1996" class="Symbol">(</a><a id="1997" href="Ledger.Conway.Specification.Utxow.html#1263" class="InductiveConstructor">HasDonation</a> <a id="2009" class="Symbol">(λ</a> <a id="2012" class="Symbol">()))</a>
  <a id="2019" href="Ledger.Conway.Specification.Utxow.html#1382" class="CatchallClause Function">Dec-UsesV3Features</a><a id="2037" class="CatchallClause"> </a><a id="2038" class="CatchallClause Symbol">{</a><a id="2039" class="CatchallClause Keyword">record</a><a id="2045" class="CatchallClause"> </a><a id="2046" class="CatchallClause Symbol">{</a><a id="2047" class="CatchallClause"> </a><a id="2048" href="Ledger.Conway.Specification.Transaction.html#793" class="CatchallClause Field">txGovVotes</a><a id="2058" class="CatchallClause"> </a><a id="2059" class="CatchallClause Symbol">=</a><a id="2060" class="CatchallClause"> </a><a id="2061" href="Agda.Builtin.List.html#184" class="CatchallClause InductiveConstructor">[]</a><a id="2063" class="CatchallClause"> </a><a id="2064" class="CatchallClause Symbol">;</a><a id="2065" class="CatchallClause"> </a><a id="2066" href="Ledger.Conway.Specification.Transaction.html#833" class="CatchallClause Field">txGovProposals</a><a id="2080" class="CatchallClause"> </a><a id="2081" class="CatchallClause Symbol">=</a><a id="2082" class="CatchallClause"> </a><a id="2083" href="Ledger.Conway.Specification.Utxow.html#2083" class="CatchallClause Bound">x</a><a id="2084" class="CatchallClause"> </a><a id="2085" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="2086" class="CatchallClause"> </a><a id="2087" href="Ledger.Conway.Specification.Utxow.html#2087" class="CatchallClause Bound">txGovProposals</a><a id="2101" class="CatchallClause"> </a><a id="2102" class="CatchallClause Symbol">}}</a> <a id="2105" class="Symbol">=</a> <a id="2107" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="2109" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2113" class="Symbol">(</a><a id="2114" href="Ledger.Conway.Specification.Utxow.html#1211" class="InductiveConstructor">HasProps</a> <a id="2123" class="Symbol">(λ</a> <a id="2126" class="Symbol">()))</a>
  <a id="2133" href="Ledger.Conway.Specification.Utxow.html#1382" class="CatchallClause Function">Dec-UsesV3Features</a><a id="2151" class="CatchallClause"> </a><a id="2152" class="CatchallClause Symbol">{</a><a id="2153" class="CatchallClause Keyword">record</a><a id="2159" class="CatchallClause"> </a><a id="2160" class="CatchallClause Symbol">{</a><a id="2161" class="CatchallClause"> </a><a id="2162" href="Ledger.Conway.Specification.Transaction.html#793" class="CatchallClause Field">txGovVotes</a><a id="2172" class="CatchallClause"> </a><a id="2173" class="CatchallClause Symbol">=</a><a id="2174" class="CatchallClause"> </a><a id="2175" href="Ledger.Conway.Specification.Utxow.html#2175" class="CatchallClause Bound">x</a><a id="2176" class="CatchallClause"> </a><a id="2177" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="2178" class="CatchallClause"> </a><a id="2179" href="Ledger.Conway.Specification.Utxow.html#2179" class="CatchallClause Bound">txGovVotes</a><a id="2189" class="CatchallClause"> </a><a id="2190" class="CatchallClause Symbol">}}</a> <a id="2193" class="Symbol">=</a> <a id="2195" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="2197" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2201" class="Symbol">(</a><a id="2202" href="Ledger.Conway.Specification.Utxow.html#1163" class="InductiveConstructor">HasVotes</a> <a id="2211" class="Symbol">(λ</a> <a id="2214" class="Symbol">()))</a>

<a id="languages"></a><a id="2220" href="Ledger.Conway.Specification.Utxow.html#2220" class="Function">languages</a> <a id="2230" class="Symbol">:</a> <a id="2232" href="Ledger.Conway.Specification.Transaction.html#1721" class="Record">Tx</a> <a id="2235" class="Symbol">→</a> <a id="2237" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a> <a id="2242" class="Symbol">→</a> <a id="2244" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2246" href="Ledger.Core.Specification.Script.Base.html#965" class="Function">Language</a>
<a id="2255" href="Ledger.Conway.Specification.Utxow.html#2220" class="Function">languages</a> <a id="2265" href="Ledger.Conway.Specification.Utxow.html#2265" class="Bound">tx</a> <a id="2268" href="Ledger.Conway.Specification.Utxow.html#2268" class="Bound">utxo</a> <a id="2273" class="Symbol">=</a> <a id="2275" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="2286" href="Ledger.Conway.Specification.Utxow.html#2330" class="Function">getLanguage</a> <a id="2298" class="Symbol">(</a><a id="2299" href="Ledger.Conway.Specification.Transaction.html#2767" class="Function">txscripts</a> <a id="2309" href="Ledger.Conway.Specification.Utxow.html#2265" class="Bound">tx</a> <a id="2312" href="Ledger.Conway.Specification.Utxow.html#2268" class="Bound">utxo</a><a id="2316" class="Symbol">)</a>
  <a id="2320" class="Keyword">where</a>
    <a id="2330" href="Ledger.Conway.Specification.Utxow.html#2330" class="Function">getLanguage</a> <a id="2342" class="Symbol">:</a> <a id="2344" href="Ledger.Core.Specification.Script.Base.html#2441" class="Function">Script</a> <a id="2351" class="Symbol">→</a> <a id="2353" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2359" href="Ledger.Core.Specification.Script.Base.html#965" class="Function">Language</a>
    <a id="2372" href="Ledger.Conway.Specification.Utxow.html#2330" class="Function">getLanguage</a> <a id="2384" class="Symbol">(</a><a id="2385" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2390" class="Symbol">_)</a> <a id="2393" class="Symbol">=</a> <a id="2395" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="2407" href="Ledger.Conway.Specification.Utxow.html#2330" class="Function">getLanguage</a> <a id="2419" class="Symbol">(</a><a id="2420" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2425" href="Ledger.Conway.Specification.Utxow.html#2425" class="Bound">s</a><a id="2426" class="Symbol">)</a> <a id="2428" class="Symbol">=</a> <a id="2430" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2435" class="Symbol">(</a><a id="2436" href="Ledger.Core.Specification.Script.Base.html#1962" class="Function">language</a> <a id="2445" href="Ledger.Conway.Specification.Utxow.html#2425" class="Bound">s</a><a id="2446" class="Symbol">)</a>


<a id="allowedLanguages"></a><a id="2450" href="Ledger.Conway.Specification.Utxow.html#2450" class="Function">allowedLanguages</a> <a id="2467" class="Symbol">:</a> <a id="2469" href="Ledger.Conway.Specification.Transaction.html#1721" class="Record">Tx</a> <a id="2472" class="Symbol">→</a> <a id="2474" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a> <a id="2479" class="Symbol">→</a> <a id="2481" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2483" href="Ledger.Core.Specification.Script.Base.html#965" class="Function">Language</a>
<a id="2492" href="Ledger.Conway.Specification.Utxow.html#2450" class="Function">allowedLanguages</a> <a id="2509" href="Ledger.Conway.Specification.Utxow.html#2509" class="Bound">tx</a> <a id="2512" href="Ledger.Conway.Specification.Utxow.html#2512" class="Bound">utxo</a> <a id="2517" class="Symbol">=</a>
  <a id="2521" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="2524" class="Symbol">(</a><a id="2525" href="Class.IsSet.html#736" class="Function">∃[</a> <a id="2528" href="Ledger.Conway.Specification.Utxow.html#2528" class="Bound">o</a> <a id="2530" href="Class.IsSet.html#736" class="Function">∈</a> <a id="2532" href="Ledger.Conway.Specification.Utxow.html#2831" class="Function">os</a> <a id="2535" href="Class.IsSet.html#736" class="Function">]</a> <a id="2537" href="Ledger.Core.Specification.Address.html#3147" class="Datatype">isBootstrapAddr</a> <a id="2553" class="Symbol">(</a><a id="2554" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2560" href="Ledger.Conway.Specification.Utxow.html#2528" class="Bound">o</a><a id="2561" class="Symbol">))</a>
    <a id="2568" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="2573" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="2577" href="Class.ToBool.html#342" class="Function Operator">else</a> <a id="2582" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="2585" href="Ledger.Conway.Specification.Utxow.html#1132" class="Datatype">UsesV3Features</a> <a id="2600" href="Ledger.Conway.Specification.Utxow.html#2792" class="Function">txb</a>
    <a id="2608" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="2613" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2622" class="Symbol">(</a><a id="2623" href="Ledger.Core.Specification.Script.Base.html#1057" class="Function">PlutusV3</a> <a id="2632" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2634" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2636" class="Symbol">)</a>
  <a id="2640" href="Class.ToBool.html#342" class="Function Operator">else</a> <a id="2645" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="2648" href="Class.IsSet.html#736" class="Function">∃[</a> <a id="2651" href="Ledger.Conway.Specification.Utxow.html#2651" class="Bound">o</a> <a id="2653" href="Class.IsSet.html#736" class="Function">∈</a> <a id="2655" href="Ledger.Conway.Specification.Utxow.html#2831" class="Function">os</a> <a id="2658" href="Class.IsSet.html#736" class="Function">]</a> <a id="2660" href="Ledger.Conway.Specification.Utxow.html#649" class="Datatype">HasInlineDatum</a> <a id="2675" href="Ledger.Conway.Specification.Utxow.html#2651" class="Bound">o</a>
    <a id="2681" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="2686" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2695" class="Symbol">(</a><a id="2696" href="Ledger.Core.Specification.Script.Base.html#1048" class="Function">PlutusV2</a> <a id="2705" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2707" href="Ledger.Core.Specification.Script.Base.html#1057" class="Function">PlutusV3</a> <a id="2716" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2718" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2720" class="Symbol">)</a>
  <a id="2724" href="Class.ToBool.html#342" class="Function Operator">else</a>
    <a id="2733" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2742" class="Symbol">(</a><a id="2743" href="Ledger.Core.Specification.Script.Base.html#1039" class="Function">PlutusV1</a> <a id="2752" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2754" href="Ledger.Core.Specification.Script.Base.html#1048" class="Function">PlutusV2</a> <a id="2763" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2765" href="Ledger.Core.Specification.Script.Base.html#1057" class="Function">PlutusV3</a> <a id="2774" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2776" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2778" class="Symbol">)</a>
  <a id="2782" class="Keyword">where</a>
    <a id="2792" href="Ledger.Conway.Specification.Utxow.html#2792" class="Function">txb</a> <a id="2796" class="Symbol">=</a> <a id="2798" href="Ledger.Conway.Specification.Utxow.html#2509" class="Bound">tx</a> <a id="2801" class="Symbol">.</a><a id="2802" href="Ledger.Conway.Specification.Transaction.html#1749" class="Field">Tx.body</a><a id="2809" class="Symbol">;</a> <a id="2811" class="Keyword">open</a> <a id="2816" href="Ledger.Conway.Specification.Transaction.html#352" class="Module">TxBody</a> <a id="2823" href="Ledger.Conway.Specification.Utxow.html#2792" class="Function">txb</a>
    <a id="2831" href="Ledger.Conway.Specification.Utxow.html#2831" class="Function">os</a> <a id="2834" class="Symbol">=</a> <a id="2836" href="Class.IsSet.html#959" class="Function">range</a> <a id="2842" class="Symbol">(</a><a id="2843" href="Ledger.Conway.Specification.Utxo.html#2374" class="Function">outs</a> <a id="2848" href="Ledger.Conway.Specification.Utxow.html#2792" class="Function">txb</a><a id="2851" class="Symbol">)</a> <a id="2853" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="2855" href="Class.IsSet.html#959" class="Function">range</a> <a id="2861" class="Symbol">(</a><a id="2862" href="Ledger.Conway.Specification.Utxow.html#2512" class="Bound">utxo</a> <a id="2867" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="2869" class="Symbol">(</a><a id="2870" href="Ledger.Conway.Specification.Transaction.html#384" class="Function">txIns</a> <a id="2876" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="2878" href="Ledger.Conway.Specification.Transaction.html#418" class="Function">refInputs</a><a id="2887" class="Symbol">))</a>



<a id="2893" class="Keyword">private</a> <a id="2901" class="Keyword">variable</a>
  <a id="2912" href="Ledger.Conway.Specification.Utxow.html#2912" class="Generalizable">Γ</a>     <a id="2918" class="Symbol">:</a> <a id="2920" href="Ledger.Conway.Specification.Utxo.html#1199" class="Record">UTxOEnv</a>
  <a id="2930" href="Ledger.Conway.Specification.Utxow.html#2930" class="Generalizable">s</a> <a id="2932" href="Ledger.Conway.Specification.Utxow.html#2932" class="Generalizable">s&#39;</a>  <a id="2936" class="Symbol">:</a> <a id="2938" href="Ledger.Conway.Specification.Utxo.html#1308" class="Record">UTxOState</a>
  <a id="2950" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a>    <a id="2956" class="Symbol">:</a> <a id="2958" href="Ledger.Conway.Specification.Transaction.html#1721" class="Record">Tx</a>

<a id="2962" class="Keyword">open</a> <a id="2967" href="Ledger.Conway.Specification.Utxo.html#1308" class="Module">UTxOState</a>


<a id="2979" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOW⦈_"></a><a id="2984" href="Ledger.Conway.Specification.Utxow.html#2984" class="Datatype Operator">_⊢_⇀⦇_,UTXOW⦈_</a> <a id="2999" class="Symbol">:</a> <a id="3001" href="Ledger.Conway.Specification.Utxo.html#1199" class="Record">UTxOEnv</a> <a id="3009" class="Symbol">→</a> <a id="3011" href="Ledger.Conway.Specification.Utxo.html#1308" class="Record">UTxOState</a> <a id="3021" class="Symbol">→</a> <a id="3023" href="Ledger.Conway.Specification.Transaction.html#1721" class="Record">Tx</a> <a id="3026" class="Symbol">→</a> <a id="3028" href="Ledger.Conway.Specification.Utxo.html#1308" class="Record">UTxOState</a> <a id="3038" class="Symbol">→</a> <a id="3040" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3045" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXOW⦈_.UTXOW-inductive"></a><a id="3054" href="Ledger.Conway.Specification.Utxow.html#3054" class="InductiveConstructor">UTXOW-inductive</a> <a id="3070" class="Symbol">:</a>
    <a id="3076" class="Keyword">let</a>  <a id="3081" class="Keyword">open</a> <a id="3086" href="Ledger.Conway.Specification.Transaction.html#1721" class="Module">Tx</a> <a id="3089" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="3092" class="Keyword">renaming</a> <a id="3101" class="Symbol">(</a><a id="3102" href="Ledger.Conway.Specification.Transaction.html#1749" class="Field">body</a> <a id="3107" class="Symbol">to</a> <a id="3110" class="Field">txb</a><a id="3113" class="Symbol">);</a> <a id="3116" class="Keyword">open</a> <a id="3121" href="Ledger.Conway.Specification.Transaction.html#352" class="Module">TxBody</a> <a id="3128" href="Ledger.Conway.Specification.Utxow.html#3110" class="Function">txb</a><a id="3131" class="Symbol">;</a> <a id="3133" class="Keyword">open</a> <a id="3138" href="Ledger.Core.Specification.Transaction.html#2887" class="Module">TxWitnesses</a> <a id="3150" href="Ledger.Conway.Specification.Transaction.html#1771" class="Function">wits</a>
         <a id="3164" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a>                <a id="3184" class="Symbol">=</a> <a id="3186" href="Ledger.Conway.Specification.Utxow.html#2930" class="Generalizable">s</a> <a id="3188" class="Symbol">.</a><a id="3189" href="Ledger.Conway.Specification.Utxo.html#1372" class="Field">utxo</a>
         <a id="3203" href="Ledger.Conway.Specification.Utxow.html#3203" class="Bound">witsKeyHashes</a>       <a id="3223" class="Symbol">=</a> <a id="3225" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3230" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="3235" class="Symbol">(</a><a id="3236" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3240" href="Ledger.Core.Specification.Transaction.html#2928" class="Function">vkSigs</a><a id="3246" class="Symbol">)</a>
         <a id="3257" href="Ledger.Conway.Specification.Utxow.html#3257" class="Bound">witsScriptHashes</a>    <a id="3277" class="Symbol">=</a> <a id="3279" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3284" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="3289" href="Ledger.Core.Specification.Transaction.html#2956" class="Function">scripts</a>
         <a id="3306" href="Ledger.Conway.Specification.Utxow.html#3306" class="Bound">refScriptHashes</a>     <a id="3326" class="Symbol">=</a> <a id="3328" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3333" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="3338" class="Symbol">(</a><a id="3339" href="Ledger.Conway.Specification.Transaction.html#2597" class="Function">refScripts</a> <a id="3350" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="3353" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a><a id="3357" class="Symbol">)</a>
         <a id="3368" href="Ledger.Conway.Specification.Utxow.html#3368" class="Bound">neededScriptHashes</a>  <a id="3388" class="Symbol">=</a> <a id="3390" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3401" class="Symbol">(</a><a id="3402" href="Ledger.Core.Specification.Address.html#765" class="Function">isScriptObj</a>  <a id="3415" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3417" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3422" class="Symbol">)</a> <a id="3424" class="Symbol">(</a><a id="3425" href="Ledger.Conway.Specification.Script.Validation.html#2562" class="Function">credsNeeded</a> <a id="3437" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a> <a id="3442" href="Ledger.Conway.Specification.Utxow.html#3110" class="Function">txb</a><a id="3445" class="Symbol">)</a>
         <a id="3456" href="Ledger.Conway.Specification.Utxow.html#3456" class="Bound">neededVKeyHashes</a>    <a id="3476" class="Symbol">=</a> <a id="3478" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3489" class="Symbol">(</a><a id="3490" href="Ledger.Core.Specification.Address.html#484" class="Function">isKeyHashObj</a> <a id="3503" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3505" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3510" class="Symbol">)</a> <a id="3512" class="Symbol">(</a><a id="3513" href="Ledger.Conway.Specification.Script.Validation.html#2562" class="Function">credsNeeded</a> <a id="3525" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a> <a id="3530" href="Ledger.Conway.Specification.Utxow.html#3110" class="Function">txb</a><a id="3533" class="Symbol">)</a>
         <a id="3544" href="Ledger.Conway.Specification.Utxow.html#3544" class="Bound">txdatsHashes</a>        <a id="3564" class="Symbol">=</a> <a id="3566" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3571" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="3576" href="Ledger.Core.Specification.Transaction.html#2982" class="Function">txdats</a>
         <a id="3592" href="Ledger.Conway.Specification.Utxow.html#3592" class="Bound">inputsDataHashes</a>    <a id="3612" class="Symbol">=</a> <a id="3614" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3625" class="Symbol">(λ</a> <a id="3628" href="Ledger.Conway.Specification.Utxow.html#3628" class="Bound">txout</a> <a id="3634" class="Symbol">→</a>  <a id="3637" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="3640" href="Ledger.Conway.Specification.Script.Validation.html#3486" class="Function">txOutToP2Script</a> <a id="3656" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a> <a id="3661" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="3664" href="Ledger.Conway.Specification.Utxow.html#3628" class="Bound">txout</a>
                                                      <a id="3724" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="3729" href="Ledger.Conway.Specification.Script.Validation.html#3397" class="Function">txOutToDataHash</a> <a id="3745" href="Ledger.Conway.Specification.Utxow.html#3628" class="Bound">txout</a>
                                                      <a id="3805" href="Class.ToBool.html#342" class="Function Operator">else</a> <a id="3810" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="3817" class="Symbol">)</a> <a id="3819" class="Symbol">(</a><a id="3820" href="Class.IsSet.html#959" class="Function">range</a> <a id="3826" class="Symbol">(</a><a id="3827" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a> <a id="3832" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="3834" href="Ledger.Conway.Specification.Transaction.html#384" class="Function">txIns</a><a id="3839" class="Symbol">))</a>
         <a id="3851" href="Ledger.Conway.Specification.Utxow.html#3851" class="Bound">refInputsDataHashes</a> <a id="3871" class="Symbol">=</a> <a id="3873" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3884" href="Ledger.Conway.Specification.Script.Validation.html#3397" class="Function">txOutToDataHash</a> <a id="3900" class="Symbol">(</a><a id="3901" href="Class.IsSet.html#959" class="Function">range</a> <a id="3907" class="Symbol">(</a><a id="3908" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a> <a id="3913" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="3915" href="Ledger.Conway.Specification.Transaction.html#418" class="Function">refInputs</a><a id="3924" class="Symbol">))</a>
         <a id="3936" href="Ledger.Conway.Specification.Utxow.html#3936" class="Bound">outputsDataHashes</a>   <a id="3956" class="Symbol">=</a> <a id="3958" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3969" href="Ledger.Conway.Specification.Script.Validation.html#3397" class="Function">txOutToDataHash</a> <a id="3985" class="Symbol">(</a><a id="3986" href="Class.IsSet.html#959" class="Function">range</a> <a id="3992" href="Ledger.Conway.Specification.Transaction.html#486" class="Function">txOuts</a><a id="3998" class="Symbol">)</a>
         <a id="4009" href="Ledger.Conway.Specification.Utxow.html#4009" class="Bound">nativeScripts</a>       <a id="4029" class="Symbol">=</a> <a id="4031" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="4042" href="Ledger.Core.Specification.Script.Base.html#2973" class="Function">toP1Script</a> <a id="4053" class="Symbol">(</a><a id="4054" href="Ledger.Conway.Specification.Transaction.html#2767" class="Function">txscripts</a> <a id="4064" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="4067" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a><a id="4071" class="Symbol">)</a>
    <a id="4077" class="Keyword">in</a>
    <a id="4084" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a>  <a id="4087" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="4090" href="Ledger.Conway.Specification.Utxow.html#4090" class="Bound">(</a><a id="4091" href="Ledger.Conway.Specification.Utxow.html#4091" class="Bound">vk</a> <a id="4094" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4096" href="Ledger.Conway.Specification.Utxow.html#4096" class="Bound">σ</a><a id="4097" href="Ledger.Conway.Specification.Utxow.html#4090" class="Bound">)</a> <a id="4099" href="Class.IsSet.html#576" class="Function">∈</a> <a id="4101" href="Ledger.Core.Specification.Transaction.html#2928" class="Function">vkSigs</a> <a id="4108" href="Class.IsSet.html#576" class="Function">]</a> <a id="4110" href="Ledger.Core.Specification.Crypto.html#719" class="Function">isSigned</a> <a id="4119" href="Ledger.Conway.Specification.Utxow.html#4091" class="Bound">vk</a> <a id="4122" class="Symbol">(</a><a id="4123" href="Ledger.Core.Specification.Transaction.html#1944" class="Field">txidBytes</a> <a id="4133" href="Ledger.Conway.Specification.Transaction.html#524" class="Function">txId</a><a id="4137" class="Symbol">)</a> <a id="4139" href="Ledger.Conway.Specification.Utxow.html#4096" class="Bound">σ</a>
    <a id="4145" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4148" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="4151" href="Ledger.Conway.Specification.Utxow.html#4151" class="Bound">s</a> <a id="4153" href="Class.IsSet.html#576" class="Function">∈</a> <a id="4155" href="Ledger.Conway.Specification.Utxow.html#4009" class="Bound">nativeScripts</a> <a id="4169" href="Class.IsSet.html#576" class="Function">]</a> <a id="4171" class="Symbol">(</a><a id="4172" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="4177" href="Ledger.Conway.Specification.Utxow.html#4151" class="Bound">s</a> <a id="4179" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="4181" href="Ledger.Conway.Specification.Utxow.html#3368" class="Bound">neededScriptHashes</a> <a id="4200" class="Symbol">→</a> <a id="4202" href="Ledger.Core.Specification.Script.Base.html#664" class="Function">validP1Script</a> <a id="4216" href="Ledger.Conway.Specification.Utxow.html#3203" class="Bound">witsKeyHashes</a> <a id="4230" href="Ledger.Conway.Specification.Transaction.html#665" class="Function">txVldt</a> <a id="4237" href="Ledger.Conway.Specification.Utxow.html#4151" class="Bound">s</a><a id="4238" class="Symbol">)</a>
    <a id="4244" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4247" href="Ledger.Conway.Specification.Utxow.html#3456" class="Bound">neededVKeyHashes</a> <a id="4264" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="4266" href="Ledger.Conway.Specification.Utxow.html#3203" class="Bound">witsKeyHashes</a>
    <a id="4284" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4287" href="Ledger.Conway.Specification.Utxow.html#3368" class="Bound">neededScriptHashes</a> <a id="4306" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="4308" href="Ledger.Conway.Specification.Utxow.html#3306" class="Bound">refScriptHashes</a> <a id="4324" href="Axiom.Set.html#2772" class="Function Operator">≡ᵉ</a> <a id="4327" href="Ledger.Conway.Specification.Utxow.html#3257" class="Bound">witsScriptHashes</a>
    <a id="4348" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4351" href="Ledger.Conway.Specification.Utxow.html#3592" class="Bound">inputsDataHashes</a> <a id="4368" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="4370" href="Ledger.Conway.Specification.Utxow.html#3544" class="Bound">txdatsHashes</a>
    <a id="4387" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4390" href="Ledger.Conway.Specification.Utxow.html#3544" class="Bound">txdatsHashes</a> <a id="4403" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="4405" href="Ledger.Conway.Specification.Utxow.html#3592" class="Bound">inputsDataHashes</a> <a id="4422" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4424" href="Ledger.Conway.Specification.Utxow.html#3936" class="Bound">outputsDataHashes</a> <a id="4442" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4444" href="Ledger.Conway.Specification.Utxow.html#3851" class="Bound">refInputsDataHashes</a>
    <a id="4468" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4471" href="Ledger.Conway.Specification.Utxow.html#2220" class="Function">languages</a> <a id="4481" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="4484" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a> <a id="4489" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="4491" href="Ledger.Conway.Specification.Utxow.html#2450" class="Function">allowedLanguages</a> <a id="4508" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="4511" href="Ledger.Conway.Specification.Utxow.html#3164" class="Bound">utxo</a>
    <a id="4520" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4523" href="Ledger.Conway.Specification.Transaction.html#716" class="Function">txADhash</a> <a id="4532" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4534" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="4538" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="4543" href="Ledger.Conway.Specification.Transaction.html#1835" class="Function">txAD</a>
    <a id="4552" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4555" href="Ledger.Conway.Specification.Utxow.html#2912" class="Generalizable">Γ</a> <a id="4557" href="Ledger.Conway.Specification.Utxo.html#2241" class="Datatype Operator">⊢</a> <a id="4559" href="Ledger.Conway.Specification.Utxow.html#2930" class="Generalizable">s</a> <a id="4561" href="Ledger.Conway.Specification.Utxo.html#2241" class="Datatype Operator">⇀⦇</a> <a id="4564" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="4567" href="Ledger.Conway.Specification.Utxo.html#2241" class="Datatype Operator">,UTXO⦈</a> <a id="4574" href="Ledger.Conway.Specification.Utxow.html#2932" class="Generalizable">s&#39;</a>
       <a id="4584" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
       <a id="4624" href="Ledger.Conway.Specification.Utxow.html#2912" class="Generalizable">Γ</a> <a id="4626" href="Ledger.Conway.Specification.Utxow.html#2984" class="Datatype Operator">⊢</a> <a id="4628" href="Ledger.Conway.Specification.Utxow.html#2930" class="Generalizable">s</a> <a id="4630" href="Ledger.Conway.Specification.Utxow.html#2984" class="Datatype Operator">⇀⦇</a> <a id="4633" href="Ledger.Conway.Specification.Utxow.html#2950" class="Generalizable">tx</a> <a id="4636" href="Ledger.Conway.Specification.Utxow.html#2984" class="Datatype Operator">,UTXOW⦈</a> <a id="4644" href="Ledger.Conway.Specification.Utxow.html#2932" class="Generalizable">s&#39;</a>


<a id="4649" class="Keyword">pattern</a> <a id="UTXOW-inductive⋯"></a><a id="4657" href="Ledger.Conway.Specification.Utxow.html#4657" class="InductiveConstructor">UTXOW-inductive⋯</a> <a id="4674" href="Ledger.Conway.Specification.Utxow.html#4725" class="Bound">p₁</a> <a id="4677" href="Ledger.Conway.Specification.Utxow.html#4730" class="Bound">p₂</a> <a id="4680" href="Ledger.Conway.Specification.Utxow.html#4735" class="Bound">p₃</a> <a id="4683" href="Ledger.Conway.Specification.Utxow.html#4740" class="Bound">p₄</a> <a id="4686" href="Ledger.Conway.Specification.Utxow.html#4745" class="Bound">p₅</a> <a id="4689" href="Ledger.Conway.Specification.Utxow.html#4750" class="Bound">p₆</a> <a id="4692" href="Ledger.Conway.Specification.Utxow.html#4755" class="Bound">p₇</a> <a id="4695" href="Ledger.Conway.Specification.Utxow.html#4760" class="Bound">p₈</a> <a id="4698" href="Ledger.Conway.Specification.Utxow.html#4765" class="Bound">h</a>
      <a id="4706" class="Symbol">=</a> <a id="4708" href="Ledger.Conway.Specification.Utxow.html#3054" class="InductiveConstructor">UTXOW-inductive</a> <a id="4724" class="Symbol">(</a><a id="4725" href="Ledger.Conway.Specification.Utxow.html#4725" class="Bound">p₁</a> <a id="4728" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4730" href="Ledger.Conway.Specification.Utxow.html#4730" class="Bound">p₂</a> <a id="4733" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4735" href="Ledger.Conway.Specification.Utxow.html#4735" class="Bound">p₃</a> <a id="4738" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4740" href="Ledger.Conway.Specification.Utxow.html#4740" class="Bound">p₄</a> <a id="4743" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4745" href="Ledger.Conway.Specification.Utxow.html#4745" class="Bound">p₅</a> <a id="4748" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4750" href="Ledger.Conway.Specification.Utxow.html#4750" class="Bound">p₆</a> <a id="4753" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4755" href="Ledger.Conway.Specification.Utxow.html#4755" class="Bound">p₇</a> <a id="4758" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4760" href="Ledger.Conway.Specification.Utxow.html#4760" class="Bound">p₈</a> <a id="4763" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4765" href="Ledger.Conway.Specification.Utxow.html#4765" class="Bound">h</a><a id="4766" class="Symbol">)</a>
<a id="4768" class="Keyword">pattern</a> <a id="UTXOW⇒UTXO"></a><a id="4776" href="Ledger.Conway.Specification.Utxow.html#4776" class="InductiveConstructor">UTXOW⇒UTXO</a> <a id="4787" href="Ledger.Conway.Specification.Utxow.html#4824" class="Bound">x</a> <a id="4789" class="Symbol">=</a> <a id="4791" href="Ledger.Conway.Specification.Utxow.html#4657" class="InductiveConstructor">UTXOW-inductive⋯</a> <a id="4808" class="Symbol">_</a> <a id="4810" class="Symbol">_</a> <a id="4812" class="Symbol">_</a> <a id="4814" class="Symbol">_</a> <a id="4816" class="Symbol">_</a> <a id="4818" class="Symbol">_</a> <a id="4820" class="Symbol">_</a> <a id="4822" class="Symbol">_</a> <a id="4824" href="Ledger.Conway.Specification.Utxow.html#4824" class="Bound">x</a>

<a id="4827" class="Keyword">unquoteDecl</a> <a id="UTXOW-inductive-premises"></a><a id="4839" href="Ledger.Conway.Specification.Utxow.html#4839" class="Function">UTXOW-inductive-premises</a> <a id="4864" class="Symbol">=</a>
  <a id="4868" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="4880" href="Ledger.Conway.Specification.Utxow.html#4839" class="Function">UTXOW-inductive-premises</a> <a id="4905" class="Symbol">(</a><a id="4906" class="Keyword">quote</a> <a id="4912" href="Ledger.Conway.Specification.Utxow.html#3054" class="InductiveConstructor">UTXOW-inductive</a><a id="4927" class="Symbol">)</a>

</pre></body></html>