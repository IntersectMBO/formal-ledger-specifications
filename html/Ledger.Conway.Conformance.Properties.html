<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Properties</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="52" class="Keyword">open</a> <a id="57" class="Keyword">import</a> <a id="64" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a>
<a id="80" class="Keyword">open</a> <a id="85" class="Keyword">import</a> <a id="92" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>

<a id="112" class="Keyword">module</a> <a id="119" href="Ledger.Conway.Conformance.Properties.html" class="Module">Ledger.Conway.Conformance.Properties</a>
  <a id="158" class="Symbol">(</a><a id="159" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a> <a id="163" class="Symbol">:</a> <a id="165" class="Symbol">_)</a> <a id="168" class="Symbol">(</a><a id="169" class="Keyword">open</a> <a id="174" href="Ledger.Transaction.html#867" class="Module">TransactionStructure</a> <a id="195" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a><a id="198" class="Symbol">)</a>
  <a id="202" class="Symbol">(</a><a id="203" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a> <a id="207" class="Symbol">:</a> <a id="209" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a> <a id="227" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a><a id="230" class="Symbol">)</a> <a id="232" class="Symbol">(</a><a id="233" class="Keyword">open</a> <a id="238" href="Ledger.Abstract.html#578" class="Module">AbstractFunctions</a> <a id="256" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a><a id="259" class="Symbol">)</a>
  <a id="263" class="Keyword">where</a>

<a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="Ledger.Conway.Conformance.Chain.html" class="Module">Ledger.Conway.Conformance.Chain</a> <a id="314" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a> <a id="318" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="365" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a> <a id="369" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a>
<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Ledger.Conway.Conformance.Epoch.html" class="Module">Ledger.Conway.Conformance.Epoch</a> <a id="417" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a> <a id="421" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a>
<a id="425" class="Keyword">open</a> <a id="430" class="Keyword">import</a> <a id="437" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="470" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a> <a id="474" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a>
<a id="478" class="Keyword">open</a> <a id="483" class="Keyword">import</a> <a id="490" href="Ledger.Enact.html" class="Module">Ledger.Enact</a> <a id="503" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>
<a id="516" class="Keyword">open</a> <a id="521" class="Keyword">import</a> <a id="528" href="Ledger.Gov.html" class="Module">Ledger.Gov</a> <a id="539" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="587" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>

<a id="isCredDeposit"></a><a id="601" href="Ledger.Conway.Conformance.Properties.html#601" class="Function">isCredDeposit</a> <a id="615" class="Symbol">:</a> <a id="617" href="Ledger.Certs.html#286" class="Datatype">DepositPurpose</a> <a id="632" class="Symbol">→</a> <a id="634" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="639" href="Ledger.Conway.Conformance.Properties.html#601" class="Function">isCredDeposit</a> <a id="653" class="Symbol">(</a><a id="654" href="Ledger.Certs.html#316" class="InductiveConstructor">CredentialDeposit</a> <a id="672" href="Ledger.Conway.Conformance.Properties.html#672" class="Bound">x</a><a id="673" class="Symbol">)</a> <a id="675" class="Symbol">=</a> <a id="677" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="679" href="Ledger.Conway.Conformance.Properties.html#601" class="CatchallClause Function">isCredDeposit</a><a id="692" class="CatchallClause"> </a><a id="693" class="CatchallClause Symbol">_</a> <a id="695" class="Symbol">=</a> <a id="697" href="Data.Empty.html#914" class="Function">⊥</a>

<a id="700" class="Keyword">instance</a>
  <a id="isCredDeposit?"></a><a id="711" href="Ledger.Conway.Conformance.Properties.html#711" class="Function">isCredDeposit?</a> <a id="726" class="Symbol">:</a> <a id="728" href="Ledger.Conway.Conformance.Properties.html#601" class="Function">isCredDeposit</a> <a id="742" href="Class.Decidable.Core.html#762" class="Function Operator">⁇¹</a>
  <a id="747" href="Ledger.Conway.Conformance.Properties.html#711" class="Function">isCredDeposit?</a> <a id="762" class="Symbol">{</a><a id="763" href="Ledger.Certs.html#316" class="InductiveConstructor">CredentialDeposit</a> <a id="781" href="Ledger.Conway.Conformance.Properties.html#781" class="Bound">x</a><a id="782" class="Symbol">}</a> <a id="784" class="Symbol">=</a> <a id="786" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="788" class="Symbol">(</a><a id="789" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="793" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="795" class="Symbol">)</a>
  <a id="799" href="Ledger.Conway.Conformance.Properties.html#711" class="Function">isCredDeposit?</a> <a id="814" class="Symbol">{</a><a id="815" href="Ledger.Certs.html#369" class="InductiveConstructor">PoolDeposit</a> <a id="827" href="Ledger.Conway.Conformance.Properties.html#827" class="Bound">x</a><a id="828" class="Symbol">}</a> <a id="830" class="Symbol">=</a> <a id="832" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="834" class="Symbol">(</a><a id="835" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="838" class="Symbol">λ</a> <a id="840" class="Symbol">())</a>
  <a id="846" href="Ledger.Conway.Conformance.Properties.html#711" class="Function">isCredDeposit?</a> <a id="861" class="Symbol">{</a><a id="862" href="Ledger.Certs.html#422" class="InductiveConstructor">DRepDeposit</a> <a id="874" href="Ledger.Conway.Conformance.Properties.html#874" class="Bound">x</a><a id="875" class="Symbol">}</a> <a id="877" class="Symbol">=</a> <a id="879" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="881" class="Symbol">(</a><a id="882" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="885" class="Symbol">λ</a> <a id="887" class="Symbol">())</a>
  <a id="893" href="Ledger.Conway.Conformance.Properties.html#711" class="Function">isCredDeposit?</a> <a id="908" class="Symbol">{</a><a id="909" href="Ledger.Certs.html#475" class="InductiveConstructor">GovActionDeposit</a> <a id="926" href="Ledger.Conway.Conformance.Properties.html#926" class="Bound">x</a><a id="927" class="Symbol">}</a> <a id="929" class="Symbol">=</a> <a id="931" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="933" class="Symbol">(</a><a id="934" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="937" class="Symbol">λ</a> <a id="939" class="Symbol">())</a>

<a id="isGADeposit"></a><a id="944" href="Ledger.Conway.Conformance.Properties.html#944" class="Function">isGADeposit</a> <a id="956" class="Symbol">:</a> <a id="958" href="Ledger.Certs.html#286" class="Datatype">DepositPurpose</a> <a id="973" class="Symbol">→</a> <a id="975" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="980" href="Ledger.Conway.Conformance.Properties.html#944" class="Function">isGADeposit</a> <a id="992" class="Symbol">(</a><a id="993" href="Ledger.Certs.html#475" class="InductiveConstructor">GovActionDeposit</a> <a id="1010" href="Ledger.Conway.Conformance.Properties.html#1010" class="Bound">x</a><a id="1011" class="Symbol">)</a> <a id="1013" class="Symbol">=</a> <a id="1015" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="1017" href="Ledger.Conway.Conformance.Properties.html#944" class="CatchallClause Function">isGADeposit</a><a id="1028" class="CatchallClause"> </a><a id="1029" class="CatchallClause Symbol">_</a> <a id="1031" class="Symbol">=</a> <a id="1033" href="Data.Empty.html#914" class="Function">⊥</a>

<a id="1036" class="Keyword">instance</a>
  <a id="isGADeposit?"></a><a id="1047" href="Ledger.Conway.Conformance.Properties.html#1047" class="Function">isGADeposit?</a> <a id="1060" class="Symbol">:</a> <a id="1062" href="Ledger.Conway.Conformance.Properties.html#944" class="Function">isGADeposit</a> <a id="1074" href="Class.Decidable.Core.html#762" class="Function Operator">⁇¹</a>
  <a id="1079" href="Ledger.Conway.Conformance.Properties.html#1047" class="Function">isGADeposit?</a> <a id="1092" class="Symbol">{</a><a id="1093" href="Ledger.Certs.html#316" class="InductiveConstructor">CredentialDeposit</a> <a id="1111" href="Ledger.Conway.Conformance.Properties.html#1111" class="Bound">x</a><a id="1112" class="Symbol">}</a> <a id="1114" class="Symbol">=</a> <a id="1116" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1118" class="Symbol">(</a><a id="1119" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1122" class="Symbol">λ</a> <a id="1124" class="Symbol">())</a>
  <a id="1130" href="Ledger.Conway.Conformance.Properties.html#1047" class="Function">isGADeposit?</a> <a id="1143" class="Symbol">{</a><a id="1144" href="Ledger.Certs.html#369" class="InductiveConstructor">PoolDeposit</a> <a id="1156" href="Ledger.Conway.Conformance.Properties.html#1156" class="Bound">x</a><a id="1157" class="Symbol">}</a> <a id="1159" class="Symbol">=</a> <a id="1161" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1167" class="Symbol">λ</a> <a id="1169" class="Symbol">())</a>
  <a id="1175" href="Ledger.Conway.Conformance.Properties.html#1047" class="Function">isGADeposit?</a> <a id="1188" class="Symbol">{</a><a id="1189" href="Ledger.Certs.html#422" class="InductiveConstructor">DRepDeposit</a> <a id="1201" href="Ledger.Conway.Conformance.Properties.html#1201" class="Bound">x</a><a id="1202" class="Symbol">}</a> <a id="1204" class="Symbol">=</a> <a id="1206" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1208" class="Symbol">(</a><a id="1209" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1212" class="Symbol">λ</a> <a id="1214" class="Symbol">())</a>
  <a id="1220" href="Ledger.Conway.Conformance.Properties.html#1047" class="Function">isGADeposit?</a> <a id="1233" class="Symbol">{</a><a id="1234" href="Ledger.Certs.html#475" class="InductiveConstructor">GovActionDeposit</a> <a id="1251" href="Ledger.Conway.Conformance.Properties.html#1251" class="Bound">x</a><a id="1252" class="Symbol">}</a> <a id="1254" class="Symbol">=</a> <a id="1256" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1258" class="Symbol">(</a><a id="1259" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1263" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="1265" class="Symbol">)</a>

<a id="getLState"></a><a id="1268" href="Ledger.Conway.Conformance.Properties.html#1268" class="Function">getLState</a> <a id="1278" class="Symbol">:</a> <a id="1280" href="Ledger.Conway.Conformance.Epoch.html#1258" class="Record">NewEpochState</a> <a id="1294" class="Symbol">→</a> <a id="1296" href="Ledger.Conway.Conformance.Ledger.html#690" class="Record">LState</a>
<a id="1303" href="Ledger.Conway.Conformance.Properties.html#1268" class="Function">getLState</a> <a id="1313" class="Symbol">=</a> <a id="1315" href="Ledger.Conway.Conformance.Epoch.html#1173" class="Field">EpochState.ls</a> <a id="1329" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1331" href="Ledger.Conway.Conformance.Epoch.html#1321" class="Field">NewEpochState.epochState</a>

<a id="getRewards"></a><a id="1357" href="Ledger.Conway.Conformance.Properties.html#1357" class="Function">getRewards</a> <a id="1368" class="Symbol">:</a> <a id="1370" href="Ledger.Conway.Conformance.Epoch.html#1258" class="Record">NewEpochState</a> <a id="1384" class="Symbol">→</a> <a id="1386" href="Ledger.Address.html#273" class="Datatype">Credential</a> <a id="1397" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1399" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
<a id="1404" href="Ledger.Conway.Conformance.Properties.html#1357" class="Function">getRewards</a> <a id="1415" class="Symbol">=</a> <a id="1417" href="Ledger.Conway.Conformance.Certs.html#682" class="Field">DState.rewards</a> <a id="1432" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1434" href="Ledger.Conway.Conformance.Certs.html#978" class="Field">CertState.dState</a> <a id="1451" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1453" href="Ledger.Conway.Conformance.Ledger.html#798" class="Field">LState.certState</a> <a id="1470" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1472" href="Ledger.Conway.Conformance.Properties.html#1268" class="Function">getLState</a>

<a id="allDReps"></a><a id="1483" href="Ledger.Conway.Conformance.Properties.html#1483" class="Function">allDReps</a> <a id="1492" class="Symbol">:</a> <a id="1494" href="Ledger.Conway.Conformance.Epoch.html#1258" class="Record">NewEpochState</a> <a id="1508" class="Symbol">→</a> <a id="1510" href="Ledger.Address.html#273" class="Datatype">Credential</a> <a id="1521" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1523" href="Ledger.Types.Epoch.html#476" class="Function">Epoch</a>
<a id="1529" href="Ledger.Conway.Conformance.Properties.html#1483" class="Function">allDReps</a> <a id="1538" class="Symbol">=</a> <a id="1540" href="Ledger.Conway.Conformance.Certs.html#806" class="Field">GState.dreps</a> <a id="1553" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1555" href="Ledger.Conway.Conformance.Certs.html#1018" class="Field">CertState.gState</a> <a id="1572" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1574" href="Ledger.Conway.Conformance.Ledger.html#798" class="Field">LState.certState</a> <a id="1591" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1593" href="Ledger.Conway.Conformance.Properties.html#1268" class="Function">getLState</a>

<a id="activeDReps"></a><a id="1604" href="Ledger.Conway.Conformance.Properties.html#1604" class="Function">activeDReps</a> <a id="1616" class="Symbol">:</a> <a id="1618" href="Ledger.Types.Epoch.html#476" class="Function">Epoch</a> <a id="1624" class="Symbol">→</a> <a id="1626" href="Ledger.Conway.Conformance.Epoch.html#1258" class="Record">NewEpochState</a> <a id="1640" class="Symbol">→</a> <a id="1642" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1644" href="Ledger.Address.html#273" class="Datatype">Credential</a>
<a id="1655" href="Ledger.Conway.Conformance.Properties.html#1604" class="Function">activeDReps</a> <a id="1667" href="Ledger.Conway.Conformance.Properties.html#1667" class="Bound">currentEpoch</a> <a id="1680" href="Ledger.Conway.Conformance.Properties.html#1680" class="Bound">s</a> <a id="1682" class="Symbol">=</a> <a id="1684" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1688" class="Symbol">(</a><a id="1689" href="abstract-set-theory.FiniteSetTheory.html#2895" class="Function">filterᵐ</a> <a id="1697" class="Symbol">(λ</a> <a id="1700" class="Symbol">(_</a> <a id="1703" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1705" href="Ledger.Conway.Conformance.Properties.html#1705" class="Bound">e</a><a id="1706" class="Symbol">)</a> <a id="1708" class="Symbol">→</a> <a id="1710" href="Ledger.Conway.Conformance.Properties.html#1667" class="Bound">currentEpoch</a> <a id="1723" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="1725" href="Ledger.Conway.Conformance.Properties.html#1705" class="Bound">e</a><a id="1726" class="Symbol">)</a> <a id="1728" class="Symbol">(</a><a id="1729" href="Ledger.Conway.Conformance.Properties.html#1483" class="Function">allDReps</a> <a id="1738" href="Ledger.Conway.Conformance.Properties.html#1680" class="Bound">s</a><a id="1739" class="Symbol">))</a>

<a id="getGovState"></a><a id="1743" href="Ledger.Conway.Conformance.Properties.html#1743" class="Function">getGovState</a> <a id="1755" class="Symbol">:</a> <a id="1757" href="Ledger.Conway.Conformance.Epoch.html#1258" class="Record">NewEpochState</a> <a id="1771" class="Symbol">→</a> <a id="1773" href="Ledger.Gov.html#1334" class="Function">GovState</a>
<a id="1782" href="Ledger.Conway.Conformance.Properties.html#1743" class="Function">getGovState</a> <a id="1794" class="Symbol">=</a> <a id="1796" href="Ledger.Conway.Conformance.Ledger.html#772" class="Field">LState.govSt</a> <a id="1809" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1811" href="Ledger.Conway.Conformance.Properties.html#1268" class="Function">getLState</a>

<a id="1822" class="Keyword">instance</a>
  <a id="1833" href="Ledger.Conway.Conformance.Properties.html#1833" class="Function">_</a> <a id="1835" class="Symbol">:</a> <a id="1837" href="Class.IsSet.html#375" class="Record">IsSet</a> <a id="1843" href="Ledger.Conway.Conformance.Chain.html#722" class="Record">Block</a> <a id="1849" href="Ledger.Transaction.html#3538" class="Record">Tx</a>
  <a id="1854" class="Symbol">_</a> <a id="1856" class="Symbol">=</a> <a id="1858" class="Keyword">record</a> <a id="1865" class="Symbol">{</a> <a id="1867" href="Class.IsSet.html#419" class="Field">toSet</a> <a id="1873" class="Symbol">=</a> <a id="1875" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1884" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1886" href="Ledger.Conway.Conformance.Chain.html#755" class="Field">Block.ts</a> <a id="1895" class="Symbol">}</a>

  <a id="1900" href="Ledger.Conway.Conformance.Properties.html#1900" class="Function">_</a> <a id="1902" class="Symbol">:</a> <a id="1904" href="Class.IsSet.html#375" class="Record">IsSet</a> <a id="1910" href="Ledger.Transaction.html#2584" class="Record">TxBody</a> <a id="1917" href="Ledger.GovernanceActions.html#2077" class="Record">GovProposal</a>
  <a id="1931" class="Symbol">_</a> <a id="1933" class="Symbol">=</a> <a id="1935" class="Keyword">record</a> <a id="1942" class="Symbol">{</a> <a id="1944" href="Class.IsSet.html#419" class="Field">toSet</a> <a id="1950" class="Symbol">=</a> <a id="1952" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1961" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1963" href="Ledger.Transaction.html#2916" class="Field">TxBody.txprop</a> <a id="1977" class="Symbol">}</a>

<a id="validBlockIn"></a><a id="1980" href="Ledger.Conway.Conformance.Properties.html#1980" class="Function">validBlockIn</a> <a id="1993" class="Symbol">:</a> <a id="1995" href="Ledger.Conway.Conformance.Chain.html#645" class="Record">ChainState</a> <a id="2006" class="Symbol">→</a> <a id="2008" href="Ledger.Conway.Conformance.Chain.html#722" class="Record">Block</a> <a id="2014" class="Symbol">→</a> <a id="2016" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="2021" href="Ledger.Conway.Conformance.Properties.html#1980" class="Function">validBlockIn</a> <a id="2034" href="Ledger.Conway.Conformance.Properties.html#2034" class="Bound">s</a> <a id="2036" href="Ledger.Conway.Conformance.Properties.html#2036" class="Bound">b</a> <a id="2038" class="Symbol">=</a> <a id="2040" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="2043" href="Ledger.Conway.Conformance.Properties.html#2043" class="Bound">s&#39;</a> <a id="2046" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="2048" class="Symbol">_</a> <a id="2050" href="Ledger.Conway.Conformance.Chain.html#2596" class="Datatype Operator">⊢</a> <a id="2052" href="Ledger.Conway.Conformance.Properties.html#2034" class="Bound">s</a> <a id="2054" href="Ledger.Conway.Conformance.Chain.html#2596" class="Datatype Operator">⇀⦇</a> <a id="2057" href="Ledger.Conway.Conformance.Properties.html#2036" class="Bound">b</a> <a id="2059" href="Ledger.Conway.Conformance.Chain.html#2596" class="Datatype Operator">,CHAIN⦈</a> <a id="2067" href="Ledger.Conway.Conformance.Properties.html#2043" class="Bound">s&#39;</a>

<a id="validBlock"></a><a id="2071" href="Ledger.Conway.Conformance.Properties.html#2071" class="Function">validBlock</a> <a id="2082" class="Symbol">:</a> <a id="2084" href="Ledger.Conway.Conformance.Chain.html#722" class="Record">Block</a> <a id="2090" class="Symbol">→</a> <a id="2092" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="2097" href="Ledger.Conway.Conformance.Properties.html#2071" class="Function">validBlock</a> <a id="2108" href="Ledger.Conway.Conformance.Properties.html#2108" class="Bound">b</a> <a id="2110" class="Symbol">=</a> <a id="2112" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="2115" href="Ledger.Conway.Conformance.Properties.html#2115" class="Bound">s</a> <a id="2117" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="2119" href="Ledger.Conway.Conformance.Properties.html#1980" class="Function">validBlockIn</a> <a id="2132" href="Ledger.Conway.Conformance.Properties.html#2115" class="Bound">s</a> <a id="2134" href="Ledger.Conway.Conformance.Properties.html#2108" class="Bound">b</a>

<a id="2137" class="Comment">-- Transaction validity is complicated. In the truest sense, a</a>
<a id="2200" class="Comment">-- transaction is valid if it is part of a valid block,</a>
<a id="2256" class="Comment">-- i.e. `validTxIn₁`. However, a transaction can also be seen as valid</a>
<a id="2327" class="Comment">-- if it could be applied at a certain slot (with no knowledge of an</a>
<a id="2396" class="Comment">-- actual block). This is closer to how the mempool sees transaction</a>
<a id="2465" class="Comment">-- validity and is expressed by `validTxIn₂`.</a>

<a id="2512" class="Comment">-- Note that these two are not equivalent and in fact there is no</a>
<a id="2578" class="Comment">-- implication between the two in either direction. `2 =&gt; 1` would</a>
<a id="2645" class="Comment">-- require one to come up with a block, which we can&#39;t, but `1 =&gt; 2`</a>
<a id="2714" class="Comment">-- is also not true, since the transaction might depend on a previous</a>
<a id="2784" class="Comment">-- transaction in the same block. Maybe this means that `validTxIn₂`</a>
<a id="2853" class="Comment">-- should be changed so that it allows for applying a list of</a>
<a id="2915" class="Comment">-- transactions before the final transaction? However, the downside</a>
<a id="2983" class="Comment">-- then becomes that the transaction isn&#39;t applied to the given state</a>
<a id="3053" class="Comment">-- but to some intermediate one. Maybe we&#39;ll gain some insight on this</a>
<a id="3124" class="Comment">-- matter once we have proven more theorems.</a>

<a id="validTxIn₁"></a><a id="3170" href="Ledger.Conway.Conformance.Properties.html#3170" class="Function">validTxIn₁</a> <a id="3181" class="Symbol">:</a> <a id="3183" href="Ledger.Conway.Conformance.Chain.html#645" class="Record">ChainState</a> <a id="3194" class="Symbol">→</a> <a id="3196" href="Ledger.Transaction.html#3538" class="Record">Tx</a> <a id="3199" class="Symbol">→</a> <a id="3201" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="3206" href="Ledger.Conway.Conformance.Properties.html#3170" class="Function">validTxIn₁</a> <a id="3217" href="Ledger.Conway.Conformance.Properties.html#3217" class="Bound">s</a> <a id="3219" href="Ledger.Conway.Conformance.Properties.html#3219" class="Bound">tx</a> <a id="3222" class="Symbol">=</a> <a id="3224" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3227" href="Ledger.Conway.Conformance.Properties.html#3227" class="Bound">b</a> <a id="3229" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="3231" href="Ledger.Conway.Conformance.Properties.html#3219" class="Bound">tx</a> <a id="3234" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="3236" href="Ledger.Conway.Conformance.Properties.html#3227" class="Bound">b</a> <a id="3238" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3240" href="Ledger.Conway.Conformance.Properties.html#1980" class="Function">validBlockIn</a> <a id="3253" href="Ledger.Conway.Conformance.Properties.html#3217" class="Bound">s</a> <a id="3255" href="Ledger.Conway.Conformance.Properties.html#3227" class="Bound">b</a>

<a id="3258" class="Keyword">module</a> <a id="3265" href="Ledger.Conway.Conformance.Properties.html#3265" class="Module">_</a> <a id="3267" class="Symbol">(</a><a id="3268" href="Ledger.Conway.Conformance.Properties.html#3268" class="Bound">s</a> <a id="3270" class="Symbol">:</a> <a id="3272" href="Ledger.Conway.Conformance.Chain.html#645" class="Record">ChainState</a><a id="3282" class="Symbol">)</a> <a id="3284" class="Symbol">(</a><a id="3285" href="Ledger.Conway.Conformance.Properties.html#3285" class="Bound">slot</a> <a id="3290" class="Symbol">:</a> <a id="3292" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a><a id="3296" class="Symbol">)</a> <a id="3298" class="Keyword">where</a>

  <a id="3307" class="Keyword">open</a> <a id="3312" href="Ledger.Conway.Conformance.Chain.html#645" class="Module">ChainState</a> <a id="3323" href="Ledger.Conway.Conformance.Properties.html#3268" class="Bound">s</a><a id="3324" class="Symbol">;</a> <a id="3326" class="Keyword">open</a> <a id="3331" href="Ledger.Conway.Conformance.Epoch.html#1258" class="Module">NewEpochState</a> <a id="3345" href="Ledger.Conway.Conformance.Chain.html#683" class="Function">newEpochState</a>
  <a id="3361" class="Keyword">open</a> <a id="3366" href="Ledger.Conway.Conformance.Epoch.html#1060" class="Module">EpochState</a> <a id="3377" href="Ledger.Conway.Conformance.Epoch.html#1321" class="Function">epochState</a><a id="3387" class="Symbol">;</a> <a id="3389" class="Keyword">open</a> <a id="3394" href="Ledger.Enact.html#397" class="Module">EnactState</a> <a id="3405" href="Ledger.Conway.Conformance.Epoch.html#1197" class="Function">es</a>

  <a id="3411" class="Keyword">private</a>
    <a id="3423" href="Ledger.Conway.Conformance.Properties.html#3423" class="Function">ledgerEnv</a> <a id="3433" class="Symbol">=</a> <a id="3435" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="3437" href="Ledger.Conway.Conformance.Properties.html#3285" class="Bound">slot</a> <a id="3442" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3444" href="Ledger.Enact.html#502" class="Function">constitution</a> <a id="3457" class="Symbol">.</a><a id="3458" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3464" class="Symbol">.</a><a id="3465" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3471" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3473" href="Ledger.Enact.html#607" class="Function">pparams</a> <a id="3481" class="Symbol">.</a><a id="3482" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3488" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3490" href="Ledger.Conway.Conformance.Epoch.html#1197" class="Function">es</a> <a id="3493" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3495" href="Ledger.PParams.html#729" class="Field">Acnt.treasury</a> <a id="3509" href="Ledger.Conway.Conformance.Epoch.html#1124" class="Function">acnt</a> <a id="3514" href="Class.To.html#102" class="Field Operator">⟧</a>

  <a id="3519" href="Ledger.Conway.Conformance.Properties.html#3519" class="Function">validTxIn₂</a> <a id="3530" class="Symbol">:</a> <a id="3532" href="Ledger.Transaction.html#3538" class="Record">Tx</a> <a id="3535" class="Symbol">→</a> <a id="3537" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3544" href="Ledger.Conway.Conformance.Properties.html#3519" class="Function">validTxIn₂</a> <a id="3555" href="Ledger.Conway.Conformance.Properties.html#3555" class="Bound">tx</a> <a id="3558" class="Symbol">=</a> <a id="3560" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3563" href="Ledger.Conway.Conformance.Properties.html#3563" class="Bound">ls&#39;</a> <a id="3567" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="3569" href="Ledger.Conway.Conformance.Properties.html#3423" class="Function">ledgerEnv</a> <a id="3579" href="Ledger.Conway.Conformance.Ledger.html#1053" class="Datatype Operator">⊢</a> <a id="3581" href="Ledger.Conway.Conformance.Epoch.html#1173" class="Function">ls</a> <a id="3584" href="Ledger.Conway.Conformance.Ledger.html#1053" class="Datatype Operator">⇀⦇</a> <a id="3587" href="Ledger.Conway.Conformance.Properties.html#3555" class="Bound">tx</a> <a id="3590" href="Ledger.Conway.Conformance.Ledger.html#1053" class="Datatype Operator">,LEDGER⦈</a> <a id="3599" href="Ledger.Conway.Conformance.Properties.html#3563" class="Bound">ls&#39;</a>

<a id="validTx₁"></a><a id="3604" href="Ledger.Conway.Conformance.Properties.html#3604" class="Function">validTx₁</a> <a id="3613" class="Symbol">:</a> <a id="3615" href="Ledger.Transaction.html#3538" class="Record">Tx</a> <a id="3618" class="Symbol">→</a> <a id="3620" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="3625" href="Ledger.Conway.Conformance.Properties.html#3604" class="Function">validTx₁</a> <a id="3634" href="Ledger.Conway.Conformance.Properties.html#3634" class="Bound">tx</a> <a id="3637" class="Symbol">=</a> <a id="3639" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3642" href="Ledger.Conway.Conformance.Properties.html#3642" class="Bound">s</a> <a id="3644" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="3646" href="Ledger.Conway.Conformance.Properties.html#3170" class="Function">validTxIn₁</a> <a id="3657" href="Ledger.Conway.Conformance.Properties.html#3642" class="Bound">s</a> <a id="3659" href="Ledger.Conway.Conformance.Properties.html#3634" class="Bound">tx</a>

<a id="ChainInvariant"></a><a id="3663" href="Ledger.Conway.Conformance.Properties.html#3663" class="Function">ChainInvariant</a> <a id="3678" class="Symbol">:</a> <a id="3680" class="Symbol">∀</a> <a id="3682" class="Symbol">{</a><a id="3683" href="Ledger.Conway.Conformance.Properties.html#3683" class="Bound">a</a><a id="3684" class="Symbol">}</a> <a id="3686" class="Symbol">→</a> <a id="3688" class="Symbol">(</a><a id="3689" href="Ledger.Conway.Conformance.Chain.html#645" class="Record">ChainState</a> <a id="3700" class="Symbol">→</a> <a id="3702" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3707" href="Ledger.Conway.Conformance.Properties.html#3683" class="Bound">a</a><a id="3708" class="Symbol">)</a> <a id="3710" class="Symbol">→</a> <a id="3712" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3717" href="Ledger.Conway.Conformance.Properties.html#3683" class="Bound">a</a>
<a id="3719" href="Ledger.Conway.Conformance.Properties.html#3663" class="Function">ChainInvariant</a> <a id="3734" href="Ledger.Conway.Conformance.Properties.html#3734" class="Bound">P</a> <a id="3736" class="Symbol">=</a> <a id="3738" class="Symbol">∀</a> <a id="3740" href="Ledger.Conway.Conformance.Properties.html#3740" class="Bound">b</a> <a id="3742" href="Ledger.Conway.Conformance.Properties.html#3742" class="Bound">s</a> <a id="3744" href="Ledger.Conway.Conformance.Properties.html#3744" class="Bound">s&#39;</a> <a id="3747" class="Symbol">→</a> <a id="3749" class="Symbol">_</a> <a id="3751" href="Ledger.Conway.Conformance.Chain.html#2596" class="Datatype Operator">⊢</a> <a id="3753" href="Ledger.Conway.Conformance.Properties.html#3742" class="Bound">s</a> <a id="3755" href="Ledger.Conway.Conformance.Chain.html#2596" class="Datatype Operator">⇀⦇</a> <a id="3758" href="Ledger.Conway.Conformance.Properties.html#3740" class="Bound">b</a> <a id="3760" href="Ledger.Conway.Conformance.Chain.html#2596" class="Datatype Operator">,CHAIN⦈</a> <a id="3768" href="Ledger.Conway.Conformance.Properties.html#3744" class="Bound">s&#39;</a> <a id="3771" class="Symbol">→</a> <a id="3773" href="Ledger.Conway.Conformance.Properties.html#3734" class="Bound">P</a> <a id="3775" href="Ledger.Conway.Conformance.Properties.html#3742" class="Bound">s</a> <a id="3777" class="Symbol">→</a> <a id="3779" href="Ledger.Conway.Conformance.Properties.html#3734" class="Bound">P</a> <a id="3781" href="Ledger.Conway.Conformance.Properties.html#3744" class="Bound">s&#39;</a>

<a id="3785" class="Keyword">module</a> <a id="3792" href="Ledger.Conway.Conformance.Properties.html#3792" class="Module">_</a> <a id="3794" class="Symbol">(</a><a id="3795" href="Ledger.Conway.Conformance.Properties.html#3795" class="Bound">s</a> <a id="3797" class="Symbol">:</a> <a id="3799" href="Ledger.Conway.Conformance.Chain.html#645" class="Record">ChainState</a><a id="3809" class="Symbol">)</a> <a id="3811" class="Keyword">where</a>
  <a id="3819" class="Keyword">open</a> <a id="3824" href="Ledger.Conway.Conformance.Chain.html#645" class="Module">ChainState</a> <a id="3835" href="Ledger.Conway.Conformance.Properties.html#3795" class="Bound">s</a><a id="3836" class="Symbol">;</a> <a id="3838" class="Keyword">open</a> <a id="3843" href="Ledger.Conway.Conformance.Epoch.html#1258" class="Module">NewEpochState</a> <a id="3857" href="Ledger.Conway.Conformance.Chain.html#683" class="Field">newEpochState</a><a id="3870" class="Symbol">;</a> <a id="3872" class="Keyword">open</a> <a id="3877" href="Ledger.Conway.Conformance.Epoch.html#1060" class="Module">EpochState</a> <a id="3888" href="Ledger.Conway.Conformance.Epoch.html#1321" class="Function">epochState</a>
  <a id="3901" class="Keyword">open</a> <a id="3906" href="Ledger.Conway.Conformance.Ledger.html#690" class="Module">LState</a> <a id="3913" href="Ledger.Conway.Conformance.Epoch.html#1173" class="Function">ls</a>
  <a id="3918" class="Keyword">open</a> <a id="3923" href="Ledger.Enact.html#397" class="Module">EnactState</a> <a id="3934" href="Ledger.Conway.Conformance.Epoch.html#1197" class="Function">es</a> <a id="3937" class="Keyword">renaming</a> <a id="3946" class="Symbol">(</a><a id="3947" href="Ledger.Enact.html#607" class="Field">pparams</a> <a id="3955" class="Symbol">to</a> <a id="3958" class="Field">pparams&#39;</a><a id="3966" class="Symbol">)</a>
  <a id="3970" class="Keyword">open</a> <a id="3975" href="Ledger.Conway.Conformance.Certs.html#919" class="Module">CertState</a> <a id="3985" href="Ledger.Conway.Conformance.Ledger.html#798" class="Function">certState</a><a id="3994" class="Symbol">;</a> <a id="3996" class="Keyword">open</a> <a id="4001" href="Ledger.Conway.Conformance.Certs.html#546" class="Module">DState</a> <a id="4008" href="Ledger.Conway.Conformance.Certs.html#978" class="Function">dState</a>
  <a id="4017" href="Ledger.Conway.Conformance.Properties.html#4017" class="Function">pparams</a> <a id="4025" class="Symbol">=</a> <a id="4027" href="Ledger.Conway.Conformance.Properties.html#3958" class="Function">pparams&#39;</a> <a id="4036" class="Symbol">.</a><a id="4037" href="Data.Product.Base.html#636" class="Field">proj₁</a>
  <a id="4045" class="Keyword">open</a> <a id="4050" href="Ledger.PParams.html#1443" class="Module">PParams</a> <a id="4058" href="Ledger.Conway.Conformance.Properties.html#4017" class="Function">pparams</a>
  <a id="4068" class="Keyword">open</a> <a id="4073" href="Ledger.Transaction.html#3538" class="Module">Tx</a><a id="4075" class="Symbol">;</a> <a id="4077" class="Keyword">open</a> <a id="4082" href="Ledger.Transaction.html#2584" class="Module">TxBody</a>

  <a id="4092" class="Comment">-- Transaction properties</a>

  <a id="4121" class="Keyword">module</a> <a id="4128" href="Ledger.Conway.Conformance.Properties.html#4128" class="Module">_</a> <a id="4130" class="Symbol">{</a><a id="4131" href="Ledger.Conway.Conformance.Properties.html#4131" class="Bound">slot</a><a id="4135" class="Symbol">}</a> <a id="4137" class="Symbol">{</a><a id="4138" href="Ledger.Conway.Conformance.Properties.html#4138" class="Bound">tx</a><a id="4140" class="Symbol">}</a> <a id="4142" class="Symbol">(</a><a id="4143" class="Keyword">let</a> <a id="4147" href="Ledger.Conway.Conformance.Properties.html#4147" class="Bound">txb</a> <a id="4151" class="Symbol">=</a> <a id="4153" href="Ledger.Transaction.html#3570" class="Field">body</a> <a id="4158" href="Ledger.Conway.Conformance.Properties.html#4138" class="Bound">tx</a><a id="4160" class="Symbol">)</a> <a id="4162" class="Symbol">(</a><a id="4163" href="Ledger.Conway.Conformance.Properties.html#4163" class="Bound">valid</a> <a id="4169" class="Symbol">:</a> <a id="4171" href="Ledger.Conway.Conformance.Properties.html#3519" class="Function">validTxIn₂</a> <a id="4182" href="Ledger.Conway.Conformance.Properties.html#3795" class="Bound">s</a> <a id="4184" href="Ledger.Conway.Conformance.Properties.html#4131" class="Bound">slot</a> <a id="4189" href="Ledger.Conway.Conformance.Properties.html#4138" class="Bound">tx</a><a id="4191" class="Symbol">)</a>
    <a id="4197" class="Symbol">(</a><a id="4198" href="Ledger.Conway.Conformance.Properties.html#4198" class="Bound">indexedSum-∪⁺-hom</a> <a id="4216" class="Symbol">:</a> <a id="4218" class="Symbol">∀</a> <a id="4220" class="Symbol">{</a><a id="4221" href="Ledger.Conway.Conformance.Properties.html#4221" class="Bound">A</a> <a id="4223" href="Ledger.Conway.Conformance.Properties.html#4223" class="Bound">V</a> <a id="4225" class="Symbol">:</a> <a id="4227" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="4231" class="Symbol">}</a> <a id="4233" class="Symbol">⦃</a> <a id="4235" href="Ledger.Conway.Conformance.Properties.html#4235" class="Bound">_</a> <a id="4237" class="Symbol">:</a> <a id="4239" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="4245" href="Ledger.Conway.Conformance.Properties.html#4221" class="Bound">A</a> <a id="4247" class="Symbol">⦄</a> <a id="4249" class="Symbol">⦃</a> <a id="4251" href="Ledger.Conway.Conformance.Properties.html#4251" class="Bound">_</a> <a id="4253" class="Symbol">:</a> <a id="4255" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="4261" href="Ledger.Conway.Conformance.Properties.html#4223" class="Bound">V</a> <a id="4263" class="Symbol">⦄</a> <a id="4265" class="Symbol">⦃</a> <a id="4267" href="Ledger.Conway.Conformance.Properties.html#4267" class="Bound">mon</a> <a id="4271" class="Symbol">:</a> <a id="4273" href="Class.CommutativeMonoid.Core.html#191" class="Record">CommutativeMonoid</a> <a id="4291" href="Level.html#521" class="Function">0ℓ</a> <a id="4294" href="Level.html#521" class="Function">0ℓ</a> <a id="4297" href="Ledger.Conway.Conformance.Properties.html#4223" class="Bound">V</a> <a id="4299" class="Symbol">⦄</a>
      <a id="4307" class="Symbol">→</a> <a id="4309" class="Symbol">(</a><a id="4310" href="Ledger.Conway.Conformance.Properties.html#4310" class="Bound">d₁</a> <a id="4313" href="Ledger.Conway.Conformance.Properties.html#4313" class="Bound">d₂</a> <a id="4316" class="Symbol">:</a> <a id="4318" href="Ledger.Conway.Conformance.Properties.html#4221" class="Bound">A</a> <a id="4320" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4322" href="Ledger.Conway.Conformance.Properties.html#4223" class="Bound">V</a><a id="4323" class="Symbol">)</a> <a id="4325" class="Symbol">→</a> <a id="4327" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4340" href="Function.Base.html#704" class="Function">id</a> <a id="4343" class="Symbol">(</a><a id="4344" href="Ledger.Conway.Conformance.Properties.html#4310" class="Bound">d₁</a> <a id="4347" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="4350" href="Ledger.Conway.Conformance.Properties.html#4313" class="Bound">d₂</a><a id="4352" class="Symbol">)</a> <a id="4354" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4356" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4369" href="Function.Base.html#704" class="Function">id</a> <a id="4372" href="Ledger.Conway.Conformance.Properties.html#4310" class="Bound">d₁</a> <a id="4375" href="Class.Semigroup.Core.html#173" class="Field Operator">◇</a> <a id="4377" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4390" href="Function.Base.html#704" class="Function">id</a> <a id="4393" href="Ledger.Conway.Conformance.Properties.html#4313" class="Bound">d₂</a><a id="4395" class="Symbol">)</a>
    <a id="4401" class="Symbol">(</a><a id="4402" href="Ledger.Conway.Conformance.Properties.html#4402" class="Bound">indexedSum-⊆</a> <a id="4415" class="Symbol">:</a> <a id="4417" class="Symbol">∀</a> <a id="4419" class="Symbol">{</a><a id="4420" href="Ledger.Conway.Conformance.Properties.html#4420" class="Bound">A</a> <a id="4422" class="Symbol">:</a> <a id="4424" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="4428" class="Symbol">}</a> <a id="4430" class="Symbol">⦃</a> <a id="4432" href="Ledger.Conway.Conformance.Properties.html#4432" class="Bound">_</a> <a id="4434" class="Symbol">:</a> <a id="4436" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="4442" href="Ledger.Conway.Conformance.Properties.html#4420" class="Bound">A</a> <a id="4444" class="Symbol">⦄</a> <a id="4446" class="Symbol">(</a><a id="4447" href="Ledger.Conway.Conformance.Properties.html#4447" class="Bound">d</a> <a id="4449" href="Ledger.Conway.Conformance.Properties.html#4449" class="Bound">d&#39;</a> <a id="4452" class="Symbol">:</a> <a id="4454" href="Ledger.Conway.Conformance.Properties.html#4420" class="Bound">A</a> <a id="4456" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4458" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="4459" class="Symbol">)</a> <a id="4461" class="Symbol">→</a> <a id="4463" href="Ledger.Conway.Conformance.Properties.html#4447" class="Bound">d</a> <a id="4465" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="4467" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="4469" href="Ledger.Conway.Conformance.Properties.html#4449" class="Bound">d&#39;</a> <a id="4472" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a>
      <a id="4480" class="Symbol">→</a> <a id="4482" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4495" href="Function.Base.html#704" class="Function">id</a> <a id="4498" href="Ledger.Conway.Conformance.Properties.html#4447" class="Bound">d</a> <a id="4500" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="4502" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4515" href="Function.Base.html#704" class="Function">id</a> <a id="4518" href="Ledger.Conway.Conformance.Properties.html#4449" class="Bound">d&#39;</a><a id="4520" class="Symbol">)</a> <a id="4522" class="Comment">-- technically we could use an ordered monoid instead of ℕ</a>
    <a id="4585" class="Keyword">where</a>
    <a id="4595" class="Keyword">open</a> <a id="4600" class="Keyword">import</a> <a id="4607" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="4639" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a> <a id="4643" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a>
    <a id="4651" class="Keyword">open</a> <a id="4656" class="Keyword">import</a> <a id="4663" href="Ledger.Conway.Conformance.Utxo.Properties.html" class="Module">Ledger.Conway.Conformance.Utxo.Properties</a> <a id="4705" href="Ledger.Conway.Conformance.Properties.html#159" class="Bound">txs</a> <a id="4709" href="Ledger.Conway.Conformance.Properties.html#203" class="Bound">abs</a>

  <a id="4716" class="Comment">--   propose-ChangePP-hasGroup : ∀ {up prop}</a>
  <a id="4763" class="Comment">--     → prop ∈ txb → prop .GovProposal.action ≡ ChangePParams up → updateGroups up ≢ ∅</a>
  <a id="4853" class="Comment">--   propose-ChangePP-hasGroup = {!!}</a>

  <a id="4894" class="Comment">-- Block properties</a>

  <a id="4917" class="Keyword">module</a> <a id="4924" href="Ledger.Conway.Conformance.Properties.html#4924" class="Module">_</a> <a id="4926" class="Symbol">{</a><a id="4927" href="Ledger.Conway.Conformance.Properties.html#4927" class="Bound">b</a><a id="4928" class="Symbol">}</a> <a id="4930" class="Symbol">(</a><a id="4931" href="Ledger.Conway.Conformance.Properties.html#4931" class="Bound">valid</a> <a id="4937" class="Symbol">:</a> <a id="4939" href="Ledger.Conway.Conformance.Properties.html#1980" class="Function">validBlockIn</a> <a id="4952" href="Ledger.Conway.Conformance.Properties.html#3795" class="Bound">s</a> <a id="4954" href="Ledger.Conway.Conformance.Properties.html#4927" class="Bound">b</a><a id="4955" class="Symbol">)</a> <a id="4957" class="Symbol">(</a><a id="4958" class="Keyword">let</a> <a id="4962" class="Keyword">open</a> <a id="4967" href="Ledger.Conway.Conformance.Chain.html#722" class="Module">Block</a> <a id="4973" href="Ledger.Conway.Conformance.Properties.html#4927" class="Bound">b</a><a id="4974" class="Symbol">)</a> <a id="4976" class="Keyword">where</a>
    <a id="4986" href="Ledger.Conway.Conformance.Properties.html#4986" class="Function">isNewEpochBlock</a> <a id="5002" class="Symbol">:</a> <a id="5004" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="5013" href="Ledger.Conway.Conformance.Properties.html#4986" class="Function">isNewEpochBlock</a> <a id="5029" class="Symbol">=</a> <a id="5031" href="Ledger.Types.Epoch.html#688" class="Function">epoch</a> <a id="5037" href="Ledger.Conway.Conformance.Chain.html#775" class="Function">slot</a> <a id="5042" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5044" href="Ledger.Types.Epoch.html#797" class="Function">sucᵉ</a> <a id="5049" href="Ledger.Conway.Conformance.Epoch.html#1297" class="Function">lastEpoch</a>

    <a id="5064" href="Ledger.Conway.Conformance.Properties.html#5064" class="Function">newChainState</a> <a id="5078" class="Symbol">:</a> <a id="5080" href="Ledger.Conway.Conformance.Chain.html#645" class="Record">ChainState</a>
    <a id="5095" href="Ledger.Conway.Conformance.Properties.html#5064" class="Function">newChainState</a> <a id="5109" class="Symbol">=</a> <a id="5111" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5117" href="Ledger.Conway.Conformance.Properties.html#4931" class="Bound">valid</a>

    <a id="5128" href="Ledger.Conway.Conformance.Properties.html#5128" class="Function">getEnactState</a> <a id="5142" class="Symbol">:</a> <a id="5144" href="Ledger.Conway.Conformance.Chain.html#645" class="Record">ChainState</a> <a id="5155" class="Symbol">→</a> <a id="5157" href="Ledger.Enact.html#397" class="Record">EnactState</a>
    <a id="5172" href="Ledger.Conway.Conformance.Properties.html#5128" class="Function">getEnactState</a> <a id="5186" class="Symbol">=</a> <a id="5188" href="Ledger.Conway.Conformance.Epoch.html#1197" class="Field">EpochState.es</a> <a id="5202" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5204" href="Ledger.Conway.Conformance.Epoch.html#1321" class="Field">NewEpochState.epochState</a> <a id="5229" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5231" href="Ledger.Conway.Conformance.Chain.html#683" class="Field">ChainState.newEpochState</a>

    <a id="5261" class="Comment">-- enact-change⇒newEpoch : es ≢ getEnactState newChainState → isNewEpochBlock</a>
    <a id="5343" class="Comment">-- enact-change⇒newEpoch = {!!}</a>

  <a id="5378" class="Comment">-- Invariant properties</a>

  <a id="5405" href="Ledger.Conway.Conformance.Properties.html#5405" class="Function">action-deposits≡actions-prop</a> <a id="5434" class="Symbol">:</a> <a id="5436" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5443" href="Ledger.Conway.Conformance.Properties.html#5405" class="Function">action-deposits≡actions-prop</a> <a id="5472" class="Symbol">=</a> <a id="5474" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="5482" href="Ledger.Conway.Conformance.Properties.html#944" class="Function">isGADeposit</a> <a id="5494" class="Symbol">(</a><a id="5495" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5499" class="Symbol">(</a><a id="5500" href="Ledger.Utxo.html#2566" class="Field">UTxOState.deposits</a> <a id="5519" href="Ledger.Conway.Conformance.Ledger.html#745" class="Function">utxoSt</a><a id="5525" class="Symbol">))</a>
    <a id="5532" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5534" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="5543" class="Symbol">(</a><a id="5544" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="5548" class="Symbol">(λ</a> <a id="5551" class="Keyword">where</a> <a id="5557" class="Symbol">(</a><a id="5558" href="Ledger.Conway.Conformance.Properties.html#5558" class="Bound">id</a> <a id="5561" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5563" class="Symbol">_)</a> <a id="5566" class="Symbol">→</a> <a id="5568" href="Ledger.Certs.html#475" class="InductiveConstructor">GovActionDeposit</a> <a id="5585" href="Ledger.Conway.Conformance.Properties.html#5558" class="Bound">id</a><a id="5587" class="Symbol">)</a> <a id="5589" href="Ledger.Conway.Conformance.Ledger.html#772" class="Function">govSt</a><a id="5594" class="Symbol">)</a>

  <a id="5599" href="Ledger.Conway.Conformance.Properties.html#5599" class="Function">dom-rwds≡credDeposits</a> <a id="5621" class="Symbol">:</a> <a id="5623" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5630" href="Ledger.Conway.Conformance.Properties.html#5599" class="Function">dom-rwds≡credDeposits</a> <a id="5652" class="Symbol">=</a> <a id="5654" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="5662" href="Ledger.Conway.Conformance.Properties.html#601" class="Function">isCredDeposit</a> <a id="5676" class="Symbol">(</a><a id="5677" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5681" class="Symbol">(</a><a id="5682" href="Ledger.Utxo.html#2566" class="Field">UTxOState.deposits</a> <a id="5701" href="Ledger.Conway.Conformance.Ledger.html#745" class="Function">utxoSt</a><a id="5707" class="Symbol">))</a>
    <a id="5714" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5716" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="5721" href="Ledger.Certs.html#316" class="InductiveConstructor">CredentialDeposit</a> <a id="5739" class="Symbol">(</a><a id="5740" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5744" href="Ledger.Conway.Conformance.Certs.html#682" class="Function">rewards</a><a id="5751" class="Symbol">)</a>

  <a id="5756" href="Ledger.Conway.Conformance.Properties.html#5756" class="Function">pp-wellFormed</a> <a id="5770" class="Symbol">:</a> <a id="5772" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5779" href="Ledger.Conway.Conformance.Properties.html#5756" class="Function">pp-wellFormed</a> <a id="5793" class="Symbol">=</a> <a id="5795" href="Ledger.PParams.html#3603" class="Function">paramsWellFormed</a> <a id="5812" href="Ledger.Conway.Conformance.Properties.html#4017" class="Function">pparams</a>

<a id="5821" class="Comment">-- action-deposits≡actions-inv : ChainInvariant action-deposits≡actions-prop</a>
<a id="5898" class="Comment">-- action-deposits≡actions-inv = {!!}</a>

<a id="5937" class="Comment">-- dom-rwds≡credDeposits-inv : ChainInvariant dom-rwds≡credDeposits</a>
<a id="6005" class="Comment">-- dom-rwds≡credDeposits-inv = {!!}</a>

<a id="6042" class="Comment">-- pp-wellFormed-inv : ChainInvariant pp-wellFormed</a>
<a id="6094" class="Comment">-- pp-wellFormed-inv = {!!}</a>

<a id="6123" class="Comment">-- Epoch boundary properties</a>

<a id="6153" class="Comment">-- module _ {Γ es e es&#39;} (step : Γ ⊢ es ⇀⦇ e ,NEWEPOCH⦈ es&#39;) where</a>
<a id="6220" class="Comment">--   dom-rwds-const : dom (getRewards es) ≡ dom (getRewards es&#39;)</a>
<a id="6285" class="Comment">--   dom-rwds-const = {!!}</a>

<a id="6313" class="Comment">--   prop≡∅⇒activeDReps-const : getGovState es ≡ [] → activeDReps e es ≡ᵉ activeDReps (sucᵉ e) es&#39;</a>
<a id="6412" class="Comment">--   prop≡∅⇒activeDReps-const = {!!}</a>
</pre></body></html>