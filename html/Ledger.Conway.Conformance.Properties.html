<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Properties</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="52" class="Keyword">open</a> <a id="57" class="Keyword">import</a> <a id="64" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>
<a id="87" class="Keyword">open</a> <a id="92" class="Keyword">import</a> <a id="99" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>

<a id="126" class="Keyword">module</a> <a id="133" href="Ledger.Conway.Conformance.Properties.html" class="Module">Ledger.Conway.Conformance.Properties</a>
  <a id="172" class="Symbol">(</a><a id="173" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a> <a id="177" class="Symbol">:</a> <a id="179" class="Symbol">_)</a> <a id="182" class="Symbol">(</a><a id="183" class="Keyword">open</a> <a id="188" href="Ledger.Conway.Transaction.html#888" class="Module">TransactionStructure</a> <a id="209" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a><a id="212" class="Symbol">)</a>
  <a id="216" class="Symbol">(</a><a id="217" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a> <a id="221" class="Symbol">:</a> <a id="223" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="241" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a><a id="244" class="Symbol">)</a> <a id="246" class="Symbol">(</a><a id="247" class="Keyword">open</a> <a id="252" href="Ledger.Conway.Abstract.html#599" class="Module">AbstractFunctions</a> <a id="270" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a><a id="273" class="Symbol">)</a>
  <a id="277" class="Keyword">where</a>

<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Ledger.Conway.Conformance.Chain.html" class="Module">Ledger.Conway.Conformance.Chain</a> <a id="328" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a> <a id="332" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a>
<a id="336" class="Keyword">open</a> <a id="341" class="Keyword">import</a> <a id="348" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="379" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a> <a id="383" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a>
<a id="387" class="Keyword">open</a> <a id="392" class="Keyword">import</a> <a id="399" href="Ledger.Conway.Conformance.Epoch.html" class="Module">Ledger.Conway.Conformance.Epoch</a> <a id="431" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a> <a id="435" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a>
<a id="439" class="Keyword">open</a> <a id="444" class="Keyword">import</a> <a id="451" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="484" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a> <a id="488" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a>
<a id="492" class="Keyword">open</a> <a id="497" class="Keyword">import</a> <a id="504" href="Ledger.Conway.Enact.html" class="Module">Ledger.Conway.Enact</a> <a id="524" href="Ledger.Conway.Transaction.html#1868" class="Function">govStructure</a>
<a id="537" class="Keyword">open</a> <a id="542" class="Keyword">import</a> <a id="549" href="Ledger.Conway.Gov.html" class="Module">Ledger.Conway.Gov</a> <a id="567" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a>
<a id="571" class="Keyword">open</a> <a id="576" class="Keyword">import</a> <a id="583" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="615" href="Ledger.Conway.Transaction.html#1868" class="Function">govStructure</a>

<a id="isCredDeposit"></a><a id="629" href="Ledger.Conway.Conformance.Properties.html#629" class="Function">isCredDeposit</a> <a id="643" class="Symbol">:</a> <a id="645" href="Ledger.Conway.Certs.html#328" class="Datatype">DepositPurpose</a> <a id="660" class="Symbol">→</a> <a id="662" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="667" href="Ledger.Conway.Conformance.Properties.html#629" class="Function">isCredDeposit</a> <a id="681" class="Symbol">(</a><a id="682" href="Ledger.Conway.Certs.html#358" class="InductiveConstructor">CredentialDeposit</a> <a id="700" href="Ledger.Conway.Conformance.Properties.html#700" class="Bound">x</a><a id="701" class="Symbol">)</a> <a id="703" class="Symbol">=</a> <a id="705" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="707" href="Ledger.Conway.Conformance.Properties.html#629" class="CatchallClause Function">isCredDeposit</a><a id="720" class="CatchallClause"> </a><a id="721" class="CatchallClause Symbol">_</a> <a id="723" class="Symbol">=</a> <a id="725" href="Data.Empty.html#914" class="Function">⊥</a>

<a id="728" class="Keyword">instance</a>
  <a id="isCredDeposit?"></a><a id="739" href="Ledger.Conway.Conformance.Properties.html#739" class="Function">isCredDeposit?</a> <a id="754" class="Symbol">:</a> <a id="756" href="Ledger.Conway.Conformance.Properties.html#629" class="Function">isCredDeposit</a> <a id="770" href="Class.Decidable.Core.html#762" class="Function Operator">⁇¹</a>
  <a id="775" href="Ledger.Conway.Conformance.Properties.html#739" class="Function">isCredDeposit?</a> <a id="790" class="Symbol">{</a><a id="791" href="Ledger.Conway.Certs.html#358" class="InductiveConstructor">CredentialDeposit</a> <a id="809" href="Ledger.Conway.Conformance.Properties.html#809" class="Bound">x</a><a id="810" class="Symbol">}</a> <a id="812" class="Symbol">=</a> <a id="814" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="816" class="Symbol">(</a><a id="817" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="821" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="823" class="Symbol">)</a>
  <a id="827" href="Ledger.Conway.Conformance.Properties.html#739" class="Function">isCredDeposit?</a> <a id="842" class="Symbol">{</a><a id="843" href="Ledger.Conway.Certs.html#411" class="InductiveConstructor">PoolDeposit</a> <a id="855" href="Ledger.Conway.Conformance.Properties.html#855" class="Bound">x</a><a id="856" class="Symbol">}</a> <a id="858" class="Symbol">=</a> <a id="860" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="862" class="Symbol">(</a><a id="863" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="866" class="Symbol">λ</a> <a id="868" class="Symbol">())</a>
  <a id="874" href="Ledger.Conway.Conformance.Properties.html#739" class="Function">isCredDeposit?</a> <a id="889" class="Symbol">{</a><a id="890" href="Ledger.Conway.Certs.html#464" class="InductiveConstructor">DRepDeposit</a> <a id="902" href="Ledger.Conway.Conformance.Properties.html#902" class="Bound">x</a><a id="903" class="Symbol">}</a> <a id="905" class="Symbol">=</a> <a id="907" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="909" class="Symbol">(</a><a id="910" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="913" class="Symbol">λ</a> <a id="915" class="Symbol">())</a>
  <a id="921" href="Ledger.Conway.Conformance.Properties.html#739" class="Function">isCredDeposit?</a> <a id="936" class="Symbol">{</a><a id="937" href="Ledger.Conway.Certs.html#517" class="InductiveConstructor">GovActionDeposit</a> <a id="954" href="Ledger.Conway.Conformance.Properties.html#954" class="Bound">x</a><a id="955" class="Symbol">}</a> <a id="957" class="Symbol">=</a> <a id="959" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="961" class="Symbol">(</a><a id="962" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="965" class="Symbol">λ</a> <a id="967" class="Symbol">())</a>

<a id="isGADeposit"></a><a id="972" href="Ledger.Conway.Conformance.Properties.html#972" class="Function">isGADeposit</a> <a id="984" class="Symbol">:</a> <a id="986" href="Ledger.Conway.Certs.html#328" class="Datatype">DepositPurpose</a> <a id="1001" class="Symbol">→</a> <a id="1003" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="1008" href="Ledger.Conway.Conformance.Properties.html#972" class="Function">isGADeposit</a> <a id="1020" class="Symbol">(</a><a id="1021" href="Ledger.Conway.Certs.html#517" class="InductiveConstructor">GovActionDeposit</a> <a id="1038" href="Ledger.Conway.Conformance.Properties.html#1038" class="Bound">x</a><a id="1039" class="Symbol">)</a> <a id="1041" class="Symbol">=</a> <a id="1043" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="1045" href="Ledger.Conway.Conformance.Properties.html#972" class="CatchallClause Function">isGADeposit</a><a id="1056" class="CatchallClause"> </a><a id="1057" class="CatchallClause Symbol">_</a> <a id="1059" class="Symbol">=</a> <a id="1061" href="Data.Empty.html#914" class="Function">⊥</a>

<a id="1064" class="Keyword">instance</a>
  <a id="isGADeposit?"></a><a id="1075" href="Ledger.Conway.Conformance.Properties.html#1075" class="Function">isGADeposit?</a> <a id="1088" class="Symbol">:</a> <a id="1090" href="Ledger.Conway.Conformance.Properties.html#972" class="Function">isGADeposit</a> <a id="1102" href="Class.Decidable.Core.html#762" class="Function Operator">⁇¹</a>
  <a id="1107" href="Ledger.Conway.Conformance.Properties.html#1075" class="Function">isGADeposit?</a> <a id="1120" class="Symbol">{</a><a id="1121" href="Ledger.Conway.Certs.html#358" class="InductiveConstructor">CredentialDeposit</a> <a id="1139" href="Ledger.Conway.Conformance.Properties.html#1139" class="Bound">x</a><a id="1140" class="Symbol">}</a> <a id="1142" class="Symbol">=</a> <a id="1144" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1146" class="Symbol">(</a><a id="1147" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1150" class="Symbol">λ</a> <a id="1152" class="Symbol">())</a>
  <a id="1158" href="Ledger.Conway.Conformance.Properties.html#1075" class="Function">isGADeposit?</a> <a id="1171" class="Symbol">{</a><a id="1172" href="Ledger.Conway.Certs.html#411" class="InductiveConstructor">PoolDeposit</a> <a id="1184" href="Ledger.Conway.Conformance.Properties.html#1184" class="Bound">x</a><a id="1185" class="Symbol">}</a> <a id="1187" class="Symbol">=</a> <a id="1189" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1191" class="Symbol">(</a><a id="1192" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1195" class="Symbol">λ</a> <a id="1197" class="Symbol">())</a>
  <a id="1203" href="Ledger.Conway.Conformance.Properties.html#1075" class="Function">isGADeposit?</a> <a id="1216" class="Symbol">{</a><a id="1217" href="Ledger.Conway.Certs.html#464" class="InductiveConstructor">DRepDeposit</a> <a id="1229" href="Ledger.Conway.Conformance.Properties.html#1229" class="Bound">x</a><a id="1230" class="Symbol">}</a> <a id="1232" class="Symbol">=</a> <a id="1234" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1236" class="Symbol">(</a><a id="1237" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1240" class="Symbol">λ</a> <a id="1242" class="Symbol">())</a>
  <a id="1248" href="Ledger.Conway.Conformance.Properties.html#1075" class="Function">isGADeposit?</a> <a id="1261" class="Symbol">{</a><a id="1262" href="Ledger.Conway.Certs.html#517" class="InductiveConstructor">GovActionDeposit</a> <a id="1279" href="Ledger.Conway.Conformance.Properties.html#1279" class="Bound">x</a><a id="1280" class="Symbol">}</a> <a id="1282" class="Symbol">=</a> <a id="1284" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1286" class="Symbol">(</a><a id="1287" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1291" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a><a id="1293" class="Symbol">)</a>

<a id="getLState"></a><a id="1296" href="Ledger.Conway.Conformance.Properties.html#1296" class="Function">getLState</a> <a id="1306" class="Symbol">:</a> <a id="1308" href="Ledger.Conway.Conformance.Epoch.html#1293" class="Record">NewEpochState</a> <a id="1322" class="Symbol">→</a> <a id="1324" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">LState</a>
<a id="1331" href="Ledger.Conway.Conformance.Properties.html#1296" class="Function">getLState</a> <a id="1341" class="Symbol">=</a> <a id="1343" href="Ledger.Conway.Conformance.Epoch.html#1208" class="Field">EpochState.ls</a> <a id="1357" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1359" href="Ledger.Conway.Conformance.Epoch.html#1356" class="Field">NewEpochState.epochState</a>

<a id="getRewards"></a><a id="1385" href="Ledger.Conway.Conformance.Properties.html#1385" class="Function">getRewards</a> <a id="1396" class="Symbol">:</a> <a id="1398" href="Ledger.Conway.Conformance.Epoch.html#1293" class="Record">NewEpochState</a> <a id="1412" class="Symbol">→</a> <a id="1414" href="Ledger.Conway.Address.html#248" class="Datatype">Credential</a> <a id="1425" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="1427" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
<a id="1432" href="Ledger.Conway.Conformance.Properties.html#1385" class="Function">getRewards</a> <a id="1443" class="Symbol">=</a> <a id="1445" href="Ledger.Conway.Conformance.Certs.html#693" class="Field">DState.rewards</a> <a id="1460" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1462" href="Ledger.Conway.Conformance.Certs.html#989" class="Field">CertState.dState</a> <a id="1479" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1481" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">LState.certState</a> <a id="1498" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1500" href="Ledger.Conway.Conformance.Properties.html#1296" class="Function">getLState</a>

<a id="allDReps"></a><a id="1511" href="Ledger.Conway.Conformance.Properties.html#1511" class="Function">allDReps</a> <a id="1520" class="Symbol">:</a> <a id="1522" href="Ledger.Conway.Conformance.Epoch.html#1293" class="Record">NewEpochState</a> <a id="1536" class="Symbol">→</a> <a id="1538" href="Ledger.Conway.Certs.html#633" class="Function">DReps</a>
<a id="1544" href="Ledger.Conway.Conformance.Properties.html#1511" class="Function">allDReps</a> <a id="1553" class="Symbol">=</a> <a id="1555" href="Ledger.Conway.Conformance.Certs.html#817" class="Field">GState.dreps</a> <a id="1568" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1570" href="Ledger.Conway.Conformance.Certs.html#1029" class="Field">CertState.gState</a> <a id="1587" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1589" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">LState.certState</a> <a id="1606" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1608" href="Ledger.Conway.Conformance.Properties.html#1296" class="Function">getLState</a>

<a id="activeDReps"></a><a id="1619" href="Ledger.Conway.Conformance.Properties.html#1619" class="Function">activeDReps</a> <a id="1631" class="Symbol">:</a> <a id="1633" href="Ledger.Conway.Types.Epoch.html#592" class="Function">Epoch</a> <a id="1639" class="Symbol">→</a> <a id="1641" href="Ledger.Conway.Conformance.Epoch.html#1293" class="Record">NewEpochState</a> <a id="1655" class="Symbol">→</a> <a id="1657" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1659" href="Ledger.Conway.Address.html#248" class="Datatype">Credential</a>
<a id="1670" href="Ledger.Conway.Conformance.Properties.html#1619" class="Function">activeDReps</a> <a id="1682" href="Ledger.Conway.Conformance.Properties.html#1682" class="Bound">currentEpoch</a> <a id="1695" href="Ledger.Conway.Conformance.Properties.html#1695" class="Bound">s</a> <a id="1697" class="Symbol">=</a> <a id="1699" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1703" class="Symbol">(</a><a id="1704" href="abstract-set-theory.FiniteSetTheory.html#2895" class="Function">filterᵐ</a> <a id="1712" class="Symbol">(λ</a> <a id="1715" class="Symbol">(_</a> <a id="1718" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1720" href="Ledger.Conway.Conformance.Properties.html#1720" class="Bound">e</a><a id="1721" class="Symbol">)</a> <a id="1723" class="Symbol">→</a> <a id="1725" href="Ledger.Conway.Conformance.Properties.html#1682" class="Bound">currentEpoch</a> <a id="1738" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="1740" href="Ledger.Conway.Conformance.Properties.html#1720" class="Bound">e</a><a id="1741" class="Symbol">)</a> <a id="1743" class="Symbol">(</a><a id="1744" href="Ledger.Conway.Conformance.Properties.html#1511" class="Function">allDReps</a> <a id="1753" href="Ledger.Conway.Conformance.Properties.html#1695" class="Bound">s</a><a id="1754" class="Symbol">))</a>

<a id="getGovState"></a><a id="1758" href="Ledger.Conway.Conformance.Properties.html#1758" class="Function">getGovState</a> <a id="1770" class="Symbol">:</a> <a id="1772" href="Ledger.Conway.Conformance.Epoch.html#1293" class="Record">NewEpochState</a> <a id="1786" class="Symbol">→</a> <a id="1788" href="Ledger.Conway.Gov.html#1397" class="Function">GovState</a>
<a id="1797" href="Ledger.Conway.Conformance.Properties.html#1758" class="Function">getGovState</a> <a id="1809" class="Symbol">=</a> <a id="1811" href="Ledger.Conway.Conformance.Ledger.html#805" class="Field">LState.govSt</a> <a id="1824" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1826" href="Ledger.Conway.Conformance.Properties.html#1296" class="Function">getLState</a>

<a id="1837" class="Keyword">instance</a>
  <a id="1848" href="Ledger.Conway.Conformance.Properties.html#1848" class="Function">_</a> <a id="1850" class="Symbol">:</a> <a id="1852" href="Class.IsSet.html#375" class="Record">IsSet</a> <a id="1858" href="Ledger.Conway.Conformance.Chain.html#750" class="Record">Block</a> <a id="1864" href="Ledger.Conway.Transaction.html#4298" class="Record">Tx</a>
  <a id="1869" class="Symbol">_</a> <a id="1871" class="Symbol">=</a> <a id="1873" class="Keyword">record</a> <a id="1880" class="Symbol">{</a> <a id="1882" href="Class.IsSet.html#419" class="Field">toSet</a> <a id="1888" class="Symbol">=</a> <a id="1890" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1899" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1901" href="Ledger.Conway.Conformance.Chain.html#783" class="Field">Block.ts</a> <a id="1910" class="Symbol">}</a>

  <a id="1915" href="Ledger.Conway.Conformance.Properties.html#1915" class="Function">_</a> <a id="1917" class="Symbol">:</a> <a id="1919" href="Class.IsSet.html#375" class="Record">IsSet</a> <a id="1925" href="Ledger.Conway.Transaction.html#2750" class="Record">TxBody</a> <a id="1932" href="Ledger.Conway.GovernanceActions.html#2506" class="Record">GovProposal</a>
  <a id="1946" class="Symbol">_</a> <a id="1948" class="Symbol">=</a> <a id="1950" class="Keyword">record</a> <a id="1957" class="Symbol">{</a> <a id="1959" href="Class.IsSet.html#419" class="Field">toSet</a> <a id="1965" class="Symbol">=</a> <a id="1967" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1976" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1978" href="Ledger.Conway.Transaction.html#3082" class="Field">TxBody.txprop</a> <a id="1992" class="Symbol">}</a>

<a id="validBlockIn"></a><a id="1995" href="Ledger.Conway.Conformance.Properties.html#1995" class="Function">validBlockIn</a> <a id="2008" class="Symbol">:</a> <a id="2010" href="Ledger.Conway.Conformance.Chain.html#673" class="Record">ChainState</a> <a id="2021" class="Symbol">→</a> <a id="2023" href="Ledger.Conway.Conformance.Chain.html#750" class="Record">Block</a> <a id="2029" class="Symbol">→</a> <a id="2031" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="2036" href="Ledger.Conway.Conformance.Properties.html#1995" class="Function">validBlockIn</a> <a id="2049" href="Ledger.Conway.Conformance.Properties.html#2049" class="Bound">s</a> <a id="2051" href="Ledger.Conway.Conformance.Properties.html#2051" class="Bound">b</a> <a id="2053" class="Symbol">=</a> <a id="2055" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="2058" href="Ledger.Conway.Conformance.Properties.html#2058" class="Bound">s&#39;</a> <a id="2061" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="2063" class="Symbol">_</a> <a id="2065" href="Ledger.Conway.Conformance.Chain.html#2624" class="Datatype Operator">⊢</a> <a id="2067" href="Ledger.Conway.Conformance.Properties.html#2049" class="Bound">s</a> <a id="2069" href="Ledger.Conway.Conformance.Chain.html#2624" class="Datatype Operator">⇀⦇</a> <a id="2072" href="Ledger.Conway.Conformance.Properties.html#2051" class="Bound">b</a> <a id="2074" href="Ledger.Conway.Conformance.Chain.html#2624" class="Datatype Operator">,CHAIN⦈</a> <a id="2082" href="Ledger.Conway.Conformance.Properties.html#2058" class="Bound">s&#39;</a>

<a id="validBlock"></a><a id="2086" href="Ledger.Conway.Conformance.Properties.html#2086" class="Function">validBlock</a> <a id="2097" class="Symbol">:</a> <a id="2099" href="Ledger.Conway.Conformance.Chain.html#750" class="Record">Block</a> <a id="2105" class="Symbol">→</a> <a id="2107" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="2112" href="Ledger.Conway.Conformance.Properties.html#2086" class="Function">validBlock</a> <a id="2123" href="Ledger.Conway.Conformance.Properties.html#2123" class="Bound">b</a> <a id="2125" class="Symbol">=</a> <a id="2127" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="2130" href="Ledger.Conway.Conformance.Properties.html#2130" class="Bound">s</a> <a id="2132" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="2134" href="Ledger.Conway.Conformance.Properties.html#1995" class="Function">validBlockIn</a> <a id="2147" href="Ledger.Conway.Conformance.Properties.html#2130" class="Bound">s</a> <a id="2149" href="Ledger.Conway.Conformance.Properties.html#2123" class="Bound">b</a>

<a id="2152" class="Comment">-- Transaction validity is complicated. In the truest sense, a</a>
<a id="2215" class="Comment">-- transaction is valid if it is part of a valid block,</a>
<a id="2271" class="Comment">-- i.e. `validTxIn₁`. However, a transaction can also be seen as valid</a>
<a id="2342" class="Comment">-- if it could be applied at a certain slot (with no knowledge of an</a>
<a id="2411" class="Comment">-- actual block). This is closer to how the mempool sees transaction</a>
<a id="2480" class="Comment">-- validity and is expressed by `validTxIn₂`.</a>

<a id="2527" class="Comment">-- Note that these two are not equivalent and in fact there is no</a>
<a id="2593" class="Comment">-- implication between the two in either direction. `2 =&gt; 1` would</a>
<a id="2660" class="Comment">-- require one to come up with a block, which we can&#39;t, but `1 =&gt; 2`</a>
<a id="2729" class="Comment">-- is also not true, since the transaction might depend on a previous</a>
<a id="2799" class="Comment">-- transaction in the same block. Maybe this means that `validTxIn₂`</a>
<a id="2868" class="Comment">-- should be changed so that it allows for applying a list of</a>
<a id="2930" class="Comment">-- transactions before the final transaction? However, the downside</a>
<a id="2998" class="Comment">-- then becomes that the transaction isn&#39;t applied to the given state</a>
<a id="3068" class="Comment">-- but to some intermediate one. Maybe we&#39;ll gain some insight on this</a>
<a id="3139" class="Comment">-- matter once we have proven more theorems.</a>

<a id="validTxIn₁"></a><a id="3185" href="Ledger.Conway.Conformance.Properties.html#3185" class="Function">validTxIn₁</a> <a id="3196" class="Symbol">:</a> <a id="3198" href="Ledger.Conway.Conformance.Chain.html#673" class="Record">ChainState</a> <a id="3209" class="Symbol">→</a> <a id="3211" href="Ledger.Conway.Transaction.html#4298" class="Record">Tx</a> <a id="3214" class="Symbol">→</a> <a id="3216" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="3221" href="Ledger.Conway.Conformance.Properties.html#3185" class="Function">validTxIn₁</a> <a id="3232" href="Ledger.Conway.Conformance.Properties.html#3232" class="Bound">s</a> <a id="3234" href="Ledger.Conway.Conformance.Properties.html#3234" class="Bound">tx</a> <a id="3237" class="Symbol">=</a> <a id="3239" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3242" href="Ledger.Conway.Conformance.Properties.html#3242" class="Bound">b</a> <a id="3244" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="3246" href="Ledger.Conway.Conformance.Properties.html#3234" class="Bound">tx</a> <a id="3249" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="3251" href="Ledger.Conway.Conformance.Properties.html#3242" class="Bound">b</a> <a id="3253" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3255" href="Ledger.Conway.Conformance.Properties.html#1995" class="Function">validBlockIn</a> <a id="3268" href="Ledger.Conway.Conformance.Properties.html#3232" class="Bound">s</a> <a id="3270" href="Ledger.Conway.Conformance.Properties.html#3242" class="Bound">b</a>

<a id="3273" class="Keyword">module</a> <a id="3280" href="Ledger.Conway.Conformance.Properties.html#3280" class="Module">_</a> <a id="3282" class="Symbol">(</a><a id="3283" href="Ledger.Conway.Conformance.Properties.html#3283" class="Bound">s</a> <a id="3285" class="Symbol">:</a> <a id="3287" href="Ledger.Conway.Conformance.Chain.html#673" class="Record">ChainState</a><a id="3297" class="Symbol">)</a> <a id="3299" class="Symbol">(</a><a id="3300" href="Ledger.Conway.Conformance.Properties.html#3300" class="Bound">slot</a> <a id="3305" class="Symbol">:</a> <a id="3307" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a><a id="3311" class="Symbol">)</a> <a id="3313" class="Keyword">where</a>

  <a id="3322" class="Keyword">open</a> <a id="3327" href="Ledger.Conway.Conformance.Chain.html#673" class="Module">ChainState</a> <a id="3338" href="Ledger.Conway.Conformance.Properties.html#3283" class="Bound">s</a><a id="3339" class="Symbol">;</a> <a id="3341" class="Keyword">open</a> <a id="3346" href="Ledger.Conway.Conformance.Epoch.html#1293" class="Module">NewEpochState</a> <a id="3360" href="Ledger.Conway.Conformance.Chain.html#711" class="Function">newEpochState</a>
  <a id="3376" class="Keyword">open</a> <a id="3381" href="Ledger.Conway.Conformance.Epoch.html#1095" class="Module">EpochState</a> <a id="3392" href="Ledger.Conway.Conformance.Epoch.html#1356" class="Function">epochState</a><a id="3402" class="Symbol">;</a> <a id="3404" class="Keyword">open</a> <a id="3409" href="Ledger.Conway.Enact.html#418" class="Module">EnactState</a> <a id="3420" href="Ledger.Conway.Conformance.Epoch.html#1232" class="Function">es</a>

  <a id="3426" class="Keyword">private</a>
    <a id="3438" href="Ledger.Conway.Conformance.Properties.html#3438" class="Function">ledgerEnv</a> <a id="3448" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Properties.html#3300}{\htmlId{3452}{\htmlClass{Bound}{\text{slot}}}}\, \\ \,\href{Ledger.Conway.Enact.html#523}{\htmlId{3459}{\htmlClass{Function}{\text{constitution}}}}\, \,\htmlId{3472}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Data.Product.Base.html#636}{\htmlId{3473}{\htmlClass{Field}{\text{proj₁}}}}\, \,\htmlId{3479}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Data.Product.Base.html#650}{\htmlId{3480}{\htmlClass{Field}{\text{proj₂}}}}\, \\ \,\href{Ledger.Conway.Enact.html#628}{\htmlId{3488}{\htmlClass{Function}{\text{pparams}}}}\, \,\htmlId{3496}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Data.Product.Base.html#636}{\htmlId{3497}{\htmlClass{Field}{\text{proj₁}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1232}{\htmlId{3505}{\htmlClass{Function}{\text{es}}}}\, \\ \,\href{Ledger.Conway.PParams.html#741}{\htmlId{3510}{\htmlClass{Field}{\text{Acnt.treasury}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1159}{\htmlId{3524}{\htmlClass{Function}{\text{acnt}}}}\, \end{pmatrix}$</a>

  <a id="3534" href="Ledger.Conway.Conformance.Properties.html#3534" class="Function">validTxIn₂</a> <a id="3545" class="Symbol">:</a> <a id="3547" href="Ledger.Conway.Transaction.html#4298" class="Record">Tx</a> <a id="3550" class="Symbol">→</a> <a id="3552" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3559" href="Ledger.Conway.Conformance.Properties.html#3534" class="Function">validTxIn₂</a> <a id="3570" href="Ledger.Conway.Conformance.Properties.html#3570" class="Bound">tx</a> <a id="3573" class="Symbol">=</a> <a id="3575" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3578" href="Ledger.Conway.Conformance.Properties.html#3578" class="Bound">ls&#39;</a> <a id="3582" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="3584" href="Ledger.Conway.Conformance.Properties.html#3438" class="Function">ledgerEnv</a> <a id="3594" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⊢</a> <a id="3596" href="Ledger.Conway.Conformance.Epoch.html#1208" class="Function">ls</a> <a id="3599" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="3602" href="Ledger.Conway.Conformance.Properties.html#3570" class="Bound">tx</a> <a id="3605" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="3614" href="Ledger.Conway.Conformance.Properties.html#3578" class="Bound">ls&#39;</a>

<a id="validTx₁"></a><a id="3619" href="Ledger.Conway.Conformance.Properties.html#3619" class="Function">validTx₁</a> <a id="3628" class="Symbol">:</a> <a id="3630" href="Ledger.Conway.Transaction.html#4298" class="Record">Tx</a> <a id="3633" class="Symbol">→</a> <a id="3635" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="3640" href="Ledger.Conway.Conformance.Properties.html#3619" class="Function">validTx₁</a> <a id="3649" href="Ledger.Conway.Conformance.Properties.html#3649" class="Bound">tx</a> <a id="3652" class="Symbol">=</a> <a id="3654" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3657" href="Ledger.Conway.Conformance.Properties.html#3657" class="Bound">s</a> <a id="3659" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="3661" href="Ledger.Conway.Conformance.Properties.html#3185" class="Function">validTxIn₁</a> <a id="3672" href="Ledger.Conway.Conformance.Properties.html#3657" class="Bound">s</a> <a id="3674" href="Ledger.Conway.Conformance.Properties.html#3649" class="Bound">tx</a>

<a id="ChainInvariant"></a><a id="3678" href="Ledger.Conway.Conformance.Properties.html#3678" class="Function">ChainInvariant</a> <a id="3693" class="Symbol">:</a> <a id="3695" class="Symbol">∀</a> <a id="3697" class="Symbol">{</a><a id="3698" href="Ledger.Conway.Conformance.Properties.html#3698" class="Bound">a</a><a id="3699" class="Symbol">}</a> <a id="3701" class="Symbol">→</a> <a id="3703" class="Symbol">(</a><a id="3704" href="Ledger.Conway.Conformance.Chain.html#673" class="Record">ChainState</a> <a id="3715" class="Symbol">→</a> <a id="3717" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3722" href="Ledger.Conway.Conformance.Properties.html#3698" class="Bound">a</a><a id="3723" class="Symbol">)</a> <a id="3725" class="Symbol">→</a> <a id="3727" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3732" href="Ledger.Conway.Conformance.Properties.html#3698" class="Bound">a</a>
<a id="3734" href="Ledger.Conway.Conformance.Properties.html#3678" class="Function">ChainInvariant</a> <a id="3749" href="Ledger.Conway.Conformance.Properties.html#3749" class="Bound">P</a> <a id="3751" class="Symbol">=</a> <a id="3753" class="Symbol">∀</a> <a id="3755" href="Ledger.Conway.Conformance.Properties.html#3755" class="Bound">b</a> <a id="3757" href="Ledger.Conway.Conformance.Properties.html#3757" class="Bound">s</a> <a id="3759" href="Ledger.Conway.Conformance.Properties.html#3759" class="Bound">s&#39;</a> <a id="3762" class="Symbol">→</a> <a id="3764" class="Symbol">_</a> <a id="3766" href="Ledger.Conway.Conformance.Chain.html#2624" class="Datatype Operator">⊢</a> <a id="3768" href="Ledger.Conway.Conformance.Properties.html#3757" class="Bound">s</a> <a id="3770" href="Ledger.Conway.Conformance.Chain.html#2624" class="Datatype Operator">⇀⦇</a> <a id="3773" href="Ledger.Conway.Conformance.Properties.html#3755" class="Bound">b</a> <a id="3775" href="Ledger.Conway.Conformance.Chain.html#2624" class="Datatype Operator">,CHAIN⦈</a> <a id="3783" href="Ledger.Conway.Conformance.Properties.html#3759" class="Bound">s&#39;</a> <a id="3786" class="Symbol">→</a> <a id="3788" href="Ledger.Conway.Conformance.Properties.html#3749" class="Bound">P</a> <a id="3790" href="Ledger.Conway.Conformance.Properties.html#3757" class="Bound">s</a> <a id="3792" class="Symbol">→</a> <a id="3794" href="Ledger.Conway.Conformance.Properties.html#3749" class="Bound">P</a> <a id="3796" href="Ledger.Conway.Conformance.Properties.html#3759" class="Bound">s&#39;</a>

<a id="3800" class="Keyword">module</a> <a id="3807" href="Ledger.Conway.Conformance.Properties.html#3807" class="Module">_</a> <a id="3809" class="Symbol">(</a><a id="3810" href="Ledger.Conway.Conformance.Properties.html#3810" class="Bound">s</a> <a id="3812" class="Symbol">:</a> <a id="3814" href="Ledger.Conway.Conformance.Chain.html#673" class="Record">ChainState</a><a id="3824" class="Symbol">)</a> <a id="3826" class="Keyword">where</a>
  <a id="3834" class="Keyword">open</a> <a id="3839" href="Ledger.Conway.Conformance.Chain.html#673" class="Module">ChainState</a> <a id="3850" href="Ledger.Conway.Conformance.Properties.html#3810" class="Bound">s</a><a id="3851" class="Symbol">;</a> <a id="3853" class="Keyword">open</a> <a id="3858" href="Ledger.Conway.Conformance.Epoch.html#1293" class="Module">NewEpochState</a> <a id="3872" href="Ledger.Conway.Conformance.Chain.html#711" class="Field">newEpochState</a><a id="3885" class="Symbol">;</a> <a id="3887" class="Keyword">open</a> <a id="3892" href="Ledger.Conway.Conformance.Epoch.html#1095" class="Module">EpochState</a> <a id="3903" href="Ledger.Conway.Conformance.Epoch.html#1356" class="Function">epochState</a>
  <a id="3916" class="Keyword">open</a> <a id="3921" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">LState</a> <a id="3928" href="Ledger.Conway.Conformance.Epoch.html#1208" class="Function">ls</a>
  <a id="3933" class="Keyword">open</a> <a id="3938" href="Ledger.Conway.Enact.html#418" class="Module">EnactState</a> <a id="3949" href="Ledger.Conway.Conformance.Epoch.html#1232" class="Function">es</a> <a id="3952" class="Keyword">renaming</a> <a id="3961" class="Symbol">(</a><a id="3962" href="Ledger.Conway.Enact.html#628" class="Field">pparams</a> <a id="3970" class="Symbol">to</a> <a id="3973" class="Field">pparams&#39;</a><a id="3981" class="Symbol">)</a>
  <a id="3985" class="Keyword">open</a> <a id="3990" href="Ledger.Conway.Conformance.Certs.html#930" class="Module">CertState</a> <a id="4000" href="Ledger.Conway.Conformance.Ledger.html#831" class="Function">certState</a><a id="4009" class="Symbol">;</a> <a id="4011" class="Keyword">open</a> <a id="4016" href="Ledger.Conway.Conformance.Certs.html#557" class="Module">DState</a> <a id="4023" href="Ledger.Conway.Conformance.Certs.html#989" class="Function">dState</a>
  <a id="4032" href="Ledger.Conway.Conformance.Properties.html#4032" class="Function">pparams</a> <a id="4040" class="Symbol">=</a> <a id="4042" href="Ledger.Prelude.html#2648" class="Function Operator">∣</a> <a id="4044" href="Ledger.Conway.Conformance.Properties.html#3973" class="Function">pparams&#39;</a> <a id="4053" href="Ledger.Prelude.html#2648" class="Function Operator">∣</a>
  <a id="4057" class="Keyword">open</a> <a id="4062" href="Ledger.Conway.PParams.html#1694" class="Module">PParams</a> <a id="4070" href="Ledger.Conway.Conformance.Properties.html#4032" class="Function">pparams</a>
  <a id="4080" class="Keyword">open</a> <a id="4085" href="Ledger.Conway.Transaction.html#4298" class="Module">Tx</a><a id="4087" class="Symbol">;</a> <a id="4089" class="Keyword">open</a> <a id="4094" href="Ledger.Conway.Transaction.html#2750" class="Module">TxBody</a>

  <a id="4104" class="Comment">-- Transaction properties</a>

  <a id="4133" class="Keyword">module</a> <a id="4140" href="Ledger.Conway.Conformance.Properties.html#4140" class="Module">_</a> <a id="4142" class="Symbol">{</a><a id="4143" href="Ledger.Conway.Conformance.Properties.html#4143" class="Bound">slot</a><a id="4147" class="Symbol">}</a> <a id="4149" class="Symbol">{</a><a id="4150" href="Ledger.Conway.Conformance.Properties.html#4150" class="Bound">tx</a><a id="4152" class="Symbol">}</a> <a id="4154" class="Symbol">(</a><a id="4155" class="Keyword">let</a> <a id="4159" href="Ledger.Conway.Conformance.Properties.html#4159" class="Bound">txb</a> <a id="4163" class="Symbol">=</a> <a id="4165" href="Ledger.Conway.Transaction.html#4330" class="Field">body</a> <a id="4170" href="Ledger.Conway.Conformance.Properties.html#4150" class="Bound">tx</a><a id="4172" class="Symbol">)</a> <a id="4174" class="Symbol">(</a><a id="4175" href="Ledger.Conway.Conformance.Properties.html#4175" class="Bound">valid</a> <a id="4181" class="Symbol">:</a> <a id="4183" href="Ledger.Conway.Conformance.Properties.html#3534" class="Function">validTxIn₂</a> <a id="4194" href="Ledger.Conway.Conformance.Properties.html#3810" class="Bound">s</a> <a id="4196" href="Ledger.Conway.Conformance.Properties.html#4143" class="Bound">slot</a> <a id="4201" href="Ledger.Conway.Conformance.Properties.html#4150" class="Bound">tx</a><a id="4203" class="Symbol">)</a>
    <a id="4209" class="Symbol">(</a><a id="4210" href="Ledger.Conway.Conformance.Properties.html#4210" class="Bound">indexedSum-∪⁺-hom</a> <a id="4228" class="Symbol">:</a> <a id="4230" class="Symbol">∀</a> <a id="4232" class="Symbol">{</a><a id="4233" href="Ledger.Conway.Conformance.Properties.html#4233" class="Bound">A</a> <a id="4235" href="Ledger.Conway.Conformance.Properties.html#4235" class="Bound">V</a> <a id="4237" class="Symbol">:</a> <a id="4239" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="4243" class="Symbol">}</a> <a id="4245" class="Symbol">⦃</a> <a id="4247" href="Ledger.Conway.Conformance.Properties.html#4247" class="Bound">_</a> <a id="4249" class="Symbol">:</a> <a id="4251" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="4257" href="Ledger.Conway.Conformance.Properties.html#4233" class="Bound">A</a> <a id="4259" class="Symbol">⦄</a> <a id="4261" class="Symbol">⦃</a> <a id="4263" href="Ledger.Conway.Conformance.Properties.html#4263" class="Bound">_</a> <a id="4265" class="Symbol">:</a> <a id="4267" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="4273" href="Ledger.Conway.Conformance.Properties.html#4235" class="Bound">V</a> <a id="4275" class="Symbol">⦄</a> <a id="4277" class="Symbol">⦃</a> <a id="4279" href="Ledger.Conway.Conformance.Properties.html#4279" class="Bound">mon</a> <a id="4283" class="Symbol">:</a> <a id="4285" href="Class.CommutativeMonoid.Core.html#191" class="Record">CommutativeMonoid</a> <a id="4303" href="Level.html#521" class="Function">0ℓ</a> <a id="4306" href="Level.html#521" class="Function">0ℓ</a> <a id="4309" href="Ledger.Conway.Conformance.Properties.html#4235" class="Bound">V</a> <a id="4311" class="Symbol">⦄</a>
      <a id="4319" class="Symbol">→</a> <a id="4321" class="Symbol">(</a><a id="4322" href="Ledger.Conway.Conformance.Properties.html#4322" class="Bound">d₁</a> <a id="4325" href="Ledger.Conway.Conformance.Properties.html#4325" class="Bound">d₂</a> <a id="4328" class="Symbol">:</a> <a id="4330" href="Ledger.Conway.Conformance.Properties.html#4233" class="Bound">A</a> <a id="4332" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4334" href="Ledger.Conway.Conformance.Properties.html#4235" class="Bound">V</a><a id="4335" class="Symbol">)</a> <a id="4337" class="Symbol">→</a> <a id="4339" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4352" href="Function.Base.html#704" class="Function">id</a> <a id="4355" class="Symbol">(</a><a id="4356" href="Ledger.Conway.Conformance.Properties.html#4322" class="Bound">d₁</a> <a id="4359" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="4362" href="Ledger.Conway.Conformance.Properties.html#4325" class="Bound">d₂</a><a id="4364" class="Symbol">)</a> <a id="4366" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4368" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4381" href="Function.Base.html#704" class="Function">id</a> <a id="4384" href="Ledger.Conway.Conformance.Properties.html#4322" class="Bound">d₁</a> <a id="4387" href="Class.Semigroup.Core.html#173" class="Field Operator">◇</a> <a id="4389" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4402" href="Function.Base.html#704" class="Function">id</a> <a id="4405" href="Ledger.Conway.Conformance.Properties.html#4325" class="Bound">d₂</a><a id="4407" class="Symbol">)</a>
    <a id="4413" class="Symbol">(</a><a id="4414" href="Ledger.Conway.Conformance.Properties.html#4414" class="Bound">indexedSum-⊆</a> <a id="4427" class="Symbol">:</a> <a id="4429" class="Symbol">∀</a> <a id="4431" class="Symbol">{</a><a id="4432" href="Ledger.Conway.Conformance.Properties.html#4432" class="Bound">A</a> <a id="4434" class="Symbol">:</a> <a id="4436" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="4440" class="Symbol">}</a> <a id="4442" class="Symbol">⦃</a> <a id="4444" href="Ledger.Conway.Conformance.Properties.html#4444" class="Bound">_</a> <a id="4446" class="Symbol">:</a> <a id="4448" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="4454" href="Ledger.Conway.Conformance.Properties.html#4432" class="Bound">A</a> <a id="4456" class="Symbol">⦄</a> <a id="4458" class="Symbol">(</a><a id="4459" href="Ledger.Conway.Conformance.Properties.html#4459" class="Bound">d</a> <a id="4461" href="Ledger.Conway.Conformance.Properties.html#4461" class="Bound">d&#39;</a> <a id="4464" class="Symbol">:</a> <a id="4466" href="Ledger.Conway.Conformance.Properties.html#4432" class="Bound">A</a> <a id="4468" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="4470" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="4471" class="Symbol">)</a> <a id="4473" class="Symbol">→</a> <a id="4475" href="Ledger.Conway.Conformance.Properties.html#4459" class="Bound">d</a> <a id="4477" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="4479" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="4481" href="Ledger.Conway.Conformance.Properties.html#4461" class="Bound">d&#39;</a> <a id="4484" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a>
      <a id="4492" class="Symbol">→</a> <a id="4494" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4507" href="Function.Base.html#704" class="Function">id</a> <a id="4510" href="Ledger.Conway.Conformance.Properties.html#4459" class="Bound">d</a> <a id="4512" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="4514" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">indexedSumᵛ&#39;</a> <a id="4527" href="Function.Base.html#704" class="Function">id</a> <a id="4530" href="Ledger.Conway.Conformance.Properties.html#4461" class="Bound">d&#39;</a><a id="4532" class="Symbol">)</a> <a id="4534" class="Comment">-- technically we could use an ordered monoid instead of ℕ</a>
    <a id="4597" class="Keyword">where</a>
    <a id="4607" class="Keyword">open</a> <a id="4612" class="Keyword">import</a> <a id="4619" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="4651" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a> <a id="4655" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a>
    <a id="4663" class="Keyword">open</a> <a id="4668" class="Keyword">import</a> <a id="4675" href="Ledger.Conway.Conformance.Utxo.Properties.html" class="Module">Ledger.Conway.Conformance.Utxo.Properties</a> <a id="4717" href="Ledger.Conway.Conformance.Properties.html#173" class="Bound">txs</a> <a id="4721" href="Ledger.Conway.Conformance.Properties.html#217" class="Bound">abs</a>

  <a id="4728" class="Comment">--   propose-ChangePP-hasGroup : ∀ {up prop}</a>
  <a id="4775" class="Comment">--     → prop ∈ txb → prop .GovProposal.action ≡ ChangePParams up → updateGroups up ≢ ∅</a>
  <a id="4865" class="Comment">--   propose-ChangePP-hasGroup = {!!}</a>

  <a id="4906" class="Comment">-- Block properties</a>

  <a id="4929" class="Keyword">module</a> <a id="4936" href="Ledger.Conway.Conformance.Properties.html#4936" class="Module">_</a> <a id="4938" class="Symbol">{</a><a id="4939" href="Ledger.Conway.Conformance.Properties.html#4939" class="Bound">b</a><a id="4940" class="Symbol">}</a> <a id="4942" class="Symbol">(</a><a id="4943" href="Ledger.Conway.Conformance.Properties.html#4943" class="Bound">valid</a> <a id="4949" class="Symbol">:</a> <a id="4951" href="Ledger.Conway.Conformance.Properties.html#1995" class="Function">validBlockIn</a> <a id="4964" href="Ledger.Conway.Conformance.Properties.html#3810" class="Bound">s</a> <a id="4966" href="Ledger.Conway.Conformance.Properties.html#4939" class="Bound">b</a><a id="4967" class="Symbol">)</a> <a id="4969" class="Symbol">(</a><a id="4970" class="Keyword">let</a> <a id="4974" class="Keyword">open</a> <a id="4979" href="Ledger.Conway.Conformance.Chain.html#750" class="Module">Block</a> <a id="4985" href="Ledger.Conway.Conformance.Properties.html#4939" class="Bound">b</a><a id="4986" class="Symbol">)</a> <a id="4988" class="Keyword">where</a>
    <a id="4998" href="Ledger.Conway.Conformance.Properties.html#4998" class="Function">isNewEpochBlock</a> <a id="5014" class="Symbol">:</a> <a id="5016" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="5025" href="Ledger.Conway.Conformance.Properties.html#4998" class="Function">isNewEpochBlock</a> <a id="5041" class="Symbol">=</a> <a id="5043" href="Ledger.Conway.Types.Epoch.html#804" class="Function">epoch</a> <a id="5049" href="Ledger.Conway.Conformance.Chain.html#803" class="Function">slot</a> <a id="5054" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5056" href="Ledger.Conway.Types.Epoch.html#913" class="Function">sucᵉ</a> <a id="5061" href="Ledger.Conway.Conformance.Epoch.html#1332" class="Function">lastEpoch</a>

    <a id="5076" href="Ledger.Conway.Conformance.Properties.html#5076" class="Function">newChainState</a> <a id="5090" class="Symbol">:</a> <a id="5092" href="Ledger.Conway.Conformance.Chain.html#673" class="Record">ChainState</a>
    <a id="5107" href="Ledger.Conway.Conformance.Properties.html#5076" class="Function">newChainState</a> <a id="5121" class="Symbol">=</a> <a id="5123" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5129" href="Ledger.Conway.Conformance.Properties.html#4943" class="Bound">valid</a>

    <a id="5140" class="Comment">-- enact-change⇒newEpoch : es ≢ getEnactState newChainState → isNewEpochBlock</a>
    <a id="5222" class="Comment">-- enact-change⇒newEpoch = {!!}</a>

  <a id="5257" class="Comment">-- Invariant properties</a>

  <a id="5284" href="Ledger.Conway.Conformance.Properties.html#5284" class="Function">action-deposits≡actions-prop</a> <a id="5313" class="Symbol">:</a> <a id="5315" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5322" href="Ledger.Conway.Conformance.Properties.html#5284" class="Function">action-deposits≡actions-prop</a> <a id="5351" class="Symbol">=</a> <a id="5353" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="5361" href="Ledger.Conway.Conformance.Properties.html#972" class="Function">isGADeposit</a> <a id="5373" class="Symbol">(</a><a id="5374" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5378" class="Symbol">(</a><a id="5379" href="Ledger.Conway.Utxo.html#2823" class="Field">UTxOState.deposits</a> <a id="5398" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a><a id="5404" class="Symbol">))</a>
    <a id="5411" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5413" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="5422" class="Symbol">(</a><a id="5423" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="5427" class="Symbol">(λ</a> <a id="5430" class="Keyword">where</a> <a id="5436" class="Symbol">(</a><a id="5437" href="Ledger.Conway.Conformance.Properties.html#5437" class="Bound">id</a> <a id="5440" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5442" class="Symbol">_)</a> <a id="5445" class="Symbol">→</a> <a id="5447" href="Ledger.Conway.Certs.html#517" class="InductiveConstructor">GovActionDeposit</a> <a id="5464" href="Ledger.Conway.Conformance.Properties.html#5437" class="Bound">id</a><a id="5466" class="Symbol">)</a> <a id="5468" href="Ledger.Conway.Conformance.Ledger.html#805" class="Function">govSt</a><a id="5473" class="Symbol">)</a>

  <a id="5478" href="Ledger.Conway.Conformance.Properties.html#5478" class="Function">dom-rwds≡credDeposits</a> <a id="5500" class="Symbol">:</a> <a id="5502" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5509" href="Ledger.Conway.Conformance.Properties.html#5478" class="Function">dom-rwds≡credDeposits</a> <a id="5531" class="Symbol">=</a> <a id="5533" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="5541" href="Ledger.Conway.Conformance.Properties.html#629" class="Function">isCredDeposit</a> <a id="5555" class="Symbol">(</a><a id="5556" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5560" class="Symbol">(</a><a id="5561" href="Ledger.Conway.Utxo.html#2823" class="Field">UTxOState.deposits</a> <a id="5580" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a><a id="5586" class="Symbol">))</a>
    <a id="5593" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5595" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="5600" href="Ledger.Conway.Certs.html#358" class="InductiveConstructor">CredentialDeposit</a> <a id="5618" class="Symbol">(</a><a id="5619" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5623" href="Ledger.Conway.Conformance.Certs.html#693" class="Function">rewards</a><a id="5630" class="Symbol">)</a>

  <a id="5635" href="Ledger.Conway.Conformance.Properties.html#5635" class="Function">pp-wellFormed</a> <a id="5649" class="Symbol">:</a> <a id="5651" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5658" href="Ledger.Conway.Conformance.Properties.html#5635" class="Function">pp-wellFormed</a> <a id="5672" class="Symbol">=</a> <a id="5674" href="Ledger.Conway.PParams.html#4358" class="Function">paramsWellFormed</a> <a id="5691" href="Ledger.Conway.Conformance.Properties.html#4032" class="Function">pparams</a>

<a id="5700" class="Comment">-- action-deposits≡actions-inv : ChainInvariant action-deposits≡actions-prop</a>
<a id="5777" class="Comment">-- action-deposits≡actions-inv = {!!}</a>

<a id="5816" class="Comment">-- dom-rwds≡credDeposits-inv : ChainInvariant dom-rwds≡credDeposits</a>
<a id="5884" class="Comment">-- dom-rwds≡credDeposits-inv = {!!}</a>

<a id="5921" class="Comment">-- pp-wellFormed-inv : ChainInvariant pp-wellFormed</a>
<a id="5973" class="Comment">-- pp-wellFormed-inv = {!!}</a>

<a id="6002" class="Comment">-- Epoch boundary properties</a>

<a id="6032" class="Comment">-- module _ {Γ es e es&#39;} (step : Γ ⊢ es ⇀⦇ e ,NEWEPOCH⦈ es&#39;) where</a>
<a id="6099" class="Comment">--   dom-rwds-const : dom (getRewards es) ≡ dom (getRewards es&#39;)</a>
<a id="6164" class="Comment">--   dom-rwds-const = {!!}</a>

<a id="6192" class="Comment">--   prop≡∅⇒activeDReps-const : getGovState es ≡ [] → activeDReps e es ≡ᵉ activeDReps (sucᵉ e) es&#39;</a>
<a id="6291" class="Comment">--   prop≡∅⇒activeDReps-const = {!!}</a>
</pre></body></html>