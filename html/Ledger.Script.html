<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Script</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.Morphism.html" class="Module">Algebra.Morphism</a>
<a id="55" class="Keyword">open</a> <a id="60" class="Keyword">import</a> <a id="67" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="96" class="Keyword">using</a> <a id="102" class="Symbol">(</a><a id="103" href="Data.List.Relation.Unary.All.html#1644" class="Datatype">All</a><a id="106" class="Symbol">;</a> <a id="108" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor">[]</a><a id="110" class="Symbol">;</a> <a id="112" href="Data.List.Relation.Unary.All.html#1724" class="InductiveConstructor Operator">_∷_</a><a id="115" class="Symbol">;</a> <a id="117" href="Data.List.Relation.Unary.All.html#6425" class="Function">all?</a><a id="121" class="Symbol">;</a> <a id="123" href="Data.List.Relation.Unary.All.html#2478" class="Function">uncons</a><a id="129" class="Symbol">)</a>
<a id="131" class="Keyword">open</a> <a id="136" class="Keyword">import</a> <a id="143" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a>
<a id="172" class="Keyword">open</a> <a id="177" class="Keyword">import</a> <a id="184" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="204" class="Keyword">using</a> <a id="210" class="Symbol">(</a><a id="211" href="Data.Nat.Properties.html#17331" class="Function">+-0-commutativeMonoid</a><a id="232" class="Symbol">;</a> <a id="234" href="Data.Nat.Properties.html#3266" class="Function">suc-injective</a><a id="247" class="Symbol">)</a>

<a id="250" class="Keyword">open</a> <a id="255" class="Keyword">import</a> <a id="262" href="stdlib.Data.List.Relation.Unary.MOf.html" class="Module">stdlib.Data.List.Relation.Unary.MOf</a>

<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>
<a id="331" class="Keyword">open</a> <a id="336" class="Keyword">import</a> <a id="343" href="Tactic.Inline.html" class="Module">Tactic.Inline</a>

<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="385" class="Keyword">hiding</a> <a id="392" class="Symbol">(</a><a id="393" href="Axiom.Set.html#9724" class="Function">All</a><a id="396" class="Symbol">;</a> <a id="398" href="Axiom.Set.html#9793" class="Function">Any</a><a id="401" class="Symbol">;</a> <a id="403" href="Axiom.Set.html#10821" class="Function">all?</a><a id="407" class="Symbol">;</a> <a id="409" href="Axiom.Set.html#10895" class="Function">any?</a><a id="413" class="Symbol">;</a> <a id="415" href="Data.List.Base.html#7451" class="Function Operator">_∷ʳ_</a><a id="419" class="Symbol">;</a> <a id="421" href="Data.List.Base.html#8345" class="Function">uncons</a><a id="427" class="Symbol">;</a> <a id="429" href="Interface.HasSubset.html#158" class="Field Operator">_⊆_</a><a id="432" class="Symbol">)</a>
<a id="434" class="Keyword">open</a> <a id="439" class="Keyword">import</a> <a id="446" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="460" class="Keyword">open</a> <a id="465" class="Keyword">import</a> <a id="472" href="Ledger.Types.Epoch.html" class="Module">Ledger.Types.Epoch</a>

<a id="492" class="Keyword">module</a> <a id="499" href="Ledger.Script.html" class="Module">Ledger.Script</a>
  <a id="515" class="Symbol">(</a><a id="516" href="Ledger.Script.html#516" class="Bound">crypto</a> <a id="523" class="Symbol">:</a> <a id="525" class="Symbol">_)</a> <a id="528" class="Symbol">(</a><a id="529" class="Keyword">open</a> <a id="534" href="Ledger.Crypto.html#1043" class="Module">Crypto</a> <a id="541" href="Ledger.Script.html#516" class="Bound">crypto</a><a id="547" class="Symbol">)</a>
  <a id="551" class="Symbol">(</a><a id="552" href="Ledger.Script.html#552" class="Bound">es</a>     <a id="559" class="Symbol">:</a> <a id="561" class="Symbol">_)</a> <a id="564" class="Symbol">(</a><a id="565" class="Keyword">open</a> <a id="570" href="Ledger.Types.Epoch.html#475" class="Module">EpochStructure</a> <a id="585" href="Ledger.Script.html#552" class="Bound">es</a><a id="587" class="Symbol">)</a>
  <a id="591" class="Keyword">where</a>

<a id="598" class="Keyword">record</a> <a id="P1ScriptStructure"></a><a id="605" href="Ledger.Script.html#605" class="Record">P1ScriptStructure</a> <a id="623" class="Symbol">:</a> <a id="625" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="631" class="Keyword">where</a>
  <a id="639" class="Keyword">field</a> <a id="P1ScriptStructure.P1Script"></a><a id="645" href="Ledger.Script.html#645" class="Field">P1Script</a> <a id="654" class="Symbol">:</a> <a id="656" href="Agda.Primitive.html#388" class="Primitive">Type</a>
        <a id="P1ScriptStructure.validP1Script"></a><a id="669" href="Ledger.Script.html#669" class="Field">validP1Script</a> <a id="683" class="Symbol">:</a> <a id="685" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="687" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="695" class="Symbol">→</a> <a id="697" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="703" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a> <a id="708" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="710" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="716" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a> <a id="721" class="Symbol">→</a> <a id="723" href="Ledger.Script.html#645" class="Field">P1Script</a> <a id="732" class="Symbol">→</a> <a id="734" href="Agda.Primitive.html#388" class="Primitive">Type</a>
        <a id="747" class="Symbol">⦃</a> <a id="P1ScriptStructure.Dec-validP1Script"></a><a id="749" href="Ledger.Script.html#749" class="Field">Dec-validP1Script</a> <a id="767" class="Symbol">⦄</a> <a id="769" class="Symbol">:</a> <a id="771" href="Ledger.Script.html#669" class="Field">validP1Script</a> <a id="785" href="Class.Decidable.Core.html#784" class="Function Operator">⁇³</a>
        <a id="796" class="Symbol">⦃</a> <a id="P1ScriptStructure.Hashable-P1Script"></a><a id="798" href="Ledger.Script.html#798" class="Field">Hashable-P1Script</a> <a id="816" class="Symbol">⦄</a> <a id="818" class="Symbol">:</a> <a id="820" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="829" href="Ledger.Script.html#645" class="Field">P1Script</a> <a id="838" href="Ledger.Crypto.html#1166" class="Field">ScriptHash</a>
        <a id="857" class="Symbol">⦃</a> <a id="P1ScriptStructure.DecEq-P1Script"></a><a id="859" href="Ledger.Script.html#859" class="Field">DecEq-P1Script</a>    <a id="877" class="Symbol">⦄</a> <a id="879" class="Symbol">:</a> <a id="881" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="887" href="Ledger.Script.html#645" class="Field">P1Script</a>

<a id="897" class="Keyword">record</a> <a id="PlutusStructure"></a><a id="904" href="Ledger.Script.html#904" class="Record">PlutusStructure</a> <a id="920" class="Symbol">:</a> <a id="922" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="928" class="Keyword">where</a>
  <a id="936" class="Keyword">field</a> <a id="PlutusStructure.Dataʰ"></a><a id="942" href="Ledger.Script.html#942" class="Field">Dataʰ</a> <a id="948" class="Symbol">:</a> <a id="950" href="Ledger.Crypto.html#382" class="Record">HashableSet</a>
        <a id="PlutusStructure.Language"></a><a id="970" href="Ledger.Script.html#970" class="Field">Language</a> <a id="PlutusStructure.PlutusScript"></a><a id="979" href="Ledger.Script.html#979" class="Field">PlutusScript</a> <a id="PlutusStructure.CostModel"></a><a id="992" href="Ledger.Script.html#992" class="Field">CostModel</a> <a id="PlutusStructure.Prices"></a><a id="1002" href="Ledger.Script.html#1002" class="Field">Prices</a> <a id="PlutusStructure.LangDepView"></a><a id="1009" href="Ledger.Script.html#1009" class="Field">LangDepView</a> <a id="PlutusStructure.ExUnits"></a><a id="1021" href="Ledger.Script.html#1021" class="Field">ExUnits</a> <a id="1029" class="Symbol">:</a> <a id="1031" href="Agda.Primitive.html#388" class="Primitive">Type</a>
        <a id="PlutusStructure.PlutusV1"></a><a id="1044" href="Ledger.Script.html#1044" class="Field">PlutusV1</a> <a id="PlutusStructure.PlutusV2"></a><a id="1053" href="Ledger.Script.html#1053" class="Field">PlutusV2</a> <a id="PlutusStructure.PlutusV3"></a><a id="1062" href="Ledger.Script.html#1062" class="Field">PlutusV3</a>   <a id="1073" class="Symbol">:</a> <a id="1075" href="Ledger.Script.html#970" class="Field">Language</a>
        <a id="1092" class="Symbol">⦃</a> <a id="PlutusStructure.ExUnit-CommutativeMonoid"></a><a id="1094" href="Ledger.Script.html#1094" class="Field">ExUnit-CommutativeMonoid</a> <a id="1119" class="Symbol">⦄</a> <a id="1121" class="Symbol">:</a> <a id="1123" href="Class.CommutativeMonoid.Core.html#191" class="Record">CommutativeMonoid</a> <a id="1141" href="Level.html#521" class="Function">0ℓ</a> <a id="1144" href="Level.html#521" class="Function">0ℓ</a> <a id="1147" href="Ledger.Script.html#1021" class="Field">ExUnits</a>
        <a id="1163" class="Symbol">⦃</a> <a id="PlutusStructure.Hashable-PlutusScript"></a><a id="1165" href="Ledger.Script.html#1165" class="Field">Hashable-PlutusScript</a>    <a id="1190" class="Symbol">⦄</a> <a id="1192" class="Symbol">:</a> <a id="1194" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="1203" href="Ledger.Script.html#979" class="Field">PlutusScript</a> <a id="1216" href="Ledger.Crypto.html#1166" class="Field">ScriptHash</a>
        <a id="1235" class="Symbol">⦃</a> <a id="PlutusStructure.DecEq-Language"></a><a id="1237" href="Ledger.Script.html#1237" class="Field">DecEq-Language</a>           <a id="1262" class="Symbol">⦄</a> <a id="1264" class="Symbol">:</a> <a id="1266" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="1272" href="Ledger.Script.html#970" class="Field">Language</a>
        <a id="1289" class="Symbol">⦃</a> <a id="PlutusStructure.DecEq-CostModel"></a><a id="1291" href="Ledger.Script.html#1291" class="Field">DecEq-CostModel</a>          <a id="1316" class="Symbol">⦄</a> <a id="1318" class="Symbol">:</a> <a id="1320" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="1326" href="Ledger.Script.html#992" class="Field">CostModel</a>
        <a id="1344" class="Symbol">⦃</a> <a id="PlutusStructure.DecEq-LangDepView"></a><a id="1346" href="Ledger.Script.html#1346" class="Field">DecEq-LangDepView</a>        <a id="1371" class="Symbol">⦄</a> <a id="1373" class="Symbol">:</a> <a id="1375" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="1381" href="Ledger.Script.html#1009" class="Field">LangDepView</a>
        <a id="1401" class="Symbol">⦃</a> <a id="PlutusStructure.Show-CostModel"></a><a id="1403" href="Ledger.Script.html#1403" class="Field">Show-CostModel</a>           <a id="1428" class="Symbol">⦄</a> <a id="1430" class="Symbol">:</a> <a id="1432" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="1437" href="Ledger.Script.html#992" class="Field">CostModel</a>

  <a id="1450" class="Keyword">field</a>  <a id="PlutusStructure._≥ᵉ_"></a><a id="1457" href="Ledger.Script.html#1457" class="Field Operator">_≥ᵉ_</a>              <a id="1475" class="Symbol">:</a> <a id="1477" href="Ledger.Script.html#1021" class="Field">ExUnits</a> <a id="1485" class="Symbol">→</a> <a id="1487" href="Ledger.Script.html#1021" class="Field">ExUnits</a> <a id="1495" class="Symbol">→</a> <a id="1497" href="Agda.Primitive.html#388" class="Primitive">Type</a>
         <a id="1511" class="Symbol">⦃</a> <a id="PlutusStructure.DecEq-ExUnits"></a><a id="1513" href="Ledger.Script.html#1513" class="Field">DecEq-ExUnits</a> <a id="1527" class="Symbol">⦄</a> <a id="1529" class="Symbol">:</a> <a id="1531" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="1537" href="Ledger.Script.html#1021" class="Field">ExUnits</a>
         <a id="1554" class="Symbol">⦃</a> <a id="PlutusStructure.DecEQ-Prices"></a><a id="1556" href="Ledger.Script.html#1556" class="Field">DecEQ-Prices</a>  <a id="1570" class="Symbol">⦄</a> <a id="1572" class="Symbol">:</a> <a id="1574" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="1580" href="Ledger.Script.html#1002" class="Field">Prices</a>
         <a id="1596" class="Symbol">⦃</a> <a id="PlutusStructure.Show-ExUnits"></a><a id="1598" href="Ledger.Script.html#1598" class="Field">Show-ExUnits</a>  <a id="1612" class="Symbol">⦄</a> <a id="1614" class="Symbol">:</a> <a id="1616" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="1621" href="Ledger.Script.html#1021" class="Field">ExUnits</a>
         <a id="1638" class="Symbol">⦃</a> <a id="PlutusStructure.Show-Prices"></a><a id="1640" href="Ledger.Script.html#1640" class="Field">Show-Prices</a>   <a id="1654" class="Symbol">⦄</a> <a id="1656" class="Symbol">:</a> <a id="1658" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="1663" href="Ledger.Script.html#1002" class="Field">Prices</a>

  <a id="1673" class="Keyword">open</a> <a id="1678" href="Ledger.Crypto.html#382" class="Module">HashableSet</a> <a id="1690" href="Ledger.Script.html#942" class="Field">Dataʰ</a> <a id="1696" class="Keyword">renaming</a> <a id="1705" class="Symbol">(</a><a id="1706" href="Ledger.Crypto.html#444" class="Field">T</a> <a id="1708" class="Symbol">to</a> <a id="1711" class="Field">Data</a><a id="1715" class="Symbol">;</a> <a id="1717" href="Ledger.Crypto.html#176" class="Function">THash</a> <a id="1723" class="Symbol">to</a> <a id="1726" class="Function">DataHash</a><a id="1734" class="Symbol">)</a> <a id="1736" class="Keyword">public</a>

  <a id="1746" class="Comment">-- Type aliases for Data</a>
  <a id="PlutusStructure.Datum"></a><a id="1773" href="Ledger.Script.html#1773" class="Function">Datum</a>    <a id="1782" class="Symbol">=</a> <a id="1784" href="Ledger.Script.html#1711" class="Function">Data</a>
  <a id="PlutusStructure.Redeemer"></a><a id="1791" href="Ledger.Script.html#1791" class="Function">Redeemer</a> <a id="1800" class="Symbol">=</a> <a id="1802" href="Ledger.Script.html#1711" class="Function">Data</a>

  <a id="1810" class="Keyword">field</a> <a id="PlutusStructure.validPlutusScript"></a><a id="1816" href="Ledger.Script.html#1816" class="Field">validPlutusScript</a> <a id="1834" class="Symbol">:</a> <a id="1836" href="Ledger.Script.html#992" class="Field">CostModel</a> <a id="1846" class="Symbol">→</a> <a id="1848" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1853" href="Ledger.Script.html#1711" class="Function">Data</a> <a id="1858" class="Symbol">→</a> <a id="1860" href="Ledger.Script.html#1021" class="Field">ExUnits</a> <a id="1868" class="Symbol">→</a> <a id="1870" href="Ledger.Script.html#979" class="Field">PlutusScript</a> <a id="1883" class="Symbol">→</a> <a id="1885" href="Agda.Primitive.html#388" class="Primitive">Type</a>
        <a id="1898" class="Symbol">⦃</a> <a id="PlutusStructure.Dec-validPlutusScript"></a><a id="1900" href="Ledger.Script.html#1900" class="Field">Dec-validPlutusScript</a> <a id="1922" class="Symbol">⦄</a> <a id="1924" class="Symbol">:</a> <a id="1926" class="Symbol">∀</a> <a id="1928" class="Symbol">{</a><a id="1929" href="Ledger.Script.html#1929" class="Bound">x</a><a id="1930" class="Symbol">}</a> <a id="1932" class="Symbol">→</a> <a id="1934" class="Symbol">(</a><a id="1935" href="Ledger.Script.html#1816" class="Field">validPlutusScript</a> <a id="1953" href="Ledger.Script.html#1929" class="Bound">x</a> <a id="1955" href="Class.Decidable.Core.html#784" class="Function Operator">⁇³</a><a id="1957" class="Symbol">)</a>
        <a id="PlutusStructure.language"></a><a id="1967" href="Ledger.Script.html#1967" class="Field">language</a> <a id="1976" class="Symbol">:</a> <a id="1978" href="Ledger.Script.html#979" class="Field">PlutusScript</a> <a id="1991" class="Symbol">→</a> <a id="1993" href="Ledger.Script.html#970" class="Field">Language</a>
        <a id="PlutusStructure.toData"></a><a id="2010" href="Ledger.Script.html#2010" class="Field">toData</a> <a id="2017" class="Symbol">:</a> <a id="2019" class="Symbol">∀</a> <a id="2021" class="Symbol">{</a><a id="2022" href="Ledger.Script.html#2022" class="Bound">A</a> <a id="2024" class="Symbol">:</a> <a id="2026" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="2030" class="Symbol">}</a> <a id="2032" class="Symbol">→</a> <a id="2034" href="Ledger.Script.html#2022" class="Bound">A</a> <a id="2036" class="Symbol">→</a> <a id="2038" href="Ledger.Script.html#1711" class="Function">Data</a>


<a id="2045" class="Keyword">data</a> <a id="Timelock"></a><a id="2050" href="Ledger.Script.html#2050" class="Datatype">Timelock</a> <a id="2059" class="Symbol">:</a> <a id="2061" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2066" class="Keyword">where</a>
  <a id="Timelock.RequireAllOf"></a><a id="2074" href="Ledger.Script.html#2074" class="InductiveConstructor">RequireAllOf</a>       <a id="2093" class="Symbol">:</a> <a id="2095" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2100" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>      <a id="2114" class="Symbol">→</a> <a id="2116" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>
  <a id="Timelock.RequireAnyOf"></a><a id="2127" href="Ledger.Script.html#2127" class="InductiveConstructor">RequireAnyOf</a>       <a id="2146" class="Symbol">:</a> <a id="2148" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2153" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>      <a id="2167" class="Symbol">→</a> <a id="2169" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>
  <a id="Timelock.RequireMOf"></a><a id="2180" href="Ledger.Script.html#2180" class="InductiveConstructor">RequireMOf</a>         <a id="2199" class="Symbol">:</a> <a id="2201" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2203" class="Symbol">→</a> <a id="2205" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2210" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>  <a id="2220" class="Symbol">→</a> <a id="2222" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>
  <a id="Timelock.RequireSig"></a><a id="2233" href="Ledger.Script.html#2233" class="InductiveConstructor">RequireSig</a>         <a id="2252" class="Symbol">:</a> <a id="2254" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a>            <a id="2273" class="Symbol">→</a> <a id="2275" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>
  <a id="Timelock.RequireTimeStart"></a><a id="2286" href="Ledger.Script.html#2286" class="InductiveConstructor">RequireTimeStart</a>   <a id="2305" class="Symbol">:</a> <a id="2307" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a>               <a id="2326" class="Symbol">→</a> <a id="2328" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>
  <a id="Timelock.RequireTimeExpire"></a><a id="2339" href="Ledger.Script.html#2339" class="InductiveConstructor">RequireTimeExpire</a>  <a id="2358" class="Symbol">:</a> <a id="2360" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a>               <a id="2379" class="Symbol">→</a> <a id="2381" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>


<a id="2392" class="Keyword">unquoteDecl</a> <a id="DecEq-Timelock"></a><a id="2404" href="Ledger.Script.html#2404" class="Function">DecEq-Timelock</a> <a id="2419" class="Symbol">=</a> <a id="2421" href="Tactic.Derive.DecEq.html#3519" class="Function">derive-DecEq</a> <a id="2434" class="Symbol">((</a><a id="2436" class="Keyword">quote</a> <a id="2442" href="Ledger.Script.html#2050" class="Datatype">Timelock</a> <a id="2451" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2453" href="Ledger.Script.html#2404" class="Function">DecEq-Timelock</a><a id="2467" class="Symbol">)</a> <a id="2469" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2471" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2473" class="Symbol">)</a>

<a id="2476" class="Keyword">private</a> <a id="2484" class="Keyword">variable</a>
  <a id="2495" href="Ledger.Script.html#2495" class="Generalizable">s</a> <a id="2497" class="Symbol">:</a> <a id="2499" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>
  <a id="2510" href="Ledger.Script.html#2510" class="Generalizable">ss</a> <a id="2513" href="Ledger.Script.html#2513" class="Generalizable">ss&#39;</a> <a id="2517" class="Symbol">:</a> <a id="2519" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2524" href="Ledger.Script.html#2050" class="Datatype">Timelock</a>
  <a id="2535" href="Ledger.Script.html#2535" class="Generalizable">m</a> <a id="2537" class="Symbol">:</a> <a id="2539" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="2543" href="Ledger.Script.html#2543" class="Generalizable">x</a> <a id="2545" class="Symbol">:</a> <a id="2547" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a>
  <a id="2557" href="Ledger.Script.html#2557" class="Generalizable">a</a> <a id="2559" href="Ledger.Script.html#2559" class="Generalizable">l</a> <a id="2561" href="Ledger.Script.html#2561" class="Generalizable">r</a> <a id="2563" class="Symbol">:</a> <a id="2565" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a>

<a id="2571" class="Keyword">open</a> <a id="2576" class="Keyword">import</a> <a id="2583" href="Data.List.Relation.Binary.Sublist.Propositional.html" class="Module">Data.List.Relation.Binary.Sublist.Propositional</a> <a id="2631" class="Symbol">as</a> <a id="2634" class="Module">S</a>
<a id="2636" class="Keyword">import</a> <a id="2643" href="Data.Maybe.Relation.Unary.Any.html" class="Module">Data.Maybe.Relation.Unary.Any</a> <a id="2673" class="Symbol">as</a> <a id="2676" class="Module">M</a>


<a id="2680" class="Keyword">data</a>


  <a id="evalTimelock"></a><a id="2689" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="2702" class="Symbol">(</a><a id="2703" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="2707" class="Symbol">:</a> <a id="2709" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2711" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a><a id="2718" class="Symbol">)</a> <a id="2720" class="Symbol">(</a><a id="2721" href="Ledger.Script.html#2721" class="Bound">I</a> <a id="2723" class="Symbol">:</a> <a id="2725" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2731" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a> <a id="2736" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2738" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2744" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a><a id="2748" class="Symbol">)</a> <a id="2750" class="Symbol">:</a> <a id="2752" href="Ledger.Script.html#2050" class="Datatype">Timelock</a> <a id="2761" class="Symbol">→</a> <a id="2763" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2768" class="Keyword">where</a>
  <a id="evalTimelock.evalAll"></a><a id="2776" href="Ledger.Script.html#2776" class="InductiveConstructor">evalAll</a>  <a id="2785" class="Symbol">:</a> <a id="2787" href="Data.List.Relation.Unary.All.html#1644" class="Datatype">All</a> <a id="2791" class="Symbol">(</a><a id="2792" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="2805" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="2809" href="Ledger.Script.html#2721" class="Bound">I</a><a id="2810" class="Symbol">)</a> <a id="2812" href="Ledger.Script.html#2510" class="Generalizable">ss</a>
           <a id="2826" class="Symbol">→</a> <a id="2828" class="Symbol">(</a><a id="2829" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="2842" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="2846" href="Ledger.Script.html#2721" class="Bound">I</a><a id="2847" class="Symbol">)</a> <a id="2849" class="Symbol">(</a><a id="2850" href="Ledger.Script.html#2074" class="InductiveConstructor">RequireAllOf</a> <a id="2863" href="Ledger.Script.html#2510" class="Generalizable">ss</a><a id="2865" class="Symbol">)</a>
  <a id="evalTimelock.evalAny"></a><a id="2869" href="Ledger.Script.html#2869" class="InductiveConstructor">evalAny</a>  <a id="2878" class="Symbol">:</a> <a id="2880" href="Data.List.Relation.Unary.Any.html#1148" class="Datatype">Any</a> <a id="2884" class="Symbol">(</a><a id="2885" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="2898" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="2902" href="Ledger.Script.html#2721" class="Bound">I</a><a id="2903" class="Symbol">)</a> <a id="2905" href="Ledger.Script.html#2510" class="Generalizable">ss</a>
           <a id="2919" class="Symbol">→</a> <a id="2921" class="Symbol">(</a><a id="2922" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="2935" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="2939" href="Ledger.Script.html#2721" class="Bound">I</a><a id="2940" class="Symbol">)</a> <a id="2942" class="Symbol">(</a><a id="2943" href="Ledger.Script.html#2127" class="InductiveConstructor">RequireAnyOf</a> <a id="2956" href="Ledger.Script.html#2510" class="Generalizable">ss</a><a id="2958" class="Symbol">)</a>
  <a id="evalTimelock.evalMOf"></a><a id="2962" href="Ledger.Script.html#2962" class="InductiveConstructor">evalMOf</a>  <a id="2971" class="Symbol">:</a> <a id="2973" href="stdlib.Data.List.Relation.Unary.MOf.html#1135" class="Datatype">MOf</a> <a id="2977" href="Ledger.Script.html#2535" class="Generalizable">m</a> <a id="2979" class="Symbol">(</a><a id="2980" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="2993" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="2997" href="Ledger.Script.html#2721" class="Bound">I</a><a id="2998" class="Symbol">)</a> <a id="3000" href="Ledger.Script.html#2510" class="Generalizable">ss</a>
           <a id="3014" class="Symbol">→</a> <a id="3016" class="Symbol">(</a><a id="3017" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="3030" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="3034" href="Ledger.Script.html#2721" class="Bound">I</a><a id="3035" class="Symbol">)</a> <a id="3037" class="Symbol">(</a><a id="3038" href="Ledger.Script.html#2180" class="InductiveConstructor">RequireMOf</a> <a id="3049" href="Ledger.Script.html#2535" class="Generalizable">m</a> <a id="3051" href="Ledger.Script.html#2510" class="Generalizable">ss</a><a id="3053" class="Symbol">)</a>
  <a id="evalTimelock.evalSig"></a><a id="3057" href="Ledger.Script.html#3057" class="InductiveConstructor">evalSig</a>  <a id="3066" class="Symbol">:</a> <a id="3068" href="Ledger.Script.html#2543" class="Generalizable">x</a> <a id="3070" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="3072" href="Ledger.Script.html#2703" class="Bound">khs</a>
           <a id="3087" class="Symbol">→</a> <a id="3089" class="Symbol">(</a><a id="3090" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="3103" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="3107" href="Ledger.Script.html#2721" class="Bound">I</a><a id="3108" class="Symbol">)</a> <a id="3110" class="Symbol">(</a><a id="3111" href="Ledger.Script.html#2233" class="InductiveConstructor">RequireSig</a> <a id="3122" href="Ledger.Script.html#2543" class="Generalizable">x</a><a id="3123" class="Symbol">)</a>
  <a id="evalTimelock.evalTSt"></a><a id="3127" href="Ledger.Script.html#3127" class="InductiveConstructor">evalTSt</a>  <a id="3136" class="Symbol">:</a> <a id="3138" href="Data.Maybe.Relation.Unary.Any.html#835" class="Datatype">M.Any</a> <a id="3144" class="Symbol">(</a><a id="3145" href="Ledger.Script.html#2557" class="Generalizable">a</a> <a id="3147" href="Class.HasOrder.Core.html#608" class="Field Operator">≤_</a><a id="3149" class="Symbol">)</a> <a id="3151" class="Symbol">(</a><a id="3152" href="Ledger.Script.html#2721" class="Bound">I</a> <a id="3154" class="Symbol">.</a><a id="3155" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="3160" class="Symbol">)</a>
           <a id="3173" class="Symbol">→</a> <a id="3175" class="Symbol">(</a><a id="3176" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="3189" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="3193" href="Ledger.Script.html#2721" class="Bound">I</a><a id="3194" class="Symbol">)</a> <a id="3196" class="Symbol">(</a><a id="3197" href="Ledger.Script.html#2286" class="InductiveConstructor">RequireTimeStart</a> <a id="3214" href="Ledger.Script.html#2557" class="Generalizable">a</a><a id="3215" class="Symbol">)</a>
  <a id="evalTimelock.evalTEx"></a><a id="3219" href="Ledger.Script.html#3219" class="InductiveConstructor">evalTEx</a>  <a id="3228" class="Symbol">:</a> <a id="3230" href="Data.Maybe.Relation.Unary.Any.html#835" class="Datatype">M.Any</a> <a id="3236" class="Symbol">(</a><a id="3237" href="Class.HasOrder.Core.html#608" class="Field Operator">_≤</a> <a id="3240" href="Ledger.Script.html#2557" class="Generalizable">a</a><a id="3241" class="Symbol">)</a> <a id="3243" class="Symbol">(</a><a id="3244" href="Ledger.Script.html#2721" class="Bound">I</a> <a id="3246" class="Symbol">.</a><a id="3247" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3252" class="Symbol">)</a>
           <a id="3265" class="Symbol">→</a> <a id="3267" class="Symbol">(</a><a id="3268" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="3281" href="Ledger.Script.html#2703" class="Bound">khs</a> <a id="3285" href="Ledger.Script.html#2721" class="Bound">I</a><a id="3286" class="Symbol">)</a> <a id="3288" class="Symbol">(</a><a id="3289" href="Ledger.Script.html#2339" class="InductiveConstructor">RequireTimeExpire</a> <a id="3307" href="Ledger.Script.html#2557" class="Generalizable">a</a><a id="3308" class="Symbol">)</a>


<a id="3312" class="Keyword">instance</a>
  <a id="Dec-evalTimelock"></a><a id="3323" href="Ledger.Script.html#3323" class="Function">Dec-evalTimelock</a> <a id="3340" class="Symbol">:</a> <a id="3342" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="3355" href="Class.Decidable.Core.html#784" class="Function Operator">⁇³</a>
  <a id="3360" href="Ledger.Script.html#3323" class="Function">Dec-evalTimelock</a> <a id="3377" class="Symbol">{</a><a id="3378" href="Ledger.Script.html#3378" class="Bound">khs</a><a id="3381" class="Symbol">}</a> <a id="3383" class="Symbol">{</a><a id="3384" href="Ledger.Script.html#3384" class="Bound">I</a><a id="3385" class="Symbol">}</a> <a id="3387" class="Symbol">{</a><a id="3388" href="Ledger.Script.html#3388" class="Bound">tl</a><a id="3390" class="Symbol">}</a> <a id="3392" class="Symbol">.</a><a id="3393" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="3397" class="Symbol">=</a> <a id="3399" href="Ledger.Script.html#4521" class="Function">go?</a> <a id="3403" href="Ledger.Script.html#3388" class="Bound">tl</a>
    <a id="3410" class="Keyword">where</a> <a id="3416" class="Keyword">mutual</a>
      <a id="3429" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3432" class="Symbol">=</a> <a id="3434" href="Ledger.Script.html#2689" class="Datatype">evalTimelock</a> <a id="3447" href="Ledger.Script.html#3378" class="Bound">khs</a> <a id="3451" href="Ledger.Script.html#3384" class="Bound">I</a>

      <a id="3460" class="Comment">-- ** inversion principles for `evalTimelock`</a>
      <a id="3512" href="Ledger.Script.html#3512" class="Function">evalAll˘</a> <a id="3521" class="Symbol">:</a> <a id="3523" class="Symbol">∀</a> <a id="3525" class="Symbol">{</a><a id="3526" href="Ledger.Script.html#3526" class="Bound">ss</a><a id="3528" class="Symbol">}</a> <a id="3530" class="Symbol">→</a> <a id="3532" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3535" class="Symbol">(</a><a id="3536" href="Ledger.Script.html#2074" class="InductiveConstructor">RequireAllOf</a> <a id="3549" href="Ledger.Script.html#3526" class="Bound">ss</a><a id="3551" class="Symbol">)</a> <a id="3553" class="Symbol">→</a> <a id="3555" href="Data.List.Relation.Unary.All.html#1644" class="Datatype">All</a> <a id="3559" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3562" href="Ledger.Script.html#3526" class="Bound">ss</a>
      <a id="3571" href="Ledger.Script.html#3512" class="Function">evalAll˘</a> <a id="3580" class="Symbol">(</a><a id="3581" href="Ledger.Script.html#2776" class="InductiveConstructor">evalAll</a> <a id="3589" href="Ledger.Script.html#3589" class="Bound">p</a><a id="3590" class="Symbol">)</a> <a id="3592" class="Symbol">=</a> <a id="3594" href="Ledger.Script.html#3589" class="Bound">p</a>

      <a id="3603" href="Ledger.Script.html#3603" class="Function">evalAny˘</a> <a id="3612" class="Symbol">:</a> <a id="3614" class="Symbol">∀</a> <a id="3616" class="Symbol">{</a><a id="3617" href="Ledger.Script.html#3617" class="Bound">ss</a><a id="3619" class="Symbol">}</a> <a id="3621" class="Symbol">→</a> <a id="3623" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3626" class="Symbol">(</a><a id="3627" href="Ledger.Script.html#2127" class="InductiveConstructor">RequireAnyOf</a> <a id="3640" href="Ledger.Script.html#3617" class="Bound">ss</a><a id="3642" class="Symbol">)</a> <a id="3644" class="Symbol">→</a> <a id="3646" href="Data.List.Relation.Unary.Any.html#1148" class="Datatype">Any</a> <a id="3650" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3653" href="Ledger.Script.html#3617" class="Bound">ss</a>
      <a id="3662" href="Ledger.Script.html#3603" class="Function">evalAny˘</a> <a id="3671" class="Symbol">(</a><a id="3672" href="Ledger.Script.html#2869" class="InductiveConstructor">evalAny</a> <a id="3680" href="Ledger.Script.html#3680" class="Bound">p</a><a id="3681" class="Symbol">)</a> <a id="3683" class="Symbol">=</a> <a id="3685" href="Ledger.Script.html#3680" class="Bound">p</a>

      <a id="3694" href="Ledger.Script.html#3694" class="Function">evalTSt˘</a> <a id="3703" class="Symbol">:</a> <a id="3705" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3708" class="Symbol">(</a><a id="3709" href="Ledger.Script.html#2286" class="InductiveConstructor">RequireTimeStart</a> <a id="3726" href="Ledger.Script.html#2557" class="Generalizable">a</a><a id="3727" class="Symbol">)</a> <a id="3729" class="Symbol">→</a> <a id="3731" href="Data.Maybe.Relation.Unary.Any.html#835" class="Datatype">M.Any</a> <a id="3737" class="Symbol">(</a><a id="3738" href="Ledger.Script.html#2557" class="Generalizable">a</a> <a id="3740" href="Class.HasOrder.Core.html#608" class="Field Operator">≤_</a><a id="3742" class="Symbol">)</a> <a id="3744" class="Symbol">(</a><a id="3745" href="Ledger.Script.html#3384" class="Bound">I</a> <a id="3747" class="Symbol">.</a><a id="3748" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="3753" class="Symbol">)</a>
      <a id="3761" href="Ledger.Script.html#3694" class="Function">evalTSt˘</a> <a id="3770" class="Symbol">(</a><a id="3771" href="Ledger.Script.html#3127" class="InductiveConstructor">evalTSt</a> <a id="3779" href="Ledger.Script.html#3779" class="Bound">p</a><a id="3780" class="Symbol">)</a> <a id="3782" class="Symbol">=</a> <a id="3784" href="Ledger.Script.html#3779" class="Bound">p</a>

      <a id="3793" href="Ledger.Script.html#3793" class="Function">evalTEx˘</a> <a id="3802" class="Symbol">:</a> <a id="3804" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3807" class="Symbol">(</a><a id="3808" href="Ledger.Script.html#2339" class="InductiveConstructor">RequireTimeExpire</a> <a id="3826" href="Ledger.Script.html#2557" class="Generalizable">a</a><a id="3827" class="Symbol">)</a> <a id="3829" class="Symbol">→</a> <a id="3831" href="Data.Maybe.Relation.Unary.Any.html#835" class="Datatype">M.Any</a> <a id="3837" class="Symbol">(</a><a id="3838" href="Class.HasOrder.Core.html#608" class="Field Operator">_≤</a> <a id="3841" href="Ledger.Script.html#2557" class="Generalizable">a</a><a id="3842" class="Symbol">)</a> <a id="3844" class="Symbol">(</a><a id="3845" href="Ledger.Script.html#3384" class="Bound">I</a> <a id="3847" class="Symbol">.</a><a id="3848" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3853" class="Symbol">)</a>
      <a id="3861" href="Ledger.Script.html#3793" class="Function">evalTEx˘</a> <a id="3870" class="Symbol">(</a><a id="3871" href="Ledger.Script.html#3219" class="InductiveConstructor">evalTEx</a> <a id="3879" href="Ledger.Script.html#3879" class="Bound">p</a><a id="3880" class="Symbol">)</a> <a id="3882" class="Symbol">=</a> <a id="3884" href="Ledger.Script.html#3879" class="Bound">p</a>

      <a id="3893" href="Ledger.Script.html#3893" class="Function">evalSig˘</a> <a id="3902" class="Symbol">:</a> <a id="3904" href="Ledger.Script.html#3429" class="Function">go</a> <a id="3907" class="Symbol">(</a><a id="3908" href="Ledger.Script.html#2233" class="InductiveConstructor">RequireSig</a> <a id="3919" href="Ledger.Script.html#2543" class="Generalizable">x</a><a id="3920" class="Symbol">)</a> <a id="3922" class="Symbol">→</a> <a id="3924" href="Ledger.Script.html#2543" class="Generalizable">x</a> <a id="3926" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="3928" href="Ledger.Script.html#3378" class="Bound">khs</a>
      <a id="3938" href="Ledger.Script.html#3893" class="Function">evalSig˘</a> <a id="3947" class="Symbol">(</a><a id="3948" href="Ledger.Script.html#3057" class="InductiveConstructor">evalSig</a> <a id="3956" href="Ledger.Script.html#3956" class="Bound">p</a><a id="3957" class="Symbol">)</a> <a id="3959" class="Symbol">=</a> <a id="3961" href="Ledger.Script.html#3956" class="Bound">p</a>

      <a id="3970" href="Ledger.Script.html#3970" class="Function">evalMOf˘</a> <a id="3979" class="Symbol">:</a> <a id="3981" class="Symbol">∀</a> <a id="3983" class="Symbol">{</a><a id="3984" href="Ledger.Script.html#3984" class="Bound">m</a> <a id="3986" href="Ledger.Script.html#3986" class="Bound">xs</a><a id="3988" class="Symbol">}</a>
        <a id="3998" class="Symbol">→</a> <a id="4000" href="Ledger.Script.html#3429" class="Function">go</a> <a id="4003" class="Symbol">(</a><a id="4004" href="Ledger.Script.html#2180" class="InductiveConstructor">RequireMOf</a> <a id="4015" href="Ledger.Script.html#3984" class="Bound">m</a> <a id="4017" href="Ledger.Script.html#3986" class="Bound">xs</a><a id="4019" class="Symbol">)</a>
        <a id="4029" class="Symbol">→</a> <a id="4031" href="stdlib.Data.List.Relation.Unary.MOf.html#1135" class="Datatype">MOf</a> <a id="4035" href="Ledger.Script.html#3984" class="Bound">m</a> <a id="4037" href="Ledger.Script.html#3429" class="Function">go</a> <a id="4040" href="Ledger.Script.html#3986" class="Bound">xs</a>
      <a id="4049" href="Ledger.Script.html#3970" class="Function">evalMOf˘</a> <a id="4058" class="Symbol">(</a><a id="4059" href="Ledger.Script.html#2962" class="InductiveConstructor">evalMOf</a> <a id="4067" href="Ledger.Script.html#4067" class="Bound">p</a><a id="4068" class="Symbol">)</a> <a id="4070" class="Symbol">=</a> <a id="4072" href="Ledger.Script.html#4067" class="Bound">p</a>

      <a id="4081" class="Comment">-- ** inlining recursive decision procedures to please the termination checker</a>
      <a id="4166" href="Ledger.Script.html#4166" class="Function">MOf-go?</a> <a id="4174" class="Symbol">:</a> <a id="4176" class="Symbol">∀</a> <a id="4178" href="Ledger.Script.html#4178" class="Bound">m</a> <a id="4180" href="Ledger.Script.html#4180" class="Bound">xs</a> <a id="4183" class="Symbol">→</a> <a id="4185" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="4189" class="Symbol">(</a><a id="4190" href="stdlib.Data.List.Relation.Unary.MOf.html#1135" class="Datatype">MOf</a> <a id="4194" href="Ledger.Script.html#4178" class="Bound">m</a> <a id="4196" href="Ledger.Script.html#3429" class="Function">go</a> <a id="4199" href="Ledger.Script.html#4180" class="Bound">xs</a><a id="4201" class="Symbol">)</a>
      <a id="4209" class="Keyword">unquoteDef</a> <a id="4220" href="Ledger.Script.html#4166" class="Function">MOf-go?</a> <a id="4228" class="Symbol">=</a> <a id="4230" href="Tactic.Inline.html#4646" class="Function">inline</a> <a id="4237" href="Ledger.Script.html#4166" class="Function">MOf-go?</a> <a id="4245" class="Symbol">(</a><a id="4246" class="Keyword">quoteTerm</a> <a id="4256" class="Symbol">(</a><a id="4257" href="stdlib.Data.List.Relation.Unary.MOf.html#2319" class="Function">MOf?</a> <a id="4262" href="Ledger.Script.html#4521" class="Function">go?</a><a id="4265" class="Symbol">))</a>

      <a id="4275" href="Ledger.Script.html#4275" class="Function">all-go?</a> <a id="4283" class="Symbol">:</a> <a id="4285" href="Relation.Unary.html#4543" class="Function">Decidable¹</a> <a id="4296" class="Symbol">(</a><a id="4297" href="Data.List.Relation.Unary.All.html#1644" class="Datatype">All</a> <a id="4301" href="Ledger.Script.html#3429" class="Function">go</a><a id="4303" class="Symbol">)</a>
      <a id="4311" class="Keyword">unquoteDef</a> <a id="4322" href="Ledger.Script.html#4275" class="Function">all-go?</a> <a id="4330" class="Symbol">=</a> <a id="4332" href="Tactic.Inline.html#4646" class="Function">inline</a> <a id="4339" href="Ledger.Script.html#4275" class="Function">all-go?</a> <a id="4347" class="Symbol">(</a><a id="4348" class="Keyword">quoteTerm</a> <a id="4358" class="Symbol">(</a><a id="4359" href="Data.List.Relation.Unary.All.html#6425" class="Function">all?</a> <a id="4364" href="Ledger.Script.html#4521" class="Function">go?</a><a id="4367" class="Symbol">))</a>

      <a id="4377" href="Ledger.Script.html#4377" class="Function">any-go?</a> <a id="4385" class="Symbol">:</a> <a id="4387" href="Relation.Unary.html#4543" class="Function">Decidable¹</a> <a id="4398" class="Symbol">(</a><a id="4399" href="Data.List.Relation.Unary.Any.html#1148" class="Datatype">Any</a> <a id="4403" href="Ledger.Script.html#3429" class="Function">go</a><a id="4405" class="Symbol">)</a>
      <a id="4413" class="Keyword">unquoteDef</a> <a id="4424" href="Ledger.Script.html#4377" class="Function">any-go?</a> <a id="4432" class="Symbol">=</a> <a id="4434" href="Tactic.Inline.html#4646" class="Function">inline</a> <a id="4441" href="Ledger.Script.html#4377" class="Function">any-go?</a> <a id="4449" class="Symbol">(</a><a id="4450" class="Keyword">quoteTerm</a> <a id="4460" class="Symbol">(</a><a id="4461" href="Data.List.Relation.Unary.Any.html#2684" class="Function">any?</a> <a id="4466" href="Ledger.Script.html#4521" class="Function">go?</a><a id="4469" class="Symbol">))</a>

      <a id="4479" class="Comment">-- ** the actual decision procedure</a>
      <a id="4521" href="Ledger.Script.html#4521" class="Function">go?</a> <a id="4525" class="Symbol">:</a> <a id="4527" href="Relation.Unary.html#4543" class="Function">Decidable¹</a> <a id="4538" href="Ledger.Script.html#3429" class="Function">go</a>
      <a id="4547" href="Ledger.Script.html#4521" class="Function">go?</a> <a id="4551" class="Symbol">=</a> <a id="4553" class="Symbol">λ</a> <a id="4555" class="Keyword">where</a>
        <a id="4569" class="Symbol">(</a><a id="4570" href="Ledger.Script.html#2074" class="InductiveConstructor">RequireAllOf</a> <a id="4583" href="Ledger.Script.html#4583" class="Bound">ss</a><a id="4585" class="Symbol">)</a>     <a id="4591" class="Symbol">→</a> <a id="4593" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="4600" href="Ledger.Script.html#2776" class="InductiveConstructor">evalAll</a> <a id="4608" href="Ledger.Script.html#3512" class="Function">evalAll˘</a> <a id="4617" class="Symbol">(</a><a id="4618" href="Ledger.Script.html#4275" class="Function">all-go?</a> <a id="4626" href="Ledger.Script.html#4583" class="Bound">ss</a><a id="4628" class="Symbol">)</a>
        <a id="4638" class="Symbol">(</a><a id="4639" href="Ledger.Script.html#2127" class="InductiveConstructor">RequireAnyOf</a> <a id="4652" href="Ledger.Script.html#4652" class="Bound">ss</a><a id="4654" class="Symbol">)</a>     <a id="4660" class="Symbol">→</a> <a id="4662" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="4669" href="Ledger.Script.html#2869" class="InductiveConstructor">evalAny</a> <a id="4677" href="Ledger.Script.html#3603" class="Function">evalAny˘</a> <a id="4686" class="Symbol">(</a><a id="4687" href="Ledger.Script.html#4377" class="Function">any-go?</a> <a id="4695" href="Ledger.Script.html#4652" class="Bound">ss</a><a id="4697" class="Symbol">)</a>
        <a id="4707" class="Symbol">(</a><a id="4708" href="Ledger.Script.html#2233" class="InductiveConstructor">RequireSig</a> <a id="4719" href="Ledger.Script.html#4719" class="Bound">x</a><a id="4720" class="Symbol">)</a>        <a id="4729" class="Symbol">→</a> <a id="4731" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="4738" href="Ledger.Script.html#3057" class="InductiveConstructor">evalSig</a> <a id="4746" href="Ledger.Script.html#3893" class="Function">evalSig˘</a> <a id="4755" href="Class.Decidable.Core.html#264" class="Field">dec</a>
        <a id="4767" class="Symbol">(</a><a id="4768" href="Ledger.Script.html#2286" class="InductiveConstructor">RequireTimeStart</a> <a id="4785" href="Ledger.Script.html#4785" class="Bound">a</a><a id="4786" class="Symbol">)</a>  <a id="4789" class="Symbol">→</a> <a id="4791" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="4798" href="Ledger.Script.html#3127" class="InductiveConstructor">evalTSt</a> <a id="4806" href="Ledger.Script.html#3694" class="Function">evalTSt˘</a> <a id="4815" href="Class.Decidable.Core.html#264" class="Field">dec</a>
        <a id="4827" class="Symbol">(</a><a id="4828" href="Ledger.Script.html#2339" class="InductiveConstructor">RequireTimeExpire</a> <a id="4846" href="Ledger.Script.html#4846" class="Bound">a</a><a id="4847" class="Symbol">)</a> <a id="4849" class="Symbol">→</a> <a id="4851" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="4858" href="Ledger.Script.html#3219" class="InductiveConstructor">evalTEx</a> <a id="4866" href="Ledger.Script.html#3793" class="Function">evalTEx˘</a> <a id="4875" href="Class.Decidable.Core.html#264" class="Field">dec</a>
        <a id="4887" class="Symbol">(</a><a id="4888" href="Ledger.Script.html#2180" class="InductiveConstructor">RequireMOf</a> <a id="4899" href="Ledger.Script.html#4899" class="Bound">m</a> <a id="4901" href="Ledger.Script.html#4901" class="Bound">xs</a><a id="4903" class="Symbol">)</a>     <a id="4909" class="Symbol">→</a> <a id="4911" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="4918" href="Ledger.Script.html#2962" class="InductiveConstructor">evalMOf</a> <a id="4926" href="Ledger.Script.html#3970" class="Function">evalMOf˘</a> <a id="4935" class="Symbol">(</a><a id="4936" href="Ledger.Script.html#4166" class="Function">MOf-go?</a> <a id="4944" href="Ledger.Script.html#4899" class="Bound">m</a> <a id="4946" href="Ledger.Script.html#4901" class="Bound">xs</a><a id="4948" class="Symbol">)</a>

<a id="4951" class="Keyword">record</a> <a id="ScriptStructure"></a><a id="4958" href="Ledger.Script.html#4958" class="Record">ScriptStructure</a> <a id="4974" class="Symbol">:</a> <a id="4976" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="4982" class="Keyword">where</a>

  <a id="4991" class="Keyword">field</a> <a id="ScriptStructure.p1s"></a><a id="4997" href="Ledger.Script.html#4997" class="Field">p1s</a> <a id="5001" class="Symbol">:</a> <a id="5003" href="Ledger.Script.html#605" class="Record">P1ScriptStructure</a>

  <a id="5024" class="Keyword">open</a> <a id="5029" href="Ledger.Script.html#605" class="Module">P1ScriptStructure</a> <a id="5047" href="Ledger.Script.html#4997" class="Field">p1s</a> <a id="5051" class="Keyword">public</a>

  <a id="5061" class="Keyword">field</a> <a id="ScriptStructure.hashRespectsUnion"></a><a id="5067" href="Ledger.Script.html#5067" class="Field">hashRespectsUnion</a> <a id="5085" class="Symbol">:</a>
          <a id="5097" class="Symbol">{</a><a id="5098" href="Ledger.Script.html#5098" class="Bound">A</a> <a id="5100" href="Ledger.Script.html#5100" class="Bound">B</a> <a id="5102" href="Ledger.Script.html#5102" class="Bound">Hash</a> <a id="5107" class="Symbol">:</a> <a id="5109" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="5113" class="Symbol">}</a> <a id="5115" class="Symbol">→</a> <a id="5117" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="5126" href="Ledger.Script.html#5098" class="Bound">A</a> <a id="5128" href="Ledger.Script.html#5102" class="Bound">Hash</a> <a id="5133" class="Symbol">→</a> <a id="5135" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="5144" href="Ledger.Script.html#5100" class="Bound">B</a> <a id="5146" href="Ledger.Script.html#5102" class="Bound">Hash</a> <a id="5151" class="Symbol">→</a> <a id="5153" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="5162" class="Symbol">(</a><a id="5163" href="Ledger.Script.html#5098" class="Bound">A</a> <a id="5165" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5167" href="Ledger.Script.html#5100" class="Bound">B</a><a id="5168" class="Symbol">)</a> <a id="5170" href="Ledger.Script.html#5102" class="Bound">Hash</a>

  <a id="5178" class="Keyword">field</a> <a id="ScriptStructure.ps"></a><a id="5184" href="Ledger.Script.html#5184" class="Field">ps</a> <a id="5187" class="Symbol">:</a> <a id="5189" href="Ledger.Script.html#904" class="Record">PlutusStructure</a>
  <a id="5207" class="Keyword">open</a> <a id="5212" href="Ledger.Script.html#904" class="Module">PlutusStructure</a> <a id="5228" href="Ledger.Script.html#5184" class="Field">ps</a> <a id="5231" class="Keyword">public</a>
    <a id="5242" class="Keyword">renaming</a> <a id="5251" class="Symbol">(</a> <a id="5253" href="Ledger.Script.html#979" class="Field">PlutusScript</a>       <a id="5272" class="Symbol">to</a> <a id="5275" class="Field">P2Script</a>
             <a id="5297" class="Symbol">;</a> <a id="5299" href="Ledger.Script.html#1816" class="Field">validPlutusScript</a>  <a id="5318" class="Symbol">to</a> <a id="5321" class="Field">validP2Script</a>
             <a id="5348" class="Symbol">)</a>

  <a id="ScriptStructure.Script"></a><a id="5353" href="Ledger.Script.html#5353" class="Function">Script</a> <a id="5360" class="Symbol">=</a> <a id="5362" href="Ledger.Script.html#645" class="Function">P1Script</a> <a id="5371" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5373" href="Ledger.Script.html#5275" class="Function">P2Script</a>

  <a id="5385" class="Keyword">open</a> <a id="5390" class="Keyword">import</a> <a id="5397" href="Data.Empty.html" class="Module">Data.Empty</a>
  <a id="5410" class="Keyword">open</a> <a id="5415" class="Keyword">import</a> <a id="5422" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>
  <a id="5446" class="Keyword">open</a> <a id="5451" class="Keyword">import</a> <a id="5458" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

  <a id="5499" class="Keyword">instance</a>
    <a id="ScriptStructure.Hashable-Script"></a><a id="5512" href="Ledger.Script.html#5512" class="Function">Hashable-Script</a> <a id="5528" class="Symbol">:</a> <a id="5530" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="5539" href="Ledger.Script.html#5353" class="Function">Script</a> <a id="5546" href="Ledger.Crypto.html#1166" class="Field">ScriptHash</a>
    <a id="5561" href="Ledger.Script.html#5512" class="Function">Hashable-Script</a> <a id="5577" class="Symbol">=</a> <a id="5579" href="Ledger.Script.html#5067" class="Field">hashRespectsUnion</a> <a id="5597" href="Ledger.Script.html#798" class="Function">Hashable-P1Script</a> <a id="5615" href="Ledger.Script.html#1165" class="Function">Hashable-PlutusScript</a>

</pre></body></html>