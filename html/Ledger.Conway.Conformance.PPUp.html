<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.PPUp</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="59" class="Keyword">open</a> <a id="64" class="Keyword">import</a> <a id="71" href="Algebra.html" class="Module">Algebra</a><a id="78" class="Symbol">;</a> <a id="80" class="Keyword">open</a> <a id="85" class="Keyword">import</a> <a id="92" href="stdlib.Algebra.Literals.html" class="Module">stdlib.Algebra.Literals</a>
<a id="116" class="Keyword">import</a> <a id="123" href="Data.Product.Properties.html" class="Module">Data.Product.Properties</a> <a id="147" class="Symbol">as</a> <a id="150" class="Module">×</a>
<a id="152" class="Keyword">import</a> <a id="159" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="168" class="Symbol">as</a> <a id="171" class="Module">ℕ</a><a id="172" class="Symbol">;</a> <a id="174" class="Keyword">import</a> <a id="181" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="201" class="Symbol">as</a> <a id="204" class="Module">ℕ</a>

<a id="207" class="Keyword">open</a> <a id="212" class="Keyword">import</a> <a id="219" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="234" class="Keyword">hiding</a> <a id="241" class="Symbol">(</a><a id="242" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a><a id="245" class="Symbol">)</a>
<a id="247" class="Keyword">open</a> <a id="252" class="Keyword">import</a> <a id="259" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>

<a id="279" class="Keyword">module</a> <a id="286" href="Ledger.Conway.Conformance.PPUp.html" class="Module">Ledger.Conway.Conformance.PPUp</a> <a id="317" class="Symbol">(</a><a id="318" href="Ledger.Conway.Conformance.PPUp.html#318" class="Bound">txs</a> <a id="322" class="Symbol">:</a> <a id="324" class="Symbol">_)</a> <a id="327" class="Symbol">(</a><a id="328" class="Keyword">open</a> <a id="333" href="Ledger.Transaction.html#840" class="Module">TransactionStructure</a> <a id="354" href="Ledger.Conway.Conformance.PPUp.html#318" class="Bound">txs</a><a id="357" class="Symbol">)</a> <a id="359" class="Keyword">where</a>

<a id="366" class="Keyword">open</a> <a id="371" href="Algebra.Bundles.html#18455" class="Module">Semiring</a> <a id="380" href="Ledger.Types.Epoch.html#512" class="Function">Slotʳ</a> <a id="386" class="Keyword">using</a> <a id="392" class="Symbol">(</a><a id="393" href="Algebra.Bundles.html#18634" class="Field Operator">_*_</a><a id="396" class="Symbol">)</a>
<a id="398" class="Keyword">open</a> <a id="403" href="stdlib.Algebra.Literals.html#210" class="Module">Semiring-Lit</a> <a id="416" href="Ledger.Types.Epoch.html#512" class="Function">Slotʳ</a>

<a id="423" class="Keyword">private</a> <a id="431" class="Keyword">variable</a> <a id="440" href="Ledger.Conway.Conformance.PPUp.html#440" class="Generalizable">m</a> <a id="442" href="Ledger.Conway.Conformance.PPUp.html#442" class="Generalizable">n</a> <a id="444" class="Symbol">:</a> <a id="446" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="GenesisDelegation"></a><a id="449" href="Ledger.Conway.Conformance.PPUp.html#449" class="Function">GenesisDelegation</a> <a id="467" class="Symbol">=</a> <a id="469" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="477" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="479" class="Symbol">(</a><a id="480" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a> <a id="488" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="490" href="Ledger.Crypto.html#1310" class="Function">KeyHash</a><a id="497" class="Symbol">)</a>

<a id="500" class="Keyword">record</a> <a id="PPUpdateState"></a><a id="507" href="Ledger.Conway.Conformance.PPUp.html#507" class="Record">PPUpdateState</a> <a id="521" class="Symbol">:</a> <a id="523" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="528" class="Keyword">where</a>

  <a id="537" class="Keyword">field</a>

    <a id="PPUpdateState.pup"></a><a id="548" href="Ledger.Conway.Conformance.PPUp.html#548" class="Field">pup</a>   <a id="554" class="Symbol">:</a> <a id="556" href="Ledger.Transaction.html#2438" class="Function">ProposedPPUpdates</a>
    <a id="PPUpdateState.fpup"></a><a id="578" href="Ledger.Conway.Conformance.PPUp.html#578" class="Field">fpup</a>  <a id="584" class="Symbol">:</a> <a id="586" href="Ledger.Transaction.html#2438" class="Function">ProposedPPUpdates</a>

<a id="605" class="Keyword">record</a> <a id="PPUpdateEnv"></a><a id="612" href="Ledger.Conway.Conformance.PPUp.html#612" class="Record">PPUpdateEnv</a> <a id="624" class="Symbol">:</a> <a id="626" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="631" class="Keyword">where</a>

  <a id="640" class="Keyword">field</a>

    <a id="PPUpdateEnv.slot"></a><a id="651" href="Ledger.Conway.Conformance.PPUp.html#651" class="Field">slot</a>       <a id="662" class="Symbol">:</a> <a id="664" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a>
    <a id="PPUpdateEnv.pparams"></a><a id="673" href="Ledger.Conway.Conformance.PPUp.html#673" class="Field">pparams</a>    <a id="684" class="Symbol">:</a> <a id="686" href="Ledger.PParams.html#1570" class="Record">PParams</a>
    <a id="PPUpdateEnv.genDelegs"></a><a id="698" href="Ledger.Conway.Conformance.PPUp.html#698" class="Field">genDelegs</a>  <a id="709" class="Symbol">:</a> <a id="711" href="Ledger.Conway.Conformance.PPUp.html#449" class="Function">GenesisDelegation</a>

<a id="viablePParams"></a><a id="730" href="Ledger.Conway.Conformance.PPUp.html#730" class="Function">viablePParams</a> <a id="744" class="Symbol">:</a> <a id="746" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="754" class="Symbol">→</a> <a id="756" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="761" href="Ledger.Conway.Conformance.PPUp.html#730" class="Function">viablePParams</a> <a id="775" href="Ledger.Conway.Conformance.PPUp.html#775" class="Bound">pp</a> <a id="778" class="Symbol">=</a> <a id="780" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="782" class="Comment">-- TODO: block size check</a>

<a id="isViableUpdate"></a><a id="809" href="Ledger.Conway.Conformance.PPUp.html#809" class="Function">isViableUpdate</a> <a id="824" class="Symbol">:</a> <a id="826" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="834" class="Symbol">→</a> <a id="836" href="Ledger.PParams.html#14522" class="Function">PParamsUpdate</a> <a id="850" class="Symbol">→</a> <a id="852" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="857" href="Ledger.Conway.Conformance.PPUp.html#809" class="Function">isViableUpdate</a> <a id="872" href="Ledger.Conway.Conformance.PPUp.html#872" class="Bound">pp</a> <a id="875" href="Ledger.Conway.Conformance.PPUp.html#875" class="Bound">pup</a> <a id="879" class="Keyword">with</a> <a id="884" href="Ledger.PParams.html#14088" class="Function">applyUpdate</a> <a id="896" href="Ledger.Conway.Conformance.PPUp.html#872" class="Bound">pp</a> <a id="899" href="Ledger.Conway.Conformance.PPUp.html#875" class="Bound">pup</a>
<a id="903" class="Symbol">...</a> <a id="907" class="Symbol">|</a> <a id="909" href="Ledger.Conway.Conformance.PPUp.html#909" class="Bound">pp&#39;</a> <a id="913" class="Symbol">=</a> <a id="915" href="Ledger.PParams.html#968" class="Datatype">pvCanFollow</a> <a id="927" class="Symbol">(</a><a id="928" href="Ledger.PParams.html#1917" class="Field">PParams.pv</a> <a id="939" class="Bound">pp</a><a id="941" class="Symbol">)</a> <a id="943" class="Symbol">(</a><a id="944" href="Ledger.PParams.html#1917" class="Field">PParams.pv</a> <a id="955" href="Ledger.Conway.Conformance.PPUp.html#909" class="Bound">pp&#39;</a><a id="958" class="Symbol">)</a> <a id="960" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="962" href="Ledger.Conway.Conformance.PPUp.html#730" class="Function">viablePParams</a> <a id="976" href="Ledger.Conway.Conformance.PPUp.html#909" class="Bound">pp&#39;</a>

<a id="981" class="Keyword">private</a> <a id="989" class="Keyword">variable</a>
  <a id="1000" href="Ledger.Conway.Conformance.PPUp.html#1000" class="Generalizable">Γ</a> <a id="1002" class="Symbol">:</a> <a id="1004" href="Ledger.Conway.Conformance.PPUp.html#612" class="Record">PPUpdateEnv</a>
  <a id="1018" href="Ledger.Conway.Conformance.PPUp.html#1018" class="Generalizable">s</a> <a id="1020" class="Symbol">:</a> <a id="1022" href="Ledger.Conway.Conformance.PPUp.html#507" class="Record">PPUpdateState</a>
  <a id="1038" href="Ledger.Conway.Conformance.PPUp.html#1038" class="Generalizable">e</a> <a id="1040" class="Symbol">:</a> <a id="1042" href="Ledger.Types.Epoch.html#543" class="Function">Epoch</a>
  <a id="1050" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a> <a id="1054" href="Ledger.Conway.Conformance.PPUp.html#1054" class="Generalizable">pupˢ</a> <a id="1059" href="Ledger.Conway.Conformance.PPUp.html#1059" class="Generalizable">fpupˢ</a> <a id="1065" class="Symbol">:</a> <a id="1067" href="Ledger.Transaction.html#2438" class="Function">ProposedPPUpdates</a>

<a id="1086" class="Keyword">instance</a>
  <a id="Dec-pvCanFollow"></a><a id="1097" href="Ledger.Conway.Conformance.PPUp.html#1097" class="Function">Dec-pvCanFollow</a> <a id="1113" class="Symbol">:</a> <a id="1115" href="Ledger.PParams.html#968" class="Datatype">pvCanFollow</a> <a id="1127" href="Class.Decidable.Core.html#773" class="Function Operator">⁇²</a>
  <a id="1132" href="Ledger.Conway.Conformance.PPUp.html#1097" class="Function">Dec-pvCanFollow</a> <a id="1148" class="Symbol">{(</a><a id="1150" href="Ledger.Conway.Conformance.PPUp.html#1150" class="Bound">m</a> <a id="1152" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1154" href="Ledger.Conway.Conformance.PPUp.html#1154" class="Bound">n</a><a id="1155" class="Symbol">)}</a> <a id="1158" class="Symbol">{</a><a id="1159" href="Ledger.Conway.Conformance.PPUp.html#1159" class="Bound">pv</a><a id="1161" class="Symbol">}</a> <a id="1163" class="Symbol">.</a><a id="1164" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="1168" class="Keyword">with</a> <a id="1173" href="Ledger.Conway.Conformance.PPUp.html#1159" class="Bound">pv</a> <a id="1176" href="Class.DecEq.Core.html#159" class="Field Operator">≟</a> <a id="1178" class="Symbol">(</a><a id="1179" href="Ledger.Conway.Conformance.PPUp.html#1150" class="Bound">m</a> <a id="1181" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1183" class="Number">1</a> <a id="1185" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1187" class="Number">0</a><a id="1188" class="Symbol">)</a> <a id="1190" class="Symbol">|</a> <a id="1192" href="Ledger.Conway.Conformance.PPUp.html#1159" class="Bound">pv</a> <a id="1195" href="Class.DecEq.Core.html#159" class="Field Operator">≟</a> <a id="1197" class="Symbol">(</a><a id="1198" href="Ledger.Conway.Conformance.PPUp.html#1150" class="Bound">m</a> <a id="1200" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1202" href="Ledger.Conway.Conformance.PPUp.html#1154" class="Bound">n</a> <a id="1204" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1206" class="Number">1</a><a id="1207" class="Symbol">)</a>
  <a id="1211" class="Symbol">...</a> <a id="1215" class="Symbol">|</a> <a id="1217" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1220" href="Ledger.Conway.Conformance.PPUp.html#1220" class="Bound">¬p</a>    <a id="1226" class="Symbol">|</a> <a id="1228" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1231" href="Ledger.Conway.Conformance.PPUp.html#1231" class="Bound">¬p₁</a>   <a id="1237" class="Symbol">=</a> <a id="1239" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1242" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1244" class="Symbol">λ</a> <a id="1246" class="Keyword">where</a> <a id="1252" href="Ledger.PParams.html#1015" class="InductiveConstructor">canFollowMajor</a> <a id="1267" class="Symbol">→</a> <a id="1269" href="Ledger.Conway.Conformance.PPUp.html#1220" class="Bound">¬p</a>  <a id="1273" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                                           <a id="1321" href="Ledger.PParams.html#1066" class="InductiveConstructor">canFollowMinor</a> <a id="1336" class="Symbol">→</a> <a id="1338" href="Ledger.Conway.Conformance.PPUp.html#1231" class="Bound">¬p₁</a> <a id="1342" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="1349" class="Symbol">...</a> <a id="1353" class="Symbol">|</a> <a id="1355" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1358" href="Ledger.Conway.Conformance.PPUp.html#1358" class="Bound">¬p</a>    <a id="1364" class="Symbol">|</a> <a id="1366" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1370" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1375" class="Symbol">=</a> <a id="1377" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1381" href="Ledger.PParams.html#1066" class="InductiveConstructor">canFollowMinor</a>
  <a id="1398" class="Symbol">...</a> <a id="1402" class="Symbol">|</a> <a id="1404" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1408" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1413" class="Symbol">|</a> <a id="1415" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1418" href="Ledger.Conway.Conformance.PPUp.html#1418" class="Bound">¬p</a>    <a id="1424" class="Symbol">=</a> <a id="1426" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1430" href="Ledger.PParams.html#1015" class="InductiveConstructor">canFollowMajor</a>
  <a id="1447" class="Symbol">...</a> <a id="1451" class="Symbol">|</a> <a id="1453" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1457" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1462" class="Symbol">|</a> <a id="1464" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1468" href="Ledger.Conway.Conformance.PPUp.html#1468" class="Bound">p</a>    <a id="1473" class="Symbol">=</a> <a id="1475" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="1482" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1484" href="Data.Nat.Properties.html#17808" class="Function">ℕ.m+1+n≢m</a> <a id="1494" class="Bound">m</a> <a id="1496" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1498" href="Data.Product.Properties.html#3393" class="Function">×.×-≡,≡←≡</a> <a id="1508" href="Ledger.Conway.Conformance.PPUp.html#1468" class="Bound">p</a> <a id="1510" class="Symbol">.</a><a id="1511" href="Data.Product.Base.html#636" class="Field">proj₁</a>

<a id="1518" class="Keyword">data</a> <a id="_⊢_⇀⦇_,PPUP⦈_"></a><a id="1523" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">_⊢_⇀⦇_,PPUP⦈_</a> <a id="1537" class="Symbol">:</a> <a id="1539" href="Ledger.Conway.Conformance.PPUp.html#612" class="Record">PPUpdateEnv</a> <a id="1551" class="Symbol">→</a> <a id="1553" href="Ledger.Conway.Conformance.PPUp.html#507" class="Record">PPUpdateState</a> <a id="1567" class="Symbol">→</a> <a id="1569" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1575" href="Ledger.Transaction.html#2485" class="Function">Update</a> <a id="1582" class="Symbol">→</a> <a id="1584" href="Ledger.Conway.Conformance.PPUp.html#507" class="Record">PPUpdateState</a> <a id="1598" class="Symbol">→</a> <a id="1600" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1605" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,PPUP⦈_.PPUpdateEmpty"></a><a id="1614" href="Ledger.Conway.Conformance.PPUp.html#1614" class="InductiveConstructor">PPUpdateEmpty</a> <a id="1628" class="Symbol">:</a> <a id="1630" href="Ledger.Conway.Conformance.PPUp.html#1000" class="Generalizable">Γ</a> <a id="1632" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">⊢</a> <a id="1634" href="Ledger.Conway.Conformance.PPUp.html#1018" class="Generalizable">s</a> <a id="1636" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">⇀⦇</a> <a id="1639" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1647" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">,PPUP⦈</a> <a id="1654" href="Ledger.Conway.Conformance.PPUp.html#1018" class="Generalizable">s</a>

  <a id="_⊢_⇀⦇_,PPUP⦈_.PPUpdateCurrent"></a><a id="1659" href="Ledger.Conway.Conformance.PPUp.html#1659" class="InductiveConstructor">PPUpdateCurrent</a> <a id="1675" class="Symbol">:</a> <a id="1677" class="Keyword">let</a> <a id="1681" class="Keyword">open</a> <a id="1686" href="Ledger.Conway.Conformance.PPUp.html#612" class="Module">PPUpdateEnv</a> <a id="1698" href="Ledger.Conway.Conformance.PPUp.html#1000" class="Generalizable">Γ</a> <a id="1700" class="Keyword">in</a>
    <a id="1707" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1711" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a> <a id="1715" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="1717" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1721" href="Ledger.Conway.Conformance.PPUp.html#698" class="Function">genDelegs</a>
    <a id="1735" class="Symbol">→</a> <a id="1737" href="Axiom.Set.html#9724" class="Function">All</a> <a id="1741" class="Symbol">(</a><a id="1742" href="Ledger.Conway.Conformance.PPUp.html#809" class="Function">isViableUpdate</a> <a id="1757" href="Ledger.Conway.Conformance.PPUp.html#673" class="Function">pparams</a><a id="1764" class="Symbol">)</a> <a id="1766" class="Symbol">(</a><a id="1767" href="Class.IsSet.html#959" class="Function">range</a> <a id="1773" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a><a id="1776" class="Symbol">)</a>
    <a id="1782" class="Symbol">→</a> <a id="1784" href="Ledger.Conway.Conformance.PPUp.html#651" class="Function">slot</a> <a id="1789" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1791" class="Number">2</a> <a id="1793" href="Algebra.Bundles.html#18634" class="Function Operator">*</a> <a id="1795" href="Ledger.Types.Epoch.html#833" class="Function">StabilityWindow</a> <a id="1811" href="Class.HasOrder.Core.html#641" class="Field Operator">&lt;</a> <a id="1813" href="Ledger.Types.Epoch.html#794" class="Function">firstSlot</a> <a id="1823" class="Symbol">(</a><a id="1824" href="Ledger.Types.Epoch.html#755" class="Function">epoch</a> <a id="1830" href="Ledger.Conway.Conformance.PPUp.html#651" class="Function">slot</a> <a id="1835" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1837" class="Number">1</a><a id="1838" class="Symbol">)</a>
    <a id="1844" class="Symbol">→</a> <a id="1846" href="Ledger.Types.Epoch.html#755" class="Function">epoch</a> <a id="1852" href="Ledger.Conway.Conformance.PPUp.html#651" class="Function">slot</a> <a id="1857" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1859" href="Ledger.Conway.Conformance.PPUp.html#1038" class="Generalizable">e</a>
    <a id="1865" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
    <a id="1902" href="Ledger.Conway.Conformance.PPUp.html#1000" class="Generalizable">Γ</a> <a id="1904" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">⊢</a> <a id="1906" class="Keyword">record</a> <a id="1913" class="Symbol">{</a> <a id="1915" href="Ledger.Conway.Conformance.PPUp.html#548" class="Field">pup</a> <a id="1919" class="Symbol">=</a> <a id="1921" href="Ledger.Conway.Conformance.PPUp.html#1054" class="Generalizable">pupˢ</a> <a id="1926" class="Symbol">;</a> <a id="1928" href="Ledger.Conway.Conformance.PPUp.html#578" class="Field">fpup</a> <a id="1933" class="Symbol">=</a> <a id="1935" href="Ledger.Conway.Conformance.PPUp.html#1059" class="Generalizable">fpupˢ</a> <a id="1941" class="Symbol">}</a> <a id="1943" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">⇀⦇</a> <a id="1946" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1951" class="Symbol">(</a><a id="1952" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a> <a id="1956" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1958" href="Ledger.Conway.Conformance.PPUp.html#1038" class="Generalizable">e</a><a id="1959" class="Symbol">)</a> <a id="1961" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">,PPUP⦈</a>
        <a id="1976" class="Keyword">record</a> <a id="1983" class="Symbol">{</a> <a id="1985" href="Ledger.Conway.Conformance.PPUp.html#548" class="Field">pup</a> <a id="1989" class="Symbol">=</a> <a id="1991" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a> <a id="1995" href="Axiom.Set.Map.html#6320" class="Function Operator">∪ˡ</a> <a id="1998" href="Ledger.Conway.Conformance.PPUp.html#1054" class="Generalizable">pupˢ</a> <a id="2003" class="Symbol">;</a> <a id="2005" href="Ledger.Conway.Conformance.PPUp.html#578" class="Field">fpup</a> <a id="2010" class="Symbol">=</a> <a id="2012" href="Ledger.Conway.Conformance.PPUp.html#1059" class="Generalizable">fpupˢ</a> <a id="2018" class="Symbol">}</a>

  <a id="_⊢_⇀⦇_,PPUP⦈_.PPUpdateFuture"></a><a id="2023" href="Ledger.Conway.Conformance.PPUp.html#2023" class="InductiveConstructor">PPUpdateFuture</a> <a id="2038" class="Symbol">:</a> <a id="2040" class="Keyword">let</a> <a id="2044" class="Keyword">open</a> <a id="2049" href="Ledger.Conway.Conformance.PPUp.html#612" class="Module">PPUpdateEnv</a> <a id="2061" href="Ledger.Conway.Conformance.PPUp.html#1000" class="Generalizable">Γ</a> <a id="2063" class="Keyword">in</a>
    <a id="2070" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2074" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a> <a id="2078" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="2080" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2084" href="Ledger.Conway.Conformance.PPUp.html#698" class="Function">genDelegs</a>
    <a id="2098" class="Symbol">→</a> <a id="2100" href="Axiom.Set.html#9724" class="Function">All</a> <a id="2104" class="Symbol">(</a><a id="2105" href="Ledger.Conway.Conformance.PPUp.html#809" class="Function">isViableUpdate</a> <a id="2120" href="Ledger.Conway.Conformance.PPUp.html#673" class="Function">pparams</a><a id="2127" class="Symbol">)</a> <a id="2129" class="Symbol">(</a><a id="2130" href="Class.IsSet.html#959" class="Function">range</a> <a id="2136" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a><a id="2139" class="Symbol">)</a>
    <a id="2145" class="Symbol">→</a> <a id="2147" href="Ledger.Types.Epoch.html#794" class="Function">firstSlot</a> <a id="2157" class="Symbol">(</a><a id="2158" href="Ledger.Types.Epoch.html#755" class="Function">epoch</a> <a id="2164" href="Ledger.Conway.Conformance.PPUp.html#651" class="Function">slot</a> <a id="2169" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2171" class="Number">1</a><a id="2172" class="Symbol">)</a> <a id="2174" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="2176" href="Ledger.Conway.Conformance.PPUp.html#651" class="Function">slot</a> <a id="2181" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2183" class="Number">2</a> <a id="2185" href="Algebra.Bundles.html#18634" class="Function Operator">*</a> <a id="2187" href="Ledger.Types.Epoch.html#833" class="Function">StabilityWindow</a>
    <a id="2207" class="Symbol">→</a> <a id="2209" href="Ledger.Types.Epoch.html#755" class="Function">epoch</a> <a id="2215" href="Ledger.Conway.Conformance.PPUp.html#651" class="Function">slot</a> <a id="2220" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2222" class="Number">1</a> <a id="2224" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2226" href="Ledger.Conway.Conformance.PPUp.html#1038" class="Generalizable">e</a>
    <a id="2232" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
    <a id="2269" href="Ledger.Conway.Conformance.PPUp.html#1000" class="Generalizable">Γ</a> <a id="2271" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">⊢</a> <a id="2273" class="Keyword">record</a> <a id="2280" class="Symbol">{</a> <a id="2282" href="Ledger.Conway.Conformance.PPUp.html#548" class="Field">pup</a> <a id="2286" class="Symbol">=</a> <a id="2288" href="Ledger.Conway.Conformance.PPUp.html#1054" class="Generalizable">pupˢ</a> <a id="2293" class="Symbol">;</a> <a id="2295" href="Ledger.Conway.Conformance.PPUp.html#578" class="Field">fpup</a> <a id="2300" class="Symbol">=</a> <a id="2302" href="Ledger.Conway.Conformance.PPUp.html#1059" class="Generalizable">fpupˢ</a> <a id="2308" class="Symbol">}</a> <a id="2310" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">⇀⦇</a> <a id="2313" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2318" class="Symbol">(</a><a id="2319" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a> <a id="2323" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2325" href="Ledger.Conway.Conformance.PPUp.html#1038" class="Generalizable">e</a><a id="2326" class="Symbol">)</a> <a id="2328" href="Ledger.Conway.Conformance.PPUp.html#1523" class="Datatype Operator">,PPUP⦈</a>
        <a id="2343" class="Keyword">record</a> <a id="2350" class="Symbol">{</a> <a id="2352" href="Ledger.Conway.Conformance.PPUp.html#548" class="Field">pup</a> <a id="2356" class="Symbol">=</a> <a id="2358" href="Ledger.Conway.Conformance.PPUp.html#1054" class="Generalizable">pupˢ</a> <a id="2363" class="Symbol">;</a> <a id="2365" href="Ledger.Conway.Conformance.PPUp.html#578" class="Field">fpup</a> <a id="2370" class="Symbol">=</a> <a id="2372" href="Ledger.Conway.Conformance.PPUp.html#1050" class="Generalizable">pup</a> <a id="2376" href="Axiom.Set.Map.html#6320" class="Function Operator">∪ˡ</a> <a id="2379" href="Ledger.Conway.Conformance.PPUp.html#1059" class="Generalizable">fpupˢ</a> <a id="2385" class="Symbol">}</a>

</pre></body></html>