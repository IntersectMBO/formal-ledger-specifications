<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Chain.Properties.GovDepsMatch</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>
<a id="64" class="Keyword">open</a> <a id="69" class="Keyword">import</a> <a id="76" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>

<a id="100" class="Keyword">module</a> <a id="107" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html" class="Module">Ledger.Conway.Chain.Properties.GovDepsMatch</a>
  <a id="153" class="Symbol">(</a><a id="154" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a> <a id="158" class="Symbol">:</a> <a id="160" class="Symbol">_)</a> <a id="163" class="Symbol">(</a><a id="164" class="Keyword">open</a> <a id="169" href="Ledger.Conway.Transaction.html#910" class="Module">TransactionStructure</a> <a id="190" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a><a id="193" class="Symbol">)</a>
  <a id="197" class="Symbol">(</a><a id="198" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a> <a id="202" class="Symbol">:</a> <a id="204" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="222" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a><a id="225" class="Symbol">)</a> <a id="227" class="Symbol">(</a><a id="228" class="Keyword">open</a> <a id="233" href="Ledger.Conway.Abstract.html#599" class="Module">AbstractFunctions</a> <a id="251" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a><a id="254" class="Symbol">)</a>
  <a id="258" class="Keyword">where</a>


<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Ledger.Conway.Certs.html" class="Module">Ledger.Conway.Certs</a> <a id="298" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a>
<a id="311" class="Keyword">open</a> <a id="316" class="Keyword">import</a> <a id="323" href="Ledger.Conway.Chain.html" class="Module">Ledger.Conway.Chain</a> <a id="343" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a> <a id="347" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a>
<a id="351" class="Keyword">open</a> <a id="356" class="Keyword">import</a> <a id="363" href="Ledger.Conway.Enact.html" class="Module">Ledger.Conway.Enact</a> <a id="383" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a>
<a id="396" class="Keyword">open</a> <a id="401" class="Keyword">import</a> <a id="408" href="Ledger.Conway.Epoch.html" class="Module">Ledger.Conway.Epoch</a> <a id="428" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a> <a id="432" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a>
<a id="436" class="Keyword">open</a> <a id="441" class="Keyword">import</a> <a id="448" href="Ledger.Conway.Epoch.Properties.GovDepsMatch.html" class="Module">Ledger.Conway.Epoch.Properties.GovDepsMatch</a> <a id="492" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a> <a id="496" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a>
<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Ledger.Conway.Ledger.html" class="Module">Ledger.Conway.Ledger</a> <a id="533" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a> <a id="537" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a>
<a id="541" class="Keyword">open</a> <a id="546" class="Keyword">import</a> <a id="553" href="Ledger.Conway.Ledger.Properties.html" class="Module">Ledger.Conway.Ledger.Properties</a> <a id="585" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a> <a id="589" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a>
<a id="593" class="Keyword">open</a> <a id="598" class="Keyword">import</a> <a id="605" href="Ledger.Conway.Ledger.Properties.GovDepsMatch.html" class="Module">Ledger.Conway.Ledger.Properties.GovDepsMatch</a> <a id="650" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#154" class="Bound">txs</a> <a id="654" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#198" class="Bound">abs</a>
<a id="658" class="Keyword">open</a> <a id="663" class="Keyword">import</a> <a id="670" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="685" class="Keyword">hiding</a> <a id="692" class="Symbol">(</a><a id="693" href="Class.Functor.Core.html#272" class="Function">map</a><a id="696" class="Symbol">)</a> <a id="698" class="Keyword">renaming</a> <a id="707" class="Symbol">(</a><a id="708" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="713" class="Symbol">to</a> <a id="716" class="Function">map</a><a id="719" class="Symbol">)</a>

<a id="722" class="Keyword">module</a> <a id="729" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#729" class="Module">_</a>
  <a id="733" class="Symbol">{</a><a id="734" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#734" class="Bound">b</a>   <a id="738" class="Symbol">:</a> <a id="740" href="Ledger.Conway.Chain.html#723" class="Record">Block</a> <a id="746" class="Symbol">}</a>
  <a id="750" class="Symbol">{</a><a id="751" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#751" class="Bound">nes</a> <a id="755" class="Symbol">:</a> <a id="757" href="Ledger.Conway.Epoch.html#1889" class="Record">NewEpochState</a><a id="770" class="Symbol">}</a>
  <a id="774" class="Symbol">{</a><a id="775" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#775" class="Bound">cs</a>  <a id="779" class="Symbol">:</a> <a id="781" href="Ledger.Conway.Chain.html#648" class="Record">ChainState</a><a id="791" class="Symbol">}</a>
  <a id="795" class="Keyword">where</a>
  <a id="803" class="Keyword">open</a> <a id="808" href="Ledger.Conway.Chain.html#723" class="Module">Block</a> <a id="814" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#734" class="Bound">b</a><a id="815" class="Symbol">;</a> <a id="817" class="Keyword">open</a> <a id="822" href="Ledger.Conway.Chain.html#648" class="Module">ChainState</a> <a id="833" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#775" class="Bound">cs</a>
  <a id="838" class="Keyword">open</a> <a id="843" href="Ledger.Conway.Epoch.html#1889" class="Module">NewEpochState</a>
  <a id="859" class="Keyword">open</a> <a id="864" href="Ledger.Conway.Epoch.Properties.GovDepsMatch.html#1190" class="Module">EPOCH-Body</a> <a id="875" class="Symbol">(</a><a id="876" href="Ledger.Conway.Epoch.html#1366" class="Field">EpochStateOf</a> <a id="889" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#775" class="Bound">cs</a><a id="891" class="Symbol">)</a> <a id="893" class="Keyword">renaming</a> <a id="902" class="Symbol">(</a><a id="903" href="Ledger.Conway.Epoch.Properties.GovDepsMatch.html#1276" class="Field">epsLState</a> <a id="913" class="Symbol">to</a> <a id="916" class="Field">csLState</a><a id="924" class="Symbol">)</a>
  <a id="928" class="Keyword">open</a> <a id="933" href="Ledger.Conway.Enact.html#418" class="Module">EnactState</a> <a id="944" href="Ledger.Conway.Epoch.Properties.GovDepsMatch.html#1452" class="Function">ens</a> <a id="948" class="Keyword">using</a> <a id="954" class="Symbol">(</a><a id="955" href="Ledger.Conway.Enact.html#628" class="Field">pparams</a><a id="962" class="Symbol">)</a>
  <a id="966" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#966" class="Function">pp</a> <a id="969" class="Symbol">=</a> <a id="971" href="Ledger.Conway.Enact.html#628" class="Function">pparams</a> <a id="979" class="Symbol">.</a><a id="980" href="Data.Product.Base.html#636" class="Field">proj₁</a>
  <a id="988" class="Keyword">open</a> <a id="993" href="Ledger.Conway.PParams.html#1605" class="Module">PParams</a> <a id="1001" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#966" class="Function">pp</a> <a id="1004" class="Keyword">using</a> <a id="1010" class="Symbol">(</a><a id="1011" href="Ledger.Conway.PParams.html#2517" class="Field">maxRefScriptSizePerBlock</a><a id="1035" class="Symbol">)</a>


  <a id="1041" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1041" class="Function">cs&#39;</a> <a id="1045" class="Symbol">:</a> <a id="1047" href="Ledger.Conway.Chain.html#648" class="Record">ChainState</a>
  <a id="1060" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1041" class="Function">cs&#39;</a> <a id="1064" class="Symbol">.</a><a id="1065" href="Ledger.Conway.Chain.html#684" class="Field">newEpochState</a> <a id="1079" class="Symbol">=</a>
    <a id="1085" class="Keyword">record</a> <a id="1092" class="Symbol">{</a> <a id="1094" href="Ledger.Conway.Epoch.html#1928" class="Field">lastEpoch</a>   <a id="1106" class="Symbol">=</a> <a id="1108" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#751" class="Bound">nes</a> <a id="1112" class="Symbol">.</a><a id="1113" href="Ledger.Conway.Epoch.html#1928" class="Field">lastEpoch</a>
           <a id="1134" class="Symbol">;</a> <a id="1136" href="Ledger.Conway.Epoch.html#1952" class="Field">epochState</a>  <a id="1148" class="Symbol">=</a> <a id="1150" class="Keyword">record</a> <a id="1157" class="Symbol">(</a><a id="1158" href="Ledger.Conway.Epoch.html#1366" class="Field">EpochStateOf</a> <a id="1171" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#775" class="Bound">cs</a><a id="1173" class="Symbol">)</a> <a id="1175" class="Symbol">{</a><a id="1176" href="Ledger.Conway.Epoch.html#1225" class="Field">ls</a> <a id="1179" class="Symbol">=</a> <a id="1181" href="Ledger.Conway.Ledger.html#1060" class="Field">LStateOf</a> <a id="1190" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#751" class="Bound">nes</a><a id="1193" class="Symbol">}</a>
           <a id="1206" class="Symbol">;</a> <a id="1208" href="Ledger.Conway.Epoch.html#1981" class="Field">ru</a>          <a id="1220" class="Symbol">=</a> <a id="1222" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#751" class="Bound">nes</a> <a id="1226" class="Symbol">.</a><a id="1227" href="Ledger.Conway.Epoch.html#1981" class="Field">ru</a> <a id="1230" class="Symbol">}</a>


  <a id="1236" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1236" class="Function">CHAIN-govDepsMatch</a> <a id="1255" class="Symbol">:</a>
    <a id="1261" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#716" class="Function">map</a> <a id="1265" class="Symbol">(</a><a id="1266" href="Ledger.Conway.Certs.html#549" class="InductiveConstructor">GovActionDeposit</a> <a id="1283" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1285" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="1290" class="Symbol">)</a> <a id="1292" href="Ledger.Conway.Epoch.Properties.GovDepsMatch.html#1642" class="Function">removed&#39;</a> <a id="1301" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="1303" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1307" class="Symbol">(</a><a id="1308" href="Ledger.Conway.Certs.html#757" class="Field">DepositsOf</a> <a id="1319" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#775" class="Bound">cs</a><a id="1321" class="Symbol">)</a>
    <a id="1327" class="Symbol">→</a>  <a id="1330" href="Ledger.Conway.Chain.html#3688" class="Function">totalRefScriptsSize</a> <a id="1350" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#916" class="Function">csLState</a> <a id="1359" href="Ledger.Conway.Chain.html#754" class="Function">ts</a> <a id="1362" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="1364" href="Ledger.Conway.PParams.html#2517" class="Function">maxRefScriptSizePerBlock</a>
    <a id="1393" class="Symbol">→</a>  <a id="1396" class="Symbol">_</a> <a id="1398" href="Ledger.Conway.Chain.html#3883" class="Datatype Operator">⊢</a> <a id="1400" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#775" class="Bound">cs</a> <a id="1403" href="Ledger.Conway.Chain.html#3883" class="Datatype Operator">⇀⦇</a> <a id="1406" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#734" class="Bound">b</a> <a id="1408" href="Ledger.Conway.Chain.html#3883" class="Datatype Operator">,CHAIN⦈</a> <a id="1416" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1041" class="Function">cs&#39;</a>
    <a id="1424" class="Symbol">→</a>  <a id="1427" href="Ledger.Conway.Ledger.Properties.html#4252" class="Function">govDepsMatch</a> <a id="1440" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#916" class="Function">csLState</a> <a id="1449" class="Symbol">→</a> <a id="1451" href="Ledger.Conway.Ledger.Properties.html#4252" class="Function">govDepsMatch</a> <a id="1464" class="Symbol">(</a><a id="1465" href="Ledger.Conway.Ledger.html#1060" class="Field">LStateOf</a> <a id="1474" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#751" class="Bound">nes</a><a id="1477" class="Symbol">)</a>


  <a id="1483" class="Comment">-- Proof.</a>
  <a id="1495" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1236" class="Function">CHAIN-govDepsMatch</a> <a id="1514" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1514" class="Bound">rrm</a> <a id="1518" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1518" class="Bound">rss</a> <a id="1522" class="Symbol">(</a><a id="1523" href="Ledger.Conway.Chain.html#3957" class="InductiveConstructor">CHAIN</a> <a id="1529" class="Symbol">(</a><a id="1530" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1530" class="Bound">x</a> <a id="1532" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1534" href="Ledger.Conway.Epoch.html#9253" class="InductiveConstructor">NEWEPOCH-New</a> <a id="1547" class="Symbol">(_</a> <a id="1550" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1552" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1552" class="Bound">eps₁→eps₂</a><a id="1561" class="Symbol">)</a> <a id="1563" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1565" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1565" class="Bound">ledgers</a><a id="1572" class="Symbol">))</a> <a id="1575" class="Symbol">=</a>
    <a id="1581" href="Interface.STS.html#3361" class="Function">RTC-preserves-inv</a> <a id="1599" href="Ledger.Conway.Ledger.Properties.GovDepsMatch.html#642" class="Function">LEDGER-govDepsMatch</a> <a id="1619" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1565" class="Bound">ledgers</a>
     <a id="1632" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1634" href="Ledger.Conway.Epoch.Properties.GovDepsMatch.html#1963" class="Function">EPOCH-PROPS.EPOCH-govDepsMatch</a> <a id="1665" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1514" class="Bound">rrm</a> <a id="1669" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1552" class="Bound">eps₁→eps₂</a>

  <a id="1682" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1236" class="Function">CHAIN-govDepsMatch</a> <a id="1701" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1701" class="Bound">rrm</a> <a id="1705" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1705" class="Bound">rss</a> <a id="1709" class="Symbol">(</a><a id="1710" href="Ledger.Conway.Chain.html#3957" class="InductiveConstructor">CHAIN</a> <a id="1716" class="Symbol">(</a><a id="1717" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1717" class="Bound">x</a> <a id="1719" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1721" href="Ledger.Conway.Epoch.html#9489" class="InductiveConstructor">NEWEPOCH-Not-New</a> <a id="1738" class="Symbol">_</a> <a id="1740" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1742" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1742" class="Bound">ledgers</a><a id="1749" class="Symbol">))</a> <a id="1752" class="Symbol">=</a>
    <a id="1758" href="Interface.STS.html#3361" class="Function">RTC-preserves-inv</a> <a id="1776" href="Ledger.Conway.Ledger.Properties.GovDepsMatch.html#642" class="Function">LEDGER-govDepsMatch</a> <a id="1796" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1742" class="Bound">ledgers</a>

  <a id="1807" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1236" class="Function">CHAIN-govDepsMatch</a> <a id="1826" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1826" class="Bound">rrm</a> <a id="1830" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1830" class="Bound">rss</a> <a id="1834" class="Symbol">(</a><a id="1835" href="Ledger.Conway.Chain.html#3957" class="InductiveConstructor">CHAIN</a> <a id="1841" class="Symbol">(</a><a id="1842" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1842" class="Bound">x</a> <a id="1844" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1846" href="Ledger.Conway.Epoch.html#9652" class="InductiveConstructor">NEWEPOCH-No-Reward-Update</a> <a id="1872" class="Symbol">(_</a> <a id="1875" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1877" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1877" class="Bound">eps₁→eps₂</a><a id="1886" class="Symbol">)</a> <a id="1888" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1890" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1890" class="Bound">ledgers</a><a id="1897" class="Symbol">))</a> <a id="1900" class="Symbol">=</a>
    <a id="1906" href="Interface.STS.html#3361" class="Function">RTC-preserves-inv</a> <a id="1924" href="Ledger.Conway.Ledger.Properties.GovDepsMatch.html#642" class="Function">LEDGER-govDepsMatch</a> <a id="1944" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1890" class="Bound">ledgers</a>
     <a id="1957" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1959" href="Ledger.Conway.Epoch.Properties.GovDepsMatch.html#1963" class="Function">EPOCH-PROPS.EPOCH-govDepsMatch</a> <a id="1990" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1826" class="Bound">rrm</a> <a id="1994" href="Ledger.Conway.Chain.Properties.GovDepsMatch.html#1877" class="Bound">eps₁→eps₂</a>

</pre></body></html>