<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Test.Examples.AccountSim.OffChain.Lib</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Test.Examples.AccountSim.OffChain.Lib.html" class="Module">Test.Examples.AccountSim.OffChain.Lib</a> <a id="70" class="Keyword">where</a>

<a id="77" class="Keyword">open</a> <a id="82" class="Keyword">import</a> <a id="89" href="Data.List.html" class="Module">Data.List</a> <a id="99" class="Keyword">using</a> <a id="105" class="Symbol">(</a><a id="106" href="Data.List.Base.html#10389" class="Function">filter</a><a id="112" class="Symbol">)</a>

<a id="115" class="Keyword">open</a> <a id="120" class="Keyword">import</a> <a id="127" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="142" class="Keyword">open</a> <a id="147" class="Keyword">import</a> <a id="154" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="195" class="Keyword">open</a> <a id="200" class="Keyword">import</a> <a id="207" href="Test.Examples.AccountSim.Datum.html" class="Module">Test.Examples.AccountSim.Datum</a>
<a id="238" class="Keyword">open</a> <a id="243" class="Keyword">import</a> <a id="250" href="Test.Examples.AccountSim.Validator.html" class="Module">Test.Examples.AccountSim.Validator</a>
<a id="285" class="Keyword">open</a> <a id="290" class="Keyword">import</a> <a id="297" href="Test.Prelude.html" class="Module">Test.Prelude</a> <a id="310" href="Test.Examples.AccountSim.Datum.html#737" class="Function">AccountSimData</a>
<a id="325" class="Keyword">open</a> <a id="330" class="Keyword">import</a> <a id="337" href="Test.SymbolicData.html" class="Module">Test.SymbolicData</a> <a id="355" href="Test.Examples.AccountSim.Datum.html#737" class="Function">AccountSimData</a>
<a id="370" class="Keyword">open</a> <a id="375" class="Keyword">import</a> <a id="382" href="Test.LedgerImplementation.html" class="Module">Test.LedgerImplementation</a> <a id="408" href="Test.SymbolicData.html#240" class="Function">SData</a> <a id="414" href="Test.SymbolicData.html#240" class="Function">SData</a>

<a id="421" class="Keyword">open</a> <a id="426" href="Ledger.Conway.Specification.Transaction.html#991" class="Module">TransactionStructure</a> <a id="447" href="Test.LedgerImplementation.html#4277" class="Function">SVTransactionStructure</a>

<a id="471" class="Keyword">open</a> <a id="476" class="Keyword">import</a> <a id="483" href="Test.AbstractImplementation.html" class="Module">Test.AbstractImplementation</a> <a id="511" href="Test.SymbolicData.html#2904" class="Function">valContext</a>

<a id="523" class="Keyword">open</a> <a id="528" class="Keyword">import</a> <a id="535" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="defaultTxBody"></a><a id="576" href="Test.Examples.AccountSim.OffChain.Lib.html#576" class="Function">defaultTxBody</a> <a id="590" class="Symbol">:</a> <a id="592" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a>
<a id="599" href="Test.Examples.AccountSim.OffChain.Lib.html#576" class="Function">defaultTxBody</a> <a id="613" class="Symbol">=</a> <a id="615" class="Keyword">record</a>
                  <a id="640" class="Symbol">{</a> <a id="642" href="Ledger.Conway.Specification.Transaction.html#3018" class="Field">txIns</a> <a id="648" class="Symbol">=</a> <a id="650" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="670" class="Symbol">;</a> <a id="672" href="Ledger.Conway.Specification.Transaction.html#3054" class="Field">refInputs</a> <a id="682" class="Symbol">=</a> <a id="684" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="704" class="Symbol">;</a> <a id="706" href="Ledger.Conway.Specification.Transaction.html#3090" class="Field">collateralInputs</a> <a id="723" class="Symbol">=</a> <a id="725" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="745" class="Symbol">;</a> <a id="747" href="Ledger.Conway.Specification.Transaction.html#3126" class="Field">txOuts</a> <a id="754" class="Symbol">=</a>  <a id="757" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="777" class="Symbol">;</a> <a id="779" href="Ledger.Conway.Specification.Transaction.html#3240" class="Field">txFee</a> <a id="785" class="Symbol">=</a> <a id="787" class="Number">10000000000</a>
                  <a id="817" class="Symbol">;</a> <a id="819" href="Ledger.Conway.Specification.Transaction.html#3624" class="Field">mint</a> <a id="824" class="Symbol">=</a> <a id="826" class="Number">0</a>
                  <a id="846" class="Symbol">;</a> <a id="848" href="Ledger.Conway.Specification.Transaction.html#3315" class="Field">txVldt</a> <a id="855" class="Symbol">=</a> <a id="857" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="865" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="867" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="893" class="Symbol">;</a> <a id="895" href="Ledger.Conway.Specification.Transaction.html#3200" class="Field">txCerts</a> <a id="903" class="Symbol">=</a> <a id="905" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
                  <a id="926" class="Symbol">;</a> <a id="928" href="Ledger.Conway.Specification.Transaction.html#3274" class="Field">txWithdrawals</a> <a id="942" class="Symbol">=</a> <a id="944" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="964" class="Symbol">;</a> <a id="966" href="Ledger.Conway.Specification.Transaction.html#3449" class="Field">txGovVotes</a> <a id="977" class="Symbol">=</a> <a id="979" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
                  <a id="1000" class="Symbol">;</a> <a id="1002" href="Ledger.Conway.Specification.Transaction.html#3491" class="Field">txGovProposals</a> <a id="1017" class="Symbol">=</a> <a id="1019" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
                  <a id="1040" class="Symbol">;</a> <a id="1042" href="Ledger.Conway.Specification.Transaction.html#3410" class="Field">txDonation</a> <a id="1053" class="Symbol">=</a> <a id="1055" class="Number">0</a>
                  <a id="1075" class="Symbol">;</a> <a id="1077" href="Ledger.Conway.Specification.Transaction.html#3368" class="Field">txADhash</a> <a id="1086" class="Symbol">=</a> <a id="1088" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="1114" class="Symbol">;</a> <a id="1116" href="Ledger.Conway.Specification.Transaction.html#3537" class="Field">txNetworkId</a> <a id="1128" class="Symbol">=</a> <a id="1130" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1135" class="Number">0</a>
                  <a id="1155" class="Symbol">;</a> <a id="1157" href="Ledger.Conway.Specification.Transaction.html#3580" class="Field">currentTreasury</a> <a id="1173" class="Symbol">=</a> <a id="1175" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="1201" class="Symbol">;</a> <a id="1203" href="Ledger.Conway.Specification.Transaction.html#3166" class="Field">txId</a> <a id="1208" class="Symbol">=</a> <a id="1210" class="Number">0</a>
                  <a id="1230" class="Symbol">;</a> <a id="1232" href="Ledger.Conway.Specification.Transaction.html#3659" class="Field">reqSignerHashes</a> <a id="1248" class="Symbol">=</a> <a id="1250" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="1270" class="Symbol">;</a> <a id="1272" href="Ledger.Conway.Specification.Transaction.html#3698" class="Field">scriptIntegrityHash</a> <a id="1292" class="Symbol">=</a> <a id="1294" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="1320" class="Symbol">}</a>

<a id="matchScriptAddress"></a><a id="1323" href="Test.Examples.AccountSim.OffChain.Lib.html#1323" class="Function">matchScriptAddress</a> <a id="1342" class="Symbol">:</a> <a id="1344" class="Symbol">(</a><a id="1345" href="Test.Examples.AccountSim.OffChain.Lib.html#1345" class="Bound">scriptHash</a> <a id="1356" class="Symbol">:</a> <a id="1358" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1359" class="Symbol">)</a> <a id="1361" class="Symbol">→</a> <a id="1363" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a> <a id="1374" class="Symbol">→</a> <a id="1376" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1380" href="Test.Examples.AccountSim.OffChain.Lib.html#1323" class="Function">matchScriptAddress</a> <a id="1399" href="Test.Examples.AccountSim.OffChain.Lib.html#1399" class="Bound">sh</a> <a id="1402" class="Symbol">(</a><a id="1403" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1414" href="Test.Examples.AccountSim.OffChain.Lib.html#1414" class="Bound">x</a><a id="1415" class="Symbol">)</a> <a id="1417" class="Symbol">=</a> <a id="1419" href="Data.Empty.html#914" class="Function">⊥</a>
<a id="1421" href="Test.Examples.AccountSim.OffChain.Lib.html#1323" class="Function">matchScriptAddress</a> <a id="1440" href="Test.Examples.AccountSim.OffChain.Lib.html#1440" class="Bound">sh</a> <a id="1443" class="Symbol">(</a><a id="1444" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="1454" href="Test.Examples.AccountSim.OffChain.Lib.html#1454" class="Bound">y</a><a id="1455" class="Symbol">)</a> <a id="1457" class="Symbol">=</a> <a id="1459" href="Relation.Nullary.Decidable.Core.html#4876" class="Function">True</a> <a id="1464" class="Symbol">(</a><a id="1465" href="Test.Examples.AccountSim.OffChain.Lib.html#1440" class="Bound">sh</a> <a id="1468" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="1470" href="Test.Examples.AccountSim.OffChain.Lib.html#1454" class="Bound">y</a><a id="1471" class="Symbol">)</a>

<a id="matchScriptAddress?"></a><a id="1474" href="Test.Examples.AccountSim.OffChain.Lib.html#1474" class="Function">matchScriptAddress?</a> <a id="1494" class="Symbol">:</a> <a id="1496" class="Symbol">(</a><a id="1497" href="Test.Examples.AccountSim.OffChain.Lib.html#1497" class="Bound">sh</a> <a id="1500" class="Symbol">:</a> <a id="1502" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1503" class="Symbol">)</a> <a id="1505" class="Symbol">→</a> <a id="1507" class="Symbol">(</a><a id="1508" href="Test.Examples.AccountSim.OffChain.Lib.html#1508" class="Bound">c</a> <a id="1510" class="Symbol">:</a> <a id="1512" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a><a id="1522" class="Symbol">)</a> <a id="1524" class="Symbol">→</a> <a id="1526" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="1530" class="Symbol">(</a><a id="1531" href="Test.Examples.AccountSim.OffChain.Lib.html#1323" class="Function">matchScriptAddress</a> <a id="1550" href="Test.Examples.AccountSim.OffChain.Lib.html#1497" class="Bound">sh</a> <a id="1553" href="Test.Examples.AccountSim.OffChain.Lib.html#1508" class="Bound">c</a><a id="1554" class="Symbol">)</a>
<a id="1556" href="Test.Examples.AccountSim.OffChain.Lib.html#1474" class="Function">matchScriptAddress?</a> <a id="1576" href="Test.Examples.AccountSim.OffChain.Lib.html#1576" class="Bound">sh</a> <a id="1579" class="Symbol">(</a><a id="1580" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1591" href="Test.Examples.AccountSim.OffChain.Lib.html#1591" class="Bound">x</a><a id="1592" class="Symbol">)</a> <a id="1594" class="Symbol">=</a> <a id="1596" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1599" class="Symbol">(λ</a> <a id="1602" href="Test.Examples.AccountSim.OffChain.Lib.html#1602" class="Bound">x₁</a> <a id="1605" class="Symbol">→</a> <a id="1607" href="Test.Examples.AccountSim.OffChain.Lib.html#1602" class="Bound">x₁</a><a id="1609" class="Symbol">)</a>
<a id="1611" href="Test.Examples.AccountSim.OffChain.Lib.html#1474" class="Function">matchScriptAddress?</a> <a id="1631" href="Test.Examples.AccountSim.OffChain.Lib.html#1631" class="Bound">sh</a> <a id="1634" class="Symbol">(</a><a id="1635" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="1645" href="Test.Examples.AccountSim.OffChain.Lib.html#1645" class="Bound">y</a><a id="1646" class="Symbol">)</a> <a id="1648" class="Symbol">=</a> <a id="1650" href="Relation.Nullary.Decidable.Core.html#3225" class="Function">T?</a> <a id="1653" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌊</a> <a id="1655" class="Symbol">(</a><a id="1656" href="Test.Examples.AccountSim.OffChain.Lib.html#1631" class="Bound">sh</a> <a id="1659" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="1661" href="Test.Examples.AccountSim.OffChain.Lib.html#1645" class="Bound">y</a><a id="1662" class="Symbol">)</a> <a id="1664" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌋</a>

<a id="getScriptUTxO"></a><a id="1667" href="Test.Examples.AccountSim.OffChain.Lib.html#1667" class="Function">getScriptUTxO</a> <a id="1681" class="Symbol">:</a> <a id="1683" class="Symbol">(</a><a id="1684" href="Test.Examples.AccountSim.OffChain.Lib.html#1684" class="Bound">scriptHash</a> <a id="1695" class="Symbol">:</a> <a id="1697" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1698" class="Symbol">)</a> <a id="1700" class="Symbol">→</a> <a id="1702" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a> <a id="1707" class="Symbol">→</a> <a id="1709" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1715" class="Symbol">(</a><a id="1716" href="Ledger.Conway.Specification.Transaction.html#2591" class="Function">TxIn</a> <a id="1721" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1723" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="1728" class="Symbol">)</a>
<a id="1730" href="Test.Examples.AccountSim.OffChain.Lib.html#1667" class="Function">getScriptUTxO</a> <a id="1744" href="Test.Examples.AccountSim.OffChain.Lib.html#1744" class="Bound">sh</a> <a id="1747" class="Symbol">(</a><a id="1748" href="Test.Examples.AccountSim.OffChain.Lib.html#1748" class="Bound">utxo</a> <a id="1753" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1755" href="Test.Examples.AccountSim.OffChain.Lib.html#1755" class="Bound">prf</a><a id="1758" class="Symbol">)</a> <a id="1760" class="Symbol">=</a> <a id="1762" href="Data.List.Base.html#8143" class="Function">head</a> <a id="1767" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1769" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="1776" class="Symbol">(λ</a> <a id="1779" class="Symbol">{</a> <a id="1781" class="Symbol">(_</a> <a id="1784" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1786" href="Test.Examples.AccountSim.OffChain.Lib.html#1786" class="Bound">addr</a> <a id="1791" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1793" class="Symbol">_)</a> <a id="1796" class="Symbol">→</a> <a id="1798" href="Test.Examples.AccountSim.OffChain.Lib.html#1474" class="Function">matchScriptAddress?</a> <a id="1818" href="Test.Examples.AccountSim.OffChain.Lib.html#1744" class="Bound">sh</a> <a id="1821" class="Symbol">(</a><a id="1822" href="Ledger.Core.Specification.Address.html#2685" class="Function">payCred</a> <a id="1830" href="Test.Examples.AccountSim.OffChain.Lib.html#1786" class="Bound">addr</a><a id="1834" class="Symbol">)})</a> <a id="1838" class="Symbol">(</a><a id="1839" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="1849" href="Test.Examples.AccountSim.OffChain.Lib.html#1748" class="Bound">utxo</a><a id="1853" class="Symbol">)</a>

<a id="matchWalletHash"></a><a id="1856" href="Test.Examples.AccountSim.OffChain.Lib.html#1856" class="Function">matchWalletHash</a> <a id="1872" class="Symbol">:</a> <a id="1874" class="Symbol">(</a><a id="1875" href="Test.Examples.AccountSim.OffChain.Lib.html#1875" class="Bound">keyHash</a> <a id="1883" class="Symbol">:</a> <a id="1885" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1886" class="Symbol">)</a> <a id="1888" class="Symbol">→</a> <a id="1890" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a> <a id="1901" class="Symbol">→</a> <a id="1903" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1907" href="Test.Examples.AccountSim.OffChain.Lib.html#1856" class="Function">matchWalletHash</a> <a id="1923" href="Test.Examples.AccountSim.OffChain.Lib.html#1923" class="Bound">kh</a> <a id="1926" class="Symbol">(</a><a id="1927" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1938" href="Test.Examples.AccountSim.OffChain.Lib.html#1938" class="Bound">x</a><a id="1939" class="Symbol">)</a> <a id="1941" class="Symbol">=</a> <a id="1943" href="Relation.Nullary.Decidable.Core.html#4876" class="Function">True</a> <a id="1948" class="Symbol">(</a><a id="1949" href="Test.Examples.AccountSim.OffChain.Lib.html#1923" class="Bound">kh</a> <a id="1952" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="1954" href="Test.Examples.AccountSim.OffChain.Lib.html#1938" class="Bound">x</a><a id="1955" class="Symbol">)</a>
<a id="1957" href="Test.Examples.AccountSim.OffChain.Lib.html#1856" class="Function">matchWalletHash</a> <a id="1973" href="Test.Examples.AccountSim.OffChain.Lib.html#1973" class="Bound">kh</a> <a id="1976" class="Symbol">(</a><a id="1977" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="1987" href="Test.Examples.AccountSim.OffChain.Lib.html#1987" class="Bound">y</a><a id="1988" class="Symbol">)</a> <a id="1990" class="Symbol">=</a> <a id="1992" href="Data.Empty.html#914" class="Function">⊥</a>

<a id="matchWalletHash?"></a><a id="1995" href="Test.Examples.AccountSim.OffChain.Lib.html#1995" class="Function">matchWalletHash?</a> <a id="2012" class="Symbol">:</a> <a id="2014" class="Symbol">(</a><a id="2015" href="Test.Examples.AccountSim.OffChain.Lib.html#2015" class="Bound">sh</a> <a id="2018" class="Symbol">:</a> <a id="2020" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="2021" class="Symbol">)</a> <a id="2023" class="Symbol">→</a> <a id="2025" class="Symbol">(</a><a id="2026" href="Test.Examples.AccountSim.OffChain.Lib.html#2026" class="Bound">c</a> <a id="2028" class="Symbol">:</a> <a id="2030" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a><a id="2040" class="Symbol">)</a> <a id="2042" class="Symbol">→</a> <a id="2044" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="2048" class="Symbol">(</a><a id="2049" href="Test.Examples.AccountSim.OffChain.Lib.html#1856" class="Function">matchWalletHash</a> <a id="2065" href="Test.Examples.AccountSim.OffChain.Lib.html#2015" class="Bound">sh</a> <a id="2068" href="Test.Examples.AccountSim.OffChain.Lib.html#2026" class="Bound">c</a><a id="2069" class="Symbol">)</a>
<a id="2071" href="Test.Examples.AccountSim.OffChain.Lib.html#1995" class="Function">matchWalletHash?</a> <a id="2088" href="Test.Examples.AccountSim.OffChain.Lib.html#2088" class="Bound">kh</a> <a id="2091" class="Symbol">(</a><a id="2092" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="2103" href="Test.Examples.AccountSim.OffChain.Lib.html#2103" class="Bound">x</a><a id="2104" class="Symbol">)</a> <a id="2106" class="Symbol">=</a> <a id="2108" href="Relation.Nullary.Decidable.Core.html#3225" class="Function">T?</a> <a id="2111" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌊</a> <a id="2113" class="Symbol">(</a><a id="2114" href="Test.Examples.AccountSim.OffChain.Lib.html#2088" class="Bound">kh</a> <a id="2117" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="2119" href="Test.Examples.AccountSim.OffChain.Lib.html#2103" class="Bound">x</a><a id="2120" class="Symbol">)</a> <a id="2122" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌋</a>
<a id="2124" href="Test.Examples.AccountSim.OffChain.Lib.html#1995" class="Function">matchWalletHash?</a> <a id="2141" href="Test.Examples.AccountSim.OffChain.Lib.html#2141" class="Bound">kh</a> <a id="2144" class="Symbol">(</a><a id="2145" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="2155" href="Test.Examples.AccountSim.OffChain.Lib.html#2155" class="Bound">y</a><a id="2156" class="Symbol">)</a> <a id="2158" class="Symbol">=</a> <a id="2160" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2163" class="Symbol">(λ</a> <a id="2166" href="Test.Examples.AccountSim.OffChain.Lib.html#2166" class="Bound">x₁</a> <a id="2169" class="Symbol">→</a> <a id="2171" href="Test.Examples.AccountSim.OffChain.Lib.html#2166" class="Bound">x₁</a><a id="2173" class="Symbol">)</a>

<a id="getWalletUTxO"></a><a id="2176" href="Test.Examples.AccountSim.OffChain.Lib.html#2176" class="Function">getWalletUTxO</a> <a id="2190" class="Symbol">:</a> <a id="2192" class="Symbol">(</a><a id="2193" href="Test.Examples.AccountSim.OffChain.Lib.html#2193" class="Bound">scriptHash</a> <a id="2204" class="Symbol">:</a> <a id="2206" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="2207" class="Symbol">)</a> <a id="2209" class="Symbol">→</a> <a id="2211" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a> <a id="2216" class="Symbol">→</a> <a id="2218" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2223" class="Symbol">(</a><a id="2224" href="Ledger.Conway.Specification.Transaction.html#2591" class="Function">TxIn</a> <a id="2229" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2231" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="2236" class="Symbol">)</a>
<a id="2238" href="Test.Examples.AccountSim.OffChain.Lib.html#2176" class="Function">getWalletUTxO</a> <a id="2252" href="Test.Examples.AccountSim.OffChain.Lib.html#2252" class="Bound">sh</a> <a id="2255" class="Symbol">(</a><a id="2256" href="Test.Examples.AccountSim.OffChain.Lib.html#2256" class="Bound">utxo</a> <a id="2261" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2263" href="Test.Examples.AccountSim.OffChain.Lib.html#2263" class="Bound">prf</a><a id="2266" class="Symbol">)</a> <a id="2268" class="Symbol">=</a> <a id="2270" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="2277" class="Symbol">(λ</a> <a id="2280" class="Symbol">{</a> <a id="2282" class="Symbol">(_</a> <a id="2285" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2287" href="Test.Examples.AccountSim.OffChain.Lib.html#2287" class="Bound">addr</a> <a id="2292" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2294" class="Symbol">_)</a> <a id="2297" class="Symbol">→</a> <a id="2299" href="Test.Examples.AccountSim.OffChain.Lib.html#1995" class="Function">matchWalletHash?</a> <a id="2316" href="Test.Examples.AccountSim.OffChain.Lib.html#2252" class="Bound">sh</a> <a id="2319" class="Symbol">(</a><a id="2320" href="Ledger.Core.Specification.Address.html#2685" class="Function">payCred</a> <a id="2328" href="Test.Examples.AccountSim.OffChain.Lib.html#2287" class="Bound">addr</a><a id="2332" class="Symbol">)})</a> <a id="2336" class="Symbol">(</a><a id="2337" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="2347" href="Test.Examples.AccountSim.OffChain.Lib.html#2256" class="Bound">utxo</a><a id="2351" class="Symbol">)</a>



<a id="getLabel"></a><a id="2356" href="Test.Examples.AccountSim.OffChain.Lib.html#2356" class="Function">getLabel</a> <a id="2365" class="Symbol">:</a> <a id="2367" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a> <a id="2373" class="Symbol">→</a> <a id="2375" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2381" href="Test.Examples.AccountSim.Datum.html#324" class="Datatype">Label</a>
<a id="2387" href="Test.Examples.AccountSim.OffChain.Lib.html#2356" class="Function">getLabel</a> <a id="2396" class="Symbol">(</a><a id="2397" href="Test.Examples.AccountSim.OffChain.Lib.html#2397" class="Bound">fst</a> <a id="2401" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2403" href="Test.Examples.AccountSim.OffChain.Lib.html#2403" class="Bound">fst₁</a> <a id="2408" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2410" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2415" class="Symbol">(</a><a id="2416" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2421" class="Symbol">(</a><a id="2422" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2427" class="Symbol">(</a><a id="2428" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2433" href="Test.Examples.AccountSim.OffChain.Lib.html#2433" class="Bound">x</a><a id="2434" class="Symbol">)))</a> <a id="2438" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2440" href="Test.Examples.AccountSim.OffChain.Lib.html#2440" class="Bound">snd</a><a id="2443" class="Symbol">)</a> <a id="2445" class="Symbol">=</a> <a id="2447" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2452" href="Test.Examples.AccountSim.OffChain.Lib.html#2433" class="Bound">x</a>
<a id="2454" href="Test.Examples.AccountSim.OffChain.Lib.html#2356" class="Function">getLabel</a> <a id="2463" class="Symbol">(</a><a id="2464" href="Test.Examples.AccountSim.OffChain.Lib.html#2464" class="Bound">fst</a> <a id="2468" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2470" href="Test.Examples.AccountSim.OffChain.Lib.html#2470" class="Bound">fst₁</a> <a id="2475" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2477" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2482" class="Symbol">(</a><a id="2483" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2488" class="Symbol">(</a><a id="2489" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2494" class="Symbol">(</a><a id="2495" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2500" href="Test.Examples.AccountSim.OffChain.Lib.html#2500" class="Bound">y</a><a id="2501" class="Symbol">)))</a> <a id="2505" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2507" href="Test.Examples.AccountSim.OffChain.Lib.html#2507" class="Bound">snd</a><a id="2510" class="Symbol">)</a> <a id="2512" class="Symbol">=</a> <a id="2514" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2522" href="Test.Examples.AccountSim.OffChain.Lib.html#2356" class="Function">getLabel</a> <a id="2531" class="Symbol">(</a><a id="2532" href="Test.Examples.AccountSim.OffChain.Lib.html#2532" class="Bound">fst</a> <a id="2536" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2538" href="Test.Examples.AccountSim.OffChain.Lib.html#2538" class="Bound">fst₁</a> <a id="2543" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2545" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2550" class="Symbol">(</a><a id="2551" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2556" class="Symbol">(</a><a id="2557" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2562" href="Test.Examples.AccountSim.OffChain.Lib.html#2562" class="Bound">y</a><a id="2563" class="Symbol">))</a> <a id="2566" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2568" href="Test.Examples.AccountSim.OffChain.Lib.html#2568" class="Bound">snd</a><a id="2571" class="Symbol">)</a> <a id="2573" class="Symbol">=</a> <a id="2575" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2583" href="Test.Examples.AccountSim.OffChain.Lib.html#2356" class="Function">getLabel</a> <a id="2592" class="Symbol">(</a><a id="2593" href="Test.Examples.AccountSim.OffChain.Lib.html#2593" class="Bound">fst</a> <a id="2597" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2599" href="Test.Examples.AccountSim.OffChain.Lib.html#2599" class="Bound">fst₁</a> <a id="2604" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2606" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2611" class="Symbol">(</a><a id="2612" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2617" href="Test.Examples.AccountSim.OffChain.Lib.html#2617" class="Bound">y</a><a id="2618" class="Symbol">)</a> <a id="2620" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2622" href="Test.Examples.AccountSim.OffChain.Lib.html#2622" class="Bound">snd</a><a id="2625" class="Symbol">)</a> <a id="2627" class="Symbol">=</a> <a id="2629" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2637" href="Test.Examples.AccountSim.OffChain.Lib.html#2356" class="Function">getLabel</a> <a id="2646" class="Symbol">(</a><a id="2647" href="Test.Examples.AccountSim.OffChain.Lib.html#2647" class="Bound">fst</a> <a id="2651" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2653" href="Test.Examples.AccountSim.OffChain.Lib.html#2653" class="Bound">fst₁</a> <a id="2658" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2660" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2668" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2670" href="Test.Examples.AccountSim.OffChain.Lib.html#2670" class="Bound">snd</a><a id="2673" class="Symbol">)</a> <a id="2675" class="Symbol">=</a> <a id="2677" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>



<a id="2688" class="Comment">-- Assumes a list of filtered waller txins and subtracts a default fee from the head of the list</a>
<a id="makeFeeTxOut"></a><a id="2785" href="Test.Examples.AccountSim.OffChain.Lib.html#2785" class="Function">makeFeeTxOut</a> <a id="2798" class="Symbol">:</a> <a id="2800" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2805" class="Symbol">(</a><a id="2806" href="Ledger.Conway.Specification.Transaction.html#2591" class="Function">TxIn</a> <a id="2811" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2813" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="2818" class="Symbol">)</a> <a id="2820" class="Symbol">→</a> <a id="2822" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2827" class="Symbol">(</a><a id="2828" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="2830" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2832" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="2837" class="Symbol">)</a>
<a id="2839" href="Test.Examples.AccountSim.OffChain.Lib.html#2785" class="Function">makeFeeTxOut</a> <a id="2852" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="2855" class="Symbol">=</a> <a id="2857" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="2860" href="Test.Examples.AccountSim.OffChain.Lib.html#2785" class="Function">makeFeeTxOut</a> <a id="2873" class="Symbol">((</a><a id="2875" href="Test.Examples.AccountSim.OffChain.Lib.html#2875" class="Bound">txin</a> <a id="2880" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2882" class="Symbol">(</a><a id="2883" href="Test.Examples.AccountSim.OffChain.Lib.html#2883" class="Bound">fst</a> <a id="2887" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2889" href="Test.Examples.AccountSim.OffChain.Lib.html#2889" class="Bound">txValue</a> <a id="2897" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2899" href="Test.Examples.AccountSim.OffChain.Lib.html#2899" class="Bound">snd</a><a id="2902" class="Symbol">))</a> <a id="2905" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2907" href="Test.Examples.AccountSim.OffChain.Lib.html#2907" class="Bound">utxos</a><a id="2912" class="Symbol">)</a> <a id="2914" class="Symbol">=</a> <a id="2916" class="Symbol">(</a><a id="2917" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2923" href="Test.Examples.AccountSim.OffChain.Lib.html#2875" class="Bound">txin</a> <a id="2928" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2930" href="Test.Examples.AccountSim.OffChain.Lib.html#2883" class="Bound">fst</a> <a id="2934" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2936" href="Test.Examples.AccountSim.OffChain.Lib.html#2889" class="Bound">txValue</a> <a id="2944" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="2946" href="Test.Examples.AccountSim.Validator.html#804" class="Function">feeValue</a> <a id="2955" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2957" href="Test.Examples.AccountSim.OffChain.Lib.html#2899" class="Bound">snd</a><a id="2960" class="Symbol">)</a> <a id="2962" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2964" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

<a id="makeFeeUnPaymentTxOut"></a><a id="2968" href="Test.Examples.AccountSim.OffChain.Lib.html#2968" class="Function">makeFeeUnPaymentTxOut</a> <a id="2990" class="Symbol">:</a> <a id="2992" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2997" class="Symbol">(</a><a id="2998" href="Ledger.Conway.Specification.Transaction.html#2591" class="Function">TxIn</a> <a id="3003" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3005" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="3010" class="Symbol">)</a> <a id="3012" class="Symbol">→</a> <a id="3014" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="3020" class="Symbol">→</a> <a id="3022" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3027" class="Symbol">(</a><a id="3028" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3030" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3032" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="3037" class="Symbol">)</a>
<a id="3039" href="Test.Examples.AccountSim.OffChain.Lib.html#2968" class="Function">makeFeeUnPaymentTxOut</a> <a id="3061" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="3064" href="Test.Examples.AccountSim.OffChain.Lib.html#3064" class="Bound">v</a> <a id="3066" class="Symbol">=</a> <a id="3068" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="3071" href="Test.Examples.AccountSim.OffChain.Lib.html#2968" class="Function">makeFeeUnPaymentTxOut</a> <a id="3093" class="Symbol">((</a><a id="3095" href="Test.Examples.AccountSim.OffChain.Lib.html#3095" class="Bound">txin</a> <a id="3100" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3102" class="Symbol">(</a><a id="3103" href="Test.Examples.AccountSim.OffChain.Lib.html#3103" class="Bound">fst</a> <a id="3107" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3109" href="Test.Examples.AccountSim.OffChain.Lib.html#3109" class="Bound">txValue</a> <a id="3117" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3119" href="Test.Examples.AccountSim.OffChain.Lib.html#3119" class="Bound">snd</a><a id="3122" class="Symbol">))</a> <a id="3125" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3127" href="Test.Examples.AccountSim.OffChain.Lib.html#3127" class="Bound">utxos</a><a id="3132" class="Symbol">)</a> <a id="3134" href="Test.Examples.AccountSim.OffChain.Lib.html#3134" class="Bound">v</a> <a id="3136" class="Symbol">=</a> <a id="3138" class="Symbol">(</a><a id="3139" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3145" href="Test.Examples.AccountSim.OffChain.Lib.html#3095" class="Bound">txin</a> <a id="3150" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3152" href="Test.Examples.AccountSim.OffChain.Lib.html#3103" class="Bound">fst</a> <a id="3156" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3158" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="3162" class="Symbol">{{</a><a id="3164" href="Ledger.Core.Specification.TokenAlgebra.Base.html#1272" class="Function">addValue</a><a id="3172" class="Symbol">}}</a> <a id="3175" class="Symbol">(</a><a id="3176" href="Test.Examples.AccountSim.OffChain.Lib.html#3109" class="Bound">txValue</a> <a id="3184" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="3186" href="Test.Examples.AccountSim.Validator.html#804" class="Function">feeValue</a><a id="3194" class="Symbol">)</a> <a id="3196" href="Test.Examples.AccountSim.OffChain.Lib.html#3134" class="Bound">v</a> <a id="3198" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3200" href="Test.Examples.AccountSim.OffChain.Lib.html#3119" class="Bound">snd</a><a id="3203" class="Symbol">)</a> <a id="3205" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3207" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

<a id="makeFeePaymentTxOut"></a><a id="3211" href="Test.Examples.AccountSim.OffChain.Lib.html#3211" class="Function">makeFeePaymentTxOut</a> <a id="3231" class="Symbol">:</a> <a id="3233" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3238" class="Symbol">(</a><a id="3239" href="Ledger.Conway.Specification.Transaction.html#2591" class="Function">TxIn</a> <a id="3244" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3246" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="3251" class="Symbol">)</a> <a id="3253" class="Symbol">→</a> <a id="3255" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="3261" class="Symbol">→</a> <a id="3263" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3268" class="Symbol">(</a><a id="3269" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3271" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3273" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="3278" class="Symbol">)</a>
<a id="3280" href="Test.Examples.AccountSim.OffChain.Lib.html#3211" class="Function">makeFeePaymentTxOut</a> <a id="3300" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="3303" href="Test.Examples.AccountSim.OffChain.Lib.html#3303" class="Bound">v</a> <a id="3305" class="Symbol">=</a> <a id="3307" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="3310" href="Test.Examples.AccountSim.OffChain.Lib.html#3211" class="Function">makeFeePaymentTxOut</a> <a id="3330" class="Symbol">((</a><a id="3332" href="Test.Examples.AccountSim.OffChain.Lib.html#3332" class="Bound">txin</a> <a id="3337" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3339" class="Symbol">(</a><a id="3340" href="Test.Examples.AccountSim.OffChain.Lib.html#3340" class="Bound">fst</a> <a id="3344" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3346" href="Test.Examples.AccountSim.OffChain.Lib.html#3346" class="Bound">txValue</a> <a id="3354" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3356" href="Test.Examples.AccountSim.OffChain.Lib.html#3356" class="Bound">snd</a><a id="3359" class="Symbol">))</a> <a id="3362" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3364" href="Test.Examples.AccountSim.OffChain.Lib.html#3364" class="Bound">utxos</a><a id="3369" class="Symbol">)</a> <a id="3371" href="Test.Examples.AccountSim.OffChain.Lib.html#3371" class="Bound">v</a> <a id="3373" class="Symbol">=</a> <a id="3375" class="Symbol">(</a><a id="3376" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3382" href="Test.Examples.AccountSim.OffChain.Lib.html#3332" class="Bound">txin</a> <a id="3387" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3389" href="Test.Examples.AccountSim.OffChain.Lib.html#3340" class="Bound">fst</a> <a id="3393" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3395" class="Symbol">(</a><a id="3396" href="Test.Examples.AccountSim.OffChain.Lib.html#3346" class="Bound">txValue</a> <a id="3404" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="3406" href="Test.Examples.AccountSim.Validator.html#804" class="Function">feeValue</a> <a id="3415" class="Symbol">)</a> <a id="3417" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="3419" href="Test.Examples.AccountSim.OffChain.Lib.html#3371" class="Bound">v</a> <a id="3421" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3423" href="Test.Examples.AccountSim.OffChain.Lib.html#3356" class="Bound">snd</a><a id="3426" class="Symbol">)</a> <a id="3428" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3430" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

<a id="3434" class="Comment">-- return id of 0 if no txins</a>
<a id="getTxId"></a><a id="3464" href="Test.Examples.AccountSim.OffChain.Lib.html#3464" class="Function">getTxId</a> <a id="3472" class="Symbol">:</a> <a id="3474" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3479" class="Symbol">(</a><a id="3480" href="Ledger.Conway.Specification.Transaction.html#2591" class="Function">TxIn</a> <a id="3485" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3487" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a><a id="3492" class="Symbol">)</a> <a id="3494" class="Symbol">→</a> <a id="3496" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="3498" href="Test.Examples.AccountSim.OffChain.Lib.html#3464" class="Function">getTxId</a> <a id="3506" href="Test.Examples.AccountSim.OffChain.Lib.html#3506" class="Bound">xs</a> <a id="3509" class="Symbol">=</a> <a id="3511" href="Data.Maybe.Base.html#1276" class="Function">maybe</a> <a id="3517" class="Symbol">(λ</a> <a id="3520" href="Test.Examples.AccountSim.OffChain.Lib.html#3520" class="Bound">x</a> <a id="3522" class="Symbol">→</a> <a id="3524" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3530" class="Symbol">(</a><a id="3531" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3537" href="Test.Examples.AccountSim.OffChain.Lib.html#3520" class="Bound">x</a><a id="3538" class="Symbol">))</a> <a id="3541" class="Number">0</a> <a id="3543" class="Symbol">(</a><a id="3544" href="Data.List.Base.html#8143" class="Function">head</a> <a id="3549" href="Test.Examples.AccountSim.OffChain.Lib.html#3506" class="Bound">xs</a><a id="3551" class="Symbol">)</a>

<a id="getVal"></a><a id="3554" href="Test.Examples.AccountSim.OffChain.Lib.html#3554" class="Function">getVal</a> <a id="3561" class="Symbol">:</a> <a id="3563" href="Test.Examples.AccountSim.Datum.html#324" class="Datatype">Label</a> <a id="3569" class="Symbol">-&gt;</a> <a id="3572" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3574" class="Symbol">-&gt;</a> <a id="3577" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a>
<a id="3583" href="Test.Examples.AccountSim.OffChain.Lib.html#3554" class="Function">getVal</a> <a id="3590" class="Symbol">(</a><a id="3591" href="Test.Examples.AccountSim.Datum.html#344" class="InductiveConstructor">Always</a> <a id="3598" href="Test.Examples.AccountSim.OffChain.Lib.html#3598" class="Bound">l</a><a id="3599" class="Symbol">)</a> <a id="3601" href="Test.Examples.AccountSim.OffChain.Lib.html#3601" class="Bound">w</a> <a id="3603" class="Keyword">with</a> <a id="3608" href="Test.Examples.AccountSim.Validator.html#6053" class="Function">lookup&#39;</a> <a id="3616" href="Test.Examples.AccountSim.OffChain.Lib.html#3601" class="Bound">w</a> <a id="3618" href="Test.Examples.AccountSim.OffChain.Lib.html#3598" class="Bound">l</a>
<a id="3620" class="Symbol">...|</a> <a id="3625" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="3633" class="Symbol">=</a> <a id="3635" href="Test.Examples.AccountSim.Validator.html#769" class="Function">emptyValue</a>
<a id="3646" class="Symbol">...|</a> <a id="3651" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3656" href="Test.Examples.AccountSim.OffChain.Lib.html#3656" class="Bound">v</a> <a id="3658" class="Symbol">=</a> <a id="3660" href="Test.Examples.AccountSim.OffChain.Lib.html#3656" class="Bound">v</a>




</pre></body></html>