<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Script.Validation</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a>
<a id="80" class="Keyword">open</a> <a id="85" class="Keyword">import</a> <a id="92" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>

<a id="132" class="Keyword">module</a> <a id="139" href="Ledger.Dijkstra.Specification.Script.Validation.html" class="Module">Ledger.Dijkstra.Specification.Script.Validation</a>
  <a id="189" class="Symbol">(</a><a id="190" href="Ledger.Dijkstra.Specification.Script.Validation.html#190" class="Bound">txs</a> <a id="194" class="Symbol">:</a> <a id="196" class="Symbol">_)</a> <a id="199" class="Symbol">(</a><a id="200" class="Keyword">open</a> <a id="205" href="Ledger.Dijkstra.Specification.Transaction.html#1279" class="Module">TransactionStructure</a> <a id="226" href="Ledger.Dijkstra.Specification.Script.Validation.html#190" class="Bound">txs</a><a id="229" class="Symbol">)</a>
  <a id="233" class="Symbol">(</a><a id="234" href="Ledger.Dijkstra.Specification.Script.Validation.html#234" class="Bound">abs</a> <a id="238" class="Symbol">:</a> <a id="240" href="Ledger.Dijkstra.Specification.Abstract.html#748" class="Record">AbstractFunctions</a> <a id="258" href="Ledger.Dijkstra.Specification.Script.Validation.html#190" class="Bound">txs</a><a id="261" class="Symbol">)</a> <a id="263" class="Symbol">(</a><a id="264" class="Keyword">open</a> <a id="269" href="Ledger.Dijkstra.Specification.Abstract.html#748" class="Module">AbstractFunctions</a> <a id="287" href="Ledger.Dijkstra.Specification.Script.Validation.html#234" class="Bound">abs</a><a id="290" class="Symbol">)</a> <a id="292" class="Symbol">(</a><a id="293" class="Keyword">open</a> <a id="298" href="Ledger.Dijkstra.Specification.Abstract.html#289" class="Module">indexOf</a> <a id="306" href="Ledger.Dijkstra.Specification.Abstract.html#886" class="Field">indexOfImp</a><a id="316" class="Symbol">)</a>
  <a id="320" class="Keyword">where</a>

<a id="327" class="Keyword">open</a> <a id="332" class="Keyword">import</a> <a id="339" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="354" class="Keyword">open</a> <a id="359" class="Keyword">import</a> <a id="366" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="402" href="Ledger.Dijkstra.Specification.Transaction.html#2455" class="Function">govStructure</a>


<a id="417" class="Keyword">data</a> <a id="ScriptPurpose"></a><a id="422" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a> <a id="436" class="Symbol">:</a> <a id="438" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="443" class="Keyword">where</a>
  <a id="ScriptPurpose.Cert"></a><a id="451" href="Ledger.Dijkstra.Specification.Script.Validation.html#451" class="InductiveConstructor">Cert</a>     <a id="460" class="Symbol">:</a> <a id="462" href="Ledger.Conway.Specification.Certs.html#2116" class="Datatype">DCert</a>               <a id="482" class="Symbol">→</a> <a id="484" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a>
  <a id="ScriptPurpose.Rwrd"></a><a id="500" href="Ledger.Dijkstra.Specification.Script.Validation.html#500" class="InductiveConstructor">Rwrd</a>     <a id="509" class="Symbol">:</a> <a id="511" href="Ledger.Dijkstra.Specification.Transaction.html#376" class="Record">RewardAddress</a>       <a id="531" class="Symbol">→</a> <a id="533" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a>
  <a id="ScriptPurpose.Mint"></a><a id="549" href="Ledger.Dijkstra.Specification.Script.Validation.html#549" class="InductiveConstructor">Mint</a>     <a id="558" class="Symbol">:</a> <a id="560" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>          <a id="580" class="Symbol">→</a> <a id="582" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a>
  <a id="ScriptPurpose.Spend"></a><a id="598" href="Ledger.Dijkstra.Specification.Script.Validation.html#598" class="InductiveConstructor">Spend</a>    <a id="607" class="Symbol">:</a> <a id="609" href="Ledger.Dijkstra.Specification.Transaction.html#2993" class="Function">TxIn</a>                <a id="629" class="Symbol">→</a> <a id="631" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a>
  <a id="ScriptPurpose.Vote"></a><a id="647" href="Ledger.Dijkstra.Specification.Script.Validation.html#647" class="InductiveConstructor">Vote</a>     <a id="656" class="Symbol">:</a> <a id="658" href="Ledger.Conway.Specification.Gov.Actions.html#2082" class="Record">GovVoter</a>            <a id="678" class="Symbol">→</a> <a id="680" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a>
  <a id="ScriptPurpose.Propose"></a><a id="696" href="Ledger.Dijkstra.Specification.Script.Validation.html#696" class="InductiveConstructor">Propose</a>  <a id="705" class="Symbol">:</a> <a id="707" href="Ledger.Conway.Specification.Gov.Actions.html#3603" class="Record">GovProposal</a>         <a id="727" class="Symbol">→</a> <a id="729" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a>
  <a id="ScriptPurpose.Guard"></a><a id="745" href="Ledger.Dijkstra.Specification.Script.Validation.html#745" class="InductiveConstructor">Guard</a>    <a id="754" class="Symbol">:</a> <a id="756" class="Symbol">(</a><a id="757" href="Ledger.Dijkstra.Specification.Transaction.html#1329" class="Field">TxId</a> <a id="762" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="764" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a><a id="774" class="Symbol">)</a> <a id="776" class="Symbol">→</a> <a id="778" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a>


<a id="794" class="Keyword">private</a> <a id="802" class="Keyword">variable</a>
  <a id="813" href="Ledger.Dijkstra.Specification.Script.Validation.html#813" class="Generalizable">ℓ</a> <a id="815" class="Symbol">:</a> <a id="817" href="Ledger.Dijkstra.Specification.Transaction.html#718" class="Datatype">TxLevel</a>

<a id="rdptr"></a><a id="826" href="Ledger.Dijkstra.Specification.Script.Validation.html#826" class="Function">rdptr</a> <a id="832" class="Symbol">:</a> <a id="834" class="Symbol">(</a><a id="835" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="838" href="Ledger.Dijkstra.Specification.Script.Validation.html#813" class="Generalizable">ℓ</a><a id="839" class="Symbol">)</a> <a id="841" class="Symbol">→</a> <a id="843" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a> <a id="857" class="Symbol">→</a> <a id="859" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="865" class="Symbol">(</a><a id="866" href="Ledger.Dijkstra.Specification.Transaction.html#3145" class="Function">RedeemerPtr</a> <a id="878" href="Ledger.Dijkstra.Specification.Script.Validation.html#813" class="Generalizable">ℓ</a><a id="879" class="Symbol">)</a>
<a id="881" href="Ledger.Dijkstra.Specification.Script.Validation.html#826" class="Function">rdptr</a> <a id="887" href="Ledger.Dijkstra.Specification.Script.Validation.html#887" class="Bound">tx</a> <a id="890" class="Symbol">=</a> <a id="892" class="Symbol">λ</a> <a id="894" class="Keyword">where</a>
  <a id="902" class="Symbol">(</a><a id="903" href="Ledger.Dijkstra.Specification.Script.Validation.html#451" class="InductiveConstructor">Cert</a> <a id="908" href="Ledger.Dijkstra.Specification.Script.Validation.html#908" class="Bound">h</a><a id="909" class="Symbol">)</a>              <a id="924" class="Symbol">→</a> <a id="926" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="930" class="Symbol">(</a><a id="931" href="Ledger.Dijkstra.Specification.Transaction.html#1128" class="InductiveConstructor">Cert</a>    <a id="939" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="941" class="Symbol">)</a> <a id="943" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="945" href="Ledger.Dijkstra.Specification.Abstract.html#322" class="Function">indexOfDCert</a>    <a id="961" href="Ledger.Dijkstra.Specification.Script.Validation.html#908" class="Bound">h</a> <a id="963" href="Ledger.Dijkstra.Specification.Transaction.html#4032" class="Function">txCerts</a>
  <a id="973" class="Symbol">(</a><a id="974" href="Ledger.Dijkstra.Specification.Script.Validation.html#500" class="InductiveConstructor">Rwrd</a> <a id="979" href="Ledger.Dijkstra.Specification.Script.Validation.html#979" class="Bound">h</a><a id="980" class="Symbol">)</a>              <a id="995" class="Symbol">→</a> <a id="997" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1001" class="Symbol">(</a><a id="1002" href="Ledger.Dijkstra.Specification.Transaction.html#1133" class="InductiveConstructor">Reward</a>  <a id="1010" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="1012" class="Symbol">)</a> <a id="1014" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1016" href="Ledger.Dijkstra.Specification.Abstract.html#374" class="Function">indexOfRewardAddress</a>  <a id="1038" href="Ledger.Dijkstra.Specification.Script.Validation.html#979" class="Bound">h</a> <a id="1040" href="Ledger.Dijkstra.Specification.Transaction.html#4153" class="Function">txWithdrawals</a>
  <a id="1056" class="Symbol">(</a><a id="1057" href="Ledger.Dijkstra.Specification.Script.Validation.html#549" class="InductiveConstructor">Mint</a> <a id="1062" href="Ledger.Dijkstra.Specification.Script.Validation.html#1062" class="Bound">h</a><a id="1063" class="Symbol">)</a>              <a id="1078" class="Symbol">→</a> <a id="1080" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1084" class="Symbol">(</a><a id="1085" href="Ledger.Dijkstra.Specification.Transaction.html#1123" class="InductiveConstructor">Mint</a>    <a id="1093" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="1095" class="Symbol">)</a> <a id="1097" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1099" href="Ledger.Dijkstra.Specification.Abstract.html#488" class="Function">indexOfPolicyId</a> <a id="1115" href="Ledger.Dijkstra.Specification.Script.Validation.html#1062" class="Bound">h</a> <a id="1117" class="Symbol">(</a><a id="1118" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="1127" href="Ledger.Dijkstra.Specification.Transaction.html#4515" class="Function">mint</a><a id="1131" class="Symbol">)</a>
  <a id="1135" class="Symbol">(</a><a id="1136" href="Ledger.Dijkstra.Specification.Script.Validation.html#598" class="InductiveConstructor">Spend</a> <a id="1142" href="Ledger.Dijkstra.Specification.Script.Validation.html#1142" class="Bound">h</a><a id="1143" class="Symbol">)</a>             <a id="1157" class="Symbol">→</a> <a id="1159" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1163" class="Symbol">(</a><a id="1164" href="Ledger.Dijkstra.Specification.Transaction.html#1117" class="InductiveConstructor">Spend</a>   <a id="1172" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="1174" class="Symbol">)</a> <a id="1176" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1178" href="Ledger.Dijkstra.Specification.Abstract.html#441" class="Function">indexOfTxIn</a>     <a id="1194" href="Ledger.Dijkstra.Specification.Script.Validation.html#1142" class="Bound">h</a> <a id="1196" href="Ledger.Dijkstra.Specification.Transaction.html#3795" class="Function">txIns</a>
  <a id="1204" class="Symbol">(</a><a id="1205" href="Ledger.Dijkstra.Specification.Script.Validation.html#647" class="InductiveConstructor">Vote</a> <a id="1210" href="Ledger.Dijkstra.Specification.Script.Validation.html#1210" class="Bound">h</a><a id="1211" class="Symbol">)</a>              <a id="1226" class="Symbol">→</a> <a id="1228" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1232" class="Symbol">(</a><a id="1233" href="Ledger.Dijkstra.Specification.Transaction.html#1140" class="InductiveConstructor">Vote</a>    <a id="1241" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="1243" class="Symbol">)</a> <a id="1245" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1247" href="Ledger.Dijkstra.Specification.Abstract.html#547" class="Function">indexOfVote</a>     <a id="1263" href="Ledger.Dijkstra.Specification.Script.Validation.html#1210" class="Bound">h</a> <a id="1265" class="Symbol">(</a><a id="1266" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1270" href="Ledger.Conway.Specification.Gov.Actions.html#2357" class="Field">GovVote.voter</a> <a id="1284" href="Ledger.Dijkstra.Specification.Transaction.html#4336" class="Function">txGovVotes</a><a id="1294" class="Symbol">)</a>
  <a id="1298" class="Symbol">(</a><a id="1299" href="Ledger.Dijkstra.Specification.Script.Validation.html#696" class="InductiveConstructor">Propose</a> <a id="1307" href="Ledger.Dijkstra.Specification.Script.Validation.html#1307" class="Bound">h</a><a id="1308" class="Symbol">)</a>           <a id="1320" class="Symbol">→</a> <a id="1322" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1326" class="Symbol">(</a><a id="1327" href="Ledger.Dijkstra.Specification.Transaction.html#1145" class="InductiveConstructor">Propose</a> <a id="1335" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="1337" class="Symbol">)</a> <a id="1339" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1341" href="Ledger.Dijkstra.Specification.Abstract.html#605" class="Function">indexOfProposal</a> <a id="1357" href="Ledger.Dijkstra.Specification.Script.Validation.html#1307" class="Bound">h</a> <a id="1359" href="Ledger.Dijkstra.Specification.Transaction.html#4380" class="Function">txGovProposals</a>
  <a id="1376" class="Symbol">(</a><a id="1377" href="Ledger.Dijkstra.Specification.Script.Validation.html#745" class="InductiveConstructor">Guard</a> <a id="1383" href="Ledger.Dijkstra.Specification.Script.Validation.html#1383" class="Bound">h</a><a id="1384" class="Symbol">)</a>             <a id="1398" class="Symbol">→</a> <a id="1400" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="1404" class="Symbol">(</a><a id="1405" href="Ledger.Dijkstra.Specification.Transaction.html#1153" class="InductiveConstructor">Guard</a>   <a id="1413" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="1415" class="Symbol">)</a> <a id="1417" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1419" href="Ledger.Dijkstra.Specification.Abstract.html#669" class="Function">indexOfGuard</a>    <a id="1435" href="Ledger.Dijkstra.Specification.Script.Validation.html#1383" class="Bound">h</a> <a id="1437" class="Symbol">(</a><a id="1438" href="Ledger.Dijkstra.Specification.Transaction.html#9945" class="Function">getTxScripts</a> <a id="1451" href="Ledger.Dijkstra.Specification.Script.Validation.html#887" class="Bound">tx</a><a id="1453" class="Symbol">)</a>
 <a id="1456" class="Keyword">where</a> <a id="1462" class="Keyword">open</a> <a id="1467" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="1474" class="Symbol">(</a><a id="1475" href="Ledger.Dijkstra.Specification.Transaction.html#5680" class="Field">TxBodyOf</a> <a id="1484" href="Ledger.Dijkstra.Specification.Script.Validation.html#887" class="Bound">tx</a><a id="1486" class="Symbol">)</a>
<a id="1488" class="Comment">-- getSubTxScripts : TopLevelTx → ℙ (TxId × ScriptHash)</a>

<a id="indexedRdmrs"></a><a id="1545" href="Ledger.Dijkstra.Specification.Script.Validation.html#1545" class="Function">indexedRdmrs</a> <a id="1558" class="Symbol">:</a> <a id="1560" class="Symbol">(</a><a id="1561" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="1564" href="Ledger.Dijkstra.Specification.Script.Validation.html#813" class="Generalizable">ℓ</a><a id="1565" class="Symbol">)</a> <a id="1567" class="Symbol">→</a> <a id="1569" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a> <a id="1583" class="Symbol">→</a> <a id="1585" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1591" class="Symbol">(</a><a id="1592" href="Ledger.Conway.Specification.Script.Base.html#1788" class="Function">Redeemer</a> <a id="1601" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1603" href="Ledger.Conway.Specification.Script.Base.html#1018" class="Function">ExUnits</a><a id="1610" class="Symbol">)</a>
<a id="1612" href="Ledger.Dijkstra.Specification.Script.Validation.html#1545" class="Function">indexedRdmrs</a> <a id="1625" href="Ledger.Dijkstra.Specification.Script.Validation.html#1625" class="Bound">tx</a> <a id="1628" href="Ledger.Dijkstra.Specification.Script.Validation.html#1628" class="Bound">sp</a> <a id="1631" class="Symbol">=</a> <a id="1633" href="Data.Maybe.Base.html#1276" class="Function">maybe</a> <a id="1639" class="Symbol">(λ</a> <a id="1642" href="Ledger.Dijkstra.Specification.Script.Validation.html#1642" class="Bound">x</a> <a id="1644" class="Symbol">→</a> <a id="1646" href="Axiom.Set.Map.html#17167" class="Function">lookupᵐ?</a> <a id="1655" href="Ledger.Dijkstra.Specification.Transaction.html#5315" class="Function">txRedeemers</a> <a id="1667" href="Ledger.Dijkstra.Specification.Script.Validation.html#1642" class="Bound">x</a><a id="1668" class="Symbol">)</a> <a id="1670" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1678" class="Symbol">(</a><a id="1679" href="Ledger.Dijkstra.Specification.Script.Validation.html#826" class="Function">rdptr</a> <a id="1685" href="Ledger.Dijkstra.Specification.Script.Validation.html#1625" class="Bound">tx</a> <a id="1688" href="Ledger.Dijkstra.Specification.Script.Validation.html#1628" class="Bound">sp</a><a id="1690" class="Symbol">)</a>
  <a id="1694" class="Keyword">where</a> <a id="1700" class="Keyword">open</a> <a id="1705" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Module">Tx</a> <a id="1708" href="Ledger.Dijkstra.Specification.Script.Validation.html#1625" class="Bound">tx</a><a id="1710" class="Symbol">;</a> <a id="1712" class="Keyword">open</a> <a id="1717" href="Ledger.Dijkstra.Specification.Transaction.html#5128" class="Module">TxWitnesses</a> <a id="1729" href="Ledger.Dijkstra.Specification.Transaction.html#3582" class="Function">txWitnesses</a>

<a id="getDatum"></a><a id="1742" href="Ledger.Dijkstra.Specification.Script.Validation.html#1742" class="Function">getDatum</a> <a id="1751" class="Symbol">:</a> <a id="1753" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="1756" href="Ledger.Dijkstra.Specification.Script.Validation.html#813" class="Generalizable">ℓ</a> <a id="1758" class="Symbol">→</a> <a id="1760" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="1765" class="Symbol">→</a> <a id="1767" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a> <a id="1781" class="Symbol">→</a> <a id="1783" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1789" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
<a id="1795" href="Ledger.Dijkstra.Specification.Script.Validation.html#1742" class="Function">getDatum</a> <a id="1804" href="Ledger.Dijkstra.Specification.Script.Validation.html#1804" class="Bound">tx</a> <a id="1807" href="Ledger.Dijkstra.Specification.Script.Validation.html#1807" class="Bound">utxo</a> <a id="1812" class="Symbol">(</a><a id="1813" href="Ledger.Dijkstra.Specification.Script.Validation.html#598" class="InductiveConstructor">Spend</a> <a id="1819" href="Ledger.Dijkstra.Specification.Script.Validation.html#1819" class="Bound">txin</a><a id="1823" class="Symbol">)</a> <a id="1825" class="Symbol">=</a>
  <a id="1829" class="Keyword">do</a> <a id="1832" class="Symbol">(_</a> <a id="1835" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1837" class="Symbol">_</a> <a id="1839" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1841" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1846" href="Ledger.Dijkstra.Specification.Script.Validation.html#1846" class="Bound">d</a> <a id="1848" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1850" class="Symbol">_)</a> <a id="1853" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="1855" href="Axiom.Set.Map.html#17167" class="Function">lookupᵐ?</a> <a id="1864" href="Ledger.Dijkstra.Specification.Script.Validation.html#1807" class="Bound">utxo</a> <a id="1869" href="Ledger.Dijkstra.Specification.Script.Validation.html#1819" class="Bound">txin</a> <a id="1874" class="Keyword">where</a>
                            <a id="1908" class="Symbol">(_</a> <a id="1911" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1913" class="Symbol">_</a> <a id="1915" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1917" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1925" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1927" class="Symbol">_)</a> <a id="1930" class="Symbol">→</a> <a id="1932" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
     <a id="1945" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="1950" href="Ledger.Dijkstra.Specification.Script.Validation.html#1846" class="Bound">d</a> <a id="1952" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="1955" class="Symbol">λ</a> <a id="1957" class="Keyword">where</a>
       <a id="1970" class="Symbol">(</a><a id="1971" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1976" href="Ledger.Dijkstra.Specification.Script.Validation.html#1976" class="Bound">d</a><a id="1977" class="Symbol">)</a> <a id="1979" class="Symbol">→</a> <a id="1981" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1986" href="Ledger.Dijkstra.Specification.Script.Validation.html#1976" class="Bound">d</a>
       <a id="1995" class="Symbol">(</a><a id="1996" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2001" href="Ledger.Dijkstra.Specification.Script.Validation.html#2001" class="Bound">h</a><a id="2002" class="Symbol">)</a> <a id="2004" class="Symbol">→</a> <a id="2006" href="Axiom.Set.Map.html#17167" class="Function">lookupᵐ?</a> <a id="2015" class="Symbol">(</a><a id="2016" href="Ledger.Prelude.html#1789" class="Function">setToMap</a> <a id="2025" class="Symbol">(</a><a id="2026" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="2031" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="2033" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="2038" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="2040" href="Function.Base.html#704" class="Function">id</a> <a id="2043" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="2045" class="Symbol">(</a><a id="2046" href="Ledger.Dijkstra.Specification.Transaction.html#6149" class="Field">DataOf</a> <a id="2053" href="Ledger.Dijkstra.Specification.Script.Validation.html#1804" class="Bound">tx</a><a id="2055" class="Symbol">)))</a> <a id="2059" href="Ledger.Dijkstra.Specification.Script.Validation.html#2001" class="Bound">h</a>
<a id="2061" href="Ledger.Dijkstra.Specification.Script.Validation.html#1742" class="CatchallClause Function">getDatum</a><a id="2069" class="CatchallClause"> </a><a id="2070" href="Ledger.Dijkstra.Specification.Script.Validation.html#2070" class="CatchallClause Bound">tx</a><a id="2072" class="CatchallClause"> </a><a id="2073" href="Ledger.Dijkstra.Specification.Script.Validation.html#2073" class="CatchallClause Bound">utxo</a><a id="2077" class="CatchallClause"> </a><a id="2078" class="CatchallClause Symbol">_</a> <a id="2080" class="Symbol">=</a> <a id="2082" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>


<a id="2092" class="Keyword">record</a> <a id="TxInfo"></a><a id="2099" href="Ledger.Dijkstra.Specification.Script.Validation.html#2099" class="Record">TxInfo</a> <a id="2106" class="Symbol">:</a> <a id="2108" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2113" class="Keyword">where</a>
  <a id="2121" class="Keyword">field</a> <a id="TxInfo.realizedInputs"></a><a id="2127" href="Ledger.Dijkstra.Specification.Script.Validation.html#2127" class="Field">realizedInputs</a> <a id="2142" class="Symbol">:</a> <a id="2144" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a>
        <a id="TxInfo.txOuts"></a><a id="2157" href="Ledger.Dijkstra.Specification.Script.Validation.html#2157" class="Field">txOuts</a>         <a id="2172" class="Symbol">:</a> <a id="2174" href="Ledger.Dijkstra.Specification.Transaction.html#1326" class="Field">Ix</a> <a id="2177" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2179" href="Ledger.Dijkstra.Specification.Transaction.html#3027" class="Function">TxOut</a>
        <a id="TxInfo.txFee"></a><a id="2193" href="Ledger.Dijkstra.Specification.Script.Validation.html#2193" class="Field">txFee</a>          <a id="2208" class="Symbol">:</a> <a id="2210" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2216" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
        <a id="TxInfo.mint"></a><a id="2229" href="Ledger.Dijkstra.Specification.Script.Validation.html#2229" class="Field">mint</a>           <a id="2244" class="Symbol">:</a> <a id="2246" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
        <a id="TxInfo.txCerts"></a><a id="2260" href="Ledger.Dijkstra.Specification.Script.Validation.html#2260" class="Field">txCerts</a>        <a id="2275" class="Symbol">:</a> <a id="2277" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2282" href="Ledger.Conway.Specification.Certs.html#2116" class="Datatype">DCert</a>
        <a id="TxInfo.txWithdrawals"></a><a id="2296" href="Ledger.Dijkstra.Specification.Script.Validation.html#2296" class="Field">txWithdrawals</a>  <a id="2311" class="Symbol">:</a> <a id="2313" href="Ledger.Core.Specification.Address.html#1394" class="Function">Withdrawals</a>
        <a id="TxInfo.txVldt"></a><a id="2333" href="Ledger.Dijkstra.Specification.Script.Validation.html#2333" class="Field">txVldt</a>         <a id="2348" class="Symbol">:</a> <a id="2350" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2356" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="2361" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2363" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2369" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
        <a id="TxInfo.vkKey"></a><a id="2382" href="Ledger.Dijkstra.Specification.Script.Validation.html#2382" class="Field">vkKey</a>          <a id="2397" class="Symbol">:</a> <a id="2399" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2401" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
        <a id="TxInfo.txData"></a><a id="2417" href="Ledger.Dijkstra.Specification.Script.Validation.html#2417" class="Field">txData</a>         <a id="2432" class="Symbol">:</a> <a id="2434" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2436" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
        <a id="TxInfo.txId"></a><a id="2450" href="Ledger.Dijkstra.Specification.Script.Validation.html#2450" class="Field">txId</a>           <a id="2465" class="Symbol">:</a> <a id="2467" href="Ledger.Dijkstra.Specification.Transaction.html#1329" class="Field">TxId</a>


<a id="txInfo"></a><a id="2474" href="Ledger.Dijkstra.Specification.Script.Validation.html#2474" class="Function">txInfo</a> <a id="2481" class="Symbol">:</a> <a id="2483" class="Symbol">(</a><a id="2484" href="Ledger.Dijkstra.Specification.Script.Validation.html#2484" class="Bound">ℓ</a> <a id="2486" class="Symbol">:</a> <a id="2488" href="Ledger.Dijkstra.Specification.Transaction.html#718" class="Datatype">TxLevel</a><a id="2495" class="Symbol">)</a> <a id="2497" class="Symbol">→</a> <a id="2499" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="2504" class="Symbol">→</a> <a id="2506" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="2509" href="Ledger.Dijkstra.Specification.Script.Validation.html#2484" class="Bound">ℓ</a> <a id="2511" class="Symbol">→</a> <a id="2513" href="Ledger.Dijkstra.Specification.Script.Validation.html#2099" class="Record">TxInfo</a>

<a id="2521" href="Ledger.Dijkstra.Specification.Script.Validation.html#2474" class="Function">txInfo</a> <a id="2528" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a> <a id="2539" href="Ledger.Dijkstra.Specification.Script.Validation.html#2539" class="Bound">utxo</a> <a id="2544" href="Ledger.Dijkstra.Specification.Script.Validation.html#2544" class="Bound">tx</a> <a id="2547" class="Symbol">=</a>
  <a id="2551" class="Keyword">record</a>  <a id="2559" class="Symbol">{</a> <a id="2561" href="Ledger.Dijkstra.Specification.Script.Validation.html#2127" class="Field">realizedInputs</a> <a id="2576" class="Symbol">=</a> <a id="2578" href="Ledger.Dijkstra.Specification.Script.Validation.html#2539" class="Bound">utxo</a> <a id="2583" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="2585" href="Ledger.Dijkstra.Specification.Transaction.html#3795" class="Function">txIns</a>
          <a id="2601" class="Symbol">;</a> <a id="2603" href="Ledger.Dijkstra.Specification.Script.Validation.html#2157" class="Field">txOuts</a> <a id="2610" class="Symbol">=</a> <a id="2612" href="Ledger.Dijkstra.Specification.Transaction.html#3954" class="Function">txOuts</a>
          <a id="2629" class="Symbol">;</a> <a id="2631" href="Ledger.Dijkstra.Specification.Script.Validation.html#2193" class="Field">txFee</a> <a id="2637" class="Symbol">=</a> <a id="2639" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2644" href="Ledger.Dijkstra.Specification.Transaction.html#4074" class="Function">txFee</a>
          <a id="2660" class="Symbol">;</a> <a id="2662" href="Ledger.Dijkstra.Specification.Script.Validation.html#2229" class="Field">mint</a> <a id="2667" class="Symbol">=</a> <a id="2669" href="Ledger.Dijkstra.Specification.Transaction.html#4515" class="Function">mint</a>
          <a id="2684" class="Symbol">;</a> <a id="2686" href="Ledger.Dijkstra.Specification.Script.Validation.html#2260" class="Field">txCerts</a> <a id="2694" class="Symbol">=</a> <a id="2696" href="Ledger.Dijkstra.Specification.Transaction.html#4032" class="Function">txCerts</a>
          <a id="2714" class="Symbol">;</a> <a id="2716" href="Ledger.Dijkstra.Specification.Script.Validation.html#2296" class="Field">txWithdrawals</a> <a id="2730" class="Symbol">=</a> <a id="2732" href="Ledger.Dijkstra.Specification.Transaction.html#4153" class="Function">txWithdrawals</a>
          <a id="2756" class="Symbol">;</a> <a id="2758" href="Ledger.Dijkstra.Specification.Script.Validation.html#2333" class="Field">txVldt</a> <a id="2765" class="Symbol">=</a> <a id="2767" href="Ledger.Dijkstra.Specification.Transaction.html#4196" class="Function">txVldt</a>
          <a id="2784" class="Symbol">;</a> <a id="2786" href="Ledger.Dijkstra.Specification.Script.Validation.html#2382" class="Field">vkKey</a> <a id="2792" class="Symbol">=</a> <a id="2794" href="Ledger.Dijkstra.Specification.Transaction.html#4913" class="Function">txRequiredGuards</a> <a id="2811" class="Comment">-- ?</a>
          <a id="2826" class="Symbol">;</a> <a id="2828" href="Ledger.Dijkstra.Specification.Script.Validation.html#2417" class="Field">txData</a> <a id="2835" class="Symbol">=</a> <a id="2837" href="Ledger.Dijkstra.Specification.Transaction.html#6149" class="Field">DataOf</a> <a id="2844" href="Ledger.Dijkstra.Specification.Script.Validation.html#2544" class="Bound">tx</a>
          <a id="2857" class="Symbol">;</a> <a id="2859" href="Ledger.Dijkstra.Specification.Script.Validation.html#2450" class="Field">txId</a> <a id="2864" class="Symbol">=</a> <a id="2866" href="Ledger.Dijkstra.Specification.Transaction.html#3996" class="Function">txId</a>
          <a id="2881" class="Symbol">}</a> <a id="2883" class="Keyword">where</a> <a id="2889" class="Keyword">open</a> <a id="2894" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Module">Tx</a> <a id="2897" href="Ledger.Dijkstra.Specification.Script.Validation.html#2544" class="Bound">tx</a><a id="2899" class="Symbol">;</a> <a id="2901" class="Keyword">open</a> <a id="2906" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="2913" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>

<a id="2921" href="Ledger.Dijkstra.Specification.Script.Validation.html#2474" class="Function">txInfo</a> <a id="2928" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a> <a id="2939" href="Ledger.Dijkstra.Specification.Script.Validation.html#2939" class="Bound">utxo</a> <a id="2944" href="Ledger.Dijkstra.Specification.Script.Validation.html#2944" class="Bound">tx</a> <a id="2947" class="Symbol">=</a>
  <a id="2951" class="Keyword">record</a>  <a id="2959" class="Symbol">{</a> <a id="2961" href="Ledger.Dijkstra.Specification.Script.Validation.html#2127" class="Field">realizedInputs</a> <a id="2976" class="Symbol">=</a> <a id="2978" href="Ledger.Dijkstra.Specification.Script.Validation.html#2939" class="Bound">utxo</a> <a id="2983" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="2985" href="Ledger.Dijkstra.Specification.Transaction.html#3795" class="Function">txIns</a>
          <a id="3001" class="Symbol">;</a> <a id="3003" href="Ledger.Dijkstra.Specification.Script.Validation.html#2157" class="Field">txOuts</a> <a id="3010" class="Symbol">=</a> <a id="3012" href="Ledger.Dijkstra.Specification.Transaction.html#3954" class="Function">txOuts</a>
          <a id="3029" class="Symbol">;</a> <a id="3031" href="Ledger.Dijkstra.Specification.Script.Validation.html#2193" class="Field">txFee</a> <a id="3037" class="Symbol">=</a> <a id="3039" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
          <a id="3057" class="Symbol">;</a> <a id="3059" href="Ledger.Dijkstra.Specification.Script.Validation.html#2229" class="Field">mint</a> <a id="3064" class="Symbol">=</a> <a id="3066" href="Ledger.Dijkstra.Specification.Transaction.html#4515" class="Function">mint</a>
          <a id="3081" class="Symbol">;</a> <a id="3083" href="Ledger.Dijkstra.Specification.Script.Validation.html#2260" class="Field">txCerts</a> <a id="3091" class="Symbol">=</a> <a id="3093" href="Ledger.Dijkstra.Specification.Transaction.html#4032" class="Function">txCerts</a>
          <a id="3111" class="Symbol">;</a> <a id="3113" href="Ledger.Dijkstra.Specification.Script.Validation.html#2296" class="Field">txWithdrawals</a> <a id="3127" class="Symbol">=</a> <a id="3129" href="Ledger.Dijkstra.Specification.Transaction.html#4153" class="Function">txWithdrawals</a>
          <a id="3153" class="Symbol">;</a> <a id="3155" href="Ledger.Dijkstra.Specification.Script.Validation.html#2333" class="Field">txVldt</a> <a id="3162" class="Symbol">=</a> <a id="3164" href="Ledger.Dijkstra.Specification.Transaction.html#4196" class="Function">txVldt</a>
          <a id="3181" class="Symbol">;</a> <a id="3183" href="Ledger.Dijkstra.Specification.Script.Validation.html#2382" class="Field">vkKey</a> <a id="3189" class="Symbol">=</a> <a id="3191" href="Ledger.Dijkstra.Specification.Transaction.html#4913" class="Function">txRequiredGuards</a>  <a id="3209" class="Comment">-- ?</a>
          <a id="3224" class="Symbol">;</a> <a id="3226" href="Ledger.Dijkstra.Specification.Script.Validation.html#2417" class="Field">txData</a> <a id="3233" class="Symbol">=</a> <a id="3235" href="Ledger.Dijkstra.Specification.Transaction.html#6149" class="Field">DataOf</a> <a id="3242" href="Ledger.Dijkstra.Specification.Script.Validation.html#2944" class="Bound">tx</a>
          <a id="3255" class="Symbol">;</a> <a id="3257" href="Ledger.Dijkstra.Specification.Script.Validation.html#2450" class="Field">txId</a> <a id="3262" class="Symbol">=</a> <a id="3264" href="Ledger.Dijkstra.Specification.Transaction.html#3996" class="Function">txId</a>
          <a id="3279" class="Symbol">}</a> <a id="3281" class="Keyword">where</a> <a id="3287" class="Keyword">open</a> <a id="3292" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Module">Tx</a> <a id="3295" href="Ledger.Dijkstra.Specification.Script.Validation.html#2944" class="Bound">tx</a><a id="3297" class="Symbol">;</a> <a id="3299" class="Keyword">open</a> <a id="3304" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="3311" href="Ledger.Dijkstra.Specification.Transaction.html#3544" class="Field">txBody</a>


<a id="credsNeededMinusCollateral"></a><a id="3320" href="Ledger.Dijkstra.Specification.Script.Validation.html#3320" class="Function">credsNeededMinusCollateral</a> <a id="3347" class="Symbol">:</a> <a id="3349" class="Symbol">{</a><a id="3350" href="Ledger.Dijkstra.Specification.Script.Validation.html#3350" class="Bound">ℓ</a> <a id="3352" class="Symbol">:</a> <a id="3354" href="Ledger.Dijkstra.Specification.Transaction.html#718" class="Datatype">TxLevel</a><a id="3361" class="Symbol">}</a> <a id="3363" class="Symbol">→</a> <a id="3365" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Record">TxBody</a> <a id="3372" href="Ledger.Dijkstra.Specification.Script.Validation.html#3350" class="Bound">ℓ</a> <a id="3374" class="Symbol">→</a> <a id="3376" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3378" class="Symbol">(</a><a id="3379" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a> <a id="3393" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3395" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a><a id="3405" class="Symbol">)</a>
<a id="3407" href="Ledger.Dijkstra.Specification.Script.Validation.html#3320" class="Function">credsNeededMinusCollateral</a> <a id="3434" href="Ledger.Dijkstra.Specification.Script.Validation.html#3434" class="Bound">txb</a> <a id="3438" class="Symbol">=</a> <a id="3440" href="Ledger.Dijkstra.Specification.Script.Validation.html#3468" class="Function">a</a> <a id="3442" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="3444" href="Ledger.Dijkstra.Specification.Script.Validation.html#3470" class="Function">b</a> <a id="3446" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="3448" href="Ledger.Dijkstra.Specification.Script.Validation.html#3472" class="Function">c</a> <a id="3450" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="3452" href="Ledger.Dijkstra.Specification.Script.Validation.html#3474" class="Function">d</a> <a id="3454" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="3456" href="Ledger.Dijkstra.Specification.Script.Validation.html#3476" class="Function">e</a>
  <a id="3460" class="Keyword">where</a>
  <a id="3468" href="Ledger.Dijkstra.Specification.Script.Validation.html#3468" class="Function">a</a> <a id="3470" href="Ledger.Dijkstra.Specification.Script.Validation.html#3470" class="Function">b</a> <a id="3472" href="Ledger.Dijkstra.Specification.Script.Validation.html#3472" class="Function">c</a> <a id="3474" href="Ledger.Dijkstra.Specification.Script.Validation.html#3474" class="Function">d</a> <a id="3476" href="Ledger.Dijkstra.Specification.Script.Validation.html#3476" class="Function">e</a> <a id="3478" class="Symbol">:</a> <a id="3480" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3482" class="Symbol">(</a><a id="3483" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a> <a id="3497" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3499" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a><a id="3509" class="Symbol">)</a>
  <a id="3513" href="Ledger.Dijkstra.Specification.Script.Validation.html#3468" class="Function">a</a> <a id="3515" class="Symbol">=</a> <a id="3517" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3522" class="Symbol">(λ</a> <a id="3525" href="Ledger.Dijkstra.Specification.Script.Validation.html#3525" class="Bound">a</a> <a id="3527" class="Symbol">→</a> <a id="3529" class="Symbol">(</a><a id="3530" href="Ledger.Dijkstra.Specification.Script.Validation.html#500" class="InductiveConstructor">Rwrd</a> <a id="3535" href="Ledger.Dijkstra.Specification.Script.Validation.html#3525" class="Bound">a</a> <a id="3537" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3539" href="Ledger.Core.Specification.Address.html#421" class="Field">CredentialOf</a> <a id="3552" href="Ledger.Dijkstra.Specification.Script.Validation.html#3525" class="Bound">a</a><a id="3553" class="Symbol">))</a> <a id="3556" class="Symbol">(</a><a id="3557" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3561" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="3563" href="Ledger.Core.Specification.Address.html#1700" class="Field">WithdrawalsOf</a> <a id="3577" href="Ledger.Dijkstra.Specification.Script.Validation.html#3434" class="Bound">txb</a> <a id="3581" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a><a id="3582" class="Symbol">)</a>
  <a id="3586" href="Ledger.Dijkstra.Specification.Script.Validation.html#3470" class="Function">b</a> <a id="3588" class="Symbol">=</a> <a id="3590" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3601" class="Symbol">(λ</a> <a id="3604" href="Ledger.Dijkstra.Specification.Script.Validation.html#3604" class="Bound">c</a> <a id="3606" class="Symbol">→</a> <a id="3608" class="Symbol">(</a><a id="3609" href="Ledger.Dijkstra.Specification.Script.Validation.html#451" class="InductiveConstructor">Cert</a> <a id="3614" href="Ledger.Dijkstra.Specification.Script.Validation.html#3604" class="Bound">c</a> <a id="3616" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3618" class="Symbol">)</a> <a id="3620" href="Class.Functor.Core.html#242" class="Field Operator">&lt;$&gt;</a> <a id="3624" href="Ledger.Conway.Specification.Certs.html#2871" class="Function">cwitness</a> <a id="3633" href="Ledger.Dijkstra.Specification.Script.Validation.html#3604" class="Bound">c</a><a id="3634" class="Symbol">)</a> <a id="3636" class="Symbol">(</a><a id="3637" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="3646" class="Symbol">(</a><a id="3647" href="Ledger.Dijkstra.Specification.Transaction.html#6033" class="Field">DCertsOf</a> <a id="3656" href="Ledger.Dijkstra.Specification.Script.Validation.html#3434" class="Bound">txb</a><a id="3659" class="Symbol">))</a>
  <a id="3664" href="Ledger.Dijkstra.Specification.Script.Validation.html#3472" class="Function">c</a> <a id="3666" class="Symbol">=</a> <a id="3668" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3673" class="Symbol">(λ</a> <a id="3676" href="Ledger.Dijkstra.Specification.Script.Validation.html#3676" class="Bound">x</a> <a id="3678" class="Symbol">→</a> <a id="3680" class="Symbol">(</a><a id="3681" href="Ledger.Dijkstra.Specification.Script.Validation.html#549" class="InductiveConstructor">Mint</a> <a id="3686" href="Ledger.Dijkstra.Specification.Script.Validation.html#3676" class="Bound">x</a> <a id="3688" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3690" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="3700" href="Ledger.Dijkstra.Specification.Script.Validation.html#3676" class="Bound">x</a><a id="3701" class="Symbol">))</a> <a id="3704" class="Symbol">(</a><a id="3705" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="3714" class="Symbol">(</a><a id="3715" href="Ledger.Dijkstra.Specification.Transaction.html#6411" class="Field">ValueOf</a> <a id="3723" href="Ledger.Dijkstra.Specification.Script.Validation.html#3434" class="Bound">txb</a><a id="3726" class="Symbol">))</a>
  <a id="3731" href="Ledger.Dijkstra.Specification.Script.Validation.html#3474" class="Function">d</a> <a id="3733" class="Symbol">=</a> <a id="3735" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3746" class="Symbol">(λ</a> <a id="3749" href="Ledger.Dijkstra.Specification.Script.Validation.html#3749" class="Bound">v</a> <a id="3751" class="Symbol">→</a> <a id="3753" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="3756" href="Ledger.Conway.Specification.Gov.Actions.html#6713" class="Function">isGovVoterCredential</a> <a id="3777" href="Ledger.Dijkstra.Specification.Script.Validation.html#3749" class="Bound">v</a> <a id="3779" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="3784" class="Symbol">(λ</a> <a id="3787" class="Symbol">{</a><a id="3788" href="Ledger.Dijkstra.Specification.Script.Validation.html#3788" class="Bound">c</a><a id="3789" class="Symbol">}</a> <a id="3791" class="Symbol">→</a> <a id="3793" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3798" class="Symbol">(</a><a id="3799" href="Ledger.Dijkstra.Specification.Script.Validation.html#647" class="InductiveConstructor">Vote</a> <a id="3804" href="Ledger.Dijkstra.Specification.Script.Validation.html#3749" class="Bound">v</a> <a id="3806" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3808" href="Ledger.Dijkstra.Specification.Script.Validation.html#3788" class="Bound">c</a><a id="3809" class="Symbol">))</a> <a id="3812" href="Class.ToBool.html#342" class="Function Operator">else</a> <a id="3817" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="3824" class="Symbol">)</a>
                 <a id="3843" class="Symbol">(</a><a id="3844" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="3853" class="Symbol">(</a><a id="3854" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3858" href="Ledger.Conway.Specification.Gov.Actions.html#4074" class="Field">GovVoterOf</a> <a id="3869" class="Symbol">(</a><a id="3870" href="Ledger.Dijkstra.Specification.Transaction.html#6666" class="Field">GovVotesOf</a> <a id="3881" href="Ledger.Dijkstra.Specification.Script.Validation.html#3434" class="Bound">txb</a><a id="3884" class="Symbol">)))</a>
  <a id="3890" href="Ledger.Dijkstra.Specification.Script.Validation.html#3476" class="Function">e</a> <a id="3892" class="Symbol">=</a> <a id="3894" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3905" class="Symbol">(λ</a> <a id="3908" href="Ledger.Dijkstra.Specification.Script.Validation.html#3908" class="Bound">p</a> <a id="3910" class="Symbol">→</a> <a id="3912" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="3915" href="Ledger.Conway.Specification.Gov.Actions.html#4288" class="Field">PolicyOf</a> <a id="3924" href="Ledger.Dijkstra.Specification.Script.Validation.html#3908" class="Bound">p</a> <a id="3926" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="3931" class="Symbol">(λ</a> <a id="3934" class="Symbol">{</a><a id="3935" href="Ledger.Dijkstra.Specification.Script.Validation.html#3935" class="Bound">sh</a><a id="3937" class="Symbol">}</a> <a id="3939" class="Symbol">→</a> <a id="3941" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3946" class="Symbol">(</a><a id="3947" href="Ledger.Dijkstra.Specification.Script.Validation.html#696" class="InductiveConstructor">Propose</a>  <a id="3956" href="Ledger.Dijkstra.Specification.Script.Validation.html#3908" class="Bound">p</a> <a id="3958" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3960" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="3970" href="Ledger.Dijkstra.Specification.Script.Validation.html#3935" class="Bound">sh</a><a id="3972" class="Symbol">))</a> <a id="3975" href="Class.ToBool.html#342" class="Function Operator">else</a> <a id="3980" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="3987" class="Symbol">)</a>
                 <a id="4006" class="Symbol">(</a><a id="4007" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="4016" class="Symbol">(</a><a id="4017" href="Ledger.Dijkstra.Specification.Transaction.html#6528" class="Field">GovProposalsOf</a> <a id="4032" href="Ledger.Dijkstra.Specification.Script.Validation.html#3434" class="Bound">txb</a><a id="4035" class="Symbol">))</a>

<a id="credsNeeded"></a><a id="4039" href="Ledger.Dijkstra.Specification.Script.Validation.html#4039" class="Function">credsNeeded</a> <a id="4051" class="Symbol">:</a> <a id="4053" class="Symbol">(</a><a id="4054" href="Ledger.Dijkstra.Specification.Script.Validation.html#4054" class="Bound">ℓ</a> <a id="4056" class="Symbol">:</a> <a id="4058" href="Ledger.Dijkstra.Specification.Transaction.html#718" class="Datatype">TxLevel</a><a id="4065" class="Symbol">)</a> <a id="4067" class="Symbol">→</a> <a id="4069" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="4074" class="Symbol">→</a> <a id="4076" class="Symbol">(</a><a id="4077" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Record">TxBody</a> <a id="4084" href="Ledger.Dijkstra.Specification.Script.Validation.html#4054" class="Bound">ℓ</a><a id="4085" class="Symbol">)</a> <a id="4087" class="Symbol">→</a> <a id="4089" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4091" class="Symbol">(</a><a id="4092" href="Ledger.Dijkstra.Specification.Script.Validation.html#422" class="Datatype">ScriptPurpose</a> <a id="4106" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4108" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a><a id="4118" class="Symbol">)</a>
<a id="4120" href="Ledger.Dijkstra.Specification.Script.Validation.html#4039" class="Function">credsNeeded</a> <a id="4132" href="Ledger.Dijkstra.Specification.Transaction.html#741" class="InductiveConstructor">TxLevelTop</a> <a id="4143" href="Ledger.Dijkstra.Specification.Script.Validation.html#4143" class="Bound">utxo</a> <a id="4148" href="Ledger.Dijkstra.Specification.Script.Validation.html#4148" class="Bound">txb</a> <a id="4152" class="Symbol">=</a> <a id="4154" href="Ledger.Dijkstra.Specification.Script.Validation.html#3320" class="Function">credsNeededMinusCollateral</a> <a id="4181" href="Ledger.Dijkstra.Specification.Script.Validation.html#4148" class="Bound">txb</a>
  <a id="4187" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4189" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="4194" class="Symbol">(λ</a> <a id="4197" class="Symbol">(</a><a id="4198" href="Ledger.Dijkstra.Specification.Script.Validation.html#4198" class="Bound">i</a> <a id="4200" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4202" href="Ledger.Dijkstra.Specification.Script.Validation.html#4202" class="Bound">o</a><a id="4203" class="Symbol">)</a> <a id="4205" class="Symbol">→</a> <a id="4207" class="Symbol">(</a><a id="4208" href="Ledger.Dijkstra.Specification.Script.Validation.html#598" class="InductiveConstructor">Spend</a>  <a id="4215" href="Ledger.Dijkstra.Specification.Script.Validation.html#4198" class="Bound">i</a> <a id="4217" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4219" href="Ledger.Core.Specification.Address.html#2685" class="Function">payCred</a> <a id="4227" class="Symbol">(</a><a id="4228" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="4234" href="Ledger.Dijkstra.Specification.Script.Validation.html#4202" class="Bound">o</a><a id="4235" class="Symbol">)))</a> <a id="4239" class="Symbol">((</a><a id="4241" href="Ledger.Dijkstra.Specification.Script.Validation.html#4143" class="Bound">utxo</a> <a id="4246" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="4248" class="Symbol">(</a><a id="4249" href="Ledger.Dijkstra.Specification.Transaction.html#3795" class="Field">txIns</a> <a id="4255" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4257" href="Ledger.Dijkstra.Specification.Transaction.html#3871" class="Field">collateralInputs</a><a id="4273" class="Symbol">))</a> <a id="4276" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="4277" class="Symbol">)</a>
  <a id="4281" class="Keyword">where</a> <a id="4287" class="Keyword">open</a> <a id="4292" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="4299" href="Ledger.Dijkstra.Specification.Script.Validation.html#4148" class="Bound">txb</a>

<a id="4304" href="Ledger.Dijkstra.Specification.Script.Validation.html#4039" class="Function">credsNeeded</a> <a id="4316" href="Ledger.Dijkstra.Specification.Transaction.html#752" class="InductiveConstructor">TxLevelSub</a> <a id="4327" href="Ledger.Dijkstra.Specification.Script.Validation.html#4327" class="Bound">utxo</a> <a id="4332" href="Ledger.Dijkstra.Specification.Script.Validation.html#4332" class="Bound">txb</a> <a id="4336" class="Symbol">=</a> <a id="4338" href="Ledger.Dijkstra.Specification.Script.Validation.html#3320" class="Function">credsNeededMinusCollateral</a> <a id="4365" href="Ledger.Dijkstra.Specification.Script.Validation.html#4332" class="Bound">txb</a>
  <a id="4371" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4373" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="4378" class="Symbol">(λ</a> <a id="4381" class="Symbol">(</a><a id="4382" href="Ledger.Dijkstra.Specification.Script.Validation.html#4382" class="Bound">i</a> <a id="4384" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4386" href="Ledger.Dijkstra.Specification.Script.Validation.html#4386" class="Bound">o</a><a id="4387" class="Symbol">)</a> <a id="4389" class="Symbol">→</a> <a id="4391" class="Symbol">(</a><a id="4392" href="Ledger.Dijkstra.Specification.Script.Validation.html#598" class="InductiveConstructor">Spend</a>  <a id="4399" href="Ledger.Dijkstra.Specification.Script.Validation.html#4382" class="Bound">i</a> <a id="4401" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4403" href="Ledger.Core.Specification.Address.html#2685" class="Function">payCred</a> <a id="4411" class="Symbol">(</a><a id="4412" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="4418" href="Ledger.Dijkstra.Specification.Script.Validation.html#4386" class="Bound">o</a><a id="4419" class="Symbol">)))</a> <a id="4423" class="Symbol">((</a><a id="4425" href="Ledger.Dijkstra.Specification.Script.Validation.html#4327" class="Bound">utxo</a> <a id="4430" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="4432" href="Ledger.Dijkstra.Specification.Transaction.html#3795" class="Field">txIns</a><a id="4437" class="Symbol">)</a> <a id="4439" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="4440" class="Symbol">)</a>
  <a id="4444" class="Keyword">where</a> <a id="4450" class="Keyword">open</a> <a id="4455" href="Ledger.Dijkstra.Specification.Transaction.html#3719" class="Module">TxBody</a> <a id="4462" href="Ledger.Dijkstra.Specification.Script.Validation.html#4332" class="Bound">txb</a>

<a id="4467" class="Comment">--valContext : TxInfo → ScriptPurpose → Data</a>
<a id="4512" class="Comment">--valContext txinfo sp = toData (txinfo , sp)</a>

<a id="txOutToDataHash"></a><a id="4559" href="Ledger.Dijkstra.Specification.Script.Validation.html#4559" class="Function">txOutToDataHash</a> <a id="4575" class="Symbol">:</a> <a id="4577" href="Ledger.Dijkstra.Specification.Transaction.html#3027" class="Function">TxOut</a> <a id="4583" class="Symbol">→</a> <a id="4585" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4591" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a>
<a id="4600" href="Ledger.Dijkstra.Specification.Script.Validation.html#4559" class="Function">txOutToDataHash</a> <a id="4616" class="Symbol">(_</a> <a id="4619" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4621" class="Symbol">_</a> <a id="4623" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4625" href="Ledger.Dijkstra.Specification.Script.Validation.html#4625" class="Bound">d</a> <a id="4627" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4629" class="Symbol">_)</a> <a id="4632" class="Symbol">=</a> <a id="4634" href="Ledger.Dijkstra.Specification.Script.Validation.html#4625" class="Bound">d</a> <a id="4636" href="Class.Monad.Core.html#337" class="Field Operator">&gt;&gt;=</a> <a id="4640" href="Data.Sum.html#870" class="Function">isInj₂</a>

<a id="txOutToP2Script"></a><a id="4648" href="Ledger.Dijkstra.Specification.Script.Validation.html#4648" class="Function">txOutToP2Script</a>
  <a id="4666" class="Symbol">:</a> <a id="4668" href="Ledger.Dijkstra.Specification.Transaction.html#3108" class="Function">UTxO</a> <a id="4673" class="Symbol">→</a> <a id="4675" class="Symbol">(</a><a id="4676" href="Ledger.Dijkstra.Specification.Transaction.html#3472" class="Record">Tx</a> <a id="4679" href="Ledger.Dijkstra.Specification.Script.Validation.html#813" class="Generalizable">ℓ</a><a id="4680" class="Symbol">)</a>
  <a id="4684" class="Symbol">→</a> <a id="4686" href="Ledger.Dijkstra.Specification.Transaction.html#3027" class="Function">TxOut</a> <a id="4692" class="Symbol">→</a> <a id="4694" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4700" href="Ledger.Conway.Specification.Script.Base.html#2367" class="Function">P2Script</a>
<a id="4709" href="Ledger.Dijkstra.Specification.Script.Validation.html#4648" class="Function">txOutToP2Script</a> <a id="4725" href="Ledger.Dijkstra.Specification.Script.Validation.html#4725" class="Bound">utxo</a> <a id="4730" href="Ledger.Dijkstra.Specification.Script.Validation.html#4730" class="Bound">tx</a> <a id="4733" class="Symbol">(</a><a id="4734" href="Ledger.Dijkstra.Specification.Script.Validation.html#4734" class="Bound">a</a> <a id="4736" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4738" class="Symbol">_)</a> <a id="4741" class="Symbol">=</a>
  <a id="4745" class="Keyword">do</a> <a id="4748" href="Ledger.Dijkstra.Specification.Script.Validation.html#4748" class="Bound">sh</a> <a id="4751" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4753" href="Ledger.Core.Specification.Address.html#765" class="Function">isScriptObj</a> <a id="4765" class="Symbol">(</a><a id="4766" href="Ledger.Core.Specification.Address.html#2685" class="Function">payCred</a> <a id="4774" href="Ledger.Dijkstra.Specification.Script.Validation.html#4734" class="Bound">a</a><a id="4775" class="Symbol">)</a>
     <a id="4782" href="Ledger.Dijkstra.Specification.Script.Validation.html#4782" class="Bound">s</a>  <a id="4785" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4787" href="Ledger.Dijkstra.Specification.Transaction.html#9431" class="Function">lookupScriptHash</a> <a id="4804" href="Ledger.Dijkstra.Specification.Script.Validation.html#4748" class="Bound">sh</a> <a id="4807" href="Ledger.Dijkstra.Specification.Script.Validation.html#4730" class="Bound">tx</a> <a id="4810" href="Ledger.Dijkstra.Specification.Script.Validation.html#4725" class="Bound">utxo</a>
     <a id="4820" href="Ledger.Conway.Specification.Script.Base.html#3220" class="Function">toP2Script</a> <a id="4831" href="Ledger.Dijkstra.Specification.Script.Validation.html#4782" class="Bound">s</a>
<a id="4833" class="Comment">-- opaque</a>
<a id="4843" class="Comment">--   collectP2ScriptsWithContext</a>
<a id="4876" class="Comment">--     : PParams → (Tx ℓ) → UTxO</a>
<a id="4909" class="Comment">--     → List (P2Script × List Data × ExUnits × CostModel)</a>
<a id="4968" class="Comment">--   collectP2ScriptsWithContext pp tx utxo</a>
<a id="5012" class="Comment">--     = setToList</a>
<a id="5031" class="Comment">--     $ mapPartial (λ (sp , c) → if isScriptObj c</a>
<a id="5082" class="Comment">--                                 then (λ {sh} → toScriptInput sp sh)</a>
<a id="5153" class="Comment">--                                 else nothing)</a>
<a id="5202" class="Comment">--     $ credsNeeded utxo (TxBodyOf tx)</a>
<a id="5242" class="Comment">--     where</a>
<a id="5255" class="Comment">--       toScriptInput</a>
<a id="5278" class="Comment">--         : ScriptPurpose → ScriptHash</a>
<a id="5318" class="Comment">--         → Maybe (P2Script × List Data × ExUnits × CostModel)</a>
<a id="5382" class="Comment">--       toScriptInput sp sh =</a>
<a id="5413" class="Comment">--         do s ← lookupScriptHash sh tx utxo</a>
<a id="5459" class="Comment">--            p2s ← toP2Script s</a>
<a id="5492" class="Comment">--            (rdmr , exunits) ← indexedRdmrs tx sp</a>
<a id="5544" class="Comment">--            let data&#39;     = maybe [_] [] (getDatum tx utxo sp) ++ rdmr ∷ [ valContext (txInfo (language p2s) pp utxo tx) sp ]</a>
<a id="5672" class="Comment">--                costModel = PParams.costmdls pp</a>
<a id="5722" class="Comment">--            just (p2s , data&#39; , exunits , costModel)</a>

<a id="evalP2Scripts"></a><a id="5778" href="Ledger.Dijkstra.Specification.Script.Validation.html#5778" class="Function">evalP2Scripts</a> <a id="5792" class="Symbol">:</a> <a id="5794" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5799" class="Symbol">(</a><a id="5800" href="Ledger.Conway.Specification.Script.Base.html#2367" class="Function">P2Script</a> <a id="5809" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5811" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5816" href="Ledger.Conway.Specification.Script.Base.html#1708" class="Function">Data</a> <a id="5821" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5823" href="Ledger.Conway.Specification.Script.Base.html#1018" class="Function">ExUnits</a> <a id="5831" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5833" href="Ledger.Conway.Specification.Script.Base.html#989" class="Function">CostModel</a><a id="5842" class="Symbol">)</a> <a id="5844" class="Symbol">→</a> <a id="5846" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="5851" href="Ledger.Dijkstra.Specification.Script.Validation.html#5778" class="Function">evalP2Scripts</a> <a id="5865" class="Symbol">=</a> <a id="5867" href="Data.Bool.ListAction.html#927" class="Function">all</a> <a id="5871" class="Symbol">(λ</a> <a id="5874" class="Symbol">(</a><a id="5875" href="Ledger.Dijkstra.Specification.Script.Validation.html#5875" class="Bound">s</a> <a id="5877" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5879" href="Ledger.Dijkstra.Specification.Script.Validation.html#5879" class="Bound">d</a> <a id="5881" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5883" href="Ledger.Dijkstra.Specification.Script.Validation.html#5883" class="Bound">eu</a> <a id="5886" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5888" href="Ledger.Dijkstra.Specification.Script.Validation.html#5888" class="Bound">cm</a><a id="5890" class="Symbol">)</a> <a id="5892" class="Symbol">→</a> <a id="5894" href="Ledger.Dijkstra.Specification.Abstract.html#920" class="Field">runPLCScript</a> <a id="5907" href="Ledger.Dijkstra.Specification.Script.Validation.html#5888" class="Bound">cm</a> <a id="5910" href="Ledger.Dijkstra.Specification.Script.Validation.html#5875" class="Bound">s</a> <a id="5912" href="Ledger.Dijkstra.Specification.Script.Validation.html#5883" class="Bound">eu</a> <a id="5915" href="Ledger.Dijkstra.Specification.Script.Validation.html#5879" class="Bound">d</a><a id="5916" class="Symbol">)</a>

</pre></body></html>