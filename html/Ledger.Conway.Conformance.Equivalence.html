<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Equivalence</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Comment">-- Proof that the rules under Ledger.Conway.Conformance are equivalent</a>
<a id="95" class="Comment">-- to the rules under Ledger.</a>

<a id="126" class="Keyword">open</a> <a id="131" class="Keyword">import</a> <a id="138" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>
<a id="188" class="Keyword">open</a> <a id="193" class="Keyword">import</a> <a id="200" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a> <a id="226" class="Keyword">using</a> <a id="232" class="Symbol">(</a><a id="233" href="Ledger.Conway.Transaction.html#910" class="Record">TransactionStructure</a><a id="253" class="Symbol">)</a>

<a id="256" class="Keyword">open</a> <a id="261" class="Keyword">import</a> <a id="268" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="278" class="Keyword">using</a> <a id="284" class="Symbol">(</a><a id="285" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="286" class="Symbol">)</a>
<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Data.Product.html" class="Module">Data.Product</a> <a id="313" class="Keyword">using</a> <a id="319" class="Symbol">(</a><a id="320" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="323" class="Symbol">;</a> <a id="325" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="328" class="Symbol">)</a> <a id="330" class="Keyword">renaming</a> <a id="339" class="Symbol">(</a><a id="340" href="Data.Product.Base.html#2173" class="Function">map</a> <a id="344" class="Symbol">to</a> <a id="347" class="Function">⟨_,_⟩</a><a id="352" class="Symbol">)</a>
<a id="354" class="Keyword">open</a> <a id="359" class="Keyword">import</a> <a id="366" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="383" class="Keyword">using</a> <a id="389" class="Symbol">(</a><a id="390" href="Function.Bundles.html#12400" class="Function Operator">_⇔_</a><a id="393" class="Symbol">;</a> <a id="395" href="Function.Bundles.html#13499" class="Function">mk⇔</a><a id="398" class="Symbol">;</a> <a id="400" href="Function.Bundles.html#4752" class="Record">Equivalence</a><a id="411" class="Symbol">)</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="491" class="Keyword">using</a> <a id="497" class="Symbol">(</a><a id="498" href="Relation.Binary.Structures.html#1550" class="Record">IsEquivalence</a><a id="511" class="Symbol">)</a>

<a id="514" class="Keyword">open</a> <a id="519" class="Keyword">import</a> <a id="526" href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="Module">Ledger.Conway.Conformance.Equivalence.Convert</a>

<a id="573" class="Keyword">module</a> <a id="580" href="Ledger.Conway.Conformance.Equivalence.html" class="Module">Ledger.Conway.Conformance.Equivalence</a>
  <a id="620" class="Symbol">(</a><a id="621" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="625" class="Symbol">:</a> <a id="627" class="Symbol">_)</a> <a id="630" class="Symbol">(</a><a id="631" class="Keyword">open</a> <a id="636" href="Ledger.Conway.Transaction.html#910" class="Module">TransactionStructure</a> <a id="657" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a><a id="660" class="Symbol">)</a>
  <a id="664" class="Symbol">(</a><a id="665" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="669" class="Symbol">:</a> <a id="671" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="689" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a><a id="692" class="Symbol">)</a> <a id="694" class="Symbol">(</a><a id="695" class="Keyword">open</a> <a id="700" href="Ledger.Conway.Abstract.html#599" class="Module">AbstractFunctions</a> <a id="718" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a><a id="721" class="Symbol">)</a>
  <a id="725" class="Keyword">where</a>

<a id="732" class="Keyword">module</a> <a id="L"></a><a id="739" href="Ledger.Conway.Conformance.Equivalence.html#739" class="Module">L</a> <a id="741" class="Keyword">where</a>
  <a id="749" class="Keyword">open</a> <a id="754" class="Keyword">import</a> <a id="761" href="Ledger.Conway.Ledger.html" class="Module">Ledger.Conway.Ledger</a> <a id="782" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="786" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="790" class="Keyword">public</a>
  <a id="799" class="Keyword">open</a> <a id="804" class="Keyword">import</a> <a id="811" href="Ledger.Conway.Utxo.html" class="Module">Ledger.Conway.Utxo</a> <a id="830" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="834" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="838" class="Keyword">public</a>
  <a id="847" class="Keyword">open</a> <a id="852" class="Keyword">import</a> <a id="859" href="Ledger.Conway.Utxow.html" class="Module">Ledger.Conway.Utxow</a> <a id="879" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="883" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="887" class="Keyword">public</a>
  <a id="896" class="Keyword">open</a> <a id="901" class="Keyword">import</a> <a id="908" href="Ledger.Conway.Gov.html" class="Module">Ledger.Conway.Gov</a> <a id="926" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="930" class="Keyword">public</a>
  <a id="939" class="Keyword">open</a> <a id="944" class="Keyword">import</a> <a id="951" href="Ledger.Conway.Certs.html" class="Module">Ledger.Conway.Certs</a> <a id="971" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a> <a id="984" class="Keyword">public</a>

<a id="992" class="Keyword">module</a> <a id="C"></a><a id="999" href="Ledger.Conway.Conformance.Equivalence.html#999" class="Module">C</a> <a id="1001" class="Keyword">where</a>
  <a id="1009" class="Keyword">open</a> <a id="1014" class="Keyword">import</a> <a id="1021" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="1054" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1058" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="1062" class="Keyword">public</a>
  <a id="1071" class="Keyword">open</a> <a id="1076" class="Keyword">import</a> <a id="1083" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="1114" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1118" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="1122" class="Keyword">public</a>
  <a id="1131" class="Keyword">open</a> <a id="1136" class="Keyword">import</a> <a id="1143" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="1175" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1179" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="1183" class="Keyword">public</a>
  <a id="1192" class="Keyword">open</a> <a id="1197" class="Keyword">import</a> <a id="1204" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="1236" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a> <a id="1249" class="Keyword">public</a>

<a id="1257" class="Keyword">open</a> <a id="1262" class="Keyword">import</a> <a id="1269" href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="Module">Ledger.Conway.Conformance.Equivalence.Certs</a> <a id="1313" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1317" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a>
<a id="1321" class="Keyword">open</a> <a id="1326" class="Keyword">import</a> <a id="1333" href="Ledger.Conway.Conformance.Equivalence.Utxo.html" class="Module">Ledger.Conway.Conformance.Equivalence.Utxo</a> <a id="1376" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1380" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a>
<a id="1384" class="Keyword">open</a> <a id="1389" class="Keyword">import</a> <a id="1396" href="Ledger.Conway.Conformance.Equivalence.Deposits.html" class="Module">Ledger.Conway.Conformance.Equivalence.Deposits</a> <a id="1443" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1447" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a>

<a id="1452" class="Keyword">open</a> <a id="1457" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a>
<a id="1460" class="Keyword">open</a> <a id="1465" class="Keyword">import</a> <a id="1472" href="Axiom.Set.Properties.html" class="Module">Axiom.Set.Properties</a> <a id="1493" href="Axiom.Set.html#10669" class="Function">th</a> <a id="1496" class="Keyword">using</a> <a id="1502" class="Symbol">(</a><a id="1503" href="Axiom.Set.Properties.html#3967" class="Function">≡ᵉ-Setoid</a><a id="1512" class="Symbol">)</a>

<a id="1515" class="Comment">-- Invalid transactions don&#39;t change the deposits</a>
<a id="lemInvalidDepositsL"></a><a id="1565" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="1585" class="Symbol">:</a> <a id="1587" class="Symbol">∀</a> <a id="1589" class="Symbol">{</a><a id="1590" href="Ledger.Conway.Conformance.Equivalence.html#1590" class="Bound">Γ</a> <a id="1592" href="Ledger.Conway.Conformance.Equivalence.html#1592" class="Bound">utxoSt</a> <a id="1599" href="Ledger.Conway.Conformance.Equivalence.html#1599" class="Bound">utxoSt&#39;</a> <a id="1607" href="Ledger.Conway.Conformance.Equivalence.html#1607" class="Bound">tx</a><a id="1609" class="Symbol">}</a>
                    <a id="1631" class="Symbol">→</a> <a id="1633" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="1641" href="Ledger.Conway.Conformance.Equivalence.html#1607" class="Bound">tx</a> <a id="1644" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1646" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="1672" class="Symbol">→</a> <a id="1674" href="Ledger.Conway.Conformance.Equivalence.html#1590" class="Bound">Γ</a> <a id="1676" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">L.⊢</a> <a id="1680" href="Ledger.Conway.Conformance.Equivalence.html#1592" class="Bound">utxoSt</a> <a id="1687" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">⇀⦇</a> <a id="1690" href="Ledger.Conway.Conformance.Equivalence.html#1607" class="Bound">tx</a> <a id="1693" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">,UTXOW⦈</a> <a id="1701" href="Ledger.Conway.Conformance.Equivalence.html#1599" class="Bound">utxoSt&#39;</a>
                    <a id="1729" class="Symbol">→</a> <a id="1731" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="1752" href="Ledger.Conway.Conformance.Equivalence.html#1592" class="Bound">utxoSt</a> <a id="1759" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1761" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="1782" href="Ledger.Conway.Conformance.Equivalence.html#1599" class="Bound">utxoSt&#39;</a>
<a id="1790" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="1810" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Ledger.Conway.Utxow.html#5305" class="InductiveConstructor">L.UTXOW-inductive⋯</a> <a id="1835" class="Symbol">_</a> <a id="1837" class="Symbol">_</a> <a id="1839" class="Symbol">_</a> <a id="1841" class="Symbol">_</a> <a id="1843" class="Symbol">_</a> <a id="1845" class="Symbol">_</a> <a id="1847" class="Symbol">_</a> <a id="1849" class="Symbol">_</a>
                          <a id="1877" class="Symbol">(</a><a id="1878" href="Ledger.Conway.Utxo.html#15429" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="1896" class="Symbol">_</a> <a id="1898" class="Symbol">_</a> <a id="1900" class="Symbol">_</a> <a id="1902" class="Symbol">_</a> <a id="1904" class="Symbol">_</a> <a id="1906" class="Symbol">_</a> <a id="1908" class="Symbol">_</a> <a id="1910" class="Symbol">_</a> <a id="1912" class="Symbol">_</a> <a id="1914" class="Symbol">_</a> <a id="1916" class="Symbol">_</a> <a id="1918" class="Symbol">_</a> <a id="1920" class="Symbol">_</a> <a id="1922" class="Symbol">_</a> <a id="1924" class="Symbol">_</a> <a id="1926" class="Symbol">_</a> <a id="1928" class="Symbol">_</a> <a id="1930" class="Symbol">_</a> <a id="1932" class="Symbol">_</a>
                            <a id="1962" class="Symbol">(</a><a id="1963" href="Ledger.Conway.Utxo.html#13516" class="InductiveConstructor">L.Scripts-No</a> <a id="1976" class="Symbol">_)))</a> <a id="1981" class="Symbol">=</a> <a id="1983" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemInvalidDepositsC"></a><a id="1989" href="Ledger.Conway.Conformance.Equivalence.html#1989" class="Function">lemInvalidDepositsC</a> <a id="2009" class="Symbol">:</a> <a id="2011" class="Symbol">∀</a> <a id="2013" class="Symbol">{</a><a id="2014" href="Ledger.Conway.Conformance.Equivalence.html#2014" class="Bound">Γ</a> <a id="2016" href="Ledger.Conway.Conformance.Equivalence.html#2016" class="Bound">utxoSt</a> <a id="2023" href="Ledger.Conway.Conformance.Equivalence.html#2023" class="Bound">utxoSt&#39;</a> <a id="2031" href="Ledger.Conway.Conformance.Equivalence.html#2031" class="Bound">tx</a><a id="2033" class="Symbol">}</a>
                    <a id="2055" class="Symbol">→</a> <a id="2057" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="2065" href="Ledger.Conway.Conformance.Equivalence.html#2031" class="Bound">tx</a> <a id="2068" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2070" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="2096" class="Symbol">→</a> <a id="2098" class="Symbol">(</a><a id="2099" href="Ledger.Conway.Conformance.Equivalence.html#2099" class="Bound">h</a> <a id="2101" class="Symbol">:</a> <a id="2103" href="Ledger.Conway.Conformance.Equivalence.html#2014" class="Bound">Γ</a> <a id="2105" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">C.⊢</a> <a id="2109" href="Ledger.Conway.Conformance.Equivalence.html#2016" class="Bound">utxoSt</a> <a id="2116" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">⇀⦇</a> <a id="2119" href="Ledger.Conway.Conformance.Equivalence.html#2031" class="Bound">tx</a> <a id="2122" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">,UTXOW⦈</a> <a id="2130" href="Ledger.Conway.Conformance.Equivalence.html#2023" class="Bound">utxoSt&#39;</a><a id="2137" class="Symbol">)</a>
                    <a id="2159" class="Symbol">→</a> <a id="2161" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2003" class="Function">utxowDeposits</a> <a id="2175" href="Ledger.Conway.Conformance.Equivalence.html#2099" class="Bound">h</a> <a id="2177" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2179" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="2200" href="Ledger.Conway.Conformance.Equivalence.html#2023" class="Bound">utxoSt&#39;</a>
<a id="2208" href="Ledger.Conway.Conformance.Equivalence.html#1989" class="Function">lemInvalidDepositsC</a> <a id="2228" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2233" class="Symbol">(</a><a id="2234" href="Ledger.Conway.Conformance.Utxow.html#1989" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="2253" class="Symbol">_</a> <a id="2255" class="Symbol">_</a> <a id="2257" class="Symbol">_</a> <a id="2259" class="Symbol">_</a> <a id="2261" class="Symbol">_</a> <a id="2263" class="Symbol">_</a> <a id="2265" class="Symbol">_</a> <a id="2267" class="Symbol">_</a>
                          <a id="2295" class="Symbol">(</a><a id="2296" href="Ledger.Conway.Conformance.Utxo.html#3825" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2314" class="Symbol">_</a> <a id="2316" class="Symbol">_</a> <a id="2318" class="Symbol">_</a> <a id="2320" class="Symbol">_</a> <a id="2322" class="Symbol">_</a> <a id="2324" class="Symbol">_</a> <a id="2326" class="Symbol">_</a> <a id="2328" class="Symbol">_</a> <a id="2330" class="Symbol">_</a> <a id="2332" class="Symbol">_</a> <a id="2334" class="Symbol">_</a> <a id="2336" class="Symbol">_</a> <a id="2338" class="Symbol">_</a> <a id="2340" class="Symbol">_</a> <a id="2342" class="Symbol">_</a> <a id="2344" class="Symbol">_</a> <a id="2346" class="Symbol">_</a> <a id="2348" class="Symbol">_</a> <a id="2350" class="Symbol">_</a>
                            <a id="2380" class="Symbol">(</a><a id="2381" href="Ledger.Conway.Conformance.Utxo.html#1778" class="InductiveConstructor">C.Scripts-No</a> <a id="2394" class="Symbol">_)))</a> <a id="2399" class="Symbol">=</a> <a id="2401" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="2407" class="Comment">-- The UTXOW rule doesn&#39;t change the deposits in Conformance</a>
<a id="lemDepositsC"></a><a id="2468" href="Ledger.Conway.Conformance.Equivalence.html#2468" class="Function">lemDepositsC</a> <a id="2481" class="Symbol">:</a> <a id="2483" class="Symbol">∀</a> <a id="2485" class="Symbol">{</a><a id="2486" href="Ledger.Conway.Conformance.Equivalence.html#2486" class="Bound">Γ</a> <a id="2488" href="Ledger.Conway.Conformance.Equivalence.html#2488" class="Bound">utxoSt</a> <a id="2495" href="Ledger.Conway.Conformance.Equivalence.html#2495" class="Bound">utxoSt&#39;</a> <a id="2503" href="Ledger.Conway.Conformance.Equivalence.html#2503" class="Bound">tx</a><a id="2505" class="Symbol">}</a>
             <a id="2520" class="Symbol">→</a> <a id="2522" class="Symbol">(</a><a id="2523" href="Ledger.Conway.Conformance.Equivalence.html#2523" class="Bound">h</a> <a id="2525" class="Symbol">:</a> <a id="2527" href="Ledger.Conway.Conformance.Equivalence.html#2486" class="Bound">Γ</a> <a id="2529" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">C.⊢</a> <a id="2533" href="Ledger.Conway.Conformance.Equivalence.html#2488" class="Bound">utxoSt</a> <a id="2540" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">⇀⦇</a> <a id="2543" href="Ledger.Conway.Conformance.Equivalence.html#2503" class="Bound">tx</a> <a id="2546" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">,UTXOW⦈</a> <a id="2554" href="Ledger.Conway.Conformance.Equivalence.html#2495" class="Bound">utxoSt&#39;</a><a id="2561" class="Symbol">)</a>
             <a id="2576" class="Symbol">→</a> <a id="2578" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="2599" href="Ledger.Conway.Conformance.Equivalence.html#2488" class="Bound">utxoSt</a> <a id="2606" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2608" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="2629" href="Ledger.Conway.Conformance.Equivalence.html#2495" class="Bound">utxoSt&#39;</a>
<a id="2637" href="Ledger.Conway.Conformance.Equivalence.html#2468" class="Function">lemDepositsC</a> <a id="2650" class="Symbol">(</a><a id="2651" href="Ledger.Conway.Conformance.Utxow.html#1989" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="2670" class="Symbol">_</a> <a id="2672" class="Symbol">_</a> <a id="2674" class="Symbol">_</a> <a id="2676" class="Symbol">_</a> <a id="2678" class="Symbol">_</a> <a id="2680" class="Symbol">_</a> <a id="2682" class="Symbol">_</a> <a id="2684" class="Symbol">_</a>
               <a id="2701" class="Symbol">(</a><a id="2702" href="Ledger.Conway.Conformance.Utxo.html#3825" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2720" class="Symbol">_</a> <a id="2722" class="Symbol">_</a> <a id="2724" class="Symbol">_</a> <a id="2726" class="Symbol">_</a> <a id="2728" class="Symbol">_</a> <a id="2730" class="Symbol">_</a> <a id="2732" class="Symbol">_</a> <a id="2734" class="Symbol">_</a> <a id="2736" class="Symbol">_</a> <a id="2738" class="Symbol">_</a> <a id="2740" class="Symbol">_</a> <a id="2742" class="Symbol">_</a> <a id="2744" class="Symbol">_</a> <a id="2746" class="Symbol">_</a> <a id="2748" class="Symbol">_</a> <a id="2750" class="Symbol">_</a> <a id="2752" class="Symbol">_</a> <a id="2754" class="Symbol">_</a> <a id="2756" class="Symbol">_</a>
                 <a id="2775" class="Symbol">(</a><a id="2776" href="Ledger.Conway.Conformance.Utxo.html#1192" class="InductiveConstructor">C.Scripts-Yes</a> <a id="2790" class="Symbol">_)))</a> <a id="2795" class="Symbol">=</a> <a id="2797" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="2802" href="Ledger.Conway.Conformance.Equivalence.html#2468" class="Function">lemDepositsC</a> <a id="2815" class="Symbol">(</a><a id="2816" href="Ledger.Conway.Conformance.Utxow.html#1989" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="2835" class="Symbol">_</a> <a id="2837" class="Symbol">_</a> <a id="2839" class="Symbol">_</a> <a id="2841" class="Symbol">_</a> <a id="2843" class="Symbol">_</a> <a id="2845" class="Symbol">_</a> <a id="2847" class="Symbol">_</a> <a id="2849" class="Symbol">_</a>
               <a id="2866" class="Symbol">(</a><a id="2867" href="Ledger.Conway.Conformance.Utxo.html#3825" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2885" class="Symbol">_</a> <a id="2887" class="Symbol">_</a> <a id="2889" class="Symbol">_</a> <a id="2891" class="Symbol">_</a> <a id="2893" class="Symbol">_</a> <a id="2895" class="Symbol">_</a> <a id="2897" class="Symbol">_</a> <a id="2899" class="Symbol">_</a> <a id="2901" class="Symbol">_</a> <a id="2903" class="Symbol">_</a> <a id="2905" class="Symbol">_</a> <a id="2907" class="Symbol">_</a> <a id="2909" class="Symbol">_</a> <a id="2911" class="Symbol">_</a> <a id="2913" class="Symbol">_</a> <a id="2915" class="Symbol">_</a> <a id="2917" class="Symbol">_</a> <a id="2919" class="Symbol">_</a> <a id="2921" class="Symbol">_</a>
                 <a id="2940" class="Symbol">(</a><a id="2941" href="Ledger.Conway.Conformance.Utxo.html#1778" class="InductiveConstructor">C.Scripts-No</a> <a id="2954" class="Symbol">_)))</a> <a id="2959" class="Symbol">=</a> <a id="2961" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemUpdateDeposits"></a><a id="2967" href="Ledger.Conway.Conformance.Equivalence.html#2967" class="Function">lemUpdateDeposits</a> <a id="2985" class="Symbol">:</a> <a id="2987" class="Symbol">∀</a> <a id="2989" class="Symbol">{</a><a id="2990" href="Ledger.Conway.Conformance.Equivalence.html#2990" class="Bound">Γ</a> <a id="2992" href="Ledger.Conway.Conformance.Equivalence.html#2992" class="Bound">s</a> <a id="2994" href="Ledger.Conway.Conformance.Equivalence.html#2994" class="Bound">tx</a> <a id="2997" href="Ledger.Conway.Conformance.Equivalence.html#2997" class="Bound">s&#39;</a><a id="2999" class="Symbol">}</a> <a id="3001" class="Symbol">(</a><a id="3002" class="Keyword">open</a> <a id="3007" href="Ledger.Conway.Utxo.html#2395" class="Module">L.UTxOEnv</a> <a id="3017" href="Ledger.Conway.Conformance.Equivalence.html#2990" class="Bound">Γ</a><a id="3018" class="Symbol">)</a>
                  <a id="3038" class="Symbol">→</a> <a id="3040" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="3048" href="Ledger.Conway.Conformance.Equivalence.html#2994" class="Bound">tx</a> <a id="3051" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3053" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="3076" class="Symbol">→</a> <a id="3078" href="Ledger.Conway.Conformance.Equivalence.html#2990" class="Bound">Γ</a> <a id="3080" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">L.⊢</a> <a id="3084" href="Ledger.Conway.Conformance.Equivalence.html#2992" class="Bound">s</a> <a id="3086" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">⇀⦇</a> <a id="3089" href="Ledger.Conway.Conformance.Equivalence.html#2994" class="Bound">tx</a> <a id="3092" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">,UTXOW⦈</a> <a id="3100" href="Ledger.Conway.Conformance.Equivalence.html#2997" class="Bound">s&#39;</a>
                  <a id="3121" class="Symbol">→</a> <a id="3123" href="Ledger.Conway.Utxo.html#9339" class="Function">L.updateDeposits</a> <a id="3140" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="3148" class="Symbol">(</a><a id="3149" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="3154" href="Ledger.Conway.Conformance.Equivalence.html#2994" class="Bound">tx</a><a id="3156" class="Symbol">)</a> <a id="3158" class="Symbol">(</a><a id="3159" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="3180" href="Ledger.Conway.Conformance.Equivalence.html#2992" class="Bound">s</a><a id="3181" class="Symbol">)</a> <a id="3183" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3185" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="3206" href="Ledger.Conway.Conformance.Equivalence.html#2997" class="Bound">s&#39;</a>
<a id="3209" href="Ledger.Conway.Conformance.Equivalence.html#2967" class="Function">lemUpdateDeposits</a> <a id="3227" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3234" class="Symbol">(</a><a id="3235" href="Ledger.Conway.Utxow.html#5305" class="InductiveConstructor">L.UTXOW-inductive⋯</a> <a id="3254" class="Symbol">_</a> <a id="3256" class="Symbol">_</a> <a id="3258" class="Symbol">_</a> <a id="3260" class="Symbol">_</a> <a id="3262" class="Symbol">_</a> <a id="3264" class="Symbol">_</a> <a id="3266" class="Symbol">_</a> <a id="3268" class="Symbol">_</a>
    <a id="3274" class="Symbol">(</a><a id="3275" href="Ledger.Conway.Utxo.html#15429" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3293" class="Symbol">_</a> <a id="3295" class="Symbol">_</a> <a id="3297" class="Symbol">_</a> <a id="3299" class="Symbol">_</a> <a id="3301" class="Symbol">_</a> <a id="3303" class="Symbol">_</a> <a id="3305" class="Symbol">_</a> <a id="3307" class="Symbol">_</a> <a id="3309" class="Symbol">_</a> <a id="3311" class="Symbol">_</a> <a id="3313" class="Symbol">_</a> <a id="3315" class="Symbol">_</a> <a id="3317" class="Symbol">_</a> <a id="3319" class="Symbol">_</a> <a id="3321" class="Symbol">_</a> <a id="3323" class="Symbol">_</a> <a id="3325" class="Symbol">_</a> <a id="3327" class="Symbol">_</a> <a id="3329" class="Symbol">_</a>
      <a id="3337" class="Symbol">(</a><a id="3338" href="Ledger.Conway.Utxo.html#13002" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3352" class="Symbol">_)))</a> <a id="3357" class="Symbol">=</a> <a id="3359" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="getValidCertDeposits"></a><a id="3365" href="Ledger.Conway.Conformance.Equivalence.html#3365" class="Function">getValidCertDeposits</a> <a id="3386" class="Symbol">:</a> <a id="3388" class="Symbol">∀</a> <a id="3390" class="Symbol">{</a><a id="3391" href="Ledger.Conway.Conformance.Equivalence.html#3391" class="Bound">Γ</a> <a id="3393" href="Ledger.Conway.Conformance.Equivalence.html#3393" class="Bound">s</a> <a id="3395" href="Ledger.Conway.Conformance.Equivalence.html#3395" class="Bound">tx</a> <a id="3398" href="Ledger.Conway.Conformance.Equivalence.html#3398" class="Bound">s&#39;</a><a id="3400" class="Symbol">}</a>
                     <a id="3423" class="Symbol">→</a> <a id="3425" class="Symbol">(</a><a id="3426" class="Keyword">let</a> <a id="3430" class="Keyword">open</a> <a id="3435" href="Ledger.Conway.Utxo.html#2395" class="Module">L.UTxOEnv</a> <a id="3445" href="Ledger.Conway.Conformance.Equivalence.html#3391" class="Bound">Γ</a> <a id="3447" class="Keyword">using</a> <a id="3453" class="Symbol">(</a><a id="3454" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a><a id="3461" class="Symbol">)</a>
                            <a id="3491" class="Keyword">open</a> <a id="3496" href="Ledger.Conway.Utxo.html#2747" class="Module">L.UTxOState</a> <a id="3508" href="Ledger.Conway.Conformance.Equivalence.html#3393" class="Bound">s</a> <a id="3510" class="Keyword">using</a> <a id="3516" class="Symbol">(</a><a id="3517" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="3525" class="Symbol">)</a>
                            <a id="3555" class="Keyword">open</a> <a id="3560" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="3567" class="Symbol">(</a><a id="3568" href="Ledger.Conway.Conformance.Equivalence.html#3395" class="Bound">tx</a> <a id="3571" class="Symbol">.</a><a id="3572" href="Ledger.Conway.Transaction.html#4338" class="Field">Tx.body</a><a id="3579" class="Symbol">)</a> <a id="3581" class="Keyword">using</a> <a id="3587" class="Symbol">(</a><a id="3588" href="Ledger.Conway.Transaction.html#2996" class="Field">txcerts</a><a id="3595" class="Symbol">))</a>
                     <a id="3619" class="Symbol">→</a> <a id="3621" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="3629" href="Ledger.Conway.Conformance.Equivalence.html#3395" class="Bound">tx</a> <a id="3632" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3634" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="3660" class="Symbol">→</a> <a id="3662" href="Ledger.Conway.Conformance.Equivalence.html#3391" class="Bound">Γ</a> <a id="3664" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">L.⊢</a> <a id="3668" href="Ledger.Conway.Conformance.Equivalence.html#3393" class="Bound">s</a> <a id="3670" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">⇀⦇</a> <a id="3673" href="Ledger.Conway.Conformance.Equivalence.html#3395" class="Bound">tx</a> <a id="3676" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">,UTXOW⦈</a> <a id="3684" href="Ledger.Conway.Conformance.Equivalence.html#3398" class="Bound">s&#39;</a>
                     <a id="3708" class="Symbol">→</a> <a id="3710" href="Ledger.Conway.Utxo.html#4687" class="Datatype">L.ValidCertDeposits</a> <a id="3730" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="3738" href="Ledger.Conway.Utxo.html#2855" class="Function">deposits</a> <a id="3747" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a>
<a id="3755" href="Ledger.Conway.Conformance.Equivalence.html#3365" class="Function">getValidCertDeposits</a> <a id="3776" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3783" class="Symbol">(</a><a id="3784" href="Ledger.Conway.Utxow.html#5305" class="InductiveConstructor">L.UTXOW-inductive⋯</a> <a id="3803" class="Symbol">_</a> <a id="3805" class="Symbol">_</a> <a id="3807" class="Symbol">_</a> <a id="3809" class="Symbol">_</a> <a id="3811" class="Symbol">_</a> <a id="3813" class="Symbol">_</a> <a id="3815" class="Symbol">_</a> <a id="3817" class="Symbol">_</a>
    <a id="3823" class="Symbol">(</a><a id="3824" href="Ledger.Conway.Utxo.html#15429" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3842" class="Symbol">_</a> <a id="3844" class="Symbol">_</a> <a id="3846" class="Symbol">_</a> <a id="3848" class="Symbol">_</a> <a id="3850" class="Symbol">_</a> <a id="3852" class="Symbol">_</a> <a id="3854" class="Symbol">_</a> <a id="3856" class="Symbol">_</a> <a id="3858" class="Symbol">_</a> <a id="3860" class="Symbol">_</a> <a id="3862" class="Symbol">_</a> <a id="3864" class="Symbol">_</a> <a id="3866" class="Symbol">_</a> <a id="3868" class="Symbol">_</a> <a id="3870" class="Symbol">_</a> <a id="3872" class="Symbol">_</a> <a id="3874" class="Symbol">_</a> <a id="3876" class="Symbol">_</a> <a id="3878" class="Symbol">_</a>
      <a id="3886" class="Symbol">(</a><a id="3887" href="Ledger.Conway.Utxo.html#13002" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3901" class="Symbol">(</a><a id="3902" href="Ledger.Conway.Conformance.Equivalence.html#3902" class="Bound">v</a> <a id="3904" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3906" class="Symbol">_))))</a> <a id="3912" class="Symbol">=</a> <a id="3914" href="Ledger.Conway.Conformance.Equivalence.html#3902" class="Bound">v</a>

<a id="makeCertDeps*"></a><a id="3917" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Function">makeCertDeps*</a> <a id="3931" class="Symbol">:</a> <a id="3933" class="Symbol">∀</a> <a id="3935" class="Symbol">{</a><a id="3936" href="Ledger.Conway.Conformance.Equivalence.html#3936" class="Bound">Γ</a> <a id="3938" href="Ledger.Conway.Conformance.Equivalence.html#3938" class="Bound">s</a> <a id="3940" href="Ledger.Conway.Conformance.Equivalence.html#3940" class="Bound">tx</a> <a id="3943" href="Ledger.Conway.Conformance.Equivalence.html#3943" class="Bound">s&#39;</a><a id="3945" class="Symbol">}</a>
              <a id="3961" class="Symbol">→</a> <a id="3963" class="Symbol">(</a><a id="3964" class="Keyword">let</a> <a id="3968" class="Keyword">open</a> <a id="3973" href="Ledger.Conway.Utxo.html#2395" class="Module">L.UTxOEnv</a> <a id="3983" href="Ledger.Conway.Conformance.Equivalence.html#3936" class="Bound">Γ</a> <a id="3985" class="Keyword">using</a> <a id="3991" class="Symbol">(</a><a id="3992" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a><a id="3999" class="Symbol">)</a>
                     <a id="4022" class="Keyword">open</a> <a id="4027" href="Ledger.Conway.Utxo.html#2747" class="Module">L.UTxOState</a> <a id="4039" href="Ledger.Conway.Conformance.Equivalence.html#3938" class="Bound">s</a> <a id="4041" class="Keyword">using</a> <a id="4047" class="Symbol">(</a><a id="4048" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="4056" class="Symbol">)</a>
                     <a id="4079" class="Keyword">open</a> <a id="4084" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="4091" class="Symbol">(</a><a id="4092" href="Ledger.Conway.Conformance.Equivalence.html#3940" class="Bound">tx</a> <a id="4095" class="Symbol">.</a><a id="4096" href="Ledger.Conway.Transaction.html#4338" class="Field">Tx.body</a><a id="4103" class="Symbol">)</a> <a id="4105" class="Keyword">using</a> <a id="4111" class="Symbol">(</a><a id="4112" href="Ledger.Conway.Transaction.html#2996" class="Field">txcerts</a><a id="4119" class="Symbol">))</a>
              <a id="4136" class="Symbol">→</a> <a id="4138" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="4146" href="Ledger.Conway.Conformance.Equivalence.html#3940" class="Bound">tx</a> <a id="4149" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4151" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
              <a id="4170" class="Symbol">→</a> <a id="4172" href="Ledger.Conway.Conformance.Equivalence.html#3936" class="Bound">Γ</a> <a id="4174" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">L.⊢</a> <a id="4178" href="Ledger.Conway.Conformance.Equivalence.html#3938" class="Bound">s</a> <a id="4180" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">⇀⦇</a> <a id="4183" href="Ledger.Conway.Conformance.Equivalence.html#3940" class="Bound">tx</a> <a id="4186" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">,UTXOW⦈</a> <a id="4194" href="Ledger.Conway.Conformance.Equivalence.html#3943" class="Bound">s&#39;</a>
              <a id="4211" class="Symbol">→</a> <a id="4213" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3936" class="Record">CertDeps*</a> <a id="4223" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="4231" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a>
<a id="4239" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Function">makeCertDeps*</a> <a id="4253" class="Symbol">{</a><a id="4254" class="Argument">s</a> <a id="4256" class="Symbol">=</a> <a id="4258" href="Ledger.Conway.Conformance.Equivalence.html#4258" class="Bound">s</a><a id="4259" class="Symbol">}</a> <a id="4261" href="Ledger.Conway.Conformance.Equivalence.html#4261" class="Bound">valid</a> <a id="4267" href="Ledger.Conway.Conformance.Equivalence.html#4267" class="Bound">r</a> <a id="4269" class="Symbol">=</a> <a id="4271" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4011" class="InductiveConstructor Operator">⟦</a> <a id="4273" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="4283" href="Ledger.Conway.Utxo.html#2855" class="Function">deposits</a> <a id="4292" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4011" class="InductiveConstructor Operator">,</a> <a id="4294" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="4304" href="Ledger.Conway.Utxo.html#2855" class="Function">deposits</a> <a id="4313" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4011" class="InductiveConstructor Operator">,</a> <a id="4315" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#7611" class="Function">validDDeps</a> <a id="4326" href="Ledger.Conway.Conformance.Equivalence.html#4414" class="Function">validDeps</a> <a id="4336" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4011" class="InductiveConstructor Operator">,</a> <a id="4338" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#8700" class="Function">validGDeps</a> <a id="4349" href="Ledger.Conway.Conformance.Equivalence.html#4414" class="Function">validDeps</a> <a id="4359" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4011" class="InductiveConstructor Operator">⟧*</a>
  <a id="4364" class="Keyword">where</a>
    <a id="4374" class="Keyword">open</a> <a id="4379" href="Ledger.Conway.Utxo.html#2747" class="Module">L.UTxOState</a> <a id="4391" href="Ledger.Conway.Conformance.Equivalence.html#4258" class="Bound">s</a> <a id="4393" class="Keyword">using</a> <a id="4399" class="Symbol">(</a><a id="4400" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="4408" class="Symbol">)</a>
    <a id="4414" href="Ledger.Conway.Conformance.Equivalence.html#4414" class="Function">validDeps</a> <a id="4424" class="Symbol">=</a> <a id="4426" href="Ledger.Conway.Conformance.Equivalence.html#3365" class="Function">getValidCertDeposits</a> <a id="4447" href="Ledger.Conway.Conformance.Equivalence.html#4261" class="Bound">valid</a> <a id="4453" href="Ledger.Conway.Conformance.Equivalence.html#4267" class="Bound">r</a>

<a id="lem-cert-deposits-valid"></a><a id="4456" href="Ledger.Conway.Conformance.Equivalence.html#4456" class="Function">lem-cert-deposits-valid</a> <a id="4480" class="Symbol">:</a> <a id="4482" class="Symbol">∀</a> <a id="4484" class="Symbol">{</a><a id="4485" href="Ledger.Conway.Conformance.Equivalence.html#4485" class="Bound">Γ</a> <a id="4487" href="Ledger.Conway.Conformance.Equivalence.html#4487" class="Bound">s</a> <a id="4489" href="Ledger.Conway.Conformance.Equivalence.html#4489" class="Bound">tx</a> <a id="4492" href="Ledger.Conway.Conformance.Equivalence.html#4492" class="Bound">s&#39;</a><a id="4494" class="Symbol">}</a> <a id="4496" class="Symbol">(</a><a id="4497" class="Keyword">open</a> <a id="4502" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="4509" href="Ledger.Conway.Conformance.Equivalence.html#4485" class="Bound">Γ</a> <a id="4511" class="Keyword">using</a> <a id="4517" class="Symbol">(</a><a id="4518" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="4525" class="Symbol">))</a>
                        <a id="4552" class="Symbol">→</a> <a id="4554" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="4562" href="Ledger.Conway.Conformance.Equivalence.html#4489" class="Bound">tx</a> <a id="4565" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4567" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                        <a id="4596" class="Symbol">→</a> <a id="4598" href="Ledger.Conway.Conformance.Equivalence.html#4485" class="Bound">Γ</a> <a id="4600" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="4604" href="Ledger.Conway.Conformance.Equivalence.html#4487" class="Bound">s</a> <a id="4606" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="4609" href="Ledger.Conway.Conformance.Equivalence.html#4489" class="Bound">tx</a> <a id="4612" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="4621" href="Ledger.Conway.Conformance.Equivalence.html#4492" class="Bound">s&#39;</a>
                        <a id="4648" class="Symbol">→</a> <a id="4650" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2904" class="Function">updateLedgerDeps</a> <a id="4667" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="4675" href="Ledger.Conway.Conformance.Equivalence.html#4489" class="Bound">tx</a> <a id="4678" class="Symbol">(</a><a id="4679" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="4692" href="Ledger.Conway.Conformance.Equivalence.html#4487" class="Bound">s</a><a id="4693" class="Symbol">)</a> <a id="4695" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="4698" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="4711" href="Ledger.Conway.Conformance.Equivalence.html#4492" class="Bound">s&#39;</a>
<a id="4714" href="Ledger.Conway.Conformance.Equivalence.html#4456" class="Function">lem-cert-deposits-valid</a> <a id="4738" class="Symbol">{</a><a id="4739" href="Ledger.Conway.Conformance.Equivalence.html#4739" class="Bound">Γ</a><a id="4740" class="Symbol">}</a> <a id="4742" class="Symbol">{</a><a id="4743" href="Ledger.Conway.Conformance.Equivalence.html#4743" class="Bound">s</a><a id="4744" class="Symbol">}</a> <a id="4746" class="Symbol">{</a><a id="4747" href="Ledger.Conway.Conformance.Equivalence.html#4747" class="Bound">tx</a><a id="4749" class="Symbol">}</a> <a id="4751" class="Symbol">{</a><a id="4752" href="Ledger.Conway.Conformance.Equivalence.html#4752" class="Bound">s&#39;</a><a id="4754" class="Symbol">}</a> <a id="4756" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4761" class="Symbol">(</a><a id="4762" href="Ledger.Conway.Ledger.html#3640" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="4774" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4779" href="Ledger.Conway.Conformance.Equivalence.html#4779" class="Bound">utxow</a> <a id="4785" href="Ledger.Conway.Conformance.Equivalence.html#4785" class="Bound">certs</a> <a id="4791" href="Ledger.Conway.Conformance.Equivalence.html#4791" class="Bound">gov</a><a id="4794" class="Symbol">)</a> <a id="4796" class="Keyword">rewrite</a> <a id="4804" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="4808" class="Symbol">(</a><a id="4809" href="Ledger.Conway.Conformance.Equivalence.html#2967" class="Function">lemUpdateDeposits</a> <a id="4827" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4832" href="Ledger.Conway.Conformance.Equivalence.html#4779" class="Bound">utxow</a><a id="4837" class="Symbol">)</a> <a id="4839" class="Symbol">=</a>
  <a id="4843" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18923" class="Function">lem-upd-ddeps</a> <a id="4857" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="4865" href="Ledger.Conway.Conformance.Equivalence.html#4953" class="Function">deps</a> <a id="4870" href="Ledger.Conway.Conformance.Equivalence.html#4747" class="Bound">tx</a> <a id="4873" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
  <a id="4877" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19696" class="Function">lem-upd-gdeps</a> <a id="4891" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="4899" href="Ledger.Conway.Conformance.Equivalence.html#4953" class="Function">deps</a> <a id="4904" href="Ledger.Conway.Conformance.Equivalence.html#4747" class="Bound">tx</a>
  <a id="4909" class="Keyword">where</a>
    <a id="4919" class="Keyword">open</a> <a id="4924" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="4931" href="Ledger.Conway.Conformance.Equivalence.html#4739" class="Bound">Γ</a> <a id="4933" class="Keyword">using</a> <a id="4939" class="Symbol">(</a><a id="4940" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="4947" class="Symbol">)</a>
    <a id="4953" href="Ledger.Conway.Conformance.Equivalence.html#4953" class="Function">deps</a> <a id="4958" class="Symbol">=</a> <a id="4960" href="Ledger.Conway.Conformance.Equivalence.html#4743" class="Bound">s</a> <a id="4962" class="Symbol">.</a><a id="4963" href="Ledger.Conway.Ledger.html#924" class="Field">L.LState.utxoSt</a> <a id="4979" class="Symbol">.</a> <a id="4981" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a>

<a id="lem-cert-deposits-invalid"></a><a id="5003" href="Ledger.Conway.Conformance.Equivalence.html#5003" class="Function">lem-cert-deposits-invalid</a> <a id="5029" class="Symbol">:</a> <a id="5031" class="Symbol">∀</a> <a id="5033" class="Symbol">{</a><a id="5034" href="Ledger.Conway.Conformance.Equivalence.html#5034" class="Bound">Γ</a> <a id="5036" href="Ledger.Conway.Conformance.Equivalence.html#5036" class="Bound">s</a> <a id="5038" href="Ledger.Conway.Conformance.Equivalence.html#5038" class="Bound">tx</a> <a id="5041" href="Ledger.Conway.Conformance.Equivalence.html#5041" class="Bound">s&#39;</a><a id="5043" class="Symbol">}</a> <a id="5045" class="Symbol">(</a><a id="5046" class="Keyword">open</a> <a id="5051" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="5058" href="Ledger.Conway.Conformance.Equivalence.html#5034" class="Bound">Γ</a> <a id="5060" class="Keyword">using</a> <a id="5066" class="Symbol">(</a><a id="5067" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="5074" class="Symbol">))</a>
                        <a id="5101" class="Symbol">→</a> <a id="5103" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="5111" href="Ledger.Conway.Conformance.Equivalence.html#5038" class="Bound">tx</a> <a id="5114" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5116" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                        <a id="5146" class="Symbol">→</a> <a id="5148" href="Ledger.Conway.Conformance.Equivalence.html#5034" class="Bound">Γ</a> <a id="5150" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="5154" href="Ledger.Conway.Conformance.Equivalence.html#5036" class="Bound">s</a> <a id="5156" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="5159" href="Ledger.Conway.Conformance.Equivalence.html#5038" class="Bound">tx</a> <a id="5162" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="5171" href="Ledger.Conway.Conformance.Equivalence.html#5041" class="Bound">s&#39;</a>
                        <a id="5198" class="Symbol">→</a> <a id="5200" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="5213" href="Ledger.Conway.Conformance.Equivalence.html#5036" class="Bound">s</a> <a id="5215" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="5218" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="5231" href="Ledger.Conway.Conformance.Equivalence.html#5041" class="Bound">s&#39;</a>
<a id="5234" href="Ledger.Conway.Conformance.Equivalence.html#5003" class="Function">lem-cert-deposits-invalid</a> <a id="5260" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5265" class="Symbol">(</a><a id="5266" href="Ledger.Conway.Ledger.html#3693" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="5278" class="Symbol">_</a> <a id="5280" href="Ledger.Conway.Conformance.Equivalence.html#5280" class="Bound">utxow</a><a id="5285" class="Symbol">)</a> <a id="5287" class="Keyword">rewrite</a> <a id="5295" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="5315" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5320" href="Ledger.Conway.Conformance.Equivalence.html#5280" class="Bound">utxow</a> <a id="5326" class="Symbol">=</a>
  <a id="5330" class="Symbol">(</a><a id="5331" href="Function.Base.html#704" class="Function">id</a> <a id="5334" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5336" href="Function.Base.html#704" class="Function">id</a><a id="5338" class="Symbol">)</a> <a id="5340" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5342" class="Symbol">(</a><a id="5343" href="Function.Base.html#704" class="Function">id</a> <a id="5346" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5348" href="Function.Base.html#704" class="Function">id</a><a id="5350" class="Symbol">)</a>

<a id="5353" class="Keyword">instance</a>
  <a id="LStateToConf"></a><a id="5364" href="Ledger.Conway.Conformance.Equivalence.html#5364" class="Function">LStateToConf</a> <a id="5377" class="Symbol">:</a> <a id="5379" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="5390" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5392" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="5403" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="5405" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a> <a id="5414" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="5416" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a>
  <a id="5427" href="Ledger.Conway.Conformance.Equivalence.html#5364" class="Function">LStateToConf</a> <a id="5440" class="Symbol">.</a><a id="5441" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="5447" href="Ledger.Conway.Conformance.Equivalence.html#5447" class="Bound">deposits</a> <a id="5456" href="Ledger.Conway.Conformance.Equivalence.html#5456" class="Bound">ledgerSt</a> <a id="5465" class="Symbol">=</a>
    <a id="5471" class="Keyword">let</a> <a id="5475" class="Keyword">open</a> <a id="5480" href="Ledger.Conway.Ledger.html#865" class="Module">L.LState</a> <a id="5489" href="Ledger.Conway.Conformance.Equivalence.html#5456" class="Bound">ledgerSt</a> <a id="5498" class="Keyword">in</a>
    <a id="5505" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="5507" href="Ledger.Conway.Ledger.html#924" class="Field">utxoSt</a> <a id="5514" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5516" href="Ledger.Conway.Ledger.html#951" class="Field">govSt</a> <a id="5522" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5524" href="Ledger.Conway.Conformance.Equivalence.html#5447" class="Bound">deposits</a> <a id="5533" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="5539" href="Ledger.Conway.Ledger.html#977" class="Field">certState</a> <a id="5549" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a>

<a id="5552" class="Keyword">instance</a>
  <a id="5563" class="Comment">-- LEDGERToConf : ∀ {Γ s tx s&#39;}</a>
  <a id="5597" class="Comment">--              → (∃[ certDeposits-s ] certDeposits-s ≡ᵈ certDeposits s)</a>
  <a id="5672" class="Comment">--              ⊢ Γ L.⊢ s ⇀⦇ tx ,LEDGER⦈ s&#39; ⭆ⁱ λ (certDeposits-s , _) _ →</a>
  <a id="5748" class="Comment">--                ∃[ certDeposits-s&#39; ]</a>
  <a id="5789" class="Comment">--                   certDeposits-s&#39; ≡ᵈ certDeposits s&#39;</a>
  <a id="5847" class="Comment">--                 × Γ C.⊢ (certDeposits s ⊢conv s) ⇀⦇ tx ,LEDGER⦈ (certDeposits-s&#39; ⊢conv s&#39;)</a>
  <a id="LEDGERToConf"></a><a id="5943" href="Ledger.Conway.Conformance.Equivalence.html#5943" class="Function">LEDGERToConf</a> <a id="5956" class="Symbol">:</a> <a id="5958" class="Symbol">∀</a> <a id="5960" class="Symbol">{</a><a id="5961" href="Ledger.Conway.Conformance.Equivalence.html#5961" class="Bound">Γ</a> <a id="5963" href="Ledger.Conway.Conformance.Equivalence.html#5963" class="Bound">s</a> <a id="5965" href="Ledger.Conway.Conformance.Equivalence.html#5965" class="Bound">tx</a> <a id="5968" href="Ledger.Conway.Conformance.Equivalence.html#5968" class="Bound">s&#39;</a><a id="5970" class="Symbol">}</a>
               <a id="5987" class="Symbol">→</a> <a id="5989" href="Ledger.Conway.Conformance.Equivalence.html#5961" class="Bound">Γ</a> <a id="5991" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="5995" href="Ledger.Conway.Conformance.Equivalence.html#5963" class="Bound">s</a> <a id="5997" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="6000" href="Ledger.Conway.Conformance.Equivalence.html#5965" class="Bound">tx</a> <a id="6003" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="6012" href="Ledger.Conway.Conformance.Equivalence.html#5968" class="Bound">s&#39;</a> <a id="6015" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a>
                 <a id="6034" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="6037" href="Ledger.Conway.Conformance.Equivalence.html#6037" class="Bound">certDeposits-s&#39;</a> <a id="6053" href="Data.Product.Base.html#1371" class="Function">]</a>
                    <a id="6075" href="Ledger.Conway.Conformance.Equivalence.html#6037" class="Bound">certDeposits-s&#39;</a> <a id="6091" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="6094" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="6107" href="Ledger.Conway.Conformance.Equivalence.html#5968" class="Bound">s&#39;</a>
                  <a id="6128" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6130" href="Ledger.Conway.Conformance.Equivalence.html#5961" class="Bound">Γ</a> <a id="6132" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="6136" class="Symbol">(</a><a id="6137" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="6150" href="Ledger.Conway.Conformance.Equivalence.html#5963" class="Bound">s</a> <a id="6152" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6158" href="Ledger.Conway.Conformance.Equivalence.html#5963" class="Bound">s</a><a id="6159" class="Symbol">)</a> <a id="6161" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="6164" href="Ledger.Conway.Conformance.Equivalence.html#5965" class="Bound">tx</a> <a id="6167" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="6176" class="Symbol">(</a><a id="6177" href="Ledger.Conway.Conformance.Equivalence.html#6037" class="Bound">certDeposits-s&#39;</a> <a id="6193" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6199" href="Ledger.Conway.Conformance.Equivalence.html#5968" class="Bound">s&#39;</a><a id="6201" class="Symbol">)</a>
  <a id="6205" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , eq-cdeps) r@(L.LEDGER-V⋯ refl utxow certs gov) =</a>
  <a id="6306" href="Ledger.Conway.Conformance.Equivalence.html#5943" class="Function">LEDGERToConf</a> <a id="6319" class="Symbol">{</a><a id="6320" href="Ledger.Conway.Conformance.Equivalence.html#6320" class="Bound">Γ</a><a id="6321" class="Symbol">}</a> <a id="6323" class="Symbol">{</a><a id="6324" href="Ledger.Conway.Conformance.Equivalence.html#6324" class="Bound">s</a><a id="6325" class="Symbol">}</a> <a id="6327" class="Symbol">{</a><a id="6328" href="Ledger.Conway.Conformance.Equivalence.html#6328" class="Bound">tx</a><a id="6330" class="Symbol">}</a> <a id="6332" class="Symbol">{</a><a id="6333" href="Ledger.Conway.Conformance.Equivalence.html#6333" class="Bound">s&#39;</a><a id="6335" class="Symbol">}</a> <a id="6337" class="Symbol">.</a><a id="6338" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="6344" class="Symbol">_</a> <a id="6346" href="Ledger.Conway.Conformance.Equivalence.html#6346" class="Bound">r</a><a id="6347" class="Symbol">@(</a><a id="6349" href="Ledger.Conway.Ledger.html#3640" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="6361" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6366" href="Ledger.Conway.Conformance.Equivalence.html#6366" class="Bound">utxow</a> <a id="6372" href="Ledger.Conway.Conformance.Equivalence.html#6372" class="Bound">certs</a> <a id="6378" href="Ledger.Conway.Conformance.Equivalence.html#6378" class="Bound">gov</a><a id="6381" class="Symbol">)</a> <a id="6383" class="Symbol">=</a>
    <a id="6389" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2904" class="Function">updateLedgerDeps</a> <a id="6406" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="6414" href="Ledger.Conway.Conformance.Equivalence.html#6328" class="Bound">tx</a> <a id="6417" class="Symbol">(</a><a id="6418" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="6431" href="Ledger.Conway.Conformance.Equivalence.html#6324" class="Bound">s</a><a id="6432" class="Symbol">)</a>
    <a id="6438" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6440" href="Ledger.Conway.Conformance.Equivalence.html#4456" class="Function">lem-cert-deposits-valid</a> <a id="6464" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6469" href="Ledger.Conway.Conformance.Equivalence.html#6346" class="Bound">r</a>
    <a id="6475" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6477" href="Relation.Binary.PropositionalEquality.Core.html#2044" class="Function">subst₂</a> <a id="6484" class="Symbol">(λ</a> <a id="6487" href="Ledger.Conway.Conformance.Equivalence.html#6487" class="Bound">•</a> <a id="6489" href="Ledger.Conway.Conformance.Equivalence.html#6489" class="Bound">◆</a> <a id="6491" class="Symbol">→</a> <a id="6493" href="Ledger.Conway.Conformance.Equivalence.html#6320" class="Bound">Γ</a> <a id="6495" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="6499" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="6512" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a> <a id="6522" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6528" href="Ledger.Conway.Conformance.Equivalence.html#6324" class="Bound">s</a> <a id="6530" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="6533" href="Ledger.Conway.Conformance.Equivalence.html#6328" class="Bound">tx</a> <a id="6536" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="6545" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="6547" href="Ledger.Conway.Conformance.Equivalence.html#6487" class="Bound">•</a> <a id="6549" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6551" class="Symbol">_</a> <a id="6553" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6555" href="Ledger.Conway.Conformance.Equivalence.html#6489" class="Bound">◆</a> <a id="6557" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="6558" class="Symbol">)</a>
             <a id="6573" href="Ledger.Conway.Conformance.Equivalence.html#7468" class="Function">utxoEq</a> <a id="6580" href="Ledger.Conway.Conformance.Equivalence.html#7690" class="Function">certsEq</a> <a id="6588" href="Ledger.Conway.Conformance.Equivalence.html#7308" class="Function">ledger&#39;</a>
    <a id="6600" class="Keyword">where</a>
      <a id="6612" class="Keyword">open</a> <a id="6617" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="6624" href="Ledger.Conway.Conformance.Equivalence.html#6320" class="Bound">Γ</a>
      <a id="6632" class="Keyword">open</a> <a id="6637" href="Ledger.Conway.Ledger.html#865" class="Module">L.LState</a> <a id="6646" href="Ledger.Conway.Conformance.Equivalence.html#6324" class="Bound">s</a>
      <a id="6654" class="Keyword">open</a> <a id="6659" href="Ledger.Conway.Ledger.html#865" class="Module">L.LState</a> <a id="6668" href="Ledger.Conway.Conformance.Equivalence.html#6333" class="Bound">s&#39;</a> <a id="6671" class="Keyword">renaming</a> <a id="6680" class="Symbol">(</a><a id="6681" href="Ledger.Conway.Ledger.html#924" class="Field">utxoSt</a> <a id="6688" class="Symbol">to</a> <a id="6691" class="Field">utxoSt&#39;</a><a id="6698" class="Symbol">;</a> <a id="6700" href="Ledger.Conway.Ledger.html#977" class="Field">certState</a> <a id="6710" class="Symbol">to</a> <a id="6713" class="Field">certState&#39;</a><a id="6723" class="Symbol">;</a> <a id="6725" href="Ledger.Conway.Ledger.html#951" class="Field">govSt</a> <a id="6731" class="Symbol">to</a> <a id="6734" class="Field">govSt&#39;</a><a id="6740" class="Symbol">)</a>
      <a id="6748" class="Keyword">open</a> <a id="6753" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="6760" class="Symbol">(</a><a id="6761" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="6766" href="Ledger.Conway.Conformance.Equivalence.html#6328" class="Bound">tx</a><a id="6768" class="Symbol">)</a> <a id="6770" class="Keyword">using</a> <a id="6776" class="Symbol">(</a><a id="6777" href="Ledger.Conway.Transaction.html#2996" class="Field">txcerts</a><a id="6784" class="Symbol">)</a>
      <a id="6792" href="Ledger.Conway.Conformance.Equivalence.html#6792" class="Function">deposits</a> <a id="6801" class="Symbol">=</a> <a id="6803" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="6824" href="Ledger.Conway.Ledger.html#924" class="Function">utxoSt</a>
      <a id="6837" href="Ledger.Conway.Conformance.Equivalence.html#6837" class="Function">utxow&#39;</a> <a id="6844" class="Symbol">:</a> <a id="6846" class="Symbol">_</a> <a id="6848" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">C.⊢</a> <a id="6852" href="Ledger.Conway.Ledger.html#924" class="Function">utxoSt</a> <a id="6859" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">⇀⦇</a> <a id="6862" href="Ledger.Conway.Conformance.Equivalence.html#6328" class="Bound">tx</a> <a id="6865" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">,UTXOW⦈</a> <a id="6873" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="6885" href="Ledger.Conway.Conformance.Equivalence.html#6792" class="Function">deposits</a> <a id="6894" href="Ledger.Conway.Conformance.Equivalence.html#6691" class="Function">utxoSt&#39;</a>
      <a id="6908" href="Ledger.Conway.Conformance.Equivalence.html#6837" class="Function">utxow&#39;</a> <a id="6915" class="Symbol">=</a> <a id="6917" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="6922" href="Ledger.Conway.Conformance.Equivalence.html#6366" class="Bound">utxow</a>
      <a id="6934" href="Ledger.Conway.Conformance.Equivalence.html#6934" class="Function">utxoStC&#39;</a>    <a id="6946" class="Symbol">=</a> <a id="6948" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="6960" class="Symbol">(</a><a id="6961" href="Ledger.Conway.Utxo.html#9339" class="Function">L.updateDeposits</a> <a id="6978" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="6986" class="Symbol">(</a><a id="6987" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="6992" href="Ledger.Conway.Conformance.Equivalence.html#6328" class="Bound">tx</a><a id="6994" class="Symbol">)</a> <a id="6996" href="Ledger.Conway.Conformance.Equivalence.html#6792" class="Function">deposits</a><a id="7004" class="Symbol">)</a> <a id="7006" href="Ledger.Conway.Conformance.Equivalence.html#6691" class="Function">utxoSt&#39;</a>
      <a id="7020" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a>  <a id="7031" class="Symbol">=</a> <a id="7033" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Function">makeCertDeps*</a> <a id="7047" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7052" href="Ledger.Conway.Conformance.Equivalence.html#6366" class="Bound">utxow</a>
      <a id="7064" href="Ledger.Conway.Conformance.Equivalence.html#7064" class="Function">cdeposits&#39;</a> <a id="7075" class="Symbol">=</a> <a id="7077" href="Ledger.Conway.Conformance.Equivalence.Certs.html#5654" class="Function">updateCertDeps*</a> <a id="7093" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="7101" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a>
      <a id="7117" href="Ledger.Conway.Conformance.Equivalence.html#7117" class="Function">certStateC&#39;</a> <a id="7129" class="Symbol">=</a> <a id="7131" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7144" href="Ledger.Conway.Conformance.Equivalence.html#7064" class="Function">cdeposits&#39;</a> <a id="7155" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7161" href="Ledger.Conway.Conformance.Equivalence.html#6713" class="Function">certState&#39;</a>
      <a id="7178" href="Ledger.Conway.Conformance.Equivalence.html#7178" class="Function">certs&#39;</a> <a id="7185" class="Symbol">:</a> <a id="7187" class="Symbol">_</a> <a id="7189" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">C.⊢</a> <a id="7193" class="Symbol">(</a><a id="7194" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7207" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a> <a id="7217" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7223" href="Ledger.Conway.Ledger.html#977" class="Function">certState</a><a id="7232" class="Symbol">)</a> <a id="7234" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">⇀⦇</a> <a id="7237" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="7245" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">,CERTS⦈</a> <a id="7253" href="Ledger.Conway.Conformance.Equivalence.html#7117" class="Function">certStateC&#39;</a>
      <a id="7271" href="Ledger.Conway.Conformance.Equivalence.html#7178" class="Function">certs&#39;</a> <a id="7278" class="Symbol">=</a> <a id="7280" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a> <a id="7290" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7296" href="Ledger.Conway.Conformance.Equivalence.html#6372" class="Bound">certs</a>
      <a id="7308" href="Ledger.Conway.Conformance.Equivalence.html#7308" class="Function">ledger&#39;</a> <a id="7316" class="Symbol">:</a> <a id="7318" href="Ledger.Conway.Conformance.Equivalence.html#6320" class="Bound">Γ</a> <a id="7320" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="7324" class="Symbol">(</a><a id="7325" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7338" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a> <a id="7348" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7354" href="Ledger.Conway.Conformance.Equivalence.html#6324" class="Bound">s</a><a id="7355" class="Symbol">)</a> <a id="7357" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="7360" href="Ledger.Conway.Conformance.Equivalence.html#6328" class="Bound">tx</a> <a id="7363" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="7372" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">C.⟦</a> <a id="7376" href="Ledger.Conway.Conformance.Equivalence.html#6934" class="Function">utxoStC&#39;</a> <a id="7385" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">,</a> <a id="7387" href="Ledger.Conway.Conformance.Equivalence.html#6734" class="Function">govSt&#39;</a> <a id="7394" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">,</a> <a id="7396" href="Ledger.Conway.Conformance.Equivalence.html#7117" class="Function">certStateC&#39;</a> <a id="7408" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="7417" href="Ledger.Conway.Conformance.Equivalence.html#7308" class="Function">ledger&#39;</a> <a id="7425" class="Symbol">=</a> <a id="7427" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="7439" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7444" href="Ledger.Conway.Conformance.Equivalence.html#6837" class="Function">utxow&#39;</a> <a id="7451" href="Ledger.Conway.Conformance.Equivalence.html#7178" class="Function">certs&#39;</a> <a id="7458" href="Ledger.Conway.Conformance.Equivalence.html#6378" class="Bound">gov</a>
      <a id="7468" href="Ledger.Conway.Conformance.Equivalence.html#7468" class="Function">utxoEq</a>  <a id="7476" class="Symbol">:</a> <a id="7478" href="Ledger.Conway.Conformance.Equivalence.html#6934" class="Function">utxoStC&#39;</a> <a id="7487" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7489" href="Ledger.Conway.Conformance.Equivalence.html#6691" class="Function">utxoSt&#39;</a>
      <a id="7503" href="Ledger.Conway.Conformance.Equivalence.html#7468" class="Function">utxoEq</a>  <a id="7511" class="Symbol">=</a> <a id="7513" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="7518" class="Symbol">(λ</a> <a id="7521" href="Ledger.Conway.Conformance.Equivalence.html#7521" class="Bound">•</a> <a id="7523" class="Symbol">→</a> <a id="7525" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7527" class="Symbol">_</a> <a id="7529" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7531" class="Symbol">_</a> <a id="7533" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7535" href="Ledger.Conway.Conformance.Equivalence.html#7521" class="Bound">•</a> <a id="7537" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7539" class="Symbol">_</a> <a id="7541" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="7542" class="Symbol">)</a>
                     <a id="7565" class="Symbol">(</a><a id="7566" href="Ledger.Conway.Conformance.Equivalence.html#2967" class="Function">lemUpdateDeposits</a> <a id="7584" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7589" href="Ledger.Conway.Conformance.Equivalence.html#6366" class="Bound">utxow</a><a id="7594" class="Symbol">)</a>
      <a id="7602" href="Ledger.Conway.Conformance.Equivalence.html#7602" class="Function">ddeps</a> <a id="7608" class="Symbol">=</a> <a id="7610" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7623" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a> <a id="7633" class="Symbol">.</a><a id="7634" href="Data.Product.Base.html#636" class="Field">proj₁</a>
      <a id="7646" href="Ledger.Conway.Conformance.Equivalence.html#7646" class="Function">gdeps</a> <a id="7652" class="Symbol">=</a> <a id="7654" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7667" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a> <a id="7677" class="Symbol">.</a><a id="7678" href="Data.Product.Base.html#650" class="Field">proj₂</a>
      <a id="7690" href="Ledger.Conway.Conformance.Equivalence.html#7690" class="Function">certsEq</a> <a id="7698" class="Symbol">:</a> <a id="7700" href="Ledger.Conway.Conformance.Equivalence.html#7117" class="Function">certStateC&#39;</a> <a id="7712" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7714" class="Symbol">(</a><a id="7715" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="7727" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="7735" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="7743" href="Ledger.Conway.Conformance.Equivalence.html#7602" class="Function">ddeps</a> <a id="7749" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7751" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="7763" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="7771" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="7779" href="Ledger.Conway.Conformance.Equivalence.html#7646" class="Function">gdeps</a><a id="7784" class="Symbol">)</a> <a id="7786" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7792" href="Ledger.Conway.Conformance.Equivalence.html#6713" class="Function">certState&#39;</a>
      <a id="7809" href="Ledger.Conway.Conformance.Equivalence.html#7690" class="Function">certsEq</a> <a id="7817" class="Symbol">=</a> <a id="7819" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="7825" class="Symbol">(λ</a> <a id="7828" href="Ledger.Conway.Conformance.Equivalence.html#7828" class="Bound">•</a> <a id="7830" href="Ledger.Conway.Conformance.Equivalence.html#7830" class="Bound">◆</a> <a id="7832" class="Symbol">→</a> <a id="7834" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7836" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7838" class="Symbol">_</a> <a id="7840" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7842" class="Symbol">_</a> <a id="7844" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7846" class="Symbol">_</a> <a id="7848" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7850" href="Ledger.Conway.Conformance.Equivalence.html#7828" class="Bound">•</a> <a id="7852" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="7854" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7856" class="Symbol">_</a> <a id="7858" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7860" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7862" class="Symbol">_</a> <a id="7864" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7866" class="Symbol">_</a> <a id="7868" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7870" href="Ledger.Conway.Conformance.Equivalence.html#7830" class="Bound">◆</a> <a id="7872" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="7874" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="7875" class="Symbol">)</a>
                     <a id="7898" class="Symbol">(</a><a id="7899" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#10919" class="Function">lem-ddeps</a> <a id="7909" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a><a id="7918" class="Symbol">)</a>
                     <a id="7941" class="Symbol">(</a><a id="7942" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#11832" class="Function">lem-gdeps</a> <a id="7952" href="Ledger.Conway.Conformance.Equivalence.html#7020" class="Function">cdeposits</a><a id="7961" class="Symbol">)</a>

  <a id="7966" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , cdeps-eq) r@(L.LEDGER-I⋯ refl utxow) =</a>
  <a id="8057" href="Ledger.Conway.Conformance.Equivalence.html#5943" class="Function">LEDGERToConf</a> <a id="8070" class="Symbol">{</a><a id="8071" href="Ledger.Conway.Conformance.Equivalence.html#8071" class="Bound">Γ</a><a id="8072" class="Symbol">}</a> <a id="8074" class="Symbol">{</a><a id="8075" href="Ledger.Conway.Conformance.Equivalence.html#8075" class="Bound">s</a><a id="8076" class="Symbol">}</a> <a id="8078" class="Symbol">{</a><a id="8079" href="Ledger.Conway.Conformance.Equivalence.html#8079" class="Bound">tx</a><a id="8081" class="Symbol">}</a> <a id="8083" class="Symbol">{</a><a id="8084" href="Ledger.Conway.Conformance.Equivalence.html#8084" class="Bound">s&#39;</a><a id="8086" class="Symbol">}</a> <a id="8088" class="Symbol">.</a><a id="8089" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8095" class="Symbol">_</a> <a id="8097" href="Ledger.Conway.Conformance.Equivalence.html#8097" class="Bound">r</a><a id="8098" class="Symbol">@(</a><a id="8100" href="Ledger.Conway.Ledger.html#3693" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="8112" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8117" href="Ledger.Conway.Conformance.Equivalence.html#8117" class="Bound">utxow</a><a id="8122" class="Symbol">)</a> <a id="8124" class="Symbol">=</a>
    <a id="8130" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="8143" href="Ledger.Conway.Conformance.Equivalence.html#8075" class="Bound">s</a> <a id="8145" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8147" href="Ledger.Conway.Conformance.Equivalence.html#5003" class="Function">lem-cert-deposits-invalid</a> <a id="8173" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8178" href="Ledger.Conway.Conformance.Equivalence.html#8097" class="Bound">r</a> <a id="8180" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
    <a id="8186" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="8192" class="Symbol">(λ</a> <a id="8195" href="Ledger.Conway.Conformance.Equivalence.html#8195" class="Bound">•</a> <a id="8197" class="Symbol">→</a> <a id="8199" href="Ledger.Conway.Conformance.Equivalence.html#8071" class="Bound">Γ</a> <a id="8201" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="8205" class="Symbol">_</a> <a id="8207" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="8213" href="Ledger.Conway.Conformance.Equivalence.html#8075" class="Bound">s</a> <a id="8215" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="8218" href="Ledger.Conway.Conformance.Equivalence.html#8079" class="Bound">tx</a> <a id="8221" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="8230" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="8232" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="8234" class="Symbol">_</a> <a id="8236" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8238" class="Symbol">_</a> <a id="8240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8242" href="Ledger.Conway.Conformance.Equivalence.html#8195" class="Bound">•</a> <a id="8244" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8246" class="Symbol">_</a> <a id="8248" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="8250" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8252" class="Symbol">_</a> <a id="8254" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8256" class="Symbol">_</a> <a id="8258" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="8259" class="Symbol">)</a>
          <a id="8271" class="Symbol">(</a><a id="8272" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="8292" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8297" href="Ledger.Conway.Conformance.Equivalence.html#8117" class="Bound">utxow</a><a id="8302" class="Symbol">)</a>
          <a id="8314" class="Symbol">(</a><a id="8315" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="8327" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8332" class="Symbol">(</a><a id="8333" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8338" href="Ledger.Conway.Conformance.Equivalence.html#8117" class="Bound">utxow</a><a id="8343" class="Symbol">))</a>

<a id="8347" class="Keyword">instance</a>

  <a id="LStateFromConf"></a><a id="8359" href="Ledger.Conway.Conformance.Equivalence.html#8359" class="Function">LStateFromConf</a> <a id="8374" class="Symbol">:</a> <a id="8376" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a> <a id="8385" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a> <a id="8387" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a>
  <a id="8398" href="Ledger.Conway.Conformance.Equivalence.html#8359" class="Function">LStateFromConf</a> <a id="8413" class="Symbol">.</a><a id="8414" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8420" class="Symbol">_</a> <a id="8422" href="Ledger.Conway.Conformance.Equivalence.html#8422" class="Bound">ls</a> <a id="8425" class="Symbol">=</a>
    <a id="8431" class="Keyword">let</a> <a id="8435" class="Keyword">open</a> <a id="8440" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="8449" href="Ledger.Conway.Conformance.Equivalence.html#8422" class="Bound">ls</a> <a id="8452" class="Keyword">in</a>
    <a id="8459" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="8461" href="Ledger.Conway.Conformance.Ledger.html#778" class="Field">utxoSt</a> <a id="8468" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8470" href="Ledger.Conway.Conformance.Ledger.html#805" class="Field">govSt</a> <a id="8476" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8478" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8483" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="8493" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a>

<a id="certDepositsC"></a><a id="8496" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="8510" class="Symbol">:</a> <a id="8512" href="Ledger.Conway.Conformance.Certs.html#962" class="Record">C.CertState</a> <a id="8524" class="Symbol">→</a> <a id="8526" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="8537" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8539" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a>
<a id="8550" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="8564" href="Ledger.Conway.Conformance.Equivalence.html#8564" class="Bound">cs</a> <a id="8567" class="Symbol">=</a> <a id="8569" class="Keyword">let</a> <a id="8573" class="Keyword">open</a> <a id="8578" href="Ledger.Conway.Conformance.Certs.html#962" class="Module">C.CertState</a> <a id="8590" href="Ledger.Conway.Conformance.Equivalence.html#8564" class="Bound">cs</a> <a id="8593" class="Keyword">in</a> <a id="8596" href="Ledger.Conway.Conformance.Certs.html#762" class="Field">C.DState.deposits</a> <a id="8614" href="Ledger.Conway.Conformance.Certs.html#1021" class="Field">dState</a> <a id="8621" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8623" href="Ledger.Conway.Conformance.Certs.html#932" class="Field">C.GState.deposits</a> <a id="8641" href="Ledger.Conway.Conformance.Certs.html#1061" class="Field">gState</a>

<a id="WellformedLState"></a><a id="8649" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">WellformedLState</a> <a id="8666" class="Symbol">:</a> <a id="8668" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a> <a id="8677" class="Symbol">→</a> <a id="8679" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8684" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">WellformedLState</a> <a id="8701" href="Ledger.Conway.Conformance.Equivalence.html#8701" class="Bound">s</a> <a id="8703" class="Symbol">=</a> <a id="8705" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="8719" class="Symbol">(</a><a id="8720" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="8739" href="Ledger.Conway.Conformance.Equivalence.html#8701" class="Bound">s</a><a id="8740" class="Symbol">)</a> <a id="8742" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="8745" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="8758" class="Symbol">(</a><a id="8759" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8764" href="Ledger.Conway.Conformance.Equivalence.html#8701" class="Bound">s</a><a id="8765" class="Symbol">)</a>

<a id="getValidCertDepositsCERTS"></a><a id="8768" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="8794" class="Symbol">:</a> <a id="8796" class="Symbol">∀</a> <a id="8798" class="Symbol">{</a><a id="8799" href="Ledger.Conway.Conformance.Equivalence.html#8799" class="Bound">Γ</a> <a id="8801" href="Ledger.Conway.Conformance.Equivalence.html#8801" class="Bound">s</a> <a id="8803" href="Ledger.Conway.Conformance.Equivalence.html#8803" class="Bound">certs</a> <a id="8809" href="Ledger.Conway.Conformance.Equivalence.html#8809" class="Bound">s&#39;</a><a id="8811" class="Symbol">}</a> <a id="8813" href="Ledger.Conway.Conformance.Equivalence.html#8813" class="Bound">deposits</a> <a id="8822" class="Symbol">(</a><a id="8823" class="Keyword">open</a> <a id="8828" href="Ledger.Conway.Certs.html#2819" class="Module">L.CertEnv</a> <a id="8838" href="Ledger.Conway.Conformance.Equivalence.html#8799" class="Bound">Γ</a> <a id="8840" class="Keyword">using</a> <a id="8846" class="Symbol">(</a><a id="8847" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="8849" class="Symbol">))</a>
                          <a id="8878" class="Symbol">→</a> <a id="8880" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="8894" href="Ledger.Conway.Conformance.Equivalence.html#8801" class="Bound">s</a> <a id="8896" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="8899" class="Symbol">(</a><a id="8900" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="8910" href="Ledger.Conway.Conformance.Equivalence.html#8813" class="Bound">deposits</a> <a id="8919" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8921" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="8931" href="Ledger.Conway.Conformance.Equivalence.html#8813" class="Bound">deposits</a><a id="8939" class="Symbol">)</a>
                          <a id="8967" class="Symbol">→</a> <a id="8969" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="8996" class="Symbol">{</a><a id="8997" class="Argument">sts</a> <a id="9001" class="Symbol">=</a> <a id="9003" href="Ledger.Conway.Conformance.Certs.html#6499" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="9018" class="Symbol">}</a> <a id="9020" href="Ledger.Conway.Conformance.Equivalence.html#8799" class="Bound">Γ</a> <a id="9022" href="Ledger.Conway.Conformance.Equivalence.html#8801" class="Bound">s</a> <a id="9024" href="Ledger.Conway.Conformance.Equivalence.html#8803" class="Bound">certs</a> <a id="9030" href="Ledger.Conway.Conformance.Equivalence.html#8809" class="Bound">s&#39;</a>
                          <a id="9059" class="Symbol">→</a> <a id="9061" href="Ledger.Conway.Utxo.html#4687" class="Datatype">L.ValidCertDeposits</a> <a id="9081" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="9084" href="Ledger.Conway.Conformance.Equivalence.html#8813" class="Bound">deposits</a> <a id="9093" href="Ledger.Conway.Conformance.Equivalence.html#8803" class="Bound">certs</a>
<a id="9099" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9125" href="Ledger.Conway.Conformance.Equivalence.html#9125" class="Bound">deposits</a> <a id="9134" href="Ledger.Conway.Conformance.Equivalence.html#9134" class="Bound">wf</a> <a id="9137" class="Symbol">(</a><a id="9138" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="9146" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="9152" class="Symbol">)</a> <a id="9154" class="Symbol">=</a> <a id="9156" href="Ledger.Conway.Utxo.html#4769" class="InductiveConstructor">L.[]</a>
<a id="9161" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9187" class="Symbol">{</a><a id="9188" href="Ledger.Conway.Conformance.Equivalence.html#9188" class="Bound">Γ</a><a id="9189" class="Symbol">}</a> <a id="9191" class="Symbol">{</a><a id="9192" href="Ledger.Conway.Conformance.Equivalence.html#9192" class="Bound">s</a><a id="9193" class="Symbol">}</a> <a id="9195" class="Symbol">{</a><a id="9196" href="Ledger.Conway.Conformance.Equivalence.html#9196" class="Bound">cert</a> <a id="9201" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9203" class="Symbol">_}</a> <a id="9206" href="Ledger.Conway.Conformance.Equivalence.html#9206" class="Bound">deposits</a> <a id="9215" href="Ledger.Conway.Conformance.Equivalence.html#9215" class="Bound">wf</a> <a id="9218" class="Symbol">(</a><a id="9219" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9226" class="Symbol">(</a><a id="9227" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="9240" class="Symbol">(</a><a id="9241" href="Ledger.Conway.Conformance.Certs.html#4162" class="InductiveConstructor">C.DELEG-delegate</a> <a id="9258" class="Symbol">(</a><a id="9259" href="Ledger.Conway.Conformance.Equivalence.html#9259" class="Bound">a</a> <a id="9261" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9263" href="Ledger.Conway.Conformance.Equivalence.html#9263" class="Bound">b</a><a id="9264" class="Symbol">)))</a> <a id="9268" href="Ledger.Conway.Conformance.Equivalence.html#9268" class="Bound">rs</a><a id="9270" class="Symbol">)</a> <a id="9272" class="Symbol">=</a>
  <a id="9276" href="Ledger.Conway.Utxo.html#4813" class="InductiveConstructor">L.delegate</a> <a id="9287" class="Symbol">(</a><a id="9288" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9314" class="Symbol">_</a> <a id="9316" class="Symbol">(</a><a id="9317" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="9328" class="Symbol">(</a><a id="9329" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="9342" href="Ledger.Conway.Conformance.Equivalence.html#9188" class="Bound">Γ</a><a id="9343" class="Symbol">)</a> <a id="9345" class="Symbol">(</a><a id="9346" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="9360" href="Ledger.Conway.Conformance.Equivalence.html#9192" class="Bound">s</a><a id="9361" class="Symbol">)</a> <a id="9363" href="Ledger.Conway.Conformance.Equivalence.html#9206" class="Bound">deposits</a> <a id="9372" href="Ledger.Conway.Conformance.Equivalence.html#9196" class="Bound">cert</a> <a id="9377" href="Ledger.Conway.Conformance.Equivalence.html#9215" class="Bound">wf</a><a id="9379" class="Symbol">)</a> <a id="9381" href="Ledger.Conway.Conformance.Equivalence.html#9268" class="Bound">rs</a><a id="9383" class="Symbol">)</a>
<a id="9385" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9411" class="Symbol">{</a><a id="9412" href="Ledger.Conway.Conformance.Equivalence.html#9412" class="Bound">Γ</a><a id="9413" class="Symbol">}</a> <a id="9415" class="Symbol">{</a><a id="9416" href="Ledger.Conway.Conformance.Equivalence.html#9416" class="Bound">s</a><a id="9417" class="Symbol">}</a> <a id="9419" class="Symbol">{</a><a id="9420" href="Ledger.Conway.Conformance.Equivalence.html#9420" class="Bound">cert</a> <a id="9425" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9427" class="Symbol">_}</a> <a id="9430" href="Ledger.Conway.Conformance.Equivalence.html#9430" class="Bound">deposits</a> <a id="9439" href="Ledger.Conway.Conformance.Equivalence.html#9439" class="Bound">wf</a> <a id="9442" class="Symbol">(</a><a id="9443" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9450" class="Symbol">(</a><a id="9451" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="9464" class="Symbol">(</a><a id="9465" href="Ledger.Conway.Conformance.Certs.html#4791" class="InductiveConstructor">C.DELEG-dereg</a> <a id="9479" class="Symbol">(_</a> <a id="9482" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9484" href="Ledger.Conway.Conformance.Equivalence.html#9484" class="Bound">h</a> <a id="9486" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9488" href="Ledger.Conway.Conformance.Equivalence.html#9488" class="Bound">h&#39;</a><a id="9490" class="Symbol">)))</a> <a id="9494" href="Ledger.Conway.Conformance.Equivalence.html#9494" class="Bound">rs</a><a id="9496" class="Symbol">)</a> <a id="9498" class="Symbol">=</a>
  <a id="9502" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">L.dereg</a> <a id="9510" class="Symbol">(</a><a id="9511" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="9520" class="Symbol">.</a><a id="9521" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9538" class="Symbol">(</a><a id="9539" href="Ledger.Conway.Conformance.Equivalence.html#9439" class="Bound">wf</a> <a id="9542" class="Symbol">.</a><a id="9543" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9549" class="Symbol">.</a><a id="9550" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9556" href="Ledger.Conway.Conformance.Equivalence.html#9484" class="Bound">h</a><a id="9557" class="Symbol">)</a> <a id="9559" class="Symbol">.</a><a id="9560" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="9565" class="Symbol">)</a> <a id="9567" href="Ledger.Conway.Conformance.Equivalence.html#9488" class="Bound">h&#39;</a>
          <a id="9580" class="Symbol">(</a><a id="9581" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9607" class="Symbol">_</a> <a id="9609" class="Symbol">(</a><a id="9610" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="9621" class="Symbol">(</a><a id="9622" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="9635" href="Ledger.Conway.Conformance.Equivalence.html#9412" class="Bound">Γ</a><a id="9636" class="Symbol">)</a> <a id="9638" class="Symbol">(</a><a id="9639" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="9653" href="Ledger.Conway.Conformance.Equivalence.html#9416" class="Bound">s</a><a id="9654" class="Symbol">)</a> <a id="9656" href="Ledger.Conway.Conformance.Equivalence.html#9430" class="Bound">deposits</a> <a id="9665" href="Ledger.Conway.Conformance.Equivalence.html#9420" class="Bound">cert</a> <a id="9670" href="Ledger.Conway.Conformance.Equivalence.html#9439" class="Bound">wf</a><a id="9672" class="Symbol">)</a> <a id="9674" href="Ledger.Conway.Conformance.Equivalence.html#9494" class="Bound">rs</a><a id="9676" class="Symbol">)</a>
<a id="9678" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9704" class="Symbol">{</a><a id="9705" href="Ledger.Conway.Conformance.Equivalence.html#9705" class="Bound">Γ</a><a id="9706" class="Symbol">}</a> <a id="9708" class="Symbol">{</a><a id="9709" href="Ledger.Conway.Conformance.Equivalence.html#9709" class="Bound">s</a><a id="9710" class="Symbol">}</a> <a id="9712" class="Symbol">{</a><a id="9713" href="Ledger.Conway.Conformance.Equivalence.html#9713" class="Bound">cert</a> <a id="9718" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9720" class="Symbol">_}</a> <a id="9723" href="Ledger.Conway.Conformance.Equivalence.html#9723" class="Bound">deposits</a> <a id="9732" href="Ledger.Conway.Conformance.Equivalence.html#9732" class="Bound">wf</a> <a id="9735" class="Symbol">(</a><a id="9736" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9743" class="Symbol">(</a><a id="9744" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="9757" class="Symbol">(</a><a id="9758" href="Ledger.Conway.Conformance.Certs.html#5155" class="InductiveConstructor">C.DELEG-reg</a> <a id="9770" href="Ledger.Conway.Conformance.Equivalence.html#9770" class="Bound">x</a><a id="9771" class="Symbol">))</a> <a id="9774" href="Ledger.Conway.Conformance.Equivalence.html#9774" class="Bound">rs</a><a id="9776" class="Symbol">)</a> <a id="9778" class="Symbol">=</a>
  <a id="9782" href="Ledger.Conway.Utxo.html#5353" class="InductiveConstructor">L.reg</a> <a id="9788" class="Symbol">(</a><a id="9789" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9815" class="Symbol">_</a> <a id="9817" class="Symbol">(</a><a id="9818" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="9829" class="Symbol">(</a><a id="9830" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="9843" href="Ledger.Conway.Conformance.Equivalence.html#9705" class="Bound">Γ</a><a id="9844" class="Symbol">)</a> <a id="9846" class="Symbol">(</a><a id="9847" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="9861" href="Ledger.Conway.Conformance.Equivalence.html#9709" class="Bound">s</a><a id="9862" class="Symbol">)</a> <a id="9864" href="Ledger.Conway.Conformance.Equivalence.html#9723" class="Bound">deposits</a> <a id="9873" href="Ledger.Conway.Conformance.Equivalence.html#9713" class="Bound">cert</a> <a id="9878" href="Ledger.Conway.Conformance.Equivalence.html#9732" class="Bound">wf</a><a id="9880" class="Symbol">)</a> <a id="9882" href="Ledger.Conway.Conformance.Equivalence.html#9774" class="Bound">rs</a><a id="9884" class="Symbol">)</a>
<a id="9886" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="9912" class="Symbol">{</a><a id="9913" href="Ledger.Conway.Conformance.Equivalence.html#9913" class="Bound">Γ</a><a id="9914" class="Symbol">}</a> <a id="9916" class="Symbol">{</a><a id="9917" href="Ledger.Conway.Conformance.Equivalence.html#9917" class="Bound">s</a><a id="9918" class="Symbol">}</a> <a id="9920" class="Symbol">{</a><a id="9921" href="Ledger.Conway.Conformance.Equivalence.html#9921" class="Bound">cert</a> <a id="9926" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9928" class="Symbol">_}</a> <a id="9931" href="Ledger.Conway.Conformance.Equivalence.html#9931" class="Bound">deposits</a> <a id="9940" href="Ledger.Conway.Conformance.Equivalence.html#9940" class="Bound">wf</a> <a id="9943" class="Symbol">(</a><a id="9944" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9951" class="Symbol">(</a><a id="9952" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a> <a id="9964" class="Symbol">(</a><a id="9965" href="Ledger.Conway.Conformance.Certs.html#3788" class="InductiveConstructor">C.POOL-regpool</a> <a id="9980" class="Symbol">_))</a> <a id="9984" href="Ledger.Conway.Conformance.Equivalence.html#9984" class="Bound">rs</a><a id="9986" class="Symbol">)</a> <a id="9988" class="Symbol">=</a>
  <a id="9992" href="Ledger.Conway.Utxo.html#5000" class="InductiveConstructor">L.regpool</a> <a id="10002" class="Symbol">(</a><a id="10003" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10029" class="Symbol">_</a> <a id="10031" class="Symbol">(</a><a id="10032" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10043" class="Symbol">(</a><a id="10044" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="10057" href="Ledger.Conway.Conformance.Equivalence.html#9913" class="Bound">Γ</a><a id="10058" class="Symbol">)</a> <a id="10060" class="Symbol">(</a><a id="10061" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="10075" href="Ledger.Conway.Conformance.Equivalence.html#9917" class="Bound">s</a><a id="10076" class="Symbol">)</a> <a id="10078" href="Ledger.Conway.Conformance.Equivalence.html#9931" class="Bound">deposits</a> <a id="10087" href="Ledger.Conway.Conformance.Equivalence.html#9921" class="Bound">cert</a> <a id="10092" href="Ledger.Conway.Conformance.Equivalence.html#9940" class="Bound">wf</a><a id="10094" class="Symbol">)</a> <a id="10096" href="Ledger.Conway.Conformance.Equivalence.html#9984" class="Bound">rs</a><a id="10098" class="Symbol">)</a>
<a id="10100" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10126" class="Symbol">{</a><a id="10127" href="Ledger.Conway.Conformance.Equivalence.html#10127" class="Bound">Γ</a><a id="10128" class="Symbol">}</a> <a id="10130" class="Symbol">{</a><a id="10131" href="Ledger.Conway.Conformance.Equivalence.html#10131" class="Bound">s</a><a id="10132" class="Symbol">}</a> <a id="10134" class="Symbol">{</a><a id="10135" href="Ledger.Conway.Conformance.Equivalence.html#10135" class="Bound">cert</a> <a id="10140" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10142" class="Symbol">_}</a> <a id="10145" href="Ledger.Conway.Conformance.Equivalence.html#10145" class="Bound">deposits</a> <a id="10154" href="Ledger.Conway.Conformance.Equivalence.html#10154" class="Bound">wf</a> <a id="10157" class="Symbol">(</a><a id="10158" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10165" class="Symbol">(</a><a id="10166" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a> <a id="10178" href="Ledger.Conway.Conformance.Certs.html#3987" class="InductiveConstructor">C.POOL-retirepool</a><a id="10195" class="Symbol">)</a> <a id="10197" href="Ledger.Conway.Conformance.Equivalence.html#10197" class="Bound">rs</a><a id="10199" class="Symbol">)</a> <a id="10201" class="Symbol">=</a>
  <a id="10205" href="Ledger.Conway.Utxo.html#6142" class="InductiveConstructor">L.retirepool</a> <a id="10218" class="Symbol">(</a><a id="10219" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10245" class="Symbol">_</a> <a id="10247" class="Symbol">(</a><a id="10248" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10259" class="Symbol">(</a><a id="10260" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="10273" href="Ledger.Conway.Conformance.Equivalence.html#10127" class="Bound">Γ</a><a id="10274" class="Symbol">)</a> <a id="10276" class="Symbol">(</a><a id="10277" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="10291" href="Ledger.Conway.Conformance.Equivalence.html#10131" class="Bound">s</a><a id="10292" class="Symbol">)</a> <a id="10294" href="Ledger.Conway.Conformance.Equivalence.html#10145" class="Bound">deposits</a> <a id="10303" href="Ledger.Conway.Conformance.Equivalence.html#10135" class="Bound">cert</a> <a id="10308" href="Ledger.Conway.Conformance.Equivalence.html#10154" class="Bound">wf</a><a id="10310" class="Symbol">)</a> <a id="10312" href="Ledger.Conway.Conformance.Equivalence.html#10197" class="Bound">rs</a><a id="10314" class="Symbol">)</a>
<a id="10316" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10342" class="Symbol">{</a><a id="10343" href="Ledger.Conway.Conformance.Equivalence.html#10343" class="Bound">Γ</a><a id="10344" class="Symbol">}</a> <a id="10346" class="Symbol">{</a><a id="10347" href="Ledger.Conway.Conformance.Equivalence.html#10347" class="Bound">s</a><a id="10348" class="Symbol">}</a> <a id="10350" class="Symbol">{</a><a id="10351" href="Ledger.Conway.Conformance.Equivalence.html#10351" class="Bound">cert</a> <a id="10356" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10358" class="Symbol">_}</a> <a id="10361" href="Ledger.Conway.Conformance.Equivalence.html#10361" class="Bound">deposits</a> <a id="10370" href="Ledger.Conway.Conformance.Equivalence.html#10370" class="Bound">wf</a> <a id="10373" class="Symbol">(</a><a id="10374" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10381" class="Symbol">(</a><a id="10382" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="10394" class="Symbol">(</a><a id="10395" href="Ledger.Conway.Conformance.Certs.html#5547" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="10413" href="Ledger.Conway.Conformance.Equivalence.html#10413" class="Bound">x</a><a id="10414" class="Symbol">))</a> <a id="10417" href="Ledger.Conway.Conformance.Equivalence.html#10417" class="Bound">rs</a><a id="10419" class="Symbol">)</a> <a id="10421" class="Symbol">=</a>
  <a id="10425" href="Ledger.Conway.Utxo.html#5183" class="InductiveConstructor">L.regdrep</a> <a id="10435" class="Symbol">(</a><a id="10436" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10462" class="Symbol">_</a> <a id="10464" class="Symbol">(</a><a id="10465" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10476" class="Symbol">(</a><a id="10477" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="10490" href="Ledger.Conway.Conformance.Equivalence.html#10343" class="Bound">Γ</a><a id="10491" class="Symbol">)</a> <a id="10493" class="Symbol">(</a><a id="10494" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="10508" href="Ledger.Conway.Conformance.Equivalence.html#10347" class="Bound">s</a><a id="10509" class="Symbol">)</a> <a id="10511" href="Ledger.Conway.Conformance.Equivalence.html#10361" class="Bound">deposits</a> <a id="10520" href="Ledger.Conway.Conformance.Equivalence.html#10351" class="Bound">cert</a> <a id="10525" href="Ledger.Conway.Conformance.Equivalence.html#10370" class="Bound">wf</a><a id="10527" class="Symbol">)</a> <a id="10529" href="Ledger.Conway.Conformance.Equivalence.html#10417" class="Bound">rs</a><a id="10531" class="Symbol">)</a>
<a id="10533" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10559" class="Symbol">{</a><a id="10560" href="Ledger.Conway.Conformance.Equivalence.html#10560" class="Bound">Γ</a><a id="10561" class="Symbol">}</a> <a id="10563" class="Symbol">{</a><a id="10564" href="Ledger.Conway.Conformance.Equivalence.html#10564" class="Bound">s</a><a id="10565" class="Symbol">}</a> <a id="10567" class="Symbol">{</a><a id="10568" href="Ledger.Conway.Conformance.Equivalence.html#10568" class="Bound">cert</a> <a id="10573" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10575" class="Symbol">_}</a> <a id="10578" href="Ledger.Conway.Conformance.Equivalence.html#10578" class="Bound">deposits</a> <a id="10587" href="Ledger.Conway.Conformance.Equivalence.html#10587" class="Bound">wf</a> <a id="10590" class="Symbol">(</a><a id="10591" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10598" class="Symbol">(</a><a id="10599" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="10611" class="Symbol">(</a><a id="10612" href="Ledger.Conway.Conformance.Certs.html#5913" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="10632" class="Symbol">(_</a> <a id="10635" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10637" href="Ledger.Conway.Conformance.Equivalence.html#10637" class="Bound">h</a><a id="10638" class="Symbol">)))</a> <a id="10642" href="Ledger.Conway.Conformance.Equivalence.html#10642" class="Bound">rs</a><a id="10644" class="Symbol">)</a> <a id="10646" class="Symbol">=</a>
  <a id="10650" href="Ledger.Conway.Utxo.html#5795" class="InductiveConstructor">L.deregdrep</a> <a id="10662" class="Symbol">(</a><a id="10663" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="10672" class="Symbol">.</a><a id="10673" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="10690" class="Symbol">(</a><a id="10691" href="Ledger.Conway.Conformance.Equivalence.html#10587" class="Bound">wf</a> <a id="10694" class="Symbol">.</a><a id="10695" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="10701" class="Symbol">.</a><a id="10702" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10708" href="Ledger.Conway.Conformance.Equivalence.html#10637" class="Bound">h</a><a id="10709" class="Symbol">)</a> <a id="10711" class="Symbol">.</a><a id="10712" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="10717" class="Symbol">)</a>
              <a id="10733" class="Symbol">(</a><a id="10734" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10760" class="Symbol">_</a> <a id="10762" class="Symbol">(</a><a id="10763" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10774" class="Symbol">(</a><a id="10775" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="10788" href="Ledger.Conway.Conformance.Equivalence.html#10560" class="Bound">Γ</a><a id="10789" class="Symbol">)</a> <a id="10791" class="Symbol">(</a><a id="10792" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="10806" href="Ledger.Conway.Conformance.Equivalence.html#10564" class="Bound">s</a><a id="10807" class="Symbol">)</a> <a id="10809" href="Ledger.Conway.Conformance.Equivalence.html#10578" class="Bound">deposits</a> <a id="10818" href="Ledger.Conway.Conformance.Equivalence.html#10568" class="Bound">cert</a> <a id="10823" href="Ledger.Conway.Conformance.Equivalence.html#10587" class="Bound">wf</a><a id="10825" class="Symbol">)</a> <a id="10827" href="Ledger.Conway.Conformance.Equivalence.html#10642" class="Bound">rs</a><a id="10829" class="Symbol">)</a>
<a id="10831" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10857" class="Symbol">{</a><a id="10858" href="Ledger.Conway.Conformance.Equivalence.html#10858" class="Bound">Γ</a><a id="10859" class="Symbol">}</a> <a id="10861" class="Symbol">{</a><a id="10862" href="Ledger.Conway.Conformance.Equivalence.html#10862" class="Bound">s</a><a id="10863" class="Symbol">}</a> <a id="10865" class="Symbol">{</a><a id="10866" href="Ledger.Conway.Conformance.Equivalence.html#10866" class="Bound">cert</a> <a id="10871" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10873" class="Symbol">_}</a> <a id="10876" href="Ledger.Conway.Conformance.Equivalence.html#10876" class="Bound">deposits</a> <a id="10885" href="Ledger.Conway.Conformance.Equivalence.html#10885" class="Bound">wf</a> <a id="10888" class="Symbol">(</a><a id="10889" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10896" class="Symbol">(</a><a id="10897" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="10909" class="Symbol">(</a><a id="10910" href="Ledger.Conway.Conformance.Certs.html#6208" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="10929" href="Ledger.Conway.Conformance.Equivalence.html#10929" class="Bound">x</a><a id="10930" class="Symbol">))</a> <a id="10933" href="Ledger.Conway.Conformance.Equivalence.html#10933" class="Bound">rs</a><a id="10935" class="Symbol">)</a> <a id="10937" class="Symbol">=</a>
  <a id="10941" href="Ledger.Conway.Utxo.html#6002" class="InductiveConstructor">L.ccreghot</a><a id="10951" class="Symbol">(</a><a id="10952" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="10978" class="Symbol">_</a> <a id="10980" class="Symbol">(</a><a id="10981" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10992" class="Symbol">(</a><a id="10993" href="Ledger.Conway.Certs.html#2874" class="Field">L.CertEnv.pp</a> <a id="11006" href="Ledger.Conway.Conformance.Equivalence.html#10858" class="Bound">Γ</a><a id="11007" class="Symbol">)</a> <a id="11009" class="Symbol">(</a><a id="11010" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="11024" href="Ledger.Conway.Conformance.Equivalence.html#10862" class="Bound">s</a><a id="11025" class="Symbol">)</a> <a id="11027" href="Ledger.Conway.Conformance.Equivalence.html#10876" class="Bound">deposits</a> <a id="11036" href="Ledger.Conway.Conformance.Equivalence.html#10866" class="Bound">cert</a> <a id="11041" href="Ledger.Conway.Conformance.Equivalence.html#10885" class="Bound">wf</a><a id="11043" class="Symbol">)</a> <a id="11045" href="Ledger.Conway.Conformance.Equivalence.html#10933" class="Bound">rs</a><a id="11047" class="Symbol">)</a>

<a id="getValidCertDepositsC"></a><a id="11050" href="Ledger.Conway.Conformance.Equivalence.html#11050" class="Function">getValidCertDepositsC</a> <a id="11072" class="Symbol">:</a> <a id="11074" class="Symbol">∀</a> <a id="11076" href="Ledger.Conway.Conformance.Equivalence.html#11076" class="Bound">Γ</a> <a id="11078" href="Ledger.Conway.Conformance.Equivalence.html#11078" class="Bound">s</a> <a id="11080" class="Symbol">{</a><a id="11081" href="Ledger.Conway.Conformance.Equivalence.html#11081" class="Bound">s&#39;</a><a id="11083" class="Symbol">}</a> <a id="11085" href="Ledger.Conway.Conformance.Equivalence.html#11085" class="Bound">tx</a>
                     <a id="11109" class="Symbol">→</a> <a id="11111" class="Symbol">(</a><a id="11112" class="Keyword">let</a> <a id="11116" class="Keyword">open</a> <a id="11121" href="Ledger.Conway.Ledger.html#601" class="Module">C.LEnv</a> <a id="11128" href="Ledger.Conway.Conformance.Equivalence.html#11076" class="Bound">Γ</a> <a id="11130" class="Keyword">using</a> <a id="11136" class="Symbol">(</a><a id="11137" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="11144" class="Symbol">;</a> <a id="11146" href="Ledger.Conway.Ledger.html#631" class="Field">slot</a><a id="11150" class="Symbol">;</a> <a id="11152" href="Ledger.Conway.Ledger.html#715" class="Field">enactState</a><a id="11162" class="Symbol">)</a>
                            <a id="11192" class="Keyword">open</a> <a id="11197" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="11204" class="Symbol">(</a><a id="11205" href="Ledger.Conway.Conformance.Equivalence.html#11085" class="Bound">tx</a> <a id="11208" class="Symbol">.</a><a id="11209" href="Ledger.Conway.Transaction.html#4338" class="Field">Tx.body</a><a id="11216" class="Symbol">)</a> <a id="11218" class="Keyword">using</a> <a id="11224" class="Symbol">(</a><a id="11225" href="Ledger.Conway.Transaction.html#2996" class="Field">txcerts</a><a id="11232" class="Symbol">;</a> <a id="11234" href="Ledger.Conway.Transaction.html#3058" class="Field">txvote</a><a id="11240" class="Symbol">;</a> <a id="11242" href="Ledger.Conway.Transaction.html#3030" class="Field">txwdrls</a><a id="11249" class="Symbol">)</a>
                            <a id="11279" class="Keyword">open</a> <a id="11284" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="11293" href="Ledger.Conway.Conformance.Equivalence.html#11078" class="Bound">s</a>
                            <a id="11323" class="Keyword">open</a> <a id="11328" href="Ledger.Conway.Utxo.html#2747" class="Module">C.UTxOState</a> <a id="11340" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a> <a id="11347" class="Keyword">using</a> <a id="11353" class="Symbol">(</a><a id="11354" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="11362" class="Symbol">)</a>
                            <a id="11392" href="Ledger.Conway.Conformance.Equivalence.html#11392" class="Bound">cc</a> <a id="11395" class="Symbol">=</a> <a id="11397" href="Ledger.Conway.Ledger.html#2214" class="Function">C.allColdCreds</a> <a id="11412" href="Ledger.Conway.Conformance.Ledger.html#805" class="Function">govSt</a> <a id="11418" href="Ledger.Conway.Ledger.html#715" class="Function">enactState</a>
                       <a id="11452" class="Symbol">)</a>
                     <a id="11475" class="Symbol">→</a> <a id="11477" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">WellformedLState</a> <a id="11494" href="Ledger.Conway.Conformance.Equivalence.html#11078" class="Bound">s</a>
                     <a id="11517" class="Symbol">→</a> <a id="11519" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="11527" href="Ledger.Conway.Conformance.Equivalence.html#11085" class="Bound">tx</a> <a id="11530" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11532" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="11558" class="Symbol">→</a> <a id="11560" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="11562" href="Ledger.Conway.Types.Epoch.html#804" class="Function">epoch</a> <a id="11568" href="Ledger.Conway.Ledger.html#631" class="Function">slot</a> <a id="11573" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11575" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="11583" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11585" href="Ledger.Conway.Transaction.html#3058" class="Function">txvote</a> <a id="11592" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11594" href="Ledger.Conway.Transaction.html#3030" class="Function">txwdrls</a> <a id="11602" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11604" href="Ledger.Conway.Conformance.Equivalence.html#11392" class="Bound">cc</a> <a id="11607" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="11609" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">C.⊢</a> <a id="11613" href="Ledger.Conway.Conformance.Ledger.html#831" class="Function">certState</a> <a id="11623" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">⇀⦇</a> <a id="11626" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="11634" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">,CERTS⦈</a> <a id="11642" href="Ledger.Conway.Conformance.Equivalence.html#11081" class="Bound">s&#39;</a>
                     <a id="11666" class="Symbol">→</a> <a id="11668" href="Ledger.Conway.Utxo.html#4687" class="Datatype">L.ValidCertDeposits</a> <a id="11688" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="11696" href="Ledger.Conway.Utxo.html#2855" class="Function">deposits</a> <a id="11705" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a>
<a id="11713" href="Ledger.Conway.Conformance.Equivalence.html#11050" class="Function">getValidCertDepositsC</a> <a id="11735" href="Ledger.Conway.Conformance.Equivalence.html#11735" class="Bound">Γ</a> <a id="11737" href="Ledger.Conway.Conformance.Equivalence.html#11737" class="Bound">s</a> <a id="11739" href="Ledger.Conway.Conformance.Equivalence.html#11739" class="Bound">tx</a> <a id="11742" href="Ledger.Conway.Conformance.Equivalence.html#11742" class="Bound">wf</a> <a id="11745" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="11750" class="Symbol">(</a><a id="11751" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="11755" class="Symbol">(</a><a id="11756" href="Ledger.Conway.Conformance.Certs.html#7221" class="InductiveConstructor">C.CERT-base</a> <a id="11768" class="Symbol">_</a> <a id="11770" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11772" href="Ledger.Conway.Conformance.Equivalence.html#11772" class="Bound">step</a><a id="11776" class="Symbol">))</a> <a id="11779" class="Symbol">=</a>
  <a id="11783" href="Ledger.Conway.Conformance.Equivalence.html#8768" class="Function">getValidCertDepositsCERTS</a> <a id="11809" class="Symbol">(</a><a id="11810" href="Ledger.Conway.Utxo.html#2855" class="Field">C.UTxOState.deposits</a> <a id="11831" class="Symbol">(</a><a id="11832" href="Ledger.Conway.Conformance.Ledger.html#778" class="Field">C.LState.utxoSt</a> <a id="11848" href="Ledger.Conway.Conformance.Equivalence.html#11737" class="Bound">s</a><a id="11849" class="Symbol">))</a> <a id="11852" href="Ledger.Conway.Conformance.Equivalence.html#11742" class="Bound">wf</a> <a id="11855" href="Ledger.Conway.Conformance.Equivalence.html#11772" class="Bound">step</a>

<a id="lemUtxowDeposits"></a><a id="11861" href="Ledger.Conway.Conformance.Equivalence.html#11861" class="Function">lemUtxowDeposits</a> <a id="11878" class="Symbol">:</a> <a id="11880" class="Symbol">∀</a> <a id="11882" class="Symbol">{</a><a id="11883" href="Ledger.Conway.Conformance.Equivalence.html#11883" class="Bound">Γ</a> <a id="11885" href="Ledger.Conway.Conformance.Equivalence.html#11885" class="Bound">s</a> <a id="11887" href="Ledger.Conway.Conformance.Equivalence.html#11887" class="Bound">s&#39;</a> <a id="11890" href="Ledger.Conway.Conformance.Equivalence.html#11890" class="Bound">tx</a><a id="11892" class="Symbol">}</a>
                      <a id="11916" class="Symbol">(</a><a id="11917" class="Keyword">let</a> <a id="11921" class="Keyword">open</a> <a id="11926" href="Ledger.Conway.Utxo.html#2395" class="Module">C.UTxOEnv</a> <a id="11936" href="Ledger.Conway.Conformance.Equivalence.html#11883" class="Bound">Γ</a> <a id="11938" class="Keyword">using</a> <a id="11944" class="Symbol">(</a><a id="11945" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a><a id="11952" class="Symbol">))</a>
                  <a id="11973" class="Symbol">→</a> <a id="11975" href="Ledger.Conway.Transaction.html#4391" class="Field">isValid</a> <a id="11983" href="Ledger.Conway.Conformance.Equivalence.html#11890" class="Bound">tx</a> <a id="11986" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11988" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="12011" class="Symbol">→</a> <a id="12013" class="Symbol">(</a><a id="12014" href="Ledger.Conway.Conformance.Equivalence.html#12014" class="Bound">r</a> <a id="12016" class="Symbol">:</a> <a id="12018" href="Ledger.Conway.Conformance.Equivalence.html#11883" class="Bound">Γ</a> <a id="12020" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">C.⊢</a> <a id="12024" href="Ledger.Conway.Conformance.Equivalence.html#11885" class="Bound">s</a> <a id="12026" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">⇀⦇</a> <a id="12029" href="Ledger.Conway.Conformance.Equivalence.html#11890" class="Bound">tx</a> <a id="12032" href="Ledger.Conway.Conformance.Utxow.html#684" class="Datatype Operator">,UTXOW⦈</a> <a id="12040" href="Ledger.Conway.Conformance.Equivalence.html#11887" class="Bound">s&#39;</a><a id="12042" class="Symbol">)</a>
                  <a id="12062" class="Symbol">→</a> <a id="12064" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2003" class="Function">utxowDeposits</a> <a id="12078" href="Ledger.Conway.Conformance.Equivalence.html#12014" class="Bound">r</a> <a id="12080" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12082" href="Ledger.Conway.Utxo.html#9339" class="Function">L.updateDeposits</a> <a id="12099" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="12107" class="Symbol">(</a><a id="12108" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="12113" href="Ledger.Conway.Conformance.Equivalence.html#11890" class="Bound">tx</a><a id="12115" class="Symbol">)</a> <a id="12117" class="Symbol">(</a><a id="12118" href="Ledger.Conway.Utxo.html#2855" class="Field">C.UTxOState.deposits</a> <a id="12139" href="Ledger.Conway.Conformance.Equivalence.html#11887" class="Bound">s&#39;</a><a id="12141" class="Symbol">)</a>
<a id="12143" href="Ledger.Conway.Conformance.Equivalence.html#11861" class="Function">lemUtxowDeposits</a> <a id="12160" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12165" class="Symbol">(</a><a id="12166" href="Ledger.Conway.Conformance.Utxow.html#1989" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="12185" class="Symbol">_</a> <a id="12187" class="Symbol">_</a> <a id="12189" class="Symbol">_</a> <a id="12191" class="Symbol">_</a> <a id="12193" class="Symbol">_</a> <a id="12195" class="Symbol">_</a> <a id="12197" class="Symbol">_</a> <a id="12199" class="Symbol">_</a>
                        <a id="12225" class="Symbol">(</a><a id="12226" href="Ledger.Conway.Conformance.Utxo.html#3825" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="12244" class="Symbol">_</a> <a id="12246" class="Symbol">_</a> <a id="12248" class="Symbol">_</a> <a id="12250" class="Symbol">_</a> <a id="12252" class="Symbol">_</a> <a id="12254" class="Symbol">_</a> <a id="12256" class="Symbol">_</a> <a id="12258" class="Symbol">_</a> <a id="12260" class="Symbol">_</a> <a id="12262" class="Symbol">_</a> <a id="12264" class="Symbol">_</a> <a id="12266" class="Symbol">_</a> <a id="12268" class="Symbol">_</a> <a id="12270" class="Symbol">_</a> <a id="12272" class="Symbol">_</a> <a id="12274" class="Symbol">_</a> <a id="12276" class="Symbol">_</a> <a id="12278" class="Symbol">_</a> <a id="12280" class="Symbol">_</a>
                          <a id="12308" class="Symbol">(</a><a id="12309" href="Ledger.Conway.Conformance.Utxo.html#1192" class="InductiveConstructor">C.Scripts-Yes</a> <a id="12323" class="Symbol">_)))</a> <a id="12328" class="Symbol">=</a> <a id="12330" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="12336" class="Keyword">instance</a>

  <a id="LEDGERFromConf"></a><a id="12348" href="Ledger.Conway.Conformance.Equivalence.html#12348" class="Function">LEDGERFromConf</a> <a id="12363" class="Symbol">:</a> <a id="12365" class="Symbol">∀</a> <a id="12367" class="Symbol">{</a><a id="12368" href="Ledger.Conway.Conformance.Equivalence.html#12368" class="Bound">Γ</a> <a id="12370" href="Ledger.Conway.Conformance.Equivalence.html#12370" class="Bound">s</a> <a id="12372" href="Ledger.Conway.Conformance.Equivalence.html#12372" class="Bound">tx</a> <a id="12375" href="Ledger.Conway.Conformance.Equivalence.html#12375" class="Bound">s&#39;</a><a id="12377" class="Symbol">}</a> <a id="12379" class="Symbol">→</a> <a id="12381" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">WellformedLState</a> <a id="12398" href="Ledger.Conway.Conformance.Equivalence.html#12370" class="Bound">s</a>
                                    <a id="12436" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="12438" href="Ledger.Conway.Conformance.Equivalence.html#12368" class="Bound">Γ</a> <a id="12440" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="12444" href="Ledger.Conway.Conformance.Equivalence.html#12370" class="Bound">s</a> <a id="12446" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="12449" href="Ledger.Conway.Conformance.Equivalence.html#12372" class="Bound">tx</a> <a id="12452" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="12461" href="Ledger.Conway.Conformance.Equivalence.html#12375" class="Bound">s&#39;</a>
                                    <a id="12500" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="12502" href="Ledger.Conway.Conformance.Equivalence.html#12368" class="Bound">Γ</a> <a id="12504" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="12508" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12513" href="Ledger.Conway.Conformance.Equivalence.html#12370" class="Bound">s</a> <a id="12515" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="12518" href="Ledger.Conway.Conformance.Equivalence.html#12372" class="Bound">tx</a> <a id="12521" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="12530" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12535" href="Ledger.Conway.Conformance.Equivalence.html#12375" class="Bound">s&#39;</a>
  <a id="12540" href="Ledger.Conway.Conformance.Equivalence.html#12348" class="Function">LEDGERFromConf</a> <a id="12555" class="Symbol">.</a><a id="12556" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12562" class="Symbol">_</a> <a id="12564" class="Symbol">(</a><a id="12565" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="12577" href="Ledger.Conway.Conformance.Equivalence.html#12577" class="Bound">invalid</a> <a id="12585" href="Ledger.Conway.Conformance.Equivalence.html#12585" class="Bound">utxow</a><a id="12590" class="Symbol">)</a> <a id="12592" class="Keyword">with</a> <a id="12597" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="12602" href="Ledger.Conway.Conformance.Equivalence.html#12577" class="Bound">invalid</a> <a id="12610" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="12616" href="Ledger.Conway.Conformance.Equivalence.html#12585" class="Bound">utxow</a>
  <a id="12624" class="Symbol">...</a> <a id="12628" class="Symbol">|</a> <a id="12630" href="Ledger.Conway.Conformance.Equivalence.html#12630" class="Bound">utxow&#39;</a> <a id="12637" class="Keyword">rewrite</a> <a id="12645" href="Ledger.Conway.Conformance.Equivalence.html#1989" class="Function">lemInvalidDepositsC</a> <a id="12665" class="Bound">invalid</a> <a id="12673" class="Bound">utxow</a> <a id="12679" class="Symbol">=</a> <a id="12681" href="Ledger.Conway.Ledger.html#3693" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="12693" class="Bound">invalid</a> <a id="12701" href="Ledger.Conway.Conformance.Equivalence.html#12630" class="Bound">utxow&#39;</a>
  <a id="12710" href="Ledger.Conway.Conformance.Equivalence.html#12348" class="Function">LEDGERFromConf</a> <a id="12725" class="Symbol">{</a><a id="12726" href="Ledger.Conway.Conformance.Equivalence.html#12726" class="Bound">Γ</a><a id="12727" class="Symbol">}</a> <a id="12729" class="Symbol">{</a><a id="12730" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">s</a><a id="12731" class="Symbol">}</a> <a id="12733" class="Symbol">{</a><a id="12734" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">tx</a><a id="12736" class="Symbol">}</a> <a id="12738" class="Symbol">{</a><a id="12739" href="Ledger.Conway.Conformance.Equivalence.html#12739" class="Bound">s&#39;</a><a id="12741" class="Symbol">}</a> <a id="12743" class="Symbol">.</a><a id="12744" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12750" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">wf</a> <a id="12753" class="Symbol">(</a><a id="12754" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="12766" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12771" href="Ledger.Conway.Conformance.Equivalence.html#12771" class="Bound">utxow</a> <a id="12777" href="Ledger.Conway.Conformance.Equivalence.html#12777" class="Bound">certs</a> <a id="12783" href="Ledger.Conway.Conformance.Equivalence.html#12783" class="Bound">gov</a><a id="12786" class="Symbol">)</a> <a id="12788" class="Symbol">=</a>
    <a id="12794" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="12800" class="Symbol">(λ</a> <a id="12803" href="Ledger.Conway.Conformance.Equivalence.html#12803" class="Bound">•</a> <a id="12805" class="Symbol">→</a> <a id="12807" href="Ledger.Conway.Conformance.Equivalence.html#12726" class="Bound">Γ</a> <a id="12809" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="12813" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12818" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">s</a> <a id="12820" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="12823" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">tx</a> <a id="12826" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="12835" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="12837" href="Ledger.Conway.Conformance.Equivalence.html#12803" class="Bound">•</a> <a id="12839" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="12841" href="Ledger.Conway.Conformance.Equivalence.html#13035" class="Function">govSt&#39;</a> <a id="12848" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="12850" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12855" href="Ledger.Conway.Conformance.Equivalence.html#13056" class="Function">certSt&#39;</a> <a id="12863" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="12864" class="Symbol">)</a> <a id="12866" href="Ledger.Conway.Conformance.Equivalence.html#13405" class="Function">eqUtxo</a> <a id="12873" href="Ledger.Conway.Conformance.Equivalence.html#13549" class="Function">ledger&#39;</a>
    <a id="12885" class="Keyword">where</a>
      <a id="12897" class="Keyword">open</a> <a id="12902" href="Ledger.Conway.Ledger.html#601" class="Module">C.LEnv</a> <a id="12909" href="Ledger.Conway.Conformance.Equivalence.html#12726" class="Bound">Γ</a>

      <a id="12918" class="Keyword">open</a> <a id="12923" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="12932" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">s</a> <a id="12934" class="Keyword">renaming</a> <a id="12943" class="Symbol">(</a><a id="12944" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="12954" class="Symbol">to</a> <a id="12957" class="Field">certSt</a><a id="12963" class="Symbol">)</a>
      <a id="12971" class="Keyword">open</a> <a id="12976" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="12985" href="Ledger.Conway.Conformance.Equivalence.html#12739" class="Bound">s&#39;</a> <a id="12988" class="Keyword">using</a> <a id="12994" class="Symbol">()</a> <a id="12997" class="Keyword">renaming</a> <a id="13006" class="Symbol">(</a><a id="13007" href="Ledger.Conway.Conformance.Ledger.html#778" class="Field">utxoSt</a> <a id="13014" class="Symbol">to</a> <a id="13017" class="Field">utxoSt&#39;</a><a id="13024" class="Symbol">;</a> <a id="13026" href="Ledger.Conway.Conformance.Ledger.html#805" class="Field">govSt</a> <a id="13032" class="Symbol">to</a> <a id="13035" class="Field">govSt&#39;</a><a id="13041" class="Symbol">;</a> <a id="13043" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="13053" class="Symbol">to</a> <a id="13056" class="Field">certSt&#39;</a><a id="13063" class="Symbol">)</a>

      <a id="13072" class="Keyword">open</a> <a id="13077" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="13084" class="Symbol">(</a><a id="13085" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="13090" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">tx</a><a id="13092" class="Symbol">)</a>
      <a id="13100" class="Keyword">open</a> <a id="13105" href="Ledger.Conway.Utxo.html#2747" class="Module">C.UTxOState</a> <a id="13117" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a> <a id="13124" class="Keyword">using</a> <a id="13130" class="Symbol">(</a><a id="13131" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="13139" class="Symbol">)</a>

      <a id="13148" href="Ledger.Conway.Conformance.Equivalence.html#13148" class="Function">valid-deps</a> <a id="13159" class="Symbol">:</a> <a id="13161" href="Ledger.Conway.Utxo.html#4687" class="Datatype">L.ValidCertDeposits</a> <a id="13181" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="13189" href="Ledger.Conway.Utxo.html#2855" class="Function">deposits</a> <a id="13198" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a>
      <a id="13212" href="Ledger.Conway.Conformance.Equivalence.html#13148" class="Function">valid-deps</a> <a id="13223" class="Symbol">=</a> <a id="13225" href="Ledger.Conway.Conformance.Equivalence.html#11050" class="Function">getValidCertDepositsC</a> <a id="13247" href="Ledger.Conway.Conformance.Equivalence.html#12726" class="Bound">Γ</a> <a id="13249" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">s</a> <a id="13251" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">tx</a> <a id="13254" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">wf</a> <a id="13257" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13262" href="Ledger.Conway.Conformance.Equivalence.html#12777" class="Bound">certs</a>

      <a id="13275" href="Ledger.Conway.Conformance.Equivalence.html#13275" class="Function">utxow&#39;</a> <a id="13282" class="Symbol">:</a> <a id="13284" class="Symbol">_</a> <a id="13286" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">L.⊢</a> <a id="13290" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a> <a id="13297" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">⇀⦇</a> <a id="13300" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">tx</a> <a id="13303" href="Ledger.Conway.Utxow.html#3780" class="Datatype Operator">,UTXOW⦈</a> <a id="13311" class="Symbol">(</a><a id="13312" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="13324" class="Symbol">(</a><a id="13325" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2003" class="Function">utxowDeposits</a> <a id="13339" href="Ledger.Conway.Conformance.Equivalence.html#12771" class="Bound">utxow</a><a id="13344" class="Symbol">)</a> <a id="13346" href="Ledger.Conway.Conformance.Equivalence.html#13017" class="Function">utxoSt&#39;</a><a id="13353" class="Symbol">)</a>
      <a id="13361" href="Ledger.Conway.Conformance.Equivalence.html#13275" class="Function">utxow&#39;</a> <a id="13368" class="Symbol">=</a> <a id="13370" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="13375" href="Ledger.Conway.Conformance.Equivalence.html#13148" class="Function">valid-deps</a> <a id="13386" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="13392" href="Ledger.Conway.Conformance.Equivalence.html#12771" class="Bound">utxow</a>

      <a id="13405" href="Ledger.Conway.Conformance.Equivalence.html#13405" class="Function">eqUtxo</a> <a id="13412" class="Symbol">:</a> <a id="13414" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="13426" class="Symbol">(</a><a id="13427" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2003" class="Function">utxowDeposits</a> <a id="13441" href="Ledger.Conway.Conformance.Equivalence.html#12771" class="Bound">utxow</a><a id="13446" class="Symbol">)</a> <a id="13448" href="Ledger.Conway.Conformance.Equivalence.html#13017" class="Function">utxoSt&#39;</a> <a id="13456" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13458" href="Ledger.Conway.Conformance.Equivalence.html#13017" class="Function">utxoSt&#39;</a>
      <a id="13472" href="Ledger.Conway.Conformance.Equivalence.html#13405" class="Function">eqUtxo</a> <a id="13479" class="Symbol">=</a> <a id="13481" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="13486" class="Symbol">(λ</a> <a id="13489" href="Ledger.Conway.Conformance.Equivalence.html#13489" class="Bound">•</a> <a id="13491" class="Symbol">→</a> <a id="13493" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="13495" class="Symbol">_</a> <a id="13497" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13499" class="Symbol">_</a> <a id="13501" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13503" href="Ledger.Conway.Conformance.Equivalence.html#13489" class="Bound">•</a> <a id="13505" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13507" class="Symbol">_</a> <a id="13509" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="13510" class="Symbol">)</a> <a id="13512" class="Symbol">(</a><a id="13513" href="Ledger.Conway.Conformance.Equivalence.html#11861" class="Function">lemUtxowDeposits</a> <a id="13530" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13535" href="Ledger.Conway.Conformance.Equivalence.html#12771" class="Bound">utxow</a><a id="13540" class="Symbol">)</a>

      <a id="13549" href="Ledger.Conway.Conformance.Equivalence.html#13549" class="Function">ledger&#39;</a> <a id="13557" class="Symbol">:</a> <a id="13559" href="Ledger.Conway.Conformance.Equivalence.html#12726" class="Bound">Γ</a> <a id="13561" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="13565" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13570" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">s</a> <a id="13572" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="13575" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">tx</a> <a id="13578" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="13587" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">L.⟦</a> <a id="13591" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="13603" class="Symbol">(</a><a id="13604" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2003" class="Function">utxowDeposits</a> <a id="13618" href="Ledger.Conway.Conformance.Equivalence.html#12771" class="Bound">utxow</a><a id="13623" class="Symbol">)</a> <a id="13625" href="Ledger.Conway.Conformance.Equivalence.html#13017" class="Function">utxoSt&#39;</a>
                                              <a id="13679" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">,</a> <a id="13681" href="Ledger.Conway.Conformance.Equivalence.html#13035" class="Function">govSt&#39;</a>
                                              <a id="13734" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">,</a> <a id="13736" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13741" href="Ledger.Conway.Conformance.Equivalence.html#13056" class="Function">certSt&#39;</a> <a id="13749" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="13758" href="Ledger.Conway.Conformance.Equivalence.html#13549" class="Function">ledger&#39;</a> <a id="13766" class="Symbol">=</a> <a id="13768" href="Ledger.Conway.Ledger.html#3640" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="13780" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13785" href="Ledger.Conway.Conformance.Equivalence.html#13275" class="Function">utxow&#39;</a> <a id="13792" class="Symbol">(</a><a id="13793" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13798" href="Ledger.Conway.Conformance.Equivalence.html#12777" class="Bound">certs</a><a id="13803" class="Symbol">)</a> <a id="13805" href="Ledger.Conway.Conformance.Equivalence.html#12783" class="Bound">gov</a>

<a id="13810" class="Keyword">open</a> <a id="13815" href="Relation.Binary.Structures.html#1550" class="Module">IsEquivalence</a> <a id="13829" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13012" class="Function">≡ᵈ-isEquivalence</a> <a id="13846" class="Keyword">renaming</a> <a id="13855" class="Symbol">(</a><a id="13856" href="Relation.Binary.Structures.html#1596" class="Field">refl</a> <a id="13861" class="Symbol">to</a> <a id="13864" class="Field">≡ᵈ-refl</a><a id="13871" class="Symbol">;</a> <a id="13873" href="Relation.Binary.Structures.html#1622" class="Field">sym</a> <a id="13877" class="Symbol">to</a> <a id="13880" class="Field">≡ᵈ-sym</a><a id="13886" class="Symbol">;</a> <a id="13888" href="Relation.Binary.Structures.html#1648" class="Field">trans</a> <a id="13894" class="Symbol">to</a> <a id="13897" class="Field">≡ᵈ-trans</a><a id="13905" class="Symbol">)</a>

<a id="lemCERTS&#39;DepositsC"></a><a id="13908" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="13927" class="Symbol">:</a> <a id="13929" class="Symbol">∀</a> <a id="13931" class="Symbol">{</a><a id="13932" href="Ledger.Conway.Conformance.Equivalence.html#13932" class="Bound">Γ</a> <a id="13934" href="Ledger.Conway.Conformance.Equivalence.html#13934" class="Bound">s</a> <a id="13936" href="Ledger.Conway.Conformance.Equivalence.html#13936" class="Bound">dcerts</a> <a id="13943" href="Ledger.Conway.Conformance.Equivalence.html#13943" class="Bound">s&#39;</a><a id="13945" class="Symbol">}</a> <a id="13947" class="Symbol">(</a><a id="13948" class="Keyword">open</a> <a id="13953" href="Ledger.Conway.Certs.html#2819" class="Module">C.CertEnv</a> <a id="13963" href="Ledger.Conway.Conformance.Equivalence.html#13932" class="Bound">Γ</a> <a id="13965" class="Keyword">using</a> <a id="13971" class="Symbol">(</a><a id="13972" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="13974" class="Symbol">))</a>
                   <a id="13996" class="Symbol">→</a> <a id="13998" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="14025" class="Symbol">{</a><a id="14026" class="Argument">sts</a> <a id="14030" class="Symbol">=</a> <a id="14032" href="Ledger.Conway.Conformance.Certs.html#6499" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="14047" class="Symbol">}</a> <a id="14049" href="Ledger.Conway.Conformance.Equivalence.html#13932" class="Bound">Γ</a> <a id="14051" href="Ledger.Conway.Conformance.Equivalence.html#13934" class="Bound">s</a> <a id="14053" href="Ledger.Conway.Conformance.Equivalence.html#13936" class="Bound">dcerts</a> <a id="14060" href="Ledger.Conway.Conformance.Equivalence.html#13943" class="Bound">s&#39;</a>
                   <a id="14082" class="Symbol">→</a> <a id="14084" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="14098" href="Ledger.Conway.Conformance.Equivalence.html#13943" class="Bound">s&#39;</a> <a id="14101" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14103" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="14105" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="14117" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="14120" href="Ledger.Conway.Conformance.Equivalence.html#13936" class="Bound">dcerts</a> <a id="14127" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="14129" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="14141" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="14144" href="Ledger.Conway.Conformance.Equivalence.html#13936" class="Bound">dcerts</a> <a id="14151" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="14153" class="Symbol">(</a><a id="14154" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="14168" href="Ledger.Conway.Conformance.Equivalence.html#13934" class="Bound">s</a><a id="14169" class="Symbol">)</a>
<a id="14171" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14190" class="Symbol">(</a><a id="14191" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="14199" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="14205" class="Symbol">)</a>                                  <a id="14240" class="Symbol">=</a> <a id="14242" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="14247" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14266" class="Symbol">(</a><a id="14267" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14274" class="Symbol">(</a><a id="14275" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="14288" class="Symbol">(</a><a id="14289" href="Ledger.Conway.Conformance.Certs.html#4162" class="InductiveConstructor">C.DELEG-delegate</a>   <a id="14308" class="Symbol">_))</a> <a id="14312" href="Ledger.Conway.Conformance.Equivalence.html#14312" class="Bound">rs</a><a id="14314" class="Symbol">)</a> <a id="14316" class="Symbol">=</a> <a id="14318" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14337" href="Ledger.Conway.Conformance.Equivalence.html#14312" class="Bound">rs</a>
<a id="14340" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14359" class="Symbol">(</a><a id="14360" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14367" class="Symbol">(</a><a id="14368" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="14381" class="Symbol">(</a><a id="14382" href="Ledger.Conway.Conformance.Certs.html#4791" class="InductiveConstructor">C.DELEG-dereg</a>      <a id="14401" class="Symbol">_))</a> <a id="14405" href="Ledger.Conway.Conformance.Equivalence.html#14405" class="Bound">rs</a><a id="14407" class="Symbol">)</a> <a id="14409" class="Symbol">=</a> <a id="14411" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14430" href="Ledger.Conway.Conformance.Equivalence.html#14405" class="Bound">rs</a>
<a id="14433" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14452" class="Symbol">(</a><a id="14453" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14460" class="Symbol">(</a><a id="14461" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="14474" class="Symbol">(</a><a id="14475" href="Ledger.Conway.Conformance.Certs.html#5155" class="InductiveConstructor">C.DELEG-reg</a>        <a id="14494" class="Symbol">_))</a> <a id="14498" href="Ledger.Conway.Conformance.Equivalence.html#14498" class="Bound">rs</a><a id="14500" class="Symbol">)</a> <a id="14502" class="Symbol">=</a> <a id="14504" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14523" href="Ledger.Conway.Conformance.Equivalence.html#14498" class="Bound">rs</a>
<a id="14526" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14545" class="Symbol">(</a><a id="14546" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14553" class="Symbol">(</a><a id="14554" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a> <a id="14566" class="Symbol">(</a><a id="14567" href="Ledger.Conway.Conformance.Certs.html#3788" class="InductiveConstructor">C.POOL-regpool</a>      <a id="14587" class="Symbol">_))</a> <a id="14591" href="Ledger.Conway.Conformance.Equivalence.html#14591" class="Bound">rs</a><a id="14593" class="Symbol">)</a> <a id="14595" class="Symbol">=</a> <a id="14597" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14616" href="Ledger.Conway.Conformance.Equivalence.html#14591" class="Bound">rs</a>
<a id="14619" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14638" class="Symbol">(</a><a id="14639" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14646" class="Symbol">(</a><a id="14647" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a> <a id="14659" href="Ledger.Conway.Conformance.Certs.html#3987" class="InductiveConstructor">C.POOL-retirepool</a><a id="14676" class="Symbol">)</a>       <a id="14684" href="Ledger.Conway.Conformance.Equivalence.html#14684" class="Bound">rs</a><a id="14686" class="Symbol">)</a> <a id="14688" class="Symbol">=</a> <a id="14690" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14709" href="Ledger.Conway.Conformance.Equivalence.html#14684" class="Bound">rs</a>
<a id="14712" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14731" class="Symbol">(</a><a id="14732" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14739" class="Symbol">(</a><a id="14740" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="14752" class="Symbol">(</a><a id="14753" href="Ledger.Conway.Conformance.Certs.html#5547" class="InductiveConstructor">C.GOVCERT-regdrep</a>   <a id="14773" class="Symbol">_))</a> <a id="14777" href="Ledger.Conway.Conformance.Equivalence.html#14777" class="Bound">rs</a><a id="14779" class="Symbol">)</a> <a id="14781" class="Symbol">=</a> <a id="14783" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14802" href="Ledger.Conway.Conformance.Equivalence.html#14777" class="Bound">rs</a>
<a id="14805" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14824" class="Symbol">(</a><a id="14825" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14832" class="Symbol">(</a><a id="14833" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="14845" class="Symbol">(</a><a id="14846" href="Ledger.Conway.Conformance.Certs.html#5913" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="14866" class="Symbol">_))</a> <a id="14870" href="Ledger.Conway.Conformance.Equivalence.html#14870" class="Bound">rs</a><a id="14872" class="Symbol">)</a> <a id="14874" class="Symbol">=</a> <a id="14876" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14895" href="Ledger.Conway.Conformance.Equivalence.html#14870" class="Bound">rs</a>
<a id="14898" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14917" class="Symbol">(</a><a id="14918" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14925" class="Symbol">(</a><a id="14926" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="14938" class="Symbol">(</a><a id="14939" href="Ledger.Conway.Conformance.Certs.html#6208" class="InductiveConstructor">C.GOVCERT-ccreghot</a>  <a id="14959" class="Symbol">_))</a> <a id="14963" href="Ledger.Conway.Conformance.Equivalence.html#14963" class="Bound">rs</a><a id="14965" class="Symbol">)</a> <a id="14967" class="Symbol">=</a> <a id="14969" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="14988" href="Ledger.Conway.Conformance.Equivalence.html#14963" class="Bound">rs</a>

<a id="lemCERTSDepositsC"></a><a id="14992" href="Ledger.Conway.Conformance.Equivalence.html#14992" class="Function">lemCERTSDepositsC</a> <a id="15010" class="Symbol">:</a> <a id="15012" class="Symbol">∀</a> <a id="15014" class="Symbol">{</a><a id="15015" href="Ledger.Conway.Conformance.Equivalence.html#15015" class="Bound">Γ</a> <a id="15017" href="Ledger.Conway.Conformance.Equivalence.html#15017" class="Bound">s</a> <a id="15019" href="Ledger.Conway.Conformance.Equivalence.html#15019" class="Bound">txcerts</a> <a id="15027" href="Ledger.Conway.Conformance.Equivalence.html#15027" class="Bound">s&#39;</a><a id="15029" class="Symbol">}</a> <a id="15031" class="Symbol">(</a><a id="15032" class="Keyword">open</a> <a id="15037" href="Ledger.Conway.Certs.html#2819" class="Module">C.CertEnv</a> <a id="15047" href="Ledger.Conway.Conformance.Equivalence.html#15015" class="Bound">Γ</a> <a id="15049" class="Keyword">using</a> <a id="15055" class="Symbol">(</a><a id="15056" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="15058" class="Symbol">))</a>
                  <a id="15079" class="Symbol">→</a> <a id="15081" href="Ledger.Conway.Conformance.Equivalence.html#15015" class="Bound">Γ</a> <a id="15083" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">C.⊢</a> <a id="15087" href="Ledger.Conway.Conformance.Equivalence.html#15017" class="Bound">s</a> <a id="15089" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">⇀⦇</a> <a id="15092" href="Ledger.Conway.Conformance.Equivalence.html#15019" class="Bound">txcerts</a> <a id="15100" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">,CERTS⦈</a> <a id="15108" href="Ledger.Conway.Conformance.Equivalence.html#15027" class="Bound">s&#39;</a>
                  <a id="15129" class="Symbol">→</a> <a id="15131" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="15145" href="Ledger.Conway.Conformance.Equivalence.html#15027" class="Bound">s&#39;</a> <a id="15148" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15150" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="15152" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="15164" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="15167" href="Ledger.Conway.Conformance.Equivalence.html#15019" class="Bound">txcerts</a> <a id="15175" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="15177" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="15189" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="15192" href="Ledger.Conway.Conformance.Equivalence.html#15019" class="Bound">txcerts</a> <a id="15200" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="15202" class="Symbol">(</a><a id="15203" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="15217" href="Ledger.Conway.Conformance.Equivalence.html#15017" class="Bound">s</a><a id="15218" class="Symbol">)</a>
<a id="15220" href="Ledger.Conway.Conformance.Equivalence.html#14992" class="Function">lemCERTSDepositsC</a> <a id="15238" class="Symbol">(</a><a id="15239" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="15243" class="Symbol">(</a><a id="15244" href="Ledger.Conway.Conformance.Certs.html#7221" class="InductiveConstructor">C.CERT-base</a> <a id="15256" class="Symbol">_</a> <a id="15258" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15260" href="Ledger.Conway.Conformance.Equivalence.html#15260" class="Bound">step</a><a id="15264" class="Symbol">))</a> <a id="15267" class="Symbol">=</a> <a id="15269" href="Ledger.Conway.Conformance.Equivalence.html#13908" class="Function">lemCERTS&#39;DepositsC</a> <a id="15288" href="Ledger.Conway.Conformance.Equivalence.html#15260" class="Bound">step</a>

<a id="lemWellformed"></a><a id="15294" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Function">lemWellformed</a> <a id="15308" class="Symbol">:</a> <a id="15310" class="Symbol">∀</a> <a id="15312" class="Symbol">{</a><a id="15313" href="Ledger.Conway.Conformance.Equivalence.html#15313" class="Bound">Γ</a> <a id="15315" href="Ledger.Conway.Conformance.Equivalence.html#15315" class="Bound">s</a> <a id="15317" href="Ledger.Conway.Conformance.Equivalence.html#15317" class="Bound">tx</a> <a id="15320" href="Ledger.Conway.Conformance.Equivalence.html#15320" class="Bound">s&#39;</a><a id="15322" class="Symbol">}</a> <a id="15324" class="Symbol">→</a> <a id="15326" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">WellformedLState</a> <a id="15343" href="Ledger.Conway.Conformance.Equivalence.html#15315" class="Bound">s</a> <a id="15345" class="Symbol">→</a> <a id="15347" href="Ledger.Conway.Conformance.Equivalence.html#15313" class="Bound">Γ</a> <a id="15349" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="15353" href="Ledger.Conway.Conformance.Equivalence.html#15315" class="Bound">s</a> <a id="15355" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="15358" href="Ledger.Conway.Conformance.Equivalence.html#15317" class="Bound">tx</a> <a id="15361" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="15370" href="Ledger.Conway.Conformance.Equivalence.html#15320" class="Bound">s&#39;</a> <a id="15373" class="Symbol">→</a> <a id="15375" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">WellformedLState</a> <a id="15392" href="Ledger.Conway.Conformance.Equivalence.html#15320" class="Bound">s&#39;</a>
<a id="15395" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Function">lemWellformed</a> <a id="15409" class="Symbol">{</a><a id="15410" href="Ledger.Conway.Conformance.Equivalence.html#15410" class="Bound">Γ</a><a id="15411" class="Symbol">}</a> <a id="15413" class="Symbol">{</a><a id="15414" class="Argument">s</a> <a id="15416" class="Symbol">=</a> <a id="15418" href="Ledger.Conway.Conformance.Equivalence.html#15418" class="Bound">ls</a><a id="15420" class="Symbol">}</a> <a id="15422" class="Symbol">{</a><a id="15423" href="Ledger.Conway.Conformance.Equivalence.html#15423" class="Bound">tx</a><a id="15425" class="Symbol">}</a> <a id="15427" class="Symbol">{</a><a id="15428" class="Argument">s&#39;</a> <a id="15431" class="Symbol">=</a> <a id="15433" href="Ledger.Conway.Conformance.Equivalence.html#15433" class="Bound">ls&#39;</a><a id="15436" class="Symbol">}</a> <a id="15438" href="Ledger.Conway.Conformance.Equivalence.html#15438" class="Bound">wf</a> <a id="15441" class="Symbol">(</a><a id="15442" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="15454" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="15459" href="Ledger.Conway.Conformance.Equivalence.html#15459" class="Bound">utxo</a> <a id="15464" href="Ledger.Conway.Conformance.Equivalence.html#15464" class="Bound">certs</a> <a id="15470" href="Ledger.Conway.Conformance.Equivalence.html#15470" class="Bound">gov</a><a id="15473" class="Symbol">)</a> <a id="15475" class="Symbol">=</a> <a id="15477" href="Ledger.Conway.Conformance.Equivalence.html#16746" class="Function">goal</a>
  <a id="15484" class="Keyword">where</a>
    <a id="15494" class="Keyword">open</a> <a id="15499" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="15508" href="Ledger.Conway.Conformance.Equivalence.html#15418" class="Bound">ls</a>  <a id="15512" class="Keyword">renaming</a> <a id="15521" class="Symbol">(</a><a id="15522" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="15532" class="Symbol">to</a> <a id="15535" class="Field">certSt</a><a id="15541" class="Symbol">)</a>
    <a id="15547" class="Keyword">open</a> <a id="15552" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="15561" href="Ledger.Conway.Conformance.Equivalence.html#15433" class="Bound">ls&#39;</a> <a id="15565" class="Keyword">renaming</a> <a id="15574" class="Symbol">(</a><a id="15575" href="Ledger.Conway.Conformance.Ledger.html#778" class="Field">utxoSt</a> <a id="15582" class="Symbol">to</a> <a id="15585" class="Field">utxoSt&#39;</a><a id="15592" class="Symbol">;</a> <a id="15594" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="15604" class="Symbol">to</a> <a id="15607" class="Field">certSt&#39;</a><a id="15614" class="Symbol">)</a>
    <a id="15620" class="Keyword">open</a> <a id="15625" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="15632" href="Ledger.Conway.Conformance.Equivalence.html#15410" class="Bound">Γ</a> <a id="15634" class="Keyword">using</a> <a id="15640" class="Symbol">(</a><a id="15641" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="15648" class="Symbol">)</a>
    <a id="15654" class="Keyword">open</a> <a id="15659" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="15666" class="Symbol">(</a><a id="15667" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="15672" href="Ledger.Conway.Conformance.Equivalence.html#15423" class="Bound">tx</a><a id="15674" class="Symbol">)</a>

    <a id="15681" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a>  <a id="15691" class="Symbol">=</a> <a id="15693" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="15714" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a>
    <a id="15725" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a> <a id="15735" class="Symbol">=</a> <a id="15737" href="Ledger.Conway.Utxo.html#2855" class="Field">L.UTxOState.deposits</a> <a id="15758" href="Ledger.Conway.Conformance.Equivalence.html#15585" class="Function">utxoSt&#39;</a>

    <a id="15771" href="Ledger.Conway.Conformance.Equivalence.html#15771" class="Function">depositsL&#39;</a> <a id="15782" class="Symbol">=</a> <a id="15784" href="Ledger.Conway.Utxo.html#9339" class="Function">L.updateDeposits</a> <a id="15801" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="15809" class="Symbol">(</a><a id="15810" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="15815" href="Ledger.Conway.Conformance.Equivalence.html#15423" class="Bound">tx</a><a id="15817" class="Symbol">)</a> <a id="15819" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a>

    <a id="15833" href="Ledger.Conway.Conformance.Equivalence.html#15833" class="Function">ddeps</a> <a id="15839" class="Symbol">=</a> <a id="15841" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="15855" href="Ledger.Conway.Conformance.Equivalence.html#15535" class="Function">certSt</a> <a id="15862" class="Symbol">.</a><a id="15863" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15873" href="Ledger.Conway.Conformance.Equivalence.html#15873" class="Function">gdeps</a> <a id="15879" class="Symbol">=</a> <a id="15881" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="15895" href="Ledger.Conway.Conformance.Equivalence.html#15535" class="Function">certSt</a> <a id="15902" class="Symbol">.</a><a id="15903" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15914" href="Ledger.Conway.Conformance.Equivalence.html#15914" class="Function">ddeps&#39;</a> <a id="15921" class="Symbol">=</a> <a id="15923" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="15937" href="Ledger.Conway.Conformance.Equivalence.html#15607" class="Function">certSt&#39;</a> <a id="15945" class="Symbol">.</a><a id="15946" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15956" href="Ledger.Conway.Conformance.Equivalence.html#15956" class="Function">gdeps&#39;</a> <a id="15963" class="Symbol">=</a> <a id="15965" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="15979" href="Ledger.Conway.Conformance.Equivalence.html#15607" class="Function">certSt&#39;</a> <a id="15987" class="Symbol">.</a><a id="15988" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15999" href="Ledger.Conway.Conformance.Equivalence.html#15999" class="Function">lem</a> <a id="16003" class="Symbol">:</a> <a id="16005" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a> <a id="16015" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="16017" href="Ledger.Conway.Conformance.Equivalence.html#15771" class="Function">depositsL&#39;</a>
    <a id="16032" href="Ledger.Conway.Conformance.Equivalence.html#15999" class="Function">lem</a> <a id="16036" class="Keyword">rewrite</a> <a id="16044" href="Ledger.Conway.Conformance.Equivalence.html#2468" class="Function">lemDepositsC</a> <a id="16057" href="Ledger.Conway.Conformance.Equivalence.html#15459" class="Bound">utxo</a> <a id="16062" class="Symbol">=</a> <a id="16064" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="16074" href="Ledger.Conway.Conformance.Equivalence.html#16074" class="Function">lem₁</a> <a id="16079" class="Symbol">:</a> <a id="16081" class="Symbol">(</a><a id="16082" href="Ledger.Conway.Conformance.Equivalence.html#15914" class="Function">ddeps&#39;</a> <a id="16089" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16091" href="Ledger.Conway.Conformance.Equivalence.html#15956" class="Function">gdeps&#39;</a><a id="16097" class="Symbol">)</a> <a id="16099" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="16101" class="Symbol">(</a><a id="16102" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16114" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16122" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16130" href="Ledger.Conway.Conformance.Equivalence.html#15833" class="Function">ddeps</a> <a id="16136" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16138" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16150" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16158" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16166" href="Ledger.Conway.Conformance.Equivalence.html#15873" class="Function">gdeps</a><a id="16171" class="Symbol">)</a>
    <a id="16177" href="Ledger.Conway.Conformance.Equivalence.html#16074" class="Function">lem₁</a> <a id="16182" class="Symbol">=</a> <a id="16184" href="Ledger.Conway.Conformance.Equivalence.html#14992" class="Function">lemCERTSDepositsC</a> <a id="16202" href="Ledger.Conway.Conformance.Equivalence.html#15464" class="Bound">certs</a>

    <a id="16213" href="Ledger.Conway.Conformance.Equivalence.html#16213" class="Function">lem₂</a> <a id="16218" class="Symbol">:</a>  <a id="16221" class="Symbol">(</a><a id="16222" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16234" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16242" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16250" class="Symbol">(</a><a id="16251" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16261" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a><a id="16269" class="Symbol">)</a> <a id="16271" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16273" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16285" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16293" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16301" class="Symbol">(</a><a id="16302" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16312" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a><a id="16320" class="Symbol">))</a>
         <a id="16332" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="16335" class="Symbol">(</a><a id="16336" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16346" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a> <a id="16356" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16358" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16368" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a><a id="16377" class="Symbol">)</a>
    <a id="16383" href="Ledger.Conway.Conformance.Equivalence.html#16213" class="Function">lem₂</a> <a id="16388" class="Keyword">rewrite</a> <a id="16396" href="Ledger.Conway.Conformance.Equivalence.html#15999" class="Function">lem</a> <a id="16400" class="Symbol">=</a> <a id="16402" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18923" class="Function">lem-upd-ddeps</a> <a id="16416" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16424" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a> <a id="16433" href="Ledger.Conway.Conformance.Equivalence.html#15423" class="Bound">tx</a> <a id="16436" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16438" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19696" class="Function">lem-upd-gdeps</a> <a id="16452" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16460" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a> <a id="16469" href="Ledger.Conway.Conformance.Equivalence.html#15423" class="Bound">tx</a>

    <a id="16477" href="Ledger.Conway.Conformance.Equivalence.html#16477" class="Function">lem₃</a> <a id="16482" class="Symbol">:</a>  <a id="16485" class="Symbol">(</a><a id="16486" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16498" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16506" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16514" href="Ledger.Conway.Conformance.Equivalence.html#15833" class="Function">ddeps</a> <a id="16520" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16522" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16534" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16542" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16550" href="Ledger.Conway.Conformance.Equivalence.html#15873" class="Function">gdeps</a><a id="16555" class="Symbol">)</a>
         <a id="16566" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="16569" class="Symbol">(</a><a id="16570" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16582" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16590" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16598" class="Symbol">(</a><a id="16599" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16609" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a><a id="16617" class="Symbol">)</a> <a id="16619" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16621" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16633" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16641" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16649" class="Symbol">(</a><a id="16650" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16660" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a><a id="16668" class="Symbol">))</a>
    <a id="16675" href="Ledger.Conway.Conformance.Equivalence.html#16477" class="Function">lem₃</a> <a id="16680" class="Symbol">=</a> <a id="16682" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="16684" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14162" class="Function">cong-updateDDeps</a> <a id="16701" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16709" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="16711" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#15148" class="Function">cong-updateGDeps</a> <a id="16728" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16736" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="16738" href="Ledger.Conway.Conformance.Equivalence.html#15438" class="Bound">wf</a>

    <a id="16746" href="Ledger.Conway.Conformance.Equivalence.html#16746" class="Function">goal</a> <a id="16751" class="Symbol">:</a> <a id="16753" class="Symbol">(</a><a id="16754" href="Ledger.Conway.Conformance.Equivalence.html#15914" class="Function">ddeps&#39;</a> <a id="16761" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16763" href="Ledger.Conway.Conformance.Equivalence.html#15956" class="Function">gdeps&#39;</a><a id="16769" class="Symbol">)</a> <a id="16771" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="16774" class="Symbol">(</a><a id="16775" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16785" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a> <a id="16795" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16797" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16807" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a><a id="16816" class="Symbol">)</a>
    <a id="16822" href="Ledger.Conway.Conformance.Equivalence.html#16746" class="Function">goal</a> <a id="16827" class="Keyword">with</a> <a id="16832" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> ← <a id="16839" href="Ledger.Conway.Conformance.Equivalence.html#16074" class="Function">lem₁</a> <a id="16844" class="Symbol">=</a> <a id="16846" href="Ledger.Conway.Conformance.Equivalence.html#13897" class="Function">≡ᵈ-trans</a> <a id="16855" class="Symbol">{</a><a id="16856" href="Ledger.Conway.Conformance.Equivalence.html#15914" class="Function">ddeps&#39;</a> <a id="16863" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16865" href="Ledger.Conway.Conformance.Equivalence.html#15956" class="Function">gdeps&#39;</a><a id="16871" class="Symbol">}</a>
                                     <a id="16910" class="Symbol">{</a><a id="16911" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16923" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16931" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16939" class="Symbol">(</a><a id="16940" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16950" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a><a id="16958" class="Symbol">)</a> <a id="16960" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16962" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16974" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16982" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a> <a id="16990" class="Symbol">(</a><a id="16991" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="17001" href="Ledger.Conway.Conformance.Equivalence.html#15681" class="Function">deposits</a><a id="17009" class="Symbol">)}</a>
                                     <a id="17049" class="Symbol">{</a><a id="17050" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="17060" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a> <a id="17070" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17072" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="17082" href="Ledger.Conway.Conformance.Equivalence.html#15725" class="Function">deposits&#39;</a><a id="17091" class="Symbol">}</a>
                              <a id="17123" href="Ledger.Conway.Conformance.Equivalence.html#16477" class="Function">lem₃</a>
                              <a id="17158" href="Ledger.Conway.Conformance.Equivalence.html#16213" class="Function">lem₂</a>
<a id="17163" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Function">lemWellformed</a> <a id="17177" href="Ledger.Conway.Conformance.Equivalence.html#17177" class="Bound">wf</a> <a id="17180" class="Symbol">(</a><a id="17181" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="17193" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="17198" href="Ledger.Conway.Conformance.Equivalence.html#17198" class="Bound">utxo</a><a id="17202" class="Symbol">)</a> <a id="17204" class="Keyword">rewrite</a> <a id="17212" href="Ledger.Conway.Conformance.Equivalence.html#2468" class="Function">lemDepositsC</a> <a id="17225" href="Ledger.Conway.Conformance.Equivalence.html#17198" class="Bound">utxo</a> <a id="17230" class="Symbol">=</a> <a id="17232" href="Ledger.Conway.Conformance.Equivalence.html#17177" class="Bound">wf</a>

<a id="setCertDeposits"></a><a id="17236" href="Ledger.Conway.Conformance.Equivalence.html#17236" class="Function">setCertDeposits</a> <a id="17252" class="Symbol">:</a> <a id="17254" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="17265" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17267" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="17278" class="Symbol">→</a> <a id="17280" href="Ledger.Conway.Conformance.Certs.html#962" class="Record">C.CertState</a> <a id="17292" class="Symbol">→</a> <a id="17294" href="Ledger.Conway.Conformance.Certs.html#962" class="Record">C.CertState</a>
<a id="17306" href="Ledger.Conway.Conformance.Equivalence.html#17236" class="Function">setCertDeposits</a> <a id="17322" class="Symbol">(</a><a id="17323" href="Ledger.Conway.Conformance.Equivalence.html#17323" class="Bound">ddeps</a> <a id="17329" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17331" href="Ledger.Conway.Conformance.Equivalence.html#17331" class="Bound">gdeps</a><a id="17336" class="Symbol">)</a> <a id="17338" href="Ledger.Conway.Conformance.Equivalence.html#17338" class="Bound">cs</a> <a id="17341" class="Symbol">=</a>
  <a id="17345" class="Keyword">let</a> <a id="17349" class="Keyword">open</a> <a id="17354" href="Ledger.Conway.Conformance.Certs.html#962" class="Module">C.CertState</a> <a id="17366" href="Ledger.Conway.Conformance.Equivalence.html#17338" class="Bound">cs</a> <a id="17369" class="Keyword">in</a>
  <a id="17374" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="17376" class="Keyword">record</a> <a id="17383" href="Ledger.Conway.Conformance.Certs.html#1021" class="Field">dState</a> <a id="17390" class="Symbol">{</a><a id="17391" href="Ledger.Conway.Conformance.Certs.html#762" class="Field">deposits</a> <a id="17400" class="Symbol">=</a> <a id="17402" href="Ledger.Conway.Conformance.Equivalence.html#17323" class="Bound">ddeps</a><a id="17407" class="Symbol">}</a> <a id="17409" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17411" href="Ledger.Conway.Conformance.Certs.html#1041" class="Field">pState</a> <a id="17418" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17420" class="Keyword">record</a> <a id="17427" href="Ledger.Conway.Conformance.Certs.html#1061" class="Field">gState</a> <a id="17434" class="Symbol">{</a><a id="17435" href="Ledger.Conway.Conformance.Certs.html#932" class="Field">deposits</a> <a id="17444" class="Symbol">=</a> <a id="17446" href="Ledger.Conway.Conformance.Equivalence.html#17331" class="Bound">gdeps</a><a id="17451" class="Symbol">}</a> <a id="17453" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a>

<a id="_⊢_⇀⦇_,CERTS&#39;⦈_"></a><a id="17456" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17472" class="Symbol">:</a> <a id="17474" href="Ledger.Conway.Certs.html#2819" class="Record">C.CertEnv</a> <a id="17484" class="Symbol">→</a> <a id="17486" href="Ledger.Conway.Conformance.Certs.html#962" class="Record">C.CertState</a> <a id="17498" class="Symbol">→</a> <a id="17500" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="17505" href="Ledger.Conway.Certs.html#1352" class="Datatype">L.DCert</a> <a id="17513" class="Symbol">→</a> <a id="17515" href="Ledger.Conway.Conformance.Certs.html#962" class="Record">C.CertState</a> <a id="17527" class="Symbol">→</a> <a id="17529" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="17534" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17550" class="Symbol">=</a> <a id="17552" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="17579" class="Symbol">{</a><a id="17580" class="Argument">sts</a> <a id="17584" class="Symbol">=</a> <a id="17586" href="Ledger.Conway.Conformance.Certs.html#6499" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="17601" class="Symbol">}</a>

<a id="updateCDep"></a><a id="17604" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="17615" class="Symbol">:</a> <a id="17617" href="Ledger.Conway.PParams.html#1717" class="Record">PParams</a> <a id="17625" class="Symbol">→</a> <a id="17627" href="Ledger.Conway.Certs.html#1352" class="Datatype">L.DCert</a> <a id="17635" class="Symbol">→</a> <a id="17637" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="17648" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17650" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="17661" class="Symbol">→</a> <a id="17663" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a> <a id="17674" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17676" href="Ledger.Conway.Certs.html#601" class="Function">L.Deposits</a>
<a id="17687" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="17698" href="Ledger.Conway.Conformance.Equivalence.html#17698" class="Bound">pp</a> <a id="17701" href="Ledger.Conway.Conformance.Equivalence.html#17701" class="Bound">cert</a> <a id="17706" class="Symbol">(</a><a id="17707" href="Ledger.Conway.Conformance.Equivalence.html#17707" class="Bound">ddep</a> <a id="17712" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17714" href="Ledger.Conway.Conformance.Equivalence.html#17714" class="Bound">gdep</a><a id="17718" class="Symbol">)</a> <a id="17720" class="Symbol">=</a> <a id="17722" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#1913" class="Function">updateDDep</a> <a id="17733" href="Ledger.Conway.Conformance.Equivalence.html#17698" class="Bound">pp</a> <a id="17736" href="Ledger.Conway.Conformance.Equivalence.html#17701" class="Bound">cert</a> <a id="17741" href="Ledger.Conway.Conformance.Equivalence.html#17707" class="Bound">ddep</a> <a id="17746" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17748" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2453" class="Function">updateGDep</a> <a id="17759" href="Ledger.Conway.Conformance.Equivalence.html#17698" class="Bound">pp</a> <a id="17762" href="Ledger.Conway.Conformance.Equivalence.html#17701" class="Bound">cert</a> <a id="17767" href="Ledger.Conway.Conformance.Equivalence.html#17714" class="Bound">gdep</a>

<a id="17773" class="Keyword">opaque</a>
  <a id="castCERTS&#39;"></a><a id="17782" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="17793" class="Symbol">:</a> <a id="17795" class="Symbol">∀</a> <a id="17797" class="Symbol">{</a><a id="17798" href="Ledger.Conway.Conformance.Equivalence.html#17798" class="Bound">Γ</a> <a id="17800" href="Ledger.Conway.Conformance.Equivalence.html#17800" class="Bound">certs</a><a id="17805" class="Symbol">}</a> <a id="17807" class="Symbol">{</a><a id="17808" href="Ledger.Conway.Conformance.Equivalence.html#17808" class="Bound">s</a> <a id="17810" href="Ledger.Conway.Conformance.Equivalence.html#17810" class="Bound">s&#39;</a> <a id="17813" class="Symbol">:</a> <a id="17815" href="Ledger.Conway.Certs.html#4355" class="Record">L.CertState</a><a id="17826" class="Symbol">}</a> <a id="17828" href="Ledger.Conway.Conformance.Equivalence.html#17828" class="Bound">deps₁</a> <a id="17834" href="Ledger.Conway.Conformance.Equivalence.html#17834" class="Bound">deps₂</a> <a id="17840" href="Ledger.Conway.Conformance.Equivalence.html#17840" class="Bound">deps₁&#39;</a>
             <a id="17860" class="Symbol">→</a> <a id="17862" href="Ledger.Conway.Conformance.Equivalence.html#17828" class="Bound">deps₁</a> <a id="17868" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="17871" href="Ledger.Conway.Conformance.Equivalence.html#17834" class="Bound">deps₂</a>
             <a id="17890" class="Symbol">→</a> <a id="17892" href="Ledger.Conway.Conformance.Equivalence.html#17798" class="Bound">Γ</a> <a id="17894" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">⊢</a> <a id="17896" href="Ledger.Conway.Conformance.Equivalence.html#17828" class="Bound">deps₁</a> <a id="17902" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17908" href="Ledger.Conway.Conformance.Equivalence.html#17808" class="Bound">s</a> <a id="17910" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">⇀⦇</a> <a id="17913" href="Ledger.Conway.Conformance.Equivalence.html#17800" class="Bound">certs</a> <a id="17919" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">,CERTS&#39;⦈</a> <a id="17928" class="Symbol">(</a><a id="17929" href="Ledger.Conway.Conformance.Equivalence.html#17840" class="Bound">deps₁&#39;</a> <a id="17936" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17942" href="Ledger.Conway.Conformance.Equivalence.html#17810" class="Bound">s&#39;</a><a id="17944" class="Symbol">)</a>
             <a id="17959" class="Symbol">→</a> <a id="17961" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="17964" href="Ledger.Conway.Conformance.Equivalence.html#17964" class="Bound">deps₂&#39;</a> <a id="17971" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="17973" href="Ledger.Conway.Conformance.Equivalence.html#17840" class="Bound">deps₁&#39;</a> <a id="17980" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="17983" href="Ledger.Conway.Conformance.Equivalence.html#17964" class="Bound">deps₂&#39;</a> <a id="17990" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17992" href="Ledger.Conway.Conformance.Equivalence.html#17798" class="Bound">Γ</a> <a id="17994" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">⊢</a> <a id="17996" href="Ledger.Conway.Conformance.Equivalence.html#17834" class="Bound">deps₂</a> <a id="18002" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="18008" href="Ledger.Conway.Conformance.Equivalence.html#17808" class="Bound">s</a> <a id="18010" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">⇀⦇</a> <a id="18013" href="Ledger.Conway.Conformance.Equivalence.html#17800" class="Bound">certs</a> <a id="18019" href="Ledger.Conway.Conformance.Equivalence.html#17456" class="Function Operator">,CERTS&#39;⦈</a> <a id="18028" class="Symbol">(</a><a id="18029" href="Ledger.Conway.Conformance.Equivalence.html#17964" class="Bound">deps₂&#39;</a> <a id="18036" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="18042" href="Ledger.Conway.Conformance.Equivalence.html#17810" class="Bound">s&#39;</a><a id="18044" class="Symbol">)</a>
  <a id="18048" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="18059" href="Ledger.Conway.Conformance.Equivalence.html#18059" class="Bound">deps₁</a> <a id="18065" href="Ledger.Conway.Conformance.Equivalence.html#18065" class="Bound">deps₂</a> <a id="18071" href="Ledger.Conway.Conformance.Equivalence.html#18071" class="Bound">deps₁&#39;</a> <a id="18078" href="Ledger.Conway.Conformance.Equivalence.html#18078" class="Bound">eqd</a> <a id="18082" class="Symbol">(</a><a id="18083" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="18091" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="18097" class="Symbol">)</a> <a id="18099" class="Symbol">=</a> <a id="18101" href="Ledger.Conway.Conformance.Equivalence.html#18065" class="Bound">deps₂</a> <a id="18107" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18109" href="Ledger.Conway.Conformance.Equivalence.html#18078" class="Bound">eqd</a> <a id="18113" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18115" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="18123" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a>
  <a id="18132" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="18143" class="Symbol">{</a><a id="18144" href="Ledger.Conway.Conformance.Equivalence.html#18144" class="Bound">Γ</a><a id="18145" class="Symbol">}</a> <a id="18147" href="Ledger.Conway.Conformance.Equivalence.html#18147" class="Bound">deps₁</a> <a id="18153" href="Ledger.Conway.Conformance.Equivalence.html#18153" class="Bound">deps₂</a> <a id="18159" href="Ledger.Conway.Conformance.Equivalence.html#18159" class="Bound">deps₁&#39;</a> <a id="18166" href="Ledger.Conway.Conformance.Equivalence.html#18166" class="Bound">eqd</a> <a id="18170" class="Symbol">(</a><a id="18171" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18178" class="Symbol">(</a><a id="18179" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="18192" class="Symbol">{</a><a id="18193" class="Argument">dCert</a> <a id="18199" class="Symbol">=</a> <a id="18201" href="Ledger.Conway.Conformance.Equivalence.html#18201" class="Bound">cert</a><a id="18205" class="Symbol">}</a> <a id="18207" class="Symbol">(</a><a id="18208" href="Ledger.Conway.Conformance.Certs.html#4162" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18225" href="Ledger.Conway.Conformance.Equivalence.html#18225" class="Bound">h</a><a id="18226" class="Symbol">))</a>    <a id="18232" href="Ledger.Conway.Conformance.Equivalence.html#18232" class="Bound">rs</a><a id="18234" class="Symbol">)</a> <a id="18236" class="Symbol">=</a>
    <a id="18242" class="Keyword">let</a> <a id="18246" class="Keyword">open</a> <a id="18251" href="Ledger.Conway.Certs.html#2819" class="Module">C.CertEnv</a> <a id="18261" href="Ledger.Conway.Conformance.Equivalence.html#18144" class="Bound">Γ</a> <a id="18263" class="Keyword">using</a> <a id="18269" class="Symbol">(</a><a id="18270" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="18272" class="Symbol">)</a>
        <a id="18282" href="Ledger.Conway.Conformance.Equivalence.html#18282" class="Bound">deps₂&#39;</a> <a id="18289" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18291" href="Ledger.Conway.Conformance.Equivalence.html#18291" class="Bound">eqd&#39;</a> <a id="18296" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18298" href="Ledger.Conway.Conformance.Equivalence.html#18298" class="Bound">rs&#39;</a> <a id="18302" class="Symbol">=</a> <a id="18304" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="18315" class="Symbol">(</a><a id="18316" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="18327" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="18330" href="Ledger.Conway.Conformance.Equivalence.html#18201" class="Bound">cert</a> <a id="18335" href="Ledger.Conway.Conformance.Equivalence.html#18147" class="Bound">deps₁</a><a id="18340" class="Symbol">)</a> <a id="18342" class="Symbol">(</a><a id="18343" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="18354" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="18357" href="Ledger.Conway.Conformance.Equivalence.html#18201" class="Bound">cert</a> <a id="18362" href="Ledger.Conway.Conformance.Equivalence.html#18153" class="Bound">deps₂</a><a id="18367" class="Symbol">)</a> <a id="18369" href="Ledger.Conway.Conformance.Equivalence.html#18159" class="Bound">deps₁&#39;</a>
                                         <a id="18417" class="Symbol">(</a><a id="18418" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="18420" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="18436" class="Symbol">{</a><a id="18437" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="18439" class="Symbol">}</a> <a id="18441" href="Ledger.Conway.Conformance.Equivalence.html#18201" class="Bound">cert</a> <a id="18446" class="Symbol">{</a><a id="18447" href="Ledger.Conway.Conformance.Equivalence.html#18147" class="Bound">deps₁</a> <a id="18453" class="Symbol">.</a><a id="18454" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18459" class="Symbol">}</a> <a id="18461" class="Symbol">{</a><a id="18462" href="Ledger.Conway.Conformance.Equivalence.html#18153" class="Bound">deps₂</a> <a id="18468" class="Symbol">.</a><a id="18469" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18474" class="Symbol">}</a>
                                          <a id="18518" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="18520" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="18536" class="Symbol">{</a><a id="18537" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="18539" class="Symbol">}</a> <a id="18541" href="Ledger.Conway.Conformance.Equivalence.html#18201" class="Bound">cert</a> <a id="18546" class="Symbol">{</a><a id="18547" href="Ledger.Conway.Conformance.Equivalence.html#18147" class="Bound">deps₁</a> <a id="18553" class="Symbol">.</a><a id="18554" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18559" class="Symbol">}</a> <a id="18561" class="Symbol">{</a><a id="18562" href="Ledger.Conway.Conformance.Equivalence.html#18153" class="Bound">deps₂</a> <a id="18568" class="Symbol">.</a><a id="18569" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18574" class="Symbol">}</a> <a id="18576" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="18578" href="Ledger.Conway.Conformance.Equivalence.html#18166" class="Bound">eqd</a><a id="18581" class="Symbol">)</a> <a id="18583" href="Ledger.Conway.Conformance.Equivalence.html#18232" class="Bound">rs</a>
    <a id="18590" class="Keyword">in</a>  <a id="18594" href="Ledger.Conway.Conformance.Equivalence.html#18282" class="Bound">deps₂&#39;</a> <a id="18601" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18603" href="Ledger.Conway.Conformance.Equivalence.html#18291" class="Bound">eqd&#39;</a> <a id="18608" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18610" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18617" class="Symbol">(</a><a id="18618" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="18631" class="Symbol">(</a><a id="18632" href="Ledger.Conway.Conformance.Certs.html#4162" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18649" href="Ledger.Conway.Conformance.Equivalence.html#18225" class="Bound">h</a><a id="18650" class="Symbol">))</a> <a id="18653" href="Ledger.Conway.Conformance.Equivalence.html#18298" class="Bound">rs&#39;</a>
  <a id="18659" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="18670" class="Symbol">{</a><a id="18671" href="Ledger.Conway.Conformance.Equivalence.html#18671" class="Bound">Γ</a><a id="18672" class="Symbol">}</a> <a id="18674" href="Ledger.Conway.Conformance.Equivalence.html#18674" class="Bound">deps₁</a> <a id="18680" href="Ledger.Conway.Conformance.Equivalence.html#18680" class="Bound">deps₂</a> <a id="18686" href="Ledger.Conway.Conformance.Equivalence.html#18686" class="Bound">deps₁&#39;</a> <a id="18693" href="Ledger.Conway.Conformance.Equivalence.html#18693" class="Bound">eqd</a> <a id="18697" class="Symbol">(</a><a id="18698" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18705" class="Symbol">(</a><a id="18706" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="18719" class="Symbol">{</a><a id="18720" class="Argument">dCert</a> <a id="18726" class="Symbol">=</a> <a id="18728" href="Ledger.Conway.Conformance.Equivalence.html#18728" class="Bound">cert</a><a id="18732" class="Symbol">}</a> <a id="18734" class="Symbol">(</a><a id="18735" href="Ledger.Conway.Conformance.Certs.html#4791" class="InductiveConstructor">C.DELEG-dereg</a> <a id="18749" class="Symbol">(</a><a id="18750" href="Ledger.Conway.Conformance.Equivalence.html#18750" class="Bound">a</a> <a id="18752" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18754" href="Ledger.Conway.Conformance.Equivalence.html#18754" class="Bound">b</a> <a id="18756" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18758" href="Ledger.Conway.Conformance.Equivalence.html#18758" class="Bound">c</a><a id="18759" class="Symbol">)))</a> <a id="18763" href="Ledger.Conway.Conformance.Equivalence.html#18763" class="Bound">rs</a><a id="18765" class="Symbol">)</a> <a id="18767" class="Symbol">=</a>
    <a id="18773" class="Keyword">let</a> <a id="18777" class="Keyword">open</a> <a id="18782" href="Ledger.Conway.Certs.html#2819" class="Module">C.CertEnv</a> <a id="18792" href="Ledger.Conway.Conformance.Equivalence.html#18671" class="Bound">Γ</a> <a id="18794" class="Keyword">using</a> <a id="18800" class="Symbol">(</a><a id="18801" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="18803" class="Symbol">)</a>
        <a id="18813" href="Ledger.Conway.Conformance.Equivalence.html#18813" class="Bound">deps₂&#39;</a> <a id="18820" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18822" href="Ledger.Conway.Conformance.Equivalence.html#18822" class="Bound">eqd&#39;</a> <a id="18827" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18829" href="Ledger.Conway.Conformance.Equivalence.html#18829" class="Bound">rs&#39;</a> <a id="18833" class="Symbol">=</a> <a id="18835" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="18846" class="Symbol">(</a><a id="18847" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="18858" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="18861" href="Ledger.Conway.Conformance.Equivalence.html#18728" class="Bound">cert</a> <a id="18866" href="Ledger.Conway.Conformance.Equivalence.html#18674" class="Bound">deps₁</a><a id="18871" class="Symbol">)</a> <a id="18873" class="Symbol">(</a><a id="18874" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="18885" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="18888" href="Ledger.Conway.Conformance.Equivalence.html#18728" class="Bound">cert</a> <a id="18893" href="Ledger.Conway.Conformance.Equivalence.html#18680" class="Bound">deps₂</a><a id="18898" class="Symbol">)</a> <a id="18900" href="Ledger.Conway.Conformance.Equivalence.html#18686" class="Bound">deps₁&#39;</a>
                                         <a id="18948" class="Symbol">(</a><a id="18949" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="18951" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="18967" class="Symbol">{</a><a id="18968" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="18970" class="Symbol">}</a> <a id="18972" href="Ledger.Conway.Conformance.Equivalence.html#18728" class="Bound">cert</a> <a id="18977" class="Symbol">{</a><a id="18978" href="Ledger.Conway.Conformance.Equivalence.html#18674" class="Bound">deps₁</a> <a id="18984" class="Symbol">.</a><a id="18985" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18990" class="Symbol">}</a> <a id="18992" class="Symbol">{</a><a id="18993" href="Ledger.Conway.Conformance.Equivalence.html#18680" class="Bound">deps₂</a> <a id="18999" class="Symbol">.</a><a id="19000" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19005" class="Symbol">}</a>
                                          <a id="19049" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="19051" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="19067" class="Symbol">{</a><a id="19068" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="19070" class="Symbol">}</a> <a id="19072" href="Ledger.Conway.Conformance.Equivalence.html#18728" class="Bound">cert</a> <a id="19077" class="Symbol">{</a><a id="19078" href="Ledger.Conway.Conformance.Equivalence.html#18674" class="Bound">deps₁</a> <a id="19084" class="Symbol">.</a><a id="19085" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19090" class="Symbol">}</a> <a id="19092" class="Symbol">{</a><a id="19093" href="Ledger.Conway.Conformance.Equivalence.html#18680" class="Bound">deps₂</a> <a id="19099" class="Symbol">.</a><a id="19100" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19105" class="Symbol">}</a> <a id="19107" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="19109" href="Ledger.Conway.Conformance.Equivalence.html#18693" class="Bound">eqd</a><a id="19112" class="Symbol">)</a> <a id="19114" href="Ledger.Conway.Conformance.Equivalence.html#18763" class="Bound">rs</a>
    <a id="19121" class="Keyword">in</a>  <a id="19125" href="Ledger.Conway.Conformance.Equivalence.html#18813" class="Bound">deps₂&#39;</a> <a id="19132" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19134" href="Ledger.Conway.Conformance.Equivalence.html#18822" class="Bound">eqd&#39;</a> <a id="19139" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19141" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19148" class="Symbol">(</a><a id="19149" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="19162" class="Symbol">(</a><a id="19163" href="Ledger.Conway.Conformance.Certs.html#4791" class="InductiveConstructor">C.DELEG-dereg</a> <a id="19177" class="Symbol">(</a><a id="19178" href="Ledger.Conway.Conformance.Equivalence.html#18750" class="Bound">a</a> <a id="19180" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19182" href="Ledger.Conway.Conformance.Equivalence.html#18693" class="Bound">eqd</a> <a id="19186" class="Symbol">.</a><a id="19187" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19193" class="Symbol">.</a><a id="19194" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19200" href="Ledger.Conway.Conformance.Equivalence.html#18754" class="Bound">b</a> <a id="19202" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19204" href="Ledger.Conway.Conformance.Equivalence.html#18758" class="Bound">c</a><a id="19205" class="Symbol">)))</a> <a id="19209" href="Ledger.Conway.Conformance.Equivalence.html#18829" class="Bound">rs&#39;</a>
                                                              <a id="19275" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="19312" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="19323" class="Symbol">{</a><a id="19324" href="Ledger.Conway.Conformance.Equivalence.html#19324" class="Bound">Γ</a><a id="19325" class="Symbol">}</a> <a id="19327" href="Ledger.Conway.Conformance.Equivalence.html#19327" class="Bound">deps₁</a> <a id="19333" href="Ledger.Conway.Conformance.Equivalence.html#19333" class="Bound">deps₂</a> <a id="19339" href="Ledger.Conway.Conformance.Equivalence.html#19339" class="Bound">deps₁&#39;</a> <a id="19346" href="Ledger.Conway.Conformance.Equivalence.html#19346" class="Bound">eqd</a> <a id="19350" class="Symbol">(</a><a id="19351" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19358" class="Symbol">(</a><a id="19359" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="19372" class="Symbol">{</a><a id="19373" class="Argument">dCert</a> <a id="19379" class="Symbol">=</a> <a id="19381" href="Ledger.Conway.Conformance.Equivalence.html#19381" class="Bound">cert</a><a id="19385" class="Symbol">}</a> <a id="19387" class="Symbol">(</a><a id="19388" href="Ledger.Conway.Conformance.Certs.html#5155" class="InductiveConstructor">C.DELEG-reg</a> <a id="19400" href="Ledger.Conway.Conformance.Equivalence.html#19400" class="Bound">h</a><a id="19401" class="Symbol">))</a>         <a id="19412" href="Ledger.Conway.Conformance.Equivalence.html#19412" class="Bound">rs</a><a id="19414" class="Symbol">)</a> <a id="19416" class="Symbol">=</a>
    <a id="19422" class="Keyword">let</a> <a id="19426" class="Keyword">open</a> <a id="19431" href="Ledger.Conway.Certs.html#2819" class="Module">C.CertEnv</a> <a id="19441" href="Ledger.Conway.Conformance.Equivalence.html#19324" class="Bound">Γ</a> <a id="19443" class="Keyword">using</a> <a id="19449" class="Symbol">(</a><a id="19450" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="19452" class="Symbol">)</a>
        <a id="19462" href="Ledger.Conway.Conformance.Equivalence.html#19462" class="Bound">deps₂&#39;</a> <a id="19469" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19471" href="Ledger.Conway.Conformance.Equivalence.html#19471" class="Bound">eqd&#39;</a> <a id="19476" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19478" href="Ledger.Conway.Conformance.Equivalence.html#19478" class="Bound">rs&#39;</a> <a id="19482" class="Symbol">=</a> <a id="19484" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="19495" class="Symbol">(</a><a id="19496" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="19507" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="19510" href="Ledger.Conway.Conformance.Equivalence.html#19381" class="Bound">cert</a> <a id="19515" href="Ledger.Conway.Conformance.Equivalence.html#19327" class="Bound">deps₁</a><a id="19520" class="Symbol">)</a> <a id="19522" class="Symbol">(</a><a id="19523" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="19534" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="19537" href="Ledger.Conway.Conformance.Equivalence.html#19381" class="Bound">cert</a> <a id="19542" href="Ledger.Conway.Conformance.Equivalence.html#19333" class="Bound">deps₂</a><a id="19547" class="Symbol">)</a> <a id="19549" href="Ledger.Conway.Conformance.Equivalence.html#19339" class="Bound">deps₁&#39;</a>
                                         <a id="19597" class="Symbol">(</a><a id="19598" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="19600" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="19616" class="Symbol">{</a><a id="19617" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="19619" class="Symbol">}</a> <a id="19621" href="Ledger.Conway.Conformance.Equivalence.html#19381" class="Bound">cert</a> <a id="19626" class="Symbol">{</a><a id="19627" href="Ledger.Conway.Conformance.Equivalence.html#19327" class="Bound">deps₁</a> <a id="19633" class="Symbol">.</a><a id="19634" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19639" class="Symbol">}</a> <a id="19641" class="Symbol">{</a><a id="19642" href="Ledger.Conway.Conformance.Equivalence.html#19333" class="Bound">deps₂</a> <a id="19648" class="Symbol">.</a><a id="19649" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19654" class="Symbol">}</a>
                                          <a id="19698" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="19700" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="19716" class="Symbol">{</a><a id="19717" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="19719" class="Symbol">}</a> <a id="19721" href="Ledger.Conway.Conformance.Equivalence.html#19381" class="Bound">cert</a> <a id="19726" class="Symbol">{</a><a id="19727" href="Ledger.Conway.Conformance.Equivalence.html#19327" class="Bound">deps₁</a> <a id="19733" class="Symbol">.</a><a id="19734" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19739" class="Symbol">}</a> <a id="19741" class="Symbol">{</a><a id="19742" href="Ledger.Conway.Conformance.Equivalence.html#19333" class="Bound">deps₂</a> <a id="19748" class="Symbol">.</a><a id="19749" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19754" class="Symbol">}</a> <a id="19756" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="19758" href="Ledger.Conway.Conformance.Equivalence.html#19346" class="Bound">eqd</a><a id="19761" class="Symbol">)</a> <a id="19763" href="Ledger.Conway.Conformance.Equivalence.html#19412" class="Bound">rs</a>
    <a id="19770" class="Keyword">in</a>  <a id="19774" href="Ledger.Conway.Conformance.Equivalence.html#19462" class="Bound">deps₂&#39;</a> <a id="19781" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19783" href="Ledger.Conway.Conformance.Equivalence.html#19471" class="Bound">eqd&#39;</a> <a id="19788" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19790" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19797" class="Symbol">(</a><a id="19798" href="Ledger.Conway.Conformance.Certs.html#6570" class="InductiveConstructor">C.CERT-deleg</a> <a id="19811" class="Symbol">(</a><a id="19812" href="Ledger.Conway.Conformance.Certs.html#5155" class="InductiveConstructor">C.DELEG-reg</a> <a id="19824" href="Ledger.Conway.Conformance.Equivalence.html#19400" class="Bound">h</a><a id="19825" class="Symbol">))</a> <a id="19828" href="Ledger.Conway.Conformance.Equivalence.html#19478" class="Bound">rs&#39;</a>
  <a id="19834" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="19845" class="Symbol">{</a><a id="19846" href="Ledger.Conway.Conformance.Equivalence.html#19846" class="Bound">Γ</a><a id="19847" class="Symbol">}</a> <a id="19849" href="Ledger.Conway.Conformance.Equivalence.html#19849" class="Bound">deps₁</a> <a id="19855" href="Ledger.Conway.Conformance.Equivalence.html#19855" class="Bound">deps₂</a> <a id="19861" href="Ledger.Conway.Conformance.Equivalence.html#19861" class="Bound">deps₁&#39;</a> <a id="19868" href="Ledger.Conway.Conformance.Equivalence.html#19868" class="Bound">eqd</a> <a id="19872" class="Symbol">(</a><a id="19873" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19880" class="Symbol">(</a><a id="19881" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a>  <a id="19894" class="Symbol">{</a><a id="19895" class="Argument">dCert</a> <a id="19901" class="Symbol">=</a> <a id="19903" href="Ledger.Conway.Conformance.Equivalence.html#19903" class="Bound">cert</a><a id="19907" class="Symbol">}</a> <a id="19909" class="Symbol">(</a><a id="19910" href="Ledger.Conway.Conformance.Certs.html#3788" class="InductiveConstructor">C.POOL-regpool</a> <a id="19925" href="Ledger.Conway.Conformance.Equivalence.html#19925" class="Bound">h</a><a id="19926" class="Symbol">))</a>      <a id="19934" href="Ledger.Conway.Conformance.Equivalence.html#19934" class="Bound">rs</a><a id="19936" class="Symbol">)</a> <a id="19938" class="Symbol">=</a>
    <a id="19944" class="Keyword">let</a> <a id="19948" href="Ledger.Conway.Conformance.Equivalence.html#19948" class="Bound">deps₂&#39;</a> <a id="19955" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19957" href="Ledger.Conway.Conformance.Equivalence.html#19957" class="Bound">eqd&#39;</a> <a id="19962" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19964" href="Ledger.Conway.Conformance.Equivalence.html#19964" class="Bound">rs&#39;</a> <a id="19968" class="Symbol">=</a> <a id="19970" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="19981" href="Ledger.Conway.Conformance.Equivalence.html#19849" class="Bound">deps₁</a> <a id="19987" href="Ledger.Conway.Conformance.Equivalence.html#19855" class="Bound">deps₂</a> <a id="19993" href="Ledger.Conway.Conformance.Equivalence.html#19861" class="Bound">deps₁&#39;</a> <a id="20000" href="Ledger.Conway.Conformance.Equivalence.html#19868" class="Bound">eqd</a> <a id="20004" href="Ledger.Conway.Conformance.Equivalence.html#19934" class="Bound">rs</a>
    <a id="20011" class="Keyword">in</a>  <a id="20015" href="Ledger.Conway.Conformance.Equivalence.html#19948" class="Bound">deps₂&#39;</a> <a id="20022" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20024" href="Ledger.Conway.Conformance.Equivalence.html#19957" class="Bound">eqd&#39;</a> <a id="20029" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20031" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20038" class="Symbol">(</a><a id="20039" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a> <a id="20051" class="Symbol">(</a><a id="20052" href="Ledger.Conway.Conformance.Certs.html#3788" class="InductiveConstructor">C.POOL-regpool</a> <a id="20067" href="Ledger.Conway.Conformance.Equivalence.html#19925" class="Bound">h</a><a id="20068" class="Symbol">))</a> <a id="20071" href="Ledger.Conway.Conformance.Equivalence.html#19964" class="Bound">rs&#39;</a>
  <a id="20077" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="20088" class="Symbol">{</a><a id="20089" href="Ledger.Conway.Conformance.Equivalence.html#20089" class="Bound">Γ</a><a id="20090" class="Symbol">}</a> <a id="20092" href="Ledger.Conway.Conformance.Equivalence.html#20092" class="Bound">deps₁</a> <a id="20098" href="Ledger.Conway.Conformance.Equivalence.html#20098" class="Bound">deps₂</a> <a id="20104" href="Ledger.Conway.Conformance.Equivalence.html#20104" class="Bound">deps₁&#39;</a> <a id="20111" href="Ledger.Conway.Conformance.Equivalence.html#20111" class="Bound">eqd</a> <a id="20115" class="Symbol">(</a><a id="20116" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20123" class="Symbol">(</a><a id="20124" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a>  <a id="20137" class="Symbol">{</a><a id="20138" class="Argument">dCert</a> <a id="20144" class="Symbol">=</a> <a id="20146" href="Ledger.Conway.Conformance.Equivalence.html#20146" class="Bound">cert</a><a id="20150" class="Symbol">}</a> <a id="20152" href="Ledger.Conway.Conformance.Certs.html#3987" class="InductiveConstructor">C.POOL-retirepool</a><a id="20169" class="Symbol">)</a>       <a id="20177" href="Ledger.Conway.Conformance.Equivalence.html#20177" class="Bound">rs</a><a id="20179" class="Symbol">)</a> <a id="20181" class="Symbol">=</a>
    <a id="20187" class="Keyword">let</a> <a id="20191" href="Ledger.Conway.Conformance.Equivalence.html#20191" class="Bound">deps₂&#39;</a> <a id="20198" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20200" href="Ledger.Conway.Conformance.Equivalence.html#20200" class="Bound">eqd&#39;</a> <a id="20205" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20207" href="Ledger.Conway.Conformance.Equivalence.html#20207" class="Bound">rs&#39;</a> <a id="20211" class="Symbol">=</a> <a id="20213" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="20224" href="Ledger.Conway.Conformance.Equivalence.html#20092" class="Bound">deps₁</a> <a id="20230" href="Ledger.Conway.Conformance.Equivalence.html#20098" class="Bound">deps₂</a> <a id="20236" href="Ledger.Conway.Conformance.Equivalence.html#20104" class="Bound">deps₁&#39;</a> <a id="20243" href="Ledger.Conway.Conformance.Equivalence.html#20111" class="Bound">eqd</a> <a id="20247" href="Ledger.Conway.Conformance.Equivalence.html#20177" class="Bound">rs</a>
    <a id="20254" class="Keyword">in</a>  <a id="20258" href="Ledger.Conway.Conformance.Equivalence.html#20191" class="Bound">deps₂&#39;</a> <a id="20265" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20267" href="Ledger.Conway.Conformance.Equivalence.html#20200" class="Bound">eqd&#39;</a> <a id="20272" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20274" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20281" class="Symbol">(</a><a id="20282" href="Ledger.Conway.Conformance.Certs.html#6804" class="InductiveConstructor">C.CERT-pool</a> <a id="20294" href="Ledger.Conway.Conformance.Certs.html#3987" class="InductiveConstructor">C.POOL-retirepool</a><a id="20311" class="Symbol">)</a> <a id="20313" href="Ledger.Conway.Conformance.Equivalence.html#20207" class="Bound">rs&#39;</a>
  <a id="20319" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="20330" class="Symbol">{</a><a id="20331" href="Ledger.Conway.Conformance.Equivalence.html#20331" class="Bound">Γ</a><a id="20332" class="Symbol">}</a> <a id="20334" href="Ledger.Conway.Conformance.Equivalence.html#20334" class="Bound">deps₁</a> <a id="20340" href="Ledger.Conway.Conformance.Equivalence.html#20340" class="Bound">deps₂</a> <a id="20346" href="Ledger.Conway.Conformance.Equivalence.html#20346" class="Bound">deps₁&#39;</a> <a id="20353" href="Ledger.Conway.Conformance.Equivalence.html#20353" class="Bound">eqd</a> <a id="20357" class="Symbol">(</a><a id="20358" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20365" class="Symbol">(</a><a id="20366" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20379" class="Symbol">{</a><a id="20380" class="Argument">dCert</a> <a id="20386" class="Symbol">=</a> <a id="20388" href="Ledger.Conway.Conformance.Equivalence.html#20388" class="Bound">cert</a><a id="20392" class="Symbol">}</a> <a id="20394" class="Symbol">(</a><a id="20395" href="Ledger.Conway.Conformance.Certs.html#5547" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20413" href="Ledger.Conway.Conformance.Equivalence.html#20413" class="Bound">h</a><a id="20414" class="Symbol">))</a>   <a id="20419" href="Ledger.Conway.Conformance.Equivalence.html#20419" class="Bound">rs</a><a id="20421" class="Symbol">)</a> <a id="20423" class="Symbol">=</a>
    <a id="20429" class="Keyword">let</a> <a id="20433" class="Keyword">open</a> <a id="20438" href="Ledger.Conway.Certs.html#2819" class="Module">C.CertEnv</a> <a id="20448" href="Ledger.Conway.Conformance.Equivalence.html#20331" class="Bound">Γ</a> <a id="20450" class="Keyword">using</a> <a id="20456" class="Symbol">(</a><a id="20457" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="20459" class="Symbol">)</a>
        <a id="20469" href="Ledger.Conway.Conformance.Equivalence.html#20469" class="Bound">deps₂&#39;</a> <a id="20476" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20478" href="Ledger.Conway.Conformance.Equivalence.html#20478" class="Bound">eqd&#39;</a> <a id="20483" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20485" href="Ledger.Conway.Conformance.Equivalence.html#20485" class="Bound">rs&#39;</a> <a id="20489" class="Symbol">=</a> <a id="20491" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="20502" class="Symbol">(</a><a id="20503" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="20514" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="20517" href="Ledger.Conway.Conformance.Equivalence.html#20388" class="Bound">cert</a> <a id="20522" href="Ledger.Conway.Conformance.Equivalence.html#20334" class="Bound">deps₁</a><a id="20527" class="Symbol">)</a> <a id="20529" class="Symbol">(</a><a id="20530" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="20541" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="20544" href="Ledger.Conway.Conformance.Equivalence.html#20388" class="Bound">cert</a> <a id="20549" href="Ledger.Conway.Conformance.Equivalence.html#20340" class="Bound">deps₂</a><a id="20554" class="Symbol">)</a> <a id="20556" href="Ledger.Conway.Conformance.Equivalence.html#20346" class="Bound">deps₁&#39;</a>
                                         <a id="20604" class="Symbol">(</a><a id="20605" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="20607" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="20623" class="Symbol">{</a><a id="20624" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="20626" class="Symbol">}</a> <a id="20628" href="Ledger.Conway.Conformance.Equivalence.html#20388" class="Bound">cert</a> <a id="20633" class="Symbol">{</a><a id="20634" href="Ledger.Conway.Conformance.Equivalence.html#20334" class="Bound">deps₁</a> <a id="20640" class="Symbol">.</a><a id="20641" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20646" class="Symbol">}</a> <a id="20648" class="Symbol">{</a><a id="20649" href="Ledger.Conway.Conformance.Equivalence.html#20340" class="Bound">deps₂</a> <a id="20655" class="Symbol">.</a><a id="20656" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20661" class="Symbol">}</a>
                                          <a id="20705" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="20707" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="20723" class="Symbol">{</a><a id="20724" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="20726" class="Symbol">}</a> <a id="20728" href="Ledger.Conway.Conformance.Equivalence.html#20388" class="Bound">cert</a> <a id="20733" class="Symbol">{</a><a id="20734" href="Ledger.Conway.Conformance.Equivalence.html#20334" class="Bound">deps₁</a> <a id="20740" class="Symbol">.</a><a id="20741" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20746" class="Symbol">}</a> <a id="20748" class="Symbol">{</a><a id="20749" href="Ledger.Conway.Conformance.Equivalence.html#20340" class="Bound">deps₂</a> <a id="20755" class="Symbol">.</a><a id="20756" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20761" class="Symbol">}</a> <a id="20763" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="20765" href="Ledger.Conway.Conformance.Equivalence.html#20353" class="Bound">eqd</a><a id="20768" class="Symbol">)</a> <a id="20770" href="Ledger.Conway.Conformance.Equivalence.html#20419" class="Bound">rs</a>
    <a id="20777" class="Keyword">in</a>  <a id="20781" href="Ledger.Conway.Conformance.Equivalence.html#20469" class="Bound">deps₂&#39;</a> <a id="20788" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20790" href="Ledger.Conway.Conformance.Equivalence.html#20478" class="Bound">eqd&#39;</a> <a id="20795" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20797" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20804" class="Symbol">(</a><a id="20805" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="20817" class="Symbol">(</a><a id="20818" href="Ledger.Conway.Conformance.Certs.html#5547" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20836" href="Ledger.Conway.Conformance.Equivalence.html#20413" class="Bound">h</a><a id="20837" class="Symbol">))</a> <a id="20840" href="Ledger.Conway.Conformance.Equivalence.html#20485" class="Bound">rs&#39;</a>
  <a id="20846" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="20857" class="Symbol">{</a><a id="20858" href="Ledger.Conway.Conformance.Equivalence.html#20858" class="Bound">Γ</a><a id="20859" class="Symbol">}</a> <a id="20861" href="Ledger.Conway.Conformance.Equivalence.html#20861" class="Bound">deps₁</a> <a id="20867" href="Ledger.Conway.Conformance.Equivalence.html#20867" class="Bound">deps₂</a> <a id="20873" href="Ledger.Conway.Conformance.Equivalence.html#20873" class="Bound">deps₁&#39;</a> <a id="20880" href="Ledger.Conway.Conformance.Equivalence.html#20880" class="Bound">eqd</a> <a id="20884" class="Symbol">(</a><a id="20885" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20892" class="Symbol">(</a><a id="20893" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20906" class="Symbol">{</a><a id="20907" class="Argument">dCert</a> <a id="20913" class="Symbol">=</a> <a id="20915" href="Ledger.Conway.Conformance.Equivalence.html#20915" class="Bound">cert</a><a id="20919" class="Symbol">}</a> <a id="20921" class="Symbol">(</a><a id="20922" href="Ledger.Conway.Conformance.Certs.html#5913" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="20942" class="Symbol">(</a><a id="20943" href="Ledger.Conway.Conformance.Equivalence.html#20943" class="Bound">a</a> <a id="20945" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20947" href="Ledger.Conway.Conformance.Equivalence.html#20947" class="Bound">b</a><a id="20948" class="Symbol">)))</a> <a id="20952" href="Ledger.Conway.Conformance.Equivalence.html#20952" class="Bound">rs</a><a id="20954" class="Symbol">)</a> <a id="20956" class="Symbol">=</a>
    <a id="20962" class="Keyword">let</a> <a id="20966" class="Keyword">open</a> <a id="20971" href="Ledger.Conway.Certs.html#2819" class="Module">C.CertEnv</a> <a id="20981" href="Ledger.Conway.Conformance.Equivalence.html#20858" class="Bound">Γ</a> <a id="20983" class="Keyword">using</a> <a id="20989" class="Symbol">(</a><a id="20990" href="Ledger.Conway.Certs.html#2874" class="Field">pp</a><a id="20992" class="Symbol">)</a>
        <a id="21002" href="Ledger.Conway.Conformance.Equivalence.html#21002" class="Bound">deps₂&#39;</a> <a id="21009" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21011" href="Ledger.Conway.Conformance.Equivalence.html#21011" class="Bound">eqd&#39;</a> <a id="21016" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21018" href="Ledger.Conway.Conformance.Equivalence.html#21018" class="Bound">rs&#39;</a> <a id="21022" class="Symbol">=</a> <a id="21024" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="21035" class="Symbol">(</a><a id="21036" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="21047" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="21050" href="Ledger.Conway.Conformance.Equivalence.html#20915" class="Bound">cert</a> <a id="21055" href="Ledger.Conway.Conformance.Equivalence.html#20861" class="Bound">deps₁</a><a id="21060" class="Symbol">)</a> <a id="21062" class="Symbol">(</a><a id="21063" href="Ledger.Conway.Conformance.Equivalence.html#17604" class="Function">updateCDep</a> <a id="21074" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a> <a id="21077" href="Ledger.Conway.Conformance.Equivalence.html#20915" class="Bound">cert</a> <a id="21082" href="Ledger.Conway.Conformance.Equivalence.html#20867" class="Bound">deps₂</a><a id="21087" class="Symbol">)</a> <a id="21089" href="Ledger.Conway.Conformance.Equivalence.html#20873" class="Bound">deps₁&#39;</a>
                                         <a id="21137" class="Symbol">(</a><a id="21138" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="21140" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="21156" class="Symbol">{</a><a id="21157" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="21159" class="Symbol">}</a> <a id="21161" href="Ledger.Conway.Conformance.Equivalence.html#20915" class="Bound">cert</a> <a id="21166" class="Symbol">{</a><a id="21167" href="Ledger.Conway.Conformance.Equivalence.html#20861" class="Bound">deps₁</a> <a id="21173" class="Symbol">.</a><a id="21174" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21179" class="Symbol">}</a> <a id="21181" class="Symbol">{</a><a id="21182" href="Ledger.Conway.Conformance.Equivalence.html#20867" class="Bound">deps₂</a> <a id="21188" class="Symbol">.</a><a id="21189" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21194" class="Symbol">}</a>
                                          <a id="21238" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="21240" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="21256" class="Symbol">{</a><a id="21257" href="Ledger.Conway.Certs.html#2874" class="Function">pp</a><a id="21259" class="Symbol">}</a> <a id="21261" href="Ledger.Conway.Conformance.Equivalence.html#20915" class="Bound">cert</a> <a id="21266" class="Symbol">{</a><a id="21267" href="Ledger.Conway.Conformance.Equivalence.html#20861" class="Bound">deps₁</a> <a id="21273" class="Symbol">.</a><a id="21274" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21279" class="Symbol">}</a> <a id="21281" class="Symbol">{</a><a id="21282" href="Ledger.Conway.Conformance.Equivalence.html#20867" class="Bound">deps₂</a> <a id="21288" class="Symbol">.</a><a id="21289" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21294" class="Symbol">}</a> <a id="21296" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="21298" href="Ledger.Conway.Conformance.Equivalence.html#20880" class="Bound">eqd</a><a id="21301" class="Symbol">)</a> <a id="21303" href="Ledger.Conway.Conformance.Equivalence.html#20952" class="Bound">rs</a>
    <a id="21310" class="Keyword">in</a>  <a id="21314" href="Ledger.Conway.Conformance.Equivalence.html#21002" class="Bound">deps₂&#39;</a> <a id="21321" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21323" href="Ledger.Conway.Conformance.Equivalence.html#21011" class="Bound">eqd&#39;</a> <a id="21328" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21330" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21337" class="Symbol">(</a><a id="21338" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="21350" class="Symbol">(</a><a id="21351" href="Ledger.Conway.Conformance.Certs.html#5913" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="21371" class="Symbol">(</a><a id="21372" href="Ledger.Conway.Conformance.Equivalence.html#20943" class="Bound">a</a> <a id="21374" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21376" href="Ledger.Conway.Conformance.Equivalence.html#20880" class="Bound">eqd</a> <a id="21380" class="Symbol">.</a><a id="21381" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="21387" class="Symbol">.</a><a id="21388" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="21394" href="Ledger.Conway.Conformance.Equivalence.html#20947" class="Bound">b</a><a id="21395" class="Symbol">)))</a> <a id="21399" href="Ledger.Conway.Conformance.Equivalence.html#21018" class="Bound">rs&#39;</a>
                                                                   <a id="21470" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="21507" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="21518" class="Symbol">{</a><a id="21519" href="Ledger.Conway.Conformance.Equivalence.html#21519" class="Bound">Γ</a><a id="21520" class="Symbol">}</a> <a id="21522" href="Ledger.Conway.Conformance.Equivalence.html#21522" class="Bound">deps₁</a> <a id="21528" href="Ledger.Conway.Conformance.Equivalence.html#21528" class="Bound">deps₂</a> <a id="21534" href="Ledger.Conway.Conformance.Equivalence.html#21534" class="Bound">deps₁&#39;</a> <a id="21541" href="Ledger.Conway.Conformance.Equivalence.html#21541" class="Bound">eqd</a> <a id="21545" class="Symbol">(</a><a id="21546" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21553" class="Symbol">(</a><a id="21554" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a>  <a id="21567" class="Symbol">{</a><a id="21568" class="Argument">dCert</a> <a id="21574" class="Symbol">=</a> <a id="21576" href="Ledger.Conway.Conformance.Equivalence.html#21576" class="Bound">cert</a><a id="21580" class="Symbol">}</a> <a id="21582" class="Symbol">(</a><a id="21583" href="Ledger.Conway.Conformance.Certs.html#6208" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21602" href="Ledger.Conway.Conformance.Equivalence.html#21602" class="Bound">h</a><a id="21603" class="Symbol">))</a>  <a id="21607" href="Ledger.Conway.Conformance.Equivalence.html#21607" class="Bound">rs</a><a id="21609" class="Symbol">)</a> <a id="21611" class="Symbol">=</a>
    <a id="21617" class="Keyword">let</a> <a id="21621" href="Ledger.Conway.Conformance.Equivalence.html#21621" class="Bound">deps₂&#39;</a> <a id="21628" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21630" href="Ledger.Conway.Conformance.Equivalence.html#21630" class="Bound">eqd&#39;</a> <a id="21635" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21637" href="Ledger.Conway.Conformance.Equivalence.html#21637" class="Bound">rs&#39;</a> <a id="21641" class="Symbol">=</a> <a id="21643" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="21654" href="Ledger.Conway.Conformance.Equivalence.html#21522" class="Bound">deps₁</a> <a id="21660" href="Ledger.Conway.Conformance.Equivalence.html#21528" class="Bound">deps₂</a> <a id="21666" href="Ledger.Conway.Conformance.Equivalence.html#21534" class="Bound">deps₁&#39;</a> <a id="21673" href="Ledger.Conway.Conformance.Equivalence.html#21541" class="Bound">eqd</a> <a id="21677" href="Ledger.Conway.Conformance.Equivalence.html#21607" class="Bound">rs</a>
    <a id="21684" class="Keyword">in</a>  <a id="21688" href="Ledger.Conway.Conformance.Equivalence.html#21621" class="Bound">deps₂&#39;</a> <a id="21695" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21697" href="Ledger.Conway.Conformance.Equivalence.html#21630" class="Bound">eqd&#39;</a> <a id="21702" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21704" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21711" class="Symbol">(</a><a id="21712" href="Ledger.Conway.Conformance.Certs.html#6988" class="InductiveConstructor">C.CERT-vdel</a> <a id="21724" class="Symbol">(</a><a id="21725" href="Ledger.Conway.Conformance.Certs.html#6208" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21744" href="Ledger.Conway.Conformance.Equivalence.html#21602" class="Bound">h</a><a id="21745" class="Symbol">))</a> <a id="21748" href="Ledger.Conway.Conformance.Equivalence.html#21637" class="Bound">rs&#39;</a>

  <a id="castCERTS"></a><a id="21755" href="Ledger.Conway.Conformance.Equivalence.html#21755" class="Function">castCERTS</a> <a id="21765" class="Symbol">:</a> <a id="21767" class="Symbol">∀</a> <a id="21769" class="Symbol">{</a><a id="21770" href="Ledger.Conway.Conformance.Equivalence.html#21770" class="Bound">Γ</a> <a id="21772" href="Ledger.Conway.Conformance.Equivalence.html#21772" class="Bound">certs</a><a id="21777" class="Symbol">}</a> <a id="21779" class="Symbol">{</a><a id="21780" href="Ledger.Conway.Conformance.Equivalence.html#21780" class="Bound">s</a> <a id="21782" href="Ledger.Conway.Conformance.Equivalence.html#21782" class="Bound">s&#39;</a> <a id="21785" class="Symbol">:</a> <a id="21787" href="Ledger.Conway.Certs.html#4355" class="Record">L.CertState</a><a id="21798" class="Symbol">}</a> <a id="21800" href="Ledger.Conway.Conformance.Equivalence.html#21800" class="Bound">deps₁</a> <a id="21806" href="Ledger.Conway.Conformance.Equivalence.html#21806" class="Bound">deps₂</a> <a id="21812" href="Ledger.Conway.Conformance.Equivalence.html#21812" class="Bound">deps₁&#39;</a>
            <a id="21831" class="Symbol">→</a> <a id="21833" href="Ledger.Conway.Conformance.Equivalence.html#21800" class="Bound">deps₁</a> <a id="21839" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="21842" href="Ledger.Conway.Conformance.Equivalence.html#21806" class="Bound">deps₂</a>
            <a id="21860" class="Symbol">→</a> <a id="21862" href="Ledger.Conway.Conformance.Equivalence.html#21770" class="Bound">Γ</a> <a id="21864" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">C.⊢</a> <a id="21868" href="Ledger.Conway.Conformance.Equivalence.html#21800" class="Bound">deps₁</a> <a id="21874" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21880" href="Ledger.Conway.Conformance.Equivalence.html#21780" class="Bound">s</a> <a id="21882" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">⇀⦇</a> <a id="21885" href="Ledger.Conway.Conformance.Equivalence.html#21772" class="Bound">certs</a> <a id="21891" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">,CERTS⦈</a> <a id="21899" class="Symbol">(</a><a id="21900" href="Ledger.Conway.Conformance.Equivalence.html#21812" class="Bound">deps₁&#39;</a> <a id="21907" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21913" href="Ledger.Conway.Conformance.Equivalence.html#21782" class="Bound">s&#39;</a><a id="21915" class="Symbol">)</a>
            <a id="21929" class="Symbol">→</a> <a id="21931" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="21934" href="Ledger.Conway.Conformance.Equivalence.html#21934" class="Bound">deps₂&#39;</a> <a id="21941" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="21943" href="Ledger.Conway.Conformance.Equivalence.html#21812" class="Bound">deps₁&#39;</a> <a id="21950" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="21953" href="Ledger.Conway.Conformance.Equivalence.html#21934" class="Bound">deps₂&#39;</a> <a id="21960" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="21962" href="Ledger.Conway.Conformance.Equivalence.html#21770" class="Bound">Γ</a> <a id="21964" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">C.⊢</a> <a id="21968" href="Ledger.Conway.Conformance.Equivalence.html#21806" class="Bound">deps₂</a> <a id="21974" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21980" href="Ledger.Conway.Conformance.Equivalence.html#21780" class="Bound">s</a> <a id="21982" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">⇀⦇</a> <a id="21985" href="Ledger.Conway.Conformance.Equivalence.html#21772" class="Bound">certs</a> <a id="21991" href="Ledger.Conway.Conformance.Certs.html#8042" class="Function Operator">,CERTS⦈</a> <a id="21999" class="Symbol">(</a><a id="22000" href="Ledger.Conway.Conformance.Equivalence.html#21934" class="Bound">deps₂&#39;</a> <a id="22007" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22013" href="Ledger.Conway.Conformance.Equivalence.html#21782" class="Bound">s&#39;</a><a id="22015" class="Symbol">)</a>
  <a id="22019" href="Ledger.Conway.Conformance.Equivalence.html#21755" class="Function">castCERTS</a> <a id="22029" href="Ledger.Conway.Conformance.Equivalence.html#22029" class="Bound">deps₁</a> <a id="22035" href="Ledger.Conway.Conformance.Equivalence.html#22035" class="Bound">deps₂</a> <a id="22041" href="Ledger.Conway.Conformance.Equivalence.html#22041" class="Bound">deps₁&#39;</a> <a id="22048" href="Ledger.Conway.Conformance.Equivalence.html#22048" class="Bound">eqd</a> <a id="22052" class="Symbol">(</a><a id="22053" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="22057" class="Symbol">(</a><a id="22058" href="Ledger.Conway.Conformance.Certs.html#7221" class="InductiveConstructor">C.CERT-base</a> <a id="22070" href="Ledger.Conway.Conformance.Equivalence.html#22070" class="Bound">h</a> <a id="22072" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22074" href="Ledger.Conway.Conformance.Equivalence.html#22074" class="Bound">step</a><a id="22078" class="Symbol">))</a> <a id="22081" class="Symbol">=</a>
    <a id="22087" class="Keyword">let</a> <a id="22091" href="Ledger.Conway.Conformance.Equivalence.html#22091" class="Bound">deps₂&#39;</a> <a id="22098" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22100" href="Ledger.Conway.Conformance.Equivalence.html#22100" class="Bound">eqd&#39;</a> <a id="22105" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22107" href="Ledger.Conway.Conformance.Equivalence.html#22107" class="Bound">step&#39;</a> <a id="22113" class="Symbol">=</a> <a id="22115" href="Ledger.Conway.Conformance.Equivalence.html#17782" class="Function">castCERTS&#39;</a> <a id="22126" href="Ledger.Conway.Conformance.Equivalence.html#22029" class="Bound">deps₁</a> <a id="22132" href="Ledger.Conway.Conformance.Equivalence.html#22035" class="Bound">deps₂</a> <a id="22138" href="Ledger.Conway.Conformance.Equivalence.html#22041" class="Bound">deps₁&#39;</a> <a id="22145" href="Ledger.Conway.Conformance.Equivalence.html#22048" class="Bound">eqd</a> <a id="22149" href="Ledger.Conway.Conformance.Equivalence.html#22074" class="Bound">step</a>
    <a id="22158" class="Keyword">in</a>  <a id="22162" href="Ledger.Conway.Conformance.Equivalence.html#22091" class="Bound">deps₂&#39;</a> <a id="22169" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22171" href="Ledger.Conway.Conformance.Equivalence.html#22100" class="Bound">eqd&#39;</a> <a id="22176" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22178" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="22182" class="Symbol">(</a><a id="22183" href="Ledger.Conway.Conformance.Certs.html#7221" class="InductiveConstructor">C.CERT-base</a> <a id="22195" href="Ledger.Conway.Conformance.Equivalence.html#22070" class="Bound">h</a> <a id="22197" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22199" href="Ledger.Conway.Conformance.Equivalence.html#22107" class="Bound">step&#39;</a><a id="22204" class="Symbol">)</a>

<a id="_⊢_⇀⦇_,GOVn⦈_"></a><a id="22207" href="Ledger.Conway.Conformance.Equivalence.html#22207" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22221" class="Symbol">:</a> <a id="22223" href="Ledger.Conway.Gov.html#1589" class="Record">L.GovEnv</a> <a id="22232" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22234" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="22236" class="Symbol">→</a> <a id="22238" href="Ledger.Conway.Gov.html#1397" class="Function">L.GovState</a> <a id="22249" class="Symbol">→</a> <a id="22251" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="22256" class="Symbol">(</a><a id="22257" href="Ledger.Conway.GovernanceActions.html#2393" class="Record">GovVote</a> <a id="22265" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="22267" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a><a id="22278" class="Symbol">)</a> <a id="22280" class="Symbol">→</a> <a id="22282" href="Ledger.Conway.Gov.html#1397" class="Function">L.GovState</a> <a id="22293" class="Symbol">→</a> <a id="22295" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="22300" href="Ledger.Conway.Conformance.Equivalence.html#22207" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22314" class="Symbol">=</a> <a id="22316" href="Interface.STS.html#811" class="Datatype Operator">_⊢_⇀⟦_⟧ᵢ*&#39;_</a> <a id="22328" class="Symbol">{</a><a id="22329" class="Argument">_⊢_⇀⟦_⟧ᵇ_</a> <a id="22339" class="Symbol">=</a> <a id="22341" href="Interface.STS.html#1257" class="Datatype">IdSTS</a><a id="22346" class="Symbol">}</a> <a id="22348" class="Symbol">{</a><a id="22349" class="Argument">_⊢_⇀⟦_⟧_</a> <a id="22358" class="Symbol">=</a> <a id="22360" href="Ledger.Conway.Gov.html#6850" class="Datatype Operator">L._⊢_⇀⦇_,GOV⦈_</a><a id="22374" class="Symbol">}</a>

<a id="22377" class="Keyword">opaque</a>
  <a id="castLEDGER"></a><a id="22386" href="Ledger.Conway.Conformance.Equivalence.html#22386" class="Function">castLEDGER</a> <a id="22397" class="Symbol">:</a> <a id="22399" class="Symbol">∀</a> <a id="22401" class="Symbol">{</a><a id="22402" href="Ledger.Conway.Conformance.Equivalence.html#22402" class="Bound">Γ</a> <a id="22404" href="Ledger.Conway.Conformance.Equivalence.html#22404" class="Bound">tx</a><a id="22406" class="Symbol">}</a> <a id="22408" class="Symbol">{</a><a id="22409" href="Ledger.Conway.Conformance.Equivalence.html#22409" class="Bound">s</a> <a id="22411" href="Ledger.Conway.Conformance.Equivalence.html#22411" class="Bound">s&#39;</a> <a id="22414" class="Symbol">:</a> <a id="22416" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a><a id="22424" class="Symbol">}</a> <a id="22426" href="Ledger.Conway.Conformance.Equivalence.html#22426" class="Bound">deps₁</a> <a id="22432" href="Ledger.Conway.Conformance.Equivalence.html#22432" class="Bound">deps₂</a> <a id="22438" href="Ledger.Conway.Conformance.Equivalence.html#22438" class="Bound">deps₁&#39;</a>
            <a id="22457" class="Symbol">→</a> <a id="22459" href="Ledger.Conway.Conformance.Equivalence.html#22426" class="Bound">deps₁</a> <a id="22465" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="22468" href="Ledger.Conway.Conformance.Equivalence.html#22432" class="Bound">deps₂</a>
            <a id="22486" class="Symbol">→</a> <a id="22488" href="Ledger.Conway.Conformance.Equivalence.html#22402" class="Bound">Γ</a> <a id="22490" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="22494" href="Ledger.Conway.Conformance.Equivalence.html#22426" class="Bound">deps₁</a> <a id="22500" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22506" href="Ledger.Conway.Conformance.Equivalence.html#22409" class="Bound">s</a> <a id="22508" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="22511" href="Ledger.Conway.Conformance.Equivalence.html#22404" class="Bound">tx</a> <a id="22514" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="22523" class="Symbol">(</a><a id="22524" href="Ledger.Conway.Conformance.Equivalence.html#22438" class="Bound">deps₁&#39;</a> <a id="22531" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22537" href="Ledger.Conway.Conformance.Equivalence.html#22411" class="Bound">s&#39;</a><a id="22539" class="Symbol">)</a>
            <a id="22553" class="Symbol">→</a> <a id="22555" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="22558" href="Ledger.Conway.Conformance.Equivalence.html#22558" class="Bound">deps₂&#39;</a> <a id="22565" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="22567" href="Ledger.Conway.Conformance.Equivalence.html#22438" class="Bound">deps₁&#39;</a> <a id="22574" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="22577" href="Ledger.Conway.Conformance.Equivalence.html#22558" class="Bound">deps₂&#39;</a> <a id="22584" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22586" href="Ledger.Conway.Conformance.Equivalence.html#22402" class="Bound">Γ</a> <a id="22588" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="22592" href="Ledger.Conway.Conformance.Equivalence.html#22432" class="Bound">deps₂</a> <a id="22598" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22604" href="Ledger.Conway.Conformance.Equivalence.html#22409" class="Bound">s</a> <a id="22606" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="22609" href="Ledger.Conway.Conformance.Equivalence.html#22404" class="Bound">tx</a> <a id="22612" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="22621" class="Symbol">(</a><a id="22622" href="Ledger.Conway.Conformance.Equivalence.html#22558" class="Bound">deps₂&#39;</a> <a id="22629" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22635" href="Ledger.Conway.Conformance.Equivalence.html#22411" class="Bound">s&#39;</a><a id="22637" class="Symbol">)</a>
  <a id="22641" href="Ledger.Conway.Conformance.Equivalence.html#22386" class="Function">castLEDGER</a> <a id="22652" class="Symbol">{</a><a id="22653" href="Ledger.Conway.Conformance.Equivalence.html#22653" class="Bound">Γ</a><a id="22654" class="Symbol">}</a> <a id="22656" class="Symbol">{</a><a id="22657" href="Ledger.Conway.Conformance.Equivalence.html#22657" class="Bound">tx</a><a id="22659" class="Symbol">}</a> <a id="22661" class="Symbol">{</a><a id="22662" href="Ledger.Conway.Conformance.Equivalence.html#22662" class="Bound">s</a><a id="22663" class="Symbol">}</a> <a id="22665" class="Symbol">{</a><a id="22666" href="Ledger.Conway.Conformance.Equivalence.html#22666" class="Bound">s&#39;</a><a id="22668" class="Symbol">}</a> <a id="22670" href="Ledger.Conway.Conformance.Equivalence.html#22670" class="Bound">deps₁</a> <a id="22676" href="Ledger.Conway.Conformance.Equivalence.html#22676" class="Bound">deps₂</a> <a id="22682" href="Ledger.Conway.Conformance.Equivalence.html#22682" class="Bound">deps₁&#39;</a> <a id="22689" href="Ledger.Conway.Conformance.Equivalence.html#22689" class="Bound">eqd</a> <a id="22693" class="Symbol">(</a><a id="22694" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22706" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22711" href="Ledger.Conway.Conformance.Equivalence.html#22711" class="Bound">utxo</a> <a id="22716" href="Ledger.Conway.Conformance.Equivalence.html#22716" class="Bound">certs</a> <a id="22722" href="Ledger.Conway.Conformance.Equivalence.html#22722" class="Bound">gov</a><a id="22725" class="Symbol">)</a> <a id="22727" class="Symbol">=</a>
    <a id="22733" class="Keyword">let</a> <a id="22737" href="Ledger.Conway.Conformance.Equivalence.html#22737" class="Bound">deps₂&#39;</a> <a id="22744" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22746" href="Ledger.Conway.Conformance.Equivalence.html#22746" class="Bound">eqd&#39;</a> <a id="22751" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22753" href="Ledger.Conway.Conformance.Equivalence.html#22753" class="Bound">certs&#39;</a> <a id="22760" class="Symbol">=</a> <a id="22762" href="Ledger.Conway.Conformance.Equivalence.html#21755" class="Function">castCERTS</a> <a id="22772" href="Ledger.Conway.Conformance.Equivalence.html#22670" class="Bound">deps₁</a> <a id="22778" href="Ledger.Conway.Conformance.Equivalence.html#22676" class="Bound">deps₂</a> <a id="22784" href="Ledger.Conway.Conformance.Equivalence.html#22682" class="Bound">deps₁&#39;</a> <a id="22791" href="Ledger.Conway.Conformance.Equivalence.html#22689" class="Bound">eqd</a> <a id="22795" href="Ledger.Conway.Conformance.Equivalence.html#22716" class="Bound">certs</a>
    <a id="22805" class="Keyword">in</a>  <a id="22809" href="Ledger.Conway.Conformance.Equivalence.html#22737" class="Bound">deps₂&#39;</a> <a id="22816" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22818" href="Ledger.Conway.Conformance.Equivalence.html#22746" class="Bound">eqd&#39;</a> <a id="22823" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22825" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22837" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22842" href="Ledger.Conway.Conformance.Equivalence.html#22711" class="Bound">utxo</a> <a id="22847" href="Ledger.Conway.Conformance.Equivalence.html#22753" class="Bound">certs&#39;</a> <a id="22854" href="Ledger.Conway.Conformance.Equivalence.html#22722" class="Bound">gov</a>
  <a id="22860" href="Ledger.Conway.Conformance.Equivalence.html#22386" class="Function">castLEDGER</a> <a id="22871" href="Ledger.Conway.Conformance.Equivalence.html#22871" class="Bound">deps₁</a> <a id="22877" href="Ledger.Conway.Conformance.Equivalence.html#22877" class="Bound">deps₂</a> <a id="22883" href="Ledger.Conway.Conformance.Equivalence.html#22883" class="Bound">deps₁&#39;</a> <a id="22890" href="Ledger.Conway.Conformance.Equivalence.html#22890" class="Bound">eqd</a> <a id="22894" class="Symbol">(</a><a id="22895" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22907" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22912" href="Ledger.Conway.Conformance.Equivalence.html#22912" class="Bound">utxo</a><a id="22916" class="Symbol">)</a> <a id="22918" class="Symbol">=</a> <a id="22920" class="Symbol">_</a> <a id="22922" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22924" href="Ledger.Conway.Conformance.Equivalence.html#22890" class="Bound">eqd</a> <a id="22928" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22930" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22942" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22947" href="Ledger.Conway.Conformance.Equivalence.html#22912" class="Bound">utxo</a>

<a id="22953" class="Comment">---------------------------------------------------------------------------</a>
<a id="23029" class="Comment">-- The main result</a>
<a id="23048" class="Comment">---------------------------------------------------------------------------</a>

<a id="23125" class="Keyword">open</a> <a id="23130" class="Keyword">import</a> <a id="23137" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html" class="Module">Ledger.Conway.Conformance.Equivalence.Bisimilarity</a>

<a id="23189" class="Comment">-- An LState sˡ from the Spec and an LState sᶜ from Conformance are</a>
<a id="23257" class="Comment">-- bisimular iff</a>
<a id="23274" class="Comment">--  ∙ the deposits in the CertState of sᶜ are equal (as maps) to the</a>
<a id="23343" class="Comment">--    appropriate restrictions of the deposits in the UTxOState of sˡ</a>
<a id="23413" class="Comment">--  ∙ the only difference between sˡ and sᶜ are the extra deposits in</a>
<a id="23483" class="Comment">--    the CertState of sᶜ.</a>
<a id="_∼_"></a><a id="23510" href="Ledger.Conway.Conformance.Equivalence.html#23510" class="Function Operator">_∼_</a> <a id="23514" class="Symbol">:</a> <a id="23516" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a> <a id="23525" class="Symbol">→</a> <a id="23527" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a> <a id="23536" class="Symbol">→</a> <a id="23538" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="23543" href="Ledger.Conway.Conformance.Equivalence.html#23543" class="Bound">sˡ</a> <a id="23546" href="Ledger.Conway.Conformance.Equivalence.html#23510" class="Function Operator">∼</a> <a id="23548" href="Ledger.Conway.Conformance.Equivalence.html#23548" class="Bound">sᶜ</a> <a id="23551" class="Symbol">=</a> <a id="23553" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="23566" href="Ledger.Conway.Conformance.Equivalence.html#23543" class="Bound">sˡ</a> <a id="23569" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="23572" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="23586" class="Symbol">(</a><a id="23587" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="23606" href="Ledger.Conway.Conformance.Equivalence.html#23548" class="Bound">sᶜ</a><a id="23608" class="Symbol">)</a> <a id="23610" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="23612" href="Ledger.Conway.Conformance.Equivalence.html#23543" class="Bound">sˡ</a> <a id="23615" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="23617" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23622" href="Ledger.Conway.Conformance.Equivalence.html#23548" class="Bound">sᶜ</a>

<a id="23626" class="Comment">-- This gives us the main result: a bisimulation between the LEDGER</a>
<a id="23694" class="Comment">-- rules in Ledger and in Conformance.</a>
<a id="bisimilarityProof"></a><a id="23733" href="Ledger.Conway.Conformance.Equivalence.html#23733" class="Function">bisimilarityProof</a> <a id="23751" class="Symbol">:</a> <a id="23753" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#128" class="Record">Bisimilar</a> <a id="23763" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L._⊢_⇀⦇_,LEDGER⦈_</a> <a id="23781" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C._⊢_⇀⦇_,LEDGER⦈_</a>
<a id="23799" href="Ledger.Conway.Conformance.Equivalence.html#23733" class="Function">bisimilarityProof</a> <a id="23817" class="Symbol">.</a><a id="23818" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#259" class="Field Operator">Bisimilar._≈_</a> <a id="23832" class="Symbol">=</a> <a id="23834" href="Ledger.Conway.Conformance.Equivalence.html#23510" class="Function Operator">_∼_</a>
<a id="23838" href="Ledger.Conway.Conformance.Equivalence.html#23733" class="Function">bisimilarityProof</a> <a id="23856" class="Symbol">.</a><a id="23857" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#284" class="Field">Bisimilar.to</a> <a id="23870" class="Symbol">{</a><a id="23871" href="Ledger.Conway.Conformance.Equivalence.html#23871" class="Bound">Γ</a><a id="23872" class="Symbol">}</a> <a id="23874" class="Symbol">{</a><a id="23875" href="Ledger.Conway.Conformance.Equivalence.html#23875" class="Bound">tx</a><a id="23877" class="Symbol">}</a> <a id="23879" class="Symbol">{</a><a id="23880" href="Ledger.Conway.Conformance.Equivalence.html#23880" class="Bound">sˡ</a><a id="23882" class="Symbol">}</a> <a id="23884" class="Symbol">{</a><a id="23885" href="Ledger.Conway.Conformance.Equivalence.html#23885" class="Bound">sˡ&#39;</a><a id="23888" class="Symbol">}</a> <a id="23890" class="Symbol">{</a><a id="23891" href="Ledger.Conway.Conformance.Equivalence.html#23891" class="Bound">sᶜ</a><a id="23893" class="Symbol">}</a> <a id="23895" class="Symbol">(</a><a id="23896" href="Ledger.Conway.Conformance.Equivalence.html#23896" class="Bound">eq</a> <a id="23899" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23901" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="23905" class="Symbol">)</a> <a id="23907" href="Ledger.Conway.Conformance.Equivalence.html#23907" class="Bound">r</a> <a id="23909" class="Symbol">=</a>
  <a id="23913" class="Keyword">let</a> <a id="23917" href="Ledger.Conway.Conformance.Equivalence.html#23917" class="Bound">deps</a>  <a id="23923" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23925" href="Ledger.Conway.Conformance.Equivalence.html#23925" class="Bound">eqd</a>  <a id="23930" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23932" href="Ledger.Conway.Conformance.Equivalence.html#23932" class="Bound">r&#39;</a>  <a id="23936" class="Symbol">=</a> <a id="23938" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23943" href="Ledger.Conway.Conformance.Equivalence.html#23907" class="Bound">r</a>
      <a id="23951" href="Ledger.Conway.Conformance.Equivalence.html#23951" class="Bound">deps&#39;</a> <a id="23957" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23959" href="Ledger.Conway.Conformance.Equivalence.html#23959" class="Bound">eqd&#39;</a> <a id="23964" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23966" href="Ledger.Conway.Conformance.Equivalence.html#23966" class="Bound">r&#39;&#39;</a> <a id="23970" class="Symbol">=</a> <a id="23972" href="Ledger.Conway.Conformance.Equivalence.html#22386" class="Function">castLEDGER</a> <a id="23983" class="Symbol">(</a><a id="23984" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="23997" class="Symbol">(</a><a id="23998" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24003" href="Ledger.Conway.Conformance.Equivalence.html#23891" class="Bound">sᶜ</a><a id="24005" class="Symbol">))</a>
                                      <a id="24046" class="Symbol">(</a><a id="24047" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="24061" class="Symbol">(</a><a id="24062" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="24081" href="Ledger.Conway.Conformance.Equivalence.html#23891" class="Bound">sᶜ</a><a id="24083" class="Symbol">))</a>
                                      <a id="24124" href="Ledger.Conway.Conformance.Equivalence.html#23917" class="Bound">deps</a>
                                      <a id="24167" href="Ledger.Conway.Conformance.Equivalence.html#23896" class="Bound">eq</a>
                                      <a id="24208" href="Ledger.Conway.Conformance.Equivalence.html#23932" class="Bound">r&#39;</a>
      <a id="24217" href="Ledger.Conway.Conformance.Equivalence.html#24217" class="Bound">eqd&#39;&#39;</a> <a id="24223" class="Symbol">:</a> <a id="24225" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24238" href="Ledger.Conway.Conformance.Equivalence.html#23885" class="Bound">sˡ&#39;</a> <a id="24242" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="24245" href="Ledger.Conway.Conformance.Equivalence.html#23951" class="Bound">deps&#39;</a>
      <a id="24257" href="Ledger.Conway.Conformance.Equivalence.html#24217" class="Bound">eqd&#39;&#39;</a> <a id="24263" class="Symbol">=</a> <a id="24265" href="Ledger.Conway.Conformance.Equivalence.html#13897" class="Function">≡ᵈ-trans</a> <a id="24274" class="Symbol">{</a><a id="24275" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24288" href="Ledger.Conway.Conformance.Equivalence.html#23885" class="Bound">sˡ&#39;</a><a id="24291" class="Symbol">}</a> <a id="24293" class="Symbol">{</a><a id="24294" href="Ledger.Conway.Conformance.Equivalence.html#23917" class="Bound">deps</a><a id="24298" class="Symbol">}</a> <a id="24300" class="Symbol">{</a><a id="24301" href="Ledger.Conway.Conformance.Equivalence.html#23951" class="Bound">deps&#39;</a><a id="24306" class="Symbol">}</a> <a id="24308" class="Symbol">(</a><a id="24309" href="Ledger.Conway.Conformance.Equivalence.html#13880" class="Function">≡ᵈ-sym</a> <a id="24316" class="Symbol">{</a><a id="24317" href="Ledger.Conway.Conformance.Equivalence.html#23917" class="Bound">deps</a><a id="24321" class="Symbol">}</a> <a id="24323" class="Symbol">{</a><a id="24324" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24337" href="Ledger.Conway.Conformance.Equivalence.html#23885" class="Bound">sˡ&#39;</a><a id="24340" class="Symbol">}</a> <a id="24342" href="Ledger.Conway.Conformance.Equivalence.html#23925" class="Bound">eqd</a><a id="24345" class="Symbol">)</a> <a id="24347" href="Ledger.Conway.Conformance.Equivalence.html#23959" class="Bound">eqd&#39;</a>
  <a id="24354" class="Keyword">in</a>
  <a id="24359" class="Symbol">(</a><a id="24360" href="Ledger.Conway.Conformance.Equivalence.html#23951" class="Bound">deps&#39;</a> <a id="24366" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24372" href="Ledger.Conway.Conformance.Equivalence.html#23885" class="Bound">sˡ&#39;</a><a id="24375" class="Symbol">)</a> <a id="24377" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24379" class="Symbol">(</a><a id="24380" href="Ledger.Conway.Conformance.Equivalence.html#24217" class="Bound">eqd&#39;&#39;</a> <a id="24386" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24388" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24392" class="Symbol">)</a> <a id="24394" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24396" href="Ledger.Conway.Conformance.Equivalence.html#23966" class="Bound">r&#39;&#39;</a>
<a id="24400" href="Ledger.Conway.Conformance.Equivalence.html#23733" class="Function">bisimilarityProof</a> <a id="24418" class="Symbol">.</a><a id="24419" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#419" class="Field">Bisimilar.from</a> <a id="24434" class="Symbol">{</a><a id="24435" href="Ledger.Conway.Conformance.Equivalence.html#24435" class="Bound">Γ</a><a id="24436" class="Symbol">}</a> <a id="24438" class="Symbol">{</a><a id="24439" href="Ledger.Conway.Conformance.Equivalence.html#24439" class="Bound">tx</a><a id="24441" class="Symbol">}</a> <a id="24443" class="Symbol">{</a><a id="24444" href="Ledger.Conway.Conformance.Equivalence.html#24444" class="Bound">sˡ</a><a id="24446" class="Symbol">}</a> <a id="24448" class="Symbol">{</a><a id="24449" href="Ledger.Conway.Conformance.Equivalence.html#24449" class="Bound">sᶜ</a><a id="24451" class="Symbol">}</a> <a id="24453" class="Symbol">{</a><a id="24454" href="Ledger.Conway.Conformance.Equivalence.html#24454" class="Bound">sᶜ&#39;</a><a id="24457" class="Symbol">}</a> <a id="24459" class="Symbol">(</a><a id="24460" href="Ledger.Conway.Conformance.Equivalence.html#24460" class="Bound">eqd</a> <a id="24464" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24466" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24470" class="Symbol">)</a> <a id="24472" href="Ledger.Conway.Conformance.Equivalence.html#24472" class="Bound">r</a> <a id="24474" class="Symbol">=</a>
  <a id="24478" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24483" href="Ledger.Conway.Conformance.Equivalence.html#24454" class="Bound">sᶜ&#39;</a> <a id="24487" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24489" class="Symbol">(</a><a id="24490" href="Ledger.Conway.Conformance.Equivalence.html#24613" class="Function">wf&#39;</a> <a id="24494" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24496" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24500" class="Symbol">)</a> <a id="24502" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24504" href="Ledger.Conway.Conformance.Equivalence.html#24527" class="Function">wf</a> <a id="24507" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24513" href="Ledger.Conway.Conformance.Equivalence.html#24472" class="Bound">r</a>
  <a id="24517" class="Keyword">where</a>
    <a id="24527" href="Ledger.Conway.Conformance.Equivalence.html#24527" class="Function">wf</a>  <a id="24531" class="Symbol">=</a> <a id="24533" href="Ledger.Conway.Conformance.Equivalence.html#13880" class="Function">≡ᵈ-sym</a> <a id="24540" class="Symbol">{</a><a id="24541" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24554" class="Symbol">(</a><a id="24555" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24560" href="Ledger.Conway.Conformance.Equivalence.html#24449" class="Bound">sᶜ</a><a id="24562" class="Symbol">)}</a> <a id="24565" class="Symbol">{</a><a id="24566" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="24580" class="Symbol">(</a><a id="24581" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="24600" href="Ledger.Conway.Conformance.Equivalence.html#24449" class="Bound">sᶜ</a><a id="24602" class="Symbol">)}</a> <a id="24605" href="Ledger.Conway.Conformance.Equivalence.html#24460" class="Bound">eqd</a>
    <a id="24613" href="Ledger.Conway.Conformance.Equivalence.html#24613" class="Function">wf&#39;</a> <a id="24617" class="Symbol">=</a> <a id="24619" href="Ledger.Conway.Conformance.Equivalence.html#13880" class="Function">≡ᵈ-sym</a> <a id="24626" class="Symbol">{</a><a id="24627" href="Ledger.Conway.Conformance.Equivalence.html#8496" class="Function">certDepositsC</a> <a id="24641" class="Symbol">(</a><a id="24642" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="24661" href="Ledger.Conway.Conformance.Equivalence.html#24454" class="Bound">sᶜ&#39;</a><a id="24664" class="Symbol">)}</a> <a id="24667" class="Symbol">{</a><a id="24668" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24681" class="Symbol">(</a><a id="24682" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24687" href="Ledger.Conway.Conformance.Equivalence.html#24454" class="Bound">sᶜ&#39;</a><a id="24690" class="Symbol">)}</a> <a id="24693" class="Symbol">(</a><a id="24694" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Function">lemWellformed</a> <a id="24708" href="Ledger.Conway.Conformance.Equivalence.html#24527" class="Function">wf</a> <a id="24711" href="Ledger.Conway.Conformance.Equivalence.html#24472" class="Bound">r</a><a id="24712" class="Symbol">)</a>
    <a id="24718" href="Ledger.Conway.Conformance.Equivalence.html#24718" class="Function">r&#39;</a> <a id="24721" class="Symbol">=</a> <a id="24723" href="Ledger.Conway.Conformance.Equivalence.html#24527" class="Function">wf</a> <a id="24726" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24732" href="Ledger.Conway.Conformance.Equivalence.html#24472" class="Bound">r</a>
</pre></body></html>