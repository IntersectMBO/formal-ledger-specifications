<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Equivalence</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Comment">-- Proof that the rules under Ledger.Conway.Conformance are equivalent</a>
<a id="95" class="Comment">-- to the rules under Ledger.</a>

<a id="126" class="Keyword">open</a> <a id="131" class="Keyword">import</a> <a id="138" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>
<a id="188" class="Keyword">open</a> <a id="193" class="Keyword">import</a> <a id="200" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a> <a id="226" class="Keyword">using</a> <a id="232" class="Symbol">(</a><a id="233" href="Ledger.Conway.Transaction.html#872" class="Record">TransactionStructure</a><a id="253" class="Symbol">)</a>

<a id="256" class="Keyword">open</a> <a id="261" class="Keyword">import</a> <a id="268" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="278" class="Keyword">using</a> <a id="284" class="Symbol">(</a><a id="285" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="286" class="Symbol">)</a>
<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Data.Product.html" class="Module">Data.Product</a> <a id="313" class="Keyword">using</a> <a id="319" class="Symbol">(</a><a id="320" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="323" class="Symbol">;</a> <a id="325" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="328" class="Symbol">)</a> <a id="330" class="Keyword">renaming</a> <a id="339" class="Symbol">(</a><a id="340" href="Data.Product.Base.html#2173" class="Function">map</a> <a id="344" class="Symbol">to</a> <a id="347" class="Function">⟨_,_⟩</a><a id="352" class="Symbol">)</a>
<a id="354" class="Keyword">open</a> <a id="359" class="Keyword">import</a> <a id="366" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="383" class="Keyword">using</a> <a id="389" class="Symbol">(</a><a id="390" href="Function.Bundles.html#12400" class="Function Operator">_⇔_</a><a id="393" class="Symbol">;</a> <a id="395" href="Function.Bundles.html#13499" class="Function">mk⇔</a><a id="398" class="Symbol">;</a> <a id="400" href="Function.Bundles.html#4752" class="Record">Equivalence</a><a id="411" class="Symbol">)</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="491" class="Keyword">using</a> <a id="497" class="Symbol">(</a><a id="498" href="Relation.Binary.Structures.html#1550" class="Record">IsEquivalence</a><a id="511" class="Symbol">)</a>

<a id="514" class="Keyword">open</a> <a id="519" class="Keyword">import</a> <a id="526" href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="Module">Ledger.Conway.Conformance.Equivalence.Convert</a>

<a id="573" class="Keyword">module</a> <a id="580" href="Ledger.Conway.Conformance.Equivalence.html" class="Module">Ledger.Conway.Conformance.Equivalence</a>
  <a id="620" class="Symbol">(</a><a id="621" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="625" class="Symbol">:</a> <a id="627" class="Symbol">_)</a> <a id="630" class="Symbol">(</a><a id="631" class="Keyword">open</a> <a id="636" href="Ledger.Conway.Transaction.html#872" class="Module">TransactionStructure</a> <a id="657" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a><a id="660" class="Symbol">)</a>
  <a id="664" class="Symbol">(</a><a id="665" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="669" class="Symbol">:</a> <a id="671" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="689" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a><a id="692" class="Symbol">)</a> <a id="694" class="Symbol">(</a><a id="695" class="Keyword">open</a> <a id="700" href="Ledger.Conway.Abstract.html#599" class="Module">AbstractFunctions</a> <a id="718" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a><a id="721" class="Symbol">)</a>
  <a id="725" class="Keyword">where</a>

<a id="732" class="Keyword">module</a> <a id="L"></a><a id="739" href="Ledger.Conway.Conformance.Equivalence.html#739" class="Module">L</a> <a id="741" class="Keyword">where</a>
  <a id="749" class="Keyword">open</a> <a id="754" class="Keyword">import</a> <a id="761" href="Ledger.Conway.Ledger.html" class="Module">Ledger.Conway.Ledger</a> <a id="782" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="786" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="790" class="Keyword">public</a>
  <a id="799" class="Keyword">open</a> <a id="804" class="Keyword">import</a> <a id="811" href="Ledger.Conway.Utxo.html" class="Module">Ledger.Conway.Utxo</a> <a id="830" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="834" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="838" class="Keyword">public</a>
  <a id="847" class="Keyword">open</a> <a id="852" class="Keyword">import</a> <a id="859" href="Ledger.Conway.Utxow.html" class="Module">Ledger.Conway.Utxow</a> <a id="879" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="883" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="887" class="Keyword">public</a>
  <a id="896" class="Keyword">open</a> <a id="901" class="Keyword">import</a> <a id="908" href="Ledger.Conway.Gov.html" class="Module">Ledger.Conway.Gov</a> <a id="926" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="930" class="Keyword">public</a>
  <a id="939" class="Keyword">open</a> <a id="944" class="Keyword">import</a> <a id="951" href="Ledger.Conway.Certs.html" class="Module">Ledger.Conway.Certs</a> <a id="971" href="Ledger.Conway.Transaction.html#1852" class="Function">govStructure</a> <a id="984" class="Keyword">public</a>

<a id="992" class="Keyword">module</a> <a id="C"></a><a id="999" href="Ledger.Conway.Conformance.Equivalence.html#999" class="Module">C</a> <a id="1001" class="Keyword">where</a>
  <a id="1009" class="Keyword">open</a> <a id="1014" class="Keyword">import</a> <a id="1021" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="1054" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1058" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="1062" class="Keyword">public</a>
  <a id="1071" class="Keyword">open</a> <a id="1076" class="Keyword">import</a> <a id="1083" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="1114" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1118" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="1122" class="Keyword">public</a>
  <a id="1131" class="Keyword">open</a> <a id="1136" class="Keyword">import</a> <a id="1143" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="1175" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1179" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a> <a id="1183" class="Keyword">public</a>
  <a id="1192" class="Keyword">open</a> <a id="1197" class="Keyword">import</a> <a id="1204" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="1236" href="Ledger.Conway.Transaction.html#1852" class="Function">govStructure</a> <a id="1249" class="Keyword">public</a>

<a id="1257" class="Keyword">open</a> <a id="1262" class="Keyword">import</a> <a id="1269" href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="Module">Ledger.Conway.Conformance.Equivalence.Certs</a> <a id="1313" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1317" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a>
<a id="1321" class="Keyword">open</a> <a id="1326" class="Keyword">import</a> <a id="1333" href="Ledger.Conway.Conformance.Equivalence.Utxo.html" class="Module">Ledger.Conway.Conformance.Equivalence.Utxo</a> <a id="1376" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1380" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a>
<a id="1384" class="Keyword">open</a> <a id="1389" class="Keyword">import</a> <a id="1396" href="Ledger.Conway.Conformance.Equivalence.Deposits.html" class="Module">Ledger.Conway.Conformance.Equivalence.Deposits</a> <a id="1443" href="Ledger.Conway.Conformance.Equivalence.html#621" class="Bound">txs</a> <a id="1447" href="Ledger.Conway.Conformance.Equivalence.html#665" class="Bound">abs</a>

<a id="1452" class="Keyword">open</a> <a id="1457" href="Ledger.Conway.Transaction.html#4227" class="Module">Tx</a>
<a id="1460" class="Keyword">open</a> <a id="1465" class="Keyword">import</a> <a id="1472" href="Axiom.Set.Properties.html" class="Module">Axiom.Set.Properties</a> <a id="1493" href="Axiom.Set.html#10669" class="Function">th</a> <a id="1496" class="Keyword">using</a> <a id="1502" class="Symbol">(</a><a id="1503" href="Axiom.Set.Properties.html#3967" class="Function">≡ᵉ-Setoid</a><a id="1512" class="Symbol">)</a>

<a id="1515" class="Comment">-- Invalid transactions don&#39;t change the deposits</a>
<a id="lemInvalidDepositsL"></a><a id="1565" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="1585" class="Symbol">:</a> <a id="1587" class="Symbol">∀</a> <a id="1589" class="Symbol">{</a><a id="1590" href="Ledger.Conway.Conformance.Equivalence.html#1590" class="Bound">Γ</a> <a id="1592" href="Ledger.Conway.Conformance.Equivalence.html#1592" class="Bound">utxoSt</a> <a id="1599" href="Ledger.Conway.Conformance.Equivalence.html#1599" class="Bound">utxoSt&#39;</a> <a id="1607" href="Ledger.Conway.Conformance.Equivalence.html#1607" class="Bound">tx</a><a id="1609" class="Symbol">}</a>
                    <a id="1631" class="Symbol">→</a> <a id="1633" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="1641" href="Ledger.Conway.Conformance.Equivalence.html#1607" class="Bound">tx</a> <a id="1644" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1646" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="1672" class="Symbol">→</a> <a id="1674" href="Ledger.Conway.Conformance.Equivalence.html#1590" class="Bound">Γ</a> <a id="1676" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">L.⊢</a> <a id="1680" href="Ledger.Conway.Conformance.Equivalence.html#1592" class="Bound">utxoSt</a> <a id="1687" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">⇀⦇</a> <a id="1690" href="Ledger.Conway.Conformance.Equivalence.html#1607" class="Bound">tx</a> <a id="1693" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">,UTXOW⦈</a> <a id="1701" href="Ledger.Conway.Conformance.Equivalence.html#1599" class="Bound">utxoSt&#39;</a>
                    <a id="1729" class="Symbol">→</a> <a id="1731" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="1752" href="Ledger.Conway.Conformance.Equivalence.html#1592" class="Bound">utxoSt</a> <a id="1759" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1761" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="1782" href="Ledger.Conway.Conformance.Equivalence.html#1599" class="Bound">utxoSt&#39;</a>
<a id="1790" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="1810" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1815" class="Symbol">(</a><a id="1816" href="Ledger.Conway.Utxow.html#4798" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
                          <a id="1855" class="Symbol">(</a><a id="1856" href="Ledger.Conway.Utxo.html#13853" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="1874" class="Symbol">_</a> <a id="1876" class="Symbol">_</a> <a id="1878" class="Symbol">_</a> <a id="1880" class="Symbol">_</a> <a id="1882" class="Symbol">_</a> <a id="1884" class="Symbol">_</a> <a id="1886" class="Symbol">_</a> <a id="1888" class="Symbol">_</a> <a id="1890" class="Symbol">_</a> <a id="1892" class="Symbol">_</a> <a id="1894" class="Symbol">_</a> <a id="1896" class="Symbol">_</a> <a id="1898" class="Symbol">_</a> <a id="1900" class="Symbol">_</a> <a id="1902" class="Symbol">_</a> <a id="1904" class="Symbol">_</a> <a id="1906" class="Symbol">_</a> <a id="1908" class="Symbol">_</a> <a id="1910" class="Symbol">_</a> <a id="1912" class="Symbol">_</a>
                            <a id="1942" class="Symbol">(</a><a id="1943" href="Ledger.Conway.Utxo.html#11879" class="InductiveConstructor">L.Scripts-No</a> <a id="1956" class="Symbol">_)))</a> <a id="1961" class="Symbol">=</a> <a id="1963" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemInvalidDepositsC"></a><a id="1969" href="Ledger.Conway.Conformance.Equivalence.html#1969" class="Function">lemInvalidDepositsC</a> <a id="1989" class="Symbol">:</a> <a id="1991" class="Symbol">∀</a> <a id="1993" class="Symbol">{</a><a id="1994" href="Ledger.Conway.Conformance.Equivalence.html#1994" class="Bound">Γ</a> <a id="1996" href="Ledger.Conway.Conformance.Equivalence.html#1996" class="Bound">utxoSt</a> <a id="2003" href="Ledger.Conway.Conformance.Equivalence.html#2003" class="Bound">utxoSt&#39;</a> <a id="2011" href="Ledger.Conway.Conformance.Equivalence.html#2011" class="Bound">tx</a><a id="2013" class="Symbol">}</a>
                    <a id="2035" class="Symbol">→</a> <a id="2037" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="2045" href="Ledger.Conway.Conformance.Equivalence.html#2011" class="Bound">tx</a> <a id="2048" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2050" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="2076" class="Symbol">→</a> <a id="2078" class="Symbol">(</a><a id="2079" href="Ledger.Conway.Conformance.Equivalence.html#2079" class="Bound">h</a> <a id="2081" class="Symbol">:</a> <a id="2083" href="Ledger.Conway.Conformance.Equivalence.html#1994" class="Bound">Γ</a> <a id="2085" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">C.⊢</a> <a id="2089" href="Ledger.Conway.Conformance.Equivalence.html#1996" class="Bound">utxoSt</a> <a id="2096" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">⇀⦇</a> <a id="2099" href="Ledger.Conway.Conformance.Equivalence.html#2011" class="Bound">tx</a> <a id="2102" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">,UTXOW⦈</a> <a id="2110" href="Ledger.Conway.Conformance.Equivalence.html#2003" class="Bound">utxoSt&#39;</a><a id="2117" class="Symbol">)</a>
                    <a id="2139" class="Symbol">→</a> <a id="2141" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2005" class="Function">utxowDeposits</a> <a id="2155" href="Ledger.Conway.Conformance.Equivalence.html#2079" class="Bound">h</a> <a id="2157" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2159" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="2180" href="Ledger.Conway.Conformance.Equivalence.html#2003" class="Bound">utxoSt&#39;</a>
<a id="2188" href="Ledger.Conway.Conformance.Equivalence.html#1969" class="Function">lemInvalidDepositsC</a> <a id="2208" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2213" class="Symbol">(</a><a id="2214" href="Ledger.Conway.Conformance.Utxow.html#2445" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
                          <a id="2253" class="Symbol">(</a><a id="2254" href="Ledger.Conway.Conformance.Utxo.html#3860" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2272" class="Symbol">_</a> <a id="2274" class="Symbol">_</a> <a id="2276" class="Symbol">_</a> <a id="2278" class="Symbol">_</a> <a id="2280" class="Symbol">_</a> <a id="2282" class="Symbol">_</a> <a id="2284" class="Symbol">_</a> <a id="2286" class="Symbol">_</a> <a id="2288" class="Symbol">_</a> <a id="2290" class="Symbol">_</a> <a id="2292" class="Symbol">_</a> <a id="2294" class="Symbol">_</a> <a id="2296" class="Symbol">_</a> <a id="2298" class="Symbol">_</a> <a id="2300" class="Symbol">_</a> <a id="2302" class="Symbol">_</a> <a id="2304" class="Symbol">_</a> <a id="2306" class="Symbol">_</a> <a id="2308" class="Symbol">_</a> <a id="2310" class="Symbol">_</a>
                            <a id="2340" class="Symbol">(</a><a id="2341" href="Ledger.Conway.Conformance.Utxo.html#1756" class="InductiveConstructor">C.Scripts-No</a> <a id="2354" class="Symbol">_)))</a> <a id="2359" class="Symbol">=</a> <a id="2361" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="2367" class="Comment">-- The UTXOW rule doesn&#39;t change the deposits in Conformance</a>
<a id="lemDepositsC"></a><a id="2428" href="Ledger.Conway.Conformance.Equivalence.html#2428" class="Function">lemDepositsC</a> <a id="2441" class="Symbol">:</a> <a id="2443" class="Symbol">∀</a> <a id="2445" class="Symbol">{</a><a id="2446" href="Ledger.Conway.Conformance.Equivalence.html#2446" class="Bound">Γ</a> <a id="2448" href="Ledger.Conway.Conformance.Equivalence.html#2448" class="Bound">utxoSt</a> <a id="2455" href="Ledger.Conway.Conformance.Equivalence.html#2455" class="Bound">utxoSt&#39;</a> <a id="2463" href="Ledger.Conway.Conformance.Equivalence.html#2463" class="Bound">tx</a><a id="2465" class="Symbol">}</a>
             <a id="2480" class="Symbol">→</a> <a id="2482" class="Symbol">(</a><a id="2483" href="Ledger.Conway.Conformance.Equivalence.html#2483" class="Bound">h</a> <a id="2485" class="Symbol">:</a> <a id="2487" href="Ledger.Conway.Conformance.Equivalence.html#2446" class="Bound">Γ</a> <a id="2489" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">C.⊢</a> <a id="2493" href="Ledger.Conway.Conformance.Equivalence.html#2448" class="Bound">utxoSt</a> <a id="2500" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">⇀⦇</a> <a id="2503" href="Ledger.Conway.Conformance.Equivalence.html#2463" class="Bound">tx</a> <a id="2506" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">,UTXOW⦈</a> <a id="2514" href="Ledger.Conway.Conformance.Equivalence.html#2455" class="Bound">utxoSt&#39;</a><a id="2521" class="Symbol">)</a>
             <a id="2536" class="Symbol">→</a> <a id="2538" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="2559" href="Ledger.Conway.Conformance.Equivalence.html#2448" class="Bound">utxoSt</a> <a id="2566" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2568" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="2589" href="Ledger.Conway.Conformance.Equivalence.html#2455" class="Bound">utxoSt&#39;</a>
<a id="2597" href="Ledger.Conway.Conformance.Equivalence.html#2428" class="Function">lemDepositsC</a> <a id="2610" class="Symbol">(</a><a id="2611" href="Ledger.Conway.Conformance.Utxow.html#2445" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
               <a id="2639" class="Symbol">(</a><a id="2640" href="Ledger.Conway.Conformance.Utxo.html#3860" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2658" class="Symbol">_</a> <a id="2660" class="Symbol">_</a> <a id="2662" class="Symbol">_</a> <a id="2664" class="Symbol">_</a> <a id="2666" class="Symbol">_</a> <a id="2668" class="Symbol">_</a> <a id="2670" class="Symbol">_</a> <a id="2672" class="Symbol">_</a> <a id="2674" class="Symbol">_</a> <a id="2676" class="Symbol">_</a> <a id="2678" class="Symbol">_</a> <a id="2680" class="Symbol">_</a> <a id="2682" class="Symbol">_</a> <a id="2684" class="Symbol">_</a> <a id="2686" class="Symbol">_</a> <a id="2688" class="Symbol">_</a> <a id="2690" class="Symbol">_</a> <a id="2692" class="Symbol">_</a> <a id="2694" class="Symbol">_</a> <a id="2696" class="Symbol">_</a>
                 <a id="2715" class="Symbol">(</a><a id="2716" href="Ledger.Conway.Conformance.Utxo.html#1161" class="InductiveConstructor">C.Scripts-Yes</a> <a id="2730" class="Symbol">_)))</a> <a id="2735" class="Symbol">=</a> <a id="2737" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="2742" href="Ledger.Conway.Conformance.Equivalence.html#2428" class="Function">lemDepositsC</a> <a id="2755" class="Symbol">(</a><a id="2756" href="Ledger.Conway.Conformance.Utxow.html#2445" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
               <a id="2784" class="Symbol">(</a><a id="2785" href="Ledger.Conway.Conformance.Utxo.html#3860" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2803" class="Symbol">_</a> <a id="2805" class="Symbol">_</a> <a id="2807" class="Symbol">_</a> <a id="2809" class="Symbol">_</a> <a id="2811" class="Symbol">_</a> <a id="2813" class="Symbol">_</a> <a id="2815" class="Symbol">_</a> <a id="2817" class="Symbol">_</a> <a id="2819" class="Symbol">_</a> <a id="2821" class="Symbol">_</a> <a id="2823" class="Symbol">_</a> <a id="2825" class="Symbol">_</a> <a id="2827" class="Symbol">_</a> <a id="2829" class="Symbol">_</a> <a id="2831" class="Symbol">_</a> <a id="2833" class="Symbol">_</a> <a id="2835" class="Symbol">_</a> <a id="2837" class="Symbol">_</a> <a id="2839" class="Symbol">_</a> <a id="2841" class="Symbol">_</a>
                 <a id="2860" class="Symbol">(</a><a id="2861" href="Ledger.Conway.Conformance.Utxo.html#1756" class="InductiveConstructor">C.Scripts-No</a> <a id="2874" class="Symbol">_)))</a> <a id="2879" class="Symbol">=</a> <a id="2881" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemUpdateDeposits"></a><a id="2887" href="Ledger.Conway.Conformance.Equivalence.html#2887" class="Function">lemUpdateDeposits</a> <a id="2905" class="Symbol">:</a> <a id="2907" class="Symbol">∀</a> <a id="2909" class="Symbol">{</a><a id="2910" href="Ledger.Conway.Conformance.Equivalence.html#2910" class="Bound">Γ</a> <a id="2912" href="Ledger.Conway.Conformance.Equivalence.html#2912" class="Bound">s</a> <a id="2914" href="Ledger.Conway.Conformance.Equivalence.html#2914" class="Bound">tx</a> <a id="2917" href="Ledger.Conway.Conformance.Equivalence.html#2917" class="Bound">s&#39;</a><a id="2919" class="Symbol">}</a> <a id="2921" class="Symbol">(</a><a id="2922" class="Keyword">open</a> <a id="2927" href="Ledger.Conway.Utxo.html#1038" class="Module">L.UTxOEnv</a> <a id="2937" href="Ledger.Conway.Conformance.Equivalence.html#2910" class="Bound">Γ</a><a id="2938" class="Symbol">)</a>
                  <a id="2958" class="Symbol">→</a> <a id="2960" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="2968" href="Ledger.Conway.Conformance.Equivalence.html#2914" class="Bound">tx</a> <a id="2971" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2973" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="2996" class="Symbol">→</a> <a id="2998" href="Ledger.Conway.Conformance.Equivalence.html#2910" class="Bound">Γ</a> <a id="3000" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">L.⊢</a> <a id="3004" href="Ledger.Conway.Conformance.Equivalence.html#2912" class="Bound">s</a> <a id="3006" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">⇀⦇</a> <a id="3009" href="Ledger.Conway.Conformance.Equivalence.html#2914" class="Bound">tx</a> <a id="3012" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">,UTXOW⦈</a> <a id="3020" href="Ledger.Conway.Conformance.Equivalence.html#2917" class="Bound">s&#39;</a>
                  <a id="3041" class="Symbol">→</a> <a id="3043" href="Ledger.Conway.Utxo.html#7988" class="Function">L.updateDeposits</a> <a id="3060" href="Ledger.Conway.Utxo.html#1092" class="Function">pparams</a> <a id="3068" class="Symbol">(</a><a id="3069" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="3074" href="Ledger.Conway.Conformance.Equivalence.html#2914" class="Bound">tx</a><a id="3076" class="Symbol">)</a> <a id="3078" class="Symbol">(</a><a id="3079" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="3100" href="Ledger.Conway.Conformance.Equivalence.html#2912" class="Bound">s</a><a id="3101" class="Symbol">)</a> <a id="3103" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3105" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="3126" href="Ledger.Conway.Conformance.Equivalence.html#2917" class="Bound">s&#39;</a>
<a id="3129" href="Ledger.Conway.Conformance.Equivalence.html#2887" class="Function">lemUpdateDeposits</a> <a id="3147" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3154" class="Symbol">(</a><a id="3155" href="Ledger.Conway.Utxow.html#4798" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
    <a id="3172" class="Symbol">(</a><a id="3173" href="Ledger.Conway.Utxo.html#13853" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3191" class="Symbol">_</a> <a id="3193" class="Symbol">_</a> <a id="3195" class="Symbol">_</a> <a id="3197" class="Symbol">_</a> <a id="3199" class="Symbol">_</a> <a id="3201" class="Symbol">_</a> <a id="3203" class="Symbol">_</a> <a id="3205" class="Symbol">_</a> <a id="3207" class="Symbol">_</a> <a id="3209" class="Symbol">_</a> <a id="3211" class="Symbol">_</a> <a id="3213" class="Symbol">_</a> <a id="3215" class="Symbol">_</a> <a id="3217" class="Symbol">_</a> <a id="3219" class="Symbol">_</a> <a id="3221" class="Symbol">_</a> <a id="3223" class="Symbol">_</a>  <a id="3226" class="Symbol">_</a> <a id="3228" class="Symbol">_</a> <a id="3230" class="Symbol">_</a>
      <a id="3238" class="Symbol">(</a><a id="3239" href="Ledger.Conway.Utxo.html#11361" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3253" class="Symbol">_)))</a> <a id="3258" class="Symbol">=</a> <a id="3260" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="getValidCertDeposits"></a><a id="3266" href="Ledger.Conway.Conformance.Equivalence.html#3266" class="Function">getValidCertDeposits</a> <a id="3287" class="Symbol">:</a> <a id="3289" class="Symbol">∀</a> <a id="3291" class="Symbol">{</a><a id="3292" href="Ledger.Conway.Conformance.Equivalence.html#3292" class="Bound">Γ</a> <a id="3294" href="Ledger.Conway.Conformance.Equivalence.html#3294" class="Bound">s</a> <a id="3296" href="Ledger.Conway.Conformance.Equivalence.html#3296" class="Bound">tx</a> <a id="3299" href="Ledger.Conway.Conformance.Equivalence.html#3299" class="Bound">s&#39;</a><a id="3301" class="Symbol">}</a>
                     <a id="3324" class="Symbol">→</a> <a id="3326" class="Symbol">(</a><a id="3327" class="Keyword">let</a> <a id="3331" class="Keyword">open</a> <a id="3336" href="Ledger.Conway.Utxo.html#1038" class="Module">L.UTxOEnv</a> <a id="3346" href="Ledger.Conway.Conformance.Equivalence.html#3292" class="Bound">Γ</a> <a id="3348" class="Keyword">using</a> <a id="3354" class="Symbol">(</a><a id="3355" href="Ledger.Conway.Utxo.html#1092" class="Field">pparams</a><a id="3362" class="Symbol">)</a>
                            <a id="3392" class="Keyword">open</a> <a id="3397" href="Ledger.Conway.Utxo.html#1390" class="Module">L.UTxOState</a> <a id="3409" href="Ledger.Conway.Conformance.Equivalence.html#3294" class="Bound">s</a> <a id="3411" class="Keyword">using</a> <a id="3417" class="Symbol">(</a><a id="3418" href="Ledger.Conway.Utxo.html#1498" class="Field">deposits</a><a id="3426" class="Symbol">)</a>
                            <a id="3456" class="Keyword">open</a> <a id="3461" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="3468" class="Symbol">(</a><a id="3469" href="Ledger.Conway.Conformance.Equivalence.html#3296" class="Bound">tx</a> <a id="3472" class="Symbol">.</a><a id="3473" href="Ledger.Conway.Transaction.html#4259" class="Field">Tx.body</a><a id="3480" class="Symbol">)</a> <a id="3482" class="Keyword">using</a> <a id="3488" class="Symbol">(</a><a id="3489" href="Ledger.Conway.Transaction.html#2948" class="Field">txcerts</a><a id="3496" class="Symbol">))</a>
                     <a id="3520" class="Symbol">→</a> <a id="3522" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="3530" href="Ledger.Conway.Conformance.Equivalence.html#3296" class="Bound">tx</a> <a id="3533" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3535" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="3561" class="Symbol">→</a> <a id="3563" href="Ledger.Conway.Conformance.Equivalence.html#3292" class="Bound">Γ</a> <a id="3565" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">L.⊢</a> <a id="3569" href="Ledger.Conway.Conformance.Equivalence.html#3294" class="Bound">s</a> <a id="3571" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">⇀⦇</a> <a id="3574" href="Ledger.Conway.Conformance.Equivalence.html#3296" class="Bound">tx</a> <a id="3577" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">,UTXOW⦈</a> <a id="3585" href="Ledger.Conway.Conformance.Equivalence.html#3299" class="Bound">s&#39;</a>
                     <a id="3609" class="Symbol">→</a> <a id="3611" href="Ledger.Conway.Utxo.html#3336" class="Datatype">L.ValidCertDeposits</a> <a id="3631" href="Ledger.Conway.Utxo.html#1092" class="Function">pparams</a> <a id="3639" href="Ledger.Conway.Utxo.html#1498" class="Function">deposits</a> <a id="3648" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a>
<a id="3656" href="Ledger.Conway.Conformance.Equivalence.html#3266" class="Function">getValidCertDeposits</a> <a id="3677" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3684" class="Symbol">(</a><a id="3685" href="Ledger.Conway.Utxow.html#4798" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
    <a id="3702" class="Symbol">(</a><a id="3703" href="Ledger.Conway.Utxo.html#13853" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3721" class="Symbol">_</a> <a id="3723" class="Symbol">_</a> <a id="3725" class="Symbol">_</a> <a id="3727" class="Symbol">_</a> <a id="3729" class="Symbol">_</a> <a id="3731" class="Symbol">_</a> <a id="3733" class="Symbol">_</a> <a id="3735" class="Symbol">_</a> <a id="3737" class="Symbol">_</a> <a id="3739" class="Symbol">_</a> <a id="3741" class="Symbol">_</a> <a id="3743" class="Symbol">_</a> <a id="3745" class="Symbol">_</a> <a id="3747" class="Symbol">_</a> <a id="3749" class="Symbol">_</a> <a id="3751" class="Symbol">_</a> <a id="3753" class="Symbol">_</a> <a id="3755" class="Symbol">_</a> <a id="3757" class="Symbol">_</a> <a id="3759" class="Symbol">_</a>
      <a id="3767" class="Symbol">(</a><a id="3768" href="Ledger.Conway.Utxo.html#11361" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3782" class="Symbol">(</a><a id="3783" href="Ledger.Conway.Conformance.Equivalence.html#3783" class="Bound">v</a> <a id="3785" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3787" class="Symbol">_))))</a> <a id="3793" class="Symbol">=</a> <a id="3795" href="Ledger.Conway.Conformance.Equivalence.html#3783" class="Bound">v</a>

<a id="makeCertDeps*"></a><a id="3798" href="Ledger.Conway.Conformance.Equivalence.html#3798" class="Function">makeCertDeps*</a> <a id="3812" class="Symbol">:</a> <a id="3814" class="Symbol">∀</a> <a id="3816" class="Symbol">{</a><a id="3817" href="Ledger.Conway.Conformance.Equivalence.html#3817" class="Bound">Γ</a> <a id="3819" href="Ledger.Conway.Conformance.Equivalence.html#3819" class="Bound">s</a> <a id="3821" href="Ledger.Conway.Conformance.Equivalence.html#3821" class="Bound">tx</a> <a id="3824" href="Ledger.Conway.Conformance.Equivalence.html#3824" class="Bound">s&#39;</a><a id="3826" class="Symbol">}</a>
              <a id="3842" class="Symbol">→</a> <a id="3844" class="Symbol">(</a><a id="3845" class="Keyword">let</a> <a id="3849" class="Keyword">open</a> <a id="3854" href="Ledger.Conway.Utxo.html#1038" class="Module">L.UTxOEnv</a> <a id="3864" href="Ledger.Conway.Conformance.Equivalence.html#3817" class="Bound">Γ</a> <a id="3866" class="Keyword">using</a> <a id="3872" class="Symbol">(</a><a id="3873" href="Ledger.Conway.Utxo.html#1092" class="Field">pparams</a><a id="3880" class="Symbol">)</a>
                     <a id="3903" class="Keyword">open</a> <a id="3908" href="Ledger.Conway.Utxo.html#1390" class="Module">L.UTxOState</a> <a id="3920" href="Ledger.Conway.Conformance.Equivalence.html#3819" class="Bound">s</a> <a id="3922" class="Keyword">using</a> <a id="3928" class="Symbol">(</a><a id="3929" href="Ledger.Conway.Utxo.html#1498" class="Field">deposits</a><a id="3937" class="Symbol">)</a>
                     <a id="3960" class="Keyword">open</a> <a id="3965" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="3972" class="Symbol">(</a><a id="3973" href="Ledger.Conway.Conformance.Equivalence.html#3821" class="Bound">tx</a> <a id="3976" class="Symbol">.</a><a id="3977" href="Ledger.Conway.Transaction.html#4259" class="Field">Tx.body</a><a id="3984" class="Symbol">)</a> <a id="3986" class="Keyword">using</a> <a id="3992" class="Symbol">(</a><a id="3993" href="Ledger.Conway.Transaction.html#2948" class="Field">txcerts</a><a id="4000" class="Symbol">))</a>
              <a id="4017" class="Symbol">→</a> <a id="4019" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="4027" href="Ledger.Conway.Conformance.Equivalence.html#3821" class="Bound">tx</a> <a id="4030" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4032" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
              <a id="4051" class="Symbol">→</a> <a id="4053" href="Ledger.Conway.Conformance.Equivalence.html#3817" class="Bound">Γ</a> <a id="4055" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">L.⊢</a> <a id="4059" href="Ledger.Conway.Conformance.Equivalence.html#3819" class="Bound">s</a> <a id="4061" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">⇀⦇</a> <a id="4064" href="Ledger.Conway.Conformance.Equivalence.html#3821" class="Bound">tx</a> <a id="4067" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">,UTXOW⦈</a> <a id="4075" href="Ledger.Conway.Conformance.Equivalence.html#3824" class="Bound">s&#39;</a>
              <a id="4092" class="Symbol">→</a> <a id="4094" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3936" class="Record">CertDeps*</a> <a id="4104" href="Ledger.Conway.Utxo.html#1092" class="Function">pparams</a> <a id="4112" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a>
<a id="4120" href="Ledger.Conway.Conformance.Equivalence.html#3798" class="Function">makeCertDeps*</a> <a id="4134" class="Symbol">{</a><a id="4135" class="Argument">s</a> <a id="4137" class="Symbol">=</a> <a id="4139" href="Ledger.Conway.Conformance.Equivalence.html#4139" class="Bound">s</a><a id="4140" class="Symbol">}</a> <a id="4142" href="Ledger.Conway.Conformance.Equivalence.html#4142" class="Bound">valid</a> <a id="4148" href="Ledger.Conway.Conformance.Equivalence.html#4148" class="Bound">r</a> <a id="4150" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#3926}{\htmlId{4154}{\htmlClass{Function}{\text{certDDeps}}}}\, \,\href{Ledger.Conway.Utxo.html#1498}{\htmlId{4164}{\htmlClass{Function}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#4072}{\htmlId{4175}{\htmlClass{Function}{\text{certGDeps}}}}\, \,\href{Ledger.Conway.Utxo.html#1498}{\htmlId{4185}{\htmlClass{Function}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#7611}{\htmlId{4196}{\htmlClass{Function}{\text{validDDeps}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#4295}{\htmlId{4207}{\htmlClass{Function}{\text{validDeps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#8700}{\htmlId{4219}{\htmlClass{Function}{\text{validGDeps}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#4295}{\htmlId{4230}{\htmlClass{Function}{\text{validDeps}}}}\, \end{pmatrix}$</a>
  <a id="4245" class="Keyword">where</a>
    <a id="4255" class="Keyword">open</a> <a id="4260" href="Ledger.Conway.Utxo.html#1390" class="Module">L.UTxOState</a> <a id="4272" href="Ledger.Conway.Conformance.Equivalence.html#4139" class="Bound">s</a> <a id="4274" class="Keyword">using</a> <a id="4280" class="Symbol">(</a><a id="4281" href="Ledger.Conway.Utxo.html#1498" class="Field">deposits</a><a id="4289" class="Symbol">)</a>
    <a id="4295" href="Ledger.Conway.Conformance.Equivalence.html#4295" class="Function">validDeps</a> <a id="4305" class="Symbol">=</a> <a id="4307" href="Ledger.Conway.Conformance.Equivalence.html#3266" class="Function">getValidCertDeposits</a> <a id="4328" href="Ledger.Conway.Conformance.Equivalence.html#4142" class="Bound">valid</a> <a id="4334" href="Ledger.Conway.Conformance.Equivalence.html#4148" class="Bound">r</a>

<a id="lem-cert-deposits-valid"></a><a id="4337" href="Ledger.Conway.Conformance.Equivalence.html#4337" class="Function">lem-cert-deposits-valid</a> <a id="4361" class="Symbol">:</a> <a id="4363" class="Symbol">∀</a> <a id="4365" class="Symbol">{</a><a id="4366" href="Ledger.Conway.Conformance.Equivalence.html#4366" class="Bound">Γ</a> <a id="4368" href="Ledger.Conway.Conformance.Equivalence.html#4368" class="Bound">s</a> <a id="4370" href="Ledger.Conway.Conformance.Equivalence.html#4370" class="Bound">tx</a> <a id="4373" href="Ledger.Conway.Conformance.Equivalence.html#4373" class="Bound">s&#39;</a><a id="4375" class="Symbol">}</a> <a id="4377" class="Symbol">(</a><a id="4378" class="Keyword">open</a> <a id="4383" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="4390" href="Ledger.Conway.Conformance.Equivalence.html#4366" class="Bound">Γ</a> <a id="4392" class="Keyword">using</a> <a id="4398" class="Symbol">(</a><a id="4399" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="4406" class="Symbol">))</a>
                        <a id="4433" class="Symbol">→</a> <a id="4435" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="4443" href="Ledger.Conway.Conformance.Equivalence.html#4370" class="Bound">tx</a> <a id="4446" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4448" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                        <a id="4477" class="Symbol">→</a> <a id="4479" href="Ledger.Conway.Conformance.Equivalence.html#4366" class="Bound">Γ</a> <a id="4481" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="4485" href="Ledger.Conway.Conformance.Equivalence.html#4368" class="Bound">s</a> <a id="4487" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="4490" href="Ledger.Conway.Conformance.Equivalence.html#4370" class="Bound">tx</a> <a id="4493" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="4502" href="Ledger.Conway.Conformance.Equivalence.html#4373" class="Bound">s&#39;</a>
                        <a id="4529" class="Symbol">→</a> <a id="4531" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2904" class="Function">updateLedgerDeps</a> <a id="4548" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="4556" href="Ledger.Conway.Conformance.Equivalence.html#4370" class="Bound">tx</a> <a id="4559" class="Symbol">(</a><a id="4560" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="4573" href="Ledger.Conway.Conformance.Equivalence.html#4368" class="Bound">s</a><a id="4574" class="Symbol">)</a> <a id="4576" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="4579" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="4592" href="Ledger.Conway.Conformance.Equivalence.html#4373" class="Bound">s&#39;</a>
<a id="4595" href="Ledger.Conway.Conformance.Equivalence.html#4337" class="Function">lem-cert-deposits-valid</a> <a id="4619" class="Symbol">{</a><a id="4620" href="Ledger.Conway.Conformance.Equivalence.html#4620" class="Bound">Γ</a><a id="4621" class="Symbol">}</a> <a id="4623" class="Symbol">{</a><a id="4624" href="Ledger.Conway.Conformance.Equivalence.html#4624" class="Bound">s</a><a id="4625" class="Symbol">}</a> <a id="4627" class="Symbol">{</a><a id="4628" href="Ledger.Conway.Conformance.Equivalence.html#4628" class="Bound">tx</a><a id="4630" class="Symbol">}</a> <a id="4632" class="Symbol">{</a><a id="4633" href="Ledger.Conway.Conformance.Equivalence.html#4633" class="Bound">s&#39;</a><a id="4635" class="Symbol">}</a> <a id="4637" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4642" class="Symbol">(</a><a id="4643" href="Ledger.Conway.Ledger.html#3640" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="4655" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4660" href="Ledger.Conway.Conformance.Equivalence.html#4660" class="Bound">utxow</a> <a id="4666" href="Ledger.Conway.Conformance.Equivalence.html#4666" class="Bound">certs</a> <a id="4672" href="Ledger.Conway.Conformance.Equivalence.html#4672" class="Bound">gov</a><a id="4675" class="Symbol">)</a> <a id="4677" class="Keyword">rewrite</a> <a id="4685" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="4689" class="Symbol">(</a><a id="4690" href="Ledger.Conway.Conformance.Equivalence.html#2887" class="Function">lemUpdateDeposits</a> <a id="4708" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4713" href="Ledger.Conway.Conformance.Equivalence.html#4660" class="Bound">utxow</a><a id="4718" class="Symbol">)</a> <a id="4720" class="Symbol">=</a>
  <a id="4724" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18923" class="Function">lem-upd-ddeps</a> <a id="4738" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="4746" href="Ledger.Conway.Conformance.Equivalence.html#4834" class="Function">deps</a> <a id="4751" href="Ledger.Conway.Conformance.Equivalence.html#4628" class="Bound">tx</a> <a id="4754" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
  <a id="4758" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19696" class="Function">lem-upd-gdeps</a> <a id="4772" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="4780" href="Ledger.Conway.Conformance.Equivalence.html#4834" class="Function">deps</a> <a id="4785" href="Ledger.Conway.Conformance.Equivalence.html#4628" class="Bound">tx</a>
  <a id="4790" class="Keyword">where</a>
    <a id="4800" class="Keyword">open</a> <a id="4805" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="4812" href="Ledger.Conway.Conformance.Equivalence.html#4620" class="Bound">Γ</a> <a id="4814" class="Keyword">using</a> <a id="4820" class="Symbol">(</a><a id="4821" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="4828" class="Symbol">)</a>
    <a id="4834" href="Ledger.Conway.Conformance.Equivalence.html#4834" class="Function">deps</a> <a id="4839" class="Symbol">=</a> <a id="4841" href="Ledger.Conway.Conformance.Equivalence.html#4624" class="Bound">s</a> <a id="4843" class="Symbol">.</a><a id="4844" href="Ledger.Conway.Ledger.html#924" class="Field">L.LState.utxoSt</a> <a id="4860" class="Symbol">.</a> <a id="4862" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a>

<a id="lem-cert-deposits-invalid"></a><a id="4884" href="Ledger.Conway.Conformance.Equivalence.html#4884" class="Function">lem-cert-deposits-invalid</a> <a id="4910" class="Symbol">:</a> <a id="4912" class="Symbol">∀</a> <a id="4914" class="Symbol">{</a><a id="4915" href="Ledger.Conway.Conformance.Equivalence.html#4915" class="Bound">Γ</a> <a id="4917" href="Ledger.Conway.Conformance.Equivalence.html#4917" class="Bound">s</a> <a id="4919" href="Ledger.Conway.Conformance.Equivalence.html#4919" class="Bound">tx</a> <a id="4922" href="Ledger.Conway.Conformance.Equivalence.html#4922" class="Bound">s&#39;</a><a id="4924" class="Symbol">}</a> <a id="4926" class="Symbol">(</a><a id="4927" class="Keyword">open</a> <a id="4932" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="4939" href="Ledger.Conway.Conformance.Equivalence.html#4915" class="Bound">Γ</a> <a id="4941" class="Keyword">using</a> <a id="4947" class="Symbol">(</a><a id="4948" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="4955" class="Symbol">))</a>
                        <a id="4982" class="Symbol">→</a> <a id="4984" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="4992" href="Ledger.Conway.Conformance.Equivalence.html#4919" class="Bound">tx</a> <a id="4995" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4997" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                        <a id="5027" class="Symbol">→</a> <a id="5029" href="Ledger.Conway.Conformance.Equivalence.html#4915" class="Bound">Γ</a> <a id="5031" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="5035" href="Ledger.Conway.Conformance.Equivalence.html#4917" class="Bound">s</a> <a id="5037" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="5040" href="Ledger.Conway.Conformance.Equivalence.html#4919" class="Bound">tx</a> <a id="5043" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="5052" href="Ledger.Conway.Conformance.Equivalence.html#4922" class="Bound">s&#39;</a>
                        <a id="5079" class="Symbol">→</a> <a id="5081" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="5094" href="Ledger.Conway.Conformance.Equivalence.html#4917" class="Bound">s</a> <a id="5096" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="5099" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="5112" href="Ledger.Conway.Conformance.Equivalence.html#4922" class="Bound">s&#39;</a>
<a id="5115" href="Ledger.Conway.Conformance.Equivalence.html#4884" class="Function">lem-cert-deposits-invalid</a> <a id="5141" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5146" class="Symbol">(</a><a id="5147" href="Ledger.Conway.Ledger.html#3693" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="5159" class="Symbol">_</a> <a id="5161" href="Ledger.Conway.Conformance.Equivalence.html#5161" class="Bound">utxow</a><a id="5166" class="Symbol">)</a> <a id="5168" class="Keyword">rewrite</a> <a id="5176" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="5196" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5201" href="Ledger.Conway.Conformance.Equivalence.html#5161" class="Bound">utxow</a> <a id="5207" class="Symbol">=</a>
  <a id="5211" class="Symbol">(</a><a id="5212" href="Function.Base.html#704" class="Function">id</a> <a id="5215" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5217" href="Function.Base.html#704" class="Function">id</a><a id="5219" class="Symbol">)</a> <a id="5221" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5223" class="Symbol">(</a><a id="5224" href="Function.Base.html#704" class="Function">id</a> <a id="5227" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5229" href="Function.Base.html#704" class="Function">id</a><a id="5231" class="Symbol">)</a>

<a id="5234" class="Keyword">instance</a>
  <a id="LStateToConf"></a><a id="5245" href="Ledger.Conway.Conformance.Equivalence.html#5245" class="Function">LStateToConf</a> <a id="5258" class="Symbol">:</a> <a id="5260" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="5271" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5273" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="5284" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="5286" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a> <a id="5295" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="5297" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a>
  <a id="5308" href="Ledger.Conway.Conformance.Equivalence.html#5245" class="Function">LStateToConf</a> <a id="5321" class="Symbol">.</a><a id="5322" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="5328" href="Ledger.Conway.Conformance.Equivalence.html#5328" class="Bound">deposits</a> <a id="5337" href="Ledger.Conway.Conformance.Equivalence.html#5337" class="Bound">ledgerSt</a> <a id="5346" class="Symbol">=</a>
    <a id="5352" class="Keyword">let</a> <a id="5356" class="Keyword">open</a> <a id="5361" href="Ledger.Conway.Ledger.html#865" class="Module">L.LState</a> <a id="5370" href="Ledger.Conway.Conformance.Equivalence.html#5337" class="Bound">ledgerSt</a> <a id="5379" class="Keyword">in</a>
    <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Ledger.html#924}{\htmlId{5388}{\htmlClass{Field}{\text{utxoSt}}}}\, \\ \,\href{Ledger.Conway.Ledger.html#951}{\htmlId{5397}{\htmlClass{Field}{\text{govSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#5328}{\htmlId{5405}{\htmlClass{Bound}{\text{deposits}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#270}{\htmlId{5414}{\htmlClass{Function Operator}{\text{⊢conv}}}}\, \,\href{Ledger.Conway.Ledger.html#977}{\htmlId{5420}{\htmlClass{Field}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="5433" class="Keyword">instance</a>
  <a id="5444" class="Comment">-- LEDGERToConf : ∀ {Γ s tx s&#39;}</a>
  <a id="5478" class="Comment">--              → (∃[ certDeposits-s ] certDeposits-s ≡ᵈ certDeposits s)</a>
  <a id="5553" class="Comment">--              ⊢ Γ L.⊢ s ⇀⦇ tx ,LEDGER⦈ s&#39; ⭆ⁱ λ (certDeposits-s , _) _ →</a>
  <a id="5629" class="Comment">--                ∃[ certDeposits-s&#39; ]</a>
  <a id="5670" class="Comment">--                   certDeposits-s&#39; ≡ᵈ certDeposits s&#39;</a>
  <a id="5728" class="Comment">--                 × Γ C.⊢ (certDeposits s ⊢conv s) ⇀⦇ tx ,LEDGER⦈ (certDeposits-s&#39; ⊢conv s&#39;)</a>
  <a id="LEDGERToConf"></a><a id="5824" href="Ledger.Conway.Conformance.Equivalence.html#5824" class="Function">LEDGERToConf</a> <a id="5837" class="Symbol">:</a> <a id="5839" class="Symbol">∀</a> <a id="5841" class="Symbol">{</a><a id="5842" href="Ledger.Conway.Conformance.Equivalence.html#5842" class="Bound">Γ</a> <a id="5844" href="Ledger.Conway.Conformance.Equivalence.html#5844" class="Bound">s</a> <a id="5846" href="Ledger.Conway.Conformance.Equivalence.html#5846" class="Bound">tx</a> <a id="5849" href="Ledger.Conway.Conformance.Equivalence.html#5849" class="Bound">s&#39;</a><a id="5851" class="Symbol">}</a>
               <a id="5868" class="Symbol">→</a> <a id="5870" href="Ledger.Conway.Conformance.Equivalence.html#5842" class="Bound">Γ</a> <a id="5872" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="5876" href="Ledger.Conway.Conformance.Equivalence.html#5844" class="Bound">s</a> <a id="5878" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="5881" href="Ledger.Conway.Conformance.Equivalence.html#5846" class="Bound">tx</a> <a id="5884" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="5893" href="Ledger.Conway.Conformance.Equivalence.html#5849" class="Bound">s&#39;</a> <a id="5896" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a>
                 <a id="5915" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="5918" href="Ledger.Conway.Conformance.Equivalence.html#5918" class="Bound">certDeposits-s&#39;</a> <a id="5934" href="Data.Product.Base.html#1371" class="Function">]</a>
                    <a id="5956" href="Ledger.Conway.Conformance.Equivalence.html#5918" class="Bound">certDeposits-s&#39;</a> <a id="5972" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="5975" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="5988" href="Ledger.Conway.Conformance.Equivalence.html#5849" class="Bound">s&#39;</a>
                  <a id="6009" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6011" href="Ledger.Conway.Conformance.Equivalence.html#5842" class="Bound">Γ</a> <a id="6013" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="6017" class="Symbol">(</a><a id="6018" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="6031" href="Ledger.Conway.Conformance.Equivalence.html#5844" class="Bound">s</a> <a id="6033" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6039" href="Ledger.Conway.Conformance.Equivalence.html#5844" class="Bound">s</a><a id="6040" class="Symbol">)</a> <a id="6042" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="6045" href="Ledger.Conway.Conformance.Equivalence.html#5846" class="Bound">tx</a> <a id="6048" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="6057" class="Symbol">(</a><a id="6058" href="Ledger.Conway.Conformance.Equivalence.html#5918" class="Bound">certDeposits-s&#39;</a> <a id="6074" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6080" href="Ledger.Conway.Conformance.Equivalence.html#5849" class="Bound">s&#39;</a><a id="6082" class="Symbol">)</a>
  <a id="6086" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , eq-cdeps) r@(L.LEDGER-V⋯ refl utxow certs gov) =</a>
  <a id="6187" href="Ledger.Conway.Conformance.Equivalence.html#5824" class="Function">LEDGERToConf</a> <a id="6200" class="Symbol">{</a><a id="6201" href="Ledger.Conway.Conformance.Equivalence.html#6201" class="Bound">Γ</a><a id="6202" class="Symbol">}</a> <a id="6204" class="Symbol">{</a><a id="6205" href="Ledger.Conway.Conformance.Equivalence.html#6205" class="Bound">s</a><a id="6206" class="Symbol">}</a> <a id="6208" class="Symbol">{</a><a id="6209" href="Ledger.Conway.Conformance.Equivalence.html#6209" class="Bound">tx</a><a id="6211" class="Symbol">}</a> <a id="6213" class="Symbol">{</a><a id="6214" href="Ledger.Conway.Conformance.Equivalence.html#6214" class="Bound">s&#39;</a><a id="6216" class="Symbol">}</a> <a id="6218" class="Symbol">.</a><a id="6219" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="6225" class="Symbol">_</a> <a id="6227" href="Ledger.Conway.Conformance.Equivalence.html#6227" class="Bound">r</a><a id="6228" class="Symbol">@(</a><a id="6230" href="Ledger.Conway.Ledger.html#3640" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="6242" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6247" href="Ledger.Conway.Conformance.Equivalence.html#6247" class="Bound">utxow</a> <a id="6253" href="Ledger.Conway.Conformance.Equivalence.html#6253" class="Bound">certs</a> <a id="6259" href="Ledger.Conway.Conformance.Equivalence.html#6259" class="Bound">gov</a><a id="6262" class="Symbol">)</a> <a id="6264" class="Symbol">=</a>
    <a id="6270" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2904" class="Function">updateLedgerDeps</a> <a id="6287" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="6295" href="Ledger.Conway.Conformance.Equivalence.html#6209" class="Bound">tx</a> <a id="6298" class="Symbol">(</a><a id="6299" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="6312" href="Ledger.Conway.Conformance.Equivalence.html#6205" class="Bound">s</a><a id="6313" class="Symbol">)</a>
    <a id="6319" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6321" href="Ledger.Conway.Conformance.Equivalence.html#4337" class="Function">lem-cert-deposits-valid</a> <a id="6345" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6350" href="Ledger.Conway.Conformance.Equivalence.html#6227" class="Bound">r</a>
    <a id="6356" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6358" href="Relation.Binary.PropositionalEquality.Core.html#2044" class="Function">subst₂</a> <a id="6365" class="Symbol">(λ</a> <a id="6368" href="Ledger.Conway.Conformance.Equivalence.html#6368" class="Bound">•</a> <a id="6370" href="Ledger.Conway.Conformance.Equivalence.html#6370" class="Bound">◆</a> <a id="6372" class="Symbol">→</a> <a id="6374" href="Ledger.Conway.Conformance.Equivalence.html#6201" class="Bound">Γ</a> <a id="6376" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="6380" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="6393" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a> <a id="6403" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6409" href="Ledger.Conway.Conformance.Equivalence.html#6205" class="Bound">s</a> <a id="6411" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="6414" href="Ledger.Conway.Conformance.Equivalence.html#6209" class="Bound">tx</a> <a id="6417" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.html#6368}{\htmlId{6428}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{6432}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#6370}{\htmlId{6436}{\htmlClass{Bound}{\text{◆}}}}\, \end{pmatrix}$</a><a id="6439" class="Symbol">)</a>
             <a id="6454" href="Ledger.Conway.Conformance.Equivalence.html#7349" class="Function">utxoEq</a> <a id="6461" href="Ledger.Conway.Conformance.Equivalence.html#7571" class="Function">certsEq</a> <a id="6469" href="Ledger.Conway.Conformance.Equivalence.html#7189" class="Function">ledger&#39;</a>
    <a id="6481" class="Keyword">where</a>
      <a id="6493" class="Keyword">open</a> <a id="6498" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="6505" href="Ledger.Conway.Conformance.Equivalence.html#6201" class="Bound">Γ</a>
      <a id="6513" class="Keyword">open</a> <a id="6518" href="Ledger.Conway.Ledger.html#865" class="Module">L.LState</a> <a id="6527" href="Ledger.Conway.Conformance.Equivalence.html#6205" class="Bound">s</a>
      <a id="6535" class="Keyword">open</a> <a id="6540" href="Ledger.Conway.Ledger.html#865" class="Module">L.LState</a> <a id="6549" href="Ledger.Conway.Conformance.Equivalence.html#6214" class="Bound">s&#39;</a> <a id="6552" class="Keyword">renaming</a> <a id="6561" class="Symbol">(</a><a id="6562" href="Ledger.Conway.Ledger.html#924" class="Field">utxoSt</a> <a id="6569" class="Symbol">to</a> <a id="6572" class="Field">utxoSt&#39;</a><a id="6579" class="Symbol">;</a> <a id="6581" href="Ledger.Conway.Ledger.html#977" class="Field">certState</a> <a id="6591" class="Symbol">to</a> <a id="6594" class="Field">certState&#39;</a><a id="6604" class="Symbol">;</a> <a id="6606" href="Ledger.Conway.Ledger.html#951" class="Field">govSt</a> <a id="6612" class="Symbol">to</a> <a id="6615" class="Field">govSt&#39;</a><a id="6621" class="Symbol">)</a>
      <a id="6629" class="Keyword">open</a> <a id="6634" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="6641" class="Symbol">(</a><a id="6642" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="6647" href="Ledger.Conway.Conformance.Equivalence.html#6209" class="Bound">tx</a><a id="6649" class="Symbol">)</a> <a id="6651" class="Keyword">using</a> <a id="6657" class="Symbol">(</a><a id="6658" href="Ledger.Conway.Transaction.html#2948" class="Field">txcerts</a><a id="6665" class="Symbol">)</a>
      <a id="6673" href="Ledger.Conway.Conformance.Equivalence.html#6673" class="Function">deposits</a> <a id="6682" class="Symbol">=</a> <a id="6684" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="6705" href="Ledger.Conway.Ledger.html#924" class="Function">utxoSt</a>
      <a id="6718" href="Ledger.Conway.Conformance.Equivalence.html#6718" class="Function">utxow&#39;</a> <a id="6725" class="Symbol">:</a> <a id="6727" class="Symbol">_</a> <a id="6729" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">C.⊢</a> <a id="6733" href="Ledger.Conway.Ledger.html#924" class="Function">utxoSt</a> <a id="6740" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">⇀⦇</a> <a id="6743" href="Ledger.Conway.Conformance.Equivalence.html#6209" class="Bound">tx</a> <a id="6746" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">,UTXOW⦈</a> <a id="6754" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="6766" href="Ledger.Conway.Conformance.Equivalence.html#6673" class="Function">deposits</a> <a id="6775" href="Ledger.Conway.Conformance.Equivalence.html#6572" class="Function">utxoSt&#39;</a>
      <a id="6789" href="Ledger.Conway.Conformance.Equivalence.html#6718" class="Function">utxow&#39;</a> <a id="6796" class="Symbol">=</a> <a id="6798" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="6803" href="Ledger.Conway.Conformance.Equivalence.html#6247" class="Bound">utxow</a>
      <a id="6815" href="Ledger.Conway.Conformance.Equivalence.html#6815" class="Function">utxoStC&#39;</a>    <a id="6827" class="Symbol">=</a> <a id="6829" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="6841" class="Symbol">(</a><a id="6842" href="Ledger.Conway.Utxo.html#7988" class="Function">L.updateDeposits</a> <a id="6859" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="6867" class="Symbol">(</a><a id="6868" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="6873" href="Ledger.Conway.Conformance.Equivalence.html#6209" class="Bound">tx</a><a id="6875" class="Symbol">)</a> <a id="6877" href="Ledger.Conway.Conformance.Equivalence.html#6673" class="Function">deposits</a><a id="6885" class="Symbol">)</a> <a id="6887" href="Ledger.Conway.Conformance.Equivalence.html#6572" class="Function">utxoSt&#39;</a>
      <a id="6901" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a>  <a id="6912" class="Symbol">=</a> <a id="6914" href="Ledger.Conway.Conformance.Equivalence.html#3798" class="Function">makeCertDeps*</a> <a id="6928" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6933" href="Ledger.Conway.Conformance.Equivalence.html#6247" class="Bound">utxow</a>
      <a id="6945" href="Ledger.Conway.Conformance.Equivalence.html#6945" class="Function">cdeposits&#39;</a> <a id="6956" class="Symbol">=</a> <a id="6958" href="Ledger.Conway.Conformance.Equivalence.Certs.html#5654" class="Function">updateCertDeps*</a> <a id="6974" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="6982" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a>
      <a id="6998" href="Ledger.Conway.Conformance.Equivalence.html#6998" class="Function">certStateC&#39;</a> <a id="7010" class="Symbol">=</a> <a id="7012" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7025" href="Ledger.Conway.Conformance.Equivalence.html#6945" class="Function">cdeposits&#39;</a> <a id="7036" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7042" href="Ledger.Conway.Conformance.Equivalence.html#6594" class="Function">certState&#39;</a>
      <a id="7059" href="Ledger.Conway.Conformance.Equivalence.html#7059" class="Function">certs&#39;</a> <a id="7066" class="Symbol">:</a> <a id="7068" class="Symbol">_</a> <a id="7070" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">C.⊢</a> <a id="7074" class="Symbol">(</a><a id="7075" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7088" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a> <a id="7098" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7104" href="Ledger.Conway.Ledger.html#977" class="Function">certState</a><a id="7113" class="Symbol">)</a> <a id="7115" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">⇀⦇</a> <a id="7118" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="7126" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">,CERTS⦈</a> <a id="7134" href="Ledger.Conway.Conformance.Equivalence.html#6998" class="Function">certStateC&#39;</a>
      <a id="7152" href="Ledger.Conway.Conformance.Equivalence.html#7059" class="Function">certs&#39;</a> <a id="7159" class="Symbol">=</a> <a id="7161" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a> <a id="7171" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7177" href="Ledger.Conway.Conformance.Equivalence.html#6253" class="Bound">certs</a>
      <a id="7189" href="Ledger.Conway.Conformance.Equivalence.html#7189" class="Function">ledger&#39;</a> <a id="7197" class="Symbol">:</a> <a id="7199" href="Ledger.Conway.Conformance.Equivalence.html#6201" class="Bound">Γ</a> <a id="7201" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="7205" class="Symbol">(</a><a id="7206" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7219" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a> <a id="7229" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7235" href="Ledger.Conway.Conformance.Equivalence.html#6205" class="Bound">s</a><a id="7236" class="Symbol">)</a> <a id="7238" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="7241" href="Ledger.Conway.Conformance.Equivalence.html#6209" class="Bound">tx</a> <a id="7244" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="7253" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">C.⟦</a> <a id="7257" href="Ledger.Conway.Conformance.Equivalence.html#6815" class="Function">utxoStC&#39;</a> <a id="7266" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">,</a> <a id="7268" href="Ledger.Conway.Conformance.Equivalence.html#6615" class="Function">govSt&#39;</a> <a id="7275" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">,</a> <a id="7277" href="Ledger.Conway.Conformance.Equivalence.html#6998" class="Function">certStateC&#39;</a> <a id="7289" href="Ledger.Conway.Conformance.Ledger.html#757" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="7298" href="Ledger.Conway.Conformance.Equivalence.html#7189" class="Function">ledger&#39;</a> <a id="7306" class="Symbol">=</a> <a id="7308" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="7320" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7325" href="Ledger.Conway.Conformance.Equivalence.html#6718" class="Function">utxow&#39;</a> <a id="7332" href="Ledger.Conway.Conformance.Equivalence.html#7059" class="Function">certs&#39;</a> <a id="7339" href="Ledger.Conway.Conformance.Equivalence.html#6259" class="Bound">gov</a>
      <a id="7349" href="Ledger.Conway.Conformance.Equivalence.html#7349" class="Function">utxoEq</a>  <a id="7357" class="Symbol">:</a> <a id="7359" href="Ledger.Conway.Conformance.Equivalence.html#6815" class="Function">utxoStC&#39;</a> <a id="7368" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7370" href="Ledger.Conway.Conformance.Equivalence.html#6572" class="Function">utxoSt&#39;</a>
      <a id="7384" href="Ledger.Conway.Conformance.Equivalence.html#7349" class="Function">utxoEq</a>  <a id="7392" class="Symbol">=</a> <a id="7394" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="7399" class="Symbol">(λ</a> <a id="7402" href="Ledger.Conway.Conformance.Equivalence.html#7402" class="Bound">•</a> <a id="7404" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{7408}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7412}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7402}{\htmlId{7416}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{7420}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="7423" class="Symbol">)</a>
                     <a id="7446" class="Symbol">(</a><a id="7447" href="Ledger.Conway.Conformance.Equivalence.html#2887" class="Function">lemUpdateDeposits</a> <a id="7465" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7470" href="Ledger.Conway.Conformance.Equivalence.html#6247" class="Bound">utxow</a><a id="7475" class="Symbol">)</a>
      <a id="7483" href="Ledger.Conway.Conformance.Equivalence.html#7483" class="Function">ddeps</a> <a id="7489" class="Symbol">=</a> <a id="7491" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7504" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a> <a id="7514" class="Symbol">.</a><a id="7515" href="Data.Product.Base.html#636" class="Field">proj₁</a>
      <a id="7527" href="Ledger.Conway.Conformance.Equivalence.html#7527" class="Function">gdeps</a> <a id="7533" class="Symbol">=</a> <a id="7535" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4872" class="Function">getCertDeps*</a> <a id="7548" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a> <a id="7558" class="Symbol">.</a><a id="7559" href="Data.Product.Base.html#650" class="Field">proj₂</a>
      <a id="7571" href="Ledger.Conway.Conformance.Equivalence.html#7571" class="Function">certsEq</a> <a id="7579" class="Symbol">:</a> <a id="7581" href="Ledger.Conway.Conformance.Equivalence.html#6998" class="Function">certStateC&#39;</a> <a id="7593" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7595" class="Symbol">(</a><a id="7596" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="7608" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="7616" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="7624" href="Ledger.Conway.Conformance.Equivalence.html#7483" class="Function">ddeps</a> <a id="7630" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7632" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="7644" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="7652" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="7660" href="Ledger.Conway.Conformance.Equivalence.html#7527" class="Function">gdeps</a><a id="7665" class="Symbol">)</a> <a id="7667" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7673" href="Ledger.Conway.Conformance.Equivalence.html#6594" class="Function">certState&#39;</a>
      <a id="7690" href="Ledger.Conway.Conformance.Equivalence.html#7571" class="Function">certsEq</a> <a id="7698" class="Symbol">=</a> <a id="7700" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="7706" class="Symbol">(λ</a> <a id="7709" href="Ledger.Conway.Conformance.Equivalence.html#7709" class="Bound">•</a> <a id="7711" href="Ledger.Conway.Conformance.Equivalence.html#7711" class="Bound">◆</a> <a id="7713" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\htmlId{7719}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7723}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7727}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7709}{\htmlId{7731}{\htmlClass{Bound}{\text{•}}}}\, \end{pmatrix} \\ \,\htmlId{7737}{\htmlClass{Symbol}{\text{\_}}}\, \\ \begin{pmatrix} \,\htmlId{7743}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7747}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7711}{\htmlId{7751}{\htmlClass{Bound}{\text{◆}}}}\, \end{pmatrix} \end{pmatrix}$</a><a id="7756" class="Symbol">)</a>
                     <a id="7779" class="Symbol">(</a><a id="7780" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#10919" class="Function">lem-ddeps</a> <a id="7790" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a><a id="7799" class="Symbol">)</a>
                     <a id="7822" class="Symbol">(</a><a id="7823" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#11832" class="Function">lem-gdeps</a> <a id="7833" href="Ledger.Conway.Conformance.Equivalence.html#6901" class="Function">cdeposits</a><a id="7842" class="Symbol">)</a>

  <a id="7847" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , cdeps-eq) r@(L.LEDGER-I⋯ refl utxow) =</a>
  <a id="7938" href="Ledger.Conway.Conformance.Equivalence.html#5824" class="Function">LEDGERToConf</a> <a id="7951" class="Symbol">{</a><a id="7952" href="Ledger.Conway.Conformance.Equivalence.html#7952" class="Bound">Γ</a><a id="7953" class="Symbol">}</a> <a id="7955" class="Symbol">{</a><a id="7956" href="Ledger.Conway.Conformance.Equivalence.html#7956" class="Bound">s</a><a id="7957" class="Symbol">}</a> <a id="7959" class="Symbol">{</a><a id="7960" href="Ledger.Conway.Conformance.Equivalence.html#7960" class="Bound">tx</a><a id="7962" class="Symbol">}</a> <a id="7964" class="Symbol">{</a><a id="7965" href="Ledger.Conway.Conformance.Equivalence.html#7965" class="Bound">s&#39;</a><a id="7967" class="Symbol">}</a> <a id="7969" class="Symbol">.</a><a id="7970" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="7976" class="Symbol">_</a> <a id="7978" href="Ledger.Conway.Conformance.Equivalence.html#7978" class="Bound">r</a><a id="7979" class="Symbol">@(</a><a id="7981" href="Ledger.Conway.Ledger.html#3693" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="7993" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7998" href="Ledger.Conway.Conformance.Equivalence.html#7998" class="Bound">utxow</a><a id="8003" class="Symbol">)</a> <a id="8005" class="Symbol">=</a>
    <a id="8011" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="8024" href="Ledger.Conway.Conformance.Equivalence.html#7956" class="Bound">s</a> <a id="8026" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8028" href="Ledger.Conway.Conformance.Equivalence.html#4884" class="Function">lem-cert-deposits-invalid</a> <a id="8054" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8059" href="Ledger.Conway.Conformance.Equivalence.html#7978" class="Bound">r</a> <a id="8061" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
    <a id="8067" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="8073" class="Symbol">(λ</a> <a id="8076" href="Ledger.Conway.Conformance.Equivalence.html#8076" class="Bound">•</a> <a id="8078" class="Symbol">→</a> <a id="8080" href="Ledger.Conway.Conformance.Equivalence.html#7952" class="Bound">Γ</a> <a id="8082" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="8086" class="Symbol">_</a> <a id="8088" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="8094" href="Ledger.Conway.Conformance.Equivalence.html#7956" class="Bound">s</a> <a id="8096" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="8099" href="Ledger.Conway.Conformance.Equivalence.html#7960" class="Bound">tx</a> <a id="8102" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\htmlId{8115}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{8119}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#8076}{\htmlId{8123}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{8127}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix} \\ \,\htmlId{8133}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{8137}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="8140" class="Symbol">)</a>
          <a id="8152" class="Symbol">(</a><a id="8153" href="Ledger.Conway.Conformance.Equivalence.html#1565" class="Function">lemInvalidDepositsL</a> <a id="8173" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8178" href="Ledger.Conway.Conformance.Equivalence.html#7998" class="Bound">utxow</a><a id="8183" class="Symbol">)</a>
          <a id="8195" class="Symbol">(</a><a id="8196" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="8208" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8213" class="Symbol">(</a><a id="8214" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8219" href="Ledger.Conway.Conformance.Equivalence.html#7998" class="Bound">utxow</a><a id="8224" class="Symbol">))</a>

<a id="8228" class="Keyword">instance</a>

  <a id="LStateFromConf"></a><a id="8240" href="Ledger.Conway.Conformance.Equivalence.html#8240" class="Function">LStateFromConf</a> <a id="8255" class="Symbol">:</a> <a id="8257" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a> <a id="8266" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a> <a id="8268" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a>
  <a id="8279" href="Ledger.Conway.Conformance.Equivalence.html#8240" class="Function">LStateFromConf</a> <a id="8294" class="Symbol">.</a><a id="8295" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8301" class="Symbol">_</a> <a id="8303" href="Ledger.Conway.Conformance.Equivalence.html#8303" class="Bound">ls</a> <a id="8306" class="Symbol">=</a>
    <a id="8312" class="Keyword">let</a> <a id="8316" class="Keyword">open</a> <a id="8321" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="8330" href="Ledger.Conway.Conformance.Equivalence.html#8303" class="Bound">ls</a> <a id="8333" class="Keyword">in</a>
    <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Ledger.html#778}{\htmlId{8342}{\htmlClass{Field}{\text{utxoSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#805}{\htmlId{8351}{\htmlClass{Field}{\text{govSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{8359}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Ledger.html#831}{\htmlId{8364}{\htmlClass{Field}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="certDepositsC"></a><a id="8377" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="8391" class="Symbol">:</a> <a id="8393" href="Ledger.Conway.Conformance.Certs.html#914" class="Record">C.CertState</a> <a id="8405" class="Symbol">→</a> <a id="8407" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="8418" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8420" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a>
<a id="8431" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="8445" href="Ledger.Conway.Conformance.Equivalence.html#8445" class="Bound">cs</a> <a id="8448" class="Symbol">=</a> <a id="8450" class="Keyword">let</a> <a id="8454" class="Keyword">open</a> <a id="8459" href="Ledger.Conway.Conformance.Certs.html#914" class="Module">C.CertState</a> <a id="8471" href="Ledger.Conway.Conformance.Equivalence.html#8445" class="Bound">cs</a> <a id="8474" class="Keyword">in</a> <a id="8477" href="Ledger.Conway.Conformance.Certs.html#714" class="Field">C.DState.deposits</a> <a id="8495" href="Ledger.Conway.Conformance.Certs.html#973" class="Field">dState</a> <a id="8502" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8504" href="Ledger.Conway.Conformance.Certs.html#884" class="Field">C.GState.deposits</a> <a id="8522" href="Ledger.Conway.Conformance.Certs.html#1013" class="Field">gState</a>

<a id="WellformedLState"></a><a id="8530" href="Ledger.Conway.Conformance.Equivalence.html#8530" class="Function">WellformedLState</a> <a id="8547" class="Symbol">:</a> <a id="8549" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a> <a id="8558" class="Symbol">→</a> <a id="8560" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8565" href="Ledger.Conway.Conformance.Equivalence.html#8530" class="Function">WellformedLState</a> <a id="8582" href="Ledger.Conway.Conformance.Equivalence.html#8582" class="Bound">s</a> <a id="8584" class="Symbol">=</a> <a id="8586" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="8600" class="Symbol">(</a><a id="8601" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="8620" href="Ledger.Conway.Conformance.Equivalence.html#8582" class="Bound">s</a><a id="8621" class="Symbol">)</a> <a id="8623" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="8626" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="8639" class="Symbol">(</a><a id="8640" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8645" href="Ledger.Conway.Conformance.Equivalence.html#8582" class="Bound">s</a><a id="8646" class="Symbol">)</a>

<a id="getValidCertDepositsCERTS"></a><a id="8649" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="8675" class="Symbol">:</a> <a id="8677" class="Symbol">∀</a> <a id="8679" class="Symbol">{</a><a id="8680" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">Γ</a> <a id="8682" href="Ledger.Conway.Conformance.Equivalence.html#8682" class="Bound">s</a> <a id="8684" href="Ledger.Conway.Conformance.Equivalence.html#8684" class="Bound">certs</a> <a id="8690" href="Ledger.Conway.Conformance.Equivalence.html#8690" class="Bound">s&#39;</a><a id="8692" class="Symbol">}</a> <a id="8694" href="Ledger.Conway.Conformance.Equivalence.html#8694" class="Bound">deposits</a> <a id="8703" class="Symbol">(</a><a id="8704" class="Keyword">open</a> <a id="8709" href="Ledger.Conway.Certs.html#2771" class="Module">L.CertEnv</a> <a id="8719" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">Γ</a> <a id="8721" class="Keyword">using</a> <a id="8727" class="Symbol">(</a><a id="8728" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="8730" class="Symbol">))</a>
                          <a id="8759" class="Symbol">→</a> <a id="8761" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="8775" href="Ledger.Conway.Conformance.Equivalence.html#8682" class="Bound">s</a> <a id="8777" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="8780" class="Symbol">(</a><a id="8781" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="8791" href="Ledger.Conway.Conformance.Equivalence.html#8694" class="Bound">deposits</a> <a id="8800" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8802" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="8812" href="Ledger.Conway.Conformance.Equivalence.html#8694" class="Bound">deposits</a><a id="8820" class="Symbol">)</a>
                          <a id="8848" class="Symbol">→</a> <a id="8850" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="8877" class="Symbol">{</a><a id="8878" class="Argument">sts</a> <a id="8882" class="Symbol">=</a> <a id="8884" href="Ledger.Conway.Conformance.Certs.html#6451" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="8899" class="Symbol">}</a> <a id="8901" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">Γ</a> <a id="8903" href="Ledger.Conway.Conformance.Equivalence.html#8682" class="Bound">s</a> <a id="8905" href="Ledger.Conway.Conformance.Equivalence.html#8684" class="Bound">certs</a> <a id="8911" href="Ledger.Conway.Conformance.Equivalence.html#8690" class="Bound">s&#39;</a>
                          <a id="8940" class="Symbol">→</a> <a id="8942" href="Ledger.Conway.Utxo.html#3336" class="Datatype">L.ValidCertDeposits</a> <a id="8962" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="8965" href="Ledger.Conway.Conformance.Equivalence.html#8694" class="Bound">deposits</a> <a id="8974" href="Ledger.Conway.Conformance.Equivalence.html#8684" class="Bound">certs</a>
<a id="8980" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9006" href="Ledger.Conway.Conformance.Equivalence.html#9006" class="Bound">deposits</a> <a id="9015" href="Ledger.Conway.Conformance.Equivalence.html#9015" class="Bound">wf</a> <a id="9018" class="Symbol">(</a><a id="9019" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="9027" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="9033" class="Symbol">)</a> <a id="9035" class="Symbol">=</a> <a id="9037" href="Ledger.Conway.Utxo.html#3418" class="InductiveConstructor">L.[]</a>
<a id="9042" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9068" class="Symbol">{</a><a id="9069" href="Ledger.Conway.Conformance.Equivalence.html#9069" class="Bound">Γ</a><a id="9070" class="Symbol">}</a> <a id="9072" class="Symbol">{</a><a id="9073" href="Ledger.Conway.Conformance.Equivalence.html#9073" class="Bound">s</a><a id="9074" class="Symbol">}</a> <a id="9076" class="Symbol">{</a><a id="9077" href="Ledger.Conway.Conformance.Equivalence.html#9077" class="Bound">cert</a> <a id="9082" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9084" class="Symbol">_}</a> <a id="9087" href="Ledger.Conway.Conformance.Equivalence.html#9087" class="Bound">deposits</a> <a id="9096" href="Ledger.Conway.Conformance.Equivalence.html#9096" class="Bound">wf</a> <a id="9099" class="Symbol">(</a><a id="9100" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9107" class="Symbol">(</a><a id="9108" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="9121" class="Symbol">(</a><a id="9122" href="Ledger.Conway.Conformance.Certs.html#4114" class="InductiveConstructor">C.DELEG-delegate</a> <a id="9139" class="Symbol">(</a><a id="9140" href="Ledger.Conway.Conformance.Equivalence.html#9140" class="Bound">a</a> <a id="9142" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9144" href="Ledger.Conway.Conformance.Equivalence.html#9144" class="Bound">b</a><a id="9145" class="Symbol">)))</a> <a id="9149" href="Ledger.Conway.Conformance.Equivalence.html#9149" class="Bound">rs</a><a id="9151" class="Symbol">)</a> <a id="9153" class="Symbol">=</a>
  <a id="9157" href="Ledger.Conway.Utxo.html#3462" class="InductiveConstructor">L.delegate</a> <a id="9168" class="Symbol">(</a><a id="9169" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9195" class="Symbol">_</a> <a id="9197" class="Symbol">(</a><a id="9198" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="9209" class="Symbol">(</a><a id="9210" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="9223" href="Ledger.Conway.Conformance.Equivalence.html#9069" class="Bound">Γ</a><a id="9224" class="Symbol">)</a> <a id="9226" class="Symbol">(</a><a id="9227" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="9241" href="Ledger.Conway.Conformance.Equivalence.html#9073" class="Bound">s</a><a id="9242" class="Symbol">)</a> <a id="9244" href="Ledger.Conway.Conformance.Equivalence.html#9087" class="Bound">deposits</a> <a id="9253" href="Ledger.Conway.Conformance.Equivalence.html#9077" class="Bound">cert</a> <a id="9258" href="Ledger.Conway.Conformance.Equivalence.html#9096" class="Bound">wf</a><a id="9260" class="Symbol">)</a> <a id="9262" href="Ledger.Conway.Conformance.Equivalence.html#9149" class="Bound">rs</a><a id="9264" class="Symbol">)</a>
<a id="9266" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9292" class="Symbol">{</a><a id="9293" href="Ledger.Conway.Conformance.Equivalence.html#9293" class="Bound">Γ</a><a id="9294" class="Symbol">}</a> <a id="9296" class="Symbol">{</a><a id="9297" href="Ledger.Conway.Conformance.Equivalence.html#9297" class="Bound">s</a><a id="9298" class="Symbol">}</a> <a id="9300" class="Symbol">{</a><a id="9301" href="Ledger.Conway.Conformance.Equivalence.html#9301" class="Bound">cert</a> <a id="9306" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9308" class="Symbol">_}</a> <a id="9311" href="Ledger.Conway.Conformance.Equivalence.html#9311" class="Bound">deposits</a> <a id="9320" href="Ledger.Conway.Conformance.Equivalence.html#9320" class="Bound">wf</a> <a id="9323" class="Symbol">(</a><a id="9324" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9331" class="Symbol">(</a><a id="9332" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="9345" class="Symbol">(</a><a id="9346" href="Ledger.Conway.Conformance.Certs.html#4743" class="InductiveConstructor">C.DELEG-dereg</a> <a id="9360" class="Symbol">(_</a> <a id="9363" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9365" href="Ledger.Conway.Conformance.Equivalence.html#9365" class="Bound">h</a> <a id="9367" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9369" href="Ledger.Conway.Conformance.Equivalence.html#9369" class="Bound">h&#39;</a><a id="9371" class="Symbol">)))</a> <a id="9375" href="Ledger.Conway.Conformance.Equivalence.html#9375" class="Bound">rs</a><a id="9377" class="Symbol">)</a> <a id="9379" class="Symbol">=</a>
  <a id="9383" href="Ledger.Conway.Utxo.html#4183" class="InductiveConstructor">L.dereg</a> <a id="9391" class="Symbol">(</a><a id="9392" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="9401" class="Symbol">.</a><a id="9402" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9419" class="Symbol">(</a><a id="9420" href="Ledger.Conway.Conformance.Equivalence.html#9320" class="Bound">wf</a> <a id="9423" class="Symbol">.</a><a id="9424" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9430" class="Symbol">.</a><a id="9431" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9437" href="Ledger.Conway.Conformance.Equivalence.html#9365" class="Bound">h</a><a id="9438" class="Symbol">)</a> <a id="9440" class="Symbol">.</a><a id="9441" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="9446" class="Symbol">)</a> <a id="9448" href="Ledger.Conway.Conformance.Equivalence.html#9369" class="Bound">h&#39;</a>
          <a id="9461" class="Symbol">(</a><a id="9462" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9488" class="Symbol">_</a> <a id="9490" class="Symbol">(</a><a id="9491" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="9502" class="Symbol">(</a><a id="9503" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="9516" href="Ledger.Conway.Conformance.Equivalence.html#9293" class="Bound">Γ</a><a id="9517" class="Symbol">)</a> <a id="9519" class="Symbol">(</a><a id="9520" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="9534" href="Ledger.Conway.Conformance.Equivalence.html#9297" class="Bound">s</a><a id="9535" class="Symbol">)</a> <a id="9537" href="Ledger.Conway.Conformance.Equivalence.html#9311" class="Bound">deposits</a> <a id="9546" href="Ledger.Conway.Conformance.Equivalence.html#9301" class="Bound">cert</a> <a id="9551" href="Ledger.Conway.Conformance.Equivalence.html#9320" class="Bound">wf</a><a id="9553" class="Symbol">)</a> <a id="9555" href="Ledger.Conway.Conformance.Equivalence.html#9375" class="Bound">rs</a><a id="9557" class="Symbol">)</a>
<a id="9559" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9585" class="Symbol">{</a><a id="9586" href="Ledger.Conway.Conformance.Equivalence.html#9586" class="Bound">Γ</a><a id="9587" class="Symbol">}</a> <a id="9589" class="Symbol">{</a><a id="9590" href="Ledger.Conway.Conformance.Equivalence.html#9590" class="Bound">s</a><a id="9591" class="Symbol">}</a> <a id="9593" class="Symbol">{</a><a id="9594" href="Ledger.Conway.Conformance.Equivalence.html#9594" class="Bound">cert</a> <a id="9599" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9601" class="Symbol">_}</a> <a id="9604" href="Ledger.Conway.Conformance.Equivalence.html#9604" class="Bound">deposits</a> <a id="9613" href="Ledger.Conway.Conformance.Equivalence.html#9613" class="Bound">wf</a> <a id="9616" class="Symbol">(</a><a id="9617" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9624" class="Symbol">(</a><a id="9625" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="9638" class="Symbol">(</a><a id="9639" href="Ledger.Conway.Conformance.Certs.html#5107" class="InductiveConstructor">C.DELEG-reg</a> <a id="9651" href="Ledger.Conway.Conformance.Equivalence.html#9651" class="Bound">x</a><a id="9652" class="Symbol">))</a> <a id="9655" href="Ledger.Conway.Conformance.Equivalence.html#9655" class="Bound">rs</a><a id="9657" class="Symbol">)</a> <a id="9659" class="Symbol">=</a>
  <a id="9663" href="Ledger.Conway.Utxo.html#4002" class="InductiveConstructor">L.reg</a> <a id="9669" class="Symbol">(</a><a id="9670" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9696" class="Symbol">_</a> <a id="9698" class="Symbol">(</a><a id="9699" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="9710" class="Symbol">(</a><a id="9711" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="9724" href="Ledger.Conway.Conformance.Equivalence.html#9586" class="Bound">Γ</a><a id="9725" class="Symbol">)</a> <a id="9727" class="Symbol">(</a><a id="9728" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="9742" href="Ledger.Conway.Conformance.Equivalence.html#9590" class="Bound">s</a><a id="9743" class="Symbol">)</a> <a id="9745" href="Ledger.Conway.Conformance.Equivalence.html#9604" class="Bound">deposits</a> <a id="9754" href="Ledger.Conway.Conformance.Equivalence.html#9594" class="Bound">cert</a> <a id="9759" href="Ledger.Conway.Conformance.Equivalence.html#9613" class="Bound">wf</a><a id="9761" class="Symbol">)</a> <a id="9763" href="Ledger.Conway.Conformance.Equivalence.html#9655" class="Bound">rs</a><a id="9765" class="Symbol">)</a>
<a id="9767" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9793" class="Symbol">{</a><a id="9794" href="Ledger.Conway.Conformance.Equivalence.html#9794" class="Bound">Γ</a><a id="9795" class="Symbol">}</a> <a id="9797" class="Symbol">{</a><a id="9798" href="Ledger.Conway.Conformance.Equivalence.html#9798" class="Bound">s</a><a id="9799" class="Symbol">}</a> <a id="9801" class="Symbol">{</a><a id="9802" href="Ledger.Conway.Conformance.Equivalence.html#9802" class="Bound">cert</a> <a id="9807" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9809" class="Symbol">_}</a> <a id="9812" href="Ledger.Conway.Conformance.Equivalence.html#9812" class="Bound">deposits</a> <a id="9821" href="Ledger.Conway.Conformance.Equivalence.html#9821" class="Bound">wf</a> <a id="9824" class="Symbol">(</a><a id="9825" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9832" class="Symbol">(</a><a id="9833" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a> <a id="9845" class="Symbol">(</a><a id="9846" href="Ledger.Conway.Conformance.Certs.html#3740" class="InductiveConstructor">C.POOL-regpool</a> <a id="9861" class="Symbol">_))</a> <a id="9865" href="Ledger.Conway.Conformance.Equivalence.html#9865" class="Bound">rs</a><a id="9867" class="Symbol">)</a> <a id="9869" class="Symbol">=</a>
  <a id="9873" href="Ledger.Conway.Utxo.html#3649" class="InductiveConstructor">L.regpool</a> <a id="9883" class="Symbol">(</a><a id="9884" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="9910" class="Symbol">_</a> <a id="9912" class="Symbol">(</a><a id="9913" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="9924" class="Symbol">(</a><a id="9925" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="9938" href="Ledger.Conway.Conformance.Equivalence.html#9794" class="Bound">Γ</a><a id="9939" class="Symbol">)</a> <a id="9941" class="Symbol">(</a><a id="9942" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="9956" href="Ledger.Conway.Conformance.Equivalence.html#9798" class="Bound">s</a><a id="9957" class="Symbol">)</a> <a id="9959" href="Ledger.Conway.Conformance.Equivalence.html#9812" class="Bound">deposits</a> <a id="9968" href="Ledger.Conway.Conformance.Equivalence.html#9802" class="Bound">cert</a> <a id="9973" href="Ledger.Conway.Conformance.Equivalence.html#9821" class="Bound">wf</a><a id="9975" class="Symbol">)</a> <a id="9977" href="Ledger.Conway.Conformance.Equivalence.html#9865" class="Bound">rs</a><a id="9979" class="Symbol">)</a>
<a id="9981" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10007" class="Symbol">{</a><a id="10008" href="Ledger.Conway.Conformance.Equivalence.html#10008" class="Bound">Γ</a><a id="10009" class="Symbol">}</a> <a id="10011" class="Symbol">{</a><a id="10012" href="Ledger.Conway.Conformance.Equivalence.html#10012" class="Bound">s</a><a id="10013" class="Symbol">}</a> <a id="10015" class="Symbol">{</a><a id="10016" href="Ledger.Conway.Conformance.Equivalence.html#10016" class="Bound">cert</a> <a id="10021" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10023" class="Symbol">_}</a> <a id="10026" href="Ledger.Conway.Conformance.Equivalence.html#10026" class="Bound">deposits</a> <a id="10035" href="Ledger.Conway.Conformance.Equivalence.html#10035" class="Bound">wf</a> <a id="10038" class="Symbol">(</a><a id="10039" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10046" class="Symbol">(</a><a id="10047" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a> <a id="10059" href="Ledger.Conway.Conformance.Certs.html#3939" class="InductiveConstructor">C.POOL-retirepool</a><a id="10076" class="Symbol">)</a> <a id="10078" href="Ledger.Conway.Conformance.Equivalence.html#10078" class="Bound">rs</a><a id="10080" class="Symbol">)</a> <a id="10082" class="Symbol">=</a>
  <a id="10086" href="Ledger.Conway.Utxo.html#4791" class="InductiveConstructor">L.retirepool</a> <a id="10099" class="Symbol">(</a><a id="10100" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10126" class="Symbol">_</a> <a id="10128" class="Symbol">(</a><a id="10129" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10140" class="Symbol">(</a><a id="10141" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="10154" href="Ledger.Conway.Conformance.Equivalence.html#10008" class="Bound">Γ</a><a id="10155" class="Symbol">)</a> <a id="10157" class="Symbol">(</a><a id="10158" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="10172" href="Ledger.Conway.Conformance.Equivalence.html#10012" class="Bound">s</a><a id="10173" class="Symbol">)</a> <a id="10175" href="Ledger.Conway.Conformance.Equivalence.html#10026" class="Bound">deposits</a> <a id="10184" href="Ledger.Conway.Conformance.Equivalence.html#10016" class="Bound">cert</a> <a id="10189" href="Ledger.Conway.Conformance.Equivalence.html#10035" class="Bound">wf</a><a id="10191" class="Symbol">)</a> <a id="10193" href="Ledger.Conway.Conformance.Equivalence.html#10078" class="Bound">rs</a><a id="10195" class="Symbol">)</a>
<a id="10197" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10223" class="Symbol">{</a><a id="10224" href="Ledger.Conway.Conformance.Equivalence.html#10224" class="Bound">Γ</a><a id="10225" class="Symbol">}</a> <a id="10227" class="Symbol">{</a><a id="10228" href="Ledger.Conway.Conformance.Equivalence.html#10228" class="Bound">s</a><a id="10229" class="Symbol">}</a> <a id="10231" class="Symbol">{</a><a id="10232" href="Ledger.Conway.Conformance.Equivalence.html#10232" class="Bound">cert</a> <a id="10237" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10239" class="Symbol">_}</a> <a id="10242" href="Ledger.Conway.Conformance.Equivalence.html#10242" class="Bound">deposits</a> <a id="10251" href="Ledger.Conway.Conformance.Equivalence.html#10251" class="Bound">wf</a> <a id="10254" class="Symbol">(</a><a id="10255" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10262" class="Symbol">(</a><a id="10263" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="10275" class="Symbol">(</a><a id="10276" href="Ledger.Conway.Conformance.Certs.html#5499" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="10294" href="Ledger.Conway.Conformance.Equivalence.html#10294" class="Bound">x</a><a id="10295" class="Symbol">))</a> <a id="10298" href="Ledger.Conway.Conformance.Equivalence.html#10298" class="Bound">rs</a><a id="10300" class="Symbol">)</a> <a id="10302" class="Symbol">=</a>
  <a id="10306" href="Ledger.Conway.Utxo.html#3832" class="InductiveConstructor">L.regdrep</a> <a id="10316" class="Symbol">(</a><a id="10317" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10343" class="Symbol">_</a> <a id="10345" class="Symbol">(</a><a id="10346" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10357" class="Symbol">(</a><a id="10358" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="10371" href="Ledger.Conway.Conformance.Equivalence.html#10224" class="Bound">Γ</a><a id="10372" class="Symbol">)</a> <a id="10374" class="Symbol">(</a><a id="10375" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="10389" href="Ledger.Conway.Conformance.Equivalence.html#10228" class="Bound">s</a><a id="10390" class="Symbol">)</a> <a id="10392" href="Ledger.Conway.Conformance.Equivalence.html#10242" class="Bound">deposits</a> <a id="10401" href="Ledger.Conway.Conformance.Equivalence.html#10232" class="Bound">cert</a> <a id="10406" href="Ledger.Conway.Conformance.Equivalence.html#10251" class="Bound">wf</a><a id="10408" class="Symbol">)</a> <a id="10410" href="Ledger.Conway.Conformance.Equivalence.html#10298" class="Bound">rs</a><a id="10412" class="Symbol">)</a>
<a id="10414" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10440" class="Symbol">{</a><a id="10441" href="Ledger.Conway.Conformance.Equivalence.html#10441" class="Bound">Γ</a><a id="10442" class="Symbol">}</a> <a id="10444" class="Symbol">{</a><a id="10445" href="Ledger.Conway.Conformance.Equivalence.html#10445" class="Bound">s</a><a id="10446" class="Symbol">}</a> <a id="10448" class="Symbol">{</a><a id="10449" href="Ledger.Conway.Conformance.Equivalence.html#10449" class="Bound">cert</a> <a id="10454" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10456" class="Symbol">_}</a> <a id="10459" href="Ledger.Conway.Conformance.Equivalence.html#10459" class="Bound">deposits</a> <a id="10468" href="Ledger.Conway.Conformance.Equivalence.html#10468" class="Bound">wf</a> <a id="10471" class="Symbol">(</a><a id="10472" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10479" class="Symbol">(</a><a id="10480" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="10492" class="Symbol">(</a><a id="10493" href="Ledger.Conway.Conformance.Certs.html#5865" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="10513" class="Symbol">(_</a> <a id="10516" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10518" href="Ledger.Conway.Conformance.Equivalence.html#10518" class="Bound">h</a><a id="10519" class="Symbol">)))</a> <a id="10523" href="Ledger.Conway.Conformance.Equivalence.html#10523" class="Bound">rs</a><a id="10525" class="Symbol">)</a> <a id="10527" class="Symbol">=</a>
  <a id="10531" href="Ledger.Conway.Utxo.html#4444" class="InductiveConstructor">L.deregdrep</a> <a id="10543" class="Symbol">(</a><a id="10544" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="10553" class="Symbol">.</a><a id="10554" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="10571" class="Symbol">(</a><a id="10572" href="Ledger.Conway.Conformance.Equivalence.html#10468" class="Bound">wf</a> <a id="10575" class="Symbol">.</a><a id="10576" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="10582" class="Symbol">.</a><a id="10583" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10589" href="Ledger.Conway.Conformance.Equivalence.html#10518" class="Bound">h</a><a id="10590" class="Symbol">)</a> <a id="10592" class="Symbol">.</a><a id="10593" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="10598" class="Symbol">)</a>
              <a id="10614" class="Symbol">(</a><a id="10615" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10641" class="Symbol">_</a> <a id="10643" class="Symbol">(</a><a id="10644" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10655" class="Symbol">(</a><a id="10656" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="10669" href="Ledger.Conway.Conformance.Equivalence.html#10441" class="Bound">Γ</a><a id="10670" class="Symbol">)</a> <a id="10672" class="Symbol">(</a><a id="10673" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="10687" href="Ledger.Conway.Conformance.Equivalence.html#10445" class="Bound">s</a><a id="10688" class="Symbol">)</a> <a id="10690" href="Ledger.Conway.Conformance.Equivalence.html#10459" class="Bound">deposits</a> <a id="10699" href="Ledger.Conway.Conformance.Equivalence.html#10449" class="Bound">cert</a> <a id="10704" href="Ledger.Conway.Conformance.Equivalence.html#10468" class="Bound">wf</a><a id="10706" class="Symbol">)</a> <a id="10708" href="Ledger.Conway.Conformance.Equivalence.html#10523" class="Bound">rs</a><a id="10710" class="Symbol">)</a>
<a id="10712" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10738" class="Symbol">{</a><a id="10739" href="Ledger.Conway.Conformance.Equivalence.html#10739" class="Bound">Γ</a><a id="10740" class="Symbol">}</a> <a id="10742" class="Symbol">{</a><a id="10743" href="Ledger.Conway.Conformance.Equivalence.html#10743" class="Bound">s</a><a id="10744" class="Symbol">}</a> <a id="10746" class="Symbol">{</a><a id="10747" href="Ledger.Conway.Conformance.Equivalence.html#10747" class="Bound">cert</a> <a id="10752" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10754" class="Symbol">_}</a> <a id="10757" href="Ledger.Conway.Conformance.Equivalence.html#10757" class="Bound">deposits</a> <a id="10766" href="Ledger.Conway.Conformance.Equivalence.html#10766" class="Bound">wf</a> <a id="10769" class="Symbol">(</a><a id="10770" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10777" class="Symbol">(</a><a id="10778" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="10790" class="Symbol">(</a><a id="10791" href="Ledger.Conway.Conformance.Certs.html#6160" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="10810" href="Ledger.Conway.Conformance.Equivalence.html#10810" class="Bound">x</a><a id="10811" class="Symbol">))</a> <a id="10814" href="Ledger.Conway.Conformance.Equivalence.html#10814" class="Bound">rs</a><a id="10816" class="Symbol">)</a> <a id="10818" class="Symbol">=</a>
  <a id="10822" href="Ledger.Conway.Utxo.html#4651" class="InductiveConstructor">L.ccreghot</a><a id="10832" class="Symbol">(</a><a id="10833" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="10859" class="Symbol">_</a> <a id="10861" class="Symbol">(</a><a id="10862" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20491" class="Function">lemUpdCert</a> <a id="10873" class="Symbol">(</a><a id="10874" href="Ledger.Conway.Certs.html#2826" class="Field">L.CertEnv.pp</a> <a id="10887" href="Ledger.Conway.Conformance.Equivalence.html#10739" class="Bound">Γ</a><a id="10888" class="Symbol">)</a> <a id="10890" class="Symbol">(</a><a id="10891" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="10905" href="Ledger.Conway.Conformance.Equivalence.html#10743" class="Bound">s</a><a id="10906" class="Symbol">)</a> <a id="10908" href="Ledger.Conway.Conformance.Equivalence.html#10757" class="Bound">deposits</a> <a id="10917" href="Ledger.Conway.Conformance.Equivalence.html#10747" class="Bound">cert</a> <a id="10922" href="Ledger.Conway.Conformance.Equivalence.html#10766" class="Bound">wf</a><a id="10924" class="Symbol">)</a> <a id="10926" href="Ledger.Conway.Conformance.Equivalence.html#10814" class="Bound">rs</a><a id="10928" class="Symbol">)</a>

<a id="getValidCertDepositsC"></a><a id="10931" href="Ledger.Conway.Conformance.Equivalence.html#10931" class="Function">getValidCertDepositsC</a> <a id="10953" class="Symbol">:</a> <a id="10955" class="Symbol">∀</a> <a id="10957" href="Ledger.Conway.Conformance.Equivalence.html#10957" class="Bound">Γ</a> <a id="10959" href="Ledger.Conway.Conformance.Equivalence.html#10959" class="Bound">s</a> <a id="10961" class="Symbol">{</a><a id="10962" href="Ledger.Conway.Conformance.Equivalence.html#10962" class="Bound">s&#39;</a><a id="10964" class="Symbol">}</a> <a id="10966" href="Ledger.Conway.Conformance.Equivalence.html#10966" class="Bound">tx</a>
                     <a id="10990" class="Symbol">→</a> <a id="10992" class="Symbol">(</a><a id="10993" class="Keyword">let</a> <a id="10997" class="Keyword">open</a> <a id="11002" href="Ledger.Conway.Ledger.html#601" class="Module">C.LEnv</a> <a id="11009" href="Ledger.Conway.Conformance.Equivalence.html#10957" class="Bound">Γ</a> <a id="11011" class="Keyword">using</a> <a id="11017" class="Symbol">(</a><a id="11018" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="11025" class="Symbol">;</a> <a id="11027" href="Ledger.Conway.Ledger.html#631" class="Field">slot</a><a id="11031" class="Symbol">;</a> <a id="11033" href="Ledger.Conway.Ledger.html#715" class="Field">enactState</a><a id="11043" class="Symbol">)</a>
                            <a id="11073" class="Keyword">open</a> <a id="11078" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="11085" class="Symbol">(</a><a id="11086" href="Ledger.Conway.Conformance.Equivalence.html#10966" class="Bound">tx</a> <a id="11089" class="Symbol">.</a><a id="11090" href="Ledger.Conway.Transaction.html#4259" class="Field">Tx.body</a><a id="11097" class="Symbol">)</a> <a id="11099" class="Keyword">using</a> <a id="11105" class="Symbol">(</a><a id="11106" href="Ledger.Conway.Transaction.html#2948" class="Field">txcerts</a><a id="11113" class="Symbol">;</a> <a id="11115" href="Ledger.Conway.Transaction.html#3010" class="Field">txvote</a><a id="11121" class="Symbol">;</a> <a id="11123" href="Ledger.Conway.Transaction.html#2982" class="Field">txwdrls</a><a id="11130" class="Symbol">)</a>
                            <a id="11160" class="Keyword">open</a> <a id="11165" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="11174" href="Ledger.Conway.Conformance.Equivalence.html#10959" class="Bound">s</a>
                            <a id="11204" class="Keyword">open</a> <a id="11209" href="Ledger.Conway.Utxo.html#1390" class="Module">C.UTxOState</a> <a id="11221" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a> <a id="11228" class="Keyword">using</a> <a id="11234" class="Symbol">(</a><a id="11235" href="Ledger.Conway.Utxo.html#1498" class="Field">deposits</a><a id="11243" class="Symbol">)</a>
                            <a id="11273" href="Ledger.Conway.Conformance.Equivalence.html#11273" class="Bound">cc</a> <a id="11276" class="Symbol">=</a> <a id="11278" href="Ledger.Conway.Ledger.html#2214" class="Function">C.allColdCreds</a> <a id="11293" href="Ledger.Conway.Conformance.Ledger.html#805" class="Function">govSt</a> <a id="11299" href="Ledger.Conway.Ledger.html#715" class="Function">enactState</a>
                       <a id="11333" class="Symbol">)</a>
                     <a id="11356" class="Symbol">→</a> <a id="11358" href="Ledger.Conway.Conformance.Equivalence.html#8530" class="Function">WellformedLState</a> <a id="11375" href="Ledger.Conway.Conformance.Equivalence.html#10959" class="Bound">s</a>
                     <a id="11398" class="Symbol">→</a> <a id="11400" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="11408" href="Ledger.Conway.Conformance.Equivalence.html#10966" class="Bound">tx</a> <a id="11411" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11413" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="11439" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Types.Epoch.html#804}{\htmlId{11443}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Conway.Ledger.html#631}{\htmlId{11449}{\htmlClass{Function}{\text{slot}}}}\, \\ \,\href{Ledger.Conway.Ledger.html#689}{\htmlId{11456}{\htmlClass{Function}{\text{pparams}}}}\, \\ \,\href{Ledger.Conway.Transaction.html#3010}{\htmlId{11466}{\htmlClass{Function}{\text{txvote}}}}\, \\ \,\href{Ledger.Conway.Transaction.html#2982}{\htmlId{11475}{\htmlClass{Function}{\text{txwdrls}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#11273}{\htmlId{11485}{\htmlClass{Bound}{\text{cc}}}}\, \end{pmatrix}$</a> <a id="11490" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">C.⊢</a> <a id="11494" href="Ledger.Conway.Conformance.Ledger.html#831" class="Function">certState</a> <a id="11504" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">⇀⦇</a> <a id="11507" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="11515" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">,CERTS⦈</a> <a id="11523" href="Ledger.Conway.Conformance.Equivalence.html#10962" class="Bound">s&#39;</a>
                     <a id="11547" class="Symbol">→</a> <a id="11549" href="Ledger.Conway.Utxo.html#3336" class="Datatype">L.ValidCertDeposits</a> <a id="11569" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="11577" href="Ledger.Conway.Utxo.html#1498" class="Function">deposits</a> <a id="11586" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a>
<a id="11594" href="Ledger.Conway.Conformance.Equivalence.html#10931" class="Function">getValidCertDepositsC</a> <a id="11616" href="Ledger.Conway.Conformance.Equivalence.html#11616" class="Bound">Γ</a> <a id="11618" href="Ledger.Conway.Conformance.Equivalence.html#11618" class="Bound">s</a> <a id="11620" href="Ledger.Conway.Conformance.Equivalence.html#11620" class="Bound">tx</a> <a id="11623" href="Ledger.Conway.Conformance.Equivalence.html#11623" class="Bound">wf</a> <a id="11626" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="11631" class="Symbol">(</a><a id="11632" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="11636" class="Symbol">(</a><a id="11637" href="Ledger.Conway.Conformance.Certs.html#7173" class="InductiveConstructor">C.CERT-base</a> <a id="11649" class="Symbol">_</a> <a id="11651" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11653" href="Ledger.Conway.Conformance.Equivalence.html#11653" class="Bound">step</a><a id="11657" class="Symbol">))</a> <a id="11660" class="Symbol">=</a>
  <a id="11664" href="Ledger.Conway.Conformance.Equivalence.html#8649" class="Function">getValidCertDepositsCERTS</a> <a id="11690" class="Symbol">(</a><a id="11691" href="Ledger.Conway.Utxo.html#1498" class="Field">C.UTxOState.deposits</a> <a id="11712" class="Symbol">(</a><a id="11713" href="Ledger.Conway.Conformance.Ledger.html#778" class="Field">C.LState.utxoSt</a> <a id="11729" href="Ledger.Conway.Conformance.Equivalence.html#11618" class="Bound">s</a><a id="11730" class="Symbol">))</a> <a id="11733" href="Ledger.Conway.Conformance.Equivalence.html#11623" class="Bound">wf</a> <a id="11736" href="Ledger.Conway.Conformance.Equivalence.html#11653" class="Bound">step</a>

<a id="lemUtxowDeposits"></a><a id="11742" href="Ledger.Conway.Conformance.Equivalence.html#11742" class="Function">lemUtxowDeposits</a> <a id="11759" class="Symbol">:</a> <a id="11761" class="Symbol">∀</a> <a id="11763" class="Symbol">{</a><a id="11764" href="Ledger.Conway.Conformance.Equivalence.html#11764" class="Bound">Γ</a> <a id="11766" href="Ledger.Conway.Conformance.Equivalence.html#11766" class="Bound">s</a> <a id="11768" href="Ledger.Conway.Conformance.Equivalence.html#11768" class="Bound">s&#39;</a> <a id="11771" href="Ledger.Conway.Conformance.Equivalence.html#11771" class="Bound">tx</a><a id="11773" class="Symbol">}</a>
                      <a id="11797" class="Symbol">(</a><a id="11798" class="Keyword">let</a> <a id="11802" class="Keyword">open</a> <a id="11807" href="Ledger.Conway.Utxo.html#1038" class="Module">C.UTxOEnv</a> <a id="11817" href="Ledger.Conway.Conformance.Equivalence.html#11764" class="Bound">Γ</a> <a id="11819" class="Keyword">using</a> <a id="11825" class="Symbol">(</a><a id="11826" href="Ledger.Conway.Utxo.html#1092" class="Field">pparams</a><a id="11833" class="Symbol">))</a>
                  <a id="11854" class="Symbol">→</a> <a id="11856" href="Ledger.Conway.Transaction.html#4331" class="Field">isValid</a> <a id="11864" href="Ledger.Conway.Conformance.Equivalence.html#11771" class="Bound">tx</a> <a id="11867" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11869" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="11892" class="Symbol">→</a> <a id="11894" class="Symbol">(</a><a id="11895" href="Ledger.Conway.Conformance.Equivalence.html#11895" class="Bound">r</a> <a id="11897" class="Symbol">:</a> <a id="11899" href="Ledger.Conway.Conformance.Equivalence.html#11764" class="Bound">Γ</a> <a id="11901" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">C.⊢</a> <a id="11905" href="Ledger.Conway.Conformance.Equivalence.html#11766" class="Bound">s</a> <a id="11907" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">⇀⦇</a> <a id="11910" href="Ledger.Conway.Conformance.Equivalence.html#11771" class="Bound">tx</a> <a id="11913" href="Ledger.Conway.Conformance.Utxow.html#596" class="Datatype Operator">,UTXOW⦈</a> <a id="11921" href="Ledger.Conway.Conformance.Equivalence.html#11768" class="Bound">s&#39;</a><a id="11923" class="Symbol">)</a>
                  <a id="11943" class="Symbol">→</a> <a id="11945" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2005" class="Function">utxowDeposits</a> <a id="11959" href="Ledger.Conway.Conformance.Equivalence.html#11895" class="Bound">r</a> <a id="11961" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11963" href="Ledger.Conway.Utxo.html#7988" class="Function">L.updateDeposits</a> <a id="11980" href="Ledger.Conway.Utxo.html#1092" class="Function">pparams</a> <a id="11988" class="Symbol">(</a><a id="11989" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="11994" href="Ledger.Conway.Conformance.Equivalence.html#11771" class="Bound">tx</a><a id="11996" class="Symbol">)</a> <a id="11998" class="Symbol">(</a><a id="11999" href="Ledger.Conway.Utxo.html#1498" class="Field">C.UTxOState.deposits</a> <a id="12020" href="Ledger.Conway.Conformance.Equivalence.html#11768" class="Bound">s&#39;</a><a id="12022" class="Symbol">)</a>
<a id="12024" href="Ledger.Conway.Conformance.Equivalence.html#11742" class="Function">lemUtxowDeposits</a> <a id="12041" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12046" class="Symbol">(</a><a id="12047" href="Ledger.Conway.Conformance.Utxow.html#2445" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
                        <a id="12084" class="Symbol">(</a><a id="12085" href="Ledger.Conway.Conformance.Utxo.html#3860" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="12103" class="Symbol">_</a> <a id="12105" class="Symbol">_</a> <a id="12107" class="Symbol">_</a> <a id="12109" class="Symbol">_</a> <a id="12111" class="Symbol">_</a> <a id="12113" class="Symbol">_</a> <a id="12115" class="Symbol">_</a> <a id="12117" class="Symbol">_</a> <a id="12119" class="Symbol">_</a> <a id="12121" class="Symbol">_</a> <a id="12123" class="Symbol">_</a> <a id="12125" class="Symbol">_</a> <a id="12127" class="Symbol">_</a> <a id="12129" class="Symbol">_</a> <a id="12131" class="Symbol">_</a> <a id="12133" class="Symbol">_</a> <a id="12135" class="Symbol">_</a> <a id="12137" class="Symbol">_</a> <a id="12139" class="Symbol">_</a> <a id="12141" class="Symbol">_</a>
                          <a id="12169" class="Symbol">(</a><a id="12170" href="Ledger.Conway.Conformance.Utxo.html#1161" class="InductiveConstructor">C.Scripts-Yes</a> <a id="12184" class="Symbol">_)))</a> <a id="12189" class="Symbol">=</a> <a id="12191" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="12197" class="Keyword">instance</a>

  <a id="LEDGERFromConf"></a><a id="12209" href="Ledger.Conway.Conformance.Equivalence.html#12209" class="Function">LEDGERFromConf</a> <a id="12224" class="Symbol">:</a> <a id="12226" class="Symbol">∀</a> <a id="12228" class="Symbol">{</a><a id="12229" href="Ledger.Conway.Conformance.Equivalence.html#12229" class="Bound">Γ</a> <a id="12231" href="Ledger.Conway.Conformance.Equivalence.html#12231" class="Bound">s</a> <a id="12233" href="Ledger.Conway.Conformance.Equivalence.html#12233" class="Bound">tx</a> <a id="12236" href="Ledger.Conway.Conformance.Equivalence.html#12236" class="Bound">s&#39;</a><a id="12238" class="Symbol">}</a> <a id="12240" class="Symbol">→</a> <a id="12242" href="Ledger.Conway.Conformance.Equivalence.html#8530" class="Function">WellformedLState</a> <a id="12259" href="Ledger.Conway.Conformance.Equivalence.html#12231" class="Bound">s</a>
                                    <a id="12297" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="12299" href="Ledger.Conway.Conformance.Equivalence.html#12229" class="Bound">Γ</a> <a id="12301" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="12305" href="Ledger.Conway.Conformance.Equivalence.html#12231" class="Bound">s</a> <a id="12307" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="12310" href="Ledger.Conway.Conformance.Equivalence.html#12233" class="Bound">tx</a> <a id="12313" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="12322" href="Ledger.Conway.Conformance.Equivalence.html#12236" class="Bound">s&#39;</a>
                                    <a id="12361" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="12363" href="Ledger.Conway.Conformance.Equivalence.html#12229" class="Bound">Γ</a> <a id="12365" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="12369" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12374" href="Ledger.Conway.Conformance.Equivalence.html#12231" class="Bound">s</a> <a id="12376" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="12379" href="Ledger.Conway.Conformance.Equivalence.html#12233" class="Bound">tx</a> <a id="12382" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="12391" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12396" href="Ledger.Conway.Conformance.Equivalence.html#12236" class="Bound">s&#39;</a>
  <a id="12401" href="Ledger.Conway.Conformance.Equivalence.html#12209" class="Function">LEDGERFromConf</a> <a id="12416" class="Symbol">.</a><a id="12417" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12423" class="Symbol">_</a> <a id="12425" class="Symbol">(</a><a id="12426" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="12438" href="Ledger.Conway.Conformance.Equivalence.html#12438" class="Bound">invalid</a> <a id="12446" href="Ledger.Conway.Conformance.Equivalence.html#12446" class="Bound">utxow</a><a id="12451" class="Symbol">)</a> <a id="12453" class="Keyword">with</a> <a id="12458" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="12463" href="Ledger.Conway.Conformance.Equivalence.html#12438" class="Bound">invalid</a> <a id="12471" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="12477" href="Ledger.Conway.Conformance.Equivalence.html#12446" class="Bound">utxow</a>
  <a id="12485" class="Symbol">...</a> <a id="12489" class="Symbol">|</a> <a id="12491" href="Ledger.Conway.Conformance.Equivalence.html#12491" class="Bound">utxow&#39;</a> <a id="12498" class="Keyword">rewrite</a> <a id="12506" href="Ledger.Conway.Conformance.Equivalence.html#1969" class="Function">lemInvalidDepositsC</a> <a id="12526" class="Bound">invalid</a> <a id="12534" class="Bound">utxow</a> <a id="12540" class="Symbol">=</a> <a id="12542" href="Ledger.Conway.Ledger.html#3693" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="12554" class="Bound">invalid</a> <a id="12562" href="Ledger.Conway.Conformance.Equivalence.html#12491" class="Bound">utxow&#39;</a>
  <a id="12571" href="Ledger.Conway.Conformance.Equivalence.html#12209" class="Function">LEDGERFromConf</a> <a id="12586" class="Symbol">{</a><a id="12587" href="Ledger.Conway.Conformance.Equivalence.html#12587" class="Bound">Γ</a><a id="12588" class="Symbol">}</a> <a id="12590" class="Symbol">{</a><a id="12591" href="Ledger.Conway.Conformance.Equivalence.html#12591" class="Bound">s</a><a id="12592" class="Symbol">}</a> <a id="12594" class="Symbol">{</a><a id="12595" href="Ledger.Conway.Conformance.Equivalence.html#12595" class="Bound">tx</a><a id="12597" class="Symbol">}</a> <a id="12599" class="Symbol">{</a><a id="12600" href="Ledger.Conway.Conformance.Equivalence.html#12600" class="Bound">s&#39;</a><a id="12602" class="Symbol">}</a> <a id="12604" class="Symbol">.</a><a id="12605" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12611" href="Ledger.Conway.Conformance.Equivalence.html#12611" class="Bound">wf</a> <a id="12614" class="Symbol">(</a><a id="12615" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="12627" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12632" href="Ledger.Conway.Conformance.Equivalence.html#12632" class="Bound">utxow</a> <a id="12638" href="Ledger.Conway.Conformance.Equivalence.html#12638" class="Bound">certs</a> <a id="12644" href="Ledger.Conway.Conformance.Equivalence.html#12644" class="Bound">gov</a><a id="12647" class="Symbol">)</a> <a id="12649" class="Symbol">=</a>
    <a id="12655" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="12661" class="Symbol">(λ</a> <a id="12664" href="Ledger.Conway.Conformance.Equivalence.html#12664" class="Bound">•</a> <a id="12666" class="Symbol">→</a> <a id="12668" href="Ledger.Conway.Conformance.Equivalence.html#12587" class="Bound">Γ</a> <a id="12670" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="12674" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12679" href="Ledger.Conway.Conformance.Equivalence.html#12591" class="Bound">s</a> <a id="12681" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="12684" href="Ledger.Conway.Conformance.Equivalence.html#12595" class="Bound">tx</a> <a id="12687" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.html#12664}{\htmlId{12698}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#12896}{\htmlId{12702}{\htmlClass{Function}{\text{govSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{12711}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#12917}{\htmlId{12716}{\htmlClass{Function}{\text{certSt&#39;}}}}\, \end{pmatrix}$</a><a id="12725" class="Symbol">)</a> <a id="12727" href="Ledger.Conway.Conformance.Equivalence.html#13266" class="Function">eqUtxo</a> <a id="12734" href="Ledger.Conway.Conformance.Equivalence.html#13410" class="Function">ledger&#39;</a>
    <a id="12746" class="Keyword">where</a>
      <a id="12758" class="Keyword">open</a> <a id="12763" href="Ledger.Conway.Ledger.html#601" class="Module">C.LEnv</a> <a id="12770" href="Ledger.Conway.Conformance.Equivalence.html#12587" class="Bound">Γ</a>

      <a id="12779" class="Keyword">open</a> <a id="12784" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="12793" href="Ledger.Conway.Conformance.Equivalence.html#12591" class="Bound">s</a> <a id="12795" class="Keyword">renaming</a> <a id="12804" class="Symbol">(</a><a id="12805" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="12815" class="Symbol">to</a> <a id="12818" class="Field">certSt</a><a id="12824" class="Symbol">)</a>
      <a id="12832" class="Keyword">open</a> <a id="12837" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="12846" href="Ledger.Conway.Conformance.Equivalence.html#12600" class="Bound">s&#39;</a> <a id="12849" class="Keyword">using</a> <a id="12855" class="Symbol">()</a> <a id="12858" class="Keyword">renaming</a> <a id="12867" class="Symbol">(</a><a id="12868" href="Ledger.Conway.Conformance.Ledger.html#778" class="Field">utxoSt</a> <a id="12875" class="Symbol">to</a> <a id="12878" class="Field">utxoSt&#39;</a><a id="12885" class="Symbol">;</a> <a id="12887" href="Ledger.Conway.Conformance.Ledger.html#805" class="Field">govSt</a> <a id="12893" class="Symbol">to</a> <a id="12896" class="Field">govSt&#39;</a><a id="12902" class="Symbol">;</a> <a id="12904" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="12914" class="Symbol">to</a> <a id="12917" class="Field">certSt&#39;</a><a id="12924" class="Symbol">)</a>

      <a id="12933" class="Keyword">open</a> <a id="12938" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="12945" class="Symbol">(</a><a id="12946" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="12951" href="Ledger.Conway.Conformance.Equivalence.html#12595" class="Bound">tx</a><a id="12953" class="Symbol">)</a>
      <a id="12961" class="Keyword">open</a> <a id="12966" href="Ledger.Conway.Utxo.html#1390" class="Module">C.UTxOState</a> <a id="12978" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a> <a id="12985" class="Keyword">using</a> <a id="12991" class="Symbol">(</a><a id="12992" href="Ledger.Conway.Utxo.html#1498" class="Field">deposits</a><a id="13000" class="Symbol">)</a>

      <a id="13009" href="Ledger.Conway.Conformance.Equivalence.html#13009" class="Function">valid-deps</a> <a id="13020" class="Symbol">:</a> <a id="13022" href="Ledger.Conway.Utxo.html#3336" class="Datatype">L.ValidCertDeposits</a> <a id="13042" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="13050" href="Ledger.Conway.Utxo.html#1498" class="Function">deposits</a> <a id="13059" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a>
      <a id="13073" href="Ledger.Conway.Conformance.Equivalence.html#13009" class="Function">valid-deps</a> <a id="13084" class="Symbol">=</a> <a id="13086" href="Ledger.Conway.Conformance.Equivalence.html#10931" class="Function">getValidCertDepositsC</a> <a id="13108" href="Ledger.Conway.Conformance.Equivalence.html#12587" class="Bound">Γ</a> <a id="13110" href="Ledger.Conway.Conformance.Equivalence.html#12591" class="Bound">s</a> <a id="13112" href="Ledger.Conway.Conformance.Equivalence.html#12595" class="Bound">tx</a> <a id="13115" href="Ledger.Conway.Conformance.Equivalence.html#12611" class="Bound">wf</a> <a id="13118" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13123" href="Ledger.Conway.Conformance.Equivalence.html#12638" class="Bound">certs</a>

      <a id="13136" href="Ledger.Conway.Conformance.Equivalence.html#13136" class="Function">utxow&#39;</a> <a id="13143" class="Symbol">:</a> <a id="13145" class="Symbol">_</a> <a id="13147" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">L.⊢</a> <a id="13151" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a> <a id="13158" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">⇀⦇</a> <a id="13161" href="Ledger.Conway.Conformance.Equivalence.html#12595" class="Bound">tx</a> <a id="13164" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">,UTXOW⦈</a> <a id="13172" class="Symbol">(</a><a id="13173" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="13185" class="Symbol">(</a><a id="13186" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2005" class="Function">utxowDeposits</a> <a id="13200" href="Ledger.Conway.Conformance.Equivalence.html#12632" class="Bound">utxow</a><a id="13205" class="Symbol">)</a> <a id="13207" href="Ledger.Conway.Conformance.Equivalence.html#12878" class="Function">utxoSt&#39;</a><a id="13214" class="Symbol">)</a>
      <a id="13222" href="Ledger.Conway.Conformance.Equivalence.html#13136" class="Function">utxow&#39;</a> <a id="13229" class="Symbol">=</a> <a id="13231" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="13236" href="Ledger.Conway.Conformance.Equivalence.html#13009" class="Function">valid-deps</a> <a id="13247" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="13253" href="Ledger.Conway.Conformance.Equivalence.html#12632" class="Bound">utxow</a>

      <a id="13266" href="Ledger.Conway.Conformance.Equivalence.html#13266" class="Function">eqUtxo</a> <a id="13273" class="Symbol">:</a> <a id="13275" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="13287" class="Symbol">(</a><a id="13288" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2005" class="Function">utxowDeposits</a> <a id="13302" href="Ledger.Conway.Conformance.Equivalence.html#12632" class="Bound">utxow</a><a id="13307" class="Symbol">)</a> <a id="13309" href="Ledger.Conway.Conformance.Equivalence.html#12878" class="Function">utxoSt&#39;</a> <a id="13317" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13319" href="Ledger.Conway.Conformance.Equivalence.html#12878" class="Function">utxoSt&#39;</a>
      <a id="13333" href="Ledger.Conway.Conformance.Equivalence.html#13266" class="Function">eqUtxo</a> <a id="13340" class="Symbol">=</a> <a id="13342" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="13347" class="Symbol">(λ</a> <a id="13350" href="Ledger.Conway.Conformance.Equivalence.html#13350" class="Bound">•</a> <a id="13352" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{13356}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{13360}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#13350}{\htmlId{13364}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{13368}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="13371" class="Symbol">)</a> <a id="13373" class="Symbol">(</a><a id="13374" href="Ledger.Conway.Conformance.Equivalence.html#11742" class="Function">lemUtxowDeposits</a> <a id="13391" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13396" href="Ledger.Conway.Conformance.Equivalence.html#12632" class="Bound">utxow</a><a id="13401" class="Symbol">)</a>

      <a id="13410" href="Ledger.Conway.Conformance.Equivalence.html#13410" class="Function">ledger&#39;</a> <a id="13418" class="Symbol">:</a> <a id="13420" href="Ledger.Conway.Conformance.Equivalence.html#12587" class="Bound">Γ</a> <a id="13422" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L.⊢</a> <a id="13426" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13431" href="Ledger.Conway.Conformance.Equivalence.html#12591" class="Bound">s</a> <a id="13433" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">⇀⦇</a> <a id="13436" href="Ledger.Conway.Conformance.Equivalence.html#12595" class="Bound">tx</a> <a id="13439" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">,LEDGER⦈</a> <a id="13448" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">L.⟦</a> <a id="13452" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#982" class="Function">setDeposits</a> <a id="13464" class="Symbol">(</a><a id="13465" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2005" class="Function">utxowDeposits</a> <a id="13479" href="Ledger.Conway.Conformance.Equivalence.html#12632" class="Bound">utxow</a><a id="13484" class="Symbol">)</a> <a id="13486" href="Ledger.Conway.Conformance.Equivalence.html#12878" class="Function">utxoSt&#39;</a>
                                              <a id="13540" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">,</a> <a id="13542" href="Ledger.Conway.Conformance.Equivalence.html#12896" class="Function">govSt&#39;</a>
                                              <a id="13595" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">,</a> <a id="13597" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13602" href="Ledger.Conway.Conformance.Equivalence.html#12917" class="Function">certSt&#39;</a> <a id="13610" href="Ledger.Conway.Ledger.html#901" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="13619" href="Ledger.Conway.Conformance.Equivalence.html#13410" class="Function">ledger&#39;</a> <a id="13627" class="Symbol">=</a> <a id="13629" href="Ledger.Conway.Ledger.html#3640" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="13641" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13646" href="Ledger.Conway.Conformance.Equivalence.html#13136" class="Function">utxow&#39;</a> <a id="13653" class="Symbol">(</a><a id="13654" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13659" href="Ledger.Conway.Conformance.Equivalence.html#12638" class="Bound">certs</a><a id="13664" class="Symbol">)</a> <a id="13666" href="Ledger.Conway.Conformance.Equivalence.html#12644" class="Bound">gov</a>

<a id="13671" class="Keyword">open</a> <a id="13676" href="Relation.Binary.Structures.html#1550" class="Module">IsEquivalence</a> <a id="13690" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13012" class="Function">≡ᵈ-isEquivalence</a> <a id="13707" class="Keyword">renaming</a> <a id="13716" class="Symbol">(</a><a id="13717" href="Relation.Binary.Structures.html#1596" class="Field">refl</a> <a id="13722" class="Symbol">to</a> <a id="13725" class="Field">≡ᵈ-refl</a><a id="13732" class="Symbol">;</a> <a id="13734" href="Relation.Binary.Structures.html#1622" class="Field">sym</a> <a id="13738" class="Symbol">to</a> <a id="13741" class="Field">≡ᵈ-sym</a><a id="13747" class="Symbol">;</a> <a id="13749" href="Relation.Binary.Structures.html#1648" class="Field">trans</a> <a id="13755" class="Symbol">to</a> <a id="13758" class="Field">≡ᵈ-trans</a><a id="13766" class="Symbol">)</a>

<a id="lemCERTS&#39;DepositsC"></a><a id="13769" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="13788" class="Symbol">:</a> <a id="13790" class="Symbol">∀</a> <a id="13792" class="Symbol">{</a><a id="13793" href="Ledger.Conway.Conformance.Equivalence.html#13793" class="Bound">Γ</a> <a id="13795" href="Ledger.Conway.Conformance.Equivalence.html#13795" class="Bound">s</a> <a id="13797" href="Ledger.Conway.Conformance.Equivalence.html#13797" class="Bound">dcerts</a> <a id="13804" href="Ledger.Conway.Conformance.Equivalence.html#13804" class="Bound">s&#39;</a><a id="13806" class="Symbol">}</a> <a id="13808" class="Symbol">(</a><a id="13809" class="Keyword">open</a> <a id="13814" href="Ledger.Conway.Certs.html#2771" class="Module">C.CertEnv</a> <a id="13824" href="Ledger.Conway.Conformance.Equivalence.html#13793" class="Bound">Γ</a> <a id="13826" class="Keyword">using</a> <a id="13832" class="Symbol">(</a><a id="13833" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="13835" class="Symbol">))</a>
                   <a id="13857" class="Symbol">→</a> <a id="13859" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="13886" class="Symbol">{</a><a id="13887" class="Argument">sts</a> <a id="13891" class="Symbol">=</a> <a id="13893" href="Ledger.Conway.Conformance.Certs.html#6451" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="13908" class="Symbol">}</a> <a id="13910" href="Ledger.Conway.Conformance.Equivalence.html#13793" class="Bound">Γ</a> <a id="13912" href="Ledger.Conway.Conformance.Equivalence.html#13795" class="Bound">s</a> <a id="13914" href="Ledger.Conway.Conformance.Equivalence.html#13797" class="Bound">dcerts</a> <a id="13921" href="Ledger.Conway.Conformance.Equivalence.html#13804" class="Bound">s&#39;</a>
                   <a id="13943" class="Symbol">→</a> <a id="13945" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="13959" href="Ledger.Conway.Conformance.Equivalence.html#13804" class="Bound">s&#39;</a> <a id="13962" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13964" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="13966" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="13978" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="13981" href="Ledger.Conway.Conformance.Equivalence.html#13797" class="Bound">dcerts</a> <a id="13988" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="13990" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="14002" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="14005" href="Ledger.Conway.Conformance.Equivalence.html#13797" class="Bound">dcerts</a> <a id="14012" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="14014" class="Symbol">(</a><a id="14015" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="14029" href="Ledger.Conway.Conformance.Equivalence.html#13795" class="Bound">s</a><a id="14030" class="Symbol">)</a>
<a id="14032" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14051" class="Symbol">(</a><a id="14052" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="14060" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="14066" class="Symbol">)</a>                                  <a id="14101" class="Symbol">=</a> <a id="14103" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="14108" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14127" class="Symbol">(</a><a id="14128" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14135" class="Symbol">(</a><a id="14136" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="14149" class="Symbol">(</a><a id="14150" href="Ledger.Conway.Conformance.Certs.html#4114" class="InductiveConstructor">C.DELEG-delegate</a>   <a id="14169" class="Symbol">_))</a> <a id="14173" href="Ledger.Conway.Conformance.Equivalence.html#14173" class="Bound">rs</a><a id="14175" class="Symbol">)</a> <a id="14177" class="Symbol">=</a> <a id="14179" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14198" href="Ledger.Conway.Conformance.Equivalence.html#14173" class="Bound">rs</a>
<a id="14201" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14220" class="Symbol">(</a><a id="14221" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14228" class="Symbol">(</a><a id="14229" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="14242" class="Symbol">(</a><a id="14243" href="Ledger.Conway.Conformance.Certs.html#4743" class="InductiveConstructor">C.DELEG-dereg</a>      <a id="14262" class="Symbol">_))</a> <a id="14266" href="Ledger.Conway.Conformance.Equivalence.html#14266" class="Bound">rs</a><a id="14268" class="Symbol">)</a> <a id="14270" class="Symbol">=</a> <a id="14272" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14291" href="Ledger.Conway.Conformance.Equivalence.html#14266" class="Bound">rs</a>
<a id="14294" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14313" class="Symbol">(</a><a id="14314" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14321" class="Symbol">(</a><a id="14322" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="14335" class="Symbol">(</a><a id="14336" href="Ledger.Conway.Conformance.Certs.html#5107" class="InductiveConstructor">C.DELEG-reg</a>        <a id="14355" class="Symbol">_))</a> <a id="14359" href="Ledger.Conway.Conformance.Equivalence.html#14359" class="Bound">rs</a><a id="14361" class="Symbol">)</a> <a id="14363" class="Symbol">=</a> <a id="14365" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14384" href="Ledger.Conway.Conformance.Equivalence.html#14359" class="Bound">rs</a>
<a id="14387" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14406" class="Symbol">(</a><a id="14407" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14414" class="Symbol">(</a><a id="14415" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a> <a id="14427" class="Symbol">(</a><a id="14428" href="Ledger.Conway.Conformance.Certs.html#3740" class="InductiveConstructor">C.POOL-regpool</a>      <a id="14448" class="Symbol">_))</a> <a id="14452" href="Ledger.Conway.Conformance.Equivalence.html#14452" class="Bound">rs</a><a id="14454" class="Symbol">)</a> <a id="14456" class="Symbol">=</a> <a id="14458" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14477" href="Ledger.Conway.Conformance.Equivalence.html#14452" class="Bound">rs</a>
<a id="14480" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14499" class="Symbol">(</a><a id="14500" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14507" class="Symbol">(</a><a id="14508" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a> <a id="14520" href="Ledger.Conway.Conformance.Certs.html#3939" class="InductiveConstructor">C.POOL-retirepool</a><a id="14537" class="Symbol">)</a>       <a id="14545" href="Ledger.Conway.Conformance.Equivalence.html#14545" class="Bound">rs</a><a id="14547" class="Symbol">)</a> <a id="14549" class="Symbol">=</a> <a id="14551" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14570" href="Ledger.Conway.Conformance.Equivalence.html#14545" class="Bound">rs</a>
<a id="14573" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14592" class="Symbol">(</a><a id="14593" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14600" class="Symbol">(</a><a id="14601" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="14613" class="Symbol">(</a><a id="14614" href="Ledger.Conway.Conformance.Certs.html#5499" class="InductiveConstructor">C.GOVCERT-regdrep</a>   <a id="14634" class="Symbol">_))</a> <a id="14638" href="Ledger.Conway.Conformance.Equivalence.html#14638" class="Bound">rs</a><a id="14640" class="Symbol">)</a> <a id="14642" class="Symbol">=</a> <a id="14644" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14663" href="Ledger.Conway.Conformance.Equivalence.html#14638" class="Bound">rs</a>
<a id="14666" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14685" class="Symbol">(</a><a id="14686" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14693" class="Symbol">(</a><a id="14694" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="14706" class="Symbol">(</a><a id="14707" href="Ledger.Conway.Conformance.Certs.html#5865" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="14727" class="Symbol">_))</a> <a id="14731" href="Ledger.Conway.Conformance.Equivalence.html#14731" class="Bound">rs</a><a id="14733" class="Symbol">)</a> <a id="14735" class="Symbol">=</a> <a id="14737" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14756" href="Ledger.Conway.Conformance.Equivalence.html#14731" class="Bound">rs</a>
<a id="14759" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14778" class="Symbol">(</a><a id="14779" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14786" class="Symbol">(</a><a id="14787" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="14799" class="Symbol">(</a><a id="14800" href="Ledger.Conway.Conformance.Certs.html#6160" class="InductiveConstructor">C.GOVCERT-ccreghot</a>  <a id="14820" class="Symbol">_))</a> <a id="14824" href="Ledger.Conway.Conformance.Equivalence.html#14824" class="Bound">rs</a><a id="14826" class="Symbol">)</a> <a id="14828" class="Symbol">=</a> <a id="14830" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="14849" href="Ledger.Conway.Conformance.Equivalence.html#14824" class="Bound">rs</a>

<a id="lemCERTSDepositsC"></a><a id="14853" href="Ledger.Conway.Conformance.Equivalence.html#14853" class="Function">lemCERTSDepositsC</a> <a id="14871" class="Symbol">:</a> <a id="14873" class="Symbol">∀</a> <a id="14875" class="Symbol">{</a><a id="14876" href="Ledger.Conway.Conformance.Equivalence.html#14876" class="Bound">Γ</a> <a id="14878" href="Ledger.Conway.Conformance.Equivalence.html#14878" class="Bound">s</a> <a id="14880" href="Ledger.Conway.Conformance.Equivalence.html#14880" class="Bound">txcerts</a> <a id="14888" href="Ledger.Conway.Conformance.Equivalence.html#14888" class="Bound">s&#39;</a><a id="14890" class="Symbol">}</a> <a id="14892" class="Symbol">(</a><a id="14893" class="Keyword">open</a> <a id="14898" href="Ledger.Conway.Certs.html#2771" class="Module">C.CertEnv</a> <a id="14908" href="Ledger.Conway.Conformance.Equivalence.html#14876" class="Bound">Γ</a> <a id="14910" class="Keyword">using</a> <a id="14916" class="Symbol">(</a><a id="14917" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="14919" class="Symbol">))</a>
                  <a id="14940" class="Symbol">→</a> <a id="14942" href="Ledger.Conway.Conformance.Equivalence.html#14876" class="Bound">Γ</a> <a id="14944" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">C.⊢</a> <a id="14948" href="Ledger.Conway.Conformance.Equivalence.html#14878" class="Bound">s</a> <a id="14950" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">⇀⦇</a> <a id="14953" href="Ledger.Conway.Conformance.Equivalence.html#14880" class="Bound">txcerts</a> <a id="14961" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">,CERTS⦈</a> <a id="14969" href="Ledger.Conway.Conformance.Equivalence.html#14888" class="Bound">s&#39;</a>
                  <a id="14990" class="Symbol">→</a> <a id="14992" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="15006" href="Ledger.Conway.Conformance.Equivalence.html#14888" class="Bound">s&#39;</a> <a id="15009" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15011" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="15013" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="15025" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="15028" href="Ledger.Conway.Conformance.Equivalence.html#14880" class="Bound">txcerts</a> <a id="15036" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="15038" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="15050" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="15053" href="Ledger.Conway.Conformance.Equivalence.html#14880" class="Bound">txcerts</a> <a id="15061" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="15063" class="Symbol">(</a><a id="15064" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="15078" href="Ledger.Conway.Conformance.Equivalence.html#14878" class="Bound">s</a><a id="15079" class="Symbol">)</a>
<a id="15081" href="Ledger.Conway.Conformance.Equivalence.html#14853" class="Function">lemCERTSDepositsC</a> <a id="15099" class="Symbol">(</a><a id="15100" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="15104" class="Symbol">(</a><a id="15105" href="Ledger.Conway.Conformance.Certs.html#7173" class="InductiveConstructor">C.CERT-base</a> <a id="15117" class="Symbol">_</a> <a id="15119" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15121" href="Ledger.Conway.Conformance.Equivalence.html#15121" class="Bound">step</a><a id="15125" class="Symbol">))</a> <a id="15128" class="Symbol">=</a> <a id="15130" href="Ledger.Conway.Conformance.Equivalence.html#13769" class="Function">lemCERTS&#39;DepositsC</a> <a id="15149" href="Ledger.Conway.Conformance.Equivalence.html#15121" class="Bound">step</a>

<a id="lemWellformed"></a><a id="15155" href="Ledger.Conway.Conformance.Equivalence.html#15155" class="Function">lemWellformed</a> <a id="15169" class="Symbol">:</a> <a id="15171" class="Symbol">∀</a> <a id="15173" class="Symbol">{</a><a id="15174" href="Ledger.Conway.Conformance.Equivalence.html#15174" class="Bound">Γ</a> <a id="15176" href="Ledger.Conway.Conformance.Equivalence.html#15176" class="Bound">s</a> <a id="15178" href="Ledger.Conway.Conformance.Equivalence.html#15178" class="Bound">tx</a> <a id="15181" href="Ledger.Conway.Conformance.Equivalence.html#15181" class="Bound">s&#39;</a><a id="15183" class="Symbol">}</a> <a id="15185" class="Symbol">→</a> <a id="15187" href="Ledger.Conway.Conformance.Equivalence.html#8530" class="Function">WellformedLState</a> <a id="15204" href="Ledger.Conway.Conformance.Equivalence.html#15176" class="Bound">s</a> <a id="15206" class="Symbol">→</a> <a id="15208" href="Ledger.Conway.Conformance.Equivalence.html#15174" class="Bound">Γ</a> <a id="15210" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="15214" href="Ledger.Conway.Conformance.Equivalence.html#15176" class="Bound">s</a> <a id="15216" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="15219" href="Ledger.Conway.Conformance.Equivalence.html#15178" class="Bound">tx</a> <a id="15222" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="15231" href="Ledger.Conway.Conformance.Equivalence.html#15181" class="Bound">s&#39;</a> <a id="15234" class="Symbol">→</a> <a id="15236" href="Ledger.Conway.Conformance.Equivalence.html#8530" class="Function">WellformedLState</a> <a id="15253" href="Ledger.Conway.Conformance.Equivalence.html#15181" class="Bound">s&#39;</a>
<a id="15256" href="Ledger.Conway.Conformance.Equivalence.html#15155" class="Function">lemWellformed</a> <a id="15270" class="Symbol">{</a><a id="15271" href="Ledger.Conway.Conformance.Equivalence.html#15271" class="Bound">Γ</a><a id="15272" class="Symbol">}</a> <a id="15274" class="Symbol">{</a><a id="15275" class="Argument">s</a> <a id="15277" class="Symbol">=</a> <a id="15279" href="Ledger.Conway.Conformance.Equivalence.html#15279" class="Bound">ls</a><a id="15281" class="Symbol">}</a> <a id="15283" class="Symbol">{</a><a id="15284" href="Ledger.Conway.Conformance.Equivalence.html#15284" class="Bound">tx</a><a id="15286" class="Symbol">}</a> <a id="15288" class="Symbol">{</a><a id="15289" class="Argument">s&#39;</a> <a id="15292" class="Symbol">=</a> <a id="15294" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Bound">ls&#39;</a><a id="15297" class="Symbol">}</a> <a id="15299" href="Ledger.Conway.Conformance.Equivalence.html#15299" class="Bound">wf</a> <a id="15302" class="Symbol">(</a><a id="15303" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="15315" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="15320" href="Ledger.Conway.Conformance.Equivalence.html#15320" class="Bound">utxo</a> <a id="15325" href="Ledger.Conway.Conformance.Equivalence.html#15325" class="Bound">certs</a> <a id="15331" href="Ledger.Conway.Conformance.Equivalence.html#15331" class="Bound">gov</a><a id="15334" class="Symbol">)</a> <a id="15336" class="Symbol">=</a> <a id="15338" href="Ledger.Conway.Conformance.Equivalence.html#16607" class="Function">goal</a>
  <a id="15345" class="Keyword">where</a>
    <a id="15355" class="Keyword">open</a> <a id="15360" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="15369" href="Ledger.Conway.Conformance.Equivalence.html#15279" class="Bound">ls</a>  <a id="15373" class="Keyword">renaming</a> <a id="15382" class="Symbol">(</a><a id="15383" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="15393" class="Symbol">to</a> <a id="15396" class="Field">certSt</a><a id="15402" class="Symbol">)</a>
    <a id="15408" class="Keyword">open</a> <a id="15413" href="Ledger.Conway.Conformance.Ledger.html#723" class="Module">C.LState</a> <a id="15422" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Bound">ls&#39;</a> <a id="15426" class="Keyword">renaming</a> <a id="15435" class="Symbol">(</a><a id="15436" href="Ledger.Conway.Conformance.Ledger.html#778" class="Field">utxoSt</a> <a id="15443" class="Symbol">to</a> <a id="15446" class="Field">utxoSt&#39;</a><a id="15453" class="Symbol">;</a> <a id="15455" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">certState</a> <a id="15465" class="Symbol">to</a> <a id="15468" class="Field">certSt&#39;</a><a id="15475" class="Symbol">)</a>
    <a id="15481" class="Keyword">open</a> <a id="15486" href="Ledger.Conway.Ledger.html#601" class="Module">L.LEnv</a> <a id="15493" href="Ledger.Conway.Conformance.Equivalence.html#15271" class="Bound">Γ</a> <a id="15495" class="Keyword">using</a> <a id="15501" class="Symbol">(</a><a id="15502" href="Ledger.Conway.Ledger.html#689" class="Field">pparams</a><a id="15509" class="Symbol">)</a>
    <a id="15515" class="Keyword">open</a> <a id="15520" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="15527" class="Symbol">(</a><a id="15528" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="15533" href="Ledger.Conway.Conformance.Equivalence.html#15284" class="Bound">tx</a><a id="15535" class="Symbol">)</a>

    <a id="15542" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a>  <a id="15552" class="Symbol">=</a> <a id="15554" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="15575" href="Ledger.Conway.Conformance.Ledger.html#778" class="Function">utxoSt</a>
    <a id="15586" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a> <a id="15596" class="Symbol">=</a> <a id="15598" href="Ledger.Conway.Utxo.html#1498" class="Field">L.UTxOState.deposits</a> <a id="15619" href="Ledger.Conway.Conformance.Equivalence.html#15446" class="Function">utxoSt&#39;</a>

    <a id="15632" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">depositsL&#39;</a> <a id="15643" class="Symbol">=</a> <a id="15645" href="Ledger.Conway.Utxo.html#7988" class="Function">L.updateDeposits</a> <a id="15662" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="15670" class="Symbol">(</a><a id="15671" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="15676" href="Ledger.Conway.Conformance.Equivalence.html#15284" class="Bound">tx</a><a id="15678" class="Symbol">)</a> <a id="15680" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a>

    <a id="15694" href="Ledger.Conway.Conformance.Equivalence.html#15694" class="Function">ddeps</a> <a id="15700" class="Symbol">=</a> <a id="15702" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="15716" href="Ledger.Conway.Conformance.Equivalence.html#15396" class="Function">certSt</a> <a id="15723" class="Symbol">.</a><a id="15724" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15734" href="Ledger.Conway.Conformance.Equivalence.html#15734" class="Function">gdeps</a> <a id="15740" class="Symbol">=</a> <a id="15742" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="15756" href="Ledger.Conway.Conformance.Equivalence.html#15396" class="Function">certSt</a> <a id="15763" class="Symbol">.</a><a id="15764" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15775" href="Ledger.Conway.Conformance.Equivalence.html#15775" class="Function">ddeps&#39;</a> <a id="15782" class="Symbol">=</a> <a id="15784" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="15798" href="Ledger.Conway.Conformance.Equivalence.html#15468" class="Function">certSt&#39;</a> <a id="15806" class="Symbol">.</a><a id="15807" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15817" href="Ledger.Conway.Conformance.Equivalence.html#15817" class="Function">gdeps&#39;</a> <a id="15824" class="Symbol">=</a> <a id="15826" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="15840" href="Ledger.Conway.Conformance.Equivalence.html#15468" class="Function">certSt&#39;</a> <a id="15848" class="Symbol">.</a><a id="15849" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15860" href="Ledger.Conway.Conformance.Equivalence.html#15860" class="Function">lem</a> <a id="15864" class="Symbol">:</a> <a id="15866" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a> <a id="15876" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15878" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">depositsL&#39;</a>
    <a id="15893" href="Ledger.Conway.Conformance.Equivalence.html#15860" class="Function">lem</a> <a id="15897" class="Keyword">rewrite</a> <a id="15905" href="Ledger.Conway.Conformance.Equivalence.html#2428" class="Function">lemDepositsC</a> <a id="15918" href="Ledger.Conway.Conformance.Equivalence.html#15320" class="Bound">utxo</a> <a id="15923" class="Symbol">=</a> <a id="15925" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="15935" href="Ledger.Conway.Conformance.Equivalence.html#15935" class="Function">lem₁</a> <a id="15940" class="Symbol">:</a> <a id="15942" class="Symbol">(</a><a id="15943" href="Ledger.Conway.Conformance.Equivalence.html#15775" class="Function">ddeps&#39;</a> <a id="15950" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15952" href="Ledger.Conway.Conformance.Equivalence.html#15817" class="Function">gdeps&#39;</a><a id="15958" class="Symbol">)</a> <a id="15960" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15962" class="Symbol">(</a><a id="15963" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="15975" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="15983" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="15991" href="Ledger.Conway.Conformance.Equivalence.html#15694" class="Function">ddeps</a> <a id="15997" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15999" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16011" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16019" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16027" href="Ledger.Conway.Conformance.Equivalence.html#15734" class="Function">gdeps</a><a id="16032" class="Symbol">)</a>
    <a id="16038" href="Ledger.Conway.Conformance.Equivalence.html#15935" class="Function">lem₁</a> <a id="16043" class="Symbol">=</a> <a id="16045" href="Ledger.Conway.Conformance.Equivalence.html#14853" class="Function">lemCERTSDepositsC</a> <a id="16063" href="Ledger.Conway.Conformance.Equivalence.html#15325" class="Bound">certs</a>

    <a id="16074" href="Ledger.Conway.Conformance.Equivalence.html#16074" class="Function">lem₂</a> <a id="16079" class="Symbol">:</a>  <a id="16082" class="Symbol">(</a><a id="16083" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16095" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16103" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16111" class="Symbol">(</a><a id="16112" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16122" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a><a id="16130" class="Symbol">)</a> <a id="16132" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16134" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16146" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16154" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16162" class="Symbol">(</a><a id="16163" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16173" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a><a id="16181" class="Symbol">))</a>
         <a id="16193" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="16196" class="Symbol">(</a><a id="16197" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16207" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a> <a id="16217" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16219" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16229" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a><a id="16238" class="Symbol">)</a>
    <a id="16244" href="Ledger.Conway.Conformance.Equivalence.html#16074" class="Function">lem₂</a> <a id="16249" class="Keyword">rewrite</a> <a id="16257" href="Ledger.Conway.Conformance.Equivalence.html#15860" class="Function">lem</a> <a id="16261" class="Symbol">=</a> <a id="16263" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18923" class="Function">lem-upd-ddeps</a> <a id="16277" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16285" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a> <a id="16294" href="Ledger.Conway.Conformance.Equivalence.html#15284" class="Bound">tx</a> <a id="16297" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16299" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19696" class="Function">lem-upd-gdeps</a> <a id="16313" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16321" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a> <a id="16330" href="Ledger.Conway.Conformance.Equivalence.html#15284" class="Bound">tx</a>

    <a id="16338" href="Ledger.Conway.Conformance.Equivalence.html#16338" class="Function">lem₃</a> <a id="16343" class="Symbol">:</a>  <a id="16346" class="Symbol">(</a><a id="16347" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16359" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16367" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16375" href="Ledger.Conway.Conformance.Equivalence.html#15694" class="Function">ddeps</a> <a id="16381" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16383" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16395" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16403" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16411" href="Ledger.Conway.Conformance.Equivalence.html#15734" class="Function">gdeps</a><a id="16416" class="Symbol">)</a>
         <a id="16427" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="16430" class="Symbol">(</a><a id="16431" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16443" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16451" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16459" class="Symbol">(</a><a id="16460" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16470" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a><a id="16478" class="Symbol">)</a> <a id="16480" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16482" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16494" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16502" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16510" class="Symbol">(</a><a id="16511" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16521" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a><a id="16529" class="Symbol">))</a>
    <a id="16536" href="Ledger.Conway.Conformance.Equivalence.html#16338" class="Function">lem₃</a> <a id="16541" class="Symbol">=</a> <a id="16543" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="16545" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14162" class="Function">cong-updateDDeps</a> <a id="16562" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16570" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="16572" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#15148" class="Function">cong-updateGDeps</a> <a id="16589" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16597" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="16599" href="Ledger.Conway.Conformance.Equivalence.html#15299" class="Bound">wf</a>

    <a id="16607" href="Ledger.Conway.Conformance.Equivalence.html#16607" class="Function">goal</a> <a id="16612" class="Symbol">:</a> <a id="16614" class="Symbol">(</a><a id="16615" href="Ledger.Conway.Conformance.Equivalence.html#15775" class="Function">ddeps&#39;</a> <a id="16622" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16624" href="Ledger.Conway.Conformance.Equivalence.html#15817" class="Function">gdeps&#39;</a><a id="16630" class="Symbol">)</a> <a id="16632" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="16635" class="Symbol">(</a><a id="16636" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16646" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a> <a id="16656" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16658" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16668" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a><a id="16677" class="Symbol">)</a>
    <a id="16683" href="Ledger.Conway.Conformance.Equivalence.html#16607" class="Function">goal</a> <a id="16688" class="Keyword">with</a> <a id="16693" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> ← <a id="16700" href="Ledger.Conway.Conformance.Equivalence.html#15935" class="Function">lem₁</a> <a id="16705" class="Symbol">=</a> <a id="16707" href="Ledger.Conway.Conformance.Equivalence.html#13758" class="Function">≡ᵈ-trans</a> <a id="16716" class="Symbol">{</a><a id="16717" href="Ledger.Conway.Conformance.Equivalence.html#15775" class="Function">ddeps&#39;</a> <a id="16724" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16726" href="Ledger.Conway.Conformance.Equivalence.html#15817" class="Function">gdeps&#39;</a><a id="16732" class="Symbol">}</a>
                                     <a id="16771" class="Symbol">{</a><a id="16772" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2263" class="Function">updateDDeps</a> <a id="16784" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16792" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16800" class="Symbol">(</a><a id="16801" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16811" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a><a id="16819" class="Symbol">)</a> <a id="16821" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16823" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2714" class="Function">updateGDeps</a> <a id="16835" href="Ledger.Conway.Ledger.html#689" class="Function">pparams</a> <a id="16843" href="Ledger.Conway.Transaction.html#2948" class="Function">txcerts</a> <a id="16851" class="Symbol">(</a><a id="16852" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16862" href="Ledger.Conway.Conformance.Equivalence.html#15542" class="Function">deposits</a><a id="16870" class="Symbol">)}</a>
                                     <a id="16910" class="Symbol">{</a><a id="16911" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3926" class="Function">certDDeps</a> <a id="16921" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a> <a id="16931" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16933" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4072" class="Function">certGDeps</a> <a id="16943" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">deposits&#39;</a><a id="16952" class="Symbol">}</a>
                              <a id="16984" href="Ledger.Conway.Conformance.Equivalence.html#16338" class="Function">lem₃</a>
                              <a id="17019" href="Ledger.Conway.Conformance.Equivalence.html#16074" class="Function">lem₂</a>
<a id="17024" href="Ledger.Conway.Conformance.Equivalence.html#15155" class="Function">lemWellformed</a> <a id="17038" href="Ledger.Conway.Conformance.Equivalence.html#17038" class="Bound">wf</a> <a id="17041" class="Symbol">(</a><a id="17042" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="17054" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="17059" href="Ledger.Conway.Conformance.Equivalence.html#17059" class="Bound">utxo</a><a id="17063" class="Symbol">)</a> <a id="17065" class="Keyword">rewrite</a> <a id="17073" href="Ledger.Conway.Conformance.Equivalence.html#2428" class="Function">lemDepositsC</a> <a id="17086" href="Ledger.Conway.Conformance.Equivalence.html#17059" class="Bound">utxo</a> <a id="17091" class="Symbol">=</a> <a id="17093" href="Ledger.Conway.Conformance.Equivalence.html#17038" class="Bound">wf</a>

<a id="setCertDeposits"></a><a id="17097" href="Ledger.Conway.Conformance.Equivalence.html#17097" class="Function">setCertDeposits</a> <a id="17113" class="Symbol">:</a> <a id="17115" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="17126" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17128" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="17139" class="Symbol">→</a> <a id="17141" href="Ledger.Conway.Conformance.Certs.html#914" class="Record">C.CertState</a> <a id="17153" class="Symbol">→</a> <a id="17155" href="Ledger.Conway.Conformance.Certs.html#914" class="Record">C.CertState</a>
<a id="17167" href="Ledger.Conway.Conformance.Equivalence.html#17097" class="Function">setCertDeposits</a> <a id="17183" class="Symbol">(</a><a id="17184" href="Ledger.Conway.Conformance.Equivalence.html#17184" class="Bound">ddeps</a> <a id="17190" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17192" href="Ledger.Conway.Conformance.Equivalence.html#17192" class="Bound">gdeps</a><a id="17197" class="Symbol">)</a> <a id="17199" href="Ledger.Conway.Conformance.Equivalence.html#17199" class="Bound">cs</a> <a id="17202" class="Symbol">=</a>
  <a id="17206" class="Keyword">let</a> <a id="17210" class="Keyword">open</a> <a id="17215" href="Ledger.Conway.Conformance.Certs.html#914" class="Module">C.CertState</a> <a id="17227" href="Ledger.Conway.Conformance.Equivalence.html#17199" class="Bound">cs</a> <a id="17230" class="Keyword">in</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{17237}{\htmlClass{Keyword}{\text{record}}}\, \,\href{Ledger.Conway.Conformance.Certs.html#973}{\htmlId{17244}{\htmlClass{Field}{\text{dState}}}}\, \,\htmlId{17251}{\htmlClass{Symbol}{\text{{}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#714}{\htmlId{17252}{\htmlClass{Field}{\text{deposits}}}}\, \,\htmlId{17261}{\htmlClass{Symbol}{\text{=}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#17184}{\htmlId{17263}{\htmlClass{Bound}{\text{ddeps}}}}\,\,\htmlId{17268}{\htmlClass{Symbol}{\text{}}}}\, \\ \,\href{Ledger.Conway.Conformance.Certs.html#993}{\htmlId{17272}{\htmlClass{Field}{\text{pState}}}}\, \\ \,\htmlId{17281}{\htmlClass{Keyword}{\text{record}}}\, \,\href{Ledger.Conway.Conformance.Certs.html#1013}{\htmlId{17288}{\htmlClass{Field}{\text{gState}}}}\, \,\htmlId{17295}{\htmlClass{Symbol}{\text{{}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#884}{\htmlId{17296}{\htmlClass{Field}{\text{deposits}}}}\, \,\htmlId{17305}{\htmlClass{Symbol}{\text{=}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#17192}{\htmlId{17307}{\htmlClass{Bound}{\text{gdeps}}}}\,\,\htmlId{17312}{\htmlClass{Symbol}{\text{}}}}\, \end{pmatrix}$</a>

<a id="_⊢_⇀⦇_,CERTS&#39;⦈_"></a><a id="17317" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17333" class="Symbol">:</a> <a id="17335" href="Ledger.Conway.Certs.html#2771" class="Record">C.CertEnv</a> <a id="17345" class="Symbol">→</a> <a id="17347" href="Ledger.Conway.Conformance.Certs.html#914" class="Record">C.CertState</a> <a id="17359" class="Symbol">→</a> <a id="17361" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="17366" href="Ledger.Conway.Certs.html#1304" class="Datatype">L.DCert</a> <a id="17374" class="Symbol">→</a> <a id="17376" href="Ledger.Conway.Conformance.Certs.html#914" class="Record">C.CertState</a> <a id="17388" class="Symbol">→</a> <a id="17390" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="17395" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17411" class="Symbol">=</a> <a id="17413" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="17440" class="Symbol">{</a><a id="17441" class="Argument">sts</a> <a id="17445" class="Symbol">=</a> <a id="17447" href="Ledger.Conway.Conformance.Certs.html#6451" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="17462" class="Symbol">}</a>

<a id="updateCDep"></a><a id="17465" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="17476" class="Symbol">:</a> <a id="17478" href="Ledger.Conway.PParams.html#1694" class="Record">PParams</a> <a id="17486" class="Symbol">→</a> <a id="17488" href="Ledger.Conway.Certs.html#1304" class="Datatype">L.DCert</a> <a id="17496" class="Symbol">→</a> <a id="17498" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="17509" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17511" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="17522" class="Symbol">→</a> <a id="17524" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a> <a id="17535" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17537" href="Ledger.Conway.Certs.html#553" class="Function">L.Deposits</a>
<a id="17548" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="17559" href="Ledger.Conway.Conformance.Equivalence.html#17559" class="Bound">pp</a> <a id="17562" href="Ledger.Conway.Conformance.Equivalence.html#17562" class="Bound">cert</a> <a id="17567" class="Symbol">(</a><a id="17568" href="Ledger.Conway.Conformance.Equivalence.html#17568" class="Bound">ddep</a> <a id="17573" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17575" href="Ledger.Conway.Conformance.Equivalence.html#17575" class="Bound">gdep</a><a id="17579" class="Symbol">)</a> <a id="17581" class="Symbol">=</a> <a id="17583" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#1913" class="Function">updateDDep</a> <a id="17594" href="Ledger.Conway.Conformance.Equivalence.html#17559" class="Bound">pp</a> <a id="17597" href="Ledger.Conway.Conformance.Equivalence.html#17562" class="Bound">cert</a> <a id="17602" href="Ledger.Conway.Conformance.Equivalence.html#17568" class="Bound">ddep</a> <a id="17607" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17609" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2453" class="Function">updateGDep</a> <a id="17620" href="Ledger.Conway.Conformance.Equivalence.html#17559" class="Bound">pp</a> <a id="17623" href="Ledger.Conway.Conformance.Equivalence.html#17562" class="Bound">cert</a> <a id="17628" href="Ledger.Conway.Conformance.Equivalence.html#17575" class="Bound">gdep</a>

<a id="17634" class="Keyword">opaque</a>
  <a id="castCERTS&#39;"></a><a id="17643" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="17654" class="Symbol">:</a> <a id="17656" class="Symbol">∀</a> <a id="17658" class="Symbol">{</a><a id="17659" href="Ledger.Conway.Conformance.Equivalence.html#17659" class="Bound">Γ</a> <a id="17661" href="Ledger.Conway.Conformance.Equivalence.html#17661" class="Bound">certs</a><a id="17666" class="Symbol">}</a> <a id="17668" class="Symbol">{</a><a id="17669" href="Ledger.Conway.Conformance.Equivalence.html#17669" class="Bound">s</a> <a id="17671" href="Ledger.Conway.Conformance.Equivalence.html#17671" class="Bound">s&#39;</a> <a id="17674" class="Symbol">:</a> <a id="17676" href="Ledger.Conway.Certs.html#4307" class="Record">L.CertState</a><a id="17687" class="Symbol">}</a> <a id="17689" href="Ledger.Conway.Conformance.Equivalence.html#17689" class="Bound">deps₁</a> <a id="17695" href="Ledger.Conway.Conformance.Equivalence.html#17695" class="Bound">deps₂</a> <a id="17701" href="Ledger.Conway.Conformance.Equivalence.html#17701" class="Bound">deps₁&#39;</a>
             <a id="17721" class="Symbol">→</a> <a id="17723" href="Ledger.Conway.Conformance.Equivalence.html#17689" class="Bound">deps₁</a> <a id="17729" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="17732" href="Ledger.Conway.Conformance.Equivalence.html#17695" class="Bound">deps₂</a>
             <a id="17751" class="Symbol">→</a> <a id="17753" href="Ledger.Conway.Conformance.Equivalence.html#17659" class="Bound">Γ</a> <a id="17755" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">⊢</a> <a id="17757" href="Ledger.Conway.Conformance.Equivalence.html#17689" class="Bound">deps₁</a> <a id="17763" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17769" href="Ledger.Conway.Conformance.Equivalence.html#17669" class="Bound">s</a> <a id="17771" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">⇀⦇</a> <a id="17774" href="Ledger.Conway.Conformance.Equivalence.html#17661" class="Bound">certs</a> <a id="17780" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">,CERTS&#39;⦈</a> <a id="17789" class="Symbol">(</a><a id="17790" href="Ledger.Conway.Conformance.Equivalence.html#17701" class="Bound">deps₁&#39;</a> <a id="17797" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17803" href="Ledger.Conway.Conformance.Equivalence.html#17671" class="Bound">s&#39;</a><a id="17805" class="Symbol">)</a>
             <a id="17820" class="Symbol">→</a> <a id="17822" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="17825" href="Ledger.Conway.Conformance.Equivalence.html#17825" class="Bound">deps₂&#39;</a> <a id="17832" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="17834" href="Ledger.Conway.Conformance.Equivalence.html#17701" class="Bound">deps₁&#39;</a> <a id="17841" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="17844" href="Ledger.Conway.Conformance.Equivalence.html#17825" class="Bound">deps₂&#39;</a> <a id="17851" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17853" href="Ledger.Conway.Conformance.Equivalence.html#17659" class="Bound">Γ</a> <a id="17855" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">⊢</a> <a id="17857" href="Ledger.Conway.Conformance.Equivalence.html#17695" class="Bound">deps₂</a> <a id="17863" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17869" href="Ledger.Conway.Conformance.Equivalence.html#17669" class="Bound">s</a> <a id="17871" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">⇀⦇</a> <a id="17874" href="Ledger.Conway.Conformance.Equivalence.html#17661" class="Bound">certs</a> <a id="17880" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Function Operator">,CERTS&#39;⦈</a> <a id="17889" class="Symbol">(</a><a id="17890" href="Ledger.Conway.Conformance.Equivalence.html#17825" class="Bound">deps₂&#39;</a> <a id="17897" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17903" href="Ledger.Conway.Conformance.Equivalence.html#17671" class="Bound">s&#39;</a><a id="17905" class="Symbol">)</a>
  <a id="17909" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="17920" href="Ledger.Conway.Conformance.Equivalence.html#17920" class="Bound">deps₁</a> <a id="17926" href="Ledger.Conway.Conformance.Equivalence.html#17926" class="Bound">deps₂</a> <a id="17932" href="Ledger.Conway.Conformance.Equivalence.html#17932" class="Bound">deps₁&#39;</a> <a id="17939" href="Ledger.Conway.Conformance.Equivalence.html#17939" class="Bound">eqd</a> <a id="17943" class="Symbol">(</a><a id="17944" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="17952" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="17958" class="Symbol">)</a> <a id="17960" class="Symbol">=</a> <a id="17962" href="Ledger.Conway.Conformance.Equivalence.html#17926" class="Bound">deps₂</a> <a id="17968" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17970" href="Ledger.Conway.Conformance.Equivalence.html#17939" class="Bound">eqd</a> <a id="17974" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17976" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="17984" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a>
  <a id="17993" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="18004" class="Symbol">{</a><a id="18005" href="Ledger.Conway.Conformance.Equivalence.html#18005" class="Bound">Γ</a><a id="18006" class="Symbol">}</a> <a id="18008" href="Ledger.Conway.Conformance.Equivalence.html#18008" class="Bound">deps₁</a> <a id="18014" href="Ledger.Conway.Conformance.Equivalence.html#18014" class="Bound">deps₂</a> <a id="18020" href="Ledger.Conway.Conformance.Equivalence.html#18020" class="Bound">deps₁&#39;</a> <a id="18027" href="Ledger.Conway.Conformance.Equivalence.html#18027" class="Bound">eqd</a> <a id="18031" class="Symbol">(</a><a id="18032" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18039" class="Symbol">(</a><a id="18040" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="18053" class="Symbol">{</a><a id="18054" class="Argument">dCert</a> <a id="18060" class="Symbol">=</a> <a id="18062" href="Ledger.Conway.Conformance.Equivalence.html#18062" class="Bound">cert</a><a id="18066" class="Symbol">}</a> <a id="18068" class="Symbol">(</a><a id="18069" href="Ledger.Conway.Conformance.Certs.html#4114" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18086" href="Ledger.Conway.Conformance.Equivalence.html#18086" class="Bound">h</a><a id="18087" class="Symbol">))</a>    <a id="18093" href="Ledger.Conway.Conformance.Equivalence.html#18093" class="Bound">rs</a><a id="18095" class="Symbol">)</a> <a id="18097" class="Symbol">=</a>
    <a id="18103" class="Keyword">let</a> <a id="18107" class="Keyword">open</a> <a id="18112" href="Ledger.Conway.Certs.html#2771" class="Module">C.CertEnv</a> <a id="18122" href="Ledger.Conway.Conformance.Equivalence.html#18005" class="Bound">Γ</a> <a id="18124" class="Keyword">using</a> <a id="18130" class="Symbol">(</a><a id="18131" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="18133" class="Symbol">)</a>
        <a id="18143" href="Ledger.Conway.Conformance.Equivalence.html#18143" class="Bound">deps₂&#39;</a> <a id="18150" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18152" href="Ledger.Conway.Conformance.Equivalence.html#18152" class="Bound">eqd&#39;</a> <a id="18157" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18159" href="Ledger.Conway.Conformance.Equivalence.html#18159" class="Bound">rs&#39;</a> <a id="18163" class="Symbol">=</a> <a id="18165" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="18176" class="Symbol">(</a><a id="18177" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="18188" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="18191" href="Ledger.Conway.Conformance.Equivalence.html#18062" class="Bound">cert</a> <a id="18196" href="Ledger.Conway.Conformance.Equivalence.html#18008" class="Bound">deps₁</a><a id="18201" class="Symbol">)</a> <a id="18203" class="Symbol">(</a><a id="18204" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="18215" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="18218" href="Ledger.Conway.Conformance.Equivalence.html#18062" class="Bound">cert</a> <a id="18223" href="Ledger.Conway.Conformance.Equivalence.html#18014" class="Bound">deps₂</a><a id="18228" class="Symbol">)</a> <a id="18230" href="Ledger.Conway.Conformance.Equivalence.html#18020" class="Bound">deps₁&#39;</a>
                                         <a id="18278" class="Symbol">(</a><a id="18279" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="18281" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="18297" class="Symbol">{</a><a id="18298" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="18300" class="Symbol">}</a> <a id="18302" href="Ledger.Conway.Conformance.Equivalence.html#18062" class="Bound">cert</a> <a id="18307" class="Symbol">{</a><a id="18308" href="Ledger.Conway.Conformance.Equivalence.html#18008" class="Bound">deps₁</a> <a id="18314" class="Symbol">.</a><a id="18315" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18320" class="Symbol">}</a> <a id="18322" class="Symbol">{</a><a id="18323" href="Ledger.Conway.Conformance.Equivalence.html#18014" class="Bound">deps₂</a> <a id="18329" class="Symbol">.</a><a id="18330" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18335" class="Symbol">}</a>
                                          <a id="18379" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="18381" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="18397" class="Symbol">{</a><a id="18398" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="18400" class="Symbol">}</a> <a id="18402" href="Ledger.Conway.Conformance.Equivalence.html#18062" class="Bound">cert</a> <a id="18407" class="Symbol">{</a><a id="18408" href="Ledger.Conway.Conformance.Equivalence.html#18008" class="Bound">deps₁</a> <a id="18414" class="Symbol">.</a><a id="18415" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18420" class="Symbol">}</a> <a id="18422" class="Symbol">{</a><a id="18423" href="Ledger.Conway.Conformance.Equivalence.html#18014" class="Bound">deps₂</a> <a id="18429" class="Symbol">.</a><a id="18430" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18435" class="Symbol">}</a> <a id="18437" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="18439" href="Ledger.Conway.Conformance.Equivalence.html#18027" class="Bound">eqd</a><a id="18442" class="Symbol">)</a> <a id="18444" href="Ledger.Conway.Conformance.Equivalence.html#18093" class="Bound">rs</a>
    <a id="18451" class="Keyword">in</a>  <a id="18455" href="Ledger.Conway.Conformance.Equivalence.html#18143" class="Bound">deps₂&#39;</a> <a id="18462" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18464" href="Ledger.Conway.Conformance.Equivalence.html#18152" class="Bound">eqd&#39;</a> <a id="18469" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18471" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18478" class="Symbol">(</a><a id="18479" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="18492" class="Symbol">(</a><a id="18493" href="Ledger.Conway.Conformance.Certs.html#4114" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18510" href="Ledger.Conway.Conformance.Equivalence.html#18086" class="Bound">h</a><a id="18511" class="Symbol">))</a> <a id="18514" href="Ledger.Conway.Conformance.Equivalence.html#18159" class="Bound">rs&#39;</a>
  <a id="18520" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="18531" class="Symbol">{</a><a id="18532" href="Ledger.Conway.Conformance.Equivalence.html#18532" class="Bound">Γ</a><a id="18533" class="Symbol">}</a> <a id="18535" href="Ledger.Conway.Conformance.Equivalence.html#18535" class="Bound">deps₁</a> <a id="18541" href="Ledger.Conway.Conformance.Equivalence.html#18541" class="Bound">deps₂</a> <a id="18547" href="Ledger.Conway.Conformance.Equivalence.html#18547" class="Bound">deps₁&#39;</a> <a id="18554" href="Ledger.Conway.Conformance.Equivalence.html#18554" class="Bound">eqd</a> <a id="18558" class="Symbol">(</a><a id="18559" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18566" class="Symbol">(</a><a id="18567" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="18580" class="Symbol">{</a><a id="18581" class="Argument">dCert</a> <a id="18587" class="Symbol">=</a> <a id="18589" href="Ledger.Conway.Conformance.Equivalence.html#18589" class="Bound">cert</a><a id="18593" class="Symbol">}</a> <a id="18595" class="Symbol">(</a><a id="18596" href="Ledger.Conway.Conformance.Certs.html#4743" class="InductiveConstructor">C.DELEG-dereg</a> <a id="18610" class="Symbol">(</a><a id="18611" href="Ledger.Conway.Conformance.Equivalence.html#18611" class="Bound">a</a> <a id="18613" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18615" href="Ledger.Conway.Conformance.Equivalence.html#18615" class="Bound">b</a> <a id="18617" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18619" href="Ledger.Conway.Conformance.Equivalence.html#18619" class="Bound">c</a><a id="18620" class="Symbol">)))</a> <a id="18624" href="Ledger.Conway.Conformance.Equivalence.html#18624" class="Bound">rs</a><a id="18626" class="Symbol">)</a> <a id="18628" class="Symbol">=</a>
    <a id="18634" class="Keyword">let</a> <a id="18638" class="Keyword">open</a> <a id="18643" href="Ledger.Conway.Certs.html#2771" class="Module">C.CertEnv</a> <a id="18653" href="Ledger.Conway.Conformance.Equivalence.html#18532" class="Bound">Γ</a> <a id="18655" class="Keyword">using</a> <a id="18661" class="Symbol">(</a><a id="18662" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="18664" class="Symbol">)</a>
        <a id="18674" href="Ledger.Conway.Conformance.Equivalence.html#18674" class="Bound">deps₂&#39;</a> <a id="18681" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18683" href="Ledger.Conway.Conformance.Equivalence.html#18683" class="Bound">eqd&#39;</a> <a id="18688" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18690" href="Ledger.Conway.Conformance.Equivalence.html#18690" class="Bound">rs&#39;</a> <a id="18694" class="Symbol">=</a> <a id="18696" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="18707" class="Symbol">(</a><a id="18708" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="18719" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="18722" href="Ledger.Conway.Conformance.Equivalence.html#18589" class="Bound">cert</a> <a id="18727" href="Ledger.Conway.Conformance.Equivalence.html#18535" class="Bound">deps₁</a><a id="18732" class="Symbol">)</a> <a id="18734" class="Symbol">(</a><a id="18735" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="18746" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="18749" href="Ledger.Conway.Conformance.Equivalence.html#18589" class="Bound">cert</a> <a id="18754" href="Ledger.Conway.Conformance.Equivalence.html#18541" class="Bound">deps₂</a><a id="18759" class="Symbol">)</a> <a id="18761" href="Ledger.Conway.Conformance.Equivalence.html#18547" class="Bound">deps₁&#39;</a>
                                         <a id="18809" class="Symbol">(</a><a id="18810" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="18812" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="18828" class="Symbol">{</a><a id="18829" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="18831" class="Symbol">}</a> <a id="18833" href="Ledger.Conway.Conformance.Equivalence.html#18589" class="Bound">cert</a> <a id="18838" class="Symbol">{</a><a id="18839" href="Ledger.Conway.Conformance.Equivalence.html#18535" class="Bound">deps₁</a> <a id="18845" class="Symbol">.</a><a id="18846" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18851" class="Symbol">}</a> <a id="18853" class="Symbol">{</a><a id="18854" href="Ledger.Conway.Conformance.Equivalence.html#18541" class="Bound">deps₂</a> <a id="18860" class="Symbol">.</a><a id="18861" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18866" class="Symbol">}</a>
                                          <a id="18910" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="18912" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="18928" class="Symbol">{</a><a id="18929" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="18931" class="Symbol">}</a> <a id="18933" href="Ledger.Conway.Conformance.Equivalence.html#18589" class="Bound">cert</a> <a id="18938" class="Symbol">{</a><a id="18939" href="Ledger.Conway.Conformance.Equivalence.html#18535" class="Bound">deps₁</a> <a id="18945" class="Symbol">.</a><a id="18946" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18951" class="Symbol">}</a> <a id="18953" class="Symbol">{</a><a id="18954" href="Ledger.Conway.Conformance.Equivalence.html#18541" class="Bound">deps₂</a> <a id="18960" class="Symbol">.</a><a id="18961" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18966" class="Symbol">}</a> <a id="18968" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="18970" href="Ledger.Conway.Conformance.Equivalence.html#18554" class="Bound">eqd</a><a id="18973" class="Symbol">)</a> <a id="18975" href="Ledger.Conway.Conformance.Equivalence.html#18624" class="Bound">rs</a>
    <a id="18982" class="Keyword">in</a>  <a id="18986" href="Ledger.Conway.Conformance.Equivalence.html#18674" class="Bound">deps₂&#39;</a> <a id="18993" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18995" href="Ledger.Conway.Conformance.Equivalence.html#18683" class="Bound">eqd&#39;</a> <a id="19000" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19002" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19009" class="Symbol">(</a><a id="19010" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="19023" class="Symbol">(</a><a id="19024" href="Ledger.Conway.Conformance.Certs.html#4743" class="InductiveConstructor">C.DELEG-dereg</a> <a id="19038" class="Symbol">(</a><a id="19039" href="Ledger.Conway.Conformance.Equivalence.html#18611" class="Bound">a</a> <a id="19041" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19043" href="Ledger.Conway.Conformance.Equivalence.html#18554" class="Bound">eqd</a> <a id="19047" class="Symbol">.</a><a id="19048" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19054" class="Symbol">.</a><a id="19055" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19061" href="Ledger.Conway.Conformance.Equivalence.html#18615" class="Bound">b</a> <a id="19063" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19065" href="Ledger.Conway.Conformance.Equivalence.html#18619" class="Bound">c</a><a id="19066" class="Symbol">)))</a> <a id="19070" href="Ledger.Conway.Conformance.Equivalence.html#18690" class="Bound">rs&#39;</a>
                                                              <a id="19136" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="19173" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="19184" class="Symbol">{</a><a id="19185" href="Ledger.Conway.Conformance.Equivalence.html#19185" class="Bound">Γ</a><a id="19186" class="Symbol">}</a> <a id="19188" href="Ledger.Conway.Conformance.Equivalence.html#19188" class="Bound">deps₁</a> <a id="19194" href="Ledger.Conway.Conformance.Equivalence.html#19194" class="Bound">deps₂</a> <a id="19200" href="Ledger.Conway.Conformance.Equivalence.html#19200" class="Bound">deps₁&#39;</a> <a id="19207" href="Ledger.Conway.Conformance.Equivalence.html#19207" class="Bound">eqd</a> <a id="19211" class="Symbol">(</a><a id="19212" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19219" class="Symbol">(</a><a id="19220" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="19233" class="Symbol">{</a><a id="19234" class="Argument">dCert</a> <a id="19240" class="Symbol">=</a> <a id="19242" href="Ledger.Conway.Conformance.Equivalence.html#19242" class="Bound">cert</a><a id="19246" class="Symbol">}</a> <a id="19248" class="Symbol">(</a><a id="19249" href="Ledger.Conway.Conformance.Certs.html#5107" class="InductiveConstructor">C.DELEG-reg</a> <a id="19261" href="Ledger.Conway.Conformance.Equivalence.html#19261" class="Bound">h</a><a id="19262" class="Symbol">))</a>         <a id="19273" href="Ledger.Conway.Conformance.Equivalence.html#19273" class="Bound">rs</a><a id="19275" class="Symbol">)</a> <a id="19277" class="Symbol">=</a>
    <a id="19283" class="Keyword">let</a> <a id="19287" class="Keyword">open</a> <a id="19292" href="Ledger.Conway.Certs.html#2771" class="Module">C.CertEnv</a> <a id="19302" href="Ledger.Conway.Conformance.Equivalence.html#19185" class="Bound">Γ</a> <a id="19304" class="Keyword">using</a> <a id="19310" class="Symbol">(</a><a id="19311" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="19313" class="Symbol">)</a>
        <a id="19323" href="Ledger.Conway.Conformance.Equivalence.html#19323" class="Bound">deps₂&#39;</a> <a id="19330" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19332" href="Ledger.Conway.Conformance.Equivalence.html#19332" class="Bound">eqd&#39;</a> <a id="19337" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19339" href="Ledger.Conway.Conformance.Equivalence.html#19339" class="Bound">rs&#39;</a> <a id="19343" class="Symbol">=</a> <a id="19345" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="19356" class="Symbol">(</a><a id="19357" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="19368" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="19371" href="Ledger.Conway.Conformance.Equivalence.html#19242" class="Bound">cert</a> <a id="19376" href="Ledger.Conway.Conformance.Equivalence.html#19188" class="Bound">deps₁</a><a id="19381" class="Symbol">)</a> <a id="19383" class="Symbol">(</a><a id="19384" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="19395" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="19398" href="Ledger.Conway.Conformance.Equivalence.html#19242" class="Bound">cert</a> <a id="19403" href="Ledger.Conway.Conformance.Equivalence.html#19194" class="Bound">deps₂</a><a id="19408" class="Symbol">)</a> <a id="19410" href="Ledger.Conway.Conformance.Equivalence.html#19200" class="Bound">deps₁&#39;</a>
                                         <a id="19458" class="Symbol">(</a><a id="19459" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="19461" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="19477" class="Symbol">{</a><a id="19478" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="19480" class="Symbol">}</a> <a id="19482" href="Ledger.Conway.Conformance.Equivalence.html#19242" class="Bound">cert</a> <a id="19487" class="Symbol">{</a><a id="19488" href="Ledger.Conway.Conformance.Equivalence.html#19188" class="Bound">deps₁</a> <a id="19494" class="Symbol">.</a><a id="19495" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19500" class="Symbol">}</a> <a id="19502" class="Symbol">{</a><a id="19503" href="Ledger.Conway.Conformance.Equivalence.html#19194" class="Bound">deps₂</a> <a id="19509" class="Symbol">.</a><a id="19510" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19515" class="Symbol">}</a>
                                          <a id="19559" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="19561" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="19577" class="Symbol">{</a><a id="19578" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="19580" class="Symbol">}</a> <a id="19582" href="Ledger.Conway.Conformance.Equivalence.html#19242" class="Bound">cert</a> <a id="19587" class="Symbol">{</a><a id="19588" href="Ledger.Conway.Conformance.Equivalence.html#19188" class="Bound">deps₁</a> <a id="19594" class="Symbol">.</a><a id="19595" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19600" class="Symbol">}</a> <a id="19602" class="Symbol">{</a><a id="19603" href="Ledger.Conway.Conformance.Equivalence.html#19194" class="Bound">deps₂</a> <a id="19609" class="Symbol">.</a><a id="19610" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19615" class="Symbol">}</a> <a id="19617" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="19619" href="Ledger.Conway.Conformance.Equivalence.html#19207" class="Bound">eqd</a><a id="19622" class="Symbol">)</a> <a id="19624" href="Ledger.Conway.Conformance.Equivalence.html#19273" class="Bound">rs</a>
    <a id="19631" class="Keyword">in</a>  <a id="19635" href="Ledger.Conway.Conformance.Equivalence.html#19323" class="Bound">deps₂&#39;</a> <a id="19642" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19644" href="Ledger.Conway.Conformance.Equivalence.html#19332" class="Bound">eqd&#39;</a> <a id="19649" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19651" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19658" class="Symbol">(</a><a id="19659" href="Ledger.Conway.Conformance.Certs.html#6522" class="InductiveConstructor">C.CERT-deleg</a> <a id="19672" class="Symbol">(</a><a id="19673" href="Ledger.Conway.Conformance.Certs.html#5107" class="InductiveConstructor">C.DELEG-reg</a> <a id="19685" href="Ledger.Conway.Conformance.Equivalence.html#19261" class="Bound">h</a><a id="19686" class="Symbol">))</a> <a id="19689" href="Ledger.Conway.Conformance.Equivalence.html#19339" class="Bound">rs&#39;</a>
  <a id="19695" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="19706" class="Symbol">{</a><a id="19707" href="Ledger.Conway.Conformance.Equivalence.html#19707" class="Bound">Γ</a><a id="19708" class="Symbol">}</a> <a id="19710" href="Ledger.Conway.Conformance.Equivalence.html#19710" class="Bound">deps₁</a> <a id="19716" href="Ledger.Conway.Conformance.Equivalence.html#19716" class="Bound">deps₂</a> <a id="19722" href="Ledger.Conway.Conformance.Equivalence.html#19722" class="Bound">deps₁&#39;</a> <a id="19729" href="Ledger.Conway.Conformance.Equivalence.html#19729" class="Bound">eqd</a> <a id="19733" class="Symbol">(</a><a id="19734" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19741" class="Symbol">(</a><a id="19742" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a>  <a id="19755" class="Symbol">{</a><a id="19756" class="Argument">dCert</a> <a id="19762" class="Symbol">=</a> <a id="19764" href="Ledger.Conway.Conformance.Equivalence.html#19764" class="Bound">cert</a><a id="19768" class="Symbol">}</a> <a id="19770" class="Symbol">(</a><a id="19771" href="Ledger.Conway.Conformance.Certs.html#3740" class="InductiveConstructor">C.POOL-regpool</a> <a id="19786" href="Ledger.Conway.Conformance.Equivalence.html#19786" class="Bound">h</a><a id="19787" class="Symbol">))</a>      <a id="19795" href="Ledger.Conway.Conformance.Equivalence.html#19795" class="Bound">rs</a><a id="19797" class="Symbol">)</a> <a id="19799" class="Symbol">=</a>
    <a id="19805" class="Keyword">let</a> <a id="19809" href="Ledger.Conway.Conformance.Equivalence.html#19809" class="Bound">deps₂&#39;</a> <a id="19816" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19818" href="Ledger.Conway.Conformance.Equivalence.html#19818" class="Bound">eqd&#39;</a> <a id="19823" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19825" href="Ledger.Conway.Conformance.Equivalence.html#19825" class="Bound">rs&#39;</a> <a id="19829" class="Symbol">=</a> <a id="19831" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="19842" href="Ledger.Conway.Conformance.Equivalence.html#19710" class="Bound">deps₁</a> <a id="19848" href="Ledger.Conway.Conformance.Equivalence.html#19716" class="Bound">deps₂</a> <a id="19854" href="Ledger.Conway.Conformance.Equivalence.html#19722" class="Bound">deps₁&#39;</a> <a id="19861" href="Ledger.Conway.Conformance.Equivalence.html#19729" class="Bound">eqd</a> <a id="19865" href="Ledger.Conway.Conformance.Equivalence.html#19795" class="Bound">rs</a>
    <a id="19872" class="Keyword">in</a>  <a id="19876" href="Ledger.Conway.Conformance.Equivalence.html#19809" class="Bound">deps₂&#39;</a> <a id="19883" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19885" href="Ledger.Conway.Conformance.Equivalence.html#19818" class="Bound">eqd&#39;</a> <a id="19890" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19892" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19899" class="Symbol">(</a><a id="19900" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a> <a id="19912" class="Symbol">(</a><a id="19913" href="Ledger.Conway.Conformance.Certs.html#3740" class="InductiveConstructor">C.POOL-regpool</a> <a id="19928" href="Ledger.Conway.Conformance.Equivalence.html#19786" class="Bound">h</a><a id="19929" class="Symbol">))</a> <a id="19932" href="Ledger.Conway.Conformance.Equivalence.html#19825" class="Bound">rs&#39;</a>
  <a id="19938" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="19949" class="Symbol">{</a><a id="19950" href="Ledger.Conway.Conformance.Equivalence.html#19950" class="Bound">Γ</a><a id="19951" class="Symbol">}</a> <a id="19953" href="Ledger.Conway.Conformance.Equivalence.html#19953" class="Bound">deps₁</a> <a id="19959" href="Ledger.Conway.Conformance.Equivalence.html#19959" class="Bound">deps₂</a> <a id="19965" href="Ledger.Conway.Conformance.Equivalence.html#19965" class="Bound">deps₁&#39;</a> <a id="19972" href="Ledger.Conway.Conformance.Equivalence.html#19972" class="Bound">eqd</a> <a id="19976" class="Symbol">(</a><a id="19977" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19984" class="Symbol">(</a><a id="19985" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a>  <a id="19998" class="Symbol">{</a><a id="19999" class="Argument">dCert</a> <a id="20005" class="Symbol">=</a> <a id="20007" href="Ledger.Conway.Conformance.Equivalence.html#20007" class="Bound">cert</a><a id="20011" class="Symbol">}</a> <a id="20013" href="Ledger.Conway.Conformance.Certs.html#3939" class="InductiveConstructor">C.POOL-retirepool</a><a id="20030" class="Symbol">)</a>       <a id="20038" href="Ledger.Conway.Conformance.Equivalence.html#20038" class="Bound">rs</a><a id="20040" class="Symbol">)</a> <a id="20042" class="Symbol">=</a>
    <a id="20048" class="Keyword">let</a> <a id="20052" href="Ledger.Conway.Conformance.Equivalence.html#20052" class="Bound">deps₂&#39;</a> <a id="20059" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20061" href="Ledger.Conway.Conformance.Equivalence.html#20061" class="Bound">eqd&#39;</a> <a id="20066" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20068" href="Ledger.Conway.Conformance.Equivalence.html#20068" class="Bound">rs&#39;</a> <a id="20072" class="Symbol">=</a> <a id="20074" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="20085" href="Ledger.Conway.Conformance.Equivalence.html#19953" class="Bound">deps₁</a> <a id="20091" href="Ledger.Conway.Conformance.Equivalence.html#19959" class="Bound">deps₂</a> <a id="20097" href="Ledger.Conway.Conformance.Equivalence.html#19965" class="Bound">deps₁&#39;</a> <a id="20104" href="Ledger.Conway.Conformance.Equivalence.html#19972" class="Bound">eqd</a> <a id="20108" href="Ledger.Conway.Conformance.Equivalence.html#20038" class="Bound">rs</a>
    <a id="20115" class="Keyword">in</a>  <a id="20119" href="Ledger.Conway.Conformance.Equivalence.html#20052" class="Bound">deps₂&#39;</a> <a id="20126" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20128" href="Ledger.Conway.Conformance.Equivalence.html#20061" class="Bound">eqd&#39;</a> <a id="20133" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20135" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20142" class="Symbol">(</a><a id="20143" href="Ledger.Conway.Conformance.Certs.html#6756" class="InductiveConstructor">C.CERT-pool</a> <a id="20155" href="Ledger.Conway.Conformance.Certs.html#3939" class="InductiveConstructor">C.POOL-retirepool</a><a id="20172" class="Symbol">)</a> <a id="20174" href="Ledger.Conway.Conformance.Equivalence.html#20068" class="Bound">rs&#39;</a>
  <a id="20180" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="20191" class="Symbol">{</a><a id="20192" href="Ledger.Conway.Conformance.Equivalence.html#20192" class="Bound">Γ</a><a id="20193" class="Symbol">}</a> <a id="20195" href="Ledger.Conway.Conformance.Equivalence.html#20195" class="Bound">deps₁</a> <a id="20201" href="Ledger.Conway.Conformance.Equivalence.html#20201" class="Bound">deps₂</a> <a id="20207" href="Ledger.Conway.Conformance.Equivalence.html#20207" class="Bound">deps₁&#39;</a> <a id="20214" href="Ledger.Conway.Conformance.Equivalence.html#20214" class="Bound">eqd</a> <a id="20218" class="Symbol">(</a><a id="20219" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20226" class="Symbol">(</a><a id="20227" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20240" class="Symbol">{</a><a id="20241" class="Argument">dCert</a> <a id="20247" class="Symbol">=</a> <a id="20249" href="Ledger.Conway.Conformance.Equivalence.html#20249" class="Bound">cert</a><a id="20253" class="Symbol">}</a> <a id="20255" class="Symbol">(</a><a id="20256" href="Ledger.Conway.Conformance.Certs.html#5499" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20274" href="Ledger.Conway.Conformance.Equivalence.html#20274" class="Bound">h</a><a id="20275" class="Symbol">))</a>   <a id="20280" href="Ledger.Conway.Conformance.Equivalence.html#20280" class="Bound">rs</a><a id="20282" class="Symbol">)</a> <a id="20284" class="Symbol">=</a>
    <a id="20290" class="Keyword">let</a> <a id="20294" class="Keyword">open</a> <a id="20299" href="Ledger.Conway.Certs.html#2771" class="Module">C.CertEnv</a> <a id="20309" href="Ledger.Conway.Conformance.Equivalence.html#20192" class="Bound">Γ</a> <a id="20311" class="Keyword">using</a> <a id="20317" class="Symbol">(</a><a id="20318" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="20320" class="Symbol">)</a>
        <a id="20330" href="Ledger.Conway.Conformance.Equivalence.html#20330" class="Bound">deps₂&#39;</a> <a id="20337" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20339" href="Ledger.Conway.Conformance.Equivalence.html#20339" class="Bound">eqd&#39;</a> <a id="20344" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20346" href="Ledger.Conway.Conformance.Equivalence.html#20346" class="Bound">rs&#39;</a> <a id="20350" class="Symbol">=</a> <a id="20352" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="20363" class="Symbol">(</a><a id="20364" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="20375" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="20378" href="Ledger.Conway.Conformance.Equivalence.html#20249" class="Bound">cert</a> <a id="20383" href="Ledger.Conway.Conformance.Equivalence.html#20195" class="Bound">deps₁</a><a id="20388" class="Symbol">)</a> <a id="20390" class="Symbol">(</a><a id="20391" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="20402" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="20405" href="Ledger.Conway.Conformance.Equivalence.html#20249" class="Bound">cert</a> <a id="20410" href="Ledger.Conway.Conformance.Equivalence.html#20201" class="Bound">deps₂</a><a id="20415" class="Symbol">)</a> <a id="20417" href="Ledger.Conway.Conformance.Equivalence.html#20207" class="Bound">deps₁&#39;</a>
                                         <a id="20465" class="Symbol">(</a><a id="20466" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="20468" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="20484" class="Symbol">{</a><a id="20485" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="20487" class="Symbol">}</a> <a id="20489" href="Ledger.Conway.Conformance.Equivalence.html#20249" class="Bound">cert</a> <a id="20494" class="Symbol">{</a><a id="20495" href="Ledger.Conway.Conformance.Equivalence.html#20195" class="Bound">deps₁</a> <a id="20501" class="Symbol">.</a><a id="20502" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20507" class="Symbol">}</a> <a id="20509" class="Symbol">{</a><a id="20510" href="Ledger.Conway.Conformance.Equivalence.html#20201" class="Bound">deps₂</a> <a id="20516" class="Symbol">.</a><a id="20517" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20522" class="Symbol">}</a>
                                          <a id="20566" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="20568" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="20584" class="Symbol">{</a><a id="20585" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="20587" class="Symbol">}</a> <a id="20589" href="Ledger.Conway.Conformance.Equivalence.html#20249" class="Bound">cert</a> <a id="20594" class="Symbol">{</a><a id="20595" href="Ledger.Conway.Conformance.Equivalence.html#20195" class="Bound">deps₁</a> <a id="20601" class="Symbol">.</a><a id="20602" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20607" class="Symbol">}</a> <a id="20609" class="Symbol">{</a><a id="20610" href="Ledger.Conway.Conformance.Equivalence.html#20201" class="Bound">deps₂</a> <a id="20616" class="Symbol">.</a><a id="20617" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20622" class="Symbol">}</a> <a id="20624" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="20626" href="Ledger.Conway.Conformance.Equivalence.html#20214" class="Bound">eqd</a><a id="20629" class="Symbol">)</a> <a id="20631" href="Ledger.Conway.Conformance.Equivalence.html#20280" class="Bound">rs</a>
    <a id="20638" class="Keyword">in</a>  <a id="20642" href="Ledger.Conway.Conformance.Equivalence.html#20330" class="Bound">deps₂&#39;</a> <a id="20649" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20651" href="Ledger.Conway.Conformance.Equivalence.html#20339" class="Bound">eqd&#39;</a> <a id="20656" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20658" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20665" class="Symbol">(</a><a id="20666" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="20678" class="Symbol">(</a><a id="20679" href="Ledger.Conway.Conformance.Certs.html#5499" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20697" href="Ledger.Conway.Conformance.Equivalence.html#20274" class="Bound">h</a><a id="20698" class="Symbol">))</a> <a id="20701" href="Ledger.Conway.Conformance.Equivalence.html#20346" class="Bound">rs&#39;</a>
  <a id="20707" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="20718" class="Symbol">{</a><a id="20719" href="Ledger.Conway.Conformance.Equivalence.html#20719" class="Bound">Γ</a><a id="20720" class="Symbol">}</a> <a id="20722" href="Ledger.Conway.Conformance.Equivalence.html#20722" class="Bound">deps₁</a> <a id="20728" href="Ledger.Conway.Conformance.Equivalence.html#20728" class="Bound">deps₂</a> <a id="20734" href="Ledger.Conway.Conformance.Equivalence.html#20734" class="Bound">deps₁&#39;</a> <a id="20741" href="Ledger.Conway.Conformance.Equivalence.html#20741" class="Bound">eqd</a> <a id="20745" class="Symbol">(</a><a id="20746" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20753" class="Symbol">(</a><a id="20754" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20767" class="Symbol">{</a><a id="20768" class="Argument">dCert</a> <a id="20774" class="Symbol">=</a> <a id="20776" href="Ledger.Conway.Conformance.Equivalence.html#20776" class="Bound">cert</a><a id="20780" class="Symbol">}</a> <a id="20782" class="Symbol">(</a><a id="20783" href="Ledger.Conway.Conformance.Certs.html#5865" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="20803" class="Symbol">(</a><a id="20804" href="Ledger.Conway.Conformance.Equivalence.html#20804" class="Bound">a</a> <a id="20806" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20808" href="Ledger.Conway.Conformance.Equivalence.html#20808" class="Bound">b</a><a id="20809" class="Symbol">)))</a> <a id="20813" href="Ledger.Conway.Conformance.Equivalence.html#20813" class="Bound">rs</a><a id="20815" class="Symbol">)</a> <a id="20817" class="Symbol">=</a>
    <a id="20823" class="Keyword">let</a> <a id="20827" class="Keyword">open</a> <a id="20832" href="Ledger.Conway.Certs.html#2771" class="Module">C.CertEnv</a> <a id="20842" href="Ledger.Conway.Conformance.Equivalence.html#20719" class="Bound">Γ</a> <a id="20844" class="Keyword">using</a> <a id="20850" class="Symbol">(</a><a id="20851" href="Ledger.Conway.Certs.html#2826" class="Field">pp</a><a id="20853" class="Symbol">)</a>
        <a id="20863" href="Ledger.Conway.Conformance.Equivalence.html#20863" class="Bound">deps₂&#39;</a> <a id="20870" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20872" href="Ledger.Conway.Conformance.Equivalence.html#20872" class="Bound">eqd&#39;</a> <a id="20877" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20879" href="Ledger.Conway.Conformance.Equivalence.html#20879" class="Bound">rs&#39;</a> <a id="20883" class="Symbol">=</a> <a id="20885" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="20896" class="Symbol">(</a><a id="20897" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="20908" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="20911" href="Ledger.Conway.Conformance.Equivalence.html#20776" class="Bound">cert</a> <a id="20916" href="Ledger.Conway.Conformance.Equivalence.html#20722" class="Bound">deps₁</a><a id="20921" class="Symbol">)</a> <a id="20923" class="Symbol">(</a><a id="20924" href="Ledger.Conway.Conformance.Equivalence.html#17465" class="Function">updateCDep</a> <a id="20935" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a> <a id="20938" href="Ledger.Conway.Conformance.Equivalence.html#20776" class="Bound">cert</a> <a id="20943" href="Ledger.Conway.Conformance.Equivalence.html#20728" class="Bound">deps₂</a><a id="20948" class="Symbol">)</a> <a id="20950" href="Ledger.Conway.Conformance.Equivalence.html#20734" class="Bound">deps₁&#39;</a>
                                         <a id="20998" class="Symbol">(</a><a id="20999" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟨</a> <a id="21001" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13414" class="Function">cong-updateDDep</a> <a id="21017" class="Symbol">{</a><a id="21018" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="21020" class="Symbol">}</a> <a id="21022" href="Ledger.Conway.Conformance.Equivalence.html#20776" class="Bound">cert</a> <a id="21027" class="Symbol">{</a><a id="21028" href="Ledger.Conway.Conformance.Equivalence.html#20722" class="Bound">deps₁</a> <a id="21034" class="Symbol">.</a><a id="21035" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21040" class="Symbol">}</a> <a id="21042" class="Symbol">{</a><a id="21043" href="Ledger.Conway.Conformance.Equivalence.html#20728" class="Bound">deps₂</a> <a id="21049" class="Symbol">.</a><a id="21050" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21055" class="Symbol">}</a>
                                          <a id="21099" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">,</a> <a id="21101" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14445" class="Function">cong-updateGDep</a> <a id="21117" class="Symbol">{</a><a id="21118" href="Ledger.Conway.Certs.html#2826" class="Function">pp</a><a id="21120" class="Symbol">}</a> <a id="21122" href="Ledger.Conway.Conformance.Equivalence.html#20776" class="Bound">cert</a> <a id="21127" class="Symbol">{</a><a id="21128" href="Ledger.Conway.Conformance.Equivalence.html#20722" class="Bound">deps₁</a> <a id="21134" class="Symbol">.</a><a id="21135" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21140" class="Symbol">}</a> <a id="21142" class="Symbol">{</a><a id="21143" href="Ledger.Conway.Conformance.Equivalence.html#20728" class="Bound">deps₂</a> <a id="21149" class="Symbol">.</a><a id="21150" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21155" class="Symbol">}</a> <a id="21157" href="Ledger.Conway.Conformance.Equivalence.html#347" class="Function Operator">⟩</a> <a id="21159" href="Ledger.Conway.Conformance.Equivalence.html#20741" class="Bound">eqd</a><a id="21162" class="Symbol">)</a> <a id="21164" href="Ledger.Conway.Conformance.Equivalence.html#20813" class="Bound">rs</a>
    <a id="21171" class="Keyword">in</a>  <a id="21175" href="Ledger.Conway.Conformance.Equivalence.html#20863" class="Bound">deps₂&#39;</a> <a id="21182" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21184" href="Ledger.Conway.Conformance.Equivalence.html#20872" class="Bound">eqd&#39;</a> <a id="21189" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21191" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21198" class="Symbol">(</a><a id="21199" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="21211" class="Symbol">(</a><a id="21212" href="Ledger.Conway.Conformance.Certs.html#5865" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="21232" class="Symbol">(</a><a id="21233" href="Ledger.Conway.Conformance.Equivalence.html#20804" class="Bound">a</a> <a id="21235" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21237" href="Ledger.Conway.Conformance.Equivalence.html#20741" class="Bound">eqd</a> <a id="21241" class="Symbol">.</a><a id="21242" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="21248" class="Symbol">.</a><a id="21249" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="21255" href="Ledger.Conway.Conformance.Equivalence.html#20808" class="Bound">b</a><a id="21256" class="Symbol">)))</a> <a id="21260" href="Ledger.Conway.Conformance.Equivalence.html#20879" class="Bound">rs&#39;</a>
                                                                   <a id="21331" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="21368" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="21379" class="Symbol">{</a><a id="21380" href="Ledger.Conway.Conformance.Equivalence.html#21380" class="Bound">Γ</a><a id="21381" class="Symbol">}</a> <a id="21383" href="Ledger.Conway.Conformance.Equivalence.html#21383" class="Bound">deps₁</a> <a id="21389" href="Ledger.Conway.Conformance.Equivalence.html#21389" class="Bound">deps₂</a> <a id="21395" href="Ledger.Conway.Conformance.Equivalence.html#21395" class="Bound">deps₁&#39;</a> <a id="21402" href="Ledger.Conway.Conformance.Equivalence.html#21402" class="Bound">eqd</a> <a id="21406" class="Symbol">(</a><a id="21407" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21414" class="Symbol">(</a><a id="21415" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a>  <a id="21428" class="Symbol">{</a><a id="21429" class="Argument">dCert</a> <a id="21435" class="Symbol">=</a> <a id="21437" href="Ledger.Conway.Conformance.Equivalence.html#21437" class="Bound">cert</a><a id="21441" class="Symbol">}</a> <a id="21443" class="Symbol">(</a><a id="21444" href="Ledger.Conway.Conformance.Certs.html#6160" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21463" href="Ledger.Conway.Conformance.Equivalence.html#21463" class="Bound">h</a><a id="21464" class="Symbol">))</a>  <a id="21468" href="Ledger.Conway.Conformance.Equivalence.html#21468" class="Bound">rs</a><a id="21470" class="Symbol">)</a> <a id="21472" class="Symbol">=</a>
    <a id="21478" class="Keyword">let</a> <a id="21482" href="Ledger.Conway.Conformance.Equivalence.html#21482" class="Bound">deps₂&#39;</a> <a id="21489" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21491" href="Ledger.Conway.Conformance.Equivalence.html#21491" class="Bound">eqd&#39;</a> <a id="21496" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21498" href="Ledger.Conway.Conformance.Equivalence.html#21498" class="Bound">rs&#39;</a> <a id="21502" class="Symbol">=</a> <a id="21504" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="21515" href="Ledger.Conway.Conformance.Equivalence.html#21383" class="Bound">deps₁</a> <a id="21521" href="Ledger.Conway.Conformance.Equivalence.html#21389" class="Bound">deps₂</a> <a id="21527" href="Ledger.Conway.Conformance.Equivalence.html#21395" class="Bound">deps₁&#39;</a> <a id="21534" href="Ledger.Conway.Conformance.Equivalence.html#21402" class="Bound">eqd</a> <a id="21538" href="Ledger.Conway.Conformance.Equivalence.html#21468" class="Bound">rs</a>
    <a id="21545" class="Keyword">in</a>  <a id="21549" href="Ledger.Conway.Conformance.Equivalence.html#21482" class="Bound">deps₂&#39;</a> <a id="21556" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21558" href="Ledger.Conway.Conformance.Equivalence.html#21491" class="Bound">eqd&#39;</a> <a id="21563" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21565" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21572" class="Symbol">(</a><a id="21573" href="Ledger.Conway.Conformance.Certs.html#6940" class="InductiveConstructor">C.CERT-vdel</a> <a id="21585" class="Symbol">(</a><a id="21586" href="Ledger.Conway.Conformance.Certs.html#6160" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21605" href="Ledger.Conway.Conformance.Equivalence.html#21463" class="Bound">h</a><a id="21606" class="Symbol">))</a> <a id="21609" href="Ledger.Conway.Conformance.Equivalence.html#21498" class="Bound">rs&#39;</a>

  <a id="castCERTS"></a><a id="21616" href="Ledger.Conway.Conformance.Equivalence.html#21616" class="Function">castCERTS</a> <a id="21626" class="Symbol">:</a> <a id="21628" class="Symbol">∀</a> <a id="21630" class="Symbol">{</a><a id="21631" href="Ledger.Conway.Conformance.Equivalence.html#21631" class="Bound">Γ</a> <a id="21633" href="Ledger.Conway.Conformance.Equivalence.html#21633" class="Bound">certs</a><a id="21638" class="Symbol">}</a> <a id="21640" class="Symbol">{</a><a id="21641" href="Ledger.Conway.Conformance.Equivalence.html#21641" class="Bound">s</a> <a id="21643" href="Ledger.Conway.Conformance.Equivalence.html#21643" class="Bound">s&#39;</a> <a id="21646" class="Symbol">:</a> <a id="21648" href="Ledger.Conway.Certs.html#4307" class="Record">L.CertState</a><a id="21659" class="Symbol">}</a> <a id="21661" href="Ledger.Conway.Conformance.Equivalence.html#21661" class="Bound">deps₁</a> <a id="21667" href="Ledger.Conway.Conformance.Equivalence.html#21667" class="Bound">deps₂</a> <a id="21673" href="Ledger.Conway.Conformance.Equivalence.html#21673" class="Bound">deps₁&#39;</a>
            <a id="21692" class="Symbol">→</a> <a id="21694" href="Ledger.Conway.Conformance.Equivalence.html#21661" class="Bound">deps₁</a> <a id="21700" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="21703" href="Ledger.Conway.Conformance.Equivalence.html#21667" class="Bound">deps₂</a>
            <a id="21721" class="Symbol">→</a> <a id="21723" href="Ledger.Conway.Conformance.Equivalence.html#21631" class="Bound">Γ</a> <a id="21725" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">C.⊢</a> <a id="21729" href="Ledger.Conway.Conformance.Equivalence.html#21661" class="Bound">deps₁</a> <a id="21735" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21741" href="Ledger.Conway.Conformance.Equivalence.html#21641" class="Bound">s</a> <a id="21743" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">⇀⦇</a> <a id="21746" href="Ledger.Conway.Conformance.Equivalence.html#21633" class="Bound">certs</a> <a id="21752" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">,CERTS⦈</a> <a id="21760" class="Symbol">(</a><a id="21761" href="Ledger.Conway.Conformance.Equivalence.html#21673" class="Bound">deps₁&#39;</a> <a id="21768" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21774" href="Ledger.Conway.Conformance.Equivalence.html#21643" class="Bound">s&#39;</a><a id="21776" class="Symbol">)</a>
            <a id="21790" class="Symbol">→</a> <a id="21792" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="21795" href="Ledger.Conway.Conformance.Equivalence.html#21795" class="Bound">deps₂&#39;</a> <a id="21802" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="21804" href="Ledger.Conway.Conformance.Equivalence.html#21673" class="Bound">deps₁&#39;</a> <a id="21811" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="21814" href="Ledger.Conway.Conformance.Equivalence.html#21795" class="Bound">deps₂&#39;</a> <a id="21821" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="21823" href="Ledger.Conway.Conformance.Equivalence.html#21631" class="Bound">Γ</a> <a id="21825" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">C.⊢</a> <a id="21829" href="Ledger.Conway.Conformance.Equivalence.html#21667" class="Bound">deps₂</a> <a id="21835" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21841" href="Ledger.Conway.Conformance.Equivalence.html#21641" class="Bound">s</a> <a id="21843" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">⇀⦇</a> <a id="21846" href="Ledger.Conway.Conformance.Equivalence.html#21633" class="Bound">certs</a> <a id="21852" href="Ledger.Conway.Conformance.Certs.html#7994" class="Function Operator">,CERTS⦈</a> <a id="21860" class="Symbol">(</a><a id="21861" href="Ledger.Conway.Conformance.Equivalence.html#21795" class="Bound">deps₂&#39;</a> <a id="21868" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21874" href="Ledger.Conway.Conformance.Equivalence.html#21643" class="Bound">s&#39;</a><a id="21876" class="Symbol">)</a>
  <a id="21880" href="Ledger.Conway.Conformance.Equivalence.html#21616" class="Function">castCERTS</a> <a id="21890" href="Ledger.Conway.Conformance.Equivalence.html#21890" class="Bound">deps₁</a> <a id="21896" href="Ledger.Conway.Conformance.Equivalence.html#21896" class="Bound">deps₂</a> <a id="21902" href="Ledger.Conway.Conformance.Equivalence.html#21902" class="Bound">deps₁&#39;</a> <a id="21909" href="Ledger.Conway.Conformance.Equivalence.html#21909" class="Bound">eqd</a> <a id="21913" class="Symbol">(</a><a id="21914" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="21918" class="Symbol">(</a><a id="21919" href="Ledger.Conway.Conformance.Certs.html#7173" class="InductiveConstructor">C.CERT-base</a> <a id="21931" href="Ledger.Conway.Conformance.Equivalence.html#21931" class="Bound">h</a> <a id="21933" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21935" href="Ledger.Conway.Conformance.Equivalence.html#21935" class="Bound">step</a><a id="21939" class="Symbol">))</a> <a id="21942" class="Symbol">=</a>
    <a id="21948" class="Keyword">let</a> <a id="21952" href="Ledger.Conway.Conformance.Equivalence.html#21952" class="Bound">deps₂&#39;</a> <a id="21959" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21961" href="Ledger.Conway.Conformance.Equivalence.html#21961" class="Bound">eqd&#39;</a> <a id="21966" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21968" href="Ledger.Conway.Conformance.Equivalence.html#21968" class="Bound">step&#39;</a> <a id="21974" class="Symbol">=</a> <a id="21976" href="Ledger.Conway.Conformance.Equivalence.html#17643" class="Function">castCERTS&#39;</a> <a id="21987" href="Ledger.Conway.Conformance.Equivalence.html#21890" class="Bound">deps₁</a> <a id="21993" href="Ledger.Conway.Conformance.Equivalence.html#21896" class="Bound">deps₂</a> <a id="21999" href="Ledger.Conway.Conformance.Equivalence.html#21902" class="Bound">deps₁&#39;</a> <a id="22006" href="Ledger.Conway.Conformance.Equivalence.html#21909" class="Bound">eqd</a> <a id="22010" href="Ledger.Conway.Conformance.Equivalence.html#21935" class="Bound">step</a>
    <a id="22019" class="Keyword">in</a>  <a id="22023" href="Ledger.Conway.Conformance.Equivalence.html#21952" class="Bound">deps₂&#39;</a> <a id="22030" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22032" href="Ledger.Conway.Conformance.Equivalence.html#21961" class="Bound">eqd&#39;</a> <a id="22037" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22039" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="22043" class="Symbol">(</a><a id="22044" href="Ledger.Conway.Conformance.Certs.html#7173" class="InductiveConstructor">C.CERT-base</a> <a id="22056" href="Ledger.Conway.Conformance.Equivalence.html#21931" class="Bound">h</a> <a id="22058" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22060" href="Ledger.Conway.Conformance.Equivalence.html#21968" class="Bound">step&#39;</a><a id="22065" class="Symbol">)</a>

<a id="_⊢_⇀⦇_,GOVn⦈_"></a><a id="22068" href="Ledger.Conway.Conformance.Equivalence.html#22068" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22082" class="Symbol">:</a> <a id="22084" href="Ledger.Conway.Gov.html#1573" class="Record">L.GovEnv</a> <a id="22093" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22095" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="22097" class="Symbol">→</a> <a id="22099" href="Ledger.Conway.Gov.html#1381" class="Function">L.GovState</a> <a id="22110" class="Symbol">→</a> <a id="22112" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="22117" class="Symbol">(</a><a id="22118" href="Ledger.Conway.Gov.Actions.html#2345" class="Record">GovVote</a> <a id="22126" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="22128" href="Ledger.Conway.Gov.Actions.html#2490" class="Record">GovProposal</a><a id="22139" class="Symbol">)</a> <a id="22141" class="Symbol">→</a> <a id="22143" href="Ledger.Conway.Gov.html#1381" class="Function">L.GovState</a> <a id="22154" class="Symbol">→</a> <a id="22156" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="22161" href="Ledger.Conway.Conformance.Equivalence.html#22068" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22175" class="Symbol">=</a> <a id="22177" href="Interface.STS.html#811" class="Datatype Operator">_⊢_⇀⟦_⟧ᵢ*&#39;_</a> <a id="22189" class="Symbol">{</a><a id="22190" class="Argument">_⊢_⇀⟦_⟧ᵇ_</a> <a id="22200" class="Symbol">=</a> <a id="22202" href="Interface.STS.html#1257" class="Datatype">IdSTS</a><a id="22207" class="Symbol">}</a> <a id="22209" class="Symbol">{</a><a id="22210" class="Argument">_⊢_⇀⟦_⟧_</a> <a id="22219" class="Symbol">=</a> <a id="22221" href="Ledger.Conway.Gov.html#6834" class="Datatype Operator">L._⊢_⇀⦇_,GOV⦈_</a><a id="22235" class="Symbol">}</a>

<a id="22238" class="Keyword">opaque</a>
  <a id="castLEDGER"></a><a id="22247" href="Ledger.Conway.Conformance.Equivalence.html#22247" class="Function">castLEDGER</a> <a id="22258" class="Symbol">:</a> <a id="22260" class="Symbol">∀</a> <a id="22262" class="Symbol">{</a><a id="22263" href="Ledger.Conway.Conformance.Equivalence.html#22263" class="Bound">Γ</a> <a id="22265" href="Ledger.Conway.Conformance.Equivalence.html#22265" class="Bound">tx</a><a id="22267" class="Symbol">}</a> <a id="22269" class="Symbol">{</a><a id="22270" href="Ledger.Conway.Conformance.Equivalence.html#22270" class="Bound">s</a> <a id="22272" href="Ledger.Conway.Conformance.Equivalence.html#22272" class="Bound">s&#39;</a> <a id="22275" class="Symbol">:</a> <a id="22277" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a><a id="22285" class="Symbol">}</a> <a id="22287" href="Ledger.Conway.Conformance.Equivalence.html#22287" class="Bound">deps₁</a> <a id="22293" href="Ledger.Conway.Conformance.Equivalence.html#22293" class="Bound">deps₂</a> <a id="22299" href="Ledger.Conway.Conformance.Equivalence.html#22299" class="Bound">deps₁&#39;</a>
            <a id="22318" class="Symbol">→</a> <a id="22320" href="Ledger.Conway.Conformance.Equivalence.html#22287" class="Bound">deps₁</a> <a id="22326" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="22329" href="Ledger.Conway.Conformance.Equivalence.html#22293" class="Bound">deps₂</a>
            <a id="22347" class="Symbol">→</a> <a id="22349" href="Ledger.Conway.Conformance.Equivalence.html#22263" class="Bound">Γ</a> <a id="22351" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="22355" href="Ledger.Conway.Conformance.Equivalence.html#22287" class="Bound">deps₁</a> <a id="22361" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22367" href="Ledger.Conway.Conformance.Equivalence.html#22270" class="Bound">s</a> <a id="22369" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="22372" href="Ledger.Conway.Conformance.Equivalence.html#22265" class="Bound">tx</a> <a id="22375" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="22384" class="Symbol">(</a><a id="22385" href="Ledger.Conway.Conformance.Equivalence.html#22299" class="Bound">deps₁&#39;</a> <a id="22392" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22398" href="Ledger.Conway.Conformance.Equivalence.html#22272" class="Bound">s&#39;</a><a id="22400" class="Symbol">)</a>
            <a id="22414" class="Symbol">→</a> <a id="22416" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="22419" href="Ledger.Conway.Conformance.Equivalence.html#22419" class="Bound">deps₂&#39;</a> <a id="22426" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="22428" href="Ledger.Conway.Conformance.Equivalence.html#22299" class="Bound">deps₁&#39;</a> <a id="22435" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="22438" href="Ledger.Conway.Conformance.Equivalence.html#22419" class="Bound">deps₂&#39;</a> <a id="22445" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22447" href="Ledger.Conway.Conformance.Equivalence.html#22263" class="Bound">Γ</a> <a id="22449" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C.⊢</a> <a id="22453" href="Ledger.Conway.Conformance.Equivalence.html#22293" class="Bound">deps₂</a> <a id="22459" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22465" href="Ledger.Conway.Conformance.Equivalence.html#22270" class="Bound">s</a> <a id="22467" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">⇀⦇</a> <a id="22470" href="Ledger.Conway.Conformance.Equivalence.html#22265" class="Bound">tx</a> <a id="22473" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">,LEDGER⦈</a> <a id="22482" class="Symbol">(</a><a id="22483" href="Ledger.Conway.Conformance.Equivalence.html#22419" class="Bound">deps₂&#39;</a> <a id="22490" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22496" href="Ledger.Conway.Conformance.Equivalence.html#22272" class="Bound">s&#39;</a><a id="22498" class="Symbol">)</a>
  <a id="22502" href="Ledger.Conway.Conformance.Equivalence.html#22247" class="Function">castLEDGER</a> <a id="22513" class="Symbol">{</a><a id="22514" href="Ledger.Conway.Conformance.Equivalence.html#22514" class="Bound">Γ</a><a id="22515" class="Symbol">}</a> <a id="22517" class="Symbol">{</a><a id="22518" href="Ledger.Conway.Conformance.Equivalence.html#22518" class="Bound">tx</a><a id="22520" class="Symbol">}</a> <a id="22522" class="Symbol">{</a><a id="22523" href="Ledger.Conway.Conformance.Equivalence.html#22523" class="Bound">s</a><a id="22524" class="Symbol">}</a> <a id="22526" class="Symbol">{</a><a id="22527" href="Ledger.Conway.Conformance.Equivalence.html#22527" class="Bound">s&#39;</a><a id="22529" class="Symbol">}</a> <a id="22531" href="Ledger.Conway.Conformance.Equivalence.html#22531" class="Bound">deps₁</a> <a id="22537" href="Ledger.Conway.Conformance.Equivalence.html#22537" class="Bound">deps₂</a> <a id="22543" href="Ledger.Conway.Conformance.Equivalence.html#22543" class="Bound">deps₁&#39;</a> <a id="22550" href="Ledger.Conway.Conformance.Equivalence.html#22550" class="Bound">eqd</a> <a id="22554" class="Symbol">(</a><a id="22555" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22567" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22572" href="Ledger.Conway.Conformance.Equivalence.html#22572" class="Bound">utxo</a> <a id="22577" href="Ledger.Conway.Conformance.Equivalence.html#22577" class="Bound">certs</a> <a id="22583" href="Ledger.Conway.Conformance.Equivalence.html#22583" class="Bound">gov</a><a id="22586" class="Symbol">)</a> <a id="22588" class="Symbol">=</a>
    <a id="22594" class="Keyword">let</a> <a id="22598" href="Ledger.Conway.Conformance.Equivalence.html#22598" class="Bound">deps₂&#39;</a> <a id="22605" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22607" href="Ledger.Conway.Conformance.Equivalence.html#22607" class="Bound">eqd&#39;</a> <a id="22612" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22614" href="Ledger.Conway.Conformance.Equivalence.html#22614" class="Bound">certs&#39;</a> <a id="22621" class="Symbol">=</a> <a id="22623" href="Ledger.Conway.Conformance.Equivalence.html#21616" class="Function">castCERTS</a> <a id="22633" href="Ledger.Conway.Conformance.Equivalence.html#22531" class="Bound">deps₁</a> <a id="22639" href="Ledger.Conway.Conformance.Equivalence.html#22537" class="Bound">deps₂</a> <a id="22645" href="Ledger.Conway.Conformance.Equivalence.html#22543" class="Bound">deps₁&#39;</a> <a id="22652" href="Ledger.Conway.Conformance.Equivalence.html#22550" class="Bound">eqd</a> <a id="22656" href="Ledger.Conway.Conformance.Equivalence.html#22577" class="Bound">certs</a>
    <a id="22666" class="Keyword">in</a>  <a id="22670" href="Ledger.Conway.Conformance.Equivalence.html#22598" class="Bound">deps₂&#39;</a> <a id="22677" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22679" href="Ledger.Conway.Conformance.Equivalence.html#22607" class="Bound">eqd&#39;</a> <a id="22684" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22686" href="Ledger.Conway.Conformance.Ledger.html#2112" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22698" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22703" href="Ledger.Conway.Conformance.Equivalence.html#22572" class="Bound">utxo</a> <a id="22708" href="Ledger.Conway.Conformance.Equivalence.html#22614" class="Bound">certs&#39;</a> <a id="22715" href="Ledger.Conway.Conformance.Equivalence.html#22583" class="Bound">gov</a>
  <a id="22721" href="Ledger.Conway.Conformance.Equivalence.html#22247" class="Function">castLEDGER</a> <a id="22732" href="Ledger.Conway.Conformance.Equivalence.html#22732" class="Bound">deps₁</a> <a id="22738" href="Ledger.Conway.Conformance.Equivalence.html#22738" class="Bound">deps₂</a> <a id="22744" href="Ledger.Conway.Conformance.Equivalence.html#22744" class="Bound">deps₁&#39;</a> <a id="22751" href="Ledger.Conway.Conformance.Equivalence.html#22751" class="Bound">eqd</a> <a id="22755" class="Symbol">(</a><a id="22756" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22768" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22773" href="Ledger.Conway.Conformance.Equivalence.html#22773" class="Bound">utxo</a><a id="22777" class="Symbol">)</a> <a id="22779" class="Symbol">=</a> <a id="22781" class="Symbol">_</a> <a id="22783" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22785" href="Ledger.Conway.Conformance.Equivalence.html#22751" class="Bound">eqd</a> <a id="22789" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22791" href="Ledger.Conway.Conformance.Ledger.html#2165" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22803" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22808" href="Ledger.Conway.Conformance.Equivalence.html#22773" class="Bound">utxo</a>

<a id="22814" class="Comment">---------------------------------------------------------------------------</a>
<a id="22890" class="Comment">-- The main result</a>
<a id="22909" class="Comment">---------------------------------------------------------------------------</a>

<a id="22986" class="Keyword">open</a> <a id="22991" class="Keyword">import</a> <a id="22998" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html" class="Module">Ledger.Conway.Conformance.Equivalence.Bisimilarity</a>

<a id="23050" class="Comment">-- An LState sˡ from the Spec and an LState sᶜ from Conformance are</a>
<a id="23118" class="Comment">-- bisimular iff</a>
<a id="23135" class="Comment">--  ∙ the deposits in the CertState of sᶜ are equal (as maps) to the</a>
<a id="23204" class="Comment">--    appropriate restrictions of the deposits in the UTxOState of sˡ</a>
<a id="23274" class="Comment">--  ∙ the only difference between sˡ and sᶜ are the extra deposits in</a>
<a id="23344" class="Comment">--    the CertState of sᶜ.</a>
<a id="_∼_"></a><a id="23371" href="Ledger.Conway.Conformance.Equivalence.html#23371" class="Function Operator">_∼_</a> <a id="23375" class="Symbol">:</a> <a id="23377" href="Ledger.Conway.Ledger.html#865" class="Record">L.LState</a> <a id="23386" class="Symbol">→</a> <a id="23388" href="Ledger.Conway.Conformance.Ledger.html#723" class="Record">C.LState</a> <a id="23397" class="Symbol">→</a> <a id="23399" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="23404" href="Ledger.Conway.Conformance.Equivalence.html#23404" class="Bound">sˡ</a> <a id="23407" href="Ledger.Conway.Conformance.Equivalence.html#23371" class="Function Operator">∼</a> <a id="23409" href="Ledger.Conway.Conformance.Equivalence.html#23409" class="Bound">sᶜ</a> <a id="23412" class="Symbol">=</a> <a id="23414" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="23427" href="Ledger.Conway.Conformance.Equivalence.html#23404" class="Bound">sˡ</a> <a id="23430" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="23433" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="23447" class="Symbol">(</a><a id="23448" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="23467" href="Ledger.Conway.Conformance.Equivalence.html#23409" class="Bound">sᶜ</a><a id="23469" class="Symbol">)</a> <a id="23471" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="23473" href="Ledger.Conway.Conformance.Equivalence.html#23404" class="Bound">sˡ</a> <a id="23476" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="23478" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23483" href="Ledger.Conway.Conformance.Equivalence.html#23409" class="Bound">sᶜ</a>

<a id="23487" class="Comment">-- This gives us the main result: a bisimulation between the LEDGER</a>
<a id="23555" class="Comment">-- rules in Ledger and in Conformance.</a>
<a id="bisimilarityProof"></a><a id="23594" href="Ledger.Conway.Conformance.Equivalence.html#23594" class="Function">bisimilarityProof</a> <a id="23612" class="Symbol">:</a> <a id="23614" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#128" class="Record">Bisimilar</a> <a id="23624" href="Ledger.Conway.Ledger.html#2637" class="Datatype Operator">L._⊢_⇀⦇_,LEDGER⦈_</a> <a id="23642" href="Ledger.Conway.Conformance.Ledger.html#1101" class="Datatype Operator">C._⊢_⇀⦇_,LEDGER⦈_</a>
<a id="23660" href="Ledger.Conway.Conformance.Equivalence.html#23594" class="Function">bisimilarityProof</a> <a id="23678" class="Symbol">.</a><a id="23679" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#259" class="Field Operator">Bisimilar._≈_</a> <a id="23693" class="Symbol">=</a> <a id="23695" href="Ledger.Conway.Conformance.Equivalence.html#23371" class="Function Operator">_∼_</a>
<a id="23699" href="Ledger.Conway.Conformance.Equivalence.html#23594" class="Function">bisimilarityProof</a> <a id="23717" class="Symbol">.</a><a id="23718" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#284" class="Field">Bisimilar.to</a> <a id="23731" class="Symbol">{</a><a id="23732" href="Ledger.Conway.Conformance.Equivalence.html#23732" class="Bound">Γ</a><a id="23733" class="Symbol">}</a> <a id="23735" class="Symbol">{</a><a id="23736" href="Ledger.Conway.Conformance.Equivalence.html#23736" class="Bound">tx</a><a id="23738" class="Symbol">}</a> <a id="23740" class="Symbol">{</a><a id="23741" href="Ledger.Conway.Conformance.Equivalence.html#23741" class="Bound">sˡ</a><a id="23743" class="Symbol">}</a> <a id="23745" class="Symbol">{</a><a id="23746" href="Ledger.Conway.Conformance.Equivalence.html#23746" class="Bound">sˡ&#39;</a><a id="23749" class="Symbol">}</a> <a id="23751" class="Symbol">{</a><a id="23752" href="Ledger.Conway.Conformance.Equivalence.html#23752" class="Bound">sᶜ</a><a id="23754" class="Symbol">}</a> <a id="23756" class="Symbol">(</a><a id="23757" href="Ledger.Conway.Conformance.Equivalence.html#23757" class="Bound">eq</a> <a id="23760" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23762" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="23766" class="Symbol">)</a> <a id="23768" href="Ledger.Conway.Conformance.Equivalence.html#23768" class="Bound">r</a> <a id="23770" class="Symbol">=</a>
  <a id="23774" class="Keyword">let</a> <a id="23778" href="Ledger.Conway.Conformance.Equivalence.html#23778" class="Bound">deps</a>  <a id="23784" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23786" href="Ledger.Conway.Conformance.Equivalence.html#23786" class="Bound">eqd</a>  <a id="23791" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23793" href="Ledger.Conway.Conformance.Equivalence.html#23793" class="Bound">r&#39;</a>  <a id="23797" class="Symbol">=</a> <a id="23799" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23804" href="Ledger.Conway.Conformance.Equivalence.html#23768" class="Bound">r</a>
      <a id="23812" href="Ledger.Conway.Conformance.Equivalence.html#23812" class="Bound">deps&#39;</a> <a id="23818" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23820" href="Ledger.Conway.Conformance.Equivalence.html#23820" class="Bound">eqd&#39;</a> <a id="23825" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23827" href="Ledger.Conway.Conformance.Equivalence.html#23827" class="Bound">r&#39;&#39;</a> <a id="23831" class="Symbol">=</a> <a id="23833" href="Ledger.Conway.Conformance.Equivalence.html#22247" class="Function">castLEDGER</a> <a id="23844" class="Symbol">(</a><a id="23845" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="23858" class="Symbol">(</a><a id="23859" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23864" href="Ledger.Conway.Conformance.Equivalence.html#23752" class="Bound">sᶜ</a><a id="23866" class="Symbol">))</a>
                                      <a id="23907" class="Symbol">(</a><a id="23908" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="23922" class="Symbol">(</a><a id="23923" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="23942" href="Ledger.Conway.Conformance.Equivalence.html#23752" class="Bound">sᶜ</a><a id="23944" class="Symbol">))</a>
                                      <a id="23985" href="Ledger.Conway.Conformance.Equivalence.html#23778" class="Bound">deps</a>
                                      <a id="24028" href="Ledger.Conway.Conformance.Equivalence.html#23757" class="Bound">eq</a>
                                      <a id="24069" href="Ledger.Conway.Conformance.Equivalence.html#23793" class="Bound">r&#39;</a>
      <a id="24078" href="Ledger.Conway.Conformance.Equivalence.html#24078" class="Bound">eqd&#39;&#39;</a> <a id="24084" class="Symbol">:</a> <a id="24086" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24099" href="Ledger.Conway.Conformance.Equivalence.html#23746" class="Bound">sˡ&#39;</a> <a id="24103" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12901" class="Function Operator">≡ᵈ</a> <a id="24106" href="Ledger.Conway.Conformance.Equivalence.html#23812" class="Bound">deps&#39;</a>
      <a id="24118" href="Ledger.Conway.Conformance.Equivalence.html#24078" class="Bound">eqd&#39;&#39;</a> <a id="24124" class="Symbol">=</a> <a id="24126" href="Ledger.Conway.Conformance.Equivalence.html#13758" class="Function">≡ᵈ-trans</a> <a id="24135" class="Symbol">{</a><a id="24136" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24149" href="Ledger.Conway.Conformance.Equivalence.html#23746" class="Bound">sˡ&#39;</a><a id="24152" class="Symbol">}</a> <a id="24154" class="Symbol">{</a><a id="24155" href="Ledger.Conway.Conformance.Equivalence.html#23778" class="Bound">deps</a><a id="24159" class="Symbol">}</a> <a id="24161" class="Symbol">{</a><a id="24162" href="Ledger.Conway.Conformance.Equivalence.html#23812" class="Bound">deps&#39;</a><a id="24167" class="Symbol">}</a> <a id="24169" class="Symbol">(</a><a id="24170" href="Ledger.Conway.Conformance.Equivalence.html#13741" class="Function">≡ᵈ-sym</a> <a id="24177" class="Symbol">{</a><a id="24178" href="Ledger.Conway.Conformance.Equivalence.html#23778" class="Bound">deps</a><a id="24182" class="Symbol">}</a> <a id="24184" class="Symbol">{</a><a id="24185" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24198" href="Ledger.Conway.Conformance.Equivalence.html#23746" class="Bound">sˡ&#39;</a><a id="24201" class="Symbol">}</a> <a id="24203" href="Ledger.Conway.Conformance.Equivalence.html#23786" class="Bound">eqd</a><a id="24206" class="Symbol">)</a> <a id="24208" href="Ledger.Conway.Conformance.Equivalence.html#23820" class="Bound">eqd&#39;</a>
  <a id="24215" class="Keyword">in</a>
  <a id="24220" class="Symbol">(</a><a id="24221" href="Ledger.Conway.Conformance.Equivalence.html#23812" class="Bound">deps&#39;</a> <a id="24227" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24233" href="Ledger.Conway.Conformance.Equivalence.html#23746" class="Bound">sˡ&#39;</a><a id="24236" class="Symbol">)</a> <a id="24238" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24240" class="Symbol">(</a><a id="24241" href="Ledger.Conway.Conformance.Equivalence.html#24078" class="Bound">eqd&#39;&#39;</a> <a id="24247" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24249" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24253" class="Symbol">)</a> <a id="24255" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24257" href="Ledger.Conway.Conformance.Equivalence.html#23827" class="Bound">r&#39;&#39;</a>
<a id="24261" href="Ledger.Conway.Conformance.Equivalence.html#23594" class="Function">bisimilarityProof</a> <a id="24279" class="Symbol">.</a><a id="24280" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#419" class="Field">Bisimilar.from</a> <a id="24295" class="Symbol">{</a><a id="24296" href="Ledger.Conway.Conformance.Equivalence.html#24296" class="Bound">Γ</a><a id="24297" class="Symbol">}</a> <a id="24299" class="Symbol">{</a><a id="24300" href="Ledger.Conway.Conformance.Equivalence.html#24300" class="Bound">tx</a><a id="24302" class="Symbol">}</a> <a id="24304" class="Symbol">{</a><a id="24305" href="Ledger.Conway.Conformance.Equivalence.html#24305" class="Bound">sˡ</a><a id="24307" class="Symbol">}</a> <a id="24309" class="Symbol">{</a><a id="24310" href="Ledger.Conway.Conformance.Equivalence.html#24310" class="Bound">sᶜ</a><a id="24312" class="Symbol">}</a> <a id="24314" class="Symbol">{</a><a id="24315" href="Ledger.Conway.Conformance.Equivalence.html#24315" class="Bound">sᶜ&#39;</a><a id="24318" class="Symbol">}</a> <a id="24320" class="Symbol">(</a><a id="24321" href="Ledger.Conway.Conformance.Equivalence.html#24321" class="Bound">eqd</a> <a id="24325" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24327" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24331" class="Symbol">)</a> <a id="24333" href="Ledger.Conway.Conformance.Equivalence.html#24333" class="Bound">r</a> <a id="24335" class="Symbol">=</a>
  <a id="24339" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24344" href="Ledger.Conway.Conformance.Equivalence.html#24315" class="Bound">sᶜ&#39;</a> <a id="24348" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24350" class="Symbol">(</a><a id="24351" href="Ledger.Conway.Conformance.Equivalence.html#24474" class="Function">wf&#39;</a> <a id="24355" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24357" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24361" class="Symbol">)</a> <a id="24363" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24365" href="Ledger.Conway.Conformance.Equivalence.html#24388" class="Function">wf</a> <a id="24368" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24374" href="Ledger.Conway.Conformance.Equivalence.html#24333" class="Bound">r</a>
  <a id="24378" class="Keyword">where</a>
    <a id="24388" href="Ledger.Conway.Conformance.Equivalence.html#24388" class="Function">wf</a>  <a id="24392" class="Symbol">=</a> <a id="24394" href="Ledger.Conway.Conformance.Equivalence.html#13741" class="Function">≡ᵈ-sym</a> <a id="24401" class="Symbol">{</a><a id="24402" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24415" class="Symbol">(</a><a id="24416" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24421" href="Ledger.Conway.Conformance.Equivalence.html#24310" class="Bound">sᶜ</a><a id="24423" class="Symbol">)}</a> <a id="24426" class="Symbol">{</a><a id="24427" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="24441" class="Symbol">(</a><a id="24442" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="24461" href="Ledger.Conway.Conformance.Equivalence.html#24310" class="Bound">sᶜ</a><a id="24463" class="Symbol">)}</a> <a id="24466" href="Ledger.Conway.Conformance.Equivalence.html#24321" class="Bound">eqd</a>
    <a id="24474" href="Ledger.Conway.Conformance.Equivalence.html#24474" class="Function">wf&#39;</a> <a id="24478" class="Symbol">=</a> <a id="24480" href="Ledger.Conway.Conformance.Equivalence.html#13741" class="Function">≡ᵈ-sym</a> <a id="24487" class="Symbol">{</a><a id="24488" href="Ledger.Conway.Conformance.Equivalence.html#8377" class="Function">certDepositsC</a> <a id="24502" class="Symbol">(</a><a id="24503" href="Ledger.Conway.Conformance.Ledger.html#831" class="Field">C.LState.certState</a> <a id="24522" href="Ledger.Conway.Conformance.Equivalence.html#24315" class="Bound">sᶜ&#39;</a><a id="24525" class="Symbol">)}</a> <a id="24528" class="Symbol">{</a><a id="24529" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12745" class="Function">certDeposits</a> <a id="24542" class="Symbol">(</a><a id="24543" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24548" href="Ledger.Conway.Conformance.Equivalence.html#24315" class="Bound">sᶜ&#39;</a><a id="24551" class="Symbol">)}</a> <a id="24554" class="Symbol">(</a><a id="24555" href="Ledger.Conway.Conformance.Equivalence.html#15155" class="Function">lemWellformed</a> <a id="24569" href="Ledger.Conway.Conformance.Equivalence.html#24388" class="Function">wf</a> <a id="24572" href="Ledger.Conway.Conformance.Equivalence.html#24333" class="Bound">r</a><a id="24573" class="Symbol">)</a>
    <a id="24579" href="Ledger.Conway.Conformance.Equivalence.html#24579" class="Function">r&#39;</a> <a id="24582" class="Symbol">=</a> <a id="24584" href="Ledger.Conway.Conformance.Equivalence.html#24388" class="Function">wf</a> <a id="24587" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24593" href="Ledger.Conway.Conformance.Equivalence.html#24333" class="Bound">r</a>
</pre></body></html>