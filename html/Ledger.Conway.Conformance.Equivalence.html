<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Equivalence</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Comment">-- Proof that the rules under Ledger.Conway.Conformance are equivalent</a>
<a id="95" class="Comment">-- to the rules under Ledger.</a>

<a id="126" class="Keyword">open</a> <a id="131" class="Keyword">import</a> <a id="138" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="202" class="Keyword">open</a> <a id="207" class="Keyword">import</a> <a id="214" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a> <a id="254" class="Keyword">using</a> <a id="260" class="Symbol">(</a><a id="261" href="Ledger.Conway.Specification.Transaction.html#1000" class="Record">TransactionStructure</a><a id="281" class="Symbol">)</a>

<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="306" class="Keyword">using</a> <a id="312" class="Symbol">(</a><a id="313" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="314" class="Symbol">)</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Data.Product.html" class="Module">Data.Product</a> <a id="341" class="Keyword">using</a> <a id="347" class="Symbol">(</a><a id="348" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="351" class="Symbol">;</a> <a id="353" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="356" class="Symbol">)</a> <a id="358" class="Keyword">renaming</a> <a id="367" class="Symbol">(</a><a id="368" href="Data.Product.Base.html#2173" class="Function">map</a> <a id="372" class="Symbol">to</a> <a id="375" class="Function">⟨_,_⟩</a><a id="380" class="Symbol">)</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="411" class="Keyword">using</a> <a id="417" class="Symbol">(</a><a id="418" href="Function.Bundles.html#12400" class="Function Operator">_⇔_</a><a id="421" class="Symbol">;</a> <a id="423" href="Function.Bundles.html#13499" class="Function">mk⇔</a><a id="426" class="Symbol">;</a> <a id="428" href="Function.Bundles.html#4752" class="Record">Equivalence</a><a id="439" class="Symbol">)</a>
<a id="441" class="Keyword">open</a> <a id="446" class="Keyword">import</a> <a id="453" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="491" class="Keyword">open</a> <a id="496" class="Keyword">import</a> <a id="503" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="519" class="Keyword">using</a> <a id="525" class="Symbol">(</a><a id="526" href="Relation.Binary.Structures.html#1550" class="Record">IsEquivalence</a><a id="539" class="Symbol">)</a>

<a id="542" class="Keyword">open</a> <a id="547" class="Keyword">import</a> <a id="554" href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="Module">Ledger.Conway.Conformance.Equivalence.Convert</a>

<a id="601" class="Keyword">module</a> <a id="608" href="Ledger.Conway.Conformance.Equivalence.html" class="Module">Ledger.Conway.Conformance.Equivalence</a>
  <a id="648" class="Symbol">(</a><a id="649" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="653" class="Symbol">:</a> <a id="655" class="Symbol">_)</a> <a id="658" class="Symbol">(</a><a id="659" class="Keyword">open</a> <a id="664" href="Ledger.Conway.Specification.Transaction.html#1000" class="Module">TransactionStructure</a> <a id="685" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a><a id="688" class="Symbol">)</a>
  <a id="692" class="Symbol">(</a><a id="693" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="697" class="Symbol">:</a> <a id="699" href="Ledger.Conway.Specification.Abstract.html#641" class="Record">AbstractFunctions</a> <a id="717" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a><a id="720" class="Symbol">)</a> <a id="722" class="Symbol">(</a><a id="723" class="Keyword">open</a> <a id="728" href="Ledger.Conway.Specification.Abstract.html#641" class="Module">AbstractFunctions</a> <a id="746" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a><a id="749" class="Symbol">)</a>
  <a id="753" class="Keyword">where</a>

<a id="760" class="Keyword">module</a> <a id="L"></a><a id="767" href="Ledger.Conway.Conformance.Equivalence.html#767" class="Module">L</a> <a id="769" class="Keyword">where</a>
  <a id="777" class="Keyword">open</a> <a id="782" class="Keyword">import</a> <a id="789" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="824" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="828" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="832" class="Keyword">public</a>
  <a id="841" class="Keyword">open</a> <a id="846" class="Keyword">import</a> <a id="853" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="886" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="890" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="894" class="Keyword">public</a>
  <a id="903" class="Keyword">open</a> <a id="908" class="Keyword">import</a> <a id="915" href="Ledger.Conway.Specification.Utxow.html" class="Module">Ledger.Conway.Specification.Utxow</a> <a id="949" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="953" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="957" class="Keyword">public</a>
  <a id="966" class="Keyword">open</a> <a id="971" class="Keyword">import</a> <a id="978" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="1010" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1014" class="Keyword">public</a>
  <a id="1023" class="Keyword">open</a> <a id="1028" class="Keyword">import</a> <a id="1035" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="1069" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a> <a id="1082" class="Keyword">public</a>

<a id="1090" class="Keyword">module</a> <a id="C"></a><a id="1097" href="Ledger.Conway.Conformance.Equivalence.html#1097" class="Module">C</a> <a id="1099" class="Keyword">where</a>
  <a id="1107" class="Keyword">open</a> <a id="1112" class="Keyword">import</a> <a id="1119" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="1152" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1156" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="1160" class="Keyword">public</a>
  <a id="1169" class="Keyword">open</a> <a id="1174" class="Keyword">import</a> <a id="1181" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="1212" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1216" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="1220" class="Keyword">public</a>
  <a id="1229" class="Keyword">open</a> <a id="1234" class="Keyword">import</a> <a id="1241" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="1273" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1277" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="1281" class="Keyword">public</a>
  <a id="1290" class="Keyword">open</a> <a id="1295" class="Keyword">import</a> <a id="1302" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="1334" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a> <a id="1347" class="Keyword">public</a>

<a id="1355" class="Keyword">open</a> <a id="1360" class="Keyword">import</a> <a id="1367" href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="Module">Ledger.Conway.Conformance.Equivalence.Certs</a> <a id="1411" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1415" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a>
<a id="1419" class="Keyword">open</a> <a id="1424" class="Keyword">import</a> <a id="1431" href="Ledger.Conway.Conformance.Equivalence.Utxo.html" class="Module">Ledger.Conway.Conformance.Equivalence.Utxo</a> <a id="1474" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1478" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a>
<a id="1482" class="Keyword">open</a> <a id="1487" class="Keyword">import</a> <a id="1494" href="Ledger.Conway.Conformance.Equivalence.Deposits.html" class="Module">Ledger.Conway.Conformance.Equivalence.Deposits</a> <a id="1541" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1545" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a>

<a id="1550" class="Keyword">open</a> <a id="1555" href="Ledger.Conway.Specification.Transaction.html#4500" class="Module">Tx</a>
<a id="1558" class="Keyword">open</a> <a id="1563" class="Keyword">import</a> <a id="1570" href="Axiom.Set.Properties.html" class="Module">Axiom.Set.Properties</a> <a id="1591" href="Axiom.Set.html#10669" class="Function">th</a> <a id="1594" class="Keyword">using</a> <a id="1600" class="Symbol">(</a><a id="1601" href="Axiom.Set.Properties.html#3967" class="Function">≡ᵉ-Setoid</a><a id="1610" class="Symbol">)</a>

<a id="1613" class="Comment">-- Invalid transactions don&#39;t change the deposits</a>
<a id="lemInvalidDepositsL"></a><a id="1663" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="1683" class="Symbol">:</a> <a id="1685" class="Symbol">∀</a> <a id="1687" class="Symbol">{</a><a id="1688" href="Ledger.Conway.Conformance.Equivalence.html#1688" class="Bound">Γ</a> <a id="1690" href="Ledger.Conway.Conformance.Equivalence.html#1690" class="Bound">utxoSt</a> <a id="1697" href="Ledger.Conway.Conformance.Equivalence.html#1697" class="Bound">utxoSt&#39;</a> <a id="1705" href="Ledger.Conway.Conformance.Equivalence.html#1705" class="Bound">tx</a><a id="1707" class="Symbol">}</a>
                    <a id="1729" class="Symbol">→</a> <a id="1731" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="1739" href="Ledger.Conway.Conformance.Equivalence.html#1705" class="Bound">tx</a> <a id="1742" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1744" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="1770" class="Symbol">→</a> <a id="1772" href="Ledger.Conway.Conformance.Equivalence.html#1688" class="Bound">Γ</a> <a id="1774" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">L.⊢</a> <a id="1778" href="Ledger.Conway.Conformance.Equivalence.html#1690" class="Bound">utxoSt</a> <a id="1785" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">⇀⦇</a> <a id="1788" href="Ledger.Conway.Conformance.Equivalence.html#1705" class="Bound">tx</a> <a id="1791" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">,UTXOW⦈</a> <a id="1799" href="Ledger.Conway.Conformance.Equivalence.html#1697" class="Bound">utxoSt&#39;</a>
                    <a id="1827" class="Symbol">→</a> <a id="1829" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="1850" href="Ledger.Conway.Conformance.Equivalence.html#1690" class="Bound">utxoSt</a> <a id="1857" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1859" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="1880" href="Ledger.Conway.Conformance.Equivalence.html#1697" class="Bound">utxoSt&#39;</a>
<a id="1888" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="1908" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1913" class="Symbol">(</a><a id="1914" href="Ledger.Conway.Specification.Utxow.html#4894" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
                          <a id="1953" class="Symbol">(</a><a id="1954" href="Ledger.Conway.Specification.Utxo.html#13922" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="1972" class="Symbol">_</a> <a id="1974" class="Symbol">_</a> <a id="1976" class="Symbol">_</a> <a id="1978" class="Symbol">_</a> <a id="1980" class="Symbol">_</a> <a id="1982" class="Symbol">_</a> <a id="1984" class="Symbol">_</a> <a id="1986" class="Symbol">_</a> <a id="1988" class="Symbol">_</a> <a id="1990" class="Symbol">_</a> <a id="1992" class="Symbol">_</a> <a id="1994" class="Symbol">_</a> <a id="1996" class="Symbol">_</a> <a id="1998" class="Symbol">_</a> <a id="2000" class="Symbol">_</a> <a id="2002" class="Symbol">_</a> <a id="2004" class="Symbol">_</a> <a id="2006" class="Symbol">_</a> <a id="2008" class="Symbol">_</a> <a id="2010" class="Symbol">_</a>
                            <a id="2040" class="Symbol">(</a><a id="2041" href="Ledger.Conway.Specification.Utxo.html#11950" class="InductiveConstructor">L.Scripts-No</a> <a id="2054" class="Symbol">_)))</a> <a id="2059" class="Symbol">=</a> <a id="2061" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemInvalidDepositsC"></a><a id="2067" href="Ledger.Conway.Conformance.Equivalence.html#2067" class="Function">lemInvalidDepositsC</a> <a id="2087" class="Symbol">:</a> <a id="2089" class="Symbol">∀</a> <a id="2091" class="Symbol">{</a><a id="2092" href="Ledger.Conway.Conformance.Equivalence.html#2092" class="Bound">Γ</a> <a id="2094" href="Ledger.Conway.Conformance.Equivalence.html#2094" class="Bound">utxoSt</a> <a id="2101" href="Ledger.Conway.Conformance.Equivalence.html#2101" class="Bound">utxoSt&#39;</a> <a id="2109" href="Ledger.Conway.Conformance.Equivalence.html#2109" class="Bound">tx</a><a id="2111" class="Symbol">}</a>
                    <a id="2133" class="Symbol">→</a> <a id="2135" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="2143" href="Ledger.Conway.Conformance.Equivalence.html#2109" class="Bound">tx</a> <a id="2146" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2148" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="2174" class="Symbol">→</a> <a id="2176" class="Symbol">(</a><a id="2177" href="Ledger.Conway.Conformance.Equivalence.html#2177" class="Bound">h</a> <a id="2179" class="Symbol">:</a> <a id="2181" href="Ledger.Conway.Conformance.Equivalence.html#2092" class="Bound">Γ</a> <a id="2183" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="2187" href="Ledger.Conway.Conformance.Equivalence.html#2094" class="Bound">utxoSt</a> <a id="2194" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="2197" href="Ledger.Conway.Conformance.Equivalence.html#2109" class="Bound">tx</a> <a id="2200" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="2208" href="Ledger.Conway.Conformance.Equivalence.html#2101" class="Bound">utxoSt&#39;</a><a id="2215" class="Symbol">)</a>
                    <a id="2237" class="Symbol">→</a> <a id="2239" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="2253" href="Ledger.Conway.Conformance.Equivalence.html#2177" class="Bound">h</a> <a id="2255" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2257" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="2278" href="Ledger.Conway.Conformance.Equivalence.html#2101" class="Bound">utxoSt&#39;</a>
<a id="2286" href="Ledger.Conway.Conformance.Equivalence.html#2067" class="Function">lemInvalidDepositsC</a> <a id="2306" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2311" class="Symbol">(</a><a id="2312" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
                          <a id="2351" class="Symbol">(</a><a id="2352" href="Ledger.Conway.Conformance.Utxo.html#3930" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2370" class="Symbol">_</a> <a id="2372" class="Symbol">_</a> <a id="2374" class="Symbol">_</a> <a id="2376" class="Symbol">_</a> <a id="2378" class="Symbol">_</a> <a id="2380" class="Symbol">_</a> <a id="2382" class="Symbol">_</a> <a id="2384" class="Symbol">_</a> <a id="2386" class="Symbol">_</a> <a id="2388" class="Symbol">_</a> <a id="2390" class="Symbol">_</a> <a id="2392" class="Symbol">_</a> <a id="2394" class="Symbol">_</a> <a id="2396" class="Symbol">_</a> <a id="2398" class="Symbol">_</a> <a id="2400" class="Symbol">_</a> <a id="2402" class="Symbol">_</a> <a id="2404" class="Symbol">_</a> <a id="2406" class="Symbol">_</a> <a id="2408" class="Symbol">_</a>
                            <a id="2438" class="Symbol">(</a><a id="2439" href="Ledger.Conway.Conformance.Utxo.html#1826" class="InductiveConstructor">C.Scripts-No</a> <a id="2452" class="Symbol">_)))</a> <a id="2457" class="Symbol">=</a> <a id="2459" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="2465" class="Comment">-- The UTXOW rule doesn&#39;t change the deposits in Conformance</a>
<a id="lemDepositsC"></a><a id="2526" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="2539" class="Symbol">:</a> <a id="2541" class="Symbol">∀</a> <a id="2543" class="Symbol">{</a><a id="2544" href="Ledger.Conway.Conformance.Equivalence.html#2544" class="Bound">Γ</a> <a id="2546" href="Ledger.Conway.Conformance.Equivalence.html#2546" class="Bound">utxoSt</a> <a id="2553" href="Ledger.Conway.Conformance.Equivalence.html#2553" class="Bound">utxoSt&#39;</a> <a id="2561" href="Ledger.Conway.Conformance.Equivalence.html#2561" class="Bound">tx</a><a id="2563" class="Symbol">}</a>
             <a id="2578" class="Symbol">→</a> <a id="2580" class="Symbol">(</a><a id="2581" href="Ledger.Conway.Conformance.Equivalence.html#2581" class="Bound">h</a> <a id="2583" class="Symbol">:</a> <a id="2585" href="Ledger.Conway.Conformance.Equivalence.html#2544" class="Bound">Γ</a> <a id="2587" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="2591" href="Ledger.Conway.Conformance.Equivalence.html#2546" class="Bound">utxoSt</a> <a id="2598" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="2601" href="Ledger.Conway.Conformance.Equivalence.html#2561" class="Bound">tx</a> <a id="2604" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="2612" href="Ledger.Conway.Conformance.Equivalence.html#2553" class="Bound">utxoSt&#39;</a><a id="2619" class="Symbol">)</a>
             <a id="2634" class="Symbol">→</a> <a id="2636" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="2657" href="Ledger.Conway.Conformance.Equivalence.html#2546" class="Bound">utxoSt</a> <a id="2664" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2666" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="2687" href="Ledger.Conway.Conformance.Equivalence.html#2553" class="Bound">utxoSt&#39;</a>
<a id="2695" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="2708" class="Symbol">(</a><a id="2709" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
               <a id="2737" class="Symbol">(</a><a id="2738" href="Ledger.Conway.Conformance.Utxo.html#3930" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2756" class="Symbol">_</a> <a id="2758" class="Symbol">_</a> <a id="2760" class="Symbol">_</a> <a id="2762" class="Symbol">_</a> <a id="2764" class="Symbol">_</a> <a id="2766" class="Symbol">_</a> <a id="2768" class="Symbol">_</a> <a id="2770" class="Symbol">_</a> <a id="2772" class="Symbol">_</a> <a id="2774" class="Symbol">_</a> <a id="2776" class="Symbol">_</a> <a id="2778" class="Symbol">_</a> <a id="2780" class="Symbol">_</a> <a id="2782" class="Symbol">_</a> <a id="2784" class="Symbol">_</a> <a id="2786" class="Symbol">_</a> <a id="2788" class="Symbol">_</a> <a id="2790" class="Symbol">_</a> <a id="2792" class="Symbol">_</a> <a id="2794" class="Symbol">_</a>
                 <a id="2813" class="Symbol">(</a><a id="2814" href="Ledger.Conway.Conformance.Utxo.html#1231" class="InductiveConstructor">C.Scripts-Yes</a> <a id="2828" class="Symbol">_)))</a> <a id="2833" class="Symbol">=</a> <a id="2835" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="2840" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="2853" class="Symbol">(</a><a id="2854" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
               <a id="2882" class="Symbol">(</a><a id="2883" href="Ledger.Conway.Conformance.Utxo.html#3930" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2901" class="Symbol">_</a> <a id="2903" class="Symbol">_</a> <a id="2905" class="Symbol">_</a> <a id="2907" class="Symbol">_</a> <a id="2909" class="Symbol">_</a> <a id="2911" class="Symbol">_</a> <a id="2913" class="Symbol">_</a> <a id="2915" class="Symbol">_</a> <a id="2917" class="Symbol">_</a> <a id="2919" class="Symbol">_</a> <a id="2921" class="Symbol">_</a> <a id="2923" class="Symbol">_</a> <a id="2925" class="Symbol">_</a> <a id="2927" class="Symbol">_</a> <a id="2929" class="Symbol">_</a> <a id="2931" class="Symbol">_</a> <a id="2933" class="Symbol">_</a> <a id="2935" class="Symbol">_</a> <a id="2937" class="Symbol">_</a> <a id="2939" class="Symbol">_</a>
                 <a id="2958" class="Symbol">(</a><a id="2959" href="Ledger.Conway.Conformance.Utxo.html#1826" class="InductiveConstructor">C.Scripts-No</a> <a id="2972" class="Symbol">_)))</a> <a id="2977" class="Symbol">=</a> <a id="2979" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemUpdateDeposits"></a><a id="2985" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="3003" class="Symbol">:</a> <a id="3005" class="Symbol">∀</a> <a id="3007" class="Symbol">{</a><a id="3008" href="Ledger.Conway.Conformance.Equivalence.html#3008" class="Bound">Γ</a> <a id="3010" href="Ledger.Conway.Conformance.Equivalence.html#3010" class="Bound">s</a> <a id="3012" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a> <a id="3015" href="Ledger.Conway.Conformance.Equivalence.html#3015" class="Bound">s&#39;</a><a id="3017" class="Symbol">}</a> <a id="3019" class="Symbol">(</a><a id="3020" class="Keyword">open</a> <a id="3025" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">L.UTxOEnv</a> <a id="3035" href="Ledger.Conway.Conformance.Equivalence.html#3008" class="Bound">Γ</a><a id="3036" class="Symbol">)</a>
                  <a id="3056" class="Symbol">→</a> <a id="3058" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="3066" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a> <a id="3069" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3071" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="3094" class="Symbol">→</a> <a id="3096" href="Ledger.Conway.Conformance.Equivalence.html#3008" class="Bound">Γ</a> <a id="3098" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">L.⊢</a> <a id="3102" href="Ledger.Conway.Conformance.Equivalence.html#3010" class="Bound">s</a> <a id="3104" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">⇀⦇</a> <a id="3107" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a> <a id="3110" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">,UTXOW⦈</a> <a id="3118" href="Ledger.Conway.Conformance.Equivalence.html#3015" class="Bound">s&#39;</a>
                  <a id="3139" class="Symbol">→</a> <a id="3141" href="Ledger.Conway.Specification.Utxo.html#8062" class="Function">L.updateDeposits</a> <a id="3158" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="3166" class="Symbol">(</a><a id="3167" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">body</a> <a id="3172" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a><a id="3174" class="Symbol">)</a> <a id="3176" class="Symbol">(</a><a id="3177" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="3198" href="Ledger.Conway.Conformance.Equivalence.html#3010" class="Bound">s</a><a id="3199" class="Symbol">)</a> <a id="3201" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3203" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="3224" href="Ledger.Conway.Conformance.Equivalence.html#3015" class="Bound">s&#39;</a>
<a id="3227" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="3245" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3252" class="Symbol">(</a><a id="3253" href="Ledger.Conway.Specification.Utxow.html#4894" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
    <a id="3270" class="Symbol">(</a><a id="3271" href="Ledger.Conway.Specification.Utxo.html#13922" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3289" class="Symbol">_</a> <a id="3291" class="Symbol">_</a> <a id="3293" class="Symbol">_</a> <a id="3295" class="Symbol">_</a> <a id="3297" class="Symbol">_</a> <a id="3299" class="Symbol">_</a> <a id="3301" class="Symbol">_</a> <a id="3303" class="Symbol">_</a> <a id="3305" class="Symbol">_</a> <a id="3307" class="Symbol">_</a> <a id="3309" class="Symbol">_</a> <a id="3311" class="Symbol">_</a> <a id="3313" class="Symbol">_</a> <a id="3315" class="Symbol">_</a> <a id="3317" class="Symbol">_</a> <a id="3319" class="Symbol">_</a> <a id="3321" class="Symbol">_</a>  <a id="3324" class="Symbol">_</a> <a id="3326" class="Symbol">_</a> <a id="3328" class="Symbol">_</a>
      <a id="3336" class="Symbol">(</a><a id="3337" href="Ledger.Conway.Specification.Utxo.html#11432" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3351" class="Symbol">_)))</a> <a id="3356" class="Symbol">=</a> <a id="3358" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="getValidCertDeposits"></a><a id="3364" href="Ledger.Conway.Conformance.Equivalence.html#3364" class="Function">getValidCertDeposits</a> <a id="3385" class="Symbol">:</a> <a id="3387" class="Symbol">∀</a> <a id="3389" class="Symbol">{</a><a id="3390" href="Ledger.Conway.Conformance.Equivalence.html#3390" class="Bound">Γ</a> <a id="3392" href="Ledger.Conway.Conformance.Equivalence.html#3392" class="Bound">s</a> <a id="3394" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3397" href="Ledger.Conway.Conformance.Equivalence.html#3397" class="Bound">s&#39;</a><a id="3399" class="Symbol">}</a>
                     <a id="3422" class="Symbol">→</a> <a id="3424" class="Symbol">(</a><a id="3425" class="Keyword">let</a> <a id="3429" class="Keyword">open</a> <a id="3434" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">L.UTxOEnv</a> <a id="3444" href="Ledger.Conway.Conformance.Equivalence.html#3390" class="Bound">Γ</a> <a id="3446" class="Keyword">using</a> <a id="3452" class="Symbol">(</a><a id="3453" href="Ledger.Conway.Specification.Utxo.html#1175" class="Field">pparams</a><a id="3460" class="Symbol">)</a>
                            <a id="3490" class="Keyword">open</a> <a id="3495" href="Ledger.Conway.Specification.Utxo.html#1473" class="Module">L.UTxOState</a> <a id="3507" href="Ledger.Conway.Conformance.Equivalence.html#3392" class="Bound">s</a> <a id="3509" class="Keyword">using</a> <a id="3515" class="Symbol">(</a><a id="3516" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">deposits</a><a id="3524" class="Symbol">)</a>
                            <a id="3554" class="Keyword">open</a> <a id="3559" href="Ledger.Conway.Specification.Transaction.html#2987" class="Module">TxBody</a> <a id="3566" class="Symbol">(</a><a id="3567" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3570" class="Symbol">.</a><a id="3571" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">Tx.body</a><a id="3578" class="Symbol">)</a> <a id="3580" class="Keyword">using</a> <a id="3586" class="Symbol">(</a><a id="3587" href="Ledger.Conway.Specification.Transaction.html#3221" class="Field">txcerts</a><a id="3594" class="Symbol">))</a>
                     <a id="3618" class="Symbol">→</a> <a id="3620" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="3628" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3631" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3633" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="3659" class="Symbol">→</a> <a id="3661" href="Ledger.Conway.Conformance.Equivalence.html#3390" class="Bound">Γ</a> <a id="3663" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">L.⊢</a> <a id="3667" href="Ledger.Conway.Conformance.Equivalence.html#3392" class="Bound">s</a> <a id="3669" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">⇀⦇</a> <a id="3672" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3675" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">,UTXOW⦈</a> <a id="3683" href="Ledger.Conway.Conformance.Equivalence.html#3397" class="Bound">s&#39;</a>
                     <a id="3707" class="Symbol">→</a> <a id="3709" href="Ledger.Conway.Specification.Utxo.html#3412" class="Datatype">L.ValidCertDeposits</a> <a id="3729" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="3737" href="Ledger.Conway.Specification.Utxo.html#1581" class="Function">deposits</a> <a id="3746" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a>
<a id="3754" href="Ledger.Conway.Conformance.Equivalence.html#3364" class="Function">getValidCertDeposits</a> <a id="3775" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3782" class="Symbol">(</a><a id="3783" href="Ledger.Conway.Specification.Utxow.html#4894" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
    <a id="3800" class="Symbol">(</a><a id="3801" href="Ledger.Conway.Specification.Utxo.html#13922" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3819" class="Symbol">_</a> <a id="3821" class="Symbol">_</a> <a id="3823" class="Symbol">_</a> <a id="3825" class="Symbol">_</a> <a id="3827" class="Symbol">_</a> <a id="3829" class="Symbol">_</a> <a id="3831" class="Symbol">_</a> <a id="3833" class="Symbol">_</a> <a id="3835" class="Symbol">_</a> <a id="3837" class="Symbol">_</a> <a id="3839" class="Symbol">_</a> <a id="3841" class="Symbol">_</a> <a id="3843" class="Symbol">_</a> <a id="3845" class="Symbol">_</a> <a id="3847" class="Symbol">_</a> <a id="3849" class="Symbol">_</a> <a id="3851" class="Symbol">_</a> <a id="3853" class="Symbol">_</a> <a id="3855" class="Symbol">_</a> <a id="3857" class="Symbol">_</a>
      <a id="3865" class="Symbol">(</a><a id="3866" href="Ledger.Conway.Specification.Utxo.html#11432" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3880" class="Symbol">(</a><a id="3881" href="Ledger.Conway.Conformance.Equivalence.html#3881" class="Bound">v</a> <a id="3883" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3885" class="Symbol">_))))</a> <a id="3891" class="Symbol">=</a> <a id="3893" href="Ledger.Conway.Conformance.Equivalence.html#3881" class="Bound">v</a>

<a id="makeCertDeps*"></a><a id="3896" href="Ledger.Conway.Conformance.Equivalence.html#3896" class="Function">makeCertDeps*</a> <a id="3910" class="Symbol">:</a> <a id="3912" class="Symbol">∀</a> <a id="3914" class="Symbol">{</a><a id="3915" href="Ledger.Conway.Conformance.Equivalence.html#3915" class="Bound">Γ</a> <a id="3917" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Bound">s</a> <a id="3919" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="3922" href="Ledger.Conway.Conformance.Equivalence.html#3922" class="Bound">s&#39;</a><a id="3924" class="Symbol">}</a>
              <a id="3940" class="Symbol">→</a> <a id="3942" class="Symbol">(</a><a id="3943" class="Keyword">let</a> <a id="3947" class="Keyword">open</a> <a id="3952" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">L.UTxOEnv</a> <a id="3962" href="Ledger.Conway.Conformance.Equivalence.html#3915" class="Bound">Γ</a> <a id="3964" class="Keyword">using</a> <a id="3970" class="Symbol">(</a><a id="3971" href="Ledger.Conway.Specification.Utxo.html#1175" class="Field">pparams</a><a id="3978" class="Symbol">)</a>
                     <a id="4001" class="Keyword">open</a> <a id="4006" href="Ledger.Conway.Specification.Utxo.html#1473" class="Module">L.UTxOState</a> <a id="4018" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Bound">s</a> <a id="4020" class="Keyword">using</a> <a id="4026" class="Symbol">(</a><a id="4027" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">deposits</a><a id="4035" class="Symbol">)</a>
                     <a id="4058" class="Keyword">open</a> <a id="4063" href="Ledger.Conway.Specification.Transaction.html#2987" class="Module">TxBody</a> <a id="4070" class="Symbol">(</a><a id="4071" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="4074" class="Symbol">.</a><a id="4075" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">Tx.body</a><a id="4082" class="Symbol">)</a> <a id="4084" class="Keyword">using</a> <a id="4090" class="Symbol">(</a><a id="4091" href="Ledger.Conway.Specification.Transaction.html#3221" class="Field">txcerts</a><a id="4098" class="Symbol">))</a>
              <a id="4115" class="Symbol">→</a> <a id="4117" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="4125" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="4128" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4130" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
              <a id="4149" class="Symbol">→</a> <a id="4151" href="Ledger.Conway.Conformance.Equivalence.html#3915" class="Bound">Γ</a> <a id="4153" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">L.⊢</a> <a id="4157" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Bound">s</a> <a id="4159" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">⇀⦇</a> <a id="4162" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="4165" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">,UTXOW⦈</a> <a id="4173" href="Ledger.Conway.Conformance.Equivalence.html#3922" class="Bound">s&#39;</a>
              <a id="4190" class="Symbol">→</a> <a id="4192" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3978" class="Record">CertDeps*</a> <a id="4202" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="4210" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a>
<a id="4218" href="Ledger.Conway.Conformance.Equivalence.html#3896" class="Function">makeCertDeps*</a> <a id="4232" class="Symbol">{</a><a id="4233" class="Argument">s</a> <a id="4235" class="Symbol">=</a> <a id="4237" href="Ledger.Conway.Conformance.Equivalence.html#4237" class="Bound">s</a><a id="4238" class="Symbol">}</a> <a id="4240" href="Ledger.Conway.Conformance.Equivalence.html#4240" class="Bound">valid</a> <a id="4246" href="Ledger.Conway.Conformance.Equivalence.html#4246" class="Bound">r</a> <a id="4248" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#3996}{\htmlId{4252}{\htmlClass{Function}{\text{certDDeps}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#1581}{\htmlId{4262}{\htmlClass{Function}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#4142}{\htmlId{4273}{\htmlClass{Function}{\text{certGDeps}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#1581}{\htmlId{4283}{\htmlClass{Function}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#7681}{\htmlId{4294}{\htmlClass{Function}{\text{validDDeps}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#4393}{\htmlId{4305}{\htmlClass{Function}{\text{validDeps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#8770}{\htmlId{4317}{\htmlClass{Function}{\text{validGDeps}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#4393}{\htmlId{4328}{\htmlClass{Function}{\text{validDeps}}}}\, \end{pmatrix}$</a>
  <a id="4343" class="Keyword">where</a>
    <a id="4353" class="Keyword">open</a> <a id="4358" href="Ledger.Conway.Specification.Utxo.html#1473" class="Module">L.UTxOState</a> <a id="4370" href="Ledger.Conway.Conformance.Equivalence.html#4237" class="Bound">s</a> <a id="4372" class="Keyword">using</a> <a id="4378" class="Symbol">(</a><a id="4379" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">deposits</a><a id="4387" class="Symbol">)</a>
    <a id="4393" href="Ledger.Conway.Conformance.Equivalence.html#4393" class="Function">validDeps</a> <a id="4403" class="Symbol">=</a> <a id="4405" href="Ledger.Conway.Conformance.Equivalence.html#3364" class="Function">getValidCertDeposits</a> <a id="4426" href="Ledger.Conway.Conformance.Equivalence.html#4240" class="Bound">valid</a> <a id="4432" href="Ledger.Conway.Conformance.Equivalence.html#4246" class="Bound">r</a>

<a id="lem-cert-deposits-valid"></a><a id="4435" href="Ledger.Conway.Conformance.Equivalence.html#4435" class="Function">lem-cert-deposits-valid</a> <a id="4459" class="Symbol">:</a> <a id="4461" class="Symbol">∀</a> <a id="4463" class="Symbol">{</a><a id="4464" href="Ledger.Conway.Conformance.Equivalence.html#4464" class="Bound">Γ</a> <a id="4466" href="Ledger.Conway.Conformance.Equivalence.html#4466" class="Bound">s</a> <a id="4468" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4471" href="Ledger.Conway.Conformance.Equivalence.html#4471" class="Bound">s&#39;</a><a id="4473" class="Symbol">}</a> <a id="4475" class="Symbol">(</a><a id="4476" class="Keyword">open</a> <a id="4481" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="4488" href="Ledger.Conway.Conformance.Equivalence.html#4464" class="Bound">Γ</a> <a id="4490" class="Keyword">using</a> <a id="4496" class="Symbol">(</a><a id="4497" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="4504" class="Symbol">))</a>
                        <a id="4531" class="Symbol">→</a> <a id="4533" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="4541" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4544" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4546" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                        <a id="4575" class="Symbol">→</a> <a id="4577" href="Ledger.Conway.Conformance.Equivalence.html#4464" class="Bound">Γ</a> <a id="4579" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">L.⊢</a> <a id="4583" href="Ledger.Conway.Conformance.Equivalence.html#4466" class="Bound">s</a> <a id="4585" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">⇀⦇</a> <a id="4588" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4591" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">,LEDGER⦈</a> <a id="4600" href="Ledger.Conway.Conformance.Equivalence.html#4471" class="Bound">s&#39;</a>
                        <a id="4627" class="Symbol">→</a> <a id="4629" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2974" class="Function">updateLedgerDeps</a> <a id="4646" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="4654" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4657" class="Symbol">(</a><a id="4658" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="4671" href="Ledger.Conway.Conformance.Equivalence.html#4466" class="Bound">s</a><a id="4672" class="Symbol">)</a> <a id="4674" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="4677" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="4690" href="Ledger.Conway.Conformance.Equivalence.html#4471" class="Bound">s&#39;</a>
<a id="4693" href="Ledger.Conway.Conformance.Equivalence.html#4435" class="Function">lem-cert-deposits-valid</a> <a id="4717" class="Symbol">{</a><a id="4718" href="Ledger.Conway.Conformance.Equivalence.html#4718" class="Bound">Γ</a><a id="4719" class="Symbol">}</a> <a id="4721" class="Symbol">{</a><a id="4722" href="Ledger.Conway.Conformance.Equivalence.html#4722" class="Bound">s</a><a id="4723" class="Symbol">}</a> <a id="4725" class="Symbol">{</a><a id="4726" href="Ledger.Conway.Conformance.Equivalence.html#4726" class="Bound">tx</a><a id="4728" class="Symbol">}</a> <a id="4730" class="Symbol">{</a><a id="4731" href="Ledger.Conway.Conformance.Equivalence.html#4731" class="Bound">s&#39;</a><a id="4733" class="Symbol">}</a> <a id="4735" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4740" class="Symbol">(</a><a id="4741" href="Ledger.Conway.Specification.Ledger.html#3752" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="4753" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4758" href="Ledger.Conway.Conformance.Equivalence.html#4758" class="Bound">utxow</a> <a id="4764" href="Ledger.Conway.Conformance.Equivalence.html#4764" class="Bound">certs</a> <a id="4770" href="Ledger.Conway.Conformance.Equivalence.html#4770" class="Bound">gov</a><a id="4773" class="Symbol">)</a> <a id="4775" class="Keyword">rewrite</a> <a id="4783" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="4787" class="Symbol">(</a><a id="4788" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="4806" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4811" href="Ledger.Conway.Conformance.Equivalence.html#4758" class="Bound">utxow</a><a id="4816" class="Symbol">)</a> <a id="4818" class="Symbol">=</a>
  <a id="4822" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18993" class="Function">lem-upd-ddeps</a> <a id="4836" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="4844" href="Ledger.Conway.Conformance.Equivalence.html#4932" class="Function">deps</a> <a id="4849" href="Ledger.Conway.Conformance.Equivalence.html#4726" class="Bound">tx</a> <a id="4852" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
  <a id="4856" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19766" class="Function">lem-upd-gdeps</a> <a id="4870" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="4878" href="Ledger.Conway.Conformance.Equivalence.html#4932" class="Function">deps</a> <a id="4883" href="Ledger.Conway.Conformance.Equivalence.html#4726" class="Bound">tx</a>
  <a id="4888" class="Keyword">where</a>
    <a id="4898" class="Keyword">open</a> <a id="4903" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="4910" href="Ledger.Conway.Conformance.Equivalence.html#4718" class="Bound">Γ</a> <a id="4912" class="Keyword">using</a> <a id="4918" class="Symbol">(</a><a id="4919" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="4926" class="Symbol">)</a>
    <a id="4932" href="Ledger.Conway.Conformance.Equivalence.html#4932" class="Function">deps</a> <a id="4937" class="Symbol">=</a> <a id="4939" href="Ledger.Conway.Conformance.Equivalence.html#4722" class="Bound">s</a> <a id="4941" class="Symbol">.</a><a id="4942" href="Ledger.Conway.Specification.Ledger.html#1036" class="Field">L.LState.utxoSt</a> <a id="4958" class="Symbol">.</a> <a id="4960" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a>

<a id="lem-cert-deposits-invalid"></a><a id="4982" href="Ledger.Conway.Conformance.Equivalence.html#4982" class="Function">lem-cert-deposits-invalid</a> <a id="5008" class="Symbol">:</a> <a id="5010" class="Symbol">∀</a> <a id="5012" class="Symbol">{</a><a id="5013" href="Ledger.Conway.Conformance.Equivalence.html#5013" class="Bound">Γ</a> <a id="5015" href="Ledger.Conway.Conformance.Equivalence.html#5015" class="Bound">s</a> <a id="5017" href="Ledger.Conway.Conformance.Equivalence.html#5017" class="Bound">tx</a> <a id="5020" href="Ledger.Conway.Conformance.Equivalence.html#5020" class="Bound">s&#39;</a><a id="5022" class="Symbol">}</a> <a id="5024" class="Symbol">(</a><a id="5025" class="Keyword">open</a> <a id="5030" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="5037" href="Ledger.Conway.Conformance.Equivalence.html#5013" class="Bound">Γ</a> <a id="5039" class="Keyword">using</a> <a id="5045" class="Symbol">(</a><a id="5046" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="5053" class="Symbol">))</a>
                        <a id="5080" class="Symbol">→</a> <a id="5082" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="5090" href="Ledger.Conway.Conformance.Equivalence.html#5017" class="Bound">tx</a> <a id="5093" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5095" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                        <a id="5125" class="Symbol">→</a> <a id="5127" href="Ledger.Conway.Conformance.Equivalence.html#5013" class="Bound">Γ</a> <a id="5129" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">L.⊢</a> <a id="5133" href="Ledger.Conway.Conformance.Equivalence.html#5015" class="Bound">s</a> <a id="5135" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">⇀⦇</a> <a id="5138" href="Ledger.Conway.Conformance.Equivalence.html#5017" class="Bound">tx</a> <a id="5141" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">,LEDGER⦈</a> <a id="5150" href="Ledger.Conway.Conformance.Equivalence.html#5020" class="Bound">s&#39;</a>
                        <a id="5177" class="Symbol">→</a> <a id="5179" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="5192" href="Ledger.Conway.Conformance.Equivalence.html#5015" class="Bound">s</a> <a id="5194" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="5197" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="5210" href="Ledger.Conway.Conformance.Equivalence.html#5020" class="Bound">s&#39;</a>
<a id="5213" href="Ledger.Conway.Conformance.Equivalence.html#4982" class="Function">lem-cert-deposits-invalid</a> <a id="5239" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5244" class="Symbol">(</a><a id="5245" href="Ledger.Conway.Specification.Ledger.html#3805" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="5257" class="Symbol">_</a> <a id="5259" href="Ledger.Conway.Conformance.Equivalence.html#5259" class="Bound">utxow</a><a id="5264" class="Symbol">)</a> <a id="5266" class="Keyword">rewrite</a> <a id="5274" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="5294" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5299" href="Ledger.Conway.Conformance.Equivalence.html#5259" class="Bound">utxow</a> <a id="5305" class="Symbol">=</a>
  <a id="5309" class="Symbol">(</a><a id="5310" href="Function.Base.html#704" class="Function">id</a> <a id="5313" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5315" href="Function.Base.html#704" class="Function">id</a><a id="5317" class="Symbol">)</a> <a id="5319" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5321" class="Symbol">(</a><a id="5322" href="Function.Base.html#704" class="Function">id</a> <a id="5325" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5327" href="Function.Base.html#704" class="Function">id</a><a id="5329" class="Symbol">)</a>

<a id="5332" class="Keyword">instance</a>
  <a id="LStateToConf"></a><a id="5343" href="Ledger.Conway.Conformance.Equivalence.html#5343" class="Function">LStateToConf</a> <a id="5356" class="Symbol">:</a> <a id="5358" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="5369" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5371" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="5382" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="5384" href="Ledger.Conway.Specification.Ledger.html#977" class="Record">L.LState</a> <a id="5393" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="5395" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a>
  <a id="5406" href="Ledger.Conway.Conformance.Equivalence.html#5343" class="Function">LStateToConf</a> <a id="5419" class="Symbol">.</a><a id="5420" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="5426" href="Ledger.Conway.Conformance.Equivalence.html#5426" class="Bound">deposits</a> <a id="5435" href="Ledger.Conway.Conformance.Equivalence.html#5435" class="Bound">ledgerSt</a> <a id="5444" class="Symbol">=</a>
    <a id="5450" class="Keyword">let</a> <a id="5454" class="Keyword">open</a> <a id="5459" href="Ledger.Conway.Specification.Ledger.html#977" class="Module">L.LState</a> <a id="5468" href="Ledger.Conway.Conformance.Equivalence.html#5435" class="Bound">ledgerSt</a> <a id="5477" class="Keyword">in</a>
    <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Ledger.html#1036}{\htmlId{5486}{\htmlClass{Field}{\text{utxoSt}}}}\, \\ \,\href{Ledger.Conway.Specification.Ledger.html#1063}{\htmlId{5495}{\htmlClass{Field}{\text{govSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#5426}{\htmlId{5503}{\htmlClass{Bound}{\text{deposits}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#270}{\htmlId{5512}{\htmlClass{Function Operator}{\text{⊢conv}}}}\, \,\href{Ledger.Conway.Specification.Ledger.html#1089}{\htmlId{5518}{\htmlClass{Field}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="5531" class="Keyword">instance</a>
  <a id="5542" class="Comment">-- LEDGERToConf : ∀ {Γ s tx s&#39;}</a>
  <a id="5576" class="Comment">--              → (∃[ certDeposits-s ] certDeposits-s ≡ᵈ certDeposits s)</a>
  <a id="5651" class="Comment">--              ⊢ Γ L.⊢ s ⇀⦇ tx ,LEDGER⦈ s&#39; ⭆ⁱ λ (certDeposits-s , _) _ →</a>
  <a id="5727" class="Comment">--                ∃[ certDeposits-s&#39; ]</a>
  <a id="5768" class="Comment">--                   certDeposits-s&#39; ≡ᵈ certDeposits s&#39;</a>
  <a id="5826" class="Comment">--                 × Γ C.⊢ (certDeposits s ⊢conv s) ⇀⦇ tx ,LEDGER⦈ (certDeposits-s&#39; ⊢conv s&#39;)</a>
  <a id="LEDGERToConf"></a><a id="5922" href="Ledger.Conway.Conformance.Equivalence.html#5922" class="Function">LEDGERToConf</a> <a id="5935" class="Symbol">:</a> <a id="5937" class="Symbol">∀</a> <a id="5939" class="Symbol">{</a><a id="5940" href="Ledger.Conway.Conformance.Equivalence.html#5940" class="Bound">Γ</a> <a id="5942" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a> <a id="5944" href="Ledger.Conway.Conformance.Equivalence.html#5944" class="Bound">tx</a> <a id="5947" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a><a id="5949" class="Symbol">}</a>
               <a id="5966" class="Symbol">→</a> <a id="5968" href="Ledger.Conway.Conformance.Equivalence.html#5940" class="Bound">Γ</a> <a id="5970" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">L.⊢</a> <a id="5974" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a> <a id="5976" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">⇀⦇</a> <a id="5979" href="Ledger.Conway.Conformance.Equivalence.html#5944" class="Bound">tx</a> <a id="5982" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">,LEDGER⦈</a> <a id="5991" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a> <a id="5994" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a>
                 <a id="6013" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="6016" href="Ledger.Conway.Conformance.Equivalence.html#6016" class="Bound">certDeposits-s&#39;</a> <a id="6032" href="Data.Product.Base.html#1371" class="Function">]</a>
                    <a id="6054" href="Ledger.Conway.Conformance.Equivalence.html#6016" class="Bound">certDeposits-s&#39;</a> <a id="6070" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="6073" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="6086" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a>
                  <a id="6107" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6109" href="Ledger.Conway.Conformance.Equivalence.html#5940" class="Bound">Γ</a> <a id="6111" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="6115" class="Symbol">(</a><a id="6116" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="6129" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a> <a id="6131" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6137" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a><a id="6138" class="Symbol">)</a> <a id="6140" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="6143" href="Ledger.Conway.Conformance.Equivalence.html#5944" class="Bound">tx</a> <a id="6146" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="6155" class="Symbol">(</a><a id="6156" href="Ledger.Conway.Conformance.Equivalence.html#6016" class="Bound">certDeposits-s&#39;</a> <a id="6172" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6178" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a><a id="6180" class="Symbol">)</a>
  <a id="6184" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , eq-cdeps) r@(L.LEDGER-V⋯ refl utxow certs gov) =</a>
  <a id="6285" href="Ledger.Conway.Conformance.Equivalence.html#5922" class="Function">LEDGERToConf</a> <a id="6298" class="Symbol">{</a><a id="6299" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a><a id="6300" class="Symbol">}</a> <a id="6302" class="Symbol">{</a><a id="6303" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a><a id="6304" class="Symbol">}</a> <a id="6306" class="Symbol">{</a><a id="6307" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a><a id="6309" class="Symbol">}</a> <a id="6311" class="Symbol">{</a><a id="6312" href="Ledger.Conway.Conformance.Equivalence.html#6312" class="Bound">s&#39;</a><a id="6314" class="Symbol">}</a> <a id="6316" class="Symbol">.</a><a id="6317" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="6323" class="Symbol">_</a> <a id="6325" href="Ledger.Conway.Conformance.Equivalence.html#6325" class="Bound">r</a><a id="6326" class="Symbol">@(</a><a id="6328" href="Ledger.Conway.Specification.Ledger.html#3752" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="6340" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6345" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a> <a id="6351" href="Ledger.Conway.Conformance.Equivalence.html#6351" class="Bound">certs</a> <a id="6357" href="Ledger.Conway.Conformance.Equivalence.html#6357" class="Bound">gov</a><a id="6360" class="Symbol">)</a> <a id="6362" class="Symbol">=</a>
    <a id="6368" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2974" class="Function">updateLedgerDeps</a> <a id="6385" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="6393" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="6396" class="Symbol">(</a><a id="6397" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="6410" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a><a id="6411" class="Symbol">)</a>
    <a id="6417" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6419" href="Ledger.Conway.Conformance.Equivalence.html#4435" class="Function">lem-cert-deposits-valid</a> <a id="6443" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6448" href="Ledger.Conway.Conformance.Equivalence.html#6325" class="Bound">r</a>
    <a id="6454" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6456" href="Relation.Binary.PropositionalEquality.Core.html#2044" class="Function">subst₂</a> <a id="6463" class="Symbol">(λ</a> <a id="6466" href="Ledger.Conway.Conformance.Equivalence.html#6466" class="Bound">•</a> <a id="6468" href="Ledger.Conway.Conformance.Equivalence.html#6468" class="Bound">◆</a> <a id="6470" class="Symbol">→</a> <a id="6472" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a> <a id="6474" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="6478" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="6491" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="6501" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6507" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a> <a id="6509" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="6512" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="6515" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.html#6466}{\htmlId{6526}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{6530}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#6468}{\htmlId{6534}{\htmlClass{Bound}{\text{◆}}}}\, \end{pmatrix}$</a><a id="6537" class="Symbol">)</a>
             <a id="6552" href="Ledger.Conway.Conformance.Equivalence.html#7447" class="Function">utxoEq</a> <a id="6559" href="Ledger.Conway.Conformance.Equivalence.html#7669" class="Function">certsEq</a> <a id="6567" href="Ledger.Conway.Conformance.Equivalence.html#7287" class="Function">ledger&#39;</a>
    <a id="6579" class="Keyword">where</a>
      <a id="6591" class="Keyword">open</a> <a id="6596" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="6603" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a>
      <a id="6611" class="Keyword">open</a> <a id="6616" href="Ledger.Conway.Specification.Ledger.html#977" class="Module">L.LState</a> <a id="6625" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a>
      <a id="6633" class="Keyword">open</a> <a id="6638" href="Ledger.Conway.Specification.Ledger.html#977" class="Module">L.LState</a> <a id="6647" href="Ledger.Conway.Conformance.Equivalence.html#6312" class="Bound">s&#39;</a> <a id="6650" class="Keyword">renaming</a> <a id="6659" class="Symbol">(</a><a id="6660" href="Ledger.Conway.Specification.Ledger.html#1036" class="Field">utxoSt</a> <a id="6667" class="Symbol">to</a> <a id="6670" class="Field">utxoSt&#39;</a><a id="6677" class="Symbol">;</a> <a id="6679" href="Ledger.Conway.Specification.Ledger.html#1089" class="Field">certState</a> <a id="6689" class="Symbol">to</a> <a id="6692" class="Field">certState&#39;</a><a id="6702" class="Symbol">;</a> <a id="6704" href="Ledger.Conway.Specification.Ledger.html#1063" class="Field">govSt</a> <a id="6710" class="Symbol">to</a> <a id="6713" class="Field">govSt&#39;</a><a id="6719" class="Symbol">)</a>
      <a id="6727" class="Keyword">open</a> <a id="6732" href="Ledger.Conway.Specification.Transaction.html#2987" class="Module">TxBody</a> <a id="6739" class="Symbol">(</a><a id="6740" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">body</a> <a id="6745" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a><a id="6747" class="Symbol">)</a> <a id="6749" class="Keyword">using</a> <a id="6755" class="Symbol">(</a><a id="6756" href="Ledger.Conway.Specification.Transaction.html#3221" class="Field">txcerts</a><a id="6763" class="Symbol">)</a>
      <a id="6771" href="Ledger.Conway.Conformance.Equivalence.html#6771" class="Function">deposits</a> <a id="6780" class="Symbol">=</a> <a id="6782" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="6803" href="Ledger.Conway.Specification.Ledger.html#1036" class="Function">utxoSt</a>
      <a id="6816" href="Ledger.Conway.Conformance.Equivalence.html#6816" class="Function">utxow&#39;</a> <a id="6823" class="Symbol">:</a> <a id="6825" class="Symbol">_</a> <a id="6827" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="6831" href="Ledger.Conway.Specification.Ledger.html#1036" class="Function">utxoSt</a> <a id="6838" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="6841" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="6844" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="6852" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="6864" href="Ledger.Conway.Conformance.Equivalence.html#6771" class="Function">deposits</a> <a id="6873" href="Ledger.Conway.Conformance.Equivalence.html#6670" class="Function">utxoSt&#39;</a>
      <a id="6887" href="Ledger.Conway.Conformance.Equivalence.html#6816" class="Function">utxow&#39;</a> <a id="6894" class="Symbol">=</a> <a id="6896" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="6901" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a>
      <a id="6913" href="Ledger.Conway.Conformance.Equivalence.html#6913" class="Function">utxoStC&#39;</a>    <a id="6925" class="Symbol">=</a> <a id="6927" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="6939" class="Symbol">(</a><a id="6940" href="Ledger.Conway.Specification.Utxo.html#8062" class="Function">L.updateDeposits</a> <a id="6957" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="6965" class="Symbol">(</a><a id="6966" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">body</a> <a id="6971" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a><a id="6973" class="Symbol">)</a> <a id="6975" href="Ledger.Conway.Conformance.Equivalence.html#6771" class="Function">deposits</a><a id="6983" class="Symbol">)</a> <a id="6985" href="Ledger.Conway.Conformance.Equivalence.html#6670" class="Function">utxoSt&#39;</a>
      <a id="6999" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a>  <a id="7010" class="Symbol">=</a> <a id="7012" href="Ledger.Conway.Conformance.Equivalence.html#3896" class="Function">makeCertDeps*</a> <a id="7026" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7031" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a>
      <a id="7043" href="Ledger.Conway.Conformance.Equivalence.html#7043" class="Function">cdeposits&#39;</a> <a id="7054" class="Symbol">=</a> <a id="7056" href="Ledger.Conway.Conformance.Equivalence.Certs.html#5696" class="Function">updateCertDeps*</a> <a id="7072" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="7080" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a>
      <a id="7096" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a> <a id="7108" class="Symbol">=</a> <a id="7110" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7123" href="Ledger.Conway.Conformance.Equivalence.html#7043" class="Function">cdeposits&#39;</a> <a id="7134" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7140" href="Ledger.Conway.Conformance.Equivalence.html#6692" class="Function">certState&#39;</a>
      <a id="7157" href="Ledger.Conway.Conformance.Equivalence.html#7157" class="Function">certs&#39;</a> <a id="7164" class="Symbol">:</a> <a id="7166" class="Symbol">_</a> <a id="7168" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">C.⊢</a> <a id="7172" class="Symbol">(</a><a id="7173" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7186" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7196" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7202" href="Ledger.Conway.Specification.Ledger.html#1089" class="Function">certState</a><a id="7211" class="Symbol">)</a> <a id="7213" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">⇀⦇</a> <a id="7216" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="7224" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">,CERTS⦈</a> <a id="7232" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a>
      <a id="7250" href="Ledger.Conway.Conformance.Equivalence.html#7157" class="Function">certs&#39;</a> <a id="7257" class="Symbol">=</a> <a id="7259" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7269" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7275" href="Ledger.Conway.Conformance.Equivalence.html#6351" class="Bound">certs</a>
      <a id="7287" href="Ledger.Conway.Conformance.Equivalence.html#7287" class="Function">ledger&#39;</a> <a id="7295" class="Symbol">:</a> <a id="7297" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a> <a id="7299" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="7303" class="Symbol">(</a><a id="7304" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7317" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7327" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7333" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a><a id="7334" class="Symbol">)</a> <a id="7336" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="7339" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="7342" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="7351" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">C.⟦</a> <a id="7355" href="Ledger.Conway.Conformance.Equivalence.html#6913" class="Function">utxoStC&#39;</a> <a id="7364" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">,</a> <a id="7366" href="Ledger.Conway.Conformance.Equivalence.html#6713" class="Function">govSt&#39;</a> <a id="7373" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">,</a> <a id="7375" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a> <a id="7387" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="7396" href="Ledger.Conway.Conformance.Equivalence.html#7287" class="Function">ledger&#39;</a> <a id="7404" class="Symbol">=</a> <a id="7406" href="Ledger.Conway.Conformance.Ledger.html#2168" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="7418" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7423" href="Ledger.Conway.Conformance.Equivalence.html#6816" class="Function">utxow&#39;</a> <a id="7430" href="Ledger.Conway.Conformance.Equivalence.html#7157" class="Function">certs&#39;</a> <a id="7437" href="Ledger.Conway.Conformance.Equivalence.html#6357" class="Bound">gov</a>
      <a id="7447" href="Ledger.Conway.Conformance.Equivalence.html#7447" class="Function">utxoEq</a>  <a id="7455" class="Symbol">:</a> <a id="7457" href="Ledger.Conway.Conformance.Equivalence.html#6913" class="Function">utxoStC&#39;</a> <a id="7466" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7468" href="Ledger.Conway.Conformance.Equivalence.html#6670" class="Function">utxoSt&#39;</a>
      <a id="7482" href="Ledger.Conway.Conformance.Equivalence.html#7447" class="Function">utxoEq</a>  <a id="7490" class="Symbol">=</a> <a id="7492" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="7497" class="Symbol">(λ</a> <a id="7500" href="Ledger.Conway.Conformance.Equivalence.html#7500" class="Bound">•</a> <a id="7502" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{7506}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7510}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7500}{\htmlId{7514}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{7518}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="7521" class="Symbol">)</a>
                     <a id="7544" class="Symbol">(</a><a id="7545" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="7563" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7568" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a><a id="7573" class="Symbol">)</a>
      <a id="7581" href="Ledger.Conway.Conformance.Equivalence.html#7581" class="Function">ddeps</a> <a id="7587" class="Symbol">=</a> <a id="7589" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7602" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7612" class="Symbol">.</a><a id="7613" href="Data.Product.Base.html#636" class="Field">proj₁</a>
      <a id="7625" href="Ledger.Conway.Conformance.Equivalence.html#7625" class="Function">gdeps</a> <a id="7631" class="Symbol">=</a> <a id="7633" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7646" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7656" class="Symbol">.</a><a id="7657" href="Data.Product.Base.html#650" class="Field">proj₂</a>
      <a id="7669" href="Ledger.Conway.Conformance.Equivalence.html#7669" class="Function">certsEq</a> <a id="7677" class="Symbol">:</a> <a id="7679" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a> <a id="7691" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7693" class="Symbol">(</a><a id="7694" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="7706" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="7714" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="7722" href="Ledger.Conway.Conformance.Equivalence.html#7581" class="Function">ddeps</a> <a id="7728" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7730" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="7742" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="7750" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="7758" href="Ledger.Conway.Conformance.Equivalence.html#7625" class="Function">gdeps</a><a id="7763" class="Symbol">)</a> <a id="7765" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7771" href="Ledger.Conway.Conformance.Equivalence.html#6692" class="Function">certState&#39;</a>
      <a id="7788" href="Ledger.Conway.Conformance.Equivalence.html#7669" class="Function">certsEq</a> <a id="7796" class="Symbol">=</a> <a id="7798" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="7804" class="Symbol">(λ</a> <a id="7807" href="Ledger.Conway.Conformance.Equivalence.html#7807" class="Bound">•</a> <a id="7809" href="Ledger.Conway.Conformance.Equivalence.html#7809" class="Bound">◆</a> <a id="7811" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\htmlId{7817}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7821}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7825}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7807}{\htmlId{7829}{\htmlClass{Bound}{\text{•}}}}\, \end{pmatrix} \\ \,\htmlId{7835}{\htmlClass{Symbol}{\text{\_}}}\, \\ \begin{pmatrix} \,\htmlId{7841}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7845}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7809}{\htmlId{7849}{\htmlClass{Bound}{\text{◆}}}}\, \end{pmatrix} \end{pmatrix}$</a><a id="7854" class="Symbol">)</a>
                     <a id="7877" class="Symbol">(</a><a id="7878" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#10989" class="Function">lem-ddeps</a> <a id="7888" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a><a id="7897" class="Symbol">)</a>
                     <a id="7920" class="Symbol">(</a><a id="7921" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#11902" class="Function">lem-gdeps</a> <a id="7931" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a><a id="7940" class="Symbol">)</a>

  <a id="7945" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , cdeps-eq) r@(L.LEDGER-I⋯ refl utxow) =</a>
  <a id="8036" href="Ledger.Conway.Conformance.Equivalence.html#5922" class="Function">LEDGERToConf</a> <a id="8049" class="Symbol">{</a><a id="8050" href="Ledger.Conway.Conformance.Equivalence.html#8050" class="Bound">Γ</a><a id="8051" class="Symbol">}</a> <a id="8053" class="Symbol">{</a><a id="8054" href="Ledger.Conway.Conformance.Equivalence.html#8054" class="Bound">s</a><a id="8055" class="Symbol">}</a> <a id="8057" class="Symbol">{</a><a id="8058" href="Ledger.Conway.Conformance.Equivalence.html#8058" class="Bound">tx</a><a id="8060" class="Symbol">}</a> <a id="8062" class="Symbol">{</a><a id="8063" href="Ledger.Conway.Conformance.Equivalence.html#8063" class="Bound">s&#39;</a><a id="8065" class="Symbol">}</a> <a id="8067" class="Symbol">.</a><a id="8068" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8074" class="Symbol">_</a> <a id="8076" href="Ledger.Conway.Conformance.Equivalence.html#8076" class="Bound">r</a><a id="8077" class="Symbol">@(</a><a id="8079" href="Ledger.Conway.Specification.Ledger.html#3805" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="8091" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8096" href="Ledger.Conway.Conformance.Equivalence.html#8096" class="Bound">utxow</a><a id="8101" class="Symbol">)</a> <a id="8103" class="Symbol">=</a>
    <a id="8109" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="8122" href="Ledger.Conway.Conformance.Equivalence.html#8054" class="Bound">s</a> <a id="8124" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8126" href="Ledger.Conway.Conformance.Equivalence.html#4982" class="Function">lem-cert-deposits-invalid</a> <a id="8152" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8157" href="Ledger.Conway.Conformance.Equivalence.html#8076" class="Bound">r</a> <a id="8159" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
    <a id="8165" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="8171" class="Symbol">(λ</a> <a id="8174" href="Ledger.Conway.Conformance.Equivalence.html#8174" class="Bound">•</a> <a id="8176" class="Symbol">→</a> <a id="8178" href="Ledger.Conway.Conformance.Equivalence.html#8050" class="Bound">Γ</a> <a id="8180" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="8184" class="Symbol">_</a> <a id="8186" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="8192" href="Ledger.Conway.Conformance.Equivalence.html#8054" class="Bound">s</a> <a id="8194" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="8197" href="Ledger.Conway.Conformance.Equivalence.html#8058" class="Bound">tx</a> <a id="8200" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\htmlId{8213}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{8217}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#8174}{\htmlId{8221}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{8225}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix} \\ \,\htmlId{8231}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{8235}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="8238" class="Symbol">)</a>
          <a id="8250" class="Symbol">(</a><a id="8251" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="8271" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8276" href="Ledger.Conway.Conformance.Equivalence.html#8096" class="Bound">utxow</a><a id="8281" class="Symbol">)</a>
          <a id="8293" class="Symbol">(</a><a id="8294" href="Ledger.Conway.Conformance.Ledger.html#2221" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="8306" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8311" class="Symbol">(</a><a id="8312" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8317" href="Ledger.Conway.Conformance.Equivalence.html#8096" class="Bound">utxow</a><a id="8322" class="Symbol">))</a>

<a id="8326" class="Keyword">instance</a>

  <a id="LStateFromConf"></a><a id="8338" href="Ledger.Conway.Conformance.Equivalence.html#8338" class="Function">LStateFromConf</a> <a id="8353" class="Symbol">:</a> <a id="8355" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a> <a id="8364" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a> <a id="8366" href="Ledger.Conway.Specification.Ledger.html#977" class="Record">L.LState</a>
  <a id="8377" href="Ledger.Conway.Conformance.Equivalence.html#8338" class="Function">LStateFromConf</a> <a id="8392" class="Symbol">.</a><a id="8393" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8399" class="Symbol">_</a> <a id="8401" href="Ledger.Conway.Conformance.Equivalence.html#8401" class="Bound">ls</a> <a id="8404" class="Symbol">=</a>
    <a id="8410" class="Keyword">let</a> <a id="8414" class="Keyword">open</a> <a id="8419" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="8428" href="Ledger.Conway.Conformance.Equivalence.html#8401" class="Bound">ls</a> <a id="8431" class="Keyword">in</a>
    <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{8440}{\htmlClass{Field}{\text{utxoSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#861}{\htmlId{8449}{\htmlClass{Field}{\text{govSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{8457}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Ledger.html#887}{\htmlId{8462}{\htmlClass{Field}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="certDepositsC"></a><a id="8475" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8489" class="Symbol">:</a> <a id="8491" href="Ledger.Conway.Conformance.Certs.html#970" class="Record">C.CertState</a> <a id="8503" class="Symbol">→</a> <a id="8505" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="8516" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8518" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a>
<a id="8529" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8543" href="Ledger.Conway.Conformance.Equivalence.html#8543" class="Bound">cs</a> <a id="8546" class="Symbol">=</a> <a id="8548" class="Keyword">let</a> <a id="8552" class="Keyword">open</a> <a id="8557" href="Ledger.Conway.Conformance.Certs.html#970" class="Module">C.CertState</a> <a id="8569" href="Ledger.Conway.Conformance.Equivalence.html#8543" class="Bound">cs</a> <a id="8572" class="Keyword">in</a> <a id="8575" href="Ledger.Conway.Conformance.Certs.html#770" class="Field">C.DState.deposits</a> <a id="8593" href="Ledger.Conway.Conformance.Certs.html#1029" class="Field">dState</a> <a id="8600" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8602" href="Ledger.Conway.Conformance.Certs.html#940" class="Field">C.GState.deposits</a> <a id="8620" href="Ledger.Conway.Conformance.Certs.html#1069" class="Field">gState</a>

<a id="WellformedLState"></a><a id="8628" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="8645" class="Symbol">:</a> <a id="8647" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a> <a id="8656" class="Symbol">→</a> <a id="8658" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8663" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="8680" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">s</a> <a id="8682" class="Symbol">=</a> <a id="8684" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8698" class="Symbol">(</a><a id="8699" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="8718" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">s</a><a id="8719" class="Symbol">)</a> <a id="8721" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="8724" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="8737" class="Symbol">(</a><a id="8738" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8743" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">s</a><a id="8744" class="Symbol">)</a>

<a id="getValidCertDepositsCERTS"></a><a id="8747" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="8773" class="Symbol">:</a> <a id="8775" class="Symbol">∀</a> <a id="8777" class="Symbol">{</a><a id="8778" href="Ledger.Conway.Conformance.Equivalence.html#8778" class="Bound">Γ</a> <a id="8780" href="Ledger.Conway.Conformance.Equivalence.html#8780" class="Bound">s</a> <a id="8782" href="Ledger.Conway.Conformance.Equivalence.html#8782" class="Bound">certs</a> <a id="8788" href="Ledger.Conway.Conformance.Equivalence.html#8788" class="Bound">s&#39;</a><a id="8790" class="Symbol">}</a> <a id="8792" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a> <a id="8801" class="Symbol">(</a><a id="8802" class="Keyword">open</a> <a id="8807" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">L.CertEnv</a> <a id="8817" href="Ledger.Conway.Conformance.Equivalence.html#8778" class="Bound">Γ</a> <a id="8819" class="Keyword">using</a> <a id="8825" class="Symbol">(</a><a id="8826" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="8828" class="Symbol">))</a>
                          <a id="8857" class="Symbol">→</a> <a id="8859" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8873" href="Ledger.Conway.Conformance.Equivalence.html#8780" class="Bound">s</a> <a id="8875" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="8878" class="Symbol">(</a><a id="8879" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3996" class="Function">certDDeps</a> <a id="8889" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a> <a id="8898" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8900" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4142" class="Function">certGDeps</a> <a id="8910" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a><a id="8918" class="Symbol">)</a>
                          <a id="8946" class="Symbol">→</a> <a id="8948" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="8975" class="Symbol">{</a><a id="8976" class="Argument">sts</a> <a id="8980" class="Symbol">=</a> <a id="8982" href="Ledger.Conway.Conformance.Certs.html#6517" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="8997" class="Symbol">}</a> <a id="8999" href="Ledger.Conway.Conformance.Equivalence.html#8778" class="Bound">Γ</a> <a id="9001" href="Ledger.Conway.Conformance.Equivalence.html#8780" class="Bound">s</a> <a id="9003" href="Ledger.Conway.Conformance.Equivalence.html#8782" class="Bound">certs</a> <a id="9009" href="Ledger.Conway.Conformance.Equivalence.html#8788" class="Bound">s&#39;</a>
                          <a id="9038" class="Symbol">→</a> <a id="9040" href="Ledger.Conway.Specification.Utxo.html#3412" class="Datatype">L.ValidCertDeposits</a> <a id="9060" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="9063" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a> <a id="9072" href="Ledger.Conway.Conformance.Equivalence.html#8782" class="Bound">certs</a>
<a id="9078" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9104" href="Ledger.Conway.Conformance.Equivalence.html#9104" class="Bound">deposits</a> <a id="9113" href="Ledger.Conway.Conformance.Equivalence.html#9113" class="Bound">wf</a> <a id="9116" class="Symbol">(</a><a id="9117" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="9125" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="9131" class="Symbol">)</a> <a id="9133" class="Symbol">=</a> <a id="9135" href="Ledger.Conway.Specification.Utxo.html#3494" class="InductiveConstructor">L.[]</a>
<a id="9140" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9166" class="Symbol">{</a><a id="9167" href="Ledger.Conway.Conformance.Equivalence.html#9167" class="Bound">Γ</a><a id="9168" class="Symbol">}</a> <a id="9170" class="Symbol">{</a><a id="9171" href="Ledger.Conway.Conformance.Equivalence.html#9171" class="Bound">s</a><a id="9172" class="Symbol">}</a> <a id="9174" class="Symbol">{</a><a id="9175" href="Ledger.Conway.Conformance.Equivalence.html#9175" class="Bound">cert</a> <a id="9180" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9182" class="Symbol">_}</a> <a id="9185" href="Ledger.Conway.Conformance.Equivalence.html#9185" class="Bound">deposits</a> <a id="9194" href="Ledger.Conway.Conformance.Equivalence.html#9194" class="Bound">wf</a> <a id="9197" class="Symbol">(</a><a id="9198" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9205" class="Symbol">(</a><a id="9206" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="9219" class="Symbol">(</a><a id="9220" href="Ledger.Conway.Conformance.Certs.html#4180" class="InductiveConstructor">C.DELEG-delegate</a> <a id="9237" class="Symbol">(</a><a id="9238" href="Ledger.Conway.Conformance.Equivalence.html#9238" class="Bound">a</a> <a id="9240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9242" href="Ledger.Conway.Conformance.Equivalence.html#9242" class="Bound">b</a><a id="9243" class="Symbol">)))</a> <a id="9247" href="Ledger.Conway.Conformance.Equivalence.html#9247" class="Bound">rs</a><a id="9249" class="Symbol">)</a> <a id="9251" class="Symbol">=</a>
  <a id="9255" href="Ledger.Conway.Specification.Utxo.html#3538" class="InductiveConstructor">L.delegate</a> <a id="9266" class="Symbol">(</a><a id="9267" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9293" class="Symbol">_</a> <a id="9295" class="Symbol">(</a><a id="9296" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="9307" class="Symbol">(</a><a id="9308" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="9321" href="Ledger.Conway.Conformance.Equivalence.html#9167" class="Bound">Γ</a><a id="9322" class="Symbol">)</a> <a id="9324" class="Symbol">(</a><a id="9325" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="9339" href="Ledger.Conway.Conformance.Equivalence.html#9171" class="Bound">s</a><a id="9340" class="Symbol">)</a> <a id="9342" href="Ledger.Conway.Conformance.Equivalence.html#9185" class="Bound">deposits</a> <a id="9351" href="Ledger.Conway.Conformance.Equivalence.html#9175" class="Bound">cert</a> <a id="9356" href="Ledger.Conway.Conformance.Equivalence.html#9194" class="Bound">wf</a><a id="9358" class="Symbol">)</a> <a id="9360" href="Ledger.Conway.Conformance.Equivalence.html#9247" class="Bound">rs</a><a id="9362" class="Symbol">)</a>
<a id="9364" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9390" class="Symbol">{</a><a id="9391" href="Ledger.Conway.Conformance.Equivalence.html#9391" class="Bound">Γ</a><a id="9392" class="Symbol">}</a> <a id="9394" class="Symbol">{</a><a id="9395" href="Ledger.Conway.Conformance.Equivalence.html#9395" class="Bound">s</a><a id="9396" class="Symbol">}</a> <a id="9398" class="Symbol">{</a><a id="9399" href="Ledger.Conway.Conformance.Equivalence.html#9399" class="Bound">cert</a> <a id="9404" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9406" class="Symbol">_}</a> <a id="9409" href="Ledger.Conway.Conformance.Equivalence.html#9409" class="Bound">deposits</a> <a id="9418" href="Ledger.Conway.Conformance.Equivalence.html#9418" class="Bound">wf</a> <a id="9421" class="Symbol">(</a><a id="9422" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9429" class="Symbol">(</a><a id="9430" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="9443" class="Symbol">(</a><a id="9444" href="Ledger.Conway.Conformance.Certs.html#4809" class="InductiveConstructor">C.DELEG-dereg</a> <a id="9458" class="Symbol">(_</a> <a id="9461" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9463" href="Ledger.Conway.Conformance.Equivalence.html#9463" class="Bound">h</a> <a id="9465" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9467" href="Ledger.Conway.Conformance.Equivalence.html#9467" class="Bound">h&#39;</a><a id="9469" class="Symbol">)))</a> <a id="9473" href="Ledger.Conway.Conformance.Equivalence.html#9473" class="Bound">rs</a><a id="9475" class="Symbol">)</a> <a id="9477" class="Symbol">=</a>
  <a id="9481" href="Ledger.Conway.Specification.Utxo.html#4259" class="InductiveConstructor">L.dereg</a> <a id="9489" class="Symbol">(</a><a id="9490" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="9499" class="Symbol">.</a><a id="9500" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9517" class="Symbol">(</a><a id="9518" href="Ledger.Conway.Conformance.Equivalence.html#9418" class="Bound">wf</a> <a id="9521" class="Symbol">.</a><a id="9522" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9528" class="Symbol">.</a><a id="9529" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9535" href="Ledger.Conway.Conformance.Equivalence.html#9463" class="Bound">h</a><a id="9536" class="Symbol">)</a> <a id="9538" class="Symbol">.</a><a id="9539" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="9544" class="Symbol">)</a> <a id="9546" href="Ledger.Conway.Conformance.Equivalence.html#9467" class="Bound">h&#39;</a>
          <a id="9559" class="Symbol">(</a><a id="9560" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9586" class="Symbol">_</a> <a id="9588" class="Symbol">(</a><a id="9589" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="9600" class="Symbol">(</a><a id="9601" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="9614" href="Ledger.Conway.Conformance.Equivalence.html#9391" class="Bound">Γ</a><a id="9615" class="Symbol">)</a> <a id="9617" class="Symbol">(</a><a id="9618" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="9632" href="Ledger.Conway.Conformance.Equivalence.html#9395" class="Bound">s</a><a id="9633" class="Symbol">)</a> <a id="9635" href="Ledger.Conway.Conformance.Equivalence.html#9409" class="Bound">deposits</a> <a id="9644" href="Ledger.Conway.Conformance.Equivalence.html#9399" class="Bound">cert</a> <a id="9649" href="Ledger.Conway.Conformance.Equivalence.html#9418" class="Bound">wf</a><a id="9651" class="Symbol">)</a> <a id="9653" href="Ledger.Conway.Conformance.Equivalence.html#9473" class="Bound">rs</a><a id="9655" class="Symbol">)</a>
<a id="9657" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9683" class="Symbol">{</a><a id="9684" href="Ledger.Conway.Conformance.Equivalence.html#9684" class="Bound">Γ</a><a id="9685" class="Symbol">}</a> <a id="9687" class="Symbol">{</a><a id="9688" href="Ledger.Conway.Conformance.Equivalence.html#9688" class="Bound">s</a><a id="9689" class="Symbol">}</a> <a id="9691" class="Symbol">{</a><a id="9692" href="Ledger.Conway.Conformance.Equivalence.html#9692" class="Bound">cert</a> <a id="9697" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9699" class="Symbol">_}</a> <a id="9702" href="Ledger.Conway.Conformance.Equivalence.html#9702" class="Bound">deposits</a> <a id="9711" href="Ledger.Conway.Conformance.Equivalence.html#9711" class="Bound">wf</a> <a id="9714" class="Symbol">(</a><a id="9715" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9722" class="Symbol">(</a><a id="9723" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="9736" class="Symbol">(</a><a id="9737" href="Ledger.Conway.Conformance.Certs.html#5173" class="InductiveConstructor">C.DELEG-reg</a> <a id="9749" href="Ledger.Conway.Conformance.Equivalence.html#9749" class="Bound">x</a><a id="9750" class="Symbol">))</a> <a id="9753" href="Ledger.Conway.Conformance.Equivalence.html#9753" class="Bound">rs</a><a id="9755" class="Symbol">)</a> <a id="9757" class="Symbol">=</a>
  <a id="9761" href="Ledger.Conway.Specification.Utxo.html#4078" class="InductiveConstructor">L.reg</a> <a id="9767" class="Symbol">(</a><a id="9768" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9794" class="Symbol">_</a> <a id="9796" class="Symbol">(</a><a id="9797" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="9808" class="Symbol">(</a><a id="9809" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="9822" href="Ledger.Conway.Conformance.Equivalence.html#9684" class="Bound">Γ</a><a id="9823" class="Symbol">)</a> <a id="9825" class="Symbol">(</a><a id="9826" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="9840" href="Ledger.Conway.Conformance.Equivalence.html#9688" class="Bound">s</a><a id="9841" class="Symbol">)</a> <a id="9843" href="Ledger.Conway.Conformance.Equivalence.html#9702" class="Bound">deposits</a> <a id="9852" href="Ledger.Conway.Conformance.Equivalence.html#9692" class="Bound">cert</a> <a id="9857" href="Ledger.Conway.Conformance.Equivalence.html#9711" class="Bound">wf</a><a id="9859" class="Symbol">)</a> <a id="9861" href="Ledger.Conway.Conformance.Equivalence.html#9753" class="Bound">rs</a><a id="9863" class="Symbol">)</a>
<a id="9865" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9891" class="Symbol">{</a><a id="9892" href="Ledger.Conway.Conformance.Equivalence.html#9892" class="Bound">Γ</a><a id="9893" class="Symbol">}</a> <a id="9895" class="Symbol">{</a><a id="9896" href="Ledger.Conway.Conformance.Equivalence.html#9896" class="Bound">s</a><a id="9897" class="Symbol">}</a> <a id="9899" class="Symbol">{</a><a id="9900" href="Ledger.Conway.Conformance.Equivalence.html#9900" class="Bound">cert</a> <a id="9905" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9907" class="Symbol">_}</a> <a id="9910" href="Ledger.Conway.Conformance.Equivalence.html#9910" class="Bound">deposits</a> <a id="9919" href="Ledger.Conway.Conformance.Equivalence.html#9919" class="Bound">wf</a> <a id="9922" class="Symbol">(</a><a id="9923" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9930" class="Symbol">(</a><a id="9931" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a> <a id="9943" class="Symbol">(</a><a id="9944" href="Ledger.Conway.Conformance.Certs.html#3806" class="InductiveConstructor">C.POOL-regpool</a> <a id="9959" class="Symbol">_))</a> <a id="9963" href="Ledger.Conway.Conformance.Equivalence.html#9963" class="Bound">rs</a><a id="9965" class="Symbol">)</a> <a id="9967" class="Symbol">=</a>
  <a id="9971" href="Ledger.Conway.Specification.Utxo.html#3725" class="InductiveConstructor">L.regpool</a> <a id="9981" class="Symbol">(</a><a id="9982" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10008" class="Symbol">_</a> <a id="10010" class="Symbol">(</a><a id="10011" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="10022" class="Symbol">(</a><a id="10023" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="10036" href="Ledger.Conway.Conformance.Equivalence.html#9892" class="Bound">Γ</a><a id="10037" class="Symbol">)</a> <a id="10039" class="Symbol">(</a><a id="10040" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10054" href="Ledger.Conway.Conformance.Equivalence.html#9896" class="Bound">s</a><a id="10055" class="Symbol">)</a> <a id="10057" href="Ledger.Conway.Conformance.Equivalence.html#9910" class="Bound">deposits</a> <a id="10066" href="Ledger.Conway.Conformance.Equivalence.html#9900" class="Bound">cert</a> <a id="10071" href="Ledger.Conway.Conformance.Equivalence.html#9919" class="Bound">wf</a><a id="10073" class="Symbol">)</a> <a id="10075" href="Ledger.Conway.Conformance.Equivalence.html#9963" class="Bound">rs</a><a id="10077" class="Symbol">)</a>
<a id="10079" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10105" class="Symbol">{</a><a id="10106" href="Ledger.Conway.Conformance.Equivalence.html#10106" class="Bound">Γ</a><a id="10107" class="Symbol">}</a> <a id="10109" class="Symbol">{</a><a id="10110" href="Ledger.Conway.Conformance.Equivalence.html#10110" class="Bound">s</a><a id="10111" class="Symbol">}</a> <a id="10113" class="Symbol">{</a><a id="10114" href="Ledger.Conway.Conformance.Equivalence.html#10114" class="Bound">cert</a> <a id="10119" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10121" class="Symbol">_}</a> <a id="10124" href="Ledger.Conway.Conformance.Equivalence.html#10124" class="Bound">deposits</a> <a id="10133" href="Ledger.Conway.Conformance.Equivalence.html#10133" class="Bound">wf</a> <a id="10136" class="Symbol">(</a><a id="10137" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10144" class="Symbol">(</a><a id="10145" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a> <a id="10157" href="Ledger.Conway.Conformance.Certs.html#4005" class="InductiveConstructor">C.POOL-retirepool</a><a id="10174" class="Symbol">)</a> <a id="10176" href="Ledger.Conway.Conformance.Equivalence.html#10176" class="Bound">rs</a><a id="10178" class="Symbol">)</a> <a id="10180" class="Symbol">=</a>
  <a id="10184" href="Ledger.Conway.Specification.Utxo.html#4867" class="InductiveConstructor">L.retirepool</a> <a id="10197" class="Symbol">(</a><a id="10198" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10224" class="Symbol">_</a> <a id="10226" class="Symbol">(</a><a id="10227" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="10238" class="Symbol">(</a><a id="10239" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="10252" href="Ledger.Conway.Conformance.Equivalence.html#10106" class="Bound">Γ</a><a id="10253" class="Symbol">)</a> <a id="10255" class="Symbol">(</a><a id="10256" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10270" href="Ledger.Conway.Conformance.Equivalence.html#10110" class="Bound">s</a><a id="10271" class="Symbol">)</a> <a id="10273" href="Ledger.Conway.Conformance.Equivalence.html#10124" class="Bound">deposits</a> <a id="10282" href="Ledger.Conway.Conformance.Equivalence.html#10114" class="Bound">cert</a> <a id="10287" href="Ledger.Conway.Conformance.Equivalence.html#10133" class="Bound">wf</a><a id="10289" class="Symbol">)</a> <a id="10291" href="Ledger.Conway.Conformance.Equivalence.html#10176" class="Bound">rs</a><a id="10293" class="Symbol">)</a>
<a id="10295" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10321" class="Symbol">{</a><a id="10322" href="Ledger.Conway.Conformance.Equivalence.html#10322" class="Bound">Γ</a><a id="10323" class="Symbol">}</a> <a id="10325" class="Symbol">{</a><a id="10326" href="Ledger.Conway.Conformance.Equivalence.html#10326" class="Bound">s</a><a id="10327" class="Symbol">}</a> <a id="10329" class="Symbol">{</a><a id="10330" href="Ledger.Conway.Conformance.Equivalence.html#10330" class="Bound">cert</a> <a id="10335" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10337" class="Symbol">_}</a> <a id="10340" href="Ledger.Conway.Conformance.Equivalence.html#10340" class="Bound">deposits</a> <a id="10349" href="Ledger.Conway.Conformance.Equivalence.html#10349" class="Bound">wf</a> <a id="10352" class="Symbol">(</a><a id="10353" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10360" class="Symbol">(</a><a id="10361" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="10373" class="Symbol">(</a><a id="10374" href="Ledger.Conway.Conformance.Certs.html#5565" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="10392" href="Ledger.Conway.Conformance.Equivalence.html#10392" class="Bound">x</a><a id="10393" class="Symbol">))</a> <a id="10396" href="Ledger.Conway.Conformance.Equivalence.html#10396" class="Bound">rs</a><a id="10398" class="Symbol">)</a> <a id="10400" class="Symbol">=</a>
  <a id="10404" href="Ledger.Conway.Specification.Utxo.html#3908" class="InductiveConstructor">L.regdrep</a> <a id="10414" class="Symbol">(</a><a id="10415" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10441" class="Symbol">_</a> <a id="10443" class="Symbol">(</a><a id="10444" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="10455" class="Symbol">(</a><a id="10456" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="10469" href="Ledger.Conway.Conformance.Equivalence.html#10322" class="Bound">Γ</a><a id="10470" class="Symbol">)</a> <a id="10472" class="Symbol">(</a><a id="10473" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10487" href="Ledger.Conway.Conformance.Equivalence.html#10326" class="Bound">s</a><a id="10488" class="Symbol">)</a> <a id="10490" href="Ledger.Conway.Conformance.Equivalence.html#10340" class="Bound">deposits</a> <a id="10499" href="Ledger.Conway.Conformance.Equivalence.html#10330" class="Bound">cert</a> <a id="10504" href="Ledger.Conway.Conformance.Equivalence.html#10349" class="Bound">wf</a><a id="10506" class="Symbol">)</a> <a id="10508" href="Ledger.Conway.Conformance.Equivalence.html#10396" class="Bound">rs</a><a id="10510" class="Symbol">)</a>
<a id="10512" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10538" class="Symbol">{</a><a id="10539" href="Ledger.Conway.Conformance.Equivalence.html#10539" class="Bound">Γ</a><a id="10540" class="Symbol">}</a> <a id="10542" class="Symbol">{</a><a id="10543" href="Ledger.Conway.Conformance.Equivalence.html#10543" class="Bound">s</a><a id="10544" class="Symbol">}</a> <a id="10546" class="Symbol">{</a><a id="10547" href="Ledger.Conway.Conformance.Equivalence.html#10547" class="Bound">cert</a> <a id="10552" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10554" class="Symbol">_}</a> <a id="10557" href="Ledger.Conway.Conformance.Equivalence.html#10557" class="Bound">deposits</a> <a id="10566" href="Ledger.Conway.Conformance.Equivalence.html#10566" class="Bound">wf</a> <a id="10569" class="Symbol">(</a><a id="10570" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10577" class="Symbol">(</a><a id="10578" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="10590" class="Symbol">(</a><a id="10591" href="Ledger.Conway.Conformance.Certs.html#5931" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="10611" class="Symbol">(_</a> <a id="10614" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10616" href="Ledger.Conway.Conformance.Equivalence.html#10616" class="Bound">h</a><a id="10617" class="Symbol">)))</a> <a id="10621" href="Ledger.Conway.Conformance.Equivalence.html#10621" class="Bound">rs</a><a id="10623" class="Symbol">)</a> <a id="10625" class="Symbol">=</a>
  <a id="10629" href="Ledger.Conway.Specification.Utxo.html#4520" class="InductiveConstructor">L.deregdrep</a> <a id="10641" class="Symbol">(</a><a id="10642" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="10651" class="Symbol">.</a><a id="10652" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="10669" class="Symbol">(</a><a id="10670" href="Ledger.Conway.Conformance.Equivalence.html#10566" class="Bound">wf</a> <a id="10673" class="Symbol">.</a><a id="10674" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="10680" class="Symbol">.</a><a id="10681" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10687" href="Ledger.Conway.Conformance.Equivalence.html#10616" class="Bound">h</a><a id="10688" class="Symbol">)</a> <a id="10690" class="Symbol">.</a><a id="10691" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="10696" class="Symbol">)</a>
              <a id="10712" class="Symbol">(</a><a id="10713" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10739" class="Symbol">_</a> <a id="10741" class="Symbol">(</a><a id="10742" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="10753" class="Symbol">(</a><a id="10754" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="10767" href="Ledger.Conway.Conformance.Equivalence.html#10539" class="Bound">Γ</a><a id="10768" class="Symbol">)</a> <a id="10770" class="Symbol">(</a><a id="10771" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10785" href="Ledger.Conway.Conformance.Equivalence.html#10543" class="Bound">s</a><a id="10786" class="Symbol">)</a> <a id="10788" href="Ledger.Conway.Conformance.Equivalence.html#10557" class="Bound">deposits</a> <a id="10797" href="Ledger.Conway.Conformance.Equivalence.html#10547" class="Bound">cert</a> <a id="10802" href="Ledger.Conway.Conformance.Equivalence.html#10566" class="Bound">wf</a><a id="10804" class="Symbol">)</a> <a id="10806" href="Ledger.Conway.Conformance.Equivalence.html#10621" class="Bound">rs</a><a id="10808" class="Symbol">)</a>
<a id="10810" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10836" class="Symbol">{</a><a id="10837" href="Ledger.Conway.Conformance.Equivalence.html#10837" class="Bound">Γ</a><a id="10838" class="Symbol">}</a> <a id="10840" class="Symbol">{</a><a id="10841" href="Ledger.Conway.Conformance.Equivalence.html#10841" class="Bound">s</a><a id="10842" class="Symbol">}</a> <a id="10844" class="Symbol">{</a><a id="10845" href="Ledger.Conway.Conformance.Equivalence.html#10845" class="Bound">cert</a> <a id="10850" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10852" class="Symbol">_}</a> <a id="10855" href="Ledger.Conway.Conformance.Equivalence.html#10855" class="Bound">deposits</a> <a id="10864" href="Ledger.Conway.Conformance.Equivalence.html#10864" class="Bound">wf</a> <a id="10867" class="Symbol">(</a><a id="10868" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10875" class="Symbol">(</a><a id="10876" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="10888" class="Symbol">(</a><a id="10889" href="Ledger.Conway.Conformance.Certs.html#6226" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="10908" href="Ledger.Conway.Conformance.Equivalence.html#10908" class="Bound">x</a><a id="10909" class="Symbol">))</a> <a id="10912" href="Ledger.Conway.Conformance.Equivalence.html#10912" class="Bound">rs</a><a id="10914" class="Symbol">)</a> <a id="10916" class="Symbol">=</a>
  <a id="10920" href="Ledger.Conway.Specification.Utxo.html#4727" class="InductiveConstructor">L.ccreghot</a><a id="10930" class="Symbol">(</a><a id="10931" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10957" class="Symbol">_</a> <a id="10959" class="Symbol">(</a><a id="10960" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20561" class="Function">lemUpdCert</a> <a id="10971" class="Symbol">(</a><a id="10972" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">L.CertEnv.pp</a> <a id="10985" href="Ledger.Conway.Conformance.Equivalence.html#10837" class="Bound">Γ</a><a id="10986" class="Symbol">)</a> <a id="10988" class="Symbol">(</a><a id="10989" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="11003" href="Ledger.Conway.Conformance.Equivalence.html#10841" class="Bound">s</a><a id="11004" class="Symbol">)</a> <a id="11006" href="Ledger.Conway.Conformance.Equivalence.html#10855" class="Bound">deposits</a> <a id="11015" href="Ledger.Conway.Conformance.Equivalence.html#10845" class="Bound">cert</a> <a id="11020" href="Ledger.Conway.Conformance.Equivalence.html#10864" class="Bound">wf</a><a id="11022" class="Symbol">)</a> <a id="11024" href="Ledger.Conway.Conformance.Equivalence.html#10912" class="Bound">rs</a><a id="11026" class="Symbol">)</a>

<a id="getValidCertDepositsC"></a><a id="11029" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Function">getValidCertDepositsC</a> <a id="11051" class="Symbol">:</a> <a id="11053" class="Symbol">∀</a> <a id="11055" href="Ledger.Conway.Conformance.Equivalence.html#11055" class="Bound">Γ</a> <a id="11057" href="Ledger.Conway.Conformance.Equivalence.html#11057" class="Bound">s</a> <a id="11059" class="Symbol">{</a><a id="11060" href="Ledger.Conway.Conformance.Equivalence.html#11060" class="Bound">s&#39;</a><a id="11062" class="Symbol">}</a> <a id="11064" href="Ledger.Conway.Conformance.Equivalence.html#11064" class="Bound">tx</a>
                     <a id="11088" class="Symbol">→</a> <a id="11090" class="Symbol">(</a><a id="11091" class="Keyword">let</a> <a id="11095" class="Keyword">open</a> <a id="11100" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">C.LEnv</a> <a id="11107" href="Ledger.Conway.Conformance.Equivalence.html#11055" class="Bound">Γ</a> <a id="11109" class="Keyword">using</a> <a id="11115" class="Symbol">(</a><a id="11116" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="11123" class="Symbol">;</a> <a id="11125" href="Ledger.Conway.Specification.Ledger.html#743" class="Field">slot</a><a id="11129" class="Symbol">;</a> <a id="11131" href="Ledger.Conway.Specification.Ledger.html#827" class="Field">enactState</a><a id="11141" class="Symbol">)</a>
                            <a id="11171" class="Keyword">open</a> <a id="11176" href="Ledger.Conway.Specification.Transaction.html#2987" class="Module">TxBody</a> <a id="11183" class="Symbol">(</a><a id="11184" href="Ledger.Conway.Conformance.Equivalence.html#11064" class="Bound">tx</a> <a id="11187" class="Symbol">.</a><a id="11188" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">Tx.body</a><a id="11195" class="Symbol">)</a> <a id="11197" class="Keyword">using</a> <a id="11203" class="Symbol">(</a><a id="11204" href="Ledger.Conway.Specification.Transaction.html#3221" class="Field">txcerts</a><a id="11211" class="Symbol">;</a> <a id="11213" href="Ledger.Conway.Specification.Transaction.html#3283" class="Field">txvote</a><a id="11219" class="Symbol">;</a> <a id="11221" href="Ledger.Conway.Specification.Transaction.html#3255" class="Field">txwdrls</a><a id="11228" class="Symbol">)</a>
                            <a id="11258" class="Keyword">open</a> <a id="11263" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="11272" href="Ledger.Conway.Conformance.Equivalence.html#11057" class="Bound">s</a>
                            <a id="11302" class="Keyword">open</a> <a id="11307" href="Ledger.Conway.Specification.Utxo.html#1473" class="Module">C.UTxOState</a> <a id="11319" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="11326" class="Keyword">using</a> <a id="11332" class="Symbol">(</a><a id="11333" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">deposits</a><a id="11341" class="Symbol">)</a>
                            <a id="11371" href="Ledger.Conway.Conformance.Equivalence.html#11371" class="Bound">cc</a> <a id="11374" class="Symbol">=</a> <a id="11376" href="Ledger.Conway.Specification.Ledger.html#2326" class="Function">C.allColdCreds</a> <a id="11391" href="Ledger.Conway.Conformance.Ledger.html#861" class="Function">govSt</a> <a id="11397" href="Ledger.Conway.Specification.Ledger.html#827" class="Function">enactState</a>
                       <a id="11431" class="Symbol">)</a>
                     <a id="11454" class="Symbol">→</a> <a id="11456" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="11473" href="Ledger.Conway.Conformance.Equivalence.html#11057" class="Bound">s</a>
                     <a id="11496" class="Symbol">→</a> <a id="11498" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="11506" href="Ledger.Conway.Conformance.Equivalence.html#11064" class="Bound">tx</a> <a id="11509" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11511" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="11537" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#810}{\htmlId{11541}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Conway.Specification.Ledger.html#743}{\htmlId{11547}{\htmlClass{Function}{\text{slot}}}}\, \\ \,\href{Ledger.Conway.Specification.Ledger.html#801}{\htmlId{11554}{\htmlClass{Function}{\text{pparams}}}}\, \\ \,\href{Ledger.Conway.Specification.Transaction.html#3283}{\htmlId{11564}{\htmlClass{Function}{\text{txvote}}}}\, \\ \,\href{Ledger.Conway.Specification.Transaction.html#3255}{\htmlId{11573}{\htmlClass{Function}{\text{txwdrls}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#11371}{\htmlId{11583}{\htmlClass{Bound}{\text{cc}}}}\, \end{pmatrix}$</a> <a id="11588" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">C.⊢</a> <a id="11592" href="Ledger.Conway.Conformance.Ledger.html#887" class="Function">certState</a> <a id="11602" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">⇀⦇</a> <a id="11605" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="11613" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">,CERTS⦈</a> <a id="11621" href="Ledger.Conway.Conformance.Equivalence.html#11060" class="Bound">s&#39;</a>
                     <a id="11645" class="Symbol">→</a> <a id="11647" href="Ledger.Conway.Specification.Utxo.html#3412" class="Datatype">L.ValidCertDeposits</a> <a id="11667" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="11675" href="Ledger.Conway.Specification.Utxo.html#1581" class="Function">deposits</a> <a id="11684" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a>
<a id="11692" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Function">getValidCertDepositsC</a> <a id="11714" href="Ledger.Conway.Conformance.Equivalence.html#11714" class="Bound">Γ</a> <a id="11716" href="Ledger.Conway.Conformance.Equivalence.html#11716" class="Bound">s</a> <a id="11718" href="Ledger.Conway.Conformance.Equivalence.html#11718" class="Bound">tx</a> <a id="11721" href="Ledger.Conway.Conformance.Equivalence.html#11721" class="Bound">wf</a> <a id="11724" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="11729" class="Symbol">(</a><a id="11730" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="11734" class="Symbol">(</a><a id="11735" href="Ledger.Conway.Conformance.Certs.html#7239" class="InductiveConstructor">C.CERT-base</a> <a id="11747" class="Symbol">_</a> <a id="11749" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11751" href="Ledger.Conway.Conformance.Equivalence.html#11751" class="Bound">step</a><a id="11755" class="Symbol">))</a> <a id="11758" class="Symbol">=</a>
  <a id="11762" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="11788" class="Symbol">(</a><a id="11789" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">C.UTxOState.deposits</a> <a id="11810" class="Symbol">(</a><a id="11811" href="Ledger.Conway.Conformance.Ledger.html#834" class="Field">C.LState.utxoSt</a> <a id="11827" href="Ledger.Conway.Conformance.Equivalence.html#11716" class="Bound">s</a><a id="11828" class="Symbol">))</a> <a id="11831" href="Ledger.Conway.Conformance.Equivalence.html#11721" class="Bound">wf</a> <a id="11834" href="Ledger.Conway.Conformance.Equivalence.html#11751" class="Bound">step</a>

<a id="lemUtxowDeposits"></a><a id="11840" href="Ledger.Conway.Conformance.Equivalence.html#11840" class="Function">lemUtxowDeposits</a> <a id="11857" class="Symbol">:</a> <a id="11859" class="Symbol">∀</a> <a id="11861" class="Symbol">{</a><a id="11862" href="Ledger.Conway.Conformance.Equivalence.html#11862" class="Bound">Γ</a> <a id="11864" href="Ledger.Conway.Conformance.Equivalence.html#11864" class="Bound">s</a> <a id="11866" href="Ledger.Conway.Conformance.Equivalence.html#11866" class="Bound">s&#39;</a> <a id="11869" href="Ledger.Conway.Conformance.Equivalence.html#11869" class="Bound">tx</a><a id="11871" class="Symbol">}</a>
                      <a id="11895" class="Symbol">(</a><a id="11896" class="Keyword">let</a> <a id="11900" class="Keyword">open</a> <a id="11905" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">C.UTxOEnv</a> <a id="11915" href="Ledger.Conway.Conformance.Equivalence.html#11862" class="Bound">Γ</a> <a id="11917" class="Keyword">using</a> <a id="11923" class="Symbol">(</a><a id="11924" href="Ledger.Conway.Specification.Utxo.html#1175" class="Field">pparams</a><a id="11931" class="Symbol">))</a>
                  <a id="11952" class="Symbol">→</a> <a id="11954" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a> <a id="11962" href="Ledger.Conway.Conformance.Equivalence.html#11869" class="Bound">tx</a> <a id="11965" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11967" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="11990" class="Symbol">→</a> <a id="11992" class="Symbol">(</a><a id="11993" href="Ledger.Conway.Conformance.Equivalence.html#11993" class="Bound">r</a> <a id="11995" class="Symbol">:</a> <a id="11997" href="Ledger.Conway.Conformance.Equivalence.html#11862" class="Bound">Γ</a> <a id="11999" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="12003" href="Ledger.Conway.Conformance.Equivalence.html#11864" class="Bound">s</a> <a id="12005" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="12008" href="Ledger.Conway.Conformance.Equivalence.html#11869" class="Bound">tx</a> <a id="12011" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="12019" href="Ledger.Conway.Conformance.Equivalence.html#11866" class="Bound">s&#39;</a><a id="12021" class="Symbol">)</a>
                  <a id="12041" class="Symbol">→</a> <a id="12043" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="12057" href="Ledger.Conway.Conformance.Equivalence.html#11993" class="Bound">r</a> <a id="12059" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12061" href="Ledger.Conway.Specification.Utxo.html#8062" class="Function">L.updateDeposits</a> <a id="12078" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="12086" class="Symbol">(</a><a id="12087" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">body</a> <a id="12092" href="Ledger.Conway.Conformance.Equivalence.html#11869" class="Bound">tx</a><a id="12094" class="Symbol">)</a> <a id="12096" class="Symbol">(</a><a id="12097" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">C.UTxOState.deposits</a> <a id="12118" href="Ledger.Conway.Conformance.Equivalence.html#11866" class="Bound">s&#39;</a><a id="12120" class="Symbol">)</a>
<a id="12122" href="Ledger.Conway.Conformance.Equivalence.html#11840" class="Function">lemUtxowDeposits</a> <a id="12139" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12144" class="Symbol">(</a><a id="12145" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
                        <a id="12182" class="Symbol">(</a><a id="12183" href="Ledger.Conway.Conformance.Utxo.html#3930" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="12201" class="Symbol">_</a> <a id="12203" class="Symbol">_</a> <a id="12205" class="Symbol">_</a> <a id="12207" class="Symbol">_</a> <a id="12209" class="Symbol">_</a> <a id="12211" class="Symbol">_</a> <a id="12213" class="Symbol">_</a> <a id="12215" class="Symbol">_</a> <a id="12217" class="Symbol">_</a> <a id="12219" class="Symbol">_</a> <a id="12221" class="Symbol">_</a> <a id="12223" class="Symbol">_</a> <a id="12225" class="Symbol">_</a> <a id="12227" class="Symbol">_</a> <a id="12229" class="Symbol">_</a> <a id="12231" class="Symbol">_</a> <a id="12233" class="Symbol">_</a> <a id="12235" class="Symbol">_</a> <a id="12237" class="Symbol">_</a> <a id="12239" class="Symbol">_</a>
                          <a id="12267" class="Symbol">(</a><a id="12268" href="Ledger.Conway.Conformance.Utxo.html#1231" class="InductiveConstructor">C.Scripts-Yes</a> <a id="12282" class="Symbol">_)))</a> <a id="12287" class="Symbol">=</a> <a id="12289" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="12295" class="Keyword">instance</a>

  <a id="LEDGERFromConf"></a><a id="12307" href="Ledger.Conway.Conformance.Equivalence.html#12307" class="Function">LEDGERFromConf</a> <a id="12322" class="Symbol">:</a> <a id="12324" class="Symbol">∀</a> <a id="12326" class="Symbol">{</a><a id="12327" href="Ledger.Conway.Conformance.Equivalence.html#12327" class="Bound">Γ</a> <a id="12329" href="Ledger.Conway.Conformance.Equivalence.html#12329" class="Bound">s</a> <a id="12331" href="Ledger.Conway.Conformance.Equivalence.html#12331" class="Bound">tx</a> <a id="12334" href="Ledger.Conway.Conformance.Equivalence.html#12334" class="Bound">s&#39;</a><a id="12336" class="Symbol">}</a> <a id="12338" class="Symbol">→</a> <a id="12340" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="12357" href="Ledger.Conway.Conformance.Equivalence.html#12329" class="Bound">s</a>
                                    <a id="12395" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="12397" href="Ledger.Conway.Conformance.Equivalence.html#12327" class="Bound">Γ</a> <a id="12399" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="12403" href="Ledger.Conway.Conformance.Equivalence.html#12329" class="Bound">s</a> <a id="12405" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="12408" href="Ledger.Conway.Conformance.Equivalence.html#12331" class="Bound">tx</a> <a id="12411" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="12420" href="Ledger.Conway.Conformance.Equivalence.html#12334" class="Bound">s&#39;</a>
                                    <a id="12459" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="12461" href="Ledger.Conway.Conformance.Equivalence.html#12327" class="Bound">Γ</a> <a id="12463" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">L.⊢</a> <a id="12467" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12472" href="Ledger.Conway.Conformance.Equivalence.html#12329" class="Bound">s</a> <a id="12474" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">⇀⦇</a> <a id="12477" href="Ledger.Conway.Conformance.Equivalence.html#12331" class="Bound">tx</a> <a id="12480" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">,LEDGER⦈</a> <a id="12489" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12494" href="Ledger.Conway.Conformance.Equivalence.html#12334" class="Bound">s&#39;</a>
  <a id="12499" href="Ledger.Conway.Conformance.Equivalence.html#12307" class="Function">LEDGERFromConf</a> <a id="12514" class="Symbol">.</a><a id="12515" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12521" class="Symbol">_</a> <a id="12523" class="Symbol">(</a><a id="12524" href="Ledger.Conway.Conformance.Ledger.html#2221" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="12536" href="Ledger.Conway.Conformance.Equivalence.html#12536" class="Bound">invalid</a> <a id="12544" href="Ledger.Conway.Conformance.Equivalence.html#12544" class="Bound">utxow</a><a id="12549" class="Symbol">)</a> <a id="12551" class="Keyword">with</a> <a id="12556" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="12561" href="Ledger.Conway.Conformance.Equivalence.html#12536" class="Bound">invalid</a> <a id="12569" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="12575" href="Ledger.Conway.Conformance.Equivalence.html#12544" class="Bound">utxow</a>
  <a id="12583" class="Symbol">...</a> <a id="12587" class="Symbol">|</a> <a id="12589" href="Ledger.Conway.Conformance.Equivalence.html#12589" class="Bound">utxow&#39;</a> <a id="12596" class="Keyword">rewrite</a> <a id="12604" href="Ledger.Conway.Conformance.Equivalence.html#2067" class="Function">lemInvalidDepositsC</a> <a id="12624" class="Bound">invalid</a> <a id="12632" class="Bound">utxow</a> <a id="12638" class="Symbol">=</a> <a id="12640" href="Ledger.Conway.Specification.Ledger.html#3805" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="12652" class="Bound">invalid</a> <a id="12660" href="Ledger.Conway.Conformance.Equivalence.html#12589" class="Bound">utxow&#39;</a>
  <a id="12669" href="Ledger.Conway.Conformance.Equivalence.html#12307" class="Function">LEDGERFromConf</a> <a id="12684" class="Symbol">{</a><a id="12685" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">Γ</a><a id="12686" class="Symbol">}</a> <a id="12688" class="Symbol">{</a><a id="12689" href="Ledger.Conway.Conformance.Equivalence.html#12689" class="Bound">s</a><a id="12690" class="Symbol">}</a> <a id="12692" class="Symbol">{</a><a id="12693" href="Ledger.Conway.Conformance.Equivalence.html#12693" class="Bound">tx</a><a id="12695" class="Symbol">}</a> <a id="12697" class="Symbol">{</a><a id="12698" href="Ledger.Conway.Conformance.Equivalence.html#12698" class="Bound">s&#39;</a><a id="12700" class="Symbol">}</a> <a id="12702" class="Symbol">.</a><a id="12703" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12709" href="Ledger.Conway.Conformance.Equivalence.html#12709" class="Bound">wf</a> <a id="12712" class="Symbol">(</a><a id="12713" href="Ledger.Conway.Conformance.Ledger.html#2168" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="12725" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12730" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">utxow</a> <a id="12736" href="Ledger.Conway.Conformance.Equivalence.html#12736" class="Bound">certs</a> <a id="12742" href="Ledger.Conway.Conformance.Equivalence.html#12742" class="Bound">gov</a><a id="12745" class="Symbol">)</a> <a id="12747" class="Symbol">=</a>
    <a id="12753" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="12759" class="Symbol">(λ</a> <a id="12762" href="Ledger.Conway.Conformance.Equivalence.html#12762" class="Bound">•</a> <a id="12764" class="Symbol">→</a> <a id="12766" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">Γ</a> <a id="12768" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">L.⊢</a> <a id="12772" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12777" href="Ledger.Conway.Conformance.Equivalence.html#12689" class="Bound">s</a> <a id="12779" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">⇀⦇</a> <a id="12782" href="Ledger.Conway.Conformance.Equivalence.html#12693" class="Bound">tx</a> <a id="12785" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.html#12762}{\htmlId{12796}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#12994}{\htmlId{12800}{\htmlClass{Function}{\text{govSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{12809}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#13015}{\htmlId{12814}{\htmlClass{Function}{\text{certSt&#39;}}}}\, \end{pmatrix}$</a><a id="12823" class="Symbol">)</a> <a id="12825" href="Ledger.Conway.Conformance.Equivalence.html#13364" class="Function">eqUtxo</a> <a id="12832" href="Ledger.Conway.Conformance.Equivalence.html#13508" class="Function">ledger&#39;</a>
    <a id="12844" class="Keyword">where</a>
      <a id="12856" class="Keyword">open</a> <a id="12861" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">C.LEnv</a> <a id="12868" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">Γ</a>

      <a id="12877" class="Keyword">open</a> <a id="12882" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="12891" href="Ledger.Conway.Conformance.Equivalence.html#12689" class="Bound">s</a> <a id="12893" class="Keyword">renaming</a> <a id="12902" class="Symbol">(</a><a id="12903" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="12913" class="Symbol">to</a> <a id="12916" class="Field">certSt</a><a id="12922" class="Symbol">)</a>
      <a id="12930" class="Keyword">open</a> <a id="12935" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="12944" href="Ledger.Conway.Conformance.Equivalence.html#12698" class="Bound">s&#39;</a> <a id="12947" class="Keyword">using</a> <a id="12953" class="Symbol">()</a> <a id="12956" class="Keyword">renaming</a> <a id="12965" class="Symbol">(</a><a id="12966" href="Ledger.Conway.Conformance.Ledger.html#834" class="Field">utxoSt</a> <a id="12973" class="Symbol">to</a> <a id="12976" class="Field">utxoSt&#39;</a><a id="12983" class="Symbol">;</a> <a id="12985" href="Ledger.Conway.Conformance.Ledger.html#861" class="Field">govSt</a> <a id="12991" class="Symbol">to</a> <a id="12994" class="Field">govSt&#39;</a><a id="13000" class="Symbol">;</a> <a id="13002" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="13012" class="Symbol">to</a> <a id="13015" class="Field">certSt&#39;</a><a id="13022" class="Symbol">)</a>

      <a id="13031" class="Keyword">open</a> <a id="13036" href="Ledger.Conway.Specification.Transaction.html#2987" class="Module">TxBody</a> <a id="13043" class="Symbol">(</a><a id="13044" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">body</a> <a id="13049" href="Ledger.Conway.Conformance.Equivalence.html#12693" class="Bound">tx</a><a id="13051" class="Symbol">)</a>
      <a id="13059" class="Keyword">open</a> <a id="13064" href="Ledger.Conway.Specification.Utxo.html#1473" class="Module">C.UTxOState</a> <a id="13076" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="13083" class="Keyword">using</a> <a id="13089" class="Symbol">(</a><a id="13090" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">deposits</a><a id="13098" class="Symbol">)</a>

      <a id="13107" href="Ledger.Conway.Conformance.Equivalence.html#13107" class="Function">valid-deps</a> <a id="13118" class="Symbol">:</a> <a id="13120" href="Ledger.Conway.Specification.Utxo.html#3412" class="Datatype">L.ValidCertDeposits</a> <a id="13140" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="13148" href="Ledger.Conway.Specification.Utxo.html#1581" class="Function">deposits</a> <a id="13157" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a>
      <a id="13171" href="Ledger.Conway.Conformance.Equivalence.html#13107" class="Function">valid-deps</a> <a id="13182" class="Symbol">=</a> <a id="13184" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Function">getValidCertDepositsC</a> <a id="13206" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">Γ</a> <a id="13208" href="Ledger.Conway.Conformance.Equivalence.html#12689" class="Bound">s</a> <a id="13210" href="Ledger.Conway.Conformance.Equivalence.html#12693" class="Bound">tx</a> <a id="13213" href="Ledger.Conway.Conformance.Equivalence.html#12709" class="Bound">wf</a> <a id="13216" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13221" href="Ledger.Conway.Conformance.Equivalence.html#12736" class="Bound">certs</a>

      <a id="13234" href="Ledger.Conway.Conformance.Equivalence.html#13234" class="Function">utxow&#39;</a> <a id="13241" class="Symbol">:</a> <a id="13243" class="Symbol">_</a> <a id="13245" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">L.⊢</a> <a id="13249" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="13256" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">⇀⦇</a> <a id="13259" href="Ledger.Conway.Conformance.Equivalence.html#12693" class="Bound">tx</a> <a id="13262" href="Ledger.Conway.Specification.Utxow.html#2763" class="Datatype Operator">,UTXOW⦈</a> <a id="13270" class="Symbol">(</a><a id="13271" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="13283" class="Symbol">(</a><a id="13284" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="13298" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">utxow</a><a id="13303" class="Symbol">)</a> <a id="13305" href="Ledger.Conway.Conformance.Equivalence.html#12976" class="Function">utxoSt&#39;</a><a id="13312" class="Symbol">)</a>
      <a id="13320" href="Ledger.Conway.Conformance.Equivalence.html#13234" class="Function">utxow&#39;</a> <a id="13327" class="Symbol">=</a> <a id="13329" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="13334" href="Ledger.Conway.Conformance.Equivalence.html#13107" class="Function">valid-deps</a> <a id="13345" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="13351" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">utxow</a>

      <a id="13364" href="Ledger.Conway.Conformance.Equivalence.html#13364" class="Function">eqUtxo</a> <a id="13371" class="Symbol">:</a> <a id="13373" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="13385" class="Symbol">(</a><a id="13386" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="13400" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">utxow</a><a id="13405" class="Symbol">)</a> <a id="13407" href="Ledger.Conway.Conformance.Equivalence.html#12976" class="Function">utxoSt&#39;</a> <a id="13415" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13417" href="Ledger.Conway.Conformance.Equivalence.html#12976" class="Function">utxoSt&#39;</a>
      <a id="13431" href="Ledger.Conway.Conformance.Equivalence.html#13364" class="Function">eqUtxo</a> <a id="13438" class="Symbol">=</a> <a id="13440" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="13445" class="Symbol">(λ</a> <a id="13448" href="Ledger.Conway.Conformance.Equivalence.html#13448" class="Bound">•</a> <a id="13450" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{13454}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{13458}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#13448}{\htmlId{13462}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{13466}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="13469" class="Symbol">)</a> <a id="13471" class="Symbol">(</a><a id="13472" href="Ledger.Conway.Conformance.Equivalence.html#11840" class="Function">lemUtxowDeposits</a> <a id="13489" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13494" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">utxow</a><a id="13499" class="Symbol">)</a>

      <a id="13508" href="Ledger.Conway.Conformance.Equivalence.html#13508" class="Function">ledger&#39;</a> <a id="13516" class="Symbol">:</a> <a id="13518" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">Γ</a> <a id="13520" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">L.⊢</a> <a id="13524" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13529" href="Ledger.Conway.Conformance.Equivalence.html#12689" class="Bound">s</a> <a id="13531" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">⇀⦇</a> <a id="13534" href="Ledger.Conway.Conformance.Equivalence.html#12693" class="Bound">tx</a> <a id="13537" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">,LEDGER⦈</a> <a id="13546" href="Ledger.Conway.Specification.Ledger.html#1013" class="InductiveConstructor Operator">L.⟦</a> <a id="13550" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="13562" class="Symbol">(</a><a id="13563" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="13577" href="Ledger.Conway.Conformance.Equivalence.html#12730" class="Bound">utxow</a><a id="13582" class="Symbol">)</a> <a id="13584" href="Ledger.Conway.Conformance.Equivalence.html#12976" class="Function">utxoSt&#39;</a>
                                              <a id="13638" href="Ledger.Conway.Specification.Ledger.html#1013" class="InductiveConstructor Operator">,</a> <a id="13640" href="Ledger.Conway.Conformance.Equivalence.html#12994" class="Function">govSt&#39;</a>
                                              <a id="13693" href="Ledger.Conway.Specification.Ledger.html#1013" class="InductiveConstructor Operator">,</a> <a id="13695" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13700" href="Ledger.Conway.Conformance.Equivalence.html#13015" class="Function">certSt&#39;</a> <a id="13708" href="Ledger.Conway.Specification.Ledger.html#1013" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="13717" href="Ledger.Conway.Conformance.Equivalence.html#13508" class="Function">ledger&#39;</a> <a id="13725" class="Symbol">=</a> <a id="13727" href="Ledger.Conway.Specification.Ledger.html#3752" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="13739" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13744" href="Ledger.Conway.Conformance.Equivalence.html#13234" class="Function">utxow&#39;</a> <a id="13751" class="Symbol">(</a><a id="13752" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13757" href="Ledger.Conway.Conformance.Equivalence.html#12736" class="Bound">certs</a><a id="13762" class="Symbol">)</a> <a id="13764" href="Ledger.Conway.Conformance.Equivalence.html#12742" class="Bound">gov</a>

<a id="13769" class="Keyword">open</a> <a id="13774" href="Relation.Binary.Structures.html#1550" class="Module">IsEquivalence</a> <a id="13788" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13082" class="Function">≡ᵈ-isEquivalence</a> <a id="13805" class="Keyword">renaming</a> <a id="13814" class="Symbol">(</a><a id="13815" href="Relation.Binary.Structures.html#1596" class="Field">refl</a> <a id="13820" class="Symbol">to</a> <a id="13823" class="Field">≡ᵈ-refl</a><a id="13830" class="Symbol">;</a> <a id="13832" href="Relation.Binary.Structures.html#1622" class="Field">sym</a> <a id="13836" class="Symbol">to</a> <a id="13839" class="Field">≡ᵈ-sym</a><a id="13845" class="Symbol">;</a> <a id="13847" href="Relation.Binary.Structures.html#1648" class="Field">trans</a> <a id="13853" class="Symbol">to</a> <a id="13856" class="Field">≡ᵈ-trans</a><a id="13864" class="Symbol">)</a>

<a id="lemCERTS&#39;DepositsC"></a><a id="13867" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="13886" class="Symbol">:</a> <a id="13888" class="Symbol">∀</a> <a id="13890" class="Symbol">{</a><a id="13891" href="Ledger.Conway.Conformance.Equivalence.html#13891" class="Bound">Γ</a> <a id="13893" href="Ledger.Conway.Conformance.Equivalence.html#13893" class="Bound">s</a> <a id="13895" href="Ledger.Conway.Conformance.Equivalence.html#13895" class="Bound">dcerts</a> <a id="13902" href="Ledger.Conway.Conformance.Equivalence.html#13902" class="Bound">s&#39;</a><a id="13904" class="Symbol">}</a> <a id="13906" class="Symbol">(</a><a id="13907" class="Keyword">open</a> <a id="13912" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">C.CertEnv</a> <a id="13922" href="Ledger.Conway.Conformance.Equivalence.html#13891" class="Bound">Γ</a> <a id="13924" class="Keyword">using</a> <a id="13930" class="Symbol">(</a><a id="13931" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="13933" class="Symbol">))</a>
                   <a id="13955" class="Symbol">→</a> <a id="13957" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="13984" class="Symbol">{</a><a id="13985" class="Argument">sts</a> <a id="13989" class="Symbol">=</a> <a id="13991" href="Ledger.Conway.Conformance.Certs.html#6517" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="14006" class="Symbol">}</a> <a id="14008" href="Ledger.Conway.Conformance.Equivalence.html#13891" class="Bound">Γ</a> <a id="14010" href="Ledger.Conway.Conformance.Equivalence.html#13893" class="Bound">s</a> <a id="14012" href="Ledger.Conway.Conformance.Equivalence.html#13895" class="Bound">dcerts</a> <a id="14019" href="Ledger.Conway.Conformance.Equivalence.html#13902" class="Bound">s&#39;</a>
                   <a id="14041" class="Symbol">→</a> <a id="14043" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="14057" href="Ledger.Conway.Conformance.Equivalence.html#13902" class="Bound">s&#39;</a> <a id="14060" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14062" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="14064" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="14076" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="14079" href="Ledger.Conway.Conformance.Equivalence.html#13895" class="Bound">dcerts</a> <a id="14086" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="14088" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="14100" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="14103" href="Ledger.Conway.Conformance.Equivalence.html#13895" class="Bound">dcerts</a> <a id="14110" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="14112" class="Symbol">(</a><a id="14113" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="14127" href="Ledger.Conway.Conformance.Equivalence.html#13893" class="Bound">s</a><a id="14128" class="Symbol">)</a>
<a id="14130" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14149" class="Symbol">(</a><a id="14150" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="14158" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="14164" class="Symbol">)</a>                                  <a id="14199" class="Symbol">=</a> <a id="14201" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="14206" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14225" class="Symbol">(</a><a id="14226" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14233" class="Symbol">(</a><a id="14234" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="14247" class="Symbol">(</a><a id="14248" href="Ledger.Conway.Conformance.Certs.html#4180" class="InductiveConstructor">C.DELEG-delegate</a>   <a id="14267" class="Symbol">_))</a> <a id="14271" href="Ledger.Conway.Conformance.Equivalence.html#14271" class="Bound">rs</a><a id="14273" class="Symbol">)</a> <a id="14275" class="Symbol">=</a> <a id="14277" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14296" href="Ledger.Conway.Conformance.Equivalence.html#14271" class="Bound">rs</a>
<a id="14299" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14318" class="Symbol">(</a><a id="14319" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14326" class="Symbol">(</a><a id="14327" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="14340" class="Symbol">(</a><a id="14341" href="Ledger.Conway.Conformance.Certs.html#4809" class="InductiveConstructor">C.DELEG-dereg</a>      <a id="14360" class="Symbol">_))</a> <a id="14364" href="Ledger.Conway.Conformance.Equivalence.html#14364" class="Bound">rs</a><a id="14366" class="Symbol">)</a> <a id="14368" class="Symbol">=</a> <a id="14370" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14389" href="Ledger.Conway.Conformance.Equivalence.html#14364" class="Bound">rs</a>
<a id="14392" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14411" class="Symbol">(</a><a id="14412" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14419" class="Symbol">(</a><a id="14420" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="14433" class="Symbol">(</a><a id="14434" href="Ledger.Conway.Conformance.Certs.html#5173" class="InductiveConstructor">C.DELEG-reg</a>        <a id="14453" class="Symbol">_))</a> <a id="14457" href="Ledger.Conway.Conformance.Equivalence.html#14457" class="Bound">rs</a><a id="14459" class="Symbol">)</a> <a id="14461" class="Symbol">=</a> <a id="14463" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14482" href="Ledger.Conway.Conformance.Equivalence.html#14457" class="Bound">rs</a>
<a id="14485" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14504" class="Symbol">(</a><a id="14505" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14512" class="Symbol">(</a><a id="14513" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a> <a id="14525" class="Symbol">(</a><a id="14526" href="Ledger.Conway.Conformance.Certs.html#3806" class="InductiveConstructor">C.POOL-regpool</a>      <a id="14546" class="Symbol">_))</a> <a id="14550" href="Ledger.Conway.Conformance.Equivalence.html#14550" class="Bound">rs</a><a id="14552" class="Symbol">)</a> <a id="14554" class="Symbol">=</a> <a id="14556" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14575" href="Ledger.Conway.Conformance.Equivalence.html#14550" class="Bound">rs</a>
<a id="14578" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14597" class="Symbol">(</a><a id="14598" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14605" class="Symbol">(</a><a id="14606" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a> <a id="14618" href="Ledger.Conway.Conformance.Certs.html#4005" class="InductiveConstructor">C.POOL-retirepool</a><a id="14635" class="Symbol">)</a>       <a id="14643" href="Ledger.Conway.Conformance.Equivalence.html#14643" class="Bound">rs</a><a id="14645" class="Symbol">)</a> <a id="14647" class="Symbol">=</a> <a id="14649" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14668" href="Ledger.Conway.Conformance.Equivalence.html#14643" class="Bound">rs</a>
<a id="14671" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14690" class="Symbol">(</a><a id="14691" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14698" class="Symbol">(</a><a id="14699" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="14711" class="Symbol">(</a><a id="14712" href="Ledger.Conway.Conformance.Certs.html#5565" class="InductiveConstructor">C.GOVCERT-regdrep</a>   <a id="14732" class="Symbol">_))</a> <a id="14736" href="Ledger.Conway.Conformance.Equivalence.html#14736" class="Bound">rs</a><a id="14738" class="Symbol">)</a> <a id="14740" class="Symbol">=</a> <a id="14742" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14761" href="Ledger.Conway.Conformance.Equivalence.html#14736" class="Bound">rs</a>
<a id="14764" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14783" class="Symbol">(</a><a id="14784" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14791" class="Symbol">(</a><a id="14792" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="14804" class="Symbol">(</a><a id="14805" href="Ledger.Conway.Conformance.Certs.html#5931" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="14825" class="Symbol">_))</a> <a id="14829" href="Ledger.Conway.Conformance.Equivalence.html#14829" class="Bound">rs</a><a id="14831" class="Symbol">)</a> <a id="14833" class="Symbol">=</a> <a id="14835" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14854" href="Ledger.Conway.Conformance.Equivalence.html#14829" class="Bound">rs</a>
<a id="14857" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14876" class="Symbol">(</a><a id="14877" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14884" class="Symbol">(</a><a id="14885" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="14897" class="Symbol">(</a><a id="14898" href="Ledger.Conway.Conformance.Certs.html#6226" class="InductiveConstructor">C.GOVCERT-ccreghot</a>  <a id="14918" class="Symbol">_))</a> <a id="14922" href="Ledger.Conway.Conformance.Equivalence.html#14922" class="Bound">rs</a><a id="14924" class="Symbol">)</a> <a id="14926" class="Symbol">=</a> <a id="14928" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="14947" href="Ledger.Conway.Conformance.Equivalence.html#14922" class="Bound">rs</a>

<a id="lemCERTSDepositsC"></a><a id="14951" href="Ledger.Conway.Conformance.Equivalence.html#14951" class="Function">lemCERTSDepositsC</a> <a id="14969" class="Symbol">:</a> <a id="14971" class="Symbol">∀</a> <a id="14973" class="Symbol">{</a><a id="14974" href="Ledger.Conway.Conformance.Equivalence.html#14974" class="Bound">Γ</a> <a id="14976" href="Ledger.Conway.Conformance.Equivalence.html#14976" class="Bound">s</a> <a id="14978" href="Ledger.Conway.Conformance.Equivalence.html#14978" class="Bound">txcerts</a> <a id="14986" href="Ledger.Conway.Conformance.Equivalence.html#14986" class="Bound">s&#39;</a><a id="14988" class="Symbol">}</a> <a id="14990" class="Symbol">(</a><a id="14991" class="Keyword">open</a> <a id="14996" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">C.CertEnv</a> <a id="15006" href="Ledger.Conway.Conformance.Equivalence.html#14974" class="Bound">Γ</a> <a id="15008" class="Keyword">using</a> <a id="15014" class="Symbol">(</a><a id="15015" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="15017" class="Symbol">))</a>
                  <a id="15038" class="Symbol">→</a> <a id="15040" href="Ledger.Conway.Conformance.Equivalence.html#14974" class="Bound">Γ</a> <a id="15042" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">C.⊢</a> <a id="15046" href="Ledger.Conway.Conformance.Equivalence.html#14976" class="Bound">s</a> <a id="15048" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">⇀⦇</a> <a id="15051" href="Ledger.Conway.Conformance.Equivalence.html#14978" class="Bound">txcerts</a> <a id="15059" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">,CERTS⦈</a> <a id="15067" href="Ledger.Conway.Conformance.Equivalence.html#14986" class="Bound">s&#39;</a>
                  <a id="15088" class="Symbol">→</a> <a id="15090" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15104" href="Ledger.Conway.Conformance.Equivalence.html#14986" class="Bound">s&#39;</a> <a id="15107" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15109" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="15111" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="15123" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="15126" href="Ledger.Conway.Conformance.Equivalence.html#14978" class="Bound">txcerts</a> <a id="15134" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="15136" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="15148" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="15151" href="Ledger.Conway.Conformance.Equivalence.html#14978" class="Bound">txcerts</a> <a id="15159" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="15161" class="Symbol">(</a><a id="15162" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15176" href="Ledger.Conway.Conformance.Equivalence.html#14976" class="Bound">s</a><a id="15177" class="Symbol">)</a>
<a id="15179" href="Ledger.Conway.Conformance.Equivalence.html#14951" class="Function">lemCERTSDepositsC</a> <a id="15197" class="Symbol">(</a><a id="15198" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="15202" class="Symbol">(</a><a id="15203" href="Ledger.Conway.Conformance.Certs.html#7239" class="InductiveConstructor">C.CERT-base</a> <a id="15215" class="Symbol">_</a> <a id="15217" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15219" href="Ledger.Conway.Conformance.Equivalence.html#15219" class="Bound">step</a><a id="15223" class="Symbol">))</a> <a id="15226" class="Symbol">=</a> <a id="15228" href="Ledger.Conway.Conformance.Equivalence.html#13867" class="Function">lemCERTS&#39;DepositsC</a> <a id="15247" href="Ledger.Conway.Conformance.Equivalence.html#15219" class="Bound">step</a>

<a id="lemWellformed"></a><a id="15253" href="Ledger.Conway.Conformance.Equivalence.html#15253" class="Function">lemWellformed</a> <a id="15267" class="Symbol">:</a> <a id="15269" class="Symbol">∀</a> <a id="15271" class="Symbol">{</a><a id="15272" href="Ledger.Conway.Conformance.Equivalence.html#15272" class="Bound">Γ</a> <a id="15274" href="Ledger.Conway.Conformance.Equivalence.html#15274" class="Bound">s</a> <a id="15276" href="Ledger.Conway.Conformance.Equivalence.html#15276" class="Bound">tx</a> <a id="15279" href="Ledger.Conway.Conformance.Equivalence.html#15279" class="Bound">s&#39;</a><a id="15281" class="Symbol">}</a> <a id="15283" class="Symbol">→</a> <a id="15285" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="15302" href="Ledger.Conway.Conformance.Equivalence.html#15274" class="Bound">s</a> <a id="15304" class="Symbol">→</a> <a id="15306" href="Ledger.Conway.Conformance.Equivalence.html#15272" class="Bound">Γ</a> <a id="15308" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="15312" href="Ledger.Conway.Conformance.Equivalence.html#15274" class="Bound">s</a> <a id="15314" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="15317" href="Ledger.Conway.Conformance.Equivalence.html#15276" class="Bound">tx</a> <a id="15320" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="15329" href="Ledger.Conway.Conformance.Equivalence.html#15279" class="Bound">s&#39;</a> <a id="15332" class="Symbol">→</a> <a id="15334" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="15351" href="Ledger.Conway.Conformance.Equivalence.html#15279" class="Bound">s&#39;</a>
<a id="15354" href="Ledger.Conway.Conformance.Equivalence.html#15253" class="Function">lemWellformed</a> <a id="15368" class="Symbol">{</a><a id="15369" href="Ledger.Conway.Conformance.Equivalence.html#15369" class="Bound">Γ</a><a id="15370" class="Symbol">}</a> <a id="15372" class="Symbol">{</a><a id="15373" class="Argument">s</a> <a id="15375" class="Symbol">=</a> <a id="15377" href="Ledger.Conway.Conformance.Equivalence.html#15377" class="Bound">ls</a><a id="15379" class="Symbol">}</a> <a id="15381" class="Symbol">{</a><a id="15382" href="Ledger.Conway.Conformance.Equivalence.html#15382" class="Bound">tx</a><a id="15384" class="Symbol">}</a> <a id="15386" class="Symbol">{</a><a id="15387" class="Argument">s&#39;</a> <a id="15390" class="Symbol">=</a> <a id="15392" href="Ledger.Conway.Conformance.Equivalence.html#15392" class="Bound">ls&#39;</a><a id="15395" class="Symbol">}</a> <a id="15397" href="Ledger.Conway.Conformance.Equivalence.html#15397" class="Bound">wf</a> <a id="15400" class="Symbol">(</a><a id="15401" href="Ledger.Conway.Conformance.Ledger.html#2168" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="15413" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="15418" href="Ledger.Conway.Conformance.Equivalence.html#15418" class="Bound">utxo</a> <a id="15423" href="Ledger.Conway.Conformance.Equivalence.html#15423" class="Bound">certs</a> <a id="15429" href="Ledger.Conway.Conformance.Equivalence.html#15429" class="Bound">gov</a><a id="15432" class="Symbol">)</a> <a id="15434" class="Symbol">=</a> <a id="15436" href="Ledger.Conway.Conformance.Equivalence.html#16705" class="Function">goal</a>
  <a id="15443" class="Keyword">where</a>
    <a id="15453" class="Keyword">open</a> <a id="15458" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="15467" href="Ledger.Conway.Conformance.Equivalence.html#15377" class="Bound">ls</a>  <a id="15471" class="Keyword">renaming</a> <a id="15480" class="Symbol">(</a><a id="15481" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="15491" class="Symbol">to</a> <a id="15494" class="Field">certSt</a><a id="15500" class="Symbol">)</a>
    <a id="15506" class="Keyword">open</a> <a id="15511" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="15520" href="Ledger.Conway.Conformance.Equivalence.html#15392" class="Bound">ls&#39;</a> <a id="15524" class="Keyword">renaming</a> <a id="15533" class="Symbol">(</a><a id="15534" href="Ledger.Conway.Conformance.Ledger.html#834" class="Field">utxoSt</a> <a id="15541" class="Symbol">to</a> <a id="15544" class="Field">utxoSt&#39;</a><a id="15551" class="Symbol">;</a> <a id="15553" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="15563" class="Symbol">to</a> <a id="15566" class="Field">certSt&#39;</a><a id="15573" class="Symbol">)</a>
    <a id="15579" class="Keyword">open</a> <a id="15584" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="15591" href="Ledger.Conway.Conformance.Equivalence.html#15369" class="Bound">Γ</a> <a id="15593" class="Keyword">using</a> <a id="15599" class="Symbol">(</a><a id="15600" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="15607" class="Symbol">)</a>
    <a id="15613" class="Keyword">open</a> <a id="15618" href="Ledger.Conway.Specification.Transaction.html#2987" class="Module">TxBody</a> <a id="15625" class="Symbol">(</a><a id="15626" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">body</a> <a id="15631" href="Ledger.Conway.Conformance.Equivalence.html#15382" class="Bound">tx</a><a id="15633" class="Symbol">)</a>

    <a id="15640" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a>  <a id="15650" class="Symbol">=</a> <a id="15652" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="15673" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a>
    <a id="15684" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a> <a id="15694" class="Symbol">=</a> <a id="15696" href="Ledger.Conway.Specification.Utxo.html#1581" class="Field">L.UTxOState.deposits</a> <a id="15717" href="Ledger.Conway.Conformance.Equivalence.html#15544" class="Function">utxoSt&#39;</a>

    <a id="15730" href="Ledger.Conway.Conformance.Equivalence.html#15730" class="Function">depositsL&#39;</a> <a id="15741" class="Symbol">=</a> <a id="15743" href="Ledger.Conway.Specification.Utxo.html#8062" class="Function">L.updateDeposits</a> <a id="15760" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="15768" class="Symbol">(</a><a id="15769" href="Ledger.Conway.Specification.Transaction.html#4532" class="Field">body</a> <a id="15774" href="Ledger.Conway.Conformance.Equivalence.html#15382" class="Bound">tx</a><a id="15776" class="Symbol">)</a> <a id="15778" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a>

    <a id="15792" href="Ledger.Conway.Conformance.Equivalence.html#15792" class="Function">ddeps</a> <a id="15798" class="Symbol">=</a> <a id="15800" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15814" href="Ledger.Conway.Conformance.Equivalence.html#15494" class="Function">certSt</a> <a id="15821" class="Symbol">.</a><a id="15822" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15832" href="Ledger.Conway.Conformance.Equivalence.html#15832" class="Function">gdeps</a> <a id="15838" class="Symbol">=</a> <a id="15840" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15854" href="Ledger.Conway.Conformance.Equivalence.html#15494" class="Function">certSt</a> <a id="15861" class="Symbol">.</a><a id="15862" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15873" href="Ledger.Conway.Conformance.Equivalence.html#15873" class="Function">ddeps&#39;</a> <a id="15880" class="Symbol">=</a> <a id="15882" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15896" href="Ledger.Conway.Conformance.Equivalence.html#15566" class="Function">certSt&#39;</a> <a id="15904" class="Symbol">.</a><a id="15905" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15915" href="Ledger.Conway.Conformance.Equivalence.html#15915" class="Function">gdeps&#39;</a> <a id="15922" class="Symbol">=</a> <a id="15924" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15938" href="Ledger.Conway.Conformance.Equivalence.html#15566" class="Function">certSt&#39;</a> <a id="15946" class="Symbol">.</a><a id="15947" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15958" href="Ledger.Conway.Conformance.Equivalence.html#15958" class="Function">lem</a> <a id="15962" class="Symbol">:</a> <a id="15964" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a> <a id="15974" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15976" href="Ledger.Conway.Conformance.Equivalence.html#15730" class="Function">depositsL&#39;</a>
    <a id="15991" href="Ledger.Conway.Conformance.Equivalence.html#15958" class="Function">lem</a> <a id="15995" class="Keyword">rewrite</a> <a id="16003" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="16016" href="Ledger.Conway.Conformance.Equivalence.html#15418" class="Bound">utxo</a> <a id="16021" class="Symbol">=</a> <a id="16023" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="16033" href="Ledger.Conway.Conformance.Equivalence.html#16033" class="Function">lem₁</a> <a id="16038" class="Symbol">:</a> <a id="16040" class="Symbol">(</a><a id="16041" href="Ledger.Conway.Conformance.Equivalence.html#15873" class="Function">ddeps&#39;</a> <a id="16048" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16050" href="Ledger.Conway.Conformance.Equivalence.html#15915" class="Function">gdeps&#39;</a><a id="16056" class="Symbol">)</a> <a id="16058" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="16060" class="Symbol">(</a><a id="16061" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16073" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16081" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16089" href="Ledger.Conway.Conformance.Equivalence.html#15792" class="Function">ddeps</a> <a id="16095" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16097" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16109" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16117" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16125" href="Ledger.Conway.Conformance.Equivalence.html#15832" class="Function">gdeps</a><a id="16130" class="Symbol">)</a>
    <a id="16136" href="Ledger.Conway.Conformance.Equivalence.html#16033" class="Function">lem₁</a> <a id="16141" class="Symbol">=</a> <a id="16143" href="Ledger.Conway.Conformance.Equivalence.html#14951" class="Function">lemCERTSDepositsC</a> <a id="16161" href="Ledger.Conway.Conformance.Equivalence.html#15423" class="Bound">certs</a>

    <a id="16172" href="Ledger.Conway.Conformance.Equivalence.html#16172" class="Function">lem₂</a> <a id="16177" class="Symbol">:</a>  <a id="16180" class="Symbol">(</a><a id="16181" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16193" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16201" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16209" class="Symbol">(</a><a id="16210" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3996" class="Function">certDDeps</a> <a id="16220" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a><a id="16228" class="Symbol">)</a> <a id="16230" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16232" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16244" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16252" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16260" class="Symbol">(</a><a id="16261" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4142" class="Function">certGDeps</a> <a id="16271" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a><a id="16279" class="Symbol">))</a>
         <a id="16291" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="16294" class="Symbol">(</a><a id="16295" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3996" class="Function">certDDeps</a> <a id="16305" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a> <a id="16315" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16317" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4142" class="Function">certGDeps</a> <a id="16327" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a><a id="16336" class="Symbol">)</a>
    <a id="16342" href="Ledger.Conway.Conformance.Equivalence.html#16172" class="Function">lem₂</a> <a id="16347" class="Keyword">rewrite</a> <a id="16355" href="Ledger.Conway.Conformance.Equivalence.html#15958" class="Function">lem</a> <a id="16359" class="Symbol">=</a> <a id="16361" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18993" class="Function">lem-upd-ddeps</a> <a id="16375" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16383" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a> <a id="16392" href="Ledger.Conway.Conformance.Equivalence.html#15382" class="Bound">tx</a> <a id="16395" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16397" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19766" class="Function">lem-upd-gdeps</a> <a id="16411" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16419" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a> <a id="16428" href="Ledger.Conway.Conformance.Equivalence.html#15382" class="Bound">tx</a>

    <a id="16436" href="Ledger.Conway.Conformance.Equivalence.html#16436" class="Function">lem₃</a> <a id="16441" class="Symbol">:</a>  <a id="16444" class="Symbol">(</a><a id="16445" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16457" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16465" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16473" href="Ledger.Conway.Conformance.Equivalence.html#15792" class="Function">ddeps</a> <a id="16479" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16481" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16493" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16501" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16509" href="Ledger.Conway.Conformance.Equivalence.html#15832" class="Function">gdeps</a><a id="16514" class="Symbol">)</a>
         <a id="16525" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="16528" class="Symbol">(</a><a id="16529" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16541" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16549" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16557" class="Symbol">(</a><a id="16558" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3996" class="Function">certDDeps</a> <a id="16568" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a><a id="16576" class="Symbol">)</a> <a id="16578" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16580" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16592" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16600" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16608" class="Symbol">(</a><a id="16609" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4142" class="Function">certGDeps</a> <a id="16619" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a><a id="16627" class="Symbol">))</a>
    <a id="16634" href="Ledger.Conway.Conformance.Equivalence.html#16436" class="Function">lem₃</a> <a id="16639" class="Symbol">=</a> <a id="16641" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="16643" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14232" class="Function">cong-updateDDeps</a> <a id="16660" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16668" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="16670" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#15218" class="Function">cong-updateGDeps</a> <a id="16687" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16695" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="16697" href="Ledger.Conway.Conformance.Equivalence.html#15397" class="Bound">wf</a>

    <a id="16705" href="Ledger.Conway.Conformance.Equivalence.html#16705" class="Function">goal</a> <a id="16710" class="Symbol">:</a> <a id="16712" class="Symbol">(</a><a id="16713" href="Ledger.Conway.Conformance.Equivalence.html#15873" class="Function">ddeps&#39;</a> <a id="16720" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16722" href="Ledger.Conway.Conformance.Equivalence.html#15915" class="Function">gdeps&#39;</a><a id="16728" class="Symbol">)</a> <a id="16730" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="16733" class="Symbol">(</a><a id="16734" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3996" class="Function">certDDeps</a> <a id="16744" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a> <a id="16754" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16756" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4142" class="Function">certGDeps</a> <a id="16766" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a><a id="16775" class="Symbol">)</a>
    <a id="16781" href="Ledger.Conway.Conformance.Equivalence.html#16705" class="Function">goal</a> <a id="16786" class="Keyword">with</a> <a id="16791" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> ← <a id="16798" href="Ledger.Conway.Conformance.Equivalence.html#16033" class="Function">lem₁</a> <a id="16803" class="Symbol">=</a> <a id="16805" href="Ledger.Conway.Conformance.Equivalence.html#13856" class="Function">≡ᵈ-trans</a> <a id="16814" class="Symbol">{</a><a id="16815" href="Ledger.Conway.Conformance.Equivalence.html#15873" class="Function">ddeps&#39;</a> <a id="16822" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16824" href="Ledger.Conway.Conformance.Equivalence.html#15915" class="Function">gdeps&#39;</a><a id="16830" class="Symbol">}</a>
                                     <a id="16869" class="Symbol">{</a><a id="16870" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16882" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16890" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16898" class="Symbol">(</a><a id="16899" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3996" class="Function">certDDeps</a> <a id="16909" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a><a id="16917" class="Symbol">)</a> <a id="16919" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16921" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16933" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16941" href="Ledger.Conway.Specification.Transaction.html#3221" class="Function">txcerts</a> <a id="16949" class="Symbol">(</a><a id="16950" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4142" class="Function">certGDeps</a> <a id="16960" href="Ledger.Conway.Conformance.Equivalence.html#15640" class="Function">deposits</a><a id="16968" class="Symbol">)}</a>
                                     <a id="17008" class="Symbol">{</a><a id="17009" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3996" class="Function">certDDeps</a> <a id="17019" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a> <a id="17029" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17031" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4142" class="Function">certGDeps</a> <a id="17041" href="Ledger.Conway.Conformance.Equivalence.html#15684" class="Function">deposits&#39;</a><a id="17050" class="Symbol">}</a>
                              <a id="17082" href="Ledger.Conway.Conformance.Equivalence.html#16436" class="Function">lem₃</a>
                              <a id="17117" href="Ledger.Conway.Conformance.Equivalence.html#16172" class="Function">lem₂</a>
<a id="17122" href="Ledger.Conway.Conformance.Equivalence.html#15253" class="Function">lemWellformed</a> <a id="17136" href="Ledger.Conway.Conformance.Equivalence.html#17136" class="Bound">wf</a> <a id="17139" class="Symbol">(</a><a id="17140" href="Ledger.Conway.Conformance.Ledger.html#2221" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="17152" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="17157" href="Ledger.Conway.Conformance.Equivalence.html#17157" class="Bound">utxo</a><a id="17161" class="Symbol">)</a> <a id="17163" class="Keyword">rewrite</a> <a id="17171" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="17184" href="Ledger.Conway.Conformance.Equivalence.html#17157" class="Bound">utxo</a> <a id="17189" class="Symbol">=</a> <a id="17191" href="Ledger.Conway.Conformance.Equivalence.html#17136" class="Bound">wf</a>

<a id="setCertDeposits"></a><a id="17195" href="Ledger.Conway.Conformance.Equivalence.html#17195" class="Function">setCertDeposits</a> <a id="17211" class="Symbol">:</a> <a id="17213" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="17224" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17226" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="17237" class="Symbol">→</a> <a id="17239" href="Ledger.Conway.Conformance.Certs.html#970" class="Record">C.CertState</a> <a id="17251" class="Symbol">→</a> <a id="17253" href="Ledger.Conway.Conformance.Certs.html#970" class="Record">C.CertState</a>
<a id="17265" href="Ledger.Conway.Conformance.Equivalence.html#17195" class="Function">setCertDeposits</a> <a id="17281" class="Symbol">(</a><a id="17282" href="Ledger.Conway.Conformance.Equivalence.html#17282" class="Bound">ddeps</a> <a id="17288" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17290" href="Ledger.Conway.Conformance.Equivalence.html#17290" class="Bound">gdeps</a><a id="17295" class="Symbol">)</a> <a id="17297" href="Ledger.Conway.Conformance.Equivalence.html#17297" class="Bound">cs</a> <a id="17300" class="Symbol">=</a>
  <a id="17304" class="Keyword">let</a> <a id="17308" class="Keyword">open</a> <a id="17313" href="Ledger.Conway.Conformance.Certs.html#970" class="Module">C.CertState</a> <a id="17325" href="Ledger.Conway.Conformance.Equivalence.html#17297" class="Bound">cs</a> <a id="17328" class="Keyword">in</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{17335}{\htmlClass{Keyword}{\text{record}}}\, \,\href{Ledger.Conway.Conformance.Certs.html#1029}{\htmlId{17342}{\htmlClass{Field}{\text{dState}}}}\, \,\htmlId{17349}{\htmlClass{Symbol}{\text{{}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#770}{\htmlId{17350}{\htmlClass{Field}{\text{deposits}}}}\, \,\htmlId{17359}{\htmlClass{Symbol}{\text{=}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#17282}{\htmlId{17361}{\htmlClass{Bound}{\text{ddeps}}}}\,\,\htmlId{17366}{\htmlClass{Symbol}{\text{}}}}\, \\ \,\href{Ledger.Conway.Conformance.Certs.html#1049}{\htmlId{17370}{\htmlClass{Field}{\text{pState}}}}\, \\ \,\htmlId{17379}{\htmlClass{Keyword}{\text{record}}}\, \,\href{Ledger.Conway.Conformance.Certs.html#1069}{\htmlId{17386}{\htmlClass{Field}{\text{gState}}}}\, \,\htmlId{17393}{\htmlClass{Symbol}{\text{{}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#940}{\htmlId{17394}{\htmlClass{Field}{\text{deposits}}}}\, \,\htmlId{17403}{\htmlClass{Symbol}{\text{=}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#17290}{\htmlId{17405}{\htmlClass{Bound}{\text{gdeps}}}}\,\,\htmlId{17410}{\htmlClass{Symbol}{\text{}}}}\, \end{pmatrix}$</a>

<a id="_⊢_⇀⦇_,CERTS&#39;⦈_"></a><a id="17415" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17431" class="Symbol">:</a> <a id="17433" href="Ledger.Conway.Specification.Certs.html#2818" class="Record">C.CertEnv</a> <a id="17443" class="Symbol">→</a> <a id="17445" href="Ledger.Conway.Conformance.Certs.html#970" class="Record">C.CertState</a> <a id="17457" class="Symbol">→</a> <a id="17459" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="17464" href="Ledger.Conway.Specification.Certs.html#1346" class="Datatype">L.DCert</a> <a id="17472" class="Symbol">→</a> <a id="17474" href="Ledger.Conway.Conformance.Certs.html#970" class="Record">C.CertState</a> <a id="17486" class="Symbol">→</a> <a id="17488" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="17493" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17509" class="Symbol">=</a> <a id="17511" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="17538" class="Symbol">{</a><a id="17539" class="Argument">sts</a> <a id="17543" class="Symbol">=</a> <a id="17545" href="Ledger.Conway.Conformance.Certs.html#6517" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="17560" class="Symbol">}</a>

<a id="updateCDep"></a><a id="17563" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="17574" class="Symbol">:</a> <a id="17576" href="Ledger.Conway.Specification.PParams.html#1909" class="Record">PParams</a> <a id="17584" class="Symbol">→</a> <a id="17586" href="Ledger.Conway.Specification.Certs.html#1346" class="Datatype">L.DCert</a> <a id="17594" class="Symbol">→</a> <a id="17596" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="17607" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17609" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="17620" class="Symbol">→</a> <a id="17622" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a> <a id="17633" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17635" href="Ledger.Conway.Specification.Certs.html#590" class="Function">L.Deposits</a>
<a id="17646" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="17657" href="Ledger.Conway.Conformance.Equivalence.html#17657" class="Bound">pp</a> <a id="17660" href="Ledger.Conway.Conformance.Equivalence.html#17660" class="Bound">cert</a> <a id="17665" class="Symbol">(</a><a id="17666" href="Ledger.Conway.Conformance.Equivalence.html#17666" class="Bound">ddep</a> <a id="17671" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17673" href="Ledger.Conway.Conformance.Equivalence.html#17673" class="Bound">gdep</a><a id="17677" class="Symbol">)</a> <a id="17679" class="Symbol">=</a> <a id="17681" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#1983" class="Function">updateDDep</a> <a id="17692" href="Ledger.Conway.Conformance.Equivalence.html#17657" class="Bound">pp</a> <a id="17695" href="Ledger.Conway.Conformance.Equivalence.html#17660" class="Bound">cert</a> <a id="17700" href="Ledger.Conway.Conformance.Equivalence.html#17666" class="Bound">ddep</a> <a id="17705" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17707" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2523" class="Function">updateGDep</a> <a id="17718" href="Ledger.Conway.Conformance.Equivalence.html#17657" class="Bound">pp</a> <a id="17721" href="Ledger.Conway.Conformance.Equivalence.html#17660" class="Bound">cert</a> <a id="17726" href="Ledger.Conway.Conformance.Equivalence.html#17673" class="Bound">gdep</a>

<a id="17732" class="Keyword">opaque</a>
  <a id="castCERTS&#39;"></a><a id="17741" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="17752" class="Symbol">:</a> <a id="17754" class="Symbol">∀</a> <a id="17756" class="Symbol">{</a><a id="17757" href="Ledger.Conway.Conformance.Equivalence.html#17757" class="Bound">Γ</a> <a id="17759" href="Ledger.Conway.Conformance.Equivalence.html#17759" class="Bound">certs</a><a id="17764" class="Symbol">}</a> <a id="17766" class="Symbol">{</a><a id="17767" href="Ledger.Conway.Conformance.Equivalence.html#17767" class="Bound">s</a> <a id="17769" href="Ledger.Conway.Conformance.Equivalence.html#17769" class="Bound">s&#39;</a> <a id="17772" class="Symbol">:</a> <a id="17774" href="Ledger.Conway.Specification.Certs.html#4359" class="Record">L.CertState</a><a id="17785" class="Symbol">}</a> <a id="17787" href="Ledger.Conway.Conformance.Equivalence.html#17787" class="Bound">deps₁</a> <a id="17793" href="Ledger.Conway.Conformance.Equivalence.html#17793" class="Bound">deps₂</a> <a id="17799" href="Ledger.Conway.Conformance.Equivalence.html#17799" class="Bound">deps₁&#39;</a>
             <a id="17819" class="Symbol">→</a> <a id="17821" href="Ledger.Conway.Conformance.Equivalence.html#17787" class="Bound">deps₁</a> <a id="17827" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="17830" href="Ledger.Conway.Conformance.Equivalence.html#17793" class="Bound">deps₂</a>
             <a id="17849" class="Symbol">→</a> <a id="17851" href="Ledger.Conway.Conformance.Equivalence.html#17757" class="Bound">Γ</a> <a id="17853" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">⊢</a> <a id="17855" href="Ledger.Conway.Conformance.Equivalence.html#17787" class="Bound">deps₁</a> <a id="17861" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17867" href="Ledger.Conway.Conformance.Equivalence.html#17767" class="Bound">s</a> <a id="17869" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">⇀⦇</a> <a id="17872" href="Ledger.Conway.Conformance.Equivalence.html#17759" class="Bound">certs</a> <a id="17878" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">,CERTS&#39;⦈</a> <a id="17887" class="Symbol">(</a><a id="17888" href="Ledger.Conway.Conformance.Equivalence.html#17799" class="Bound">deps₁&#39;</a> <a id="17895" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17901" href="Ledger.Conway.Conformance.Equivalence.html#17769" class="Bound">s&#39;</a><a id="17903" class="Symbol">)</a>
             <a id="17918" class="Symbol">→</a> <a id="17920" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="17923" href="Ledger.Conway.Conformance.Equivalence.html#17923" class="Bound">deps₂&#39;</a> <a id="17930" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="17932" href="Ledger.Conway.Conformance.Equivalence.html#17799" class="Bound">deps₁&#39;</a> <a id="17939" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="17942" href="Ledger.Conway.Conformance.Equivalence.html#17923" class="Bound">deps₂&#39;</a> <a id="17949" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17951" href="Ledger.Conway.Conformance.Equivalence.html#17757" class="Bound">Γ</a> <a id="17953" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">⊢</a> <a id="17955" href="Ledger.Conway.Conformance.Equivalence.html#17793" class="Bound">deps₂</a> <a id="17961" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17967" href="Ledger.Conway.Conformance.Equivalence.html#17767" class="Bound">s</a> <a id="17969" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">⇀⦇</a> <a id="17972" href="Ledger.Conway.Conformance.Equivalence.html#17759" class="Bound">certs</a> <a id="17978" href="Ledger.Conway.Conformance.Equivalence.html#17415" class="Function Operator">,CERTS&#39;⦈</a> <a id="17987" class="Symbol">(</a><a id="17988" href="Ledger.Conway.Conformance.Equivalence.html#17923" class="Bound">deps₂&#39;</a> <a id="17995" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="18001" href="Ledger.Conway.Conformance.Equivalence.html#17769" class="Bound">s&#39;</a><a id="18003" class="Symbol">)</a>
  <a id="18007" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="18018" href="Ledger.Conway.Conformance.Equivalence.html#18018" class="Bound">deps₁</a> <a id="18024" href="Ledger.Conway.Conformance.Equivalence.html#18024" class="Bound">deps₂</a> <a id="18030" href="Ledger.Conway.Conformance.Equivalence.html#18030" class="Bound">deps₁&#39;</a> <a id="18037" href="Ledger.Conway.Conformance.Equivalence.html#18037" class="Bound">eqd</a> <a id="18041" class="Symbol">(</a><a id="18042" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="18050" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="18056" class="Symbol">)</a> <a id="18058" class="Symbol">=</a> <a id="18060" href="Ledger.Conway.Conformance.Equivalence.html#18024" class="Bound">deps₂</a> <a id="18066" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18068" href="Ledger.Conway.Conformance.Equivalence.html#18037" class="Bound">eqd</a> <a id="18072" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18074" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="18082" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a>
  <a id="18091" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="18102" class="Symbol">{</a><a id="18103" href="Ledger.Conway.Conformance.Equivalence.html#18103" class="Bound">Γ</a><a id="18104" class="Symbol">}</a> <a id="18106" href="Ledger.Conway.Conformance.Equivalence.html#18106" class="Bound">deps₁</a> <a id="18112" href="Ledger.Conway.Conformance.Equivalence.html#18112" class="Bound">deps₂</a> <a id="18118" href="Ledger.Conway.Conformance.Equivalence.html#18118" class="Bound">deps₁&#39;</a> <a id="18125" href="Ledger.Conway.Conformance.Equivalence.html#18125" class="Bound">eqd</a> <a id="18129" class="Symbol">(</a><a id="18130" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18137" class="Symbol">(</a><a id="18138" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="18151" class="Symbol">{</a><a id="18152" class="Argument">dCert</a> <a id="18158" class="Symbol">=</a> <a id="18160" href="Ledger.Conway.Conformance.Equivalence.html#18160" class="Bound">cert</a><a id="18164" class="Symbol">}</a> <a id="18166" class="Symbol">(</a><a id="18167" href="Ledger.Conway.Conformance.Certs.html#4180" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18184" href="Ledger.Conway.Conformance.Equivalence.html#18184" class="Bound">h</a><a id="18185" class="Symbol">))</a>    <a id="18191" href="Ledger.Conway.Conformance.Equivalence.html#18191" class="Bound">rs</a><a id="18193" class="Symbol">)</a> <a id="18195" class="Symbol">=</a>
    <a id="18201" class="Keyword">let</a> <a id="18205" class="Keyword">open</a> <a id="18210" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">C.CertEnv</a> <a id="18220" href="Ledger.Conway.Conformance.Equivalence.html#18103" class="Bound">Γ</a> <a id="18222" class="Keyword">using</a> <a id="18228" class="Symbol">(</a><a id="18229" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="18231" class="Symbol">)</a>
        <a id="18241" href="Ledger.Conway.Conformance.Equivalence.html#18241" class="Bound">deps₂&#39;</a> <a id="18248" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18250" href="Ledger.Conway.Conformance.Equivalence.html#18250" class="Bound">eqd&#39;</a> <a id="18255" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18257" href="Ledger.Conway.Conformance.Equivalence.html#18257" class="Bound">rs&#39;</a> <a id="18261" class="Symbol">=</a> <a id="18263" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="18274" class="Symbol">(</a><a id="18275" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="18286" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="18289" href="Ledger.Conway.Conformance.Equivalence.html#18160" class="Bound">cert</a> <a id="18294" href="Ledger.Conway.Conformance.Equivalence.html#18106" class="Bound">deps₁</a><a id="18299" class="Symbol">)</a> <a id="18301" class="Symbol">(</a><a id="18302" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="18313" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="18316" href="Ledger.Conway.Conformance.Equivalence.html#18160" class="Bound">cert</a> <a id="18321" href="Ledger.Conway.Conformance.Equivalence.html#18112" class="Bound">deps₂</a><a id="18326" class="Symbol">)</a> <a id="18328" href="Ledger.Conway.Conformance.Equivalence.html#18118" class="Bound">deps₁&#39;</a>
                                         <a id="18376" class="Symbol">(</a><a id="18377" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="18379" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13484" class="Function">cong-updateDDep</a> <a id="18395" class="Symbol">{</a><a id="18396" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="18398" class="Symbol">}</a> <a id="18400" href="Ledger.Conway.Conformance.Equivalence.html#18160" class="Bound">cert</a> <a id="18405" class="Symbol">{</a><a id="18406" href="Ledger.Conway.Conformance.Equivalence.html#18106" class="Bound">deps₁</a> <a id="18412" class="Symbol">.</a><a id="18413" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18418" class="Symbol">}</a> <a id="18420" class="Symbol">{</a><a id="18421" href="Ledger.Conway.Conformance.Equivalence.html#18112" class="Bound">deps₂</a> <a id="18427" class="Symbol">.</a><a id="18428" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18433" class="Symbol">}</a>
                                          <a id="18477" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="18479" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14515" class="Function">cong-updateGDep</a> <a id="18495" class="Symbol">{</a><a id="18496" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="18498" class="Symbol">}</a> <a id="18500" href="Ledger.Conway.Conformance.Equivalence.html#18160" class="Bound">cert</a> <a id="18505" class="Symbol">{</a><a id="18506" href="Ledger.Conway.Conformance.Equivalence.html#18106" class="Bound">deps₁</a> <a id="18512" class="Symbol">.</a><a id="18513" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18518" class="Symbol">}</a> <a id="18520" class="Symbol">{</a><a id="18521" href="Ledger.Conway.Conformance.Equivalence.html#18112" class="Bound">deps₂</a> <a id="18527" class="Symbol">.</a><a id="18528" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18533" class="Symbol">}</a> <a id="18535" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="18537" href="Ledger.Conway.Conformance.Equivalence.html#18125" class="Bound">eqd</a><a id="18540" class="Symbol">)</a> <a id="18542" href="Ledger.Conway.Conformance.Equivalence.html#18191" class="Bound">rs</a>
    <a id="18549" class="Keyword">in</a>  <a id="18553" href="Ledger.Conway.Conformance.Equivalence.html#18241" class="Bound">deps₂&#39;</a> <a id="18560" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18562" href="Ledger.Conway.Conformance.Equivalence.html#18250" class="Bound">eqd&#39;</a> <a id="18567" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18569" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18576" class="Symbol">(</a><a id="18577" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="18590" class="Symbol">(</a><a id="18591" href="Ledger.Conway.Conformance.Certs.html#4180" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18608" href="Ledger.Conway.Conformance.Equivalence.html#18184" class="Bound">h</a><a id="18609" class="Symbol">))</a> <a id="18612" href="Ledger.Conway.Conformance.Equivalence.html#18257" class="Bound">rs&#39;</a>
  <a id="18618" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="18629" class="Symbol">{</a><a id="18630" href="Ledger.Conway.Conformance.Equivalence.html#18630" class="Bound">Γ</a><a id="18631" class="Symbol">}</a> <a id="18633" href="Ledger.Conway.Conformance.Equivalence.html#18633" class="Bound">deps₁</a> <a id="18639" href="Ledger.Conway.Conformance.Equivalence.html#18639" class="Bound">deps₂</a> <a id="18645" href="Ledger.Conway.Conformance.Equivalence.html#18645" class="Bound">deps₁&#39;</a> <a id="18652" href="Ledger.Conway.Conformance.Equivalence.html#18652" class="Bound">eqd</a> <a id="18656" class="Symbol">(</a><a id="18657" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18664" class="Symbol">(</a><a id="18665" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="18678" class="Symbol">{</a><a id="18679" class="Argument">dCert</a> <a id="18685" class="Symbol">=</a> <a id="18687" href="Ledger.Conway.Conformance.Equivalence.html#18687" class="Bound">cert</a><a id="18691" class="Symbol">}</a> <a id="18693" class="Symbol">(</a><a id="18694" href="Ledger.Conway.Conformance.Certs.html#4809" class="InductiveConstructor">C.DELEG-dereg</a> <a id="18708" class="Symbol">(</a><a id="18709" href="Ledger.Conway.Conformance.Equivalence.html#18709" class="Bound">a</a> <a id="18711" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18713" href="Ledger.Conway.Conformance.Equivalence.html#18713" class="Bound">b</a> <a id="18715" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18717" href="Ledger.Conway.Conformance.Equivalence.html#18717" class="Bound">c</a><a id="18718" class="Symbol">)))</a> <a id="18722" href="Ledger.Conway.Conformance.Equivalence.html#18722" class="Bound">rs</a><a id="18724" class="Symbol">)</a> <a id="18726" class="Symbol">=</a>
    <a id="18732" class="Keyword">let</a> <a id="18736" class="Keyword">open</a> <a id="18741" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">C.CertEnv</a> <a id="18751" href="Ledger.Conway.Conformance.Equivalence.html#18630" class="Bound">Γ</a> <a id="18753" class="Keyword">using</a> <a id="18759" class="Symbol">(</a><a id="18760" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="18762" class="Symbol">)</a>
        <a id="18772" href="Ledger.Conway.Conformance.Equivalence.html#18772" class="Bound">deps₂&#39;</a> <a id="18779" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18781" href="Ledger.Conway.Conformance.Equivalence.html#18781" class="Bound">eqd&#39;</a> <a id="18786" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18788" href="Ledger.Conway.Conformance.Equivalence.html#18788" class="Bound">rs&#39;</a> <a id="18792" class="Symbol">=</a> <a id="18794" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="18805" class="Symbol">(</a><a id="18806" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="18817" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="18820" href="Ledger.Conway.Conformance.Equivalence.html#18687" class="Bound">cert</a> <a id="18825" href="Ledger.Conway.Conformance.Equivalence.html#18633" class="Bound">deps₁</a><a id="18830" class="Symbol">)</a> <a id="18832" class="Symbol">(</a><a id="18833" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="18844" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="18847" href="Ledger.Conway.Conformance.Equivalence.html#18687" class="Bound">cert</a> <a id="18852" href="Ledger.Conway.Conformance.Equivalence.html#18639" class="Bound">deps₂</a><a id="18857" class="Symbol">)</a> <a id="18859" href="Ledger.Conway.Conformance.Equivalence.html#18645" class="Bound">deps₁&#39;</a>
                                         <a id="18907" class="Symbol">(</a><a id="18908" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="18910" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13484" class="Function">cong-updateDDep</a> <a id="18926" class="Symbol">{</a><a id="18927" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="18929" class="Symbol">}</a> <a id="18931" href="Ledger.Conway.Conformance.Equivalence.html#18687" class="Bound">cert</a> <a id="18936" class="Symbol">{</a><a id="18937" href="Ledger.Conway.Conformance.Equivalence.html#18633" class="Bound">deps₁</a> <a id="18943" class="Symbol">.</a><a id="18944" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18949" class="Symbol">}</a> <a id="18951" class="Symbol">{</a><a id="18952" href="Ledger.Conway.Conformance.Equivalence.html#18639" class="Bound">deps₂</a> <a id="18958" class="Symbol">.</a><a id="18959" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18964" class="Symbol">}</a>
                                          <a id="19008" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="19010" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14515" class="Function">cong-updateGDep</a> <a id="19026" class="Symbol">{</a><a id="19027" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="19029" class="Symbol">}</a> <a id="19031" href="Ledger.Conway.Conformance.Equivalence.html#18687" class="Bound">cert</a> <a id="19036" class="Symbol">{</a><a id="19037" href="Ledger.Conway.Conformance.Equivalence.html#18633" class="Bound">deps₁</a> <a id="19043" class="Symbol">.</a><a id="19044" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19049" class="Symbol">}</a> <a id="19051" class="Symbol">{</a><a id="19052" href="Ledger.Conway.Conformance.Equivalence.html#18639" class="Bound">deps₂</a> <a id="19058" class="Symbol">.</a><a id="19059" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19064" class="Symbol">}</a> <a id="19066" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="19068" href="Ledger.Conway.Conformance.Equivalence.html#18652" class="Bound">eqd</a><a id="19071" class="Symbol">)</a> <a id="19073" href="Ledger.Conway.Conformance.Equivalence.html#18722" class="Bound">rs</a>
    <a id="19080" class="Keyword">in</a>  <a id="19084" href="Ledger.Conway.Conformance.Equivalence.html#18772" class="Bound">deps₂&#39;</a> <a id="19091" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19093" href="Ledger.Conway.Conformance.Equivalence.html#18781" class="Bound">eqd&#39;</a> <a id="19098" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19100" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19107" class="Symbol">(</a><a id="19108" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="19121" class="Symbol">(</a><a id="19122" href="Ledger.Conway.Conformance.Certs.html#4809" class="InductiveConstructor">C.DELEG-dereg</a> <a id="19136" class="Symbol">(</a><a id="19137" href="Ledger.Conway.Conformance.Equivalence.html#18709" class="Bound">a</a> <a id="19139" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19141" href="Ledger.Conway.Conformance.Equivalence.html#18652" class="Bound">eqd</a> <a id="19145" class="Symbol">.</a><a id="19146" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19152" class="Symbol">.</a><a id="19153" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19159" href="Ledger.Conway.Conformance.Equivalence.html#18713" class="Bound">b</a> <a id="19161" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19163" href="Ledger.Conway.Conformance.Equivalence.html#18717" class="Bound">c</a><a id="19164" class="Symbol">)))</a> <a id="19168" href="Ledger.Conway.Conformance.Equivalence.html#18788" class="Bound">rs&#39;</a>
                                                              <a id="19234" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="19271" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="19282" class="Symbol">{</a><a id="19283" href="Ledger.Conway.Conformance.Equivalence.html#19283" class="Bound">Γ</a><a id="19284" class="Symbol">}</a> <a id="19286" href="Ledger.Conway.Conformance.Equivalence.html#19286" class="Bound">deps₁</a> <a id="19292" href="Ledger.Conway.Conformance.Equivalence.html#19292" class="Bound">deps₂</a> <a id="19298" href="Ledger.Conway.Conformance.Equivalence.html#19298" class="Bound">deps₁&#39;</a> <a id="19305" href="Ledger.Conway.Conformance.Equivalence.html#19305" class="Bound">eqd</a> <a id="19309" class="Symbol">(</a><a id="19310" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19317" class="Symbol">(</a><a id="19318" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="19331" class="Symbol">{</a><a id="19332" class="Argument">dCert</a> <a id="19338" class="Symbol">=</a> <a id="19340" href="Ledger.Conway.Conformance.Equivalence.html#19340" class="Bound">cert</a><a id="19344" class="Symbol">}</a> <a id="19346" class="Symbol">(</a><a id="19347" href="Ledger.Conway.Conformance.Certs.html#5173" class="InductiveConstructor">C.DELEG-reg</a> <a id="19359" href="Ledger.Conway.Conformance.Equivalence.html#19359" class="Bound">h</a><a id="19360" class="Symbol">))</a>         <a id="19371" href="Ledger.Conway.Conformance.Equivalence.html#19371" class="Bound">rs</a><a id="19373" class="Symbol">)</a> <a id="19375" class="Symbol">=</a>
    <a id="19381" class="Keyword">let</a> <a id="19385" class="Keyword">open</a> <a id="19390" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">C.CertEnv</a> <a id="19400" href="Ledger.Conway.Conformance.Equivalence.html#19283" class="Bound">Γ</a> <a id="19402" class="Keyword">using</a> <a id="19408" class="Symbol">(</a><a id="19409" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="19411" class="Symbol">)</a>
        <a id="19421" href="Ledger.Conway.Conformance.Equivalence.html#19421" class="Bound">deps₂&#39;</a> <a id="19428" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19430" href="Ledger.Conway.Conformance.Equivalence.html#19430" class="Bound">eqd&#39;</a> <a id="19435" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19437" href="Ledger.Conway.Conformance.Equivalence.html#19437" class="Bound">rs&#39;</a> <a id="19441" class="Symbol">=</a> <a id="19443" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="19454" class="Symbol">(</a><a id="19455" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="19466" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="19469" href="Ledger.Conway.Conformance.Equivalence.html#19340" class="Bound">cert</a> <a id="19474" href="Ledger.Conway.Conformance.Equivalence.html#19286" class="Bound">deps₁</a><a id="19479" class="Symbol">)</a> <a id="19481" class="Symbol">(</a><a id="19482" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="19493" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="19496" href="Ledger.Conway.Conformance.Equivalence.html#19340" class="Bound">cert</a> <a id="19501" href="Ledger.Conway.Conformance.Equivalence.html#19292" class="Bound">deps₂</a><a id="19506" class="Symbol">)</a> <a id="19508" href="Ledger.Conway.Conformance.Equivalence.html#19298" class="Bound">deps₁&#39;</a>
                                         <a id="19556" class="Symbol">(</a><a id="19557" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="19559" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13484" class="Function">cong-updateDDep</a> <a id="19575" class="Symbol">{</a><a id="19576" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="19578" class="Symbol">}</a> <a id="19580" href="Ledger.Conway.Conformance.Equivalence.html#19340" class="Bound">cert</a> <a id="19585" class="Symbol">{</a><a id="19586" href="Ledger.Conway.Conformance.Equivalence.html#19286" class="Bound">deps₁</a> <a id="19592" class="Symbol">.</a><a id="19593" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19598" class="Symbol">}</a> <a id="19600" class="Symbol">{</a><a id="19601" href="Ledger.Conway.Conformance.Equivalence.html#19292" class="Bound">deps₂</a> <a id="19607" class="Symbol">.</a><a id="19608" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19613" class="Symbol">}</a>
                                          <a id="19657" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="19659" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14515" class="Function">cong-updateGDep</a> <a id="19675" class="Symbol">{</a><a id="19676" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="19678" class="Symbol">}</a> <a id="19680" href="Ledger.Conway.Conformance.Equivalence.html#19340" class="Bound">cert</a> <a id="19685" class="Symbol">{</a><a id="19686" href="Ledger.Conway.Conformance.Equivalence.html#19286" class="Bound">deps₁</a> <a id="19692" class="Symbol">.</a><a id="19693" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19698" class="Symbol">}</a> <a id="19700" class="Symbol">{</a><a id="19701" href="Ledger.Conway.Conformance.Equivalence.html#19292" class="Bound">deps₂</a> <a id="19707" class="Symbol">.</a><a id="19708" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19713" class="Symbol">}</a> <a id="19715" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="19717" href="Ledger.Conway.Conformance.Equivalence.html#19305" class="Bound">eqd</a><a id="19720" class="Symbol">)</a> <a id="19722" href="Ledger.Conway.Conformance.Equivalence.html#19371" class="Bound">rs</a>
    <a id="19729" class="Keyword">in</a>  <a id="19733" href="Ledger.Conway.Conformance.Equivalence.html#19421" class="Bound">deps₂&#39;</a> <a id="19740" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19742" href="Ledger.Conway.Conformance.Equivalence.html#19430" class="Bound">eqd&#39;</a> <a id="19747" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19749" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19756" class="Symbol">(</a><a id="19757" href="Ledger.Conway.Conformance.Certs.html#6588" class="InductiveConstructor">C.CERT-deleg</a> <a id="19770" class="Symbol">(</a><a id="19771" href="Ledger.Conway.Conformance.Certs.html#5173" class="InductiveConstructor">C.DELEG-reg</a> <a id="19783" href="Ledger.Conway.Conformance.Equivalence.html#19359" class="Bound">h</a><a id="19784" class="Symbol">))</a> <a id="19787" href="Ledger.Conway.Conformance.Equivalence.html#19437" class="Bound">rs&#39;</a>
  <a id="19793" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="19804" class="Symbol">{</a><a id="19805" href="Ledger.Conway.Conformance.Equivalence.html#19805" class="Bound">Γ</a><a id="19806" class="Symbol">}</a> <a id="19808" href="Ledger.Conway.Conformance.Equivalence.html#19808" class="Bound">deps₁</a> <a id="19814" href="Ledger.Conway.Conformance.Equivalence.html#19814" class="Bound">deps₂</a> <a id="19820" href="Ledger.Conway.Conformance.Equivalence.html#19820" class="Bound">deps₁&#39;</a> <a id="19827" href="Ledger.Conway.Conformance.Equivalence.html#19827" class="Bound">eqd</a> <a id="19831" class="Symbol">(</a><a id="19832" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19839" class="Symbol">(</a><a id="19840" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a>  <a id="19853" class="Symbol">{</a><a id="19854" class="Argument">dCert</a> <a id="19860" class="Symbol">=</a> <a id="19862" href="Ledger.Conway.Conformance.Equivalence.html#19862" class="Bound">cert</a><a id="19866" class="Symbol">}</a> <a id="19868" class="Symbol">(</a><a id="19869" href="Ledger.Conway.Conformance.Certs.html#3806" class="InductiveConstructor">C.POOL-regpool</a> <a id="19884" href="Ledger.Conway.Conformance.Equivalence.html#19884" class="Bound">h</a><a id="19885" class="Symbol">))</a>      <a id="19893" href="Ledger.Conway.Conformance.Equivalence.html#19893" class="Bound">rs</a><a id="19895" class="Symbol">)</a> <a id="19897" class="Symbol">=</a>
    <a id="19903" class="Keyword">let</a> <a id="19907" href="Ledger.Conway.Conformance.Equivalence.html#19907" class="Bound">deps₂&#39;</a> <a id="19914" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19916" href="Ledger.Conway.Conformance.Equivalence.html#19916" class="Bound">eqd&#39;</a> <a id="19921" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19923" href="Ledger.Conway.Conformance.Equivalence.html#19923" class="Bound">rs&#39;</a> <a id="19927" class="Symbol">=</a> <a id="19929" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="19940" href="Ledger.Conway.Conformance.Equivalence.html#19808" class="Bound">deps₁</a> <a id="19946" href="Ledger.Conway.Conformance.Equivalence.html#19814" class="Bound">deps₂</a> <a id="19952" href="Ledger.Conway.Conformance.Equivalence.html#19820" class="Bound">deps₁&#39;</a> <a id="19959" href="Ledger.Conway.Conformance.Equivalence.html#19827" class="Bound">eqd</a> <a id="19963" href="Ledger.Conway.Conformance.Equivalence.html#19893" class="Bound">rs</a>
    <a id="19970" class="Keyword">in</a>  <a id="19974" href="Ledger.Conway.Conformance.Equivalence.html#19907" class="Bound">deps₂&#39;</a> <a id="19981" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19983" href="Ledger.Conway.Conformance.Equivalence.html#19916" class="Bound">eqd&#39;</a> <a id="19988" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19990" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19997" class="Symbol">(</a><a id="19998" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a> <a id="20010" class="Symbol">(</a><a id="20011" href="Ledger.Conway.Conformance.Certs.html#3806" class="InductiveConstructor">C.POOL-regpool</a> <a id="20026" href="Ledger.Conway.Conformance.Equivalence.html#19884" class="Bound">h</a><a id="20027" class="Symbol">))</a> <a id="20030" href="Ledger.Conway.Conformance.Equivalence.html#19923" class="Bound">rs&#39;</a>
  <a id="20036" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="20047" class="Symbol">{</a><a id="20048" href="Ledger.Conway.Conformance.Equivalence.html#20048" class="Bound">Γ</a><a id="20049" class="Symbol">}</a> <a id="20051" href="Ledger.Conway.Conformance.Equivalence.html#20051" class="Bound">deps₁</a> <a id="20057" href="Ledger.Conway.Conformance.Equivalence.html#20057" class="Bound">deps₂</a> <a id="20063" href="Ledger.Conway.Conformance.Equivalence.html#20063" class="Bound">deps₁&#39;</a> <a id="20070" href="Ledger.Conway.Conformance.Equivalence.html#20070" class="Bound">eqd</a> <a id="20074" class="Symbol">(</a><a id="20075" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20082" class="Symbol">(</a><a id="20083" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a>  <a id="20096" class="Symbol">{</a><a id="20097" class="Argument">dCert</a> <a id="20103" class="Symbol">=</a> <a id="20105" href="Ledger.Conway.Conformance.Equivalence.html#20105" class="Bound">cert</a><a id="20109" class="Symbol">}</a> <a id="20111" href="Ledger.Conway.Conformance.Certs.html#4005" class="InductiveConstructor">C.POOL-retirepool</a><a id="20128" class="Symbol">)</a>       <a id="20136" href="Ledger.Conway.Conformance.Equivalence.html#20136" class="Bound">rs</a><a id="20138" class="Symbol">)</a> <a id="20140" class="Symbol">=</a>
    <a id="20146" class="Keyword">let</a> <a id="20150" href="Ledger.Conway.Conformance.Equivalence.html#20150" class="Bound">deps₂&#39;</a> <a id="20157" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20159" href="Ledger.Conway.Conformance.Equivalence.html#20159" class="Bound">eqd&#39;</a> <a id="20164" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20166" href="Ledger.Conway.Conformance.Equivalence.html#20166" class="Bound">rs&#39;</a> <a id="20170" class="Symbol">=</a> <a id="20172" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="20183" href="Ledger.Conway.Conformance.Equivalence.html#20051" class="Bound">deps₁</a> <a id="20189" href="Ledger.Conway.Conformance.Equivalence.html#20057" class="Bound">deps₂</a> <a id="20195" href="Ledger.Conway.Conformance.Equivalence.html#20063" class="Bound">deps₁&#39;</a> <a id="20202" href="Ledger.Conway.Conformance.Equivalence.html#20070" class="Bound">eqd</a> <a id="20206" href="Ledger.Conway.Conformance.Equivalence.html#20136" class="Bound">rs</a>
    <a id="20213" class="Keyword">in</a>  <a id="20217" href="Ledger.Conway.Conformance.Equivalence.html#20150" class="Bound">deps₂&#39;</a> <a id="20224" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20226" href="Ledger.Conway.Conformance.Equivalence.html#20159" class="Bound">eqd&#39;</a> <a id="20231" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20233" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20240" class="Symbol">(</a><a id="20241" href="Ledger.Conway.Conformance.Certs.html#6822" class="InductiveConstructor">C.CERT-pool</a> <a id="20253" href="Ledger.Conway.Conformance.Certs.html#4005" class="InductiveConstructor">C.POOL-retirepool</a><a id="20270" class="Symbol">)</a> <a id="20272" href="Ledger.Conway.Conformance.Equivalence.html#20166" class="Bound">rs&#39;</a>
  <a id="20278" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="20289" class="Symbol">{</a><a id="20290" href="Ledger.Conway.Conformance.Equivalence.html#20290" class="Bound">Γ</a><a id="20291" class="Symbol">}</a> <a id="20293" href="Ledger.Conway.Conformance.Equivalence.html#20293" class="Bound">deps₁</a> <a id="20299" href="Ledger.Conway.Conformance.Equivalence.html#20299" class="Bound">deps₂</a> <a id="20305" href="Ledger.Conway.Conformance.Equivalence.html#20305" class="Bound">deps₁&#39;</a> <a id="20312" href="Ledger.Conway.Conformance.Equivalence.html#20312" class="Bound">eqd</a> <a id="20316" class="Symbol">(</a><a id="20317" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20324" class="Symbol">(</a><a id="20325" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20338" class="Symbol">{</a><a id="20339" class="Argument">dCert</a> <a id="20345" class="Symbol">=</a> <a id="20347" href="Ledger.Conway.Conformance.Equivalence.html#20347" class="Bound">cert</a><a id="20351" class="Symbol">}</a> <a id="20353" class="Symbol">(</a><a id="20354" href="Ledger.Conway.Conformance.Certs.html#5565" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20372" href="Ledger.Conway.Conformance.Equivalence.html#20372" class="Bound">h</a><a id="20373" class="Symbol">))</a>   <a id="20378" href="Ledger.Conway.Conformance.Equivalence.html#20378" class="Bound">rs</a><a id="20380" class="Symbol">)</a> <a id="20382" class="Symbol">=</a>
    <a id="20388" class="Keyword">let</a> <a id="20392" class="Keyword">open</a> <a id="20397" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">C.CertEnv</a> <a id="20407" href="Ledger.Conway.Conformance.Equivalence.html#20290" class="Bound">Γ</a> <a id="20409" class="Keyword">using</a> <a id="20415" class="Symbol">(</a><a id="20416" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="20418" class="Symbol">)</a>
        <a id="20428" href="Ledger.Conway.Conformance.Equivalence.html#20428" class="Bound">deps₂&#39;</a> <a id="20435" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20437" href="Ledger.Conway.Conformance.Equivalence.html#20437" class="Bound">eqd&#39;</a> <a id="20442" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20444" href="Ledger.Conway.Conformance.Equivalence.html#20444" class="Bound">rs&#39;</a> <a id="20448" class="Symbol">=</a> <a id="20450" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="20461" class="Symbol">(</a><a id="20462" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="20473" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="20476" href="Ledger.Conway.Conformance.Equivalence.html#20347" class="Bound">cert</a> <a id="20481" href="Ledger.Conway.Conformance.Equivalence.html#20293" class="Bound">deps₁</a><a id="20486" class="Symbol">)</a> <a id="20488" class="Symbol">(</a><a id="20489" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="20500" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="20503" href="Ledger.Conway.Conformance.Equivalence.html#20347" class="Bound">cert</a> <a id="20508" href="Ledger.Conway.Conformance.Equivalence.html#20299" class="Bound">deps₂</a><a id="20513" class="Symbol">)</a> <a id="20515" href="Ledger.Conway.Conformance.Equivalence.html#20305" class="Bound">deps₁&#39;</a>
                                         <a id="20563" class="Symbol">(</a><a id="20564" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="20566" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13484" class="Function">cong-updateDDep</a> <a id="20582" class="Symbol">{</a><a id="20583" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="20585" class="Symbol">}</a> <a id="20587" href="Ledger.Conway.Conformance.Equivalence.html#20347" class="Bound">cert</a> <a id="20592" class="Symbol">{</a><a id="20593" href="Ledger.Conway.Conformance.Equivalence.html#20293" class="Bound">deps₁</a> <a id="20599" class="Symbol">.</a><a id="20600" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20605" class="Symbol">}</a> <a id="20607" class="Symbol">{</a><a id="20608" href="Ledger.Conway.Conformance.Equivalence.html#20299" class="Bound">deps₂</a> <a id="20614" class="Symbol">.</a><a id="20615" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20620" class="Symbol">}</a>
                                          <a id="20664" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="20666" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14515" class="Function">cong-updateGDep</a> <a id="20682" class="Symbol">{</a><a id="20683" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="20685" class="Symbol">}</a> <a id="20687" href="Ledger.Conway.Conformance.Equivalence.html#20347" class="Bound">cert</a> <a id="20692" class="Symbol">{</a><a id="20693" href="Ledger.Conway.Conformance.Equivalence.html#20293" class="Bound">deps₁</a> <a id="20699" class="Symbol">.</a><a id="20700" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20705" class="Symbol">}</a> <a id="20707" class="Symbol">{</a><a id="20708" href="Ledger.Conway.Conformance.Equivalence.html#20299" class="Bound">deps₂</a> <a id="20714" class="Symbol">.</a><a id="20715" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20720" class="Symbol">}</a> <a id="20722" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="20724" href="Ledger.Conway.Conformance.Equivalence.html#20312" class="Bound">eqd</a><a id="20727" class="Symbol">)</a> <a id="20729" href="Ledger.Conway.Conformance.Equivalence.html#20378" class="Bound">rs</a>
    <a id="20736" class="Keyword">in</a>  <a id="20740" href="Ledger.Conway.Conformance.Equivalence.html#20428" class="Bound">deps₂&#39;</a> <a id="20747" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20749" href="Ledger.Conway.Conformance.Equivalence.html#20437" class="Bound">eqd&#39;</a> <a id="20754" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20756" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20763" class="Symbol">(</a><a id="20764" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="20776" class="Symbol">(</a><a id="20777" href="Ledger.Conway.Conformance.Certs.html#5565" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20795" href="Ledger.Conway.Conformance.Equivalence.html#20372" class="Bound">h</a><a id="20796" class="Symbol">))</a> <a id="20799" href="Ledger.Conway.Conformance.Equivalence.html#20444" class="Bound">rs&#39;</a>
  <a id="20805" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="20816" class="Symbol">{</a><a id="20817" href="Ledger.Conway.Conformance.Equivalence.html#20817" class="Bound">Γ</a><a id="20818" class="Symbol">}</a> <a id="20820" href="Ledger.Conway.Conformance.Equivalence.html#20820" class="Bound">deps₁</a> <a id="20826" href="Ledger.Conway.Conformance.Equivalence.html#20826" class="Bound">deps₂</a> <a id="20832" href="Ledger.Conway.Conformance.Equivalence.html#20832" class="Bound">deps₁&#39;</a> <a id="20839" href="Ledger.Conway.Conformance.Equivalence.html#20839" class="Bound">eqd</a> <a id="20843" class="Symbol">(</a><a id="20844" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20851" class="Symbol">(</a><a id="20852" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20865" class="Symbol">{</a><a id="20866" class="Argument">dCert</a> <a id="20872" class="Symbol">=</a> <a id="20874" href="Ledger.Conway.Conformance.Equivalence.html#20874" class="Bound">cert</a><a id="20878" class="Symbol">}</a> <a id="20880" class="Symbol">(</a><a id="20881" href="Ledger.Conway.Conformance.Certs.html#5931" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="20901" class="Symbol">(</a><a id="20902" href="Ledger.Conway.Conformance.Equivalence.html#20902" class="Bound">a</a> <a id="20904" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20906" href="Ledger.Conway.Conformance.Equivalence.html#20906" class="Bound">b</a><a id="20907" class="Symbol">)))</a> <a id="20911" href="Ledger.Conway.Conformance.Equivalence.html#20911" class="Bound">rs</a><a id="20913" class="Symbol">)</a> <a id="20915" class="Symbol">=</a>
    <a id="20921" class="Keyword">let</a> <a id="20925" class="Keyword">open</a> <a id="20930" href="Ledger.Conway.Specification.Certs.html#2818" class="Module">C.CertEnv</a> <a id="20940" href="Ledger.Conway.Conformance.Equivalence.html#20817" class="Bound">Γ</a> <a id="20942" class="Keyword">using</a> <a id="20948" class="Symbol">(</a><a id="20949" href="Ledger.Conway.Specification.Certs.html#2873" class="Field">pp</a><a id="20951" class="Symbol">)</a>
        <a id="20961" href="Ledger.Conway.Conformance.Equivalence.html#20961" class="Bound">deps₂&#39;</a> <a id="20968" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20970" href="Ledger.Conway.Conformance.Equivalence.html#20970" class="Bound">eqd&#39;</a> <a id="20975" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20977" href="Ledger.Conway.Conformance.Equivalence.html#20977" class="Bound">rs&#39;</a> <a id="20981" class="Symbol">=</a> <a id="20983" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="20994" class="Symbol">(</a><a id="20995" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="21006" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="21009" href="Ledger.Conway.Conformance.Equivalence.html#20874" class="Bound">cert</a> <a id="21014" href="Ledger.Conway.Conformance.Equivalence.html#20820" class="Bound">deps₁</a><a id="21019" class="Symbol">)</a> <a id="21021" class="Symbol">(</a><a id="21022" href="Ledger.Conway.Conformance.Equivalence.html#17563" class="Function">updateCDep</a> <a id="21033" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a> <a id="21036" href="Ledger.Conway.Conformance.Equivalence.html#20874" class="Bound">cert</a> <a id="21041" href="Ledger.Conway.Conformance.Equivalence.html#20826" class="Bound">deps₂</a><a id="21046" class="Symbol">)</a> <a id="21048" href="Ledger.Conway.Conformance.Equivalence.html#20832" class="Bound">deps₁&#39;</a>
                                         <a id="21096" class="Symbol">(</a><a id="21097" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="21099" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13484" class="Function">cong-updateDDep</a> <a id="21115" class="Symbol">{</a><a id="21116" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="21118" class="Symbol">}</a> <a id="21120" href="Ledger.Conway.Conformance.Equivalence.html#20874" class="Bound">cert</a> <a id="21125" class="Symbol">{</a><a id="21126" href="Ledger.Conway.Conformance.Equivalence.html#20820" class="Bound">deps₁</a> <a id="21132" class="Symbol">.</a><a id="21133" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21138" class="Symbol">}</a> <a id="21140" class="Symbol">{</a><a id="21141" href="Ledger.Conway.Conformance.Equivalence.html#20826" class="Bound">deps₂</a> <a id="21147" class="Symbol">.</a><a id="21148" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21153" class="Symbol">}</a>
                                          <a id="21197" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="21199" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14515" class="Function">cong-updateGDep</a> <a id="21215" class="Symbol">{</a><a id="21216" href="Ledger.Conway.Specification.Certs.html#2873" class="Function">pp</a><a id="21218" class="Symbol">}</a> <a id="21220" href="Ledger.Conway.Conformance.Equivalence.html#20874" class="Bound">cert</a> <a id="21225" class="Symbol">{</a><a id="21226" href="Ledger.Conway.Conformance.Equivalence.html#20820" class="Bound">deps₁</a> <a id="21232" class="Symbol">.</a><a id="21233" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21238" class="Symbol">}</a> <a id="21240" class="Symbol">{</a><a id="21241" href="Ledger.Conway.Conformance.Equivalence.html#20826" class="Bound">deps₂</a> <a id="21247" class="Symbol">.</a><a id="21248" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21253" class="Symbol">}</a> <a id="21255" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="21257" href="Ledger.Conway.Conformance.Equivalence.html#20839" class="Bound">eqd</a><a id="21260" class="Symbol">)</a> <a id="21262" href="Ledger.Conway.Conformance.Equivalence.html#20911" class="Bound">rs</a>
    <a id="21269" class="Keyword">in</a>  <a id="21273" href="Ledger.Conway.Conformance.Equivalence.html#20961" class="Bound">deps₂&#39;</a> <a id="21280" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21282" href="Ledger.Conway.Conformance.Equivalence.html#20970" class="Bound">eqd&#39;</a> <a id="21287" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21289" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21296" class="Symbol">(</a><a id="21297" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="21309" class="Symbol">(</a><a id="21310" href="Ledger.Conway.Conformance.Certs.html#5931" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="21330" class="Symbol">(</a><a id="21331" href="Ledger.Conway.Conformance.Equivalence.html#20902" class="Bound">a</a> <a id="21333" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21335" href="Ledger.Conway.Conformance.Equivalence.html#20839" class="Bound">eqd</a> <a id="21339" class="Symbol">.</a><a id="21340" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="21346" class="Symbol">.</a><a id="21347" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="21353" href="Ledger.Conway.Conformance.Equivalence.html#20906" class="Bound">b</a><a id="21354" class="Symbol">)))</a> <a id="21358" href="Ledger.Conway.Conformance.Equivalence.html#20977" class="Bound">rs&#39;</a>
                                                                   <a id="21429" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="21466" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="21477" class="Symbol">{</a><a id="21478" href="Ledger.Conway.Conformance.Equivalence.html#21478" class="Bound">Γ</a><a id="21479" class="Symbol">}</a> <a id="21481" href="Ledger.Conway.Conformance.Equivalence.html#21481" class="Bound">deps₁</a> <a id="21487" href="Ledger.Conway.Conformance.Equivalence.html#21487" class="Bound">deps₂</a> <a id="21493" href="Ledger.Conway.Conformance.Equivalence.html#21493" class="Bound">deps₁&#39;</a> <a id="21500" href="Ledger.Conway.Conformance.Equivalence.html#21500" class="Bound">eqd</a> <a id="21504" class="Symbol">(</a><a id="21505" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21512" class="Symbol">(</a><a id="21513" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a>  <a id="21526" class="Symbol">{</a><a id="21527" class="Argument">dCert</a> <a id="21533" class="Symbol">=</a> <a id="21535" href="Ledger.Conway.Conformance.Equivalence.html#21535" class="Bound">cert</a><a id="21539" class="Symbol">}</a> <a id="21541" class="Symbol">(</a><a id="21542" href="Ledger.Conway.Conformance.Certs.html#6226" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21561" href="Ledger.Conway.Conformance.Equivalence.html#21561" class="Bound">h</a><a id="21562" class="Symbol">))</a>  <a id="21566" href="Ledger.Conway.Conformance.Equivalence.html#21566" class="Bound">rs</a><a id="21568" class="Symbol">)</a> <a id="21570" class="Symbol">=</a>
    <a id="21576" class="Keyword">let</a> <a id="21580" href="Ledger.Conway.Conformance.Equivalence.html#21580" class="Bound">deps₂&#39;</a> <a id="21587" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21589" href="Ledger.Conway.Conformance.Equivalence.html#21589" class="Bound">eqd&#39;</a> <a id="21594" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21596" href="Ledger.Conway.Conformance.Equivalence.html#21596" class="Bound">rs&#39;</a> <a id="21600" class="Symbol">=</a> <a id="21602" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="21613" href="Ledger.Conway.Conformance.Equivalence.html#21481" class="Bound">deps₁</a> <a id="21619" href="Ledger.Conway.Conformance.Equivalence.html#21487" class="Bound">deps₂</a> <a id="21625" href="Ledger.Conway.Conformance.Equivalence.html#21493" class="Bound">deps₁&#39;</a> <a id="21632" href="Ledger.Conway.Conformance.Equivalence.html#21500" class="Bound">eqd</a> <a id="21636" href="Ledger.Conway.Conformance.Equivalence.html#21566" class="Bound">rs</a>
    <a id="21643" class="Keyword">in</a>  <a id="21647" href="Ledger.Conway.Conformance.Equivalence.html#21580" class="Bound">deps₂&#39;</a> <a id="21654" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21656" href="Ledger.Conway.Conformance.Equivalence.html#21589" class="Bound">eqd&#39;</a> <a id="21661" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21663" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21670" class="Symbol">(</a><a id="21671" href="Ledger.Conway.Conformance.Certs.html#7006" class="InductiveConstructor">C.CERT-vdel</a> <a id="21683" class="Symbol">(</a><a id="21684" href="Ledger.Conway.Conformance.Certs.html#6226" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21703" href="Ledger.Conway.Conformance.Equivalence.html#21561" class="Bound">h</a><a id="21704" class="Symbol">))</a> <a id="21707" href="Ledger.Conway.Conformance.Equivalence.html#21596" class="Bound">rs&#39;</a>

  <a id="castCERTS"></a><a id="21714" href="Ledger.Conway.Conformance.Equivalence.html#21714" class="Function">castCERTS</a> <a id="21724" class="Symbol">:</a> <a id="21726" class="Symbol">∀</a> <a id="21728" class="Symbol">{</a><a id="21729" href="Ledger.Conway.Conformance.Equivalence.html#21729" class="Bound">Γ</a> <a id="21731" href="Ledger.Conway.Conformance.Equivalence.html#21731" class="Bound">certs</a><a id="21736" class="Symbol">}</a> <a id="21738" class="Symbol">{</a><a id="21739" href="Ledger.Conway.Conformance.Equivalence.html#21739" class="Bound">s</a> <a id="21741" href="Ledger.Conway.Conformance.Equivalence.html#21741" class="Bound">s&#39;</a> <a id="21744" class="Symbol">:</a> <a id="21746" href="Ledger.Conway.Specification.Certs.html#4359" class="Record">L.CertState</a><a id="21757" class="Symbol">}</a> <a id="21759" href="Ledger.Conway.Conformance.Equivalence.html#21759" class="Bound">deps₁</a> <a id="21765" href="Ledger.Conway.Conformance.Equivalence.html#21765" class="Bound">deps₂</a> <a id="21771" href="Ledger.Conway.Conformance.Equivalence.html#21771" class="Bound">deps₁&#39;</a>
            <a id="21790" class="Symbol">→</a> <a id="21792" href="Ledger.Conway.Conformance.Equivalence.html#21759" class="Bound">deps₁</a> <a id="21798" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="21801" href="Ledger.Conway.Conformance.Equivalence.html#21765" class="Bound">deps₂</a>
            <a id="21819" class="Symbol">→</a> <a id="21821" href="Ledger.Conway.Conformance.Equivalence.html#21729" class="Bound">Γ</a> <a id="21823" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">C.⊢</a> <a id="21827" href="Ledger.Conway.Conformance.Equivalence.html#21759" class="Bound">deps₁</a> <a id="21833" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21839" href="Ledger.Conway.Conformance.Equivalence.html#21739" class="Bound">s</a> <a id="21841" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">⇀⦇</a> <a id="21844" href="Ledger.Conway.Conformance.Equivalence.html#21731" class="Bound">certs</a> <a id="21850" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">,CERTS⦈</a> <a id="21858" class="Symbol">(</a><a id="21859" href="Ledger.Conway.Conformance.Equivalence.html#21771" class="Bound">deps₁&#39;</a> <a id="21866" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21872" href="Ledger.Conway.Conformance.Equivalence.html#21741" class="Bound">s&#39;</a><a id="21874" class="Symbol">)</a>
            <a id="21888" class="Symbol">→</a> <a id="21890" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="21893" href="Ledger.Conway.Conformance.Equivalence.html#21893" class="Bound">deps₂&#39;</a> <a id="21900" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="21902" href="Ledger.Conway.Conformance.Equivalence.html#21771" class="Bound">deps₁&#39;</a> <a id="21909" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="21912" href="Ledger.Conway.Conformance.Equivalence.html#21893" class="Bound">deps₂&#39;</a> <a id="21919" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="21921" href="Ledger.Conway.Conformance.Equivalence.html#21729" class="Bound">Γ</a> <a id="21923" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">C.⊢</a> <a id="21927" href="Ledger.Conway.Conformance.Equivalence.html#21765" class="Bound">deps₂</a> <a id="21933" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21939" href="Ledger.Conway.Conformance.Equivalence.html#21739" class="Bound">s</a> <a id="21941" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">⇀⦇</a> <a id="21944" href="Ledger.Conway.Conformance.Equivalence.html#21731" class="Bound">certs</a> <a id="21950" href="Ledger.Conway.Conformance.Certs.html#8060" class="Function Operator">,CERTS⦈</a> <a id="21958" class="Symbol">(</a><a id="21959" href="Ledger.Conway.Conformance.Equivalence.html#21893" class="Bound">deps₂&#39;</a> <a id="21966" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21972" href="Ledger.Conway.Conformance.Equivalence.html#21741" class="Bound">s&#39;</a><a id="21974" class="Symbol">)</a>
  <a id="21978" href="Ledger.Conway.Conformance.Equivalence.html#21714" class="Function">castCERTS</a> <a id="21988" href="Ledger.Conway.Conformance.Equivalence.html#21988" class="Bound">deps₁</a> <a id="21994" href="Ledger.Conway.Conformance.Equivalence.html#21994" class="Bound">deps₂</a> <a id="22000" href="Ledger.Conway.Conformance.Equivalence.html#22000" class="Bound">deps₁&#39;</a> <a id="22007" href="Ledger.Conway.Conformance.Equivalence.html#22007" class="Bound">eqd</a> <a id="22011" class="Symbol">(</a><a id="22012" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="22016" class="Symbol">(</a><a id="22017" href="Ledger.Conway.Conformance.Certs.html#7239" class="InductiveConstructor">C.CERT-base</a> <a id="22029" href="Ledger.Conway.Conformance.Equivalence.html#22029" class="Bound">h</a> <a id="22031" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22033" href="Ledger.Conway.Conformance.Equivalence.html#22033" class="Bound">step</a><a id="22037" class="Symbol">))</a> <a id="22040" class="Symbol">=</a>
    <a id="22046" class="Keyword">let</a> <a id="22050" href="Ledger.Conway.Conformance.Equivalence.html#22050" class="Bound">deps₂&#39;</a> <a id="22057" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22059" href="Ledger.Conway.Conformance.Equivalence.html#22059" class="Bound">eqd&#39;</a> <a id="22064" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22066" href="Ledger.Conway.Conformance.Equivalence.html#22066" class="Bound">step&#39;</a> <a id="22072" class="Symbol">=</a> <a id="22074" href="Ledger.Conway.Conformance.Equivalence.html#17741" class="Function">castCERTS&#39;</a> <a id="22085" href="Ledger.Conway.Conformance.Equivalence.html#21988" class="Bound">deps₁</a> <a id="22091" href="Ledger.Conway.Conformance.Equivalence.html#21994" class="Bound">deps₂</a> <a id="22097" href="Ledger.Conway.Conformance.Equivalence.html#22000" class="Bound">deps₁&#39;</a> <a id="22104" href="Ledger.Conway.Conformance.Equivalence.html#22007" class="Bound">eqd</a> <a id="22108" href="Ledger.Conway.Conformance.Equivalence.html#22033" class="Bound">step</a>
    <a id="22117" class="Keyword">in</a>  <a id="22121" href="Ledger.Conway.Conformance.Equivalence.html#22050" class="Bound">deps₂&#39;</a> <a id="22128" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22130" href="Ledger.Conway.Conformance.Equivalence.html#22059" class="Bound">eqd&#39;</a> <a id="22135" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22137" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="22141" class="Symbol">(</a><a id="22142" href="Ledger.Conway.Conformance.Certs.html#7239" class="InductiveConstructor">C.CERT-base</a> <a id="22154" href="Ledger.Conway.Conformance.Equivalence.html#22029" class="Bound">h</a> <a id="22156" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22158" href="Ledger.Conway.Conformance.Equivalence.html#22066" class="Bound">step&#39;</a><a id="22163" class="Symbol">)</a>

<a id="_⊢_⇀⦇_,GOVn⦈_"></a><a id="22166" href="Ledger.Conway.Conformance.Equivalence.html#22166" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22180" class="Symbol">:</a> <a id="22182" href="Ledger.Conway.Specification.Gov.html#1671" class="Record">L.GovEnv</a> <a id="22191" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22193" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="22195" class="Symbol">→</a> <a id="22197" href="Ledger.Conway.Specification.Gov.html#1479" class="Function">L.GovState</a> <a id="22208" class="Symbol">→</a> <a id="22210" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="22215" class="Symbol">(</a><a id="22216" href="Ledger.Conway.Specification.Gov.Actions.html#2373" class="Record">GovVote</a> <a id="22224" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="22226" href="Ledger.Conway.Specification.Gov.Actions.html#2518" class="Record">GovProposal</a><a id="22237" class="Symbol">)</a> <a id="22239" class="Symbol">→</a> <a id="22241" href="Ledger.Conway.Specification.Gov.html#1479" class="Function">L.GovState</a> <a id="22252" class="Symbol">→</a> <a id="22254" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="22259" href="Ledger.Conway.Conformance.Equivalence.html#22166" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22273" class="Symbol">=</a> <a id="22275" href="Interface.STS.html#811" class="Datatype Operator">_⊢_⇀⟦_⟧ᵢ*&#39;_</a> <a id="22287" class="Symbol">{</a><a id="22288" class="Argument">_⊢_⇀⟦_⟧ᵇ_</a> <a id="22298" class="Symbol">=</a> <a id="22300" href="Interface.STS.html#1257" class="Datatype">IdSTS</a><a id="22305" class="Symbol">}</a> <a id="22307" class="Symbol">{</a><a id="22308" class="Argument">_⊢_⇀⟦_⟧_</a> <a id="22317" class="Symbol">=</a> <a id="22319" href="Ledger.Conway.Specification.Gov.html#6932" class="Datatype Operator">L._⊢_⇀⦇_,GOV⦈_</a><a id="22333" class="Symbol">}</a>

<a id="22336" class="Keyword">opaque</a>
  <a id="castLEDGER"></a><a id="22345" href="Ledger.Conway.Conformance.Equivalence.html#22345" class="Function">castLEDGER</a> <a id="22356" class="Symbol">:</a> <a id="22358" class="Symbol">∀</a> <a id="22360" class="Symbol">{</a><a id="22361" href="Ledger.Conway.Conformance.Equivalence.html#22361" class="Bound">Γ</a> <a id="22363" href="Ledger.Conway.Conformance.Equivalence.html#22363" class="Bound">tx</a><a id="22365" class="Symbol">}</a> <a id="22367" class="Symbol">{</a><a id="22368" href="Ledger.Conway.Conformance.Equivalence.html#22368" class="Bound">s</a> <a id="22370" href="Ledger.Conway.Conformance.Equivalence.html#22370" class="Bound">s&#39;</a> <a id="22373" class="Symbol">:</a> <a id="22375" href="Ledger.Conway.Specification.Ledger.html#977" class="Record">L.LState</a><a id="22383" class="Symbol">}</a> <a id="22385" href="Ledger.Conway.Conformance.Equivalence.html#22385" class="Bound">deps₁</a> <a id="22391" href="Ledger.Conway.Conformance.Equivalence.html#22391" class="Bound">deps₂</a> <a id="22397" href="Ledger.Conway.Conformance.Equivalence.html#22397" class="Bound">deps₁&#39;</a>
            <a id="22416" class="Symbol">→</a> <a id="22418" href="Ledger.Conway.Conformance.Equivalence.html#22385" class="Bound">deps₁</a> <a id="22424" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="22427" href="Ledger.Conway.Conformance.Equivalence.html#22391" class="Bound">deps₂</a>
            <a id="22445" class="Symbol">→</a> <a id="22447" href="Ledger.Conway.Conformance.Equivalence.html#22361" class="Bound">Γ</a> <a id="22449" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="22453" href="Ledger.Conway.Conformance.Equivalence.html#22385" class="Bound">deps₁</a> <a id="22459" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22465" href="Ledger.Conway.Conformance.Equivalence.html#22368" class="Bound">s</a> <a id="22467" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="22470" href="Ledger.Conway.Conformance.Equivalence.html#22363" class="Bound">tx</a> <a id="22473" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="22482" class="Symbol">(</a><a id="22483" href="Ledger.Conway.Conformance.Equivalence.html#22397" class="Bound">deps₁&#39;</a> <a id="22490" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22496" href="Ledger.Conway.Conformance.Equivalence.html#22370" class="Bound">s&#39;</a><a id="22498" class="Symbol">)</a>
            <a id="22512" class="Symbol">→</a> <a id="22514" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="22517" href="Ledger.Conway.Conformance.Equivalence.html#22517" class="Bound">deps₂&#39;</a> <a id="22524" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="22526" href="Ledger.Conway.Conformance.Equivalence.html#22397" class="Bound">deps₁&#39;</a> <a id="22533" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="22536" href="Ledger.Conway.Conformance.Equivalence.html#22517" class="Bound">deps₂&#39;</a> <a id="22543" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22545" href="Ledger.Conway.Conformance.Equivalence.html#22361" class="Bound">Γ</a> <a id="22547" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="22551" href="Ledger.Conway.Conformance.Equivalence.html#22391" class="Bound">deps₂</a> <a id="22557" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22563" href="Ledger.Conway.Conformance.Equivalence.html#22368" class="Bound">s</a> <a id="22565" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="22568" href="Ledger.Conway.Conformance.Equivalence.html#22363" class="Bound">tx</a> <a id="22571" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="22580" class="Symbol">(</a><a id="22581" href="Ledger.Conway.Conformance.Equivalence.html#22517" class="Bound">deps₂&#39;</a> <a id="22588" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22594" href="Ledger.Conway.Conformance.Equivalence.html#22370" class="Bound">s&#39;</a><a id="22596" class="Symbol">)</a>
  <a id="22600" href="Ledger.Conway.Conformance.Equivalence.html#22345" class="Function">castLEDGER</a> <a id="22611" class="Symbol">{</a><a id="22612" href="Ledger.Conway.Conformance.Equivalence.html#22612" class="Bound">Γ</a><a id="22613" class="Symbol">}</a> <a id="22615" class="Symbol">{</a><a id="22616" href="Ledger.Conway.Conformance.Equivalence.html#22616" class="Bound">tx</a><a id="22618" class="Symbol">}</a> <a id="22620" class="Symbol">{</a><a id="22621" href="Ledger.Conway.Conformance.Equivalence.html#22621" class="Bound">s</a><a id="22622" class="Symbol">}</a> <a id="22624" class="Symbol">{</a><a id="22625" href="Ledger.Conway.Conformance.Equivalence.html#22625" class="Bound">s&#39;</a><a id="22627" class="Symbol">}</a> <a id="22629" href="Ledger.Conway.Conformance.Equivalence.html#22629" class="Bound">deps₁</a> <a id="22635" href="Ledger.Conway.Conformance.Equivalence.html#22635" class="Bound">deps₂</a> <a id="22641" href="Ledger.Conway.Conformance.Equivalence.html#22641" class="Bound">deps₁&#39;</a> <a id="22648" href="Ledger.Conway.Conformance.Equivalence.html#22648" class="Bound">eqd</a> <a id="22652" class="Symbol">(</a><a id="22653" href="Ledger.Conway.Conformance.Ledger.html#2168" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22665" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22670" href="Ledger.Conway.Conformance.Equivalence.html#22670" class="Bound">utxo</a> <a id="22675" href="Ledger.Conway.Conformance.Equivalence.html#22675" class="Bound">certs</a> <a id="22681" href="Ledger.Conway.Conformance.Equivalence.html#22681" class="Bound">gov</a><a id="22684" class="Symbol">)</a> <a id="22686" class="Symbol">=</a>
    <a id="22692" class="Keyword">let</a> <a id="22696" href="Ledger.Conway.Conformance.Equivalence.html#22696" class="Bound">deps₂&#39;</a> <a id="22703" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22705" href="Ledger.Conway.Conformance.Equivalence.html#22705" class="Bound">eqd&#39;</a> <a id="22710" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22712" href="Ledger.Conway.Conformance.Equivalence.html#22712" class="Bound">certs&#39;</a> <a id="22719" class="Symbol">=</a> <a id="22721" href="Ledger.Conway.Conformance.Equivalence.html#21714" class="Function">castCERTS</a> <a id="22731" href="Ledger.Conway.Conformance.Equivalence.html#22629" class="Bound">deps₁</a> <a id="22737" href="Ledger.Conway.Conformance.Equivalence.html#22635" class="Bound">deps₂</a> <a id="22743" href="Ledger.Conway.Conformance.Equivalence.html#22641" class="Bound">deps₁&#39;</a> <a id="22750" href="Ledger.Conway.Conformance.Equivalence.html#22648" class="Bound">eqd</a> <a id="22754" href="Ledger.Conway.Conformance.Equivalence.html#22675" class="Bound">certs</a>
    <a id="22764" class="Keyword">in</a>  <a id="22768" href="Ledger.Conway.Conformance.Equivalence.html#22696" class="Bound">deps₂&#39;</a> <a id="22775" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22777" href="Ledger.Conway.Conformance.Equivalence.html#22705" class="Bound">eqd&#39;</a> <a id="22782" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22784" href="Ledger.Conway.Conformance.Ledger.html#2168" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22796" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22801" href="Ledger.Conway.Conformance.Equivalence.html#22670" class="Bound">utxo</a> <a id="22806" href="Ledger.Conway.Conformance.Equivalence.html#22712" class="Bound">certs&#39;</a> <a id="22813" href="Ledger.Conway.Conformance.Equivalence.html#22681" class="Bound">gov</a>
  <a id="22819" href="Ledger.Conway.Conformance.Equivalence.html#22345" class="Function">castLEDGER</a> <a id="22830" href="Ledger.Conway.Conformance.Equivalence.html#22830" class="Bound">deps₁</a> <a id="22836" href="Ledger.Conway.Conformance.Equivalence.html#22836" class="Bound">deps₂</a> <a id="22842" href="Ledger.Conway.Conformance.Equivalence.html#22842" class="Bound">deps₁&#39;</a> <a id="22849" href="Ledger.Conway.Conformance.Equivalence.html#22849" class="Bound">eqd</a> <a id="22853" class="Symbol">(</a><a id="22854" href="Ledger.Conway.Conformance.Ledger.html#2221" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22866" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22871" href="Ledger.Conway.Conformance.Equivalence.html#22871" class="Bound">utxo</a><a id="22875" class="Symbol">)</a> <a id="22877" class="Symbol">=</a> <a id="22879" class="Symbol">_</a> <a id="22881" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22883" href="Ledger.Conway.Conformance.Equivalence.html#22849" class="Bound">eqd</a> <a id="22887" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22889" href="Ledger.Conway.Conformance.Ledger.html#2221" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22901" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22906" href="Ledger.Conway.Conformance.Equivalence.html#22871" class="Bound">utxo</a>

<a id="22912" class="Comment">---------------------------------------------------------------------------</a>
<a id="22988" class="Comment">-- The main result</a>
<a id="23007" class="Comment">---------------------------------------------------------------------------</a>

<a id="23084" class="Keyword">open</a> <a id="23089" class="Keyword">import</a> <a id="23096" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html" class="Module">Ledger.Conway.Conformance.Equivalence.Bisimilarity</a>

<a id="23148" class="Comment">-- An LState sˡ from the Spec and an LState sᶜ from Conformance are</a>
<a id="23216" class="Comment">-- bisimular iff</a>
<a id="23233" class="Comment">--  ∙ the deposits in the CertState of sᶜ are equal (as maps) to the</a>
<a id="23302" class="Comment">--    appropriate restrictions of the deposits in the UTxOState of sˡ</a>
<a id="23372" class="Comment">--  ∙ the only difference between sˡ and sᶜ are the extra deposits in</a>
<a id="23442" class="Comment">--    the CertState of sᶜ.</a>
<a id="_∼_"></a><a id="23469" href="Ledger.Conway.Conformance.Equivalence.html#23469" class="Function Operator">_∼_</a> <a id="23473" class="Symbol">:</a> <a id="23475" href="Ledger.Conway.Specification.Ledger.html#977" class="Record">L.LState</a> <a id="23484" class="Symbol">→</a> <a id="23486" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a> <a id="23495" class="Symbol">→</a> <a id="23497" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="23502" href="Ledger.Conway.Conformance.Equivalence.html#23502" class="Bound">sˡ</a> <a id="23505" href="Ledger.Conway.Conformance.Equivalence.html#23469" class="Function Operator">∼</a> <a id="23507" href="Ledger.Conway.Conformance.Equivalence.html#23507" class="Bound">sᶜ</a> <a id="23510" class="Symbol">=</a> <a id="23512" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="23525" href="Ledger.Conway.Conformance.Equivalence.html#23502" class="Bound">sˡ</a> <a id="23528" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="23531" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="23545" class="Symbol">(</a><a id="23546" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="23565" href="Ledger.Conway.Conformance.Equivalence.html#23507" class="Bound">sᶜ</a><a id="23567" class="Symbol">)</a> <a id="23569" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="23571" href="Ledger.Conway.Conformance.Equivalence.html#23502" class="Bound">sˡ</a> <a id="23574" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="23576" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23581" href="Ledger.Conway.Conformance.Equivalence.html#23507" class="Bound">sᶜ</a>

<a id="23585" class="Comment">-- This gives us the main result: a bisimulation between the LEDGER</a>
<a id="23653" class="Comment">-- rules in Ledger and in Conformance.</a>
<a id="bisimilarityProof"></a><a id="23692" href="Ledger.Conway.Conformance.Equivalence.html#23692" class="Function">bisimilarityProof</a> <a id="23710" class="Symbol">:</a> <a id="23712" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#128" class="Record">Bisimilar</a> <a id="23722" href="Ledger.Conway.Specification.Ledger.html#2749" class="Datatype Operator">L._⊢_⇀⦇_,LEDGER⦈_</a> <a id="23740" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C._⊢_⇀⦇_,LEDGER⦈_</a>
<a id="23758" href="Ledger.Conway.Conformance.Equivalence.html#23692" class="Function">bisimilarityProof</a> <a id="23776" class="Symbol">.</a><a id="23777" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#259" class="Field Operator">Bisimilar._≈_</a> <a id="23791" class="Symbol">=</a> <a id="23793" href="Ledger.Conway.Conformance.Equivalence.html#23469" class="Function Operator">_∼_</a>
<a id="23797" href="Ledger.Conway.Conformance.Equivalence.html#23692" class="Function">bisimilarityProof</a> <a id="23815" class="Symbol">.</a><a id="23816" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#284" class="Field">Bisimilar.to</a> <a id="23829" class="Symbol">{</a><a id="23830" href="Ledger.Conway.Conformance.Equivalence.html#23830" class="Bound">Γ</a><a id="23831" class="Symbol">}</a> <a id="23833" class="Symbol">{</a><a id="23834" href="Ledger.Conway.Conformance.Equivalence.html#23834" class="Bound">tx</a><a id="23836" class="Symbol">}</a> <a id="23838" class="Symbol">{</a><a id="23839" href="Ledger.Conway.Conformance.Equivalence.html#23839" class="Bound">sˡ</a><a id="23841" class="Symbol">}</a> <a id="23843" class="Symbol">{</a><a id="23844" href="Ledger.Conway.Conformance.Equivalence.html#23844" class="Bound">sˡ&#39;</a><a id="23847" class="Symbol">}</a> <a id="23849" class="Symbol">{</a><a id="23850" href="Ledger.Conway.Conformance.Equivalence.html#23850" class="Bound">sᶜ</a><a id="23852" class="Symbol">}</a> <a id="23854" class="Symbol">(</a><a id="23855" href="Ledger.Conway.Conformance.Equivalence.html#23855" class="Bound">eq</a> <a id="23858" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23860" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="23864" class="Symbol">)</a> <a id="23866" href="Ledger.Conway.Conformance.Equivalence.html#23866" class="Bound">r</a> <a id="23868" class="Symbol">=</a>
  <a id="23872" class="Keyword">let</a> <a id="23876" href="Ledger.Conway.Conformance.Equivalence.html#23876" class="Bound">deps</a>  <a id="23882" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23884" href="Ledger.Conway.Conformance.Equivalence.html#23884" class="Bound">eqd</a>  <a id="23889" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23891" href="Ledger.Conway.Conformance.Equivalence.html#23891" class="Bound">r&#39;</a>  <a id="23895" class="Symbol">=</a> <a id="23897" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23902" href="Ledger.Conway.Conformance.Equivalence.html#23866" class="Bound">r</a>
      <a id="23910" href="Ledger.Conway.Conformance.Equivalence.html#23910" class="Bound">deps&#39;</a> <a id="23916" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23918" href="Ledger.Conway.Conformance.Equivalence.html#23918" class="Bound">eqd&#39;</a> <a id="23923" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23925" href="Ledger.Conway.Conformance.Equivalence.html#23925" class="Bound">r&#39;&#39;</a> <a id="23929" class="Symbol">=</a> <a id="23931" href="Ledger.Conway.Conformance.Equivalence.html#22345" class="Function">castLEDGER</a> <a id="23942" class="Symbol">(</a><a id="23943" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="23956" class="Symbol">(</a><a id="23957" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23962" href="Ledger.Conway.Conformance.Equivalence.html#23850" class="Bound">sᶜ</a><a id="23964" class="Symbol">))</a>
                                      <a id="24005" class="Symbol">(</a><a id="24006" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="24020" class="Symbol">(</a><a id="24021" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="24040" href="Ledger.Conway.Conformance.Equivalence.html#23850" class="Bound">sᶜ</a><a id="24042" class="Symbol">))</a>
                                      <a id="24083" href="Ledger.Conway.Conformance.Equivalence.html#23876" class="Bound">deps</a>
                                      <a id="24126" href="Ledger.Conway.Conformance.Equivalence.html#23855" class="Bound">eq</a>
                                      <a id="24167" href="Ledger.Conway.Conformance.Equivalence.html#23891" class="Bound">r&#39;</a>
      <a id="24176" href="Ledger.Conway.Conformance.Equivalence.html#24176" class="Bound">eqd&#39;&#39;</a> <a id="24182" class="Symbol">:</a> <a id="24184" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="24197" href="Ledger.Conway.Conformance.Equivalence.html#23844" class="Bound">sˡ&#39;</a> <a id="24201" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12971" class="Function Operator">≡ᵈ</a> <a id="24204" href="Ledger.Conway.Conformance.Equivalence.html#23910" class="Bound">deps&#39;</a>
      <a id="24216" href="Ledger.Conway.Conformance.Equivalence.html#24176" class="Bound">eqd&#39;&#39;</a> <a id="24222" class="Symbol">=</a> <a id="24224" href="Ledger.Conway.Conformance.Equivalence.html#13856" class="Function">≡ᵈ-trans</a> <a id="24233" class="Symbol">{</a><a id="24234" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="24247" href="Ledger.Conway.Conformance.Equivalence.html#23844" class="Bound">sˡ&#39;</a><a id="24250" class="Symbol">}</a> <a id="24252" class="Symbol">{</a><a id="24253" href="Ledger.Conway.Conformance.Equivalence.html#23876" class="Bound">deps</a><a id="24257" class="Symbol">}</a> <a id="24259" class="Symbol">{</a><a id="24260" href="Ledger.Conway.Conformance.Equivalence.html#23910" class="Bound">deps&#39;</a><a id="24265" class="Symbol">}</a> <a id="24267" class="Symbol">(</a><a id="24268" href="Ledger.Conway.Conformance.Equivalence.html#13839" class="Function">≡ᵈ-sym</a> <a id="24275" class="Symbol">{</a><a id="24276" href="Ledger.Conway.Conformance.Equivalence.html#23876" class="Bound">deps</a><a id="24280" class="Symbol">}</a> <a id="24282" class="Symbol">{</a><a id="24283" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="24296" href="Ledger.Conway.Conformance.Equivalence.html#23844" class="Bound">sˡ&#39;</a><a id="24299" class="Symbol">}</a> <a id="24301" href="Ledger.Conway.Conformance.Equivalence.html#23884" class="Bound">eqd</a><a id="24304" class="Symbol">)</a> <a id="24306" href="Ledger.Conway.Conformance.Equivalence.html#23918" class="Bound">eqd&#39;</a>
  <a id="24313" class="Keyword">in</a>
  <a id="24318" class="Symbol">(</a><a id="24319" href="Ledger.Conway.Conformance.Equivalence.html#23910" class="Bound">deps&#39;</a> <a id="24325" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24331" href="Ledger.Conway.Conformance.Equivalence.html#23844" class="Bound">sˡ&#39;</a><a id="24334" class="Symbol">)</a> <a id="24336" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24338" class="Symbol">(</a><a id="24339" href="Ledger.Conway.Conformance.Equivalence.html#24176" class="Bound">eqd&#39;&#39;</a> <a id="24345" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24347" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24351" class="Symbol">)</a> <a id="24353" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24355" href="Ledger.Conway.Conformance.Equivalence.html#23925" class="Bound">r&#39;&#39;</a>
<a id="24359" href="Ledger.Conway.Conformance.Equivalence.html#23692" class="Function">bisimilarityProof</a> <a id="24377" class="Symbol">.</a><a id="24378" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#419" class="Field">Bisimilar.from</a> <a id="24393" class="Symbol">{</a><a id="24394" href="Ledger.Conway.Conformance.Equivalence.html#24394" class="Bound">Γ</a><a id="24395" class="Symbol">}</a> <a id="24397" class="Symbol">{</a><a id="24398" href="Ledger.Conway.Conformance.Equivalence.html#24398" class="Bound">tx</a><a id="24400" class="Symbol">}</a> <a id="24402" class="Symbol">{</a><a id="24403" href="Ledger.Conway.Conformance.Equivalence.html#24403" class="Bound">sˡ</a><a id="24405" class="Symbol">}</a> <a id="24407" class="Symbol">{</a><a id="24408" href="Ledger.Conway.Conformance.Equivalence.html#24408" class="Bound">sᶜ</a><a id="24410" class="Symbol">}</a> <a id="24412" class="Symbol">{</a><a id="24413" href="Ledger.Conway.Conformance.Equivalence.html#24413" class="Bound">sᶜ&#39;</a><a id="24416" class="Symbol">}</a> <a id="24418" class="Symbol">(</a><a id="24419" href="Ledger.Conway.Conformance.Equivalence.html#24419" class="Bound">eqd</a> <a id="24423" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24425" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24429" class="Symbol">)</a> <a id="24431" href="Ledger.Conway.Conformance.Equivalence.html#24431" class="Bound">r</a> <a id="24433" class="Symbol">=</a>
  <a id="24437" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24442" href="Ledger.Conway.Conformance.Equivalence.html#24413" class="Bound">sᶜ&#39;</a> <a id="24446" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24448" class="Symbol">(</a><a id="24449" href="Ledger.Conway.Conformance.Equivalence.html#24572" class="Function">wf&#39;</a> <a id="24453" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24455" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24459" class="Symbol">)</a> <a id="24461" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24463" href="Ledger.Conway.Conformance.Equivalence.html#24486" class="Function">wf</a> <a id="24466" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24472" href="Ledger.Conway.Conformance.Equivalence.html#24431" class="Bound">r</a>
  <a id="24476" class="Keyword">where</a>
    <a id="24486" href="Ledger.Conway.Conformance.Equivalence.html#24486" class="Function">wf</a>  <a id="24490" class="Symbol">=</a> <a id="24492" href="Ledger.Conway.Conformance.Equivalence.html#13839" class="Function">≡ᵈ-sym</a> <a id="24499" class="Symbol">{</a><a id="24500" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="24513" class="Symbol">(</a><a id="24514" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24519" href="Ledger.Conway.Conformance.Equivalence.html#24408" class="Bound">sᶜ</a><a id="24521" class="Symbol">)}</a> <a id="24524" class="Symbol">{</a><a id="24525" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="24539" class="Symbol">(</a><a id="24540" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="24559" href="Ledger.Conway.Conformance.Equivalence.html#24408" class="Bound">sᶜ</a><a id="24561" class="Symbol">)}</a> <a id="24564" href="Ledger.Conway.Conformance.Equivalence.html#24419" class="Bound">eqd</a>
    <a id="24572" href="Ledger.Conway.Conformance.Equivalence.html#24572" class="Function">wf&#39;</a> <a id="24576" class="Symbol">=</a> <a id="24578" href="Ledger.Conway.Conformance.Equivalence.html#13839" class="Function">≡ᵈ-sym</a> <a id="24585" class="Symbol">{</a><a id="24586" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="24600" class="Symbol">(</a><a id="24601" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="24620" href="Ledger.Conway.Conformance.Equivalence.html#24413" class="Bound">sᶜ&#39;</a><a id="24623" class="Symbol">)}</a> <a id="24626" class="Symbol">{</a><a id="24627" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12815" class="Function">certDeposits</a> <a id="24640" class="Symbol">(</a><a id="24641" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24646" href="Ledger.Conway.Conformance.Equivalence.html#24413" class="Bound">sᶜ&#39;</a><a id="24649" class="Symbol">)}</a> <a id="24652" class="Symbol">(</a><a id="24653" href="Ledger.Conway.Conformance.Equivalence.html#15253" class="Function">lemWellformed</a> <a id="24667" href="Ledger.Conway.Conformance.Equivalence.html#24486" class="Function">wf</a> <a id="24670" href="Ledger.Conway.Conformance.Equivalence.html#24431" class="Bound">r</a><a id="24671" class="Symbol">)</a>
    <a id="24677" href="Ledger.Conway.Conformance.Equivalence.html#24677" class="Function">r&#39;</a> <a id="24680" class="Symbol">=</a> <a id="24682" href="Ledger.Conway.Conformance.Equivalence.html#24486" class="Function">wf</a> <a id="24685" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24691" href="Ledger.Conway.Conformance.Equivalence.html#24431" class="Bound">r</a>
</pre></body></html>