<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Equivalence</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Comment">-- Proof that the rules under Ledger.Conway.Conformance are equivalent</a>
<a id="95" class="Comment">-- to the rules under Ledger.</a>

<a id="126" class="Keyword">open</a> <a id="131" class="Keyword">import</a> <a id="138" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a>
<a id="181" class="Keyword">open</a> <a id="186" class="Keyword">import</a> <a id="193" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a> <a id="212" class="Keyword">using</a> <a id="218" class="Symbol">(</a><a id="219" href="Ledger.Transaction.html#840" class="Record">TransactionStructure</a><a id="239" class="Symbol">)</a>

<a id="242" class="Keyword">open</a> <a id="247" class="Keyword">import</a> <a id="254" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="264" class="Keyword">using</a> <a id="270" class="Symbol">(</a><a id="271" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="272" class="Symbol">)</a>
<a id="274" class="Keyword">open</a> <a id="279" class="Keyword">import</a> <a id="286" href="Data.Product.html" class="Module">Data.Product</a> <a id="299" class="Keyword">using</a> <a id="305" class="Symbol">(</a><a id="306" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="309" class="Symbol">;</a> <a id="311" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="314" class="Symbol">)</a> <a id="316" class="Keyword">renaming</a> <a id="325" class="Symbol">(</a><a id="326" href="Data.Product.Base.html#2173" class="Function">map</a> <a id="330" class="Symbol">to</a> <a id="333" class="Function">⟨_,_⟩</a><a id="338" class="Symbol">)</a>
<a id="340" class="Keyword">open</a> <a id="345" class="Keyword">import</a> <a id="352" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="369" class="Keyword">using</a> <a id="375" class="Symbol">(</a><a id="376" href="Function.Bundles.html#12400" class="Function Operator">_⇔_</a><a id="379" class="Symbol">;</a> <a id="381" href="Function.Bundles.html#13499" class="Function">mk⇔</a><a id="384" class="Symbol">;</a> <a id="386" href="Function.Bundles.html#4752" class="Record">Equivalence</a><a id="397" class="Symbol">)</a>
<a id="399" class="Keyword">open</a> <a id="404" class="Keyword">import</a> <a id="411" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="449" class="Keyword">open</a> <a id="454" class="Keyword">import</a> <a id="461" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="477" class="Keyword">using</a> <a id="483" class="Symbol">(</a><a id="484" href="Relation.Binary.Structures.html#1550" class="Record">IsEquivalence</a><a id="497" class="Symbol">)</a>

<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="Module">Ledger.Conway.Conformance.Equivalence.Convert</a>

<a id="559" class="Keyword">module</a> <a id="566" href="Ledger.Conway.Conformance.Equivalence.html" class="Module">Ledger.Conway.Conformance.Equivalence</a>
  <a id="606" class="Symbol">(</a><a id="607" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="611" class="Symbol">:</a> <a id="613" class="Symbol">_)</a> <a id="616" class="Symbol">(</a><a id="617" class="Keyword">open</a> <a id="622" href="Ledger.Transaction.html#840" class="Module">TransactionStructure</a> <a id="643" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a><a id="646" class="Symbol">)</a>
  <a id="650" class="Symbol">(</a><a id="651" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a> <a id="655" class="Symbol">:</a> <a id="657" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a> <a id="675" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a><a id="678" class="Symbol">)</a> <a id="680" class="Symbol">(</a><a id="681" class="Keyword">open</a> <a id="686" href="Ledger.Abstract.html#578" class="Module">AbstractFunctions</a> <a id="704" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a><a id="707" class="Symbol">)</a>
  <a id="711" class="Keyword">where</a>

<a id="718" class="Keyword">module</a> <a id="L"></a><a id="725" href="Ledger.Conway.Conformance.Equivalence.html#725" class="Module">L</a> <a id="727" class="Keyword">where</a>
  <a id="735" class="Keyword">open</a> <a id="740" class="Keyword">import</a> <a id="747" href="Ledger.Ledger.html" class="Module">Ledger.Ledger</a> <a id="761" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="765" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a> <a id="769" class="Keyword">public</a>
  <a id="778" class="Keyword">open</a> <a id="783" class="Keyword">import</a> <a id="790" href="Ledger.Utxo.html" class="Module">Ledger.Utxo</a> <a id="802" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="806" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a> <a id="810" class="Keyword">public</a>
  <a id="819" class="Keyword">open</a> <a id="824" class="Keyword">import</a> <a id="831" href="Ledger.Utxow.html" class="Module">Ledger.Utxow</a> <a id="844" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="848" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a> <a id="852" class="Keyword">public</a>
  <a id="861" class="Keyword">open</a> <a id="866" class="Keyword">import</a> <a id="873" href="Ledger.Gov.html" class="Module">Ledger.Gov</a> <a id="884" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="888" class="Keyword">public</a>
  <a id="897" class="Keyword">open</a> <a id="902" class="Keyword">import</a> <a id="909" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="922" href="Ledger.Transaction.html#1782" class="Function">govStructure</a> <a id="935" class="Keyword">public</a>

<a id="943" class="Keyword">module</a> <a id="C"></a><a id="950" href="Ledger.Conway.Conformance.Equivalence.html#950" class="Module">C</a> <a id="952" class="Keyword">where</a>
  <a id="960" class="Keyword">open</a> <a id="965" class="Keyword">import</a> <a id="972" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="1005" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="1009" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a> <a id="1013" class="Keyword">public</a>
  <a id="1022" class="Keyword">open</a> <a id="1027" class="Keyword">import</a> <a id="1034" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="1065" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="1069" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a> <a id="1073" class="Keyword">public</a>
  <a id="1082" class="Keyword">open</a> <a id="1087" class="Keyword">import</a> <a id="1094" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="1126" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="1130" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a> <a id="1134" class="Keyword">public</a>
  <a id="1143" class="Keyword">open</a> <a id="1148" class="Keyword">import</a> <a id="1155" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="1187" href="Ledger.Transaction.html#1782" class="Function">govStructure</a> <a id="1200" class="Keyword">public</a>

<a id="1208" class="Keyword">open</a> <a id="1213" class="Keyword">import</a> <a id="1220" href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="Module">Ledger.Conway.Conformance.Equivalence.Certs</a> <a id="1264" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="1268" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a>
<a id="1272" class="Keyword">open</a> <a id="1277" class="Keyword">import</a> <a id="1284" href="Ledger.Conway.Conformance.Equivalence.Utxo.html" class="Module">Ledger.Conway.Conformance.Equivalence.Utxo</a> <a id="1327" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="1331" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a>
<a id="1335" class="Keyword">open</a> <a id="1340" class="Keyword">import</a> <a id="1347" href="Ledger.Conway.Conformance.Equivalence.Deposits.html" class="Module">Ledger.Conway.Conformance.Equivalence.Deposits</a> <a id="1394" href="Ledger.Conway.Conformance.Equivalence.html#607" class="Bound">txs</a> <a id="1398" href="Ledger.Conway.Conformance.Equivalence.html#651" class="Bound">abs</a>

<a id="1403" class="Keyword">open</a> <a id="1408" href="Ledger.Transaction.html#4194" class="Module">Tx</a>
<a id="1411" class="Keyword">open</a> <a id="1416" class="Keyword">import</a> <a id="1423" href="Axiom.Set.Properties.html" class="Module">Axiom.Set.Properties</a> <a id="1444" href="Axiom.Set.html#10669" class="Function">th</a> <a id="1447" class="Keyword">using</a> <a id="1453" class="Symbol">(</a><a id="1454" href="Axiom.Set.Properties.html#3967" class="Function">≡ᵉ-Setoid</a><a id="1463" class="Symbol">)</a>

<a id="1466" class="Comment">-- Invalid transactions don&#39;t change the deposits</a>
<a id="lemInvalidDepositsL"></a><a id="1516" href="Ledger.Conway.Conformance.Equivalence.html#1516" class="Function">lemInvalidDepositsL</a> <a id="1536" class="Symbol">:</a> <a id="1538" class="Symbol">∀</a> <a id="1540" class="Symbol">{</a><a id="1541" href="Ledger.Conway.Conformance.Equivalence.html#1541" class="Bound">Γ</a> <a id="1543" href="Ledger.Conway.Conformance.Equivalence.html#1543" class="Bound">utxoSt</a> <a id="1550" href="Ledger.Conway.Conformance.Equivalence.html#1550" class="Bound">utxoSt&#39;</a> <a id="1558" href="Ledger.Conway.Conformance.Equivalence.html#1558" class="Bound">tx</a><a id="1560" class="Symbol">}</a>
                    <a id="1582" class="Symbol">→</a> <a id="1584" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="1592" href="Ledger.Conway.Conformance.Equivalence.html#1558" class="Bound">tx</a> <a id="1595" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1597" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="1623" class="Symbol">→</a> <a id="1625" href="Ledger.Conway.Conformance.Equivalence.html#1541" class="Bound">Γ</a> <a id="1627" href="Ledger.Utxow.html#3731" class="Datatype Operator">L.⊢</a> <a id="1631" href="Ledger.Conway.Conformance.Equivalence.html#1543" class="Bound">utxoSt</a> <a id="1638" href="Ledger.Utxow.html#3731" class="Datatype Operator">⇀⦇</a> <a id="1641" href="Ledger.Conway.Conformance.Equivalence.html#1558" class="Bound">tx</a> <a id="1644" href="Ledger.Utxow.html#3731" class="Datatype Operator">,UTXOW⦈</a> <a id="1652" href="Ledger.Conway.Conformance.Equivalence.html#1550" class="Bound">utxoSt&#39;</a>
                    <a id="1680" class="Symbol">→</a> <a id="1682" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="1703" href="Ledger.Conway.Conformance.Equivalence.html#1543" class="Bound">utxoSt</a> <a id="1710" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1712" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="1733" href="Ledger.Conway.Conformance.Equivalence.html#1550" class="Bound">utxoSt&#39;</a>
<a id="1741" href="Ledger.Conway.Conformance.Equivalence.html#1516" class="Function">lemInvalidDepositsL</a> <a id="1761" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1766" class="Symbol">(</a><a id="1767" href="Ledger.Utxow.html#5256" class="InductiveConstructor">L.UTXOW-inductive⋯</a> <a id="1786" class="Symbol">_</a> <a id="1788" class="Symbol">_</a> <a id="1790" class="Symbol">_</a> <a id="1792" class="Symbol">_</a> <a id="1794" class="Symbol">_</a> <a id="1796" class="Symbol">_</a> <a id="1798" class="Symbol">_</a> <a id="1800" class="Symbol">_</a>
                          <a id="1828" class="Symbol">(</a><a id="1829" href="Ledger.Utxo.html#15387" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="1847" class="Symbol">_</a> <a id="1849" class="Symbol">_</a> <a id="1851" class="Symbol">_</a> <a id="1853" class="Symbol">_</a> <a id="1855" class="Symbol">_</a> <a id="1857" class="Symbol">_</a> <a id="1859" class="Symbol">_</a> <a id="1861" class="Symbol">_</a> <a id="1863" class="Symbol">_</a> <a id="1865" class="Symbol">_</a> <a id="1867" class="Symbol">_</a> <a id="1869" class="Symbol">_</a> <a id="1871" class="Symbol">_</a> <a id="1873" class="Symbol">_</a> <a id="1875" class="Symbol">_</a> <a id="1877" class="Symbol">_</a> <a id="1879" class="Symbol">_</a> <a id="1881" class="Symbol">_</a> <a id="1883" class="Symbol">_</a>
                            <a id="1913" class="Symbol">(</a><a id="1914" href="Ledger.Utxo.html#13474" class="InductiveConstructor">L.Scripts-No</a> <a id="1927" class="Symbol">_)))</a> <a id="1932" class="Symbol">=</a> <a id="1934" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemInvalidDepositsC"></a><a id="1940" href="Ledger.Conway.Conformance.Equivalence.html#1940" class="Function">lemInvalidDepositsC</a> <a id="1960" class="Symbol">:</a> <a id="1962" class="Symbol">∀</a> <a id="1964" class="Symbol">{</a><a id="1965" href="Ledger.Conway.Conformance.Equivalence.html#1965" class="Bound">Γ</a> <a id="1967" href="Ledger.Conway.Conformance.Equivalence.html#1967" class="Bound">utxoSt</a> <a id="1974" href="Ledger.Conway.Conformance.Equivalence.html#1974" class="Bound">utxoSt&#39;</a> <a id="1982" href="Ledger.Conway.Conformance.Equivalence.html#1982" class="Bound">tx</a><a id="1984" class="Symbol">}</a>
                    <a id="2006" class="Symbol">→</a> <a id="2008" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="2016" href="Ledger.Conway.Conformance.Equivalence.html#1982" class="Bound">tx</a> <a id="2019" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2021" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="2047" class="Symbol">→</a> <a id="2049" class="Symbol">(</a><a id="2050" href="Ledger.Conway.Conformance.Equivalence.html#2050" class="Bound">h</a> <a id="2052" class="Symbol">:</a> <a id="2054" href="Ledger.Conway.Conformance.Equivalence.html#1965" class="Bound">Γ</a> <a id="2056" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">C.⊢</a> <a id="2060" href="Ledger.Conway.Conformance.Equivalence.html#1967" class="Bound">utxoSt</a> <a id="2067" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">⇀⦇</a> <a id="2070" href="Ledger.Conway.Conformance.Equivalence.html#1982" class="Bound">tx</a> <a id="2073" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">,UTXOW⦈</a> <a id="2081" href="Ledger.Conway.Conformance.Equivalence.html#1974" class="Bound">utxoSt&#39;</a><a id="2088" class="Symbol">)</a>
                    <a id="2110" class="Symbol">→</a> <a id="2112" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1968" class="Function">utxowDeposits</a> <a id="2126" href="Ledger.Conway.Conformance.Equivalence.html#2050" class="Bound">h</a> <a id="2128" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2130" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="2151" href="Ledger.Conway.Conformance.Equivalence.html#1974" class="Bound">utxoSt&#39;</a>
<a id="2159" href="Ledger.Conway.Conformance.Equivalence.html#1940" class="Function">lemInvalidDepositsC</a> <a id="2179" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2184" class="Symbol">(</a><a id="2185" href="Ledger.Conway.Conformance.Utxow.html#1940" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="2204" class="Symbol">_</a> <a id="2206" class="Symbol">_</a> <a id="2208" class="Symbol">_</a> <a id="2210" class="Symbol">_</a> <a id="2212" class="Symbol">_</a> <a id="2214" class="Symbol">_</a> <a id="2216" class="Symbol">_</a> <a id="2218" class="Symbol">_</a>
                          <a id="2246" class="Symbol">(</a><a id="2247" href="Ledger.Conway.Conformance.Utxo.html#3790" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2265" class="Symbol">_</a> <a id="2267" class="Symbol">_</a> <a id="2269" class="Symbol">_</a> <a id="2271" class="Symbol">_</a> <a id="2273" class="Symbol">_</a> <a id="2275" class="Symbol">_</a> <a id="2277" class="Symbol">_</a> <a id="2279" class="Symbol">_</a> <a id="2281" class="Symbol">_</a> <a id="2283" class="Symbol">_</a> <a id="2285" class="Symbol">_</a> <a id="2287" class="Symbol">_</a> <a id="2289" class="Symbol">_</a> <a id="2291" class="Symbol">_</a> <a id="2293" class="Symbol">_</a> <a id="2295" class="Symbol">_</a> <a id="2297" class="Symbol">_</a> <a id="2299" class="Symbol">_</a> <a id="2301" class="Symbol">_</a>
                            <a id="2331" class="Symbol">(</a><a id="2332" href="Ledger.Conway.Conformance.Utxo.html#1743" class="InductiveConstructor">C.Scripts-No</a> <a id="2345" class="Symbol">_)))</a> <a id="2350" class="Symbol">=</a> <a id="2352" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="2358" class="Comment">-- The UTXOW rule doesn&#39;t change the deposits in Conformance</a>
<a id="lemDepositsC"></a><a id="2419" href="Ledger.Conway.Conformance.Equivalence.html#2419" class="Function">lemDepositsC</a> <a id="2432" class="Symbol">:</a> <a id="2434" class="Symbol">∀</a> <a id="2436" class="Symbol">{</a><a id="2437" href="Ledger.Conway.Conformance.Equivalence.html#2437" class="Bound">Γ</a> <a id="2439" href="Ledger.Conway.Conformance.Equivalence.html#2439" class="Bound">utxoSt</a> <a id="2446" href="Ledger.Conway.Conformance.Equivalence.html#2446" class="Bound">utxoSt&#39;</a> <a id="2454" href="Ledger.Conway.Conformance.Equivalence.html#2454" class="Bound">tx</a><a id="2456" class="Symbol">}</a>
             <a id="2471" class="Symbol">→</a> <a id="2473" class="Symbol">(</a><a id="2474" href="Ledger.Conway.Conformance.Equivalence.html#2474" class="Bound">h</a> <a id="2476" class="Symbol">:</a> <a id="2478" href="Ledger.Conway.Conformance.Equivalence.html#2437" class="Bound">Γ</a> <a id="2480" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">C.⊢</a> <a id="2484" href="Ledger.Conway.Conformance.Equivalence.html#2439" class="Bound">utxoSt</a> <a id="2491" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">⇀⦇</a> <a id="2494" href="Ledger.Conway.Conformance.Equivalence.html#2454" class="Bound">tx</a> <a id="2497" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">,UTXOW⦈</a> <a id="2505" href="Ledger.Conway.Conformance.Equivalence.html#2446" class="Bound">utxoSt&#39;</a><a id="2512" class="Symbol">)</a>
             <a id="2527" class="Symbol">→</a> <a id="2529" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="2550" href="Ledger.Conway.Conformance.Equivalence.html#2439" class="Bound">utxoSt</a> <a id="2557" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2559" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="2580" href="Ledger.Conway.Conformance.Equivalence.html#2446" class="Bound">utxoSt&#39;</a>
<a id="2588" href="Ledger.Conway.Conformance.Equivalence.html#2419" class="Function">lemDepositsC</a> <a id="2601" class="Symbol">(</a><a id="2602" href="Ledger.Conway.Conformance.Utxow.html#1940" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="2621" class="Symbol">_</a> <a id="2623" class="Symbol">_</a> <a id="2625" class="Symbol">_</a> <a id="2627" class="Symbol">_</a> <a id="2629" class="Symbol">_</a> <a id="2631" class="Symbol">_</a> <a id="2633" class="Symbol">_</a> <a id="2635" class="Symbol">_</a>
               <a id="2652" class="Symbol">(</a><a id="2653" href="Ledger.Conway.Conformance.Utxo.html#3790" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2671" class="Symbol">_</a> <a id="2673" class="Symbol">_</a> <a id="2675" class="Symbol">_</a> <a id="2677" class="Symbol">_</a> <a id="2679" class="Symbol">_</a> <a id="2681" class="Symbol">_</a> <a id="2683" class="Symbol">_</a> <a id="2685" class="Symbol">_</a> <a id="2687" class="Symbol">_</a> <a id="2689" class="Symbol">_</a> <a id="2691" class="Symbol">_</a> <a id="2693" class="Symbol">_</a> <a id="2695" class="Symbol">_</a> <a id="2697" class="Symbol">_</a> <a id="2699" class="Symbol">_</a> <a id="2701" class="Symbol">_</a> <a id="2703" class="Symbol">_</a> <a id="2705" class="Symbol">_</a> <a id="2707" class="Symbol">_</a>
                 <a id="2726" class="Symbol">(</a><a id="2727" href="Ledger.Conway.Conformance.Utxo.html#1157" class="InductiveConstructor">C.Scripts-Yes</a> <a id="2741" class="Symbol">_)))</a> <a id="2746" class="Symbol">=</a> <a id="2748" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="2753" href="Ledger.Conway.Conformance.Equivalence.html#2419" class="Function">lemDepositsC</a> <a id="2766" class="Symbol">(</a><a id="2767" href="Ledger.Conway.Conformance.Utxow.html#1940" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="2786" class="Symbol">_</a> <a id="2788" class="Symbol">_</a> <a id="2790" class="Symbol">_</a> <a id="2792" class="Symbol">_</a> <a id="2794" class="Symbol">_</a> <a id="2796" class="Symbol">_</a> <a id="2798" class="Symbol">_</a> <a id="2800" class="Symbol">_</a>
               <a id="2817" class="Symbol">(</a><a id="2818" href="Ledger.Conway.Conformance.Utxo.html#3790" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2836" class="Symbol">_</a> <a id="2838" class="Symbol">_</a> <a id="2840" class="Symbol">_</a> <a id="2842" class="Symbol">_</a> <a id="2844" class="Symbol">_</a> <a id="2846" class="Symbol">_</a> <a id="2848" class="Symbol">_</a> <a id="2850" class="Symbol">_</a> <a id="2852" class="Symbol">_</a> <a id="2854" class="Symbol">_</a> <a id="2856" class="Symbol">_</a> <a id="2858" class="Symbol">_</a> <a id="2860" class="Symbol">_</a> <a id="2862" class="Symbol">_</a> <a id="2864" class="Symbol">_</a> <a id="2866" class="Symbol">_</a> <a id="2868" class="Symbol">_</a> <a id="2870" class="Symbol">_</a> <a id="2872" class="Symbol">_</a>
                 <a id="2891" class="Symbol">(</a><a id="2892" href="Ledger.Conway.Conformance.Utxo.html#1743" class="InductiveConstructor">C.Scripts-No</a> <a id="2905" class="Symbol">_)))</a> <a id="2910" class="Symbol">=</a> <a id="2912" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemUpdateDeposits"></a><a id="2918" href="Ledger.Conway.Conformance.Equivalence.html#2918" class="Function">lemUpdateDeposits</a> <a id="2936" class="Symbol">:</a> <a id="2938" class="Symbol">∀</a> <a id="2940" class="Symbol">{</a><a id="2941" href="Ledger.Conway.Conformance.Equivalence.html#2941" class="Bound">Γ</a> <a id="2943" href="Ledger.Conway.Conformance.Equivalence.html#2943" class="Bound">s</a> <a id="2945" href="Ledger.Conway.Conformance.Equivalence.html#2945" class="Bound">tx</a> <a id="2948" href="Ledger.Conway.Conformance.Equivalence.html#2948" class="Bound">s&#39;</a><a id="2950" class="Symbol">}</a> <a id="2952" class="Symbol">(</a><a id="2953" class="Keyword">open</a> <a id="2958" href="Ledger.Utxo.html#2353" class="Module">L.UTxOEnv</a> <a id="2968" href="Ledger.Conway.Conformance.Equivalence.html#2941" class="Bound">Γ</a><a id="2969" class="Symbol">)</a>
                  <a id="2989" class="Symbol">→</a> <a id="2991" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="2999" href="Ledger.Conway.Conformance.Equivalence.html#2945" class="Bound">tx</a> <a id="3002" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3004" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="3027" class="Symbol">→</a> <a id="3029" href="Ledger.Conway.Conformance.Equivalence.html#2941" class="Bound">Γ</a> <a id="3031" href="Ledger.Utxow.html#3731" class="Datatype Operator">L.⊢</a> <a id="3035" href="Ledger.Conway.Conformance.Equivalence.html#2943" class="Bound">s</a> <a id="3037" href="Ledger.Utxow.html#3731" class="Datatype Operator">⇀⦇</a> <a id="3040" href="Ledger.Conway.Conformance.Equivalence.html#2945" class="Bound">tx</a> <a id="3043" href="Ledger.Utxow.html#3731" class="Datatype Operator">,UTXOW⦈</a> <a id="3051" href="Ledger.Conway.Conformance.Equivalence.html#2948" class="Bound">s&#39;</a>
                  <a id="3072" class="Symbol">→</a> <a id="3074" href="Ledger.Utxo.html#9297" class="Function">L.updateDeposits</a> <a id="3091" href="Ledger.Utxo.html#2407" class="Function">pparams</a> <a id="3099" class="Symbol">(</a><a id="3100" href="Ledger.Transaction.html#4226" class="Field">body</a> <a id="3105" href="Ledger.Conway.Conformance.Equivalence.html#2945" class="Bound">tx</a><a id="3107" class="Symbol">)</a> <a id="3109" class="Symbol">(</a><a id="3110" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="3131" href="Ledger.Conway.Conformance.Equivalence.html#2943" class="Bound">s</a><a id="3132" class="Symbol">)</a> <a id="3134" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3136" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="3157" href="Ledger.Conway.Conformance.Equivalence.html#2948" class="Bound">s&#39;</a>
<a id="3160" href="Ledger.Conway.Conformance.Equivalence.html#2918" class="Function">lemUpdateDeposits</a> <a id="3178" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3185" class="Symbol">(</a><a id="3186" href="Ledger.Utxow.html#5256" class="InductiveConstructor">L.UTXOW-inductive⋯</a> <a id="3205" class="Symbol">_</a> <a id="3207" class="Symbol">_</a> <a id="3209" class="Symbol">_</a> <a id="3211" class="Symbol">_</a> <a id="3213" class="Symbol">_</a> <a id="3215" class="Symbol">_</a> <a id="3217" class="Symbol">_</a> <a id="3219" class="Symbol">_</a>
    <a id="3225" class="Symbol">(</a><a id="3226" href="Ledger.Utxo.html#15387" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3244" class="Symbol">_</a> <a id="3246" class="Symbol">_</a> <a id="3248" class="Symbol">_</a> <a id="3250" class="Symbol">_</a> <a id="3252" class="Symbol">_</a> <a id="3254" class="Symbol">_</a> <a id="3256" class="Symbol">_</a> <a id="3258" class="Symbol">_</a> <a id="3260" class="Symbol">_</a> <a id="3262" class="Symbol">_</a> <a id="3264" class="Symbol">_</a> <a id="3266" class="Symbol">_</a> <a id="3268" class="Symbol">_</a> <a id="3270" class="Symbol">_</a> <a id="3272" class="Symbol">_</a> <a id="3274" class="Symbol">_</a> <a id="3276" class="Symbol">_</a> <a id="3278" class="Symbol">_</a> <a id="3280" class="Symbol">_</a>
      <a id="3288" class="Symbol">(</a><a id="3289" href="Ledger.Utxo.html#12960" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3303" class="Symbol">_)))</a> <a id="3308" class="Symbol">=</a> <a id="3310" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="getValidCertDeposits"></a><a id="3316" href="Ledger.Conway.Conformance.Equivalence.html#3316" class="Function">getValidCertDeposits</a> <a id="3337" class="Symbol">:</a> <a id="3339" class="Symbol">∀</a> <a id="3341" class="Symbol">{</a><a id="3342" href="Ledger.Conway.Conformance.Equivalence.html#3342" class="Bound">Γ</a> <a id="3344" href="Ledger.Conway.Conformance.Equivalence.html#3344" class="Bound">s</a> <a id="3346" href="Ledger.Conway.Conformance.Equivalence.html#3346" class="Bound">tx</a> <a id="3349" href="Ledger.Conway.Conformance.Equivalence.html#3349" class="Bound">s&#39;</a><a id="3351" class="Symbol">}</a>
                     <a id="3374" class="Symbol">→</a> <a id="3376" class="Symbol">(</a><a id="3377" class="Keyword">let</a> <a id="3381" class="Keyword">open</a> <a id="3386" href="Ledger.Utxo.html#2353" class="Module">L.UTxOEnv</a> <a id="3396" href="Ledger.Conway.Conformance.Equivalence.html#3342" class="Bound">Γ</a> <a id="3398" class="Keyword">using</a> <a id="3404" class="Symbol">(</a><a id="3405" href="Ledger.Utxo.html#2407" class="Field">pparams</a><a id="3412" class="Symbol">)</a>
                            <a id="3442" class="Keyword">open</a> <a id="3447" href="Ledger.Utxo.html#2705" class="Module">L.UTxOState</a> <a id="3459" href="Ledger.Conway.Conformance.Equivalence.html#3344" class="Bound">s</a> <a id="3461" class="Keyword">using</a> <a id="3467" class="Symbol">(</a><a id="3468" href="Ledger.Utxo.html#2813" class="Field">deposits</a><a id="3476" class="Symbol">)</a>
                            <a id="3506" class="Keyword">open</a> <a id="3511" href="Ledger.Transaction.html#2650" class="Module">TxBody</a> <a id="3518" class="Symbol">(</a><a id="3519" href="Ledger.Conway.Conformance.Equivalence.html#3346" class="Bound">tx</a> <a id="3522" class="Symbol">.</a><a id="3523" href="Ledger.Transaction.html#4226" class="Field">Tx.body</a><a id="3530" class="Symbol">)</a> <a id="3532" class="Keyword">using</a> <a id="3538" class="Symbol">(</a><a id="3539" href="Ledger.Transaction.html#2884" class="Field">txcerts</a><a id="3546" class="Symbol">))</a>
                     <a id="3570" class="Symbol">→</a> <a id="3572" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="3580" href="Ledger.Conway.Conformance.Equivalence.html#3346" class="Bound">tx</a> <a id="3583" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3585" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="3611" class="Symbol">→</a> <a id="3613" href="Ledger.Conway.Conformance.Equivalence.html#3342" class="Bound">Γ</a> <a id="3615" href="Ledger.Utxow.html#3731" class="Datatype Operator">L.⊢</a> <a id="3619" href="Ledger.Conway.Conformance.Equivalence.html#3344" class="Bound">s</a> <a id="3621" href="Ledger.Utxow.html#3731" class="Datatype Operator">⇀⦇</a> <a id="3624" href="Ledger.Conway.Conformance.Equivalence.html#3346" class="Bound">tx</a> <a id="3627" href="Ledger.Utxow.html#3731" class="Datatype Operator">,UTXOW⦈</a> <a id="3635" href="Ledger.Conway.Conformance.Equivalence.html#3349" class="Bound">s&#39;</a>
                     <a id="3659" class="Symbol">→</a> <a id="3661" href="Ledger.Utxo.html#4645" class="Datatype">L.ValidCertDeposits</a> <a id="3681" href="Ledger.Utxo.html#2407" class="Function">pparams</a> <a id="3689" href="Ledger.Utxo.html#2813" class="Function">deposits</a> <a id="3698" href="Ledger.Transaction.html#2884" class="Function">txcerts</a>
<a id="3706" href="Ledger.Conway.Conformance.Equivalence.html#3316" class="Function">getValidCertDeposits</a> <a id="3727" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3734" class="Symbol">(</a><a id="3735" href="Ledger.Utxow.html#5256" class="InductiveConstructor">L.UTXOW-inductive⋯</a> <a id="3754" class="Symbol">_</a> <a id="3756" class="Symbol">_</a> <a id="3758" class="Symbol">_</a> <a id="3760" class="Symbol">_</a> <a id="3762" class="Symbol">_</a> <a id="3764" class="Symbol">_</a> <a id="3766" class="Symbol">_</a> <a id="3768" class="Symbol">_</a>
    <a id="3774" class="Symbol">(</a><a id="3775" href="Ledger.Utxo.html#15387" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3793" class="Symbol">_</a> <a id="3795" class="Symbol">_</a> <a id="3797" class="Symbol">_</a> <a id="3799" class="Symbol">_</a> <a id="3801" class="Symbol">_</a> <a id="3803" class="Symbol">_</a> <a id="3805" class="Symbol">_</a> <a id="3807" class="Symbol">_</a> <a id="3809" class="Symbol">_</a> <a id="3811" class="Symbol">_</a> <a id="3813" class="Symbol">_</a> <a id="3815" class="Symbol">_</a> <a id="3817" class="Symbol">_</a> <a id="3819" class="Symbol">_</a> <a id="3821" class="Symbol">_</a> <a id="3823" class="Symbol">_</a> <a id="3825" class="Symbol">_</a> <a id="3827" class="Symbol">_</a> <a id="3829" class="Symbol">_</a>
      <a id="3837" class="Symbol">(</a><a id="3838" href="Ledger.Utxo.html#12960" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3852" class="Symbol">(</a><a id="3853" href="Ledger.Conway.Conformance.Equivalence.html#3853" class="Bound">v</a> <a id="3855" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3857" class="Symbol">_))))</a> <a id="3863" class="Symbol">=</a> <a id="3865" href="Ledger.Conway.Conformance.Equivalence.html#3853" class="Bound">v</a>

<a id="makeCertDeps*"></a><a id="3868" href="Ledger.Conway.Conformance.Equivalence.html#3868" class="Function">makeCertDeps*</a> <a id="3882" class="Symbol">:</a> <a id="3884" class="Symbol">∀</a> <a id="3886" class="Symbol">{</a><a id="3887" href="Ledger.Conway.Conformance.Equivalence.html#3887" class="Bound">Γ</a> <a id="3889" href="Ledger.Conway.Conformance.Equivalence.html#3889" class="Bound">s</a> <a id="3891" href="Ledger.Conway.Conformance.Equivalence.html#3891" class="Bound">tx</a> <a id="3894" href="Ledger.Conway.Conformance.Equivalence.html#3894" class="Bound">s&#39;</a><a id="3896" class="Symbol">}</a>
              <a id="3912" class="Symbol">→</a> <a id="3914" class="Symbol">(</a><a id="3915" class="Keyword">let</a> <a id="3919" class="Keyword">open</a> <a id="3924" href="Ledger.Utxo.html#2353" class="Module">L.UTxOEnv</a> <a id="3934" href="Ledger.Conway.Conformance.Equivalence.html#3887" class="Bound">Γ</a> <a id="3936" class="Keyword">using</a> <a id="3942" class="Symbol">(</a><a id="3943" href="Ledger.Utxo.html#2407" class="Field">pparams</a><a id="3950" class="Symbol">)</a>
                     <a id="3973" class="Keyword">open</a> <a id="3978" href="Ledger.Utxo.html#2705" class="Module">L.UTxOState</a> <a id="3990" href="Ledger.Conway.Conformance.Equivalence.html#3889" class="Bound">s</a> <a id="3992" class="Keyword">using</a> <a id="3998" class="Symbol">(</a><a id="3999" href="Ledger.Utxo.html#2813" class="Field">deposits</a><a id="4007" class="Symbol">)</a>
                     <a id="4030" class="Keyword">open</a> <a id="4035" href="Ledger.Transaction.html#2650" class="Module">TxBody</a> <a id="4042" class="Symbol">(</a><a id="4043" href="Ledger.Conway.Conformance.Equivalence.html#3891" class="Bound">tx</a> <a id="4046" class="Symbol">.</a><a id="4047" href="Ledger.Transaction.html#4226" class="Field">Tx.body</a><a id="4054" class="Symbol">)</a> <a id="4056" class="Keyword">using</a> <a id="4062" class="Symbol">(</a><a id="4063" href="Ledger.Transaction.html#2884" class="Field">txcerts</a><a id="4070" class="Symbol">))</a>
              <a id="4087" class="Symbol">→</a> <a id="4089" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="4097" href="Ledger.Conway.Conformance.Equivalence.html#3891" class="Bound">tx</a> <a id="4100" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4102" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
              <a id="4121" class="Symbol">→</a> <a id="4123" href="Ledger.Conway.Conformance.Equivalence.html#3887" class="Bound">Γ</a> <a id="4125" href="Ledger.Utxow.html#3731" class="Datatype Operator">L.⊢</a> <a id="4129" href="Ledger.Conway.Conformance.Equivalence.html#3889" class="Bound">s</a> <a id="4131" href="Ledger.Utxow.html#3731" class="Datatype Operator">⇀⦇</a> <a id="4134" href="Ledger.Conway.Conformance.Equivalence.html#3891" class="Bound">tx</a> <a id="4137" href="Ledger.Utxow.html#3731" class="Datatype Operator">,UTXOW⦈</a> <a id="4145" href="Ledger.Conway.Conformance.Equivalence.html#3894" class="Bound">s&#39;</a>
              <a id="4162" class="Symbol">→</a> <a id="4164" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3915" class="Record">CertDeps*</a> <a id="4174" href="Ledger.Utxo.html#2407" class="Function">pparams</a> <a id="4182" href="Ledger.Transaction.html#2884" class="Function">txcerts</a>
<a id="4190" href="Ledger.Conway.Conformance.Equivalence.html#3868" class="Function">makeCertDeps*</a> <a id="4204" class="Symbol">{</a><a id="4205" class="Argument">s</a> <a id="4207" class="Symbol">=</a> <a id="4209" href="Ledger.Conway.Conformance.Equivalence.html#4209" class="Bound">s</a><a id="4210" class="Symbol">}</a> <a id="4212" href="Ledger.Conway.Conformance.Equivalence.html#4212" class="Bound">valid</a> <a id="4218" href="Ledger.Conway.Conformance.Equivalence.html#4218" class="Bound">r</a> <a id="4220" class="Symbol">=</a> <a id="4222" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3990" class="InductiveConstructor Operator">⟦</a> <a id="4224" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="4234" href="Ledger.Utxo.html#2813" class="Function">deposits</a> <a id="4243" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3990" class="InductiveConstructor Operator">,</a> <a id="4245" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="4255" href="Ledger.Utxo.html#2813" class="Function">deposits</a> <a id="4264" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3990" class="InductiveConstructor Operator">,</a> <a id="4266" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#7576" class="Function">validDDeps</a> <a id="4277" href="Ledger.Conway.Conformance.Equivalence.html#4365" class="Function">validDeps</a> <a id="4287" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3990" class="InductiveConstructor Operator">,</a> <a id="4289" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#8665" class="Function">validGDeps</a> <a id="4300" href="Ledger.Conway.Conformance.Equivalence.html#4365" class="Function">validDeps</a> <a id="4310" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3990" class="InductiveConstructor Operator">⟧*</a>
  <a id="4315" class="Keyword">where</a>
    <a id="4325" class="Keyword">open</a> <a id="4330" href="Ledger.Utxo.html#2705" class="Module">L.UTxOState</a> <a id="4342" href="Ledger.Conway.Conformance.Equivalence.html#4209" class="Bound">s</a> <a id="4344" class="Keyword">using</a> <a id="4350" class="Symbol">(</a><a id="4351" href="Ledger.Utxo.html#2813" class="Field">deposits</a><a id="4359" class="Symbol">)</a>
    <a id="4365" href="Ledger.Conway.Conformance.Equivalence.html#4365" class="Function">validDeps</a> <a id="4375" class="Symbol">=</a> <a id="4377" href="Ledger.Conway.Conformance.Equivalence.html#3316" class="Function">getValidCertDeposits</a> <a id="4398" href="Ledger.Conway.Conformance.Equivalence.html#4212" class="Bound">valid</a> <a id="4404" href="Ledger.Conway.Conformance.Equivalence.html#4218" class="Bound">r</a>

<a id="lem-cert-deposits-valid"></a><a id="4407" href="Ledger.Conway.Conformance.Equivalence.html#4407" class="Function">lem-cert-deposits-valid</a> <a id="4431" class="Symbol">:</a> <a id="4433" class="Symbol">∀</a> <a id="4435" class="Symbol">{</a><a id="4436" href="Ledger.Conway.Conformance.Equivalence.html#4436" class="Bound">Γ</a> <a id="4438" href="Ledger.Conway.Conformance.Equivalence.html#4438" class="Bound">s</a> <a id="4440" href="Ledger.Conway.Conformance.Equivalence.html#4440" class="Bound">tx</a> <a id="4443" href="Ledger.Conway.Conformance.Equivalence.html#4443" class="Bound">s&#39;</a><a id="4445" class="Symbol">}</a> <a id="4447" class="Symbol">(</a><a id="4448" class="Keyword">open</a> <a id="4453" href="Ledger.Ledger.html#545" class="Module">L.LEnv</a> <a id="4460" href="Ledger.Conway.Conformance.Equivalence.html#4436" class="Bound">Γ</a> <a id="4462" class="Keyword">using</a> <a id="4468" class="Symbol">(</a><a id="4469" href="Ledger.Ledger.html#633" class="Field">pparams</a><a id="4476" class="Symbol">))</a>
                        <a id="4503" class="Symbol">→</a> <a id="4505" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="4513" href="Ledger.Conway.Conformance.Equivalence.html#4440" class="Bound">tx</a> <a id="4516" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4518" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                        <a id="4547" class="Symbol">→</a> <a id="4549" href="Ledger.Conway.Conformance.Equivalence.html#4436" class="Bound">Γ</a> <a id="4551" href="Ledger.Ledger.html#2581" class="Datatype Operator">L.⊢</a> <a id="4555" href="Ledger.Conway.Conformance.Equivalence.html#4438" class="Bound">s</a> <a id="4557" href="Ledger.Ledger.html#2581" class="Datatype Operator">⇀⦇</a> <a id="4560" href="Ledger.Conway.Conformance.Equivalence.html#4440" class="Bound">tx</a> <a id="4563" href="Ledger.Ledger.html#2581" class="Datatype Operator">,LEDGER⦈</a> <a id="4572" href="Ledger.Conway.Conformance.Equivalence.html#4443" class="Bound">s&#39;</a>
                        <a id="4599" class="Symbol">→</a> <a id="4601" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2869" class="Function">updateLedgerDeps</a> <a id="4618" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="4626" href="Ledger.Conway.Conformance.Equivalence.html#4440" class="Bound">tx</a> <a id="4629" class="Symbol">(</a><a id="4630" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="4643" href="Ledger.Conway.Conformance.Equivalence.html#4438" class="Bound">s</a><a id="4644" class="Symbol">)</a> <a id="4646" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="4649" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="4662" href="Ledger.Conway.Conformance.Equivalence.html#4443" class="Bound">s&#39;</a>
<a id="4665" href="Ledger.Conway.Conformance.Equivalence.html#4407" class="Function">lem-cert-deposits-valid</a> <a id="4689" class="Symbol">{</a><a id="4690" href="Ledger.Conway.Conformance.Equivalence.html#4690" class="Bound">Γ</a><a id="4691" class="Symbol">}</a> <a id="4693" class="Symbol">{</a><a id="4694" href="Ledger.Conway.Conformance.Equivalence.html#4694" class="Bound">s</a><a id="4695" class="Symbol">}</a> <a id="4697" class="Symbol">{</a><a id="4698" href="Ledger.Conway.Conformance.Equivalence.html#4698" class="Bound">tx</a><a id="4700" class="Symbol">}</a> <a id="4702" class="Symbol">{</a><a id="4703" href="Ledger.Conway.Conformance.Equivalence.html#4703" class="Bound">s&#39;</a><a id="4705" class="Symbol">}</a> <a id="4707" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4712" class="Symbol">(</a><a id="4713" href="Ledger.Ledger.html#3584" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="4725" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4730" href="Ledger.Conway.Conformance.Equivalence.html#4730" class="Bound">utxow</a> <a id="4736" href="Ledger.Conway.Conformance.Equivalence.html#4736" class="Bound">certs</a> <a id="4742" href="Ledger.Conway.Conformance.Equivalence.html#4742" class="Bound">gov</a><a id="4745" class="Symbol">)</a> <a id="4747" class="Keyword">rewrite</a> <a id="4755" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="4759" class="Symbol">(</a><a id="4760" href="Ledger.Conway.Conformance.Equivalence.html#2918" class="Function">lemUpdateDeposits</a> <a id="4778" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4783" href="Ledger.Conway.Conformance.Equivalence.html#4730" class="Bound">utxow</a><a id="4788" class="Symbol">)</a> <a id="4790" class="Symbol">=</a>
  <a id="4794" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18888" class="Function">lem-upd-ddeps</a> <a id="4808" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="4816" href="Ledger.Conway.Conformance.Equivalence.html#4904" class="Function">deps</a> <a id="4821" href="Ledger.Conway.Conformance.Equivalence.html#4698" class="Bound">tx</a> <a id="4824" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
  <a id="4828" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19661" class="Function">lem-upd-gdeps</a> <a id="4842" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="4850" href="Ledger.Conway.Conformance.Equivalence.html#4904" class="Function">deps</a> <a id="4855" href="Ledger.Conway.Conformance.Equivalence.html#4698" class="Bound">tx</a>
  <a id="4860" class="Keyword">where</a>
    <a id="4870" class="Keyword">open</a> <a id="4875" href="Ledger.Ledger.html#545" class="Module">L.LEnv</a> <a id="4882" href="Ledger.Conway.Conformance.Equivalence.html#4690" class="Bound">Γ</a> <a id="4884" class="Keyword">using</a> <a id="4890" class="Symbol">(</a><a id="4891" href="Ledger.Ledger.html#633" class="Field">pparams</a><a id="4898" class="Symbol">)</a>
    <a id="4904" href="Ledger.Conway.Conformance.Equivalence.html#4904" class="Function">deps</a> <a id="4909" class="Symbol">=</a> <a id="4911" href="Ledger.Conway.Conformance.Equivalence.html#4694" class="Bound">s</a> <a id="4913" class="Symbol">.</a><a id="4914" href="Ledger.Ledger.html#868" class="Field">L.LState.utxoSt</a> <a id="4930" class="Symbol">.</a> <a id="4932" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a>

<a id="lem-cert-deposits-invalid"></a><a id="4954" href="Ledger.Conway.Conformance.Equivalence.html#4954" class="Function">lem-cert-deposits-invalid</a> <a id="4980" class="Symbol">:</a> <a id="4982" class="Symbol">∀</a> <a id="4984" class="Symbol">{</a><a id="4985" href="Ledger.Conway.Conformance.Equivalence.html#4985" class="Bound">Γ</a> <a id="4987" href="Ledger.Conway.Conformance.Equivalence.html#4987" class="Bound">s</a> <a id="4989" href="Ledger.Conway.Conformance.Equivalence.html#4989" class="Bound">tx</a> <a id="4992" href="Ledger.Conway.Conformance.Equivalence.html#4992" class="Bound">s&#39;</a><a id="4994" class="Symbol">}</a> <a id="4996" class="Symbol">(</a><a id="4997" class="Keyword">open</a> <a id="5002" href="Ledger.Ledger.html#545" class="Module">L.LEnv</a> <a id="5009" href="Ledger.Conway.Conformance.Equivalence.html#4985" class="Bound">Γ</a> <a id="5011" class="Keyword">using</a> <a id="5017" class="Symbol">(</a><a id="5018" href="Ledger.Ledger.html#633" class="Field">pparams</a><a id="5025" class="Symbol">))</a>
                        <a id="5052" class="Symbol">→</a> <a id="5054" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="5062" href="Ledger.Conway.Conformance.Equivalence.html#4989" class="Bound">tx</a> <a id="5065" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5067" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                        <a id="5097" class="Symbol">→</a> <a id="5099" href="Ledger.Conway.Conformance.Equivalence.html#4985" class="Bound">Γ</a> <a id="5101" href="Ledger.Ledger.html#2581" class="Datatype Operator">L.⊢</a> <a id="5105" href="Ledger.Conway.Conformance.Equivalence.html#4987" class="Bound">s</a> <a id="5107" href="Ledger.Ledger.html#2581" class="Datatype Operator">⇀⦇</a> <a id="5110" href="Ledger.Conway.Conformance.Equivalence.html#4989" class="Bound">tx</a> <a id="5113" href="Ledger.Ledger.html#2581" class="Datatype Operator">,LEDGER⦈</a> <a id="5122" href="Ledger.Conway.Conformance.Equivalence.html#4992" class="Bound">s&#39;</a>
                        <a id="5149" class="Symbol">→</a> <a id="5151" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="5164" href="Ledger.Conway.Conformance.Equivalence.html#4987" class="Bound">s</a> <a id="5166" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="5169" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="5182" href="Ledger.Conway.Conformance.Equivalence.html#4992" class="Bound">s&#39;</a>
<a id="5185" href="Ledger.Conway.Conformance.Equivalence.html#4954" class="Function">lem-cert-deposits-invalid</a> <a id="5211" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5216" class="Symbol">(</a><a id="5217" href="Ledger.Ledger.html#3637" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="5229" class="Symbol">_</a> <a id="5231" href="Ledger.Conway.Conformance.Equivalence.html#5231" class="Bound">utxow</a><a id="5236" class="Symbol">)</a> <a id="5238" class="Keyword">rewrite</a> <a id="5246" href="Ledger.Conway.Conformance.Equivalence.html#1516" class="Function">lemInvalidDepositsL</a> <a id="5266" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5271" href="Ledger.Conway.Conformance.Equivalence.html#5231" class="Bound">utxow</a> <a id="5277" class="Symbol">=</a>
  <a id="5281" class="Symbol">(</a><a id="5282" href="Function.Base.html#704" class="Function">id</a> <a id="5285" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5287" href="Function.Base.html#704" class="Function">id</a><a id="5289" class="Symbol">)</a> <a id="5291" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5293" class="Symbol">(</a><a id="5294" href="Function.Base.html#704" class="Function">id</a> <a id="5297" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5299" href="Function.Base.html#704" class="Function">id</a><a id="5301" class="Symbol">)</a>

<a id="5304" class="Keyword">instance</a>
  <a id="LStateToConf"></a><a id="5315" href="Ledger.Conway.Conformance.Equivalence.html#5315" class="Function">LStateToConf</a> <a id="5328" class="Symbol">:</a> <a id="5330" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="5341" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5343" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="5354" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="5356" href="Ledger.Ledger.html#809" class="Record">L.LState</a> <a id="5365" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="5367" href="Ledger.Conway.Conformance.Ledger.html#695" class="Record">C.LState</a>
  <a id="5378" href="Ledger.Conway.Conformance.Equivalence.html#5315" class="Function">LStateToConf</a> <a id="5391" class="Symbol">.</a><a id="5392" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="5398" href="Ledger.Conway.Conformance.Equivalence.html#5398" class="Bound">deposits</a> <a id="5407" href="Ledger.Conway.Conformance.Equivalence.html#5407" class="Bound">ledgerSt</a> <a id="5416" class="Symbol">=</a>
    <a id="5422" class="Keyword">let</a> <a id="5426" class="Keyword">open</a> <a id="5431" href="Ledger.Ledger.html#809" class="Module">L.LState</a> <a id="5440" href="Ledger.Conway.Conformance.Equivalence.html#5407" class="Bound">ledgerSt</a> <a id="5449" class="Keyword">in</a>
    <a id="5456" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="5458" href="Ledger.Ledger.html#868" class="Field">utxoSt</a> <a id="5465" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5467" href="Ledger.Ledger.html#895" class="Field">govSt</a> <a id="5473" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5475" href="Ledger.Conway.Conformance.Equivalence.html#5398" class="Bound">deposits</a> <a id="5484" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="5490" href="Ledger.Ledger.html#921" class="Field">certState</a> <a id="5500" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a>

<a id="5503" class="Keyword">instance</a>
  <a id="5514" class="Comment">-- LEDGERToConf : ∀ {Γ s tx s&#39;}</a>
  <a id="5548" class="Comment">--              → (∃[ certDeposits-s ] certDeposits-s ≡ᵈ certDeposits s)</a>
  <a id="5623" class="Comment">--              ⊢ Γ L.⊢ s ⇀⦇ tx ,LEDGER⦈ s&#39; ⭆ⁱ λ (certDeposits-s , _) _ →</a>
  <a id="5699" class="Comment">--                ∃[ certDeposits-s&#39; ]</a>
  <a id="5740" class="Comment">--                   certDeposits-s&#39; ≡ᵈ certDeposits s&#39;</a>
  <a id="5798" class="Comment">--                 × Γ C.⊢ (certDeposits s ⊢conv s) ⇀⦇ tx ,LEDGER⦈ (certDeposits-s&#39; ⊢conv s&#39;)</a>
  <a id="LEDGERToConf"></a><a id="5894" href="Ledger.Conway.Conformance.Equivalence.html#5894" class="Function">LEDGERToConf</a> <a id="5907" class="Symbol">:</a> <a id="5909" class="Symbol">∀</a> <a id="5911" class="Symbol">{</a><a id="5912" href="Ledger.Conway.Conformance.Equivalence.html#5912" class="Bound">Γ</a> <a id="5914" href="Ledger.Conway.Conformance.Equivalence.html#5914" class="Bound">s</a> <a id="5916" href="Ledger.Conway.Conformance.Equivalence.html#5916" class="Bound">tx</a> <a id="5919" href="Ledger.Conway.Conformance.Equivalence.html#5919" class="Bound">s&#39;</a><a id="5921" class="Symbol">}</a>
               <a id="5938" class="Symbol">→</a> <a id="5940" href="Ledger.Conway.Conformance.Equivalence.html#5912" class="Bound">Γ</a> <a id="5942" href="Ledger.Ledger.html#2581" class="Datatype Operator">L.⊢</a> <a id="5946" href="Ledger.Conway.Conformance.Equivalence.html#5914" class="Bound">s</a> <a id="5948" href="Ledger.Ledger.html#2581" class="Datatype Operator">⇀⦇</a> <a id="5951" href="Ledger.Conway.Conformance.Equivalence.html#5916" class="Bound">tx</a> <a id="5954" href="Ledger.Ledger.html#2581" class="Datatype Operator">,LEDGER⦈</a> <a id="5963" href="Ledger.Conway.Conformance.Equivalence.html#5919" class="Bound">s&#39;</a> <a id="5966" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a>
                 <a id="5985" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="5988" href="Ledger.Conway.Conformance.Equivalence.html#5988" class="Bound">certDeposits-s&#39;</a> <a id="6004" href="Data.Product.Base.html#1371" class="Function">]</a>
                    <a id="6026" href="Ledger.Conway.Conformance.Equivalence.html#5988" class="Bound">certDeposits-s&#39;</a> <a id="6042" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="6045" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="6058" href="Ledger.Conway.Conformance.Equivalence.html#5919" class="Bound">s&#39;</a>
                  <a id="6079" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6081" href="Ledger.Conway.Conformance.Equivalence.html#5912" class="Bound">Γ</a> <a id="6083" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="6087" class="Symbol">(</a><a id="6088" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="6101" href="Ledger.Conway.Conformance.Equivalence.html#5914" class="Bound">s</a> <a id="6103" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6109" href="Ledger.Conway.Conformance.Equivalence.html#5914" class="Bound">s</a><a id="6110" class="Symbol">)</a> <a id="6112" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="6115" href="Ledger.Conway.Conformance.Equivalence.html#5916" class="Bound">tx</a> <a id="6118" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="6127" class="Symbol">(</a><a id="6128" href="Ledger.Conway.Conformance.Equivalence.html#5988" class="Bound">certDeposits-s&#39;</a> <a id="6144" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6150" href="Ledger.Conway.Conformance.Equivalence.html#5919" class="Bound">s&#39;</a><a id="6152" class="Symbol">)</a>
  <a id="6156" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , eq-cdeps) r@(L.LEDGER-V⋯ refl utxow certs gov) =</a>
  <a id="6257" href="Ledger.Conway.Conformance.Equivalence.html#5894" class="Function">LEDGERToConf</a> <a id="6270" class="Symbol">{</a><a id="6271" href="Ledger.Conway.Conformance.Equivalence.html#6271" class="Bound">Γ</a><a id="6272" class="Symbol">}</a> <a id="6274" class="Symbol">{</a><a id="6275" href="Ledger.Conway.Conformance.Equivalence.html#6275" class="Bound">s</a><a id="6276" class="Symbol">}</a> <a id="6278" class="Symbol">{</a><a id="6279" href="Ledger.Conway.Conformance.Equivalence.html#6279" class="Bound">tx</a><a id="6281" class="Symbol">}</a> <a id="6283" class="Symbol">{</a><a id="6284" href="Ledger.Conway.Conformance.Equivalence.html#6284" class="Bound">s&#39;</a><a id="6286" class="Symbol">}</a> <a id="6288" class="Symbol">.</a><a id="6289" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="6295" class="Symbol">_</a> <a id="6297" href="Ledger.Conway.Conformance.Equivalence.html#6297" class="Bound">r</a><a id="6298" class="Symbol">@(</a><a id="6300" href="Ledger.Ledger.html#3584" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="6312" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6317" href="Ledger.Conway.Conformance.Equivalence.html#6317" class="Bound">utxow</a> <a id="6323" href="Ledger.Conway.Conformance.Equivalence.html#6323" class="Bound">certs</a> <a id="6329" href="Ledger.Conway.Conformance.Equivalence.html#6329" class="Bound">gov</a><a id="6332" class="Symbol">)</a> <a id="6334" class="Symbol">=</a>
    <a id="6340" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2869" class="Function">updateLedgerDeps</a> <a id="6357" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="6365" href="Ledger.Conway.Conformance.Equivalence.html#6279" class="Bound">tx</a> <a id="6368" class="Symbol">(</a><a id="6369" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="6382" href="Ledger.Conway.Conformance.Equivalence.html#6275" class="Bound">s</a><a id="6383" class="Symbol">)</a>
    <a id="6389" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6391" href="Ledger.Conway.Conformance.Equivalence.html#4407" class="Function">lem-cert-deposits-valid</a> <a id="6415" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6420" href="Ledger.Conway.Conformance.Equivalence.html#6297" class="Bound">r</a>
    <a id="6426" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6428" href="Relation.Binary.PropositionalEquality.Core.html#2044" class="Function">subst₂</a> <a id="6435" class="Symbol">(λ</a> <a id="6438" href="Ledger.Conway.Conformance.Equivalence.html#6438" class="Bound">•</a> <a id="6440" href="Ledger.Conway.Conformance.Equivalence.html#6440" class="Bound">◆</a> <a id="6442" class="Symbol">→</a> <a id="6444" href="Ledger.Conway.Conformance.Equivalence.html#6271" class="Bound">Γ</a> <a id="6446" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="6450" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4851" class="Function">getCertDeps*</a> <a id="6463" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a> <a id="6473" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6479" href="Ledger.Conway.Conformance.Equivalence.html#6275" class="Bound">s</a> <a id="6481" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="6484" href="Ledger.Conway.Conformance.Equivalence.html#6279" class="Bound">tx</a> <a id="6487" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="6496" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="6498" href="Ledger.Conway.Conformance.Equivalence.html#6438" class="Bound">•</a> <a id="6500" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6502" class="Symbol">_</a> <a id="6504" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6506" href="Ledger.Conway.Conformance.Equivalence.html#6440" class="Bound">◆</a> <a id="6508" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="6509" class="Symbol">)</a>
             <a id="6524" href="Ledger.Conway.Conformance.Equivalence.html#7419" class="Function">utxoEq</a> <a id="6531" href="Ledger.Conway.Conformance.Equivalence.html#7641" class="Function">certsEq</a> <a id="6539" href="Ledger.Conway.Conformance.Equivalence.html#7259" class="Function">ledger&#39;</a>
    <a id="6551" class="Keyword">where</a>
      <a id="6563" class="Keyword">open</a> <a id="6568" href="Ledger.Ledger.html#545" class="Module">L.LEnv</a> <a id="6575" href="Ledger.Conway.Conformance.Equivalence.html#6271" class="Bound">Γ</a>
      <a id="6583" class="Keyword">open</a> <a id="6588" href="Ledger.Ledger.html#809" class="Module">L.LState</a> <a id="6597" href="Ledger.Conway.Conformance.Equivalence.html#6275" class="Bound">s</a>
      <a id="6605" class="Keyword">open</a> <a id="6610" href="Ledger.Ledger.html#809" class="Module">L.LState</a> <a id="6619" href="Ledger.Conway.Conformance.Equivalence.html#6284" class="Bound">s&#39;</a> <a id="6622" class="Keyword">renaming</a> <a id="6631" class="Symbol">(</a><a id="6632" href="Ledger.Ledger.html#868" class="Field">utxoSt</a> <a id="6639" class="Symbol">to</a> <a id="6642" class="Field">utxoSt&#39;</a><a id="6649" class="Symbol">;</a> <a id="6651" href="Ledger.Ledger.html#921" class="Field">certState</a> <a id="6661" class="Symbol">to</a> <a id="6664" class="Field">certState&#39;</a><a id="6674" class="Symbol">;</a> <a id="6676" href="Ledger.Ledger.html#895" class="Field">govSt</a> <a id="6682" class="Symbol">to</a> <a id="6685" class="Field">govSt&#39;</a><a id="6691" class="Symbol">)</a>
      <a id="6699" class="Keyword">open</a> <a id="6704" href="Ledger.Transaction.html#2650" class="Module">TxBody</a> <a id="6711" class="Symbol">(</a><a id="6712" href="Ledger.Transaction.html#4226" class="Field">body</a> <a id="6717" href="Ledger.Conway.Conformance.Equivalence.html#6279" class="Bound">tx</a><a id="6719" class="Symbol">)</a> <a id="6721" class="Keyword">using</a> <a id="6727" class="Symbol">(</a><a id="6728" href="Ledger.Transaction.html#2884" class="Field">txcerts</a><a id="6735" class="Symbol">)</a>
      <a id="6743" href="Ledger.Conway.Conformance.Equivalence.html#6743" class="Function">deposits</a> <a id="6752" class="Symbol">=</a> <a id="6754" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="6775" href="Ledger.Ledger.html#868" class="Function">utxoSt</a>
      <a id="6788" href="Ledger.Conway.Conformance.Equivalence.html#6788" class="Function">utxow&#39;</a> <a id="6795" class="Symbol">:</a> <a id="6797" class="Symbol">_</a> <a id="6799" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">C.⊢</a> <a id="6803" href="Ledger.Ledger.html#868" class="Function">utxoSt</a> <a id="6810" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">⇀⦇</a> <a id="6813" href="Ledger.Conway.Conformance.Equivalence.html#6279" class="Bound">tx</a> <a id="6816" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">,UTXOW⦈</a> <a id="6824" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#947" class="Function">setDeposits</a> <a id="6836" href="Ledger.Conway.Conformance.Equivalence.html#6743" class="Function">deposits</a> <a id="6845" href="Ledger.Conway.Conformance.Equivalence.html#6642" class="Function">utxoSt&#39;</a>
      <a id="6859" href="Ledger.Conway.Conformance.Equivalence.html#6788" class="Function">utxow&#39;</a> <a id="6866" class="Symbol">=</a> <a id="6868" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="6873" href="Ledger.Conway.Conformance.Equivalence.html#6317" class="Bound">utxow</a>
      <a id="6885" href="Ledger.Conway.Conformance.Equivalence.html#6885" class="Function">utxoStC&#39;</a>    <a id="6897" class="Symbol">=</a> <a id="6899" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#947" class="Function">setDeposits</a> <a id="6911" class="Symbol">(</a><a id="6912" href="Ledger.Utxo.html#9297" class="Function">L.updateDeposits</a> <a id="6929" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="6937" class="Symbol">(</a><a id="6938" href="Ledger.Transaction.html#4226" class="Field">body</a> <a id="6943" href="Ledger.Conway.Conformance.Equivalence.html#6279" class="Bound">tx</a><a id="6945" class="Symbol">)</a> <a id="6947" href="Ledger.Conway.Conformance.Equivalence.html#6743" class="Function">deposits</a><a id="6955" class="Symbol">)</a> <a id="6957" href="Ledger.Conway.Conformance.Equivalence.html#6642" class="Function">utxoSt&#39;</a>
      <a id="6971" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a>  <a id="6982" class="Symbol">=</a> <a id="6984" href="Ledger.Conway.Conformance.Equivalence.html#3868" class="Function">makeCertDeps*</a> <a id="6998" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7003" href="Ledger.Conway.Conformance.Equivalence.html#6317" class="Bound">utxow</a>
      <a id="7015" href="Ledger.Conway.Conformance.Equivalence.html#7015" class="Function">cdeposits&#39;</a> <a id="7026" class="Symbol">=</a> <a id="7028" href="Ledger.Conway.Conformance.Equivalence.Certs.html#5633" class="Function">updateCertDeps*</a> <a id="7044" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="7052" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a>
      <a id="7068" href="Ledger.Conway.Conformance.Equivalence.html#7068" class="Function">certStateC&#39;</a> <a id="7080" class="Symbol">=</a> <a id="7082" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4851" class="Function">getCertDeps*</a> <a id="7095" href="Ledger.Conway.Conformance.Equivalence.html#7015" class="Function">cdeposits&#39;</a> <a id="7106" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7112" href="Ledger.Conway.Conformance.Equivalence.html#6664" class="Function">certState&#39;</a>
      <a id="7129" href="Ledger.Conway.Conformance.Equivalence.html#7129" class="Function">certs&#39;</a> <a id="7136" class="Symbol">:</a> <a id="7138" class="Symbol">_</a> <a id="7140" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">C.⊢</a> <a id="7144" class="Symbol">(</a><a id="7145" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4851" class="Function">getCertDeps*</a> <a id="7158" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a> <a id="7168" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7174" href="Ledger.Ledger.html#921" class="Function">certState</a><a id="7183" class="Symbol">)</a> <a id="7185" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">⇀⦇</a> <a id="7188" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="7196" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">,CERTS⦈</a> <a id="7204" href="Ledger.Conway.Conformance.Equivalence.html#7068" class="Function">certStateC&#39;</a>
      <a id="7222" href="Ledger.Conway.Conformance.Equivalence.html#7129" class="Function">certs&#39;</a> <a id="7229" class="Symbol">=</a> <a id="7231" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a> <a id="7241" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7247" href="Ledger.Conway.Conformance.Equivalence.html#6323" class="Bound">certs</a>
      <a id="7259" href="Ledger.Conway.Conformance.Equivalence.html#7259" class="Function">ledger&#39;</a> <a id="7267" class="Symbol">:</a> <a id="7269" href="Ledger.Conway.Conformance.Equivalence.html#6271" class="Bound">Γ</a> <a id="7271" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="7275" class="Symbol">(</a><a id="7276" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4851" class="Function">getCertDeps*</a> <a id="7289" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a> <a id="7299" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7305" href="Ledger.Conway.Conformance.Equivalence.html#6275" class="Bound">s</a><a id="7306" class="Symbol">)</a> <a id="7308" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="7311" href="Ledger.Conway.Conformance.Equivalence.html#6279" class="Bound">tx</a> <a id="7314" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="7323" href="Ledger.Conway.Conformance.Ledger.html#729" class="InductiveConstructor Operator">C.⟦</a> <a id="7327" href="Ledger.Conway.Conformance.Equivalence.html#6885" class="Function">utxoStC&#39;</a> <a id="7336" href="Ledger.Conway.Conformance.Ledger.html#729" class="InductiveConstructor Operator">,</a> <a id="7338" href="Ledger.Conway.Conformance.Equivalence.html#6685" class="Function">govSt&#39;</a> <a id="7345" href="Ledger.Conway.Conformance.Ledger.html#729" class="InductiveConstructor Operator">,</a> <a id="7347" href="Ledger.Conway.Conformance.Equivalence.html#7068" class="Function">certStateC&#39;</a> <a id="7359" href="Ledger.Conway.Conformance.Ledger.html#729" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="7368" href="Ledger.Conway.Conformance.Equivalence.html#7259" class="Function">ledger&#39;</a> <a id="7376" class="Symbol">=</a> <a id="7378" href="Ledger.Conway.Conformance.Ledger.html#2084" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="7390" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7395" href="Ledger.Conway.Conformance.Equivalence.html#6788" class="Function">utxow&#39;</a> <a id="7402" href="Ledger.Conway.Conformance.Equivalence.html#7129" class="Function">certs&#39;</a> <a id="7409" href="Ledger.Conway.Conformance.Equivalence.html#6329" class="Bound">gov</a>
      <a id="7419" href="Ledger.Conway.Conformance.Equivalence.html#7419" class="Function">utxoEq</a>  <a id="7427" class="Symbol">:</a> <a id="7429" href="Ledger.Conway.Conformance.Equivalence.html#6885" class="Function">utxoStC&#39;</a> <a id="7438" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7440" href="Ledger.Conway.Conformance.Equivalence.html#6642" class="Function">utxoSt&#39;</a>
      <a id="7454" href="Ledger.Conway.Conformance.Equivalence.html#7419" class="Function">utxoEq</a>  <a id="7462" class="Symbol">=</a> <a id="7464" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="7469" class="Symbol">(λ</a> <a id="7472" href="Ledger.Conway.Conformance.Equivalence.html#7472" class="Bound">•</a> <a id="7474" class="Symbol">→</a> <a id="7476" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7478" class="Symbol">_</a> <a id="7480" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7482" class="Symbol">_</a> <a id="7484" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7486" href="Ledger.Conway.Conformance.Equivalence.html#7472" class="Bound">•</a> <a id="7488" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7490" class="Symbol">_</a> <a id="7492" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="7493" class="Symbol">)</a>
                     <a id="7516" class="Symbol">(</a><a id="7517" href="Ledger.Conway.Conformance.Equivalence.html#2918" class="Function">lemUpdateDeposits</a> <a id="7535" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7540" href="Ledger.Conway.Conformance.Equivalence.html#6317" class="Bound">utxow</a><a id="7545" class="Symbol">)</a>
      <a id="7553" href="Ledger.Conway.Conformance.Equivalence.html#7553" class="Function">ddeps</a> <a id="7559" class="Symbol">=</a> <a id="7561" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4851" class="Function">getCertDeps*</a> <a id="7574" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a> <a id="7584" class="Symbol">.</a><a id="7585" href="Data.Product.Base.html#636" class="Field">proj₁</a>
      <a id="7597" href="Ledger.Conway.Conformance.Equivalence.html#7597" class="Function">gdeps</a> <a id="7603" class="Symbol">=</a> <a id="7605" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4851" class="Function">getCertDeps*</a> <a id="7618" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a> <a id="7628" class="Symbol">.</a><a id="7629" href="Data.Product.Base.html#650" class="Field">proj₂</a>
      <a id="7641" href="Ledger.Conway.Conformance.Equivalence.html#7641" class="Function">certsEq</a> <a id="7649" class="Symbol">:</a> <a id="7651" href="Ledger.Conway.Conformance.Equivalence.html#7068" class="Function">certStateC&#39;</a> <a id="7663" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7665" class="Symbol">(</a><a id="7666" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="7678" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="7686" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="7694" href="Ledger.Conway.Conformance.Equivalence.html#7553" class="Function">ddeps</a> <a id="7700" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7702" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="7714" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="7722" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="7730" href="Ledger.Conway.Conformance.Equivalence.html#7597" class="Function">gdeps</a><a id="7735" class="Symbol">)</a> <a id="7737" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7743" href="Ledger.Conway.Conformance.Equivalence.html#6664" class="Function">certState&#39;</a>
      <a id="7760" href="Ledger.Conway.Conformance.Equivalence.html#7641" class="Function">certsEq</a> <a id="7768" class="Symbol">=</a> <a id="7770" href="Relation.Binary.PropositionalEquality.Core.html#1576" class="Function">cong₂</a> <a id="7776" class="Symbol">(λ</a> <a id="7779" href="Ledger.Conway.Conformance.Equivalence.html#7779" class="Bound">•</a> <a id="7781" href="Ledger.Conway.Conformance.Equivalence.html#7781" class="Bound">◆</a> <a id="7783" class="Symbol">→</a> <a id="7785" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7787" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7789" class="Symbol">_</a> <a id="7791" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7793" class="Symbol">_</a> <a id="7795" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7797" class="Symbol">_</a> <a id="7799" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7801" href="Ledger.Conway.Conformance.Equivalence.html#7779" class="Bound">•</a> <a id="7803" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="7805" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7807" class="Symbol">_</a> <a id="7809" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7811" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="7813" class="Symbol">_</a> <a id="7815" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7817" class="Symbol">_</a> <a id="7819" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7821" href="Ledger.Conway.Conformance.Equivalence.html#7781" class="Bound">◆</a> <a id="7823" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="7825" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="7826" class="Symbol">)</a>
                     <a id="7849" class="Symbol">(</a><a id="7850" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#10884" class="Function">lem-ddeps</a> <a id="7860" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a><a id="7869" class="Symbol">)</a>
                     <a id="7892" class="Symbol">(</a><a id="7893" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#11797" class="Function">lem-gdeps</a> <a id="7903" href="Ledger.Conway.Conformance.Equivalence.html#6971" class="Function">cdeposits</a><a id="7912" class="Symbol">)</a>

  <a id="7917" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , cdeps-eq) r@(L.LEDGER-I⋯ refl utxow) =</a>
  <a id="8008" href="Ledger.Conway.Conformance.Equivalence.html#5894" class="Function">LEDGERToConf</a> <a id="8021" class="Symbol">{</a><a id="8022" href="Ledger.Conway.Conformance.Equivalence.html#8022" class="Bound">Γ</a><a id="8023" class="Symbol">}</a> <a id="8025" class="Symbol">{</a><a id="8026" href="Ledger.Conway.Conformance.Equivalence.html#8026" class="Bound">s</a><a id="8027" class="Symbol">}</a> <a id="8029" class="Symbol">{</a><a id="8030" href="Ledger.Conway.Conformance.Equivalence.html#8030" class="Bound">tx</a><a id="8032" class="Symbol">}</a> <a id="8034" class="Symbol">{</a><a id="8035" href="Ledger.Conway.Conformance.Equivalence.html#8035" class="Bound">s&#39;</a><a id="8037" class="Symbol">}</a> <a id="8039" class="Symbol">.</a><a id="8040" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8046" class="Symbol">_</a> <a id="8048" href="Ledger.Conway.Conformance.Equivalence.html#8048" class="Bound">r</a><a id="8049" class="Symbol">@(</a><a id="8051" href="Ledger.Ledger.html#3637" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="8063" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8068" href="Ledger.Conway.Conformance.Equivalence.html#8068" class="Bound">utxow</a><a id="8073" class="Symbol">)</a> <a id="8075" class="Symbol">=</a>
    <a id="8081" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="8094" href="Ledger.Conway.Conformance.Equivalence.html#8026" class="Bound">s</a> <a id="8096" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8098" href="Ledger.Conway.Conformance.Equivalence.html#4954" class="Function">lem-cert-deposits-invalid</a> <a id="8124" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8129" href="Ledger.Conway.Conformance.Equivalence.html#8048" class="Bound">r</a> <a id="8131" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
    <a id="8137" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="8143" class="Symbol">(λ</a> <a id="8146" href="Ledger.Conway.Conformance.Equivalence.html#8146" class="Bound">•</a> <a id="8148" class="Symbol">→</a> <a id="8150" href="Ledger.Conway.Conformance.Equivalence.html#8022" class="Bound">Γ</a> <a id="8152" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="8156" class="Symbol">_</a> <a id="8158" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="8164" href="Ledger.Conway.Conformance.Equivalence.html#8026" class="Bound">s</a> <a id="8166" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="8169" href="Ledger.Conway.Conformance.Equivalence.html#8030" class="Bound">tx</a> <a id="8172" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="8181" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="8183" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="8185" class="Symbol">_</a> <a id="8187" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8189" class="Symbol">_</a> <a id="8191" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8193" href="Ledger.Conway.Conformance.Equivalence.html#8146" class="Bound">•</a> <a id="8195" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8197" class="Symbol">_</a> <a id="8199" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="8201" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8203" class="Symbol">_</a> <a id="8205" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8207" class="Symbol">_</a> <a id="8209" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="8210" class="Symbol">)</a>
          <a id="8222" class="Symbol">(</a><a id="8223" href="Ledger.Conway.Conformance.Equivalence.html#1516" class="Function">lemInvalidDepositsL</a> <a id="8243" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8248" href="Ledger.Conway.Conformance.Equivalence.html#8068" class="Bound">utxow</a><a id="8253" class="Symbol">)</a>
          <a id="8265" class="Symbol">(</a><a id="8266" href="Ledger.Conway.Conformance.Ledger.html#2137" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="8278" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8283" class="Symbol">(</a><a id="8284" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8289" href="Ledger.Conway.Conformance.Equivalence.html#8068" class="Bound">utxow</a><a id="8294" class="Symbol">))</a>

<a id="8298" class="Keyword">instance</a>

  <a id="LStateFromConf"></a><a id="8310" href="Ledger.Conway.Conformance.Equivalence.html#8310" class="Function">LStateFromConf</a> <a id="8325" class="Symbol">:</a> <a id="8327" href="Ledger.Conway.Conformance.Ledger.html#695" class="Record">C.LState</a> <a id="8336" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a> <a id="8338" href="Ledger.Ledger.html#809" class="Record">L.LState</a>
  <a id="8349" href="Ledger.Conway.Conformance.Equivalence.html#8310" class="Function">LStateFromConf</a> <a id="8364" class="Symbol">.</a><a id="8365" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8371" class="Symbol">_</a> <a id="8373" href="Ledger.Conway.Conformance.Equivalence.html#8373" class="Bound">ls</a> <a id="8376" class="Symbol">=</a>
    <a id="8382" class="Keyword">let</a> <a id="8386" class="Keyword">open</a> <a id="8391" href="Ledger.Conway.Conformance.Ledger.html#695" class="Module">C.LState</a> <a id="8400" href="Ledger.Conway.Conformance.Equivalence.html#8373" class="Bound">ls</a> <a id="8403" class="Keyword">in</a>
    <a id="8410" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="8412" href="Ledger.Conway.Conformance.Ledger.html#750" class="Field">utxoSt</a> <a id="8419" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8421" href="Ledger.Conway.Conformance.Ledger.html#777" class="Field">govSt</a> <a id="8427" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8429" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8434" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">certState</a> <a id="8444" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a>

<a id="certDepositsC"></a><a id="8447" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="8461" class="Symbol">:</a> <a id="8463" href="Ledger.Conway.Conformance.Certs.html#934" class="Record">C.CertState</a> <a id="8475" class="Symbol">→</a> <a id="8477" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="8488" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8490" href="Ledger.Certs.html#573" class="Function">L.Deposits</a>
<a id="8501" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="8515" href="Ledger.Conway.Conformance.Equivalence.html#8515" class="Bound">cs</a> <a id="8518" class="Symbol">=</a> <a id="8520" class="Keyword">let</a> <a id="8524" class="Keyword">open</a> <a id="8529" href="Ledger.Conway.Conformance.Certs.html#934" class="Module">C.CertState</a> <a id="8541" href="Ledger.Conway.Conformance.Equivalence.html#8515" class="Bound">cs</a> <a id="8544" class="Keyword">in</a> <a id="8547" href="Ledger.Conway.Conformance.Certs.html#734" class="Field">C.DState.deposits</a> <a id="8565" href="Ledger.Conway.Conformance.Certs.html#993" class="Field">dState</a> <a id="8572" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8574" href="Ledger.Conway.Conformance.Certs.html#904" class="Field">C.GState.deposits</a> <a id="8592" href="Ledger.Conway.Conformance.Certs.html#1033" class="Field">gState</a>

<a id="WellformedLState"></a><a id="8600" href="Ledger.Conway.Conformance.Equivalence.html#8600" class="Function">WellformedLState</a> <a id="8617" class="Symbol">:</a> <a id="8619" href="Ledger.Conway.Conformance.Ledger.html#695" class="Record">C.LState</a> <a id="8628" class="Symbol">→</a> <a id="8630" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8635" href="Ledger.Conway.Conformance.Equivalence.html#8600" class="Function">WellformedLState</a> <a id="8652" href="Ledger.Conway.Conformance.Equivalence.html#8652" class="Bound">s</a> <a id="8654" class="Symbol">=</a> <a id="8656" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="8670" class="Symbol">(</a><a id="8671" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">C.LState.certState</a> <a id="8690" href="Ledger.Conway.Conformance.Equivalence.html#8652" class="Bound">s</a><a id="8691" class="Symbol">)</a> <a id="8693" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="8696" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="8709" class="Symbol">(</a><a id="8710" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8715" href="Ledger.Conway.Conformance.Equivalence.html#8652" class="Bound">s</a><a id="8716" class="Symbol">)</a>

<a id="getValidCertDepositsCERTS"></a><a id="8719" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="8745" class="Symbol">:</a> <a id="8747" class="Symbol">∀</a> <a id="8749" class="Symbol">{</a><a id="8750" href="Ledger.Conway.Conformance.Equivalence.html#8750" class="Bound">Γ</a> <a id="8752" href="Ledger.Conway.Conformance.Equivalence.html#8752" class="Bound">s</a> <a id="8754" href="Ledger.Conway.Conformance.Equivalence.html#8754" class="Bound">certs</a> <a id="8760" href="Ledger.Conway.Conformance.Equivalence.html#8760" class="Bound">s&#39;</a><a id="8762" class="Symbol">}</a> <a id="8764" href="Ledger.Conway.Conformance.Equivalence.html#8764" class="Bound">deposits</a> <a id="8773" class="Symbol">(</a><a id="8774" class="Keyword">open</a> <a id="8779" href="Ledger.Certs.html#2791" class="Module">L.CertEnv</a> <a id="8789" href="Ledger.Conway.Conformance.Equivalence.html#8750" class="Bound">Γ</a> <a id="8791" class="Keyword">using</a> <a id="8797" class="Symbol">(</a><a id="8798" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="8800" class="Symbol">))</a>
                          <a id="8829" class="Symbol">→</a> <a id="8831" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="8845" href="Ledger.Conway.Conformance.Equivalence.html#8752" class="Bound">s</a> <a id="8847" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="8850" class="Symbol">(</a><a id="8851" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="8861" href="Ledger.Conway.Conformance.Equivalence.html#8764" class="Bound">deposits</a> <a id="8870" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8872" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="8882" href="Ledger.Conway.Conformance.Equivalence.html#8764" class="Bound">deposits</a><a id="8890" class="Symbol">)</a>
                          <a id="8918" class="Symbol">→</a> <a id="8920" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="8947" class="Symbol">{</a><a id="8948" class="Argument">sts</a> <a id="8952" class="Symbol">=</a> <a id="8954" href="Ledger.Conway.Conformance.Certs.html#6471" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="8969" class="Symbol">}</a> <a id="8971" href="Ledger.Conway.Conformance.Equivalence.html#8750" class="Bound">Γ</a> <a id="8973" href="Ledger.Conway.Conformance.Equivalence.html#8752" class="Bound">s</a> <a id="8975" href="Ledger.Conway.Conformance.Equivalence.html#8754" class="Bound">certs</a> <a id="8981" href="Ledger.Conway.Conformance.Equivalence.html#8760" class="Bound">s&#39;</a>
                          <a id="9010" class="Symbol">→</a> <a id="9012" href="Ledger.Utxo.html#4645" class="Datatype">L.ValidCertDeposits</a> <a id="9032" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="9035" href="Ledger.Conway.Conformance.Equivalence.html#8764" class="Bound">deposits</a> <a id="9044" href="Ledger.Conway.Conformance.Equivalence.html#8754" class="Bound">certs</a>
<a id="9050" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9076" href="Ledger.Conway.Conformance.Equivalence.html#9076" class="Bound">deposits</a> <a id="9085" href="Ledger.Conway.Conformance.Equivalence.html#9085" class="Bound">wf</a> <a id="9088" class="Symbol">(</a><a id="9089" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="9097" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="9103" class="Symbol">)</a> <a id="9105" class="Symbol">=</a> <a id="9107" href="Ledger.Utxo.html#4727" class="InductiveConstructor">L.[]</a>
<a id="9112" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9138" class="Symbol">{</a><a id="9139" href="Ledger.Conway.Conformance.Equivalence.html#9139" class="Bound">Γ</a><a id="9140" class="Symbol">}</a> <a id="9142" class="Symbol">{</a><a id="9143" href="Ledger.Conway.Conformance.Equivalence.html#9143" class="Bound">s</a><a id="9144" class="Symbol">}</a> <a id="9146" class="Symbol">{</a><a id="9147" href="Ledger.Conway.Conformance.Equivalence.html#9147" class="Bound">cert</a> <a id="9152" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9154" class="Symbol">_}</a> <a id="9157" href="Ledger.Conway.Conformance.Equivalence.html#9157" class="Bound">deposits</a> <a id="9166" href="Ledger.Conway.Conformance.Equivalence.html#9166" class="Bound">wf</a> <a id="9169" class="Symbol">(</a><a id="9170" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9177" class="Symbol">(</a><a id="9178" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="9191" class="Symbol">(</a><a id="9192" href="Ledger.Conway.Conformance.Certs.html#4134" class="InductiveConstructor">C.DELEG-delegate</a> <a id="9209" class="Symbol">(</a><a id="9210" href="Ledger.Conway.Conformance.Equivalence.html#9210" class="Bound">a</a> <a id="9212" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9214" href="Ledger.Conway.Conformance.Equivalence.html#9214" class="Bound">b</a><a id="9215" class="Symbol">)))</a> <a id="9219" href="Ledger.Conway.Conformance.Equivalence.html#9219" class="Bound">rs</a><a id="9221" class="Symbol">)</a> <a id="9223" class="Symbol">=</a>
  <a id="9227" href="Ledger.Utxo.html#4771" class="InductiveConstructor">L.delegate</a> <a id="9238" class="Symbol">(</a><a id="9239" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9265" class="Symbol">_</a> <a id="9267" class="Symbol">(</a><a id="9268" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="9279" class="Symbol">(</a><a id="9280" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="9293" href="Ledger.Conway.Conformance.Equivalence.html#9139" class="Bound">Γ</a><a id="9294" class="Symbol">)</a> <a id="9296" class="Symbol">(</a><a id="9297" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="9311" href="Ledger.Conway.Conformance.Equivalence.html#9143" class="Bound">s</a><a id="9312" class="Symbol">)</a> <a id="9314" href="Ledger.Conway.Conformance.Equivalence.html#9157" class="Bound">deposits</a> <a id="9323" href="Ledger.Conway.Conformance.Equivalence.html#9147" class="Bound">cert</a> <a id="9328" href="Ledger.Conway.Conformance.Equivalence.html#9166" class="Bound">wf</a><a id="9330" class="Symbol">)</a> <a id="9332" href="Ledger.Conway.Conformance.Equivalence.html#9219" class="Bound">rs</a><a id="9334" class="Symbol">)</a>
<a id="9336" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9362" class="Symbol">{</a><a id="9363" href="Ledger.Conway.Conformance.Equivalence.html#9363" class="Bound">Γ</a><a id="9364" class="Symbol">}</a> <a id="9366" class="Symbol">{</a><a id="9367" href="Ledger.Conway.Conformance.Equivalence.html#9367" class="Bound">s</a><a id="9368" class="Symbol">}</a> <a id="9370" class="Symbol">{</a><a id="9371" href="Ledger.Conway.Conformance.Equivalence.html#9371" class="Bound">cert</a> <a id="9376" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9378" class="Symbol">_}</a> <a id="9381" href="Ledger.Conway.Conformance.Equivalence.html#9381" class="Bound">deposits</a> <a id="9390" href="Ledger.Conway.Conformance.Equivalence.html#9390" class="Bound">wf</a> <a id="9393" class="Symbol">(</a><a id="9394" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9401" class="Symbol">(</a><a id="9402" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="9415" class="Symbol">(</a><a id="9416" href="Ledger.Conway.Conformance.Certs.html#4763" class="InductiveConstructor">C.DELEG-dereg</a> <a id="9430" class="Symbol">(_</a> <a id="9433" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9435" href="Ledger.Conway.Conformance.Equivalence.html#9435" class="Bound">h</a> <a id="9437" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9439" href="Ledger.Conway.Conformance.Equivalence.html#9439" class="Bound">h&#39;</a><a id="9441" class="Symbol">)))</a> <a id="9445" href="Ledger.Conway.Conformance.Equivalence.html#9445" class="Bound">rs</a><a id="9447" class="Symbol">)</a> <a id="9449" class="Symbol">=</a>
  <a id="9453" href="Ledger.Utxo.html#5492" class="InductiveConstructor">L.dereg</a> <a id="9461" class="Symbol">(</a><a id="9462" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="9471" class="Symbol">.</a><a id="9472" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="9489" class="Symbol">(</a><a id="9490" href="Ledger.Conway.Conformance.Equivalence.html#9390" class="Bound">wf</a> <a id="9493" class="Symbol">.</a><a id="9494" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9500" class="Symbol">.</a><a id="9501" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9507" href="Ledger.Conway.Conformance.Equivalence.html#9435" class="Bound">h</a><a id="9508" class="Symbol">)</a> <a id="9510" class="Symbol">.</a><a id="9511" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="9516" class="Symbol">)</a> <a id="9518" href="Ledger.Conway.Conformance.Equivalence.html#9439" class="Bound">h&#39;</a>
          <a id="9531" class="Symbol">(</a><a id="9532" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9558" class="Symbol">_</a> <a id="9560" class="Symbol">(</a><a id="9561" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="9572" class="Symbol">(</a><a id="9573" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="9586" href="Ledger.Conway.Conformance.Equivalence.html#9363" class="Bound">Γ</a><a id="9587" class="Symbol">)</a> <a id="9589" class="Symbol">(</a><a id="9590" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="9604" href="Ledger.Conway.Conformance.Equivalence.html#9367" class="Bound">s</a><a id="9605" class="Symbol">)</a> <a id="9607" href="Ledger.Conway.Conformance.Equivalence.html#9381" class="Bound">deposits</a> <a id="9616" href="Ledger.Conway.Conformance.Equivalence.html#9371" class="Bound">cert</a> <a id="9621" href="Ledger.Conway.Conformance.Equivalence.html#9390" class="Bound">wf</a><a id="9623" class="Symbol">)</a> <a id="9625" href="Ledger.Conway.Conformance.Equivalence.html#9445" class="Bound">rs</a><a id="9627" class="Symbol">)</a>
<a id="9629" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9655" class="Symbol">{</a><a id="9656" href="Ledger.Conway.Conformance.Equivalence.html#9656" class="Bound">Γ</a><a id="9657" class="Symbol">}</a> <a id="9659" class="Symbol">{</a><a id="9660" href="Ledger.Conway.Conformance.Equivalence.html#9660" class="Bound">s</a><a id="9661" class="Symbol">}</a> <a id="9663" class="Symbol">{</a><a id="9664" href="Ledger.Conway.Conformance.Equivalence.html#9664" class="Bound">cert</a> <a id="9669" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9671" class="Symbol">_}</a> <a id="9674" href="Ledger.Conway.Conformance.Equivalence.html#9674" class="Bound">deposits</a> <a id="9683" href="Ledger.Conway.Conformance.Equivalence.html#9683" class="Bound">wf</a> <a id="9686" class="Symbol">(</a><a id="9687" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9694" class="Symbol">(</a><a id="9695" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="9708" class="Symbol">(</a><a id="9709" href="Ledger.Conway.Conformance.Certs.html#5127" class="InductiveConstructor">C.DELEG-reg</a> <a id="9721" href="Ledger.Conway.Conformance.Equivalence.html#9721" class="Bound">x</a><a id="9722" class="Symbol">))</a> <a id="9725" href="Ledger.Conway.Conformance.Equivalence.html#9725" class="Bound">rs</a><a id="9727" class="Symbol">)</a> <a id="9729" class="Symbol">=</a>
  <a id="9733" href="Ledger.Utxo.html#5311" class="InductiveConstructor">L.reg</a> <a id="9739" class="Symbol">(</a><a id="9740" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9766" class="Symbol">_</a> <a id="9768" class="Symbol">(</a><a id="9769" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="9780" class="Symbol">(</a><a id="9781" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="9794" href="Ledger.Conway.Conformance.Equivalence.html#9656" class="Bound">Γ</a><a id="9795" class="Symbol">)</a> <a id="9797" class="Symbol">(</a><a id="9798" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="9812" href="Ledger.Conway.Conformance.Equivalence.html#9660" class="Bound">s</a><a id="9813" class="Symbol">)</a> <a id="9815" href="Ledger.Conway.Conformance.Equivalence.html#9674" class="Bound">deposits</a> <a id="9824" href="Ledger.Conway.Conformance.Equivalence.html#9664" class="Bound">cert</a> <a id="9829" href="Ledger.Conway.Conformance.Equivalence.html#9683" class="Bound">wf</a><a id="9831" class="Symbol">)</a> <a id="9833" href="Ledger.Conway.Conformance.Equivalence.html#9725" class="Bound">rs</a><a id="9835" class="Symbol">)</a>
<a id="9837" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9863" class="Symbol">{</a><a id="9864" href="Ledger.Conway.Conformance.Equivalence.html#9864" class="Bound">Γ</a><a id="9865" class="Symbol">}</a> <a id="9867" class="Symbol">{</a><a id="9868" href="Ledger.Conway.Conformance.Equivalence.html#9868" class="Bound">s</a><a id="9869" class="Symbol">}</a> <a id="9871" class="Symbol">{</a><a id="9872" href="Ledger.Conway.Conformance.Equivalence.html#9872" class="Bound">cert</a> <a id="9877" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9879" class="Symbol">_}</a> <a id="9882" href="Ledger.Conway.Conformance.Equivalence.html#9882" class="Bound">deposits</a> <a id="9891" href="Ledger.Conway.Conformance.Equivalence.html#9891" class="Bound">wf</a> <a id="9894" class="Symbol">(</a><a id="9895" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="9902" class="Symbol">(</a><a id="9903" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a> <a id="9915" class="Symbol">(</a><a id="9916" href="Ledger.Conway.Conformance.Certs.html#3760" class="InductiveConstructor">C.POOL-regpool</a> <a id="9931" class="Symbol">_))</a> <a id="9935" href="Ledger.Conway.Conformance.Equivalence.html#9935" class="Bound">rs</a><a id="9937" class="Symbol">)</a> <a id="9939" class="Symbol">=</a>
  <a id="9943" href="Ledger.Utxo.html#4958" class="InductiveConstructor">L.regpool</a> <a id="9953" class="Symbol">(</a><a id="9954" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="9980" class="Symbol">_</a> <a id="9982" class="Symbol">(</a><a id="9983" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="9994" class="Symbol">(</a><a id="9995" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="10008" href="Ledger.Conway.Conformance.Equivalence.html#9864" class="Bound">Γ</a><a id="10009" class="Symbol">)</a> <a id="10011" class="Symbol">(</a><a id="10012" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="10026" href="Ledger.Conway.Conformance.Equivalence.html#9868" class="Bound">s</a><a id="10027" class="Symbol">)</a> <a id="10029" href="Ledger.Conway.Conformance.Equivalence.html#9882" class="Bound">deposits</a> <a id="10038" href="Ledger.Conway.Conformance.Equivalence.html#9872" class="Bound">cert</a> <a id="10043" href="Ledger.Conway.Conformance.Equivalence.html#9891" class="Bound">wf</a><a id="10045" class="Symbol">)</a> <a id="10047" href="Ledger.Conway.Conformance.Equivalence.html#9935" class="Bound">rs</a><a id="10049" class="Symbol">)</a>
<a id="10051" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10077" class="Symbol">{</a><a id="10078" href="Ledger.Conway.Conformance.Equivalence.html#10078" class="Bound">Γ</a><a id="10079" class="Symbol">}</a> <a id="10081" class="Symbol">{</a><a id="10082" href="Ledger.Conway.Conformance.Equivalence.html#10082" class="Bound">s</a><a id="10083" class="Symbol">}</a> <a id="10085" class="Symbol">{</a><a id="10086" href="Ledger.Conway.Conformance.Equivalence.html#10086" class="Bound">cert</a> <a id="10091" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10093" class="Symbol">_}</a> <a id="10096" href="Ledger.Conway.Conformance.Equivalence.html#10096" class="Bound">deposits</a> <a id="10105" href="Ledger.Conway.Conformance.Equivalence.html#10105" class="Bound">wf</a> <a id="10108" class="Symbol">(</a><a id="10109" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10116" class="Symbol">(</a><a id="10117" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a> <a id="10129" href="Ledger.Conway.Conformance.Certs.html#3959" class="InductiveConstructor">C.POOL-retirepool</a><a id="10146" class="Symbol">)</a> <a id="10148" href="Ledger.Conway.Conformance.Equivalence.html#10148" class="Bound">rs</a><a id="10150" class="Symbol">)</a> <a id="10152" class="Symbol">=</a>
  <a id="10156" href="Ledger.Utxo.html#6100" class="InductiveConstructor">L.retirepool</a> <a id="10169" class="Symbol">(</a><a id="10170" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10196" class="Symbol">_</a> <a id="10198" class="Symbol">(</a><a id="10199" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="10210" class="Symbol">(</a><a id="10211" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="10224" href="Ledger.Conway.Conformance.Equivalence.html#10078" class="Bound">Γ</a><a id="10225" class="Symbol">)</a> <a id="10227" class="Symbol">(</a><a id="10228" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="10242" href="Ledger.Conway.Conformance.Equivalence.html#10082" class="Bound">s</a><a id="10243" class="Symbol">)</a> <a id="10245" href="Ledger.Conway.Conformance.Equivalence.html#10096" class="Bound">deposits</a> <a id="10254" href="Ledger.Conway.Conformance.Equivalence.html#10086" class="Bound">cert</a> <a id="10259" href="Ledger.Conway.Conformance.Equivalence.html#10105" class="Bound">wf</a><a id="10261" class="Symbol">)</a> <a id="10263" href="Ledger.Conway.Conformance.Equivalence.html#10148" class="Bound">rs</a><a id="10265" class="Symbol">)</a>
<a id="10267" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10293" class="Symbol">{</a><a id="10294" href="Ledger.Conway.Conformance.Equivalence.html#10294" class="Bound">Γ</a><a id="10295" class="Symbol">}</a> <a id="10297" class="Symbol">{</a><a id="10298" href="Ledger.Conway.Conformance.Equivalence.html#10298" class="Bound">s</a><a id="10299" class="Symbol">}</a> <a id="10301" class="Symbol">{</a><a id="10302" href="Ledger.Conway.Conformance.Equivalence.html#10302" class="Bound">cert</a> <a id="10307" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10309" class="Symbol">_}</a> <a id="10312" href="Ledger.Conway.Conformance.Equivalence.html#10312" class="Bound">deposits</a> <a id="10321" href="Ledger.Conway.Conformance.Equivalence.html#10321" class="Bound">wf</a> <a id="10324" class="Symbol">(</a><a id="10325" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10332" class="Symbol">(</a><a id="10333" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="10345" class="Symbol">(</a><a id="10346" href="Ledger.Conway.Conformance.Certs.html#5519" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="10364" href="Ledger.Conway.Conformance.Equivalence.html#10364" class="Bound">x</a><a id="10365" class="Symbol">))</a> <a id="10368" href="Ledger.Conway.Conformance.Equivalence.html#10368" class="Bound">rs</a><a id="10370" class="Symbol">)</a> <a id="10372" class="Symbol">=</a>
  <a id="10376" href="Ledger.Utxo.html#5141" class="InductiveConstructor">L.regdrep</a> <a id="10386" class="Symbol">(</a><a id="10387" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10413" class="Symbol">_</a> <a id="10415" class="Symbol">(</a><a id="10416" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="10427" class="Symbol">(</a><a id="10428" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="10441" href="Ledger.Conway.Conformance.Equivalence.html#10294" class="Bound">Γ</a><a id="10442" class="Symbol">)</a> <a id="10444" class="Symbol">(</a><a id="10445" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="10459" href="Ledger.Conway.Conformance.Equivalence.html#10298" class="Bound">s</a><a id="10460" class="Symbol">)</a> <a id="10462" href="Ledger.Conway.Conformance.Equivalence.html#10312" class="Bound">deposits</a> <a id="10471" href="Ledger.Conway.Conformance.Equivalence.html#10302" class="Bound">cert</a> <a id="10476" href="Ledger.Conway.Conformance.Equivalence.html#10321" class="Bound">wf</a><a id="10478" class="Symbol">)</a> <a id="10480" href="Ledger.Conway.Conformance.Equivalence.html#10368" class="Bound">rs</a><a id="10482" class="Symbol">)</a>
<a id="10484" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10510" class="Symbol">{</a><a id="10511" href="Ledger.Conway.Conformance.Equivalence.html#10511" class="Bound">Γ</a><a id="10512" class="Symbol">}</a> <a id="10514" class="Symbol">{</a><a id="10515" href="Ledger.Conway.Conformance.Equivalence.html#10515" class="Bound">s</a><a id="10516" class="Symbol">}</a> <a id="10518" class="Symbol">{</a><a id="10519" href="Ledger.Conway.Conformance.Equivalence.html#10519" class="Bound">cert</a> <a id="10524" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10526" class="Symbol">_}</a> <a id="10529" href="Ledger.Conway.Conformance.Equivalence.html#10529" class="Bound">deposits</a> <a id="10538" href="Ledger.Conway.Conformance.Equivalence.html#10538" class="Bound">wf</a> <a id="10541" class="Symbol">(</a><a id="10542" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10549" class="Symbol">(</a><a id="10550" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="10562" class="Symbol">(</a><a id="10563" href="Ledger.Conway.Conformance.Certs.html#5885" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="10583" class="Symbol">(_</a> <a id="10586" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10588" href="Ledger.Conway.Conformance.Equivalence.html#10588" class="Bound">h</a><a id="10589" class="Symbol">)))</a> <a id="10593" href="Ledger.Conway.Conformance.Equivalence.html#10593" class="Bound">rs</a><a id="10595" class="Symbol">)</a> <a id="10597" class="Symbol">=</a>
  <a id="10601" href="Ledger.Utxo.html#5753" class="InductiveConstructor">L.deregdrep</a> <a id="10613" class="Symbol">(</a><a id="10614" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="10623" class="Symbol">.</a><a id="10624" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="10641" class="Symbol">(</a><a id="10642" href="Ledger.Conway.Conformance.Equivalence.html#10538" class="Bound">wf</a> <a id="10645" class="Symbol">.</a><a id="10646" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="10652" class="Symbol">.</a><a id="10653" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10659" href="Ledger.Conway.Conformance.Equivalence.html#10588" class="Bound">h</a><a id="10660" class="Symbol">)</a> <a id="10662" class="Symbol">.</a><a id="10663" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="10668" class="Symbol">)</a>
              <a id="10684" class="Symbol">(</a><a id="10685" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10711" class="Symbol">_</a> <a id="10713" class="Symbol">(</a><a id="10714" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="10725" class="Symbol">(</a><a id="10726" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="10739" href="Ledger.Conway.Conformance.Equivalence.html#10511" class="Bound">Γ</a><a id="10740" class="Symbol">)</a> <a id="10742" class="Symbol">(</a><a id="10743" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="10757" href="Ledger.Conway.Conformance.Equivalence.html#10515" class="Bound">s</a><a id="10758" class="Symbol">)</a> <a id="10760" href="Ledger.Conway.Conformance.Equivalence.html#10529" class="Bound">deposits</a> <a id="10769" href="Ledger.Conway.Conformance.Equivalence.html#10519" class="Bound">cert</a> <a id="10774" href="Ledger.Conway.Conformance.Equivalence.html#10538" class="Bound">wf</a><a id="10776" class="Symbol">)</a> <a id="10778" href="Ledger.Conway.Conformance.Equivalence.html#10593" class="Bound">rs</a><a id="10780" class="Symbol">)</a>
<a id="10782" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10808" class="Symbol">{</a><a id="10809" href="Ledger.Conway.Conformance.Equivalence.html#10809" class="Bound">Γ</a><a id="10810" class="Symbol">}</a> <a id="10812" class="Symbol">{</a><a id="10813" href="Ledger.Conway.Conformance.Equivalence.html#10813" class="Bound">s</a><a id="10814" class="Symbol">}</a> <a id="10816" class="Symbol">{</a><a id="10817" href="Ledger.Conway.Conformance.Equivalence.html#10817" class="Bound">cert</a> <a id="10822" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10824" class="Symbol">_}</a> <a id="10827" href="Ledger.Conway.Conformance.Equivalence.html#10827" class="Bound">deposits</a> <a id="10836" href="Ledger.Conway.Conformance.Equivalence.html#10836" class="Bound">wf</a> <a id="10839" class="Symbol">(</a><a id="10840" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="10847" class="Symbol">(</a><a id="10848" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="10860" class="Symbol">(</a><a id="10861" href="Ledger.Conway.Conformance.Certs.html#6180" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="10880" href="Ledger.Conway.Conformance.Equivalence.html#10880" class="Bound">x</a><a id="10881" class="Symbol">))</a> <a id="10884" href="Ledger.Conway.Conformance.Equivalence.html#10884" class="Bound">rs</a><a id="10886" class="Symbol">)</a> <a id="10888" class="Symbol">=</a>
  <a id="10892" href="Ledger.Utxo.html#5960" class="InductiveConstructor">L.ccreghot</a><a id="10902" class="Symbol">(</a><a id="10903" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="10929" class="Symbol">_</a> <a id="10931" class="Symbol">(</a><a id="10932" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20456" class="Function">lemUpdCert</a> <a id="10943" class="Symbol">(</a><a id="10944" href="Ledger.Certs.html#2846" class="Field">L.CertEnv.pp</a> <a id="10957" href="Ledger.Conway.Conformance.Equivalence.html#10809" class="Bound">Γ</a><a id="10958" class="Symbol">)</a> <a id="10960" class="Symbol">(</a><a id="10961" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="10975" href="Ledger.Conway.Conformance.Equivalence.html#10813" class="Bound">s</a><a id="10976" class="Symbol">)</a> <a id="10978" href="Ledger.Conway.Conformance.Equivalence.html#10827" class="Bound">deposits</a> <a id="10987" href="Ledger.Conway.Conformance.Equivalence.html#10817" class="Bound">cert</a> <a id="10992" href="Ledger.Conway.Conformance.Equivalence.html#10836" class="Bound">wf</a><a id="10994" class="Symbol">)</a> <a id="10996" href="Ledger.Conway.Conformance.Equivalence.html#10884" class="Bound">rs</a><a id="10998" class="Symbol">)</a>

<a id="getValidCertDepositsC"></a><a id="11001" href="Ledger.Conway.Conformance.Equivalence.html#11001" class="Function">getValidCertDepositsC</a> <a id="11023" class="Symbol">:</a> <a id="11025" class="Symbol">∀</a> <a id="11027" href="Ledger.Conway.Conformance.Equivalence.html#11027" class="Bound">Γ</a> <a id="11029" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Bound">s</a> <a id="11031" class="Symbol">{</a><a id="11032" href="Ledger.Conway.Conformance.Equivalence.html#11032" class="Bound">s&#39;</a><a id="11034" class="Symbol">}</a> <a id="11036" href="Ledger.Conway.Conformance.Equivalence.html#11036" class="Bound">tx</a>
                     <a id="11060" class="Symbol">→</a> <a id="11062" class="Symbol">(</a><a id="11063" class="Keyword">let</a> <a id="11067" class="Keyword">open</a> <a id="11072" href="Ledger.Ledger.html#545" class="Module">C.LEnv</a> <a id="11079" href="Ledger.Conway.Conformance.Equivalence.html#11027" class="Bound">Γ</a> <a id="11081" class="Keyword">using</a> <a id="11087" class="Symbol">(</a><a id="11088" href="Ledger.Ledger.html#633" class="Field">pparams</a><a id="11095" class="Symbol">;</a> <a id="11097" href="Ledger.Ledger.html#575" class="Field">slot</a><a id="11101" class="Symbol">;</a> <a id="11103" href="Ledger.Ledger.html#659" class="Field">enactState</a><a id="11113" class="Symbol">)</a>
                            <a id="11143" class="Keyword">open</a> <a id="11148" href="Ledger.Transaction.html#2650" class="Module">TxBody</a> <a id="11155" class="Symbol">(</a><a id="11156" href="Ledger.Conway.Conformance.Equivalence.html#11036" class="Bound">tx</a> <a id="11159" class="Symbol">.</a><a id="11160" href="Ledger.Transaction.html#4226" class="Field">Tx.body</a><a id="11167" class="Symbol">)</a> <a id="11169" class="Keyword">using</a> <a id="11175" class="Symbol">(</a><a id="11176" href="Ledger.Transaction.html#2884" class="Field">txcerts</a><a id="11183" class="Symbol">;</a> <a id="11185" href="Ledger.Transaction.html#2946" class="Field">txvote</a><a id="11191" class="Symbol">;</a> <a id="11193" href="Ledger.Transaction.html#2918" class="Field">txwdrls</a><a id="11200" class="Symbol">)</a>
                            <a id="11230" class="Keyword">open</a> <a id="11235" href="Ledger.Conway.Conformance.Ledger.html#695" class="Module">C.LState</a> <a id="11244" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Bound">s</a>
                            <a id="11274" class="Keyword">open</a> <a id="11279" href="Ledger.Utxo.html#2705" class="Module">C.UTxOState</a> <a id="11291" href="Ledger.Conway.Conformance.Ledger.html#750" class="Function">utxoSt</a> <a id="11298" class="Keyword">using</a> <a id="11304" class="Symbol">(</a><a id="11305" href="Ledger.Utxo.html#2813" class="Field">deposits</a><a id="11313" class="Symbol">)</a>
                            <a id="11343" href="Ledger.Conway.Conformance.Equivalence.html#11343" class="Bound">cc</a> <a id="11346" class="Symbol">=</a> <a id="11348" href="Ledger.Ledger.html#2158" class="Function">C.allColdCreds</a> <a id="11363" href="Ledger.Conway.Conformance.Ledger.html#777" class="Function">govSt</a> <a id="11369" href="Ledger.Ledger.html#659" class="Function">enactState</a>
                       <a id="11403" class="Symbol">)</a>
                     <a id="11426" class="Symbol">→</a> <a id="11428" href="Ledger.Conway.Conformance.Equivalence.html#8600" class="Function">WellformedLState</a> <a id="11445" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Bound">s</a>
                     <a id="11468" class="Symbol">→</a> <a id="11470" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="11478" href="Ledger.Conway.Conformance.Equivalence.html#11036" class="Bound">tx</a> <a id="11481" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11483" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="11509" class="Symbol">→</a> <a id="11511" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="11513" href="Ledger.Types.Epoch.html#755" class="Function">epoch</a> <a id="11519" href="Ledger.Ledger.html#575" class="Function">slot</a> <a id="11524" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11526" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="11534" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11536" href="Ledger.Transaction.html#2946" class="Function">txvote</a> <a id="11543" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11545" href="Ledger.Transaction.html#2918" class="Function">txwdrls</a> <a id="11553" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11555" href="Ledger.Conway.Conformance.Equivalence.html#11343" class="Bound">cc</a> <a id="11558" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a> <a id="11560" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">C.⊢</a> <a id="11564" href="Ledger.Conway.Conformance.Ledger.html#803" class="Function">certState</a> <a id="11574" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">⇀⦇</a> <a id="11577" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="11585" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">,CERTS⦈</a> <a id="11593" href="Ledger.Conway.Conformance.Equivalence.html#11032" class="Bound">s&#39;</a>
                     <a id="11617" class="Symbol">→</a> <a id="11619" href="Ledger.Utxo.html#4645" class="Datatype">L.ValidCertDeposits</a> <a id="11639" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="11647" href="Ledger.Utxo.html#2813" class="Function">deposits</a> <a id="11656" href="Ledger.Transaction.html#2884" class="Function">txcerts</a>
<a id="11664" href="Ledger.Conway.Conformance.Equivalence.html#11001" class="Function">getValidCertDepositsC</a> <a id="11686" href="Ledger.Conway.Conformance.Equivalence.html#11686" class="Bound">Γ</a> <a id="11688" href="Ledger.Conway.Conformance.Equivalence.html#11688" class="Bound">s</a> <a id="11690" href="Ledger.Conway.Conformance.Equivalence.html#11690" class="Bound">tx</a> <a id="11693" href="Ledger.Conway.Conformance.Equivalence.html#11693" class="Bound">wf</a> <a id="11696" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="11701" class="Symbol">(</a><a id="11702" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="11706" class="Symbol">(</a><a id="11707" href="Ledger.Conway.Conformance.Certs.html#7193" class="InductiveConstructor">C.CERT-base</a> <a id="11719" class="Symbol">_</a> <a id="11721" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11723" href="Ledger.Conway.Conformance.Equivalence.html#11723" class="Bound">step</a><a id="11727" class="Symbol">))</a> <a id="11730" class="Symbol">=</a>
  <a id="11734" href="Ledger.Conway.Conformance.Equivalence.html#8719" class="Function">getValidCertDepositsCERTS</a> <a id="11760" class="Symbol">(</a><a id="11761" href="Ledger.Utxo.html#2813" class="Field">C.UTxOState.deposits</a> <a id="11782" class="Symbol">(</a><a id="11783" href="Ledger.Conway.Conformance.Ledger.html#750" class="Field">C.LState.utxoSt</a> <a id="11799" href="Ledger.Conway.Conformance.Equivalence.html#11688" class="Bound">s</a><a id="11800" class="Symbol">))</a> <a id="11803" href="Ledger.Conway.Conformance.Equivalence.html#11693" class="Bound">wf</a> <a id="11806" href="Ledger.Conway.Conformance.Equivalence.html#11723" class="Bound">step</a>

<a id="lemUtxowDeposits"></a><a id="11812" href="Ledger.Conway.Conformance.Equivalence.html#11812" class="Function">lemUtxowDeposits</a> <a id="11829" class="Symbol">:</a> <a id="11831" class="Symbol">∀</a> <a id="11833" class="Symbol">{</a><a id="11834" href="Ledger.Conway.Conformance.Equivalence.html#11834" class="Bound">Γ</a> <a id="11836" href="Ledger.Conway.Conformance.Equivalence.html#11836" class="Bound">s</a> <a id="11838" href="Ledger.Conway.Conformance.Equivalence.html#11838" class="Bound">s&#39;</a> <a id="11841" href="Ledger.Conway.Conformance.Equivalence.html#11841" class="Bound">tx</a><a id="11843" class="Symbol">}</a>
                      <a id="11867" class="Symbol">(</a><a id="11868" class="Keyword">let</a> <a id="11872" class="Keyword">open</a> <a id="11877" href="Ledger.Utxo.html#2353" class="Module">C.UTxOEnv</a> <a id="11887" href="Ledger.Conway.Conformance.Equivalence.html#11834" class="Bound">Γ</a> <a id="11889" class="Keyword">using</a> <a id="11895" class="Symbol">(</a><a id="11896" href="Ledger.Utxo.html#2407" class="Field">pparams</a><a id="11903" class="Symbol">))</a>
                  <a id="11924" class="Symbol">→</a> <a id="11926" href="Ledger.Transaction.html#4279" class="Field">isValid</a> <a id="11934" href="Ledger.Conway.Conformance.Equivalence.html#11841" class="Bound">tx</a> <a id="11937" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11939" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="11962" class="Symbol">→</a> <a id="11964" class="Symbol">(</a><a id="11965" href="Ledger.Conway.Conformance.Equivalence.html#11965" class="Bound">r</a> <a id="11967" class="Symbol">:</a> <a id="11969" href="Ledger.Conway.Conformance.Equivalence.html#11834" class="Bound">Γ</a> <a id="11971" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">C.⊢</a> <a id="11975" href="Ledger.Conway.Conformance.Equivalence.html#11836" class="Bound">s</a> <a id="11977" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">⇀⦇</a> <a id="11980" href="Ledger.Conway.Conformance.Equivalence.html#11841" class="Bound">tx</a> <a id="11983" href="Ledger.Conway.Conformance.Utxow.html#635" class="Datatype Operator">,UTXOW⦈</a> <a id="11991" href="Ledger.Conway.Conformance.Equivalence.html#11838" class="Bound">s&#39;</a><a id="11993" class="Symbol">)</a>
                  <a id="12013" class="Symbol">→</a> <a id="12015" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1968" class="Function">utxowDeposits</a> <a id="12029" href="Ledger.Conway.Conformance.Equivalence.html#11965" class="Bound">r</a> <a id="12031" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12033" href="Ledger.Utxo.html#9297" class="Function">L.updateDeposits</a> <a id="12050" href="Ledger.Utxo.html#2407" class="Function">pparams</a> <a id="12058" class="Symbol">(</a><a id="12059" href="Ledger.Transaction.html#4226" class="Field">body</a> <a id="12064" href="Ledger.Conway.Conformance.Equivalence.html#11841" class="Bound">tx</a><a id="12066" class="Symbol">)</a> <a id="12068" class="Symbol">(</a><a id="12069" href="Ledger.Utxo.html#2813" class="Field">C.UTxOState.deposits</a> <a id="12090" href="Ledger.Conway.Conformance.Equivalence.html#11838" class="Bound">s&#39;</a><a id="12092" class="Symbol">)</a>
<a id="12094" href="Ledger.Conway.Conformance.Equivalence.html#11812" class="Function">lemUtxowDeposits</a> <a id="12111" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12116" class="Symbol">(</a><a id="12117" href="Ledger.Conway.Conformance.Utxow.html#1940" class="InductiveConstructor">C.UTXOW-inductive⋯</a> <a id="12136" class="Symbol">_</a> <a id="12138" class="Symbol">_</a> <a id="12140" class="Symbol">_</a> <a id="12142" class="Symbol">_</a> <a id="12144" class="Symbol">_</a> <a id="12146" class="Symbol">_</a> <a id="12148" class="Symbol">_</a> <a id="12150" class="Symbol">_</a>
                        <a id="12176" class="Symbol">(</a><a id="12177" href="Ledger.Conway.Conformance.Utxo.html#3790" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="12195" class="Symbol">_</a> <a id="12197" class="Symbol">_</a> <a id="12199" class="Symbol">_</a> <a id="12201" class="Symbol">_</a> <a id="12203" class="Symbol">_</a> <a id="12205" class="Symbol">_</a> <a id="12207" class="Symbol">_</a> <a id="12209" class="Symbol">_</a> <a id="12211" class="Symbol">_</a> <a id="12213" class="Symbol">_</a> <a id="12215" class="Symbol">_</a> <a id="12217" class="Symbol">_</a> <a id="12219" class="Symbol">_</a> <a id="12221" class="Symbol">_</a> <a id="12223" class="Symbol">_</a> <a id="12225" class="Symbol">_</a> <a id="12227" class="Symbol">_</a> <a id="12229" class="Symbol">_</a> <a id="12231" class="Symbol">_</a>
                          <a id="12259" class="Symbol">(</a><a id="12260" href="Ledger.Conway.Conformance.Utxo.html#1157" class="InductiveConstructor">C.Scripts-Yes</a> <a id="12274" class="Symbol">_)))</a> <a id="12279" class="Symbol">=</a> <a id="12281" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="12287" class="Keyword">instance</a>

  <a id="LEDGERFromConf"></a><a id="12299" href="Ledger.Conway.Conformance.Equivalence.html#12299" class="Function">LEDGERFromConf</a> <a id="12314" class="Symbol">:</a> <a id="12316" class="Symbol">∀</a> <a id="12318" class="Symbol">{</a><a id="12319" href="Ledger.Conway.Conformance.Equivalence.html#12319" class="Bound">Γ</a> <a id="12321" href="Ledger.Conway.Conformance.Equivalence.html#12321" class="Bound">s</a> <a id="12323" href="Ledger.Conway.Conformance.Equivalence.html#12323" class="Bound">tx</a> <a id="12326" href="Ledger.Conway.Conformance.Equivalence.html#12326" class="Bound">s&#39;</a><a id="12328" class="Symbol">}</a> <a id="12330" class="Symbol">→</a> <a id="12332" href="Ledger.Conway.Conformance.Equivalence.html#8600" class="Function">WellformedLState</a> <a id="12349" href="Ledger.Conway.Conformance.Equivalence.html#12321" class="Bound">s</a>
                                    <a id="12387" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="12389" href="Ledger.Conway.Conformance.Equivalence.html#12319" class="Bound">Γ</a> <a id="12391" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="12395" href="Ledger.Conway.Conformance.Equivalence.html#12321" class="Bound">s</a> <a id="12397" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="12400" href="Ledger.Conway.Conformance.Equivalence.html#12323" class="Bound">tx</a> <a id="12403" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="12412" href="Ledger.Conway.Conformance.Equivalence.html#12326" class="Bound">s&#39;</a>
                                    <a id="12451" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="12453" href="Ledger.Conway.Conformance.Equivalence.html#12319" class="Bound">Γ</a> <a id="12455" href="Ledger.Ledger.html#2581" class="Datatype Operator">L.⊢</a> <a id="12459" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12464" href="Ledger.Conway.Conformance.Equivalence.html#12321" class="Bound">s</a> <a id="12466" href="Ledger.Ledger.html#2581" class="Datatype Operator">⇀⦇</a> <a id="12469" href="Ledger.Conway.Conformance.Equivalence.html#12323" class="Bound">tx</a> <a id="12472" href="Ledger.Ledger.html#2581" class="Datatype Operator">,LEDGER⦈</a> <a id="12481" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12486" href="Ledger.Conway.Conformance.Equivalence.html#12326" class="Bound">s&#39;</a>
  <a id="12491" href="Ledger.Conway.Conformance.Equivalence.html#12299" class="Function">LEDGERFromConf</a> <a id="12506" class="Symbol">.</a><a id="12507" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12513" class="Symbol">_</a> <a id="12515" class="Symbol">(</a><a id="12516" href="Ledger.Conway.Conformance.Ledger.html#2137" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="12528" href="Ledger.Conway.Conformance.Equivalence.html#12528" class="Bound">invalid</a> <a id="12536" href="Ledger.Conway.Conformance.Equivalence.html#12536" class="Bound">utxow</a><a id="12541" class="Symbol">)</a> <a id="12543" class="Keyword">with</a> <a id="12548" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="12553" href="Ledger.Conway.Conformance.Equivalence.html#12528" class="Bound">invalid</a> <a id="12561" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="12567" href="Ledger.Conway.Conformance.Equivalence.html#12536" class="Bound">utxow</a>
  <a id="12575" class="Symbol">...</a> <a id="12579" class="Symbol">|</a> <a id="12581" href="Ledger.Conway.Conformance.Equivalence.html#12581" class="Bound">utxow&#39;</a> <a id="12588" class="Keyword">rewrite</a> <a id="12596" href="Ledger.Conway.Conformance.Equivalence.html#1940" class="Function">lemInvalidDepositsC</a> <a id="12616" class="Bound">invalid</a> <a id="12624" class="Bound">utxow</a> <a id="12630" class="Symbol">=</a> <a id="12632" href="Ledger.Ledger.html#3637" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="12644" class="Bound">invalid</a> <a id="12652" href="Ledger.Conway.Conformance.Equivalence.html#12581" class="Bound">utxow&#39;</a>
  <a id="12661" href="Ledger.Conway.Conformance.Equivalence.html#12299" class="Function">LEDGERFromConf</a> <a id="12676" class="Symbol">{</a><a id="12677" href="Ledger.Conway.Conformance.Equivalence.html#12677" class="Bound">Γ</a><a id="12678" class="Symbol">}</a> <a id="12680" class="Symbol">{</a><a id="12681" href="Ledger.Conway.Conformance.Equivalence.html#12681" class="Bound">s</a><a id="12682" class="Symbol">}</a> <a id="12684" class="Symbol">{</a><a id="12685" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">tx</a><a id="12687" class="Symbol">}</a> <a id="12689" class="Symbol">{</a><a id="12690" href="Ledger.Conway.Conformance.Equivalence.html#12690" class="Bound">s&#39;</a><a id="12692" class="Symbol">}</a> <a id="12694" class="Symbol">.</a><a id="12695" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12701" href="Ledger.Conway.Conformance.Equivalence.html#12701" class="Bound">wf</a> <a id="12704" class="Symbol">(</a><a id="12705" href="Ledger.Conway.Conformance.Ledger.html#2084" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="12717" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12722" href="Ledger.Conway.Conformance.Equivalence.html#12722" class="Bound">utxow</a> <a id="12728" href="Ledger.Conway.Conformance.Equivalence.html#12728" class="Bound">certs</a> <a id="12734" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">gov</a><a id="12737" class="Symbol">)</a> <a id="12739" class="Symbol">=</a>
    <a id="12745" href="Relation.Binary.PropositionalEquality.Core.html#1989" class="Function">subst</a> <a id="12751" class="Symbol">(λ</a> <a id="12754" href="Ledger.Conway.Conformance.Equivalence.html#12754" class="Bound">•</a> <a id="12756" class="Symbol">→</a> <a id="12758" href="Ledger.Conway.Conformance.Equivalence.html#12677" class="Bound">Γ</a> <a id="12760" href="Ledger.Ledger.html#2581" class="Datatype Operator">L.⊢</a> <a id="12764" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12769" href="Ledger.Conway.Conformance.Equivalence.html#12681" class="Bound">s</a> <a id="12771" href="Ledger.Ledger.html#2581" class="Datatype Operator">⇀⦇</a> <a id="12774" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">tx</a> <a id="12777" href="Ledger.Ledger.html#2581" class="Datatype Operator">,LEDGER⦈</a> <a id="12786" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="12788" href="Ledger.Conway.Conformance.Equivalence.html#12754" class="Bound">•</a> <a id="12790" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="12792" href="Ledger.Conway.Conformance.Equivalence.html#12986" class="Function">govSt&#39;</a> <a id="12799" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="12801" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12806" href="Ledger.Conway.Conformance.Equivalence.html#13007" class="Function">certSt&#39;</a> <a id="12814" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="12815" class="Symbol">)</a> <a id="12817" href="Ledger.Conway.Conformance.Equivalence.html#13356" class="Function">eqUtxo</a> <a id="12824" href="Ledger.Conway.Conformance.Equivalence.html#13500" class="Function">ledger&#39;</a>
    <a id="12836" class="Keyword">where</a>
      <a id="12848" class="Keyword">open</a> <a id="12853" href="Ledger.Ledger.html#545" class="Module">C.LEnv</a> <a id="12860" href="Ledger.Conway.Conformance.Equivalence.html#12677" class="Bound">Γ</a>

      <a id="12869" class="Keyword">open</a> <a id="12874" href="Ledger.Conway.Conformance.Ledger.html#695" class="Module">C.LState</a> <a id="12883" href="Ledger.Conway.Conformance.Equivalence.html#12681" class="Bound">s</a> <a id="12885" class="Keyword">renaming</a> <a id="12894" class="Symbol">(</a><a id="12895" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">certState</a> <a id="12905" class="Symbol">to</a> <a id="12908" class="Field">certSt</a><a id="12914" class="Symbol">)</a>
      <a id="12922" class="Keyword">open</a> <a id="12927" href="Ledger.Conway.Conformance.Ledger.html#695" class="Module">C.LState</a> <a id="12936" href="Ledger.Conway.Conformance.Equivalence.html#12690" class="Bound">s&#39;</a> <a id="12939" class="Keyword">using</a> <a id="12945" class="Symbol">()</a> <a id="12948" class="Keyword">renaming</a> <a id="12957" class="Symbol">(</a><a id="12958" href="Ledger.Conway.Conformance.Ledger.html#750" class="Field">utxoSt</a> <a id="12965" class="Symbol">to</a> <a id="12968" class="Field">utxoSt&#39;</a><a id="12975" class="Symbol">;</a> <a id="12977" href="Ledger.Conway.Conformance.Ledger.html#777" class="Field">govSt</a> <a id="12983" class="Symbol">to</a> <a id="12986" class="Field">govSt&#39;</a><a id="12992" class="Symbol">;</a> <a id="12994" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">certState</a> <a id="13004" class="Symbol">to</a> <a id="13007" class="Field">certSt&#39;</a><a id="13014" class="Symbol">)</a>

      <a id="13023" class="Keyword">open</a> <a id="13028" href="Ledger.Transaction.html#2650" class="Module">TxBody</a> <a id="13035" class="Symbol">(</a><a id="13036" href="Ledger.Transaction.html#4226" class="Field">body</a> <a id="13041" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">tx</a><a id="13043" class="Symbol">)</a>
      <a id="13051" class="Keyword">open</a> <a id="13056" href="Ledger.Utxo.html#2705" class="Module">C.UTxOState</a> <a id="13068" href="Ledger.Conway.Conformance.Ledger.html#750" class="Function">utxoSt</a> <a id="13075" class="Keyword">using</a> <a id="13081" class="Symbol">(</a><a id="13082" href="Ledger.Utxo.html#2813" class="Field">deposits</a><a id="13090" class="Symbol">)</a>

      <a id="13099" href="Ledger.Conway.Conformance.Equivalence.html#13099" class="Function">valid-deps</a> <a id="13110" class="Symbol">:</a> <a id="13112" href="Ledger.Utxo.html#4645" class="Datatype">L.ValidCertDeposits</a> <a id="13132" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="13140" href="Ledger.Utxo.html#2813" class="Function">deposits</a> <a id="13149" href="Ledger.Transaction.html#2884" class="Function">txcerts</a>
      <a id="13163" href="Ledger.Conway.Conformance.Equivalence.html#13099" class="Function">valid-deps</a> <a id="13174" class="Symbol">=</a> <a id="13176" href="Ledger.Conway.Conformance.Equivalence.html#11001" class="Function">getValidCertDepositsC</a> <a id="13198" href="Ledger.Conway.Conformance.Equivalence.html#12677" class="Bound">Γ</a> <a id="13200" href="Ledger.Conway.Conformance.Equivalence.html#12681" class="Bound">s</a> <a id="13202" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">tx</a> <a id="13205" href="Ledger.Conway.Conformance.Equivalence.html#12701" class="Bound">wf</a> <a id="13208" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13213" href="Ledger.Conway.Conformance.Equivalence.html#12728" class="Bound">certs</a>

      <a id="13226" href="Ledger.Conway.Conformance.Equivalence.html#13226" class="Function">utxow&#39;</a> <a id="13233" class="Symbol">:</a> <a id="13235" class="Symbol">_</a> <a id="13237" href="Ledger.Utxow.html#3731" class="Datatype Operator">L.⊢</a> <a id="13241" href="Ledger.Conway.Conformance.Ledger.html#750" class="Function">utxoSt</a> <a id="13248" href="Ledger.Utxow.html#3731" class="Datatype Operator">⇀⦇</a> <a id="13251" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">tx</a> <a id="13254" href="Ledger.Utxow.html#3731" class="Datatype Operator">,UTXOW⦈</a> <a id="13262" class="Symbol">(</a><a id="13263" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#947" class="Function">setDeposits</a> <a id="13275" class="Symbol">(</a><a id="13276" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1968" class="Function">utxowDeposits</a> <a id="13290" href="Ledger.Conway.Conformance.Equivalence.html#12722" class="Bound">utxow</a><a id="13295" class="Symbol">)</a> <a id="13297" href="Ledger.Conway.Conformance.Equivalence.html#12968" class="Function">utxoSt&#39;</a><a id="13304" class="Symbol">)</a>
      <a id="13312" href="Ledger.Conway.Conformance.Equivalence.html#13226" class="Function">utxow&#39;</a> <a id="13319" class="Symbol">=</a> <a id="13321" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="13326" href="Ledger.Conway.Conformance.Equivalence.html#13099" class="Function">valid-deps</a> <a id="13337" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="13343" href="Ledger.Conway.Conformance.Equivalence.html#12722" class="Bound">utxow</a>

      <a id="13356" href="Ledger.Conway.Conformance.Equivalence.html#13356" class="Function">eqUtxo</a> <a id="13363" class="Symbol">:</a> <a id="13365" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#947" class="Function">setDeposits</a> <a id="13377" class="Symbol">(</a><a id="13378" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1968" class="Function">utxowDeposits</a> <a id="13392" href="Ledger.Conway.Conformance.Equivalence.html#12722" class="Bound">utxow</a><a id="13397" class="Symbol">)</a> <a id="13399" href="Ledger.Conway.Conformance.Equivalence.html#12968" class="Function">utxoSt&#39;</a> <a id="13407" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13409" href="Ledger.Conway.Conformance.Equivalence.html#12968" class="Function">utxoSt&#39;</a>
      <a id="13423" href="Ledger.Conway.Conformance.Equivalence.html#13356" class="Function">eqUtxo</a> <a id="13430" class="Symbol">=</a> <a id="13432" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="13437" class="Symbol">(λ</a> <a id="13440" href="Ledger.Conway.Conformance.Equivalence.html#13440" class="Bound">•</a> <a id="13442" class="Symbol">→</a> <a id="13444" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="13446" class="Symbol">_</a> <a id="13448" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13450" class="Symbol">_</a> <a id="13452" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13454" href="Ledger.Conway.Conformance.Equivalence.html#13440" class="Bound">•</a> <a id="13456" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13458" class="Symbol">_</a> <a id="13460" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a><a id="13461" class="Symbol">)</a> <a id="13463" class="Symbol">(</a><a id="13464" href="Ledger.Conway.Conformance.Equivalence.html#11812" class="Function">lemUtxowDeposits</a> <a id="13481" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13486" href="Ledger.Conway.Conformance.Equivalence.html#12722" class="Bound">utxow</a><a id="13491" class="Symbol">)</a>

      <a id="13500" href="Ledger.Conway.Conformance.Equivalence.html#13500" class="Function">ledger&#39;</a> <a id="13508" class="Symbol">:</a> <a id="13510" href="Ledger.Conway.Conformance.Equivalence.html#12677" class="Bound">Γ</a> <a id="13512" href="Ledger.Ledger.html#2581" class="Datatype Operator">L.⊢</a> <a id="13516" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13521" href="Ledger.Conway.Conformance.Equivalence.html#12681" class="Bound">s</a> <a id="13523" href="Ledger.Ledger.html#2581" class="Datatype Operator">⇀⦇</a> <a id="13526" href="Ledger.Conway.Conformance.Equivalence.html#12685" class="Bound">tx</a> <a id="13529" href="Ledger.Ledger.html#2581" class="Datatype Operator">,LEDGER⦈</a> <a id="13538" href="Ledger.Ledger.html#845" class="InductiveConstructor Operator">L.⟦</a> <a id="13542" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#947" class="Function">setDeposits</a> <a id="13554" class="Symbol">(</a><a id="13555" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1968" class="Function">utxowDeposits</a> <a id="13569" href="Ledger.Conway.Conformance.Equivalence.html#12722" class="Bound">utxow</a><a id="13574" class="Symbol">)</a> <a id="13576" href="Ledger.Conway.Conformance.Equivalence.html#12968" class="Function">utxoSt&#39;</a>
                                              <a id="13630" href="Ledger.Ledger.html#845" class="InductiveConstructor Operator">,</a> <a id="13632" href="Ledger.Conway.Conformance.Equivalence.html#12986" class="Function">govSt&#39;</a>
                                              <a id="13685" href="Ledger.Ledger.html#845" class="InductiveConstructor Operator">,</a> <a id="13687" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13692" href="Ledger.Conway.Conformance.Equivalence.html#13007" class="Function">certSt&#39;</a> <a id="13700" href="Ledger.Ledger.html#845" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="13709" href="Ledger.Conway.Conformance.Equivalence.html#13500" class="Function">ledger&#39;</a> <a id="13717" class="Symbol">=</a> <a id="13719" href="Ledger.Ledger.html#3584" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="13731" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13736" href="Ledger.Conway.Conformance.Equivalence.html#13226" class="Function">utxow&#39;</a> <a id="13743" class="Symbol">(</a><a id="13744" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13749" href="Ledger.Conway.Conformance.Equivalence.html#12728" class="Bound">certs</a><a id="13754" class="Symbol">)</a> <a id="13756" href="Ledger.Conway.Conformance.Equivalence.html#12734" class="Bound">gov</a>

<a id="13761" class="Keyword">open</a> <a id="13766" href="Relation.Binary.Structures.html#1550" class="Module">IsEquivalence</a> <a id="13780" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12977" class="Function">≡ᵈ-isEquivalence</a> <a id="13797" class="Keyword">renaming</a> <a id="13806" class="Symbol">(</a><a id="13807" href="Relation.Binary.Structures.html#1596" class="Field">refl</a> <a id="13812" class="Symbol">to</a> <a id="13815" class="Field">≡ᵈ-refl</a><a id="13822" class="Symbol">;</a> <a id="13824" href="Relation.Binary.Structures.html#1622" class="Field">sym</a> <a id="13828" class="Symbol">to</a> <a id="13831" class="Field">≡ᵈ-sym</a><a id="13837" class="Symbol">;</a> <a id="13839" href="Relation.Binary.Structures.html#1648" class="Field">trans</a> <a id="13845" class="Symbol">to</a> <a id="13848" class="Field">≡ᵈ-trans</a><a id="13856" class="Symbol">)</a>

<a id="lemCERTS&#39;DepositsC"></a><a id="13859" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="13878" class="Symbol">:</a> <a id="13880" class="Symbol">∀</a> <a id="13882" class="Symbol">{</a><a id="13883" href="Ledger.Conway.Conformance.Equivalence.html#13883" class="Bound">Γ</a> <a id="13885" href="Ledger.Conway.Conformance.Equivalence.html#13885" class="Bound">s</a> <a id="13887" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Bound">dcerts</a> <a id="13894" href="Ledger.Conway.Conformance.Equivalence.html#13894" class="Bound">s&#39;</a><a id="13896" class="Symbol">}</a> <a id="13898" class="Symbol">(</a><a id="13899" class="Keyword">open</a> <a id="13904" href="Ledger.Certs.html#2791" class="Module">C.CertEnv</a> <a id="13914" href="Ledger.Conway.Conformance.Equivalence.html#13883" class="Bound">Γ</a> <a id="13916" class="Keyword">using</a> <a id="13922" class="Symbol">(</a><a id="13923" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="13925" class="Symbol">))</a>
                   <a id="13947" class="Symbol">→</a> <a id="13949" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="13976" class="Symbol">{</a><a id="13977" class="Argument">sts</a> <a id="13981" class="Symbol">=</a> <a id="13983" href="Ledger.Conway.Conformance.Certs.html#6471" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="13998" class="Symbol">}</a> <a id="14000" href="Ledger.Conway.Conformance.Equivalence.html#13883" class="Bound">Γ</a> <a id="14002" href="Ledger.Conway.Conformance.Equivalence.html#13885" class="Bound">s</a> <a id="14004" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Bound">dcerts</a> <a id="14011" href="Ledger.Conway.Conformance.Equivalence.html#13894" class="Bound">s&#39;</a>
                   <a id="14033" class="Symbol">→</a> <a id="14035" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="14049" href="Ledger.Conway.Conformance.Equivalence.html#13894" class="Bound">s&#39;</a> <a id="14052" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14054" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="14056" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="14068" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="14071" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Bound">dcerts</a> <a id="14078" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="14080" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="14092" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="14095" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Bound">dcerts</a> <a id="14102" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="14104" class="Symbol">(</a><a id="14105" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="14119" href="Ledger.Conway.Conformance.Equivalence.html#13885" class="Bound">s</a><a id="14120" class="Symbol">)</a>
<a id="14122" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14141" class="Symbol">(</a><a id="14142" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="14150" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="14156" class="Symbol">)</a>                                  <a id="14191" class="Symbol">=</a> <a id="14193" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="14198" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14217" class="Symbol">(</a><a id="14218" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14225" class="Symbol">(</a><a id="14226" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="14239" class="Symbol">(</a><a id="14240" href="Ledger.Conway.Conformance.Certs.html#4134" class="InductiveConstructor">C.DELEG-delegate</a>   <a id="14259" class="Symbol">_))</a> <a id="14263" href="Ledger.Conway.Conformance.Equivalence.html#14263" class="Bound">rs</a><a id="14265" class="Symbol">)</a> <a id="14267" class="Symbol">=</a> <a id="14269" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14288" href="Ledger.Conway.Conformance.Equivalence.html#14263" class="Bound">rs</a>
<a id="14291" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14310" class="Symbol">(</a><a id="14311" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14318" class="Symbol">(</a><a id="14319" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="14332" class="Symbol">(</a><a id="14333" href="Ledger.Conway.Conformance.Certs.html#4763" class="InductiveConstructor">C.DELEG-dereg</a>      <a id="14352" class="Symbol">_))</a> <a id="14356" href="Ledger.Conway.Conformance.Equivalence.html#14356" class="Bound">rs</a><a id="14358" class="Symbol">)</a> <a id="14360" class="Symbol">=</a> <a id="14362" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14381" href="Ledger.Conway.Conformance.Equivalence.html#14356" class="Bound">rs</a>
<a id="14384" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14403" class="Symbol">(</a><a id="14404" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14411" class="Symbol">(</a><a id="14412" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="14425" class="Symbol">(</a><a id="14426" href="Ledger.Conway.Conformance.Certs.html#5127" class="InductiveConstructor">C.DELEG-reg</a>        <a id="14445" class="Symbol">_))</a> <a id="14449" href="Ledger.Conway.Conformance.Equivalence.html#14449" class="Bound">rs</a><a id="14451" class="Symbol">)</a> <a id="14453" class="Symbol">=</a> <a id="14455" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14474" href="Ledger.Conway.Conformance.Equivalence.html#14449" class="Bound">rs</a>
<a id="14477" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14496" class="Symbol">(</a><a id="14497" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14504" class="Symbol">(</a><a id="14505" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a> <a id="14517" class="Symbol">(</a><a id="14518" href="Ledger.Conway.Conformance.Certs.html#3760" class="InductiveConstructor">C.POOL-regpool</a>      <a id="14538" class="Symbol">_))</a> <a id="14542" href="Ledger.Conway.Conformance.Equivalence.html#14542" class="Bound">rs</a><a id="14544" class="Symbol">)</a> <a id="14546" class="Symbol">=</a> <a id="14548" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14567" href="Ledger.Conway.Conformance.Equivalence.html#14542" class="Bound">rs</a>
<a id="14570" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14589" class="Symbol">(</a><a id="14590" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14597" class="Symbol">(</a><a id="14598" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a> <a id="14610" href="Ledger.Conway.Conformance.Certs.html#3959" class="InductiveConstructor">C.POOL-retirepool</a><a id="14627" class="Symbol">)</a>       <a id="14635" href="Ledger.Conway.Conformance.Equivalence.html#14635" class="Bound">rs</a><a id="14637" class="Symbol">)</a> <a id="14639" class="Symbol">=</a> <a id="14641" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14660" href="Ledger.Conway.Conformance.Equivalence.html#14635" class="Bound">rs</a>
<a id="14663" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14682" class="Symbol">(</a><a id="14683" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14690" class="Symbol">(</a><a id="14691" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="14703" class="Symbol">(</a><a id="14704" href="Ledger.Conway.Conformance.Certs.html#5519" class="InductiveConstructor">C.GOVCERT-regdrep</a>   <a id="14724" class="Symbol">_))</a> <a id="14728" href="Ledger.Conway.Conformance.Equivalence.html#14728" class="Bound">rs</a><a id="14730" class="Symbol">)</a> <a id="14732" class="Symbol">=</a> <a id="14734" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14753" href="Ledger.Conway.Conformance.Equivalence.html#14728" class="Bound">rs</a>
<a id="14756" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14775" class="Symbol">(</a><a id="14776" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14783" class="Symbol">(</a><a id="14784" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="14796" class="Symbol">(</a><a id="14797" href="Ledger.Conway.Conformance.Certs.html#5885" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="14817" class="Symbol">_))</a> <a id="14821" href="Ledger.Conway.Conformance.Equivalence.html#14821" class="Bound">rs</a><a id="14823" class="Symbol">)</a> <a id="14825" class="Symbol">=</a> <a id="14827" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14846" href="Ledger.Conway.Conformance.Equivalence.html#14821" class="Bound">rs</a>
<a id="14849" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14868" class="Symbol">(</a><a id="14869" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="14876" class="Symbol">(</a><a id="14877" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="14889" class="Symbol">(</a><a id="14890" href="Ledger.Conway.Conformance.Certs.html#6180" class="InductiveConstructor">C.GOVCERT-ccreghot</a>  <a id="14910" class="Symbol">_))</a> <a id="14914" href="Ledger.Conway.Conformance.Equivalence.html#14914" class="Bound">rs</a><a id="14916" class="Symbol">)</a> <a id="14918" class="Symbol">=</a> <a id="14920" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="14939" href="Ledger.Conway.Conformance.Equivalence.html#14914" class="Bound">rs</a>

<a id="lemCERTSDepositsC"></a><a id="14943" href="Ledger.Conway.Conformance.Equivalence.html#14943" class="Function">lemCERTSDepositsC</a> <a id="14961" class="Symbol">:</a> <a id="14963" class="Symbol">∀</a> <a id="14965" class="Symbol">{</a><a id="14966" href="Ledger.Conway.Conformance.Equivalence.html#14966" class="Bound">Γ</a> <a id="14968" href="Ledger.Conway.Conformance.Equivalence.html#14968" class="Bound">s</a> <a id="14970" href="Ledger.Conway.Conformance.Equivalence.html#14970" class="Bound">txcerts</a> <a id="14978" href="Ledger.Conway.Conformance.Equivalence.html#14978" class="Bound">s&#39;</a><a id="14980" class="Symbol">}</a> <a id="14982" class="Symbol">(</a><a id="14983" class="Keyword">open</a> <a id="14988" href="Ledger.Certs.html#2791" class="Module">C.CertEnv</a> <a id="14998" href="Ledger.Conway.Conformance.Equivalence.html#14966" class="Bound">Γ</a> <a id="15000" class="Keyword">using</a> <a id="15006" class="Symbol">(</a><a id="15007" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="15009" class="Symbol">))</a>
                  <a id="15030" class="Symbol">→</a> <a id="15032" href="Ledger.Conway.Conformance.Equivalence.html#14966" class="Bound">Γ</a> <a id="15034" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">C.⊢</a> <a id="15038" href="Ledger.Conway.Conformance.Equivalence.html#14968" class="Bound">s</a> <a id="15040" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">⇀⦇</a> <a id="15043" href="Ledger.Conway.Conformance.Equivalence.html#14970" class="Bound">txcerts</a> <a id="15051" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">,CERTS⦈</a> <a id="15059" href="Ledger.Conway.Conformance.Equivalence.html#14978" class="Bound">s&#39;</a>
                  <a id="15080" class="Symbol">→</a> <a id="15082" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="15096" href="Ledger.Conway.Conformance.Equivalence.html#14978" class="Bound">s&#39;</a> <a id="15099" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15101" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="15103" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="15115" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="15118" href="Ledger.Conway.Conformance.Equivalence.html#14970" class="Bound">txcerts</a> <a id="15126" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="15128" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="15140" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="15143" href="Ledger.Conway.Conformance.Equivalence.html#14970" class="Bound">txcerts</a> <a id="15151" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="15153" class="Symbol">(</a><a id="15154" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="15168" href="Ledger.Conway.Conformance.Equivalence.html#14968" class="Bound">s</a><a id="15169" class="Symbol">)</a>
<a id="15171" href="Ledger.Conway.Conformance.Equivalence.html#14943" class="Function">lemCERTSDepositsC</a> <a id="15189" class="Symbol">(</a><a id="15190" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="15194" class="Symbol">(</a><a id="15195" href="Ledger.Conway.Conformance.Certs.html#7193" class="InductiveConstructor">C.CERT-base</a> <a id="15207" class="Symbol">_</a> <a id="15209" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15211" href="Ledger.Conway.Conformance.Equivalence.html#15211" class="Bound">step</a><a id="15215" class="Symbol">))</a> <a id="15218" class="Symbol">=</a> <a id="15220" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">lemCERTS&#39;DepositsC</a> <a id="15239" href="Ledger.Conway.Conformance.Equivalence.html#15211" class="Bound">step</a>

<a id="lemWellformed"></a><a id="15245" href="Ledger.Conway.Conformance.Equivalence.html#15245" class="Function">lemWellformed</a> <a id="15259" class="Symbol">:</a> <a id="15261" class="Symbol">∀</a> <a id="15263" class="Symbol">{</a><a id="15264" href="Ledger.Conway.Conformance.Equivalence.html#15264" class="Bound">Γ</a> <a id="15266" href="Ledger.Conway.Conformance.Equivalence.html#15266" class="Bound">s</a> <a id="15268" href="Ledger.Conway.Conformance.Equivalence.html#15268" class="Bound">tx</a> <a id="15271" href="Ledger.Conway.Conformance.Equivalence.html#15271" class="Bound">s&#39;</a><a id="15273" class="Symbol">}</a> <a id="15275" class="Symbol">→</a> <a id="15277" href="Ledger.Conway.Conformance.Equivalence.html#8600" class="Function">WellformedLState</a> <a id="15294" href="Ledger.Conway.Conformance.Equivalence.html#15266" class="Bound">s</a> <a id="15296" class="Symbol">→</a> <a id="15298" href="Ledger.Conway.Conformance.Equivalence.html#15264" class="Bound">Γ</a> <a id="15300" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="15304" href="Ledger.Conway.Conformance.Equivalence.html#15266" class="Bound">s</a> <a id="15306" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="15309" href="Ledger.Conway.Conformance.Equivalence.html#15268" class="Bound">tx</a> <a id="15312" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="15321" href="Ledger.Conway.Conformance.Equivalence.html#15271" class="Bound">s&#39;</a> <a id="15324" class="Symbol">→</a> <a id="15326" href="Ledger.Conway.Conformance.Equivalence.html#8600" class="Function">WellformedLState</a> <a id="15343" href="Ledger.Conway.Conformance.Equivalence.html#15271" class="Bound">s&#39;</a>
<a id="15346" href="Ledger.Conway.Conformance.Equivalence.html#15245" class="Function">lemWellformed</a> <a id="15360" class="Symbol">{</a><a id="15361" href="Ledger.Conway.Conformance.Equivalence.html#15361" class="Bound">Γ</a><a id="15362" class="Symbol">}</a> <a id="15364" class="Symbol">{</a><a id="15365" class="Argument">s</a> <a id="15367" class="Symbol">=</a> <a id="15369" href="Ledger.Conway.Conformance.Equivalence.html#15369" class="Bound">ls</a><a id="15371" class="Symbol">}</a> <a id="15373" class="Symbol">{</a><a id="15374" href="Ledger.Conway.Conformance.Equivalence.html#15374" class="Bound">tx</a><a id="15376" class="Symbol">}</a> <a id="15378" class="Symbol">{</a><a id="15379" class="Argument">s&#39;</a> <a id="15382" class="Symbol">=</a> <a id="15384" href="Ledger.Conway.Conformance.Equivalence.html#15384" class="Bound">ls&#39;</a><a id="15387" class="Symbol">}</a> <a id="15389" href="Ledger.Conway.Conformance.Equivalence.html#15389" class="Bound">wf</a> <a id="15392" class="Symbol">(</a><a id="15393" href="Ledger.Conway.Conformance.Ledger.html#2084" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="15405" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="15410" href="Ledger.Conway.Conformance.Equivalence.html#15410" class="Bound">utxo</a> <a id="15415" href="Ledger.Conway.Conformance.Equivalence.html#15415" class="Bound">certs</a> <a id="15421" href="Ledger.Conway.Conformance.Equivalence.html#15421" class="Bound">gov</a><a id="15424" class="Symbol">)</a> <a id="15426" class="Symbol">=</a> <a id="15428" href="Ledger.Conway.Conformance.Equivalence.html#16697" class="Function">goal</a>
  <a id="15435" class="Keyword">where</a>
    <a id="15445" class="Keyword">open</a> <a id="15450" href="Ledger.Conway.Conformance.Ledger.html#695" class="Module">C.LState</a> <a id="15459" href="Ledger.Conway.Conformance.Equivalence.html#15369" class="Bound">ls</a>  <a id="15463" class="Keyword">renaming</a> <a id="15472" class="Symbol">(</a><a id="15473" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">certState</a> <a id="15483" class="Symbol">to</a> <a id="15486" class="Field">certSt</a><a id="15492" class="Symbol">)</a>
    <a id="15498" class="Keyword">open</a> <a id="15503" href="Ledger.Conway.Conformance.Ledger.html#695" class="Module">C.LState</a> <a id="15512" href="Ledger.Conway.Conformance.Equivalence.html#15384" class="Bound">ls&#39;</a> <a id="15516" class="Keyword">renaming</a> <a id="15525" class="Symbol">(</a><a id="15526" href="Ledger.Conway.Conformance.Ledger.html#750" class="Field">utxoSt</a> <a id="15533" class="Symbol">to</a> <a id="15536" class="Field">utxoSt&#39;</a><a id="15543" class="Symbol">;</a> <a id="15545" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">certState</a> <a id="15555" class="Symbol">to</a> <a id="15558" class="Field">certSt&#39;</a><a id="15565" class="Symbol">)</a>
    <a id="15571" class="Keyword">open</a> <a id="15576" href="Ledger.Ledger.html#545" class="Module">L.LEnv</a> <a id="15583" href="Ledger.Conway.Conformance.Equivalence.html#15361" class="Bound">Γ</a> <a id="15585" class="Keyword">using</a> <a id="15591" class="Symbol">(</a><a id="15592" href="Ledger.Ledger.html#633" class="Field">pparams</a><a id="15599" class="Symbol">)</a>
    <a id="15605" class="Keyword">open</a> <a id="15610" href="Ledger.Transaction.html#2650" class="Module">TxBody</a> <a id="15617" class="Symbol">(</a><a id="15618" href="Ledger.Transaction.html#4226" class="Field">body</a> <a id="15623" href="Ledger.Conway.Conformance.Equivalence.html#15374" class="Bound">tx</a><a id="15625" class="Symbol">)</a>

    <a id="15632" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a>  <a id="15642" class="Symbol">=</a> <a id="15644" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="15665" href="Ledger.Conway.Conformance.Ledger.html#750" class="Function">utxoSt</a>
    <a id="15676" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a> <a id="15686" class="Symbol">=</a> <a id="15688" href="Ledger.Utxo.html#2813" class="Field">L.UTxOState.deposits</a> <a id="15709" href="Ledger.Conway.Conformance.Equivalence.html#15536" class="Function">utxoSt&#39;</a>

    <a id="15722" href="Ledger.Conway.Conformance.Equivalence.html#15722" class="Function">depositsL&#39;</a> <a id="15733" class="Symbol">=</a> <a id="15735" href="Ledger.Utxo.html#9297" class="Function">L.updateDeposits</a> <a id="15752" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="15760" class="Symbol">(</a><a id="15761" href="Ledger.Transaction.html#4226" class="Field">body</a> <a id="15766" href="Ledger.Conway.Conformance.Equivalence.html#15374" class="Bound">tx</a><a id="15768" class="Symbol">)</a> <a id="15770" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a>

    <a id="15784" href="Ledger.Conway.Conformance.Equivalence.html#15784" class="Function">ddeps</a> <a id="15790" class="Symbol">=</a> <a id="15792" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="15806" href="Ledger.Conway.Conformance.Equivalence.html#15486" class="Function">certSt</a> <a id="15813" class="Symbol">.</a><a id="15814" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15824" href="Ledger.Conway.Conformance.Equivalence.html#15824" class="Function">gdeps</a> <a id="15830" class="Symbol">=</a> <a id="15832" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="15846" href="Ledger.Conway.Conformance.Equivalence.html#15486" class="Function">certSt</a> <a id="15853" class="Symbol">.</a><a id="15854" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15865" href="Ledger.Conway.Conformance.Equivalence.html#15865" class="Function">ddeps&#39;</a> <a id="15872" class="Symbol">=</a> <a id="15874" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="15888" href="Ledger.Conway.Conformance.Equivalence.html#15558" class="Function">certSt&#39;</a> <a id="15896" class="Symbol">.</a><a id="15897" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15907" href="Ledger.Conway.Conformance.Equivalence.html#15907" class="Function">gdeps&#39;</a> <a id="15914" class="Symbol">=</a> <a id="15916" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="15930" href="Ledger.Conway.Conformance.Equivalence.html#15558" class="Function">certSt&#39;</a> <a id="15938" class="Symbol">.</a><a id="15939" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15950" href="Ledger.Conway.Conformance.Equivalence.html#15950" class="Function">lem</a> <a id="15954" class="Symbol">:</a> <a id="15956" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a> <a id="15966" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15968" href="Ledger.Conway.Conformance.Equivalence.html#15722" class="Function">depositsL&#39;</a>
    <a id="15983" href="Ledger.Conway.Conformance.Equivalence.html#15950" class="Function">lem</a> <a id="15987" class="Keyword">rewrite</a> <a id="15995" href="Ledger.Conway.Conformance.Equivalence.html#2419" class="Function">lemDepositsC</a> <a id="16008" href="Ledger.Conway.Conformance.Equivalence.html#15410" class="Bound">utxo</a> <a id="16013" class="Symbol">=</a> <a id="16015" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="16025" href="Ledger.Conway.Conformance.Equivalence.html#16025" class="Function">lem₁</a> <a id="16030" class="Symbol">:</a> <a id="16032" class="Symbol">(</a><a id="16033" href="Ledger.Conway.Conformance.Equivalence.html#15865" class="Function">ddeps&#39;</a> <a id="16040" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16042" href="Ledger.Conway.Conformance.Equivalence.html#15907" class="Function">gdeps&#39;</a><a id="16048" class="Symbol">)</a> <a id="16050" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="16052" class="Symbol">(</a><a id="16053" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="16065" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16073" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16081" href="Ledger.Conway.Conformance.Equivalence.html#15784" class="Function">ddeps</a> <a id="16087" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16089" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="16101" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16109" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16117" href="Ledger.Conway.Conformance.Equivalence.html#15824" class="Function">gdeps</a><a id="16122" class="Symbol">)</a>
    <a id="16128" href="Ledger.Conway.Conformance.Equivalence.html#16025" class="Function">lem₁</a> <a id="16133" class="Symbol">=</a> <a id="16135" href="Ledger.Conway.Conformance.Equivalence.html#14943" class="Function">lemCERTSDepositsC</a> <a id="16153" href="Ledger.Conway.Conformance.Equivalence.html#15415" class="Bound">certs</a>

    <a id="16164" href="Ledger.Conway.Conformance.Equivalence.html#16164" class="Function">lem₂</a> <a id="16169" class="Symbol">:</a>  <a id="16172" class="Symbol">(</a><a id="16173" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="16185" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16193" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16201" class="Symbol">(</a><a id="16202" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="16212" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a><a id="16220" class="Symbol">)</a> <a id="16222" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16224" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="16236" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16244" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16252" class="Symbol">(</a><a id="16253" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="16263" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a><a id="16271" class="Symbol">))</a>
         <a id="16283" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="16286" class="Symbol">(</a><a id="16287" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="16297" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a> <a id="16307" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16309" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="16319" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a><a id="16328" class="Symbol">)</a>
    <a id="16334" href="Ledger.Conway.Conformance.Equivalence.html#16164" class="Function">lem₂</a> <a id="16339" class="Keyword">rewrite</a> <a id="16347" href="Ledger.Conway.Conformance.Equivalence.html#15950" class="Function">lem</a> <a id="16351" class="Symbol">=</a> <a id="16353" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18888" class="Function">lem-upd-ddeps</a> <a id="16367" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16375" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a> <a id="16384" href="Ledger.Conway.Conformance.Equivalence.html#15374" class="Bound">tx</a> <a id="16387" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16389" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19661" class="Function">lem-upd-gdeps</a> <a id="16403" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16411" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a> <a id="16420" href="Ledger.Conway.Conformance.Equivalence.html#15374" class="Bound">tx</a>

    <a id="16428" href="Ledger.Conway.Conformance.Equivalence.html#16428" class="Function">lem₃</a> <a id="16433" class="Symbol">:</a>  <a id="16436" class="Symbol">(</a><a id="16437" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="16449" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16457" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16465" href="Ledger.Conway.Conformance.Equivalence.html#15784" class="Function">ddeps</a> <a id="16471" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16473" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="16485" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16493" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16501" href="Ledger.Conway.Conformance.Equivalence.html#15824" class="Function">gdeps</a><a id="16506" class="Symbol">)</a>
         <a id="16517" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="16520" class="Symbol">(</a><a id="16521" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="16533" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16541" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16549" class="Symbol">(</a><a id="16550" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="16560" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a><a id="16568" class="Symbol">)</a> <a id="16570" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16572" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="16584" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16592" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16600" class="Symbol">(</a><a id="16601" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="16611" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a><a id="16619" class="Symbol">))</a>
    <a id="16626" href="Ledger.Conway.Conformance.Equivalence.html#16428" class="Function">lem₃</a> <a id="16631" class="Symbol">=</a> <a id="16633" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="16635" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14127" class="Function">cong-updateDDeps</a> <a id="16652" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16660" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="16662" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#15113" class="Function">cong-updateGDeps</a> <a id="16679" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16687" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="16689" href="Ledger.Conway.Conformance.Equivalence.html#15389" class="Bound">wf</a>

    <a id="16697" href="Ledger.Conway.Conformance.Equivalence.html#16697" class="Function">goal</a> <a id="16702" class="Symbol">:</a> <a id="16704" class="Symbol">(</a><a id="16705" href="Ledger.Conway.Conformance.Equivalence.html#15865" class="Function">ddeps&#39;</a> <a id="16712" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16714" href="Ledger.Conway.Conformance.Equivalence.html#15907" class="Function">gdeps&#39;</a><a id="16720" class="Symbol">)</a> <a id="16722" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="16725" class="Symbol">(</a><a id="16726" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="16736" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a> <a id="16746" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16748" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="16758" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a><a id="16767" class="Symbol">)</a>
    <a id="16773" href="Ledger.Conway.Conformance.Equivalence.html#16697" class="Function">goal</a> <a id="16778" class="Keyword">with</a> <a id="16783" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> ← <a id="16790" href="Ledger.Conway.Conformance.Equivalence.html#16025" class="Function">lem₁</a> <a id="16795" class="Symbol">=</a> <a id="16797" href="Ledger.Conway.Conformance.Equivalence.html#13848" class="Function">≡ᵈ-trans</a> <a id="16806" class="Symbol">{</a><a id="16807" href="Ledger.Conway.Conformance.Equivalence.html#15865" class="Function">ddeps&#39;</a> <a id="16814" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16816" href="Ledger.Conway.Conformance.Equivalence.html#15907" class="Function">gdeps&#39;</a><a id="16822" class="Symbol">}</a>
                                     <a id="16861" class="Symbol">{</a><a id="16862" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2228" class="Function">updateDDeps</a> <a id="16874" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16882" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16890" class="Symbol">(</a><a id="16891" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="16901" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a><a id="16909" class="Symbol">)</a> <a id="16911" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16913" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2679" class="Function">updateGDeps</a> <a id="16925" href="Ledger.Ledger.html#633" class="Function">pparams</a> <a id="16933" href="Ledger.Transaction.html#2884" class="Function">txcerts</a> <a id="16941" class="Symbol">(</a><a id="16942" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="16952" href="Ledger.Conway.Conformance.Equivalence.html#15632" class="Function">deposits</a><a id="16960" class="Symbol">)}</a>
                                     <a id="17000" class="Symbol">{</a><a id="17001" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3891" class="Function">certDDeps</a> <a id="17011" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a> <a id="17021" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17023" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4037" class="Function">certGDeps</a> <a id="17033" href="Ledger.Conway.Conformance.Equivalence.html#15676" class="Function">deposits&#39;</a><a id="17042" class="Symbol">}</a>
                              <a id="17074" href="Ledger.Conway.Conformance.Equivalence.html#16428" class="Function">lem₃</a>
                              <a id="17109" href="Ledger.Conway.Conformance.Equivalence.html#16164" class="Function">lem₂</a>
<a id="17114" href="Ledger.Conway.Conformance.Equivalence.html#15245" class="Function">lemWellformed</a> <a id="17128" href="Ledger.Conway.Conformance.Equivalence.html#17128" class="Bound">wf</a> <a id="17131" class="Symbol">(</a><a id="17132" href="Ledger.Conway.Conformance.Ledger.html#2137" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="17144" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="17149" href="Ledger.Conway.Conformance.Equivalence.html#17149" class="Bound">utxo</a><a id="17153" class="Symbol">)</a> <a id="17155" class="Keyword">rewrite</a> <a id="17163" href="Ledger.Conway.Conformance.Equivalence.html#2419" class="Function">lemDepositsC</a> <a id="17176" href="Ledger.Conway.Conformance.Equivalence.html#17149" class="Bound">utxo</a> <a id="17181" class="Symbol">=</a> <a id="17183" href="Ledger.Conway.Conformance.Equivalence.html#17128" class="Bound">wf</a>

<a id="setCertDeposits"></a><a id="17187" href="Ledger.Conway.Conformance.Equivalence.html#17187" class="Function">setCertDeposits</a> <a id="17203" class="Symbol">:</a> <a id="17205" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="17216" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17218" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="17229" class="Symbol">→</a> <a id="17231" href="Ledger.Conway.Conformance.Certs.html#934" class="Record">C.CertState</a> <a id="17243" class="Symbol">→</a> <a id="17245" href="Ledger.Conway.Conformance.Certs.html#934" class="Record">C.CertState</a>
<a id="17257" href="Ledger.Conway.Conformance.Equivalence.html#17187" class="Function">setCertDeposits</a> <a id="17273" class="Symbol">(</a><a id="17274" href="Ledger.Conway.Conformance.Equivalence.html#17274" class="Bound">ddeps</a> <a id="17280" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17282" href="Ledger.Conway.Conformance.Equivalence.html#17282" class="Bound">gdeps</a><a id="17287" class="Symbol">)</a> <a id="17289" href="Ledger.Conway.Conformance.Equivalence.html#17289" class="Bound">cs</a> <a id="17292" class="Symbol">=</a>
  <a id="17296" class="Keyword">let</a> <a id="17300" class="Keyword">open</a> <a id="17305" href="Ledger.Conway.Conformance.Certs.html#934" class="Module">C.CertState</a> <a id="17317" href="Ledger.Conway.Conformance.Equivalence.html#17289" class="Bound">cs</a> <a id="17320" class="Keyword">in</a>
  <a id="17325" href="Ledger.Prelude.html#2441" class="Function Operator">⟦</a> <a id="17327" class="Keyword">record</a> <a id="17334" href="Ledger.Conway.Conformance.Certs.html#993" class="Field">dState</a> <a id="17341" class="Symbol">{</a><a id="17342" href="Ledger.Conway.Conformance.Certs.html#734" class="Field">deposits</a> <a id="17351" class="Symbol">=</a> <a id="17353" href="Ledger.Conway.Conformance.Equivalence.html#17274" class="Bound">ddeps</a><a id="17358" class="Symbol">}</a> <a id="17360" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17362" href="Ledger.Conway.Conformance.Certs.html#1013" class="Field">pState</a> <a id="17369" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17371" class="Keyword">record</a> <a id="17378" href="Ledger.Conway.Conformance.Certs.html#1033" class="Field">gState</a> <a id="17385" class="Symbol">{</a><a id="17386" href="Ledger.Conway.Conformance.Certs.html#904" class="Field">deposits</a> <a id="17395" class="Symbol">=</a> <a id="17397" href="Ledger.Conway.Conformance.Equivalence.html#17282" class="Bound">gdeps</a><a id="17402" class="Symbol">}</a> <a id="17404" href="Ledger.Prelude.html#2441" class="Function Operator">⟧</a>

<a id="_⊢_⇀⦇_,CERTS&#39;⦈_"></a><a id="17407" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17423" class="Symbol">:</a> <a id="17425" href="Ledger.Certs.html#2791" class="Record">C.CertEnv</a> <a id="17435" class="Symbol">→</a> <a id="17437" href="Ledger.Conway.Conformance.Certs.html#934" class="Record">C.CertState</a> <a id="17449" class="Symbol">→</a> <a id="17451" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="17456" href="Ledger.Certs.html#1324" class="Datatype">L.DCert</a> <a id="17464" class="Symbol">→</a> <a id="17466" href="Ledger.Conway.Conformance.Certs.html#934" class="Record">C.CertState</a> <a id="17478" class="Symbol">→</a> <a id="17480" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="17485" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17501" class="Symbol">=</a> <a id="17503" href="Interface.STS.html#1683" class="Function">ReflexiveTransitiveClosure</a> <a id="17530" class="Symbol">{</a><a id="17531" class="Argument">sts</a> <a id="17535" class="Symbol">=</a> <a id="17537" href="Ledger.Conway.Conformance.Certs.html#6471" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="17552" class="Symbol">}</a>

<a id="updateCDep"></a><a id="17555" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="17566" class="Symbol">:</a> <a id="17568" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="17576" class="Symbol">→</a> <a id="17578" href="Ledger.Certs.html#1324" class="Datatype">L.DCert</a> <a id="17586" class="Symbol">→</a> <a id="17588" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="17599" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17601" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="17612" class="Symbol">→</a> <a id="17614" href="Ledger.Certs.html#573" class="Function">L.Deposits</a> <a id="17625" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17627" href="Ledger.Certs.html#573" class="Function">L.Deposits</a>
<a id="17638" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="17649" href="Ledger.Conway.Conformance.Equivalence.html#17649" class="Bound">pp</a> <a id="17652" href="Ledger.Conway.Conformance.Equivalence.html#17652" class="Bound">cert</a> <a id="17657" class="Symbol">(</a><a id="17658" href="Ledger.Conway.Conformance.Equivalence.html#17658" class="Bound">ddep</a> <a id="17663" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17665" href="Ledger.Conway.Conformance.Equivalence.html#17665" class="Bound">gdep</a><a id="17669" class="Symbol">)</a> <a id="17671" class="Symbol">=</a> <a id="17673" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#1878" class="Function">updateDDep</a> <a id="17684" href="Ledger.Conway.Conformance.Equivalence.html#17649" class="Bound">pp</a> <a id="17687" href="Ledger.Conway.Conformance.Equivalence.html#17652" class="Bound">cert</a> <a id="17692" href="Ledger.Conway.Conformance.Equivalence.html#17658" class="Bound">ddep</a> <a id="17697" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17699" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2418" class="Function">updateGDep</a> <a id="17710" href="Ledger.Conway.Conformance.Equivalence.html#17649" class="Bound">pp</a> <a id="17713" href="Ledger.Conway.Conformance.Equivalence.html#17652" class="Bound">cert</a> <a id="17718" href="Ledger.Conway.Conformance.Equivalence.html#17665" class="Bound">gdep</a>

<a id="17724" class="Keyword">opaque</a>
  <a id="castCERTS&#39;"></a><a id="17733" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="17744" class="Symbol">:</a> <a id="17746" class="Symbol">∀</a> <a id="17748" class="Symbol">{</a><a id="17749" href="Ledger.Conway.Conformance.Equivalence.html#17749" class="Bound">Γ</a> <a id="17751" href="Ledger.Conway.Conformance.Equivalence.html#17751" class="Bound">certs</a><a id="17756" class="Symbol">}</a> <a id="17758" class="Symbol">{</a><a id="17759" href="Ledger.Conway.Conformance.Equivalence.html#17759" class="Bound">s</a> <a id="17761" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Bound">s&#39;</a> <a id="17764" class="Symbol">:</a> <a id="17766" href="Ledger.Certs.html#4327" class="Record">L.CertState</a><a id="17777" class="Symbol">}</a> <a id="17779" href="Ledger.Conway.Conformance.Equivalence.html#17779" class="Bound">deps₁</a> <a id="17785" href="Ledger.Conway.Conformance.Equivalence.html#17785" class="Bound">deps₂</a> <a id="17791" href="Ledger.Conway.Conformance.Equivalence.html#17791" class="Bound">deps₁&#39;</a>
             <a id="17811" class="Symbol">→</a> <a id="17813" href="Ledger.Conway.Conformance.Equivalence.html#17779" class="Bound">deps₁</a> <a id="17819" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="17822" href="Ledger.Conway.Conformance.Equivalence.html#17785" class="Bound">deps₂</a>
             <a id="17841" class="Symbol">→</a> <a id="17843" href="Ledger.Conway.Conformance.Equivalence.html#17749" class="Bound">Γ</a> <a id="17845" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">⊢</a> <a id="17847" href="Ledger.Conway.Conformance.Equivalence.html#17779" class="Bound">deps₁</a> <a id="17853" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17859" href="Ledger.Conway.Conformance.Equivalence.html#17759" class="Bound">s</a> <a id="17861" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">⇀⦇</a> <a id="17864" href="Ledger.Conway.Conformance.Equivalence.html#17751" class="Bound">certs</a> <a id="17870" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">,CERTS&#39;⦈</a> <a id="17879" class="Symbol">(</a><a id="17880" href="Ledger.Conway.Conformance.Equivalence.html#17791" class="Bound">deps₁&#39;</a> <a id="17887" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17893" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Bound">s&#39;</a><a id="17895" class="Symbol">)</a>
             <a id="17910" class="Symbol">→</a> <a id="17912" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="17915" href="Ledger.Conway.Conformance.Equivalence.html#17915" class="Bound">deps₂&#39;</a> <a id="17922" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="17924" href="Ledger.Conway.Conformance.Equivalence.html#17791" class="Bound">deps₁&#39;</a> <a id="17931" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="17934" href="Ledger.Conway.Conformance.Equivalence.html#17915" class="Bound">deps₂&#39;</a> <a id="17941" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17943" href="Ledger.Conway.Conformance.Equivalence.html#17749" class="Bound">Γ</a> <a id="17945" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">⊢</a> <a id="17947" href="Ledger.Conway.Conformance.Equivalence.html#17785" class="Bound">deps₂</a> <a id="17953" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17959" href="Ledger.Conway.Conformance.Equivalence.html#17759" class="Bound">s</a> <a id="17961" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">⇀⦇</a> <a id="17964" href="Ledger.Conway.Conformance.Equivalence.html#17751" class="Bound">certs</a> <a id="17970" href="Ledger.Conway.Conformance.Equivalence.html#17407" class="Function Operator">,CERTS&#39;⦈</a> <a id="17979" class="Symbol">(</a><a id="17980" href="Ledger.Conway.Conformance.Equivalence.html#17915" class="Bound">deps₂&#39;</a> <a id="17987" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17993" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Bound">s&#39;</a><a id="17995" class="Symbol">)</a>
  <a id="17999" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="18010" href="Ledger.Conway.Conformance.Equivalence.html#18010" class="Bound">deps₁</a> <a id="18016" href="Ledger.Conway.Conformance.Equivalence.html#18016" class="Bound">deps₂</a> <a id="18022" href="Ledger.Conway.Conformance.Equivalence.html#18022" class="Bound">deps₁&#39;</a> <a id="18029" href="Ledger.Conway.Conformance.Equivalence.html#18029" class="Bound">eqd</a> <a id="18033" class="Symbol">(</a><a id="18034" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="18042" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a><a id="18048" class="Symbol">)</a> <a id="18050" class="Symbol">=</a> <a id="18052" href="Ledger.Conway.Conformance.Equivalence.html#18016" class="Bound">deps₂</a> <a id="18058" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18060" href="Ledger.Conway.Conformance.Equivalence.html#18029" class="Bound">eqd</a> <a id="18064" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18066" href="Interface.STS.html#453" class="InductiveConstructor">BS-base</a> <a id="18074" href="Interface.STS.html#1300" class="InductiveConstructor">Id-nop</a>
  <a id="18083" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="18094" class="Symbol">{</a><a id="18095" href="Ledger.Conway.Conformance.Equivalence.html#18095" class="Bound">Γ</a><a id="18096" class="Symbol">}</a> <a id="18098" href="Ledger.Conway.Conformance.Equivalence.html#18098" class="Bound">deps₁</a> <a id="18104" href="Ledger.Conway.Conformance.Equivalence.html#18104" class="Bound">deps₂</a> <a id="18110" href="Ledger.Conway.Conformance.Equivalence.html#18110" class="Bound">deps₁&#39;</a> <a id="18117" href="Ledger.Conway.Conformance.Equivalence.html#18117" class="Bound">eqd</a> <a id="18121" class="Symbol">(</a><a id="18122" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18129" class="Symbol">(</a><a id="18130" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="18143" class="Symbol">{</a><a id="18144" class="Argument">dCert</a> <a id="18150" class="Symbol">=</a> <a id="18152" href="Ledger.Conway.Conformance.Equivalence.html#18152" class="Bound">cert</a><a id="18156" class="Symbol">}</a> <a id="18158" class="Symbol">(</a><a id="18159" href="Ledger.Conway.Conformance.Certs.html#4134" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18176" href="Ledger.Conway.Conformance.Equivalence.html#18176" class="Bound">h</a><a id="18177" class="Symbol">))</a>    <a id="18183" href="Ledger.Conway.Conformance.Equivalence.html#18183" class="Bound">rs</a><a id="18185" class="Symbol">)</a> <a id="18187" class="Symbol">=</a>
    <a id="18193" class="Keyword">let</a> <a id="18197" class="Keyword">open</a> <a id="18202" href="Ledger.Certs.html#2791" class="Module">C.CertEnv</a> <a id="18212" href="Ledger.Conway.Conformance.Equivalence.html#18095" class="Bound">Γ</a> <a id="18214" class="Keyword">using</a> <a id="18220" class="Symbol">(</a><a id="18221" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="18223" class="Symbol">)</a>
        <a id="18233" href="Ledger.Conway.Conformance.Equivalence.html#18233" class="Bound">deps₂&#39;</a> <a id="18240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18242" href="Ledger.Conway.Conformance.Equivalence.html#18242" class="Bound">eqd&#39;</a> <a id="18247" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18249" href="Ledger.Conway.Conformance.Equivalence.html#18249" class="Bound">rs&#39;</a> <a id="18253" class="Symbol">=</a> <a id="18255" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="18266" class="Symbol">(</a><a id="18267" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="18278" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="18281" href="Ledger.Conway.Conformance.Equivalence.html#18152" class="Bound">cert</a> <a id="18286" href="Ledger.Conway.Conformance.Equivalence.html#18098" class="Bound">deps₁</a><a id="18291" class="Symbol">)</a> <a id="18293" class="Symbol">(</a><a id="18294" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="18305" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="18308" href="Ledger.Conway.Conformance.Equivalence.html#18152" class="Bound">cert</a> <a id="18313" href="Ledger.Conway.Conformance.Equivalence.html#18104" class="Bound">deps₂</a><a id="18318" class="Symbol">)</a> <a id="18320" href="Ledger.Conway.Conformance.Equivalence.html#18110" class="Bound">deps₁&#39;</a>
                                         <a id="18368" class="Symbol">(</a><a id="18369" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="18371" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13379" class="Function">cong-updateDDep</a> <a id="18387" class="Symbol">{</a><a id="18388" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="18390" class="Symbol">}</a> <a id="18392" href="Ledger.Conway.Conformance.Equivalence.html#18152" class="Bound">cert</a> <a id="18397" class="Symbol">{</a><a id="18398" href="Ledger.Conway.Conformance.Equivalence.html#18098" class="Bound">deps₁</a> <a id="18404" class="Symbol">.</a><a id="18405" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18410" class="Symbol">}</a> <a id="18412" class="Symbol">{</a><a id="18413" href="Ledger.Conway.Conformance.Equivalence.html#18104" class="Bound">deps₂</a> <a id="18419" class="Symbol">.</a><a id="18420" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18425" class="Symbol">}</a>
                                          <a id="18469" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="18471" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14410" class="Function">cong-updateGDep</a> <a id="18487" class="Symbol">{</a><a id="18488" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="18490" class="Symbol">}</a> <a id="18492" href="Ledger.Conway.Conformance.Equivalence.html#18152" class="Bound">cert</a> <a id="18497" class="Symbol">{</a><a id="18498" href="Ledger.Conway.Conformance.Equivalence.html#18098" class="Bound">deps₁</a> <a id="18504" class="Symbol">.</a><a id="18505" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18510" class="Symbol">}</a> <a id="18512" class="Symbol">{</a><a id="18513" href="Ledger.Conway.Conformance.Equivalence.html#18104" class="Bound">deps₂</a> <a id="18519" class="Symbol">.</a><a id="18520" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18525" class="Symbol">}</a> <a id="18527" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="18529" href="Ledger.Conway.Conformance.Equivalence.html#18117" class="Bound">eqd</a><a id="18532" class="Symbol">)</a> <a id="18534" href="Ledger.Conway.Conformance.Equivalence.html#18183" class="Bound">rs</a>
    <a id="18541" class="Keyword">in</a>  <a id="18545" href="Ledger.Conway.Conformance.Equivalence.html#18233" class="Bound">deps₂&#39;</a> <a id="18552" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18554" href="Ledger.Conway.Conformance.Equivalence.html#18242" class="Bound">eqd&#39;</a> <a id="18559" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18561" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18568" class="Symbol">(</a><a id="18569" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="18582" class="Symbol">(</a><a id="18583" href="Ledger.Conway.Conformance.Certs.html#4134" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18600" href="Ledger.Conway.Conformance.Equivalence.html#18176" class="Bound">h</a><a id="18601" class="Symbol">))</a> <a id="18604" href="Ledger.Conway.Conformance.Equivalence.html#18249" class="Bound">rs&#39;</a>
  <a id="18610" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="18621" class="Symbol">{</a><a id="18622" href="Ledger.Conway.Conformance.Equivalence.html#18622" class="Bound">Γ</a><a id="18623" class="Symbol">}</a> <a id="18625" href="Ledger.Conway.Conformance.Equivalence.html#18625" class="Bound">deps₁</a> <a id="18631" href="Ledger.Conway.Conformance.Equivalence.html#18631" class="Bound">deps₂</a> <a id="18637" href="Ledger.Conway.Conformance.Equivalence.html#18637" class="Bound">deps₁&#39;</a> <a id="18644" href="Ledger.Conway.Conformance.Equivalence.html#18644" class="Bound">eqd</a> <a id="18648" class="Symbol">(</a><a id="18649" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="18656" class="Symbol">(</a><a id="18657" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="18670" class="Symbol">{</a><a id="18671" class="Argument">dCert</a> <a id="18677" class="Symbol">=</a> <a id="18679" href="Ledger.Conway.Conformance.Equivalence.html#18679" class="Bound">cert</a><a id="18683" class="Symbol">}</a> <a id="18685" class="Symbol">(</a><a id="18686" href="Ledger.Conway.Conformance.Certs.html#4763" class="InductiveConstructor">C.DELEG-dereg</a> <a id="18700" class="Symbol">(</a><a id="18701" href="Ledger.Conway.Conformance.Equivalence.html#18701" class="Bound">a</a> <a id="18703" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18705" href="Ledger.Conway.Conformance.Equivalence.html#18705" class="Bound">b</a> <a id="18707" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18709" href="Ledger.Conway.Conformance.Equivalence.html#18709" class="Bound">c</a><a id="18710" class="Symbol">)))</a> <a id="18714" href="Ledger.Conway.Conformance.Equivalence.html#18714" class="Bound">rs</a><a id="18716" class="Symbol">)</a> <a id="18718" class="Symbol">=</a>
    <a id="18724" class="Keyword">let</a> <a id="18728" class="Keyword">open</a> <a id="18733" href="Ledger.Certs.html#2791" class="Module">C.CertEnv</a> <a id="18743" href="Ledger.Conway.Conformance.Equivalence.html#18622" class="Bound">Γ</a> <a id="18745" class="Keyword">using</a> <a id="18751" class="Symbol">(</a><a id="18752" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="18754" class="Symbol">)</a>
        <a id="18764" href="Ledger.Conway.Conformance.Equivalence.html#18764" class="Bound">deps₂&#39;</a> <a id="18771" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18773" href="Ledger.Conway.Conformance.Equivalence.html#18773" class="Bound">eqd&#39;</a> <a id="18778" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18780" href="Ledger.Conway.Conformance.Equivalence.html#18780" class="Bound">rs&#39;</a> <a id="18784" class="Symbol">=</a> <a id="18786" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="18797" class="Symbol">(</a><a id="18798" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="18809" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="18812" href="Ledger.Conway.Conformance.Equivalence.html#18679" class="Bound">cert</a> <a id="18817" href="Ledger.Conway.Conformance.Equivalence.html#18625" class="Bound">deps₁</a><a id="18822" class="Symbol">)</a> <a id="18824" class="Symbol">(</a><a id="18825" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="18836" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="18839" href="Ledger.Conway.Conformance.Equivalence.html#18679" class="Bound">cert</a> <a id="18844" href="Ledger.Conway.Conformance.Equivalence.html#18631" class="Bound">deps₂</a><a id="18849" class="Symbol">)</a> <a id="18851" href="Ledger.Conway.Conformance.Equivalence.html#18637" class="Bound">deps₁&#39;</a>
                                         <a id="18899" class="Symbol">(</a><a id="18900" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="18902" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13379" class="Function">cong-updateDDep</a> <a id="18918" class="Symbol">{</a><a id="18919" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="18921" class="Symbol">}</a> <a id="18923" href="Ledger.Conway.Conformance.Equivalence.html#18679" class="Bound">cert</a> <a id="18928" class="Symbol">{</a><a id="18929" href="Ledger.Conway.Conformance.Equivalence.html#18625" class="Bound">deps₁</a> <a id="18935" class="Symbol">.</a><a id="18936" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18941" class="Symbol">}</a> <a id="18943" class="Symbol">{</a><a id="18944" href="Ledger.Conway.Conformance.Equivalence.html#18631" class="Bound">deps₂</a> <a id="18950" class="Symbol">.</a><a id="18951" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18956" class="Symbol">}</a>
                                          <a id="19000" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="19002" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14410" class="Function">cong-updateGDep</a> <a id="19018" class="Symbol">{</a><a id="19019" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="19021" class="Symbol">}</a> <a id="19023" href="Ledger.Conway.Conformance.Equivalence.html#18679" class="Bound">cert</a> <a id="19028" class="Symbol">{</a><a id="19029" href="Ledger.Conway.Conformance.Equivalence.html#18625" class="Bound">deps₁</a> <a id="19035" class="Symbol">.</a><a id="19036" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19041" class="Symbol">}</a> <a id="19043" class="Symbol">{</a><a id="19044" href="Ledger.Conway.Conformance.Equivalence.html#18631" class="Bound">deps₂</a> <a id="19050" class="Symbol">.</a><a id="19051" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19056" class="Symbol">}</a> <a id="19058" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="19060" href="Ledger.Conway.Conformance.Equivalence.html#18644" class="Bound">eqd</a><a id="19063" class="Symbol">)</a> <a id="19065" href="Ledger.Conway.Conformance.Equivalence.html#18714" class="Bound">rs</a>
    <a id="19072" class="Keyword">in</a>  <a id="19076" href="Ledger.Conway.Conformance.Equivalence.html#18764" class="Bound">deps₂&#39;</a> <a id="19083" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19085" href="Ledger.Conway.Conformance.Equivalence.html#18773" class="Bound">eqd&#39;</a> <a id="19090" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19092" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19099" class="Symbol">(</a><a id="19100" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="19113" class="Symbol">(</a><a id="19114" href="Ledger.Conway.Conformance.Certs.html#4763" class="InductiveConstructor">C.DELEG-dereg</a> <a id="19128" class="Symbol">(</a><a id="19129" href="Ledger.Conway.Conformance.Equivalence.html#18701" class="Bound">a</a> <a id="19131" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19133" href="Ledger.Conway.Conformance.Equivalence.html#18644" class="Bound">eqd</a> <a id="19137" class="Symbol">.</a><a id="19138" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19144" class="Symbol">.</a><a id="19145" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19151" href="Ledger.Conway.Conformance.Equivalence.html#18705" class="Bound">b</a> <a id="19153" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19155" href="Ledger.Conway.Conformance.Equivalence.html#18709" class="Bound">c</a><a id="19156" class="Symbol">)))</a> <a id="19160" href="Ledger.Conway.Conformance.Equivalence.html#18780" class="Bound">rs&#39;</a>
                                                              <a id="19226" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="19263" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="19274" class="Symbol">{</a><a id="19275" href="Ledger.Conway.Conformance.Equivalence.html#19275" class="Bound">Γ</a><a id="19276" class="Symbol">}</a> <a id="19278" href="Ledger.Conway.Conformance.Equivalence.html#19278" class="Bound">deps₁</a> <a id="19284" href="Ledger.Conway.Conformance.Equivalence.html#19284" class="Bound">deps₂</a> <a id="19290" href="Ledger.Conway.Conformance.Equivalence.html#19290" class="Bound">deps₁&#39;</a> <a id="19297" href="Ledger.Conway.Conformance.Equivalence.html#19297" class="Bound">eqd</a> <a id="19301" class="Symbol">(</a><a id="19302" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19309" class="Symbol">(</a><a id="19310" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="19323" class="Symbol">{</a><a id="19324" class="Argument">dCert</a> <a id="19330" class="Symbol">=</a> <a id="19332" href="Ledger.Conway.Conformance.Equivalence.html#19332" class="Bound">cert</a><a id="19336" class="Symbol">}</a> <a id="19338" class="Symbol">(</a><a id="19339" href="Ledger.Conway.Conformance.Certs.html#5127" class="InductiveConstructor">C.DELEG-reg</a> <a id="19351" href="Ledger.Conway.Conformance.Equivalence.html#19351" class="Bound">h</a><a id="19352" class="Symbol">))</a>         <a id="19363" href="Ledger.Conway.Conformance.Equivalence.html#19363" class="Bound">rs</a><a id="19365" class="Symbol">)</a> <a id="19367" class="Symbol">=</a>
    <a id="19373" class="Keyword">let</a> <a id="19377" class="Keyword">open</a> <a id="19382" href="Ledger.Certs.html#2791" class="Module">C.CertEnv</a> <a id="19392" href="Ledger.Conway.Conformance.Equivalence.html#19275" class="Bound">Γ</a> <a id="19394" class="Keyword">using</a> <a id="19400" class="Symbol">(</a><a id="19401" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="19403" class="Symbol">)</a>
        <a id="19413" href="Ledger.Conway.Conformance.Equivalence.html#19413" class="Bound">deps₂&#39;</a> <a id="19420" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19422" href="Ledger.Conway.Conformance.Equivalence.html#19422" class="Bound">eqd&#39;</a> <a id="19427" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19429" href="Ledger.Conway.Conformance.Equivalence.html#19429" class="Bound">rs&#39;</a> <a id="19433" class="Symbol">=</a> <a id="19435" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="19446" class="Symbol">(</a><a id="19447" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="19458" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="19461" href="Ledger.Conway.Conformance.Equivalence.html#19332" class="Bound">cert</a> <a id="19466" href="Ledger.Conway.Conformance.Equivalence.html#19278" class="Bound">deps₁</a><a id="19471" class="Symbol">)</a> <a id="19473" class="Symbol">(</a><a id="19474" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="19485" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="19488" href="Ledger.Conway.Conformance.Equivalence.html#19332" class="Bound">cert</a> <a id="19493" href="Ledger.Conway.Conformance.Equivalence.html#19284" class="Bound">deps₂</a><a id="19498" class="Symbol">)</a> <a id="19500" href="Ledger.Conway.Conformance.Equivalence.html#19290" class="Bound">deps₁&#39;</a>
                                         <a id="19548" class="Symbol">(</a><a id="19549" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="19551" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13379" class="Function">cong-updateDDep</a> <a id="19567" class="Symbol">{</a><a id="19568" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="19570" class="Symbol">}</a> <a id="19572" href="Ledger.Conway.Conformance.Equivalence.html#19332" class="Bound">cert</a> <a id="19577" class="Symbol">{</a><a id="19578" href="Ledger.Conway.Conformance.Equivalence.html#19278" class="Bound">deps₁</a> <a id="19584" class="Symbol">.</a><a id="19585" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19590" class="Symbol">}</a> <a id="19592" class="Symbol">{</a><a id="19593" href="Ledger.Conway.Conformance.Equivalence.html#19284" class="Bound">deps₂</a> <a id="19599" class="Symbol">.</a><a id="19600" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19605" class="Symbol">}</a>
                                          <a id="19649" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="19651" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14410" class="Function">cong-updateGDep</a> <a id="19667" class="Symbol">{</a><a id="19668" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="19670" class="Symbol">}</a> <a id="19672" href="Ledger.Conway.Conformance.Equivalence.html#19332" class="Bound">cert</a> <a id="19677" class="Symbol">{</a><a id="19678" href="Ledger.Conway.Conformance.Equivalence.html#19278" class="Bound">deps₁</a> <a id="19684" class="Symbol">.</a><a id="19685" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19690" class="Symbol">}</a> <a id="19692" class="Symbol">{</a><a id="19693" href="Ledger.Conway.Conformance.Equivalence.html#19284" class="Bound">deps₂</a> <a id="19699" class="Symbol">.</a><a id="19700" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19705" class="Symbol">}</a> <a id="19707" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="19709" href="Ledger.Conway.Conformance.Equivalence.html#19297" class="Bound">eqd</a><a id="19712" class="Symbol">)</a> <a id="19714" href="Ledger.Conway.Conformance.Equivalence.html#19363" class="Bound">rs</a>
    <a id="19721" class="Keyword">in</a>  <a id="19725" href="Ledger.Conway.Conformance.Equivalence.html#19413" class="Bound">deps₂&#39;</a> <a id="19732" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19734" href="Ledger.Conway.Conformance.Equivalence.html#19422" class="Bound">eqd&#39;</a> <a id="19739" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19741" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19748" class="Symbol">(</a><a id="19749" href="Ledger.Conway.Conformance.Certs.html#6542" class="InductiveConstructor">C.CERT-deleg</a> <a id="19762" class="Symbol">(</a><a id="19763" href="Ledger.Conway.Conformance.Certs.html#5127" class="InductiveConstructor">C.DELEG-reg</a> <a id="19775" href="Ledger.Conway.Conformance.Equivalence.html#19351" class="Bound">h</a><a id="19776" class="Symbol">))</a> <a id="19779" href="Ledger.Conway.Conformance.Equivalence.html#19429" class="Bound">rs&#39;</a>
  <a id="19785" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="19796" class="Symbol">{</a><a id="19797" href="Ledger.Conway.Conformance.Equivalence.html#19797" class="Bound">Γ</a><a id="19798" class="Symbol">}</a> <a id="19800" href="Ledger.Conway.Conformance.Equivalence.html#19800" class="Bound">deps₁</a> <a id="19806" href="Ledger.Conway.Conformance.Equivalence.html#19806" class="Bound">deps₂</a> <a id="19812" href="Ledger.Conway.Conformance.Equivalence.html#19812" class="Bound">deps₁&#39;</a> <a id="19819" href="Ledger.Conway.Conformance.Equivalence.html#19819" class="Bound">eqd</a> <a id="19823" class="Symbol">(</a><a id="19824" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19831" class="Symbol">(</a><a id="19832" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a>  <a id="19845" class="Symbol">{</a><a id="19846" class="Argument">dCert</a> <a id="19852" class="Symbol">=</a> <a id="19854" href="Ledger.Conway.Conformance.Equivalence.html#19854" class="Bound">cert</a><a id="19858" class="Symbol">}</a> <a id="19860" class="Symbol">(</a><a id="19861" href="Ledger.Conway.Conformance.Certs.html#3760" class="InductiveConstructor">C.POOL-regpool</a> <a id="19876" href="Ledger.Conway.Conformance.Equivalence.html#19876" class="Bound">h</a><a id="19877" class="Symbol">))</a>      <a id="19885" href="Ledger.Conway.Conformance.Equivalence.html#19885" class="Bound">rs</a><a id="19887" class="Symbol">)</a> <a id="19889" class="Symbol">=</a>
    <a id="19895" class="Keyword">let</a> <a id="19899" href="Ledger.Conway.Conformance.Equivalence.html#19899" class="Bound">deps₂&#39;</a> <a id="19906" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19908" href="Ledger.Conway.Conformance.Equivalence.html#19908" class="Bound">eqd&#39;</a> <a id="19913" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19915" href="Ledger.Conway.Conformance.Equivalence.html#19915" class="Bound">rs&#39;</a> <a id="19919" class="Symbol">=</a> <a id="19921" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="19932" href="Ledger.Conway.Conformance.Equivalence.html#19800" class="Bound">deps₁</a> <a id="19938" href="Ledger.Conway.Conformance.Equivalence.html#19806" class="Bound">deps₂</a> <a id="19944" href="Ledger.Conway.Conformance.Equivalence.html#19812" class="Bound">deps₁&#39;</a> <a id="19951" href="Ledger.Conway.Conformance.Equivalence.html#19819" class="Bound">eqd</a> <a id="19955" href="Ledger.Conway.Conformance.Equivalence.html#19885" class="Bound">rs</a>
    <a id="19962" class="Keyword">in</a>  <a id="19966" href="Ledger.Conway.Conformance.Equivalence.html#19899" class="Bound">deps₂&#39;</a> <a id="19973" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19975" href="Ledger.Conway.Conformance.Equivalence.html#19908" class="Bound">eqd&#39;</a> <a id="19980" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19982" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="19989" class="Symbol">(</a><a id="19990" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a> <a id="20002" class="Symbol">(</a><a id="20003" href="Ledger.Conway.Conformance.Certs.html#3760" class="InductiveConstructor">C.POOL-regpool</a> <a id="20018" href="Ledger.Conway.Conformance.Equivalence.html#19876" class="Bound">h</a><a id="20019" class="Symbol">))</a> <a id="20022" href="Ledger.Conway.Conformance.Equivalence.html#19915" class="Bound">rs&#39;</a>
  <a id="20028" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="20039" class="Symbol">{</a><a id="20040" href="Ledger.Conway.Conformance.Equivalence.html#20040" class="Bound">Γ</a><a id="20041" class="Symbol">}</a> <a id="20043" href="Ledger.Conway.Conformance.Equivalence.html#20043" class="Bound">deps₁</a> <a id="20049" href="Ledger.Conway.Conformance.Equivalence.html#20049" class="Bound">deps₂</a> <a id="20055" href="Ledger.Conway.Conformance.Equivalence.html#20055" class="Bound">deps₁&#39;</a> <a id="20062" href="Ledger.Conway.Conformance.Equivalence.html#20062" class="Bound">eqd</a> <a id="20066" class="Symbol">(</a><a id="20067" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20074" class="Symbol">(</a><a id="20075" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a>  <a id="20088" class="Symbol">{</a><a id="20089" class="Argument">dCert</a> <a id="20095" class="Symbol">=</a> <a id="20097" href="Ledger.Conway.Conformance.Equivalence.html#20097" class="Bound">cert</a><a id="20101" class="Symbol">}</a> <a id="20103" href="Ledger.Conway.Conformance.Certs.html#3959" class="InductiveConstructor">C.POOL-retirepool</a><a id="20120" class="Symbol">)</a>       <a id="20128" href="Ledger.Conway.Conformance.Equivalence.html#20128" class="Bound">rs</a><a id="20130" class="Symbol">)</a> <a id="20132" class="Symbol">=</a>
    <a id="20138" class="Keyword">let</a> <a id="20142" href="Ledger.Conway.Conformance.Equivalence.html#20142" class="Bound">deps₂&#39;</a> <a id="20149" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20151" href="Ledger.Conway.Conformance.Equivalence.html#20151" class="Bound">eqd&#39;</a> <a id="20156" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20158" href="Ledger.Conway.Conformance.Equivalence.html#20158" class="Bound">rs&#39;</a> <a id="20162" class="Symbol">=</a> <a id="20164" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="20175" href="Ledger.Conway.Conformance.Equivalence.html#20043" class="Bound">deps₁</a> <a id="20181" href="Ledger.Conway.Conformance.Equivalence.html#20049" class="Bound">deps₂</a> <a id="20187" href="Ledger.Conway.Conformance.Equivalence.html#20055" class="Bound">deps₁&#39;</a> <a id="20194" href="Ledger.Conway.Conformance.Equivalence.html#20062" class="Bound">eqd</a> <a id="20198" href="Ledger.Conway.Conformance.Equivalence.html#20128" class="Bound">rs</a>
    <a id="20205" class="Keyword">in</a>  <a id="20209" href="Ledger.Conway.Conformance.Equivalence.html#20142" class="Bound">deps₂&#39;</a> <a id="20216" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20218" href="Ledger.Conway.Conformance.Equivalence.html#20151" class="Bound">eqd&#39;</a> <a id="20223" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20225" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20232" class="Symbol">(</a><a id="20233" href="Ledger.Conway.Conformance.Certs.html#6776" class="InductiveConstructor">C.CERT-pool</a> <a id="20245" href="Ledger.Conway.Conformance.Certs.html#3959" class="InductiveConstructor">C.POOL-retirepool</a><a id="20262" class="Symbol">)</a> <a id="20264" href="Ledger.Conway.Conformance.Equivalence.html#20158" class="Bound">rs&#39;</a>
  <a id="20270" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="20281" class="Symbol">{</a><a id="20282" href="Ledger.Conway.Conformance.Equivalence.html#20282" class="Bound">Γ</a><a id="20283" class="Symbol">}</a> <a id="20285" href="Ledger.Conway.Conformance.Equivalence.html#20285" class="Bound">deps₁</a> <a id="20291" href="Ledger.Conway.Conformance.Equivalence.html#20291" class="Bound">deps₂</a> <a id="20297" href="Ledger.Conway.Conformance.Equivalence.html#20297" class="Bound">deps₁&#39;</a> <a id="20304" href="Ledger.Conway.Conformance.Equivalence.html#20304" class="Bound">eqd</a> <a id="20308" class="Symbol">(</a><a id="20309" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20316" class="Symbol">(</a><a id="20317" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20330" class="Symbol">{</a><a id="20331" class="Argument">dCert</a> <a id="20337" class="Symbol">=</a> <a id="20339" href="Ledger.Conway.Conformance.Equivalence.html#20339" class="Bound">cert</a><a id="20343" class="Symbol">}</a> <a id="20345" class="Symbol">(</a><a id="20346" href="Ledger.Conway.Conformance.Certs.html#5519" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20364" href="Ledger.Conway.Conformance.Equivalence.html#20364" class="Bound">h</a><a id="20365" class="Symbol">))</a>   <a id="20370" href="Ledger.Conway.Conformance.Equivalence.html#20370" class="Bound">rs</a><a id="20372" class="Symbol">)</a> <a id="20374" class="Symbol">=</a>
    <a id="20380" class="Keyword">let</a> <a id="20384" class="Keyword">open</a> <a id="20389" href="Ledger.Certs.html#2791" class="Module">C.CertEnv</a> <a id="20399" href="Ledger.Conway.Conformance.Equivalence.html#20282" class="Bound">Γ</a> <a id="20401" class="Keyword">using</a> <a id="20407" class="Symbol">(</a><a id="20408" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="20410" class="Symbol">)</a>
        <a id="20420" href="Ledger.Conway.Conformance.Equivalence.html#20420" class="Bound">deps₂&#39;</a> <a id="20427" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20429" href="Ledger.Conway.Conformance.Equivalence.html#20429" class="Bound">eqd&#39;</a> <a id="20434" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20436" href="Ledger.Conway.Conformance.Equivalence.html#20436" class="Bound">rs&#39;</a> <a id="20440" class="Symbol">=</a> <a id="20442" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="20453" class="Symbol">(</a><a id="20454" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="20465" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="20468" href="Ledger.Conway.Conformance.Equivalence.html#20339" class="Bound">cert</a> <a id="20473" href="Ledger.Conway.Conformance.Equivalence.html#20285" class="Bound">deps₁</a><a id="20478" class="Symbol">)</a> <a id="20480" class="Symbol">(</a><a id="20481" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="20492" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="20495" href="Ledger.Conway.Conformance.Equivalence.html#20339" class="Bound">cert</a> <a id="20500" href="Ledger.Conway.Conformance.Equivalence.html#20291" class="Bound">deps₂</a><a id="20505" class="Symbol">)</a> <a id="20507" href="Ledger.Conway.Conformance.Equivalence.html#20297" class="Bound">deps₁&#39;</a>
                                         <a id="20555" class="Symbol">(</a><a id="20556" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="20558" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13379" class="Function">cong-updateDDep</a> <a id="20574" class="Symbol">{</a><a id="20575" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="20577" class="Symbol">}</a> <a id="20579" href="Ledger.Conway.Conformance.Equivalence.html#20339" class="Bound">cert</a> <a id="20584" class="Symbol">{</a><a id="20585" href="Ledger.Conway.Conformance.Equivalence.html#20285" class="Bound">deps₁</a> <a id="20591" class="Symbol">.</a><a id="20592" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20597" class="Symbol">}</a> <a id="20599" class="Symbol">{</a><a id="20600" href="Ledger.Conway.Conformance.Equivalence.html#20291" class="Bound">deps₂</a> <a id="20606" class="Symbol">.</a><a id="20607" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20612" class="Symbol">}</a>
                                          <a id="20656" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="20658" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14410" class="Function">cong-updateGDep</a> <a id="20674" class="Symbol">{</a><a id="20675" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="20677" class="Symbol">}</a> <a id="20679" href="Ledger.Conway.Conformance.Equivalence.html#20339" class="Bound">cert</a> <a id="20684" class="Symbol">{</a><a id="20685" href="Ledger.Conway.Conformance.Equivalence.html#20285" class="Bound">deps₁</a> <a id="20691" class="Symbol">.</a><a id="20692" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20697" class="Symbol">}</a> <a id="20699" class="Symbol">{</a><a id="20700" href="Ledger.Conway.Conformance.Equivalence.html#20291" class="Bound">deps₂</a> <a id="20706" class="Symbol">.</a><a id="20707" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20712" class="Symbol">}</a> <a id="20714" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="20716" href="Ledger.Conway.Conformance.Equivalence.html#20304" class="Bound">eqd</a><a id="20719" class="Symbol">)</a> <a id="20721" href="Ledger.Conway.Conformance.Equivalence.html#20370" class="Bound">rs</a>
    <a id="20728" class="Keyword">in</a>  <a id="20732" href="Ledger.Conway.Conformance.Equivalence.html#20420" class="Bound">deps₂&#39;</a> <a id="20739" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20741" href="Ledger.Conway.Conformance.Equivalence.html#20429" class="Bound">eqd&#39;</a> <a id="20746" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20748" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20755" class="Symbol">(</a><a id="20756" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="20768" class="Symbol">(</a><a id="20769" href="Ledger.Conway.Conformance.Certs.html#5519" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20787" href="Ledger.Conway.Conformance.Equivalence.html#20364" class="Bound">h</a><a id="20788" class="Symbol">))</a> <a id="20791" href="Ledger.Conway.Conformance.Equivalence.html#20436" class="Bound">rs&#39;</a>
  <a id="20797" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="20808" class="Symbol">{</a><a id="20809" href="Ledger.Conway.Conformance.Equivalence.html#20809" class="Bound">Γ</a><a id="20810" class="Symbol">}</a> <a id="20812" href="Ledger.Conway.Conformance.Equivalence.html#20812" class="Bound">deps₁</a> <a id="20818" href="Ledger.Conway.Conformance.Equivalence.html#20818" class="Bound">deps₂</a> <a id="20824" href="Ledger.Conway.Conformance.Equivalence.html#20824" class="Bound">deps₁&#39;</a> <a id="20831" href="Ledger.Conway.Conformance.Equivalence.html#20831" class="Bound">eqd</a> <a id="20835" class="Symbol">(</a><a id="20836" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="20843" class="Symbol">(</a><a id="20844" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20857" class="Symbol">{</a><a id="20858" class="Argument">dCert</a> <a id="20864" class="Symbol">=</a> <a id="20866" href="Ledger.Conway.Conformance.Equivalence.html#20866" class="Bound">cert</a><a id="20870" class="Symbol">}</a> <a id="20872" class="Symbol">(</a><a id="20873" href="Ledger.Conway.Conformance.Certs.html#5885" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="20893" class="Symbol">(</a><a id="20894" href="Ledger.Conway.Conformance.Equivalence.html#20894" class="Bound">a</a> <a id="20896" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20898" href="Ledger.Conway.Conformance.Equivalence.html#20898" class="Bound">b</a><a id="20899" class="Symbol">)))</a> <a id="20903" href="Ledger.Conway.Conformance.Equivalence.html#20903" class="Bound">rs</a><a id="20905" class="Symbol">)</a> <a id="20907" class="Symbol">=</a>
    <a id="20913" class="Keyword">let</a> <a id="20917" class="Keyword">open</a> <a id="20922" href="Ledger.Certs.html#2791" class="Module">C.CertEnv</a> <a id="20932" href="Ledger.Conway.Conformance.Equivalence.html#20809" class="Bound">Γ</a> <a id="20934" class="Keyword">using</a> <a id="20940" class="Symbol">(</a><a id="20941" href="Ledger.Certs.html#2846" class="Field">pp</a><a id="20943" class="Symbol">)</a>
        <a id="20953" href="Ledger.Conway.Conformance.Equivalence.html#20953" class="Bound">deps₂&#39;</a> <a id="20960" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20962" href="Ledger.Conway.Conformance.Equivalence.html#20962" class="Bound">eqd&#39;</a> <a id="20967" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20969" href="Ledger.Conway.Conformance.Equivalence.html#20969" class="Bound">rs&#39;</a> <a id="20973" class="Symbol">=</a> <a id="20975" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="20986" class="Symbol">(</a><a id="20987" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="20998" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="21001" href="Ledger.Conway.Conformance.Equivalence.html#20866" class="Bound">cert</a> <a id="21006" href="Ledger.Conway.Conformance.Equivalence.html#20812" class="Bound">deps₁</a><a id="21011" class="Symbol">)</a> <a id="21013" class="Symbol">(</a><a id="21014" href="Ledger.Conway.Conformance.Equivalence.html#17555" class="Function">updateCDep</a> <a id="21025" href="Ledger.Certs.html#2846" class="Function">pp</a> <a id="21028" href="Ledger.Conway.Conformance.Equivalence.html#20866" class="Bound">cert</a> <a id="21033" href="Ledger.Conway.Conformance.Equivalence.html#20818" class="Bound">deps₂</a><a id="21038" class="Symbol">)</a> <a id="21040" href="Ledger.Conway.Conformance.Equivalence.html#20824" class="Bound">deps₁&#39;</a>
                                         <a id="21088" class="Symbol">(</a><a id="21089" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟨</a> <a id="21091" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13379" class="Function">cong-updateDDep</a> <a id="21107" class="Symbol">{</a><a id="21108" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="21110" class="Symbol">}</a> <a id="21112" href="Ledger.Conway.Conformance.Equivalence.html#20866" class="Bound">cert</a> <a id="21117" class="Symbol">{</a><a id="21118" href="Ledger.Conway.Conformance.Equivalence.html#20812" class="Bound">deps₁</a> <a id="21124" class="Symbol">.</a><a id="21125" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21130" class="Symbol">}</a> <a id="21132" class="Symbol">{</a><a id="21133" href="Ledger.Conway.Conformance.Equivalence.html#20818" class="Bound">deps₂</a> <a id="21139" class="Symbol">.</a><a id="21140" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21145" class="Symbol">}</a>
                                          <a id="21189" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">,</a> <a id="21191" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14410" class="Function">cong-updateGDep</a> <a id="21207" class="Symbol">{</a><a id="21208" href="Ledger.Certs.html#2846" class="Function">pp</a><a id="21210" class="Symbol">}</a> <a id="21212" href="Ledger.Conway.Conformance.Equivalence.html#20866" class="Bound">cert</a> <a id="21217" class="Symbol">{</a><a id="21218" href="Ledger.Conway.Conformance.Equivalence.html#20812" class="Bound">deps₁</a> <a id="21224" class="Symbol">.</a><a id="21225" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21230" class="Symbol">}</a> <a id="21232" class="Symbol">{</a><a id="21233" href="Ledger.Conway.Conformance.Equivalence.html#20818" class="Bound">deps₂</a> <a id="21239" class="Symbol">.</a><a id="21240" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21245" class="Symbol">}</a> <a id="21247" href="Ledger.Conway.Conformance.Equivalence.html#333" class="Function Operator">⟩</a> <a id="21249" href="Ledger.Conway.Conformance.Equivalence.html#20831" class="Bound">eqd</a><a id="21252" class="Symbol">)</a> <a id="21254" href="Ledger.Conway.Conformance.Equivalence.html#20903" class="Bound">rs</a>
    <a id="21261" class="Keyword">in</a>  <a id="21265" href="Ledger.Conway.Conformance.Equivalence.html#20953" class="Bound">deps₂&#39;</a> <a id="21272" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21274" href="Ledger.Conway.Conformance.Equivalence.html#20962" class="Bound">eqd&#39;</a> <a id="21279" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21281" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21288" class="Symbol">(</a><a id="21289" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="21301" class="Symbol">(</a><a id="21302" href="Ledger.Conway.Conformance.Certs.html#5885" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="21322" class="Symbol">(</a><a id="21323" href="Ledger.Conway.Conformance.Equivalence.html#20894" class="Bound">a</a> <a id="21325" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21327" href="Ledger.Conway.Conformance.Equivalence.html#20831" class="Bound">eqd</a> <a id="21331" class="Symbol">.</a><a id="21332" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="21338" class="Symbol">.</a><a id="21339" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="21345" href="Ledger.Conway.Conformance.Equivalence.html#20898" class="Bound">b</a><a id="21346" class="Symbol">)))</a> <a id="21350" href="Ledger.Conway.Conformance.Equivalence.html#20969" class="Bound">rs&#39;</a>
                                                                   <a id="21421" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="21458" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="21469" class="Symbol">{</a><a id="21470" href="Ledger.Conway.Conformance.Equivalence.html#21470" class="Bound">Γ</a><a id="21471" class="Symbol">}</a> <a id="21473" href="Ledger.Conway.Conformance.Equivalence.html#21473" class="Bound">deps₁</a> <a id="21479" href="Ledger.Conway.Conformance.Equivalence.html#21479" class="Bound">deps₂</a> <a id="21485" href="Ledger.Conway.Conformance.Equivalence.html#21485" class="Bound">deps₁&#39;</a> <a id="21492" href="Ledger.Conway.Conformance.Equivalence.html#21492" class="Bound">eqd</a> <a id="21496" class="Symbol">(</a><a id="21497" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21504" class="Symbol">(</a><a id="21505" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a>  <a id="21518" class="Symbol">{</a><a id="21519" class="Argument">dCert</a> <a id="21525" class="Symbol">=</a> <a id="21527" href="Ledger.Conway.Conformance.Equivalence.html#21527" class="Bound">cert</a><a id="21531" class="Symbol">}</a> <a id="21533" class="Symbol">(</a><a id="21534" href="Ledger.Conway.Conformance.Certs.html#6180" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21553" href="Ledger.Conway.Conformance.Equivalence.html#21553" class="Bound">h</a><a id="21554" class="Symbol">))</a>  <a id="21558" href="Ledger.Conway.Conformance.Equivalence.html#21558" class="Bound">rs</a><a id="21560" class="Symbol">)</a> <a id="21562" class="Symbol">=</a>
    <a id="21568" class="Keyword">let</a> <a id="21572" href="Ledger.Conway.Conformance.Equivalence.html#21572" class="Bound">deps₂&#39;</a> <a id="21579" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21581" href="Ledger.Conway.Conformance.Equivalence.html#21581" class="Bound">eqd&#39;</a> <a id="21586" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21588" href="Ledger.Conway.Conformance.Equivalence.html#21588" class="Bound">rs&#39;</a> <a id="21592" class="Symbol">=</a> <a id="21594" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="21605" href="Ledger.Conway.Conformance.Equivalence.html#21473" class="Bound">deps₁</a> <a id="21611" href="Ledger.Conway.Conformance.Equivalence.html#21479" class="Bound">deps₂</a> <a id="21617" href="Ledger.Conway.Conformance.Equivalence.html#21485" class="Bound">deps₁&#39;</a> <a id="21624" href="Ledger.Conway.Conformance.Equivalence.html#21492" class="Bound">eqd</a> <a id="21628" href="Ledger.Conway.Conformance.Equivalence.html#21558" class="Bound">rs</a>
    <a id="21635" class="Keyword">in</a>  <a id="21639" href="Ledger.Conway.Conformance.Equivalence.html#21572" class="Bound">deps₂&#39;</a> <a id="21646" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21648" href="Ledger.Conway.Conformance.Equivalence.html#21581" class="Bound">eqd&#39;</a> <a id="21653" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21655" href="Interface.STS.html#561" class="InductiveConstructor">BS-ind</a> <a id="21662" class="Symbol">(</a><a id="21663" href="Ledger.Conway.Conformance.Certs.html#6960" class="InductiveConstructor">C.CERT-vdel</a> <a id="21675" class="Symbol">(</a><a id="21676" href="Ledger.Conway.Conformance.Certs.html#6180" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21695" href="Ledger.Conway.Conformance.Equivalence.html#21553" class="Bound">h</a><a id="21696" class="Symbol">))</a> <a id="21699" href="Ledger.Conway.Conformance.Equivalence.html#21588" class="Bound">rs&#39;</a>

  <a id="castCERTS"></a><a id="21706" href="Ledger.Conway.Conformance.Equivalence.html#21706" class="Function">castCERTS</a> <a id="21716" class="Symbol">:</a> <a id="21718" class="Symbol">∀</a> <a id="21720" class="Symbol">{</a><a id="21721" href="Ledger.Conway.Conformance.Equivalence.html#21721" class="Bound">Γ</a> <a id="21723" href="Ledger.Conway.Conformance.Equivalence.html#21723" class="Bound">certs</a><a id="21728" class="Symbol">}</a> <a id="21730" class="Symbol">{</a><a id="21731" href="Ledger.Conway.Conformance.Equivalence.html#21731" class="Bound">s</a> <a id="21733" href="Ledger.Conway.Conformance.Equivalence.html#21733" class="Bound">s&#39;</a> <a id="21736" class="Symbol">:</a> <a id="21738" href="Ledger.Certs.html#4327" class="Record">L.CertState</a><a id="21749" class="Symbol">}</a> <a id="21751" href="Ledger.Conway.Conformance.Equivalence.html#21751" class="Bound">deps₁</a> <a id="21757" href="Ledger.Conway.Conformance.Equivalence.html#21757" class="Bound">deps₂</a> <a id="21763" href="Ledger.Conway.Conformance.Equivalence.html#21763" class="Bound">deps₁&#39;</a>
            <a id="21782" class="Symbol">→</a> <a id="21784" href="Ledger.Conway.Conformance.Equivalence.html#21751" class="Bound">deps₁</a> <a id="21790" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="21793" href="Ledger.Conway.Conformance.Equivalence.html#21757" class="Bound">deps₂</a>
            <a id="21811" class="Symbol">→</a> <a id="21813" href="Ledger.Conway.Conformance.Equivalence.html#21721" class="Bound">Γ</a> <a id="21815" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">C.⊢</a> <a id="21819" href="Ledger.Conway.Conformance.Equivalence.html#21751" class="Bound">deps₁</a> <a id="21825" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21831" href="Ledger.Conway.Conformance.Equivalence.html#21731" class="Bound">s</a> <a id="21833" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">⇀⦇</a> <a id="21836" href="Ledger.Conway.Conformance.Equivalence.html#21723" class="Bound">certs</a> <a id="21842" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">,CERTS⦈</a> <a id="21850" class="Symbol">(</a><a id="21851" href="Ledger.Conway.Conformance.Equivalence.html#21763" class="Bound">deps₁&#39;</a> <a id="21858" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21864" href="Ledger.Conway.Conformance.Equivalence.html#21733" class="Bound">s&#39;</a><a id="21866" class="Symbol">)</a>
            <a id="21880" class="Symbol">→</a> <a id="21882" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="21885" href="Ledger.Conway.Conformance.Equivalence.html#21885" class="Bound">deps₂&#39;</a> <a id="21892" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="21894" href="Ledger.Conway.Conformance.Equivalence.html#21763" class="Bound">deps₁&#39;</a> <a id="21901" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="21904" href="Ledger.Conway.Conformance.Equivalence.html#21885" class="Bound">deps₂&#39;</a> <a id="21911" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="21913" href="Ledger.Conway.Conformance.Equivalence.html#21721" class="Bound">Γ</a> <a id="21915" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">C.⊢</a> <a id="21919" href="Ledger.Conway.Conformance.Equivalence.html#21757" class="Bound">deps₂</a> <a id="21925" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21931" href="Ledger.Conway.Conformance.Equivalence.html#21731" class="Bound">s</a> <a id="21933" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">⇀⦇</a> <a id="21936" href="Ledger.Conway.Conformance.Equivalence.html#21723" class="Bound">certs</a> <a id="21942" href="Ledger.Conway.Conformance.Certs.html#8014" class="Function Operator">,CERTS⦈</a> <a id="21950" class="Symbol">(</a><a id="21951" href="Ledger.Conway.Conformance.Equivalence.html#21885" class="Bound">deps₂&#39;</a> <a id="21958" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21964" href="Ledger.Conway.Conformance.Equivalence.html#21733" class="Bound">s&#39;</a><a id="21966" class="Symbol">)</a>
  <a id="21970" href="Ledger.Conway.Conformance.Equivalence.html#21706" class="Function">castCERTS</a> <a id="21980" href="Ledger.Conway.Conformance.Equivalence.html#21980" class="Bound">deps₁</a> <a id="21986" href="Ledger.Conway.Conformance.Equivalence.html#21986" class="Bound">deps₂</a> <a id="21992" href="Ledger.Conway.Conformance.Equivalence.html#21992" class="Bound">deps₁&#39;</a> <a id="21999" href="Ledger.Conway.Conformance.Equivalence.html#21999" class="Bound">eqd</a> <a id="22003" class="Symbol">(</a><a id="22004" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="22008" class="Symbol">(</a><a id="22009" href="Ledger.Conway.Conformance.Certs.html#7193" class="InductiveConstructor">C.CERT-base</a> <a id="22021" href="Ledger.Conway.Conformance.Equivalence.html#22021" class="Bound">h</a> <a id="22023" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22025" href="Ledger.Conway.Conformance.Equivalence.html#22025" class="Bound">step</a><a id="22029" class="Symbol">))</a> <a id="22032" class="Symbol">=</a>
    <a id="22038" class="Keyword">let</a> <a id="22042" href="Ledger.Conway.Conformance.Equivalence.html#22042" class="Bound">deps₂&#39;</a> <a id="22049" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22051" href="Ledger.Conway.Conformance.Equivalence.html#22051" class="Bound">eqd&#39;</a> <a id="22056" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22058" href="Ledger.Conway.Conformance.Equivalence.html#22058" class="Bound">step&#39;</a> <a id="22064" class="Symbol">=</a> <a id="22066" href="Ledger.Conway.Conformance.Equivalence.html#17733" class="Function">castCERTS&#39;</a> <a id="22077" href="Ledger.Conway.Conformance.Equivalence.html#21980" class="Bound">deps₁</a> <a id="22083" href="Ledger.Conway.Conformance.Equivalence.html#21986" class="Bound">deps₂</a> <a id="22089" href="Ledger.Conway.Conformance.Equivalence.html#21992" class="Bound">deps₁&#39;</a> <a id="22096" href="Ledger.Conway.Conformance.Equivalence.html#21999" class="Bound">eqd</a> <a id="22100" href="Ledger.Conway.Conformance.Equivalence.html#22025" class="Bound">step</a>
    <a id="22109" class="Keyword">in</a>  <a id="22113" href="Ledger.Conway.Conformance.Equivalence.html#22042" class="Bound">deps₂&#39;</a> <a id="22120" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22122" href="Ledger.Conway.Conformance.Equivalence.html#22051" class="Bound">eqd&#39;</a> <a id="22127" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22129" href="Interface.STS.html#1470" class="InductiveConstructor">RTC</a> <a id="22133" class="Symbol">(</a><a id="22134" href="Ledger.Conway.Conformance.Certs.html#7193" class="InductiveConstructor">C.CERT-base</a> <a id="22146" href="Ledger.Conway.Conformance.Equivalence.html#22021" class="Bound">h</a> <a id="22148" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22150" href="Ledger.Conway.Conformance.Equivalence.html#22058" class="Bound">step&#39;</a><a id="22155" class="Symbol">)</a>

<a id="_⊢_⇀⦇_,GOVn⦈_"></a><a id="22158" href="Ledger.Conway.Conformance.Equivalence.html#22158" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22172" class="Symbol">:</a> <a id="22174" href="Ledger.Gov.html#1540" class="Record">L.GovEnv</a> <a id="22183" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22185" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="22187" class="Symbol">→</a> <a id="22189" href="Ledger.Gov.html#1348" class="Function">L.GovState</a> <a id="22200" class="Symbol">→</a> <a id="22202" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="22207" class="Symbol">(</a><a id="22208" href="Ledger.GovernanceActions.html#2379" class="Record">GovVote</a> <a id="22216" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="22218" href="Ledger.GovernanceActions.html#2524" class="Record">GovProposal</a><a id="22229" class="Symbol">)</a> <a id="22231" class="Symbol">→</a> <a id="22233" href="Ledger.Gov.html#1348" class="Function">L.GovState</a> <a id="22244" class="Symbol">→</a> <a id="22246" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="22251" href="Ledger.Conway.Conformance.Equivalence.html#22158" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22265" class="Symbol">=</a> <a id="22267" href="Interface.STS.html#811" class="Datatype Operator">_⊢_⇀⟦_⟧ᵢ*&#39;_</a> <a id="22279" class="Symbol">{</a><a id="22280" class="Argument">_⊢_⇀⟦_⟧ᵇ_</a> <a id="22290" class="Symbol">=</a> <a id="22292" href="Interface.STS.html#1257" class="Datatype">IdSTS</a><a id="22297" class="Symbol">}</a> <a id="22299" class="Symbol">{</a><a id="22300" class="Argument">_⊢_⇀⟦_⟧_</a> <a id="22309" class="Symbol">=</a> <a id="22311" href="Ledger.Gov.html#6801" class="Datatype Operator">L._⊢_⇀⦇_,GOV⦈_</a><a id="22325" class="Symbol">}</a>

<a id="22328" class="Keyword">opaque</a>
  <a id="castLEDGER"></a><a id="22337" href="Ledger.Conway.Conformance.Equivalence.html#22337" class="Function">castLEDGER</a> <a id="22348" class="Symbol">:</a> <a id="22350" class="Symbol">∀</a> <a id="22352" class="Symbol">{</a><a id="22353" href="Ledger.Conway.Conformance.Equivalence.html#22353" class="Bound">Γ</a> <a id="22355" href="Ledger.Conway.Conformance.Equivalence.html#22355" class="Bound">tx</a><a id="22357" class="Symbol">}</a> <a id="22359" class="Symbol">{</a><a id="22360" href="Ledger.Conway.Conformance.Equivalence.html#22360" class="Bound">s</a> <a id="22362" href="Ledger.Conway.Conformance.Equivalence.html#22362" class="Bound">s&#39;</a> <a id="22365" class="Symbol">:</a> <a id="22367" href="Ledger.Ledger.html#809" class="Record">L.LState</a><a id="22375" class="Symbol">}</a> <a id="22377" href="Ledger.Conway.Conformance.Equivalence.html#22377" class="Bound">deps₁</a> <a id="22383" href="Ledger.Conway.Conformance.Equivalence.html#22383" class="Bound">deps₂</a> <a id="22389" href="Ledger.Conway.Conformance.Equivalence.html#22389" class="Bound">deps₁&#39;</a>
            <a id="22408" class="Symbol">→</a> <a id="22410" href="Ledger.Conway.Conformance.Equivalence.html#22377" class="Bound">deps₁</a> <a id="22416" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="22419" href="Ledger.Conway.Conformance.Equivalence.html#22383" class="Bound">deps₂</a>
            <a id="22437" class="Symbol">→</a> <a id="22439" href="Ledger.Conway.Conformance.Equivalence.html#22353" class="Bound">Γ</a> <a id="22441" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="22445" href="Ledger.Conway.Conformance.Equivalence.html#22377" class="Bound">deps₁</a> <a id="22451" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22457" href="Ledger.Conway.Conformance.Equivalence.html#22360" class="Bound">s</a> <a id="22459" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="22462" href="Ledger.Conway.Conformance.Equivalence.html#22355" class="Bound">tx</a> <a id="22465" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="22474" class="Symbol">(</a><a id="22475" href="Ledger.Conway.Conformance.Equivalence.html#22389" class="Bound">deps₁&#39;</a> <a id="22482" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22488" href="Ledger.Conway.Conformance.Equivalence.html#22362" class="Bound">s&#39;</a><a id="22490" class="Symbol">)</a>
            <a id="22504" class="Symbol">→</a> <a id="22506" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="22509" href="Ledger.Conway.Conformance.Equivalence.html#22509" class="Bound">deps₂&#39;</a> <a id="22516" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="22518" href="Ledger.Conway.Conformance.Equivalence.html#22389" class="Bound">deps₁&#39;</a> <a id="22525" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="22528" href="Ledger.Conway.Conformance.Equivalence.html#22509" class="Bound">deps₂&#39;</a> <a id="22535" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22537" href="Ledger.Conway.Conformance.Equivalence.html#22353" class="Bound">Γ</a> <a id="22539" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C.⊢</a> <a id="22543" href="Ledger.Conway.Conformance.Equivalence.html#22383" class="Bound">deps₂</a> <a id="22549" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22555" href="Ledger.Conway.Conformance.Equivalence.html#22360" class="Bound">s</a> <a id="22557" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">⇀⦇</a> <a id="22560" href="Ledger.Conway.Conformance.Equivalence.html#22355" class="Bound">tx</a> <a id="22563" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">,LEDGER⦈</a> <a id="22572" class="Symbol">(</a><a id="22573" href="Ledger.Conway.Conformance.Equivalence.html#22509" class="Bound">deps₂&#39;</a> <a id="22580" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22586" href="Ledger.Conway.Conformance.Equivalence.html#22362" class="Bound">s&#39;</a><a id="22588" class="Symbol">)</a>
  <a id="22592" href="Ledger.Conway.Conformance.Equivalence.html#22337" class="Function">castLEDGER</a> <a id="22603" class="Symbol">{</a><a id="22604" href="Ledger.Conway.Conformance.Equivalence.html#22604" class="Bound">Γ</a><a id="22605" class="Symbol">}</a> <a id="22607" class="Symbol">{</a><a id="22608" href="Ledger.Conway.Conformance.Equivalence.html#22608" class="Bound">tx</a><a id="22610" class="Symbol">}</a> <a id="22612" class="Symbol">{</a><a id="22613" href="Ledger.Conway.Conformance.Equivalence.html#22613" class="Bound">s</a><a id="22614" class="Symbol">}</a> <a id="22616" class="Symbol">{</a><a id="22617" href="Ledger.Conway.Conformance.Equivalence.html#22617" class="Bound">s&#39;</a><a id="22619" class="Symbol">}</a> <a id="22621" href="Ledger.Conway.Conformance.Equivalence.html#22621" class="Bound">deps₁</a> <a id="22627" href="Ledger.Conway.Conformance.Equivalence.html#22627" class="Bound">deps₂</a> <a id="22633" href="Ledger.Conway.Conformance.Equivalence.html#22633" class="Bound">deps₁&#39;</a> <a id="22640" href="Ledger.Conway.Conformance.Equivalence.html#22640" class="Bound">eqd</a> <a id="22644" class="Symbol">(</a><a id="22645" href="Ledger.Conway.Conformance.Ledger.html#2084" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22657" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22662" href="Ledger.Conway.Conformance.Equivalence.html#22662" class="Bound">utxo</a> <a id="22667" href="Ledger.Conway.Conformance.Equivalence.html#22667" class="Bound">certs</a> <a id="22673" href="Ledger.Conway.Conformance.Equivalence.html#22673" class="Bound">gov</a><a id="22676" class="Symbol">)</a> <a id="22678" class="Symbol">=</a>
    <a id="22684" class="Keyword">let</a> <a id="22688" href="Ledger.Conway.Conformance.Equivalence.html#22688" class="Bound">deps₂&#39;</a> <a id="22695" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22697" href="Ledger.Conway.Conformance.Equivalence.html#22697" class="Bound">eqd&#39;</a> <a id="22702" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22704" href="Ledger.Conway.Conformance.Equivalence.html#22704" class="Bound">certs&#39;</a> <a id="22711" class="Symbol">=</a> <a id="22713" href="Ledger.Conway.Conformance.Equivalence.html#21706" class="Function">castCERTS</a> <a id="22723" href="Ledger.Conway.Conformance.Equivalence.html#22621" class="Bound">deps₁</a> <a id="22729" href="Ledger.Conway.Conformance.Equivalence.html#22627" class="Bound">deps₂</a> <a id="22735" href="Ledger.Conway.Conformance.Equivalence.html#22633" class="Bound">deps₁&#39;</a> <a id="22742" href="Ledger.Conway.Conformance.Equivalence.html#22640" class="Bound">eqd</a> <a id="22746" href="Ledger.Conway.Conformance.Equivalence.html#22667" class="Bound">certs</a>
    <a id="22756" class="Keyword">in</a>  <a id="22760" href="Ledger.Conway.Conformance.Equivalence.html#22688" class="Bound">deps₂&#39;</a> <a id="22767" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22769" href="Ledger.Conway.Conformance.Equivalence.html#22697" class="Bound">eqd&#39;</a> <a id="22774" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22776" href="Ledger.Conway.Conformance.Ledger.html#2084" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22788" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22793" href="Ledger.Conway.Conformance.Equivalence.html#22662" class="Bound">utxo</a> <a id="22798" href="Ledger.Conway.Conformance.Equivalence.html#22704" class="Bound">certs&#39;</a> <a id="22805" href="Ledger.Conway.Conformance.Equivalence.html#22673" class="Bound">gov</a>
  <a id="22811" href="Ledger.Conway.Conformance.Equivalence.html#22337" class="Function">castLEDGER</a> <a id="22822" href="Ledger.Conway.Conformance.Equivalence.html#22822" class="Bound">deps₁</a> <a id="22828" href="Ledger.Conway.Conformance.Equivalence.html#22828" class="Bound">deps₂</a> <a id="22834" href="Ledger.Conway.Conformance.Equivalence.html#22834" class="Bound">deps₁&#39;</a> <a id="22841" href="Ledger.Conway.Conformance.Equivalence.html#22841" class="Bound">eqd</a> <a id="22845" class="Symbol">(</a><a id="22846" href="Ledger.Conway.Conformance.Ledger.html#2137" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22858" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22863" href="Ledger.Conway.Conformance.Equivalence.html#22863" class="Bound">utxo</a><a id="22867" class="Symbol">)</a> <a id="22869" class="Symbol">=</a> <a id="22871" class="Symbol">_</a> <a id="22873" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22875" href="Ledger.Conway.Conformance.Equivalence.html#22841" class="Bound">eqd</a> <a id="22879" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22881" href="Ledger.Conway.Conformance.Ledger.html#2137" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22893" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22898" href="Ledger.Conway.Conformance.Equivalence.html#22863" class="Bound">utxo</a>

<a id="22904" class="Comment">---------------------------------------------------------------------------</a>
<a id="22980" class="Comment">-- The main result</a>
<a id="22999" class="Comment">---------------------------------------------------------------------------</a>

<a id="23076" class="Keyword">open</a> <a id="23081" class="Keyword">import</a> <a id="23088" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html" class="Module">Ledger.Conway.Conformance.Equivalence.Bisimilarity</a>

<a id="23140" class="Comment">-- An LState sˡ from the Spec and an LState sᶜ from Conformance are</a>
<a id="23208" class="Comment">-- bisimular iff</a>
<a id="23225" class="Comment">--  ∙ the deposits in the CertState of sᶜ are equal (as maps) to the</a>
<a id="23294" class="Comment">--    appropriate restrictions of the deposits in the UTxOState of sˡ</a>
<a id="23364" class="Comment">--  ∙ the only difference between sˡ and sᶜ are the extra deposits in</a>
<a id="23434" class="Comment">--    the CertState of sᶜ.</a>
<a id="_∼_"></a><a id="23461" href="Ledger.Conway.Conformance.Equivalence.html#23461" class="Function Operator">_∼_</a> <a id="23465" class="Symbol">:</a> <a id="23467" href="Ledger.Ledger.html#809" class="Record">L.LState</a> <a id="23476" class="Symbol">→</a> <a id="23478" href="Ledger.Conway.Conformance.Ledger.html#695" class="Record">C.LState</a> <a id="23487" class="Symbol">→</a> <a id="23489" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="23494" href="Ledger.Conway.Conformance.Equivalence.html#23494" class="Bound">sˡ</a> <a id="23497" href="Ledger.Conway.Conformance.Equivalence.html#23461" class="Function Operator">∼</a> <a id="23499" href="Ledger.Conway.Conformance.Equivalence.html#23499" class="Bound">sᶜ</a> <a id="23502" class="Symbol">=</a> <a id="23504" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="23517" href="Ledger.Conway.Conformance.Equivalence.html#23494" class="Bound">sˡ</a> <a id="23520" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="23523" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="23537" class="Symbol">(</a><a id="23538" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">C.LState.certState</a> <a id="23557" href="Ledger.Conway.Conformance.Equivalence.html#23499" class="Bound">sᶜ</a><a id="23559" class="Symbol">)</a> <a id="23561" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="23563" href="Ledger.Conway.Conformance.Equivalence.html#23494" class="Bound">sˡ</a> <a id="23566" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="23568" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23573" href="Ledger.Conway.Conformance.Equivalence.html#23499" class="Bound">sᶜ</a>

<a id="23577" class="Comment">-- This gives us the main result: a bisimulation between the LEDGER</a>
<a id="23645" class="Comment">-- rules in Ledger and in Conformance.</a>
<a id="bisimilarityProof"></a><a id="23684" href="Ledger.Conway.Conformance.Equivalence.html#23684" class="Function">bisimilarityProof</a> <a id="23702" class="Symbol">:</a> <a id="23704" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#128" class="Record">Bisimilar</a> <a id="23714" href="Ledger.Ledger.html#2581" class="Datatype Operator">L._⊢_⇀⦇_,LEDGER⦈_</a> <a id="23732" href="Ledger.Conway.Conformance.Ledger.html#1073" class="Datatype Operator">C._⊢_⇀⦇_,LEDGER⦈_</a>
<a id="23750" href="Ledger.Conway.Conformance.Equivalence.html#23684" class="Function">bisimilarityProof</a> <a id="23768" class="Symbol">.</a><a id="23769" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#259" class="Field Operator">Bisimilar._≈_</a> <a id="23783" class="Symbol">=</a> <a id="23785" href="Ledger.Conway.Conformance.Equivalence.html#23461" class="Function Operator">_∼_</a>
<a id="23789" href="Ledger.Conway.Conformance.Equivalence.html#23684" class="Function">bisimilarityProof</a> <a id="23807" class="Symbol">.</a><a id="23808" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#284" class="Field">Bisimilar.to</a> <a id="23821" class="Symbol">{</a><a id="23822" href="Ledger.Conway.Conformance.Equivalence.html#23822" class="Bound">Γ</a><a id="23823" class="Symbol">}</a> <a id="23825" class="Symbol">{</a><a id="23826" href="Ledger.Conway.Conformance.Equivalence.html#23826" class="Bound">tx</a><a id="23828" class="Symbol">}</a> <a id="23830" class="Symbol">{</a><a id="23831" href="Ledger.Conway.Conformance.Equivalence.html#23831" class="Bound">sˡ</a><a id="23833" class="Symbol">}</a> <a id="23835" class="Symbol">{</a><a id="23836" href="Ledger.Conway.Conformance.Equivalence.html#23836" class="Bound">sˡ&#39;</a><a id="23839" class="Symbol">}</a> <a id="23841" class="Symbol">{</a><a id="23842" href="Ledger.Conway.Conformance.Equivalence.html#23842" class="Bound">sᶜ</a><a id="23844" class="Symbol">}</a> <a id="23846" class="Symbol">(</a><a id="23847" href="Ledger.Conway.Conformance.Equivalence.html#23847" class="Bound">eq</a> <a id="23850" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23852" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="23856" class="Symbol">)</a> <a id="23858" href="Ledger.Conway.Conformance.Equivalence.html#23858" class="Bound">r</a> <a id="23860" class="Symbol">=</a>
  <a id="23864" class="Keyword">let</a> <a id="23868" href="Ledger.Conway.Conformance.Equivalence.html#23868" class="Bound">deps</a>  <a id="23874" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23876" href="Ledger.Conway.Conformance.Equivalence.html#23876" class="Bound">eqd</a>  <a id="23881" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23883" href="Ledger.Conway.Conformance.Equivalence.html#23883" class="Bound">r&#39;</a>  <a id="23887" class="Symbol">=</a> <a id="23889" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23894" href="Ledger.Conway.Conformance.Equivalence.html#23858" class="Bound">r</a>
      <a id="23902" href="Ledger.Conway.Conformance.Equivalence.html#23902" class="Bound">deps&#39;</a> <a id="23908" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23910" href="Ledger.Conway.Conformance.Equivalence.html#23910" class="Bound">eqd&#39;</a> <a id="23915" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23917" href="Ledger.Conway.Conformance.Equivalence.html#23917" class="Bound">r&#39;&#39;</a> <a id="23921" class="Symbol">=</a> <a id="23923" href="Ledger.Conway.Conformance.Equivalence.html#22337" class="Function">castLEDGER</a> <a id="23934" class="Symbol">(</a><a id="23935" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="23948" class="Symbol">(</a><a id="23949" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23954" href="Ledger.Conway.Conformance.Equivalence.html#23842" class="Bound">sᶜ</a><a id="23956" class="Symbol">))</a>
                                      <a id="23997" class="Symbol">(</a><a id="23998" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="24012" class="Symbol">(</a><a id="24013" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">C.LState.certState</a> <a id="24032" href="Ledger.Conway.Conformance.Equivalence.html#23842" class="Bound">sᶜ</a><a id="24034" class="Symbol">))</a>
                                      <a id="24075" href="Ledger.Conway.Conformance.Equivalence.html#23868" class="Bound">deps</a>
                                      <a id="24118" href="Ledger.Conway.Conformance.Equivalence.html#23847" class="Bound">eq</a>
                                      <a id="24159" href="Ledger.Conway.Conformance.Equivalence.html#23883" class="Bound">r&#39;</a>
      <a id="24168" href="Ledger.Conway.Conformance.Equivalence.html#24168" class="Bound">eqd&#39;&#39;</a> <a id="24174" class="Symbol">:</a> <a id="24176" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="24189" href="Ledger.Conway.Conformance.Equivalence.html#23836" class="Bound">sˡ&#39;</a> <a id="24193" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12866" class="Function Operator">≡ᵈ</a> <a id="24196" href="Ledger.Conway.Conformance.Equivalence.html#23902" class="Bound">deps&#39;</a>
      <a id="24208" href="Ledger.Conway.Conformance.Equivalence.html#24168" class="Bound">eqd&#39;&#39;</a> <a id="24214" class="Symbol">=</a> <a id="24216" href="Ledger.Conway.Conformance.Equivalence.html#13848" class="Function">≡ᵈ-trans</a> <a id="24225" class="Symbol">{</a><a id="24226" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="24239" href="Ledger.Conway.Conformance.Equivalence.html#23836" class="Bound">sˡ&#39;</a><a id="24242" class="Symbol">}</a> <a id="24244" class="Symbol">{</a><a id="24245" href="Ledger.Conway.Conformance.Equivalence.html#23868" class="Bound">deps</a><a id="24249" class="Symbol">}</a> <a id="24251" class="Symbol">{</a><a id="24252" href="Ledger.Conway.Conformance.Equivalence.html#23902" class="Bound">deps&#39;</a><a id="24257" class="Symbol">}</a> <a id="24259" class="Symbol">(</a><a id="24260" href="Ledger.Conway.Conformance.Equivalence.html#13831" class="Function">≡ᵈ-sym</a> <a id="24267" class="Symbol">{</a><a id="24268" href="Ledger.Conway.Conformance.Equivalence.html#23868" class="Bound">deps</a><a id="24272" class="Symbol">}</a> <a id="24274" class="Symbol">{</a><a id="24275" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="24288" href="Ledger.Conway.Conformance.Equivalence.html#23836" class="Bound">sˡ&#39;</a><a id="24291" class="Symbol">}</a> <a id="24293" href="Ledger.Conway.Conformance.Equivalence.html#23876" class="Bound">eqd</a><a id="24296" class="Symbol">)</a> <a id="24298" href="Ledger.Conway.Conformance.Equivalence.html#23910" class="Bound">eqd&#39;</a>
  <a id="24305" class="Keyword">in</a>
  <a id="24310" class="Symbol">(</a><a id="24311" href="Ledger.Conway.Conformance.Equivalence.html#23902" class="Bound">deps&#39;</a> <a id="24317" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24323" href="Ledger.Conway.Conformance.Equivalence.html#23836" class="Bound">sˡ&#39;</a><a id="24326" class="Symbol">)</a> <a id="24328" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24330" class="Symbol">(</a><a id="24331" href="Ledger.Conway.Conformance.Equivalence.html#24168" class="Bound">eqd&#39;&#39;</a> <a id="24337" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24339" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24343" class="Symbol">)</a> <a id="24345" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24347" href="Ledger.Conway.Conformance.Equivalence.html#23917" class="Bound">r&#39;&#39;</a>
<a id="24351" href="Ledger.Conway.Conformance.Equivalence.html#23684" class="Function">bisimilarityProof</a> <a id="24369" class="Symbol">.</a><a id="24370" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#419" class="Field">Bisimilar.from</a> <a id="24385" class="Symbol">{</a><a id="24386" href="Ledger.Conway.Conformance.Equivalence.html#24386" class="Bound">Γ</a><a id="24387" class="Symbol">}</a> <a id="24389" class="Symbol">{</a><a id="24390" href="Ledger.Conway.Conformance.Equivalence.html#24390" class="Bound">tx</a><a id="24392" class="Symbol">}</a> <a id="24394" class="Symbol">{</a><a id="24395" href="Ledger.Conway.Conformance.Equivalence.html#24395" class="Bound">sˡ</a><a id="24397" class="Symbol">}</a> <a id="24399" class="Symbol">{</a><a id="24400" href="Ledger.Conway.Conformance.Equivalence.html#24400" class="Bound">sᶜ</a><a id="24402" class="Symbol">}</a> <a id="24404" class="Symbol">{</a><a id="24405" href="Ledger.Conway.Conformance.Equivalence.html#24405" class="Bound">sᶜ&#39;</a><a id="24408" class="Symbol">}</a> <a id="24410" class="Symbol">(</a><a id="24411" href="Ledger.Conway.Conformance.Equivalence.html#24411" class="Bound">eqd</a> <a id="24415" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24417" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24421" class="Symbol">)</a> <a id="24423" href="Ledger.Conway.Conformance.Equivalence.html#24423" class="Bound">r</a> <a id="24425" class="Symbol">=</a>
  <a id="24429" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24434" href="Ledger.Conway.Conformance.Equivalence.html#24405" class="Bound">sᶜ&#39;</a> <a id="24438" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24440" class="Symbol">(</a><a id="24441" href="Ledger.Conway.Conformance.Equivalence.html#24564" class="Function">wf&#39;</a> <a id="24445" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24447" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24451" class="Symbol">)</a> <a id="24453" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24455" href="Ledger.Conway.Conformance.Equivalence.html#24478" class="Function">wf</a> <a id="24458" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24464" href="Ledger.Conway.Conformance.Equivalence.html#24423" class="Bound">r</a>
  <a id="24468" class="Keyword">where</a>
    <a id="24478" href="Ledger.Conway.Conformance.Equivalence.html#24478" class="Function">wf</a>  <a id="24482" class="Symbol">=</a> <a id="24484" href="Ledger.Conway.Conformance.Equivalence.html#13831" class="Function">≡ᵈ-sym</a> <a id="24491" class="Symbol">{</a><a id="24492" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="24505" class="Symbol">(</a><a id="24506" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24511" href="Ledger.Conway.Conformance.Equivalence.html#24400" class="Bound">sᶜ</a><a id="24513" class="Symbol">)}</a> <a id="24516" class="Symbol">{</a><a id="24517" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="24531" class="Symbol">(</a><a id="24532" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">C.LState.certState</a> <a id="24551" href="Ledger.Conway.Conformance.Equivalence.html#24400" class="Bound">sᶜ</a><a id="24553" class="Symbol">)}</a> <a id="24556" href="Ledger.Conway.Conformance.Equivalence.html#24411" class="Bound">eqd</a>
    <a id="24564" href="Ledger.Conway.Conformance.Equivalence.html#24564" class="Function">wf&#39;</a> <a id="24568" class="Symbol">=</a> <a id="24570" href="Ledger.Conway.Conformance.Equivalence.html#13831" class="Function">≡ᵈ-sym</a> <a id="24577" class="Symbol">{</a><a id="24578" href="Ledger.Conway.Conformance.Equivalence.html#8447" class="Function">certDepositsC</a> <a id="24592" class="Symbol">(</a><a id="24593" href="Ledger.Conway.Conformance.Ledger.html#803" class="Field">C.LState.certState</a> <a id="24612" href="Ledger.Conway.Conformance.Equivalence.html#24405" class="Bound">sᶜ&#39;</a><a id="24615" class="Symbol">)}</a> <a id="24618" class="Symbol">{</a><a id="24619" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12710" class="Function">certDeposits</a> <a id="24632" class="Symbol">(</a><a id="24633" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24638" href="Ledger.Conway.Conformance.Equivalence.html#24405" class="Bound">sᶜ&#39;</a><a id="24641" class="Symbol">)}</a> <a id="24644" class="Symbol">(</a><a id="24645" href="Ledger.Conway.Conformance.Equivalence.html#15245" class="Function">lemWellformed</a> <a id="24659" href="Ledger.Conway.Conformance.Equivalence.html#24478" class="Function">wf</a> <a id="24662" href="Ledger.Conway.Conformance.Equivalence.html#24423" class="Bound">r</a><a id="24663" class="Symbol">)</a>
    <a id="24669" href="Ledger.Conway.Conformance.Equivalence.html#24669" class="Function">r&#39;</a> <a id="24672" class="Symbol">=</a> <a id="24674" href="Ledger.Conway.Conformance.Equivalence.html#24478" class="Function">wf</a> <a id="24677" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24683" href="Ledger.Conway.Conformance.Equivalence.html#24423" class="Bound">r</a>
</pre></body></html>