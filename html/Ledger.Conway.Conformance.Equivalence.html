<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Equivalence</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>
<a id="24" class="Comment">-- Proof that the rules under Ledger.Conway.Conformance are equivalent</a>
<a id="95" class="Comment">-- to the rules under Ledger.</a>

<a id="126" class="Keyword">open</a> <a id="131" class="Keyword">import</a> <a id="138" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="202" class="Keyword">open</a> <a id="207" class="Keyword">import</a> <a id="214" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a> <a id="254" class="Keyword">using</a> <a id="260" class="Symbol">(</a><a id="261" href="Ledger.Conway.Specification.Transaction.html#1000" class="Record">TransactionStructure</a><a id="281" class="Symbol">)</a>

<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="306" class="Keyword">using</a> <a id="312" class="Symbol">(</a><a id="313" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="314" class="Symbol">)</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Data.Product.html" class="Module">Data.Product</a> <a id="341" class="Keyword">using</a> <a id="347" class="Symbol">(</a><a id="348" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="351" class="Symbol">;</a> <a id="353" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="356" class="Symbol">)</a> <a id="358" class="Keyword">renaming</a> <a id="367" class="Symbol">(</a><a id="368" href="Data.Product.Base.html#2173" class="Function">map</a> <a id="372" class="Symbol">to</a> <a id="375" class="Function">⟨_,_⟩</a><a id="380" class="Symbol">)</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="411" class="Keyword">using</a> <a id="417" class="Symbol">(</a><a id="418" href="Function.Bundles.html#12398" class="Function Operator">_⇔_</a><a id="421" class="Symbol">;</a> <a id="423" href="Function.Bundles.html#13497" class="Function">mk⇔</a><a id="426" class="Symbol">;</a> <a id="428" href="Function.Bundles.html#4750" class="Record">Equivalence</a><a id="439" class="Symbol">)</a>
<a id="441" class="Keyword">open</a> <a id="446" class="Keyword">import</a> <a id="453" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="491" class="Keyword">open</a> <a id="496" class="Keyword">import</a> <a id="503" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="519" class="Keyword">using</a> <a id="525" class="Symbol">(</a><a id="526" href="Relation.Binary.Structures.html#1595" class="Record">IsEquivalence</a><a id="539" class="Symbol">)</a>

<a id="542" class="Keyword">open</a> <a id="547" class="Keyword">import</a> <a id="554" href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="Module">Ledger.Conway.Conformance.Equivalence.Convert</a>

<a id="601" class="Keyword">module</a> <a id="608" href="Ledger.Conway.Conformance.Equivalence.html" class="Module">Ledger.Conway.Conformance.Equivalence</a>
  <a id="648" class="Symbol">(</a><a id="649" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="653" class="Symbol">:</a> <a id="655" class="Symbol">_)</a> <a id="658" class="Symbol">(</a><a id="659" class="Keyword">open</a> <a id="664" href="Ledger.Conway.Specification.Transaction.html#1000" class="Module">TransactionStructure</a> <a id="685" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a><a id="688" class="Symbol">)</a>
  <a id="692" class="Symbol">(</a><a id="693" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="697" class="Symbol">:</a> <a id="699" href="Ledger.Conway.Specification.Abstract.html#654" class="Record">AbstractFunctions</a> <a id="717" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a><a id="720" class="Symbol">)</a> <a id="722" class="Symbol">(</a><a id="723" class="Keyword">open</a> <a id="728" href="Ledger.Conway.Specification.Abstract.html#654" class="Module">AbstractFunctions</a> <a id="746" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a><a id="749" class="Symbol">)</a>
  <a id="753" class="Keyword">where</a>

<a id="760" class="Keyword">module</a> <a id="L"></a><a id="767" href="Ledger.Conway.Conformance.Equivalence.html#767" class="Module">L</a> <a id="769" class="Keyword">where</a>
  <a id="777" class="Keyword">open</a> <a id="782" class="Keyword">import</a> <a id="789" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="824" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="828" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="832" class="Keyword">public</a>
  <a id="841" class="Keyword">open</a> <a id="846" class="Keyword">import</a> <a id="853" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="886" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="890" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="894" class="Keyword">public</a>
  <a id="903" class="Keyword">open</a> <a id="908" class="Keyword">import</a> <a id="915" href="Ledger.Conway.Specification.Utxow.html" class="Module">Ledger.Conway.Specification.Utxow</a> <a id="949" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="953" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="957" class="Keyword">public</a>
  <a id="966" class="Keyword">open</a> <a id="971" class="Keyword">import</a> <a id="978" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="1010" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1014" class="Keyword">public</a>
  <a id="1023" class="Keyword">open</a> <a id="1028" class="Keyword">import</a> <a id="1035" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="1069" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a> <a id="1082" class="Keyword">public</a>

<a id="1090" class="Keyword">module</a> <a id="C"></a><a id="1097" href="Ledger.Conway.Conformance.Equivalence.html#1097" class="Module">C</a> <a id="1099" class="Keyword">where</a>
  <a id="1107" class="Keyword">open</a> <a id="1112" class="Keyword">import</a> <a id="1119" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="1152" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1156" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="1160" class="Keyword">public</a>
  <a id="1169" class="Keyword">open</a> <a id="1174" class="Keyword">import</a> <a id="1181" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="1212" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1216" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="1220" class="Keyword">public</a>
  <a id="1229" class="Keyword">open</a> <a id="1234" class="Keyword">import</a> <a id="1241" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="1273" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1277" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a> <a id="1281" class="Keyword">public</a>
  <a id="1290" class="Keyword">open</a> <a id="1295" class="Keyword">import</a> <a id="1302" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="1334" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a> <a id="1347" class="Keyword">public</a>

<a id="1355" class="Keyword">open</a> <a id="1360" class="Keyword">import</a> <a id="1367" href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="Module">Ledger.Conway.Conformance.Equivalence.Certs</a> <a id="1411" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1415" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a>
<a id="1419" class="Keyword">open</a> <a id="1424" class="Keyword">import</a> <a id="1431" href="Ledger.Conway.Conformance.Equivalence.Utxo.html" class="Module">Ledger.Conway.Conformance.Equivalence.Utxo</a> <a id="1474" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1478" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a>
<a id="1482" class="Keyword">open</a> <a id="1487" class="Keyword">import</a> <a id="1494" href="Ledger.Conway.Conformance.Equivalence.Deposits.html" class="Module">Ledger.Conway.Conformance.Equivalence.Deposits</a> <a id="1541" href="Ledger.Conway.Conformance.Equivalence.html#649" class="Bound">txs</a> <a id="1545" href="Ledger.Conway.Conformance.Equivalence.html#693" class="Bound">abs</a>

<a id="1550" class="Keyword">open</a> <a id="1555" href="Ledger.Conway.Specification.Transaction.html#4684" class="Module">Tx</a>
<a id="1558" class="Keyword">open</a> <a id="1563" class="Keyword">import</a> <a id="1570" href="Axiom.Set.Properties.html" class="Module">Axiom.Set.Properties</a> <a id="1591" href="Axiom.Set.html#10751" class="Function">th</a> <a id="1594" class="Keyword">using</a> <a id="1600" class="Symbol">(</a><a id="1601" href="Axiom.Set.Properties.html#3967" class="Function">≡ᵉ-Setoid</a><a id="1610" class="Symbol">)</a>

<a id="1613" class="Comment">-- Invalid transactions don&#39;t change the deposits</a>
<a id="lemInvalidDepositsL"></a><a id="1663" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="1683" class="Symbol">:</a> <a id="1685" class="Symbol">∀</a> <a id="1687" class="Symbol">{</a><a id="1688" href="Ledger.Conway.Conformance.Equivalence.html#1688" class="Bound">Γ</a> <a id="1690" href="Ledger.Conway.Conformance.Equivalence.html#1690" class="Bound">utxoSt</a> <a id="1697" href="Ledger.Conway.Conformance.Equivalence.html#1697" class="Bound">utxoSt&#39;</a> <a id="1705" href="Ledger.Conway.Conformance.Equivalence.html#1705" class="Bound">tx</a><a id="1707" class="Symbol">}</a>
                    <a id="1729" class="Symbol">→</a> <a id="1731" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="1739" href="Ledger.Conway.Conformance.Equivalence.html#1705" class="Bound">tx</a> <a id="1742" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1744" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="1770" class="Symbol">→</a> <a id="1772" href="Ledger.Conway.Conformance.Equivalence.html#1688" class="Bound">Γ</a> <a id="1774" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">L.⊢</a> <a id="1778" href="Ledger.Conway.Conformance.Equivalence.html#1690" class="Bound">utxoSt</a> <a id="1785" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">⇀⦇</a> <a id="1788" href="Ledger.Conway.Conformance.Equivalence.html#1705" class="Bound">tx</a> <a id="1791" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">,UTXOW⦈</a> <a id="1799" href="Ledger.Conway.Conformance.Equivalence.html#1697" class="Bound">utxoSt&#39;</a>
                    <a id="1827" class="Symbol">→</a> <a id="1829" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="1850" href="Ledger.Conway.Conformance.Equivalence.html#1690" class="Bound">utxoSt</a> <a id="1857" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1859" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="1880" href="Ledger.Conway.Conformance.Equivalence.html#1697" class="Bound">utxoSt&#39;</a>
<a id="1888" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="1908" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1913" class="Symbol">(</a><a id="1914" href="Ledger.Conway.Specification.Utxow.html#4982" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
                          <a id="1953" class="Symbol">(</a><a id="1954" href="Ledger.Conway.Specification.Utxo.html#14034" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="1972" class="Symbol">_</a> <a id="1974" class="Symbol">_</a> <a id="1976" class="Symbol">_</a> <a id="1978" class="Symbol">_</a> <a id="1980" class="Symbol">_</a> <a id="1982" class="Symbol">_</a> <a id="1984" class="Symbol">_</a> <a id="1986" class="Symbol">_</a> <a id="1988" class="Symbol">_</a> <a id="1990" class="Symbol">_</a> <a id="1992" class="Symbol">_</a> <a id="1994" class="Symbol">_</a> <a id="1996" class="Symbol">_</a> <a id="1998" class="Symbol">_</a> <a id="2000" class="Symbol">_</a> <a id="2002" class="Symbol">_</a> <a id="2004" class="Symbol">_</a> <a id="2006" class="Symbol">_</a> <a id="2008" class="Symbol">_</a> <a id="2010" class="Symbol">_</a>
                            <a id="2040" class="Symbol">(</a><a id="2041" href="Ledger.Conway.Specification.Utxo.html#12046" class="InductiveConstructor">L.Scripts-No</a> <a id="2054" class="Symbol">_)))</a> <a id="2059" class="Symbol">=</a> <a id="2061" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemInvalidDepositsC"></a><a id="2067" href="Ledger.Conway.Conformance.Equivalence.html#2067" class="Function">lemInvalidDepositsC</a> <a id="2087" class="Symbol">:</a> <a id="2089" class="Symbol">∀</a> <a id="2091" class="Symbol">{</a><a id="2092" href="Ledger.Conway.Conformance.Equivalence.html#2092" class="Bound">Γ</a> <a id="2094" href="Ledger.Conway.Conformance.Equivalence.html#2094" class="Bound">utxoSt</a> <a id="2101" href="Ledger.Conway.Conformance.Equivalence.html#2101" class="Bound">utxoSt&#39;</a> <a id="2109" href="Ledger.Conway.Conformance.Equivalence.html#2109" class="Bound">tx</a><a id="2111" class="Symbol">}</a>
                    <a id="2133" class="Symbol">→</a> <a id="2135" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="2143" href="Ledger.Conway.Conformance.Equivalence.html#2109" class="Bound">tx</a> <a id="2146" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2148" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                    <a id="2174" class="Symbol">→</a> <a id="2176" class="Symbol">(</a><a id="2177" href="Ledger.Conway.Conformance.Equivalence.html#2177" class="Bound">h</a> <a id="2179" class="Symbol">:</a> <a id="2181" href="Ledger.Conway.Conformance.Equivalence.html#2092" class="Bound">Γ</a> <a id="2183" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="2187" href="Ledger.Conway.Conformance.Equivalence.html#2094" class="Bound">utxoSt</a> <a id="2194" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="2197" href="Ledger.Conway.Conformance.Equivalence.html#2109" class="Bound">tx</a> <a id="2200" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="2208" href="Ledger.Conway.Conformance.Equivalence.html#2101" class="Bound">utxoSt&#39;</a><a id="2215" class="Symbol">)</a>
                    <a id="2237" class="Symbol">→</a> <a id="2239" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="2253" href="Ledger.Conway.Conformance.Equivalence.html#2177" class="Bound">h</a> <a id="2255" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2257" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="2278" href="Ledger.Conway.Conformance.Equivalence.html#2101" class="Bound">utxoSt&#39;</a>
<a id="2286" href="Ledger.Conway.Conformance.Equivalence.html#2067" class="Function">lemInvalidDepositsC</a> <a id="2306" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2311" class="Symbol">(</a><a id="2312" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
                          <a id="2351" class="Symbol">(</a><a id="2352" href="Ledger.Conway.Conformance.Utxo.html#3946" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2370" class="Symbol">_</a> <a id="2372" class="Symbol">_</a> <a id="2374" class="Symbol">_</a> <a id="2376" class="Symbol">_</a> <a id="2378" class="Symbol">_</a> <a id="2380" class="Symbol">_</a> <a id="2382" class="Symbol">_</a> <a id="2384" class="Symbol">_</a> <a id="2386" class="Symbol">_</a> <a id="2388" class="Symbol">_</a> <a id="2390" class="Symbol">_</a> <a id="2392" class="Symbol">_</a> <a id="2394" class="Symbol">_</a> <a id="2396" class="Symbol">_</a> <a id="2398" class="Symbol">_</a> <a id="2400" class="Symbol">_</a> <a id="2402" class="Symbol">_</a> <a id="2404" class="Symbol">_</a> <a id="2406" class="Symbol">_</a> <a id="2408" class="Symbol">_</a>
                            <a id="2438" class="Symbol">(</a><a id="2439" href="Ledger.Conway.Conformance.Utxo.html#1826" class="InductiveConstructor">C.Scripts-No</a> <a id="2452" class="Symbol">_)))</a> <a id="2457" class="Symbol">=</a> <a id="2459" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="2465" class="Comment">-- The UTXOW rule doesn&#39;t change the deposits in Conformance</a>
<a id="lemDepositsC"></a><a id="2526" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="2539" class="Symbol">:</a> <a id="2541" class="Symbol">∀</a> <a id="2543" class="Symbol">{</a><a id="2544" href="Ledger.Conway.Conformance.Equivalence.html#2544" class="Bound">Γ</a> <a id="2546" href="Ledger.Conway.Conformance.Equivalence.html#2546" class="Bound">utxoSt</a> <a id="2553" href="Ledger.Conway.Conformance.Equivalence.html#2553" class="Bound">utxoSt&#39;</a> <a id="2561" href="Ledger.Conway.Conformance.Equivalence.html#2561" class="Bound">tx</a><a id="2563" class="Symbol">}</a>
             <a id="2578" class="Symbol">→</a> <a id="2580" class="Symbol">(</a><a id="2581" href="Ledger.Conway.Conformance.Equivalence.html#2581" class="Bound">h</a> <a id="2583" class="Symbol">:</a> <a id="2585" href="Ledger.Conway.Conformance.Equivalence.html#2544" class="Bound">Γ</a> <a id="2587" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="2591" href="Ledger.Conway.Conformance.Equivalence.html#2546" class="Bound">utxoSt</a> <a id="2598" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="2601" href="Ledger.Conway.Conformance.Equivalence.html#2561" class="Bound">tx</a> <a id="2604" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="2612" href="Ledger.Conway.Conformance.Equivalence.html#2553" class="Bound">utxoSt&#39;</a><a id="2619" class="Symbol">)</a>
             <a id="2634" class="Symbol">→</a> <a id="2636" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="2657" href="Ledger.Conway.Conformance.Equivalence.html#2546" class="Bound">utxoSt</a> <a id="2664" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2666" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="2687" href="Ledger.Conway.Conformance.Equivalence.html#2553" class="Bound">utxoSt&#39;</a>
<a id="2695" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="2708" class="Symbol">(</a><a id="2709" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
               <a id="2737" class="Symbol">(</a><a id="2738" href="Ledger.Conway.Conformance.Utxo.html#3946" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2756" class="Symbol">_</a> <a id="2758" class="Symbol">_</a> <a id="2760" class="Symbol">_</a> <a id="2762" class="Symbol">_</a> <a id="2764" class="Symbol">_</a> <a id="2766" class="Symbol">_</a> <a id="2768" class="Symbol">_</a> <a id="2770" class="Symbol">_</a> <a id="2772" class="Symbol">_</a> <a id="2774" class="Symbol">_</a> <a id="2776" class="Symbol">_</a> <a id="2778" class="Symbol">_</a> <a id="2780" class="Symbol">_</a> <a id="2782" class="Symbol">_</a> <a id="2784" class="Symbol">_</a> <a id="2786" class="Symbol">_</a> <a id="2788" class="Symbol">_</a> <a id="2790" class="Symbol">_</a> <a id="2792" class="Symbol">_</a> <a id="2794" class="Symbol">_</a>
                 <a id="2813" class="Symbol">(</a><a id="2814" href="Ledger.Conway.Conformance.Utxo.html#1231" class="InductiveConstructor">C.Scripts-Yes</a> <a id="2828" class="Symbol">_)))</a> <a id="2833" class="Symbol">=</a> <a id="2835" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="2840" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="2853" class="Symbol">(</a><a id="2854" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
               <a id="2882" class="Symbol">(</a><a id="2883" href="Ledger.Conway.Conformance.Utxo.html#3946" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="2901" class="Symbol">_</a> <a id="2903" class="Symbol">_</a> <a id="2905" class="Symbol">_</a> <a id="2907" class="Symbol">_</a> <a id="2909" class="Symbol">_</a> <a id="2911" class="Symbol">_</a> <a id="2913" class="Symbol">_</a> <a id="2915" class="Symbol">_</a> <a id="2917" class="Symbol">_</a> <a id="2919" class="Symbol">_</a> <a id="2921" class="Symbol">_</a> <a id="2923" class="Symbol">_</a> <a id="2925" class="Symbol">_</a> <a id="2927" class="Symbol">_</a> <a id="2929" class="Symbol">_</a> <a id="2931" class="Symbol">_</a> <a id="2933" class="Symbol">_</a> <a id="2935" class="Symbol">_</a> <a id="2937" class="Symbol">_</a> <a id="2939" class="Symbol">_</a>
                 <a id="2958" class="Symbol">(</a><a id="2959" href="Ledger.Conway.Conformance.Utxo.html#1826" class="InductiveConstructor">C.Scripts-No</a> <a id="2972" class="Symbol">_)))</a> <a id="2977" class="Symbol">=</a> <a id="2979" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="lemUpdateDeposits"></a><a id="2985" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="3003" class="Symbol">:</a> <a id="3005" class="Symbol">∀</a> <a id="3007" class="Symbol">{</a><a id="3008" href="Ledger.Conway.Conformance.Equivalence.html#3008" class="Bound">Γ</a> <a id="3010" href="Ledger.Conway.Conformance.Equivalence.html#3010" class="Bound">s</a> <a id="3012" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a> <a id="3015" href="Ledger.Conway.Conformance.Equivalence.html#3015" class="Bound">s&#39;</a><a id="3017" class="Symbol">}</a> <a id="3019" class="Symbol">(</a><a id="3020" class="Keyword">open</a> <a id="3025" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">L.UTxOEnv</a> <a id="3035" href="Ledger.Conway.Conformance.Equivalence.html#3008" class="Bound">Γ</a><a id="3036" class="Symbol">)</a>
                  <a id="3056" class="Symbol">→</a> <a id="3058" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="3066" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a> <a id="3069" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3071" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="3094" class="Symbol">→</a> <a id="3096" href="Ledger.Conway.Conformance.Equivalence.html#3008" class="Bound">Γ</a> <a id="3098" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">L.⊢</a> <a id="3102" href="Ledger.Conway.Conformance.Equivalence.html#3010" class="Bound">s</a> <a id="3104" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">⇀⦇</a> <a id="3107" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a> <a id="3110" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">,UTXOW⦈</a> <a id="3118" href="Ledger.Conway.Conformance.Equivalence.html#3015" class="Bound">s&#39;</a>
                  <a id="3139" class="Symbol">→</a> <a id="3141" href="Ledger.Conway.Specification.Utxo.html#8112" class="Function">L.updateDeposits</a> <a id="3158" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="3166" class="Symbol">(</a><a id="3167" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">body</a> <a id="3172" href="Ledger.Conway.Conformance.Equivalence.html#3012" class="Bound">tx</a><a id="3174" class="Symbol">)</a> <a id="3176" class="Symbol">(</a><a id="3177" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="3198" href="Ledger.Conway.Conformance.Equivalence.html#3010" class="Bound">s</a><a id="3199" class="Symbol">)</a> <a id="3201" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3203" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="3224" href="Ledger.Conway.Conformance.Equivalence.html#3015" class="Bound">s&#39;</a>
<a id="3227" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="3245" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3252" class="Symbol">(</a><a id="3253" href="Ledger.Conway.Specification.Utxow.html#4982" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
    <a id="3270" class="Symbol">(</a><a id="3271" href="Ledger.Conway.Specification.Utxo.html#14034" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3289" class="Symbol">_</a> <a id="3291" class="Symbol">_</a> <a id="3293" class="Symbol">_</a> <a id="3295" class="Symbol">_</a> <a id="3297" class="Symbol">_</a> <a id="3299" class="Symbol">_</a> <a id="3301" class="Symbol">_</a> <a id="3303" class="Symbol">_</a> <a id="3305" class="Symbol">_</a> <a id="3307" class="Symbol">_</a> <a id="3309" class="Symbol">_</a> <a id="3311" class="Symbol">_</a> <a id="3313" class="Symbol">_</a> <a id="3315" class="Symbol">_</a> <a id="3317" class="Symbol">_</a> <a id="3319" class="Symbol">_</a> <a id="3321" class="Symbol">_</a>  <a id="3324" class="Symbol">_</a> <a id="3326" class="Symbol">_</a> <a id="3328" class="Symbol">_</a>
      <a id="3336" class="Symbol">(</a><a id="3337" href="Ledger.Conway.Specification.Utxo.html#11528" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3351" class="Symbol">_)))</a> <a id="3356" class="Symbol">=</a> <a id="3358" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="getValidCertDeposits"></a><a id="3364" href="Ledger.Conway.Conformance.Equivalence.html#3364" class="Function">getValidCertDeposits</a> <a id="3385" class="Symbol">:</a> <a id="3387" class="Symbol">∀</a> <a id="3389" class="Symbol">{</a><a id="3390" href="Ledger.Conway.Conformance.Equivalence.html#3390" class="Bound">Γ</a> <a id="3392" href="Ledger.Conway.Conformance.Equivalence.html#3392" class="Bound">s</a> <a id="3394" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3397" href="Ledger.Conway.Conformance.Equivalence.html#3397" class="Bound">s&#39;</a><a id="3399" class="Symbol">}</a>
                     <a id="3422" class="Symbol">→</a> <a id="3424" class="Symbol">(</a><a id="3425" class="Keyword">let</a> <a id="3429" class="Keyword">open</a> <a id="3434" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">L.UTxOEnv</a> <a id="3444" href="Ledger.Conway.Conformance.Equivalence.html#3390" class="Bound">Γ</a> <a id="3446" class="Keyword">using</a> <a id="3452" class="Symbol">(</a><a id="3453" href="Ledger.Conway.Specification.Utxo.html#1175" class="Field">pparams</a><a id="3460" class="Symbol">)</a>
                            <a id="3490" class="Keyword">open</a> <a id="3495" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">L.UTxOState</a> <a id="3507" href="Ledger.Conway.Conformance.Equivalence.html#3392" class="Bound">s</a> <a id="3509" class="Keyword">using</a> <a id="3515" class="Symbol">(</a><a id="3516" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">deposits</a><a id="3524" class="Symbol">)</a>
                            <a id="3554" class="Keyword">open</a> <a id="3559" href="Ledger.Conway.Specification.Transaction.html#2998" class="Module">TxBody</a> <a id="3566" class="Symbol">(</a><a id="3567" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3570" class="Symbol">.</a><a id="3571" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">Tx.body</a><a id="3578" class="Symbol">)</a> <a id="3580" class="Keyword">using</a> <a id="3586" class="Symbol">(</a><a id="3587" href="Ledger.Conway.Specification.Transaction.html#3216" class="Field">txCerts</a><a id="3594" class="Symbol">))</a>
                     <a id="3618" class="Symbol">→</a> <a id="3620" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="3628" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3631" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3633" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="3659" class="Symbol">→</a> <a id="3661" href="Ledger.Conway.Conformance.Equivalence.html#3390" class="Bound">Γ</a> <a id="3663" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">L.⊢</a> <a id="3667" href="Ledger.Conway.Conformance.Equivalence.html#3392" class="Bound">s</a> <a id="3669" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">⇀⦇</a> <a id="3672" href="Ledger.Conway.Conformance.Equivalence.html#3394" class="Bound">tx</a> <a id="3675" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">,UTXOW⦈</a> <a id="3683" href="Ledger.Conway.Conformance.Equivalence.html#3397" class="Bound">s&#39;</a>
                     <a id="3707" class="Symbol">→</a> <a id="3709" href="Ledger.Conway.Specification.Utxo.html#3462" class="Datatype">L.ValidCertDeposits</a> <a id="3729" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="3737" href="Ledger.Conway.Specification.Utxo.html#1338" class="Function">deposits</a> <a id="3746" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a>
<a id="3754" href="Ledger.Conway.Conformance.Equivalence.html#3364" class="Function">getValidCertDeposits</a> <a id="3775" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="3782" class="Symbol">(</a><a id="3783" href="Ledger.Conway.Specification.Utxow.html#4982" class="InductiveConstructor">L.UTXOW⇒UTXO</a>
    <a id="3800" class="Symbol">(</a><a id="3801" href="Ledger.Conway.Specification.Utxo.html#14034" class="InductiveConstructor">L.UTXO-inductive⋯</a> <a id="3819" class="Symbol">_</a> <a id="3821" class="Symbol">_</a> <a id="3823" class="Symbol">_</a> <a id="3825" class="Symbol">_</a> <a id="3827" class="Symbol">_</a> <a id="3829" class="Symbol">_</a> <a id="3831" class="Symbol">_</a> <a id="3833" class="Symbol">_</a> <a id="3835" class="Symbol">_</a> <a id="3837" class="Symbol">_</a> <a id="3839" class="Symbol">_</a> <a id="3841" class="Symbol">_</a> <a id="3843" class="Symbol">_</a> <a id="3845" class="Symbol">_</a> <a id="3847" class="Symbol">_</a> <a id="3849" class="Symbol">_</a> <a id="3851" class="Symbol">_</a> <a id="3853" class="Symbol">_</a> <a id="3855" class="Symbol">_</a> <a id="3857" class="Symbol">_</a>
      <a id="3865" class="Symbol">(</a><a id="3866" href="Ledger.Conway.Specification.Utxo.html#11528" class="InductiveConstructor">L.Scripts-Yes</a> <a id="3880" class="Symbol">(</a><a id="3881" href="Ledger.Conway.Conformance.Equivalence.html#3881" class="Bound">v</a> <a id="3883" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3885" class="Symbol">_))))</a> <a id="3891" class="Symbol">=</a> <a id="3893" href="Ledger.Conway.Conformance.Equivalence.html#3881" class="Bound">v</a>

<a id="makeCertDeps*"></a><a id="3896" href="Ledger.Conway.Conformance.Equivalence.html#3896" class="Function">makeCertDeps*</a> <a id="3910" class="Symbol">:</a> <a id="3912" class="Symbol">∀</a> <a id="3914" class="Symbol">{</a><a id="3915" href="Ledger.Conway.Conformance.Equivalence.html#3915" class="Bound">Γ</a> <a id="3917" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Bound">s</a> <a id="3919" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="3922" href="Ledger.Conway.Conformance.Equivalence.html#3922" class="Bound">s&#39;</a><a id="3924" class="Symbol">}</a>
              <a id="3940" class="Symbol">→</a> <a id="3942" class="Symbol">(</a><a id="3943" class="Keyword">let</a> <a id="3947" class="Keyword">open</a> <a id="3952" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">L.UTxOEnv</a> <a id="3962" href="Ledger.Conway.Conformance.Equivalence.html#3915" class="Bound">Γ</a> <a id="3964" class="Keyword">using</a> <a id="3970" class="Symbol">(</a><a id="3971" href="Ledger.Conway.Specification.Utxo.html#1175" class="Field">pparams</a><a id="3978" class="Symbol">)</a>
                     <a id="4001" class="Keyword">open</a> <a id="4006" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">L.UTxOState</a> <a id="4018" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Bound">s</a> <a id="4020" class="Keyword">using</a> <a id="4026" class="Symbol">(</a><a id="4027" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">deposits</a><a id="4035" class="Symbol">)</a>
                     <a id="4058" class="Keyword">open</a> <a id="4063" href="Ledger.Conway.Specification.Transaction.html#2998" class="Module">TxBody</a> <a id="4070" class="Symbol">(</a><a id="4071" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="4074" class="Symbol">.</a><a id="4075" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">Tx.body</a><a id="4082" class="Symbol">)</a> <a id="4084" class="Keyword">using</a> <a id="4090" class="Symbol">(</a><a id="4091" href="Ledger.Conway.Specification.Transaction.html#3216" class="Field">txCerts</a><a id="4098" class="Symbol">))</a>
              <a id="4115" class="Symbol">→</a> <a id="4117" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="4125" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="4128" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4130" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
              <a id="4149" class="Symbol">→</a> <a id="4151" href="Ledger.Conway.Conformance.Equivalence.html#3915" class="Bound">Γ</a> <a id="4153" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">L.⊢</a> <a id="4157" href="Ledger.Conway.Conformance.Equivalence.html#3917" class="Bound">s</a> <a id="4159" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">⇀⦇</a> <a id="4162" href="Ledger.Conway.Conformance.Equivalence.html#3919" class="Bound">tx</a> <a id="4165" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">,UTXOW⦈</a> <a id="4173" href="Ledger.Conway.Conformance.Equivalence.html#3922" class="Bound">s&#39;</a>
              <a id="4190" class="Symbol">→</a> <a id="4192" href="Ledger.Conway.Conformance.Equivalence.Certs.html#3978" class="Record">CertDeps*</a> <a id="4202" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="4210" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a>
<a id="4218" href="Ledger.Conway.Conformance.Equivalence.html#3896" class="Function">makeCertDeps*</a> <a id="4232" class="Symbol">{</a><a id="4233" class="Argument">s</a> <a id="4235" class="Symbol">=</a> <a id="4237" href="Ledger.Conway.Conformance.Equivalence.html#4237" class="Bound">s</a><a id="4238" class="Symbol">}</a> <a id="4240" href="Ledger.Conway.Conformance.Equivalence.html#4240" class="Bound">valid</a> <a id="4246" href="Ledger.Conway.Conformance.Equivalence.html#4246" class="Bound">r</a> <a id="4248" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#3980}{\htmlId{4252}{\htmlClass{Function}{\text{certDDeps}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#1338}{\htmlId{4262}{\htmlClass{Function}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#4126}{\htmlId{4273}{\htmlClass{Function}{\text{certGDeps}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#1338}{\htmlId{4283}{\htmlClass{Function}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#7665}{\htmlId{4294}{\htmlClass{Function}{\text{validDDeps}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#4393}{\htmlId{4305}{\htmlClass{Function}{\text{validDeps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Deposits.html#8754}{\htmlId{4317}{\htmlClass{Function}{\text{validGDeps}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#4393}{\htmlId{4328}{\htmlClass{Function}{\text{validDeps}}}}\, \end{pmatrix}$</a>
  <a id="4343" class="Keyword">where</a>
    <a id="4353" class="Keyword">open</a> <a id="4358" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">L.UTxOState</a> <a id="4370" href="Ledger.Conway.Conformance.Equivalence.html#4237" class="Bound">s</a> <a id="4372" class="Keyword">using</a> <a id="4378" class="Symbol">(</a><a id="4379" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">deposits</a><a id="4387" class="Symbol">)</a>
    <a id="4393" href="Ledger.Conway.Conformance.Equivalence.html#4393" class="Function">validDeps</a> <a id="4403" class="Symbol">=</a> <a id="4405" href="Ledger.Conway.Conformance.Equivalence.html#3364" class="Function">getValidCertDeposits</a> <a id="4426" href="Ledger.Conway.Conformance.Equivalence.html#4240" class="Bound">valid</a> <a id="4432" href="Ledger.Conway.Conformance.Equivalence.html#4246" class="Bound">r</a>

<a id="lem-cert-deposits-valid"></a><a id="4435" href="Ledger.Conway.Conformance.Equivalence.html#4435" class="Function">lem-cert-deposits-valid</a> <a id="4459" class="Symbol">:</a> <a id="4461" class="Symbol">∀</a> <a id="4463" class="Symbol">{</a><a id="4464" href="Ledger.Conway.Conformance.Equivalence.html#4464" class="Bound">Γ</a> <a id="4466" href="Ledger.Conway.Conformance.Equivalence.html#4466" class="Bound">s</a> <a id="4468" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4471" href="Ledger.Conway.Conformance.Equivalence.html#4471" class="Bound">s&#39;</a><a id="4473" class="Symbol">}</a> <a id="4475" class="Symbol">(</a><a id="4476" class="Keyword">open</a> <a id="4481" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="4488" href="Ledger.Conway.Conformance.Equivalence.html#4464" class="Bound">Γ</a> <a id="4490" class="Keyword">using</a> <a id="4496" class="Symbol">(</a><a id="4497" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="4504" class="Symbol">))</a>
                        <a id="4531" class="Symbol">→</a> <a id="4533" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="4541" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4544" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4546" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                        <a id="4575" class="Symbol">→</a> <a id="4577" href="Ledger.Conway.Conformance.Equivalence.html#4464" class="Bound">Γ</a> <a id="4579" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">L.⊢</a> <a id="4583" href="Ledger.Conway.Conformance.Equivalence.html#4466" class="Bound">s</a> <a id="4585" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">⇀⦇</a> <a id="4588" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4591" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">,LEDGER⦈</a> <a id="4600" href="Ledger.Conway.Conformance.Equivalence.html#4471" class="Bound">s&#39;</a>
                        <a id="4627" class="Symbol">→</a> <a id="4629" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2974" class="Function">updateLedgerDeps</a> <a id="4646" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="4654" href="Ledger.Conway.Conformance.Equivalence.html#4468" class="Bound">tx</a> <a id="4657" class="Symbol">(</a><a id="4658" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="4671" href="Ledger.Conway.Conformance.Equivalence.html#4466" class="Bound">s</a><a id="4672" class="Symbol">)</a> <a id="4674" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="4677" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="4690" href="Ledger.Conway.Conformance.Equivalence.html#4471" class="Bound">s&#39;</a>
<a id="4693" href="Ledger.Conway.Conformance.Equivalence.html#4435" class="Function">lem-cert-deposits-valid</a> <a id="4717" class="Symbol">{</a><a id="4718" href="Ledger.Conway.Conformance.Equivalence.html#4718" class="Bound">Γ</a><a id="4719" class="Symbol">}</a> <a id="4721" class="Symbol">{</a><a id="4722" href="Ledger.Conway.Conformance.Equivalence.html#4722" class="Bound">s</a><a id="4723" class="Symbol">}</a> <a id="4725" class="Symbol">{</a><a id="4726" href="Ledger.Conway.Conformance.Equivalence.html#4726" class="Bound">tx</a><a id="4728" class="Symbol">}</a> <a id="4730" class="Symbol">{</a><a id="4731" href="Ledger.Conway.Conformance.Equivalence.html#4731" class="Bound">s&#39;</a><a id="4733" class="Symbol">}</a> <a id="4735" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4740" class="Symbol">(</a><a id="4741" href="Ledger.Conway.Specification.Ledger.html#4468" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="4753" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4758" href="Ledger.Conway.Conformance.Equivalence.html#4758" class="Bound">utxow</a> <a id="4764" href="Ledger.Conway.Conformance.Equivalence.html#4764" class="Bound">certs</a> <a id="4770" href="Ledger.Conway.Conformance.Equivalence.html#4770" class="Bound">gov</a><a id="4773" class="Symbol">)</a> <a id="4775" class="Keyword">rewrite</a> <a id="4783" href="Relation.Binary.PropositionalEquality.Core.html#2035" class="Function">sym</a> <a id="4787" class="Symbol">(</a><a id="4788" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="4806" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4811" href="Ledger.Conway.Conformance.Equivalence.html#4758" class="Bound">utxow</a><a id="4816" class="Symbol">)</a> <a id="4818" class="Symbol">=</a>
  <a id="4822" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18977" class="Function">lem-upd-ddeps</a> <a id="4836" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="4844" href="Ledger.Conway.Conformance.Equivalence.html#4932" class="Function">deps</a> <a id="4849" href="Ledger.Conway.Conformance.Equivalence.html#4726" class="Bound">tx</a> <a id="4852" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
  <a id="4856" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19766" class="Function">lem-upd-gdeps</a> <a id="4870" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="4878" href="Ledger.Conway.Conformance.Equivalence.html#4932" class="Function">deps</a> <a id="4883" href="Ledger.Conway.Conformance.Equivalence.html#4726" class="Bound">tx</a>
  <a id="4888" class="Keyword">where</a>
    <a id="4898" class="Keyword">open</a> <a id="4903" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="4910" href="Ledger.Conway.Conformance.Equivalence.html#4718" class="Bound">Γ</a> <a id="4912" class="Keyword">using</a> <a id="4918" class="Symbol">(</a><a id="4919" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="4926" class="Symbol">)</a>
    <a id="4932" href="Ledger.Conway.Conformance.Equivalence.html#4932" class="Function">deps</a> <a id="4937" class="Symbol">=</a> <a id="4939" href="Ledger.Conway.Conformance.Equivalence.html#4722" class="Bound">s</a> <a id="4941" class="Symbol">.</a><a id="4942" href="Ledger.Conway.Specification.Ledger.html#1040" class="Field">L.LState.utxoSt</a> <a id="4958" class="Symbol">.</a> <a id="4960" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a>

<a id="lem-cert-deposits-invalid"></a><a id="4982" href="Ledger.Conway.Conformance.Equivalence.html#4982" class="Function">lem-cert-deposits-invalid</a> <a id="5008" class="Symbol">:</a> <a id="5010" class="Symbol">∀</a> <a id="5012" class="Symbol">{</a><a id="5013" href="Ledger.Conway.Conformance.Equivalence.html#5013" class="Bound">Γ</a> <a id="5015" href="Ledger.Conway.Conformance.Equivalence.html#5015" class="Bound">s</a> <a id="5017" href="Ledger.Conway.Conformance.Equivalence.html#5017" class="Bound">tx</a> <a id="5020" href="Ledger.Conway.Conformance.Equivalence.html#5020" class="Bound">s&#39;</a><a id="5022" class="Symbol">}</a> <a id="5024" class="Symbol">(</a><a id="5025" class="Keyword">open</a> <a id="5030" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="5037" href="Ledger.Conway.Conformance.Equivalence.html#5013" class="Bound">Γ</a> <a id="5039" class="Keyword">using</a> <a id="5045" class="Symbol">(</a><a id="5046" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="5053" class="Symbol">))</a>
                        <a id="5080" class="Symbol">→</a> <a id="5082" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="5090" href="Ledger.Conway.Conformance.Equivalence.html#5017" class="Bound">tx</a> <a id="5093" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5095" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
                        <a id="5125" class="Symbol">→</a> <a id="5127" href="Ledger.Conway.Conformance.Equivalence.html#5013" class="Bound">Γ</a> <a id="5129" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">L.⊢</a> <a id="5133" href="Ledger.Conway.Conformance.Equivalence.html#5015" class="Bound">s</a> <a id="5135" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">⇀⦇</a> <a id="5138" href="Ledger.Conway.Conformance.Equivalence.html#5017" class="Bound">tx</a> <a id="5141" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">,LEDGER⦈</a> <a id="5150" href="Ledger.Conway.Conformance.Equivalence.html#5020" class="Bound">s&#39;</a>
                        <a id="5177" class="Symbol">→</a> <a id="5179" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="5192" href="Ledger.Conway.Conformance.Equivalence.html#5015" class="Bound">s</a> <a id="5194" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="5197" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="5210" href="Ledger.Conway.Conformance.Equivalence.html#5020" class="Bound">s&#39;</a>
<a id="5213" href="Ledger.Conway.Conformance.Equivalence.html#4982" class="Function">lem-cert-deposits-invalid</a> <a id="5239" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5244" class="Symbol">(</a><a id="5245" href="Ledger.Conway.Specification.Ledger.html#4521" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="5257" class="Symbol">_</a> <a id="5259" href="Ledger.Conway.Conformance.Equivalence.html#5259" class="Bound">utxow</a><a id="5264" class="Symbol">)</a> <a id="5266" class="Keyword">rewrite</a> <a id="5274" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="5294" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5299" href="Ledger.Conway.Conformance.Equivalence.html#5259" class="Bound">utxow</a> <a id="5305" class="Symbol">=</a>
  <a id="5309" class="Symbol">(</a><a id="5310" href="Function.Base.html#704" class="Function">id</a> <a id="5313" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5315" href="Function.Base.html#704" class="Function">id</a><a id="5317" class="Symbol">)</a> <a id="5319" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5321" class="Symbol">(</a><a id="5322" href="Function.Base.html#704" class="Function">id</a> <a id="5325" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5327" href="Function.Base.html#704" class="Function">id</a><a id="5329" class="Symbol">)</a>

<a id="5332" class="Keyword">instance</a>
  <a id="LStateToConf"></a><a id="5343" href="Ledger.Conway.Conformance.Equivalence.html#5343" class="Function">LStateToConf</a> <a id="5356" class="Symbol">:</a> <a id="5358" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="5369" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5371" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="5382" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="5384" href="Ledger.Conway.Specification.Ledger.html#981" class="Record">L.LState</a> <a id="5393" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="5395" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a>
  <a id="5406" href="Ledger.Conway.Conformance.Equivalence.html#5343" class="Function">LStateToConf</a> <a id="5419" class="Symbol">.</a><a id="5420" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="5426" href="Ledger.Conway.Conformance.Equivalence.html#5426" class="Bound">deposits</a> <a id="5435" href="Ledger.Conway.Conformance.Equivalence.html#5435" class="Bound">ledgerSt</a> <a id="5444" class="Symbol">=</a>
    <a id="5450" class="Keyword">let</a> <a id="5454" class="Keyword">open</a> <a id="5459" href="Ledger.Conway.Specification.Ledger.html#981" class="Module">L.LState</a> <a id="5468" href="Ledger.Conway.Conformance.Equivalence.html#5435" class="Bound">ledgerSt</a> <a id="5477" class="Keyword">in</a>
    <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Ledger.html#1040}{\htmlId{5486}{\htmlClass{Field}{\text{utxoSt}}}}\, \\ \,\href{Ledger.Conway.Specification.Ledger.html#1067}{\htmlId{5495}{\htmlClass{Field}{\text{govSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#5426}{\htmlId{5503}{\htmlClass{Bound}{\text{deposits}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#270}{\htmlId{5512}{\htmlClass{Function Operator}{\text{⊢conv}}}}\, \,\href{Ledger.Conway.Specification.Ledger.html#1093}{\htmlId{5518}{\htmlClass{Field}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="5531" class="Keyword">instance</a>
  <a id="5542" class="Comment">-- LEDGERToConf : ∀ {Γ s tx s&#39;}</a>
  <a id="5576" class="Comment">--              → (∃[ certDeposits-s ] certDeposits-s ≡ᵈ certDeposits s)</a>
  <a id="5651" class="Comment">--              ⊢ Γ L.⊢ s ⇀⦇ tx ,LEDGER⦈ s&#39; ⭆ⁱ λ (certDeposits-s , _) _ →</a>
  <a id="5727" class="Comment">--                ∃[ certDeposits-s&#39; ]</a>
  <a id="5768" class="Comment">--                   certDeposits-s&#39; ≡ᵈ certDeposits s&#39;</a>
  <a id="5826" class="Comment">--                 × Γ C.⊢ (certDeposits s ⊢conv s) ⇀⦇ tx ,LEDGER⦈ (certDeposits-s&#39; ⊢conv s&#39;)</a>
  <a id="LEDGERToConf"></a><a id="5922" href="Ledger.Conway.Conformance.Equivalence.html#5922" class="Function">LEDGERToConf</a> <a id="5935" class="Symbol">:</a> <a id="5937" class="Symbol">∀</a> <a id="5939" class="Symbol">{</a><a id="5940" href="Ledger.Conway.Conformance.Equivalence.html#5940" class="Bound">Γ</a> <a id="5942" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a> <a id="5944" href="Ledger.Conway.Conformance.Equivalence.html#5944" class="Bound">tx</a> <a id="5947" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a><a id="5949" class="Symbol">}</a>
               <a id="5966" class="Symbol">→</a> <a id="5968" href="Ledger.Conway.Conformance.Equivalence.html#5940" class="Bound">Γ</a> <a id="5970" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">L.⊢</a> <a id="5974" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a> <a id="5976" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">⇀⦇</a> <a id="5979" href="Ledger.Conway.Conformance.Equivalence.html#5944" class="Bound">tx</a> <a id="5982" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">,LEDGER⦈</a> <a id="5991" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a> <a id="5994" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a>
                 <a id="6013" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="6016" href="Ledger.Conway.Conformance.Equivalence.html#6016" class="Bound">certDeposits-s&#39;</a> <a id="6032" href="Data.Product.Base.html#1371" class="Function">]</a>
                    <a id="6054" href="Ledger.Conway.Conformance.Equivalence.html#6016" class="Bound">certDeposits-s&#39;</a> <a id="6070" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="6073" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="6086" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a>
                  <a id="6107" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6109" href="Ledger.Conway.Conformance.Equivalence.html#5940" class="Bound">Γ</a> <a id="6111" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="6115" class="Symbol">(</a><a id="6116" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="6129" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a> <a id="6131" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6137" href="Ledger.Conway.Conformance.Equivalence.html#5942" class="Bound">s</a><a id="6138" class="Symbol">)</a> <a id="6140" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="6143" href="Ledger.Conway.Conformance.Equivalence.html#5944" class="Bound">tx</a> <a id="6146" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="6155" class="Symbol">(</a><a id="6156" href="Ledger.Conway.Conformance.Equivalence.html#6016" class="Bound">certDeposits-s&#39;</a> <a id="6172" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6178" href="Ledger.Conway.Conformance.Equivalence.html#5947" class="Bound">s&#39;</a><a id="6180" class="Symbol">)</a>
  <a id="6184" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , eq-cdeps) r@(L.LEDGER-V⋯ refl utxow certs gov) =</a>
  <a id="6285" href="Ledger.Conway.Conformance.Equivalence.html#5922" class="Function">LEDGERToConf</a> <a id="6298" class="Symbol">{</a><a id="6299" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a><a id="6300" class="Symbol">}</a> <a id="6302" class="Symbol">{</a><a id="6303" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a><a id="6304" class="Symbol">}</a> <a id="6306" class="Symbol">{</a><a id="6307" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a><a id="6309" class="Symbol">}</a> <a id="6311" class="Symbol">{</a><a id="6312" href="Ledger.Conway.Conformance.Equivalence.html#6312" class="Bound">s&#39;</a><a id="6314" class="Symbol">}</a> <a id="6316" class="Symbol">.</a><a id="6317" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="6323" class="Symbol">_</a> <a id="6325" href="Ledger.Conway.Conformance.Equivalence.html#6325" class="Bound">r</a><a id="6326" class="Symbol">@(</a><a id="6328" href="Ledger.Conway.Specification.Ledger.html#4468" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="6340" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6345" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a> <a id="6351" href="Ledger.Conway.Conformance.Equivalence.html#6351" class="Bound">certs</a> <a id="6357" href="Ledger.Conway.Conformance.Equivalence.html#6357" class="Bound">gov</a><a id="6360" class="Symbol">)</a> <a id="6362" class="Symbol">=</a>
    <a id="6368" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2974" class="Function">updateLedgerDeps</a> <a id="6385" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="6393" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="6396" class="Symbol">(</a><a id="6397" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="6410" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a><a id="6411" class="Symbol">)</a>
    <a id="6417" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6419" href="Ledger.Conway.Conformance.Equivalence.html#4435" class="Function">lem-cert-deposits-valid</a> <a id="6443" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6448" href="Ledger.Conway.Conformance.Equivalence.html#6325" class="Bound">r</a>
    <a id="6454" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6456" href="Relation.Binary.PropositionalEquality.Core.html#2186" class="Function">subst₂</a> <a id="6463" class="Symbol">(λ</a> <a id="6466" href="Ledger.Conway.Conformance.Equivalence.html#6466" class="Bound">•</a> <a id="6468" href="Ledger.Conway.Conformance.Equivalence.html#6468" class="Bound">◆</a> <a id="6470" class="Symbol">→</a> <a id="6472" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a> <a id="6474" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="6478" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="6491" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="6501" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="6507" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a> <a id="6509" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="6512" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="6515" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.html#6466}{\htmlId{6526}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{6530}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#6468}{\htmlId{6534}{\htmlClass{Bound}{\text{◆}}}}\, \end{pmatrix}$</a><a id="6537" class="Symbol">)</a>
             <a id="6552" href="Ledger.Conway.Conformance.Equivalence.html#7447" class="Function">utxoEq</a> <a id="6559" href="Ledger.Conway.Conformance.Equivalence.html#7669" class="Function">certsEq</a> <a id="6567" href="Ledger.Conway.Conformance.Equivalence.html#7287" class="Function">ledger&#39;</a>
    <a id="6579" class="Keyword">where</a>
      <a id="6591" class="Keyword">open</a> <a id="6596" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="6603" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a>
      <a id="6611" class="Keyword">open</a> <a id="6616" href="Ledger.Conway.Specification.Ledger.html#981" class="Module">L.LState</a> <a id="6625" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a>
      <a id="6633" class="Keyword">open</a> <a id="6638" href="Ledger.Conway.Specification.Ledger.html#981" class="Module">L.LState</a> <a id="6647" href="Ledger.Conway.Conformance.Equivalence.html#6312" class="Bound">s&#39;</a> <a id="6650" class="Keyword">renaming</a> <a id="6659" class="Symbol">(</a><a id="6660" href="Ledger.Conway.Specification.Ledger.html#1040" class="Field">utxoSt</a> <a id="6667" class="Symbol">to</a> <a id="6670" class="Field">utxoSt&#39;</a><a id="6677" class="Symbol">;</a> <a id="6679" href="Ledger.Conway.Specification.Ledger.html#1093" class="Field">certState</a> <a id="6689" class="Symbol">to</a> <a id="6692" class="Field">certState&#39;</a><a id="6702" class="Symbol">;</a> <a id="6704" href="Ledger.Conway.Specification.Ledger.html#1067" class="Field">govSt</a> <a id="6710" class="Symbol">to</a> <a id="6713" class="Field">govSt&#39;</a><a id="6719" class="Symbol">)</a>
      <a id="6727" class="Keyword">open</a> <a id="6732" href="Ledger.Conway.Specification.Transaction.html#2998" class="Module">TxBody</a> <a id="6739" class="Symbol">(</a><a id="6740" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">body</a> <a id="6745" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a><a id="6747" class="Symbol">)</a> <a id="6749" class="Keyword">using</a> <a id="6755" class="Symbol">(</a><a id="6756" href="Ledger.Conway.Specification.Transaction.html#3216" class="Field">txCerts</a><a id="6763" class="Symbol">)</a>
      <a id="6771" href="Ledger.Conway.Conformance.Equivalence.html#6771" class="Function">deposits</a> <a id="6780" class="Symbol">=</a> <a id="6782" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="6803" href="Ledger.Conway.Specification.Ledger.html#1040" class="Function">utxoSt</a>
      <a id="6816" href="Ledger.Conway.Conformance.Equivalence.html#6816" class="Function">utxow&#39;</a> <a id="6823" class="Symbol">:</a> <a id="6825" class="Symbol">_</a> <a id="6827" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="6831" href="Ledger.Conway.Specification.Ledger.html#1040" class="Function">utxoSt</a> <a id="6838" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="6841" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="6844" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="6852" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="6864" href="Ledger.Conway.Conformance.Equivalence.html#6771" class="Function">deposits</a> <a id="6873" href="Ledger.Conway.Conformance.Equivalence.html#6670" class="Function">utxoSt&#39;</a>
      <a id="6887" href="Ledger.Conway.Conformance.Equivalence.html#6816" class="Function">utxow&#39;</a> <a id="6894" class="Symbol">=</a> <a id="6896" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="6901" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a>
      <a id="6913" href="Ledger.Conway.Conformance.Equivalence.html#6913" class="Function">utxoStC&#39;</a>    <a id="6925" class="Symbol">=</a> <a id="6927" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="6939" class="Symbol">(</a><a id="6940" href="Ledger.Conway.Specification.Utxo.html#8112" class="Function">L.updateDeposits</a> <a id="6957" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="6965" class="Symbol">(</a><a id="6966" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">body</a> <a id="6971" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a><a id="6973" class="Symbol">)</a> <a id="6975" href="Ledger.Conway.Conformance.Equivalence.html#6771" class="Function">deposits</a><a id="6983" class="Symbol">)</a> <a id="6985" href="Ledger.Conway.Conformance.Equivalence.html#6670" class="Function">utxoSt&#39;</a>
      <a id="6999" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a>  <a id="7010" class="Symbol">=</a> <a id="7012" href="Ledger.Conway.Conformance.Equivalence.html#3896" class="Function">makeCertDeps*</a> <a id="7026" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7031" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a>
      <a id="7043" href="Ledger.Conway.Conformance.Equivalence.html#7043" class="Function">cdeposits&#39;</a> <a id="7054" class="Symbol">=</a> <a id="7056" href="Ledger.Conway.Conformance.Equivalence.Certs.html#5696" class="Function">updateCertDeps*</a> <a id="7072" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="7080" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a>
      <a id="7096" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a> <a id="7108" class="Symbol">=</a> <a id="7110" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7123" href="Ledger.Conway.Conformance.Equivalence.html#7043" class="Function">cdeposits&#39;</a> <a id="7134" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7140" href="Ledger.Conway.Conformance.Equivalence.html#6692" class="Function">certState&#39;</a>
      <a id="7157" href="Ledger.Conway.Conformance.Equivalence.html#7157" class="Function">certs&#39;</a> <a id="7164" class="Symbol">:</a> <a id="7166" class="Symbol">_</a> <a id="7168" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">C.⊢</a> <a id="7172" class="Symbol">(</a><a id="7173" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7186" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7196" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7202" href="Ledger.Conway.Specification.Ledger.html#1093" class="Function">certState</a><a id="7211" class="Symbol">)</a> <a id="7213" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">⇀⦇</a> <a id="7216" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="7224" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">,CERTS⦈</a> <a id="7232" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a>
      <a id="7250" href="Ledger.Conway.Conformance.Equivalence.html#7157" class="Function">certs&#39;</a> <a id="7257" class="Symbol">=</a> <a id="7259" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7269" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7275" href="Ledger.Conway.Conformance.Equivalence.html#6351" class="Bound">certs</a>
      <a id="7287" href="Ledger.Conway.Conformance.Equivalence.html#7287" class="Function">ledger&#39;</a> <a id="7295" class="Symbol">:</a> <a id="7297" href="Ledger.Conway.Conformance.Equivalence.html#6299" class="Bound">Γ</a> <a id="7299" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="7303" class="Symbol">(</a><a id="7304" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7317" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7327" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7333" href="Ledger.Conway.Conformance.Equivalence.html#6303" class="Bound">s</a><a id="7334" class="Symbol">)</a> <a id="7336" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="7339" href="Ledger.Conway.Conformance.Equivalence.html#6307" class="Bound">tx</a> <a id="7342" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="7351" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">C.⟦</a> <a id="7355" href="Ledger.Conway.Conformance.Equivalence.html#6913" class="Function">utxoStC&#39;</a> <a id="7364" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">,</a> <a id="7366" href="Ledger.Conway.Conformance.Equivalence.html#6713" class="Function">govSt&#39;</a> <a id="7373" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">,</a> <a id="7375" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a> <a id="7387" href="Ledger.Conway.Conformance.Ledger.html#813" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="7396" href="Ledger.Conway.Conformance.Equivalence.html#7287" class="Function">ledger&#39;</a> <a id="7404" class="Symbol">=</a> <a id="7406" href="Ledger.Conway.Conformance.Ledger.html#2178" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="7418" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7423" href="Ledger.Conway.Conformance.Equivalence.html#6816" class="Function">utxow&#39;</a> <a id="7430" href="Ledger.Conway.Conformance.Equivalence.html#7157" class="Function">certs&#39;</a> <a id="7437" href="Ledger.Conway.Conformance.Equivalence.html#6357" class="Bound">gov</a>
      <a id="7447" href="Ledger.Conway.Conformance.Equivalence.html#7447" class="Function">utxoEq</a>  <a id="7455" class="Symbol">:</a> <a id="7457" href="Ledger.Conway.Conformance.Equivalence.html#6913" class="Function">utxoStC&#39;</a> <a id="7466" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7468" href="Ledger.Conway.Conformance.Equivalence.html#6670" class="Function">utxoSt&#39;</a>
      <a id="7482" href="Ledger.Conway.Conformance.Equivalence.html#7447" class="Function">utxoEq</a>  <a id="7490" class="Symbol">=</a> <a id="7492" href="Relation.Binary.PropositionalEquality.Core.html#1481" class="Function">cong</a> <a id="7497" class="Symbol">(λ</a> <a id="7500" href="Ledger.Conway.Conformance.Equivalence.html#7500" class="Bound">•</a> <a id="7502" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{7506}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7510}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7500}{\htmlId{7514}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{7518}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="7521" class="Symbol">)</a>
                     <a id="7544" class="Symbol">(</a><a id="7545" href="Ledger.Conway.Conformance.Equivalence.html#2985" class="Function">lemUpdateDeposits</a> <a id="7563" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7568" href="Ledger.Conway.Conformance.Equivalence.html#6345" class="Bound">utxow</a><a id="7573" class="Symbol">)</a>
      <a id="7581" href="Ledger.Conway.Conformance.Equivalence.html#7581" class="Function">ddeps</a> <a id="7587" class="Symbol">=</a> <a id="7589" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7602" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7612" class="Symbol">.</a><a id="7613" href="Data.Product.Base.html#636" class="Field">proj₁</a>
      <a id="7625" href="Ledger.Conway.Conformance.Equivalence.html#7625" class="Function">gdeps</a> <a id="7631" class="Symbol">=</a> <a id="7633" href="Ledger.Conway.Conformance.Equivalence.Certs.html#4914" class="Function">getCertDeps*</a> <a id="7646" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a> <a id="7656" class="Symbol">.</a><a id="7657" href="Data.Product.Base.html#650" class="Field">proj₂</a>
      <a id="7669" href="Ledger.Conway.Conformance.Equivalence.html#7669" class="Function">certsEq</a> <a id="7677" class="Symbol">:</a> <a id="7679" href="Ledger.Conway.Conformance.Equivalence.html#7096" class="Function">certStateC&#39;</a> <a id="7691" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7693" class="Symbol">(</a><a id="7694" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="7706" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="7714" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="7722" href="Ledger.Conway.Conformance.Equivalence.html#7581" class="Function">ddeps</a> <a id="7728" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7730" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="7742" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="7750" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="7758" href="Ledger.Conway.Conformance.Equivalence.html#7625" class="Function">gdeps</a><a id="7763" class="Symbol">)</a> <a id="7765" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="7771" href="Ledger.Conway.Conformance.Equivalence.html#6692" class="Function">certState&#39;</a>
      <a id="7788" href="Ledger.Conway.Conformance.Equivalence.html#7669" class="Function">certsEq</a> <a id="7796" class="Symbol">=</a> <a id="7798" href="Relation.Binary.PropositionalEquality.Core.html#1718" class="Function">cong₂</a> <a id="7804" class="Symbol">(λ</a> <a id="7807" href="Ledger.Conway.Conformance.Equivalence.html#7807" class="Bound">•</a> <a id="7809" href="Ledger.Conway.Conformance.Equivalence.html#7809" class="Bound">◆</a> <a id="7811" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\htmlId{7817}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7821}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7825}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7807}{\htmlId{7829}{\htmlClass{Bound}{\text{•}}}}\, \end{pmatrix} \\ \,\htmlId{7835}{\htmlClass{Symbol}{\text{\_}}}\, \\ \begin{pmatrix} \,\htmlId{7841}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{7845}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#7809}{\htmlId{7849}{\htmlClass{Bound}{\text{◆}}}}\, \end{pmatrix} \end{pmatrix}$</a><a id="7854" class="Symbol">)</a>
                     <a id="7877" class="Symbol">(</a><a id="7878" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#10973" class="Function">lem-ddeps</a> <a id="7888" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a><a id="7897" class="Symbol">)</a>
                     <a id="7920" class="Symbol">(</a><a id="7921" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#11886" class="Function">lem-gdeps</a> <a id="7931" href="Ledger.Conway.Conformance.Equivalence.html#6999" class="Function">cdeposits</a><a id="7940" class="Symbol">)</a>

  <a id="7945" class="Comment">-- LEDGERToConf {Γ} {s} {tx} {s&#39;} .convⁱ (cdeps , cdeps-eq) r@(L.LEDGER-I⋯ refl utxow) =</a>
  <a id="8036" href="Ledger.Conway.Conformance.Equivalence.html#5922" class="Function">LEDGERToConf</a> <a id="8049" class="Symbol">{</a><a id="8050" href="Ledger.Conway.Conformance.Equivalence.html#8050" class="Bound">Γ</a><a id="8051" class="Symbol">}</a> <a id="8053" class="Symbol">{</a><a id="8054" href="Ledger.Conway.Conformance.Equivalence.html#8054" class="Bound">s</a><a id="8055" class="Symbol">}</a> <a id="8057" class="Symbol">{</a><a id="8058" href="Ledger.Conway.Conformance.Equivalence.html#8058" class="Bound">tx</a><a id="8060" class="Symbol">}</a> <a id="8062" class="Symbol">{</a><a id="8063" href="Ledger.Conway.Conformance.Equivalence.html#8063" class="Bound">s&#39;</a><a id="8065" class="Symbol">}</a> <a id="8067" class="Symbol">.</a><a id="8068" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8074" class="Symbol">_</a> <a id="8076" href="Ledger.Conway.Conformance.Equivalence.html#8076" class="Bound">r</a><a id="8077" class="Symbol">@(</a><a id="8079" href="Ledger.Conway.Specification.Ledger.html#4521" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="8091" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8096" href="Ledger.Conway.Conformance.Equivalence.html#8096" class="Bound">utxow</a><a id="8101" class="Symbol">)</a> <a id="8103" class="Symbol">=</a>
    <a id="8109" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="8122" href="Ledger.Conway.Conformance.Equivalence.html#8054" class="Bound">s</a> <a id="8124" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8126" href="Ledger.Conway.Conformance.Equivalence.html#4982" class="Function">lem-cert-deposits-invalid</a> <a id="8152" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8157" href="Ledger.Conway.Conformance.Equivalence.html#8076" class="Bound">r</a> <a id="8159" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>
    <a id="8165" href="Relation.Binary.PropositionalEquality.Core.html#2131" class="Function">subst</a> <a id="8171" class="Symbol">(λ</a> <a id="8174" href="Ledger.Conway.Conformance.Equivalence.html#8174" class="Bound">•</a> <a id="8176" class="Symbol">→</a> <a id="8178" href="Ledger.Conway.Conformance.Equivalence.html#8050" class="Bound">Γ</a> <a id="8180" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="8184" class="Symbol">_</a> <a id="8186" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="8192" href="Ledger.Conway.Conformance.Equivalence.html#8054" class="Bound">s</a> <a id="8194" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="8197" href="Ledger.Conway.Conformance.Equivalence.html#8058" class="Bound">tx</a> <a id="8200" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\htmlId{8213}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{8217}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#8174}{\htmlId{8221}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{8225}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix} \\ \,\htmlId{8231}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{8235}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="8238" class="Symbol">)</a>
          <a id="8250" class="Symbol">(</a><a id="8251" href="Ledger.Conway.Conformance.Equivalence.html#1663" class="Function">lemInvalidDepositsL</a> <a id="8271" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8276" href="Ledger.Conway.Conformance.Equivalence.html#8096" class="Bound">utxow</a><a id="8281" class="Symbol">)</a>
          <a id="8293" class="Symbol">(</a><a id="8294" href="Ledger.Conway.Conformance.Ledger.html#2231" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="8306" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="8311" class="Symbol">(</a><a id="8312" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8317" href="Ledger.Conway.Conformance.Equivalence.html#8096" class="Bound">utxow</a><a id="8322" class="Symbol">))</a>

<a id="8326" class="Keyword">instance</a>

  <a id="LStateFromConf"></a><a id="8338" href="Ledger.Conway.Conformance.Equivalence.html#8338" class="Function">LStateFromConf</a> <a id="8353" class="Symbol">:</a> <a id="8355" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a> <a id="8364" href="Ledger.Conway.Conformance.Equivalence.Convert.html#409" class="Function Operator">⭆</a> <a id="8366" href="Ledger.Conway.Specification.Ledger.html#981" class="Record">L.LState</a>
  <a id="8377" href="Ledger.Conway.Conformance.Equivalence.html#8338" class="Function">LStateFromConf</a> <a id="8392" class="Symbol">.</a><a id="8393" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="8399" class="Symbol">_</a> <a id="8401" href="Ledger.Conway.Conformance.Equivalence.html#8401" class="Bound">ls</a> <a id="8404" class="Symbol">=</a>
    <a id="8410" class="Keyword">let</a> <a id="8414" class="Keyword">open</a> <a id="8419" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="8428" href="Ledger.Conway.Conformance.Equivalence.html#8401" class="Bound">ls</a> <a id="8431" class="Keyword">in</a>
    <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{8440}{\htmlClass{Field}{\text{utxoSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#861}{\htmlId{8449}{\htmlClass{Field}{\text{govSt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{8457}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Ledger.html#887}{\htmlId{8462}{\htmlClass{Field}{\text{certState}}}}\, \end{pmatrix}$</a>

<a id="certDepositsC"></a><a id="8475" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8489" class="Symbol">:</a> <a id="8491" href="Ledger.Conway.Conformance.Certs.html#951" class="Record">C.CertState</a> <a id="8503" class="Symbol">→</a> <a id="8505" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="8516" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8518" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a>
<a id="8529" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8543" href="Ledger.Conway.Conformance.Equivalence.html#8543" class="Bound">cs</a> <a id="8546" class="Symbol">=</a> <a id="8548" class="Keyword">let</a> <a id="8552" class="Keyword">open</a> <a id="8557" href="Ledger.Conway.Conformance.Certs.html#951" class="Module">C.CertState</a> <a id="8569" href="Ledger.Conway.Conformance.Equivalence.html#8543" class="Bound">cs</a> <a id="8572" class="Keyword">in</a> <a id="8575" href="Ledger.Conway.Conformance.Certs.html#751" class="Field">C.DState.deposits</a> <a id="8593" href="Ledger.Conway.Conformance.Certs.html#1010" class="Field">dState</a> <a id="8600" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8602" href="Ledger.Conway.Conformance.Certs.html#921" class="Field">C.GState.deposits</a> <a id="8620" href="Ledger.Conway.Conformance.Certs.html#1050" class="Field">gState</a>

<a id="WellformedLState"></a><a id="8628" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="8645" class="Symbol">:</a> <a id="8647" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a> <a id="8656" class="Symbol">→</a> <a id="8658" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="8663" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="8680" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">s</a> <a id="8682" class="Symbol">=</a> <a id="8684" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8698" class="Symbol">(</a><a id="8699" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="8718" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">s</a><a id="8719" class="Symbol">)</a> <a id="8721" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="8724" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="8737" class="Symbol">(</a><a id="8738" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="8743" href="Ledger.Conway.Conformance.Equivalence.html#8680" class="Bound">s</a><a id="8744" class="Symbol">)</a>

<a id="getValidCertDepositsCERTS"></a><a id="8747" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="8773" class="Symbol">:</a> <a id="8775" class="Symbol">∀</a> <a id="8777" class="Symbol">{</a><a id="8778" href="Ledger.Conway.Conformance.Equivalence.html#8778" class="Bound">Γ</a> <a id="8780" href="Ledger.Conway.Conformance.Equivalence.html#8780" class="Bound">s</a> <a id="8782" href="Ledger.Conway.Conformance.Equivalence.html#8782" class="Bound">certs</a> <a id="8788" href="Ledger.Conway.Conformance.Equivalence.html#8788" class="Bound">s&#39;</a><a id="8790" class="Symbol">}</a> <a id="8792" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a> <a id="8801" class="Symbol">(</a><a id="8802" class="Keyword">open</a> <a id="8807" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">L.CertEnv</a> <a id="8817" href="Ledger.Conway.Conformance.Equivalence.html#8778" class="Bound">Γ</a> <a id="8819" class="Keyword">using</a> <a id="8825" class="Symbol">(</a><a id="8826" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="8828" class="Symbol">))</a>
                          <a id="8857" class="Symbol">→</a> <a id="8859" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="8873" href="Ledger.Conway.Conformance.Equivalence.html#8780" class="Bound">s</a> <a id="8875" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="8878" class="Symbol">(</a><a id="8879" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3980" class="Function">certDDeps</a> <a id="8889" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a> <a id="8898" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8900" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4126" class="Function">certGDeps</a> <a id="8910" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a><a id="8918" class="Symbol">)</a>
                          <a id="8946" class="Symbol">→</a> <a id="8948" href="Interface.STS.html#1671" class="Function">ReflexiveTransitiveClosure</a> <a id="8975" class="Symbol">{</a><a id="8976" class="Argument">sts</a> <a id="8980" class="Symbol">=</a> <a id="8982" href="Ledger.Conway.Conformance.Certs.html#6475" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="8997" class="Symbol">}</a> <a id="8999" href="Ledger.Conway.Conformance.Equivalence.html#8778" class="Bound">Γ</a> <a id="9001" href="Ledger.Conway.Conformance.Equivalence.html#8780" class="Bound">s</a> <a id="9003" href="Ledger.Conway.Conformance.Equivalence.html#8782" class="Bound">certs</a> <a id="9009" href="Ledger.Conway.Conformance.Equivalence.html#8788" class="Bound">s&#39;</a>
                          <a id="9038" class="Symbol">→</a> <a id="9040" href="Ledger.Conway.Specification.Utxo.html#3462" class="Datatype">L.ValidCertDeposits</a> <a id="9060" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="9063" href="Ledger.Conway.Conformance.Equivalence.html#8792" class="Bound">deposits</a> <a id="9072" href="Ledger.Conway.Conformance.Equivalence.html#8782" class="Bound">certs</a>
<a id="9078" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9104" href="Ledger.Conway.Conformance.Equivalence.html#9104" class="Bound">deposits</a> <a id="9113" href="Ledger.Conway.Conformance.Equivalence.html#9113" class="Bound">wf</a> <a id="9116" class="Symbol">(</a><a id="9117" href="Interface.STS.html#441" class="InductiveConstructor">BS-base</a> <a id="9125" href="Interface.STS.html#1288" class="InductiveConstructor">Id-nop</a><a id="9131" class="Symbol">)</a> <a id="9133" class="Symbol">=</a> <a id="9135" href="Ledger.Conway.Specification.Utxo.html#3544" class="InductiveConstructor">L.[]</a>
<a id="9140" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9166" class="Symbol">{</a><a id="9167" href="Ledger.Conway.Conformance.Equivalence.html#9167" class="Bound">Γ</a><a id="9168" class="Symbol">}</a> <a id="9170" class="Symbol">{</a><a id="9171" href="Ledger.Conway.Conformance.Equivalence.html#9171" class="Bound">s</a><a id="9172" class="Symbol">}</a> <a id="9174" class="Symbol">{</a><a id="9175" href="Ledger.Conway.Conformance.Equivalence.html#9175" class="Bound">cert</a> <a id="9180" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9182" class="Symbol">_}</a> <a id="9185" href="Ledger.Conway.Conformance.Equivalence.html#9185" class="Bound">deposits</a> <a id="9194" href="Ledger.Conway.Conformance.Equivalence.html#9194" class="Bound">wf</a> <a id="9197" class="Symbol">(</a><a id="9198" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="9205" class="Symbol">(</a><a id="9206" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="9219" class="Symbol">(</a><a id="9220" href="Ledger.Conway.Conformance.Certs.html#4133" class="InductiveConstructor">C.DELEG-delegate</a> <a id="9237" class="Symbol">(</a><a id="9238" href="Ledger.Conway.Conformance.Equivalence.html#9238" class="Bound">a</a> <a id="9240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9242" href="Ledger.Conway.Conformance.Equivalence.html#9242" class="Bound">b</a><a id="9243" class="Symbol">)))</a> <a id="9247" href="Ledger.Conway.Conformance.Equivalence.html#9247" class="Bound">rs</a><a id="9249" class="Symbol">)</a> <a id="9251" class="Symbol">=</a>
  <a id="9255" href="Ledger.Conway.Specification.Utxo.html#3588" class="InductiveConstructor">L.delegate</a> <a id="9266" class="Symbol">(</a><a id="9267" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9293" class="Symbol">_</a> <a id="9295" class="Symbol">(</a><a id="9296" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="9307" class="Symbol">(</a><a id="9308" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="9321" href="Ledger.Conway.Conformance.Equivalence.html#9167" class="Bound">Γ</a><a id="9322" class="Symbol">)</a> <a id="9324" class="Symbol">(</a><a id="9325" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="9339" href="Ledger.Conway.Conformance.Equivalence.html#9171" class="Bound">s</a><a id="9340" class="Symbol">)</a> <a id="9342" href="Ledger.Conway.Conformance.Equivalence.html#9185" class="Bound">deposits</a> <a id="9351" href="Ledger.Conway.Conformance.Equivalence.html#9175" class="Bound">cert</a> <a id="9356" href="Ledger.Conway.Conformance.Equivalence.html#9194" class="Bound">wf</a><a id="9358" class="Symbol">)</a> <a id="9360" href="Ledger.Conway.Conformance.Equivalence.html#9247" class="Bound">rs</a><a id="9362" class="Symbol">)</a>
<a id="9364" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9390" class="Symbol">{</a><a id="9391" href="Ledger.Conway.Conformance.Equivalence.html#9391" class="Bound">Γ</a><a id="9392" class="Symbol">}</a> <a id="9394" class="Symbol">{</a><a id="9395" href="Ledger.Conway.Conformance.Equivalence.html#9395" class="Bound">s</a><a id="9396" class="Symbol">}</a> <a id="9398" class="Symbol">{</a><a id="9399" href="Ledger.Conway.Conformance.Equivalence.html#9399" class="Bound">cert</a> <a id="9404" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9406" class="Symbol">_}</a> <a id="9409" href="Ledger.Conway.Conformance.Equivalence.html#9409" class="Bound">deposits</a> <a id="9418" href="Ledger.Conway.Conformance.Equivalence.html#9418" class="Bound">wf</a> <a id="9421" class="Symbol">(</a><a id="9422" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="9429" class="Symbol">(</a><a id="9430" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="9443" class="Symbol">(</a><a id="9444" href="Ledger.Conway.Conformance.Certs.html#4770" class="InductiveConstructor">C.DELEG-dereg</a> <a id="9458" class="Symbol">(_</a> <a id="9461" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9463" href="Ledger.Conway.Conformance.Equivalence.html#9463" class="Bound">h</a> <a id="9465" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9467" href="Ledger.Conway.Conformance.Equivalence.html#9467" class="Bound">h&#39;</a><a id="9469" class="Symbol">)))</a> <a id="9473" href="Ledger.Conway.Conformance.Equivalence.html#9473" class="Bound">rs</a><a id="9475" class="Symbol">)</a> <a id="9477" class="Symbol">=</a>
  <a id="9481" href="Ledger.Conway.Specification.Utxo.html#4309" class="InductiveConstructor">L.dereg</a> <a id="9489" class="Symbol">(</a><a id="9490" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="9499" class="Symbol">.</a><a id="9500" href="Function.Bundles.html#4832" class="Field">Equivalence.from</a> <a id="9517" class="Symbol">(</a><a id="9518" href="Ledger.Conway.Conformance.Equivalence.html#9418" class="Bound">wf</a> <a id="9521" class="Symbol">.</a><a id="9522" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9528" class="Symbol">.</a><a id="9529" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9535" href="Ledger.Conway.Conformance.Equivalence.html#9463" class="Bound">h</a><a id="9536" class="Symbol">)</a> <a id="9538" class="Symbol">.</a><a id="9539" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="9544" class="Symbol">)</a> <a id="9546" href="Ledger.Conway.Conformance.Equivalence.html#9467" class="Bound">h&#39;</a>
          <a id="9559" class="Symbol">(</a><a id="9560" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9586" class="Symbol">_</a> <a id="9588" class="Symbol">(</a><a id="9589" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="9600" class="Symbol">(</a><a id="9601" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="9614" href="Ledger.Conway.Conformance.Equivalence.html#9391" class="Bound">Γ</a><a id="9615" class="Symbol">)</a> <a id="9617" class="Symbol">(</a><a id="9618" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="9632" href="Ledger.Conway.Conformance.Equivalence.html#9395" class="Bound">s</a><a id="9633" class="Symbol">)</a> <a id="9635" href="Ledger.Conway.Conformance.Equivalence.html#9409" class="Bound">deposits</a> <a id="9644" href="Ledger.Conway.Conformance.Equivalence.html#9399" class="Bound">cert</a> <a id="9649" href="Ledger.Conway.Conformance.Equivalence.html#9418" class="Bound">wf</a><a id="9651" class="Symbol">)</a> <a id="9653" href="Ledger.Conway.Conformance.Equivalence.html#9473" class="Bound">rs</a><a id="9655" class="Symbol">)</a>
<a id="9657" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9683" class="Symbol">{</a><a id="9684" href="Ledger.Conway.Conformance.Equivalence.html#9684" class="Bound">Γ</a><a id="9685" class="Symbol">}</a> <a id="9687" class="Symbol">{</a><a id="9688" href="Ledger.Conway.Conformance.Equivalence.html#9688" class="Bound">s</a><a id="9689" class="Symbol">}</a> <a id="9691" class="Symbol">{</a><a id="9692" href="Ledger.Conway.Conformance.Equivalence.html#9692" class="Bound">cert</a> <a id="9697" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9699" class="Symbol">_}</a> <a id="9702" href="Ledger.Conway.Conformance.Equivalence.html#9702" class="Bound">deposits</a> <a id="9711" href="Ledger.Conway.Conformance.Equivalence.html#9711" class="Bound">wf</a> <a id="9714" class="Symbol">(</a><a id="9715" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="9722" class="Symbol">(</a><a id="9723" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="9736" class="Symbol">(</a><a id="9737" href="Ledger.Conway.Conformance.Certs.html#5134" class="InductiveConstructor">C.DELEG-reg</a> <a id="9749" href="Ledger.Conway.Conformance.Equivalence.html#9749" class="Bound">x</a><a id="9750" class="Symbol">))</a> <a id="9753" href="Ledger.Conway.Conformance.Equivalence.html#9753" class="Bound">rs</a><a id="9755" class="Symbol">)</a> <a id="9757" class="Symbol">=</a>
  <a id="9761" href="Ledger.Conway.Specification.Utxo.html#4128" class="InductiveConstructor">L.reg</a> <a id="9767" class="Symbol">(</a><a id="9768" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9794" class="Symbol">_</a> <a id="9796" class="Symbol">(</a><a id="9797" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="9808" class="Symbol">(</a><a id="9809" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="9822" href="Ledger.Conway.Conformance.Equivalence.html#9684" class="Bound">Γ</a><a id="9823" class="Symbol">)</a> <a id="9825" class="Symbol">(</a><a id="9826" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="9840" href="Ledger.Conway.Conformance.Equivalence.html#9688" class="Bound">s</a><a id="9841" class="Symbol">)</a> <a id="9843" href="Ledger.Conway.Conformance.Equivalence.html#9702" class="Bound">deposits</a> <a id="9852" href="Ledger.Conway.Conformance.Equivalence.html#9692" class="Bound">cert</a> <a id="9857" href="Ledger.Conway.Conformance.Equivalence.html#9711" class="Bound">wf</a><a id="9859" class="Symbol">)</a> <a id="9861" href="Ledger.Conway.Conformance.Equivalence.html#9753" class="Bound">rs</a><a id="9863" class="Symbol">)</a>
<a id="9865" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="9891" class="Symbol">{</a><a id="9892" href="Ledger.Conway.Conformance.Equivalence.html#9892" class="Bound">Γ</a><a id="9893" class="Symbol">}</a> <a id="9895" class="Symbol">{</a><a id="9896" href="Ledger.Conway.Conformance.Equivalence.html#9896" class="Bound">s</a><a id="9897" class="Symbol">}</a> <a id="9899" class="Symbol">{</a><a id="9900" href="Ledger.Conway.Conformance.Equivalence.html#9900" class="Bound">cert</a> <a id="9905" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9907" class="Symbol">_}</a> <a id="9910" href="Ledger.Conway.Conformance.Equivalence.html#9910" class="Bound">deposits</a> <a id="9919" href="Ledger.Conway.Conformance.Equivalence.html#9919" class="Bound">wf</a> <a id="9922" class="Symbol">(</a><a id="9923" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="9930" class="Symbol">(</a><a id="9931" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a> <a id="9943" class="Symbol">(</a><a id="9944" href="Ledger.Conway.Conformance.Certs.html#3759" class="InductiveConstructor">C.POOL-regpool</a> <a id="9959" class="Symbol">_))</a> <a id="9963" href="Ledger.Conway.Conformance.Equivalence.html#9963" class="Bound">rs</a><a id="9965" class="Symbol">)</a> <a id="9967" class="Symbol">=</a>
  <a id="9971" href="Ledger.Conway.Specification.Utxo.html#3775" class="InductiveConstructor">L.regpool</a> <a id="9981" class="Symbol">(</a><a id="9982" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10008" class="Symbol">_</a> <a id="10010" class="Symbol">(</a><a id="10011" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="10022" class="Symbol">(</a><a id="10023" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="10036" href="Ledger.Conway.Conformance.Equivalence.html#9892" class="Bound">Γ</a><a id="10037" class="Symbol">)</a> <a id="10039" class="Symbol">(</a><a id="10040" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10054" href="Ledger.Conway.Conformance.Equivalence.html#9896" class="Bound">s</a><a id="10055" class="Symbol">)</a> <a id="10057" href="Ledger.Conway.Conformance.Equivalence.html#9910" class="Bound">deposits</a> <a id="10066" href="Ledger.Conway.Conformance.Equivalence.html#9900" class="Bound">cert</a> <a id="10071" href="Ledger.Conway.Conformance.Equivalence.html#9919" class="Bound">wf</a><a id="10073" class="Symbol">)</a> <a id="10075" href="Ledger.Conway.Conformance.Equivalence.html#9963" class="Bound">rs</a><a id="10077" class="Symbol">)</a>
<a id="10079" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10105" class="Symbol">{</a><a id="10106" href="Ledger.Conway.Conformance.Equivalence.html#10106" class="Bound">Γ</a><a id="10107" class="Symbol">}</a> <a id="10109" class="Symbol">{</a><a id="10110" href="Ledger.Conway.Conformance.Equivalence.html#10110" class="Bound">s</a><a id="10111" class="Symbol">}</a> <a id="10113" class="Symbol">{</a><a id="10114" href="Ledger.Conway.Conformance.Equivalence.html#10114" class="Bound">cert</a> <a id="10119" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10121" class="Symbol">_}</a> <a id="10124" href="Ledger.Conway.Conformance.Equivalence.html#10124" class="Bound">deposits</a> <a id="10133" href="Ledger.Conway.Conformance.Equivalence.html#10133" class="Bound">wf</a> <a id="10136" class="Symbol">(</a><a id="10137" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="10144" class="Symbol">(</a><a id="10145" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a> <a id="10157" href="Ledger.Conway.Conformance.Certs.html#3958" class="InductiveConstructor">C.POOL-retirepool</a><a id="10174" class="Symbol">)</a> <a id="10176" href="Ledger.Conway.Conformance.Equivalence.html#10176" class="Bound">rs</a><a id="10178" class="Symbol">)</a> <a id="10180" class="Symbol">=</a>
  <a id="10184" href="Ledger.Conway.Specification.Utxo.html#4917" class="InductiveConstructor">L.retirepool</a> <a id="10197" class="Symbol">(</a><a id="10198" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10224" class="Symbol">_</a> <a id="10226" class="Symbol">(</a><a id="10227" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="10238" class="Symbol">(</a><a id="10239" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="10252" href="Ledger.Conway.Conformance.Equivalence.html#10106" class="Bound">Γ</a><a id="10253" class="Symbol">)</a> <a id="10255" class="Symbol">(</a><a id="10256" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10270" href="Ledger.Conway.Conformance.Equivalence.html#10110" class="Bound">s</a><a id="10271" class="Symbol">)</a> <a id="10273" href="Ledger.Conway.Conformance.Equivalence.html#10124" class="Bound">deposits</a> <a id="10282" href="Ledger.Conway.Conformance.Equivalence.html#10114" class="Bound">cert</a> <a id="10287" href="Ledger.Conway.Conformance.Equivalence.html#10133" class="Bound">wf</a><a id="10289" class="Symbol">)</a> <a id="10291" href="Ledger.Conway.Conformance.Equivalence.html#10176" class="Bound">rs</a><a id="10293" class="Symbol">)</a>
<a id="10295" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10321" class="Symbol">{</a><a id="10322" href="Ledger.Conway.Conformance.Equivalence.html#10322" class="Bound">Γ</a><a id="10323" class="Symbol">}</a> <a id="10325" class="Symbol">{</a><a id="10326" href="Ledger.Conway.Conformance.Equivalence.html#10326" class="Bound">s</a><a id="10327" class="Symbol">}</a> <a id="10329" class="Symbol">{</a><a id="10330" href="Ledger.Conway.Conformance.Equivalence.html#10330" class="Bound">cert</a> <a id="10335" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10337" class="Symbol">_}</a> <a id="10340" href="Ledger.Conway.Conformance.Equivalence.html#10340" class="Bound">deposits</a> <a id="10349" href="Ledger.Conway.Conformance.Equivalence.html#10349" class="Bound">wf</a> <a id="10352" class="Symbol">(</a><a id="10353" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="10360" class="Symbol">(</a><a id="10361" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="10373" class="Symbol">(</a><a id="10374" href="Ledger.Conway.Conformance.Certs.html#5523" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="10392" href="Ledger.Conway.Conformance.Equivalence.html#10392" class="Bound">x</a><a id="10393" class="Symbol">))</a> <a id="10396" href="Ledger.Conway.Conformance.Equivalence.html#10396" class="Bound">rs</a><a id="10398" class="Symbol">)</a> <a id="10400" class="Symbol">=</a>
  <a id="10404" href="Ledger.Conway.Specification.Utxo.html#3958" class="InductiveConstructor">L.regdrep</a> <a id="10414" class="Symbol">(</a><a id="10415" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10441" class="Symbol">_</a> <a id="10443" class="Symbol">(</a><a id="10444" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="10455" class="Symbol">(</a><a id="10456" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="10469" href="Ledger.Conway.Conformance.Equivalence.html#10322" class="Bound">Γ</a><a id="10470" class="Symbol">)</a> <a id="10472" class="Symbol">(</a><a id="10473" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10487" href="Ledger.Conway.Conformance.Equivalence.html#10326" class="Bound">s</a><a id="10488" class="Symbol">)</a> <a id="10490" href="Ledger.Conway.Conformance.Equivalence.html#10340" class="Bound">deposits</a> <a id="10499" href="Ledger.Conway.Conformance.Equivalence.html#10330" class="Bound">cert</a> <a id="10504" href="Ledger.Conway.Conformance.Equivalence.html#10349" class="Bound">wf</a><a id="10506" class="Symbol">)</a> <a id="10508" href="Ledger.Conway.Conformance.Equivalence.html#10396" class="Bound">rs</a><a id="10510" class="Symbol">)</a>
<a id="10512" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10538" class="Symbol">{</a><a id="10539" href="Ledger.Conway.Conformance.Equivalence.html#10539" class="Bound">Γ</a><a id="10540" class="Symbol">}</a> <a id="10542" class="Symbol">{</a><a id="10543" href="Ledger.Conway.Conformance.Equivalence.html#10543" class="Bound">s</a><a id="10544" class="Symbol">}</a> <a id="10546" class="Symbol">{</a><a id="10547" href="Ledger.Conway.Conformance.Equivalence.html#10547" class="Bound">cert</a> <a id="10552" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10554" class="Symbol">_}</a> <a id="10557" href="Ledger.Conway.Conformance.Equivalence.html#10557" class="Bound">deposits</a> <a id="10566" href="Ledger.Conway.Conformance.Equivalence.html#10566" class="Bound">wf</a> <a id="10569" class="Symbol">(</a><a id="10570" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="10577" class="Symbol">(</a><a id="10578" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="10590" class="Symbol">(</a><a id="10591" href="Ledger.Conway.Conformance.Certs.html#5889" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="10611" class="Symbol">(_</a> <a id="10614" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10616" href="Ledger.Conway.Conformance.Equivalence.html#10616" class="Bound">h</a><a id="10617" class="Symbol">)))</a> <a id="10621" href="Ledger.Conway.Conformance.Equivalence.html#10621" class="Bound">rs</a><a id="10623" class="Symbol">)</a> <a id="10625" class="Symbol">=</a>
  <a id="10629" href="Ledger.Conway.Specification.Utxo.html#4570" class="InductiveConstructor">L.deregdrep</a> <a id="10641" class="Symbol">(</a><a id="10642" href="Axiom.Set.html#5599" class="Function">∈-filter</a> <a id="10651" class="Symbol">.</a><a id="10652" href="Function.Bundles.html#4832" class="Field">Equivalence.from</a> <a id="10669" class="Symbol">(</a><a id="10670" href="Ledger.Conway.Conformance.Equivalence.html#10566" class="Bound">wf</a> <a id="10673" class="Symbol">.</a><a id="10674" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="10680" class="Symbol">.</a><a id="10681" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="10687" href="Ledger.Conway.Conformance.Equivalence.html#10616" class="Bound">h</a><a id="10688" class="Symbol">)</a> <a id="10690" class="Symbol">.</a><a id="10691" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="10696" class="Symbol">)</a>
              <a id="10712" class="Symbol">(</a><a id="10713" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10739" class="Symbol">_</a> <a id="10741" class="Symbol">(</a><a id="10742" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="10753" class="Symbol">(</a><a id="10754" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="10767" href="Ledger.Conway.Conformance.Equivalence.html#10539" class="Bound">Γ</a><a id="10768" class="Symbol">)</a> <a id="10770" class="Symbol">(</a><a id="10771" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="10785" href="Ledger.Conway.Conformance.Equivalence.html#10543" class="Bound">s</a><a id="10786" class="Symbol">)</a> <a id="10788" href="Ledger.Conway.Conformance.Equivalence.html#10557" class="Bound">deposits</a> <a id="10797" href="Ledger.Conway.Conformance.Equivalence.html#10547" class="Bound">cert</a> <a id="10802" href="Ledger.Conway.Conformance.Equivalence.html#10566" class="Bound">wf</a><a id="10804" class="Symbol">)</a> <a id="10806" href="Ledger.Conway.Conformance.Equivalence.html#10621" class="Bound">rs</a><a id="10808" class="Symbol">)</a>
<a id="10810" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10836" class="Symbol">{</a><a id="10837" href="Ledger.Conway.Conformance.Equivalence.html#10837" class="Bound">Γ</a><a id="10838" class="Symbol">}</a> <a id="10840" class="Symbol">{</a><a id="10841" href="Ledger.Conway.Conformance.Equivalence.html#10841" class="Bound">s</a><a id="10842" class="Symbol">}</a> <a id="10844" class="Symbol">{</a><a id="10845" href="Ledger.Conway.Conformance.Equivalence.html#10845" class="Bound">cert</a> <a id="10850" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="10852" class="Symbol">_}</a> <a id="10855" href="Ledger.Conway.Conformance.Equivalence.html#10855" class="Bound">deposits</a> <a id="10864" href="Ledger.Conway.Conformance.Equivalence.html#10864" class="Bound">wf</a> <a id="10867" class="Symbol">(</a><a id="10868" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="10875" class="Symbol">(</a><a id="10876" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="10888" class="Symbol">(</a><a id="10889" href="Ledger.Conway.Conformance.Certs.html#6184" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="10908" href="Ledger.Conway.Conformance.Equivalence.html#10908" class="Bound">x</a><a id="10909" class="Symbol">))</a> <a id="10912" href="Ledger.Conway.Conformance.Equivalence.html#10912" class="Bound">rs</a><a id="10914" class="Symbol">)</a> <a id="10916" class="Symbol">=</a>
  <a id="10920" href="Ledger.Conway.Specification.Utxo.html#4777" class="InductiveConstructor">L.ccreghot</a><a id="10930" class="Symbol">(</a><a id="10931" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="10957" class="Symbol">_</a> <a id="10959" class="Symbol">(</a><a id="10960" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#20577" class="Function">lemUpdCert</a> <a id="10971" class="Symbol">(</a><a id="10972" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">L.CertEnv.pp</a> <a id="10985" href="Ledger.Conway.Conformance.Equivalence.html#10837" class="Bound">Γ</a><a id="10986" class="Symbol">)</a> <a id="10988" class="Symbol">(</a><a id="10989" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="11003" href="Ledger.Conway.Conformance.Equivalence.html#10841" class="Bound">s</a><a id="11004" class="Symbol">)</a> <a id="11006" href="Ledger.Conway.Conformance.Equivalence.html#10855" class="Bound">deposits</a> <a id="11015" href="Ledger.Conway.Conformance.Equivalence.html#10845" class="Bound">cert</a> <a id="11020" href="Ledger.Conway.Conformance.Equivalence.html#10864" class="Bound">wf</a><a id="11022" class="Symbol">)</a> <a id="11024" href="Ledger.Conway.Conformance.Equivalence.html#10912" class="Bound">rs</a><a id="11026" class="Symbol">)</a>

<a id="getValidCertDepositsC"></a><a id="11029" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Function">getValidCertDepositsC</a> <a id="11051" class="Symbol">:</a> <a id="11053" class="Symbol">∀</a> <a id="11055" href="Ledger.Conway.Conformance.Equivalence.html#11055" class="Bound">Γ</a> <a id="11057" href="Ledger.Conway.Conformance.Equivalence.html#11057" class="Bound">s</a> <a id="11059" class="Symbol">{</a><a id="11060" href="Ledger.Conway.Conformance.Equivalence.html#11060" class="Bound">s&#39;</a><a id="11062" class="Symbol">}</a> <a id="11064" href="Ledger.Conway.Conformance.Equivalence.html#11064" class="Bound">tx</a>
                     <a id="11088" class="Symbol">→</a> <a id="11090" class="Symbol">(</a><a id="11091" class="Keyword">let</a> <a id="11095" class="Keyword">open</a> <a id="11100" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">C.LEnv</a> <a id="11107" href="Ledger.Conway.Conformance.Equivalence.html#11055" class="Bound">Γ</a> <a id="11109" class="Keyword">using</a> <a id="11115" class="Symbol">(</a><a id="11116" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="11123" class="Symbol">;</a> <a id="11125" href="Ledger.Conway.Specification.Ledger.html#743" class="Field">slot</a><a id="11129" class="Symbol">;</a> <a id="11131" href="Ledger.Conway.Specification.Ledger.html#827" class="Field">enactState</a><a id="11141" class="Symbol">)</a>
                            <a id="11171" class="Keyword">open</a> <a id="11176" href="Ledger.Conway.Specification.Transaction.html#2998" class="Module">TxBody</a> <a id="11183" class="Symbol">(</a><a id="11184" href="Ledger.Conway.Conformance.Equivalence.html#11064" class="Bound">tx</a> <a id="11187" class="Symbol">.</a><a id="11188" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">Tx.body</a><a id="11195" class="Symbol">)</a> <a id="11197" class="Keyword">using</a> <a id="11203" class="Symbol">(</a><a id="11204" href="Ledger.Conway.Specification.Transaction.html#3216" class="Field">txCerts</a><a id="11211" class="Symbol">;</a> <a id="11213" href="Ledger.Conway.Specification.Transaction.html#3465" class="Field">txGovVotes</a><a id="11223" class="Symbol">;</a> <a id="11225" href="Ledger.Conway.Specification.Transaction.html#3290" class="Field">txWithdrawals</a><a id="11238" class="Symbol">)</a>
                            <a id="11268" class="Keyword">open</a> <a id="11273" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="11282" href="Ledger.Conway.Conformance.Equivalence.html#11057" class="Bound">s</a>
                            <a id="11312" class="Keyword">open</a> <a id="11317" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">C.UTxOState</a> <a id="11329" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="11336" class="Keyword">using</a> <a id="11342" class="Symbol">(</a><a id="11343" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">deposits</a><a id="11351" class="Symbol">)</a>
                            <a id="11381" href="Ledger.Conway.Conformance.Equivalence.html#11381" class="Bound">cc</a> <a id="11384" class="Symbol">=</a> <a id="11386" href="Ledger.Conway.Specification.Ledger.html#3060" class="Function">C.allColdCreds</a> <a id="11401" href="Ledger.Conway.Conformance.Ledger.html#861" class="Function">govSt</a> <a id="11407" href="Ledger.Conway.Specification.Ledger.html#827" class="Function">enactState</a>
                       <a id="11441" class="Symbol">)</a>
                     <a id="11464" class="Symbol">→</a> <a id="11466" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="11483" href="Ledger.Conway.Conformance.Equivalence.html#11057" class="Bound">s</a>
                     <a id="11506" class="Symbol">→</a> <a id="11508" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="11516" href="Ledger.Conway.Conformance.Equivalence.html#11064" class="Bound">tx</a> <a id="11519" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11521" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                     <a id="11547" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Core.Specification.Epoch.html#810}{\htmlId{11551}{\htmlClass{Function}{\text{epoch}}}}\, \,\href{Ledger.Conway.Specification.Ledger.html#743}{\htmlId{11557}{\htmlClass{Function}{\text{slot}}}}\, \\ \,\href{Ledger.Conway.Specification.Ledger.html#801}{\htmlId{11564}{\htmlClass{Function}{\text{pparams}}}}\, \\ \,\href{Ledger.Conway.Specification.Transaction.html#3465}{\htmlId{11574}{\htmlClass{Function}{\text{txGovVotes}}}}\, \\ \,\href{Ledger.Conway.Specification.Transaction.html#3290}{\htmlId{11587}{\htmlClass{Function}{\text{txWithdrawals}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#11381}{\htmlId{11603}{\htmlClass{Bound}{\text{cc}}}}\, \end{pmatrix}$</a> <a id="11608" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">C.⊢</a> <a id="11612" href="Ledger.Conway.Conformance.Ledger.html#887" class="Function">certState</a> <a id="11622" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">⇀⦇</a> <a id="11625" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="11633" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">,CERTS⦈</a> <a id="11641" href="Ledger.Conway.Conformance.Equivalence.html#11060" class="Bound">s&#39;</a>
                     <a id="11665" class="Symbol">→</a> <a id="11667" href="Ledger.Conway.Specification.Utxo.html#3462" class="Datatype">L.ValidCertDeposits</a> <a id="11687" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="11695" href="Ledger.Conway.Specification.Utxo.html#1338" class="Function">deposits</a> <a id="11704" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a>
<a id="11712" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Function">getValidCertDepositsC</a> <a id="11734" href="Ledger.Conway.Conformance.Equivalence.html#11734" class="Bound">Γ</a> <a id="11736" href="Ledger.Conway.Conformance.Equivalence.html#11736" class="Bound">s</a> <a id="11738" href="Ledger.Conway.Conformance.Equivalence.html#11738" class="Bound">tx</a> <a id="11741" href="Ledger.Conway.Conformance.Equivalence.html#11741" class="Bound">wf</a> <a id="11744" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="11749" class="Symbol">(</a><a id="11750" href="Interface.STS.html#1458" class="InductiveConstructor">RTC</a> <a id="11754" class="Symbol">(</a><a id="11755" href="Ledger.Conway.Conformance.Certs.html#7197" class="InductiveConstructor">C.CERT-base</a> <a id="11767" class="Symbol">_</a> <a id="11769" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11771" href="Ledger.Conway.Conformance.Equivalence.html#11771" class="Bound">step</a><a id="11775" class="Symbol">))</a> <a id="11778" class="Symbol">=</a>
  <a id="11782" href="Ledger.Conway.Conformance.Equivalence.html#8747" class="Function">getValidCertDepositsCERTS</a> <a id="11808" class="Symbol">(</a><a id="11809" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">C.UTxOState.deposits</a> <a id="11830" class="Symbol">(</a><a id="11831" href="Ledger.Conway.Conformance.Ledger.html#834" class="Field">C.LState.utxoSt</a> <a id="11847" href="Ledger.Conway.Conformance.Equivalence.html#11736" class="Bound">s</a><a id="11848" class="Symbol">))</a> <a id="11851" href="Ledger.Conway.Conformance.Equivalence.html#11741" class="Bound">wf</a> <a id="11854" href="Ledger.Conway.Conformance.Equivalence.html#11771" class="Bound">step</a>

<a id="lemUtxowDeposits"></a><a id="11860" href="Ledger.Conway.Conformance.Equivalence.html#11860" class="Function">lemUtxowDeposits</a> <a id="11877" class="Symbol">:</a> <a id="11879" class="Symbol">∀</a> <a id="11881" class="Symbol">{</a><a id="11882" href="Ledger.Conway.Conformance.Equivalence.html#11882" class="Bound">Γ</a> <a id="11884" href="Ledger.Conway.Conformance.Equivalence.html#11884" class="Bound">s</a> <a id="11886" href="Ledger.Conway.Conformance.Equivalence.html#11886" class="Bound">s&#39;</a> <a id="11889" href="Ledger.Conway.Conformance.Equivalence.html#11889" class="Bound">tx</a><a id="11891" class="Symbol">}</a>
                      <a id="11915" class="Symbol">(</a><a id="11916" class="Keyword">let</a> <a id="11920" class="Keyword">open</a> <a id="11925" href="Ledger.Conway.Specification.Utxo.html#1121" class="Module">C.UTxOEnv</a> <a id="11935" href="Ledger.Conway.Conformance.Equivalence.html#11882" class="Bound">Γ</a> <a id="11937" class="Keyword">using</a> <a id="11943" class="Symbol">(</a><a id="11944" href="Ledger.Conway.Specification.Utxo.html#1175" class="Field">pparams</a><a id="11951" class="Symbol">))</a>
                  <a id="11972" class="Symbol">→</a> <a id="11974" href="Ledger.Conway.Specification.Transaction.html#4788" class="Field">isValid</a> <a id="11982" href="Ledger.Conway.Conformance.Equivalence.html#11889" class="Bound">tx</a> <a id="11985" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11987" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
                  <a id="12010" class="Symbol">→</a> <a id="12012" class="Symbol">(</a><a id="12013" href="Ledger.Conway.Conformance.Equivalence.html#12013" class="Bound">r</a> <a id="12015" class="Symbol">:</a> <a id="12017" href="Ledger.Conway.Conformance.Equivalence.html#11882" class="Bound">Γ</a> <a id="12019" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">C.⊢</a> <a id="12023" href="Ledger.Conway.Conformance.Equivalence.html#11884" class="Bound">s</a> <a id="12025" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">⇀⦇</a> <a id="12028" href="Ledger.Conway.Conformance.Equivalence.html#11889" class="Bound">tx</a> <a id="12031" href="Ledger.Conway.Conformance.Utxow.html#692" class="Datatype Operator">,UTXOW⦈</a> <a id="12039" href="Ledger.Conway.Conformance.Equivalence.html#11886" class="Bound">s&#39;</a><a id="12041" class="Symbol">)</a>
                  <a id="12061" class="Symbol">→</a> <a id="12063" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="12077" href="Ledger.Conway.Conformance.Equivalence.html#12013" class="Bound">r</a> <a id="12079" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12081" href="Ledger.Conway.Specification.Utxo.html#8112" class="Function">L.updateDeposits</a> <a id="12098" href="Ledger.Conway.Specification.Utxo.html#1175" class="Function">pparams</a> <a id="12106" class="Symbol">(</a><a id="12107" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">body</a> <a id="12112" href="Ledger.Conway.Conformance.Equivalence.html#11889" class="Bound">tx</a><a id="12114" class="Symbol">)</a> <a id="12116" class="Symbol">(</a><a id="12117" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">C.UTxOState.deposits</a> <a id="12138" href="Ledger.Conway.Conformance.Equivalence.html#11886" class="Bound">s&#39;</a><a id="12140" class="Symbol">)</a>
<a id="12142" href="Ledger.Conway.Conformance.Equivalence.html#11860" class="Function">lemUtxowDeposits</a> <a id="12159" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12164" class="Symbol">(</a><a id="12165" href="Ledger.Conway.Conformance.Utxow.html#2541" class="InductiveConstructor">C.UTXOW⇒UTXO</a>
                        <a id="12202" class="Symbol">(</a><a id="12203" href="Ledger.Conway.Conformance.Utxo.html#3946" class="InductiveConstructor">C.UTXO-inductive⋯</a> <a id="12221" class="Symbol">_</a> <a id="12223" class="Symbol">_</a> <a id="12225" class="Symbol">_</a> <a id="12227" class="Symbol">_</a> <a id="12229" class="Symbol">_</a> <a id="12231" class="Symbol">_</a> <a id="12233" class="Symbol">_</a> <a id="12235" class="Symbol">_</a> <a id="12237" class="Symbol">_</a> <a id="12239" class="Symbol">_</a> <a id="12241" class="Symbol">_</a> <a id="12243" class="Symbol">_</a> <a id="12245" class="Symbol">_</a> <a id="12247" class="Symbol">_</a> <a id="12249" class="Symbol">_</a> <a id="12251" class="Symbol">_</a> <a id="12253" class="Symbol">_</a> <a id="12255" class="Symbol">_</a> <a id="12257" class="Symbol">_</a> <a id="12259" class="Symbol">_</a>
                          <a id="12287" class="Symbol">(</a><a id="12288" href="Ledger.Conway.Conformance.Utxo.html#1231" class="InductiveConstructor">C.Scripts-Yes</a> <a id="12302" class="Symbol">_)))</a> <a id="12307" class="Symbol">=</a> <a id="12309" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="12315" class="Keyword">instance</a>

  <a id="LEDGERFromConf"></a><a id="12327" href="Ledger.Conway.Conformance.Equivalence.html#12327" class="Function">LEDGERFromConf</a> <a id="12342" class="Symbol">:</a> <a id="12344" class="Symbol">∀</a> <a id="12346" class="Symbol">{</a><a id="12347" href="Ledger.Conway.Conformance.Equivalence.html#12347" class="Bound">Γ</a> <a id="12349" href="Ledger.Conway.Conformance.Equivalence.html#12349" class="Bound">s</a> <a id="12351" href="Ledger.Conway.Conformance.Equivalence.html#12351" class="Bound">tx</a> <a id="12354" href="Ledger.Conway.Conformance.Equivalence.html#12354" class="Bound">s&#39;</a><a id="12356" class="Symbol">}</a> <a id="12358" class="Symbol">→</a> <a id="12360" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="12377" href="Ledger.Conway.Conformance.Equivalence.html#12349" class="Bound">s</a>
                                    <a id="12415" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⊢</a> <a id="12417" href="Ledger.Conway.Conformance.Equivalence.html#12347" class="Bound">Γ</a> <a id="12419" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="12423" href="Ledger.Conway.Conformance.Equivalence.html#12349" class="Bound">s</a> <a id="12425" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="12428" href="Ledger.Conway.Conformance.Equivalence.html#12351" class="Bound">tx</a> <a id="12431" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="12440" href="Ledger.Conway.Conformance.Equivalence.html#12354" class="Bound">s&#39;</a>
                                    <a id="12479" href="Ledger.Conway.Conformance.Equivalence.Convert.html#349" class="Function Operator">⭆</a> <a id="12481" href="Ledger.Conway.Conformance.Equivalence.html#12347" class="Bound">Γ</a> <a id="12483" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">L.⊢</a> <a id="12487" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12492" href="Ledger.Conway.Conformance.Equivalence.html#12349" class="Bound">s</a> <a id="12494" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">⇀⦇</a> <a id="12497" href="Ledger.Conway.Conformance.Equivalence.html#12351" class="Bound">tx</a> <a id="12500" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">,LEDGER⦈</a> <a id="12509" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12514" href="Ledger.Conway.Conformance.Equivalence.html#12354" class="Bound">s&#39;</a>
  <a id="12519" href="Ledger.Conway.Conformance.Equivalence.html#12327" class="Function">LEDGERFromConf</a> <a id="12534" class="Symbol">.</a><a id="12535" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12541" class="Symbol">_</a> <a id="12543" class="Symbol">(</a><a id="12544" href="Ledger.Conway.Conformance.Ledger.html#2231" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="12556" href="Ledger.Conway.Conformance.Equivalence.html#12556" class="Bound">invalid</a> <a id="12564" href="Ledger.Conway.Conformance.Equivalence.html#12564" class="Bound">utxow</a><a id="12569" class="Symbol">)</a> <a id="12571" class="Keyword">with</a> <a id="12576" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="12581" href="Ledger.Conway.Conformance.Equivalence.html#12556" class="Bound">invalid</a> <a id="12589" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="12595" href="Ledger.Conway.Conformance.Equivalence.html#12564" class="Bound">utxow</a>
  <a id="12603" class="Symbol">...</a> <a id="12607" class="Symbol">|</a> <a id="12609" href="Ledger.Conway.Conformance.Equivalence.html#12609" class="Bound">utxow&#39;</a> <a id="12616" class="Keyword">rewrite</a> <a id="12624" href="Ledger.Conway.Conformance.Equivalence.html#2067" class="Function">lemInvalidDepositsC</a> <a id="12644" class="Bound">invalid</a> <a id="12652" class="Bound">utxow</a> <a id="12658" class="Symbol">=</a> <a id="12660" href="Ledger.Conway.Specification.Ledger.html#4521" class="InductiveConstructor">L.LEDGER-I⋯</a> <a id="12672" class="Bound">invalid</a> <a id="12680" href="Ledger.Conway.Conformance.Equivalence.html#12609" class="Bound">utxow&#39;</a>
  <a id="12689" href="Ledger.Conway.Conformance.Equivalence.html#12327" class="Function">LEDGERFromConf</a> <a id="12704" class="Symbol">{</a><a id="12705" href="Ledger.Conway.Conformance.Equivalence.html#12705" class="Bound">Γ</a><a id="12706" class="Symbol">}</a> <a id="12708" class="Symbol">{</a><a id="12709" href="Ledger.Conway.Conformance.Equivalence.html#12709" class="Bound">s</a><a id="12710" class="Symbol">}</a> <a id="12712" class="Symbol">{</a><a id="12713" href="Ledger.Conway.Conformance.Equivalence.html#12713" class="Bound">tx</a><a id="12715" class="Symbol">}</a> <a id="12717" class="Symbol">{</a><a id="12718" href="Ledger.Conway.Conformance.Equivalence.html#12718" class="Bound">s&#39;</a><a id="12720" class="Symbol">}</a> <a id="12722" class="Symbol">.</a><a id="12723" href="Ledger.Conway.Conformance.Equivalence.Convert.html#217" class="Field">convⁱ</a> <a id="12729" href="Ledger.Conway.Conformance.Equivalence.html#12729" class="Bound">wf</a> <a id="12732" class="Symbol">(</a><a id="12733" href="Ledger.Conway.Conformance.Ledger.html#2178" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="12745" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="12750" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">utxow</a> <a id="12756" href="Ledger.Conway.Conformance.Equivalence.html#12756" class="Bound">certs</a> <a id="12762" href="Ledger.Conway.Conformance.Equivalence.html#12762" class="Bound">gov</a><a id="12765" class="Symbol">)</a> <a id="12767" class="Symbol">=</a>
    <a id="12773" href="Relation.Binary.PropositionalEquality.Core.html#2131" class="Function">subst</a> <a id="12779" class="Symbol">(λ</a> <a id="12782" href="Ledger.Conway.Conformance.Equivalence.html#12782" class="Bound">•</a> <a id="12784" class="Symbol">→</a> <a id="12786" href="Ledger.Conway.Conformance.Equivalence.html#12705" class="Bound">Γ</a> <a id="12788" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">L.⊢</a> <a id="12792" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="12797" href="Ledger.Conway.Conformance.Equivalence.html#12709" class="Bound">s</a> <a id="12799" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">⇀⦇</a> <a id="12802" href="Ledger.Conway.Conformance.Equivalence.html#12713" class="Bound">tx</a> <a id="12805" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">,LEDGER⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Equivalence.html#12782}{\htmlId{12816}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#13014}{\htmlId{12820}{\htmlClass{Function}{\text{govSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.Convert.html#452}{\htmlId{12829}{\htmlClass{Function}{\text{conv}}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#13035}{\htmlId{12834}{\htmlClass{Function}{\text{certSt&#39;}}}}\, \end{pmatrix}$</a><a id="12843" class="Symbol">)</a> <a id="12845" href="Ledger.Conway.Conformance.Equivalence.html#13384" class="Function">eqUtxo</a> <a id="12852" href="Ledger.Conway.Conformance.Equivalence.html#13528" class="Function">ledger&#39;</a>
    <a id="12864" class="Keyword">where</a>
      <a id="12876" class="Keyword">open</a> <a id="12881" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">C.LEnv</a> <a id="12888" href="Ledger.Conway.Conformance.Equivalence.html#12705" class="Bound">Γ</a>

      <a id="12897" class="Keyword">open</a> <a id="12902" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="12911" href="Ledger.Conway.Conformance.Equivalence.html#12709" class="Bound">s</a> <a id="12913" class="Keyword">renaming</a> <a id="12922" class="Symbol">(</a><a id="12923" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="12933" class="Symbol">to</a> <a id="12936" class="Field">certSt</a><a id="12942" class="Symbol">)</a>
      <a id="12950" class="Keyword">open</a> <a id="12955" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="12964" href="Ledger.Conway.Conformance.Equivalence.html#12718" class="Bound">s&#39;</a> <a id="12967" class="Keyword">using</a> <a id="12973" class="Symbol">()</a> <a id="12976" class="Keyword">renaming</a> <a id="12985" class="Symbol">(</a><a id="12986" href="Ledger.Conway.Conformance.Ledger.html#834" class="Field">utxoSt</a> <a id="12993" class="Symbol">to</a> <a id="12996" class="Field">utxoSt&#39;</a><a id="13003" class="Symbol">;</a> <a id="13005" href="Ledger.Conway.Conformance.Ledger.html#861" class="Field">govSt</a> <a id="13011" class="Symbol">to</a> <a id="13014" class="Field">govSt&#39;</a><a id="13020" class="Symbol">;</a> <a id="13022" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="13032" class="Symbol">to</a> <a id="13035" class="Field">certSt&#39;</a><a id="13042" class="Symbol">)</a>

      <a id="13051" class="Keyword">open</a> <a id="13056" href="Ledger.Conway.Specification.Transaction.html#2998" class="Module">TxBody</a> <a id="13063" class="Symbol">(</a><a id="13064" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">body</a> <a id="13069" href="Ledger.Conway.Conformance.Equivalence.html#12713" class="Bound">tx</a><a id="13071" class="Symbol">)</a>
      <a id="13079" class="Keyword">open</a> <a id="13084" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">C.UTxOState</a> <a id="13096" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="13103" class="Keyword">using</a> <a id="13109" class="Symbol">(</a><a id="13110" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">deposits</a><a id="13118" class="Symbol">)</a>

      <a id="13127" href="Ledger.Conway.Conformance.Equivalence.html#13127" class="Function">valid-deps</a> <a id="13138" class="Symbol">:</a> <a id="13140" href="Ledger.Conway.Specification.Utxo.html#3462" class="Datatype">L.ValidCertDeposits</a> <a id="13160" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="13168" href="Ledger.Conway.Specification.Utxo.html#1338" class="Function">deposits</a> <a id="13177" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a>
      <a id="13191" href="Ledger.Conway.Conformance.Equivalence.html#13127" class="Function">valid-deps</a> <a id="13202" class="Symbol">=</a> <a id="13204" href="Ledger.Conway.Conformance.Equivalence.html#11029" class="Function">getValidCertDepositsC</a> <a id="13226" href="Ledger.Conway.Conformance.Equivalence.html#12705" class="Bound">Γ</a> <a id="13228" href="Ledger.Conway.Conformance.Equivalence.html#12709" class="Bound">s</a> <a id="13230" href="Ledger.Conway.Conformance.Equivalence.html#12713" class="Bound">tx</a> <a id="13233" href="Ledger.Conway.Conformance.Equivalence.html#12729" class="Bound">wf</a> <a id="13236" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13241" href="Ledger.Conway.Conformance.Equivalence.html#12756" class="Bound">certs</a>

      <a id="13254" href="Ledger.Conway.Conformance.Equivalence.html#13254" class="Function">utxow&#39;</a> <a id="13261" class="Symbol">:</a> <a id="13263" class="Symbol">_</a> <a id="13265" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">L.⊢</a> <a id="13269" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="13276" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">⇀⦇</a> <a id="13279" href="Ledger.Conway.Conformance.Equivalence.html#12713" class="Bound">tx</a> <a id="13282" href="Ledger.Conway.Specification.Utxow.html#2851" class="Datatype Operator">,UTXOW⦈</a> <a id="13290" class="Symbol">(</a><a id="13291" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="13303" class="Symbol">(</a><a id="13304" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="13318" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">utxow</a><a id="13323" class="Symbol">)</a> <a id="13325" href="Ledger.Conway.Conformance.Equivalence.html#12996" class="Function">utxoSt&#39;</a><a id="13332" class="Symbol">)</a>
      <a id="13340" href="Ledger.Conway.Conformance.Equivalence.html#13254" class="Function">utxow&#39;</a> <a id="13347" class="Symbol">=</a> <a id="13349" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="13354" href="Ledger.Conway.Conformance.Equivalence.html#13127" class="Function">valid-deps</a> <a id="13365" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="13371" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">utxow</a>

      <a id="13384" href="Ledger.Conway.Conformance.Equivalence.html#13384" class="Function">eqUtxo</a> <a id="13391" class="Symbol">:</a> <a id="13393" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="13405" class="Symbol">(</a><a id="13406" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="13420" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">utxow</a><a id="13425" class="Symbol">)</a> <a id="13427" href="Ledger.Conway.Conformance.Equivalence.html#12996" class="Function">utxoSt&#39;</a> <a id="13435" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13437" href="Ledger.Conway.Conformance.Equivalence.html#12996" class="Function">utxoSt&#39;</a>
      <a id="13451" href="Ledger.Conway.Conformance.Equivalence.html#13384" class="Function">eqUtxo</a> <a id="13458" class="Symbol">=</a> <a id="13460" href="Relation.Binary.PropositionalEquality.Core.html#1481" class="Function">cong</a> <a id="13465" class="Symbol">(λ</a> <a id="13468" href="Ledger.Conway.Conformance.Equivalence.html#13468" class="Bound">•</a> <a id="13470" class="Symbol">→</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{13474}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\htmlId{13478}{\htmlClass{Symbol}{\text{\_}}}\, \\ \,\href{Ledger.Conway.Conformance.Equivalence.html#13468}{\htmlId{13482}{\htmlClass{Bound}{\text{•}}}}\, \\ \,\htmlId{13486}{\htmlClass{Symbol}{\text{\_}}}\, \end{pmatrix}$</a><a id="13489" class="Symbol">)</a> <a id="13491" class="Symbol">(</a><a id="13492" href="Ledger.Conway.Conformance.Equivalence.html#11860" class="Function">lemUtxowDeposits</a> <a id="13509" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13514" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">utxow</a><a id="13519" class="Symbol">)</a>

      <a id="13528" href="Ledger.Conway.Conformance.Equivalence.html#13528" class="Function">ledger&#39;</a> <a id="13536" class="Symbol">:</a> <a id="13538" href="Ledger.Conway.Conformance.Equivalence.html#12705" class="Bound">Γ</a> <a id="13540" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">L.⊢</a> <a id="13544" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13549" href="Ledger.Conway.Conformance.Equivalence.html#12709" class="Bound">s</a> <a id="13551" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">⇀⦇</a> <a id="13554" href="Ledger.Conway.Conformance.Equivalence.html#12713" class="Bound">tx</a> <a id="13557" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">,LEDGER⦈</a> <a id="13566" href="Ledger.Conway.Specification.Ledger.html#1017" class="InductiveConstructor Operator">L.⟦</a> <a id="13570" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#1052" class="Function">setDeposits</a> <a id="13582" class="Symbol">(</a><a id="13583" href="Ledger.Conway.Conformance.Equivalence.Utxo.html#2075" class="Function">utxowDeposits</a> <a id="13597" href="Ledger.Conway.Conformance.Equivalence.html#12750" class="Bound">utxow</a><a id="13602" class="Symbol">)</a> <a id="13604" href="Ledger.Conway.Conformance.Equivalence.html#12996" class="Function">utxoSt&#39;</a>
                                              <a id="13658" href="Ledger.Conway.Specification.Ledger.html#1017" class="InductiveConstructor Operator">,</a> <a id="13660" href="Ledger.Conway.Conformance.Equivalence.html#13014" class="Function">govSt&#39;</a>
                                              <a id="13713" href="Ledger.Conway.Specification.Ledger.html#1017" class="InductiveConstructor Operator">,</a> <a id="13715" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13720" href="Ledger.Conway.Conformance.Equivalence.html#13035" class="Function">certSt&#39;</a> <a id="13728" href="Ledger.Conway.Specification.Ledger.html#1017" class="InductiveConstructor Operator">⟧ˡ</a>
      <a id="13737" href="Ledger.Conway.Conformance.Equivalence.html#13528" class="Function">ledger&#39;</a> <a id="13745" class="Symbol">=</a> <a id="13747" href="Ledger.Conway.Specification.Ledger.html#4468" class="InductiveConstructor">L.LEDGER-V⋯</a> <a id="13759" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="13764" href="Ledger.Conway.Conformance.Equivalence.html#13254" class="Function">utxow&#39;</a> <a id="13771" class="Symbol">(</a><a id="13772" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="13777" href="Ledger.Conway.Conformance.Equivalence.html#12756" class="Bound">certs</a><a id="13782" class="Symbol">)</a> <a id="13784" href="Ledger.Conway.Conformance.Equivalence.html#12762" class="Bound">gov</a>

<a id="13789" class="Keyword">open</a> <a id="13794" href="Relation.Binary.Structures.html#1595" class="Module">IsEquivalence</a> <a id="13808" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13066" class="Function">≡ᵈ-isEquivalence</a> <a id="13825" class="Keyword">renaming</a> <a id="13834" class="Symbol">(</a><a id="13835" href="Relation.Binary.Structures.html#1641" class="Field">refl</a> <a id="13840" class="Symbol">to</a> <a id="13843" class="Field">≡ᵈ-refl</a><a id="13850" class="Symbol">;</a> <a id="13852" href="Relation.Binary.Structures.html#1667" class="Field">sym</a> <a id="13856" class="Symbol">to</a> <a id="13859" class="Field">≡ᵈ-sym</a><a id="13865" class="Symbol">;</a> <a id="13867" href="Relation.Binary.Structures.html#1693" class="Field">trans</a> <a id="13873" class="Symbol">to</a> <a id="13876" class="Field">≡ᵈ-trans</a><a id="13884" class="Symbol">)</a>

<a id="lemCERTS&#39;DepositsC"></a><a id="13887" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="13906" class="Symbol">:</a> <a id="13908" class="Symbol">∀</a> <a id="13910" class="Symbol">{</a><a id="13911" href="Ledger.Conway.Conformance.Equivalence.html#13911" class="Bound">Γ</a> <a id="13913" href="Ledger.Conway.Conformance.Equivalence.html#13913" class="Bound">s</a> <a id="13915" href="Ledger.Conway.Conformance.Equivalence.html#13915" class="Bound">dcerts</a> <a id="13922" href="Ledger.Conway.Conformance.Equivalence.html#13922" class="Bound">s&#39;</a><a id="13924" class="Symbol">}</a> <a id="13926" class="Symbol">(</a><a id="13927" class="Keyword">open</a> <a id="13932" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">C.CertEnv</a> <a id="13942" href="Ledger.Conway.Conformance.Equivalence.html#13911" class="Bound">Γ</a> <a id="13944" class="Keyword">using</a> <a id="13950" class="Symbol">(</a><a id="13951" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="13953" class="Symbol">))</a>
                   <a id="13975" class="Symbol">→</a> <a id="13977" href="Interface.STS.html#1671" class="Function">ReflexiveTransitiveClosure</a> <a id="14004" class="Symbol">{</a><a id="14005" class="Argument">sts</a> <a id="14009" class="Symbol">=</a> <a id="14011" href="Ledger.Conway.Conformance.Certs.html#6475" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="14026" class="Symbol">}</a> <a id="14028" href="Ledger.Conway.Conformance.Equivalence.html#13911" class="Bound">Γ</a> <a id="14030" href="Ledger.Conway.Conformance.Equivalence.html#13913" class="Bound">s</a> <a id="14032" href="Ledger.Conway.Conformance.Equivalence.html#13915" class="Bound">dcerts</a> <a id="14039" href="Ledger.Conway.Conformance.Equivalence.html#13922" class="Bound">s&#39;</a>
                   <a id="14061" class="Symbol">→</a> <a id="14063" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="14077" href="Ledger.Conway.Conformance.Equivalence.html#13922" class="Bound">s&#39;</a> <a id="14080" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14082" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="14084" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="14096" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="14099" href="Ledger.Conway.Conformance.Equivalence.html#13915" class="Bound">dcerts</a> <a id="14106" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="14108" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="14120" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="14123" href="Ledger.Conway.Conformance.Equivalence.html#13915" class="Bound">dcerts</a> <a id="14130" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="14132" class="Symbol">(</a><a id="14133" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="14147" href="Ledger.Conway.Conformance.Equivalence.html#13913" class="Bound">s</a><a id="14148" class="Symbol">)</a>
<a id="14150" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14169" class="Symbol">(</a><a id="14170" href="Interface.STS.html#441" class="InductiveConstructor">BS-base</a> <a id="14178" href="Interface.STS.html#1288" class="InductiveConstructor">Id-nop</a><a id="14184" class="Symbol">)</a>                                  <a id="14219" class="Symbol">=</a> <a id="14221" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="14226" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14245" class="Symbol">(</a><a id="14246" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14253" class="Symbol">(</a><a id="14254" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="14267" class="Symbol">(</a><a id="14268" href="Ledger.Conway.Conformance.Certs.html#4133" class="InductiveConstructor">C.DELEG-delegate</a>   <a id="14287" class="Symbol">_))</a> <a id="14291" href="Ledger.Conway.Conformance.Equivalence.html#14291" class="Bound">rs</a><a id="14293" class="Symbol">)</a> <a id="14295" class="Symbol">=</a> <a id="14297" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14316" href="Ledger.Conway.Conformance.Equivalence.html#14291" class="Bound">rs</a>
<a id="14319" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14338" class="Symbol">(</a><a id="14339" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14346" class="Symbol">(</a><a id="14347" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="14360" class="Symbol">(</a><a id="14361" href="Ledger.Conway.Conformance.Certs.html#4770" class="InductiveConstructor">C.DELEG-dereg</a>      <a id="14380" class="Symbol">_))</a> <a id="14384" href="Ledger.Conway.Conformance.Equivalence.html#14384" class="Bound">rs</a><a id="14386" class="Symbol">)</a> <a id="14388" class="Symbol">=</a> <a id="14390" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14409" href="Ledger.Conway.Conformance.Equivalence.html#14384" class="Bound">rs</a>
<a id="14412" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14431" class="Symbol">(</a><a id="14432" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14439" class="Symbol">(</a><a id="14440" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="14453" class="Symbol">(</a><a id="14454" href="Ledger.Conway.Conformance.Certs.html#5134" class="InductiveConstructor">C.DELEG-reg</a>        <a id="14473" class="Symbol">_))</a> <a id="14477" href="Ledger.Conway.Conformance.Equivalence.html#14477" class="Bound">rs</a><a id="14479" class="Symbol">)</a> <a id="14481" class="Symbol">=</a> <a id="14483" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14502" href="Ledger.Conway.Conformance.Equivalence.html#14477" class="Bound">rs</a>
<a id="14505" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14524" class="Symbol">(</a><a id="14525" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14532" class="Symbol">(</a><a id="14533" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a> <a id="14545" class="Symbol">(</a><a id="14546" href="Ledger.Conway.Conformance.Certs.html#3759" class="InductiveConstructor">C.POOL-regpool</a>      <a id="14566" class="Symbol">_))</a> <a id="14570" href="Ledger.Conway.Conformance.Equivalence.html#14570" class="Bound">rs</a><a id="14572" class="Symbol">)</a> <a id="14574" class="Symbol">=</a> <a id="14576" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14595" href="Ledger.Conway.Conformance.Equivalence.html#14570" class="Bound">rs</a>
<a id="14598" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14617" class="Symbol">(</a><a id="14618" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14625" class="Symbol">(</a><a id="14626" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a> <a id="14638" href="Ledger.Conway.Conformance.Certs.html#3958" class="InductiveConstructor">C.POOL-retirepool</a><a id="14655" class="Symbol">)</a>       <a id="14663" href="Ledger.Conway.Conformance.Equivalence.html#14663" class="Bound">rs</a><a id="14665" class="Symbol">)</a> <a id="14667" class="Symbol">=</a> <a id="14669" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14688" href="Ledger.Conway.Conformance.Equivalence.html#14663" class="Bound">rs</a>
<a id="14691" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14710" class="Symbol">(</a><a id="14711" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14718" class="Symbol">(</a><a id="14719" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="14731" class="Symbol">(</a><a id="14732" href="Ledger.Conway.Conformance.Certs.html#5523" class="InductiveConstructor">C.GOVCERT-regdrep</a>   <a id="14752" class="Symbol">_))</a> <a id="14756" href="Ledger.Conway.Conformance.Equivalence.html#14756" class="Bound">rs</a><a id="14758" class="Symbol">)</a> <a id="14760" class="Symbol">=</a> <a id="14762" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14781" href="Ledger.Conway.Conformance.Equivalence.html#14756" class="Bound">rs</a>
<a id="14784" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14803" class="Symbol">(</a><a id="14804" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14811" class="Symbol">(</a><a id="14812" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="14824" class="Symbol">(</a><a id="14825" href="Ledger.Conway.Conformance.Certs.html#5889" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="14845" class="Symbol">_))</a> <a id="14849" href="Ledger.Conway.Conformance.Equivalence.html#14849" class="Bound">rs</a><a id="14851" class="Symbol">)</a> <a id="14853" class="Symbol">=</a> <a id="14855" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14874" href="Ledger.Conway.Conformance.Equivalence.html#14849" class="Bound">rs</a>
<a id="14877" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14896" class="Symbol">(</a><a id="14897" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="14904" class="Symbol">(</a><a id="14905" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="14917" class="Symbol">(</a><a id="14918" href="Ledger.Conway.Conformance.Certs.html#6184" class="InductiveConstructor">C.GOVCERT-ccreghot</a>  <a id="14938" class="Symbol">_))</a> <a id="14942" href="Ledger.Conway.Conformance.Equivalence.html#14942" class="Bound">rs</a><a id="14944" class="Symbol">)</a> <a id="14946" class="Symbol">=</a> <a id="14948" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="14967" href="Ledger.Conway.Conformance.Equivalence.html#14942" class="Bound">rs</a>

<a id="lemCERTSDepositsC"></a><a id="14971" href="Ledger.Conway.Conformance.Equivalence.html#14971" class="Function">lemCERTSDepositsC</a> <a id="14989" class="Symbol">:</a> <a id="14991" class="Symbol">∀</a> <a id="14993" class="Symbol">{</a><a id="14994" href="Ledger.Conway.Conformance.Equivalence.html#14994" class="Bound">Γ</a> <a id="14996" href="Ledger.Conway.Conformance.Equivalence.html#14996" class="Bound">s</a> <a id="14998" href="Ledger.Conway.Conformance.Equivalence.html#14998" class="Bound">txCerts</a> <a id="15006" href="Ledger.Conway.Conformance.Equivalence.html#15006" class="Bound">s&#39;</a><a id="15008" class="Symbol">}</a> <a id="15010" class="Symbol">(</a><a id="15011" class="Keyword">open</a> <a id="15016" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">C.CertEnv</a> <a id="15026" href="Ledger.Conway.Conformance.Equivalence.html#14994" class="Bound">Γ</a> <a id="15028" class="Keyword">using</a> <a id="15034" class="Symbol">(</a><a id="15035" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="15037" class="Symbol">))</a>
                  <a id="15058" class="Symbol">→</a> <a id="15060" href="Ledger.Conway.Conformance.Equivalence.html#14994" class="Bound">Γ</a> <a id="15062" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">C.⊢</a> <a id="15066" href="Ledger.Conway.Conformance.Equivalence.html#14996" class="Bound">s</a> <a id="15068" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">⇀⦇</a> <a id="15071" href="Ledger.Conway.Conformance.Equivalence.html#14998" class="Bound">txCerts</a> <a id="15079" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">,CERTS⦈</a> <a id="15087" href="Ledger.Conway.Conformance.Equivalence.html#15006" class="Bound">s&#39;</a>
                  <a id="15108" class="Symbol">→</a> <a id="15110" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15124" href="Ledger.Conway.Conformance.Equivalence.html#15006" class="Bound">s&#39;</a> <a id="15127" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15129" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="15131" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="15143" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="15146" href="Ledger.Conway.Conformance.Equivalence.html#14998" class="Bound">txCerts</a> <a id="15154" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="15156" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="15168" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="15171" href="Ledger.Conway.Conformance.Equivalence.html#14998" class="Bound">txCerts</a> <a id="15179" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="15181" class="Symbol">(</a><a id="15182" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15196" href="Ledger.Conway.Conformance.Equivalence.html#14996" class="Bound">s</a><a id="15197" class="Symbol">)</a>
<a id="15199" href="Ledger.Conway.Conformance.Equivalence.html#14971" class="Function">lemCERTSDepositsC</a> <a id="15217" class="Symbol">(</a><a id="15218" href="Interface.STS.html#1458" class="InductiveConstructor">RTC</a> <a id="15222" class="Symbol">(</a><a id="15223" href="Ledger.Conway.Conformance.Certs.html#7197" class="InductiveConstructor">C.CERT-base</a> <a id="15235" class="Symbol">_</a> <a id="15237" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15239" href="Ledger.Conway.Conformance.Equivalence.html#15239" class="Bound">step</a><a id="15243" class="Symbol">))</a> <a id="15246" class="Symbol">=</a> <a id="15248" href="Ledger.Conway.Conformance.Equivalence.html#13887" class="Function">lemCERTS&#39;DepositsC</a> <a id="15267" href="Ledger.Conway.Conformance.Equivalence.html#15239" class="Bound">step</a>

<a id="lemWellformed"></a><a id="15273" href="Ledger.Conway.Conformance.Equivalence.html#15273" class="Function">lemWellformed</a> <a id="15287" class="Symbol">:</a> <a id="15289" class="Symbol">∀</a> <a id="15291" class="Symbol">{</a><a id="15292" href="Ledger.Conway.Conformance.Equivalence.html#15292" class="Bound">Γ</a> <a id="15294" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Bound">s</a> <a id="15296" href="Ledger.Conway.Conformance.Equivalence.html#15296" class="Bound">tx</a> <a id="15299" href="Ledger.Conway.Conformance.Equivalence.html#15299" class="Bound">s&#39;</a><a id="15301" class="Symbol">}</a> <a id="15303" class="Symbol">→</a> <a id="15305" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="15322" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Bound">s</a> <a id="15324" class="Symbol">→</a> <a id="15326" href="Ledger.Conway.Conformance.Equivalence.html#15292" class="Bound">Γ</a> <a id="15328" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="15332" href="Ledger.Conway.Conformance.Equivalence.html#15294" class="Bound">s</a> <a id="15334" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="15337" href="Ledger.Conway.Conformance.Equivalence.html#15296" class="Bound">tx</a> <a id="15340" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="15349" href="Ledger.Conway.Conformance.Equivalence.html#15299" class="Bound">s&#39;</a> <a id="15352" class="Symbol">→</a> <a id="15354" href="Ledger.Conway.Conformance.Equivalence.html#8628" class="Function">WellformedLState</a> <a id="15371" href="Ledger.Conway.Conformance.Equivalence.html#15299" class="Bound">s&#39;</a>
<a id="15374" href="Ledger.Conway.Conformance.Equivalence.html#15273" class="Function">lemWellformed</a> <a id="15388" class="Symbol">{</a><a id="15389" href="Ledger.Conway.Conformance.Equivalence.html#15389" class="Bound">Γ</a><a id="15390" class="Symbol">}</a> <a id="15392" class="Symbol">{</a><a id="15393" class="Argument">s</a> <a id="15395" class="Symbol">=</a> <a id="15397" href="Ledger.Conway.Conformance.Equivalence.html#15397" class="Bound">ls</a><a id="15399" class="Symbol">}</a> <a id="15401" class="Symbol">{</a><a id="15402" href="Ledger.Conway.Conformance.Equivalence.html#15402" class="Bound">tx</a><a id="15404" class="Symbol">}</a> <a id="15406" class="Symbol">{</a><a id="15407" class="Argument">s&#39;</a> <a id="15410" class="Symbol">=</a> <a id="15412" href="Ledger.Conway.Conformance.Equivalence.html#15412" class="Bound">ls&#39;</a><a id="15415" class="Symbol">}</a> <a id="15417" href="Ledger.Conway.Conformance.Equivalence.html#15417" class="Bound">wf</a> <a id="15420" class="Symbol">(</a><a id="15421" href="Ledger.Conway.Conformance.Ledger.html#2178" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="15433" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="15438" href="Ledger.Conway.Conformance.Equivalence.html#15438" class="Bound">utxo</a> <a id="15443" href="Ledger.Conway.Conformance.Equivalence.html#15443" class="Bound">certs</a> <a id="15449" href="Ledger.Conway.Conformance.Equivalence.html#15449" class="Bound">gov</a><a id="15452" class="Symbol">)</a> <a id="15454" class="Symbol">=</a> <a id="15456" href="Ledger.Conway.Conformance.Equivalence.html#16725" class="Function">goal</a>
  <a id="15463" class="Keyword">where</a>
    <a id="15473" class="Keyword">open</a> <a id="15478" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="15487" href="Ledger.Conway.Conformance.Equivalence.html#15397" class="Bound">ls</a>  <a id="15491" class="Keyword">renaming</a> <a id="15500" class="Symbol">(</a><a id="15501" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="15511" class="Symbol">to</a> <a id="15514" class="Field">certSt</a><a id="15520" class="Symbol">)</a>
    <a id="15526" class="Keyword">open</a> <a id="15531" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">C.LState</a> <a id="15540" href="Ledger.Conway.Conformance.Equivalence.html#15412" class="Bound">ls&#39;</a> <a id="15544" class="Keyword">renaming</a> <a id="15553" class="Symbol">(</a><a id="15554" href="Ledger.Conway.Conformance.Ledger.html#834" class="Field">utxoSt</a> <a id="15561" class="Symbol">to</a> <a id="15564" class="Field">utxoSt&#39;</a><a id="15571" class="Symbol">;</a> <a id="15573" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">certState</a> <a id="15583" class="Symbol">to</a> <a id="15586" class="Field">certSt&#39;</a><a id="15593" class="Symbol">)</a>
    <a id="15599" class="Keyword">open</a> <a id="15604" href="Ledger.Conway.Specification.Ledger.html#713" class="Module">L.LEnv</a> <a id="15611" href="Ledger.Conway.Conformance.Equivalence.html#15389" class="Bound">Γ</a> <a id="15613" class="Keyword">using</a> <a id="15619" class="Symbol">(</a><a id="15620" href="Ledger.Conway.Specification.Ledger.html#801" class="Field">pparams</a><a id="15627" class="Symbol">)</a>
    <a id="15633" class="Keyword">open</a> <a id="15638" href="Ledger.Conway.Specification.Transaction.html#2998" class="Module">TxBody</a> <a id="15645" class="Symbol">(</a><a id="15646" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">body</a> <a id="15651" href="Ledger.Conway.Conformance.Equivalence.html#15402" class="Bound">tx</a><a id="15653" class="Symbol">)</a>

    <a id="15660" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a>  <a id="15670" class="Symbol">=</a> <a id="15672" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="15693" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a>
    <a id="15704" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a> <a id="15714" class="Symbol">=</a> <a id="15716" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">L.UTxOState.deposits</a> <a id="15737" href="Ledger.Conway.Conformance.Equivalence.html#15564" class="Function">utxoSt&#39;</a>

    <a id="15750" href="Ledger.Conway.Conformance.Equivalence.html#15750" class="Function">depositsL&#39;</a> <a id="15761" class="Symbol">=</a> <a id="15763" href="Ledger.Conway.Specification.Utxo.html#8112" class="Function">L.updateDeposits</a> <a id="15780" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="15788" class="Symbol">(</a><a id="15789" href="Ledger.Conway.Specification.Transaction.html#4716" class="Field">body</a> <a id="15794" href="Ledger.Conway.Conformance.Equivalence.html#15402" class="Bound">tx</a><a id="15796" class="Symbol">)</a> <a id="15798" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a>

    <a id="15812" href="Ledger.Conway.Conformance.Equivalence.html#15812" class="Function">ddeps</a> <a id="15818" class="Symbol">=</a> <a id="15820" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15834" href="Ledger.Conway.Conformance.Equivalence.html#15514" class="Function">certSt</a> <a id="15841" class="Symbol">.</a><a id="15842" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15852" href="Ledger.Conway.Conformance.Equivalence.html#15852" class="Function">gdeps</a> <a id="15858" class="Symbol">=</a> <a id="15860" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15874" href="Ledger.Conway.Conformance.Equivalence.html#15514" class="Function">certSt</a> <a id="15881" class="Symbol">.</a><a id="15882" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15893" href="Ledger.Conway.Conformance.Equivalence.html#15893" class="Function">ddeps&#39;</a> <a id="15900" class="Symbol">=</a> <a id="15902" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15916" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">certSt&#39;</a> <a id="15924" class="Symbol">.</a><a id="15925" href="Data.Product.Base.html#636" class="Field">proj₁</a>
    <a id="15935" href="Ledger.Conway.Conformance.Equivalence.html#15935" class="Function">gdeps&#39;</a> <a id="15942" class="Symbol">=</a> <a id="15944" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="15958" href="Ledger.Conway.Conformance.Equivalence.html#15586" class="Function">certSt&#39;</a> <a id="15966" class="Symbol">.</a><a id="15967" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="15978" href="Ledger.Conway.Conformance.Equivalence.html#15978" class="Function">lem</a> <a id="15982" class="Symbol">:</a> <a id="15984" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a> <a id="15994" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15996" href="Ledger.Conway.Conformance.Equivalence.html#15750" class="Function">depositsL&#39;</a>
    <a id="16011" href="Ledger.Conway.Conformance.Equivalence.html#15978" class="Function">lem</a> <a id="16015" class="Keyword">rewrite</a> <a id="16023" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="16036" href="Ledger.Conway.Conformance.Equivalence.html#15438" class="Bound">utxo</a> <a id="16041" class="Symbol">=</a> <a id="16043" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="16053" href="Ledger.Conway.Conformance.Equivalence.html#16053" class="Function">lem₁</a> <a id="16058" class="Symbol">:</a> <a id="16060" class="Symbol">(</a><a id="16061" href="Ledger.Conway.Conformance.Equivalence.html#15893" class="Function">ddeps&#39;</a> <a id="16068" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16070" href="Ledger.Conway.Conformance.Equivalence.html#15935" class="Function">gdeps&#39;</a><a id="16076" class="Symbol">)</a> <a id="16078" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="16080" class="Symbol">(</a><a id="16081" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16093" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16101" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16109" href="Ledger.Conway.Conformance.Equivalence.html#15812" class="Function">ddeps</a> <a id="16115" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16117" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16129" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16137" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16145" href="Ledger.Conway.Conformance.Equivalence.html#15852" class="Function">gdeps</a><a id="16150" class="Symbol">)</a>
    <a id="16156" href="Ledger.Conway.Conformance.Equivalence.html#16053" class="Function">lem₁</a> <a id="16161" class="Symbol">=</a> <a id="16163" href="Ledger.Conway.Conformance.Equivalence.html#14971" class="Function">lemCERTSDepositsC</a> <a id="16181" href="Ledger.Conway.Conformance.Equivalence.html#15443" class="Bound">certs</a>

    <a id="16192" href="Ledger.Conway.Conformance.Equivalence.html#16192" class="Function">lem₂</a> <a id="16197" class="Symbol">:</a>  <a id="16200" class="Symbol">(</a><a id="16201" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16213" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16221" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16229" class="Symbol">(</a><a id="16230" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3980" class="Function">certDDeps</a> <a id="16240" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a><a id="16248" class="Symbol">)</a> <a id="16250" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16252" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16264" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16272" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16280" class="Symbol">(</a><a id="16281" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4126" class="Function">certGDeps</a> <a id="16291" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a><a id="16299" class="Symbol">))</a>
         <a id="16311" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="16314" class="Symbol">(</a><a id="16315" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3980" class="Function">certDDeps</a> <a id="16325" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a> <a id="16335" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16337" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4126" class="Function">certGDeps</a> <a id="16347" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a><a id="16356" class="Symbol">)</a>
    <a id="16362" href="Ledger.Conway.Conformance.Equivalence.html#16192" class="Function">lem₂</a> <a id="16367" class="Keyword">rewrite</a> <a id="16375" href="Ledger.Conway.Conformance.Equivalence.html#15978" class="Function">lem</a> <a id="16379" class="Symbol">=</a> <a id="16381" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#18977" class="Function">lem-upd-ddeps</a> <a id="16395" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16403" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a> <a id="16412" href="Ledger.Conway.Conformance.Equivalence.html#15402" class="Bound">tx</a> <a id="16415" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16417" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#19766" class="Function">lem-upd-gdeps</a> <a id="16431" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16439" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a> <a id="16448" href="Ledger.Conway.Conformance.Equivalence.html#15402" class="Bound">tx</a>

    <a id="16456" href="Ledger.Conway.Conformance.Equivalence.html#16456" class="Function">lem₃</a> <a id="16461" class="Symbol">:</a>  <a id="16464" class="Symbol">(</a><a id="16465" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16477" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16485" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16493" href="Ledger.Conway.Conformance.Equivalence.html#15812" class="Function">ddeps</a> <a id="16499" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16501" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16513" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16521" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16529" href="Ledger.Conway.Conformance.Equivalence.html#15852" class="Function">gdeps</a><a id="16534" class="Symbol">)</a>
         <a id="16545" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="16548" class="Symbol">(</a><a id="16549" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16561" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16569" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16577" class="Symbol">(</a><a id="16578" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3980" class="Function">certDDeps</a> <a id="16588" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a><a id="16596" class="Symbol">)</a> <a id="16598" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16600" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16612" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16620" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16628" class="Symbol">(</a><a id="16629" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4126" class="Function">certGDeps</a> <a id="16639" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a><a id="16647" class="Symbol">))</a>
    <a id="16654" href="Ledger.Conway.Conformance.Equivalence.html#16456" class="Function">lem₃</a> <a id="16659" class="Symbol">=</a> <a id="16661" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="16663" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14216" class="Function">cong-updateDDeps</a> <a id="16680" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16688" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="16690" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#15202" class="Function">cong-updateGDeps</a> <a id="16707" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16715" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="16717" href="Ledger.Conway.Conformance.Equivalence.html#15417" class="Bound">wf</a>

    <a id="16725" href="Ledger.Conway.Conformance.Equivalence.html#16725" class="Function">goal</a> <a id="16730" class="Symbol">:</a> <a id="16732" class="Symbol">(</a><a id="16733" href="Ledger.Conway.Conformance.Equivalence.html#15893" class="Function">ddeps&#39;</a> <a id="16740" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16742" href="Ledger.Conway.Conformance.Equivalence.html#15935" class="Function">gdeps&#39;</a><a id="16748" class="Symbol">)</a> <a id="16750" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="16753" class="Symbol">(</a><a id="16754" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3980" class="Function">certDDeps</a> <a id="16764" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a> <a id="16774" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16776" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4126" class="Function">certGDeps</a> <a id="16786" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a><a id="16795" class="Symbol">)</a>
    <a id="16801" href="Ledger.Conway.Conformance.Equivalence.html#16725" class="Function">goal</a> <a id="16806" class="Keyword">with</a> <a id="16811" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> ← <a id="16818" href="Ledger.Conway.Conformance.Equivalence.html#16053" class="Function">lem₁</a> <a id="16823" class="Symbol">=</a> <a id="16825" href="Ledger.Conway.Conformance.Equivalence.html#13876" class="Function">≡ᵈ-trans</a> <a id="16834" class="Symbol">{</a><a id="16835" href="Ledger.Conway.Conformance.Equivalence.html#15893" class="Function">ddeps&#39;</a> <a id="16842" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16844" href="Ledger.Conway.Conformance.Equivalence.html#15935" class="Function">gdeps&#39;</a><a id="16850" class="Symbol">}</a>
                                     <a id="16889" class="Symbol">{</a><a id="16890" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2333" class="Function">updateDDeps</a> <a id="16902" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16910" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16918" class="Symbol">(</a><a id="16919" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3980" class="Function">certDDeps</a> <a id="16929" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a><a id="16937" class="Symbol">)</a> <a id="16939" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="16941" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2784" class="Function">updateGDeps</a> <a id="16953" href="Ledger.Conway.Specification.Ledger.html#801" class="Function">pparams</a> <a id="16961" href="Ledger.Conway.Specification.Transaction.html#3216" class="Function">txCerts</a> <a id="16969" class="Symbol">(</a><a id="16970" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4126" class="Function">certGDeps</a> <a id="16980" href="Ledger.Conway.Conformance.Equivalence.html#15660" class="Function">deposits</a><a id="16988" class="Symbol">)}</a>
                                     <a id="17028" class="Symbol">{</a><a id="17029" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#3980" class="Function">certDDeps</a> <a id="17039" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a> <a id="17049" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17051" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#4126" class="Function">certGDeps</a> <a id="17061" href="Ledger.Conway.Conformance.Equivalence.html#15704" class="Function">deposits&#39;</a><a id="17070" class="Symbol">}</a>
                              <a id="17102" href="Ledger.Conway.Conformance.Equivalence.html#16456" class="Function">lem₃</a>
                              <a id="17137" href="Ledger.Conway.Conformance.Equivalence.html#16192" class="Function">lem₂</a>
<a id="17142" href="Ledger.Conway.Conformance.Equivalence.html#15273" class="Function">lemWellformed</a> <a id="17156" href="Ledger.Conway.Conformance.Equivalence.html#17156" class="Bound">wf</a> <a id="17159" class="Symbol">(</a><a id="17160" href="Ledger.Conway.Conformance.Ledger.html#2231" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="17172" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="17177" href="Ledger.Conway.Conformance.Equivalence.html#17177" class="Bound">utxo</a><a id="17181" class="Symbol">)</a> <a id="17183" class="Keyword">rewrite</a> <a id="17191" href="Ledger.Conway.Conformance.Equivalence.html#2526" class="Function">lemDepositsC</a> <a id="17204" href="Ledger.Conway.Conformance.Equivalence.html#17177" class="Bound">utxo</a> <a id="17209" class="Symbol">=</a> <a id="17211" href="Ledger.Conway.Conformance.Equivalence.html#17156" class="Bound">wf</a>

<a id="setCertDeposits"></a><a id="17215" href="Ledger.Conway.Conformance.Equivalence.html#17215" class="Function">setCertDeposits</a> <a id="17231" class="Symbol">:</a> <a id="17233" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="17244" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17246" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="17257" class="Symbol">→</a> <a id="17259" href="Ledger.Conway.Conformance.Certs.html#951" class="Record">C.CertState</a> <a id="17271" class="Symbol">→</a> <a id="17273" href="Ledger.Conway.Conformance.Certs.html#951" class="Record">C.CertState</a>
<a id="17285" href="Ledger.Conway.Conformance.Equivalence.html#17215" class="Function">setCertDeposits</a> <a id="17301" class="Symbol">(</a><a id="17302" href="Ledger.Conway.Conformance.Equivalence.html#17302" class="Bound">ddeps</a> <a id="17308" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17310" href="Ledger.Conway.Conformance.Equivalence.html#17310" class="Bound">gdeps</a><a id="17315" class="Symbol">)</a> <a id="17317" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Bound">cs</a> <a id="17320" class="Symbol">=</a>
  <a id="17324" class="Keyword">let</a> <a id="17328" class="Keyword">open</a> <a id="17333" href="Ledger.Conway.Conformance.Certs.html#951" class="Module">C.CertState</a> <a id="17345" href="Ledger.Conway.Conformance.Equivalence.html#17317" class="Bound">cs</a> <a id="17348" class="Keyword">in</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{17355}{\htmlClass{Keyword}{\text{record}}}\, \,\href{Ledger.Conway.Conformance.Certs.html#1010}{\htmlId{17362}{\htmlClass{Field}{\text{dState}}}}\, \,\htmlId{17369}{\htmlClass{Symbol}{\text{{}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#751}{\htmlId{17370}{\htmlClass{Field}{\text{deposits}}}}\, \,\htmlId{17379}{\htmlClass{Symbol}{\text{=}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#17302}{\htmlId{17381}{\htmlClass{Bound}{\text{ddeps}}}}\,\,\htmlId{17386}{\htmlClass{Symbol}{\text{}}}}\, \\ \,\href{Ledger.Conway.Conformance.Certs.html#1030}{\htmlId{17390}{\htmlClass{Field}{\text{pState}}}}\, \\ \,\htmlId{17399}{\htmlClass{Keyword}{\text{record}}}\, \,\href{Ledger.Conway.Conformance.Certs.html#1050}{\htmlId{17406}{\htmlClass{Field}{\text{gState}}}}\, \,\htmlId{17413}{\htmlClass{Symbol}{\text{{}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#921}{\htmlId{17414}{\htmlClass{Field}{\text{deposits}}}}\, \,\htmlId{17423}{\htmlClass{Symbol}{\text{=}}}\, \,\href{Ledger.Conway.Conformance.Equivalence.html#17310}{\htmlId{17425}{\htmlClass{Bound}{\text{gdeps}}}}\,\,\htmlId{17430}{\htmlClass{Symbol}{\text{}}}}\, \end{pmatrix}$</a>

<a id="_⊢_⇀⦇_,CERTS&#39;⦈_"></a><a id="17435" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17451" class="Symbol">:</a> <a id="17453" href="Ledger.Conway.Specification.Certs.html#3693" class="Record">C.CertEnv</a> <a id="17463" class="Symbol">→</a> <a id="17465" href="Ledger.Conway.Conformance.Certs.html#951" class="Record">C.CertState</a> <a id="17477" class="Symbol">→</a> <a id="17479" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="17484" href="Ledger.Conway.Specification.Certs.html#2221" class="Datatype">L.DCert</a> <a id="17492" class="Symbol">→</a> <a id="17494" href="Ledger.Conway.Conformance.Certs.html#951" class="Record">C.CertState</a> <a id="17506" class="Symbol">→</a> <a id="17508" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="17513" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">_⊢_⇀⦇_,CERTS&#39;⦈_</a> <a id="17529" class="Symbol">=</a> <a id="17531" href="Interface.STS.html#1671" class="Function">ReflexiveTransitiveClosure</a> <a id="17558" class="Symbol">{</a><a id="17559" class="Argument">sts</a> <a id="17563" class="Symbol">=</a> <a id="17565" href="Ledger.Conway.Conformance.Certs.html#6475" class="Datatype Operator">C._⊢_⇀⦇_,CERT⦈_</a><a id="17580" class="Symbol">}</a>

<a id="updateCDep"></a><a id="17583" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="17594" class="Symbol">:</a> <a id="17596" href="Ledger.Conway.Specification.PParams.html#1685" class="Record">PParams</a> <a id="17604" class="Symbol">→</a> <a id="17606" href="Ledger.Conway.Specification.Certs.html#2221" class="Datatype">L.DCert</a> <a id="17614" class="Symbol">→</a> <a id="17616" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="17627" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17629" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="17640" class="Symbol">→</a> <a id="17642" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a> <a id="17653" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17655" href="Ledger.Conway.Specification.Certs.html#789" class="Function">L.Deposits</a>
<a id="17666" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="17677" href="Ledger.Conway.Conformance.Equivalence.html#17677" class="Bound">pp</a> <a id="17680" href="Ledger.Conway.Conformance.Equivalence.html#17680" class="Bound">cert</a> <a id="17685" class="Symbol">(</a><a id="17686" href="Ledger.Conway.Conformance.Equivalence.html#17686" class="Bound">ddep</a> <a id="17691" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17693" href="Ledger.Conway.Conformance.Equivalence.html#17693" class="Bound">gdep</a><a id="17697" class="Symbol">)</a> <a id="17699" class="Symbol">=</a> <a id="17701" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#1983" class="Function">updateDDep</a> <a id="17712" href="Ledger.Conway.Conformance.Equivalence.html#17677" class="Bound">pp</a> <a id="17715" href="Ledger.Conway.Conformance.Equivalence.html#17680" class="Bound">cert</a> <a id="17720" href="Ledger.Conway.Conformance.Equivalence.html#17686" class="Bound">ddep</a> <a id="17725" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="17727" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#2523" class="Function">updateGDep</a> <a id="17738" href="Ledger.Conway.Conformance.Equivalence.html#17677" class="Bound">pp</a> <a id="17741" href="Ledger.Conway.Conformance.Equivalence.html#17680" class="Bound">cert</a> <a id="17746" href="Ledger.Conway.Conformance.Equivalence.html#17693" class="Bound">gdep</a>

<a id="17752" class="Keyword">opaque</a>
  <a id="castCERTS&#39;"></a><a id="17761" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="17772" class="Symbol">:</a> <a id="17774" class="Symbol">∀</a> <a id="17776" class="Symbol">{</a><a id="17777" href="Ledger.Conway.Conformance.Equivalence.html#17777" class="Bound">Γ</a> <a id="17779" href="Ledger.Conway.Conformance.Equivalence.html#17779" class="Bound">certs</a><a id="17784" class="Symbol">}</a> <a id="17786" class="Symbol">{</a><a id="17787" href="Ledger.Conway.Conformance.Equivalence.html#17787" class="Bound">s</a> <a id="17789" href="Ledger.Conway.Conformance.Equivalence.html#17789" class="Bound">s&#39;</a> <a id="17792" class="Symbol">:</a> <a id="17794" href="Ledger.Conway.Specification.Certs.html#4234" class="Record">L.CertState</a><a id="17805" class="Symbol">}</a> <a id="17807" href="Ledger.Conway.Conformance.Equivalence.html#17807" class="Bound">deps₁</a> <a id="17813" href="Ledger.Conway.Conformance.Equivalence.html#17813" class="Bound">deps₂</a> <a id="17819" href="Ledger.Conway.Conformance.Equivalence.html#17819" class="Bound">deps₁&#39;</a>
             <a id="17839" class="Symbol">→</a> <a id="17841" href="Ledger.Conway.Conformance.Equivalence.html#17807" class="Bound">deps₁</a> <a id="17847" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="17850" href="Ledger.Conway.Conformance.Equivalence.html#17813" class="Bound">deps₂</a>
             <a id="17869" class="Symbol">→</a> <a id="17871" href="Ledger.Conway.Conformance.Equivalence.html#17777" class="Bound">Γ</a> <a id="17873" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">⊢</a> <a id="17875" href="Ledger.Conway.Conformance.Equivalence.html#17807" class="Bound">deps₁</a> <a id="17881" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17887" href="Ledger.Conway.Conformance.Equivalence.html#17787" class="Bound">s</a> <a id="17889" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">⇀⦇</a> <a id="17892" href="Ledger.Conway.Conformance.Equivalence.html#17779" class="Bound">certs</a> <a id="17898" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">,CERTS&#39;⦈</a> <a id="17907" class="Symbol">(</a><a id="17908" href="Ledger.Conway.Conformance.Equivalence.html#17819" class="Bound">deps₁&#39;</a> <a id="17915" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17921" href="Ledger.Conway.Conformance.Equivalence.html#17789" class="Bound">s&#39;</a><a id="17923" class="Symbol">)</a>
             <a id="17938" class="Symbol">→</a> <a id="17940" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="17943" href="Ledger.Conway.Conformance.Equivalence.html#17943" class="Bound">deps₂&#39;</a> <a id="17950" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="17952" href="Ledger.Conway.Conformance.Equivalence.html#17819" class="Bound">deps₁&#39;</a> <a id="17959" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="17962" href="Ledger.Conway.Conformance.Equivalence.html#17943" class="Bound">deps₂&#39;</a> <a id="17969" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="17971" href="Ledger.Conway.Conformance.Equivalence.html#17777" class="Bound">Γ</a> <a id="17973" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">⊢</a> <a id="17975" href="Ledger.Conway.Conformance.Equivalence.html#17813" class="Bound">deps₂</a> <a id="17981" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="17987" href="Ledger.Conway.Conformance.Equivalence.html#17787" class="Bound">s</a> <a id="17989" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">⇀⦇</a> <a id="17992" href="Ledger.Conway.Conformance.Equivalence.html#17779" class="Bound">certs</a> <a id="17998" href="Ledger.Conway.Conformance.Equivalence.html#17435" class="Function Operator">,CERTS&#39;⦈</a> <a id="18007" class="Symbol">(</a><a id="18008" href="Ledger.Conway.Conformance.Equivalence.html#17943" class="Bound">deps₂&#39;</a> <a id="18015" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="18021" href="Ledger.Conway.Conformance.Equivalence.html#17789" class="Bound">s&#39;</a><a id="18023" class="Symbol">)</a>
  <a id="18027" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="18038" href="Ledger.Conway.Conformance.Equivalence.html#18038" class="Bound">deps₁</a> <a id="18044" href="Ledger.Conway.Conformance.Equivalence.html#18044" class="Bound">deps₂</a> <a id="18050" href="Ledger.Conway.Conformance.Equivalence.html#18050" class="Bound">deps₁&#39;</a> <a id="18057" href="Ledger.Conway.Conformance.Equivalence.html#18057" class="Bound">eqd</a> <a id="18061" class="Symbol">(</a><a id="18062" href="Interface.STS.html#441" class="InductiveConstructor">BS-base</a> <a id="18070" href="Interface.STS.html#1288" class="InductiveConstructor">Id-nop</a><a id="18076" class="Symbol">)</a> <a id="18078" class="Symbol">=</a> <a id="18080" href="Ledger.Conway.Conformance.Equivalence.html#18044" class="Bound">deps₂</a> <a id="18086" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18088" href="Ledger.Conway.Conformance.Equivalence.html#18057" class="Bound">eqd</a> <a id="18092" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18094" href="Interface.STS.html#441" class="InductiveConstructor">BS-base</a> <a id="18102" href="Interface.STS.html#1288" class="InductiveConstructor">Id-nop</a>
  <a id="18111" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="18122" class="Symbol">{</a><a id="18123" href="Ledger.Conway.Conformance.Equivalence.html#18123" class="Bound">Γ</a><a id="18124" class="Symbol">}</a> <a id="18126" href="Ledger.Conway.Conformance.Equivalence.html#18126" class="Bound">deps₁</a> <a id="18132" href="Ledger.Conway.Conformance.Equivalence.html#18132" class="Bound">deps₂</a> <a id="18138" href="Ledger.Conway.Conformance.Equivalence.html#18138" class="Bound">deps₁&#39;</a> <a id="18145" href="Ledger.Conway.Conformance.Equivalence.html#18145" class="Bound">eqd</a> <a id="18149" class="Symbol">(</a><a id="18150" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="18157" class="Symbol">(</a><a id="18158" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="18171" class="Symbol">{</a><a id="18172" class="Argument">dCert</a> <a id="18178" class="Symbol">=</a> <a id="18180" href="Ledger.Conway.Conformance.Equivalence.html#18180" class="Bound">cert</a><a id="18184" class="Symbol">}</a> <a id="18186" class="Symbol">(</a><a id="18187" href="Ledger.Conway.Conformance.Certs.html#4133" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18204" href="Ledger.Conway.Conformance.Equivalence.html#18204" class="Bound">h</a><a id="18205" class="Symbol">))</a>    <a id="18211" href="Ledger.Conway.Conformance.Equivalence.html#18211" class="Bound">rs</a><a id="18213" class="Symbol">)</a> <a id="18215" class="Symbol">=</a>
    <a id="18221" class="Keyword">let</a> <a id="18225" class="Keyword">open</a> <a id="18230" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">C.CertEnv</a> <a id="18240" href="Ledger.Conway.Conformance.Equivalence.html#18123" class="Bound">Γ</a> <a id="18242" class="Keyword">using</a> <a id="18248" class="Symbol">(</a><a id="18249" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="18251" class="Symbol">)</a>
        <a id="18261" href="Ledger.Conway.Conformance.Equivalence.html#18261" class="Bound">deps₂&#39;</a> <a id="18268" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18270" href="Ledger.Conway.Conformance.Equivalence.html#18270" class="Bound">eqd&#39;</a> <a id="18275" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18277" href="Ledger.Conway.Conformance.Equivalence.html#18277" class="Bound">rs&#39;</a> <a id="18281" class="Symbol">=</a> <a id="18283" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="18294" class="Symbol">(</a><a id="18295" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="18306" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="18309" href="Ledger.Conway.Conformance.Equivalence.html#18180" class="Bound">cert</a> <a id="18314" href="Ledger.Conway.Conformance.Equivalence.html#18126" class="Bound">deps₁</a><a id="18319" class="Symbol">)</a> <a id="18321" class="Symbol">(</a><a id="18322" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="18333" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="18336" href="Ledger.Conway.Conformance.Equivalence.html#18180" class="Bound">cert</a> <a id="18341" href="Ledger.Conway.Conformance.Equivalence.html#18132" class="Bound">deps₂</a><a id="18346" class="Symbol">)</a> <a id="18348" href="Ledger.Conway.Conformance.Equivalence.html#18138" class="Bound">deps₁&#39;</a>
                                         <a id="18396" class="Symbol">(</a><a id="18397" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="18399" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13468" class="Function">cong-updateDDep</a> <a id="18415" class="Symbol">{</a><a id="18416" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="18418" class="Symbol">}</a> <a id="18420" href="Ledger.Conway.Conformance.Equivalence.html#18180" class="Bound">cert</a> <a id="18425" class="Symbol">{</a><a id="18426" href="Ledger.Conway.Conformance.Equivalence.html#18126" class="Bound">deps₁</a> <a id="18432" class="Symbol">.</a><a id="18433" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18438" class="Symbol">}</a> <a id="18440" class="Symbol">{</a><a id="18441" href="Ledger.Conway.Conformance.Equivalence.html#18132" class="Bound">deps₂</a> <a id="18447" class="Symbol">.</a><a id="18448" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18453" class="Symbol">}</a>
                                          <a id="18497" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="18499" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14499" class="Function">cong-updateGDep</a> <a id="18515" class="Symbol">{</a><a id="18516" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="18518" class="Symbol">}</a> <a id="18520" href="Ledger.Conway.Conformance.Equivalence.html#18180" class="Bound">cert</a> <a id="18525" class="Symbol">{</a><a id="18526" href="Ledger.Conway.Conformance.Equivalence.html#18126" class="Bound">deps₁</a> <a id="18532" class="Symbol">.</a><a id="18533" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18538" class="Symbol">}</a> <a id="18540" class="Symbol">{</a><a id="18541" href="Ledger.Conway.Conformance.Equivalence.html#18132" class="Bound">deps₂</a> <a id="18547" class="Symbol">.</a><a id="18548" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="18553" class="Symbol">}</a> <a id="18555" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="18557" href="Ledger.Conway.Conformance.Equivalence.html#18145" class="Bound">eqd</a><a id="18560" class="Symbol">)</a> <a id="18562" href="Ledger.Conway.Conformance.Equivalence.html#18211" class="Bound">rs</a>
    <a id="18569" class="Keyword">in</a>  <a id="18573" href="Ledger.Conway.Conformance.Equivalence.html#18261" class="Bound">deps₂&#39;</a> <a id="18580" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18582" href="Ledger.Conway.Conformance.Equivalence.html#18270" class="Bound">eqd&#39;</a> <a id="18587" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18589" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="18596" class="Symbol">(</a><a id="18597" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="18610" class="Symbol">(</a><a id="18611" href="Ledger.Conway.Conformance.Certs.html#4133" class="InductiveConstructor">C.DELEG-delegate</a> <a id="18628" href="Ledger.Conway.Conformance.Equivalence.html#18204" class="Bound">h</a><a id="18629" class="Symbol">))</a> <a id="18632" href="Ledger.Conway.Conformance.Equivalence.html#18277" class="Bound">rs&#39;</a>
  <a id="18638" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="18649" class="Symbol">{</a><a id="18650" href="Ledger.Conway.Conformance.Equivalence.html#18650" class="Bound">Γ</a><a id="18651" class="Symbol">}</a> <a id="18653" href="Ledger.Conway.Conformance.Equivalence.html#18653" class="Bound">deps₁</a> <a id="18659" href="Ledger.Conway.Conformance.Equivalence.html#18659" class="Bound">deps₂</a> <a id="18665" href="Ledger.Conway.Conformance.Equivalence.html#18665" class="Bound">deps₁&#39;</a> <a id="18672" href="Ledger.Conway.Conformance.Equivalence.html#18672" class="Bound">eqd</a> <a id="18676" class="Symbol">(</a><a id="18677" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="18684" class="Symbol">(</a><a id="18685" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="18698" class="Symbol">{</a><a id="18699" class="Argument">dCert</a> <a id="18705" class="Symbol">=</a> <a id="18707" href="Ledger.Conway.Conformance.Equivalence.html#18707" class="Bound">cert</a><a id="18711" class="Symbol">}</a> <a id="18713" class="Symbol">(</a><a id="18714" href="Ledger.Conway.Conformance.Certs.html#4770" class="InductiveConstructor">C.DELEG-dereg</a> <a id="18728" class="Symbol">(</a><a id="18729" href="Ledger.Conway.Conformance.Equivalence.html#18729" class="Bound">a</a> <a id="18731" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18733" href="Ledger.Conway.Conformance.Equivalence.html#18733" class="Bound">b</a> <a id="18735" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18737" href="Ledger.Conway.Conformance.Equivalence.html#18737" class="Bound">c</a><a id="18738" class="Symbol">)))</a> <a id="18742" href="Ledger.Conway.Conformance.Equivalence.html#18742" class="Bound">rs</a><a id="18744" class="Symbol">)</a> <a id="18746" class="Symbol">=</a>
    <a id="18752" class="Keyword">let</a> <a id="18756" class="Keyword">open</a> <a id="18761" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">C.CertEnv</a> <a id="18771" href="Ledger.Conway.Conformance.Equivalence.html#18650" class="Bound">Γ</a> <a id="18773" class="Keyword">using</a> <a id="18779" class="Symbol">(</a><a id="18780" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="18782" class="Symbol">)</a>
        <a id="18792" href="Ledger.Conway.Conformance.Equivalence.html#18792" class="Bound">deps₂&#39;</a> <a id="18799" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18801" href="Ledger.Conway.Conformance.Equivalence.html#18801" class="Bound">eqd&#39;</a> <a id="18806" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="18808" href="Ledger.Conway.Conformance.Equivalence.html#18808" class="Bound">rs&#39;</a> <a id="18812" class="Symbol">=</a> <a id="18814" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="18825" class="Symbol">(</a><a id="18826" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="18837" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="18840" href="Ledger.Conway.Conformance.Equivalence.html#18707" class="Bound">cert</a> <a id="18845" href="Ledger.Conway.Conformance.Equivalence.html#18653" class="Bound">deps₁</a><a id="18850" class="Symbol">)</a> <a id="18852" class="Symbol">(</a><a id="18853" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="18864" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="18867" href="Ledger.Conway.Conformance.Equivalence.html#18707" class="Bound">cert</a> <a id="18872" href="Ledger.Conway.Conformance.Equivalence.html#18659" class="Bound">deps₂</a><a id="18877" class="Symbol">)</a> <a id="18879" href="Ledger.Conway.Conformance.Equivalence.html#18665" class="Bound">deps₁&#39;</a>
                                         <a id="18927" class="Symbol">(</a><a id="18928" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="18930" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13468" class="Function">cong-updateDDep</a> <a id="18946" class="Symbol">{</a><a id="18947" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="18949" class="Symbol">}</a> <a id="18951" href="Ledger.Conway.Conformance.Equivalence.html#18707" class="Bound">cert</a> <a id="18956" class="Symbol">{</a><a id="18957" href="Ledger.Conway.Conformance.Equivalence.html#18653" class="Bound">deps₁</a> <a id="18963" class="Symbol">.</a><a id="18964" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18969" class="Symbol">}</a> <a id="18971" class="Symbol">{</a><a id="18972" href="Ledger.Conway.Conformance.Equivalence.html#18659" class="Bound">deps₂</a> <a id="18978" class="Symbol">.</a><a id="18979" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="18984" class="Symbol">}</a>
                                          <a id="19028" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="19030" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14499" class="Function">cong-updateGDep</a> <a id="19046" class="Symbol">{</a><a id="19047" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="19049" class="Symbol">}</a> <a id="19051" href="Ledger.Conway.Conformance.Equivalence.html#18707" class="Bound">cert</a> <a id="19056" class="Symbol">{</a><a id="19057" href="Ledger.Conway.Conformance.Equivalence.html#18653" class="Bound">deps₁</a> <a id="19063" class="Symbol">.</a><a id="19064" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19069" class="Symbol">}</a> <a id="19071" class="Symbol">{</a><a id="19072" href="Ledger.Conway.Conformance.Equivalence.html#18659" class="Bound">deps₂</a> <a id="19078" class="Symbol">.</a><a id="19079" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19084" class="Symbol">}</a> <a id="19086" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="19088" href="Ledger.Conway.Conformance.Equivalence.html#18672" class="Bound">eqd</a><a id="19091" class="Symbol">)</a> <a id="19093" href="Ledger.Conway.Conformance.Equivalence.html#18742" class="Bound">rs</a>
    <a id="19100" class="Keyword">in</a>  <a id="19104" href="Ledger.Conway.Conformance.Equivalence.html#18792" class="Bound">deps₂&#39;</a> <a id="19111" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19113" href="Ledger.Conway.Conformance.Equivalence.html#18801" class="Bound">eqd&#39;</a> <a id="19118" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19120" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="19127" class="Symbol">(</a><a id="19128" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="19141" class="Symbol">(</a><a id="19142" href="Ledger.Conway.Conformance.Certs.html#4770" class="InductiveConstructor">C.DELEG-dereg</a> <a id="19156" class="Symbol">(</a><a id="19157" href="Ledger.Conway.Conformance.Equivalence.html#18729" class="Bound">a</a> <a id="19159" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19161" href="Ledger.Conway.Conformance.Equivalence.html#18672" class="Bound">eqd</a> <a id="19165" class="Symbol">.</a><a id="19166" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19172" class="Symbol">.</a><a id="19173" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="19179" href="Ledger.Conway.Conformance.Equivalence.html#18733" class="Bound">b</a> <a id="19181" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19183" href="Ledger.Conway.Conformance.Equivalence.html#18737" class="Bound">c</a><a id="19184" class="Symbol">)))</a> <a id="19188" href="Ledger.Conway.Conformance.Equivalence.html#18808" class="Bound">rs&#39;</a>
                                                              <a id="19254" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="19291" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="19302" class="Symbol">{</a><a id="19303" href="Ledger.Conway.Conformance.Equivalence.html#19303" class="Bound">Γ</a><a id="19304" class="Symbol">}</a> <a id="19306" href="Ledger.Conway.Conformance.Equivalence.html#19306" class="Bound">deps₁</a> <a id="19312" href="Ledger.Conway.Conformance.Equivalence.html#19312" class="Bound">deps₂</a> <a id="19318" href="Ledger.Conway.Conformance.Equivalence.html#19318" class="Bound">deps₁&#39;</a> <a id="19325" href="Ledger.Conway.Conformance.Equivalence.html#19325" class="Bound">eqd</a> <a id="19329" class="Symbol">(</a><a id="19330" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="19337" class="Symbol">(</a><a id="19338" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="19351" class="Symbol">{</a><a id="19352" class="Argument">dCert</a> <a id="19358" class="Symbol">=</a> <a id="19360" href="Ledger.Conway.Conformance.Equivalence.html#19360" class="Bound">cert</a><a id="19364" class="Symbol">}</a> <a id="19366" class="Symbol">(</a><a id="19367" href="Ledger.Conway.Conformance.Certs.html#5134" class="InductiveConstructor">C.DELEG-reg</a> <a id="19379" href="Ledger.Conway.Conformance.Equivalence.html#19379" class="Bound">h</a><a id="19380" class="Symbol">))</a>         <a id="19391" href="Ledger.Conway.Conformance.Equivalence.html#19391" class="Bound">rs</a><a id="19393" class="Symbol">)</a> <a id="19395" class="Symbol">=</a>
    <a id="19401" class="Keyword">let</a> <a id="19405" class="Keyword">open</a> <a id="19410" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">C.CertEnv</a> <a id="19420" href="Ledger.Conway.Conformance.Equivalence.html#19303" class="Bound">Γ</a> <a id="19422" class="Keyword">using</a> <a id="19428" class="Symbol">(</a><a id="19429" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="19431" class="Symbol">)</a>
        <a id="19441" href="Ledger.Conway.Conformance.Equivalence.html#19441" class="Bound">deps₂&#39;</a> <a id="19448" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19450" href="Ledger.Conway.Conformance.Equivalence.html#19450" class="Bound">eqd&#39;</a> <a id="19455" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19457" href="Ledger.Conway.Conformance.Equivalence.html#19457" class="Bound">rs&#39;</a> <a id="19461" class="Symbol">=</a> <a id="19463" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="19474" class="Symbol">(</a><a id="19475" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="19486" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="19489" href="Ledger.Conway.Conformance.Equivalence.html#19360" class="Bound">cert</a> <a id="19494" href="Ledger.Conway.Conformance.Equivalence.html#19306" class="Bound">deps₁</a><a id="19499" class="Symbol">)</a> <a id="19501" class="Symbol">(</a><a id="19502" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="19513" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="19516" href="Ledger.Conway.Conformance.Equivalence.html#19360" class="Bound">cert</a> <a id="19521" href="Ledger.Conway.Conformance.Equivalence.html#19312" class="Bound">deps₂</a><a id="19526" class="Symbol">)</a> <a id="19528" href="Ledger.Conway.Conformance.Equivalence.html#19318" class="Bound">deps₁&#39;</a>
                                         <a id="19576" class="Symbol">(</a><a id="19577" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="19579" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13468" class="Function">cong-updateDDep</a> <a id="19595" class="Symbol">{</a><a id="19596" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="19598" class="Symbol">}</a> <a id="19600" href="Ledger.Conway.Conformance.Equivalence.html#19360" class="Bound">cert</a> <a id="19605" class="Symbol">{</a><a id="19606" href="Ledger.Conway.Conformance.Equivalence.html#19306" class="Bound">deps₁</a> <a id="19612" class="Symbol">.</a><a id="19613" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19618" class="Symbol">}</a> <a id="19620" class="Symbol">{</a><a id="19621" href="Ledger.Conway.Conformance.Equivalence.html#19312" class="Bound">deps₂</a> <a id="19627" class="Symbol">.</a><a id="19628" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="19633" class="Symbol">}</a>
                                          <a id="19677" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="19679" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14499" class="Function">cong-updateGDep</a> <a id="19695" class="Symbol">{</a><a id="19696" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="19698" class="Symbol">}</a> <a id="19700" href="Ledger.Conway.Conformance.Equivalence.html#19360" class="Bound">cert</a> <a id="19705" class="Symbol">{</a><a id="19706" href="Ledger.Conway.Conformance.Equivalence.html#19306" class="Bound">deps₁</a> <a id="19712" class="Symbol">.</a><a id="19713" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19718" class="Symbol">}</a> <a id="19720" class="Symbol">{</a><a id="19721" href="Ledger.Conway.Conformance.Equivalence.html#19312" class="Bound">deps₂</a> <a id="19727" class="Symbol">.</a><a id="19728" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="19733" class="Symbol">}</a> <a id="19735" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="19737" href="Ledger.Conway.Conformance.Equivalence.html#19325" class="Bound">eqd</a><a id="19740" class="Symbol">)</a> <a id="19742" href="Ledger.Conway.Conformance.Equivalence.html#19391" class="Bound">rs</a>
    <a id="19749" class="Keyword">in</a>  <a id="19753" href="Ledger.Conway.Conformance.Equivalence.html#19441" class="Bound">deps₂&#39;</a> <a id="19760" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19762" href="Ledger.Conway.Conformance.Equivalence.html#19450" class="Bound">eqd&#39;</a> <a id="19767" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19769" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="19776" class="Symbol">(</a><a id="19777" href="Ledger.Conway.Conformance.Certs.html#6546" class="InductiveConstructor">C.CERT-deleg</a> <a id="19790" class="Symbol">(</a><a id="19791" href="Ledger.Conway.Conformance.Certs.html#5134" class="InductiveConstructor">C.DELEG-reg</a> <a id="19803" href="Ledger.Conway.Conformance.Equivalence.html#19379" class="Bound">h</a><a id="19804" class="Symbol">))</a> <a id="19807" href="Ledger.Conway.Conformance.Equivalence.html#19457" class="Bound">rs&#39;</a>
  <a id="19813" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="19824" class="Symbol">{</a><a id="19825" href="Ledger.Conway.Conformance.Equivalence.html#19825" class="Bound">Γ</a><a id="19826" class="Symbol">}</a> <a id="19828" href="Ledger.Conway.Conformance.Equivalence.html#19828" class="Bound">deps₁</a> <a id="19834" href="Ledger.Conway.Conformance.Equivalence.html#19834" class="Bound">deps₂</a> <a id="19840" href="Ledger.Conway.Conformance.Equivalence.html#19840" class="Bound">deps₁&#39;</a> <a id="19847" href="Ledger.Conway.Conformance.Equivalence.html#19847" class="Bound">eqd</a> <a id="19851" class="Symbol">(</a><a id="19852" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="19859" class="Symbol">(</a><a id="19860" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a>  <a id="19873" class="Symbol">{</a><a id="19874" class="Argument">dCert</a> <a id="19880" class="Symbol">=</a> <a id="19882" href="Ledger.Conway.Conformance.Equivalence.html#19882" class="Bound">cert</a><a id="19886" class="Symbol">}</a> <a id="19888" class="Symbol">(</a><a id="19889" href="Ledger.Conway.Conformance.Certs.html#3759" class="InductiveConstructor">C.POOL-regpool</a> <a id="19904" href="Ledger.Conway.Conformance.Equivalence.html#19904" class="Bound">h</a><a id="19905" class="Symbol">))</a>      <a id="19913" href="Ledger.Conway.Conformance.Equivalence.html#19913" class="Bound">rs</a><a id="19915" class="Symbol">)</a> <a id="19917" class="Symbol">=</a>
    <a id="19923" class="Keyword">let</a> <a id="19927" href="Ledger.Conway.Conformance.Equivalence.html#19927" class="Bound">deps₂&#39;</a> <a id="19934" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19936" href="Ledger.Conway.Conformance.Equivalence.html#19936" class="Bound">eqd&#39;</a> <a id="19941" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="19943" href="Ledger.Conway.Conformance.Equivalence.html#19943" class="Bound">rs&#39;</a> <a id="19947" class="Symbol">=</a> <a id="19949" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="19960" href="Ledger.Conway.Conformance.Equivalence.html#19828" class="Bound">deps₁</a> <a id="19966" href="Ledger.Conway.Conformance.Equivalence.html#19834" class="Bound">deps₂</a> <a id="19972" href="Ledger.Conway.Conformance.Equivalence.html#19840" class="Bound">deps₁&#39;</a> <a id="19979" href="Ledger.Conway.Conformance.Equivalence.html#19847" class="Bound">eqd</a> <a id="19983" href="Ledger.Conway.Conformance.Equivalence.html#19913" class="Bound">rs</a>
    <a id="19990" class="Keyword">in</a>  <a id="19994" href="Ledger.Conway.Conformance.Equivalence.html#19927" class="Bound">deps₂&#39;</a> <a id="20001" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20003" href="Ledger.Conway.Conformance.Equivalence.html#19936" class="Bound">eqd&#39;</a> <a id="20008" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20010" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="20017" class="Symbol">(</a><a id="20018" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a> <a id="20030" class="Symbol">(</a><a id="20031" href="Ledger.Conway.Conformance.Certs.html#3759" class="InductiveConstructor">C.POOL-regpool</a> <a id="20046" href="Ledger.Conway.Conformance.Equivalence.html#19904" class="Bound">h</a><a id="20047" class="Symbol">))</a> <a id="20050" href="Ledger.Conway.Conformance.Equivalence.html#19943" class="Bound">rs&#39;</a>
  <a id="20056" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="20067" class="Symbol">{</a><a id="20068" href="Ledger.Conway.Conformance.Equivalence.html#20068" class="Bound">Γ</a><a id="20069" class="Symbol">}</a> <a id="20071" href="Ledger.Conway.Conformance.Equivalence.html#20071" class="Bound">deps₁</a> <a id="20077" href="Ledger.Conway.Conformance.Equivalence.html#20077" class="Bound">deps₂</a> <a id="20083" href="Ledger.Conway.Conformance.Equivalence.html#20083" class="Bound">deps₁&#39;</a> <a id="20090" href="Ledger.Conway.Conformance.Equivalence.html#20090" class="Bound">eqd</a> <a id="20094" class="Symbol">(</a><a id="20095" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="20102" class="Symbol">(</a><a id="20103" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a>  <a id="20116" class="Symbol">{</a><a id="20117" class="Argument">dCert</a> <a id="20123" class="Symbol">=</a> <a id="20125" href="Ledger.Conway.Conformance.Equivalence.html#20125" class="Bound">cert</a><a id="20129" class="Symbol">}</a> <a id="20131" href="Ledger.Conway.Conformance.Certs.html#3958" class="InductiveConstructor">C.POOL-retirepool</a><a id="20148" class="Symbol">)</a>       <a id="20156" href="Ledger.Conway.Conformance.Equivalence.html#20156" class="Bound">rs</a><a id="20158" class="Symbol">)</a> <a id="20160" class="Symbol">=</a>
    <a id="20166" class="Keyword">let</a> <a id="20170" href="Ledger.Conway.Conformance.Equivalence.html#20170" class="Bound">deps₂&#39;</a> <a id="20177" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20179" href="Ledger.Conway.Conformance.Equivalence.html#20179" class="Bound">eqd&#39;</a> <a id="20184" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20186" href="Ledger.Conway.Conformance.Equivalence.html#20186" class="Bound">rs&#39;</a> <a id="20190" class="Symbol">=</a> <a id="20192" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="20203" href="Ledger.Conway.Conformance.Equivalence.html#20071" class="Bound">deps₁</a> <a id="20209" href="Ledger.Conway.Conformance.Equivalence.html#20077" class="Bound">deps₂</a> <a id="20215" href="Ledger.Conway.Conformance.Equivalence.html#20083" class="Bound">deps₁&#39;</a> <a id="20222" href="Ledger.Conway.Conformance.Equivalence.html#20090" class="Bound">eqd</a> <a id="20226" href="Ledger.Conway.Conformance.Equivalence.html#20156" class="Bound">rs</a>
    <a id="20233" class="Keyword">in</a>  <a id="20237" href="Ledger.Conway.Conformance.Equivalence.html#20170" class="Bound">deps₂&#39;</a> <a id="20244" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20246" href="Ledger.Conway.Conformance.Equivalence.html#20179" class="Bound">eqd&#39;</a> <a id="20251" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20253" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="20260" class="Symbol">(</a><a id="20261" href="Ledger.Conway.Conformance.Certs.html#6780" class="InductiveConstructor">C.CERT-pool</a> <a id="20273" href="Ledger.Conway.Conformance.Certs.html#3958" class="InductiveConstructor">C.POOL-retirepool</a><a id="20290" class="Symbol">)</a> <a id="20292" href="Ledger.Conway.Conformance.Equivalence.html#20186" class="Bound">rs&#39;</a>
  <a id="20298" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="20309" class="Symbol">{</a><a id="20310" href="Ledger.Conway.Conformance.Equivalence.html#20310" class="Bound">Γ</a><a id="20311" class="Symbol">}</a> <a id="20313" href="Ledger.Conway.Conformance.Equivalence.html#20313" class="Bound">deps₁</a> <a id="20319" href="Ledger.Conway.Conformance.Equivalence.html#20319" class="Bound">deps₂</a> <a id="20325" href="Ledger.Conway.Conformance.Equivalence.html#20325" class="Bound">deps₁&#39;</a> <a id="20332" href="Ledger.Conway.Conformance.Equivalence.html#20332" class="Bound">eqd</a> <a id="20336" class="Symbol">(</a><a id="20337" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="20344" class="Symbol">(</a><a id="20345" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20358" class="Symbol">{</a><a id="20359" class="Argument">dCert</a> <a id="20365" class="Symbol">=</a> <a id="20367" href="Ledger.Conway.Conformance.Equivalence.html#20367" class="Bound">cert</a><a id="20371" class="Symbol">}</a> <a id="20373" class="Symbol">(</a><a id="20374" href="Ledger.Conway.Conformance.Certs.html#5523" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20392" href="Ledger.Conway.Conformance.Equivalence.html#20392" class="Bound">h</a><a id="20393" class="Symbol">))</a>   <a id="20398" href="Ledger.Conway.Conformance.Equivalence.html#20398" class="Bound">rs</a><a id="20400" class="Symbol">)</a> <a id="20402" class="Symbol">=</a>
    <a id="20408" class="Keyword">let</a> <a id="20412" class="Keyword">open</a> <a id="20417" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">C.CertEnv</a> <a id="20427" href="Ledger.Conway.Conformance.Equivalence.html#20310" class="Bound">Γ</a> <a id="20429" class="Keyword">using</a> <a id="20435" class="Symbol">(</a><a id="20436" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="20438" class="Symbol">)</a>
        <a id="20448" href="Ledger.Conway.Conformance.Equivalence.html#20448" class="Bound">deps₂&#39;</a> <a id="20455" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20457" href="Ledger.Conway.Conformance.Equivalence.html#20457" class="Bound">eqd&#39;</a> <a id="20462" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20464" href="Ledger.Conway.Conformance.Equivalence.html#20464" class="Bound">rs&#39;</a> <a id="20468" class="Symbol">=</a> <a id="20470" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="20481" class="Symbol">(</a><a id="20482" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="20493" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="20496" href="Ledger.Conway.Conformance.Equivalence.html#20367" class="Bound">cert</a> <a id="20501" href="Ledger.Conway.Conformance.Equivalence.html#20313" class="Bound">deps₁</a><a id="20506" class="Symbol">)</a> <a id="20508" class="Symbol">(</a><a id="20509" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="20520" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="20523" href="Ledger.Conway.Conformance.Equivalence.html#20367" class="Bound">cert</a> <a id="20528" href="Ledger.Conway.Conformance.Equivalence.html#20319" class="Bound">deps₂</a><a id="20533" class="Symbol">)</a> <a id="20535" href="Ledger.Conway.Conformance.Equivalence.html#20325" class="Bound">deps₁&#39;</a>
                                         <a id="20583" class="Symbol">(</a><a id="20584" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="20586" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13468" class="Function">cong-updateDDep</a> <a id="20602" class="Symbol">{</a><a id="20603" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="20605" class="Symbol">}</a> <a id="20607" href="Ledger.Conway.Conformance.Equivalence.html#20367" class="Bound">cert</a> <a id="20612" class="Symbol">{</a><a id="20613" href="Ledger.Conway.Conformance.Equivalence.html#20313" class="Bound">deps₁</a> <a id="20619" class="Symbol">.</a><a id="20620" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20625" class="Symbol">}</a> <a id="20627" class="Symbol">{</a><a id="20628" href="Ledger.Conway.Conformance.Equivalence.html#20319" class="Bound">deps₂</a> <a id="20634" class="Symbol">.</a><a id="20635" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="20640" class="Symbol">}</a>
                                          <a id="20684" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="20686" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14499" class="Function">cong-updateGDep</a> <a id="20702" class="Symbol">{</a><a id="20703" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="20705" class="Symbol">}</a> <a id="20707" href="Ledger.Conway.Conformance.Equivalence.html#20367" class="Bound">cert</a> <a id="20712" class="Symbol">{</a><a id="20713" href="Ledger.Conway.Conformance.Equivalence.html#20313" class="Bound">deps₁</a> <a id="20719" class="Symbol">.</a><a id="20720" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20725" class="Symbol">}</a> <a id="20727" class="Symbol">{</a><a id="20728" href="Ledger.Conway.Conformance.Equivalence.html#20319" class="Bound">deps₂</a> <a id="20734" class="Symbol">.</a><a id="20735" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="20740" class="Symbol">}</a> <a id="20742" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="20744" href="Ledger.Conway.Conformance.Equivalence.html#20332" class="Bound">eqd</a><a id="20747" class="Symbol">)</a> <a id="20749" href="Ledger.Conway.Conformance.Equivalence.html#20398" class="Bound">rs</a>
    <a id="20756" class="Keyword">in</a>  <a id="20760" href="Ledger.Conway.Conformance.Equivalence.html#20448" class="Bound">deps₂&#39;</a> <a id="20767" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20769" href="Ledger.Conway.Conformance.Equivalence.html#20457" class="Bound">eqd&#39;</a> <a id="20774" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20776" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="20783" class="Symbol">(</a><a id="20784" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="20796" class="Symbol">(</a><a id="20797" href="Ledger.Conway.Conformance.Certs.html#5523" class="InductiveConstructor">C.GOVCERT-regdrep</a> <a id="20815" href="Ledger.Conway.Conformance.Equivalence.html#20392" class="Bound">h</a><a id="20816" class="Symbol">))</a> <a id="20819" href="Ledger.Conway.Conformance.Equivalence.html#20464" class="Bound">rs&#39;</a>
  <a id="20825" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="20836" class="Symbol">{</a><a id="20837" href="Ledger.Conway.Conformance.Equivalence.html#20837" class="Bound">Γ</a><a id="20838" class="Symbol">}</a> <a id="20840" href="Ledger.Conway.Conformance.Equivalence.html#20840" class="Bound">deps₁</a> <a id="20846" href="Ledger.Conway.Conformance.Equivalence.html#20846" class="Bound">deps₂</a> <a id="20852" href="Ledger.Conway.Conformance.Equivalence.html#20852" class="Bound">deps₁&#39;</a> <a id="20859" href="Ledger.Conway.Conformance.Equivalence.html#20859" class="Bound">eqd</a> <a id="20863" class="Symbol">(</a><a id="20864" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="20871" class="Symbol">(</a><a id="20872" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a>  <a id="20885" class="Symbol">{</a><a id="20886" class="Argument">dCert</a> <a id="20892" class="Symbol">=</a> <a id="20894" href="Ledger.Conway.Conformance.Equivalence.html#20894" class="Bound">cert</a><a id="20898" class="Symbol">}</a> <a id="20900" class="Symbol">(</a><a id="20901" href="Ledger.Conway.Conformance.Certs.html#5889" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="20921" class="Symbol">(</a><a id="20922" href="Ledger.Conway.Conformance.Equivalence.html#20922" class="Bound">a</a> <a id="20924" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20926" href="Ledger.Conway.Conformance.Equivalence.html#20926" class="Bound">b</a><a id="20927" class="Symbol">)))</a> <a id="20931" href="Ledger.Conway.Conformance.Equivalence.html#20931" class="Bound">rs</a><a id="20933" class="Symbol">)</a> <a id="20935" class="Symbol">=</a>
    <a id="20941" class="Keyword">let</a> <a id="20945" class="Keyword">open</a> <a id="20950" href="Ledger.Conway.Specification.Certs.html#3693" class="Module">C.CertEnv</a> <a id="20960" href="Ledger.Conway.Conformance.Equivalence.html#20837" class="Bound">Γ</a> <a id="20962" class="Keyword">using</a> <a id="20968" class="Symbol">(</a><a id="20969" href="Ledger.Conway.Specification.Certs.html#3748" class="Field">pp</a><a id="20971" class="Symbol">)</a>
        <a id="20981" href="Ledger.Conway.Conformance.Equivalence.html#20981" class="Bound">deps₂&#39;</a> <a id="20988" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20990" href="Ledger.Conway.Conformance.Equivalence.html#20990" class="Bound">eqd&#39;</a> <a id="20995" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="20997" href="Ledger.Conway.Conformance.Equivalence.html#20997" class="Bound">rs&#39;</a> <a id="21001" class="Symbol">=</a> <a id="21003" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="21014" class="Symbol">(</a><a id="21015" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="21026" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="21029" href="Ledger.Conway.Conformance.Equivalence.html#20894" class="Bound">cert</a> <a id="21034" href="Ledger.Conway.Conformance.Equivalence.html#20840" class="Bound">deps₁</a><a id="21039" class="Symbol">)</a> <a id="21041" class="Symbol">(</a><a id="21042" href="Ledger.Conway.Conformance.Equivalence.html#17583" class="Function">updateCDep</a> <a id="21053" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a> <a id="21056" href="Ledger.Conway.Conformance.Equivalence.html#20894" class="Bound">cert</a> <a id="21061" href="Ledger.Conway.Conformance.Equivalence.html#20846" class="Bound">deps₂</a><a id="21066" class="Symbol">)</a> <a id="21068" href="Ledger.Conway.Conformance.Equivalence.html#20852" class="Bound">deps₁&#39;</a>
                                         <a id="21116" class="Symbol">(</a><a id="21117" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟨</a> <a id="21119" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#13468" class="Function">cong-updateDDep</a> <a id="21135" class="Symbol">{</a><a id="21136" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="21138" class="Symbol">}</a> <a id="21140" href="Ledger.Conway.Conformance.Equivalence.html#20894" class="Bound">cert</a> <a id="21145" class="Symbol">{</a><a id="21146" href="Ledger.Conway.Conformance.Equivalence.html#20840" class="Bound">deps₁</a> <a id="21152" class="Symbol">.</a><a id="21153" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21158" class="Symbol">}</a> <a id="21160" class="Symbol">{</a><a id="21161" href="Ledger.Conway.Conformance.Equivalence.html#20846" class="Bound">deps₂</a> <a id="21167" class="Symbol">.</a><a id="21168" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="21173" class="Symbol">}</a>
                                          <a id="21217" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">,</a> <a id="21219" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#14499" class="Function">cong-updateGDep</a> <a id="21235" class="Symbol">{</a><a id="21236" href="Ledger.Conway.Specification.Certs.html#3748" class="Function">pp</a><a id="21238" class="Symbol">}</a> <a id="21240" href="Ledger.Conway.Conformance.Equivalence.html#20894" class="Bound">cert</a> <a id="21245" class="Symbol">{</a><a id="21246" href="Ledger.Conway.Conformance.Equivalence.html#20840" class="Bound">deps₁</a> <a id="21252" class="Symbol">.</a><a id="21253" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21258" class="Symbol">}</a> <a id="21260" class="Symbol">{</a><a id="21261" href="Ledger.Conway.Conformance.Equivalence.html#20846" class="Bound">deps₂</a> <a id="21267" class="Symbol">.</a><a id="21268" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="21273" class="Symbol">}</a> <a id="21275" href="Ledger.Conway.Conformance.Equivalence.html#375" class="Function Operator">⟩</a> <a id="21277" href="Ledger.Conway.Conformance.Equivalence.html#20859" class="Bound">eqd</a><a id="21280" class="Symbol">)</a> <a id="21282" href="Ledger.Conway.Conformance.Equivalence.html#20931" class="Bound">rs</a>
    <a id="21289" class="Keyword">in</a>  <a id="21293" href="Ledger.Conway.Conformance.Equivalence.html#20981" class="Bound">deps₂&#39;</a> <a id="21300" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21302" href="Ledger.Conway.Conformance.Equivalence.html#20990" class="Bound">eqd&#39;</a> <a id="21307" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21309" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="21316" class="Symbol">(</a><a id="21317" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="21329" class="Symbol">(</a><a id="21330" href="Ledger.Conway.Conformance.Certs.html#5889" class="InductiveConstructor">C.GOVCERT-deregdrep</a> <a id="21350" class="Symbol">(</a><a id="21351" href="Ledger.Conway.Conformance.Equivalence.html#20922" class="Bound">a</a> <a id="21353" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21355" href="Ledger.Conway.Conformance.Equivalence.html#20859" class="Bound">eqd</a> <a id="21359" class="Symbol">.</a><a id="21360" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="21366" class="Symbol">.</a><a id="21367" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="21373" href="Ledger.Conway.Conformance.Equivalence.html#20926" class="Bound">b</a><a id="21374" class="Symbol">)))</a> <a id="21378" href="Ledger.Conway.Conformance.Equivalence.html#20997" class="Bound">rs&#39;</a>
                                                                   <a id="21449" class="Comment">-- ^^^^^^^^^^^^^^^^^^^ Actual work</a>
  <a id="21486" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="21497" class="Symbol">{</a><a id="21498" href="Ledger.Conway.Conformance.Equivalence.html#21498" class="Bound">Γ</a><a id="21499" class="Symbol">}</a> <a id="21501" href="Ledger.Conway.Conformance.Equivalence.html#21501" class="Bound">deps₁</a> <a id="21507" href="Ledger.Conway.Conformance.Equivalence.html#21507" class="Bound">deps₂</a> <a id="21513" href="Ledger.Conway.Conformance.Equivalence.html#21513" class="Bound">deps₁&#39;</a> <a id="21520" href="Ledger.Conway.Conformance.Equivalence.html#21520" class="Bound">eqd</a> <a id="21524" class="Symbol">(</a><a id="21525" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="21532" class="Symbol">(</a><a id="21533" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a>  <a id="21546" class="Symbol">{</a><a id="21547" class="Argument">dCert</a> <a id="21553" class="Symbol">=</a> <a id="21555" href="Ledger.Conway.Conformance.Equivalence.html#21555" class="Bound">cert</a><a id="21559" class="Symbol">}</a> <a id="21561" class="Symbol">(</a><a id="21562" href="Ledger.Conway.Conformance.Certs.html#6184" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21581" href="Ledger.Conway.Conformance.Equivalence.html#21581" class="Bound">h</a><a id="21582" class="Symbol">))</a>  <a id="21586" href="Ledger.Conway.Conformance.Equivalence.html#21586" class="Bound">rs</a><a id="21588" class="Symbol">)</a> <a id="21590" class="Symbol">=</a>
    <a id="21596" class="Keyword">let</a> <a id="21600" href="Ledger.Conway.Conformance.Equivalence.html#21600" class="Bound">deps₂&#39;</a> <a id="21607" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21609" href="Ledger.Conway.Conformance.Equivalence.html#21609" class="Bound">eqd&#39;</a> <a id="21614" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21616" href="Ledger.Conway.Conformance.Equivalence.html#21616" class="Bound">rs&#39;</a> <a id="21620" class="Symbol">=</a> <a id="21622" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="21633" href="Ledger.Conway.Conformance.Equivalence.html#21501" class="Bound">deps₁</a> <a id="21639" href="Ledger.Conway.Conformance.Equivalence.html#21507" class="Bound">deps₂</a> <a id="21645" href="Ledger.Conway.Conformance.Equivalence.html#21513" class="Bound">deps₁&#39;</a> <a id="21652" href="Ledger.Conway.Conformance.Equivalence.html#21520" class="Bound">eqd</a> <a id="21656" href="Ledger.Conway.Conformance.Equivalence.html#21586" class="Bound">rs</a>
    <a id="21663" class="Keyword">in</a>  <a id="21667" href="Ledger.Conway.Conformance.Equivalence.html#21600" class="Bound">deps₂&#39;</a> <a id="21674" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21676" href="Ledger.Conway.Conformance.Equivalence.html#21609" class="Bound">eqd&#39;</a> <a id="21681" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="21683" href="Interface.STS.html#549" class="InductiveConstructor">BS-ind</a> <a id="21690" class="Symbol">(</a><a id="21691" href="Ledger.Conway.Conformance.Certs.html#6964" class="InductiveConstructor">C.CERT-vdel</a> <a id="21703" class="Symbol">(</a><a id="21704" href="Ledger.Conway.Conformance.Certs.html#6184" class="InductiveConstructor">C.GOVCERT-ccreghot</a> <a id="21723" href="Ledger.Conway.Conformance.Equivalence.html#21581" class="Bound">h</a><a id="21724" class="Symbol">))</a> <a id="21727" href="Ledger.Conway.Conformance.Equivalence.html#21616" class="Bound">rs&#39;</a>

  <a id="castCERTS"></a><a id="21734" href="Ledger.Conway.Conformance.Equivalence.html#21734" class="Function">castCERTS</a> <a id="21744" class="Symbol">:</a> <a id="21746" class="Symbol">∀</a> <a id="21748" class="Symbol">{</a><a id="21749" href="Ledger.Conway.Conformance.Equivalence.html#21749" class="Bound">Γ</a> <a id="21751" href="Ledger.Conway.Conformance.Equivalence.html#21751" class="Bound">certs</a><a id="21756" class="Symbol">}</a> <a id="21758" class="Symbol">{</a><a id="21759" href="Ledger.Conway.Conformance.Equivalence.html#21759" class="Bound">s</a> <a id="21761" href="Ledger.Conway.Conformance.Equivalence.html#21761" class="Bound">s&#39;</a> <a id="21764" class="Symbol">:</a> <a id="21766" href="Ledger.Conway.Specification.Certs.html#4234" class="Record">L.CertState</a><a id="21777" class="Symbol">}</a> <a id="21779" href="Ledger.Conway.Conformance.Equivalence.html#21779" class="Bound">deps₁</a> <a id="21785" href="Ledger.Conway.Conformance.Equivalence.html#21785" class="Bound">deps₂</a> <a id="21791" href="Ledger.Conway.Conformance.Equivalence.html#21791" class="Bound">deps₁&#39;</a>
            <a id="21810" class="Symbol">→</a> <a id="21812" href="Ledger.Conway.Conformance.Equivalence.html#21779" class="Bound">deps₁</a> <a id="21818" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="21821" href="Ledger.Conway.Conformance.Equivalence.html#21785" class="Bound">deps₂</a>
            <a id="21839" class="Symbol">→</a> <a id="21841" href="Ledger.Conway.Conformance.Equivalence.html#21749" class="Bound">Γ</a> <a id="21843" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">C.⊢</a> <a id="21847" href="Ledger.Conway.Conformance.Equivalence.html#21779" class="Bound">deps₁</a> <a id="21853" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21859" href="Ledger.Conway.Conformance.Equivalence.html#21759" class="Bound">s</a> <a id="21861" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">⇀⦇</a> <a id="21864" href="Ledger.Conway.Conformance.Equivalence.html#21751" class="Bound">certs</a> <a id="21870" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">,CERTS⦈</a> <a id="21878" class="Symbol">(</a><a id="21879" href="Ledger.Conway.Conformance.Equivalence.html#21791" class="Bound">deps₁&#39;</a> <a id="21886" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21892" href="Ledger.Conway.Conformance.Equivalence.html#21761" class="Bound">s&#39;</a><a id="21894" class="Symbol">)</a>
            <a id="21908" class="Symbol">→</a> <a id="21910" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="21913" href="Ledger.Conway.Conformance.Equivalence.html#21913" class="Bound">deps₂&#39;</a> <a id="21920" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="21922" href="Ledger.Conway.Conformance.Equivalence.html#21791" class="Bound">deps₁&#39;</a> <a id="21929" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="21932" href="Ledger.Conway.Conformance.Equivalence.html#21913" class="Bound">deps₂&#39;</a> <a id="21939" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="21941" href="Ledger.Conway.Conformance.Equivalence.html#21749" class="Bound">Γ</a> <a id="21943" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">C.⊢</a> <a id="21947" href="Ledger.Conway.Conformance.Equivalence.html#21785" class="Bound">deps₂</a> <a id="21953" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21959" href="Ledger.Conway.Conformance.Equivalence.html#21759" class="Bound">s</a> <a id="21961" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">⇀⦇</a> <a id="21964" href="Ledger.Conway.Conformance.Equivalence.html#21751" class="Bound">certs</a> <a id="21970" href="Ledger.Conway.Conformance.Certs.html#8037" class="Function Operator">,CERTS⦈</a> <a id="21978" class="Symbol">(</a><a id="21979" href="Ledger.Conway.Conformance.Equivalence.html#21913" class="Bound">deps₂&#39;</a> <a id="21986" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="21992" href="Ledger.Conway.Conformance.Equivalence.html#21761" class="Bound">s&#39;</a><a id="21994" class="Symbol">)</a>
  <a id="21998" href="Ledger.Conway.Conformance.Equivalence.html#21734" class="Function">castCERTS</a> <a id="22008" href="Ledger.Conway.Conformance.Equivalence.html#22008" class="Bound">deps₁</a> <a id="22014" href="Ledger.Conway.Conformance.Equivalence.html#22014" class="Bound">deps₂</a> <a id="22020" href="Ledger.Conway.Conformance.Equivalence.html#22020" class="Bound">deps₁&#39;</a> <a id="22027" href="Ledger.Conway.Conformance.Equivalence.html#22027" class="Bound">eqd</a> <a id="22031" class="Symbol">(</a><a id="22032" href="Interface.STS.html#1458" class="InductiveConstructor">RTC</a> <a id="22036" class="Symbol">(</a><a id="22037" href="Ledger.Conway.Conformance.Certs.html#7197" class="InductiveConstructor">C.CERT-base</a> <a id="22049" href="Ledger.Conway.Conformance.Equivalence.html#22049" class="Bound">h</a> <a id="22051" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22053" href="Ledger.Conway.Conformance.Equivalence.html#22053" class="Bound">step</a><a id="22057" class="Symbol">))</a> <a id="22060" class="Symbol">=</a>
    <a id="22066" class="Keyword">let</a> <a id="22070" href="Ledger.Conway.Conformance.Equivalence.html#22070" class="Bound">deps₂&#39;</a> <a id="22077" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22079" href="Ledger.Conway.Conformance.Equivalence.html#22079" class="Bound">eqd&#39;</a> <a id="22084" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22086" href="Ledger.Conway.Conformance.Equivalence.html#22086" class="Bound">step&#39;</a> <a id="22092" class="Symbol">=</a> <a id="22094" href="Ledger.Conway.Conformance.Equivalence.html#17761" class="Function">castCERTS&#39;</a> <a id="22105" href="Ledger.Conway.Conformance.Equivalence.html#22008" class="Bound">deps₁</a> <a id="22111" href="Ledger.Conway.Conformance.Equivalence.html#22014" class="Bound">deps₂</a> <a id="22117" href="Ledger.Conway.Conformance.Equivalence.html#22020" class="Bound">deps₁&#39;</a> <a id="22124" href="Ledger.Conway.Conformance.Equivalence.html#22027" class="Bound">eqd</a> <a id="22128" href="Ledger.Conway.Conformance.Equivalence.html#22053" class="Bound">step</a>
    <a id="22137" class="Keyword">in</a>  <a id="22141" href="Ledger.Conway.Conformance.Equivalence.html#22070" class="Bound">deps₂&#39;</a> <a id="22148" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22150" href="Ledger.Conway.Conformance.Equivalence.html#22079" class="Bound">eqd&#39;</a> <a id="22155" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22157" href="Interface.STS.html#1458" class="InductiveConstructor">RTC</a> <a id="22161" class="Symbol">(</a><a id="22162" href="Ledger.Conway.Conformance.Certs.html#7197" class="InductiveConstructor">C.CERT-base</a> <a id="22174" href="Ledger.Conway.Conformance.Equivalence.html#22049" class="Bound">h</a> <a id="22176" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22178" href="Ledger.Conway.Conformance.Equivalence.html#22086" class="Bound">step&#39;</a><a id="22183" class="Symbol">)</a>

<a id="_⊢_⇀⦇_,GOVn⦈_"></a><a id="22186" href="Ledger.Conway.Conformance.Equivalence.html#22186" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22200" class="Symbol">:</a> <a id="22202" href="Ledger.Conway.Specification.Gov.html#1671" class="Record">L.GovEnv</a> <a id="22211" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22213" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="22215" class="Symbol">→</a> <a id="22217" href="Ledger.Conway.Specification.Gov.html#1479" class="Function">L.GovState</a> <a id="22228" class="Symbol">→</a> <a id="22230" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="22235" class="Symbol">(</a><a id="22236" href="Ledger.Conway.Specification.Gov.Actions.html#3270" class="Record">GovVote</a> <a id="22244" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="22246" href="Ledger.Conway.Specification.Gov.Actions.html#3418" class="Record">GovProposal</a><a id="22257" class="Symbol">)</a> <a id="22259" class="Symbol">→</a> <a id="22261" href="Ledger.Conway.Specification.Gov.html#1479" class="Function">L.GovState</a> <a id="22272" class="Symbol">→</a> <a id="22274" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="22279" href="Ledger.Conway.Conformance.Equivalence.html#22186" class="Function Operator">_⊢_⇀⦇_,GOVn⦈_</a> <a id="22293" class="Symbol">=</a> <a id="22295" href="Interface.STS.html#799" class="Datatype Operator">_⊢_⇀⟦_⟧ᵢ*&#39;_</a> <a id="22307" class="Symbol">{</a><a id="22308" class="Argument">_⊢_⇀⟦_⟧ᵇ_</a> <a id="22318" class="Symbol">=</a> <a id="22320" href="Interface.STS.html#1245" class="Datatype">IdSTS</a><a id="22325" class="Symbol">}</a> <a id="22327" class="Symbol">{</a><a id="22328" class="Argument">_⊢_⇀⟦_⟧_</a> <a id="22337" class="Symbol">=</a> <a id="22339" href="Ledger.Conway.Specification.Gov.html#7947" class="Datatype Operator">L._⊢_⇀⦇_,GOV⦈_</a><a id="22353" class="Symbol">}</a>

<a id="22356" class="Keyword">opaque</a>
  <a id="castLEDGER"></a><a id="22365" href="Ledger.Conway.Conformance.Equivalence.html#22365" class="Function">castLEDGER</a> <a id="22376" class="Symbol">:</a> <a id="22378" class="Symbol">∀</a> <a id="22380" class="Symbol">{</a><a id="22381" href="Ledger.Conway.Conformance.Equivalence.html#22381" class="Bound">Γ</a> <a id="22383" href="Ledger.Conway.Conformance.Equivalence.html#22383" class="Bound">tx</a><a id="22385" class="Symbol">}</a> <a id="22387" class="Symbol">{</a><a id="22388" href="Ledger.Conway.Conformance.Equivalence.html#22388" class="Bound">s</a> <a id="22390" href="Ledger.Conway.Conformance.Equivalence.html#22390" class="Bound">s&#39;</a> <a id="22393" class="Symbol">:</a> <a id="22395" href="Ledger.Conway.Specification.Ledger.html#981" class="Record">L.LState</a><a id="22403" class="Symbol">}</a> <a id="22405" href="Ledger.Conway.Conformance.Equivalence.html#22405" class="Bound">deps₁</a> <a id="22411" href="Ledger.Conway.Conformance.Equivalence.html#22411" class="Bound">deps₂</a> <a id="22417" href="Ledger.Conway.Conformance.Equivalence.html#22417" class="Bound">deps₁&#39;</a>
            <a id="22436" class="Symbol">→</a> <a id="22438" href="Ledger.Conway.Conformance.Equivalence.html#22405" class="Bound">deps₁</a> <a id="22444" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="22447" href="Ledger.Conway.Conformance.Equivalence.html#22411" class="Bound">deps₂</a>
            <a id="22465" class="Symbol">→</a> <a id="22467" href="Ledger.Conway.Conformance.Equivalence.html#22381" class="Bound">Γ</a> <a id="22469" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="22473" href="Ledger.Conway.Conformance.Equivalence.html#22405" class="Bound">deps₁</a> <a id="22479" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22485" href="Ledger.Conway.Conformance.Equivalence.html#22388" class="Bound">s</a> <a id="22487" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="22490" href="Ledger.Conway.Conformance.Equivalence.html#22383" class="Bound">tx</a> <a id="22493" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="22502" class="Symbol">(</a><a id="22503" href="Ledger.Conway.Conformance.Equivalence.html#22417" class="Bound">deps₁&#39;</a> <a id="22510" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22516" href="Ledger.Conway.Conformance.Equivalence.html#22390" class="Bound">s&#39;</a><a id="22518" class="Symbol">)</a>
            <a id="22532" class="Symbol">→</a> <a id="22534" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="22537" href="Ledger.Conway.Conformance.Equivalence.html#22537" class="Bound">deps₂&#39;</a> <a id="22544" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="22546" href="Ledger.Conway.Conformance.Equivalence.html#22417" class="Bound">deps₁&#39;</a> <a id="22553" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="22556" href="Ledger.Conway.Conformance.Equivalence.html#22537" class="Bound">deps₂&#39;</a> <a id="22563" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="22565" href="Ledger.Conway.Conformance.Equivalence.html#22381" class="Bound">Γ</a> <a id="22567" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C.⊢</a> <a id="22571" href="Ledger.Conway.Conformance.Equivalence.html#22411" class="Bound">deps₂</a> <a id="22577" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22583" href="Ledger.Conway.Conformance.Equivalence.html#22388" class="Bound">s</a> <a id="22585" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">⇀⦇</a> <a id="22588" href="Ledger.Conway.Conformance.Equivalence.html#22383" class="Bound">tx</a> <a id="22591" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">,LEDGER⦈</a> <a id="22600" class="Symbol">(</a><a id="22601" href="Ledger.Conway.Conformance.Equivalence.html#22537" class="Bound">deps₂&#39;</a> <a id="22608" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="22614" href="Ledger.Conway.Conformance.Equivalence.html#22390" class="Bound">s&#39;</a><a id="22616" class="Symbol">)</a>
  <a id="22620" href="Ledger.Conway.Conformance.Equivalence.html#22365" class="Function">castLEDGER</a> <a id="22631" class="Symbol">{</a><a id="22632" href="Ledger.Conway.Conformance.Equivalence.html#22632" class="Bound">Γ</a><a id="22633" class="Symbol">}</a> <a id="22635" class="Symbol">{</a><a id="22636" href="Ledger.Conway.Conformance.Equivalence.html#22636" class="Bound">tx</a><a id="22638" class="Symbol">}</a> <a id="22640" class="Symbol">{</a><a id="22641" href="Ledger.Conway.Conformance.Equivalence.html#22641" class="Bound">s</a><a id="22642" class="Symbol">}</a> <a id="22644" class="Symbol">{</a><a id="22645" href="Ledger.Conway.Conformance.Equivalence.html#22645" class="Bound">s&#39;</a><a id="22647" class="Symbol">}</a> <a id="22649" href="Ledger.Conway.Conformance.Equivalence.html#22649" class="Bound">deps₁</a> <a id="22655" href="Ledger.Conway.Conformance.Equivalence.html#22655" class="Bound">deps₂</a> <a id="22661" href="Ledger.Conway.Conformance.Equivalence.html#22661" class="Bound">deps₁&#39;</a> <a id="22668" href="Ledger.Conway.Conformance.Equivalence.html#22668" class="Bound">eqd</a> <a id="22672" class="Symbol">(</a><a id="22673" href="Ledger.Conway.Conformance.Ledger.html#2178" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22685" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22690" href="Ledger.Conway.Conformance.Equivalence.html#22690" class="Bound">utxo</a> <a id="22695" href="Ledger.Conway.Conformance.Equivalence.html#22695" class="Bound">certs</a> <a id="22701" href="Ledger.Conway.Conformance.Equivalence.html#22701" class="Bound">gov</a><a id="22704" class="Symbol">)</a> <a id="22706" class="Symbol">=</a>
    <a id="22712" class="Keyword">let</a> <a id="22716" href="Ledger.Conway.Conformance.Equivalence.html#22716" class="Bound">deps₂&#39;</a> <a id="22723" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22725" href="Ledger.Conway.Conformance.Equivalence.html#22725" class="Bound">eqd&#39;</a> <a id="22730" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22732" href="Ledger.Conway.Conformance.Equivalence.html#22732" class="Bound">certs&#39;</a> <a id="22739" class="Symbol">=</a> <a id="22741" href="Ledger.Conway.Conformance.Equivalence.html#21734" class="Function">castCERTS</a> <a id="22751" href="Ledger.Conway.Conformance.Equivalence.html#22649" class="Bound">deps₁</a> <a id="22757" href="Ledger.Conway.Conformance.Equivalence.html#22655" class="Bound">deps₂</a> <a id="22763" href="Ledger.Conway.Conformance.Equivalence.html#22661" class="Bound">deps₁&#39;</a> <a id="22770" href="Ledger.Conway.Conformance.Equivalence.html#22668" class="Bound">eqd</a> <a id="22774" href="Ledger.Conway.Conformance.Equivalence.html#22695" class="Bound">certs</a>
    <a id="22784" class="Keyword">in</a>  <a id="22788" href="Ledger.Conway.Conformance.Equivalence.html#22716" class="Bound">deps₂&#39;</a> <a id="22795" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22797" href="Ledger.Conway.Conformance.Equivalence.html#22725" class="Bound">eqd&#39;</a> <a id="22802" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22804" href="Ledger.Conway.Conformance.Ledger.html#2178" class="InductiveConstructor">C.LEDGER-V⋯</a> <a id="22816" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22821" href="Ledger.Conway.Conformance.Equivalence.html#22690" class="Bound">utxo</a> <a id="22826" href="Ledger.Conway.Conformance.Equivalence.html#22732" class="Bound">certs&#39;</a> <a id="22833" href="Ledger.Conway.Conformance.Equivalence.html#22701" class="Bound">gov</a>
  <a id="22839" href="Ledger.Conway.Conformance.Equivalence.html#22365" class="Function">castLEDGER</a> <a id="22850" href="Ledger.Conway.Conformance.Equivalence.html#22850" class="Bound">deps₁</a> <a id="22856" href="Ledger.Conway.Conformance.Equivalence.html#22856" class="Bound">deps₂</a> <a id="22862" href="Ledger.Conway.Conformance.Equivalence.html#22862" class="Bound">deps₁&#39;</a> <a id="22869" href="Ledger.Conway.Conformance.Equivalence.html#22869" class="Bound">eqd</a> <a id="22873" class="Symbol">(</a><a id="22874" href="Ledger.Conway.Conformance.Ledger.html#2231" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22886" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22891" href="Ledger.Conway.Conformance.Equivalence.html#22891" class="Bound">utxo</a><a id="22895" class="Symbol">)</a> <a id="22897" class="Symbol">=</a> <a id="22899" class="Symbol">_</a> <a id="22901" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22903" href="Ledger.Conway.Conformance.Equivalence.html#22869" class="Bound">eqd</a> <a id="22907" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="22909" href="Ledger.Conway.Conformance.Ledger.html#2231" class="InductiveConstructor">C.LEDGER-I⋯</a> <a id="22921" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="22926" href="Ledger.Conway.Conformance.Equivalence.html#22891" class="Bound">utxo</a>

<a id="22932" class="Comment">---------------------------------------------------------------------------</a>
<a id="23008" class="Comment">-- The main result</a>
<a id="23027" class="Comment">---------------------------------------------------------------------------</a>

<a id="23104" class="Keyword">open</a> <a id="23109" class="Keyword">import</a> <a id="23116" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html" class="Module">Ledger.Conway.Conformance.Equivalence.Bisimilarity</a>

<a id="23168" class="Comment">-- An LState sˡ from the Spec and an LState sᶜ from Conformance are</a>
<a id="23236" class="Comment">-- bisimular iff</a>
<a id="23253" class="Comment">--  ∙ the deposits in the CertState of sᶜ are equal (as maps) to the</a>
<a id="23322" class="Comment">--    appropriate restrictions of the deposits in the UTxOState of sˡ</a>
<a id="23392" class="Comment">--  ∙ the only difference between sˡ and sᶜ are the extra deposits in</a>
<a id="23462" class="Comment">--    the CertState of sᶜ.</a>
<a id="_∼_"></a><a id="23489" href="Ledger.Conway.Conformance.Equivalence.html#23489" class="Function Operator">_∼_</a> <a id="23493" class="Symbol">:</a> <a id="23495" href="Ledger.Conway.Specification.Ledger.html#981" class="Record">L.LState</a> <a id="23504" class="Symbol">→</a> <a id="23506" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">C.LState</a> <a id="23515" class="Symbol">→</a> <a id="23517" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="23522" href="Ledger.Conway.Conformance.Equivalence.html#23522" class="Bound">sˡ</a> <a id="23525" href="Ledger.Conway.Conformance.Equivalence.html#23489" class="Function Operator">∼</a> <a id="23527" href="Ledger.Conway.Conformance.Equivalence.html#23527" class="Bound">sᶜ</a> <a id="23530" class="Symbol">=</a> <a id="23532" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="23545" href="Ledger.Conway.Conformance.Equivalence.html#23522" class="Bound">sˡ</a> <a id="23548" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="23551" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="23565" class="Symbol">(</a><a id="23566" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="23585" href="Ledger.Conway.Conformance.Equivalence.html#23527" class="Bound">sᶜ</a><a id="23587" class="Symbol">)</a> <a id="23589" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="23591" href="Ledger.Conway.Conformance.Equivalence.html#23522" class="Bound">sˡ</a> <a id="23594" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="23596" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23601" href="Ledger.Conway.Conformance.Equivalence.html#23527" class="Bound">sᶜ</a>

<a id="23605" class="Comment">-- This gives us the main result: a bisimulation between the LEDGER</a>
<a id="23673" class="Comment">-- rules in Ledger and in Conformance.</a>
<a id="bisimilarityProof"></a><a id="23712" href="Ledger.Conway.Conformance.Equivalence.html#23712" class="Function">bisimilarityProof</a> <a id="23730" class="Symbol">:</a> <a id="23732" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#128" class="Record">Bisimilar</a> <a id="23742" href="Ledger.Conway.Specification.Ledger.html#3491" class="Datatype Operator">L._⊢_⇀⦇_,LEDGER⦈_</a> <a id="23760" href="Ledger.Conway.Conformance.Ledger.html#1157" class="Datatype Operator">C._⊢_⇀⦇_,LEDGER⦈_</a>
<a id="23778" href="Ledger.Conway.Conformance.Equivalence.html#23712" class="Function">bisimilarityProof</a> <a id="23796" class="Symbol">.</a><a id="23797" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#259" class="Field Operator">Bisimilar._≈_</a> <a id="23811" class="Symbol">=</a> <a id="23813" href="Ledger.Conway.Conformance.Equivalence.html#23489" class="Function Operator">_∼_</a>
<a id="23817" href="Ledger.Conway.Conformance.Equivalence.html#23712" class="Function">bisimilarityProof</a> <a id="23835" class="Symbol">.</a><a id="23836" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#284" class="Field">Bisimilar.to</a> <a id="23849" class="Symbol">{</a><a id="23850" href="Ledger.Conway.Conformance.Equivalence.html#23850" class="Bound">Γ</a><a id="23851" class="Symbol">}</a> <a id="23853" class="Symbol">{</a><a id="23854" href="Ledger.Conway.Conformance.Equivalence.html#23854" class="Bound">tx</a><a id="23856" class="Symbol">}</a> <a id="23858" class="Symbol">{</a><a id="23859" href="Ledger.Conway.Conformance.Equivalence.html#23859" class="Bound">sˡ</a><a id="23861" class="Symbol">}</a> <a id="23863" class="Symbol">{</a><a id="23864" href="Ledger.Conway.Conformance.Equivalence.html#23864" class="Bound">sˡ&#39;</a><a id="23867" class="Symbol">}</a> <a id="23869" class="Symbol">{</a><a id="23870" href="Ledger.Conway.Conformance.Equivalence.html#23870" class="Bound">sᶜ</a><a id="23872" class="Symbol">}</a> <a id="23874" class="Symbol">(</a><a id="23875" href="Ledger.Conway.Conformance.Equivalence.html#23875" class="Bound">eq</a> <a id="23878" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23880" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="23884" class="Symbol">)</a> <a id="23886" href="Ledger.Conway.Conformance.Equivalence.html#23886" class="Bound">r</a> <a id="23888" class="Symbol">=</a>
  <a id="23892" class="Keyword">let</a> <a id="23896" href="Ledger.Conway.Conformance.Equivalence.html#23896" class="Bound">deps</a>  <a id="23902" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23904" href="Ledger.Conway.Conformance.Equivalence.html#23904" class="Bound">eqd</a>  <a id="23909" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23911" href="Ledger.Conway.Conformance.Equivalence.html#23911" class="Bound">r&#39;</a>  <a id="23915" class="Symbol">=</a> <a id="23917" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23922" href="Ledger.Conway.Conformance.Equivalence.html#23886" class="Bound">r</a>
      <a id="23930" href="Ledger.Conway.Conformance.Equivalence.html#23930" class="Bound">deps&#39;</a> <a id="23936" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23938" href="Ledger.Conway.Conformance.Equivalence.html#23938" class="Bound">eqd&#39;</a> <a id="23943" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="23945" href="Ledger.Conway.Conformance.Equivalence.html#23945" class="Bound">r&#39;&#39;</a> <a id="23949" class="Symbol">=</a> <a id="23951" href="Ledger.Conway.Conformance.Equivalence.html#22365" class="Function">castLEDGER</a> <a id="23962" class="Symbol">(</a><a id="23963" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="23976" class="Symbol">(</a><a id="23977" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="23982" href="Ledger.Conway.Conformance.Equivalence.html#23870" class="Bound">sᶜ</a><a id="23984" class="Symbol">))</a>
                                      <a id="24025" class="Symbol">(</a><a id="24026" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="24040" class="Symbol">(</a><a id="24041" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="24060" href="Ledger.Conway.Conformance.Equivalence.html#23870" class="Bound">sᶜ</a><a id="24062" class="Symbol">))</a>
                                      <a id="24103" href="Ledger.Conway.Conformance.Equivalence.html#23896" class="Bound">deps</a>
                                      <a id="24146" href="Ledger.Conway.Conformance.Equivalence.html#23875" class="Bound">eq</a>
                                      <a id="24187" href="Ledger.Conway.Conformance.Equivalence.html#23911" class="Bound">r&#39;</a>
      <a id="24196" href="Ledger.Conway.Conformance.Equivalence.html#24196" class="Bound">eqd&#39;&#39;</a> <a id="24202" class="Symbol">:</a> <a id="24204" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="24217" href="Ledger.Conway.Conformance.Equivalence.html#23864" class="Bound">sˡ&#39;</a> <a id="24221" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12955" class="Function Operator">≡ᵈ</a> <a id="24224" href="Ledger.Conway.Conformance.Equivalence.html#23930" class="Bound">deps&#39;</a>
      <a id="24236" href="Ledger.Conway.Conformance.Equivalence.html#24196" class="Bound">eqd&#39;&#39;</a> <a id="24242" class="Symbol">=</a> <a id="24244" href="Ledger.Conway.Conformance.Equivalence.html#13876" class="Function">≡ᵈ-trans</a> <a id="24253" class="Symbol">{</a><a id="24254" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="24267" href="Ledger.Conway.Conformance.Equivalence.html#23864" class="Bound">sˡ&#39;</a><a id="24270" class="Symbol">}</a> <a id="24272" class="Symbol">{</a><a id="24273" href="Ledger.Conway.Conformance.Equivalence.html#23896" class="Bound">deps</a><a id="24277" class="Symbol">}</a> <a id="24279" class="Symbol">{</a><a id="24280" href="Ledger.Conway.Conformance.Equivalence.html#23930" class="Bound">deps&#39;</a><a id="24285" class="Symbol">}</a> <a id="24287" class="Symbol">(</a><a id="24288" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">≡ᵈ-sym</a> <a id="24295" class="Symbol">{</a><a id="24296" href="Ledger.Conway.Conformance.Equivalence.html#23896" class="Bound">deps</a><a id="24300" class="Symbol">}</a> <a id="24302" class="Symbol">{</a><a id="24303" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="24316" href="Ledger.Conway.Conformance.Equivalence.html#23864" class="Bound">sˡ&#39;</a><a id="24319" class="Symbol">}</a> <a id="24321" href="Ledger.Conway.Conformance.Equivalence.html#23904" class="Bound">eqd</a><a id="24324" class="Symbol">)</a> <a id="24326" href="Ledger.Conway.Conformance.Equivalence.html#23938" class="Bound">eqd&#39;</a>
  <a id="24333" class="Keyword">in</a>
  <a id="24338" class="Symbol">(</a><a id="24339" href="Ledger.Conway.Conformance.Equivalence.html#23930" class="Bound">deps&#39;</a> <a id="24345" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24351" href="Ledger.Conway.Conformance.Equivalence.html#23864" class="Bound">sˡ&#39;</a><a id="24354" class="Symbol">)</a> <a id="24356" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24358" class="Symbol">(</a><a id="24359" href="Ledger.Conway.Conformance.Equivalence.html#24196" class="Bound">eqd&#39;&#39;</a> <a id="24365" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24367" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24371" class="Symbol">)</a> <a id="24373" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24375" href="Ledger.Conway.Conformance.Equivalence.html#23945" class="Bound">r&#39;&#39;</a>
<a id="24379" href="Ledger.Conway.Conformance.Equivalence.html#23712" class="Function">bisimilarityProof</a> <a id="24397" class="Symbol">.</a><a id="24398" href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html#419" class="Field">Bisimilar.from</a> <a id="24413" class="Symbol">{</a><a id="24414" href="Ledger.Conway.Conformance.Equivalence.html#24414" class="Bound">Γ</a><a id="24415" class="Symbol">}</a> <a id="24417" class="Symbol">{</a><a id="24418" href="Ledger.Conway.Conformance.Equivalence.html#24418" class="Bound">tx</a><a id="24420" class="Symbol">}</a> <a id="24422" class="Symbol">{</a><a id="24423" href="Ledger.Conway.Conformance.Equivalence.html#24423" class="Bound">sˡ</a><a id="24425" class="Symbol">}</a> <a id="24427" class="Symbol">{</a><a id="24428" href="Ledger.Conway.Conformance.Equivalence.html#24428" class="Bound">sᶜ</a><a id="24430" class="Symbol">}</a> <a id="24432" class="Symbol">{</a><a id="24433" href="Ledger.Conway.Conformance.Equivalence.html#24433" class="Bound">sᶜ&#39;</a><a id="24436" class="Symbol">}</a> <a id="24438" class="Symbol">(</a><a id="24439" href="Ledger.Conway.Conformance.Equivalence.html#24439" class="Bound">eqd</a> <a id="24443" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24445" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24449" class="Symbol">)</a> <a id="24451" href="Ledger.Conway.Conformance.Equivalence.html#24451" class="Bound">r</a> <a id="24453" class="Symbol">=</a>
  <a id="24457" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24462" href="Ledger.Conway.Conformance.Equivalence.html#24433" class="Bound">sᶜ&#39;</a> <a id="24466" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24468" class="Symbol">(</a><a id="24469" href="Ledger.Conway.Conformance.Equivalence.html#24592" class="Function">wf&#39;</a> <a id="24473" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24475" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="24479" class="Symbol">)</a> <a id="24481" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="24483" href="Ledger.Conway.Conformance.Equivalence.html#24506" class="Function">wf</a> <a id="24486" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24492" href="Ledger.Conway.Conformance.Equivalence.html#24451" class="Bound">r</a>
  <a id="24496" class="Keyword">where</a>
    <a id="24506" href="Ledger.Conway.Conformance.Equivalence.html#24506" class="Function">wf</a>  <a id="24510" class="Symbol">=</a> <a id="24512" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">≡ᵈ-sym</a> <a id="24519" class="Symbol">{</a><a id="24520" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="24533" class="Symbol">(</a><a id="24534" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24539" href="Ledger.Conway.Conformance.Equivalence.html#24428" class="Bound">sᶜ</a><a id="24541" class="Symbol">)}</a> <a id="24544" class="Symbol">{</a><a id="24545" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="24559" class="Symbol">(</a><a id="24560" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="24579" href="Ledger.Conway.Conformance.Equivalence.html#24428" class="Bound">sᶜ</a><a id="24581" class="Symbol">)}</a> <a id="24584" href="Ledger.Conway.Conformance.Equivalence.html#24439" class="Bound">eqd</a>
    <a id="24592" href="Ledger.Conway.Conformance.Equivalence.html#24592" class="Function">wf&#39;</a> <a id="24596" class="Symbol">=</a> <a id="24598" href="Ledger.Conway.Conformance.Equivalence.html#13859" class="Function">≡ᵈ-sym</a> <a id="24605" class="Symbol">{</a><a id="24606" href="Ledger.Conway.Conformance.Equivalence.html#8475" class="Function">certDepositsC</a> <a id="24620" class="Symbol">(</a><a id="24621" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">C.LState.certState</a> <a id="24640" href="Ledger.Conway.Conformance.Equivalence.html#24433" class="Bound">sᶜ&#39;</a><a id="24643" class="Symbol">)}</a> <a id="24646" class="Symbol">{</a><a id="24647" href="Ledger.Conway.Conformance.Equivalence.Deposits.html#12799" class="Function">certDeposits</a> <a id="24660" class="Symbol">(</a><a id="24661" href="Ledger.Conway.Conformance.Equivalence.Convert.html#452" class="Function">conv</a> <a id="24666" href="Ledger.Conway.Conformance.Equivalence.html#24433" class="Bound">sᶜ&#39;</a><a id="24669" class="Symbol">)}</a> <a id="24672" class="Symbol">(</a><a id="24673" href="Ledger.Conway.Conformance.Equivalence.html#15273" class="Function">lemWellformed</a> <a id="24687" href="Ledger.Conway.Conformance.Equivalence.html#24506" class="Function">wf</a> <a id="24690" href="Ledger.Conway.Conformance.Equivalence.html#24451" class="Bound">r</a><a id="24691" class="Symbol">)</a>
    <a id="24697" href="Ledger.Conway.Conformance.Equivalence.html#24697" class="Function">r&#39;</a> <a id="24700" class="Symbol">=</a> <a id="24702" href="Ledger.Conway.Conformance.Equivalence.html#24506" class="Function">wf</a> <a id="24705" href="Ledger.Conway.Conformance.Equivalence.Convert.html#270" class="Function Operator">⊢conv</a> <a id="24711" href="Ledger.Conway.Conformance.Equivalence.html#24451" class="Bound">r</a>
</pre></body></html>