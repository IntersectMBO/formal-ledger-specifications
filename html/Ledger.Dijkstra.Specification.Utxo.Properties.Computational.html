<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Utxo.Properties.Computational</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="77" class="Keyword">open</a> <a id="82" class="Keyword">import</a> <a id="89" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a>

<a id="132" class="Keyword">module</a> <a id="139" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html" class="Module">Ledger.Dijkstra.Specification.Utxo.Properties.Computational</a>
  <a id="201" class="Symbol">(</a><a id="202" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a> <a id="206" class="Symbol">:</a> <a id="208" class="Symbol">_)</a> <a id="211" class="Symbol">(</a><a id="212" class="Keyword">open</a> <a id="217" href="Ledger.Dijkstra.Specification.Transaction.html#1329" class="Module">TransactionStructure</a> <a id="238" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a><a id="241" class="Symbol">)</a>
  <a id="245" class="Symbol">(</a><a id="246" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a> <a id="250" class="Symbol">:</a> <a id="252" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="270" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a><a id="273" class="Symbol">)</a> <a id="275" class="Symbol">(</a><a id="276" class="Keyword">open</a> <a id="281" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="299" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a><a id="302" class="Symbol">)</a>
  <a id="306" class="Keyword">where</a>

<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Algebra.Morphism.html" class="Module">Algebra.Morphism</a>              <a id="355" class="Keyword">using</a> <a id="361" class="Symbol">(</a><a id="362" class="Keyword">module</a> <a id="369" href="Algebra.Morphism.Structures.html#4177" class="Module">MonoidMorphisms</a><a id="384" class="Symbol">;</a> <a id="386" href="Algebra.Morphism.Structures.html#2881" class="Record">IsMagmaHomomorphism</a><a id="405" class="Symbol">)</a>
<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="432" class="Symbol">as</a> <a id="435" class="Module">ℤ</a>             <a id="449" class="Keyword">using</a> <a id="455" class="Symbol">(</a><a id="456" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a><a id="457" class="Symbol">)</a>
<a id="459" class="Keyword">open</a> <a id="464" class="Keyword">import</a> <a id="471" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a>  <a id="501" class="Keyword">using</a> <a id="507" class="Symbol">(</a><a id="508" href="Data.List.Relation.Unary.All.html#1638" class="Datatype">All</a><a id="511" class="Symbol">)</a>
<a id="513" class="Keyword">import</a> <a id="520" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="529" class="Symbol">as</a> <a id="532" class="Module">ℕ</a>
<a id="534" class="Keyword">open</a> <a id="539" class="Keyword">import</a> <a id="546" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>           <a id="576" class="Keyword">hiding</a> <a id="583" class="Symbol">(</a><a id="584" href="Data.Nat.Properties.html#4093" class="Function Operator">_≟_</a><a id="587" class="Symbol">)</a>
<a id="589" class="Keyword">open</a> <a id="594" class="Keyword">import</a> <a id="601" href="Data.String.Base.html" class="Module">Data.String.Base</a>              <a id="631" class="Keyword">using</a> <a id="637" class="Symbol">()</a> <a id="640" class="Keyword">renaming</a> <a id="649" class="Symbol">(</a><a id="650" href="Data.String.Base.html#2425" class="Function Operator">_++_</a> <a id="655" class="Symbol">to</a> <a id="658" class="Function Operator">_+ˢ_</a><a id="662" class="Symbol">)</a>

<a id="665" class="Keyword">open</a> <a id="670" class="Keyword">import</a> <a id="677" href="Prelude.html" class="Module">Prelude</a><a id="684" class="Symbol">;</a> <a id="686" class="Keyword">open</a> <a id="691" href="Function.Bundles.html#4750" class="Module">Equivalence</a>
<a id="703" class="Keyword">open</a> <a id="708" class="Keyword">import</a> <a id="715" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="730" class="Keyword">hiding</a> <a id="737" class="Symbol">(</a><a id="738" href="Class.HasOrder.Core.html#1000" class="Function">≤-trans</a><a id="745" class="Symbol">;</a> <a id="747" href="Class.HasOrder.Core.html#1899" class="Field">≤-antisym</a><a id="756" class="Symbol">;</a> <a id="758" href="Axiom.Set.html#9909" class="Function">All</a><a id="761" class="Symbol">);</a> <a id="764" class="Keyword">open</a> <a id="769" href="abstract-set-theory.FiniteSetTheory.html#1870" class="Module">Properties</a>

<a id="781" class="Keyword">open</a> <a id="786" class="Keyword">import</a> <a id="793" href="Tactic.Cong.html" class="Module">Tactic.Cong</a>                 <a id="821" class="Keyword">using</a> <a id="827" class="Symbol">(</a><a id="828" href="Tactic.Cong.html#9336" class="Macro">cong!</a><a id="833" class="Symbol">)</a>
<a id="835" class="Keyword">open</a> <a id="840" class="Keyword">import</a> <a id="847" href="Tactic.EquationalReasoning.html" class="Module">Tactic.EquationalReasoning</a>  <a id="875" class="Keyword">using</a> <a id="881" class="Symbol">(</a><a id="882" class="Keyword">module</a> <a id="889" href="Tactic.EquationalReasoning.html#418" class="Module">≡-Reasoning</a><a id="900" class="Symbol">)</a>
<a id="902" class="Keyword">open</a> <a id="907" class="Keyword">import</a> <a id="914" href="stdlib-meta.Tactic.MonoidSolver.NonNormalising.html" class="Module">stdlib-meta.Tactic.MonoidSolver.NonNormalising</a> <a id="961" class="Keyword">using</a> <a id="967" class="Symbol">(</a><a id="968" href="stdlib-meta.Tactic.MonoidSolver.NonNormalising.html#574" class="Function">solve-macro</a><a id="979" class="Symbol">)</a>
<a id="981" class="Keyword">open</a> <a id="986" class="Keyword">import</a> <a id="993" href="stdlib-meta.Tactic.GenError.html" class="Module">stdlib-meta.Tactic.GenError</a> <a id="1021" class="Keyword">using</a> <a id="1027" class="Symbol">(</a><a id="1028" href="stdlib-meta.Tactic.GenError.html#2066" class="Function">genErrors</a><a id="1037" class="Symbol">)</a>

<a id="1040" class="Keyword">open</a> <a id="1045" class="Keyword">import</a> <a id="1052" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a> <a id="1087" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a> <a id="1091" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a>
<a id="1095" class="Keyword">open</a> <a id="1100" class="Keyword">import</a> <a id="1107" href="Ledger.Dijkstra.Specification.Script.Validation.html" class="Module">Ledger.Dijkstra.Specification.Script.Validation</a> <a id="1155" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a> <a id="1159" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a>
<a id="1163" class="Keyword">open</a> <a id="1168" class="Keyword">import</a> <a id="1175" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="1211" href="Ledger.Dijkstra.Specification.Transaction.html#2505" class="Function">govStructure</a>
<a id="1224" class="Keyword">open</a> <a id="1229" class="Keyword">import</a> <a id="1236" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>

<a id="1275" class="Keyword">instance</a>
<a id="1284" class="Comment">--   _ = TokenAlgebra.Value-CommutativeMonoid tokenAlgebra</a>
<a id="1343" class="Comment">--   _ = +-0-monoid</a>
  <a id="1365" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1365" class="Function">_</a> <a id="1367" class="Symbol">=</a> <a id="1369" href="Interface.ComputationalRelation.html#1369" class="Function">Functor-ComputationResult</a>

<a id="1396" class="Keyword">instance</a>
  <a id="Computational-SUBUTXO"></a><a id="1407" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1407" class="Function">Computational-SUBUTXO</a> <a id="1429" class="Symbol">:</a> <a id="1431" href="Interface.ComputationalRelation.html#2804" class="Record">Computational</a> <a id="1445" href="Ledger.Dijkstra.Specification.Utxo.html#9381" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXO⦈_</a> <a id="1462" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
  <a id="1471" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1407" class="Function">Computational-SUBUTXO</a> <a id="1493" class="Symbol">=</a> <a id="1495" class="Keyword">record</a> <a id="1502" class="Symbol">{</a><a id="1503" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1524" class="Module">go</a><a id="1505" class="Symbol">}</a> <a id="1507" class="Keyword">where</a>
    <a id="1517" class="Keyword">module</a> <a id="1524" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1524" class="Module">go</a> <a id="1527" class="Keyword">where</a>

      <a id="1540" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1540" class="Function">computeProof</a> <a id="1553" class="Symbol">:</a> <a id="1555" class="Symbol">(</a><a id="1556" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1556" class="Bound">Γ</a> <a id="1558" class="Symbol">:</a> <a id="1560" href="Ledger.Dijkstra.Specification.Utxo.html#1373" class="Record">SubUTxOEnv</a><a id="1570" class="Symbol">)</a> <a id="1572" class="Symbol">(</a><a id="1573" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1573" class="Bound">s</a> <a id="1575" class="Symbol">:</a> <a id="1577" href="Ledger.Dijkstra.Specification.Utxo.html#1633" class="Record">UTxOState</a><a id="1586" class="Symbol">)</a> <a id="1588" class="Symbol">(</a><a id="1589" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1589" class="Bound">txSub</a> <a id="1595" class="Symbol">:</a> <a id="1597" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a><a id="1607" class="Symbol">)</a> <a id="1609" class="Symbol">→</a> <a id="1611" href="Interface.ComputationalRelation.html#237" class="Datatype">ComputationResult</a> <a id="1629" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1636" class="Symbol">(</a><a id="1637" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="1639" href="Ledger.Dijkstra.Specification.Utxo.html#1633" class="Record">UTxOState</a> <a id="1649" class="Symbol">(</a><a id="1650" href="Ledger.Dijkstra.Specification.Utxo.html#9381" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXO⦈_</a> <a id="1667" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1556" class="Bound">Γ</a> <a id="1669" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1573" class="Bound">s</a> <a id="1671" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1589" class="Bound">txSub</a><a id="1676" class="Symbol">))</a>
      <a id="1685" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1540" class="Function">computeProof</a> <a id="1698" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1698" class="Bound">Γ</a> <a id="1700" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1700" class="Bound">s</a> <a id="1702" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1702" class="Bound">txSub</a>
        <a id="1716" class="Keyword">with</a> <a id="1721" href="Ledger.Dijkstra.Specification.Utxo.html#1950" class="Field">IsTopLevelValidFlagOf</a> <a id="1743" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1698" class="Bound">Γ</a> <a id="1745" class="Symbol">|</a> <a id="1747" href="Relation.Binary.PropositionalEquality.html#4385" class="Function">inspect</a> <a id="1755" href="Ledger.Dijkstra.Specification.Utxo.html#1950" class="Field">IsTopLevelValidFlagOf</a> <a id="1777" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1698" class="Bound">Γ</a>
      <a id="1785" class="Symbol">...</a> <a id="1789" class="Symbol">|</a> <a id="1791" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="1797" class="Symbol">|</a> <a id="1799" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="1801" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1806" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="1816" class="Keyword">with</a> <a id="1821" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1823" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="1837" class="Bound">txSub</a> <a id="1843" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="1845" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="1860" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1862" href="Ledger.Dijkstra.Specification.Utxo.html#5284" class="Datatype">inInterval</a> <a id="1873" class="Symbol">(</a><a id="1874" href="Ledger.Dijkstra.Specification.Utxo.html#2466" class="Field">SlotOf</a> <a id="1881" class="Bound">Γ</a><a id="1882" class="Symbol">)</a> <a id="1884" class="Symbol">(</a><a id="1885" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="1901" class="Bound">txSub</a><a id="1906" class="Symbol">)</a>
             <a id="1921" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1923" href="Ledger.Core.Specification.Address.html#1839" class="Field">MaybeNetworkIdOf</a> <a id="1940" class="Bound">txSub</a> <a id="1946" href="Prelude.html#2945" class="Function Operator">~</a> <a id="1948" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1953" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="1963" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="1971" class="Symbol">...</a> <a id="1975" class="Symbol">|</a> <a id="1977" class="Symbol">(</a><a id="1978" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1982" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1982" class="Bound">p</a><a id="1983" class="Symbol">)</a> <a id="1985" class="Symbol">=</a> <a id="1987" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="1995" class="Symbol">(</a><a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#3454}{\htmlId{1998}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\htmlId{2005}{\htmlClass{Bound}{\text{s}}}\, \\ \,\href{Ledger.Prelude.Base.html#669}{\htmlId{2009}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\htmlId{2016}{\htmlClass{Bound}{\text{s}}}\, \\ \,\href{Ledger.Prelude.Base.html#554}{\htmlId{2020}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\htmlId{2032}{\htmlClass{Bound}{\text{s}}}\, \end{pmatrix}$</a> <a id="2036" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2038" href="Ledger.Dijkstra.Specification.Utxo.html#9464" class="InductiveConstructor">SUBUTXO</a> <a id="2046" class="Symbol">{</a><a id="2047" class="Argument">txSub</a> <a id="2053" class="Symbol">=</a> <a id="2055" class="Bound">txSub</a><a id="2060" class="Symbol">}</a> <a id="2062" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1982" class="Bound">p</a><a id="2063" class="Symbol">)</a>
      <a id="2071" class="Symbol">...</a> <a id="2075" class="Symbol">|</a> <a id="2077" class="Symbol">(</a><a id="2078" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2081" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2081" class="Bound">¬p</a><a id="2083" class="Symbol">)</a> <a id="2085" class="Symbol">=</a> <a id="2087" href="Interface.ComputationalRelation.html#352" class="InductiveConstructor">failure</a> <a id="2095" class="Symbol">(</a><a id="2096" href="stdlib-meta.Tactic.GenError.html#2066" class="Macro">genErrors</a> <a id="2106" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2081" class="Bound">¬p</a><a id="2108" class="Symbol">)</a>
      <a id="2116" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1540" class="Function">computeProof</a> <a id="2129" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2129" class="Bound">Γ</a> <a id="2131" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2131" class="Bound">s</a> <a id="2133" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2133" class="Bound">txSub</a> <a id="2139" class="Symbol">|</a> <a id="2141" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2146" class="Symbol">|</a> <a id="2148" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="2150" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2155" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="2165" class="Keyword">with</a> <a id="2170" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2172" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="2186" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2133" class="Bound">txSub</a> <a id="2192" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="2194" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="2209" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2211" href="Ledger.Dijkstra.Specification.Utxo.html#5284" class="Datatype">inInterval</a> <a id="2222" class="Symbol">(</a><a id="2223" href="Ledger.Dijkstra.Specification.Utxo.html#2466" class="Field">SlotOf</a> <a id="2230" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2129" class="Bound">Γ</a><a id="2231" class="Symbol">)</a> <a id="2233" class="Symbol">(</a><a id="2234" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="2250" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2133" class="Bound">txSub</a><a id="2255" class="Symbol">)</a>
             <a id="2270" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2272" href="Ledger.Core.Specification.Address.html#1839" class="Field">MaybeNetworkIdOf</a> <a id="2289" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2133" class="Bound">txSub</a> <a id="2295" href="Prelude.html#2945" class="Function Operator">~</a> <a id="2297" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2302" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="2312" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="2320" class="Symbol">...</a> <a id="2324" class="Symbol">|</a> <a id="2326" class="Symbol">(</a><a id="2327" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2331" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2331" class="Bound">p</a><a id="2332" class="Symbol">)</a> <a id="2334" class="Symbol">=</a> <a id="2336" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="2344" class="Symbol">(</a><a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{2347}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#3454}{\htmlId{2348}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\htmlId{2355}{\htmlClass{Bound}{\text{s}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{2357}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#7179}{\htmlId{2359}{\htmlClass{Field}{\text{SpendInputsOf}}}}\, \,\htmlId{2373}{\htmlClass{Bound}{\text{txSub}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{2379}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,\,\htmlId{2380}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#7640}{\htmlId{2382}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#4634}{\htmlId{2385}{\htmlClass{Function}{\text{outs}}}}\, \,\htmlId{2390}{\htmlClass{Bound}{\text{txSub}}}\, \\ \,\href{Ledger.Prelude.Base.html#669}{\htmlId{2398}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\htmlId{2405}{\htmlClass{Bound}{\text{s}}}\, \\ \,\href{Ledger.Prelude.Base.html#554}{\htmlId{2409}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\htmlId{2421}{\htmlClass{Bound}{\text{s}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{2423}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Prelude.Base.html#554}{\htmlId{2425}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\htmlId{2437}{\htmlClass{Bound}{\text{txSub}}}\, \end{pmatrix}$</a> <a id="2445" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2447" href="Ledger.Dijkstra.Specification.Utxo.html#9464" class="InductiveConstructor">SUBUTXO</a> <a id="2455" class="Symbol">{</a><a id="2456" class="Argument">txSub</a> <a id="2462" class="Symbol">=</a> <a id="2464" class="Bound">txSub</a><a id="2469" class="Symbol">}</a> <a id="2471" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2331" class="Bound">p</a><a id="2472" class="Symbol">)</a>
      <a id="2480" class="Symbol">...</a> <a id="2484" class="Symbol">|</a> <a id="2486" class="Symbol">(</a><a id="2487" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2490" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2490" class="Bound">¬p</a><a id="2492" class="Symbol">)</a> <a id="2494" class="Symbol">=</a> <a id="2496" href="Interface.ComputationalRelation.html#352" class="InductiveConstructor">failure</a> <a id="2504" class="Symbol">(</a><a id="2505" href="stdlib-meta.Tactic.GenError.html#2066" class="Macro">genErrors</a> <a id="2515" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2490" class="Bound">¬p</a><a id="2517" class="Symbol">)</a>


      <a id="2527" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2527" class="Function">completeness</a> <a id="2540" class="Symbol">:</a> <a id="2542" class="Symbol">(</a><a id="2543" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2543" class="Bound">Γ</a> <a id="2545" class="Symbol">:</a> <a id="2547" href="Ledger.Dijkstra.Specification.Utxo.html#1373" class="Record">SubUTxOEnv</a><a id="2557" class="Symbol">)</a> <a id="2559" class="Symbol">(</a><a id="2560" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2560" class="Bound">s</a> <a id="2562" class="Symbol">:</a> <a id="2564" href="Ledger.Dijkstra.Specification.Utxo.html#1633" class="Record">UTxOState</a><a id="2573" class="Symbol">)</a> <a id="2575" class="Symbol">(</a><a id="2576" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2576" class="Bound">txSub</a> <a id="2582" class="Symbol">:</a> <a id="2584" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a><a id="2594" class="Symbol">)</a> <a id="2596" class="Symbol">→</a> <a id="2598" class="Symbol">∀</a> <a id="2600" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2600" class="Bound">s&#39;</a> <a id="2603" class="Symbol">→</a> <a id="2605" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2543" class="Bound">Γ</a> <a id="2607" href="Ledger.Dijkstra.Specification.Utxo.html#9381" class="Datatype Operator">⊢</a> <a id="2609" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2560" class="Bound">s</a> <a id="2611" href="Ledger.Dijkstra.Specification.Utxo.html#9381" class="Datatype Operator">⇀⦇</a> <a id="2614" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2576" class="Bound">txSub</a> <a id="2620" href="Ledger.Dijkstra.Specification.Utxo.html#9381" class="Datatype Operator">,SUBUTXO⦈</a> <a id="2630" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2600" class="Bound">s&#39;</a> <a id="2633" class="Symbol">→</a> <a id="2635" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2639" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2645" class="Symbol">(</a><a id="2646" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1540" class="Function">computeProof</a> <a id="2659" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2543" class="Bound">Γ</a> <a id="2661" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2560" class="Bound">s</a> <a id="2663" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2576" class="Bound">txSub</a><a id="2668" class="Symbol">)</a> <a id="2670" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2672" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="2680" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2600" class="Bound">s&#39;</a>
      <a id="2689" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2527" class="Function">completeness</a> <a id="2702" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2702" class="Bound">Γ</a> <a id="2704" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2704" class="Bound">s</a> <a id="2706" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2706" class="Bound">txSub</a> <a id="2712" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2712" class="Bound">s&#39;</a> <a id="2715" class="Symbol">(</a><a id="2716" href="Ledger.Dijkstra.Specification.Utxo.html#9464" class="InductiveConstructor">SUBUTXO</a> <a id="2724" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2724" class="Bound">p</a><a id="2725" class="Symbol">)</a>
        <a id="2735" class="Keyword">with</a> <a id="2740" href="Ledger.Dijkstra.Specification.Utxo.html#1950" class="Field">IsTopLevelValidFlagOf</a> <a id="2762" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2702" class="Bound">Γ</a> <a id="2764" class="Symbol">|</a> <a id="2766" href="Relation.Binary.PropositionalEquality.html#4385" class="Function">inspect</a> <a id="2774" href="Ledger.Dijkstra.Specification.Utxo.html#1950" class="Field">IsTopLevelValidFlagOf</a> <a id="2796" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2702" class="Bound">Γ</a>
      <a id="2804" class="Symbol">...</a> <a id="2808" class="Symbol">|</a> <a id="2810" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="2816" class="Symbol">|</a> <a id="2818" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="2820" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2825" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="2835" class="Keyword">with</a> <a id="2840" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2842" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="2856" class="Bound">txSub</a> <a id="2862" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="2864" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="2879" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2881" href="Ledger.Dijkstra.Specification.Utxo.html#5284" class="Datatype">inInterval</a> <a id="2892" class="Symbol">(</a><a id="2893" href="Ledger.Dijkstra.Specification.Utxo.html#2466" class="Field">SlotOf</a> <a id="2900" class="Bound">Γ</a><a id="2901" class="Symbol">)</a> <a id="2903" class="Symbol">(</a><a id="2904" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="2920" class="Bound">txSub</a><a id="2925" class="Symbol">)</a>
             <a id="2940" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2942" href="Ledger.Core.Specification.Address.html#1839" class="Field">MaybeNetworkIdOf</a> <a id="2959" class="Bound">txSub</a> <a id="2965" href="Prelude.html#2945" class="Function Operator">~</a> <a id="2967" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2972" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="2982" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="2990" class="Symbol">...</a> <a id="2994" class="Symbol">|</a>  <a id="2997" class="Symbol">(</a><a id="2998" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3002" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3002" class="Bound">p</a><a id="3003" class="Symbol">)</a> <a id="3005" class="Symbol">=</a> <a id="3007" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="3018" class="Symbol">...</a> <a id="3022" class="Symbol">|</a>  <a id="3025" class="Symbol">(</a><a id="3026" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3029" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3029" class="Bound">¬p</a><a id="3031" class="Symbol">)</a> <a id="3033" class="Symbol">=</a> <a id="3035" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="3042" class="Symbol">(</a><a id="3043" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3029" class="Bound">¬p</a> <a id="3046" class="Bound">p</a><a id="3047" class="Symbol">)</a>
      <a id="3055" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2527" class="Function">completeness</a> <a id="3068" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3068" class="Bound">Γ</a> <a id="3070" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3070" class="Bound">s</a> <a id="3072" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3072" class="Bound">txSub</a> <a id="3078" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3078" class="Bound">s&#39;</a> <a id="3081" class="Symbol">(</a><a id="3082" href="Ledger.Dijkstra.Specification.Utxo.html#9464" class="InductiveConstructor">SUBUTXO</a> <a id="3090" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3090" class="Bound">p</a><a id="3091" class="Symbol">)</a> <a id="3093" class="Symbol">|</a> <a id="3095" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>  <a id="3101" class="Symbol">|</a> <a id="3103" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="3105" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="3110" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="3120" class="Keyword">with</a> <a id="3125" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="3127" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="3141" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3072" class="Bound">txSub</a> <a id="3147" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="3149" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="3164" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3166" href="Ledger.Dijkstra.Specification.Utxo.html#5284" class="Datatype">inInterval</a> <a id="3177" class="Symbol">(</a><a id="3178" href="Ledger.Dijkstra.Specification.Utxo.html#2466" class="Field">SlotOf</a> <a id="3185" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3068" class="Bound">Γ</a><a id="3186" class="Symbol">)</a> <a id="3188" class="Symbol">(</a><a id="3189" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="3205" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3072" class="Bound">txSub</a><a id="3210" class="Symbol">)</a>
             <a id="3225" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3227" href="Ledger.Core.Specification.Address.html#1839" class="Field">MaybeNetworkIdOf</a> <a id="3244" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3072" class="Bound">txSub</a> <a id="3250" href="Prelude.html#2945" class="Function Operator">~</a> <a id="3252" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3257" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="3267" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="3275" class="Symbol">...</a> <a id="3279" class="Symbol">|</a>  <a id="3282" class="Symbol">(</a><a id="3283" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3287" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3287" class="Bound">p</a><a id="3288" class="Symbol">)</a> <a id="3290" class="Symbol">=</a> <a id="3292" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="3303" class="Symbol">...</a> <a id="3307" class="Symbol">|</a>  <a id="3310" class="Symbol">(</a><a id="3311" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3314" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3314" class="Bound">¬p</a><a id="3316" class="Symbol">)</a> <a id="3318" class="Symbol">=</a> <a id="3320" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="3327" class="Symbol">(</a><a id="3328" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3314" class="Bound">¬p</a> <a id="3331" class="Bound">p</a><a id="3332" class="Symbol">)</a>

</pre></body></html>