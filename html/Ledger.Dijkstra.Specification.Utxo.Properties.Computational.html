<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Utxo.Properties.Computational</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="77" class="Keyword">open</a> <a id="82" class="Keyword">import</a> <a id="89" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a>

<a id="132" class="Keyword">module</a> <a id="139" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html" class="Module">Ledger.Dijkstra.Specification.Utxo.Properties.Computational</a>
  <a id="201" class="Symbol">(</a><a id="202" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a> <a id="206" class="Symbol">:</a> <a id="208" class="Symbol">_)</a> <a id="211" class="Symbol">(</a><a id="212" class="Keyword">open</a> <a id="217" href="Ledger.Dijkstra.Specification.Transaction.html#1329" class="Module">TransactionStructure</a> <a id="238" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a><a id="241" class="Symbol">)</a>
  <a id="245" class="Symbol">(</a><a id="246" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a> <a id="250" class="Symbol">:</a> <a id="252" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="270" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a><a id="273" class="Symbol">)</a> <a id="275" class="Symbol">(</a><a id="276" class="Keyword">open</a> <a id="281" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="299" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a><a id="302" class="Symbol">)</a>
  <a id="306" class="Keyword">where</a>

<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Prelude.html" class="Module">Prelude</a>
<a id="333" class="Keyword">open</a> <a id="338" class="Keyword">import</a> <a id="345" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="360" class="Keyword">open</a> <a id="365" class="Keyword">import</a> <a id="372" href="stdlib-meta.Tactic.GenError.html" class="Module">stdlib-meta.Tactic.GenError</a> <a id="400" class="Keyword">using</a> <a id="406" class="Symbol">(</a><a id="407" href="stdlib-meta.Tactic.GenError.html#2066" class="Function">genErrors</a><a id="416" class="Symbol">)</a>

<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a> <a id="466" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a> <a id="470" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a>
<a id="474" class="Keyword">open</a> <a id="479" class="Keyword">import</a> <a id="486" href="Ledger.Dijkstra.Specification.Script.Validation.html" class="Module">Ledger.Dijkstra.Specification.Script.Validation</a> <a id="534" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#202" class="Bound">txs</a> <a id="538" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#246" class="Bound">abs</a>
<a id="542" class="Keyword">open</a> <a id="547" class="Keyword">import</a> <a id="554" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a>
<a id="592" class="Keyword">import</a> <a id="599" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="627" class="Symbol">as</a> <a id="630" class="Module">Sum</a>

<a id="635" class="Keyword">open</a> <a id="640" href="Ledger.Dijkstra.Specification.PParams.html#1960" class="Module">PParams</a>

<a id="649" class="Keyword">instance</a>
  <a id="660" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#660" class="Function">_</a> <a id="662" class="Symbol">=</a> <a id="664" href="Interface.ComputationalRelation.html#1369" class="Function">Functor-ComputationResult</a>

<a id="getS₁"></a><a id="691" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#691" class="Function">getS₁</a> <a id="697" class="Symbol">:</a> <a id="699" class="Symbol">(</a><a id="700" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#700" class="Bound">Γ</a> <a id="702" class="Symbol">:</a> <a id="704" href="Ledger.Dijkstra.Specification.Utxo.html#1023" class="Record">UTxOEnv</a><a id="711" class="Symbol">)</a> <a id="713" class="Symbol">(</a><a id="714" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#714" class="Bound">s</a> <a id="716" class="Symbol">:</a> <a id="718" href="Ledger.Dijkstra.Specification.Utxo.html#1543" class="Record">UTxOState</a><a id="727" class="Symbol">)</a> <a id="729" class="Symbol">(</a><a id="730" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#730" class="Bound">txTop</a> <a id="736" class="Symbol">:</a> <a id="738" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a><a id="748" class="Symbol">)</a> <a id="750" class="Symbol">→</a> <a id="752" href="Ledger.Dijkstra.Specification.Utxo.html#1543" class="Record">UTxOState</a>
<a id="762" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#691" class="Function">getS₁</a> <a id="768" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#768" class="Bound">Γ</a> <a id="770" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770" class="Bound">s</a> <a id="772" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772" class="Bound">txTop</a> <a id="778" class="Symbol">=</a> <a id="780" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="783" href="Ledger.Dijkstra.Specification.Transaction.html#8884" class="Field">IsValidFlagOf</a> <a id="797" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772" class="Bound">txTop</a>
  <a id="805" href="Class.ToBool.html#342" class="Function Operator">then</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{812}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#3454}{\htmlId{813}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770}{\htmlId{820}{\htmlClass{Bound}{\text{s}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{822}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#7179}{\htmlId{824}{\htmlClass{Field}{\text{SpendInputsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772}{\htmlId{838}{\htmlClass{Bound}{\text{txTop}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{844}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,\,\htmlId{845}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#7640}{\htmlId{847}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#4396}{\htmlId{850}{\htmlClass{Function}{\text{outs}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772}{\htmlId{855}{\htmlClass{Bound}{\text{txTop}}}}\, \\ \,\href{Ledger.Prelude.Base.html#669}{\htmlId{863}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770}{\htmlId{870}{\htmlClass{Bound}{\text{s}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{872}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#6240}{\htmlId{874}{\htmlClass{Field}{\text{TxFeesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772}{\htmlId{883}{\htmlClass{Bound}{\text{txTop}}}}\, \\ \,\href{Ledger.Prelude.Base.html#554}{\htmlId{891}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770}{\htmlId{903}{\htmlClass{Bound}{\text{s}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{905}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Prelude.Base.html#554}{\htmlId{907}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772}{\htmlId{919}{\htmlClass{Bound}{\text{txTop}}}}\, \end{pmatrix}$</a>
  <a id="929" href="Class.ToBool.html#342" class="Function Operator">else</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#3454}{\htmlId{936}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770}{\htmlId{943}{\htmlClass{Bound}{\text{s}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{945}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\htmlId{947}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#6075}{\htmlId{948}{\htmlClass{Field}{\text{CollateralInputsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772}{\htmlId{967}{\htmlClass{Bound}{\text{txTop}}}}\,\,\htmlId{972}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{974}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\href{Ledger.Prelude.Base.html#669}{\htmlId{978}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770}{\htmlId{985}{\htmlClass{Bound}{\text{s}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{987}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#4533}{\htmlId{989}{\htmlClass{Function}{\text{cbalance}}}}\, \,\htmlId{998}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#3454}{\htmlId{999}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770}{\htmlId{1006}{\htmlClass{Bound}{\text{s}}}}\, \,\href{Axiom.Set.Map.html#13536}{\htmlId{1008}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#6075}{\htmlId{1010}{\htmlClass{Field}{\text{CollateralInputsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#772}{\htmlId{1029}{\htmlClass{Bound}{\text{txTop}}}}\,\,\htmlId{1034}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Prelude.Base.html#554}{\htmlId{1038}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#770}{\htmlId{1050}{\htmlClass{Bound}{\text{s}}}}\, \end{pmatrix}$</a>

<a id="1055" class="Keyword">instance</a>
  <a id="Computational-SUBUTXO"></a><a id="1066" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1066" class="Function">Computational-SUBUTXO</a> <a id="1088" class="Symbol">:</a> <a id="1090" href="Interface.ComputationalRelation.html#2804" class="Record">Computational</a> <a id="1104" href="Ledger.Dijkstra.Specification.Utxo.html#8746" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXO⦈_</a> <a id="1121" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
  <a id="1130" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1066" class="Function">Computational-SUBUTXO</a> <a id="1152" class="Symbol">=</a> <a id="1154" class="Keyword">record</a> <a id="1161" class="Symbol">{</a><a id="1162" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1183" class="Module">go</a><a id="1164" class="Symbol">}</a> <a id="1166" class="Keyword">where</a>
    <a id="1176" class="Keyword">module</a> <a id="1183" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1183" class="Module">go</a> <a id="1186" class="Keyword">where</a>

      <a id="1199" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1199" class="Function">computeProof</a> <a id="1212" class="Symbol">:</a> <a id="1214" class="Symbol">(</a><a id="1215" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1215" class="Bound">Γ</a> <a id="1217" class="Symbol">:</a> <a id="1219" href="Ledger.Dijkstra.Specification.Utxo.html#1283" class="Record">SubUTxOEnv</a><a id="1229" class="Symbol">)</a> <a id="1231" class="Symbol">(</a><a id="1232" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1232" class="Bound">s</a> <a id="1234" class="Symbol">:</a> <a id="1236" href="Ledger.Dijkstra.Specification.Utxo.html#1543" class="Record">UTxOState</a><a id="1245" class="Symbol">)</a> <a id="1247" class="Symbol">(</a><a id="1248" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1248" class="Bound">txSub</a> <a id="1254" class="Symbol">:</a> <a id="1256" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a><a id="1266" class="Symbol">)</a> <a id="1268" class="Symbol">→</a> <a id="1270" href="Interface.ComputationalRelation.html#237" class="Datatype">ComputationResult</a> <a id="1288" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1295" class="Symbol">(</a><a id="1296" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a> <a id="1298" href="Ledger.Dijkstra.Specification.Utxo.html#1543" class="Record">UTxOState</a> <a id="1308" class="Symbol">(</a><a id="1309" href="Ledger.Dijkstra.Specification.Utxo.html#8746" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXO⦈_</a> <a id="1326" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1215" class="Bound">Γ</a> <a id="1328" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1232" class="Bound">s</a> <a id="1330" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1248" class="Bound">txSub</a><a id="1335" class="Symbol">))</a>
      <a id="1344" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1199" class="Function">computeProof</a> <a id="1357" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1357" class="Bound">Γ</a> <a id="1359" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1359" class="Bound">s</a> <a id="1361" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1361" class="Bound">txSub</a>
        <a id="1375" class="Keyword">with</a> <a id="1380" href="Ledger.Dijkstra.Specification.Utxo.html#1860" class="Field">IsTopLevelValidFlagOf</a> <a id="1402" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1357" class="Bound">Γ</a> <a id="1404" class="Symbol">|</a> <a id="1406" href="Relation.Binary.PropositionalEquality.html#4385" class="Function">inspect</a> <a id="1414" href="Ledger.Dijkstra.Specification.Utxo.html#1860" class="Field">IsTopLevelValidFlagOf</a> <a id="1436" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1357" class="Bound">Γ</a>
      <a id="1444" class="Symbol">...</a> <a id="1448" class="Symbol">|</a> <a id="1450" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="1456" class="Symbol">|</a> <a id="1458" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="1460" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1465" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="1475" class="Keyword">with</a> <a id="1480" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1482" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="1496" class="Bound">txSub</a> <a id="1502" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="1504" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="1519" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1521" href="Ledger.Dijkstra.Specification.Utxo.html#5046" class="Datatype">inInterval</a> <a id="1532" class="Symbol">(</a><a id="1533" href="Ledger.Dijkstra.Specification.Utxo.html#2363" class="Field">SlotOf</a> <a id="1540" class="Bound">Γ</a><a id="1541" class="Symbol">)</a> <a id="1543" class="Symbol">(</a><a id="1544" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="1560" class="Bound">txSub</a><a id="1565" class="Symbol">)</a>
             <a id="1580" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1582" href="Ledger.Core.Specification.Address.html#1703" class="Field">MaybeNetworkIdOf</a> <a id="1599" class="Bound">txSub</a> <a id="1605" href="Prelude.html#2945" class="Function Operator">~</a> <a id="1607" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1612" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="1622" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="1630" class="Symbol">...</a> <a id="1634" class="Symbol">|</a> <a id="1636" class="Symbol">(</a><a id="1637" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1641" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1641" class="Bound">p</a><a id="1642" class="Symbol">)</a> <a id="1644" class="Symbol">=</a> <a id="1646" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="1654" class="Symbol">(</a><a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Dijkstra.Specification.Transaction.html#3454}{\htmlId{1657}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\htmlId{1664}{\htmlClass{Bound}{\text{s}}}\, \\ \,\href{Ledger.Prelude.Base.html#669}{\htmlId{1668}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\htmlId{1675}{\htmlClass{Bound}{\text{s}}}\, \\ \,\href{Ledger.Prelude.Base.html#554}{\htmlId{1679}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\htmlId{1691}{\htmlClass{Bound}{\text{s}}}\, \end{pmatrix}$</a> <a id="1695" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1697" href="Ledger.Dijkstra.Specification.Utxo.html#8829" class="InductiveConstructor">SUBUTXO</a> <a id="1705" class="Symbol">{</a><a id="1706" class="Argument">txSub</a> <a id="1712" class="Symbol">=</a> <a id="1714" class="Bound">txSub</a><a id="1719" class="Symbol">}</a> <a id="1721" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1641" class="Bound">p</a><a id="1722" class="Symbol">)</a>
      <a id="1730" class="Symbol">...</a> <a id="1734" class="Symbol">|</a> <a id="1736" class="Symbol">(</a><a id="1737" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1740" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1740" class="Bound">¬p</a><a id="1742" class="Symbol">)</a> <a id="1744" class="Symbol">=</a> <a id="1746" href="Interface.ComputationalRelation.html#352" class="InductiveConstructor">failure</a> <a id="1754" class="Symbol">(</a><a id="1755" href="stdlib-meta.Tactic.GenError.html#2066" class="Macro">genErrors</a> <a id="1765" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1740" class="Bound">¬p</a><a id="1767" class="Symbol">)</a>
      <a id="1775" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1199" class="Function">computeProof</a> <a id="1788" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1788" class="Bound">Γ</a> <a id="1790" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1790" class="Bound">s</a> <a id="1792" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1792" class="Bound">txSub</a> <a id="1798" class="Symbol">|</a> <a id="1800" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="1805" class="Symbol">|</a> <a id="1807" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="1809" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1814" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="1824" class="Keyword">with</a> <a id="1829" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1831" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="1845" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1792" class="Bound">txSub</a> <a id="1851" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="1853" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="1868" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1870" href="Ledger.Dijkstra.Specification.Utxo.html#5046" class="Datatype">inInterval</a> <a id="1881" class="Symbol">(</a><a id="1882" href="Ledger.Dijkstra.Specification.Utxo.html#2363" class="Field">SlotOf</a> <a id="1889" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1788" class="Bound">Γ</a><a id="1890" class="Symbol">)</a> <a id="1892" class="Symbol">(</a><a id="1893" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="1909" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1792" class="Bound">txSub</a><a id="1914" class="Symbol">)</a>
             <a id="1929" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1931" href="Ledger.Core.Specification.Address.html#1703" class="Field">MaybeNetworkIdOf</a> <a id="1948" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1792" class="Bound">txSub</a> <a id="1954" href="Prelude.html#2945" class="Function Operator">~</a> <a id="1956" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1961" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="1971" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="1979" class="Symbol">...</a> <a id="1983" class="Symbol">|</a> <a id="1985" class="Symbol">(</a><a id="1986" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1990" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1990" class="Bound">p</a><a id="1991" class="Symbol">)</a> <a id="1993" class="Symbol">=</a> <a id="1995" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="2003" class="Symbol">(</a><a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{2006}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Dijkstra.Specification.Transaction.html#3454}{\htmlId{2007}{\htmlClass{Field}{\text{UTxOOf}}}}\, \,\htmlId{2014}{\htmlClass{Bound}{\text{s}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{2016}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Dijkstra.Specification.Transaction.html#7179}{\htmlId{2018}{\htmlClass{Field}{\text{SpendInputsOf}}}}\, \,\htmlId{2032}{\htmlClass{Bound}{\text{txSub}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{2038}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,\,\htmlId{2039}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#7640}{\htmlId{2041}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, \,\href{Ledger.Dijkstra.Specification.Utxo.html#4396}{\htmlId{2044}{\htmlClass{Function}{\text{outs}}}}\, \,\htmlId{2049}{\htmlClass{Bound}{\text{txSub}}}\, \\ \,\href{Ledger.Prelude.Base.html#669}{\htmlId{2057}{\htmlClass{Field}{\text{FeesOf}}}}\, \,\htmlId{2064}{\htmlClass{Bound}{\text{s}}}\, \\ \,\href{Ledger.Prelude.Base.html#554}{\htmlId{2068}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\htmlId{2080}{\htmlClass{Bound}{\text{s}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{2082}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Prelude.Base.html#554}{\htmlId{2084}{\htmlClass{Field}{\text{DonationsOf}}}}\, \,\htmlId{2096}{\htmlClass{Bound}{\text{txSub}}}\, \end{pmatrix}$</a> <a id="2104" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2106" href="Ledger.Dijkstra.Specification.Utxo.html#8829" class="InductiveConstructor">SUBUTXO</a> <a id="2114" class="Symbol">{</a><a id="2115" class="Argument">txSub</a> <a id="2121" class="Symbol">=</a> <a id="2123" class="Bound">txSub</a><a id="2128" class="Symbol">}</a> <a id="2130" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1990" class="Bound">p</a><a id="2131" class="Symbol">)</a>
      <a id="2139" class="Symbol">...</a> <a id="2143" class="Symbol">|</a> <a id="2145" class="Symbol">(</a><a id="2146" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2149" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2149" class="Bound">¬p</a><a id="2151" class="Symbol">)</a> <a id="2153" class="Symbol">=</a> <a id="2155" href="Interface.ComputationalRelation.html#352" class="InductiveConstructor">failure</a> <a id="2163" class="Symbol">(</a><a id="2164" href="stdlib-meta.Tactic.GenError.html#2066" class="Macro">genErrors</a> <a id="2174" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2149" class="Bound">¬p</a><a id="2176" class="Symbol">)</a>


      <a id="2186" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2186" class="Function">completeness</a> <a id="2199" class="Symbol">:</a> <a id="2201" class="Symbol">(</a><a id="2202" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2202" class="Bound">Γ</a> <a id="2204" class="Symbol">:</a> <a id="2206" href="Ledger.Dijkstra.Specification.Utxo.html#1283" class="Record">SubUTxOEnv</a><a id="2216" class="Symbol">)</a> <a id="2218" class="Symbol">(</a><a id="2219" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2219" class="Bound">s</a> <a id="2221" class="Symbol">:</a> <a id="2223" href="Ledger.Dijkstra.Specification.Utxo.html#1543" class="Record">UTxOState</a><a id="2232" class="Symbol">)</a> <a id="2234" class="Symbol">(</a><a id="2235" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2235" class="Bound">txSub</a> <a id="2241" class="Symbol">:</a> <a id="2243" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a><a id="2253" class="Symbol">)</a> <a id="2255" class="Symbol">→</a> <a id="2257" class="Symbol">∀</a> <a id="2259" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2259" class="Bound">s&#39;</a> <a id="2262" class="Symbol">→</a> <a id="2264" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2202" class="Bound">Γ</a> <a id="2266" href="Ledger.Dijkstra.Specification.Utxo.html#8746" class="Datatype Operator">⊢</a> <a id="2268" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2219" class="Bound">s</a> <a id="2270" href="Ledger.Dijkstra.Specification.Utxo.html#8746" class="Datatype Operator">⇀⦇</a> <a id="2273" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2235" class="Bound">txSub</a> <a id="2279" href="Ledger.Dijkstra.Specification.Utxo.html#8746" class="Datatype Operator">,SUBUTXO⦈</a> <a id="2289" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2259" class="Bound">s&#39;</a> <a id="2292" class="Symbol">→</a> <a id="2294" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2298" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2304" class="Symbol">(</a><a id="2305" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#1199" class="Function">computeProof</a> <a id="2318" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2202" class="Bound">Γ</a> <a id="2320" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2219" class="Bound">s</a> <a id="2322" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2235" class="Bound">txSub</a><a id="2327" class="Symbol">)</a> <a id="2329" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2331" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="2339" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2259" class="Bound">s&#39;</a>
      <a id="2348" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2186" class="Function">completeness</a> <a id="2361" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2361" class="Bound">Γ</a> <a id="2363" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2363" class="Bound">s</a> <a id="2365" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2365" class="Bound">txSub</a> <a id="2371" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2371" class="Bound">s&#39;</a> <a id="2374" class="Symbol">(</a><a id="2375" href="Ledger.Dijkstra.Specification.Utxo.html#8829" class="InductiveConstructor">SUBUTXO</a> <a id="2383" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2383" class="Bound">p</a><a id="2384" class="Symbol">)</a>
        <a id="2394" class="Keyword">with</a> <a id="2399" href="Ledger.Dijkstra.Specification.Utxo.html#1860" class="Field">IsTopLevelValidFlagOf</a> <a id="2421" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2361" class="Bound">Γ</a> <a id="2423" class="Symbol">|</a> <a id="2425" href="Relation.Binary.PropositionalEquality.html#4385" class="Function">inspect</a> <a id="2433" href="Ledger.Dijkstra.Specification.Utxo.html#1860" class="Field">IsTopLevelValidFlagOf</a> <a id="2455" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2361" class="Bound">Γ</a>
      <a id="2463" class="Symbol">...</a> <a id="2467" class="Symbol">|</a> <a id="2469" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="2475" class="Symbol">|</a> <a id="2477" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="2479" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2484" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="2494" class="Keyword">with</a> <a id="2499" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2501" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="2515" class="Bound">txSub</a> <a id="2521" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="2523" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="2538" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2540" href="Ledger.Dijkstra.Specification.Utxo.html#5046" class="Datatype">inInterval</a> <a id="2551" class="Symbol">(</a><a id="2552" href="Ledger.Dijkstra.Specification.Utxo.html#2363" class="Field">SlotOf</a> <a id="2559" class="Bound">Γ</a><a id="2560" class="Symbol">)</a> <a id="2562" class="Symbol">(</a><a id="2563" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="2579" class="Bound">txSub</a><a id="2584" class="Symbol">)</a>
             <a id="2599" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2601" href="Ledger.Core.Specification.Address.html#1703" class="Field">MaybeNetworkIdOf</a> <a id="2618" class="Bound">txSub</a> <a id="2624" href="Prelude.html#2945" class="Function Operator">~</a> <a id="2626" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2631" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="2641" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="2649" class="Symbol">...</a> <a id="2653" class="Symbol">|</a>  <a id="2656" class="Symbol">(</a><a id="2657" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2661" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2661" class="Bound">p</a><a id="2662" class="Symbol">)</a> <a id="2664" class="Symbol">=</a> <a id="2666" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="2677" class="Symbol">...</a> <a id="2681" class="Symbol">|</a>  <a id="2684" class="Symbol">(</a><a id="2685" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2688" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2688" class="Bound">¬p</a><a id="2690" class="Symbol">)</a> <a id="2692" class="Symbol">=</a> <a id="2694" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="2701" class="Symbol">(</a><a id="2702" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2688" class="Bound">¬p</a> <a id="2705" class="Bound">p</a><a id="2706" class="Symbol">)</a>
      <a id="2714" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2186" class="Function">completeness</a> <a id="2727" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2727" class="Bound">Γ</a> <a id="2729" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2729" class="Bound">s</a> <a id="2731" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2731" class="Bound">txSub</a> <a id="2737" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2737" class="Bound">s&#39;</a> <a id="2740" class="Symbol">(</a><a id="2741" href="Ledger.Dijkstra.Specification.Utxo.html#8829" class="InductiveConstructor">SUBUTXO</a> <a id="2749" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2749" class="Bound">p</a><a id="2750" class="Symbol">)</a> <a id="2752" class="Symbol">|</a> <a id="2754" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>  <a id="2760" class="Symbol">|</a> <a id="2762" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">[</a> <a id="2764" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2769" href="Relation.Binary.PropositionalEquality.html#4359" class="InductiveConstructor Operator">]</a>
        <a id="2779" class="Keyword">with</a> <a id="2784" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2786" href="Ledger.Dijkstra.Specification.Transaction.html#7179" class="Field">SpendInputsOf</a> <a id="2800" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2731" class="Bound">txSub</a> <a id="2806" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="2808" href="Class.HasEmptySet.html#287" class="Field">∅</a>
             <a id="2823" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2825" href="Ledger.Dijkstra.Specification.Utxo.html#5046" class="Datatype">inInterval</a> <a id="2836" class="Symbol">(</a><a id="2837" href="Ledger.Dijkstra.Specification.Utxo.html#2363" class="Field">SlotOf</a> <a id="2844" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2727" class="Bound">Γ</a><a id="2845" class="Symbol">)</a> <a id="2847" class="Symbol">(</a><a id="2848" href="Ledger.Dijkstra.Specification.Transaction.html#7029" class="Field">ValidIntervalOf</a> <a id="2864" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2731" class="Bound">txSub</a><a id="2869" class="Symbol">)</a>
             <a id="2884" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2886" href="Ledger.Core.Specification.Address.html#1703" class="Field">MaybeNetworkIdOf</a> <a id="2903" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2731" class="Bound">txSub</a> <a id="2909" href="Prelude.html#2945" class="Function Operator">~</a> <a id="2911" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2916" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a> <a id="2926" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="2934" class="Symbol">...</a> <a id="2938" class="Symbol">|</a>  <a id="2941" class="Symbol">(</a><a id="2942" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2946" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2946" class="Bound">p</a><a id="2947" class="Symbol">)</a> <a id="2949" class="Symbol">=</a> <a id="2951" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="2962" class="Symbol">...</a> <a id="2966" class="Symbol">|</a>  <a id="2969" class="Symbol">(</a><a id="2970" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2973" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2973" class="Bound">¬p</a><a id="2975" class="Symbol">)</a> <a id="2977" class="Symbol">=</a> <a id="2979" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="2986" class="Symbol">(</a><a id="2987" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2973" class="Bound">¬p</a> <a id="2990" class="Bound">p</a><a id="2991" class="Symbol">)</a>


  <a id="Computational-UTXOS"></a><a id="2997" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2997" class="Function">Computational-UTXOS</a> <a id="3017" class="Symbol">:</a> <a id="3019" href="Interface.ComputationalRelation.html#2804" class="Record">Computational</a> <a id="3033" href="Ledger.Dijkstra.Specification.Utxo.html#8354" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="3048" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
  <a id="3057" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#2997" class="Function">Computational-UTXOS</a> <a id="3077" class="Symbol">=</a> <a id="3079" href="Interface.ComputationalRelation.html#2852" class="InductiveConstructor">MkComputational</a> <a id="3095" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3137" class="Function">computeProof</a> <a id="3108" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3475" class="Function">completeness</a>
    <a id="3125" class="Keyword">where</a>
      <a id="3137" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3137" class="Function">computeProof</a> <a id="3150" class="Symbol">:</a> <a id="3152" class="Symbol">(</a><a id="3153" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3153" class="Bound">Γ</a> <a id="3155" class="Symbol">:</a> <a id="3157" href="Ledger.Dijkstra.Specification.Utxo.html#1023" class="Record">UTxOEnv</a><a id="3164" class="Symbol">)</a> <a id="3166" class="Symbol">(</a><a id="3167" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3167" class="Bound">s</a> <a id="3169" class="Symbol">:</a> <a id="3171" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="3172" class="Symbol">)</a> <a id="3174" class="Symbol">(</a><a id="3175" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3175" class="Bound">txTop</a> <a id="3181" class="Symbol">:</a> <a id="3183" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a><a id="3193" class="Symbol">)</a>
        <a id="3203" class="Symbol">→</a> <a id="3205" href="Interface.ComputationalRelation.html#237" class="Datatype">ComputationResult</a> <a id="3223" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="3230" class="Symbol">(</a><a id="3231" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="3234" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3234" class="Bound">s&#39;</a> <a id="3237" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="3239" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3153" class="Bound">Γ</a> <a id="3241" href="Ledger.Dijkstra.Specification.Utxo.html#8354" class="Datatype Operator">⊢</a> <a id="3243" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3167" class="Bound">s</a> <a id="3245" href="Ledger.Dijkstra.Specification.Utxo.html#8354" class="Datatype Operator">⇀⦇</a> <a id="3248" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3175" class="Bound">txTop</a> <a id="3254" href="Ledger.Dijkstra.Specification.Utxo.html#8354" class="Datatype Operator">,UTXOS⦈</a> <a id="3262" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3234" class="Bound">s&#39;</a><a id="3264" class="Symbol">)</a>
      <a id="3272" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3137" class="Function">computeProof</a> <a id="3285" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3285" class="Bound">Γ</a> <a id="3287" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3287" class="Bound">s</a> <a id="3289" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3289" class="Bound">txTop</a>
        <a id="3303" class="Keyword">with</a> <a id="3308" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="3310" href="Ledger.Dijkstra.Specification.Script.Validation.html#6554" class="Function">evalP2Scripts</a> <a id="3324" class="Symbol">(</a><a id="3325" href="Ledger.Dijkstra.Specification.Utxo.html#7723" class="Function">allP2ScriptsWithContext</a> <a id="3349" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3285" class="Bound">Γ</a> <a id="3351" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3289" class="Bound">txTop</a><a id="3356" class="Symbol">)</a> <a id="3358" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3360" href="Ledger.Dijkstra.Specification.Transaction.html#8884" class="Field">IsValidFlagOf</a> <a id="3374" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3289" class="Bound">txTop</a> <a id="3380" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="3388" class="Symbol">...</a> <a id="3392" class="Symbol">|</a> <a id="3394" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3398" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3398" class="Bound">p</a> <a id="3400" class="Symbol">=</a> <a id="3402" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="3410" class="Symbol">(</a><a id="3411" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="3414" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3416" href="Ledger.Dijkstra.Specification.Utxo.html#8416" class="InductiveConstructor">UTXOS</a> <a id="3422" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3398" class="Bound">p</a><a id="3423" class="Symbol">)</a>
      <a id="3431" class="Symbol">...</a> <a id="3435" class="Symbol">|</a> <a id="3437" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3440" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3440" class="Bound">¬p</a> <a id="3443" class="Symbol">=</a> <a id="3445" href="Interface.ComputationalRelation.html#352" class="InductiveConstructor">failure</a> <a id="3453" class="Symbol">(</a><a id="3454" href="stdlib-meta.Tactic.GenError.html#2066" class="Macro">genErrors</a> <a id="3464" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3440" class="Bound">¬p</a><a id="3466" class="Symbol">)</a>

      <a id="3475" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3475" class="Function">completeness</a> <a id="3488" class="Symbol">:</a> <a id="3490" class="Symbol">(</a><a id="3491" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3491" class="Bound">Γ</a> <a id="3493" class="Symbol">:</a> <a id="3495" href="Ledger.Dijkstra.Specification.Utxo.html#1023" class="Record">UTxOEnv</a><a id="3502" class="Symbol">)</a> <a id="3504" class="Symbol">(</a><a id="3505" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3505" class="Bound">s</a> <a id="3507" class="Symbol">:</a> <a id="3509" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="3510" class="Symbol">)</a> <a id="3512" class="Symbol">(</a><a id="3513" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3513" class="Bound">txTop</a> <a id="3519" class="Symbol">:</a> <a id="3521" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a><a id="3531" class="Symbol">)</a> <a id="3533" class="Symbol">(</a><a id="3534" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3534" class="Bound">s&#39;</a> <a id="3537" class="Symbol">:</a> <a id="3539" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="3540" class="Symbol">)</a>
        <a id="3550" class="Symbol">→</a> <a id="3552" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3491" class="Bound">Γ</a> <a id="3554" href="Ledger.Dijkstra.Specification.Utxo.html#8354" class="Datatype Operator">⊢</a> <a id="3556" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3505" class="Bound">s</a> <a id="3558" href="Ledger.Dijkstra.Specification.Utxo.html#8354" class="Datatype Operator">⇀⦇</a> <a id="3561" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3513" class="Bound">txTop</a> <a id="3567" href="Ledger.Dijkstra.Specification.Utxo.html#8354" class="Datatype Operator">,UTXOS⦈</a> <a id="3575" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3534" class="Bound">s&#39;</a>
        <a id="3586" class="Symbol">→</a> <a id="3588" class="Symbol">(</a><a id="3589" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3593" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3599" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="3601" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3137" class="Function">computeProof</a> <a id="3614" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3491" class="Bound">Γ</a> <a id="3616" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3505" class="Bound">s</a> <a id="3618" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3513" class="Bound">txTop</a><a id="3623" class="Symbol">)</a> <a id="3625" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3627" href="Interface.ComputationalRelation.html#310" class="InductiveConstructor">success</a> <a id="3635" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3534" class="Bound">s&#39;</a>
      <a id="3644" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3475" class="Function">completeness</a> <a id="3657" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3657" class="Bound">Γ</a> <a id="3659" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3659" class="Bound">s</a> <a id="3661" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3661" class="Bound">txTop</a> <a id="3667" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3667" class="Bound">s&#39;</a> <a id="3670" class="Symbol">(</a><a id="3671" href="Ledger.Dijkstra.Specification.Utxo.html#8416" class="InductiveConstructor">UTXOS</a> <a id="3677" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3677" class="Bound">p</a><a id="3678" class="Symbol">)</a>
        <a id="3688" class="Keyword">with</a> <a id="3693" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="3695" href="Ledger.Dijkstra.Specification.Script.Validation.html#6554" class="Function">evalP2Scripts</a> <a id="3709" class="Symbol">(</a><a id="3710" href="Ledger.Dijkstra.Specification.Utxo.html#7723" class="Function">allP2ScriptsWithContext</a> <a id="3734" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3657" class="Bound">Γ</a> <a id="3736" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3661" class="Bound">txTop</a><a id="3741" class="Symbol">)</a> <a id="3743" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3745" href="Ledger.Dijkstra.Specification.Transaction.html#8884" class="Field">IsValidFlagOf</a> <a id="3759" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3661" class="Bound">txTop</a> <a id="3765" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
      <a id="3773" class="Symbol">...</a> <a id="3777" class="Symbol">|</a> <a id="3779" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="3783" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3783" class="Bound">p</a> <a id="3785" class="Symbol">=</a> <a id="3787" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="3798" class="Symbol">...</a> <a id="3802" class="Symbol">|</a> <a id="3804" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="3807" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3807" class="Bound">¬p</a> <a id="3810" class="Symbol">=</a> <a id="3812" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="3819" class="Symbol">(</a><a id="3820" href="Ledger.Dijkstra.Specification.Utxo.Properties.Computational.html#3807" class="Bound">¬p</a> <a id="3823" class="Bound">p</a><a id="3824" class="Symbol">)</a>


<a id="3828" class="Comment">{--
  Computational-UTXO : Computational _⊢_⇀⦇_,UTXO⦈_ String
  Computational-UTXO = MkComputational computeProof completeness
    where
      open Computational Computational-UTXOS
        renaming (computeProof to computeProof-UTXOS
                 ; completeness to completeness-UTXOS)

      -- All UTXO premises except the UTXOS premise and the final s₁≡... equality.
      H : (Γ : UTxOEnv) (txTop : TopLevelTx) (utxo : UTxO) (fees : Fees) (donations : Donations) → Type
      H Γ txTop utxo fees donations =
            (SpendInputsOf txTop ≢ ∅)
          × (inInterval (SlotOf Γ) (ValidIntervalOf txTop))
          × (minfee (PParamsOf Γ) txTop utxo ≤ TxFeesOf txTop)
          × (consumed txTop (DepositsChangeOf Γ) (UTxOOf Γ) ≡ produced txTop (DepositsChangeOf Γ))
          × (SizeOf txTop ≤ maxTxSize (PParamsOf Γ))
          × (refScriptsSize txTop (UTxOOf Γ) ≤ (PParamsOf Γ) .maxRefScriptSizePerTx)
          × (allSpendInputs txTop ⊆ dom (UTxOOf Γ))
          × (allReferenceInputs txTop ⊆ dom (UTxOOf Γ))
          × (NoOverlappingSpendInputs txTop)
          × (requiredGuardsInTopLevel txTop (SubTransactionsOf txTop))
          × ((RedeemersOf txTop ˢ ≢ ∅) → collateralCheck (PParamsOf Γ) txTop (UTxOOf Γ))
          × (allMintedCoin txTop ≡ 0)
          × (∀[ (_ , o) ∈ ∣ TxOutsOf txTop ∣ ]
                (inject ((160 + utxoEntrySize o) * coinsPerUTxOByte (PParamsOf Γ)) ≤ᵗ txOutToValue o)
              × (serializedSize (txOutToValue o) ≤ maxValSize (PParamsOf Γ)))
          × (∀[ (a , _) ∈ range (TxOutsOf txTop) ]
                (Sum.All (const ⊤) (λ a → AttrSizeOf a ≤ 64)) a × (netId a ≡ NetworkId))
          × (∀[ a ∈ dom (WithdrawalsOf txTop)] NetworkIdOf a ≡ NetworkId)
          × (MaybeNetworkIdOf txTop ~ just NetworkId)
          × (CurrentTreasuryOf txTop  ~ just (TreasuryOf Γ))

      computeProof :  (Γ : UTxOEnv) (s : UTxOState) (txTop : TopLevelTx)
                      → ComputationResult String (∃[ s&#39; ] Γ ⊢ s ⇀⦇ txTop ,UTXO⦈ s&#39;)
      computeProof Γ s txTop with ¿ H Γ txTop (UTxOOf s) (FeesOf s) (DonationsOf s) ¿
      ... | no ¬h = failure (genErrors ¬h)
      ... | yes h = Goal h
        where
        Goal : H Γ txTop (UTxOOf s) (FeesOf s) (DonationsOf s) → ComputationResult String (∃-syntax (_⊢_⇀⦇_,UTXO⦈_ Γ s txTop))
        Goal h with (computeProof-UTXOS Γ tt txTop)
        ... | (failure es) = failure es
        ... | (success p) = success (getS₁ Γ s txTop , UTXO-step (h , proj₂ p , refl))

      completeness :  (Γ : UTxOEnv) (s : UTxOState) (txTop : TopLevelTx) (s&#39; : UTxOState)
                      → Γ ⊢ s ⇀⦇ txTop ,UTXO⦈ s&#39;
                      → (map proj₁ $ computeProof Γ s txTop) ≡ success s&#39;
      completeness Γ s txTop s&#39; (UTXO premises) = ?
--}</a>

</pre></body></html>