<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Transaction</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>
<a id="25" class="Keyword">module</a> <a id="32" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a> <a id="74" class="Keyword">where</a>

<a id="81" class="Keyword">import</a> <a id="88" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="104" class="Symbol">as</a> <a id="107" class="Module">M</a>

<a id="110" class="Keyword">open</a> <a id="115" class="Keyword">import</a> <a id="122" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="137" class="Keyword">renaming</a> <a id="146" class="Symbol">(</a><a id="147" href="abstract-set-theory.FiniteSetTheory.html#4102" class="Function">filterᵐ</a> <a id="155" class="Symbol">to</a> <a id="158" class="Function">filter</a><a id="164" class="Symbol">)</a>

<a id="167" class="Keyword">open</a> <a id="172" class="Keyword">import</a> <a id="179" href="Ledger.Core.Specification.Crypto.html" class="Module">Ledger.Core.Specification.Crypto</a>
<a id="212" class="Keyword">open</a> <a id="217" class="Keyword">import</a> <a id="224" href="Ledger.Core.Specification.Epoch.html" class="Module">Ledger.Core.Specification.Epoch</a>
<a id="256" class="Keyword">open</a> <a id="261" class="Keyword">import</a> <a id="268" href="Ledger.Dijkstra.Specification.Gov.Base.html" class="Module">Ledger.Dijkstra.Specification.Gov.Base</a>

<a id="308" class="Keyword">import</a> <a id="315" href="Ledger.Core.Specification.Address.html" class="Module">Ledger.Core.Specification.Address</a> <a id="349" class="Keyword">renaming</a> <a id="358" class="Symbol">(</a><a id="359" href="Ledger.Core.Specification.Address.html#1313" class="Record">RwdAddr</a> <a id="367" class="Symbol">to</a> <a id="370" class="Record">RewardAddress</a><a id="383" class="Symbol">)</a>
<a id="385" class="Keyword">import</a> <a id="392" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a>
<a id="428" class="Keyword">import</a> <a id="435" href="Ledger.Dijkstra.Specification.Gov.Actions.html" class="Module">Ledger.Dijkstra.Specification.Gov.Actions</a>
<a id="477" class="Keyword">import</a> <a id="484" href="Ledger.Dijkstra.Specification.PParams.html" class="Module">Ledger.Dijkstra.Specification.PParams</a>
<a id="522" class="Keyword">import</a> <a id="529" href="Ledger.Dijkstra.Specification.Script.html" class="Module">Ledger.Dijkstra.Specification.Script</a>
<a id="566" class="Keyword">import</a> <a id="573" href="Ledger.Dijkstra.Specification.TokenAlgebra.Base.html" class="Module">Ledger.Dijkstra.Specification.TokenAlgebra.Base</a>

<a id="622" class="Keyword">open</a> <a id="627" class="Keyword">import</a> <a id="634" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>
<a id="654" class="Keyword">open</a> <a id="659" class="Keyword">import</a> <a id="666" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="693" class="Keyword">using</a> <a id="699" class="Symbol">(</a><a id="700" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌊_⌋</a><a id="703" class="Symbol">)</a>


<a id="707" class="Keyword">data</a> <a id="TxLevel"></a><a id="712" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a> <a id="720" class="Symbol">:</a> <a id="722" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="727" class="Keyword">where</a>
  <a id="TxLevel.TxLevelTop"></a><a id="735" href="Ledger.Dijkstra.Specification.Transaction.html#735" class="InductiveConstructor">TxLevelTop</a> <a id="TxLevel.TxLevelSub"></a><a id="746" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a> <a id="757" class="Symbol">:</a> <a id="759" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a>


<a id="InTopLevel"></a><a id="769" href="Ledger.Dijkstra.Specification.Transaction.html#769" class="Function">InTopLevel</a> <a id="780" class="Symbol">:</a> <a id="782" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a> <a id="790" class="Symbol">→</a> <a id="792" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="797" class="Symbol">→</a> <a id="799" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="804" href="Ledger.Dijkstra.Specification.Transaction.html#769" class="Function">InTopLevel</a> <a id="815" href="Ledger.Dijkstra.Specification.Transaction.html#735" class="InductiveConstructor">TxLevelTop</a> <a id="826" href="Ledger.Dijkstra.Specification.Transaction.html#826" class="Bound">X</a> <a id="828" class="Symbol">=</a> <a id="830" href="Ledger.Dijkstra.Specification.Transaction.html#826" class="Bound">X</a>
<a id="832" href="Ledger.Dijkstra.Specification.Transaction.html#769" class="Function">InTopLevel</a> <a id="843" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a> <a id="854" class="Symbol">_</a> <a id="856" class="Symbol">=</a> <a id="858" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="InSubLevel"></a><a id="861" href="Ledger.Dijkstra.Specification.Transaction.html#861" class="Function">InSubLevel</a> <a id="872" class="Symbol">:</a> <a id="874" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a> <a id="882" class="Symbol">→</a> <a id="884" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="889" class="Symbol">→</a> <a id="891" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="896" href="Ledger.Dijkstra.Specification.Transaction.html#861" class="Function">InSubLevel</a> <a id="907" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a> <a id="918" href="Ledger.Dijkstra.Specification.Transaction.html#918" class="Bound">X</a> <a id="920" class="Symbol">=</a> <a id="922" href="Ledger.Dijkstra.Specification.Transaction.html#918" class="Bound">X</a>
<a id="924" href="Ledger.Dijkstra.Specification.Transaction.html#861" class="Function">InSubLevel</a> <a id="935" href="Ledger.Dijkstra.Specification.Transaction.html#735" class="InductiveConstructor">TxLevelTop</a> <a id="946" class="Symbol">_</a> <a id="948" class="Symbol">=</a> <a id="950" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>


<a id="954" class="Keyword">unquoteDecl</a> <a id="DecEq-TxLevel"></a><a id="966" href="Ledger.Dijkstra.Specification.Transaction.html#966" class="Function">DecEq-TxLevel</a> <a id="980" class="Symbol">=</a> <a id="982" href="Tactic.Derive.DecEq.html#5150" class="Function">derive-DecEq</a> <a id="995" class="Symbol">((</a><a id="997" class="Keyword">quote</a> <a id="1003" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a> <a id="1011" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1013" href="Ledger.Dijkstra.Specification.Transaction.html#966" class="Function">DecEq-TxLevel</a><a id="1026" class="Symbol">)</a> <a id="1028" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1030" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1032" class="Symbol">)</a>

<a id="1035" class="Keyword">private</a>
  <a id="1045" class="Keyword">variable</a>
    <a id="1058" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a> <a id="1066" class="Symbol">:</a> <a id="1068" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a>

<a id="1077" class="Keyword">data</a> <a id="Tag"></a><a id="1082" href="Ledger.Dijkstra.Specification.Transaction.html#1082" class="Datatype">Tag</a> <a id="1086" class="Symbol">:</a> <a id="1088" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a> <a id="1096" class="Symbol">→</a> <a id="1098" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1103" class="Keyword">where</a>
  <a id="Tag.Spend"></a><a id="1111" href="Ledger.Dijkstra.Specification.Transaction.html#1111" class="InductiveConstructor">Spend</a> <a id="Tag.Mint"></a><a id="1117" href="Ledger.Dijkstra.Specification.Transaction.html#1117" class="InductiveConstructor">Mint</a> <a id="Tag.Cert"></a><a id="1122" href="Ledger.Dijkstra.Specification.Transaction.html#1122" class="InductiveConstructor">Cert</a> <a id="Tag.Reward"></a><a id="1127" href="Ledger.Dijkstra.Specification.Transaction.html#1127" class="InductiveConstructor">Reward</a> <a id="Tag.Vote"></a><a id="1134" href="Ledger.Dijkstra.Specification.Transaction.html#1134" class="InductiveConstructor">Vote</a> <a id="Tag.Propose"></a><a id="1139" href="Ledger.Dijkstra.Specification.Transaction.html#1139" class="InductiveConstructor">Propose</a> <a id="Tag.Guard"></a><a id="1147" href="Ledger.Dijkstra.Specification.Transaction.html#1147" class="InductiveConstructor">Guard</a> <a id="1153" class="Symbol">:</a> <a id="1155" href="Ledger.Dijkstra.Specification.Transaction.html#1082" class="Datatype">Tag</a> <a id="1159" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a>
  <a id="Tag.SubGuard"></a><a id="1169" href="Ledger.Dijkstra.Specification.Transaction.html#1169" class="InductiveConstructor">SubGuard</a> <a id="1178" class="Symbol">:</a> <a id="1180" href="Ledger.Dijkstra.Specification.Transaction.html#1082" class="Datatype">Tag</a> <a id="1184" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a>

<a id="1196" class="Keyword">unquoteDecl</a> <a id="DecEq-Tag"></a><a id="1208" href="Ledger.Dijkstra.Specification.Transaction.html#1208" class="Function">DecEq-Tag</a> <a id="1218" class="Symbol">=</a> <a id="1220" href="Tactic.Derive.DecEq.html#5150" class="Function">derive-DecEq</a> <a id="1233" class="Symbol">((</a><a id="1235" class="Keyword">quote</a> <a id="1241" href="Ledger.Dijkstra.Specification.Transaction.html#1082" class="Datatype">Tag</a> <a id="1245" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1247" href="Ledger.Dijkstra.Specification.Transaction.html#1208" class="Function">DecEq-Tag</a><a id="1256" class="Symbol">)</a> <a id="1258" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1260" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1262" class="Symbol">)</a>


<a id="1266" class="Keyword">record</a> <a id="TransactionStructure"></a><a id="1273" href="Ledger.Dijkstra.Specification.Transaction.html#1273" class="Record">TransactionStructure</a> <a id="1294" class="Symbol">:</a> <a id="1296" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="1302" class="Keyword">where</a>
  <a id="1310" class="Keyword">field</a>
    <a id="TransactionStructure.Ix"></a><a id="1320" href="Ledger.Dijkstra.Specification.Transaction.html#1320" class="Field">Ix</a> <a id="TransactionStructure.TxId"></a><a id="1323" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a> <a id="TransactionStructure.AuxiliaryData"></a><a id="1328" href="Ledger.Dijkstra.Specification.Transaction.html#1328" class="Field">AuxiliaryData</a>  <a id="1343" class="Symbol">:</a> <a id="1345" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="TransactionStructure.adHashingScheme"></a><a id="1354" href="Ledger.Dijkstra.Specification.Transaction.html#1354" class="Field">adHashingScheme</a>        <a id="1377" class="Symbol">:</a> <a id="1379" href="Ledger.Core.Specification.Crypto.html#167" class="Record">isHashableSet</a> <a id="1393" href="Ledger.Dijkstra.Specification.Transaction.html#1328" class="Field">AuxiliaryData</a>
    <a id="TransactionStructure.globalConstants"></a><a id="1411" href="Ledger.Dijkstra.Specification.Transaction.html#1411" class="Field">globalConstants</a>        <a id="1434" class="Symbol">:</a> <a id="1436" href="Ledger.Core.Specification.Epoch.html#2274" class="Record">GlobalConstants</a>
    <a id="TransactionStructure.crypto"></a><a id="1456" href="Ledger.Dijkstra.Specification.Transaction.html#1456" class="Field">crypto</a>                 <a id="1479" class="Symbol">:</a> <a id="1481" href="Ledger.Core.Specification.Crypto.html#1110" class="Record">CryptoStructure</a>
    <a id="TransactionStructure.epochStructure"></a><a id="1501" href="Ledger.Dijkstra.Specification.Transaction.html#1501" class="Field">epochStructure</a>         <a id="1524" class="Symbol">:</a> <a id="1526" href="Ledger.Core.Specification.Epoch.html#578" class="Record">EpochStructure</a>


    <a id="1547" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-Ix"></a><a id="1549" href="Ledger.Dijkstra.Specification.Transaction.html#1549" class="Field">DecEq-Ix</a>   <a id="1560" class="Symbol">⦄</a> <a id="1562" class="Symbol">:</a> <a id="1564" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="1570" href="Ledger.Dijkstra.Specification.Transaction.html#1320" class="Field">Ix</a>
    <a id="1577" class="Symbol">⦃</a> <a id="TransactionStructure.DecEq-TxId"></a><a id="1579" href="Ledger.Dijkstra.Specification.Transaction.html#1579" class="Field">DecEq-TxId</a> <a id="1590" class="Symbol">⦄</a> <a id="1592" class="Symbol">:</a> <a id="1594" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="1600" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a>
  <a id="1607" class="Keyword">open</a> <a id="1612" href="Ledger.Core.Specification.Crypto.html#167" class="Module">isHashableSet</a> <a id="1626" href="Ledger.Dijkstra.Specification.Transaction.html#1354" class="Field">adHashingScheme</a> <a id="1642" class="Keyword">renaming</a> <a id="1651" class="Symbol">(</a><a id="1652" href="Ledger.Core.Specification.Crypto.html#244" class="Field">THash</a> <a id="1658" class="Symbol">to</a> <a id="1661" class="Field">ADHash</a><a id="1667" class="Symbol">)</a> <a id="1669" class="Keyword">public</a>
  <a id="1678" class="Keyword">open</a> <a id="1683" href="Ledger.Core.Specification.Epoch.html#2274" class="Module">GlobalConstants</a> <a id="1699" href="Ledger.Dijkstra.Specification.Transaction.html#1411" class="Field">globalConstants</a> <a id="1715" class="Keyword">public</a>
  <a id="1724" class="Keyword">open</a> <a id="1729" href="Ledger.Core.Specification.Crypto.html#1110" class="Module">CryptoStructure</a> <a id="1745" href="Ledger.Dijkstra.Specification.Transaction.html#1456" class="Field">crypto</a> <a id="1752" class="Keyword">public</a>
  <a id="1761" class="Keyword">open</a> <a id="1766" href="Ledger.Dijkstra.Specification.TokenAlgebra.Base.html" class="Module">Ledger.Dijkstra.Specification.TokenAlgebra.Base</a> <a id="1814" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a> <a id="1825" class="Keyword">public</a>
  <a id="1834" class="Keyword">open</a> <a id="1839" href="Ledger.Core.Specification.Address.html" class="Module">Ledger.Core.Specification.Address</a> <a id="1873" href="Ledger.Core.Specification.Epoch.html#2313" class="Function">Network</a> <a id="1881" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a> <a id="1889" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a> <a id="1900" class="Symbol">⦃</a> <a id="1902" href="Function.Base.html#4755" class="Function">it</a> <a id="1905" class="Symbol">⦄</a> <a id="1907" class="Symbol">⦃</a> <a id="1909" href="Function.Base.html#4755" class="Function">it</a> <a id="1912" class="Symbol">⦄</a> <a id="1914" class="Symbol">⦃</a> <a id="1916" href="Function.Base.html#4755" class="Function">it</a> <a id="1919" class="Symbol">⦄</a> <a id="1921" class="Keyword">public</a>
  <a id="1930" class="Keyword">open</a> <a id="1935" href="Ledger.Core.Specification.Epoch.html#578" class="Module">EpochStructure</a> <a id="1950" href="Ledger.Dijkstra.Specification.Transaction.html#1501" class="Field">epochStructure</a> <a id="1965" class="Keyword">public</a>
  <a id="1974" class="Keyword">open</a> <a id="1979" href="Ledger.Dijkstra.Specification.Script.html" class="Module">Ledger.Dijkstra.Specification.Script</a> <a id="2016" href="Ledger.Dijkstra.Specification.Transaction.html#1456" class="Field">crypto</a> <a id="2023" href="Ledger.Dijkstra.Specification.Transaction.html#1501" class="Field">epochStructure</a> <a id="2038" class="Keyword">public</a>
  <a id="2047" class="Keyword">field</a>


    <a id="TransactionStructure.scriptStructure"></a><a id="2059" href="Ledger.Dijkstra.Specification.Transaction.html#2059" class="Field">scriptStructure</a>        <a id="2082" class="Symbol">:</a> <a id="2084" href="Ledger.Conway.Specification.Script.Base.html#2050" class="Record">ScriptStructure</a>


  <a id="2104" class="Keyword">open</a> <a id="2109" href="Ledger.Conway.Specification.Script.Base.html#2050" class="Module">ScriptStructure</a> <a id="2125" href="Ledger.Dijkstra.Specification.Transaction.html#2059" class="Field">scriptStructure</a> <a id="2141" class="Keyword">public</a>
  <a id="2150" class="Keyword">open</a> <a id="2155" href="Ledger.Dijkstra.Specification.PParams.html" class="Module">Ledger.Dijkstra.Specification.PParams</a> <a id="2193" href="Ledger.Dijkstra.Specification.Transaction.html#1456" class="Field">crypto</a> <a id="2200" href="Ledger.Dijkstra.Specification.Transaction.html#1501" class="Field">epochStructure</a> <a id="2215" href="Ledger.Dijkstra.Specification.Transaction.html#2059" class="Field">scriptStructure</a> <a id="2231" class="Keyword">public</a>
  <a id="2240" class="Keyword">field</a>


    <a id="TransactionStructure.govParams"></a><a id="2252" href="Ledger.Dijkstra.Specification.Transaction.html#2252" class="Field">govParams</a>              <a id="2275" class="Symbol">:</a> <a id="2277" href="Ledger.Conway.Specification.PParams.html#13997" class="Record">GovParams</a>
    <a id="TransactionStructure.tokenAlgebra"></a><a id="2291" href="Ledger.Dijkstra.Specification.Transaction.html#2291" class="Field">tokenAlgebra</a>           <a id="2314" class="Symbol">:</a> <a id="2316" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#478" class="Record">TokenAlgebra</a>
    <a id="TransactionStructure.txidBytes"></a><a id="2333" href="Ledger.Dijkstra.Specification.Transaction.html#2333" class="Field">txidBytes</a>              <a id="2356" class="Symbol">:</a> <a id="2358" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a> <a id="2363" class="Symbol">→</a> <a id="2365" href="Ledger.Core.Specification.Crypto.html#659" class="Function">Ser</a>


  <a id="2373" class="Keyword">open</a> <a id="2378" href="Ledger.Conway.Specification.PParams.html#13997" class="Module">GovParams</a> <a id="2388" href="Ledger.Dijkstra.Specification.Transaction.html#2252" class="Field">govParams</a> <a id="2398" class="Keyword">public</a>
  <a id="2407" class="Keyword">open</a> <a id="2412" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#478" class="Module">TokenAlgebra</a> <a id="2425" href="Ledger.Dijkstra.Specification.Transaction.html#2291" class="Field">tokenAlgebra</a> <a id="2438" class="Keyword">public</a>


  <a id="TransactionStructure.govStructure"></a><a id="2449" href="Ledger.Dijkstra.Specification.Transaction.html#2449" class="Function">govStructure</a> <a id="2462" class="Symbol">:</a> <a id="2464" href="Ledger.Conway.Specification.Gov.Base.html#326" class="Record">GovStructure</a>
  <a id="2479" href="Ledger.Dijkstra.Specification.Transaction.html#2449" class="Function">govStructure</a> <a id="2492" class="Symbol">=</a> <a id="2494" class="Keyword">record</a>
    <a id="2505" class="Comment">-- TODO: figure out what to do with the hash</a>
    <a id="2554" class="Symbol">{</a> <a id="2556" href="Ledger.Conway.Specification.Gov.Base.html#361" class="Field">TxId</a> <a id="2561" class="Symbol">=</a> <a id="2563" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a><a id="2567" class="Symbol">;</a> <a id="2569" href="Ledger.Conway.Specification.Gov.Base.html#366" class="Field">DocHash</a> <a id="2577" class="Symbol">=</a> <a id="2579" href="Ledger.Dijkstra.Specification.Transaction.html#1661" class="Function">ADHash</a>
    <a id="2590" class="Symbol">;</a> <a id="2592" href="Ledger.Conway.Specification.Gov.Base.html#426" class="Field">cryptoStructure</a> <a id="2608" class="Symbol">=</a> <a id="2610" href="Ledger.Dijkstra.Specification.Transaction.html#1456" class="Field">crypto</a>
    <a id="2621" class="Symbol">;</a> <a id="2623" href="Ledger.Conway.Specification.Gov.Base.html#501" class="Field">epochStructure</a> <a id="2638" class="Symbol">=</a> <a id="2640" href="Ledger.Dijkstra.Specification.Transaction.html#1501" class="Field">epochStructure</a>
    <a id="2659" class="Symbol">;</a> <a id="2661" href="Ledger.Conway.Specification.Gov.Base.html#573" class="Field">scriptStructure</a> <a id="2677" class="Symbol">=</a> <a id="2679" href="Ledger.Dijkstra.Specification.Transaction.html#2059" class="Field">scriptStructure</a>
    <a id="2699" class="Symbol">;</a> <a id="2701" href="Ledger.Conway.Specification.Gov.Base.html#791" class="Field">govParams</a> <a id="2711" class="Symbol">=</a> <a id="2713" href="Ledger.Dijkstra.Specification.Transaction.html#2252" class="Field">govParams</a>
    <a id="2727" class="Symbol">;</a> <a id="2729" href="Ledger.Conway.Specification.Gov.Base.html#856" class="Field">globalConstants</a> <a id="2745" class="Symbol">=</a> <a id="2747" href="Ledger.Dijkstra.Specification.Transaction.html#1411" class="Field">globalConstants</a>
    <a id="2767" class="Symbol">}</a>


  <a id="2773" class="Keyword">module</a> <a id="TransactionStructure.GovernanceActions"></a><a id="2780" href="Ledger.Dijkstra.Specification.Transaction.html#2780" class="Module">GovernanceActions</a> <a id="2798" class="Symbol">=</a> <a id="2800" href="Ledger.Dijkstra.Specification.Gov.Actions.html" class="Module">Ledger.Dijkstra.Specification.Gov.Actions</a> <a id="2842" href="Ledger.Dijkstra.Specification.Transaction.html#2449" class="Function">govStructure</a>
  <a id="2857" class="Keyword">open</a> <a id="2862" href="Ledger.Dijkstra.Specification.Transaction.html#2780" class="Module">GovernanceActions</a> <a id="2880" class="Keyword">hiding</a> <a id="2887" class="Symbol">(</a><a id="2888" href="Ledger.Conway.Specification.Gov.Actions.html#2029" class="Datatype">Vote</a><a id="2892" class="Symbol">;</a> <a id="2894" href="Ledger.Conway.Specification.Gov.Actions.html#2049" class="InductiveConstructor">yes</a><a id="2897" class="Symbol">;</a> <a id="2899" href="Ledger.Conway.Specification.Gov.Actions.html#2053" class="InductiveConstructor">no</a><a id="2901" class="Symbol">;</a> <a id="2903" href="Ledger.Conway.Specification.Gov.Actions.html#2056" class="InductiveConstructor">abstain</a><a id="2910" class="Symbol">)</a> <a id="2912" class="Keyword">public</a>

  <a id="2922" class="Keyword">open</a> <a id="2927" class="Keyword">import</a> <a id="2934" href="Ledger.Dijkstra.Specification.Certs.html" class="Module">Ledger.Dijkstra.Specification.Certs</a> <a id="2970" href="Ledger.Dijkstra.Specification.Transaction.html#2449" class="Function">govStructure</a>


  <a id="TransactionStructure.TxIn"></a><a id="2987" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a> <a id="2992" class="Symbol">:</a> <a id="2994" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3001" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a> <a id="3006" class="Symbol">=</a> <a id="3008" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a> <a id="3013" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3015" href="Ledger.Dijkstra.Specification.Transaction.html#1320" class="Field">Ix</a>

  <a id="TransactionStructure.TxOut"></a><a id="3021" href="Ledger.Dijkstra.Specification.Transaction.html#3021" class="Function">TxOut</a> <a id="3027" class="Symbol">:</a> <a id="3029" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3036" href="Ledger.Dijkstra.Specification.Transaction.html#3021" class="Function">TxOut</a> <a id="3042" class="Symbol">=</a> <a id="3044" href="Ledger.Core.Specification.Address.html#2475" class="Function">Addr</a> <a id="3049" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3051" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a> <a id="3057" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3059" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3065" class="Symbol">(</a><a id="3066" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a> <a id="3072" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3074" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a><a id="3082" class="Symbol">)</a> <a id="3084" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3086" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3092" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>

  <a id="TransactionStructure.UTxO"></a><a id="3102" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="3107" class="Symbol">:</a> <a id="3109" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3116" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="3121" class="Symbol">=</a> <a id="3123" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a> <a id="3128" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="3130" href="Ledger.Dijkstra.Specification.Transaction.html#3021" class="Function">TxOut</a>

  <a id="TransactionStructure.RedeemerPtr"></a><a id="3139" href="Ledger.Dijkstra.Specification.Transaction.html#3139" class="Function">RedeemerPtr</a> <a id="3151" class="Symbol">:</a> <a id="3153" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a> <a id="3161" class="Symbol">→</a> <a id="3163" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3170" href="Ledger.Dijkstra.Specification.Transaction.html#3139" class="Function">RedeemerPtr</a> <a id="3182" href="Ledger.Dijkstra.Specification.Transaction.html#3182" class="Bound">txLevel</a>  <a id="3191" class="Symbol">=</a> <a id="3193" href="Ledger.Dijkstra.Specification.Transaction.html#1082" class="Datatype">Tag</a> <a id="3197" href="Ledger.Dijkstra.Specification.Transaction.html#3182" class="Bound">txLevel</a> <a id="3205" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3207" href="Ledger.Dijkstra.Specification.Transaction.html#1320" class="Field">Ix</a>

  <a id="TransactionStructure.ProposedPPUpdates"></a><a id="3213" href="Ledger.Dijkstra.Specification.Transaction.html#3213" class="Function">ProposedPPUpdates</a> <a id="3231" class="Symbol">:</a> <a id="3233" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3240" href="Ledger.Dijkstra.Specification.Transaction.html#3213" class="Function">ProposedPPUpdates</a> <a id="3258" class="Symbol">=</a> <a id="3260" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a> <a id="3268" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="3270" href="Ledger.Conway.Specification.PParams.html#14095" class="Function">PParamsUpdate</a>

  <a id="TransactionStructure.Update"></a><a id="3287" href="Ledger.Dijkstra.Specification.Transaction.html#3287" class="Function">Update</a> <a id="3294" class="Symbol">:</a> <a id="3296" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3303" href="Ledger.Dijkstra.Specification.Transaction.html#3287" class="Function">Update</a> <a id="3310" class="Symbol">=</a> <a id="3312" href="Ledger.Dijkstra.Specification.Transaction.html#3213" class="Function">ProposedPPUpdates</a> <a id="3330" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3332" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a>

  <a id="3341" class="Keyword">record</a> <a id="TransactionStructure.HasUTxO"></a><a id="3348" href="Ledger.Dijkstra.Specification.Transaction.html#3348" class="Record">HasUTxO</a> <a id="3356" class="Symbol">{</a><a id="3357" href="Ledger.Dijkstra.Specification.Transaction.html#3357" class="Bound">a</a><a id="3358" class="Symbol">}</a> <a id="3360" class="Symbol">(</a><a id="3361" href="Ledger.Dijkstra.Specification.Transaction.html#3361" class="Bound">A</a> <a id="3363" class="Symbol">:</a> <a id="3365" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3370" href="Ledger.Dijkstra.Specification.Transaction.html#3357" class="Bound">a</a><a id="3371" class="Symbol">)</a> <a id="3373" class="Symbol">:</a> <a id="3375" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3380" href="Ledger.Dijkstra.Specification.Transaction.html#3357" class="Bound">a</a> <a id="3382" class="Keyword">where</a>
    <a id="3392" class="Keyword">field</a> <a id="3398" href="Ledger.Dijkstra.Specification.Transaction.html#3398" class="Field">UTxOOf</a> <a id="3405" class="Symbol">:</a> <a id="3407" href="Ledger.Dijkstra.Specification.Transaction.html#3361" class="Bound">A</a> <a id="3409" class="Symbol">→</a> <a id="3411" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a>
  <a id="3418" class="Keyword">open</a> <a id="3423" href="Ledger.Dijkstra.Specification.Transaction.html#3348" class="Module">HasUTxO</a> <a id="3431" class="Symbol">⦃...⦄</a> <a id="3437" class="Keyword">public</a>


  <a id="3448" class="Keyword">mutual</a>
    <a id="3459" class="Keyword">record</a> <a id="TransactionStructure.Tx"></a><a id="3466" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="3469" class="Symbol">(</a><a id="3470" href="Ledger.Dijkstra.Specification.Transaction.html#3470" class="Bound">txLevel</a> <a id="3478" class="Symbol">:</a> <a id="3480" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a><a id="3487" class="Symbol">)</a> <a id="3489" class="Symbol">:</a> <a id="3491" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3496" class="Keyword">where</a>
      <a id="3508" class="Keyword">inductive</a>
      <a id="3524" class="Keyword">field</a>
        <a id="3538" href="Ledger.Dijkstra.Specification.Transaction.html#3538" class="Field">txBody</a>       <a id="3551" class="Symbol">:</a> <a id="3553" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="3560" href="Ledger.Dijkstra.Specification.Transaction.html#3470" class="Bound">txLevel</a>
        <a id="3576" href="Ledger.Dijkstra.Specification.Transaction.html#3576" class="Field">txWitnesses</a>  <a id="3589" class="Symbol">:</a> <a id="3591" href="Ledger.Dijkstra.Specification.Transaction.html#5122" class="Record">TxWitnesses</a> <a id="3603" href="Ledger.Dijkstra.Specification.Transaction.html#3470" class="Bound">txLevel</a>
        <a id="3619" href="Ledger.Dijkstra.Specification.Transaction.html#3619" class="Field">isValid</a>      <a id="3632" class="Symbol">:</a> <a id="3634" href="Ledger.Dijkstra.Specification.Transaction.html#769" class="Function">InTopLevel</a> <a id="3645" href="Ledger.Dijkstra.Specification.Transaction.html#3470" class="Bound">txLevel</a> <a id="3653" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
        <a id="3666" href="Ledger.Dijkstra.Specification.Transaction.html#3666" class="Field">txAuxData</a>    <a id="3679" class="Symbol">:</a> <a id="3681" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3687" href="Ledger.Dijkstra.Specification.Transaction.html#1328" class="Field">AuxiliaryData</a>

    <a id="3706" class="Keyword">record</a> <a id="TransactionStructure.TxBody"></a><a id="3713" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="3720" class="Symbol">(</a><a id="3721" href="Ledger.Dijkstra.Specification.Transaction.html#3721" class="Bound">txLevel</a> <a id="3729" class="Symbol">:</a> <a id="3731" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a><a id="3738" class="Symbol">)</a> <a id="3740" class="Symbol">:</a> <a id="3742" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3747" class="Keyword">where</a>
      <a id="3759" class="Keyword">inductive</a>
      <a id="3775" class="Keyword">field</a>
        <a id="3789" href="Ledger.Dijkstra.Specification.Transaction.html#3789" class="Field">txIns</a>                <a id="3810" class="Symbol">:</a> <a id="3812" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3814" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a>
        <a id="3827" href="Ledger.Dijkstra.Specification.Transaction.html#3827" class="Field">refInputs</a>            <a id="3848" class="Symbol">:</a> <a id="3850" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3852" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a>
        <a id="3865" href="Ledger.Dijkstra.Specification.Transaction.html#3865" class="Field">collateralInputs</a>     <a id="3886" class="Symbol">:</a> <a id="3888" href="Ledger.Dijkstra.Specification.Transaction.html#769" class="Function">InTopLevel</a> <a id="3899" href="Ledger.Dijkstra.Specification.Transaction.html#3721" class="Bound">txLevel</a> <a id="3907" class="Symbol">(</a><a id="3908" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3910" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a><a id="3914" class="Symbol">)</a> <a id="3916" class="Comment">-- only in top-level tx</a>
        <a id="3948" href="Ledger.Dijkstra.Specification.Transaction.html#3948" class="Field">txOuts</a>               <a id="3969" class="Symbol">:</a> <a id="3971" href="Ledger.Dijkstra.Specification.Transaction.html#1320" class="Field">Ix</a> <a id="3974" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="3976" href="Ledger.Dijkstra.Specification.Transaction.html#3021" class="Function">TxOut</a>
        <a id="3990" href="Ledger.Dijkstra.Specification.Transaction.html#3990" class="Field">txId</a>                 <a id="4011" class="Symbol">:</a> <a id="4013" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a>
        <a id="4026" href="Ledger.Dijkstra.Specification.Transaction.html#4026" class="Field">txCerts</a>              <a id="4047" class="Symbol">:</a> <a id="4049" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4054" href="Ledger.Conway.Specification.Certs.html#2255" class="Datatype">DCert</a>
        <a id="4068" href="Ledger.Dijkstra.Specification.Transaction.html#4068" class="Field">txFee</a>                <a id="4089" class="Symbol">:</a> <a id="4091" href="Ledger.Dijkstra.Specification.Transaction.html#769" class="Function">InTopLevel</a> <a id="4102" href="Ledger.Dijkstra.Specification.Transaction.html#3721" class="Bound">txLevel</a> <a id="4110" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a> <a id="4115" class="Comment">-- only in top-level tx</a>
        <a id="4147" href="Ledger.Dijkstra.Specification.Transaction.html#4147" class="Field">txWithdrawals</a>        <a id="4168" class="Symbol">:</a> <a id="4170" href="Ledger.Core.Specification.Address.html#1388" class="Function">Withdrawals</a>
        <a id="4190" href="Ledger.Dijkstra.Specification.Transaction.html#4190" class="Field">txVldt</a>               <a id="4211" class="Symbol">:</a> <a id="4213" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4219" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="4224" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4226" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4232" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
        <a id="4245" href="Ledger.Dijkstra.Specification.Transaction.html#4245" class="Field">txADhash</a>             <a id="4266" class="Symbol">:</a> <a id="4268" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4274" href="Ledger.Dijkstra.Specification.Transaction.html#1661" class="Function">ADHash</a>
        <a id="4289" href="Ledger.Dijkstra.Specification.Transaction.html#4289" class="Field">txDonation</a>           <a id="4310" class="Symbol">:</a> <a id="4312" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>
        <a id="4330" href="Ledger.Dijkstra.Specification.Transaction.html#4330" class="Field">txGovVotes</a>           <a id="4351" class="Symbol">:</a> <a id="4353" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4358" href="Ledger.Conway.Specification.Gov.Actions.html#2293" class="Record">GovVote</a>
        <a id="4374" href="Ledger.Dijkstra.Specification.Transaction.html#4374" class="Field">txGovProposals</a>       <a id="4395" class="Symbol">:</a> <a id="4397" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4402" href="Ledger.Conway.Specification.Gov.Actions.html#3602" class="Record">GovProposal</a>
        <a id="4422" href="Ledger.Dijkstra.Specification.Transaction.html#4422" class="Field">txNetworkId</a>          <a id="4443" class="Symbol">:</a> <a id="4445" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4451" href="Ledger.Core.Specification.Epoch.html#2313" class="Function">Network</a>
        <a id="4467" href="Ledger.Dijkstra.Specification.Transaction.html#4467" class="Field">currentTreasury</a>      <a id="4488" class="Symbol">:</a> <a id="4490" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4496" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
        <a id="4509" href="Ledger.Dijkstra.Specification.Transaction.html#4509" class="Field">mint</a>                 <a id="4530" class="Symbol">:</a> <a id="4532" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
        <a id="4546" href="Ledger.Dijkstra.Specification.Transaction.html#4546" class="Field">scriptIntegrityHash</a>  <a id="4567" class="Symbol">:</a> <a id="4569" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4575" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>

        <a id="4595" class="Comment">-- New in Dijkstra --</a>
        <a id="4625" class="Comment">--</a>
        <a id="4636" href="Ledger.Dijkstra.Specification.Transaction.html#4636" class="Field">txSubTransactions</a>    <a id="4657" class="Symbol">:</a> <a id="4659" href="Ledger.Dijkstra.Specification.Transaction.html#769" class="Function">InTopLevel</a> <a id="4670" href="Ledger.Dijkstra.Specification.Transaction.html#3721" class="Bound">txLevel</a> <a id="4678" class="Symbol">(</a><a id="4679" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4684" class="Symbol">(</a><a id="4685" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="4688" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a><a id="4698" class="Symbol">))</a> <a id="4701" class="Comment">-- only in top-level tx</a>
        <a id="4733" class="Comment">-- ^^^^^^^^^^ should this be a set? i.e. InTopLevel txLevel (ℙ (Tx TxLevelSub))</a>
        <a id="4821" class="Comment">--            (in getTxScripts function below we need it as a set)</a>
        <a id="4896" class="Comment">--</a>
        <a id="4907" href="Ledger.Dijkstra.Specification.Transaction.html#4907" class="Field">txRequiredGuards</a>          <a id="4933" class="Symbol">:</a> <a id="4935" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4937" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a> <a id="4945" class="Comment">-- replaces reqSigHash : ℙ KeyHash</a>
        <a id="4988" href="Ledger.Dijkstra.Specification.Transaction.html#4988" class="Field">txRequiredTopLevelGuards</a>  <a id="5014" class="Symbol">:</a> <a id="5016" href="Ledger.Dijkstra.Specification.Transaction.html#861" class="Function">InSubLevel</a> <a id="5027" href="Ledger.Dijkstra.Specification.Transaction.html#3721" class="Bound">txLevel</a> <a id="5035" class="Symbol">(</a><a id="5036" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a> <a id="5047" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="5049" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a><a id="5054" class="Symbol">)</a> <a id="5056" class="Comment">-- only in sub-level tx</a>
        <a id="5088" class="Comment">---------------------</a>

    <a id="5115" class="Keyword">record</a> <a id="TransactionStructure.TxWitnesses"></a><a id="5122" href="Ledger.Dijkstra.Specification.Transaction.html#5122" class="Record">TxWitnesses</a> <a id="5134" class="Symbol">(</a><a id="5135" href="Ledger.Dijkstra.Specification.Transaction.html#5135" class="Bound">txLevel</a> <a id="5143" class="Symbol">:</a> <a id="5145" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a><a id="5152" class="Symbol">)</a> <a id="5154" class="Symbol">:</a> <a id="5156" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5161" class="Keyword">where</a>
      <a id="5173" class="Keyword">inductive</a>
      <a id="5189" class="Keyword">field</a>
        <a id="5203" href="Ledger.Dijkstra.Specification.Transaction.html#5203" class="Field">vKeySigs</a>     <a id="5216" class="Symbol">:</a> <a id="5218" href="Ledger.Core.Specification.Crypto.html#650" class="Function">VKey</a> <a id="5223" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="5225" href="Ledger.Core.Specification.Crypto.html#655" class="Function">Sig</a>
        <a id="5237" href="Ledger.Dijkstra.Specification.Transaction.html#5237" class="Field">scripts</a>      <a id="5250" class="Symbol">:</a> <a id="5252" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5254" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
        <a id="5269" href="Ledger.Dijkstra.Specification.Transaction.html#5269" class="Field">txData</a>       <a id="5282" class="Symbol">:</a> <a id="5284" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a> <a id="5293" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="5295" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
        <a id="5309" href="Ledger.Dijkstra.Specification.Transaction.html#5309" class="Field">txRedeemers</a>  <a id="5322" class="Symbol">:</a> <a id="5324" href="Ledger.Dijkstra.Specification.Transaction.html#3139" class="Function">RedeemerPtr</a> <a id="5336" href="Ledger.Dijkstra.Specification.Transaction.html#5135" class="Bound">txLevel</a> <a id="5344" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="5346" href="Ledger.Conway.Specification.Script.Base.html#1788" class="Function">Redeemer</a> <a id="5355" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5357" href="Ledger.Conway.Specification.Script.Base.html#1018" class="Function">ExUnits</a>

      <a id="TransactionStructure.TxWitnesses.scriptsP1"></a><a id="5372" href="Ledger.Dijkstra.Specification.Transaction.html#5372" class="Function">scriptsP1</a> <a id="5382" class="Symbol">:</a> <a id="5384" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5386" href="Ledger.Conway.Specification.Script.Base.html#642" class="Function">P1Script</a>
      <a id="5401" href="Ledger.Dijkstra.Specification.Transaction.html#5372" class="Function">scriptsP1</a> <a id="5411" class="Symbol">=</a> <a id="5413" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="5424" href="Data.Sum.html#787" class="Function">isInj₁</a> <a id="5431" href="Ledger.Dijkstra.Specification.Transaction.html#5237" class="Field">scripts</a>


  <a id="TransactionStructure.TopLevelTx"></a><a id="5443" href="Ledger.Dijkstra.Specification.Transaction.html#5443" class="Function">TopLevelTx</a> <a id="5454" class="Symbol">:</a> <a id="5456" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5463" href="Ledger.Dijkstra.Specification.Transaction.html#5443" class="Function">TopLevelTx</a> <a id="5474" class="Symbol">=</a> <a id="5476" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="5479" href="Ledger.Dijkstra.Specification.Transaction.html#735" class="InductiveConstructor">TxLevelTop</a>

  <a id="TransactionStructure.SubLevelTx"></a><a id="5493" href="Ledger.Dijkstra.Specification.Transaction.html#5493" class="Function">SubLevelTx</a> <a id="5504" class="Symbol">:</a> <a id="5506" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5513" href="Ledger.Dijkstra.Specification.Transaction.html#5493" class="Function">SubLevelTx</a> <a id="5524" class="Symbol">=</a> <a id="5526" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="5529" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a>


  <a id="TransactionStructure.AnyLevelTx"></a><a id="5544" href="Ledger.Dijkstra.Specification.Transaction.html#5544" class="Function">AnyLevelTx</a> <a id="5555" class="Symbol">:</a> <a id="5557" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="5564" href="Ledger.Dijkstra.Specification.Transaction.html#5544" class="Function">AnyLevelTx</a> <a id="5575" class="Symbol">=</a> <a id="5577" href="Ledger.Dijkstra.Specification.Transaction.html#5443" class="Function">TopLevelTx</a> <a id="5588" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5590" href="Ledger.Dijkstra.Specification.Transaction.html#5493" class="Function">SubLevelTx</a>


  <a id="5605" class="Keyword">record</a> <a id="TransactionStructure.HasTxBody"></a><a id="5612" href="Ledger.Dijkstra.Specification.Transaction.html#5612" class="Record">HasTxBody</a> <a id="5622" class="Symbol">{</a><a id="5623" href="Ledger.Dijkstra.Specification.Transaction.html#5623" class="Bound">txLevel</a><a id="5630" class="Symbol">}</a> <a id="5632" class="Symbol">{</a><a id="5633" href="Ledger.Dijkstra.Specification.Transaction.html#5633" class="Bound">a</a><a id="5634" class="Symbol">}</a> <a id="5636" class="Symbol">(</a><a id="5637" href="Ledger.Dijkstra.Specification.Transaction.html#5637" class="Bound">A</a> <a id="5639" class="Symbol">:</a> <a id="5641" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5646" href="Ledger.Dijkstra.Specification.Transaction.html#5633" class="Bound">a</a><a id="5647" class="Symbol">)</a> <a id="5649" class="Symbol">:</a> <a id="5651" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5656" href="Ledger.Dijkstra.Specification.Transaction.html#5633" class="Bound">a</a> <a id="5658" class="Keyword">where</a>
    <a id="5668" class="Keyword">field</a> <a id="5674" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a> <a id="5683" class="Symbol">:</a> <a id="5685" href="Ledger.Dijkstra.Specification.Transaction.html#5637" class="Bound">A</a> <a id="5687" class="Symbol">→</a> <a id="5689" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="5696" href="Ledger.Dijkstra.Specification.Transaction.html#5623" class="Bound">txLevel</a>
  <a id="5706" class="Keyword">open</a> <a id="5711" href="Ledger.Dijkstra.Specification.Transaction.html#5612" class="Module">HasTxBody</a>  <a id="5722" class="Symbol">⦃...⦄</a> <a id="5728" class="Keyword">public</a>

  <a id="5738" class="Keyword">record</a> <a id="TransactionStructure.HasTxId"></a><a id="5745" href="Ledger.Dijkstra.Specification.Transaction.html#5745" class="Record">HasTxId</a>    <a id="5756" class="Symbol">{</a><a id="5757" href="Ledger.Dijkstra.Specification.Transaction.html#5757" class="Bound">a</a><a id="5758" class="Symbol">}</a> <a id="5760" class="Symbol">(</a><a id="5761" href="Ledger.Dijkstra.Specification.Transaction.html#5761" class="Bound">A</a> <a id="5763" class="Symbol">:</a> <a id="5765" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5770" href="Ledger.Dijkstra.Specification.Transaction.html#5757" class="Bound">a</a><a id="5771" class="Symbol">)</a> <a id="5773" class="Symbol">:</a> <a id="5775" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5780" href="Ledger.Dijkstra.Specification.Transaction.html#5757" class="Bound">a</a> <a id="5782" class="Keyword">where</a>
    <a id="5792" class="Keyword">field</a> <a id="5798" href="Ledger.Dijkstra.Specification.Transaction.html#5798" class="Field">TxIdOf</a>    <a id="5808" class="Symbol">:</a> <a id="5810" href="Ledger.Dijkstra.Specification.Transaction.html#5761" class="Bound">A</a> <a id="5812" class="Symbol">→</a> <a id="5814" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a>
  <a id="5821" class="Keyword">open</a> <a id="5826" href="Ledger.Dijkstra.Specification.Transaction.html#5745" class="Module">HasTxId</a>    <a id="5837" class="Symbol">⦃...⦄</a> <a id="5843" class="Keyword">public</a>

  <a id="5853" class="Keyword">record</a> <a id="TransactionStructure.HasFees?"></a><a id="5860" href="Ledger.Dijkstra.Specification.Transaction.html#5860" class="Record">HasFees?</a> <a id="5869" class="Symbol">{</a><a id="5870" href="Ledger.Dijkstra.Specification.Transaction.html#5870" class="Bound">a</a><a id="5871" class="Symbol">}</a> <a id="5873" class="Symbol">(</a><a id="5874" href="Ledger.Dijkstra.Specification.Transaction.html#5874" class="Bound">A</a> <a id="5876" class="Symbol">:</a> <a id="5878" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5883" href="Ledger.Dijkstra.Specification.Transaction.html#5870" class="Bound">a</a><a id="5884" class="Symbol">)</a> <a id="5886" class="Symbol">:</a> <a id="5888" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5893" href="Ledger.Dijkstra.Specification.Transaction.html#5870" class="Bound">a</a> <a id="5895" class="Keyword">where</a>
    <a id="5905" class="Keyword">field</a> <a id="5911" href="Ledger.Dijkstra.Specification.Transaction.html#5911" class="Field">FeesOf?</a> <a id="5919" class="Symbol">:</a> <a id="5921" href="Ledger.Dijkstra.Specification.Transaction.html#5874" class="Bound">A</a> <a id="5923" class="Symbol">→</a> <a id="5925" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5931" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
  <a id="5938" class="Keyword">open</a> <a id="5943" href="Ledger.Dijkstra.Specification.Transaction.html#5860" class="Module">HasFees?</a> <a id="5952" class="Symbol">⦃...⦄</a> <a id="5958" class="Keyword">public</a>

  <a id="5968" class="Keyword">record</a> <a id="TransactionStructure.HasDCerts"></a><a id="5975" href="Ledger.Dijkstra.Specification.Transaction.html#5975" class="Record">HasDCerts</a> <a id="5985" class="Symbol">{</a><a id="5986" href="Ledger.Dijkstra.Specification.Transaction.html#5986" class="Bound">a</a><a id="5987" class="Symbol">}</a> <a id="5989" class="Symbol">(</a><a id="5990" href="Ledger.Dijkstra.Specification.Transaction.html#5990" class="Bound">A</a> <a id="5992" class="Symbol">:</a> <a id="5994" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5999" href="Ledger.Dijkstra.Specification.Transaction.html#5986" class="Bound">a</a><a id="6000" class="Symbol">)</a> <a id="6002" class="Symbol">:</a> <a id="6004" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6009" href="Ledger.Dijkstra.Specification.Transaction.html#5986" class="Bound">a</a> <a id="6011" class="Keyword">where</a>
    <a id="6021" class="Keyword">field</a> <a id="6027" href="Ledger.Dijkstra.Specification.Transaction.html#6027" class="Field">DCertsOf</a> <a id="6036" class="Symbol">:</a> <a id="6038" href="Ledger.Dijkstra.Specification.Transaction.html#5990" class="Bound">A</a> <a id="6040" class="Symbol">→</a> <a id="6042" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6047" href="Ledger.Conway.Specification.Certs.html#2255" class="Datatype">DCert</a>
  <a id="6055" class="Keyword">open</a> <a id="6060" href="Ledger.Dijkstra.Specification.Transaction.html#5975" class="Module">HasDCerts</a> <a id="6070" class="Symbol">⦃...⦄</a> <a id="6076" class="Keyword">public</a>

  <a id="6086" class="Keyword">record</a> <a id="TransactionStructure.HasData"></a><a id="6093" href="Ledger.Dijkstra.Specification.Transaction.html#6093" class="Record">HasData</a> <a id="6101" class="Symbol">{</a><a id="6102" href="Ledger.Dijkstra.Specification.Transaction.html#6102" class="Bound">a</a><a id="6103" class="Symbol">}</a> <a id="6105" class="Symbol">(</a><a id="6106" href="Ledger.Dijkstra.Specification.Transaction.html#6106" class="Bound">A</a> <a id="6108" class="Symbol">:</a> <a id="6110" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6115" href="Ledger.Dijkstra.Specification.Transaction.html#6102" class="Bound">a</a><a id="6116" class="Symbol">)</a> <a id="6118" class="Symbol">:</a> <a id="6120" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6125" href="Ledger.Dijkstra.Specification.Transaction.html#6102" class="Bound">a</a> <a id="6127" class="Keyword">where</a>
    <a id="6137" class="Keyword">field</a> <a id="6143" href="Ledger.Dijkstra.Specification.Transaction.html#6143" class="Field">DataOf</a> <a id="6150" class="Symbol">:</a> <a id="6152" href="Ledger.Dijkstra.Specification.Transaction.html#6106" class="Bound">A</a> <a id="6154" class="Symbol">→</a> <a id="6156" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="6158" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a>
  <a id="6166" class="Keyword">open</a> <a id="6171" href="Ledger.Dijkstra.Specification.Transaction.html#6093" class="Module">HasData</a> <a id="6179" class="Symbol">⦃...⦄</a> <a id="6185" class="Keyword">public</a>

  <a id="6195" class="Keyword">record</a> <a id="TransactionStructure.HasTxWitnesses"></a><a id="6202" href="Ledger.Dijkstra.Specification.Transaction.html#6202" class="Record">HasTxWitnesses</a> <a id="6217" class="Symbol">{</a><a id="6218" href="Ledger.Dijkstra.Specification.Transaction.html#6218" class="Bound">txLevel</a><a id="6225" class="Symbol">}</a> <a id="6227" class="Symbol">{</a><a id="6228" href="Ledger.Dijkstra.Specification.Transaction.html#6228" class="Bound">a</a><a id="6229" class="Symbol">}</a> <a id="6231" class="Symbol">(</a><a id="6232" href="Ledger.Dijkstra.Specification.Transaction.html#6232" class="Bound">A</a> <a id="6234" class="Symbol">:</a> <a id="6236" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6241" href="Ledger.Dijkstra.Specification.Transaction.html#6228" class="Bound">a</a><a id="6242" class="Symbol">)</a> <a id="6244" class="Symbol">:</a> <a id="6246" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6251" href="Ledger.Dijkstra.Specification.Transaction.html#6228" class="Bound">a</a> <a id="6253" class="Keyword">where</a>
    <a id="6263" class="Keyword">field</a> <a id="6269" href="Ledger.Dijkstra.Specification.Transaction.html#6269" class="Field">TxWitnessesOf</a> <a id="6283" class="Symbol">:</a> <a id="6285" href="Ledger.Dijkstra.Specification.Transaction.html#6232" class="Bound">A</a> <a id="6287" class="Symbol">→</a> <a id="6289" href="Ledger.Dijkstra.Specification.Transaction.html#5122" class="Record">TxWitnesses</a> <a id="6301" href="Ledger.Dijkstra.Specification.Transaction.html#6218" class="Bound">txLevel</a>
  <a id="6311" class="Keyword">open</a> <a id="6316" href="Ledger.Dijkstra.Specification.Transaction.html#6202" class="Module">HasTxWitnesses</a> <a id="6331" class="Symbol">⦃...⦄</a> <a id="6337" class="Keyword">public</a>

  <a id="6347" class="Keyword">record</a> <a id="TransactionStructure.HasValue"></a><a id="6354" href="Ledger.Dijkstra.Specification.Transaction.html#6354" class="Record">HasValue</a> <a id="6363" class="Symbol">{</a><a id="6364" href="Ledger.Dijkstra.Specification.Transaction.html#6364" class="Bound">a</a><a id="6365" class="Symbol">}</a> <a id="6367" class="Symbol">(</a><a id="6368" href="Ledger.Dijkstra.Specification.Transaction.html#6368" class="Bound">A</a> <a id="6370" class="Symbol">:</a> <a id="6372" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6377" href="Ledger.Dijkstra.Specification.Transaction.html#6364" class="Bound">a</a><a id="6378" class="Symbol">)</a> <a id="6380" class="Symbol">:</a> <a id="6382" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6387" href="Ledger.Dijkstra.Specification.Transaction.html#6364" class="Bound">a</a> <a id="6389" class="Keyword">where</a>
    <a id="6399" class="Keyword">field</a> <a id="6405" href="Ledger.Dijkstra.Specification.Transaction.html#6405" class="Field">ValueOf</a> <a id="6413" class="Symbol">:</a> <a id="6415" href="Ledger.Dijkstra.Specification.Transaction.html#6368" class="Bound">A</a> <a id="6417" class="Symbol">→</a> <a id="6419" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="6427" class="Keyword">open</a> <a id="6432" href="Ledger.Dijkstra.Specification.Transaction.html#6354" class="Module">HasValue</a> <a id="6441" class="Symbol">⦃...⦄</a> <a id="6447" class="Keyword">public</a>

  <a id="6457" class="Keyword">record</a> <a id="TransactionStructure.HasGovProposals"></a><a id="6464" href="Ledger.Dijkstra.Specification.Transaction.html#6464" class="Record">HasGovProposals</a> <a id="6480" class="Symbol">{</a><a id="6481" href="Ledger.Dijkstra.Specification.Transaction.html#6481" class="Bound">a</a><a id="6482" class="Symbol">}</a> <a id="6484" class="Symbol">(</a><a id="6485" href="Ledger.Dijkstra.Specification.Transaction.html#6485" class="Bound">A</a> <a id="6487" class="Symbol">:</a> <a id="6489" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6494" href="Ledger.Dijkstra.Specification.Transaction.html#6481" class="Bound">a</a><a id="6495" class="Symbol">)</a> <a id="6497" class="Symbol">:</a> <a id="6499" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6504" href="Ledger.Dijkstra.Specification.Transaction.html#6481" class="Bound">a</a> <a id="6506" class="Keyword">where</a>
    <a id="6516" class="Keyword">field</a> <a id="6522" href="Ledger.Dijkstra.Specification.Transaction.html#6522" class="Field">GovProposalsOf</a> <a id="6537" class="Symbol">:</a> <a id="6539" href="Ledger.Dijkstra.Specification.Transaction.html#6485" class="Bound">A</a> <a id="6541" class="Symbol">→</a> <a id="6543" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6548" href="Ledger.Conway.Specification.Gov.Actions.html#3602" class="Record">GovProposal</a>
  <a id="6562" class="Keyword">open</a> <a id="6567" href="Ledger.Dijkstra.Specification.Transaction.html#6464" class="Module">HasGovProposals</a> <a id="6583" class="Symbol">⦃...⦄</a> <a id="6589" class="Keyword">public</a>

  <a id="6599" class="Keyword">record</a> <a id="TransactionStructure.HasGovVotes"></a><a id="6606" href="Ledger.Dijkstra.Specification.Transaction.html#6606" class="Record">HasGovVotes</a> <a id="6618" class="Symbol">{</a><a id="6619" href="Ledger.Dijkstra.Specification.Transaction.html#6619" class="Bound">a</a><a id="6620" class="Symbol">}</a> <a id="6622" class="Symbol">(</a><a id="6623" href="Ledger.Dijkstra.Specification.Transaction.html#6623" class="Bound">A</a> <a id="6625" class="Symbol">:</a> <a id="6627" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6632" href="Ledger.Dijkstra.Specification.Transaction.html#6619" class="Bound">a</a><a id="6633" class="Symbol">)</a> <a id="6635" class="Symbol">:</a> <a id="6637" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="6642" href="Ledger.Dijkstra.Specification.Transaction.html#6619" class="Bound">a</a> <a id="6644" class="Keyword">where</a>
    <a id="6654" class="Keyword">field</a> <a id="6660" href="Ledger.Dijkstra.Specification.Transaction.html#6660" class="Field">GovVotesOf</a> <a id="6671" class="Symbol">:</a> <a id="6673" href="Ledger.Dijkstra.Specification.Transaction.html#6623" class="Bound">A</a> <a id="6675" class="Symbol">→</a> <a id="6677" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6682" href="Ledger.Conway.Specification.Gov.Actions.html#2293" class="Record">GovVote</a>
  <a id="6692" class="Keyword">open</a> <a id="6697" href="Ledger.Dijkstra.Specification.Transaction.html#6606" class="Module">HasGovVotes</a> <a id="6709" class="Symbol">⦃...⦄</a> <a id="6715" class="Keyword">public</a>

  <a id="6725" class="Keyword">instance</a>
    <a id="TransactionStructure.HasTxBody-Tx"></a><a id="6738" href="Ledger.Dijkstra.Specification.Transaction.html#6738" class="Function">HasTxBody-Tx</a> <a id="6751" class="Symbol">:</a> <a id="6753" href="Ledger.Dijkstra.Specification.Transaction.html#5612" class="Record">HasTxBody</a> <a id="6763" class="Symbol">(</a><a id="6764" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="6767" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="6774" class="Symbol">)</a>
    <a id="6780" href="Ledger.Dijkstra.Specification.Transaction.html#6738" class="Function">HasTxBody-Tx</a> <a id="6793" class="Symbol">.</a><a id="6794" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a> <a id="6803" class="Symbol">=</a> <a id="6805" href="Ledger.Dijkstra.Specification.Transaction.html#3538" class="Field">Tx.txBody</a>

    <a id="TransactionStructure.HasTxWitnesses-Tx"></a><a id="6820" href="Ledger.Dijkstra.Specification.Transaction.html#6820" class="Function">HasTxWitnesses-Tx</a> <a id="6838" class="Symbol">:</a> <a id="6840" href="Ledger.Dijkstra.Specification.Transaction.html#6202" class="Record">HasTxWitnesses</a> <a id="6855" class="Symbol">(</a><a id="6856" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="6859" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="6866" class="Symbol">)</a>
    <a id="6872" href="Ledger.Dijkstra.Specification.Transaction.html#6820" class="Function">HasTxWitnesses-Tx</a> <a id="6890" class="Symbol">.</a><a id="6891" href="Ledger.Dijkstra.Specification.Transaction.html#6269" class="Field">TxWitnessesOf</a> <a id="6905" class="Symbol">=</a> <a id="6907" href="Ledger.Dijkstra.Specification.Transaction.html#3576" class="Field">Tx.txWitnesses</a>

    <a id="TransactionStructure.HasDCerts-TxBody"></a><a id="6927" href="Ledger.Dijkstra.Specification.Transaction.html#6927" class="Function">HasDCerts-TxBody</a> <a id="6944" class="Symbol">:</a> <a id="6946" href="Ledger.Dijkstra.Specification.Transaction.html#5975" class="Record">HasDCerts</a> <a id="6956" class="Symbol">(</a><a id="6957" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="6964" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="6971" class="Symbol">)</a>
    <a id="6977" href="Ledger.Dijkstra.Specification.Transaction.html#6927" class="Function">HasDCerts-TxBody</a> <a id="6994" class="Symbol">.</a><a id="6995" href="Ledger.Dijkstra.Specification.Transaction.html#6027" class="Field">DCertsOf</a> <a id="7004" class="Symbol">=</a> <a id="7006" href="Ledger.Dijkstra.Specification.Transaction.html#4026" class="Field">TxBody.txCerts</a>

    <a id="TransactionStructure.HasWithdrawals-TxBody"></a><a id="7026" href="Ledger.Dijkstra.Specification.Transaction.html#7026" class="Function">HasWithdrawals-TxBody</a> <a id="7048" class="Symbol">:</a> <a id="7050" href="Ledger.Core.Specification.Address.html#1633" class="Record">HasWithdrawals</a> <a id="7065" class="Symbol">(</a><a id="7066" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="7073" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="7080" class="Symbol">)</a>
    <a id="7086" href="Ledger.Dijkstra.Specification.Transaction.html#7026" class="Function">HasWithdrawals-TxBody</a> <a id="7108" class="Symbol">.</a><a id="7109" href="Ledger.Core.Specification.Address.html#1688" class="Field">WithdrawalsOf</a> <a id="7123" class="Symbol">=</a> <a id="7125" href="Ledger.Dijkstra.Specification.Transaction.html#4147" class="Field">TxBody.txWithdrawals</a>

    <a id="TransactionStructure.HasWithdrawals-Tx"></a><a id="7151" href="Ledger.Dijkstra.Specification.Transaction.html#7151" class="Function">HasWithdrawals-Tx</a> <a id="7169" class="Symbol">:</a> <a id="7171" href="Ledger.Core.Specification.Address.html#1633" class="Record">HasWithdrawals</a> <a id="7186" class="Symbol">(</a><a id="7187" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="7190" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="7197" class="Symbol">)</a>
    <a id="7203" href="Ledger.Dijkstra.Specification.Transaction.html#7151" class="Function">HasWithdrawals-Tx</a> <a id="7221" class="Symbol">.</a><a id="7222" href="Ledger.Core.Specification.Address.html#1688" class="Field">WithdrawalsOf</a> <a id="7236" class="Symbol">=</a> <a id="7238" href="Ledger.Core.Specification.Address.html#1688" class="Field">WithdrawalsOf</a> <a id="7252" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="7254" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.HasValue-TxBody"></a><a id="7268" href="Ledger.Dijkstra.Specification.Transaction.html#7268" class="Function">HasValue-TxBody</a> <a id="7284" class="Symbol">:</a> <a id="7286" href="Ledger.Dijkstra.Specification.Transaction.html#6354" class="Record">HasValue</a> <a id="7295" class="Symbol">(</a><a id="7296" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="7303" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="7310" class="Symbol">)</a>
    <a id="7316" href="Ledger.Dijkstra.Specification.Transaction.html#7268" class="Function">HasValue-TxBody</a> <a id="7332" class="Symbol">.</a><a id="7333" href="Ledger.Dijkstra.Specification.Transaction.html#6405" class="Field">ValueOf</a> <a id="7341" class="Symbol">=</a> <a id="7343" href="Ledger.Dijkstra.Specification.Transaction.html#4509" class="Field">TxBody.mint</a>

    <a id="TransactionStructure.HasGovVotes-TxBody"></a><a id="7360" href="Ledger.Dijkstra.Specification.Transaction.html#7360" class="Function">HasGovVotes-TxBody</a> <a id="7379" class="Symbol">:</a> <a id="7381" href="Ledger.Dijkstra.Specification.Transaction.html#6606" class="Record">HasGovVotes</a> <a id="7393" class="Symbol">(</a><a id="7394" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="7401" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="7408" class="Symbol">)</a>
    <a id="7414" href="Ledger.Dijkstra.Specification.Transaction.html#7360" class="Function">HasGovVotes-TxBody</a> <a id="7433" class="Symbol">.</a><a id="7434" href="Ledger.Dijkstra.Specification.Transaction.html#6660" class="Field">GovVotesOf</a> <a id="7445" class="Symbol">=</a> <a id="7447" href="Ledger.Dijkstra.Specification.Transaction.html#4330" class="Field">TxBody.txGovVotes</a>

    <a id="TransactionStructure.HasGovVotes-Tx"></a><a id="7470" href="Ledger.Dijkstra.Specification.Transaction.html#7470" class="Function">HasGovVotes-Tx</a> <a id="7485" class="Symbol">:</a> <a id="7487" href="Ledger.Dijkstra.Specification.Transaction.html#6606" class="Record">HasGovVotes</a> <a id="7499" class="Symbol">(</a><a id="7500" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="7503" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="7510" class="Symbol">)</a>
    <a id="7516" href="Ledger.Dijkstra.Specification.Transaction.html#7470" class="Function">HasGovVotes-Tx</a> <a id="7531" class="Symbol">.</a><a id="7532" href="Ledger.Dijkstra.Specification.Transaction.html#6660" class="Field">GovVotesOf</a> <a id="7543" class="Symbol">=</a> <a id="7545" href="Ledger.Dijkstra.Specification.Transaction.html#6660" class="Field">GovVotesOf</a> <a id="7556" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="7558" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.HasGovProposals-TxBody"></a><a id="7572" href="Ledger.Dijkstra.Specification.Transaction.html#7572" class="Function">HasGovProposals-TxBody</a> <a id="7595" class="Symbol">:</a> <a id="7597" href="Ledger.Dijkstra.Specification.Transaction.html#6464" class="Record">HasGovProposals</a> <a id="7613" class="Symbol">(</a><a id="7614" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="7621" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="7628" class="Symbol">)</a>
    <a id="7634" href="Ledger.Dijkstra.Specification.Transaction.html#7572" class="Function">HasGovProposals-TxBody</a> <a id="7657" class="Symbol">.</a><a id="7658" href="Ledger.Dijkstra.Specification.Transaction.html#6522" class="Field">GovProposalsOf</a> <a id="7673" class="Symbol">=</a> <a id="7675" href="Ledger.Dijkstra.Specification.Transaction.html#4374" class="Field">TxBody.txGovProposals</a>

    <a id="TransactionStructure.HasGovProposals-Tx"></a><a id="7702" href="Ledger.Dijkstra.Specification.Transaction.html#7702" class="Function">HasGovProposals-Tx</a> <a id="7721" class="Symbol">:</a> <a id="7723" href="Ledger.Dijkstra.Specification.Transaction.html#6464" class="Record">HasGovProposals</a> <a id="7739" class="Symbol">(</a><a id="7740" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="7743" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="7750" class="Symbol">)</a>
    <a id="7756" href="Ledger.Dijkstra.Specification.Transaction.html#7702" class="Function">HasGovProposals-Tx</a> <a id="7775" class="Symbol">.</a><a id="7776" href="Ledger.Dijkstra.Specification.Transaction.html#6522" class="Field">GovProposalsOf</a> <a id="7791" class="Symbol">=</a> <a id="7793" href="Ledger.Dijkstra.Specification.Transaction.html#6522" class="Field">GovProposalsOf</a> <a id="7808" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="7810" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.HasFees?-TxBody"></a><a id="7824" href="Ledger.Dijkstra.Specification.Transaction.html#7824" class="Function">HasFees?-TxBody</a> <a id="7840" class="Symbol">:</a> <a id="7842" class="Symbol">{</a><a id="7843" href="Ledger.Dijkstra.Specification.Transaction.html#7843" class="Bound">ℓ</a> <a id="7845" class="Symbol">:</a> <a id="7847" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a><a id="7854" class="Symbol">}</a> <a id="7856" class="Symbol">→</a> <a id="7858" href="Ledger.Dijkstra.Specification.Transaction.html#5860" class="Record">HasFees?</a> <a id="7867" class="Symbol">(</a><a id="7868" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Record">TxBody</a> <a id="7875" href="Ledger.Dijkstra.Specification.Transaction.html#7843" class="Bound">ℓ</a><a id="7876" class="Symbol">)</a>
    <a id="7882" href="Ledger.Dijkstra.Specification.Transaction.html#7824" class="Function">HasFees?-TxBody</a> <a id="7898" class="Symbol">{</a><a id="7899" href="Ledger.Dijkstra.Specification.Transaction.html#735" class="InductiveConstructor">TxLevelTop</a><a id="7909" class="Symbol">}</a> <a id="7911" class="Symbol">.</a><a id="7912" href="Ledger.Dijkstra.Specification.Transaction.html#5911" class="Field">FeesOf?</a> <a id="7920" href="Ledger.Dijkstra.Specification.Transaction.html#7920" class="Bound">tbTop</a> <a id="7926" class="Symbol">=</a> <a id="7928" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7933" class="Symbol">(</a><a id="7934" href="Ledger.Dijkstra.Specification.Transaction.html#4068" class="Field">TxBody.txFee</a> <a id="7947" href="Ledger.Dijkstra.Specification.Transaction.html#7920" class="Bound">tbTop</a><a id="7952" class="Symbol">)</a>
    <a id="7958" href="Ledger.Dijkstra.Specification.Transaction.html#7824" class="Function">HasFees?-TxBody</a> <a id="7974" class="Symbol">{</a><a id="7975" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a><a id="7985" class="Symbol">}</a> <a id="7987" class="Symbol">.</a><a id="7988" href="Ledger.Dijkstra.Specification.Transaction.html#5911" class="Field">FeesOf?</a> <a id="7996" href="Ledger.Dijkstra.Specification.Transaction.html#7996" class="Bound">tbSub</a> <a id="8002" class="Symbol">=</a> <a id="8004" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

    <a id="TransactionStructure.HasFees?-Tx"></a><a id="8017" href="Ledger.Dijkstra.Specification.Transaction.html#8017" class="Function">HasFees?-Tx</a> <a id="8029" class="Symbol">:</a> <a id="8031" href="Ledger.Dijkstra.Specification.Transaction.html#5860" class="Record">HasFees?</a> <a id="8040" class="Symbol">(</a><a id="8041" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="8044" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="8051" class="Symbol">)</a>
    <a id="8057" href="Ledger.Dijkstra.Specification.Transaction.html#8017" class="Function">HasFees?-Tx</a> <a id="8069" class="Symbol">.</a><a id="8070" href="Ledger.Dijkstra.Specification.Transaction.html#5911" class="Field">FeesOf?</a> <a id="8078" class="Symbol">=</a> <a id="8080" href="Ledger.Dijkstra.Specification.Transaction.html#5911" class="Field">FeesOf?</a> <a id="8088" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8090" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.HasTxId-Tx"></a><a id="8104" href="Ledger.Dijkstra.Specification.Transaction.html#8104" class="Function">HasTxId-Tx</a> <a id="8115" class="Symbol">:</a> <a id="8117" href="Ledger.Dijkstra.Specification.Transaction.html#5745" class="Record">HasTxId</a> <a id="8125" class="Symbol">(</a><a id="8126" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="8129" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="8136" class="Symbol">)</a>
    <a id="8142" href="Ledger.Dijkstra.Specification.Transaction.html#8104" class="Function">HasTxId-Tx</a> <a id="8153" class="Symbol">.</a><a id="8154" href="Ledger.Dijkstra.Specification.Transaction.html#5798" class="Field">TxIdOf</a> <a id="8161" class="Symbol">=</a> <a id="8163" href="Ledger.Dijkstra.Specification.Transaction.html#3990" class="Field">TxBody.txId</a> <a id="8175" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8177" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a>

    <a id="TransactionStructure.HasCoin-TxOut"></a><a id="8191" href="Ledger.Dijkstra.Specification.Transaction.html#8191" class="Function">HasCoin-TxOut</a> <a id="8205" class="Symbol">:</a> <a id="8207" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="8215" href="Ledger.Dijkstra.Specification.Transaction.html#3021" class="Function">TxOut</a>
    <a id="8225" href="Ledger.Dijkstra.Specification.Transaction.html#8191" class="Function">HasCoin-TxOut</a> <a id="8239" class="Symbol">.</a><a id="8240" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="8248" class="Symbol">=</a> <a id="8250" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="8255" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8257" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="8263" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8265" href="Data.Product.Base.html#650" class="Field">proj₂</a>

    <a id="TransactionStructure.HasData-TxWitnesses"></a><a id="8276" href="Ledger.Dijkstra.Specification.Transaction.html#8276" class="Function">HasData-TxWitnesses</a> <a id="8296" class="Symbol">:</a> <a id="8298" href="Ledger.Dijkstra.Specification.Transaction.html#6093" class="Record">HasData</a> <a id="8306" class="Symbol">(</a><a id="8307" href="Ledger.Dijkstra.Specification.Transaction.html#5122" class="Record">TxWitnesses</a> <a id="8319" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="8326" class="Symbol">)</a>
    <a id="8332" href="Ledger.Dijkstra.Specification.Transaction.html#8276" class="Function">HasData-TxWitnesses</a> <a id="8352" class="Symbol">.</a><a id="8353" href="Ledger.Dijkstra.Specification.Transaction.html#6143" class="Field">DataOf</a> <a id="8360" class="Symbol">=</a> <a id="8362" href="Class.IsSet.html#959" class="Function">range</a> <a id="8368" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8370" href="Ledger.Dijkstra.Specification.Transaction.html#5269" class="Field">TxWitnesses.txData</a>

    <a id="TransactionStructure.HasData-Tx"></a><a id="8394" href="Ledger.Dijkstra.Specification.Transaction.html#8394" class="Function">HasData-Tx</a> <a id="8405" class="Symbol">:</a> <a id="8407" href="Ledger.Dijkstra.Specification.Transaction.html#6093" class="Record">HasData</a> <a id="8415" class="Symbol">(</a><a id="8416" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="8419" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a><a id="8426" class="Symbol">)</a>
    <a id="8432" href="Ledger.Dijkstra.Specification.Transaction.html#8394" class="Function">HasData-Tx</a> <a id="8443" class="Symbol">.</a><a id="8444" href="Ledger.Dijkstra.Specification.Transaction.html#6143" class="Field">DataOf</a> <a id="8451" class="Symbol">=</a> <a id="8453" href="Ledger.Dijkstra.Specification.Transaction.html#6143" class="Field">DataOf</a> <a id="8460" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8462" href="Ledger.Dijkstra.Specification.Transaction.html#6269" class="Field">TxWitnessesOf</a>

  <a id="TransactionStructure.getValue"></a><a id="8479" href="Ledger.Dijkstra.Specification.Transaction.html#8479" class="Function">getValue</a> <a id="8488" class="Symbol">:</a> <a id="8490" href="Ledger.Dijkstra.Specification.Transaction.html#3021" class="Function">TxOut</a> <a id="8496" class="Symbol">→</a> <a id="8498" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="8506" href="Ledger.Dijkstra.Specification.Transaction.html#8479" class="Function">getValue</a> <a id="8515" class="Symbol">(_</a> <a id="8518" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8520" href="Ledger.Dijkstra.Specification.Transaction.html#8520" class="Bound">v</a> <a id="8522" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8524" class="Symbol">_)</a> <a id="8527" class="Symbol">=</a> <a id="8529" href="Ledger.Dijkstra.Specification.Transaction.html#8520" class="Bound">v</a>

  <a id="TransactionStructure.TxOutʰ"></a><a id="8534" href="Ledger.Dijkstra.Specification.Transaction.html#8534" class="Function">TxOutʰ</a> <a id="8541" class="Symbol">=</a> <a id="8543" href="Ledger.Core.Specification.Address.html#2475" class="Function">Addr</a> <a id="8548" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8550" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a> <a id="8556" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8558" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8564" class="Symbol">(</a><a id="8565" href="Ledger.Conway.Specification.Script.Base.html#1770" class="Function">Datum</a> <a id="8571" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="8573" href="Ledger.Conway.Specification.Script.Base.html#1723" class="Function">DataHash</a><a id="8581" class="Symbol">)</a> <a id="8583" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8585" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8591" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>

  <a id="TransactionStructure.txOutHash"></a><a id="8605" href="Ledger.Dijkstra.Specification.Transaction.html#8605" class="Function">txOutHash</a> <a id="8615" class="Symbol">:</a> <a id="8617" href="Ledger.Dijkstra.Specification.Transaction.html#3021" class="Function">TxOut</a> <a id="8623" class="Symbol">→</a> <a id="8625" href="Ledger.Dijkstra.Specification.Transaction.html#8534" class="Function">TxOutʰ</a>
  <a id="8634" href="Ledger.Dijkstra.Specification.Transaction.html#8605" class="Function">txOutHash</a> <a id="8644" class="Symbol">(</a><a id="8645" href="Ledger.Dijkstra.Specification.Transaction.html#8645" class="Bound">a</a> <a id="8647" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8649" href="Ledger.Dijkstra.Specification.Transaction.html#8649" class="Bound">v</a> <a id="8651" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8653" href="Ledger.Dijkstra.Specification.Transaction.html#8653" class="Bound">d</a> <a id="8655" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8657" href="Ledger.Dijkstra.Specification.Transaction.html#8657" class="Bound">s</a><a id="8658" class="Symbol">)</a> <a id="8660" class="Symbol">=</a> <a id="8662" href="Ledger.Dijkstra.Specification.Transaction.html#8645" class="Bound">a</a> <a id="8664" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8666" class="Symbol">(</a><a id="8667" href="Ledger.Dijkstra.Specification.Transaction.html#8649" class="Bound">v</a> <a id="8669" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8671" class="Symbol">(</a><a id="8672" href="Ledger.Dijkstra.Specification.Transaction.html#8653" class="Bound">d</a> <a id="8674" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8676" href="Data.Maybe.Base.html#1934" class="Function">M.map</a> <a id="8682" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="8687" href="Ledger.Dijkstra.Specification.Transaction.html#8657" class="Bound">s</a><a id="8688" class="Symbol">))</a>

  <a id="TransactionStructure.getValueʰ"></a><a id="8694" href="Ledger.Dijkstra.Specification.Transaction.html#8694" class="Function">getValueʰ</a> <a id="8704" class="Symbol">:</a> <a id="8706" href="Ledger.Dijkstra.Specification.Transaction.html#8534" class="Function">TxOutʰ</a> <a id="8713" class="Symbol">→</a> <a id="8715" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="8723" href="Ledger.Dijkstra.Specification.Transaction.html#8694" class="Function">getValueʰ</a> <a id="8733" class="Symbol">(_</a> <a id="8736" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8738" href="Ledger.Dijkstra.Specification.Transaction.html#8738" class="Bound">v</a> <a id="8740" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8742" class="Symbol">_)</a> <a id="8745" class="Symbol">=</a> <a id="8747" href="Ledger.Dijkstra.Specification.Transaction.html#8738" class="Bound">v</a>

  <a id="TransactionStructure.txinsVKey"></a><a id="8752" href="Ledger.Dijkstra.Specification.Transaction.html#8752" class="Function">txinsVKey</a> <a id="8762" class="Symbol">:</a> <a id="8764" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="8766" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a> <a id="8771" class="Symbol">→</a> <a id="8773" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="8778" class="Symbol">→</a> <a id="8780" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="8782" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a>
  <a id="8789" href="Ledger.Dijkstra.Specification.Transaction.html#8752" class="Function">txinsVKey</a> <a id="8799" href="Ledger.Dijkstra.Specification.Transaction.html#8799" class="Bound">txins</a> <a id="8805" href="Ledger.Dijkstra.Specification.Transaction.html#8805" class="Bound">utxo</a> <a id="8810" class="Symbol">=</a> <a id="8812" href="Ledger.Dijkstra.Specification.Transaction.html#8799" class="Bound">txins</a> <a id="8818" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="8820" href="Class.IsSet.html#916" class="Function">dom</a> <a id="8824" class="Symbol">(</a><a id="8825" href="Ledger.Dijkstra.Specification.Transaction.html#8805" class="Bound">utxo</a> <a id="8830" href="abstract-set-theory.FiniteSetTheory.html#4295" class="Function Operator">∣^&#39;</a> <a id="8834" class="Symbol">(</a><a id="8835" href="Ledger.Core.Specification.Address.html#2730" class="Function">isVKeyAddr</a> <a id="8846" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8848" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="8853" class="Symbol">))</a>

  <a id="TransactionStructure.scriptOuts"></a><a id="8859" href="Ledger.Dijkstra.Specification.Transaction.html#8859" class="Function">scriptOuts</a> <a id="8870" class="Symbol">:</a> <a id="8872" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="8877" class="Symbol">→</a> <a id="8879" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a>
  <a id="8886" href="Ledger.Dijkstra.Specification.Transaction.html#8859" class="Function">scriptOuts</a> <a id="8897" href="Ledger.Dijkstra.Specification.Transaction.html#8897" class="Bound">utxo</a> <a id="8902" class="Symbol">=</a> <a id="8904" href="Ledger.Dijkstra.Specification.Transaction.html#158" class="Function">filter</a> <a id="8911" class="Symbol">(λ</a> <a id="8914" class="Symbol">(_</a> <a id="8917" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8919" href="Ledger.Dijkstra.Specification.Transaction.html#8919" class="Bound">addr</a> <a id="8924" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8926" class="Symbol">_)</a> <a id="8929" class="Symbol">→</a> <a id="8931" href="Ledger.Core.Specification.Address.html#2758" class="Function">isScriptAddr</a> <a id="8944" href="Ledger.Dijkstra.Specification.Transaction.html#8919" class="Bound">addr</a><a id="8948" class="Symbol">)</a> <a id="8950" href="Ledger.Dijkstra.Specification.Transaction.html#8897" class="Bound">utxo</a>

  <a id="TransactionStructure.txinsScript"></a><a id="8958" href="Ledger.Dijkstra.Specification.Transaction.html#8958" class="Function">txinsScript</a> <a id="8970" class="Symbol">:</a> <a id="8972" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="8974" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a> <a id="8979" class="Symbol">→</a> <a id="8981" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="8986" class="Symbol">→</a> <a id="8988" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="8990" href="Ledger.Dijkstra.Specification.Transaction.html#2987" class="Function">TxIn</a>
  <a id="8997" href="Ledger.Dijkstra.Specification.Transaction.html#8958" class="Function">txinsScript</a> <a id="9009" href="Ledger.Dijkstra.Specification.Transaction.html#9009" class="Bound">txins</a> <a id="9015" href="Ledger.Dijkstra.Specification.Transaction.html#9015" class="Bound">utxo</a> <a id="9020" class="Symbol">=</a> <a id="9022" href="Ledger.Dijkstra.Specification.Transaction.html#9009" class="Bound">txins</a> <a id="9028" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="9030" href="Class.IsSet.html#916" class="Function">dom</a> <a id="9034" class="Symbol">(</a><a id="9035" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9041" class="Symbol">(</a><a id="9042" href="Ledger.Dijkstra.Specification.Transaction.html#8859" class="Function">scriptOuts</a> <a id="9053" href="Ledger.Dijkstra.Specification.Transaction.html#9015" class="Bound">utxo</a><a id="9057" class="Symbol">))</a>

  <a id="TransactionStructure.refScripts"></a><a id="9063" href="Ledger.Dijkstra.Specification.Transaction.html#9063" class="Function">refScripts</a> <a id="9074" class="Symbol">:</a> <a id="9076" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="9079" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a> <a id="9087" class="Symbol">→</a> <a id="9089" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="9094" class="Symbol">→</a> <a id="9096" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9101" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
  <a id="9110" href="Ledger.Dijkstra.Specification.Transaction.html#9063" class="Function">refScripts</a> <a id="9121" href="Ledger.Dijkstra.Specification.Transaction.html#9121" class="Bound">tx</a> <a id="9124" href="Ledger.Dijkstra.Specification.Transaction.html#9124" class="Bound">utxo</a> <a id="9129" class="Symbol">=</a>
    <a id="9135" href="Data.List.Base.html#4606" class="Function">mapMaybe</a> <a id="9144" class="Symbol">(</a><a id="9145" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="9151" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="9153" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="9159" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="9161" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="9166" class="Symbol">)</a> <a id="9168" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="9170" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="9180" class="Symbol">(</a><a id="9181" href="Class.IsSet.html#959" class="Function">range</a> <a id="9187" class="Symbol">(</a><a id="9188" href="Ledger.Dijkstra.Specification.Transaction.html#9124" class="Bound">utxo</a> <a id="9193" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="9195" class="Symbol">(</a><a id="9196" href="Ledger.Dijkstra.Specification.Transaction.html#3789" class="Function">txIns</a> <a id="9202" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="9204" href="Ledger.Dijkstra.Specification.Transaction.html#3827" class="Function">refInputs</a><a id="9213" class="Symbol">)))</a>
    <a id="9221" class="Keyword">where</a> <a id="9227" class="Keyword">open</a> <a id="9232" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Module">Tx</a><a id="9234" class="Symbol">;</a> <a id="9236" class="Keyword">open</a> <a id="9241" href="Ledger.Dijkstra.Specification.Transaction.html#3713" class="Module">TxBody</a> <a id="9248" class="Symbol">(</a><a id="9249" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a> <a id="9258" href="Ledger.Dijkstra.Specification.Transaction.html#9121" class="Bound">tx</a><a id="9260" class="Symbol">)</a>

  <a id="TransactionStructure.txscripts"></a><a id="9265" href="Ledger.Dijkstra.Specification.Transaction.html#9265" class="Function">txscripts</a> <a id="9275" class="Symbol">:</a> <a id="9277" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="9280" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a> <a id="9288" class="Symbol">→</a> <a id="9290" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="9295" class="Symbol">→</a> <a id="9297" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="9299" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
  <a id="9308" href="Ledger.Dijkstra.Specification.Transaction.html#9265" class="Function">txscripts</a> <a id="9318" href="Ledger.Dijkstra.Specification.Transaction.html#9318" class="Bound">tx</a> <a id="9321" href="Ledger.Dijkstra.Specification.Transaction.html#9321" class="Bound">utxo</a> <a id="9326" class="Symbol">=</a> <a id="9328" href="Ledger.Dijkstra.Specification.Transaction.html#5237" class="Field">scripts</a> <a id="9336" class="Symbol">(</a><a id="9337" href="Ledger.Dijkstra.Specification.Transaction.html#9318" class="Bound">tx</a> <a id="9340" class="Symbol">.</a><a id="9341" href="Ledger.Dijkstra.Specification.Transaction.html#3576" class="Field">txWitnesses</a><a id="9352" class="Symbol">)</a> <a id="9354" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="9356" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="9365" class="Symbol">(</a><a id="9366" href="Ledger.Dijkstra.Specification.Transaction.html#9063" class="Function">refScripts</a> <a id="9377" href="Ledger.Dijkstra.Specification.Transaction.html#9318" class="Bound">tx</a> <a id="9380" href="Ledger.Dijkstra.Specification.Transaction.html#9321" class="Bound">utxo</a><a id="9384" class="Symbol">)</a>
    <a id="9390" class="Keyword">where</a> <a id="9396" class="Keyword">open</a> <a id="9401" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Module">Tx</a><a id="9403" class="Symbol">;</a> <a id="9405" class="Keyword">open</a> <a id="9410" href="Ledger.Dijkstra.Specification.Transaction.html#5122" class="Module">TxWitnesses</a>

  <a id="TransactionStructure.lookupScriptHash"></a><a id="9425" href="Ledger.Dijkstra.Specification.Transaction.html#9425" class="Function">lookupScriptHash</a> <a id="9442" class="Symbol">:</a> <a id="9444" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a> <a id="9455" class="Symbol">→</a> <a id="9457" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="9460" href="Ledger.Dijkstra.Specification.Transaction.html#1058" class="Generalizable">txLevel</a> <a id="9468" class="Symbol">→</a> <a id="9470" href="Ledger.Dijkstra.Specification.Transaction.html#3102" class="Function">UTxO</a> <a id="9475" class="Symbol">→</a> <a id="9477" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9483" href="Ledger.Conway.Specification.Script.Base.html#2445" class="Function">Script</a>
  <a id="9492" href="Ledger.Dijkstra.Specification.Transaction.html#9425" class="Function">lookupScriptHash</a> <a id="9509" href="Ledger.Dijkstra.Specification.Transaction.html#9509" class="Bound">sh</a> <a id="9512" href="Ledger.Dijkstra.Specification.Transaction.html#9512" class="Bound">tx</a> <a id="9515" href="Ledger.Dijkstra.Specification.Transaction.html#9515" class="Bound">utxo</a> <a id="9520" class="Symbol">=</a>
    <a id="9526" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="9529" href="Ledger.Dijkstra.Specification.Transaction.html#9509" class="Bound">sh</a> <a id="9532" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="9534" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="9539" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="9545" class="Symbol">(</a><a id="9546" href="Ledger.Dijkstra.Specification.Transaction.html#9615" class="Function">m</a> <a id="9548" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="9549" class="Symbol">)</a> <a id="9551" href="Class.ToBool.html#342" class="Function Operator">then</a>
      <a id="9562" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9567" class="Symbol">(</a><a id="9568" href="Axiom.Set.Map.html#16825" class="Function">lookupᵐ</a> <a id="9576" href="Ledger.Dijkstra.Specification.Transaction.html#9615" class="Function">m</a> <a id="9578" href="Ledger.Dijkstra.Specification.Transaction.html#9509" class="Bound">sh</a><a id="9580" class="Symbol">)</a>
    <a id="9586" href="Class.ToBool.html#342" class="Function Operator">else</a>
      <a id="9597" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="9609" class="Keyword">where</a> <a id="9615" href="Ledger.Dijkstra.Specification.Transaction.html#9615" class="Function">m</a> <a id="9617" class="Symbol">=</a> <a id="9619" href="Ledger.Prelude.html#1789" class="Function">setToMap</a> <a id="9628" class="Symbol">(</a><a id="9629" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="9634" href="Data.Product.Base.html#2000" class="Function Operator">&lt;</a> <a id="9636" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="9641" href="Data.Product.Base.html#2000" class="Function Operator">,</a> <a id="9643" href="Function.Base.html#704" class="Function">id</a> <a id="9646" href="Data.Product.Base.html#2000" class="Function Operator">&gt;</a> <a id="9648" class="Symbol">(</a><a id="9649" href="Ledger.Dijkstra.Specification.Transaction.html#9265" class="Function">txscripts</a> <a id="9659" href="Ledger.Dijkstra.Specification.Transaction.html#9512" class="Bound">tx</a> <a id="9662" href="Ledger.Dijkstra.Specification.Transaction.html#9515" class="Bound">utxo</a><a id="9666" class="Symbol">))</a>

  <a id="TransactionStructure.getSubTxScripts"></a><a id="9672" href="Ledger.Dijkstra.Specification.Transaction.html#9672" class="Function">getSubTxScripts</a> <a id="9688" class="Symbol">:</a> <a id="9690" href="Ledger.Dijkstra.Specification.Transaction.html#5493" class="Function">SubLevelTx</a> <a id="9701" class="Symbol">→</a> <a id="9703" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="9705" class="Symbol">(</a><a id="9706" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a> <a id="9711" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9713" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a><a id="9723" class="Symbol">)</a>
  <a id="9727" href="Ledger.Dijkstra.Specification.Transaction.html#9672" class="Function">getSubTxScripts</a> <a id="9743" href="Ledger.Dijkstra.Specification.Transaction.html#9743" class="Bound">subtx</a> <a id="9749" class="Symbol">=</a> <a id="9751" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="9756" class="Symbol">(λ</a> <a id="9759" href="Ledger.Dijkstra.Specification.Transaction.html#9759" class="Bound">hash</a> <a id="9764" class="Symbol">→</a> <a id="9766" class="Symbol">(</a><a id="9767" href="Ledger.Dijkstra.Specification.Transaction.html#5798" class="Field">TxIdOf</a> <a id="9774" href="Ledger.Dijkstra.Specification.Transaction.html#9743" class="Bound">subtx</a> <a id="9780" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9782" href="Ledger.Dijkstra.Specification.Transaction.html#9759" class="Bound">hash</a><a id="9786" class="Symbol">))</a> <a id="9789" class="Symbol">(</a><a id="9790" href="Ledger.Dijkstra.Specification.Transaction.html#9824" class="Function">ScriptHashes</a> <a id="9803" href="Ledger.Dijkstra.Specification.Transaction.html#9743" class="Bound">subtx</a><a id="9808" class="Symbol">)</a>
    <a id="9814" class="Keyword">where</a>
    <a id="9824" href="Ledger.Dijkstra.Specification.Transaction.html#9824" class="Function">ScriptHashes</a> <a id="9837" class="Symbol">:</a> <a id="9839" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="9842" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a> <a id="9853" class="Symbol">→</a> <a id="9855" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="9857" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
    <a id="9872" href="Ledger.Dijkstra.Specification.Transaction.html#9824" class="Function">ScriptHashes</a> <a id="9885" class="Symbol">=</a> <a id="9887" href="Class.IsSet.html#916" class="Function">dom</a> <a id="9891" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="9893" href="Ledger.Dijkstra.Specification.Transaction.html#4988" class="Field">TxBody.txRequiredTopLevelGuards</a> <a id="9925" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="9927" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a>

  <a id="TransactionStructure.getTxScripts"></a><a id="9939" href="Ledger.Dijkstra.Specification.Transaction.html#9939" class="Function">getTxScripts</a> <a id="9952" class="Symbol">:</a> <a id="9954" class="Symbol">{</a><a id="9955" href="Ledger.Dijkstra.Specification.Transaction.html#9955" class="Bound">ℓ</a> <a id="9957" class="Symbol">:</a> <a id="9959" href="Ledger.Dijkstra.Specification.Transaction.html#712" class="Datatype">TxLevel</a><a id="9966" class="Symbol">}</a> <a id="9968" class="Symbol">→</a> <a id="9970" href="Ledger.Dijkstra.Specification.Transaction.html#3466" class="Record">Tx</a> <a id="9973" href="Ledger.Dijkstra.Specification.Transaction.html#9955" class="Bound">ℓ</a> <a id="9975" class="Symbol">→</a> <a id="9977" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="9979" class="Symbol">(</a><a id="9980" href="Ledger.Dijkstra.Specification.Transaction.html#1323" class="Field">TxId</a> <a id="9985" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9987" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a><a id="9997" class="Symbol">)</a>
  <a id="10001" href="Ledger.Dijkstra.Specification.Transaction.html#9939" class="Function">getTxScripts</a> <a id="10014" class="Symbol">{</a><a id="10015" href="Ledger.Dijkstra.Specification.Transaction.html#746" class="InductiveConstructor">TxLevelSub</a><a id="10025" class="Symbol">}</a> <a id="10027" class="Symbol">=</a> <a id="10029" href="Ledger.Dijkstra.Specification.Transaction.html#9672" class="Function">getSubTxScripts</a>
  <a id="10047" href="Ledger.Dijkstra.Specification.Transaction.html#9939" class="Function">getTxScripts</a> <a id="10060" class="Symbol">{</a><a id="10061" href="Ledger.Dijkstra.Specification.Transaction.html#735" class="InductiveConstructor">TxLevelTop</a><a id="10071" class="Symbol">}</a> <a id="10073" class="Symbol">=</a>
    <a id="10079" href="Axiom.Set.html#7207" class="Function">concatMapˢ</a> <a id="10090" href="Ledger.Dijkstra.Specification.Transaction.html#9672" class="Function">getSubTxScripts</a> <a id="10106" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="10108" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="10117" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="10119" href="Ledger.Dijkstra.Specification.Transaction.html#4636" class="Field">TxBody.txSubTransactions</a> <a id="10144" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="10146" href="Ledger.Dijkstra.Specification.Transaction.html#5674" class="Field">TxBodyOf</a>

</pre></body></html>