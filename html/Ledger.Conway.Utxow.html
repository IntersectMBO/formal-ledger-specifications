<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Utxow</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Ledger.Conway.Crypto.html" class="Module">Ledger.Conway.Crypto</a>
<a id="86" class="Keyword">open</a> <a id="91" class="Keyword">import</a> <a id="98" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>
<a id="121" class="Keyword">open</a> <a id="126" class="Keyword">import</a> <a id="133" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>

<a id="160" class="Keyword">module</a> <a id="167" href="Ledger.Conway.Utxow.html" class="Module">Ledger.Conway.Utxow</a>
  <a id="189" class="Symbol">(</a><a id="190" href="Ledger.Conway.Utxow.html#190" class="Bound">txs</a> <a id="194" class="Symbol">:</a> <a id="196" class="Symbol">_)</a> <a id="199" class="Symbol">(</a><a id="200" class="Keyword">open</a> <a id="205" href="Ledger.Conway.Transaction.html#872" class="Module">TransactionStructure</a> <a id="226" href="Ledger.Conway.Utxow.html#190" class="Bound">txs</a><a id="229" class="Symbol">)</a>
  <a id="233" class="Symbol">(</a><a id="234" href="Ledger.Conway.Utxow.html#234" class="Bound">abs</a> <a id="238" class="Symbol">:</a> <a id="240" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="258" href="Ledger.Conway.Utxow.html#190" class="Bound">txs</a><a id="261" class="Symbol">)</a> <a id="263" class="Symbol">(</a><a id="264" class="Keyword">open</a> <a id="269" href="Ledger.Conway.Abstract.html#599" class="Module">AbstractFunctions</a> <a id="287" href="Ledger.Conway.Utxow.html#234" class="Bound">abs</a><a id="290" class="Symbol">)</a>
  <a id="294" class="Keyword">where</a>
<a id="300" class="Keyword">open</a> <a id="305" class="Keyword">import</a> <a id="312" href="Ledger.Conway.Utxo.html" class="Module">Ledger.Conway.Utxo</a> <a id="331" href="Ledger.Conway.Utxow.html#190" class="Bound">txs</a> <a id="335" href="Ledger.Conway.Utxow.html#234" class="Bound">abs</a>
<a id="339" class="Keyword">open</a> <a id="344" class="Keyword">import</a> <a id="351" href="Ledger.Conway.Script.Validation.html" class="Module">Ledger.Conway.Script.Validation</a> <a id="383" href="Ledger.Conway.Utxow.html#190" class="Bound">txs</a> <a id="387" href="Ledger.Conway.Utxow.html#234" class="Bound">abs</a>
<a id="391" class="Keyword">open</a> <a id="396" class="Keyword">import</a> <a id="403" href="Ledger.Conway.Certs.html" class="Module">Ledger.Conway.Certs</a> <a id="423" href="Ledger.Conway.Transaction.html#1852" class="Function">govStructure</a>


<a id="438" class="Keyword">module</a> <a id="445" href="Ledger.Conway.Utxow.html#445" class="Module">_</a> <a id="447" class="Symbol">(</a><a id="448" href="Ledger.Conway.Utxow.html#448" class="Bound">o</a> <a id="450" class="Symbol">:</a> <a id="452" href="Ledger.Conway.Transaction.html#2357" class="Function">TxOut</a><a id="457" class="Symbol">)</a> <a id="459" class="Keyword">where</a>
  <a id="467" href="Ledger.Conway.Utxow.html#467" class="Function">d</a> <a id="469" class="Symbol">=</a> <a id="471" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="477" class="Symbol">(</a><a id="478" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="484" class="Symbol">(</a><a id="485" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="491" href="Ledger.Conway.Utxow.html#448" class="Bound">o</a><a id="492" class="Symbol">))</a>
  <a id="497" class="Keyword">data</a> <a id="502" href="Ledger.Conway.Utxow.html#502" class="Datatype">HasInlineDatum</a> <a id="517" class="Symbol">:</a> <a id="519" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="523" class="Keyword">where</a>
    <a id="533" href="Ledger.Conway.Utxow.html#533" class="InductiveConstructor">InlineDatum</a>  <a id="546" class="Symbol">:</a> <a id="548" class="Symbol">∀</a> <a id="550" class="Symbol">{</a><a id="551" href="Ledger.Conway.Utxow.html#551" class="Bound">d&#39;</a><a id="553" class="Symbol">}</a> <a id="555" class="Symbol">→</a> <a id="557" href="Ledger.Conway.Utxow.html#467" class="Function">d</a> <a id="559" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="561" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="566" class="Symbol">(</a><a id="567" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="572" href="Ledger.Conway.Utxow.html#551" class="Bound">d&#39;</a><a id="574" class="Symbol">)</a> <a id="576" class="Symbol">→</a> <a id="578" href="Ledger.Conway.Utxow.html#502" class="Datatype">HasInlineDatum</a>

<a id="594" class="Keyword">instance</a>
  <a id="Dec-HasInlineDatum"></a><a id="605" href="Ledger.Conway.Utxow.html#605" class="Function">Dec-HasInlineDatum</a> <a id="624" class="Symbol">:</a> <a id="626" class="Symbol">∀</a> <a id="628" class="Symbol">{</a><a id="629" href="Ledger.Conway.Utxow.html#629" class="Bound">o</a><a id="630" class="Symbol">}</a> <a id="632" class="Symbol">→</a> <a id="634" href="Ledger.Conway.Utxow.html#502" class="Datatype">HasInlineDatum</a> <a id="649" href="Ledger.Conway.Utxow.html#629" class="Bound">o</a> <a id="651" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="655" href="Ledger.Conway.Utxow.html#605" class="Function">Dec-HasInlineDatum</a> <a id="674" class="Symbol">{_</a> <a id="677" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="679" class="Symbol">_</a> <a id="681" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="683" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="688" class="Symbol">(</a><a id="689" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="694" href="Ledger.Conway.Utxow.html#694" class="Bound">x</a><a id="695" class="Symbol">)</a> <a id="697" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="699" class="Symbol">_}</a> <a id="702" class="Symbol">=</a> <a id="704" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="706" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="710" class="Symbol">(</a><a id="711" href="Ledger.Conway.Utxow.html#533" class="InductiveConstructor">InlineDatum</a> <a id="723" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="727" class="Symbol">)</a>
  <a id="731" href="Ledger.Conway.Utxow.html#605" class="Function">Dec-HasInlineDatum</a> <a id="750" class="Symbol">{_</a> <a id="753" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="755" class="Symbol">_</a> <a id="757" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="759" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="764" class="Symbol">(</a><a id="765" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="770" href="Ledger.Conway.Utxow.html#770" class="Bound">x</a><a id="771" class="Symbol">)</a> <a id="773" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="775" class="Symbol">_}</a> <a id="778" class="Symbol">=</a> <a id="780" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="782" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="785" class="Symbol">λ</a> <a id="787" class="Keyword">where</a>
    <a id="797" class="Symbol">(</a><a id="798" href="Ledger.Conway.Utxow.html#533" class="InductiveConstructor">InlineDatum</a> <a id="810" href="Ledger.Conway.Utxow.html#810" class="Bound">x</a><a id="811" class="Symbol">)</a> <a id="813" class="Symbol">→</a> <a id="815" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="820" href="Ledger.Conway.Utxow.html#810" class="Bound">x</a> <a id="822" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="825" class="Symbol">λ</a> <a id="827" class="Symbol">()</a>
  <a id="832" href="Ledger.Conway.Utxow.html#605" class="Function">Dec-HasInlineDatum</a> <a id="851" class="Symbol">{_</a> <a id="854" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="856" class="Symbol">_</a> <a id="858" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="860" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="868" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="870" class="Symbol">_}</a> <a id="873" class="Symbol">=</a> <a id="875" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="877" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="880" class="Symbol">λ</a> <a id="882" class="Keyword">where</a>
    <a id="892" class="Symbol">(</a><a id="893" href="Ledger.Conway.Utxow.html#533" class="InductiveConstructor">InlineDatum</a> <a id="905" href="Ledger.Conway.Utxow.html#905" class="Bound">x</a><a id="906" class="Symbol">)</a> <a id="908" class="Symbol">→</a> <a id="910" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="915" href="Ledger.Conway.Utxow.html#905" class="Bound">x</a> <a id="917" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="920" class="Symbol">λ</a> <a id="922" class="Symbol">()</a>

<a id="926" class="Keyword">module</a> <a id="933" href="Ledger.Conway.Utxow.html#933" class="Module">_</a> <a id="935" class="Symbol">(</a><a id="936" href="Ledger.Conway.Utxow.html#936" class="Bound">txb</a> <a id="940" class="Symbol">:</a> <a id="942" href="Ledger.Conway.Transaction.html#2714" class="Record">TxBody</a><a id="948" class="Symbol">)</a> <a id="950" class="Symbol">(</a><a id="951" class="Keyword">let</a> <a id="955" class="Keyword">open</a> <a id="960" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="967" href="Ledger.Conway.Utxow.html#936" class="Bound">txb</a><a id="970" class="Symbol">)</a> <a id="972" class="Keyword">where</a>
  <a id="980" class="Keyword">data</a> <a id="985" href="Ledger.Conway.Utxow.html#985" class="Datatype">UsesV3Features</a> <a id="1000" class="Symbol">:</a> <a id="1002" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1006" class="Keyword">where</a>
    <a id="1016" href="Ledger.Conway.Utxow.html#1016" class="InductiveConstructor">HasVotes</a> <a id="1025" class="Symbol">:</a> <a id="1027" href="Ledger.Conway.Transaction.html#3010" class="Field">txvote</a> <a id="1034" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="1036" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1039" class="Symbol">→</a> <a id="1041" href="Ledger.Conway.Utxow.html#985" class="Datatype">UsesV3Features</a>
    <a id="1060" href="Ledger.Conway.Utxow.html#1060" class="InductiveConstructor">HasProps</a> <a id="1069" class="Symbol">:</a> <a id="1071" href="Ledger.Conway.Transaction.html#3046" class="Field">txprop</a> <a id="1078" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="1080" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1083" class="Symbol">→</a> <a id="1085" href="Ledger.Conway.Utxow.html#985" class="Datatype">UsesV3Features</a>
    <a id="1104" href="Ledger.Conway.Utxow.html#1104" class="InductiveConstructor">HasDonation</a> <a id="1116" class="Symbol">:</a> <a id="1118" href="Ledger.Conway.Transaction.html#3086" class="Field">txdonation</a> <a id="1129" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="1131" class="Number">0</a> <a id="1133" class="Symbol">→</a> <a id="1135" href="Ledger.Conway.Utxow.html#985" class="Datatype">UsesV3Features</a>
    <a id="1154" href="Ledger.Conway.Utxow.html#1154" class="InductiveConstructor">HasTreasury</a> <a id="1166" class="Symbol">:</a> <a id="1168" href="Ledger.Conway.Transaction.html#3223" class="Field">curTreasury</a> <a id="1180" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="1182" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1190" class="Symbol">→</a> <a id="1192" href="Ledger.Conway.Utxow.html#985" class="Datatype">UsesV3Features</a>

<a id="1208" class="Keyword">instance</a>
  <a id="Dec-UsesV3Features"></a><a id="1219" href="Ledger.Conway.Utxow.html#1219" class="Function">Dec-UsesV3Features</a> <a id="1238" class="Symbol">:</a> <a id="1240" class="Symbol">∀</a> <a id="1242" class="Symbol">{</a><a id="1243" href="Ledger.Conway.Utxow.html#1243" class="Bound">txb</a><a id="1246" class="Symbol">}</a> <a id="1248" class="Symbol">→</a> <a id="1250" href="Ledger.Conway.Utxow.html#985" class="Datatype">UsesV3Features</a> <a id="1265" href="Ledger.Conway.Utxow.html#1243" class="Bound">txb</a> <a id="1269" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="1273" href="Ledger.Conway.Utxow.html#1219" class="Function">Dec-UsesV3Features</a> <a id="1292" class="Symbol">{</a><a id="1293" class="Keyword">record</a> <a id="1300" class="Symbol">{</a> <a id="1302" href="Ledger.Conway.Transaction.html#3010" class="Field">txvote</a> <a id="1309" class="Symbol">=</a> <a id="1311" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1314" class="Symbol">;</a> <a id="1316" href="Ledger.Conway.Transaction.html#3046" class="Field">txprop</a> <a id="1323" class="Symbol">=</a> <a id="1325" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1328" class="Symbol">;</a> <a id="1330" href="Ledger.Conway.Transaction.html#3086" class="Field">txdonation</a> <a id="1341" class="Symbol">=</a> <a id="1343" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="1348" class="Symbol">;</a> <a id="1350" href="Ledger.Conway.Transaction.html#3223" class="Field">curTreasury</a> <a id="1362" class="Symbol">=</a> <a id="1364" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1372" class="Symbol">}}</a>
    <a id="1379" class="Symbol">=</a> <a id="1381" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1383" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1386" class="Symbol">λ</a> <a id="1388" class="Keyword">where</a> <a id="1394" class="Symbol">(</a><a id="1395" href="Ledger.Conway.Utxow.html#1016" class="InductiveConstructor">HasVotes</a> <a id="1404" href="Ledger.Conway.Utxow.html#1404" class="Bound">x</a><a id="1405" class="Symbol">)</a>    <a id="1410" class="Symbol">→</a> <a id="1412" href="Ledger.Conway.Utxow.html#1404" class="Bound">x</a> <a id="1414" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                   <a id="1438" class="Symbol">(</a><a id="1439" href="Ledger.Conway.Utxow.html#1060" class="InductiveConstructor">HasProps</a> <a id="1448" href="Ledger.Conway.Utxow.html#1448" class="Bound">x</a><a id="1449" class="Symbol">)</a>    <a id="1454" class="Symbol">→</a> <a id="1456" href="Ledger.Conway.Utxow.html#1448" class="Bound">x</a> <a id="1458" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                   <a id="1482" class="Symbol">(</a><a id="1483" href="Ledger.Conway.Utxow.html#1104" class="InductiveConstructor">HasDonation</a> <a id="1495" href="Ledger.Conway.Utxow.html#1495" class="Bound">x</a><a id="1496" class="Symbol">)</a> <a id="1498" class="Symbol">→</a> <a id="1500" href="Ledger.Conway.Utxow.html#1495" class="Bound">x</a> <a id="1502" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
                   <a id="1526" class="Symbol">(</a><a id="1527" href="Ledger.Conway.Utxow.html#1154" class="InductiveConstructor">HasTreasury</a> <a id="1539" href="Ledger.Conway.Utxow.html#1539" class="Bound">x</a><a id="1540" class="Symbol">)</a> <a id="1542" class="Symbol">→</a> <a id="1544" href="Ledger.Conway.Utxow.html#1539" class="Bound">x</a> <a id="1546" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="1553" href="Ledger.Conway.Utxow.html#1219" class="Function">Dec-UsesV3Features</a> <a id="1572" class="Symbol">{</a><a id="1573" class="Keyword">record</a> <a id="1580" class="Symbol">{</a> <a id="1582" href="Ledger.Conway.Transaction.html#3010" class="Field">txvote</a> <a id="1589" class="Symbol">=</a> <a id="1591" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1594" class="Symbol">;</a> <a id="1596" href="Ledger.Conway.Transaction.html#3046" class="Field">txprop</a> <a id="1603" class="Symbol">=</a> <a id="1605" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1608" class="Symbol">;</a> <a id="1610" href="Ledger.Conway.Transaction.html#3086" class="Field">txdonation</a> <a id="1621" class="Symbol">=</a> <a id="1623" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="1628" class="Symbol">;</a> <a id="1630" href="Ledger.Conway.Transaction.html#3223" class="Field">curTreasury</a> <a id="1642" class="Symbol">=</a> <a id="1644" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1649" href="Ledger.Conway.Utxow.html#1649" class="Bound">x</a> <a id="1651" class="Symbol">}}</a>
    <a id="1658" class="Symbol">=</a> <a id="1660" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1662" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1666" class="Symbol">(</a><a id="1667" href="Ledger.Conway.Utxow.html#1154" class="InductiveConstructor">HasTreasury</a> <a id="1679" class="Symbol">(λ</a> <a id="1682" class="Symbol">()))</a>
  <a id="1689" href="Ledger.Conway.Utxow.html#1219" class="Function">Dec-UsesV3Features</a> <a id="1708" class="Symbol">{</a><a id="1709" class="Keyword">record</a> <a id="1716" class="Symbol">{</a> <a id="1718" href="Ledger.Conway.Transaction.html#3010" class="Field">txvote</a> <a id="1725" class="Symbol">=</a> <a id="1727" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1730" class="Symbol">;</a> <a id="1732" href="Ledger.Conway.Transaction.html#3046" class="Field">txprop</a> <a id="1739" class="Symbol">=</a> <a id="1741" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1744" class="Symbol">;</a> <a id="1746" href="Ledger.Conway.Transaction.html#3086" class="Field">txdonation</a> <a id="1757" class="Symbol">=</a> <a id="1759" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1763" href="Ledger.Conway.Utxow.html#1763" class="Bound">txdonation</a> <a id="1774" class="Symbol">}}</a>
    <a id="1781" class="Symbol">=</a> <a id="1783" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1785" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1789" class="Symbol">(</a><a id="1790" href="Ledger.Conway.Utxow.html#1104" class="InductiveConstructor">HasDonation</a> <a id="1802" class="Symbol">(λ</a> <a id="1805" class="Symbol">()))</a>
  <a id="1812" href="Ledger.Conway.Utxow.html#1219" class="Function">Dec-UsesV3Features</a> <a id="1831" class="Symbol">{</a><a id="1832" class="Keyword">record</a> <a id="1839" class="Symbol">{</a> <a id="1841" href="Ledger.Conway.Transaction.html#3010" class="Field">txvote</a> <a id="1848" class="Symbol">=</a> <a id="1850" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1853" class="Symbol">;</a> <a id="1855" href="Ledger.Conway.Transaction.html#3046" class="Field">txprop</a> <a id="1862" class="Symbol">=</a> <a id="1864" href="Ledger.Conway.Utxow.html#1864" class="Bound">x</a> <a id="1866" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1868" href="Ledger.Conway.Utxow.html#1868" class="Bound">txprop</a> <a id="1875" class="Symbol">}}</a> <a id="1878" class="Symbol">=</a> <a id="1880" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1882" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1886" class="Symbol">(</a><a id="1887" href="Ledger.Conway.Utxow.html#1060" class="InductiveConstructor">HasProps</a> <a id="1896" class="Symbol">(λ</a> <a id="1899" class="Symbol">()))</a>
  <a id="1906" href="Ledger.Conway.Utxow.html#1219" class="Function">Dec-UsesV3Features</a> <a id="1925" class="Symbol">{</a><a id="1926" class="Keyword">record</a> <a id="1933" class="Symbol">{</a> <a id="1935" href="Ledger.Conway.Transaction.html#3010" class="Field">txvote</a> <a id="1942" class="Symbol">=</a> <a id="1944" href="Ledger.Conway.Utxow.html#1944" class="Bound">x</a> <a id="1946" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1948" href="Ledger.Conway.Utxow.html#1948" class="Bound">txvote</a> <a id="1955" class="Symbol">}}</a> <a id="1958" class="Symbol">=</a> <a id="1960" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1962" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="1966" class="Symbol">(</a><a id="1967" href="Ledger.Conway.Utxow.html#1016" class="InductiveConstructor">HasVotes</a> <a id="1976" class="Symbol">(λ</a> <a id="1979" class="Symbol">()))</a>

<a id="languages"></a><a id="1985" href="Ledger.Conway.Utxow.html#1985" class="Function">languages</a> <a id="1995" class="Symbol">:</a> <a id="1997" href="Ledger.Conway.Transaction.html#4227" class="Record">Tx</a> <a id="2000" class="Symbol">→</a> <a id="2002" href="Ledger.Conway.Transaction.html#2425" class="Function">UTxO</a> <a id="2007" class="Symbol">→</a> <a id="2009" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2011" href="Ledger.Conway.Script.Base.html#937" class="Function">Language</a>
<a id="2020" href="Ledger.Conway.Utxow.html#1985" class="Function">languages</a> <a id="2030" href="Ledger.Conway.Utxow.html#2030" class="Bound">tx</a> <a id="2033" href="Ledger.Conway.Utxow.html#2033" class="Bound">utxo</a> <a id="2038" class="Symbol">=</a> <a id="2040" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="2051" href="Ledger.Conway.Utxow.html#2095" class="Function">getLanguage</a> <a id="2063" class="Symbol">(</a><a id="2064" href="Ledger.Conway.Transaction.html#5732" class="Function">txscripts</a> <a id="2074" href="Ledger.Conway.Utxow.html#2030" class="Bound">tx</a> <a id="2077" href="Ledger.Conway.Utxow.html#2033" class="Bound">utxo</a><a id="2081" class="Symbol">)</a>
  <a id="2085" class="Keyword">where</a>
    <a id="2095" href="Ledger.Conway.Utxow.html#2095" class="Function">getLanguage</a> <a id="2107" class="Symbol">:</a> <a id="2109" href="Ledger.Conway.Script.Base.html#2413" class="Function">Script</a> <a id="2116" class="Symbol">→</a> <a id="2118" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2124" href="Ledger.Conway.Script.Base.html#937" class="Function">Language</a>
    <a id="2137" href="Ledger.Conway.Utxow.html#2095" class="Function">getLanguage</a> <a id="2149" class="Symbol">(</a><a id="2150" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2155" class="Symbol">_)</a> <a id="2158" class="Symbol">=</a> <a id="2160" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="2172" href="Ledger.Conway.Utxow.html#2095" class="Function">getLanguage</a> <a id="2184" class="Symbol">(</a><a id="2185" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2190" href="Ledger.Conway.Utxow.html#2190" class="Bound">s</a><a id="2191" class="Symbol">)</a> <a id="2193" class="Symbol">=</a> <a id="2195" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2200" class="Symbol">(</a><a id="2201" href="Ledger.Conway.Script.Base.html#1934" class="Function">language</a> <a id="2210" href="Ledger.Conway.Utxow.html#2190" class="Bound">s</a><a id="2211" class="Symbol">)</a>



<a id="allowedLanguages"></a><a id="2216" href="Ledger.Conway.Utxow.html#2216" class="Function">allowedLanguages</a> <a id="2233" class="Symbol">:</a> <a id="2235" href="Ledger.Conway.Transaction.html#4227" class="Record">Tx</a> <a id="2238" class="Symbol">→</a> <a id="2240" href="Ledger.Conway.Transaction.html#2425" class="Function">UTxO</a> <a id="2245" class="Symbol">→</a> <a id="2247" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2249" href="Ledger.Conway.Script.Base.html#937" class="Function">Language</a>
<a id="2258" href="Ledger.Conway.Utxow.html#2216" class="Function">allowedLanguages</a> <a id="2275" href="Ledger.Conway.Utxow.html#2275" class="Bound">tx</a> <a id="2278" href="Ledger.Conway.Utxow.html#2278" class="Bound">utxo</a> <a id="2283" class="Symbol">=</a>
  <a id="2287" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="2290" class="Symbol">(</a><a id="2291" href="Class.IsSet.html#736" class="Function">∃[</a> <a id="2294" href="Ledger.Conway.Utxow.html#2294" class="Bound">o</a> <a id="2296" href="Class.IsSet.html#736" class="Function">∈</a> <a id="2298" href="Ledger.Conway.Utxow.html#2597" class="Function">os</a> <a id="2301" href="Class.IsSet.html#736" class="Function">]</a> <a id="2303" href="Ledger.Conway.Address.html#2972" class="Datatype">isBootstrapAddr</a> <a id="2319" class="Symbol">(</a><a id="2320" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2326" href="Ledger.Conway.Utxow.html#2294" class="Bound">o</a><a id="2327" class="Symbol">))</a>
    <a id="2334" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="2339" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="2343" href="Class.ToBool.html#389" class="Function Operator">else</a> <a id="2348" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="2351" href="Ledger.Conway.Utxow.html#985" class="Datatype">UsesV3Features</a> <a id="2366" href="Ledger.Conway.Utxow.html#2558" class="Function">txb</a>
    <a id="2374" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="2379" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="2388" class="Symbol">(</a><a id="2389" href="Ledger.Conway.Script.Base.html#1029" class="Function">PlutusV3</a> <a id="2398" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2400" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2402" class="Symbol">)</a>
  <a id="2406" href="Class.ToBool.html#389" class="Function Operator">else</a> <a id="2411" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="2414" href="Class.IsSet.html#736" class="Function">∃[</a> <a id="2417" href="Ledger.Conway.Utxow.html#2417" class="Bound">o</a> <a id="2419" href="Class.IsSet.html#736" class="Function">∈</a> <a id="2421" href="Ledger.Conway.Utxow.html#2597" class="Function">os</a> <a id="2424" href="Class.IsSet.html#736" class="Function">]</a> <a id="2426" href="Ledger.Conway.Utxow.html#502" class="Datatype">HasInlineDatum</a> <a id="2441" href="Ledger.Conway.Utxow.html#2417" class="Bound">o</a>
    <a id="2447" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="2452" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="2461" class="Symbol">(</a><a id="2462" href="Ledger.Conway.Script.Base.html#1020" class="Function">PlutusV2</a> <a id="2471" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2473" href="Ledger.Conway.Script.Base.html#1029" class="Function">PlutusV3</a> <a id="2482" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2484" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2486" class="Symbol">)</a>
  <a id="2490" href="Class.ToBool.html#389" class="Function Operator">else</a>
    <a id="2499" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="2508" class="Symbol">(</a><a id="2509" href="Ledger.Conway.Script.Base.html#1011" class="Function">PlutusV1</a> <a id="2518" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2520" href="Ledger.Conway.Script.Base.html#1020" class="Function">PlutusV2</a> <a id="2529" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2531" href="Ledger.Conway.Script.Base.html#1029" class="Function">PlutusV3</a> <a id="2540" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2542" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2544" class="Symbol">)</a>
  <a id="2548" class="Keyword">where</a>
    <a id="2558" href="Ledger.Conway.Utxow.html#2558" class="Function">txb</a> <a id="2562" class="Symbol">=</a> <a id="2564" href="Ledger.Conway.Utxow.html#2275" class="Bound">tx</a> <a id="2567" class="Symbol">.</a><a id="2568" href="Ledger.Conway.Transaction.html#4259" class="Field">Tx.body</a><a id="2575" class="Symbol">;</a> <a id="2577" class="Keyword">open</a> <a id="2582" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="2589" href="Ledger.Conway.Utxow.html#2558" class="Function">txb</a>
    <a id="2597" href="Ledger.Conway.Utxow.html#2597" class="Function">os</a> <a id="2600" class="Symbol">=</a> <a id="2602" href="Class.IsSet.html#959" class="Function">range</a> <a id="2608" class="Symbol">(</a><a id="2609" href="Ledger.Conway.Utxo.html#2168" class="Function">outs</a> <a id="2614" href="Ledger.Conway.Utxow.html#2558" class="Function">txb</a><a id="2617" class="Symbol">)</a> <a id="2619" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="2621" href="Class.IsSet.html#959" class="Function">range</a> <a id="2627" class="Symbol">(</a><a id="2628" href="Ledger.Conway.Utxow.html#2278" class="Bound">utxo</a> <a id="2633" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="2635" class="Symbol">(</a><a id="2636" href="Ledger.Conway.Transaction.html#2750" class="Function">txins</a> <a id="2642" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="2644" href="Ledger.Conway.Transaction.html#2780" class="Function">refInputs</a><a id="2653" class="Symbol">))</a>


<a id="2658" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,UTXOW⦈_"></a><a id="2667" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">_⊢_⇀⦇_,UTXOW⦈_</a> <a id="2682" class="Symbol">:</a> <a id="2684" href="Ledger.Conway.Utxo.html#1038" class="Record">UTxOEnv</a> <a id="2692" class="Symbol">→</a> <a id="2694" href="Ledger.Conway.Utxo.html#1390" class="Record">UTxOState</a> <a id="2704" class="Symbol">→</a> <a id="2706" href="Ledger.Conway.Transaction.html#4227" class="Record">Tx</a> <a id="2709" class="Symbol">→</a> <a id="2711" href="Ledger.Conway.Utxo.html#1390" class="Record">UTxOState</a> <a id="2721" class="Symbol">→</a> <a id="2723" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="2730" class="Keyword">private</a> <a id="2738" class="Keyword">variable</a>
  <a id="2749" href="Ledger.Conway.Utxow.html#2749" class="Generalizable">Γ</a>           <a id="2761" class="Symbol">:</a> <a id="2763" href="Ledger.Conway.Utxo.html#1038" class="Record">UTxOEnv</a>
  <a id="2773" href="Ledger.Conway.Utxow.html#2773" class="Generalizable">s</a> <a id="2775" href="Ledger.Conway.Utxow.html#2775" class="Generalizable">s&#39;</a>        <a id="2785" class="Symbol">:</a> <a id="2787" href="Ledger.Conway.Utxo.html#1390" class="Record">UTxOState</a>
  <a id="2799" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a>          <a id="2811" class="Symbol">:</a> <a id="2813" href="Ledger.Conway.Transaction.html#4227" class="Record">Tx</a>

<a id="2817" class="Keyword">open</a> <a id="2822" href="Ledger.Conway.Utxo.html#1390" class="Module">UTxOState</a>

<a id="2833" class="Keyword">data</a> <a id="2838" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">_⊢_⇀⦇_,UTXOW⦈_</a> <a id="2853" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXOW⦈_.UTXOW-inductive"></a><a id="2863" href="Ledger.Conway.Utxow.html#2863" class="InductiveConstructor">UTXOW-inductive</a> <a id="2879" class="Symbol">:</a>
    <a id="2885" class="Keyword">let</a>  <a id="2890" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a>                                <a id="2926" class="Symbol">=</a> <a id="2928" href="Ledger.Conway.Utxow.html#2773" class="Generalizable">s</a> <a id="2930" class="Symbol">.</a><a id="2931" href="Ledger.Conway.Utxo.html#1454" class="Field">utxo</a>


         <a id="2947" class="Keyword">open</a> <a id="2952" href="Ledger.Conway.Transaction.html#4227" class="Module">Tx</a> <a id="2955" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="2958" class="Keyword">renaming</a> <a id="2967" class="Symbol">(</a><a id="2968" href="Ledger.Conway.Transaction.html#4259" class="Field">body</a> <a id="2973" class="Symbol">to</a> <a id="2976" class="Field">txb</a><a id="2979" class="Symbol">);</a> <a id="2982" class="Keyword">open</a> <a id="2987" href="Ledger.Conway.Transaction.html#2714" class="Module">TxBody</a> <a id="2994" href="Ledger.Conway.Utxow.html#2976" class="Function">txb</a><a id="2997" class="Symbol">;</a> <a id="2999" class="Keyword">open</a> <a id="3004" href="Ledger.Conway.Transaction.html#3982" class="Module">TxWitnesses</a> <a id="3016" href="Ledger.Conway.Transaction.html#4283" class="Function">wits</a>


         <a id="3032" href="Ledger.Conway.Utxow.html#3032" class="Bound">witsKeyHashes</a>                       <a id="3068" class="Symbol">=</a> <a id="3070" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3075" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="3080" class="Symbol">(</a><a id="3081" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3085" href="Ledger.Conway.Transaction.html#4023" class="Function">vkSigs</a><a id="3091" class="Symbol">)</a>
         <a id="3102" href="Ledger.Conway.Utxow.html#3102" class="Bound">witsScriptHashes</a>                    <a id="3138" class="Symbol">=</a> <a id="3140" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3145" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="3150" href="Ledger.Conway.Transaction.html#4051" class="Function">scripts</a>
         <a id="3167" href="Ledger.Conway.Utxow.html#3167" class="Bound">refScriptHashes</a>                     <a id="3203" class="Symbol">=</a> <a id="3205" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3210" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="3215" class="Symbol">(</a><a id="3216" href="Ledger.Conway.Transaction.html#5554" class="Function">refScripts</a> <a id="3227" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="3230" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a><a id="3234" class="Symbol">)</a>
         <a id="3245" href="Ledger.Conway.Utxow.html#3245" class="Bound">neededScriptHashes</a>                  <a id="3281" class="Symbol">=</a> <a id="3283" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="3294" class="Symbol">(</a><a id="3295" href="Ledger.Conway.Address.html#755" class="Function">isScriptObj</a>  <a id="3308" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3310" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3315" class="Symbol">)</a> <a id="3317" class="Symbol">(</a><a id="3318" href="Ledger.Conway.Script.Validation.html#2335" class="Function">credsNeeded</a> <a id="3330" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a> <a id="3335" href="Ledger.Conway.Utxow.html#2976" class="Function">txb</a><a id="3338" class="Symbol">)</a>
         <a id="3349" href="Ledger.Conway.Utxow.html#3349" class="Bound">neededVKeyHashes</a>                    <a id="3385" class="Symbol">=</a> <a id="3387" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="3398" class="Symbol">(</a><a id="3399" href="Ledger.Conway.Address.html#474" class="Function">isKeyHashObj</a> <a id="3412" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3414" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3419" class="Symbol">)</a> <a id="3421" class="Symbol">(</a><a id="3422" href="Ledger.Conway.Script.Validation.html#2335" class="Function">credsNeeded</a> <a id="3434" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a> <a id="3439" href="Ledger.Conway.Utxow.html#2976" class="Function">txb</a><a id="3442" class="Symbol">)</a>
         <a id="3453" href="Ledger.Conway.Utxow.html#3453" class="Bound">txdatsHashes</a>                        <a id="3489" class="Symbol">=</a> <a id="3491" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3496" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="3501" href="Ledger.Conway.Transaction.html#4077" class="Function">txdats</a>
         <a id="3517" href="Ledger.Conway.Utxow.html#3517" class="Bound">inputsDataHashes</a>                    <a id="3553" class="Symbol">=</a> <a id="3555" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="3566" class="Symbol">(λ</a> <a id="3569" href="Ledger.Conway.Utxow.html#3569" class="Bound">txout</a> <a id="3575" class="Symbol">→</a> <a id="3577" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="3580" href="Ledger.Conway.Script.Validation.html#3180" class="Function">txOutToP2Script</a> <a id="3596" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a> <a id="3601" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="3604" href="Ledger.Conway.Utxow.html#3569" class="Bound">txout</a>
                                                                      <a id="3680" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="3685" href="Ledger.Conway.Script.Validation.html#3091" class="Function">txOutToDataHash</a> <a id="3701" href="Ledger.Conway.Utxow.html#3569" class="Bound">txout</a>
                                                                      <a id="3777" href="Class.ToBool.html#389" class="Function Operator">else</a> <a id="3782" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="3789" class="Symbol">)</a> <a id="3791" class="Symbol">(</a><a id="3792" href="Class.IsSet.html#959" class="Function">range</a> <a id="3798" class="Symbol">(</a><a id="3799" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a> <a id="3804" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="3806" href="Ledger.Conway.Transaction.html#2750" class="Function">txins</a><a id="3811" class="Symbol">))</a>
         <a id="3823" href="Ledger.Conway.Utxow.html#3823" class="Bound">refInputsDataHashes</a>                 <a id="3859" class="Symbol">=</a> <a id="3861" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="3872" href="Ledger.Conway.Script.Validation.html#3091" class="Function">txOutToDataHash</a> <a id="3888" class="Symbol">(</a><a id="3889" href="Class.IsSet.html#959" class="Function">range</a> <a id="3895" class="Symbol">(</a><a id="3896" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a> <a id="3901" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="3903" href="Ledger.Conway.Transaction.html#2780" class="Function">refInputs</a><a id="3912" class="Symbol">))</a>
         <a id="3924" href="Ledger.Conway.Utxow.html#3924" class="Bound">outputsDataHashes</a>                   <a id="3960" class="Symbol">=</a> <a id="3962" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="3973" href="Ledger.Conway.Script.Validation.html#3091" class="Function">txOutToDataHash</a> <a id="3989" class="Symbol">(</a><a id="3990" href="Class.IsSet.html#959" class="Function">range</a> <a id="3996" href="Ledger.Conway.Transaction.html#2810" class="Function">txouts</a><a id="4002" class="Symbol">)</a>
         <a id="4013" href="Ledger.Conway.Utxow.html#4013" class="Bound">nativeScripts</a>                       <a id="4049" class="Symbol">=</a> <a id="4051" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="4062" href="Ledger.Conway.Script.Base.html#2946" class="Function">toP1Script</a> <a id="4073" class="Symbol">(</a><a id="4074" href="Ledger.Conway.Transaction.html#5732" class="Function">txscripts</a> <a id="4084" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="4087" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a><a id="4091" class="Symbol">)</a>


    <a id="4099" class="Keyword">in</a>
    <a id="4106" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a>  <a id="4109" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="4112" href="Ledger.Conway.Utxow.html#4112" class="Bound">(</a><a id="4113" href="Ledger.Conway.Utxow.html#4113" class="Bound">vk</a> <a id="4116" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4118" href="Ledger.Conway.Utxow.html#4118" class="Bound">σ</a><a id="4119" href="Ledger.Conway.Utxow.html#4112" class="Bound">)</a> <a id="4121" href="Class.IsSet.html#576" class="Function">∈</a> <a id="4123" href="Ledger.Conway.Transaction.html#4023" class="Function">vkSigs</a> <a id="4130" href="Class.IsSet.html#576" class="Function">]</a> <a id="4132" href="Ledger.Conway.Crypto.html#658" class="Function">isSigned</a> <a id="4141" href="Ledger.Conway.Utxow.html#4113" class="Bound">vk</a> <a id="4144" class="Symbol">(</a><a id="4145" href="Ledger.Conway.Transaction.html#1826" class="Field">txidBytes</a> <a id="4155" href="Ledger.Conway.Transaction.html#3257" class="Function">txid</a><a id="4159" class="Symbol">)</a> <a id="4161" href="Ledger.Conway.Utxow.html#4118" class="Bound">σ</a>
    <a id="4167" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4170" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="4173" href="Ledger.Conway.Utxow.html#4173" class="Bound">s</a> <a id="4175" href="Class.IsSet.html#576" class="Function">∈</a> <a id="4177" href="Ledger.Conway.Utxow.html#4013" class="Bound">nativeScripts</a> <a id="4191" href="Class.IsSet.html#576" class="Function">]</a> <a id="4193" class="Symbol">(</a><a id="4194" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="4199" href="Ledger.Conway.Utxow.html#4173" class="Bound">s</a> <a id="4201" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="4203" href="Ledger.Conway.Utxow.html#3245" class="Bound">neededScriptHashes</a> <a id="4222" class="Symbol">→</a> <a id="4224" href="Ledger.Conway.Script.Base.html#636" class="Function">validP1Script</a> <a id="4238" href="Ledger.Conway.Utxow.html#3032" class="Bound">witsKeyHashes</a> <a id="4252" href="Ledger.Conway.Transaction.html#2901" class="Function">txvldt</a> <a id="4259" href="Ledger.Conway.Utxow.html#4173" class="Bound">s</a><a id="4260" class="Symbol">)</a>
    <a id="4266" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4269" href="Ledger.Conway.Utxow.html#3349" class="Bound">neededVKeyHashes</a> <a id="4286" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="4288" href="Ledger.Conway.Utxow.html#3032" class="Bound">witsKeyHashes</a>
    <a id="4306" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4309" href="Ledger.Conway.Utxow.html#3245" class="Bound">neededScriptHashes</a> <a id="4328" href="Interface.HasSubtract.html#209" class="Field Operator">-</a> <a id="4330" href="Ledger.Conway.Utxow.html#3167" class="Bound">refScriptHashes</a> <a id="4346" href="Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="4349" href="Ledger.Conway.Utxow.html#3102" class="Bound">witsScriptHashes</a>
    <a id="4370" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4373" href="Ledger.Conway.Utxow.html#3517" class="Bound">inputsDataHashes</a> <a id="4390" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="4392" href="Ledger.Conway.Utxow.html#3453" class="Bound">txdatsHashes</a>
    <a id="4409" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4412" href="Ledger.Conway.Utxow.html#3453" class="Bound">txdatsHashes</a> <a id="4425" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="4427" href="Ledger.Conway.Utxow.html#3517" class="Bound">inputsDataHashes</a> <a id="4444" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="4446" href="Ledger.Conway.Utxow.html#3924" class="Bound">outputsDataHashes</a> <a id="4464" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="4466" href="Ledger.Conway.Utxow.html#3823" class="Bound">refInputsDataHashes</a>
    <a id="4490" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4493" href="Ledger.Conway.Utxow.html#1985" class="Function">languages</a> <a id="4503" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="4506" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a> <a id="4511" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="4513" href="Ledger.Conway.Utxow.html#2216" class="Function">allowedLanguages</a> <a id="4530" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="4533" href="Ledger.Conway.Utxow.html#2890" class="Bound">utxo</a>
    <a id="4542" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4545" href="Ledger.Conway.Transaction.html#3150" class="Function">txADhash</a> <a id="4554" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4556" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="4560" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="4565" href="Ledger.Conway.Transaction.html#4353" class="Function">txAD</a>
    <a id="4574" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a>  <a id="4577" href="Ledger.Conway.Utxow.html#2749" class="Generalizable">Γ</a> <a id="4579" href="Ledger.Conway.Utxo.html#2035" class="Datatype Operator">⊢</a> <a id="4581" href="Ledger.Conway.Utxow.html#2773" class="Generalizable">s</a> <a id="4583" href="Ledger.Conway.Utxo.html#2035" class="Datatype Operator">⇀⦇</a> <a id="4586" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="4589" href="Ledger.Conway.Utxo.html#2035" class="Datatype Operator">,UTXO⦈</a> <a id="4596" href="Ledger.Conway.Utxow.html#2775" class="Generalizable">s&#39;</a>
       <a id="4606" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
       <a id="4646" href="Ledger.Conway.Utxow.html#2749" class="Generalizable">Γ</a> <a id="4648" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">⊢</a> <a id="4650" href="Ledger.Conway.Utxow.html#2773" class="Generalizable">s</a> <a id="4652" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">⇀⦇</a> <a id="4655" href="Ledger.Conway.Utxow.html#2799" class="Generalizable">tx</a> <a id="4658" href="Ledger.Conway.Utxow.html#2667" class="Datatype Operator">,UTXOW⦈</a> <a id="4666" href="Ledger.Conway.Utxow.html#2775" class="Generalizable">s&#39;</a>


<a id="4671" class="Keyword">pattern</a> <a id="UTXOW-inductive⋯"></a><a id="4679" href="Ledger.Conway.Utxow.html#4679" class="InductiveConstructor">UTXOW-inductive⋯</a> <a id="4696" href="Ledger.Conway.Utxow.html#4747" class="Bound">p₁</a> <a id="4699" href="Ledger.Conway.Utxow.html#4752" class="Bound">p₂</a> <a id="4702" href="Ledger.Conway.Utxow.html#4757" class="Bound">p₃</a> <a id="4705" href="Ledger.Conway.Utxow.html#4762" class="Bound">p₄</a> <a id="4708" href="Ledger.Conway.Utxow.html#4767" class="Bound">p₅</a> <a id="4711" href="Ledger.Conway.Utxow.html#4772" class="Bound">p₆</a> <a id="4714" href="Ledger.Conway.Utxow.html#4777" class="Bound">p₇</a> <a id="4717" href="Ledger.Conway.Utxow.html#4782" class="Bound">p₈</a> <a id="4720" href="Ledger.Conway.Utxow.html#4787" class="Bound">h</a>
      <a id="4728" class="Symbol">=</a> <a id="4730" href="Ledger.Conway.Utxow.html#2863" class="InductiveConstructor">UTXOW-inductive</a> <a id="4746" class="Symbol">(</a><a id="4747" href="Ledger.Conway.Utxow.html#4747" class="Bound">p₁</a> <a id="4750" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4752" href="Ledger.Conway.Utxow.html#4752" class="Bound">p₂</a> <a id="4755" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4757" href="Ledger.Conway.Utxow.html#4757" class="Bound">p₃</a> <a id="4760" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4762" href="Ledger.Conway.Utxow.html#4762" class="Bound">p₄</a> <a id="4765" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4767" href="Ledger.Conway.Utxow.html#4767" class="Bound">p₅</a> <a id="4770" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4772" href="Ledger.Conway.Utxow.html#4772" class="Bound">p₆</a> <a id="4775" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4777" href="Ledger.Conway.Utxow.html#4777" class="Bound">p₇</a> <a id="4780" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4782" href="Ledger.Conway.Utxow.html#4782" class="Bound">p₈</a> <a id="4785" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4787" href="Ledger.Conway.Utxow.html#4787" class="Bound">h</a><a id="4788" class="Symbol">)</a>
<a id="4790" class="Keyword">pattern</a> <a id="UTXOW⇒UTXO"></a><a id="4798" href="Ledger.Conway.Utxow.html#4798" class="InductiveConstructor">UTXOW⇒UTXO</a> <a id="4809" href="Ledger.Conway.Utxow.html#4846" class="Bound">x</a> <a id="4811" class="Symbol">=</a> <a id="4813" href="Ledger.Conway.Utxow.html#4679" class="InductiveConstructor">UTXOW-inductive⋯</a> <a id="4830" class="Symbol">_</a> <a id="4832" class="Symbol">_</a> <a id="4834" class="Symbol">_</a> <a id="4836" class="Symbol">_</a> <a id="4838" class="Symbol">_</a> <a id="4840" class="Symbol">_</a> <a id="4842" class="Symbol">_</a> <a id="4844" class="Symbol">_</a> <a id="4846" href="Ledger.Conway.Utxow.html#4846" class="Bound">x</a>

<a id="4849" class="Keyword">unquoteDecl</a> <a id="UTXOW-inductive-premises"></a><a id="4861" href="Ledger.Conway.Utxow.html#4861" class="Function">UTXOW-inductive-premises</a> <a id="4886" class="Symbol">=</a>
  <a id="4890" href="iog-prelude.Tactic.Premises.html#2260" class="Function">genPremises</a> <a id="4902" href="Ledger.Conway.Utxow.html#4861" class="Function">UTXOW-inductive-premises</a> <a id="4927" class="Symbol">(</a><a id="4928" class="Keyword">quote</a> <a id="4934" href="Ledger.Conway.Utxow.html#2863" class="InductiveConstructor">UTXOW-inductive</a><a id="4949" class="Symbol">)</a>

</pre></body></html>