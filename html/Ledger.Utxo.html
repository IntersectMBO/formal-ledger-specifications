<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Utxo</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.html" class="Module">Algebra</a>              <a id="59" class="Keyword">using</a> <a id="65" class="Symbol">(</a><a id="66" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a><a id="83" class="Symbol">)</a>
<a id="85" class="Keyword">open</a> <a id="90" class="Keyword">import</a> <a id="97" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>  <a id="118" class="Keyword">using</a> <a id="124" class="Symbol">(</a><a id="125" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a><a id="135" class="Symbol">)</a>
<a id="137" class="Keyword">import</a> <a id="144" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="155" class="Symbol">as</a> <a id="158" class="Module">M</a>
<a id="160" class="Keyword">import</a> <a id="167" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="195" class="Symbol">as</a> <a id="198" class="Module">Sum</a>

<a id="203" class="Keyword">import</a> <a id="210" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="223" class="Symbol">as</a> <a id="226" class="Module">ℤ</a>
<a id="228" class="Keyword">import</a> <a id="235" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="249" class="Symbol">as</a> <a id="252" class="Module">ℚ</a>

<a id="255" class="Keyword">open</a> <a id="260" class="Keyword">import</a> <a id="267" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>

<a id="375" class="Keyword">module</a> <a id="382" href="Ledger.Utxo.html" class="Module">Ledger.Utxo</a>
  <a id="396" class="Symbol">(</a><a id="397" href="Ledger.Utxo.html#397" class="Bound">txs</a> <a id="401" class="Symbol">:</a> <a id="403" class="Symbol">_)</a> <a id="406" class="Symbol">(</a><a id="407" class="Keyword">open</a> <a id="412" href="Ledger.Transaction.html#867" class="Module">TransactionStructure</a> <a id="433" href="Ledger.Utxo.html#397" class="Bound">txs</a><a id="436" class="Symbol">)</a>
  <a id="440" class="Symbol">(</a><a id="441" href="Ledger.Utxo.html#441" class="Bound">abs</a> <a id="445" class="Symbol">:</a> <a id="447" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a> <a id="465" href="Ledger.Utxo.html#397" class="Bound">txs</a><a id="468" class="Symbol">)</a> <a id="470" class="Symbol">(</a><a id="471" class="Keyword">open</a> <a id="476" href="Ledger.Abstract.html#578" class="Module">AbstractFunctions</a> <a id="494" href="Ledger.Utxo.html#441" class="Bound">abs</a><a id="497" class="Symbol">)</a>
  <a id="501" class="Keyword">where</a>

<a id="508" class="Keyword">open</a> <a id="513" class="Keyword">import</a> <a id="520" href="Ledger.ScriptValidation.html" class="Module">Ledger.ScriptValidation</a> <a id="544" href="Ledger.Utxo.html#397" class="Bound">txs</a> <a id="548" href="Ledger.Utxo.html#441" class="Bound">abs</a>
<a id="552" class="Keyword">open</a> <a id="557" class="Keyword">import</a> <a id="564" href="Ledger.Fees.html" class="Module">Ledger.Fees</a> <a id="576" href="Ledger.Utxo.html#397" class="Bound">txs</a> <a id="580" class="Keyword">using</a> <a id="586" class="Symbol">(</a><a id="587" href="Ledger.Fees.html#677" class="Function">scriptsCost</a><a id="598" class="Symbol">)</a>
<a id="600" class="Keyword">open</a> <a id="605" class="Keyword">import</a> <a id="612" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="625" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>

<a id="639" class="Keyword">instance</a>
  <a id="650" href="Ledger.Utxo.html#650" class="Function">_</a> <a id="652" class="Symbol">=</a> <a id="654" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a>


<a id="isTwoPhaseScriptAddress"></a><a id="667" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="691" class="Symbol">:</a> <a id="693" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="696" class="Symbol">→</a> <a id="698" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="703" class="Symbol">→</a> <a id="705" href="Ledger.Address.html#2325" class="Function">Addr</a> <a id="710" class="Symbol">→</a> <a id="712" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="717" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="741" href="Ledger.Utxo.html#741" class="Bound">tx</a> <a id="744" href="Ledger.Utxo.html#744" class="Bound">utxo</a> <a id="749" href="Ledger.Utxo.html#749" class="Bound">a</a> <a id="751" class="Symbol">=</a>
  <a id="755" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="758" href="Ledger.Address.html#2608" class="Function">isScriptAddr</a> <a id="771" href="Ledger.Utxo.html#749" class="Bound">a</a> <a id="773" href="Class.ToBool.html#389" class="Function Operator">then</a>
    <a id="782" class="Symbol">(λ</a> <a id="785" class="Symbol">{</a><a id="786" href="Ledger.Utxo.html#786" class="Bound">p</a><a id="787" class="Symbol">}</a> <a id="789" class="Symbol">→</a> <a id="791" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="794" href="Ledger.Transaction.html#5869" class="Function">lookupScriptHash</a> <a id="811" class="Symbol">(</a><a id="812" href="Ledger.Address.html#3727" class="Function">getScriptHash</a> <a id="826" href="Ledger.Utxo.html#749" class="Bound">a</a> <a id="828" href="Ledger.Utxo.html#786" class="Bound">p</a><a id="829" class="Symbol">)</a> <a id="831" href="Ledger.Utxo.html#741" class="Bound">tx</a> <a id="834" href="Ledger.Utxo.html#744" class="Bound">utxo</a>
                 <a id="856" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="861" class="Symbol">(λ</a> <a id="864" class="Symbol">{</a><a id="865" href="Ledger.Utxo.html#865" class="Bound">s</a><a id="866" class="Symbol">}</a> <a id="868" class="Symbol">→</a> <a id="870" href="Ledger.Transaction.html#6109" class="Function">isP2Script</a> <a id="881" href="Ledger.Utxo.html#865" class="Bound">s</a><a id="882" class="Symbol">)</a>
                 <a id="901" href="Class.ToBool.html#389" class="Function Operator">else</a> <a id="906" href="Data.Empty.html#914" class="Function">⊥</a><a id="907" class="Symbol">)</a>
  <a id="911" href="Class.ToBool.html#389" class="Function Operator">else</a>
    <a id="920" href="Data.Empty.html#914" class="Function">⊥</a>


<a id="isTwoPhaseScriptAddress?"></a><a id="924" href="Ledger.Utxo.html#924" class="Function">isTwoPhaseScriptAddress?</a> <a id="949" class="Symbol">:</a> <a id="951" class="Symbol">∀</a> <a id="953" class="Symbol">{</a><a id="954" href="Ledger.Utxo.html#954" class="Bound">tx</a> <a id="957" href="Ledger.Utxo.html#957" class="Bound">utxo</a> <a id="962" href="Ledger.Utxo.html#962" class="Bound">a</a><a id="963" class="Symbol">}</a> <a id="965" class="Symbol">→</a> <a id="967" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="991" href="Ledger.Utxo.html#954" class="Bound">tx</a> <a id="994" href="Ledger.Utxo.html#957" class="Bound">utxo</a> <a id="999" href="Ledger.Utxo.html#962" class="Bound">a</a> <a id="1001" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
<a id="1003" href="Ledger.Utxo.html#924" class="Function">isTwoPhaseScriptAddress?</a> <a id="1028" class="Symbol">{</a><a id="1029" href="Ledger.Utxo.html#1029" class="Bound">tx</a><a id="1031" class="Symbol">}</a> <a id="1033" class="Symbol">{</a><a id="1034" href="Ledger.Utxo.html#1034" class="Bound">utxo</a><a id="1038" class="Symbol">}</a> <a id="1040" class="Symbol">{</a><a id="1041" href="Ledger.Utxo.html#1041" class="Bound">a</a><a id="1042" class="Symbol">}</a> <a id="1044" class="Symbol">.</a><a id="1045" href="Class.Decidable.Core.html#264" class="Field">dec</a>
  <a id="1051" class="Keyword">with</a> <a id="1056" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1063" class="Symbol">(</a><a id="1064" href="Ledger.Address.html#2608" class="Function">isScriptAddr</a> <a id="1077" href="Ledger.Utxo.html#1041" class="Bound">a</a><a id="1078" class="Symbol">)</a>
<a id="1080" class="Symbol">...</a> <a id="1084" class="Symbol">|</a> <a id="1086" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1091" class="Symbol">_</a> <a id="1093" class="Symbol">=</a> <a id="1095" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1098" class="Symbol">λ</a> <a id="1100" class="Symbol">()</a>
<a id="1103" class="Symbol">...</a> <a id="1107" class="Symbol">|</a> <a id="1109" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1114" href="Ledger.Utxo.html#1114" class="Bound">p</a>
  <a id="1118" class="Keyword">with</a> <a id="1123" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1130" class="Symbol">(</a><a id="1131" href="Ledger.Transaction.html#5869" class="Function">lookupScriptHash</a> <a id="1148" class="Symbol">(</a><a id="1149" href="Ledger.Address.html#3727" class="Function">getScriptHash</a> <a id="1163" class="Bound">a</a> <a id="1165" href="Ledger.Utxo.html#1114" class="Bound">p</a><a id="1166" class="Symbol">)</a> <a id="1168" class="Bound">tx</a> <a id="1171" class="Bound">utxo</a><a id="1175" class="Symbol">)</a>
<a id="1177" class="Symbol">...</a> <a id="1181" class="Symbol">|</a> <a id="1183" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1188" class="Symbol">_</a> <a id="1190" class="Symbol">=</a> <a id="1192" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1195" class="Symbol">λ</a> <a id="1197" class="Symbol">()</a>
<a id="1200" class="Symbol">...</a> <a id="1204" class="Symbol">|</a> <a id="1206" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1211" href="Ledger.Utxo.html#1211" class="Bound">s</a> <a id="1213" class="Symbol">=</a> <a id="1215" href="Ledger.Transaction.html#6175" class="Function">isP2Script?</a> <a id="1227" class="Symbol">{</a><a id="1228" href="Ledger.Utxo.html#1211" class="Bound">s</a><a id="1229" class="Symbol">}</a> <a id="1231" class="Symbol">.</a><a id="1232" href="Class.Decidable.Core.html#264" class="Field">dec</a>

<a id="1237" class="Keyword">record</a> <a id="isTwoPhaseScriptAddress′"></a><a id="1244" href="Ledger.Utxo.html#1244" class="Record">isTwoPhaseScriptAddress′</a> <a id="1269" class="Symbol">(</a><a id="1270" href="Ledger.Utxo.html#1270" class="Bound">tx</a> <a id="1273" class="Symbol">:</a> <a id="1275" href="Ledger.Transaction.html#4221" class="Record">Tx</a><a id="1277" class="Symbol">)</a> <a id="1279" class="Symbol">(</a><a id="1280" href="Ledger.Utxo.html#1280" class="Bound">utxo</a> <a id="1285" class="Symbol">:</a> <a id="1287" href="Ledger.Transaction.html#2388" class="Function">UTxO</a><a id="1291" class="Symbol">)</a> <a id="1293" class="Symbol">(</a><a id="1294" href="Ledger.Utxo.html#1294" class="Bound">a</a> <a id="1296" class="Symbol">:</a> <a id="1298" href="Ledger.Address.html#2325" class="Function">Addr</a><a id="1302" class="Symbol">)</a> <a id="1304" class="Symbol">:</a> <a id="1306" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1311" class="Keyword">where</a>
  <a id="1319" class="Keyword">constructor</a> <a id="wrap"></a><a id="1331" href="Ledger.Utxo.html#1331" class="InductiveConstructor">wrap</a>
  <a id="1338" class="Keyword">field</a> <a id="isTwoPhaseScriptAddress′.unwrap"></a><a id="1344" href="Ledger.Utxo.html#1344" class="Field">unwrap</a> <a id="1351" class="Symbol">:</a> <a id="1353" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="1377" href="Ledger.Utxo.html#1270" class="Bound">tx</a> <a id="1380" href="Ledger.Utxo.html#1280" class="Bound">utxo</a> <a id="1385" href="Ledger.Utxo.html#1294" class="Bound">a</a>

<a id="1388" class="Keyword">instance</a>
  <a id="isTwoPhaseScriptAddress′?"></a><a id="1399" href="Ledger.Utxo.html#1399" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1425" class="Symbol">:</a> <a id="1427" class="Symbol">∀</a> <a id="1429" class="Symbol">{</a><a id="1430" href="Ledger.Utxo.html#1430" class="Bound">tx</a> <a id="1433" href="Ledger.Utxo.html#1433" class="Bound">utxo</a> <a id="1438" href="Ledger.Utxo.html#1438" class="Bound">a</a><a id="1439" class="Symbol">}</a> <a id="1441" class="Symbol">→</a> <a id="1443" href="Ledger.Utxo.html#1244" class="Record">isTwoPhaseScriptAddress′</a> <a id="1468" href="Ledger.Utxo.html#1430" class="Bound">tx</a> <a id="1471" href="Ledger.Utxo.html#1433" class="Bound">utxo</a> <a id="1476" href="Ledger.Utxo.html#1438" class="Bound">a</a> <a id="1478" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="1482" href="Ledger.Utxo.html#1399" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1508" class="Symbol">{</a><a id="1509" href="Ledger.Utxo.html#1509" class="Bound">tx</a><a id="1511" class="Symbol">}</a> <a id="1513" class="Symbol">{</a><a id="1514" href="Ledger.Utxo.html#1514" class="Bound">utxo</a><a id="1518" class="Symbol">}</a> <a id="1520" class="Symbol">{</a><a id="1521" href="Ledger.Utxo.html#1521" class="Bound">a</a><a id="1522" class="Symbol">}</a> <a id="1524" class="Symbol">=</a> <a id="1526" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">map′</a> <a id="1534" href="Ledger.Utxo.html#1331" class="InductiveConstructor">wrap</a> <a id="1539" href="Ledger.Utxo.html#1344" class="Field">unwrap</a> <a id="1546" class="Symbol">(</a><a id="1547" href="Ledger.Utxo.html#924" class="Function">isTwoPhaseScriptAddress?</a> <a id="1572" class="Symbol">{</a><a id="1573" href="Ledger.Utxo.html#1509" class="Bound">tx</a><a id="1575" class="Symbol">}</a> <a id="1577" class="Symbol">{</a><a id="1578" href="Ledger.Utxo.html#1514" class="Bound">utxo</a><a id="1582" class="Symbol">}</a> <a id="1584" class="Symbol">{</a><a id="1585" href="Ledger.Utxo.html#1521" class="Bound">a</a><a id="1586" class="Symbol">}</a> <a id="1588" class="Symbol">.</a><a id="1589" href="Class.Decidable.Core.html#264" class="Field">dec</a><a id="1592" class="Symbol">))</a>
    <a id="1599" class="Keyword">where</a> <a id="1605" class="Keyword">open</a> <a id="1610" href="Ledger.Utxo.html#1244" class="Module">isTwoPhaseScriptAddress′</a>


<a id="1637" class="Keyword">opaque</a>


  <a id="getDataHashes"></a><a id="1648" href="Ledger.Utxo.html#1648" class="Function">getDataHashes</a> <a id="1662" class="Symbol">:</a> <a id="1664" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1666" href="Ledger.Transaction.html#2320" class="Function">TxOut</a> <a id="1672" class="Symbol">→</a> <a id="1674" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1676" href="Ledger.Script.html#1719" class="Function">DataHash</a>
  <a id="1687" href="Ledger.Utxo.html#1648" class="Function">getDataHashes</a> <a id="1701" href="Ledger.Utxo.html#1701" class="Bound">txo</a> <a id="1705" class="Symbol">=</a> <a id="1707" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1718" href="Data.Sum.html#870" class="Function">isInj₂</a> <a id="1725" class="Symbol">(</a><a id="1726" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1737" class="Symbol">(</a><a id="1738" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1744" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1746" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1752" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1754" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="1759" class="Symbol">)</a> <a id="1761" href="Ledger.Utxo.html#1701" class="Bound">txo</a><a id="1764" class="Symbol">)</a>

  <a id="getInputHashes"></a><a id="1769" href="Ledger.Utxo.html#1769" class="Function">getInputHashes</a> <a id="1784" class="Symbol">:</a> <a id="1786" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="1789" class="Symbol">→</a> <a id="1791" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="1796" class="Symbol">→</a> <a id="1798" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1800" href="Ledger.Script.html#1719" class="Function">DataHash</a>
  <a id="1811" href="Ledger.Utxo.html#1769" class="Function">getInputHashes</a> <a id="1826" href="Ledger.Utxo.html#1826" class="Bound">tx</a> <a id="1829" href="Ledger.Utxo.html#1829" class="Bound">utxo</a> <a id="1834" class="Symbol">=</a> <a id="1836" href="Ledger.Utxo.html#1648" class="Function">getDataHashes</a>
    <a id="1854" class="Symbol">(</a><a id="1855" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="1863" class="Symbol">(λ</a> <a id="1866" class="Symbol">(</a><a id="1867" href="Ledger.Utxo.html#1867" class="Bound">a</a> <a id="1869" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1871" class="Symbol">_</a> <a id="1873" class="Symbol">)</a> <a id="1875" class="Symbol">→</a> <a id="1877" href="Ledger.Utxo.html#1244" class="Record">isTwoPhaseScriptAddress′</a> <a id="1902" href="Ledger.Utxo.html#1826" class="Bound">tx</a> <a id="1905" href="Ledger.Utxo.html#1829" class="Bound">utxo</a> <a id="1910" href="Ledger.Utxo.html#1867" class="Bound">a</a><a id="1911" class="Symbol">)</a>
             <a id="1926" class="Symbol">(</a><a id="1927" href="Class.IsSet.html#959" class="Function">range</a> <a id="1933" class="Symbol">(</a><a id="1934" href="Ledger.Utxo.html#1829" class="Bound">utxo</a> <a id="1939" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="1941" href="Ledger.Transaction.html#2713" class="Function">txins</a><a id="1946" class="Symbol">)))</a>
    <a id="1954" class="Keyword">where</a> <a id="1960" class="Keyword">open</a> <a id="1965" href="Ledger.Transaction.html#4221" class="Module">Tx</a><a id="1967" class="Symbol">;</a> <a id="1969" class="Keyword">open</a> <a id="1974" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="1981" class="Symbol">(</a><a id="1982" href="Ledger.Utxo.html#1826" class="Bound">tx</a> <a id="1985" class="Symbol">.</a><a id="1986" href="Ledger.Transaction.html#4253" class="Field">body</a><a id="1990" class="Symbol">)</a>

<a id="totExUnits"></a><a id="1993" href="Ledger.Utxo.html#1993" class="Function">totExUnits</a> <a id="2004" class="Symbol">:</a> <a id="2006" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="2009" class="Symbol">→</a> <a id="2011" href="Ledger.Script.html#1014" class="Function">ExUnits</a>
<a id="2019" href="Ledger.Utxo.html#1993" class="Function">totExUnits</a> <a id="2030" href="Ledger.Utxo.html#2030" class="Bound">tx</a> <a id="2033" class="Symbol">=</a> <a id="2035" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="2038" href="Ledger.Utxo.html#2038" class="Bound">(_</a> <a id="2041" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2043" href="Ledger.Utxo.html#2043" class="Bound">eu</a><a id="2045" href="Ledger.Utxo.html#2038" class="Bound">)</a> <a id="2047" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="2049" href="Ledger.Utxo.html#2030" class="Bound">tx</a> <a id="2052" class="Symbol">.</a><a id="2053" href="Ledger.Transaction.html#4277" class="Field">wits</a> <a id="2058" class="Symbol">.</a><a id="2059" href="Ledger.Transaction.html#4100" class="Field">txrdmrs</a> <a id="2067" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="2069" href="Ledger.Utxo.html#2043" class="Bound">eu</a>
  <a id="2074" class="Keyword">where</a> <a id="2080" class="Keyword">open</a> <a id="2085" href="Ledger.Transaction.html#4221" class="Module">Tx</a><a id="2087" class="Symbol">;</a> <a id="2089" class="Keyword">open</a> <a id="2094" href="Ledger.Transaction.html#3971" class="Module">TxWitnesses</a>


<a id="2108" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="2156" href="Ledger.Utxo.html#2156" class="Function">utxoEntrySizeWithoutVal</a> <a id="2180" class="Symbol">:</a> <a id="2182" href="Ledger.TokenAlgebra.html#404" class="Function">MemoryEstimate</a>
<a id="2197" href="Ledger.Utxo.html#2156" class="Function">utxoEntrySizeWithoutVal</a> <a id="2221" class="Symbol">=</a> <a id="2223" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="2226" href="Ledger.Utxo.html#2226" class="Function">utxoEntrySize</a> <a id="2240" class="Symbol">:</a> <a id="2242" href="Ledger.Transaction.html#5004" class="Function">TxOutʰ</a> <a id="2249" class="Symbol">→</a> <a id="2251" href="Ledger.TokenAlgebra.html#404" class="Function">MemoryEstimate</a>
<a id="2266" href="Ledger.Utxo.html#2226" class="Function">utxoEntrySize</a> <a id="2280" href="Ledger.Utxo.html#2280" class="Bound">o</a> <a id="2282" class="Symbol">=</a> <a id="2284" href="Ledger.Utxo.html#2156" class="Function">utxoEntrySizeWithoutVal</a> <a id="2308" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2310" href="Ledger.TokenAlgebra.html#953" class="Function">size</a> <a id="2315" class="Symbol">(</a><a id="2316" href="Ledger.Transaction.html#5164" class="Function">getValueʰ</a> <a id="2326" href="Ledger.Utxo.html#2280" class="Bound">o</a><a id="2327" class="Symbol">)</a>


<a id="2331" class="Keyword">open</a> <a id="2336" href="Ledger.PParams.html#1570" class="Module">PParams</a>


<a id="2346" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="2353" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a> <a id="2361" class="Symbol">:</a> <a id="2363" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2368" class="Keyword">where</a>
  <a id="2376" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="2386" href="Ledger.Utxo.html#2386" class="Field">slot</a>      <a id="2396" class="Symbol">:</a> <a id="2398" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="2407" href="Ledger.Utxo.html#2407" class="Field">pparams</a>   <a id="2417" class="Symbol">:</a> <a id="2419" href="Ledger.PParams.html#1570" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="2431" href="Ledger.Utxo.html#2431" class="Field">treasury</a>  <a id="2441" class="Symbol">:</a> <a id="2443" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2451" class="Keyword">instance</a>
  <a id="HasPParams-UTxOEnv"></a><a id="2462" href="Ledger.Utxo.html#2462" class="Function">HasPParams-UTxOEnv</a> <a id="2481" class="Symbol">:</a> <a id="2483" href="Ledger.PParams.html#3373" class="Record">HasPParams</a> <a id="2494" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a>
  <a id="2504" href="Ledger.Utxo.html#2462" class="Function">HasPParams-UTxOEnv</a> <a id="2523" class="Symbol">.</a><a id="2524" href="Ledger.PParams.html#3424" class="Field">PParamsOf</a> <a id="2534" class="Symbol">=</a> <a id="2536" href="Ledger.Utxo.html#2407" class="Field">UTxOEnv.pparams</a>

  <a id="HasgovActionDeposit-UTxOEnv"></a><a id="2555" href="Ledger.Utxo.html#2555" class="Function">HasgovActionDeposit-UTxOEnv</a> <a id="2583" class="Symbol">:</a> <a id="2585" href="Ledger.PParams.html#3484" class="Record">HasgovActionDeposit</a> <a id="2605" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a>
  <a id="2615" href="Ledger.Utxo.html#2555" class="Function">HasgovActionDeposit-UTxOEnv</a> <a id="2643" class="Symbol">.</a><a id="2644" href="Ledger.PParams.html#3544" class="Field">govActionDepositOf</a> <a id="2663" class="Symbol">=</a> <a id="2665" href="Ledger.PParams.html#3544" class="Field">govActionDepositOf</a> <a id="2684" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2686" href="Ledger.PParams.html#3424" class="Field">PParamsOf</a>


<a id="2698" class="Keyword">record</a> <a id="UTxOState"></a><a id="2705" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="2715" class="Symbol">:</a> <a id="2717" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2722" class="Keyword">where</a>


  <a id="2732" class="Keyword">constructor</a> <a id="⟦_,_,_,_⟧ᵘ"></a><a id="2744" href="Ledger.Utxo.html#2744" class="InductiveConstructor Operator">⟦_,_,_,_⟧ᵘ</a>


  <a id="2759" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="2769" href="Ledger.Utxo.html#2769" class="Field">utxo</a>       <a id="2780" class="Symbol">:</a> <a id="2782" href="Ledger.Transaction.html#2388" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="2791" href="Ledger.Utxo.html#2791" class="Field">fees</a>       <a id="2802" class="Symbol">:</a> <a id="2804" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="UTxOState.deposits"></a><a id="2813" href="Ledger.Utxo.html#2813" class="Field">deposits</a>   <a id="2824" class="Symbol">:</a> <a id="2826" href="Ledger.Certs.html#573" class="Function">Deposits</a>
    <a id="UTxOState.donations"></a><a id="2839" href="Ledger.Utxo.html#2839" class="Field">donations</a>  <a id="2850" class="Symbol">:</a> <a id="2852" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2860" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="2867" href="Ledger.Utxo.html#2867" class="Record">HasUTxOState</a> <a id="2880" class="Symbol">{</a><a id="2881" href="Ledger.Utxo.html#2881" class="Bound">a</a><a id="2882" class="Symbol">}</a> <a id="2884" class="Symbol">(</a><a id="2885" href="Ledger.Utxo.html#2885" class="Bound">A</a> <a id="2887" class="Symbol">:</a> <a id="2889" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2894" href="Ledger.Utxo.html#2881" class="Bound">a</a><a id="2895" class="Symbol">)</a> <a id="2897" class="Symbol">:</a> <a id="2899" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2904" href="Ledger.Utxo.html#2881" class="Bound">a</a> <a id="2906" class="Keyword">where</a>
  <a id="2914" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="2920" href="Ledger.Utxo.html#2920" class="Field">UTxOStateOf</a> <a id="2932" class="Symbol">:</a> <a id="2934" href="Ledger.Utxo.html#2885" class="Bound">A</a> <a id="2936" class="Symbol">→</a> <a id="2938" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a>
<a id="2948" class="Keyword">open</a> <a id="2953" href="Ledger.Utxo.html#2867" class="Module">HasUTxOState</a> <a id="2966" class="Symbol">⦃...⦄</a> <a id="2972" class="Keyword">public</a>

<a id="2980" class="Keyword">instance</a>
  <a id="HasDeposits-UTxOState"></a><a id="2991" href="Ledger.Utxo.html#2991" class="Function">HasDeposits-UTxOState</a> <a id="3013" class="Symbol">:</a> <a id="3015" href="Ledger.Certs.html#677" class="Record">HasDeposits</a> <a id="3027" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a>
  <a id="3039" href="Ledger.Utxo.html#2991" class="Function">HasDeposits-UTxOState</a> <a id="3061" class="Symbol">.</a><a id="3062" href="Ledger.Certs.html#729" class="Field">DepositsOf</a> <a id="3073" class="Symbol">=</a> <a id="3075" href="Ledger.Utxo.html#2813" class="Field">UTxOState.deposits</a>

  <a id="HasUTxO-UTxOState"></a><a id="3097" href="Ledger.Utxo.html#3097" class="Function">HasUTxO-UTxOState</a> <a id="3115" class="Symbol">:</a> <a id="3117" href="Ledger.Transaction.html#2570" class="Record">HasUTxO</a> <a id="3125" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a>
  <a id="3137" href="Ledger.Utxo.html#3097" class="Function">HasUTxO-UTxOState</a> <a id="3155" class="Symbol">.</a><a id="3156" href="Ledger.Transaction.html#2620" class="Field">UTxOOf</a> <a id="3163" class="Symbol">=</a> <a id="3165" href="Ledger.Utxo.html#2769" class="Field">UTxOState.utxo</a>

  <a id="3183" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="3195" href="Ledger.Utxo.html#3195" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="3211" href="Ledger.Utxo.html#3211" class="Function">HasCast-UTxOState</a> <a id="3229" class="Symbol">=</a> <a id="3231" href="Class.HasCast.Derive.html#2660" class="Function">derive-HasCast</a>
    <a id="3250" class="Symbol">(</a> <a id="3252" class="Symbol">(</a><a id="3253" class="Keyword">quote</a> <a id="3259" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a>   <a id="3269" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3271" href="Ledger.Utxo.html#3195" class="Function">HasCast-UTxOEnv</a>  <a id="3288" class="Symbol">)</a> <a id="3290" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="3296" href="Data.List.Base.html#5205" class="Function Operator">[</a> <a id="3298" class="Symbol">(</a><a id="3299" class="Keyword">quote</a> <a id="3305" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="3315" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3317" href="Ledger.Utxo.html#3211" class="Function">HasCast-UTxOState</a><a id="3334" class="Symbol">)</a> <a id="3336" href="Data.List.Base.html#5205" class="Function Operator">]</a><a id="3337" class="Symbol">)</a>


<a id="3341" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="3350" href="Ledger.Utxo.html#3350" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="3364" class="Symbol">:</a> <a id="3366" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a> <a id="3374" class="Symbol">→</a> <a id="3376" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="3386" class="Symbol">→</a> <a id="3388" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="3391" class="Symbol">→</a> <a id="3393" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="3403" class="Symbol">→</a> <a id="3405" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="3412" class="Keyword">module</a> <a id="3419" href="Ledger.Utxo.html#3419" class="Module">_</a> <a id="3421" class="Symbol">(</a><a id="3422" class="Keyword">let</a> <a id="3426" class="Keyword">open</a> <a id="3431" href="Ledger.Transaction.html#4221" class="Module">Tx</a><a id="3433" class="Symbol">;</a> <a id="3435" class="Keyword">open</a> <a id="3440" href="Ledger.Transaction.html#2677" class="Module">TxBody</a><a id="3446" class="Symbol">;</a> <a id="3448" class="Keyword">open</a> <a id="3453" href="Ledger.Transaction.html#3971" class="Module">TxWitnesses</a><a id="3464" class="Symbol">)</a> <a id="3466" class="Keyword">where</a> <a id="3472" class="Keyword">opaque</a>


  <a id="3483" href="Ledger.Utxo.html#3483" class="Function">outs</a> <a id="3488" class="Symbol">:</a> <a id="3490" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="3497" class="Symbol">→</a> <a id="3499" href="Ledger.Transaction.html#2388" class="Function">UTxO</a>
  <a id="3506" href="Ledger.Utxo.html#3483" class="Function">outs</a> <a id="3511" href="Ledger.Utxo.html#3511" class="Bound">tx</a> <a id="3514" class="Symbol">=</a> <a id="3516" href="Axiom.Set.Map.html#5896" class="Function">mapKeys</a> <a id="3524" class="Symbol">(</a><a id="3525" href="Ledger.Utxo.html#3511" class="Bound">tx</a> <a id="3528" class="Symbol">.</a><a id="3529" href="Ledger.Transaction.html#3245" class="Field">txid</a> <a id="3534" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3536" class="Symbol">)</a> <a id="3538" class="Symbol">(</a><a id="3539" href="Ledger.Utxo.html#3511" class="Bound">tx</a> <a id="3542" class="Symbol">.</a><a id="3543" href="Ledger.Transaction.html#2773" class="Field">txouts</a><a id="3549" class="Symbol">)</a>

  <a id="3554" href="Ledger.Utxo.html#3554" class="Function">balance</a> <a id="3562" class="Symbol">:</a> <a id="3564" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="3569" class="Symbol">→</a> <a id="3571" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="3579" href="Ledger.Utxo.html#3554" class="Function">balance</a> <a id="3587" href="Ledger.Utxo.html#3587" class="Bound">utxo</a> <a id="3592" class="Symbol">=</a> <a id="3594" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="3597" href="Ledger.Utxo.html#3597" class="Bound">x</a> <a id="3599" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="3601" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="3611" href="Ledger.Transaction.html#5075" class="Function">txOutHash</a> <a id="3621" href="Ledger.Utxo.html#3587" class="Bound">utxo</a> <a id="3626" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="3628" href="Ledger.Transaction.html#5164" class="Function">getValueʰ</a> <a id="3638" href="Ledger.Utxo.html#3597" class="Bound">x</a>

  <a id="3643" href="Ledger.Utxo.html#3643" class="Function">cbalance</a> <a id="3652" class="Symbol">:</a> <a id="3654" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="3659" class="Symbol">→</a> <a id="3661" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3668" href="Ledger.Utxo.html#3643" class="Function">cbalance</a> <a id="3677" href="Ledger.Utxo.html#3677" class="Bound">utxo</a> <a id="3682" class="Symbol">=</a> <a id="3684" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="3689" class="Symbol">(</a><a id="3690" href="Ledger.Utxo.html#3554" class="Function">balance</a> <a id="3698" href="Ledger.Utxo.html#3677" class="Bound">utxo</a><a id="3702" class="Symbol">)</a>



  <a id="3709" href="Ledger.Utxo.html#3709" class="Function">refScriptsSize</a> <a id="3724" class="Symbol">:</a> <a id="3726" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="3731" class="Symbol">→</a> <a id="3733" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="3736" class="Symbol">→</a> <a id="3738" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="3742" href="Ledger.Utxo.html#3709" class="Function">refScriptsSize</a> <a id="3757" href="Ledger.Utxo.html#3757" class="Bound">utxo</a> <a id="3762" href="Ledger.Utxo.html#3762" class="Bound">tx</a> <a id="3765" class="Symbol">=</a> <a id="3767" href="Data.List.Base.html#4964" class="Function">sum</a> <a id="3771" class="Symbol">(</a><a id="3772" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3776" href="Ledger.Abstract.html#814" class="Field">scriptSize</a> <a id="3787" class="Symbol">(</a><a id="3788" href="Ledger.Transaction.html#5533" class="Function">refScripts</a> <a id="3799" href="Ledger.Utxo.html#3762" class="Bound">tx</a> <a id="3802" href="Ledger.Utxo.html#3757" class="Bound">utxo</a><a id="3806" class="Symbol">))</a>

  <a id="3812" href="Ledger.Utxo.html#3812" class="Function">minfee</a> <a id="3819" class="Symbol">:</a> <a id="3821" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="3829" class="Symbol">→</a> <a id="3831" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="3836" class="Symbol">→</a> <a id="3838" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="3841" class="Symbol">→</a> <a id="3843" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3850" href="Ledger.Utxo.html#3812" class="Function">minfee</a> <a id="3857" href="Ledger.Utxo.html#3857" class="Bound">pp</a> <a id="3860" href="Ledger.Utxo.html#3860" class="Bound">utxo</a> <a id="3865" href="Ledger.Utxo.html#3865" class="Bound">tx</a>  <a id="3869" class="Symbol">=</a> <a id="3871" href="Ledger.Utxo.html#3857" class="Bound">pp</a> <a id="3874" class="Symbol">.</a><a id="3875" href="Ledger.PParams.html#1992" class="Field">a</a> <a id="3877" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3879" href="Ledger.Utxo.html#3865" class="Bound">tx</a> <a id="3882" class="Symbol">.</a><a id="3883" href="Ledger.Transaction.html#4253" class="Field">body</a> <a id="3888" class="Symbol">.</a><a id="3889" href="Ledger.Transaction.html#3220" class="Field">txsize</a> <a id="3896" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3898" href="Ledger.Utxo.html#3857" class="Bound">pp</a> <a id="3901" class="Symbol">.</a><a id="3902" href="Ledger.PParams.html#2034" class="Field">b</a>
                     <a id="3925" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3927" href="Ledger.Abstract.html#617" class="Field">txscriptfee</a> <a id="3939" class="Symbol">(</a><a id="3940" href="Ledger.Utxo.html#3857" class="Bound">pp</a> <a id="3943" class="Symbol">.</a><a id="3944" href="Ledger.PParams.html#2351" class="Field">prices</a><a id="3950" class="Symbol">)</a> <a id="3952" class="Symbol">(</a><a id="3953" href="Ledger.Utxo.html#1993" class="Function">totExUnits</a> <a id="3964" href="Ledger.Utxo.html#3865" class="Bound">tx</a><a id="3966" class="Symbol">)</a>
                     <a id="3989" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3991" href="Ledger.Fees.html#677" class="Function">scriptsCost</a> <a id="4003" href="Ledger.Utxo.html#3857" class="Bound">pp</a> <a id="4006" class="Symbol">(</a><a id="4007" href="Ledger.Utxo.html#3709" class="Function">refScriptsSize</a> <a id="4022" href="Ledger.Utxo.html#3860" class="Bound">utxo</a> <a id="4027" href="Ledger.Utxo.html#3865" class="Bound">tx</a><a id="4029" class="Symbol">)</a>



<a id="4034" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="4045" href="Ledger.Utxo.html#4045" class="Function">HasCoin-UTxO</a> <a id="4058" class="Symbol">:</a> <a id="4060" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="4068" href="Ledger.Transaction.html#2388" class="Function">UTxO</a>
  <a id="4075" href="Ledger.Utxo.html#4045" class="Function">HasCoin-UTxO</a> <a id="4088" class="Symbol">.</a><a id="4089" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="4097" class="Symbol">=</a> <a id="4099" href="Ledger.Utxo.html#3643" class="Function">cbalance</a>


<a id="certDeposit"></a><a id="4110" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="4122" class="Symbol">:</a> <a id="4124" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="4130" class="Symbol">→</a> <a id="4132" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="4140" class="Symbol">→</a> <a id="4142" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="4151" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="4163" class="Symbol">(</a><a id="4164" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="4173" href="Ledger.Utxo.html#4173" class="Bound">c</a> <a id="4175" class="Symbol">_</a> <a id="4177" class="Symbol">_</a> <a id="4179" href="Ledger.Utxo.html#4179" class="Bound">v</a><a id="4180" class="Symbol">)</a> <a id="4182" class="Symbol">_</a>   <a id="4186" class="Symbol">=</a> <a id="4188" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4190" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4208" href="Ledger.Utxo.html#4173" class="Bound">c</a> <a id="4210" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4212" href="Ledger.Utxo.html#4179" class="Bound">v</a> <a id="4214" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4216" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="4228" class="Symbol">(</a><a id="4229" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="4233" href="Ledger.Utxo.html#4233" class="Bound">c</a> <a id="4235" class="Symbol">_)</a>          <a id="4247" href="Ledger.Utxo.html#4247" class="Bound">pp</a>  <a id="4251" class="Symbol">=</a> <a id="4253" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4255" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4273" href="Ledger.Utxo.html#4233" class="Bound">c</a> <a id="4275" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4277" href="Ledger.Utxo.html#4247" class="Bound">pp</a> <a id="4280" class="Symbol">.</a><a id="4281" href="Ledger.PParams.html#2076" class="Field">keyDeposit</a> <a id="4292" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4294" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="4306" class="Symbol">(</a><a id="4307" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="4315" href="Ledger.Utxo.html#4315" class="Bound">kh</a> <a id="4318" class="Symbol">_)</a>     <a id="4325" href="Ledger.Utxo.html#4325" class="Bound">pp</a>  <a id="4329" class="Symbol">=</a> <a id="4331" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4333" href="Ledger.Certs.html#415" class="InductiveConstructor">PoolDeposit</a> <a id="4345" href="Ledger.Utxo.html#4315" class="Bound">kh</a> <a id="4348" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4350" href="Ledger.Utxo.html#4325" class="Bound">pp</a> <a id="4353" class="Symbol">.</a><a id="4354" href="Ledger.PParams.html#2121" class="Field">poolDeposit</a> <a id="4366" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4368" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="4380" class="Symbol">(</a><a id="4381" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="4389" href="Ledger.Utxo.html#4389" class="Bound">c</a> <a id="4391" href="Ledger.Utxo.html#4391" class="Bound">v</a> <a id="4393" class="Symbol">_)</a>    <a id="4399" class="Symbol">_</a>   <a id="4403" class="Symbol">=</a> <a id="4405" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4407" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="4419" href="Ledger.Utxo.html#4389" class="Bound">c</a> <a id="4421" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4423" href="Ledger.Utxo.html#4391" class="Bound">v</a> <a id="4425" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4427" href="Ledger.Utxo.html#4110" class="CatchallClause Function">certDeposit</a><a id="4438" class="CatchallClause"> </a><a id="4439" class="CatchallClause Symbol">_</a><a id="4440" class="CatchallClause">                  </a><a id="4458" class="CatchallClause Symbol">_</a>   <a id="4462" class="Symbol">=</a> <a id="4464" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="certRefund"></a><a id="4467" href="Ledger.Utxo.html#4467" class="Function">certRefund</a> <a id="4478" class="Symbol">:</a> <a id="4480" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="4486" class="Symbol">→</a> <a id="4488" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4490" href="Ledger.Certs.html#332" class="Datatype">DepositPurpose</a>
<a id="4505" href="Ledger.Utxo.html#4467" class="Function">certRefund</a> <a id="4516" class="Symbol">(</a><a id="4517" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="4523" href="Ledger.Utxo.html#4523" class="Bound">c</a> <a id="4525" class="Symbol">_)</a>      <a id="4533" class="Symbol">=</a> <a id="4535" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4537" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4555" href="Ledger.Utxo.html#4523" class="Bound">c</a> <a id="4557" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4559" href="Ledger.Utxo.html#4467" class="Function">certRefund</a> <a id="4570" class="Symbol">(</a><a id="4571" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="4581" href="Ledger.Utxo.html#4581" class="Bound">c</a> <a id="4583" class="Symbol">_)</a>  <a id="4587" class="Symbol">=</a> <a id="4589" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4591" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="4603" href="Ledger.Utxo.html#4581" class="Bound">c</a> <a id="4605" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4607" href="Ledger.Utxo.html#4467" class="CatchallClause Function">certRefund</a><a id="4617" class="CatchallClause"> </a><a id="4618" class="CatchallClause Symbol">_</a>                <a id="4635" class="Symbol">=</a> <a id="4637" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="4640" class="Keyword">data</a> <a id="ValidCertDeposits"></a><a id="4645" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="4663" class="Symbol">(</a><a id="4664" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="4667" class="Symbol">:</a> <a id="4669" href="Ledger.PParams.html#1570" class="Record">PParams</a><a id="4676" class="Symbol">)</a> <a id="4678" class="Symbol">(</a><a id="4679" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="4684" class="Symbol">:</a> <a id="4686" href="Ledger.Certs.html#573" class="Function">Deposits</a><a id="4694" class="Symbol">)</a> <a id="4696" class="Symbol">:</a> <a id="4698" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4703" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="4709" class="Symbol">→</a> <a id="4711" href="Agda.Primitive.html#388" class="Primitive">Set</a>


  <a id="4719" class="Keyword">where</a>
  <a id="ValidCertDeposits.[]"></a><a id="4727" href="Ledger.Utxo.html#4727" class="InductiveConstructor">[]</a>         <a id="4738" class="Symbol">:</a> <a id="4740" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="4758" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="4761" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="4766" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="ValidCertDeposits.delegate"></a><a id="4771" href="Ledger.Utxo.html#4771" class="InductiveConstructor">delegate</a>   <a id="4782" class="Symbol">:</a> <a id="4784" class="Symbol">∀</a> <a id="4786" class="Symbol">{</a><a id="4787" href="Ledger.Utxo.html#4787" class="Bound">c</a> <a id="4789" href="Ledger.Utxo.html#4789" class="Bound">del</a> <a id="4793" href="Ledger.Utxo.html#4793" class="Bound">kh</a> <a id="4796" href="Ledger.Utxo.html#4796" class="Bound">v</a> <a id="4798" href="Ledger.Utxo.html#4798" class="Bound">certs</a><a id="4803" class="Symbol">}</a>
             <a id="4818" class="Symbol">→</a> <a id="4820" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="4838" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="4841" class="Symbol">(</a><a id="4842" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="4847" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="4850" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4852" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4870" href="Ledger.Utxo.html#4787" class="Bound">c</a> <a id="4872" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4874" href="Ledger.Utxo.html#4796" class="Bound">v</a> <a id="4876" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4877" class="Symbol">)</a> <a id="4879" href="Ledger.Utxo.html#4798" class="Bound">certs</a>
             <a id="4898" class="Symbol">→</a> <a id="4900" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="4918" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="4921" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="4926" class="Symbol">(</a><a id="4927" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="4936" href="Ledger.Utxo.html#4787" class="Bound">c</a> <a id="4938" href="Ledger.Utxo.html#4789" class="Bound">del</a> <a id="4942" href="Ledger.Utxo.html#4793" class="Bound">kh</a> <a id="4945" href="Ledger.Utxo.html#4796" class="Bound">v</a> <a id="4947" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4949" href="Ledger.Utxo.html#4798" class="Bound">certs</a><a id="4954" class="Symbol">)</a>
  <a id="ValidCertDeposits.regpool"></a><a id="4958" href="Ledger.Utxo.html#4958" class="InductiveConstructor">regpool</a>    <a id="4969" class="Symbol">:</a> <a id="4971" class="Symbol">∀</a> <a id="4973" class="Symbol">{</a><a id="4974" href="Ledger.Utxo.html#4974" class="Bound">kh</a> <a id="4977" href="Ledger.Utxo.html#4977" class="Bound">p</a> <a id="4979" href="Ledger.Utxo.html#4979" class="Bound">certs</a><a id="4984" class="Symbol">}</a>
             <a id="4999" class="Symbol">→</a> <a id="5001" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5019" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5022" class="Symbol">(</a><a id="5023" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5028" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5031" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5033" href="Ledger.Certs.html#415" class="InductiveConstructor">PoolDeposit</a> <a id="5045" href="Ledger.Utxo.html#4974" class="Bound">kh</a> <a id="5048" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5050" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5053" class="Symbol">.</a><a id="5054" href="Ledger.PParams.html#2121" class="Field">poolDeposit</a> <a id="5066" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5067" class="Symbol">)</a> <a id="5069" href="Ledger.Utxo.html#4979" class="Bound">certs</a>
             <a id="5088" class="Symbol">→</a> <a id="5090" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5108" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5111" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5116" class="Symbol">(</a><a id="5117" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="5125" href="Ledger.Utxo.html#4974" class="Bound">kh</a> <a id="5128" href="Ledger.Utxo.html#4977" class="Bound">p</a> <a id="5130" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5132" href="Ledger.Utxo.html#4979" class="Bound">certs</a><a id="5137" class="Symbol">)</a>
  <a id="ValidCertDeposits.regdrep"></a><a id="5141" href="Ledger.Utxo.html#5141" class="InductiveConstructor">regdrep</a>    <a id="5152" class="Symbol">:</a> <a id="5154" class="Symbol">∀</a> <a id="5156" class="Symbol">{</a><a id="5157" href="Ledger.Utxo.html#5157" class="Bound">c</a> <a id="5159" href="Ledger.Utxo.html#5159" class="Bound">v</a> <a id="5161" href="Ledger.Utxo.html#5161" class="Bound">a</a> <a id="5163" href="Ledger.Utxo.html#5163" class="Bound">certs</a><a id="5168" class="Symbol">}</a>
             <a id="5183" class="Symbol">→</a> <a id="5185" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5203" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5206" class="Symbol">(</a><a id="5207" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5212" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5215" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5217" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="5229" href="Ledger.Utxo.html#5157" class="Bound">c</a> <a id="5231" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5233" href="Ledger.Utxo.html#5159" class="Bound">v</a> <a id="5235" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5236" class="Symbol">)</a> <a id="5238" href="Ledger.Utxo.html#5163" class="Bound">certs</a>
             <a id="5257" class="Symbol">→</a> <a id="5259" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5277" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5280" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5285" class="Symbol">(</a><a id="5286" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="5294" href="Ledger.Utxo.html#5157" class="Bound">c</a> <a id="5296" href="Ledger.Utxo.html#5159" class="Bound">v</a> <a id="5298" href="Ledger.Utxo.html#5161" class="Bound">a</a> <a id="5300" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5302" href="Ledger.Utxo.html#5163" class="Bound">certs</a><a id="5307" class="Symbol">)</a>
  <a id="ValidCertDeposits.reg"></a><a id="5311" href="Ledger.Utxo.html#5311" class="InductiveConstructor">reg</a>        <a id="5322" class="Symbol">:</a> <a id="5324" class="Symbol">∀</a> <a id="5326" class="Symbol">{</a><a id="5327" href="Ledger.Utxo.html#5327" class="Bound">c</a> <a id="5329" href="Ledger.Utxo.html#5329" class="Bound">v</a> <a id="5331" href="Ledger.Utxo.html#5331" class="Bound">certs</a><a id="5336" class="Symbol">}</a>
             <a id="5351" class="Symbol">→</a> <a id="5353" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5371" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5374" class="Symbol">(</a><a id="5375" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5380" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5383" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5385" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="5403" href="Ledger.Utxo.html#5327" class="Bound">c</a> <a id="5405" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5407" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5410" class="Symbol">.</a><a id="5411" href="Ledger.PParams.html#2076" class="Field">keyDeposit</a> <a id="5422" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5423" class="Symbol">)</a> <a id="5425" href="Ledger.Utxo.html#5331" class="Bound">certs</a>
             <a id="5444" class="Symbol">→</a> <a id="5446" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5464" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5467" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5472" class="Symbol">(</a><a id="5473" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="5477" href="Ledger.Utxo.html#5327" class="Bound">c</a> <a id="5479" href="Ledger.Utxo.html#5329" class="Bound">v</a> <a id="5481" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5483" href="Ledger.Utxo.html#5331" class="Bound">certs</a><a id="5488" class="Symbol">)</a>
  <a id="ValidCertDeposits.dereg"></a><a id="5492" href="Ledger.Utxo.html#5492" class="InductiveConstructor">dereg</a>      <a id="5503" class="Symbol">:</a> <a id="5505" class="Symbol">∀</a> <a id="5507" class="Symbol">{</a><a id="5508" href="Ledger.Utxo.html#5508" class="Bound">c</a> <a id="5510" href="Ledger.Utxo.html#5510" class="Bound">md</a> <a id="5513" href="Ledger.Utxo.html#5513" class="Bound">d</a> <a id="5515" href="Ledger.Utxo.html#5515" class="Bound">certs</a><a id="5520" class="Symbol">}</a>
             <a id="5535" class="Symbol">→</a> <a id="5537" class="Symbol">(</a><a id="5538" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="5556" href="Ledger.Utxo.html#5508" class="Bound">c</a> <a id="5558" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5560" href="Ledger.Utxo.html#5513" class="Bound">d</a><a id="5561" class="Symbol">)</a> <a id="5563" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5565" href="Ledger.Utxo.html#4679" class="Bound">deps</a>
             <a id="5583" class="Symbol">→</a> <a id="5585" href="Ledger.Utxo.html#5510" class="Bound">md</a> <a id="5588" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5590" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5598" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5600" href="Ledger.Utxo.html#5510" class="Bound">md</a> <a id="5603" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5605" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5610" href="Ledger.Utxo.html#5513" class="Bound">d</a>
             <a id="5625" class="Symbol">→</a> <a id="5627" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5645" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5648" class="Symbol">(</a><a id="5649" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5654" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5656" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5658" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="5676" href="Ledger.Utxo.html#5508" class="Bound">c</a> <a id="5678" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5680" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5681" class="Symbol">)</a> <a id="5683" href="Ledger.Utxo.html#5515" class="Bound">certs</a>
             <a id="5702" class="Symbol">→</a> <a id="5704" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5722" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5725" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5730" class="Symbol">(</a><a id="5731" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="5737" href="Ledger.Utxo.html#5508" class="Bound">c</a> <a id="5739" href="Ledger.Utxo.html#5510" class="Bound">md</a> <a id="5742" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5744" href="Ledger.Utxo.html#5515" class="Bound">certs</a><a id="5749" class="Symbol">)</a>
  <a id="ValidCertDeposits.deregdrep"></a><a id="5753" href="Ledger.Utxo.html#5753" class="InductiveConstructor">deregdrep</a>  <a id="5764" class="Symbol">:</a> <a id="5766" class="Symbol">∀</a> <a id="5768" class="Symbol">{</a><a id="5769" href="Ledger.Utxo.html#5769" class="Bound">c</a> <a id="5771" href="Ledger.Utxo.html#5771" class="Bound">d</a> <a id="5773" href="Ledger.Utxo.html#5773" class="Bound">certs</a><a id="5778" class="Symbol">}</a>
             <a id="5793" class="Symbol">→</a> <a id="5795" class="Symbol">(</a><a id="5796" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="5808" href="Ledger.Utxo.html#5769" class="Bound">c</a> <a id="5810" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5812" href="Ledger.Utxo.html#5771" class="Bound">d</a><a id="5813" class="Symbol">)</a> <a id="5815" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5817" href="Ledger.Utxo.html#4679" class="Bound">deps</a>
             <a id="5835" class="Symbol">→</a> <a id="5837" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5855" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5858" class="Symbol">(</a><a id="5859" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5864" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5866" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5868" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="5880" href="Ledger.Utxo.html#5769" class="Bound">c</a> <a id="5882" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5884" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5885" class="Symbol">)</a> <a id="5887" href="Ledger.Utxo.html#5773" class="Bound">certs</a>
             <a id="5906" class="Symbol">→</a> <a id="5908" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="5926" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="5929" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="5934" class="Symbol">(</a><a id="5935" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="5945" href="Ledger.Utxo.html#5769" class="Bound">c</a> <a id="5947" href="Ledger.Utxo.html#5771" class="Bound">d</a> <a id="5949" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5951" href="Ledger.Utxo.html#5773" class="Bound">certs</a><a id="5956" class="Symbol">)</a>
  <a id="ValidCertDeposits.ccreghot"></a><a id="5960" href="Ledger.Utxo.html#5960" class="InductiveConstructor">ccreghot</a>   <a id="5971" class="Symbol">:</a> <a id="5973" class="Symbol">∀</a> <a id="5975" class="Symbol">{</a><a id="5976" href="Ledger.Utxo.html#5976" class="Bound">c</a> <a id="5978" href="Ledger.Utxo.html#5978" class="Bound">v</a> <a id="5980" href="Ledger.Utxo.html#5980" class="Bound">certs</a><a id="5985" class="Symbol">}</a>
             <a id="6000" class="Symbol">→</a> <a id="6002" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="6020" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="6023" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="6028" href="Ledger.Utxo.html#5980" class="Bound">certs</a>
             <a id="6047" class="Symbol">→</a> <a id="6049" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="6067" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="6070" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="6075" class="Symbol">(</a><a id="6076" href="Ledger.Certs.html#1644" class="InductiveConstructor">ccreghot</a> <a id="6085" href="Ledger.Utxo.html#5976" class="Bound">c</a> <a id="6087" href="Ledger.Utxo.html#5978" class="Bound">v</a> <a id="6089" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6091" href="Ledger.Utxo.html#5980" class="Bound">certs</a><a id="6096" class="Symbol">)</a>
  <a id="ValidCertDeposits.retirepool"></a><a id="6100" href="Ledger.Utxo.html#6100" class="InductiveConstructor">retirepool</a> <a id="6111" class="Symbol">:</a> <a id="6113" class="Symbol">∀</a> <a id="6115" class="Symbol">{</a><a id="6116" href="Ledger.Utxo.html#6116" class="Bound">kh</a> <a id="6119" href="Ledger.Utxo.html#6119" class="Bound">e</a> <a id="6121" href="Ledger.Utxo.html#6121" class="Bound">certs</a><a id="6126" class="Symbol">}</a>
             <a id="6141" class="Symbol">→</a> <a id="6143" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="6161" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="6164" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="6169" href="Ledger.Utxo.html#6121" class="Bound">certs</a>
             <a id="6188" class="Symbol">→</a> <a id="6190" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="6208" href="Ledger.Utxo.html#4664" class="Bound">pp</a> <a id="6211" href="Ledger.Utxo.html#4679" class="Bound">deps</a> <a id="6216" class="Symbol">(</a><a id="6217" href="Ledger.Certs.html#1511" class="InductiveConstructor">retirepool</a> <a id="6228" href="Ledger.Utxo.html#6116" class="Bound">kh</a> <a id="6231" href="Ledger.Utxo.html#6119" class="Bound">e</a>  <a id="6234" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6236" href="Ledger.Utxo.html#6121" class="Bound">certs</a><a id="6241" class="Symbol">)</a>

<a id="6244" class="Keyword">private</a>
  <a id="validCertDeposits?"></a><a id="6254" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6273" class="Symbol">:</a> <a id="6275" class="Symbol">∀</a> <a id="6277" class="Symbol">{</a><a id="6278" href="Ledger.Utxo.html#6278" class="Bound">pp</a><a id="6280" class="Symbol">}</a> <a id="6282" href="Ledger.Utxo.html#6282" class="Bound">deps</a> <a id="6287" href="Ledger.Utxo.html#6287" class="Bound">certs</a> <a id="6293" class="Symbol">→</a> <a id="6295" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="6299" class="Symbol">(</a><a id="6300" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="6318" href="Ledger.Utxo.html#6278" class="Bound">pp</a> <a id="6321" href="Ledger.Utxo.html#6282" class="Bound">deps</a> <a id="6326" href="Ledger.Utxo.html#6287" class="Bound">certs</a><a id="6331" class="Symbol">)</a>
  <a id="6335" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6354" href="Ledger.Utxo.html#6354" class="Bound">deps</a> <a id="6359" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="6362" class="Symbol">=</a> <a id="6364" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6368" href="Ledger.Utxo.html#4727" class="InductiveConstructor">[]</a>
  <a id="6373" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6392" href="Ledger.Utxo.html#6392" class="Bound">deps</a> <a id="6397" class="Symbol">(</a><a id="6398" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="6407" class="Symbol">_</a> <a id="6409" class="Symbol">_</a> <a id="6411" class="Symbol">_</a> <a id="6413" class="Symbol">_</a> <a id="6415" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6417" href="Ledger.Utxo.html#6417" class="Bound">certs</a><a id="6422" class="Symbol">)</a> <a id="6424" class="Symbol">=</a>
    <a id="6430" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6437" href="Ledger.Utxo.html#4771" class="InductiveConstructor">delegate</a> <a id="6446" class="Symbol">(λ</a> <a id="6449" class="Keyword">where</a> <a id="6455" class="Symbol">(</a><a id="6456" href="Ledger.Utxo.html#4771" class="InductiveConstructor">delegate</a> <a id="6465" href="Ledger.Utxo.html#6465" class="Bound">p</a><a id="6466" class="Symbol">)</a> <a id="6468" class="Symbol">→</a> <a id="6470" href="Ledger.Utxo.html#6465" class="Bound">p</a><a id="6471" class="Symbol">)</a> <a id="6473" class="Symbol">(</a><a id="6474" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6493" class="Symbol">_</a> <a id="6495" class="Symbol">_)</a>
  <a id="6500" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6519" href="Ledger.Utxo.html#6519" class="Bound">deps</a> <a id="6524" class="Symbol">(</a><a id="6525" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="6533" class="Symbol">_</a> <a id="6535" class="Symbol">_</a> <a id="6537" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6539" href="Ledger.Utxo.html#6539" class="Bound">certs</a><a id="6544" class="Symbol">)</a> <a id="6546" class="Symbol">=</a>
    <a id="6552" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6559" href="Ledger.Utxo.html#4958" class="InductiveConstructor">regpool</a> <a id="6567" class="Symbol">(λ</a> <a id="6570" class="Keyword">where</a> <a id="6576" class="Symbol">(</a><a id="6577" href="Ledger.Utxo.html#4958" class="InductiveConstructor">regpool</a> <a id="6585" href="Ledger.Utxo.html#6585" class="Bound">p</a><a id="6586" class="Symbol">)</a> <a id="6588" class="Symbol">→</a> <a id="6590" href="Ledger.Utxo.html#6585" class="Bound">p</a><a id="6591" class="Symbol">)</a> <a id="6593" class="Symbol">(</a><a id="6594" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6613" class="Symbol">_</a> <a id="6615" class="Symbol">_)</a>
  <a id="6620" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6639" href="Ledger.Utxo.html#6639" class="Bound">deps</a> <a id="6644" class="Symbol">(</a><a id="6645" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="6653" class="Symbol">_</a> <a id="6655" class="Symbol">_</a> <a id="6657" class="Symbol">_</a> <a id="6659" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6661" href="Ledger.Utxo.html#6661" class="Bound">certs</a><a id="6666" class="Symbol">)</a> <a id="6668" class="Symbol">=</a>
    <a id="6674" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6681" href="Ledger.Utxo.html#5141" class="InductiveConstructor">regdrep</a> <a id="6689" class="Symbol">(λ</a> <a id="6692" class="Keyword">where</a> <a id="6698" class="Symbol">(</a><a id="6699" href="Ledger.Utxo.html#5141" class="InductiveConstructor">regdrep</a> <a id="6707" href="Ledger.Utxo.html#6707" class="Bound">p</a><a id="6708" class="Symbol">)</a> <a id="6710" class="Symbol">→</a> <a id="6712" href="Ledger.Utxo.html#6707" class="Bound">p</a><a id="6713" class="Symbol">)</a> <a id="6715" class="Symbol">(</a><a id="6716" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6735" class="Symbol">_</a> <a id="6737" class="Symbol">_)</a>
  <a id="6742" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6761" href="Ledger.Utxo.html#6761" class="Bound">deps</a> <a id="6766" class="Symbol">(</a><a id="6767" href="Ledger.Certs.html#1511" class="InductiveConstructor">retirepool</a> <a id="6778" class="Symbol">_</a> <a id="6780" class="Symbol">_</a> <a id="6782" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6784" href="Ledger.Utxo.html#6784" class="Bound">certs</a><a id="6789" class="Symbol">)</a> <a id="6791" class="Symbol">=</a>
    <a id="6797" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6804" href="Ledger.Utxo.html#6100" class="InductiveConstructor">retirepool</a> <a id="6815" class="Symbol">(λ</a> <a id="6818" class="Keyword">where</a> <a id="6824" class="Symbol">(</a><a id="6825" href="Ledger.Utxo.html#6100" class="InductiveConstructor">retirepool</a> <a id="6836" href="Ledger.Utxo.html#6836" class="Bound">p</a><a id="6837" class="Symbol">)</a> <a id="6839" class="Symbol">→</a> <a id="6841" href="Ledger.Utxo.html#6836" class="Bound">p</a><a id="6842" class="Symbol">)</a> <a id="6844" class="Symbol">(</a><a id="6845" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6864" class="Symbol">_</a> <a id="6866" class="Symbol">_)</a>
  <a id="6871" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6890" href="Ledger.Utxo.html#6890" class="Bound">deps</a> <a id="6895" class="Symbol">(</a><a id="6896" href="Ledger.Certs.html#1644" class="InductiveConstructor">ccreghot</a> <a id="6905" class="Symbol">_</a> <a id="6907" class="Symbol">_</a> <a id="6909" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6911" href="Ledger.Utxo.html#6911" class="Bound">certs</a><a id="6916" class="Symbol">)</a> <a id="6918" class="Symbol">=</a>
    <a id="6924" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6931" href="Ledger.Utxo.html#5960" class="InductiveConstructor">ccreghot</a> <a id="6940" class="Symbol">(λ</a> <a id="6943" class="Keyword">where</a> <a id="6949" class="Symbol">(</a><a id="6950" href="Ledger.Utxo.html#5960" class="InductiveConstructor">ccreghot</a> <a id="6959" href="Ledger.Utxo.html#6959" class="Bound">p</a><a id="6960" class="Symbol">)</a> <a id="6962" class="Symbol">→</a> <a id="6964" href="Ledger.Utxo.html#6959" class="Bound">p</a><a id="6965" class="Symbol">)</a> <a id="6967" class="Symbol">(</a><a id="6968" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="6987" class="Symbol">_</a> <a id="6989" class="Symbol">_)</a>
  <a id="6994" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7013" href="Ledger.Utxo.html#7013" class="Bound">deps</a> <a id="7018" class="Symbol">(</a><a id="7019" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="7023" class="Symbol">_</a> <a id="7025" class="Symbol">_</a> <a id="7027" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7029" href="Ledger.Utxo.html#7029" class="Bound">certs</a><a id="7034" class="Symbol">)</a> <a id="7036" class="Symbol">=</a>
    <a id="7042" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7049" href="Ledger.Utxo.html#5311" class="InductiveConstructor">reg</a> <a id="7053" class="Symbol">(λ</a> <a id="7056" class="Keyword">where</a> <a id="7062" class="Symbol">(</a><a id="7063" href="Ledger.Utxo.html#5311" class="InductiveConstructor">reg</a> <a id="7067" href="Ledger.Utxo.html#7067" class="Bound">p</a><a id="7068" class="Symbol">)</a> <a id="7070" class="Symbol">→</a> <a id="7072" href="Ledger.Utxo.html#7067" class="Bound">p</a><a id="7073" class="Symbol">)</a> <a id="7075" class="Symbol">(</a><a id="7076" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7095" class="Symbol">_</a> <a id="7097" class="Symbol">_)</a>
  <a id="7102" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7121" href="Ledger.Utxo.html#7121" class="Bound">deps</a> <a id="7126" class="Symbol">(</a><a id="7127" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="7133" href="Ledger.Utxo.html#7133" class="Bound">c</a> <a id="7135" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="7143" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7145" href="Ledger.Utxo.html#7145" class="Bound">certs</a><a id="7150" class="Symbol">)</a> <a id="7152" class="Keyword">with</a> <a id="7157" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7159" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="7177" href="Ledger.Utxo.html#7133" class="Bound">c</a> <a id="7179" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7181" href="Class.IsSet.html#916" class="Function">dom</a> <a id="7185" href="Ledger.Utxo.html#7121" class="Bound">deps</a> <a id="7190" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7195" class="Symbol">...</a> <a id="7199" class="Symbol">|</a> <a id="7201" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7205" href="Ledger.Utxo.html#7205" class="Bound">p</a> <a id="7207" class="Symbol">=</a> <a id="7209" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7216" class="Symbol">(</a><a id="7217" href="Ledger.Utxo.html#5492" class="InductiveConstructor">dereg</a> <a id="7223" class="Symbol">(</a><a id="7224" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="7230" class="Symbol">(</a><a id="7231" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7248" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7253" href="Ledger.Utxo.html#7205" class="Bound">p</a><a id="7254" class="Symbol">))</a> <a id="7257" class="Symbol">(</a><a id="7258" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7263" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7267" class="Symbol">))</a> <a id="7270" class="Symbol">(λ</a> <a id="7273" class="Symbol">{</a> <a id="7275" class="Symbol">(</a><a id="7276" href="Ledger.Utxo.html#5492" class="InductiveConstructor">dereg</a> <a id="7282" class="Symbol">_</a> <a id="7284" class="Symbol">_</a> <a id="7286" href="Ledger.Utxo.html#7286" class="Bound">p</a><a id="7287" class="Symbol">)</a> <a id="7289" class="Symbol">→</a> <a id="7291" href="Ledger.Utxo.html#7286" class="Bound">p</a> <a id="7293" class="Symbol">})</a> <a id="7296" class="Symbol">(</a><a id="7297" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7316" class="Symbol">_</a> <a id="7318" class="Symbol">_)</a>
  <a id="7323" class="Symbol">...</a> <a id="7327" class="Symbol">|</a> <a id="7329" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7332" href="Ledger.Utxo.html#7332" class="Bound">¬p</a> <a id="7335" class="Symbol">=</a> <a id="7337" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7340" class="Symbol">λ</a> <a id="7342" class="Symbol">{</a> <a id="7344" class="Symbol">(</a><a id="7345" href="Ledger.Utxo.html#5492" class="InductiveConstructor">dereg</a> <a id="7351" href="Ledger.Utxo.html#7351" class="Bound">x</a> <a id="7353" class="Symbol">_</a> <a id="7355" class="Symbol">_)</a> <a id="7358" class="Symbol">→</a> <a id="7360" href="Ledger.Utxo.html#7332" class="Bound">¬p</a> <a id="7363" class="Symbol">(</a><a id="7364" href="Function.Bundles.html#4810" class="Field">Equivalence.to</a> <a id="7379" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7384" class="Symbol">(_</a> <a id="7387" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7389" href="Ledger.Utxo.html#7351" class="Bound">x</a><a id="7390" class="Symbol">))</a> <a id="7393" class="Symbol">}</a>
  <a id="7397" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7416" href="Ledger.Utxo.html#7416" class="Bound">deps</a> <a id="7421" class="Symbol">(</a><a id="7422" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="7428" href="Ledger.Utxo.html#7428" class="Bound">c</a> <a id="7430" class="Symbol">(</a><a id="7431" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7436" href="Ledger.Utxo.html#7436" class="Bound">d</a><a id="7437" class="Symbol">)</a> <a id="7439" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7441" href="Ledger.Utxo.html#7441" class="Bound">certs</a><a id="7446" class="Symbol">)</a> <a id="7448" class="Keyword">with</a> <a id="7453" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7455" class="Symbol">(</a><a id="7456" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="7474" href="Ledger.Utxo.html#7428" class="Bound">c</a> <a id="7476" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7478" href="Ledger.Utxo.html#7436" class="Bound">d</a><a id="7479" class="Symbol">)</a> <a id="7481" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7483" href="Ledger.Utxo.html#7416" class="Bound">deps</a> <a id="7488" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7493" class="Symbol">...</a> <a id="7497" class="Symbol">|</a> <a id="7499" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7503" href="Ledger.Utxo.html#7503" class="Bound">p</a> <a id="7505" class="Symbol">=</a> <a id="7507" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7514" class="Symbol">(</a><a id="7515" href="Ledger.Utxo.html#5492" class="InductiveConstructor">dereg</a> <a id="7521" href="Ledger.Utxo.html#7503" class="Bound">p</a> <a id="7523" class="Symbol">(</a><a id="7524" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7529" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7533" class="Symbol">))</a> <a id="7536" class="Symbol">(λ</a> <a id="7539" class="Symbol">{</a> <a id="7541" class="Symbol">(</a><a id="7542" href="Ledger.Utxo.html#5492" class="InductiveConstructor">dereg</a> <a id="7548" class="Symbol">_</a> <a id="7550" class="Symbol">_</a> <a id="7552" href="Ledger.Utxo.html#7552" class="Bound">p</a><a id="7553" class="Symbol">)</a> <a id="7555" class="Symbol">→</a> <a id="7557" href="Ledger.Utxo.html#7552" class="Bound">p</a> <a id="7559" class="Symbol">})</a> <a id="7562" class="Symbol">(</a><a id="7563" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7582" class="Symbol">_</a> <a id="7584" class="Symbol">_)</a>
  <a id="7589" class="Symbol">...</a> <a id="7593" class="Symbol">|</a> <a id="7595" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7598" href="Ledger.Utxo.html#7598" class="Bound">¬p</a> <a id="7601" class="Symbol">=</a> <a id="7603" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7606" class="Symbol">λ</a> <a id="7608" class="Symbol">{</a> <a id="7610" class="Symbol">(</a><a id="7611" href="Ledger.Utxo.html#5492" class="InductiveConstructor">dereg</a> <a id="7617" href="Ledger.Utxo.html#7617" class="Bound">x</a> <a id="7619" class="Symbol">(</a><a id="7620" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7625" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7629" class="Symbol">)</a> <a id="7631" class="Symbol">_)</a> <a id="7634" class="Symbol">→</a> <a id="7636" href="Ledger.Utxo.html#7598" class="Bound">¬p</a> <a id="7639" href="Ledger.Utxo.html#7617" class="Bound">x</a> <a id="7641" class="Symbol">}</a>
  <a id="7645" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7664" href="Ledger.Utxo.html#7664" class="Bound">deps</a> <a id="7669" class="Symbol">(</a><a id="7670" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="7680" href="Ledger.Utxo.html#7680" class="Bound">c</a> <a id="7682" href="Ledger.Utxo.html#7682" class="Bound">d</a> <a id="7684" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7686" href="Ledger.Utxo.html#7686" class="Bound">certs</a><a id="7691" class="Symbol">)</a> <a id="7693" class="Keyword">with</a> <a id="7698" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7700" class="Symbol">(</a><a id="7701" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="7713" href="Ledger.Utxo.html#7680" class="Bound">c</a> <a id="7715" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7717" href="Ledger.Utxo.html#7682" class="Bound">d</a><a id="7718" class="Symbol">)</a> <a id="7720" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7722" href="Ledger.Utxo.html#7664" class="Bound">deps</a> <a id="7727" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a>
  <a id="7731" class="Symbol">...</a> <a id="7735" class="Symbol">|</a> <a id="7737" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7741" href="Ledger.Utxo.html#7741" class="Bound">p</a> <a id="7743" class="Symbol">=</a> <a id="7745" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7752" class="Symbol">(</a><a id="7753" href="Ledger.Utxo.html#5753" class="InductiveConstructor">deregdrep</a> <a id="7763" href="Ledger.Utxo.html#7741" class="Bound">p</a><a id="7764" class="Symbol">)</a>  <a id="7767" class="Symbol">(λ</a> <a id="7770" class="Keyword">where</a> <a id="7776" class="Symbol">(</a><a id="7777" href="Ledger.Utxo.html#5753" class="InductiveConstructor">deregdrep</a> <a id="7787" class="Symbol">_</a> <a id="7789" href="Ledger.Utxo.html#7789" class="Bound">v</a><a id="7790" class="Symbol">)</a> <a id="7792" class="Symbol">→</a> <a id="7794" href="Ledger.Utxo.html#7789" class="Bound">v</a><a id="7795" class="Symbol">)</a> <a id="7797" class="Symbol">(</a><a id="7798" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="7817" class="Symbol">_</a> <a id="7819" class="Symbol">_)</a>
  <a id="7824" class="Symbol">...</a> <a id="7828" class="Symbol">|</a> <a id="7830" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7833" href="Ledger.Utxo.html#7833" class="Bound">¬p</a> <a id="7836" class="Symbol">=</a> <a id="7838" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7841" class="Symbol">(λ</a> <a id="7844" class="Keyword">where</a> <a id="7850" class="Symbol">(</a><a id="7851" href="Ledger.Utxo.html#5753" class="InductiveConstructor">deregdrep</a> <a id="7861" href="Ledger.Utxo.html#7861" class="Bound">p</a> <a id="7863" class="Symbol">_)</a> <a id="7866" class="Symbol">→</a> <a id="7868" href="Ledger.Utxo.html#7833" class="Bound">¬p</a> <a id="7871" href="Ledger.Utxo.html#7861" class="Bound">p</a><a id="7872" class="Symbol">)</a>

<a id="7875" class="Keyword">instance</a>
  <a id="Dec-ValidCertDeposits"></a><a id="7886" href="Ledger.Utxo.html#7886" class="Function">Dec-ValidCertDeposits</a> <a id="7908" class="Symbol">:</a> <a id="7910" class="Symbol">∀</a> <a id="7912" class="Symbol">{</a><a id="7913" href="Ledger.Utxo.html#7913" class="Bound">pp</a> <a id="7916" href="Ledger.Utxo.html#7916" class="Bound">deps</a> <a id="7921" href="Ledger.Utxo.html#7921" class="Bound">certs</a><a id="7926" class="Symbol">}</a> <a id="7928" class="Symbol">→</a> <a id="7930" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="7948" href="Ledger.Utxo.html#7913" class="Bound">pp</a> <a id="7951" href="Ledger.Utxo.html#7916" class="Bound">deps</a> <a id="7956" href="Ledger.Utxo.html#7921" class="Bound">certs</a> <a id="7962" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="7966" href="Ledger.Utxo.html#7886" class="Function">Dec-ValidCertDeposits</a> <a id="7988" class="Symbol">=</a> <a id="7990" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="7992" class="Symbol">(</a><a id="7993" href="Ledger.Utxo.html#6254" class="Function">validCertDeposits?</a> <a id="8012" class="Symbol">_</a> <a id="8014" class="Symbol">_)</a>


<a id="updateCertDeposits"></a><a id="8019" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a>  <a id="8039" class="Symbol">:</a> <a id="8041" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="8049" class="Symbol">→</a> <a id="8051" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8056" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="8062" class="Symbol">→</a> <a id="8064" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="8073" class="Symbol">→</a> <a id="8075" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="8084" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8103" href="Ledger.Utxo.html#8103" class="Bound">pp</a> <a id="8106" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="8109" href="Ledger.Utxo.html#8109" class="Bound">deposits</a> <a id="8118" class="Symbol">=</a> <a id="8120" href="Ledger.Utxo.html#8109" class="Bound">deposits</a>


<a id="8131" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8150" href="Ledger.Utxo.html#8150" class="Bound">pp</a> <a id="8153" class="Symbol">(</a><a id="8154" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="8158" href="Ledger.Utxo.html#8158" class="Bound">c</a> <a id="8160" href="Ledger.Utxo.html#8160" class="Bound">v</a> <a id="8162" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8164" href="Ledger.Utxo.html#8164" class="Bound">certs</a><a id="8169" class="Symbol">)</a> <a id="8171" href="Ledger.Utxo.html#8171" class="Bound">deposits</a>
  <a id="8182" class="Symbol">=</a> <a id="8184" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8203" href="Ledger.Utxo.html#8150" class="Bound">pp</a> <a id="8206" href="Ledger.Utxo.html#8164" class="Bound">certs</a> <a id="8212" class="Symbol">(</a><a id="8213" href="Ledger.Utxo.html#8171" class="Bound">deposits</a> <a id="8222" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8225" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="8237" class="Symbol">(</a><a id="8238" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="8242" href="Ledger.Utxo.html#8158" class="Bound">c</a> <a id="8244" href="Ledger.Utxo.html#8160" class="Bound">v</a><a id="8245" class="Symbol">)</a> <a id="8247" href="Ledger.Utxo.html#8150" class="Bound">pp</a><a id="8249" class="Symbol">)</a>


<a id="8253" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8272" href="Ledger.Utxo.html#8272" class="Bound">pp</a> <a id="8275" class="Symbol">(</a><a id="8276" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="8285" href="Ledger.Utxo.html#8285" class="Bound">c</a> <a id="8287" href="Ledger.Utxo.html#8287" class="Bound">vd</a> <a id="8290" href="Ledger.Utxo.html#8290" class="Bound">khs</a> <a id="8294" href="Ledger.Utxo.html#8294" class="Bound">v</a> <a id="8296" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8298" href="Ledger.Utxo.html#8298" class="Bound">certs</a><a id="8303" class="Symbol">)</a> <a id="8305" href="Ledger.Utxo.html#8305" class="Bound">deposits</a>
  <a id="8316" class="Symbol">=</a> <a id="8318" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8337" href="Ledger.Utxo.html#8272" class="Bound">pp</a> <a id="8340" href="Ledger.Utxo.html#8298" class="Bound">certs</a> <a id="8346" class="Symbol">(</a><a id="8347" href="Ledger.Utxo.html#8305" class="Bound">deposits</a> <a id="8356" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8359" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="8371" class="Symbol">(</a><a id="8372" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="8381" href="Ledger.Utxo.html#8285" class="Bound">c</a> <a id="8383" href="Ledger.Utxo.html#8287" class="Bound">vd</a> <a id="8386" href="Ledger.Utxo.html#8290" class="Bound">khs</a> <a id="8390" href="Ledger.Utxo.html#8294" class="Bound">v</a><a id="8391" class="Symbol">)</a> <a id="8393" href="Ledger.Utxo.html#8272" class="Bound">pp</a><a id="8395" class="Symbol">)</a>
<a id="8397" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8416" href="Ledger.Utxo.html#8416" class="Bound">pp</a> <a id="8419" class="Symbol">(</a><a id="8420" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="8428" href="Ledger.Utxo.html#8428" class="Bound">kh</a> <a id="8431" href="Ledger.Utxo.html#8431" class="Bound">p</a> <a id="8433" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8435" href="Ledger.Utxo.html#8435" class="Bound">certs</a><a id="8440" class="Symbol">)</a> <a id="8442" href="Ledger.Utxo.html#8442" class="Bound">deposits</a>
  <a id="8453" class="Symbol">=</a> <a id="8455" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8474" href="Ledger.Utxo.html#8416" class="Bound">pp</a> <a id="8477" href="Ledger.Utxo.html#8435" class="Bound">certs</a> <a id="8483" class="Symbol">(</a><a id="8484" href="Ledger.Utxo.html#8442" class="Bound">deposits</a> <a id="8493" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8496" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="8508" class="Symbol">(</a><a id="8509" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="8517" href="Ledger.Utxo.html#8428" class="Bound">kh</a> <a id="8520" href="Ledger.Utxo.html#8431" class="Bound">p</a><a id="8521" class="Symbol">)</a> <a id="8523" href="Ledger.Utxo.html#8416" class="Bound">pp</a><a id="8525" class="Symbol">)</a>
<a id="8527" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8546" href="Ledger.Utxo.html#8546" class="Bound">pp</a> <a id="8549" class="Symbol">(</a><a id="8550" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="8558" href="Ledger.Utxo.html#8558" class="Bound">c</a> <a id="8560" href="Ledger.Utxo.html#8560" class="Bound">v</a> <a id="8562" href="Ledger.Utxo.html#8562" class="Bound">a</a> <a id="8564" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8566" href="Ledger.Utxo.html#8566" class="Bound">certs</a><a id="8571" class="Symbol">)</a> <a id="8573" href="Ledger.Utxo.html#8573" class="Bound">deposits</a>
  <a id="8584" class="Symbol">=</a> <a id="8586" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8605" href="Ledger.Utxo.html#8546" class="Bound">pp</a> <a id="8608" href="Ledger.Utxo.html#8566" class="Bound">certs</a> <a id="8614" class="Symbol">(</a><a id="8615" href="Ledger.Utxo.html#8573" class="Bound">deposits</a> <a id="8624" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8627" href="Ledger.Utxo.html#4110" class="Function">certDeposit</a> <a id="8639" class="Symbol">(</a><a id="8640" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="8648" href="Ledger.Utxo.html#8558" class="Bound">c</a> <a id="8650" href="Ledger.Utxo.html#8560" class="Bound">v</a> <a id="8652" href="Ledger.Utxo.html#8562" class="Bound">a</a><a id="8653" class="Symbol">)</a> <a id="8655" href="Ledger.Utxo.html#8546" class="Bound">pp</a><a id="8657" class="Symbol">)</a>
<a id="8659" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8678" href="Ledger.Utxo.html#8678" class="Bound">pp</a> <a id="8681" class="Symbol">(</a><a id="8682" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="8688" href="Ledger.Utxo.html#8688" class="Bound">c</a> <a id="8690" href="Ledger.Utxo.html#8690" class="Bound">v</a> <a id="8692" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8694" href="Ledger.Utxo.html#8694" class="Bound">certs</a><a id="8699" class="Symbol">)</a> <a id="8701" href="Ledger.Utxo.html#8701" class="Bound">deposits</a>
  <a id="8712" class="Symbol">=</a> <a id="8714" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8733" href="Ledger.Utxo.html#8678" class="Bound">pp</a> <a id="8736" href="Ledger.Utxo.html#8694" class="Bound">certs</a> <a id="8742" class="Symbol">(</a><a id="8743" href="Ledger.Utxo.html#8701" class="Bound">deposits</a> <a id="8752" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8754" href="Ledger.Utxo.html#4467" class="Function">certRefund</a> <a id="8765" class="Symbol">(</a><a id="8766" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="8772" href="Ledger.Utxo.html#8688" class="Bound">c</a> <a id="8774" href="Ledger.Utxo.html#8690" class="Bound">v</a><a id="8775" class="Symbol">)</a><a id="8776" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8777" class="Symbol">)</a>
<a id="8779" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8798" href="Ledger.Utxo.html#8798" class="Bound">pp</a> <a id="8801" class="Symbol">(</a><a id="8802" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="8812" href="Ledger.Utxo.html#8812" class="Bound">c</a> <a id="8814" href="Ledger.Utxo.html#8814" class="Bound">v</a> <a id="8816" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8818" href="Ledger.Utxo.html#8818" class="Bound">certs</a><a id="8823" class="Symbol">)</a> <a id="8825" href="Ledger.Utxo.html#8825" class="Bound">deposits</a>
  <a id="8836" class="Symbol">=</a> <a id="8838" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8857" href="Ledger.Utxo.html#8798" class="Bound">pp</a> <a id="8860" href="Ledger.Utxo.html#8818" class="Bound">certs</a> <a id="8866" class="Symbol">(</a><a id="8867" href="Ledger.Utxo.html#8825" class="Bound">deposits</a> <a id="8876" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8878" href="Ledger.Utxo.html#4467" class="Function">certRefund</a> <a id="8889" class="Symbol">(</a><a id="8890" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="8900" href="Ledger.Utxo.html#8812" class="Bound">c</a> <a id="8902" href="Ledger.Utxo.html#8814" class="Bound">v</a><a id="8903" class="Symbol">)</a><a id="8904" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8905" class="Symbol">)</a>
<a id="8907" href="Ledger.Utxo.html#8019" class="CatchallClause Function">updateCertDeposits</a><a id="8925" class="CatchallClause"> </a><a id="8926" href="Ledger.Utxo.html#8926" class="CatchallClause Bound">pp</a><a id="8928" class="CatchallClause"> </a><a id="8929" class="CatchallClause Symbol">(_</a><a id="8931" class="CatchallClause"> </a><a id="8932" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="8933" class="CatchallClause"> </a><a id="8934" href="Ledger.Utxo.html#8934" class="CatchallClause Bound">certs</a><a id="8939" class="CatchallClause Symbol">)</a><a id="8940" class="CatchallClause"> </a><a id="8941" href="Ledger.Utxo.html#8941" class="CatchallClause Bound">deposits</a>
  <a id="8952" class="Symbol">=</a> <a id="8954" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="8973" href="Ledger.Utxo.html#8926" class="Bound">pp</a> <a id="8976" href="Ledger.Utxo.html#8934" class="Bound">certs</a> <a id="8982" href="Ledger.Utxo.html#8941" class="Bound">deposits</a>

<a id="updateProposalDeposits"></a><a id="8992" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="9015" class="Symbol">:</a> <a id="9017" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9022" href="Ledger.GovernanceActions.html#2524" class="Record">GovProposal</a> <a id="9034" class="Symbol">→</a> <a id="9036" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="9041" class="Symbol">→</a> <a id="9043" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="9048" class="Symbol">→</a> <a id="9050" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="9059" class="Symbol">→</a> <a id="9061" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="9070" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="9093" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="9103" class="Symbol">_</a>     <a id="9109" class="Symbol">_</a>      <a id="9116" href="Ledger.Utxo.html#9116" class="Bound">deposits</a>  <a id="9126" class="Symbol">=</a> <a id="9128" href="Ledger.Utxo.html#9116" class="Bound">deposits</a>
<a id="9137" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="9160" class="Symbol">(_</a> <a id="9163" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9165" href="Ledger.Utxo.html#9165" class="Bound">ps</a><a id="9167" class="Symbol">)</a>  <a id="9170" href="Ledger.Utxo.html#9170" class="Bound">txid</a>  <a id="9176" href="Ledger.Utxo.html#9176" class="Bound">gaDep</a>  <a id="9183" href="Ledger.Utxo.html#9183" class="Bound">deposits</a>  <a id="9193" class="Symbol">=</a>
  <a id="9197" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="9220" href="Ledger.Utxo.html#9165" class="Bound">ps</a> <a id="9223" href="Ledger.Utxo.html#9170" class="Bound">txid</a> <a id="9228" href="Ledger.Utxo.html#9176" class="Bound">gaDep</a> <a id="9234" href="Ledger.Utxo.html#9183" class="Bound">deposits</a>
  <a id="9245" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="9248" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="9250" href="Ledger.Certs.html#521" class="InductiveConstructor">GovActionDeposit</a> <a id="9267" class="Symbol">(</a><a id="9268" href="Ledger.Utxo.html#9170" class="Bound">txid</a> <a id="9273" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9275" href="Data.List.Base.html#5044" class="Function">length</a> <a id="9282" href="Ledger.Utxo.html#9165" class="Bound">ps</a><a id="9284" class="Symbol">)</a> <a id="9286" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9288" href="Ledger.Utxo.html#9176" class="Bound">gaDep</a> <a id="9294" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>

<a id="updateDeposits"></a><a id="9297" href="Ledger.Utxo.html#9297" class="Function">updateDeposits</a> <a id="9312" class="Symbol">:</a> <a id="9314" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="9322" class="Symbol">→</a> <a id="9324" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="9331" class="Symbol">→</a> <a id="9333" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="9342" class="Symbol">→</a> <a id="9344" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="9353" href="Ledger.Utxo.html#9297" class="Function">updateDeposits</a> <a id="9368" href="Ledger.Utxo.html#9368" class="Bound">pp</a> <a id="9371" href="Ledger.Utxo.html#9371" class="Bound">txb</a> <a id="9375" class="Symbol">=</a> <a id="9377" href="Ledger.Utxo.html#8019" class="Function">updateCertDeposits</a> <a id="9396" href="Ledger.Utxo.html#9368" class="Bound">pp</a> <a id="9399" href="Ledger.Transaction.html#2911" class="Field">txcerts</a>
                        <a id="9431" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="9433" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="9456" href="Ledger.Transaction.html#3009" class="Field">txprop</a> <a id="9463" href="Ledger.Transaction.html#3245" class="Field">txid</a> <a id="9468" class="Symbol">(</a><a id="9469" href="Ledger.Utxo.html#9368" class="Bound">pp</a> <a id="9472" class="Symbol">.</a><a id="9473" href="Ledger.PParams.html#3236" class="Field">govActionDeposit</a><a id="9489" class="Symbol">)</a>


  <a id="9495" class="Keyword">where</a> <a id="9501" class="Keyword">open</a> <a id="9506" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="9513" href="Ledger.Utxo.html#9371" class="Bound">txb</a>

<a id="proposalDepositsΔ"></a><a id="9518" href="Ledger.Utxo.html#9518" class="Function">proposalDepositsΔ</a> <a id="9536" class="Symbol">:</a> <a id="9538" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9543" href="Ledger.GovernanceActions.html#2524" class="Record">GovProposal</a> <a id="9555" class="Symbol">→</a> <a id="9557" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="9565" class="Symbol">→</a> <a id="9567" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="9574" class="Symbol">→</a> <a id="9576" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="9585" href="Ledger.Utxo.html#9518" class="Function">proposalDepositsΔ</a> <a id="9603" href="Ledger.Utxo.html#9603" class="Bound">props</a> <a id="9609" href="Ledger.Utxo.html#9609" class="Bound">pp</a> <a id="9612" href="Ledger.Utxo.html#9612" class="Bound">txb</a> <a id="9616" class="Symbol">=</a> <a id="9618" href="Ledger.Utxo.html#8992" class="Function">updateProposalDeposits</a> <a id="9641" href="Ledger.Utxo.html#9603" class="Bound">props</a> <a id="9647" href="Ledger.Transaction.html#3245" class="Field">txid</a> <a id="9652" class="Symbol">(</a><a id="9653" href="Ledger.Utxo.html#9609" class="Bound">pp</a> <a id="9656" class="Symbol">.</a><a id="9657" href="Ledger.PParams.html#3236" class="Field">govActionDeposit</a><a id="9673" class="Symbol">)</a> <a id="9675" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="9679" class="Keyword">where</a> <a id="9685" class="Keyword">open</a> <a id="9690" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="9697" href="Ledger.Utxo.html#9612" class="Bound">txb</a>



<a id="depositsChange"></a><a id="9704" href="Ledger.Utxo.html#9704" class="Function">depositsChange</a> <a id="9719" class="Symbol">:</a> <a id="9721" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="9729" class="Symbol">→</a> <a id="9731" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="9738" class="Symbol">→</a> <a id="9740" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="9749" class="Symbol">→</a> <a id="9751" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
<a id="9753" href="Ledger.Utxo.html#9704" class="Function">depositsChange</a> <a id="9768" href="Ledger.Utxo.html#9768" class="Bound">pp</a> <a id="9771" href="Ledger.Utxo.html#9771" class="Bound">txb</a> <a id="9775" href="Ledger.Utxo.html#9775" class="Bound">deposits</a> <a id="9784" class="Symbol">=</a>
  <a id="9788" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9796" class="Symbol">(</a><a id="9797" href="Ledger.Utxo.html#9297" class="Function">updateDeposits</a> <a id="9812" href="Ledger.Utxo.html#9768" class="Bound">pp</a> <a id="9815" href="Ledger.Utxo.html#9771" class="Bound">txb</a> <a id="9819" href="Ledger.Utxo.html#9775" class="Bound">deposits</a><a id="9827" class="Symbol">)</a> <a id="9829" href="Interface.HasSubtract.html#209" class="Field Operator">-</a> <a id="9831" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9839" href="Ledger.Utxo.html#9775" class="Bound">deposits</a>


<a id="9850" class="Keyword">data</a> <a id="inInterval"></a><a id="9855" href="Ledger.Utxo.html#9855" class="Datatype">inInterval</a> <a id="9866" class="Symbol">(</a><a id="9867" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="9872" class="Symbol">:</a> <a id="9874" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a><a id="9878" class="Symbol">)</a> <a id="9880" class="Symbol">:</a> <a id="9882" class="Symbol">(</a><a id="9883" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9889" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a> <a id="9894" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9896" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9902" href="Ledger.Types.Epoch.html#619" class="Function">Slot</a><a id="9906" class="Symbol">)</a> <a id="9908" class="Symbol">→</a> <a id="9910" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="9915" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="9923" href="Ledger.Utxo.html#9923" class="InductiveConstructor">both</a>   <a id="9930" class="Symbol">:</a> <a id="9932" class="Symbol">∀</a> <a id="9934" class="Symbol">{</a><a id="9935" href="Ledger.Utxo.html#9935" class="Bound">l</a> <a id="9937" href="Ledger.Utxo.html#9937" class="Bound">r</a><a id="9938" class="Symbol">}</a>  <a id="9941" class="Symbol">→</a> <a id="9943" href="Ledger.Utxo.html#9935" class="Bound">l</a> <a id="9945" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="9947" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="9952" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9954" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="9959" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="9961" href="Ledger.Utxo.html#9937" class="Bound">r</a>  <a id="9964" class="Symbol">→</a>  <a id="9967" href="Ledger.Utxo.html#9855" class="Datatype">inInterval</a> <a id="9978" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="9983" class="Symbol">(</a><a id="9984" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9989" href="Ledger.Utxo.html#9935" class="Bound">l</a>   <a id="9993" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9995" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10000" href="Ledger.Utxo.html#9937" class="Bound">r</a><a id="10001" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="10005" href="Ledger.Utxo.html#10005" class="InductiveConstructor">lower</a>  <a id="10012" class="Symbol">:</a> <a id="10014" class="Symbol">∀</a> <a id="10016" class="Symbol">{</a><a id="10017" href="Ledger.Utxo.html#10017" class="Bound">l</a><a id="10018" class="Symbol">}</a>    <a id="10023" class="Symbol">→</a> <a id="10025" href="Ledger.Utxo.html#10017" class="Bound">l</a> <a id="10027" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10029" href="Ledger.Utxo.html#9867" class="Bound">slot</a>             <a id="10046" class="Symbol">→</a>  <a id="10049" href="Ledger.Utxo.html#9855" class="Datatype">inInterval</a> <a id="10060" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="10065" class="Symbol">(</a><a id="10066" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10071" href="Ledger.Utxo.html#10017" class="Bound">l</a>   <a id="10075" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10077" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10084" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="10088" href="Ledger.Utxo.html#10088" class="InductiveConstructor">upper</a>  <a id="10095" class="Symbol">:</a> <a id="10097" class="Symbol">∀</a> <a id="10099" class="Symbol">{</a><a id="10100" href="Ledger.Utxo.html#10100" class="Bound">r</a><a id="10101" class="Symbol">}</a>    <a id="10106" class="Symbol">→</a> <a id="10108" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="10113" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10115" href="Ledger.Utxo.html#10100" class="Bound">r</a>             <a id="10129" class="Symbol">→</a>  <a id="10132" href="Ledger.Utxo.html#9855" class="Datatype">inInterval</a> <a id="10143" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="10148" class="Symbol">(</a><a id="10149" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10158" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10160" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10165" href="Ledger.Utxo.html#10100" class="Bound">r</a><a id="10166" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="10170" href="Ledger.Utxo.html#10170" class="InductiveConstructor">none</a>   <a id="10177" class="Symbol">:</a>                                    <a id="10214" href="Ledger.Utxo.html#9855" class="Datatype">inInterval</a> <a id="10225" href="Ledger.Utxo.html#9867" class="Bound">slot</a> <a id="10230" class="Symbol">(</a><a id="10231" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10240" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10242" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10249" class="Symbol">)</a>


<a id="10253" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="10323" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="10334" href="Ledger.Utxo.html#10334" class="Function">Dec-inInterval</a> <a id="10349" class="Symbol">:</a> <a id="10351" href="Ledger.Utxo.html#9855" class="Datatype">inInterval</a> <a id="10362" href="Class.Decidable.Core.html#773" class="Function Operator">⁇²</a>
  <a id="10367" href="Ledger.Utxo.html#10334" class="Function">Dec-inInterval</a> <a id="10382" class="Symbol">{</a><a id="10383" href="Ledger.Utxo.html#10383" class="Bound">slot</a><a id="10387" class="Symbol">}</a> <a id="10389" class="Symbol">{</a><a id="10390" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10395" href="Ledger.Utxo.html#10395" class="Bound">x</a>  <a id="10398" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10400" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10405" href="Ledger.Utxo.html#10405" class="Bound">y</a> <a id="10407" class="Symbol">}</a> <a id="10409" class="Symbol">.</a><a id="10410" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10414" class="Keyword">with</a> <a id="10419" href="Ledger.Utxo.html#10395" class="Bound">x</a> <a id="10421" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10424" href="Ledger.Utxo.html#10383" class="Bound">slot</a> <a id="10429" class="Symbol">|</a> <a id="10431" href="Ledger.Utxo.html#10383" class="Bound">slot</a> <a id="10436" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10439" href="Ledger.Utxo.html#10405" class="Bound">y</a>
  <a id="10443" class="Symbol">...</a> <a id="10447" class="Symbol">|</a> <a id="10449" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10452" href="Ledger.Utxo.html#10452" class="Bound">¬p₁</a> <a id="10456" class="Symbol">|</a> <a id="10458" class="Symbol">_</a>      <a id="10465" class="Symbol">=</a> <a id="10467" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10470" class="Symbol">λ</a> <a id="10472" class="Keyword">where</a> <a id="10478" class="Symbol">(</a><a id="10479" href="Ledger.Utxo.html#9923" class="InductiveConstructor">both</a> <a id="10484" class="Symbol">(</a><a id="10485" href="Ledger.Utxo.html#10485" class="Bound">h₁</a> <a id="10488" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10490" href="Ledger.Utxo.html#10490" class="Bound">h₂</a><a id="10492" class="Symbol">))</a> <a id="10495" class="Symbol">→</a> <a id="10497" href="Ledger.Utxo.html#10452" class="Bound">¬p₁</a> <a id="10501" href="Ledger.Utxo.html#10485" class="Bound">h₁</a>
  <a id="10506" class="Symbol">...</a> <a id="10510" class="Symbol">|</a> <a id="10512" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10516" href="Ledger.Utxo.html#10516" class="Bound">p₁</a> <a id="10519" class="Symbol">|</a> <a id="10521" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10524" href="Ledger.Utxo.html#10524" class="Bound">¬p₂</a> <a id="10528" class="Symbol">=</a> <a id="10530" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10533" class="Symbol">λ</a> <a id="10535" class="Keyword">where</a> <a id="10541" class="Symbol">(</a><a id="10542" href="Ledger.Utxo.html#9923" class="InductiveConstructor">both</a> <a id="10547" class="Symbol">(</a><a id="10548" href="Ledger.Utxo.html#10548" class="Bound">h₁</a> <a id="10551" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10553" href="Ledger.Utxo.html#10553" class="Bound">h₂</a><a id="10555" class="Symbol">))</a> <a id="10558" class="Symbol">→</a> <a id="10560" href="Ledger.Utxo.html#10524" class="Bound">¬p₂</a> <a id="10564" href="Ledger.Utxo.html#10553" class="Bound">h₂</a>
  <a id="10569" class="Symbol">...</a> <a id="10573" class="Symbol">|</a> <a id="10575" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10579" href="Ledger.Utxo.html#10579" class="Bound">p₁</a> <a id="10582" class="Symbol">|</a> <a id="10584" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10588" href="Ledger.Utxo.html#10588" class="Bound">p₂</a> <a id="10591" class="Symbol">=</a> <a id="10593" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10597" class="Symbol">(</a><a id="10598" href="Ledger.Utxo.html#9923" class="InductiveConstructor">both</a> <a id="10603" class="Symbol">(</a><a id="10604" href="Ledger.Utxo.html#10579" class="Bound">p₁</a> <a id="10607" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10609" href="Ledger.Utxo.html#10588" class="Bound">p₂</a><a id="10611" class="Symbol">))</a>
  <a id="10616" href="Ledger.Utxo.html#10334" class="Function">Dec-inInterval</a> <a id="10631" class="Symbol">{</a><a id="10632" href="Ledger.Utxo.html#10632" class="Bound">slot</a><a id="10636" class="Symbol">}</a> <a id="10638" class="Symbol">{</a><a id="10639" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10644" href="Ledger.Utxo.html#10644" class="Bound">x</a>  <a id="10647" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10649" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10656" class="Symbol">}</a> <a id="10658" class="Symbol">.</a><a id="10659" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10663" class="Keyword">with</a> <a id="10668" href="Ledger.Utxo.html#10644" class="Bound">x</a> <a id="10670" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10673" href="Ledger.Utxo.html#10632" class="Bound">slot</a>
  <a id="10680" class="Symbol">...</a> <a id="10684" class="Symbol">|</a> <a id="10686" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10689" href="Ledger.Utxo.html#10689" class="Bound">¬p</a> <a id="10692" class="Symbol">=</a> <a id="10694" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10698" class="Symbol">(λ</a> <a id="10701" class="Keyword">where</a> <a id="10707" class="Symbol">(</a><a id="10708" href="Ledger.Utxo.html#10005" class="InductiveConstructor">lower</a> <a id="10714" href="Ledger.Utxo.html#10714" class="Bound">h</a><a id="10715" class="Symbol">)</a> <a id="10717" class="Symbol">→</a> <a id="10719" href="Ledger.Utxo.html#10689" class="Bound">¬p</a> <a id="10722" href="Ledger.Utxo.html#10714" class="Bound">h</a><a id="10723" class="Symbol">)</a>
  <a id="10727" class="Symbol">...</a> <a id="10731" class="Symbol">|</a> <a id="10733" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10737" href="Ledger.Utxo.html#10737" class="Bound">p</a> <a id="10739" class="Symbol">=</a> <a id="10741" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10745" class="Symbol">(</a><a id="10746" href="Ledger.Utxo.html#10005" class="InductiveConstructor">lower</a> <a id="10752" href="Ledger.Utxo.html#10737" class="Bound">p</a><a id="10753" class="Symbol">)</a>
  <a id="10757" href="Ledger.Utxo.html#10334" class="Function">Dec-inInterval</a> <a id="10772" class="Symbol">{</a><a id="10773" href="Ledger.Utxo.html#10773" class="Bound">slot</a><a id="10777" class="Symbol">}</a> <a id="10779" class="Symbol">{</a><a id="10780" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10788" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10790" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10795" href="Ledger.Utxo.html#10795" class="Bound">x</a> <a id="10797" class="Symbol">}</a> <a id="10799" class="Symbol">.</a><a id="10800" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10804" class="Keyword">with</a> <a id="10809" href="Ledger.Utxo.html#10773" class="Bound">slot</a> <a id="10814" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10817" href="Ledger.Utxo.html#10795" class="Bound">x</a>
  <a id="10821" class="Symbol">...</a> <a id="10825" class="Symbol">|</a> <a id="10827" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10830" href="Ledger.Utxo.html#10830" class="Bound">¬p</a> <a id="10833" class="Symbol">=</a> <a id="10835" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10839" class="Symbol">(λ</a> <a id="10842" class="Keyword">where</a> <a id="10848" class="Symbol">(</a><a id="10849" href="Ledger.Utxo.html#10088" class="InductiveConstructor">upper</a> <a id="10855" href="Ledger.Utxo.html#10855" class="Bound">h</a><a id="10856" class="Symbol">)</a> <a id="10858" class="Symbol">→</a> <a id="10860" href="Ledger.Utxo.html#10830" class="Bound">¬p</a> <a id="10863" href="Ledger.Utxo.html#10855" class="Bound">h</a><a id="10864" class="Symbol">)</a>
  <a id="10868" class="Symbol">...</a> <a id="10872" class="Symbol">|</a> <a id="10874" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10878" href="Ledger.Utxo.html#10878" class="Bound">p</a> <a id="10880" class="Symbol">=</a> <a id="10882" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10886" class="Symbol">(</a><a id="10887" href="Ledger.Utxo.html#10088" class="InductiveConstructor">upper</a> <a id="10893" href="Ledger.Utxo.html#10878" class="Bound">p</a><a id="10894" class="Symbol">)</a>
  <a id="10898" href="Ledger.Utxo.html#10334" class="Function">Dec-inInterval</a> <a id="10913" class="Symbol">{</a><a id="10914" href="Ledger.Utxo.html#10914" class="Bound">slot</a><a id="10918" class="Symbol">}</a> <a id="10920" class="Symbol">{</a><a id="10921" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10929" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10931" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10938" class="Symbol">}</a> <a id="10940" class="Symbol">.</a><a id="10941" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10945" class="Symbol">=</a> <a id="10947" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10951" href="Ledger.Utxo.html#10170" class="InductiveConstructor">none</a>

  <a id="HasCoin-UTxOState"></a><a id="10959" href="Ledger.Utxo.html#10959" class="Function">HasCoin-UTxOState</a> <a id="10977" class="Symbol">:</a> <a id="10979" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="10987" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a>
  <a id="10999" href="Ledger.Utxo.html#10959" class="Function">HasCoin-UTxOState</a> <a id="11017" class="Symbol">.</a><a id="11018" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11026" href="Ledger.Utxo.html#11026" class="Bound">s</a> <a id="11028" class="Symbol">=</a> <a id="11030" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11038" class="Symbol">(</a><a id="11039" href="Ledger.Utxo.html#2769" class="Field">UTxOState.utxo</a> <a id="11054" href="Ledger.Utxo.html#11026" class="Bound">s</a><a id="11055" class="Symbol">)</a>
                               <a id="11088" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11090" class="Symbol">(</a><a id="11091" href="Ledger.Utxo.html#2791" class="Field">UTxOState.fees</a> <a id="11106" href="Ledger.Utxo.html#11026" class="Bound">s</a><a id="11107" class="Symbol">)</a>
                               <a id="11140" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11142" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11150" class="Symbol">(</a><a id="11151" href="Ledger.Utxo.html#2813" class="Field">UTxOState.deposits</a> <a id="11170" href="Ledger.Utxo.html#11026" class="Bound">s</a><a id="11171" class="Symbol">)</a>
                               <a id="11204" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11206" href="Ledger.Utxo.html#2839" class="Field">UTxOState.donations</a> <a id="11226" href="Ledger.Utxo.html#11026" class="Bound">s</a>

<a id="coinPolicies"></a><a id="11229" href="Ledger.Utxo.html#11229" class="Function">coinPolicies</a> <a id="11242" class="Symbol">:</a> <a id="11244" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="11246" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>
<a id="11257" href="Ledger.Utxo.html#11229" class="Function">coinPolicies</a> <a id="11270" class="Symbol">=</a> <a id="11272" href="Ledger.TokenAlgebra.html#902" class="Function">policies</a> <a id="11281" class="Symbol">(</a><a id="11282" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="11289" class="Number">1</a><a id="11290" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="11293" href="Ledger.Utxo.html#11293" class="Function">isAdaOnly</a> <a id="11303" class="Symbol">:</a> <a id="11305" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="11311" class="Symbol">→</a> <a id="11313" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11318" href="Ledger.Utxo.html#11293" class="Function">isAdaOnly</a> <a id="11328" href="Ledger.Utxo.html#11328" class="Bound">v</a> <a id="11330" class="Symbol">=</a> <a id="11332" href="Ledger.TokenAlgebra.html#902" class="Function">policies</a> <a id="11341" href="Ledger.Utxo.html#11328" class="Bound">v</a> <a id="11343" href="Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="11346" href="Ledger.Utxo.html#11229" class="Function">coinPolicies</a>


<a id="feesOK"></a><a id="11361" href="Ledger.Utxo.html#11361" class="Function">feesOK</a> <a id="11368" class="Symbol">:</a> <a id="11370" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="11378" class="Symbol">→</a> <a id="11380" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="11383" class="Symbol">→</a> <a id="11385" href="Ledger.Transaction.html#2388" class="Function">UTxO</a> <a id="11390" class="Symbol">→</a> <a id="11392" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11397" href="Ledger.Utxo.html#11361" class="Function">feesOK</a> <a id="11404" href="Ledger.Utxo.html#11404" class="Bound">pp</a> <a id="11407" href="Ledger.Utxo.html#11407" class="Bound">tx</a> <a id="11410" href="Ledger.Utxo.html#11410" class="Bound">utxo</a> <a id="11415" class="Symbol">=</a> <a id="11417" class="Symbol">(</a> <a id="11419" href="Ledger.Utxo.html#3812" class="Function">minfee</a> <a id="11426" href="Ledger.Utxo.html#11404" class="Bound">pp</a> <a id="11429" href="Ledger.Utxo.html#11410" class="Bound">utxo</a> <a id="11434" href="Ledger.Utxo.html#11407" class="Bound">tx</a> <a id="11437" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="11439" href="Ledger.Transaction.html#2807" class="Function">txfee</a> <a id="11445" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11447" class="Symbol">(</a><a id="11448" href="Ledger.Transaction.html#4100" class="Function">txrdmrs</a> <a id="11456" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="11458" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11460" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                      <a id="11484" class="Symbol">→</a> <a id="11486" class="Symbol">(</a> <a id="11488" href="Axiom.Set.html#9724" class="Function">All</a> <a id="11492" class="Symbol">(λ</a> <a id="11495" class="Symbol">(</a><a id="11496" href="Ledger.Utxo.html#11496" class="Bound">addr</a> <a id="11501" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11503" class="Symbol">_)</a> <a id="11506" class="Symbol">→</a> <a id="11508" href="Ledger.Address.html#2580" class="Function">isVKeyAddr</a> <a id="11519" href="Ledger.Utxo.html#11496" class="Bound">addr</a><a id="11523" class="Symbol">)</a> <a id="11525" href="Ledger.Utxo.html#11855" class="Function">collateralRange</a>
                        <a id="11565" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11567" href="Ledger.Utxo.html#11293" class="Function">isAdaOnly</a> <a id="11577" href="Ledger.Utxo.html#11929" class="Function">bal</a>
                        <a id="11605" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11607" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="11612" href="Ledger.Utxo.html#11929" class="Function">bal</a> <a id="11616" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11618" class="Number">100</a> <a id="11622" href="Class.HasOrder.Core.html#822" class="Function Operator">≥</a> <a id="11624" href="Ledger.Transaction.html#2807" class="Function">txfee</a> <a id="11630" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11632" href="Ledger.Utxo.html#11404" class="Bound">pp</a> <a id="11635" class="Symbol">.</a><a id="11636" href="Ledger.PParams.html#2812" class="Field">collateralPercentage</a>
                        <a id="11681" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11683" href="Ledger.Transaction.html#3273" class="Function">collateral</a> <a id="11694" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11696" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                        <a id="11722" class="Symbol">)</a>
                      <a id="11746" class="Symbol">)</a>
                    <a id="11768" class="Symbol">)</a>
  <a id="11772" class="Keyword">where</a>
    <a id="11782" class="Keyword">open</a> <a id="11787" href="Ledger.Transaction.html#4221" class="Module">Tx</a> <a id="11790" href="Ledger.Utxo.html#11407" class="Bound">tx</a><a id="11792" class="Symbol">;</a> <a id="11794" class="Keyword">open</a> <a id="11799" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="11806" href="Ledger.Transaction.html#4253" class="Function">body</a><a id="11810" class="Symbol">;</a> <a id="11812" class="Keyword">open</a> <a id="11817" href="Ledger.Transaction.html#3971" class="Module">TxWitnesses</a> <a id="11829" href="Ledger.Transaction.html#4277" class="Function">wits</a><a id="11833" class="Symbol">;</a> <a id="11835" class="Keyword">open</a> <a id="11840" href="Ledger.PParams.html#1570" class="Module">PParams</a> <a id="11848" href="Ledger.Utxo.html#11404" class="Bound">pp</a>
    <a id="11855" href="Ledger.Utxo.html#11855" class="Function">collateralRange</a>  <a id="11872" class="Symbol">=</a> <a id="11874" href="Class.IsSet.html#959" class="Function">range</a>    <a id="11883" class="Symbol">((</a><a id="11885" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="11895" href="Ledger.Transaction.html#5075" class="Function">txOutHash</a> <a id="11905" href="Ledger.Utxo.html#11410" class="Bound">utxo</a><a id="11909" class="Symbol">)</a> <a id="11911" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="11913" href="Ledger.Transaction.html#3273" class="Function">collateral</a><a id="11923" class="Symbol">)</a>
    <a id="11929" href="Ledger.Utxo.html#11929" class="Function">bal</a>              <a id="11946" class="Symbol">=</a> <a id="11948" href="Ledger.Utxo.html#3554" class="Function">balance</a>  <a id="11957" class="Symbol">(</a><a id="11958" href="Ledger.Utxo.html#11410" class="Bound">utxo</a> <a id="11963" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="11965" href="Ledger.Transaction.html#3273" class="Function">collateral</a><a id="11975" class="Symbol">)</a>


<a id="11979" class="Keyword">module</a> <a id="11986" href="Ledger.Utxo.html#11986" class="Module">_</a> <a id="11988" class="Symbol">(</a><a id="11989" class="Keyword">let</a> <a id="11993" class="Keyword">open</a> <a id="11998" href="Ledger.Utxo.html#2705" class="Module">UTxOState</a><a id="12007" class="Symbol">;</a> <a id="12009" class="Keyword">open</a> <a id="12014" href="Ledger.Transaction.html#2677" class="Module">TxBody</a><a id="12020" class="Symbol">)</a> <a id="12022" class="Keyword">where</a>


  <a id="12032" href="Ledger.Utxo.html#12032" class="Function">depositRefunds</a> <a id="12047" class="Symbol">:</a> <a id="12049" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="12057" class="Symbol">→</a> <a id="12059" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="12069" class="Symbol">→</a> <a id="12071" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="12078" class="Symbol">→</a> <a id="12080" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12087" href="Ledger.Utxo.html#12032" class="Function">depositRefunds</a> <a id="12102" href="Ledger.Utxo.html#12102" class="Bound">pp</a> <a id="12105" href="Ledger.Utxo.html#12105" class="Bound">st</a> <a id="12108" href="Ledger.Utxo.html#12108" class="Bound">txb</a> <a id="12112" class="Symbol">=</a> <a id="12114" href="Prelude.html#3244" class="Function">negPart</a> <a id="12122" class="Symbol">(</a><a id="12123" href="Ledger.Utxo.html#9704" class="Function">depositsChange</a> <a id="12138" href="Ledger.Utxo.html#12102" class="Bound">pp</a> <a id="12141" href="Ledger.Utxo.html#12108" class="Bound">txb</a> <a id="12145" class="Symbol">(</a><a id="12146" href="Ledger.Utxo.html#12105" class="Bound">st</a> <a id="12149" class="Symbol">.</a><a id="12150" href="Ledger.Utxo.html#2813" class="Field">deposits</a><a id="12158" class="Symbol">))</a>

  <a id="12164" href="Ledger.Utxo.html#12164" class="Function">newDeposits</a> <a id="12176" class="Symbol">:</a> <a id="12178" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="12186" class="Symbol">→</a> <a id="12188" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="12198" class="Symbol">→</a> <a id="12200" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="12207" class="Symbol">→</a> <a id="12209" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12216" href="Ledger.Utxo.html#12164" class="Function">newDeposits</a> <a id="12228" href="Ledger.Utxo.html#12228" class="Bound">pp</a> <a id="12231" href="Ledger.Utxo.html#12231" class="Bound">st</a> <a id="12234" href="Ledger.Utxo.html#12234" class="Bound">txb</a> <a id="12238" class="Symbol">=</a> <a id="12240" href="Prelude.html#3167" class="Function">posPart</a> <a id="12248" class="Symbol">(</a><a id="12249" href="Ledger.Utxo.html#9704" class="Function">depositsChange</a> <a id="12264" href="Ledger.Utxo.html#12228" class="Bound">pp</a> <a id="12267" href="Ledger.Utxo.html#12234" class="Bound">txb</a> <a id="12271" class="Symbol">(</a><a id="12272" href="Ledger.Utxo.html#12231" class="Bound">st</a> <a id="12275" class="Symbol">.</a><a id="12276" href="Ledger.Utxo.html#2813" class="Field">deposits</a><a id="12284" class="Symbol">))</a>

  <a id="12290" href="Ledger.Utxo.html#12290" class="Function">consumed</a> <a id="12299" class="Symbol">:</a> <a id="12301" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="12309" class="Symbol">→</a> <a id="12311" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="12321" class="Symbol">→</a> <a id="12323" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="12330" class="Symbol">→</a> <a id="12332" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="12340" href="Ledger.Utxo.html#12290" class="Function">consumed</a> <a id="12349" href="Ledger.Utxo.html#12349" class="Bound">pp</a> <a id="12352" href="Ledger.Utxo.html#12352" class="Bound">st</a> <a id="12355" href="Ledger.Utxo.html#12355" class="Bound">txb</a>
    <a id="12363" class="Symbol">=</a>  <a id="12366" href="Ledger.Utxo.html#3554" class="Function">balance</a> <a id="12374" class="Symbol">(</a><a id="12375" href="Ledger.Utxo.html#12352" class="Bound">st</a> <a id="12378" class="Symbol">.</a><a id="12379" href="Ledger.Utxo.html#2769" class="Field">utxo</a> <a id="12384" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="12386" href="Ledger.Utxo.html#12355" class="Bound">txb</a> <a id="12390" class="Symbol">.</a><a id="12391" href="Ledger.Transaction.html#2713" class="Field">txins</a><a id="12396" class="Symbol">)</a>
    <a id="12402" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12405" href="Ledger.Utxo.html#12355" class="Bound">txb</a> <a id="12409" class="Symbol">.</a><a id="12410" href="Ledger.Transaction.html#2835" class="Field">mint</a>
    <a id="12419" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12422" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12429" class="Symbol">(</a><a id="12430" href="Ledger.Utxo.html#12032" class="Function">depositRefunds</a> <a id="12445" href="Ledger.Utxo.html#12349" class="Bound">pp</a> <a id="12448" href="Ledger.Utxo.html#12352" class="Bound">st</a> <a id="12451" href="Ledger.Utxo.html#12355" class="Bound">txb</a><a id="12454" class="Symbol">)</a>
    <a id="12460" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12463" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12470" class="Symbol">(</a><a id="12471" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="12479" class="Symbol">(</a><a id="12480" href="Ledger.Utxo.html#12355" class="Bound">txb</a> <a id="12484" class="Symbol">.</a><a id="12485" href="Ledger.Transaction.html#2945" class="Field">txwdrls</a><a id="12492" class="Symbol">))</a>

  <a id="12498" href="Ledger.Utxo.html#12498" class="Function">produced</a> <a id="12507" class="Symbol">:</a> <a id="12509" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="12517" class="Symbol">→</a> <a id="12519" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="12529" class="Symbol">→</a> <a id="12531" href="Ledger.Transaction.html#2677" class="Record">TxBody</a> <a id="12538" class="Symbol">→</a> <a id="12540" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="12548" href="Ledger.Utxo.html#12498" class="Function">produced</a> <a id="12557" href="Ledger.Utxo.html#12557" class="Bound">pp</a> <a id="12560" href="Ledger.Utxo.html#12560" class="Bound">st</a> <a id="12563" href="Ledger.Utxo.html#12563" class="Bound">txb</a> <a id="12567" class="Symbol">=</a> <a id="12569" href="Ledger.Utxo.html#3554" class="Function">balance</a> <a id="12577" class="Symbol">(</a><a id="12578" href="Ledger.Utxo.html#3483" class="Function">outs</a> <a id="12583" href="Ledger.Utxo.html#12563" class="Bound">txb</a><a id="12586" class="Symbol">)</a>
                     <a id="12609" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12611" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12618" class="Symbol">(</a><a id="12619" href="Ledger.Utxo.html#12563" class="Bound">txb</a> <a id="12623" class="Symbol">.</a><a id="12624" href="Ledger.Transaction.html#2807" class="Field">txfee</a><a id="12629" class="Symbol">)</a>
                     <a id="12652" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12654" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12661" class="Symbol">(</a><a id="12662" href="Ledger.Utxo.html#12164" class="Function">newDeposits</a> <a id="12674" href="Ledger.Utxo.html#12557" class="Bound">pp</a> <a id="12677" href="Ledger.Utxo.html#12560" class="Bound">st</a> <a id="12680" href="Ledger.Utxo.html#12563" class="Bound">txb</a><a id="12683" class="Symbol">)</a>
                     <a id="12706" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12708" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12715" class="Symbol">(</a><a id="12716" href="Ledger.Utxo.html#12563" class="Bound">txb</a> <a id="12720" class="Symbol">.</a><a id="12721" href="Ledger.Transaction.html#3049" class="Field">txdonation</a><a id="12731" class="Symbol">)</a>


<a id="12735" class="Keyword">open</a> <a id="12740" href="Ledger.PParams.html#1570" class="Module">PParams</a>

<a id="12749" class="Keyword">private</a> <a id="12757" class="Keyword">variable</a>
  <a id="12768" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="12770" class="Symbol">:</a> <a id="12772" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a>
  <a id="12782" href="Ledger.Utxo.html#12782" class="Generalizable">s</a> <a id="12784" href="Ledger.Utxo.html#12784" class="Generalizable">s&#39;</a> <a id="12787" class="Symbol">:</a> <a id="12789" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a>
  <a id="12801" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="12804" class="Symbol">:</a> <a id="12806" href="Ledger.Transaction.html#4221" class="Record">Tx</a>
  <a id="12811" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a> <a id="12816" class="Symbol">:</a> <a id="12818" href="Ledger.Transaction.html#2388" class="Function">UTxO</a>
  <a id="12825" href="Ledger.Utxo.html#12825" class="Generalizable">fees</a> <a id="12830" href="Ledger.Utxo.html#12830" class="Generalizable">donations</a> <a id="12840" class="Symbol">:</a> <a id="12842" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12849" href="Ledger.Utxo.html#12849" class="Generalizable">deposits</a> <a id="12858" class="Symbol">:</a> <a id="12860" href="Ledger.Certs.html#573" class="Function">Deposits</a>

<a id="12870" class="Keyword">open</a> <a id="12875" href="Ledger.Utxo.html#2353" class="Module">UTxOEnv</a>

<a id="12884" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="12889" href="Ledger.Utxo.html#12889" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="12904" class="Symbol">:</a> <a id="12906" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a> <a id="12914" class="Symbol">→</a> <a id="12916" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="12926" class="Symbol">→</a> <a id="12928" href="Ledger.Transaction.html#4221" class="Record">Tx</a> <a id="12931" class="Symbol">→</a> <a id="12933" href="Ledger.Utxo.html#2705" class="Record">UTxOState</a> <a id="12943" class="Symbol">→</a> <a id="12945" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="12950" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-Yes"></a><a id="12960" href="Ledger.Utxo.html#12960" class="InductiveConstructor">Scripts-Yes</a> <a id="12972" class="Symbol">:</a>
    <a id="12978" class="Keyword">let</a>  <a id="12983" href="Ledger.Utxo.html#12983" class="Bound">pp</a>         <a id="12994" class="Symbol">=</a> <a id="12996" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="12998" class="Symbol">.</a><a id="12999" href="Ledger.Utxo.html#2407" class="Field">pparams</a>


         <a id="13018" class="Keyword">open</a> <a id="13023" href="Ledger.Transaction.html#4221" class="Module">Tx</a> <a id="13026" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13029" class="Keyword">renaming</a> <a id="13038" class="Symbol">(</a><a id="13039" href="Ledger.Transaction.html#4253" class="Field">body</a> <a id="13044" class="Symbol">to</a> <a id="13047" class="Field">txb</a><a id="13050" class="Symbol">);</a> <a id="13053" class="Keyword">open</a> <a id="13058" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="13065" href="Ledger.Utxo.html#13047" class="Function">txb</a>


         <a id="13080" href="Ledger.Utxo.html#13080" class="Bound">sLst</a>       <a id="13091" class="Symbol">=</a> <a id="13093" href="Ledger.ScriptValidation.html#5858" class="Function">collectPhaseTwoScriptInputs</a> <a id="13121" href="Ledger.Utxo.html#12983" class="Bound">pp</a> <a id="13124" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13127" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a>
      <a id="13138" class="Keyword">in</a>
        <a id="13149" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="13151" href="Ledger.Utxo.html#4645" class="Datatype">ValidCertDeposits</a> <a id="13169" href="Ledger.Utxo.html#12983" class="Bound">pp</a> <a id="13172" href="Ledger.Utxo.html#12849" class="Generalizable">deposits</a> <a id="13181" href="Ledger.Transaction.html#2911" class="Function">txcerts</a>
        <a id="13197" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="13199" href="Ledger.ScriptValidation.html#6246" class="Function">evalScripts</a> <a id="13211" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13214" href="Ledger.Utxo.html#13080" class="Bound">sLst</a> <a id="13219" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13221" href="Ledger.Transaction.html#4306" class="Function">isValid</a>
        <a id="13237" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="13239" href="Ledger.Transaction.html#4306" class="Function">isValid</a> <a id="13247" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13249" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
          <a id="13264" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
          <a id="13307" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="13309" href="Ledger.Utxo.html#12889" class="Datatype Operator">⊢</a> <a id="13311" href="Ledger.Prelude.html#2308" class="Function Operator">⟦</a> <a id="13313" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a> <a id="13318" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13320" href="Ledger.Utxo.html#12825" class="Generalizable">fees</a> <a id="13325" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13327" href="Ledger.Utxo.html#12849" class="Generalizable">deposits</a> <a id="13336" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13338" href="Ledger.Utxo.html#12830" class="Generalizable">donations</a> <a id="13348" href="Ledger.Prelude.html#2308" class="Function Operator">⟧</a> <a id="13350" href="Ledger.Utxo.html#12889" class="Datatype Operator">⇀⦇</a> <a id="13353" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13356" href="Ledger.Utxo.html#12889" class="Datatype Operator">,UTXOS⦈</a> <a id="13364" href="Ledger.Prelude.html#2308" class="Function Operator">⟦</a> <a id="13366" class="Symbol">(</a><a id="13367" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a> <a id="13372" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="13374" href="Ledger.Transaction.html#2713" class="Function">txins</a> <a id="13380" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="13381" class="Symbol">)</a> <a id="13383" href="Axiom.Set.Map.html#6320" class="Function Operator">∪ˡ</a> <a id="13386" class="Symbol">(</a><a id="13387" href="Ledger.Utxo.html#3483" class="Function">outs</a> <a id="13392" href="Ledger.Utxo.html#13047" class="Function">txb</a><a id="13395" class="Symbol">)</a> <a id="13397" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13399" href="Ledger.Utxo.html#12825" class="Generalizable">fees</a> <a id="13404" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13406" href="Ledger.Transaction.html#2807" class="Function">txfee</a> <a id="13412" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13414" href="Ledger.Utxo.html#9297" class="Function">updateDeposits</a> <a id="13429" href="Ledger.Utxo.html#12983" class="Bound">pp</a> <a id="13432" href="Ledger.Utxo.html#13047" class="Function">txb</a> <a id="13436" href="Ledger.Utxo.html#12849" class="Generalizable">deposits</a> <a id="13445" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13447" href="Ledger.Utxo.html#12830" class="Generalizable">donations</a> <a id="13457" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13459" href="Ledger.Transaction.html#3049" class="Function">txdonation</a> <a id="13470" href="Ledger.Prelude.html#2308" class="Function Operator">⟧</a>
  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-No"></a><a id="13474" href="Ledger.Utxo.html#13474" class="InductiveConstructor">Scripts-No</a> <a id="13485" class="Symbol">:</a>
    <a id="13491" class="Keyword">let</a>  <a id="13496" href="Ledger.Utxo.html#13496" class="Bound">pp</a>         <a id="13507" class="Symbol">=</a> <a id="13509" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="13511" class="Symbol">.</a><a id="13512" href="Ledger.Utxo.html#2407" class="Field">pparams</a>


         <a id="13531" class="Keyword">open</a> <a id="13536" href="Ledger.Transaction.html#4221" class="Module">Tx</a> <a id="13539" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13542" class="Keyword">renaming</a> <a id="13551" class="Symbol">(</a><a id="13552" href="Ledger.Transaction.html#4253" class="Field">body</a> <a id="13557" class="Symbol">to</a> <a id="13560" class="Field">txb</a><a id="13563" class="Symbol">);</a> <a id="13566" class="Keyword">open</a> <a id="13571" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="13578" href="Ledger.Utxo.html#13560" class="Function">txb</a>


         <a id="13593" href="Ledger.Utxo.html#13593" class="Bound">sLst</a>       <a id="13604" class="Symbol">=</a> <a id="13606" href="Ledger.ScriptValidation.html#5858" class="Function">collectPhaseTwoScriptInputs</a> <a id="13634" href="Ledger.Utxo.html#13496" class="Bound">pp</a> <a id="13637" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13640" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a>
      <a id="13651" class="Keyword">in</a>
        <a id="13662" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="13664" href="Ledger.ScriptValidation.html#6246" class="Function">evalScripts</a> <a id="13676" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13679" href="Ledger.Utxo.html#13593" class="Bound">sLst</a> <a id="13684" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13686" href="Ledger.Transaction.html#4306" class="Function">isValid</a>
        <a id="13702" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="13704" href="Ledger.Transaction.html#4306" class="Function">isValid</a> <a id="13712" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13714" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
          <a id="13730" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
          <a id="13773" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="13775" href="Ledger.Utxo.html#12889" class="Datatype Operator">⊢</a> <a id="13777" href="Ledger.Prelude.html#2308" class="Function Operator">⟦</a> <a id="13779" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a> <a id="13784" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13786" href="Ledger.Utxo.html#12825" class="Generalizable">fees</a> <a id="13791" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13793" href="Ledger.Utxo.html#12849" class="Generalizable">deposits</a> <a id="13802" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13804" href="Ledger.Utxo.html#12830" class="Generalizable">donations</a> <a id="13814" href="Ledger.Prelude.html#2308" class="Function Operator">⟧</a> <a id="13816" href="Ledger.Utxo.html#12889" class="Datatype Operator">⇀⦇</a> <a id="13819" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="13822" href="Ledger.Utxo.html#12889" class="Datatype Operator">,UTXOS⦈</a> <a id="13830" href="Ledger.Prelude.html#2308" class="Function Operator">⟦</a> <a id="13832" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a> <a id="13837" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="13839" href="Ledger.Transaction.html#3273" class="Function">collateral</a> <a id="13850" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a> <a id="13852" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13854" href="Ledger.Utxo.html#12825" class="Generalizable">fees</a> <a id="13859" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13861" href="Ledger.Utxo.html#3643" class="Function">cbalance</a> <a id="13870" class="Symbol">(</a><a id="13871" href="Ledger.Utxo.html#12811" class="Generalizable">utxo</a> <a id="13876" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="13878" href="Ledger.Transaction.html#3273" class="Function">collateral</a><a id="13888" class="Symbol">)</a> <a id="13890" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13892" href="Ledger.Utxo.html#12849" class="Generalizable">deposits</a> <a id="13901" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13903" href="Ledger.Utxo.html#12830" class="Generalizable">donations</a> <a id="13913" href="Ledger.Prelude.html#2308" class="Function Operator">⟧</a>


<a id="13917" class="Keyword">unquoteDecl</a> <a id="Scripts-Yes-premises"></a><a id="13929" href="Ledger.Utxo.html#13929" class="Function">Scripts-Yes-premises</a> <a id="13950" class="Symbol">=</a> <a id="13952" href="Tactic.Premises.html#1544" class="Function">genPremises</a> <a id="13964" href="Ledger.Utxo.html#13929" class="Function">Scripts-Yes-premises</a> <a id="13985" class="Symbol">(</a><a id="13986" class="Keyword">quote</a> <a id="13992" href="Ledger.Utxo.html#12960" class="InductiveConstructor">Scripts-Yes</a><a id="14003" class="Symbol">)</a>
<a id="14005" class="Keyword">unquoteDecl</a> <a id="Scripts-No-premises"></a><a id="14017" href="Ledger.Utxo.html#14017" class="Function">Scripts-No-premises</a>  <a id="14038" class="Symbol">=</a> <a id="14040" href="Tactic.Premises.html#1544" class="Function">genPremises</a> <a id="14052" href="Ledger.Utxo.html#14017" class="Function">Scripts-No-premises</a>  <a id="14073" class="Symbol">(</a><a id="14074" class="Keyword">quote</a> <a id="14080" href="Ledger.Utxo.html#13474" class="InductiveConstructor">Scripts-No</a><a id="14090" class="Symbol">)</a>

<a id="14093" class="Keyword">data</a> <a id="14098" href="Ledger.Utxo.html#3350" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="14112" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO-inductive"></a><a id="14122" href="Ledger.Utxo.html#14122" class="InductiveConstructor">UTXO-inductive</a> <a id="14137" class="Symbol">:</a>
    <a id="14143" class="Keyword">let</a> <a id="14147" href="Ledger.Utxo.html#14147" class="Bound">pp</a>        <a id="14157" class="Symbol">=</a> <a id="14159" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="14161" class="Symbol">.</a><a id="14162" href="Ledger.Utxo.html#2407" class="Field">pparams</a>
        <a id="14178" href="Ledger.Utxo.html#14178" class="Bound">slot</a>      <a id="14188" class="Symbol">=</a> <a id="14190" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="14192" class="Symbol">.</a><a id="14193" href="Ledger.Utxo.html#2386" class="Field">slot</a>
        <a id="14206" href="Ledger.Utxo.html#14206" class="Bound">treasury</a>  <a id="14216" class="Symbol">=</a> <a id="14218" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="14220" class="Symbol">.</a><a id="14221" href="Ledger.Utxo.html#2431" class="Field">treasury</a>
        <a id="14238" href="Ledger.Utxo.html#14238" class="Bound">utxo</a>      <a id="14248" class="Symbol">=</a> <a id="14250" href="Ledger.Utxo.html#12782" class="Generalizable">s</a> <a id="14252" class="Symbol">.</a><a id="14253" href="Ledger.Utxo.html#2769" class="Field">UTxOState.utxo</a>


        <a id="14278" class="Keyword">open</a> <a id="14283" href="Ledger.Transaction.html#4221" class="Module">Tx</a> <a id="14286" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="14289" class="Keyword">renaming</a> <a id="14298" class="Symbol">(</a><a id="14299" href="Ledger.Transaction.html#4253" class="Field">body</a> <a id="14304" class="Symbol">to</a> <a id="14307" class="Field">txb</a><a id="14310" class="Symbol">);</a> <a id="14313" class="Keyword">open</a> <a id="14318" href="Ledger.Transaction.html#2677" class="Module">TxBody</a> <a id="14325" href="Ledger.Utxo.html#14307" class="Function">txb</a>


        <a id="14339" href="Ledger.Utxo.html#14339" class="Bound">txoutsʰ</a>   <a id="14349" class="Symbol">=</a> <a id="14351" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="14361" href="Ledger.Transaction.html#5075" class="Function">txOutHash</a> <a id="14371" href="Ledger.Transaction.html#2773" class="Function">txouts</a>
        <a id="14386" href="Ledger.Utxo.html#14386" class="Bound">overhead</a>  <a id="14396" class="Symbol">=</a> <a id="14398" class="Number">160</a>
    <a id="14406" class="Keyword">in</a>
    <a id="14413" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="14415" href="Ledger.Transaction.html#2713" class="Function">txins</a> <a id="14421" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14423" href="Class.HasEmptySet.html#287" class="Field">∅</a>                              <a id="14454" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14456" href="Ledger.Transaction.html#2713" class="Function">txins</a> <a id="14462" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="14464" href="Ledger.Transaction.html#2743" class="Function">refInputs</a> <a id="14474" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="14476" href="Class.IsSet.html#916" class="Function">dom</a> <a id="14480" href="Ledger.Utxo.html#14238" class="Bound">utxo</a>
    <a id="14489" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14491" href="Ledger.Transaction.html#2713" class="Function">txins</a> <a id="14497" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="14499" href="Ledger.Transaction.html#2743" class="Function">refInputs</a> <a id="14509" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14511" href="Class.HasEmptySet.html#287" class="Field">∅</a>                  <a id="14530" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14532" href="Ledger.Utxo.html#9855" class="Datatype">inInterval</a> <a id="14543" href="Ledger.Utxo.html#14178" class="Bound">slot</a> <a id="14548" href="Ledger.Transaction.html#2864" class="Function">txvldt</a>
    <a id="14559" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14561" href="Ledger.Utxo.html#11361" class="Function">feesOK</a> <a id="14568" href="Ledger.Utxo.html#14147" class="Bound">pp</a> <a id="14571" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="14574" href="Ledger.Utxo.html#14238" class="Bound">utxo</a>                      <a id="14600" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14602" href="Ledger.Utxo.html#12290" class="Function">consumed</a> <a id="14611" href="Ledger.Utxo.html#14147" class="Bound">pp</a> <a id="14614" href="Ledger.Utxo.html#12782" class="Generalizable">s</a> <a id="14616" href="Ledger.Utxo.html#14307" class="Function">txb</a> <a id="14620" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14622" href="Ledger.Utxo.html#12498" class="Function">produced</a> <a id="14631" href="Ledger.Utxo.html#14147" class="Bound">pp</a> <a id="14634" href="Ledger.Utxo.html#12782" class="Generalizable">s</a> <a id="14636" href="Ledger.Utxo.html#14307" class="Function">txb</a>
    <a id="14644" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14646" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="14651" href="Ledger.Transaction.html#2835" class="Function">mint</a> <a id="14656" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14658" class="Number">0</a>                          <a id="14685" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14687" href="Ledger.Transaction.html#3220" class="Function">txsize</a> <a id="14694" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14696" href="Ledger.PParams.html#1651" class="Field">maxTxSize</a> <a id="14706" href="Ledger.Utxo.html#14147" class="Bound">pp</a>
    <a id="14713" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14715" href="Ledger.Utxo.html#3709" class="Function">refScriptsSize</a> <a id="14730" href="Ledger.Utxo.html#14238" class="Bound">utxo</a> <a id="14735" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="14738" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14740" href="Ledger.Utxo.html#14147" class="Bound">pp</a> <a id="14743" class="Symbol">.</a><a id="14744" href="Ledger.PParams.html#2440" class="Field">maxRefScriptSizePerTx</a>
    <a id="14770" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14772" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14775" href="Ledger.Utxo.html#14775" class="Bound">(_</a> <a id="14778" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14780" href="Ledger.Utxo.html#14780" class="Bound">txout</a><a id="14785" href="Ledger.Utxo.html#14775" class="Bound">)</a> <a id="14787" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14789" href="Ledger.Prelude.html#2410" class="Function Operator">∣</a> <a id="14791" href="Ledger.Utxo.html#14339" class="Bound">txoutsʰ</a> <a id="14799" href="Ledger.Prelude.html#2410" class="Function Operator">∣</a> <a id="14801" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14811" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="14818" class="Symbol">((</a><a id="14820" href="Ledger.Utxo.html#14386" class="Bound">overhead</a> <a id="14829" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="14831" href="Ledger.Utxo.html#2226" class="Function">utxoEntrySize</a> <a id="14845" href="Ledger.Utxo.html#14780" class="Bound">txout</a><a id="14850" class="Symbol">)</a> <a id="14852" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="14854" href="Ledger.PParams.html#2306" class="Field">coinsPerUTxOByte</a> <a id="14871" href="Ledger.Utxo.html#14147" class="Bound">pp</a><a id="14873" class="Symbol">)</a> <a id="14875" href="Ledger.TokenAlgebra.html#1008" class="Function Operator">≤ᵗ</a> <a id="14878" href="Ledger.Transaction.html#5164" class="Function">getValueʰ</a> <a id="14888" href="Ledger.Utxo.html#14780" class="Bound">txout</a>
    <a id="14898" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14900" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14903" href="Ledger.Utxo.html#14903" class="Bound">(_</a> <a id="14906" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14908" href="Ledger.Utxo.html#14908" class="Bound">txout</a><a id="14913" href="Ledger.Utxo.html#14903" class="Bound">)</a> <a id="14915" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14917" href="Ledger.Prelude.html#2410" class="Function Operator">∣</a> <a id="14919" href="Ledger.Utxo.html#14339" class="Bound">txoutsʰ</a> <a id="14927" href="Ledger.Prelude.html#2410" class="Function Operator">∣</a> <a id="14929" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14939" href="Ledger.Abstract.html#664" class="Field">serSize</a> <a id="14947" class="Symbol">(</a><a id="14948" href="Ledger.Transaction.html#5164" class="Function">getValueʰ</a> <a id="14958" href="Ledger.Utxo.html#14908" class="Bound">txout</a><a id="14963" class="Symbol">)</a> <a id="14965" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14967" href="Ledger.PParams.html#1831" class="Field">maxValSize</a> <a id="14978" href="Ledger.Utxo.html#14147" class="Bound">pp</a>
    <a id="14985" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14987" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14990" href="Ledger.Utxo.html#14990" class="Bound">(</a><a id="14991" href="Ledger.Utxo.html#14991" class="Bound">a</a> <a id="14993" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14995" href="Ledger.Utxo.html#14990" class="Bound">_)</a> <a id="14998" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15000" href="Class.IsSet.html#959" class="Function">range</a> <a id="15006" href="Ledger.Utxo.html#14339" class="Bound">txoutsʰ</a> <a id="15014" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="15024" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="15032" class="Symbol">(</a><a id="15033" href="Function.Base.html#725" class="Function">const</a> <a id="15039" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="15040" class="Symbol">)</a> <a id="15042" class="Symbol">(λ</a> <a id="15045" href="Ledger.Utxo.html#15045" class="Bound">a</a> <a id="15047" class="Symbol">→</a> <a id="15049" href="Ledger.Utxo.html#15045" class="Bound">a</a> <a id="15051" class="Symbol">.</a><a id="15052" href="Ledger.Address.html#1314" class="Field">BootstrapAddr.attrsSize</a> <a id="15076" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="15078" class="Number">64</a><a id="15080" class="Symbol">)</a> <a id="15082" href="Ledger.Utxo.html#14991" class="Bound">a</a>
    <a id="15088" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15090" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15093" href="Ledger.Utxo.html#15093" class="Bound">(</a><a id="15094" href="Ledger.Utxo.html#15094" class="Bound">a</a> <a id="15096" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15098" href="Ledger.Utxo.html#15093" class="Bound">_)</a> <a id="15101" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15103" href="Class.IsSet.html#959" class="Function">range</a> <a id="15109" href="Ledger.Utxo.html#14339" class="Bound">txoutsʰ</a> <a id="15117" href="Class.IsSet.html#576" class="Function">]</a>  <a id="15120" href="Ledger.Address.html#2549" class="Function">netId</a> <a id="15126" href="Ledger.Utxo.html#15094" class="Bound">a</a>         <a id="15136" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15138" href="Ledger.Types.Epoch.html#2310" class="Function">NetworkId</a>
    <a id="15152" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15154" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15157" href="Ledger.Utxo.html#15157" class="Bound">a</a> <a id="15159" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15161" href="Class.IsSet.html#916" class="Function">dom</a> <a id="15165" href="Ledger.Transaction.html#2945" class="Function">txwdrls</a> <a id="15173" href="Class.IsSet.html#576" class="Function">]</a>          <a id="15184" href="Ledger.Address.html#1543" class="Field">NetworkIdOf</a> <a id="15196" href="Ledger.Utxo.html#15157" class="Bound">a</a> <a id="15198" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15200" href="Ledger.Types.Epoch.html#2310" class="Function">NetworkId</a>
    <a id="15214" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15216" href="Ledger.Transaction.html#3149" class="Function">txNetworkId</a>  <a id="15229" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15231" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15236" href="Ledger.Types.Epoch.html#2310" class="Function">NetworkId</a>
    <a id="15250" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15252" href="Ledger.Transaction.html#3186" class="Function">curTreasury</a>  <a id="15265" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15267" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15272" href="Ledger.Utxo.html#14206" class="Bound">treasury</a>
    <a id="15285" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15287" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="15289" href="Ledger.Utxo.html#12889" class="Datatype Operator">⊢</a> <a id="15291" href="Ledger.Utxo.html#12782" class="Generalizable">s</a> <a id="15293" href="Ledger.Utxo.html#12889" class="Datatype Operator">⇀⦇</a> <a id="15296" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="15299" href="Ledger.Utxo.html#12889" class="Datatype Operator">,UTXOS⦈</a> <a id="15307" href="Ledger.Utxo.html#12784" class="Generalizable">s&#39;</a>
      <a id="15316" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="15355" href="Ledger.Utxo.html#12768" class="Generalizable">Γ</a> <a id="15357" href="Ledger.Utxo.html#3350" class="Datatype Operator">⊢</a> <a id="15359" href="Ledger.Utxo.html#12782" class="Generalizable">s</a> <a id="15361" href="Ledger.Utxo.html#3350" class="Datatype Operator">⇀⦇</a> <a id="15364" href="Ledger.Utxo.html#12801" class="Generalizable">tx</a> <a id="15367" href="Ledger.Utxo.html#3350" class="Datatype Operator">,UTXO⦈</a> <a id="15374" href="Ledger.Utxo.html#12784" class="Generalizable">s&#39;</a>


<a id="15379" class="Keyword">pattern</a> <a id="UTXO-inductive⋯"></a><a id="15387" href="Ledger.Utxo.html#15387" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="15403" href="Ledger.Utxo.html#15485" class="Bound">tx</a> <a id="15406" href="Ledger.Utxo.html#15468" class="Bound">Γ</a> <a id="15408" href="Ledger.Utxo.html#15476" class="Bound">s</a> <a id="15410" href="Ledger.Utxo.html#15490" class="Bound">x</a> <a id="15412" href="Ledger.Utxo.html#15494" class="Bound">y</a> <a id="15414" href="Ledger.Utxo.html#15498" class="Bound">z</a> <a id="15416" href="Ledger.Utxo.html#15502" class="Bound">w</a> <a id="15418" href="Ledger.Utxo.html#15506" class="Bound">k</a> <a id="15420" href="Ledger.Utxo.html#15510" class="Bound">l</a> <a id="15422" href="Ledger.Utxo.html#15514" class="Bound">m</a> <a id="15424" href="Ledger.Utxo.html#15518" class="Bound">v</a> <a id="15426" href="Ledger.Utxo.html#15522" class="Bound">j</a> <a id="15428" href="Ledger.Utxo.html#15526" class="Bound">n</a> <a id="15430" href="Ledger.Utxo.html#15530" class="Bound">o</a> <a id="15432" href="Ledger.Utxo.html#15534" class="Bound">p</a> <a id="15434" href="Ledger.Utxo.html#15538" class="Bound">q</a> <a id="15436" href="Ledger.Utxo.html#15542" class="Bound">r</a> <a id="15438" href="Ledger.Utxo.html#15546" class="Bound">t</a> <a id="15440" href="Ledger.Utxo.html#15550" class="Bound">u</a> <a id="15442" href="Ledger.Utxo.html#15554" class="Bound">h</a>
  <a id="15446" class="Symbol">=</a> <a id="15448" href="Ledger.Utxo.html#14122" class="InductiveConstructor">UTXO-inductive</a> <a id="15463" class="Symbol">{</a><a id="15464" class="Argument">Γ</a> <a id="15466" class="Symbol">=</a> <a id="15468" href="Ledger.Utxo.html#15468" class="Bound">Γ</a><a id="15469" class="Symbol">}</a> <a id="15471" class="Symbol">{</a><a id="15472" class="Argument">s</a> <a id="15474" class="Symbol">=</a> <a id="15476" href="Ledger.Utxo.html#15476" class="Bound">s</a><a id="15477" class="Symbol">}</a> <a id="15479" class="Symbol">{</a><a id="15480" class="Argument">tx</a> <a id="15483" class="Symbol">=</a> <a id="15485" href="Ledger.Utxo.html#15485" class="Bound">tx</a><a id="15487" class="Symbol">}</a> <a id="15489" class="Symbol">(</a><a id="15490" href="Ledger.Utxo.html#15490" class="Bound">x</a> <a id="15492" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15494" href="Ledger.Utxo.html#15494" class="Bound">y</a> <a id="15496" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15498" href="Ledger.Utxo.html#15498" class="Bound">z</a> <a id="15500" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15502" href="Ledger.Utxo.html#15502" class="Bound">w</a> <a id="15504" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15506" href="Ledger.Utxo.html#15506" class="Bound">k</a> <a id="15508" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15510" href="Ledger.Utxo.html#15510" class="Bound">l</a> <a id="15512" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15514" href="Ledger.Utxo.html#15514" class="Bound">m</a> <a id="15516" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15518" href="Ledger.Utxo.html#15518" class="Bound">v</a> <a id="15520" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15522" href="Ledger.Utxo.html#15522" class="Bound">j</a> <a id="15524" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15526" href="Ledger.Utxo.html#15526" class="Bound">n</a> <a id="15528" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15530" href="Ledger.Utxo.html#15530" class="Bound">o</a> <a id="15532" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15534" href="Ledger.Utxo.html#15534" class="Bound">p</a> <a id="15536" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15538" href="Ledger.Utxo.html#15538" class="Bound">q</a> <a id="15540" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15542" href="Ledger.Utxo.html#15542" class="Bound">r</a> <a id="15544" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15546" href="Ledger.Utxo.html#15546" class="Bound">t</a> <a id="15548" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15550" href="Ledger.Utxo.html#15550" class="Bound">u</a> <a id="15552" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15554" href="Ledger.Utxo.html#15554" class="Bound">h</a><a id="15555" class="Symbol">)</a>
<a id="15557" class="Keyword">unquoteDecl</a> <a id="UTXO-premises"></a><a id="15569" href="Ledger.Utxo.html#15569" class="Function">UTXO-premises</a> <a id="15583" class="Symbol">=</a> <a id="15585" href="Tactic.Premises.html#1544" class="Function">genPremises</a> <a id="15597" href="Ledger.Utxo.html#15569" class="Function">UTXO-premises</a> <a id="15611" class="Symbol">(</a><a id="15612" class="Keyword">quote</a> <a id="15618" href="Ledger.Utxo.html#14122" class="InductiveConstructor">UTXO-inductive</a><a id="15632" class="Symbol">)</a>

</pre></body></html>