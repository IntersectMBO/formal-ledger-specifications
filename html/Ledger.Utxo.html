<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Utxo</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.html" class="Module">Algebra</a>              <a id="59" class="Keyword">using</a> <a id="65" class="Symbol">(</a><a id="66" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a><a id="83" class="Symbol">)</a>
<a id="85" class="Keyword">open</a> <a id="90" class="Keyword">import</a> <a id="97" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>  <a id="118" class="Keyword">using</a> <a id="124" class="Symbol">(</a><a id="125" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a><a id="135" class="Symbol">)</a>
<a id="137" class="Keyword">import</a> <a id="144" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="155" class="Symbol">as</a> <a id="158" class="Module">M</a>
<a id="160" class="Keyword">import</a> <a id="167" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="195" class="Symbol">as</a> <a id="198" class="Module">Sum</a>

<a id="203" class="Keyword">import</a> <a id="210" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="223" class="Symbol">as</a> <a id="226" class="Module">ℤ</a>
<a id="228" class="Keyword">import</a> <a id="235" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="249" class="Symbol">as</a> <a id="252" class="Module">ℚ</a>

<a id="255" class="Keyword">open</a> <a id="260" class="Keyword">import</a> <a id="267" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>

<a id="375" class="Keyword">module</a> <a id="382" href="Ledger.Utxo.html" class="Module">Ledger.Utxo</a>
  <a id="396" class="Symbol">(</a><a id="397" href="Ledger.Utxo.html#397" class="Bound">txs</a> <a id="401" class="Symbol">:</a> <a id="403" class="Symbol">_)</a> <a id="406" class="Symbol">(</a><a id="407" class="Keyword">open</a> <a id="412" href="Ledger.Transaction.html#867" class="Module">TransactionStructure</a> <a id="433" href="Ledger.Utxo.html#397" class="Bound">txs</a><a id="436" class="Symbol">)</a>
  <a id="440" class="Symbol">(</a><a id="441" href="Ledger.Utxo.html#441" class="Bound">abs</a> <a id="445" class="Symbol">:</a> <a id="447" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a> <a id="465" href="Ledger.Utxo.html#397" class="Bound">txs</a><a id="468" class="Symbol">)</a> <a id="470" class="Symbol">(</a><a id="471" class="Keyword">open</a> <a id="476" href="Ledger.Abstract.html#578" class="Module">AbstractFunctions</a> <a id="494" href="Ledger.Utxo.html#441" class="Bound">abs</a><a id="497" class="Symbol">)</a>
  <a id="501" class="Keyword">where</a>

<a id="508" class="Keyword">open</a> <a id="513" class="Keyword">import</a> <a id="520" href="Ledger.ScriptValidation.html" class="Module">Ledger.ScriptValidation</a> <a id="544" href="Ledger.Utxo.html#397" class="Bound">txs</a> <a id="548" href="Ledger.Utxo.html#441" class="Bound">abs</a>
<a id="552" class="Keyword">open</a> <a id="557" class="Keyword">import</a> <a id="564" href="Ledger.Fees.html" class="Module">Ledger.Fees</a> <a id="576" href="Ledger.Utxo.html#397" class="Bound">txs</a> <a id="580" class="Keyword">using</a> <a id="586" class="Symbol">(</a><a id="587" href="Ledger.Fees.html#677" class="Function">scriptsCost</a><a id="598" class="Symbol">)</a>
<a id="600" class="Keyword">open</a> <a id="605" class="Keyword">import</a> <a id="612" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="625" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>

<a id="639" class="Keyword">instance</a>
  <a id="650" href="Ledger.Utxo.html#650" class="Function">_</a> <a id="652" class="Symbol">=</a> <a id="654" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a>


<a id="isTwoPhaseScriptAddress"></a><a id="667" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="691" class="Symbol">:</a> <a id="693" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="696" class="Symbol">→</a> <a id="698" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="703" class="Symbol">→</a> <a id="705" href="Ledger.Address.html#2324" class="Function">Addr</a> <a id="710" class="Symbol">→</a> <a id="712" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="717" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="741" href="Ledger.Utxo.html#741" class="Bound">tx</a> <a id="744" href="Ledger.Utxo.html#744" class="Bound">utxo</a> <a id="749" href="Ledger.Utxo.html#749" class="Bound">a</a> <a id="751" class="Symbol">=</a>
  <a id="755" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="758" href="Ledger.Address.html#2607" class="Function">isScriptAddr</a> <a id="771" href="Ledger.Utxo.html#749" class="Bound">a</a> <a id="773" href="Class.ToBool.html#389" class="Function Operator">then</a>
    <a id="782" class="Symbol">(λ</a> <a id="785" class="Symbol">{</a><a id="786" href="Ledger.Utxo.html#786" class="Bound">p</a><a id="787" class="Symbol">}</a> <a id="789" class="Symbol">→</a> <a id="791" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="794" href="Ledger.Transaction.html#5379" class="Function">lookupScriptHash</a> <a id="811" class="Symbol">(</a><a id="812" href="Ledger.Address.html#3726" class="Function">getScriptHash</a> <a id="826" href="Ledger.Utxo.html#749" class="Bound">a</a> <a id="828" href="Ledger.Utxo.html#786" class="Bound">p</a><a id="829" class="Symbol">)</a> <a id="831" href="Ledger.Utxo.html#741" class="Bound">tx</a> <a id="834" href="Ledger.Utxo.html#744" class="Bound">utxo</a>
                 <a id="856" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="861" class="Symbol">(λ</a> <a id="864" class="Symbol">{</a><a id="865" href="Ledger.Utxo.html#865" class="Bound">s</a><a id="866" class="Symbol">}</a> <a id="868" class="Symbol">→</a> <a id="870" href="Ledger.Transaction.html#5619" class="Function">isP2Script</a> <a id="881" href="Ledger.Utxo.html#865" class="Bound">s</a><a id="882" class="Symbol">)</a>
                 <a id="901" href="Class.ToBool.html#389" class="Function Operator">else</a> <a id="906" href="Data.Empty.html#914" class="Function">⊥</a><a id="907" class="Symbol">)</a>
  <a id="911" href="Class.ToBool.html#389" class="Function Operator">else</a>
    <a id="920" href="Data.Empty.html#914" class="Function">⊥</a>


<a id="isTwoPhaseScriptAddress?"></a><a id="924" href="Ledger.Utxo.html#924" class="Function">isTwoPhaseScriptAddress?</a> <a id="949" class="Symbol">:</a> <a id="951" class="Symbol">∀</a> <a id="953" class="Symbol">{</a><a id="954" href="Ledger.Utxo.html#954" class="Bound">tx</a> <a id="957" href="Ledger.Utxo.html#957" class="Bound">utxo</a> <a id="962" href="Ledger.Utxo.html#962" class="Bound">a</a><a id="963" class="Symbol">}</a> <a id="965" class="Symbol">→</a> <a id="967" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="991" href="Ledger.Utxo.html#954" class="Bound">tx</a> <a id="994" href="Ledger.Utxo.html#957" class="Bound">utxo</a> <a id="999" href="Ledger.Utxo.html#962" class="Bound">a</a> <a id="1001" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
<a id="1003" href="Ledger.Utxo.html#924" class="Function">isTwoPhaseScriptAddress?</a> <a id="1028" class="Symbol">{</a><a id="1029" href="Ledger.Utxo.html#1029" class="Bound">tx</a><a id="1031" class="Symbol">}</a> <a id="1033" class="Symbol">{</a><a id="1034" href="Ledger.Utxo.html#1034" class="Bound">utxo</a><a id="1038" class="Symbol">}</a> <a id="1040" class="Symbol">{</a><a id="1041" href="Ledger.Utxo.html#1041" class="Bound">a</a><a id="1042" class="Symbol">}</a> <a id="1044" class="Symbol">.</a><a id="1045" href="Class.Decidable.Core.html#264" class="Field">dec</a>
  <a id="1051" class="Keyword">with</a> <a id="1056" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1063" class="Symbol">(</a><a id="1064" href="Ledger.Address.html#2607" class="Function">isScriptAddr</a> <a id="1077" href="Ledger.Utxo.html#1041" class="Bound">a</a><a id="1078" class="Symbol">)</a>
<a id="1080" class="Symbol">...</a> <a id="1084" class="Symbol">|</a> <a id="1086" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1091" class="Symbol">_</a> <a id="1093" class="Symbol">=</a> <a id="1095" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1098" class="Symbol">λ</a> <a id="1100" class="Symbol">()</a>
<a id="1103" class="Symbol">...</a> <a id="1107" class="Symbol">|</a> <a id="1109" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1114" href="Ledger.Utxo.html#1114" class="Bound">p</a>
  <a id="1118" class="Keyword">with</a> <a id="1123" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1130" class="Symbol">(</a><a id="1131" href="Ledger.Transaction.html#5379" class="Function">lookupScriptHash</a> <a id="1148" class="Symbol">(</a><a id="1149" href="Ledger.Address.html#3726" class="Function">getScriptHash</a> <a id="1163" class="Bound">a</a> <a id="1165" href="Ledger.Utxo.html#1114" class="Bound">p</a><a id="1166" class="Symbol">)</a> <a id="1168" class="Bound">tx</a> <a id="1171" class="Bound">utxo</a><a id="1175" class="Symbol">)</a>
<a id="1177" class="Symbol">...</a> <a id="1181" class="Symbol">|</a> <a id="1183" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1188" class="Symbol">_</a> <a id="1190" class="Symbol">=</a> <a id="1192" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1195" class="Symbol">λ</a> <a id="1197" class="Symbol">()</a>
<a id="1200" class="Symbol">...</a> <a id="1204" class="Symbol">|</a> <a id="1206" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1211" href="Ledger.Utxo.html#1211" class="Bound">s</a> <a id="1213" class="Symbol">=</a> <a id="1215" href="Ledger.Transaction.html#5685" class="Function">isP2Script?</a> <a id="1227" class="Symbol">{</a><a id="1228" href="Ledger.Utxo.html#1211" class="Bound">s</a><a id="1229" class="Symbol">}</a> <a id="1231" class="Symbol">.</a><a id="1232" href="Class.Decidable.Core.html#264" class="Field">dec</a>

<a id="1237" class="Keyword">record</a> <a id="isTwoPhaseScriptAddress′"></a><a id="1244" href="Ledger.Utxo.html#1244" class="Record">isTwoPhaseScriptAddress′</a> <a id="1269" class="Symbol">(</a><a id="1270" href="Ledger.Utxo.html#1270" class="Bound">tx</a> <a id="1273" class="Symbol">:</a> <a id="1275" href="Ledger.Transaction.html#4234" class="Record">Tx</a><a id="1277" class="Symbol">)</a> <a id="1279" class="Symbol">(</a><a id="1280" href="Ledger.Utxo.html#1280" class="Bound">utxo</a> <a id="1285" class="Symbol">:</a> <a id="1287" href="Ledger.Transaction.html#2402" class="Function">UTxO</a><a id="1291" class="Symbol">)</a> <a id="1293" class="Symbol">(</a><a id="1294" href="Ledger.Utxo.html#1294" class="Bound">a</a> <a id="1296" class="Symbol">:</a> <a id="1298" href="Ledger.Address.html#2324" class="Function">Addr</a><a id="1302" class="Symbol">)</a> <a id="1304" class="Symbol">:</a> <a id="1306" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1311" class="Keyword">where</a>
  <a id="1319" class="Keyword">constructor</a> <a id="wrap"></a><a id="1331" href="Ledger.Utxo.html#1331" class="InductiveConstructor">wrap</a>
  <a id="1338" class="Keyword">field</a> <a id="isTwoPhaseScriptAddress′.unwrap"></a><a id="1344" href="Ledger.Utxo.html#1344" class="Field">unwrap</a> <a id="1351" class="Symbol">:</a> <a id="1353" href="Ledger.Utxo.html#667" class="Function">isTwoPhaseScriptAddress</a> <a id="1377" href="Ledger.Utxo.html#1270" class="Bound">tx</a> <a id="1380" href="Ledger.Utxo.html#1280" class="Bound">utxo</a> <a id="1385" href="Ledger.Utxo.html#1294" class="Bound">a</a>

<a id="1388" class="Keyword">instance</a>
  <a id="isTwoPhaseScriptAddress′?"></a><a id="1399" href="Ledger.Utxo.html#1399" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1425" class="Symbol">:</a> <a id="1427" class="Symbol">∀</a> <a id="1429" class="Symbol">{</a><a id="1430" href="Ledger.Utxo.html#1430" class="Bound">tx</a> <a id="1433" href="Ledger.Utxo.html#1433" class="Bound">utxo</a> <a id="1438" href="Ledger.Utxo.html#1438" class="Bound">a</a><a id="1439" class="Symbol">}</a> <a id="1441" class="Symbol">→</a> <a id="1443" href="Ledger.Utxo.html#1244" class="Record">isTwoPhaseScriptAddress′</a> <a id="1468" href="Ledger.Utxo.html#1430" class="Bound">tx</a> <a id="1471" href="Ledger.Utxo.html#1433" class="Bound">utxo</a> <a id="1476" href="Ledger.Utxo.html#1438" class="Bound">a</a> <a id="1478" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="1482" href="Ledger.Utxo.html#1399" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1508" class="Symbol">{</a><a id="1509" href="Ledger.Utxo.html#1509" class="Bound">tx</a><a id="1511" class="Symbol">}</a> <a id="1513" class="Symbol">{</a><a id="1514" href="Ledger.Utxo.html#1514" class="Bound">utxo</a><a id="1518" class="Symbol">}</a> <a id="1520" class="Symbol">{</a><a id="1521" href="Ledger.Utxo.html#1521" class="Bound">a</a><a id="1522" class="Symbol">}</a> <a id="1524" class="Symbol">=</a> <a id="1526" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">map′</a> <a id="1534" href="Ledger.Utxo.html#1331" class="InductiveConstructor">wrap</a> <a id="1539" href="Ledger.Utxo.html#1344" class="Field">unwrap</a> <a id="1546" class="Symbol">(</a><a id="1547" href="Ledger.Utxo.html#924" class="Function">isTwoPhaseScriptAddress?</a> <a id="1572" class="Symbol">{</a><a id="1573" href="Ledger.Utxo.html#1509" class="Bound">tx</a><a id="1575" class="Symbol">}</a> <a id="1577" class="Symbol">{</a><a id="1578" href="Ledger.Utxo.html#1514" class="Bound">utxo</a><a id="1582" class="Symbol">}</a> <a id="1584" class="Symbol">{</a><a id="1585" href="Ledger.Utxo.html#1521" class="Bound">a</a><a id="1586" class="Symbol">}</a> <a id="1588" class="Symbol">.</a><a id="1589" href="Class.Decidable.Core.html#264" class="Field">dec</a><a id="1592" class="Symbol">))</a>
    <a id="1599" class="Keyword">where</a> <a id="1605" class="Keyword">open</a> <a id="1610" href="Ledger.Utxo.html#1244" class="Module">isTwoPhaseScriptAddress′</a>


<a id="1637" class="Keyword">opaque</a>


  <a id="getDataHashes"></a><a id="1648" href="Ledger.Utxo.html#1648" class="Function">getDataHashes</a> <a id="1662" class="Symbol">:</a> <a id="1664" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1666" href="Ledger.Transaction.html#2334" class="Function">TxOut</a> <a id="1672" class="Symbol">→</a> <a id="1674" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1676" href="Ledger.Script.html#1719" class="Function">DataHash</a>
  <a id="1687" href="Ledger.Utxo.html#1648" class="Function">getDataHashes</a> <a id="1701" href="Ledger.Utxo.html#1701" class="Bound">txo</a> <a id="1705" class="Symbol">=</a> <a id="1707" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1718" href="Data.Sum.html#870" class="Function">isInj₂</a> <a id="1725" class="Symbol">(</a><a id="1726" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1737" class="Symbol">(</a><a id="1738" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1744" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1746" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1752" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1754" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="1759" class="Symbol">)</a> <a id="1761" href="Ledger.Utxo.html#1701" class="Bound">txo</a><a id="1764" class="Symbol">)</a>

  <a id="getInputHashes"></a><a id="1769" href="Ledger.Utxo.html#1769" class="Function">getInputHashes</a> <a id="1784" class="Symbol">:</a> <a id="1786" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="1789" class="Symbol">→</a> <a id="1791" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="1796" class="Symbol">→</a> <a id="1798" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1800" href="Ledger.Script.html#1719" class="Function">DataHash</a>
  <a id="1811" href="Ledger.Utxo.html#1769" class="Function">getInputHashes</a> <a id="1826" href="Ledger.Utxo.html#1826" class="Bound">tx</a> <a id="1829" href="Ledger.Utxo.html#1829" class="Bound">utxo</a> <a id="1834" class="Symbol">=</a> <a id="1836" href="Ledger.Utxo.html#1648" class="Function">getDataHashes</a>
    <a id="1854" class="Symbol">(</a><a id="1855" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="1863" class="Symbol">(λ</a> <a id="1866" class="Symbol">(</a><a id="1867" href="Ledger.Utxo.html#1867" class="Bound">a</a> <a id="1869" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1871" class="Symbol">_</a> <a id="1873" class="Symbol">)</a> <a id="1875" class="Symbol">→</a> <a id="1877" href="Ledger.Utxo.html#1244" class="Record">isTwoPhaseScriptAddress′</a> <a id="1902" href="Ledger.Utxo.html#1826" class="Bound">tx</a> <a id="1905" href="Ledger.Utxo.html#1829" class="Bound">utxo</a> <a id="1910" href="Ledger.Utxo.html#1867" class="Bound">a</a><a id="1911" class="Symbol">)</a>
             <a id="1926" class="Symbol">(</a><a id="1927" href="Class.IsSet.html#959" class="Function">range</a> <a id="1933" class="Symbol">(</a><a id="1934" href="Ledger.Utxo.html#1829" class="Bound">utxo</a> <a id="1939" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="1941" href="Ledger.Transaction.html#2727" class="Function">txins</a><a id="1946" class="Symbol">)))</a>
    <a id="1954" class="Keyword">where</a> <a id="1960" class="Keyword">open</a> <a id="1965" href="Ledger.Transaction.html#4234" class="Module">Tx</a><a id="1967" class="Symbol">;</a> <a id="1969" class="Keyword">open</a> <a id="1974" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="1981" class="Symbol">(</a><a id="1982" href="Ledger.Utxo.html#1826" class="Bound">tx</a> <a id="1985" class="Symbol">.</a><a id="1986" href="Ledger.Transaction.html#4266" class="Field">body</a><a id="1990" class="Symbol">)</a>

<a id="totExUnits"></a><a id="1993" href="Ledger.Utxo.html#1993" class="Function">totExUnits</a> <a id="2004" class="Symbol">:</a> <a id="2006" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="2009" class="Symbol">→</a> <a id="2011" href="Ledger.Script.html#1014" class="Function">ExUnits</a>
<a id="2019" href="Ledger.Utxo.html#1993" class="Function">totExUnits</a> <a id="2030" href="Ledger.Utxo.html#2030" class="Bound">tx</a> <a id="2033" class="Symbol">=</a> <a id="2035" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="2038" href="Ledger.Utxo.html#2038" class="Bound">(_</a> <a id="2041" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2043" href="Ledger.Utxo.html#2043" class="Bound">eu</a><a id="2045" href="Ledger.Utxo.html#2038" class="Bound">)</a> <a id="2047" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="2049" href="Ledger.Utxo.html#2030" class="Bound">tx</a> <a id="2052" class="Symbol">.</a><a id="2053" href="Ledger.Transaction.html#4290" class="Field">wits</a> <a id="2058" class="Symbol">.</a><a id="2059" href="Ledger.Transaction.html#4113" class="Field">txrdmrs</a> <a id="2067" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="2069" href="Ledger.Utxo.html#2043" class="Bound">eu</a>
  <a id="2074" class="Keyword">where</a> <a id="2080" class="Keyword">open</a> <a id="2085" href="Ledger.Transaction.html#4234" class="Module">Tx</a><a id="2087" class="Symbol">;</a> <a id="2089" class="Keyword">open</a> <a id="2094" href="Ledger.Transaction.html#3984" class="Module">TxWitnesses</a>


<a id="2108" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="2156" href="Ledger.Utxo.html#2156" class="Function">utxoEntrySizeWithoutVal</a> <a id="2180" class="Symbol">:</a> <a id="2182" href="Ledger.TokenAlgebra.html#404" class="Function">MemoryEstimate</a>
<a id="2197" href="Ledger.Utxo.html#2156" class="Function">utxoEntrySizeWithoutVal</a> <a id="2221" class="Symbol">=</a> <a id="2223" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="2226" href="Ledger.Utxo.html#2226" class="Function">utxoEntrySize</a> <a id="2240" class="Symbol">:</a> <a id="2242" href="Ledger.Transaction.html#4514" class="Function">TxOutʰ</a> <a id="2249" class="Symbol">→</a> <a id="2251" href="Ledger.TokenAlgebra.html#404" class="Function">MemoryEstimate</a>
<a id="2266" href="Ledger.Utxo.html#2226" class="Function">utxoEntrySize</a> <a id="2280" href="Ledger.Utxo.html#2280" class="Bound">o</a> <a id="2282" class="Symbol">=</a> <a id="2284" href="Ledger.Utxo.html#2156" class="Function">utxoEntrySizeWithoutVal</a> <a id="2308" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2310" href="Ledger.TokenAlgebra.html#953" class="Function">size</a> <a id="2315" class="Symbol">(</a><a id="2316" href="Ledger.Transaction.html#4674" class="Function">getValueʰ</a> <a id="2326" href="Ledger.Utxo.html#2280" class="Bound">o</a><a id="2327" class="Symbol">)</a>


<a id="2331" class="Keyword">open</a> <a id="2336" href="Ledger.PParams.html#1570" class="Module">PParams</a>


<a id="2346" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="2353" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a> <a id="2361" class="Symbol">:</a> <a id="2363" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2368" class="Keyword">where</a>
  <a id="2376" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="2386" href="Ledger.Utxo.html#2386" class="Field">slot</a>      <a id="2396" class="Symbol">:</a> <a id="2398" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="2407" href="Ledger.Utxo.html#2407" class="Field">pparams</a>   <a id="2417" class="Symbol">:</a> <a id="2419" href="Ledger.PParams.html#1570" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="2431" href="Ledger.Utxo.html#2431" class="Field">treasury</a>  <a id="2441" class="Symbol">:</a> <a id="2443" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2451" class="Keyword">instance</a>
  <a id="HasPParams-UTxOEnv"></a><a id="2462" href="Ledger.Utxo.html#2462" class="Function">HasPParams-UTxOEnv</a> <a id="2481" class="Symbol">:</a> <a id="2483" href="Ledger.PParams.html#3373" class="Record">HasPParams</a> <a id="2494" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a>
  <a id="2504" href="Ledger.Utxo.html#2462" class="Function">HasPParams-UTxOEnv</a> <a id="2523" class="Symbol">.</a><a id="2524" href="Ledger.PParams.html#3424" class="Field">PParamsOf</a> <a id="2534" class="Symbol">=</a> <a id="2536" href="Ledger.Utxo.html#2407" class="Field">UTxOEnv.pparams</a>


<a id="2554" class="Keyword">record</a> <a id="UTxOState"></a><a id="2561" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="2571" class="Symbol">:</a> <a id="2573" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2578" class="Keyword">where</a>


  <a id="2588" class="Keyword">constructor</a> <a id="⟦_,_,_,_⟧ᵘ"></a><a id="2600" href="Ledger.Utxo.html#2600" class="InductiveConstructor Operator">⟦_,_,_,_⟧ᵘ</a>


  <a id="2615" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="2625" href="Ledger.Utxo.html#2625" class="Field">utxo</a>       <a id="2636" class="Symbol">:</a> <a id="2638" href="Ledger.Transaction.html#2402" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="2647" href="Ledger.Utxo.html#2647" class="Field">fees</a>       <a id="2658" class="Symbol">:</a> <a id="2660" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="UTxOState.deposits"></a><a id="2669" href="Ledger.Utxo.html#2669" class="Field">deposits</a>   <a id="2680" class="Symbol">:</a> <a id="2682" href="Ledger.Certs.html#573" class="Function">Deposits</a>
    <a id="UTxOState.donations"></a><a id="2695" href="Ledger.Utxo.html#2695" class="Field">donations</a>  <a id="2706" class="Symbol">:</a> <a id="2708" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2716" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="2723" href="Ledger.Utxo.html#2723" class="Record">HasUTxOState</a> <a id="2736" class="Symbol">{</a><a id="2737" href="Ledger.Utxo.html#2737" class="Bound">a</a><a id="2738" class="Symbol">}</a> <a id="2740" class="Symbol">(</a><a id="2741" href="Ledger.Utxo.html#2741" class="Bound">A</a> <a id="2743" class="Symbol">:</a> <a id="2745" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2750" href="Ledger.Utxo.html#2737" class="Bound">a</a><a id="2751" class="Symbol">)</a> <a id="2753" class="Symbol">:</a> <a id="2755" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2760" href="Ledger.Utxo.html#2737" class="Bound">a</a> <a id="2762" class="Keyword">where</a>
  <a id="2770" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="2776" href="Ledger.Utxo.html#2776" class="Field">UTxOStateOf</a> <a id="2788" class="Symbol">:</a> <a id="2790" href="Ledger.Utxo.html#2741" class="Bound">A</a> <a id="2792" class="Symbol">→</a> <a id="2794" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a>
<a id="2804" class="Keyword">open</a> <a id="2809" href="Ledger.Utxo.html#2723" class="Module">HasUTxOState</a> <a id="2822" class="Symbol">⦃...⦄</a> <a id="2828" class="Keyword">public</a>

<a id="2836" class="Keyword">instance</a>
  <a id="HasDeposits-UTxOState"></a><a id="2847" href="Ledger.Utxo.html#2847" class="Function">HasDeposits-UTxOState</a> <a id="2869" class="Symbol">:</a> <a id="2871" href="Ledger.Certs.html#677" class="Record">HasDeposits</a> <a id="2883" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a>
  <a id="2895" href="Ledger.Utxo.html#2847" class="Function">HasDeposits-UTxOState</a> <a id="2917" class="Symbol">.</a><a id="2918" href="Ledger.Certs.html#729" class="Field">DepositsOf</a> <a id="2929" class="Symbol">=</a> <a id="2931" href="Ledger.Utxo.html#2669" class="Field">UTxOState.deposits</a>

  <a id="HasUTxO-UTxOState"></a><a id="2953" href="Ledger.Utxo.html#2953" class="Function">HasUTxO-UTxOState</a> <a id="2971" class="Symbol">:</a> <a id="2973" href="Ledger.Transaction.html#2584" class="Record">HasUTxO</a> <a id="2981" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a>
  <a id="2993" href="Ledger.Utxo.html#2953" class="Function">HasUTxO-UTxOState</a> <a id="3011" class="Symbol">.</a><a id="3012" href="Ledger.Transaction.html#2634" class="Field">UTxOOf</a> <a id="3019" class="Symbol">=</a> <a id="3021" href="Ledger.Utxo.html#2625" class="Field">UTxOState.utxo</a>

  <a id="3039" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="3051" href="Ledger.Utxo.html#3051" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="3067" href="Ledger.Utxo.html#3067" class="Function">HasCast-UTxOState</a> <a id="3085" class="Symbol">=</a> <a id="3087" href="Class.HasCast.Derive.html#2660" class="Function">derive-HasCast</a>
    <a id="3106" class="Symbol">(</a> <a id="3108" class="Symbol">(</a><a id="3109" class="Keyword">quote</a> <a id="3115" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a>   <a id="3125" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3127" href="Ledger.Utxo.html#3051" class="Function">HasCast-UTxOEnv</a>  <a id="3144" class="Symbol">)</a> <a id="3146" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="3152" href="Data.List.Base.html#5205" class="Function Operator">[</a> <a id="3154" class="Symbol">(</a><a id="3155" class="Keyword">quote</a> <a id="3161" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="3171" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3173" href="Ledger.Utxo.html#3067" class="Function">HasCast-UTxOState</a><a id="3190" class="Symbol">)</a> <a id="3192" href="Data.List.Base.html#5205" class="Function Operator">]</a><a id="3193" class="Symbol">)</a>


<a id="3197" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="3206" href="Ledger.Utxo.html#3206" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="3220" class="Symbol">:</a> <a id="3222" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a> <a id="3230" class="Symbol">→</a> <a id="3232" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="3242" class="Symbol">→</a> <a id="3244" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="3247" class="Symbol">→</a> <a id="3249" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="3259" class="Symbol">→</a> <a id="3261" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="3268" class="Keyword">module</a> <a id="3275" href="Ledger.Utxo.html#3275" class="Module">_</a> <a id="3277" class="Symbol">(</a><a id="3278" class="Keyword">let</a> <a id="3282" class="Keyword">open</a> <a id="3287" href="Ledger.Transaction.html#4234" class="Module">Tx</a><a id="3289" class="Symbol">;</a> <a id="3291" class="Keyword">open</a> <a id="3296" href="Ledger.Transaction.html#2691" class="Module">TxBody</a><a id="3302" class="Symbol">;</a> <a id="3304" class="Keyword">open</a> <a id="3309" href="Ledger.Transaction.html#3984" class="Module">TxWitnesses</a><a id="3320" class="Symbol">)</a> <a id="3322" class="Keyword">where</a> <a id="3328" class="Keyword">opaque</a>


  <a id="3339" href="Ledger.Utxo.html#3339" class="Function">outs</a> <a id="3344" class="Symbol">:</a> <a id="3346" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="3353" class="Symbol">→</a> <a id="3355" href="Ledger.Transaction.html#2402" class="Function">UTxO</a>
  <a id="3362" href="Ledger.Utxo.html#3339" class="Function">outs</a> <a id="3367" href="Ledger.Utxo.html#3367" class="Bound">tx</a> <a id="3370" class="Symbol">=</a> <a id="3372" href="Axiom.Set.Map.html#5896" class="Function">mapKeys</a> <a id="3380" class="Symbol">(</a><a id="3381" href="Ledger.Utxo.html#3367" class="Bound">tx</a> <a id="3384" class="Symbol">.</a><a id="3385" href="Ledger.Transaction.html#3259" class="Field">txid</a> <a id="3390" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3392" class="Symbol">)</a> <a id="3394" class="Symbol">(</a><a id="3395" href="Ledger.Utxo.html#3367" class="Bound">tx</a> <a id="3398" class="Symbol">.</a><a id="3399" href="Ledger.Transaction.html#2787" class="Field">txouts</a><a id="3405" class="Symbol">)</a>

  <a id="3410" href="Ledger.Utxo.html#3410" class="Function">balance</a> <a id="3418" class="Symbol">:</a> <a id="3420" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="3425" class="Symbol">→</a> <a id="3427" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="3435" href="Ledger.Utxo.html#3410" class="Function">balance</a> <a id="3443" href="Ledger.Utxo.html#3443" class="Bound">utxo</a> <a id="3448" class="Symbol">=</a> <a id="3450" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="3453" href="Ledger.Utxo.html#3453" class="Bound">x</a> <a id="3455" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="3457" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="3467" href="Ledger.Transaction.html#4585" class="Function">txOutHash</a> <a id="3477" href="Ledger.Utxo.html#3443" class="Bound">utxo</a> <a id="3482" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="3484" href="Ledger.Transaction.html#4674" class="Function">getValueʰ</a> <a id="3494" href="Ledger.Utxo.html#3453" class="Bound">x</a>

  <a id="3499" href="Ledger.Utxo.html#3499" class="Function">cbalance</a> <a id="3508" class="Symbol">:</a> <a id="3510" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="3515" class="Symbol">→</a> <a id="3517" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3524" href="Ledger.Utxo.html#3499" class="Function">cbalance</a> <a id="3533" href="Ledger.Utxo.html#3533" class="Bound">utxo</a> <a id="3538" class="Symbol">=</a> <a id="3540" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="3545" class="Symbol">(</a><a id="3546" href="Ledger.Utxo.html#3410" class="Function">balance</a> <a id="3554" href="Ledger.Utxo.html#3533" class="Bound">utxo</a><a id="3558" class="Symbol">)</a>



  <a id="3565" href="Ledger.Utxo.html#3565" class="Function">refScriptsSize</a> <a id="3580" class="Symbol">:</a> <a id="3582" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="3587" class="Symbol">→</a> <a id="3589" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="3592" class="Symbol">→</a> <a id="3594" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="3598" href="Ledger.Utxo.html#3565" class="Function">refScriptsSize</a> <a id="3613" href="Ledger.Utxo.html#3613" class="Bound">utxo</a> <a id="3618" href="Ledger.Utxo.html#3618" class="Bound">tx</a> <a id="3621" class="Symbol">=</a> <a id="3623" href="Data.List.Base.html#4964" class="Function">sum</a> <a id="3627" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3629" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3633" href="Ledger.Abstract.html#814" class="Field">scriptSize</a> <a id="3644" class="Symbol">(</a><a id="3645" href="Ledger.Transaction.html#5043" class="Function">refScripts</a> <a id="3656" href="Ledger.Utxo.html#3618" class="Bound">tx</a> <a id="3659" href="Ledger.Utxo.html#3613" class="Bound">utxo</a><a id="3663" class="Symbol">)</a>

  <a id="3668" href="Ledger.Utxo.html#3668" class="Function">minfee</a> <a id="3675" class="Symbol">:</a> <a id="3677" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="3685" class="Symbol">→</a> <a id="3687" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="3692" class="Symbol">→</a> <a id="3694" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="3697" class="Symbol">→</a> <a id="3699" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3706" href="Ledger.Utxo.html#3668" class="Function">minfee</a> <a id="3713" href="Ledger.Utxo.html#3713" class="Bound">pp</a> <a id="3716" href="Ledger.Utxo.html#3716" class="Bound">utxo</a> <a id="3721" href="Ledger.Utxo.html#3721" class="Bound">tx</a>  <a id="3725" class="Symbol">=</a> <a id="3727" href="Ledger.Utxo.html#3713" class="Bound">pp</a> <a id="3730" class="Symbol">.</a><a id="3731" href="Ledger.PParams.html#1992" class="Field">a</a> <a id="3733" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3735" href="Ledger.Utxo.html#3721" class="Bound">tx</a> <a id="3738" class="Symbol">.</a><a id="3739" href="Ledger.Transaction.html#4266" class="Field">body</a> <a id="3744" class="Symbol">.</a><a id="3745" href="Ledger.Transaction.html#3234" class="Field">txsize</a> <a id="3752" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3754" href="Ledger.Utxo.html#3713" class="Bound">pp</a> <a id="3757" class="Symbol">.</a><a id="3758" href="Ledger.PParams.html#2034" class="Field">b</a>
                     <a id="3781" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3783" href="Ledger.Abstract.html#617" class="Field">txscriptfee</a> <a id="3795" class="Symbol">(</a><a id="3796" href="Ledger.Utxo.html#3713" class="Bound">pp</a> <a id="3799" class="Symbol">.</a><a id="3800" href="Ledger.PParams.html#2351" class="Field">prices</a><a id="3806" class="Symbol">)</a> <a id="3808" class="Symbol">(</a><a id="3809" href="Ledger.Utxo.html#1993" class="Function">totExUnits</a> <a id="3820" href="Ledger.Utxo.html#3721" class="Bound">tx</a><a id="3822" class="Symbol">)</a>
                     <a id="3845" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3847" href="Ledger.Fees.html#677" class="Function">scriptsCost</a> <a id="3859" href="Ledger.Utxo.html#3713" class="Bound">pp</a> <a id="3862" class="Symbol">(</a><a id="3863" href="Ledger.Utxo.html#3565" class="Function">refScriptsSize</a> <a id="3878" href="Ledger.Utxo.html#3716" class="Bound">utxo</a> <a id="3883" href="Ledger.Utxo.html#3721" class="Bound">tx</a><a id="3885" class="Symbol">)</a>



<a id="3890" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="3901" href="Ledger.Utxo.html#3901" class="Function">HasCoin-UTxO</a> <a id="3914" class="Symbol">:</a> <a id="3916" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="3924" href="Ledger.Transaction.html#2402" class="Function">UTxO</a>
  <a id="3931" href="Ledger.Utxo.html#3901" class="Function">HasCoin-UTxO</a> <a id="3944" class="Symbol">.</a><a id="3945" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="3953" class="Symbol">=</a> <a id="3955" href="Ledger.Utxo.html#3499" class="Function">cbalance</a>


<a id="certDeposit"></a><a id="3966" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="3978" class="Symbol">:</a> <a id="3980" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="3986" class="Symbol">→</a> <a id="3988" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="3996" class="Symbol">→</a> <a id="3998" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="4007" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="4019" class="Symbol">(</a><a id="4020" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="4029" href="Ledger.Utxo.html#4029" class="Bound">c</a> <a id="4031" class="Symbol">_</a> <a id="4033" class="Symbol">_</a> <a id="4035" href="Ledger.Utxo.html#4035" class="Bound">v</a><a id="4036" class="Symbol">)</a> <a id="4038" class="Symbol">_</a>   <a id="4042" class="Symbol">=</a> <a id="4044" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4046" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4064" href="Ledger.Utxo.html#4029" class="Bound">c</a> <a id="4066" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4068" href="Ledger.Utxo.html#4035" class="Bound">v</a> <a id="4070" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4072" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="4084" class="Symbol">(</a><a id="4085" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="4089" href="Ledger.Utxo.html#4089" class="Bound">c</a> <a id="4091" class="Symbol">_)</a>          <a id="4103" href="Ledger.Utxo.html#4103" class="Bound">pp</a>  <a id="4107" class="Symbol">=</a> <a id="4109" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4111" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4129" href="Ledger.Utxo.html#4089" class="Bound">c</a> <a id="4131" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4133" href="Ledger.Utxo.html#4103" class="Bound">pp</a> <a id="4136" class="Symbol">.</a><a id="4137" href="Ledger.PParams.html#2076" class="Field">keyDeposit</a> <a id="4148" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4150" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="4162" class="Symbol">(</a><a id="4163" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="4171" href="Ledger.Utxo.html#4171" class="Bound">kh</a> <a id="4174" class="Symbol">_)</a>     <a id="4181" href="Ledger.Utxo.html#4181" class="Bound">pp</a>  <a id="4185" class="Symbol">=</a> <a id="4187" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4189" href="Ledger.Certs.html#415" class="InductiveConstructor">PoolDeposit</a> <a id="4201" href="Ledger.Utxo.html#4171" class="Bound">kh</a> <a id="4204" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4206" href="Ledger.Utxo.html#4181" class="Bound">pp</a> <a id="4209" class="Symbol">.</a><a id="4210" href="Ledger.PParams.html#2121" class="Field">poolDeposit</a> <a id="4222" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4224" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="4236" class="Symbol">(</a><a id="4237" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="4245" href="Ledger.Utxo.html#4245" class="Bound">c</a> <a id="4247" href="Ledger.Utxo.html#4247" class="Bound">v</a> <a id="4249" class="Symbol">_)</a>    <a id="4255" class="Symbol">_</a>   <a id="4259" class="Symbol">=</a> <a id="4261" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4263" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="4275" href="Ledger.Utxo.html#4245" class="Bound">c</a> <a id="4277" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4279" href="Ledger.Utxo.html#4247" class="Bound">v</a> <a id="4281" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4283" href="Ledger.Utxo.html#3966" class="CatchallClause Function">certDeposit</a><a id="4294" class="CatchallClause"> </a><a id="4295" class="CatchallClause Symbol">_</a><a id="4296" class="CatchallClause">                  </a><a id="4314" class="CatchallClause Symbol">_</a>   <a id="4318" class="Symbol">=</a> <a id="4320" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="certRefund"></a><a id="4323" href="Ledger.Utxo.html#4323" class="Function">certRefund</a> <a id="4334" class="Symbol">:</a> <a id="4336" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="4342" class="Symbol">→</a> <a id="4344" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4346" href="Ledger.Certs.html#332" class="Datatype">DepositPurpose</a>
<a id="4361" href="Ledger.Utxo.html#4323" class="Function">certRefund</a> <a id="4372" class="Symbol">(</a><a id="4373" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="4379" href="Ledger.Utxo.html#4379" class="Bound">c</a> <a id="4381" class="Symbol">_)</a>      <a id="4389" class="Symbol">=</a> <a id="4391" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4393" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4411" href="Ledger.Utxo.html#4379" class="Bound">c</a> <a id="4413" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4415" href="Ledger.Utxo.html#4323" class="Function">certRefund</a> <a id="4426" class="Symbol">(</a><a id="4427" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="4437" href="Ledger.Utxo.html#4437" class="Bound">c</a> <a id="4439" class="Symbol">_)</a>  <a id="4443" class="Symbol">=</a> <a id="4445" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4447" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="4459" href="Ledger.Utxo.html#4437" class="Bound">c</a> <a id="4461" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4463" href="Ledger.Utxo.html#4323" class="CatchallClause Function">certRefund</a><a id="4473" class="CatchallClause"> </a><a id="4474" class="CatchallClause Symbol">_</a>                <a id="4491" class="Symbol">=</a> <a id="4493" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="4496" class="Keyword">data</a> <a id="ValidCertDeposits"></a><a id="4501" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="4519" class="Symbol">(</a><a id="4520" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="4523" class="Symbol">:</a> <a id="4525" href="Ledger.PParams.html#1570" class="Record">PParams</a><a id="4532" class="Symbol">)</a> <a id="4534" class="Symbol">(</a><a id="4535" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="4540" class="Symbol">:</a> <a id="4542" href="Ledger.Certs.html#573" class="Function">Deposits</a><a id="4550" class="Symbol">)</a> <a id="4552" class="Symbol">:</a> <a id="4554" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4559" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="4565" class="Symbol">→</a> <a id="4567" href="Agda.Primitive.html#388" class="Primitive">Set</a>


  <a id="4575" class="Keyword">where</a>
  <a id="ValidCertDeposits.[]"></a><a id="4583" href="Ledger.Utxo.html#4583" class="InductiveConstructor">[]</a>         <a id="4594" class="Symbol">:</a> <a id="4596" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="4614" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="4617" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="4622" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="ValidCertDeposits.delegate"></a><a id="4627" href="Ledger.Utxo.html#4627" class="InductiveConstructor">delegate</a>   <a id="4638" class="Symbol">:</a> <a id="4640" class="Symbol">∀</a> <a id="4642" class="Symbol">{</a><a id="4643" href="Ledger.Utxo.html#4643" class="Bound">c</a> <a id="4645" href="Ledger.Utxo.html#4645" class="Bound">del</a> <a id="4649" href="Ledger.Utxo.html#4649" class="Bound">kh</a> <a id="4652" href="Ledger.Utxo.html#4652" class="Bound">v</a> <a id="4654" href="Ledger.Utxo.html#4654" class="Bound">certs</a><a id="4659" class="Symbol">}</a>
             <a id="4674" class="Symbol">→</a> <a id="4676" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="4694" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="4697" class="Symbol">(</a><a id="4698" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="4703" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="4706" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4708" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="4726" href="Ledger.Utxo.html#4643" class="Bound">c</a> <a id="4728" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4730" href="Ledger.Utxo.html#4652" class="Bound">v</a> <a id="4732" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4733" class="Symbol">)</a> <a id="4735" href="Ledger.Utxo.html#4654" class="Bound">certs</a>
             <a id="4754" class="Symbol">→</a> <a id="4756" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="4774" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="4777" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="4782" class="Symbol">(</a><a id="4783" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="4792" href="Ledger.Utxo.html#4643" class="Bound">c</a> <a id="4794" href="Ledger.Utxo.html#4645" class="Bound">del</a> <a id="4798" href="Ledger.Utxo.html#4649" class="Bound">kh</a> <a id="4801" href="Ledger.Utxo.html#4652" class="Bound">v</a> <a id="4803" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4805" href="Ledger.Utxo.html#4654" class="Bound">certs</a><a id="4810" class="Symbol">)</a>
  <a id="ValidCertDeposits.regpool"></a><a id="4814" href="Ledger.Utxo.html#4814" class="InductiveConstructor">regpool</a>    <a id="4825" class="Symbol">:</a> <a id="4827" class="Symbol">∀</a> <a id="4829" class="Symbol">{</a><a id="4830" href="Ledger.Utxo.html#4830" class="Bound">kh</a> <a id="4833" href="Ledger.Utxo.html#4833" class="Bound">p</a> <a id="4835" href="Ledger.Utxo.html#4835" class="Bound">certs</a><a id="4840" class="Symbol">}</a>
             <a id="4855" class="Symbol">→</a> <a id="4857" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="4875" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="4878" class="Symbol">(</a><a id="4879" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="4884" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="4887" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4889" href="Ledger.Certs.html#415" class="InductiveConstructor">PoolDeposit</a> <a id="4901" href="Ledger.Utxo.html#4830" class="Bound">kh</a> <a id="4904" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4906" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="4909" class="Symbol">.</a><a id="4910" href="Ledger.PParams.html#2121" class="Field">poolDeposit</a> <a id="4922" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4923" class="Symbol">)</a> <a id="4925" href="Ledger.Utxo.html#4835" class="Bound">certs</a>
             <a id="4944" class="Symbol">→</a> <a id="4946" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="4964" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="4967" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="4972" class="Symbol">(</a><a id="4973" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="4981" href="Ledger.Utxo.html#4830" class="Bound">kh</a> <a id="4984" href="Ledger.Utxo.html#4833" class="Bound">p</a> <a id="4986" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4988" href="Ledger.Utxo.html#4835" class="Bound">certs</a><a id="4993" class="Symbol">)</a>
  <a id="ValidCertDeposits.regdrep"></a><a id="4997" href="Ledger.Utxo.html#4997" class="InductiveConstructor">regdrep</a>    <a id="5008" class="Symbol">:</a> <a id="5010" class="Symbol">∀</a> <a id="5012" class="Symbol">{</a><a id="5013" href="Ledger.Utxo.html#5013" class="Bound">c</a> <a id="5015" href="Ledger.Utxo.html#5015" class="Bound">v</a> <a id="5017" href="Ledger.Utxo.html#5017" class="Bound">a</a> <a id="5019" href="Ledger.Utxo.html#5019" class="Bound">certs</a><a id="5024" class="Symbol">}</a>
             <a id="5039" class="Symbol">→</a> <a id="5041" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5059" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5062" class="Symbol">(</a><a id="5063" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5068" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5071" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5073" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="5085" href="Ledger.Utxo.html#5013" class="Bound">c</a> <a id="5087" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5089" href="Ledger.Utxo.html#5015" class="Bound">v</a> <a id="5091" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5092" class="Symbol">)</a> <a id="5094" href="Ledger.Utxo.html#5019" class="Bound">certs</a>
             <a id="5113" class="Symbol">→</a> <a id="5115" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5133" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5136" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5141" class="Symbol">(</a><a id="5142" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="5150" href="Ledger.Utxo.html#5013" class="Bound">c</a> <a id="5152" href="Ledger.Utxo.html#5015" class="Bound">v</a> <a id="5154" href="Ledger.Utxo.html#5017" class="Bound">a</a> <a id="5156" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5158" href="Ledger.Utxo.html#5019" class="Bound">certs</a><a id="5163" class="Symbol">)</a>
  <a id="ValidCertDeposits.reg"></a><a id="5167" href="Ledger.Utxo.html#5167" class="InductiveConstructor">reg</a>        <a id="5178" class="Symbol">:</a> <a id="5180" class="Symbol">∀</a> <a id="5182" class="Symbol">{</a><a id="5183" href="Ledger.Utxo.html#5183" class="Bound">c</a> <a id="5185" href="Ledger.Utxo.html#5185" class="Bound">v</a> <a id="5187" href="Ledger.Utxo.html#5187" class="Bound">certs</a><a id="5192" class="Symbol">}</a>
             <a id="5207" class="Symbol">→</a> <a id="5209" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5227" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5230" class="Symbol">(</a><a id="5231" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5236" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5239" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5241" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="5259" href="Ledger.Utxo.html#5183" class="Bound">c</a> <a id="5261" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5263" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5266" class="Symbol">.</a><a id="5267" href="Ledger.PParams.html#2076" class="Field">keyDeposit</a> <a id="5278" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5279" class="Symbol">)</a> <a id="5281" href="Ledger.Utxo.html#5187" class="Bound">certs</a>
             <a id="5300" class="Symbol">→</a> <a id="5302" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5320" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5323" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5328" class="Symbol">(</a><a id="5329" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="5333" href="Ledger.Utxo.html#5183" class="Bound">c</a> <a id="5335" href="Ledger.Utxo.html#5185" class="Bound">v</a> <a id="5337" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5339" href="Ledger.Utxo.html#5187" class="Bound">certs</a><a id="5344" class="Symbol">)</a>
  <a id="ValidCertDeposits.dereg"></a><a id="5348" href="Ledger.Utxo.html#5348" class="InductiveConstructor">dereg</a>      <a id="5359" class="Symbol">:</a> <a id="5361" class="Symbol">∀</a> <a id="5363" class="Symbol">{</a><a id="5364" href="Ledger.Utxo.html#5364" class="Bound">c</a> <a id="5366" href="Ledger.Utxo.html#5366" class="Bound">md</a> <a id="5369" href="Ledger.Utxo.html#5369" class="Bound">d</a> <a id="5371" href="Ledger.Utxo.html#5371" class="Bound">certs</a><a id="5376" class="Symbol">}</a>
             <a id="5391" class="Symbol">→</a> <a id="5393" class="Symbol">(</a><a id="5394" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="5412" href="Ledger.Utxo.html#5364" class="Bound">c</a> <a id="5414" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5416" href="Ledger.Utxo.html#5369" class="Bound">d</a><a id="5417" class="Symbol">)</a> <a id="5419" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5421" href="Ledger.Utxo.html#4535" class="Bound">deps</a>
             <a id="5439" class="Symbol">→</a> <a id="5441" href="Ledger.Utxo.html#5366" class="Bound">md</a> <a id="5444" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5446" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5454" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5456" href="Ledger.Utxo.html#5366" class="Bound">md</a> <a id="5459" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5461" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5466" href="Ledger.Utxo.html#5369" class="Bound">d</a>
             <a id="5481" class="Symbol">→</a> <a id="5483" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5501" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5504" class="Symbol">(</a><a id="5505" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5510" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5512" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5514" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="5532" href="Ledger.Utxo.html#5364" class="Bound">c</a> <a id="5534" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5536" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5537" class="Symbol">)</a> <a id="5539" href="Ledger.Utxo.html#5371" class="Bound">certs</a>
             <a id="5558" class="Symbol">→</a> <a id="5560" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5578" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5581" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5586" class="Symbol">(</a><a id="5587" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="5593" href="Ledger.Utxo.html#5364" class="Bound">c</a> <a id="5595" href="Ledger.Utxo.html#5366" class="Bound">md</a> <a id="5598" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5600" href="Ledger.Utxo.html#5371" class="Bound">certs</a><a id="5605" class="Symbol">)</a>
  <a id="ValidCertDeposits.deregdrep"></a><a id="5609" href="Ledger.Utxo.html#5609" class="InductiveConstructor">deregdrep</a>  <a id="5620" class="Symbol">:</a> <a id="5622" class="Symbol">∀</a> <a id="5624" class="Symbol">{</a><a id="5625" href="Ledger.Utxo.html#5625" class="Bound">c</a> <a id="5627" href="Ledger.Utxo.html#5627" class="Bound">d</a> <a id="5629" href="Ledger.Utxo.html#5629" class="Bound">certs</a><a id="5634" class="Symbol">}</a>
             <a id="5649" class="Symbol">→</a> <a id="5651" class="Symbol">(</a><a id="5652" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="5664" href="Ledger.Utxo.html#5625" class="Bound">c</a> <a id="5666" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5668" href="Ledger.Utxo.html#5627" class="Bound">d</a><a id="5669" class="Symbol">)</a> <a id="5671" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5673" href="Ledger.Utxo.html#4535" class="Bound">deps</a>
             <a id="5691" class="Symbol">→</a> <a id="5693" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5711" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5714" class="Symbol">(</a><a id="5715" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5720" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5722" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5724" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="5736" href="Ledger.Utxo.html#5625" class="Bound">c</a> <a id="5738" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5740" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5741" class="Symbol">)</a> <a id="5743" href="Ledger.Utxo.html#5629" class="Bound">certs</a>
             <a id="5762" class="Symbol">→</a> <a id="5764" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5782" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5785" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5790" class="Symbol">(</a><a id="5791" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="5801" href="Ledger.Utxo.html#5625" class="Bound">c</a> <a id="5803" href="Ledger.Utxo.html#5627" class="Bound">d</a> <a id="5805" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5807" href="Ledger.Utxo.html#5629" class="Bound">certs</a><a id="5812" class="Symbol">)</a>
  <a id="ValidCertDeposits.ccreghot"></a><a id="5816" href="Ledger.Utxo.html#5816" class="InductiveConstructor">ccreghot</a>   <a id="5827" class="Symbol">:</a> <a id="5829" class="Symbol">∀</a> <a id="5831" class="Symbol">{</a><a id="5832" href="Ledger.Utxo.html#5832" class="Bound">c</a> <a id="5834" href="Ledger.Utxo.html#5834" class="Bound">v</a> <a id="5836" href="Ledger.Utxo.html#5836" class="Bound">certs</a><a id="5841" class="Symbol">}</a>
             <a id="5856" class="Symbol">→</a> <a id="5858" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5876" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5879" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5884" href="Ledger.Utxo.html#5836" class="Bound">certs</a>
             <a id="5903" class="Symbol">→</a> <a id="5905" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="5923" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="5926" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="5931" class="Symbol">(</a><a id="5932" href="Ledger.Certs.html#1644" class="InductiveConstructor">ccreghot</a> <a id="5941" href="Ledger.Utxo.html#5832" class="Bound">c</a> <a id="5943" href="Ledger.Utxo.html#5834" class="Bound">v</a> <a id="5945" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5947" href="Ledger.Utxo.html#5836" class="Bound">certs</a><a id="5952" class="Symbol">)</a>
  <a id="ValidCertDeposits.retirepool"></a><a id="5956" href="Ledger.Utxo.html#5956" class="InductiveConstructor">retirepool</a> <a id="5967" class="Symbol">:</a> <a id="5969" class="Symbol">∀</a> <a id="5971" class="Symbol">{</a><a id="5972" href="Ledger.Utxo.html#5972" class="Bound">kh</a> <a id="5975" href="Ledger.Utxo.html#5975" class="Bound">e</a> <a id="5977" href="Ledger.Utxo.html#5977" class="Bound">certs</a><a id="5982" class="Symbol">}</a>
             <a id="5997" class="Symbol">→</a> <a id="5999" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="6017" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="6020" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="6025" href="Ledger.Utxo.html#5977" class="Bound">certs</a>
             <a id="6044" class="Symbol">→</a> <a id="6046" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="6064" href="Ledger.Utxo.html#4520" class="Bound">pp</a> <a id="6067" href="Ledger.Utxo.html#4535" class="Bound">deps</a> <a id="6072" class="Symbol">(</a><a id="6073" href="Ledger.Certs.html#1511" class="InductiveConstructor">retirepool</a> <a id="6084" href="Ledger.Utxo.html#5972" class="Bound">kh</a> <a id="6087" href="Ledger.Utxo.html#5975" class="Bound">e</a>  <a id="6090" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6092" href="Ledger.Utxo.html#5977" class="Bound">certs</a><a id="6097" class="Symbol">)</a>

<a id="6100" class="Keyword">private</a>
  <a id="validCertDeposits?"></a><a id="6110" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6129" class="Symbol">:</a> <a id="6131" class="Symbol">∀</a> <a id="6133" class="Symbol">{</a><a id="6134" href="Ledger.Utxo.html#6134" class="Bound">pp</a><a id="6136" class="Symbol">}</a> <a id="6138" href="Ledger.Utxo.html#6138" class="Bound">deps</a> <a id="6143" href="Ledger.Utxo.html#6143" class="Bound">certs</a> <a id="6149" class="Symbol">→</a> <a id="6151" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="6155" class="Symbol">(</a><a id="6156" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="6174" href="Ledger.Utxo.html#6134" class="Bound">pp</a> <a id="6177" href="Ledger.Utxo.html#6138" class="Bound">deps</a> <a id="6182" href="Ledger.Utxo.html#6143" class="Bound">certs</a><a id="6187" class="Symbol">)</a>
  <a id="6191" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6210" href="Ledger.Utxo.html#6210" class="Bound">deps</a> <a id="6215" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="6218" class="Symbol">=</a> <a id="6220" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6224" href="Ledger.Utxo.html#4583" class="InductiveConstructor">[]</a>
  <a id="6229" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6248" href="Ledger.Utxo.html#6248" class="Bound">deps</a> <a id="6253" class="Symbol">(</a><a id="6254" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="6263" class="Symbol">_</a> <a id="6265" class="Symbol">_</a> <a id="6267" class="Symbol">_</a> <a id="6269" class="Symbol">_</a> <a id="6271" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6273" href="Ledger.Utxo.html#6273" class="Bound">certs</a><a id="6278" class="Symbol">)</a> <a id="6280" class="Symbol">=</a>
    <a id="6286" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6293" href="Ledger.Utxo.html#4627" class="InductiveConstructor">delegate</a> <a id="6302" class="Symbol">(λ</a> <a id="6305" class="Keyword">where</a> <a id="6311" class="Symbol">(</a><a id="6312" href="Ledger.Utxo.html#4627" class="InductiveConstructor">delegate</a> <a id="6321" href="Ledger.Utxo.html#6321" class="Bound">p</a><a id="6322" class="Symbol">)</a> <a id="6324" class="Symbol">→</a> <a id="6326" href="Ledger.Utxo.html#6321" class="Bound">p</a><a id="6327" class="Symbol">)</a> <a id="6329" class="Symbol">(</a><a id="6330" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6349" class="Symbol">_</a> <a id="6351" class="Symbol">_)</a>
  <a id="6356" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6375" href="Ledger.Utxo.html#6375" class="Bound">deps</a> <a id="6380" class="Symbol">(</a><a id="6381" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="6389" class="Symbol">_</a> <a id="6391" class="Symbol">_</a> <a id="6393" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6395" href="Ledger.Utxo.html#6395" class="Bound">certs</a><a id="6400" class="Symbol">)</a> <a id="6402" class="Symbol">=</a>
    <a id="6408" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6415" href="Ledger.Utxo.html#4814" class="InductiveConstructor">regpool</a> <a id="6423" class="Symbol">(λ</a> <a id="6426" class="Keyword">where</a> <a id="6432" class="Symbol">(</a><a id="6433" href="Ledger.Utxo.html#4814" class="InductiveConstructor">regpool</a> <a id="6441" href="Ledger.Utxo.html#6441" class="Bound">p</a><a id="6442" class="Symbol">)</a> <a id="6444" class="Symbol">→</a> <a id="6446" href="Ledger.Utxo.html#6441" class="Bound">p</a><a id="6447" class="Symbol">)</a> <a id="6449" class="Symbol">(</a><a id="6450" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6469" class="Symbol">_</a> <a id="6471" class="Symbol">_)</a>
  <a id="6476" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6495" href="Ledger.Utxo.html#6495" class="Bound">deps</a> <a id="6500" class="Symbol">(</a><a id="6501" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="6509" class="Symbol">_</a> <a id="6511" class="Symbol">_</a> <a id="6513" class="Symbol">_</a> <a id="6515" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6517" href="Ledger.Utxo.html#6517" class="Bound">certs</a><a id="6522" class="Symbol">)</a> <a id="6524" class="Symbol">=</a>
    <a id="6530" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6537" href="Ledger.Utxo.html#4997" class="InductiveConstructor">regdrep</a> <a id="6545" class="Symbol">(λ</a> <a id="6548" class="Keyword">where</a> <a id="6554" class="Symbol">(</a><a id="6555" href="Ledger.Utxo.html#4997" class="InductiveConstructor">regdrep</a> <a id="6563" href="Ledger.Utxo.html#6563" class="Bound">p</a><a id="6564" class="Symbol">)</a> <a id="6566" class="Symbol">→</a> <a id="6568" href="Ledger.Utxo.html#6563" class="Bound">p</a><a id="6569" class="Symbol">)</a> <a id="6571" class="Symbol">(</a><a id="6572" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6591" class="Symbol">_</a> <a id="6593" class="Symbol">_)</a>
  <a id="6598" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6617" href="Ledger.Utxo.html#6617" class="Bound">deps</a> <a id="6622" class="Symbol">(</a><a id="6623" href="Ledger.Certs.html#1511" class="InductiveConstructor">retirepool</a> <a id="6634" class="Symbol">_</a> <a id="6636" class="Symbol">_</a> <a id="6638" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6640" href="Ledger.Utxo.html#6640" class="Bound">certs</a><a id="6645" class="Symbol">)</a> <a id="6647" class="Symbol">=</a>
    <a id="6653" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6660" href="Ledger.Utxo.html#5956" class="InductiveConstructor">retirepool</a> <a id="6671" class="Symbol">(λ</a> <a id="6674" class="Keyword">where</a> <a id="6680" class="Symbol">(</a><a id="6681" href="Ledger.Utxo.html#5956" class="InductiveConstructor">retirepool</a> <a id="6692" href="Ledger.Utxo.html#6692" class="Bound">p</a><a id="6693" class="Symbol">)</a> <a id="6695" class="Symbol">→</a> <a id="6697" href="Ledger.Utxo.html#6692" class="Bound">p</a><a id="6698" class="Symbol">)</a> <a id="6700" class="Symbol">(</a><a id="6701" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6720" class="Symbol">_</a> <a id="6722" class="Symbol">_)</a>
  <a id="6727" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6746" href="Ledger.Utxo.html#6746" class="Bound">deps</a> <a id="6751" class="Symbol">(</a><a id="6752" href="Ledger.Certs.html#1644" class="InductiveConstructor">ccreghot</a> <a id="6761" class="Symbol">_</a> <a id="6763" class="Symbol">_</a> <a id="6765" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6767" href="Ledger.Utxo.html#6767" class="Bound">certs</a><a id="6772" class="Symbol">)</a> <a id="6774" class="Symbol">=</a>
    <a id="6780" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6787" href="Ledger.Utxo.html#5816" class="InductiveConstructor">ccreghot</a> <a id="6796" class="Symbol">(λ</a> <a id="6799" class="Keyword">where</a> <a id="6805" class="Symbol">(</a><a id="6806" href="Ledger.Utxo.html#5816" class="InductiveConstructor">ccreghot</a> <a id="6815" href="Ledger.Utxo.html#6815" class="Bound">p</a><a id="6816" class="Symbol">)</a> <a id="6818" class="Symbol">→</a> <a id="6820" href="Ledger.Utxo.html#6815" class="Bound">p</a><a id="6821" class="Symbol">)</a> <a id="6823" class="Symbol">(</a><a id="6824" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6843" class="Symbol">_</a> <a id="6845" class="Symbol">_)</a>
  <a id="6850" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6869" href="Ledger.Utxo.html#6869" class="Bound">deps</a> <a id="6874" class="Symbol">(</a><a id="6875" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="6879" class="Symbol">_</a> <a id="6881" class="Symbol">_</a> <a id="6883" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6885" href="Ledger.Utxo.html#6885" class="Bound">certs</a><a id="6890" class="Symbol">)</a> <a id="6892" class="Symbol">=</a>
    <a id="6898" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6905" href="Ledger.Utxo.html#5167" class="InductiveConstructor">reg</a> <a id="6909" class="Symbol">(λ</a> <a id="6912" class="Keyword">where</a> <a id="6918" class="Symbol">(</a><a id="6919" href="Ledger.Utxo.html#5167" class="InductiveConstructor">reg</a> <a id="6923" href="Ledger.Utxo.html#6923" class="Bound">p</a><a id="6924" class="Symbol">)</a> <a id="6926" class="Symbol">→</a> <a id="6928" href="Ledger.Utxo.html#6923" class="Bound">p</a><a id="6929" class="Symbol">)</a> <a id="6931" class="Symbol">(</a><a id="6932" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6951" class="Symbol">_</a> <a id="6953" class="Symbol">_)</a>
  <a id="6958" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="6977" href="Ledger.Utxo.html#6977" class="Bound">deps</a> <a id="6982" class="Symbol">(</a><a id="6983" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="6989" href="Ledger.Utxo.html#6989" class="Bound">c</a> <a id="6991" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="6999" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7001" href="Ledger.Utxo.html#7001" class="Bound">certs</a><a id="7006" class="Symbol">)</a> <a id="7008" class="Keyword">with</a> <a id="7013" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7015" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="7033" href="Ledger.Utxo.html#6989" class="Bound">c</a> <a id="7035" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7037" href="Class.IsSet.html#916" class="Function">dom</a> <a id="7041" href="Ledger.Utxo.html#6977" class="Bound">deps</a> <a id="7046" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7051" class="Symbol">...</a> <a id="7055" class="Symbol">|</a> <a id="7057" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7061" href="Ledger.Utxo.html#7061" class="Bound">p</a> <a id="7063" class="Symbol">=</a> <a id="7065" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7072" class="Symbol">(</a><a id="7073" href="Ledger.Utxo.html#5348" class="InductiveConstructor">dereg</a> <a id="7079" class="Symbol">(</a><a id="7080" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="7086" class="Symbol">(</a><a id="7087" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7104" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7109" href="Ledger.Utxo.html#7061" class="Bound">p</a><a id="7110" class="Symbol">))</a> <a id="7113" class="Symbol">(</a><a id="7114" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7119" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7123" class="Symbol">))</a> <a id="7126" class="Symbol">(λ</a> <a id="7129" class="Symbol">{</a> <a id="7131" class="Symbol">(</a><a id="7132" href="Ledger.Utxo.html#5348" class="InductiveConstructor">dereg</a> <a id="7138" class="Symbol">_</a> <a id="7140" class="Symbol">_</a> <a id="7142" href="Ledger.Utxo.html#7142" class="Bound">p</a><a id="7143" class="Symbol">)</a> <a id="7145" class="Symbol">→</a> <a id="7147" href="Ledger.Utxo.html#7142" class="Bound">p</a> <a id="7149" class="Symbol">})</a> <a id="7152" class="Symbol">(</a><a id="7153" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="7172" class="Symbol">_</a> <a id="7174" class="Symbol">_)</a>
  <a id="7179" class="Symbol">...</a> <a id="7183" class="Symbol">|</a> <a id="7185" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7188" href="Ledger.Utxo.html#7188" class="Bound">¬p</a> <a id="7191" class="Symbol">=</a> <a id="7193" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7196" class="Symbol">λ</a> <a id="7198" class="Symbol">{</a> <a id="7200" class="Symbol">(</a><a id="7201" href="Ledger.Utxo.html#5348" class="InductiveConstructor">dereg</a> <a id="7207" href="Ledger.Utxo.html#7207" class="Bound">x</a> <a id="7209" class="Symbol">_</a> <a id="7211" class="Symbol">_)</a> <a id="7214" class="Symbol">→</a> <a id="7216" href="Ledger.Utxo.html#7188" class="Bound">¬p</a> <a id="7219" class="Symbol">(</a><a id="7220" href="Function.Bundles.html#4810" class="Field">Equivalence.to</a> <a id="7235" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7240" class="Symbol">(_</a> <a id="7243" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7245" href="Ledger.Utxo.html#7207" class="Bound">x</a><a id="7246" class="Symbol">))</a> <a id="7249" class="Symbol">}</a>
  <a id="7253" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="7272" href="Ledger.Utxo.html#7272" class="Bound">deps</a> <a id="7277" class="Symbol">(</a><a id="7278" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="7284" href="Ledger.Utxo.html#7284" class="Bound">c</a> <a id="7286" class="Symbol">(</a><a id="7287" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7292" href="Ledger.Utxo.html#7292" class="Bound">d</a><a id="7293" class="Symbol">)</a> <a id="7295" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7297" href="Ledger.Utxo.html#7297" class="Bound">certs</a><a id="7302" class="Symbol">)</a> <a id="7304" class="Keyword">with</a> <a id="7309" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7311" class="Symbol">(</a><a id="7312" href="Ledger.Certs.html#362" class="InductiveConstructor">CredentialDeposit</a> <a id="7330" href="Ledger.Utxo.html#7284" class="Bound">c</a> <a id="7332" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7334" href="Ledger.Utxo.html#7292" class="Bound">d</a><a id="7335" class="Symbol">)</a> <a id="7337" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7339" href="Ledger.Utxo.html#7272" class="Bound">deps</a> <a id="7344" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7349" class="Symbol">...</a> <a id="7353" class="Symbol">|</a> <a id="7355" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7359" href="Ledger.Utxo.html#7359" class="Bound">p</a> <a id="7361" class="Symbol">=</a> <a id="7363" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7370" class="Symbol">(</a><a id="7371" href="Ledger.Utxo.html#5348" class="InductiveConstructor">dereg</a> <a id="7377" href="Ledger.Utxo.html#7359" class="Bound">p</a> <a id="7379" class="Symbol">(</a><a id="7380" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7385" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7389" class="Symbol">))</a> <a id="7392" class="Symbol">(λ</a> <a id="7395" class="Symbol">{</a> <a id="7397" class="Symbol">(</a><a id="7398" href="Ledger.Utxo.html#5348" class="InductiveConstructor">dereg</a> <a id="7404" class="Symbol">_</a> <a id="7406" class="Symbol">_</a> <a id="7408" href="Ledger.Utxo.html#7408" class="Bound">p</a><a id="7409" class="Symbol">)</a> <a id="7411" class="Symbol">→</a> <a id="7413" href="Ledger.Utxo.html#7408" class="Bound">p</a> <a id="7415" class="Symbol">})</a> <a id="7418" class="Symbol">(</a><a id="7419" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="7438" class="Symbol">_</a> <a id="7440" class="Symbol">_)</a>
  <a id="7445" class="Symbol">...</a> <a id="7449" class="Symbol">|</a> <a id="7451" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7454" href="Ledger.Utxo.html#7454" class="Bound">¬p</a> <a id="7457" class="Symbol">=</a> <a id="7459" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7462" class="Symbol">λ</a> <a id="7464" class="Symbol">{</a> <a id="7466" class="Symbol">(</a><a id="7467" href="Ledger.Utxo.html#5348" class="InductiveConstructor">dereg</a> <a id="7473" href="Ledger.Utxo.html#7473" class="Bound">x</a> <a id="7475" class="Symbol">(</a><a id="7476" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7481" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7485" class="Symbol">)</a> <a id="7487" class="Symbol">_)</a> <a id="7490" class="Symbol">→</a> <a id="7492" href="Ledger.Utxo.html#7454" class="Bound">¬p</a> <a id="7495" href="Ledger.Utxo.html#7473" class="Bound">x</a> <a id="7497" class="Symbol">}</a>
  <a id="7501" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="7520" href="Ledger.Utxo.html#7520" class="Bound">deps</a> <a id="7525" class="Symbol">(</a><a id="7526" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="7536" href="Ledger.Utxo.html#7536" class="Bound">c</a> <a id="7538" href="Ledger.Utxo.html#7538" class="Bound">d</a> <a id="7540" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7542" href="Ledger.Utxo.html#7542" class="Bound">certs</a><a id="7547" class="Symbol">)</a> <a id="7549" class="Keyword">with</a> <a id="7554" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7556" class="Symbol">(</a><a id="7557" href="Ledger.Certs.html#468" class="InductiveConstructor">DRepDeposit</a> <a id="7569" href="Ledger.Utxo.html#7536" class="Bound">c</a> <a id="7571" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7573" href="Ledger.Utxo.html#7538" class="Bound">d</a><a id="7574" class="Symbol">)</a> <a id="7576" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7578" href="Ledger.Utxo.html#7520" class="Bound">deps</a> <a id="7583" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a>
  <a id="7587" class="Symbol">...</a> <a id="7591" class="Symbol">|</a> <a id="7593" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7597" href="Ledger.Utxo.html#7597" class="Bound">p</a> <a id="7599" class="Symbol">=</a> <a id="7601" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7608" class="Symbol">(</a><a id="7609" href="Ledger.Utxo.html#5609" class="InductiveConstructor">deregdrep</a> <a id="7619" href="Ledger.Utxo.html#7597" class="Bound">p</a><a id="7620" class="Symbol">)</a>  <a id="7623" class="Symbol">(λ</a> <a id="7626" class="Keyword">where</a> <a id="7632" class="Symbol">(</a><a id="7633" href="Ledger.Utxo.html#5609" class="InductiveConstructor">deregdrep</a> <a id="7643" class="Symbol">_</a> <a id="7645" href="Ledger.Utxo.html#7645" class="Bound">v</a><a id="7646" class="Symbol">)</a> <a id="7648" class="Symbol">→</a> <a id="7650" href="Ledger.Utxo.html#7645" class="Bound">v</a><a id="7651" class="Symbol">)</a> <a id="7653" class="Symbol">(</a><a id="7654" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="7673" class="Symbol">_</a> <a id="7675" class="Symbol">_)</a>
  <a id="7680" class="Symbol">...</a> <a id="7684" class="Symbol">|</a> <a id="7686" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7689" href="Ledger.Utxo.html#7689" class="Bound">¬p</a> <a id="7692" class="Symbol">=</a> <a id="7694" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7697" class="Symbol">(λ</a> <a id="7700" class="Keyword">where</a> <a id="7706" class="Symbol">(</a><a id="7707" href="Ledger.Utxo.html#5609" class="InductiveConstructor">deregdrep</a> <a id="7717" href="Ledger.Utxo.html#7717" class="Bound">p</a> <a id="7719" class="Symbol">_)</a> <a id="7722" class="Symbol">→</a> <a id="7724" href="Ledger.Utxo.html#7689" class="Bound">¬p</a> <a id="7727" href="Ledger.Utxo.html#7717" class="Bound">p</a><a id="7728" class="Symbol">)</a>

<a id="7731" class="Keyword">instance</a>
  <a id="Dec-ValidCertDeposits"></a><a id="7742" href="Ledger.Utxo.html#7742" class="Function">Dec-ValidCertDeposits</a> <a id="7764" class="Symbol">:</a> <a id="7766" class="Symbol">∀</a> <a id="7768" class="Symbol">{</a><a id="7769" href="Ledger.Utxo.html#7769" class="Bound">pp</a> <a id="7772" href="Ledger.Utxo.html#7772" class="Bound">deps</a> <a id="7777" href="Ledger.Utxo.html#7777" class="Bound">certs</a><a id="7782" class="Symbol">}</a> <a id="7784" class="Symbol">→</a> <a id="7786" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="7804" href="Ledger.Utxo.html#7769" class="Bound">pp</a> <a id="7807" href="Ledger.Utxo.html#7772" class="Bound">deps</a> <a id="7812" href="Ledger.Utxo.html#7777" class="Bound">certs</a> <a id="7818" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="7822" href="Ledger.Utxo.html#7742" class="Function">Dec-ValidCertDeposits</a> <a id="7844" class="Symbol">=</a> <a id="7846" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="7848" class="Symbol">(</a><a id="7849" href="Ledger.Utxo.html#6110" class="Function">validCertDeposits?</a> <a id="7868" class="Symbol">_</a> <a id="7870" class="Symbol">_)</a>


<a id="updateCertDeposits"></a><a id="7875" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a>  <a id="7895" class="Symbol">:</a> <a id="7897" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="7905" class="Symbol">→</a> <a id="7907" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7912" href="Ledger.Certs.html#1324" class="Datatype">DCert</a> <a id="7918" class="Symbol">→</a> <a id="7920" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="7929" class="Symbol">→</a> <a id="7931" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="7940" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="7959" href="Ledger.Utxo.html#7959" class="Bound">pp</a> <a id="7962" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="7965" href="Ledger.Utxo.html#7965" class="Bound">deposits</a> <a id="7974" class="Symbol">=</a> <a id="7976" href="Ledger.Utxo.html#7965" class="Bound">deposits</a>


<a id="7987" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8006" href="Ledger.Utxo.html#8006" class="Bound">pp</a> <a id="8009" class="Symbol">(</a><a id="8010" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="8014" href="Ledger.Utxo.html#8014" class="Bound">c</a> <a id="8016" href="Ledger.Utxo.html#8016" class="Bound">v</a> <a id="8018" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8020" href="Ledger.Utxo.html#8020" class="Bound">certs</a><a id="8025" class="Symbol">)</a> <a id="8027" href="Ledger.Utxo.html#8027" class="Bound">deposits</a>
  <a id="8038" class="Symbol">=</a> <a id="8040" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8059" href="Ledger.Utxo.html#8006" class="Bound">pp</a> <a id="8062" href="Ledger.Utxo.html#8020" class="Bound">certs</a> <a id="8068" class="Symbol">(</a><a id="8069" href="Ledger.Utxo.html#8027" class="Bound">deposits</a> <a id="8078" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8081" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="8093" class="Symbol">(</a><a id="8094" href="Ledger.Certs.html#2031" class="InductiveConstructor">reg</a> <a id="8098" href="Ledger.Utxo.html#8014" class="Bound">c</a> <a id="8100" href="Ledger.Utxo.html#8016" class="Bound">v</a><a id="8101" class="Symbol">)</a> <a id="8103" href="Ledger.Utxo.html#8006" class="Bound">pp</a><a id="8105" class="Symbol">)</a>


<a id="8109" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8128" href="Ledger.Utxo.html#8128" class="Bound">pp</a> <a id="8131" class="Symbol">(</a><a id="8132" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="8141" href="Ledger.Utxo.html#8141" class="Bound">c</a> <a id="8143" href="Ledger.Utxo.html#8143" class="Bound">vd</a> <a id="8146" href="Ledger.Utxo.html#8146" class="Bound">khs</a> <a id="8150" href="Ledger.Utxo.html#8150" class="Bound">v</a> <a id="8152" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8154" href="Ledger.Utxo.html#8154" class="Bound">certs</a><a id="8159" class="Symbol">)</a> <a id="8161" href="Ledger.Utxo.html#8161" class="Bound">deposits</a>
  <a id="8172" class="Symbol">=</a> <a id="8174" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8193" href="Ledger.Utxo.html#8128" class="Bound">pp</a> <a id="8196" href="Ledger.Utxo.html#8154" class="Bound">certs</a> <a id="8202" class="Symbol">(</a><a id="8203" href="Ledger.Utxo.html#8161" class="Bound">deposits</a> <a id="8212" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8215" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="8227" class="Symbol">(</a><a id="8228" href="Ledger.Certs.html#1345" class="InductiveConstructor">delegate</a> <a id="8237" href="Ledger.Utxo.html#8141" class="Bound">c</a> <a id="8239" href="Ledger.Utxo.html#8143" class="Bound">vd</a> <a id="8242" href="Ledger.Utxo.html#8146" class="Bound">khs</a> <a id="8246" href="Ledger.Utxo.html#8150" class="Bound">v</a><a id="8247" class="Symbol">)</a> <a id="8249" href="Ledger.Utxo.html#8128" class="Bound">pp</a><a id="8251" class="Symbol">)</a>
<a id="8253" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8272" href="Ledger.Utxo.html#8272" class="Bound">pp</a> <a id="8275" class="Symbol">(</a><a id="8276" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="8284" href="Ledger.Utxo.html#8284" class="Bound">kh</a> <a id="8287" href="Ledger.Utxo.html#8287" class="Bound">p</a> <a id="8289" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8291" href="Ledger.Utxo.html#8291" class="Bound">certs</a><a id="8296" class="Symbol">)</a> <a id="8298" href="Ledger.Utxo.html#8298" class="Bound">deposits</a>
  <a id="8309" class="Symbol">=</a> <a id="8311" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8330" href="Ledger.Utxo.html#8272" class="Bound">pp</a> <a id="8333" href="Ledger.Utxo.html#8291" class="Bound">certs</a> <a id="8339" class="Symbol">(</a><a id="8340" href="Ledger.Utxo.html#8298" class="Bound">deposits</a> <a id="8349" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8352" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="8364" class="Symbol">(</a><a id="8365" href="Ledger.Certs.html#1466" class="InductiveConstructor">regpool</a> <a id="8373" href="Ledger.Utxo.html#8284" class="Bound">kh</a> <a id="8376" href="Ledger.Utxo.html#8287" class="Bound">p</a><a id="8377" class="Symbol">)</a> <a id="8379" href="Ledger.Utxo.html#8272" class="Bound">pp</a><a id="8381" class="Symbol">)</a>
<a id="8383" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8402" href="Ledger.Utxo.html#8402" class="Bound">pp</a> <a id="8405" class="Symbol">(</a><a id="8406" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="8414" href="Ledger.Utxo.html#8414" class="Bound">c</a> <a id="8416" href="Ledger.Utxo.html#8416" class="Bound">v</a> <a id="8418" href="Ledger.Utxo.html#8418" class="Bound">a</a> <a id="8420" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8422" href="Ledger.Utxo.html#8422" class="Bound">certs</a><a id="8427" class="Symbol">)</a> <a id="8429" href="Ledger.Utxo.html#8429" class="Bound">deposits</a>
  <a id="8440" class="Symbol">=</a> <a id="8442" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8461" href="Ledger.Utxo.html#8402" class="Bound">pp</a> <a id="8464" href="Ledger.Utxo.html#8422" class="Bound">certs</a> <a id="8470" class="Symbol">(</a><a id="8471" href="Ledger.Utxo.html#8429" class="Bound">deposits</a> <a id="8480" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8483" href="Ledger.Utxo.html#3966" class="Function">certDeposit</a> <a id="8495" class="Symbol">(</a><a id="8496" href="Ledger.Certs.html#1551" class="InductiveConstructor">regdrep</a> <a id="8504" href="Ledger.Utxo.html#8414" class="Bound">c</a> <a id="8506" href="Ledger.Utxo.html#8416" class="Bound">v</a> <a id="8508" href="Ledger.Utxo.html#8418" class="Bound">a</a><a id="8509" class="Symbol">)</a> <a id="8511" href="Ledger.Utxo.html#8402" class="Bound">pp</a><a id="8513" class="Symbol">)</a>
<a id="8515" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8534" href="Ledger.Utxo.html#8534" class="Bound">pp</a> <a id="8537" class="Symbol">(</a><a id="8538" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="8544" href="Ledger.Utxo.html#8544" class="Bound">c</a> <a id="8546" href="Ledger.Utxo.html#8546" class="Bound">v</a> <a id="8548" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8550" href="Ledger.Utxo.html#8550" class="Bound">certs</a><a id="8555" class="Symbol">)</a> <a id="8557" href="Ledger.Utxo.html#8557" class="Bound">deposits</a>
  <a id="8568" class="Symbol">=</a> <a id="8570" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8589" href="Ledger.Utxo.html#8534" class="Bound">pp</a> <a id="8592" href="Ledger.Utxo.html#8550" class="Bound">certs</a> <a id="8598" class="Symbol">(</a><a id="8599" href="Ledger.Utxo.html#8557" class="Bound">deposits</a> <a id="8608" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8610" href="Ledger.Utxo.html#4323" class="Function">certRefund</a> <a id="8621" class="Symbol">(</a><a id="8622" href="Ledger.Certs.html#1418" class="InductiveConstructor">dereg</a> <a id="8628" href="Ledger.Utxo.html#8544" class="Bound">c</a> <a id="8630" href="Ledger.Utxo.html#8546" class="Bound">v</a><a id="8631" class="Symbol">)</a><a id="8632" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8633" class="Symbol">)</a>
<a id="8635" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8654" href="Ledger.Utxo.html#8654" class="Bound">pp</a> <a id="8657" class="Symbol">(</a><a id="8658" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="8668" href="Ledger.Utxo.html#8668" class="Bound">c</a> <a id="8670" href="Ledger.Utxo.html#8670" class="Bound">v</a> <a id="8672" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8674" href="Ledger.Utxo.html#8674" class="Bound">certs</a><a id="8679" class="Symbol">)</a> <a id="8681" href="Ledger.Utxo.html#8681" class="Bound">deposits</a>
  <a id="8692" class="Symbol">=</a> <a id="8694" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8713" href="Ledger.Utxo.html#8654" class="Bound">pp</a> <a id="8716" href="Ledger.Utxo.html#8674" class="Bound">certs</a> <a id="8722" class="Symbol">(</a><a id="8723" href="Ledger.Utxo.html#8681" class="Bound">deposits</a> <a id="8732" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8734" href="Ledger.Utxo.html#4323" class="Function">certRefund</a> <a id="8745" class="Symbol">(</a><a id="8746" href="Ledger.Certs.html#1602" class="InductiveConstructor">deregdrep</a> <a id="8756" href="Ledger.Utxo.html#8668" class="Bound">c</a> <a id="8758" href="Ledger.Utxo.html#8670" class="Bound">v</a><a id="8759" class="Symbol">)</a><a id="8760" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8761" class="Symbol">)</a>
<a id="8763" href="Ledger.Utxo.html#7875" class="CatchallClause Function">updateCertDeposits</a><a id="8781" class="CatchallClause"> </a><a id="8782" href="Ledger.Utxo.html#8782" class="CatchallClause Bound">pp</a><a id="8784" class="CatchallClause"> </a><a id="8785" class="CatchallClause Symbol">(_</a><a id="8787" class="CatchallClause"> </a><a id="8788" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="8789" class="CatchallClause"> </a><a id="8790" href="Ledger.Utxo.html#8790" class="CatchallClause Bound">certs</a><a id="8795" class="CatchallClause Symbol">)</a><a id="8796" class="CatchallClause"> </a><a id="8797" href="Ledger.Utxo.html#8797" class="CatchallClause Bound">deposits</a>
  <a id="8808" class="Symbol">=</a> <a id="8810" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="8829" href="Ledger.Utxo.html#8782" class="Bound">pp</a> <a id="8832" href="Ledger.Utxo.html#8790" class="Bound">certs</a> <a id="8838" href="Ledger.Utxo.html#8797" class="Bound">deposits</a>

<a id="updateProposalDeposits"></a><a id="8848" href="Ledger.Utxo.html#8848" class="Function">updateProposalDeposits</a> <a id="8871" class="Symbol">:</a> <a id="8873" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8878" href="Ledger.GovernanceActions.html#2372" class="Record">GovProposal</a> <a id="8890" class="Symbol">→</a> <a id="8892" href="Ledger.Transaction.html#919" class="Field">TxId</a> <a id="8897" class="Symbol">→</a> <a id="8899" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="8904" class="Symbol">→</a> <a id="8906" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="8915" class="Symbol">→</a> <a id="8917" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="8926" href="Ledger.Utxo.html#8848" class="Function">updateProposalDeposits</a> <a id="8949" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="8959" class="Symbol">_</a>     <a id="8965" class="Symbol">_</a>      <a id="8972" href="Ledger.Utxo.html#8972" class="Bound">deposits</a>  <a id="8982" class="Symbol">=</a> <a id="8984" href="Ledger.Utxo.html#8972" class="Bound">deposits</a>
<a id="8993" href="Ledger.Utxo.html#8848" class="Function">updateProposalDeposits</a> <a id="9016" class="Symbol">(_</a> <a id="9019" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9021" href="Ledger.Utxo.html#9021" class="Bound">ps</a><a id="9023" class="Symbol">)</a>  <a id="9026" href="Ledger.Utxo.html#9026" class="Bound">txid</a>  <a id="9032" href="Ledger.Utxo.html#9032" class="Bound">gaDep</a>  <a id="9039" href="Ledger.Utxo.html#9039" class="Bound">deposits</a>  <a id="9049" class="Symbol">=</a>
  <a id="9053" href="Ledger.Utxo.html#8848" class="Function">updateProposalDeposits</a> <a id="9076" href="Ledger.Utxo.html#9021" class="Bound">ps</a> <a id="9079" href="Ledger.Utxo.html#9026" class="Bound">txid</a> <a id="9084" href="Ledger.Utxo.html#9032" class="Bound">gaDep</a> <a id="9090" href="Ledger.Utxo.html#9039" class="Bound">deposits</a>
  <a id="9101" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="9104" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="9106" href="Ledger.Certs.html#521" class="InductiveConstructor">GovActionDeposit</a> <a id="9123" class="Symbol">(</a><a id="9124" href="Ledger.Utxo.html#9026" class="Bound">txid</a> <a id="9129" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9131" href="Data.List.Base.html#5044" class="Function">length</a> <a id="9138" href="Ledger.Utxo.html#9021" class="Bound">ps</a><a id="9140" class="Symbol">)</a> <a id="9142" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9144" href="Ledger.Utxo.html#9032" class="Bound">gaDep</a> <a id="9150" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>

<a id="updateDeposits"></a><a id="9153" href="Ledger.Utxo.html#9153" class="Function">updateDeposits</a> <a id="9168" class="Symbol">:</a> <a id="9170" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="9178" class="Symbol">→</a> <a id="9180" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="9187" class="Symbol">→</a> <a id="9189" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="9198" class="Symbol">→</a> <a id="9200" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="9209" href="Ledger.Utxo.html#9153" class="Function">updateDeposits</a> <a id="9224" href="Ledger.Utxo.html#9224" class="Bound">pp</a> <a id="9227" href="Ledger.Utxo.html#9227" class="Bound">txb</a> <a id="9231" class="Symbol">=</a> <a id="9233" href="Ledger.Utxo.html#7875" class="Function">updateCertDeposits</a> <a id="9252" href="Ledger.Utxo.html#9224" class="Bound">pp</a> <a id="9255" href="Ledger.Transaction.html#2925" class="Field">txcerts</a>
                        <a id="9287" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="9289" href="Ledger.Utxo.html#8848" class="Function">updateProposalDeposits</a> <a id="9312" href="Ledger.Transaction.html#3023" class="Field">txprop</a> <a id="9319" href="Ledger.Transaction.html#3259" class="Field">txid</a> <a id="9324" class="Symbol">(</a><a id="9325" href="Ledger.Utxo.html#9224" class="Bound">pp</a> <a id="9328" class="Symbol">.</a><a id="9329" href="Ledger.PParams.html#3236" class="Field">govActionDeposit</a><a id="9345" class="Symbol">)</a>


  <a id="9351" class="Keyword">where</a> <a id="9357" class="Keyword">open</a> <a id="9362" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="9369" href="Ledger.Utxo.html#9227" class="Bound">txb</a>

<a id="proposalDepositsΔ"></a><a id="9374" href="Ledger.Utxo.html#9374" class="Function">proposalDepositsΔ</a> <a id="9392" class="Symbol">:</a> <a id="9394" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9399" href="Ledger.GovernanceActions.html#2372" class="Record">GovProposal</a> <a id="9411" class="Symbol">→</a> <a id="9413" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="9421" class="Symbol">→</a> <a id="9423" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="9430" class="Symbol">→</a> <a id="9432" href="Ledger.Certs.html#573" class="Function">Deposits</a>
<a id="9441" href="Ledger.Utxo.html#9374" class="Function">proposalDepositsΔ</a> <a id="9459" href="Ledger.Utxo.html#9459" class="Bound">props</a> <a id="9465" href="Ledger.Utxo.html#9465" class="Bound">pp</a> <a id="9468" href="Ledger.Utxo.html#9468" class="Bound">txb</a> <a id="9472" class="Symbol">=</a> <a id="9474" href="Ledger.Utxo.html#8848" class="Function">updateProposalDeposits</a> <a id="9497" href="Ledger.Utxo.html#9459" class="Bound">props</a> <a id="9503" href="Ledger.Transaction.html#3259" class="Field">txid</a> <a id="9508" class="Symbol">(</a><a id="9509" href="Ledger.Utxo.html#9465" class="Bound">pp</a> <a id="9512" class="Symbol">.</a><a id="9513" href="Ledger.PParams.html#3236" class="Field">govActionDeposit</a><a id="9529" class="Symbol">)</a> <a id="9531" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="9535" class="Keyword">where</a> <a id="9541" class="Keyword">open</a> <a id="9546" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="9553" href="Ledger.Utxo.html#9468" class="Bound">txb</a>



<a id="depositsChange"></a><a id="9560" href="Ledger.Utxo.html#9560" class="Function">depositsChange</a> <a id="9575" class="Symbol">:</a> <a id="9577" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="9585" class="Symbol">→</a> <a id="9587" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="9594" class="Symbol">→</a> <a id="9596" href="Ledger.Certs.html#573" class="Function">Deposits</a> <a id="9605" class="Symbol">→</a> <a id="9607" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
<a id="9609" href="Ledger.Utxo.html#9560" class="Function">depositsChange</a> <a id="9624" href="Ledger.Utxo.html#9624" class="Bound">pp</a> <a id="9627" href="Ledger.Utxo.html#9627" class="Bound">txb</a> <a id="9631" href="Ledger.Utxo.html#9631" class="Bound">deposits</a> <a id="9640" class="Symbol">=</a>
  <a id="9644" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9652" class="Symbol">(</a><a id="9653" href="Ledger.Utxo.html#9153" class="Function">updateDeposits</a> <a id="9668" href="Ledger.Utxo.html#9624" class="Bound">pp</a> <a id="9671" href="Ledger.Utxo.html#9627" class="Bound">txb</a> <a id="9675" href="Ledger.Utxo.html#9631" class="Bound">deposits</a><a id="9683" class="Symbol">)</a> <a id="9685" href="Interface.HasSubtract.html#209" class="Field Operator">-</a> <a id="9687" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9695" href="Ledger.Utxo.html#9631" class="Bound">deposits</a>


<a id="9706" class="Keyword">data</a> <a id="inInterval"></a><a id="9711" href="Ledger.Utxo.html#9711" class="Datatype">inInterval</a> <a id="9722" class="Symbol">(</a><a id="9723" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="9728" class="Symbol">:</a> <a id="9730" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a><a id="9734" class="Symbol">)</a> <a id="9736" class="Symbol">:</a> <a id="9738" class="Symbol">(</a><a id="9739" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9745" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a> <a id="9750" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9752" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9758" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a><a id="9762" class="Symbol">)</a> <a id="9764" class="Symbol">→</a> <a id="9766" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="9771" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="9779" href="Ledger.Utxo.html#9779" class="InductiveConstructor">both</a>   <a id="9786" class="Symbol">:</a> <a id="9788" class="Symbol">∀</a> <a id="9790" class="Symbol">{</a><a id="9791" href="Ledger.Utxo.html#9791" class="Bound">l</a> <a id="9793" href="Ledger.Utxo.html#9793" class="Bound">r</a><a id="9794" class="Symbol">}</a>  <a id="9797" class="Symbol">→</a> <a id="9799" href="Ledger.Utxo.html#9791" class="Bound">l</a> <a id="9801" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="9803" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="9808" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9810" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="9815" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="9817" href="Ledger.Utxo.html#9793" class="Bound">r</a>  <a id="9820" class="Symbol">→</a>  <a id="9823" href="Ledger.Utxo.html#9711" class="Datatype">inInterval</a> <a id="9834" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="9839" class="Symbol">(</a><a id="9840" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9845" href="Ledger.Utxo.html#9791" class="Bound">l</a>   <a id="9849" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9851" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9856" href="Ledger.Utxo.html#9793" class="Bound">r</a><a id="9857" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="9861" href="Ledger.Utxo.html#9861" class="InductiveConstructor">lower</a>  <a id="9868" class="Symbol">:</a> <a id="9870" class="Symbol">∀</a> <a id="9872" class="Symbol">{</a><a id="9873" href="Ledger.Utxo.html#9873" class="Bound">l</a><a id="9874" class="Symbol">}</a>    <a id="9879" class="Symbol">→</a> <a id="9881" href="Ledger.Utxo.html#9873" class="Bound">l</a> <a id="9883" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="9885" href="Ledger.Utxo.html#9723" class="Bound">slot</a>             <a id="9902" class="Symbol">→</a>  <a id="9905" href="Ledger.Utxo.html#9711" class="Datatype">inInterval</a> <a id="9916" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="9921" class="Symbol">(</a><a id="9922" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9927" href="Ledger.Utxo.html#9873" class="Bound">l</a>   <a id="9931" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9933" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9940" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="9944" href="Ledger.Utxo.html#9944" class="InductiveConstructor">upper</a>  <a id="9951" class="Symbol">:</a> <a id="9953" class="Symbol">∀</a> <a id="9955" class="Symbol">{</a><a id="9956" href="Ledger.Utxo.html#9956" class="Bound">r</a><a id="9957" class="Symbol">}</a>    <a id="9962" class="Symbol">→</a> <a id="9964" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="9969" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="9971" href="Ledger.Utxo.html#9956" class="Bound">r</a>             <a id="9985" class="Symbol">→</a>  <a id="9988" href="Ledger.Utxo.html#9711" class="Datatype">inInterval</a> <a id="9999" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="10004" class="Symbol">(</a><a id="10005" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10014" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10016" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10021" href="Ledger.Utxo.html#9956" class="Bound">r</a><a id="10022" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="10026" href="Ledger.Utxo.html#10026" class="InductiveConstructor">none</a>   <a id="10033" class="Symbol">:</a>                                    <a id="10070" href="Ledger.Utxo.html#9711" class="Datatype">inInterval</a> <a id="10081" href="Ledger.Utxo.html#9723" class="Bound">slot</a> <a id="10086" class="Symbol">(</a><a id="10087" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10096" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10098" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10105" class="Symbol">)</a>


<a id="10109" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="10179" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="10190" href="Ledger.Utxo.html#10190" class="Function">Dec-inInterval</a> <a id="10205" class="Symbol">:</a> <a id="10207" href="Ledger.Utxo.html#9711" class="Datatype">inInterval</a> <a id="10218" href="Class.Decidable.Core.html#773" class="Function Operator">⁇²</a>
  <a id="10223" href="Ledger.Utxo.html#10190" class="Function">Dec-inInterval</a> <a id="10238" class="Symbol">{</a><a id="10239" href="Ledger.Utxo.html#10239" class="Bound">slot</a><a id="10243" class="Symbol">}</a> <a id="10245" class="Symbol">{</a><a id="10246" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10251" href="Ledger.Utxo.html#10251" class="Bound">x</a>  <a id="10254" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10256" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10261" href="Ledger.Utxo.html#10261" class="Bound">y</a> <a id="10263" class="Symbol">}</a> <a id="10265" class="Symbol">.</a><a id="10266" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10270" class="Keyword">with</a> <a id="10275" href="Ledger.Utxo.html#10251" class="Bound">x</a> <a id="10277" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10280" href="Ledger.Utxo.html#10239" class="Bound">slot</a> <a id="10285" class="Symbol">|</a> <a id="10287" href="Ledger.Utxo.html#10239" class="Bound">slot</a> <a id="10292" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10295" href="Ledger.Utxo.html#10261" class="Bound">y</a>
  <a id="10299" class="Symbol">...</a> <a id="10303" class="Symbol">|</a> <a id="10305" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10308" href="Ledger.Utxo.html#10308" class="Bound">¬p₁</a> <a id="10312" class="Symbol">|</a> <a id="10314" class="Symbol">_</a>      <a id="10321" class="Symbol">=</a> <a id="10323" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10326" class="Symbol">λ</a> <a id="10328" class="Keyword">where</a> <a id="10334" class="Symbol">(</a><a id="10335" href="Ledger.Utxo.html#9779" class="InductiveConstructor">both</a> <a id="10340" class="Symbol">(</a><a id="10341" href="Ledger.Utxo.html#10341" class="Bound">h₁</a> <a id="10344" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10346" href="Ledger.Utxo.html#10346" class="Bound">h₂</a><a id="10348" class="Symbol">))</a> <a id="10351" class="Symbol">→</a> <a id="10353" href="Ledger.Utxo.html#10308" class="Bound">¬p₁</a> <a id="10357" href="Ledger.Utxo.html#10341" class="Bound">h₁</a>
  <a id="10362" class="Symbol">...</a> <a id="10366" class="Symbol">|</a> <a id="10368" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10372" href="Ledger.Utxo.html#10372" class="Bound">p₁</a> <a id="10375" class="Symbol">|</a> <a id="10377" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10380" href="Ledger.Utxo.html#10380" class="Bound">¬p₂</a> <a id="10384" class="Symbol">=</a> <a id="10386" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10389" class="Symbol">λ</a> <a id="10391" class="Keyword">where</a> <a id="10397" class="Symbol">(</a><a id="10398" href="Ledger.Utxo.html#9779" class="InductiveConstructor">both</a> <a id="10403" class="Symbol">(</a><a id="10404" href="Ledger.Utxo.html#10404" class="Bound">h₁</a> <a id="10407" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10409" href="Ledger.Utxo.html#10409" class="Bound">h₂</a><a id="10411" class="Symbol">))</a> <a id="10414" class="Symbol">→</a> <a id="10416" href="Ledger.Utxo.html#10380" class="Bound">¬p₂</a> <a id="10420" href="Ledger.Utxo.html#10409" class="Bound">h₂</a>
  <a id="10425" class="Symbol">...</a> <a id="10429" class="Symbol">|</a> <a id="10431" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10435" href="Ledger.Utxo.html#10435" class="Bound">p₁</a> <a id="10438" class="Symbol">|</a> <a id="10440" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10444" href="Ledger.Utxo.html#10444" class="Bound">p₂</a> <a id="10447" class="Symbol">=</a> <a id="10449" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10453" class="Symbol">(</a><a id="10454" href="Ledger.Utxo.html#9779" class="InductiveConstructor">both</a> <a id="10459" class="Symbol">(</a><a id="10460" href="Ledger.Utxo.html#10435" class="Bound">p₁</a> <a id="10463" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10465" href="Ledger.Utxo.html#10444" class="Bound">p₂</a><a id="10467" class="Symbol">))</a>
  <a id="10472" href="Ledger.Utxo.html#10190" class="Function">Dec-inInterval</a> <a id="10487" class="Symbol">{</a><a id="10488" href="Ledger.Utxo.html#10488" class="Bound">slot</a><a id="10492" class="Symbol">}</a> <a id="10494" class="Symbol">{</a><a id="10495" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10500" href="Ledger.Utxo.html#10500" class="Bound">x</a>  <a id="10503" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10505" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10512" class="Symbol">}</a> <a id="10514" class="Symbol">.</a><a id="10515" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10519" class="Keyword">with</a> <a id="10524" href="Ledger.Utxo.html#10500" class="Bound">x</a> <a id="10526" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10529" href="Ledger.Utxo.html#10488" class="Bound">slot</a>
  <a id="10536" class="Symbol">...</a> <a id="10540" class="Symbol">|</a> <a id="10542" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10545" href="Ledger.Utxo.html#10545" class="Bound">¬p</a> <a id="10548" class="Symbol">=</a> <a id="10550" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10554" class="Symbol">(λ</a> <a id="10557" class="Keyword">where</a> <a id="10563" class="Symbol">(</a><a id="10564" href="Ledger.Utxo.html#9861" class="InductiveConstructor">lower</a> <a id="10570" href="Ledger.Utxo.html#10570" class="Bound">h</a><a id="10571" class="Symbol">)</a> <a id="10573" class="Symbol">→</a> <a id="10575" href="Ledger.Utxo.html#10545" class="Bound">¬p</a> <a id="10578" href="Ledger.Utxo.html#10570" class="Bound">h</a><a id="10579" class="Symbol">)</a>
  <a id="10583" class="Symbol">...</a> <a id="10587" class="Symbol">|</a> <a id="10589" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10593" href="Ledger.Utxo.html#10593" class="Bound">p</a> <a id="10595" class="Symbol">=</a> <a id="10597" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10601" class="Symbol">(</a><a id="10602" href="Ledger.Utxo.html#9861" class="InductiveConstructor">lower</a> <a id="10608" href="Ledger.Utxo.html#10593" class="Bound">p</a><a id="10609" class="Symbol">)</a>
  <a id="10613" href="Ledger.Utxo.html#10190" class="Function">Dec-inInterval</a> <a id="10628" class="Symbol">{</a><a id="10629" href="Ledger.Utxo.html#10629" class="Bound">slot</a><a id="10633" class="Symbol">}</a> <a id="10635" class="Symbol">{</a><a id="10636" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10644" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10646" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10651" href="Ledger.Utxo.html#10651" class="Bound">x</a> <a id="10653" class="Symbol">}</a> <a id="10655" class="Symbol">.</a><a id="10656" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10660" class="Keyword">with</a> <a id="10665" href="Ledger.Utxo.html#10629" class="Bound">slot</a> <a id="10670" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10673" href="Ledger.Utxo.html#10651" class="Bound">x</a>
  <a id="10677" class="Symbol">...</a> <a id="10681" class="Symbol">|</a> <a id="10683" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10686" href="Ledger.Utxo.html#10686" class="Bound">¬p</a> <a id="10689" class="Symbol">=</a> <a id="10691" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10695" class="Symbol">(λ</a> <a id="10698" class="Keyword">where</a> <a id="10704" class="Symbol">(</a><a id="10705" href="Ledger.Utxo.html#9944" class="InductiveConstructor">upper</a> <a id="10711" href="Ledger.Utxo.html#10711" class="Bound">h</a><a id="10712" class="Symbol">)</a> <a id="10714" class="Symbol">→</a> <a id="10716" href="Ledger.Utxo.html#10686" class="Bound">¬p</a> <a id="10719" href="Ledger.Utxo.html#10711" class="Bound">h</a><a id="10720" class="Symbol">)</a>
  <a id="10724" class="Symbol">...</a> <a id="10728" class="Symbol">|</a> <a id="10730" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10734" href="Ledger.Utxo.html#10734" class="Bound">p</a> <a id="10736" class="Symbol">=</a> <a id="10738" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10742" class="Symbol">(</a><a id="10743" href="Ledger.Utxo.html#9944" class="InductiveConstructor">upper</a> <a id="10749" href="Ledger.Utxo.html#10734" class="Bound">p</a><a id="10750" class="Symbol">)</a>
  <a id="10754" href="Ledger.Utxo.html#10190" class="Function">Dec-inInterval</a> <a id="10769" class="Symbol">{</a><a id="10770" href="Ledger.Utxo.html#10770" class="Bound">slot</a><a id="10774" class="Symbol">}</a> <a id="10776" class="Symbol">{</a><a id="10777" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10785" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10787" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10794" class="Symbol">}</a> <a id="10796" class="Symbol">.</a><a id="10797" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10801" class="Symbol">=</a> <a id="10803" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10807" href="Ledger.Utxo.html#10026" class="InductiveConstructor">none</a>

  <a id="HasCoin-UTxOState"></a><a id="10815" href="Ledger.Utxo.html#10815" class="Function">HasCoin-UTxOState</a> <a id="10833" class="Symbol">:</a> <a id="10835" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="10843" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a>
  <a id="10855" href="Ledger.Utxo.html#10815" class="Function">HasCoin-UTxOState</a> <a id="10873" class="Symbol">.</a><a id="10874" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="10882" href="Ledger.Utxo.html#10882" class="Bound">s</a> <a id="10884" class="Symbol">=</a> <a id="10886" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="10894" class="Symbol">(</a><a id="10895" href="Ledger.Utxo.html#2625" class="Field">UTxOState.utxo</a> <a id="10910" href="Ledger.Utxo.html#10882" class="Bound">s</a><a id="10911" class="Symbol">)</a>
                               <a id="10944" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10946" class="Symbol">(</a><a id="10947" href="Ledger.Utxo.html#2647" class="Field">UTxOState.fees</a> <a id="10962" href="Ledger.Utxo.html#10882" class="Bound">s</a><a id="10963" class="Symbol">)</a>
                               <a id="10996" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10998" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11006" class="Symbol">(</a><a id="11007" href="Ledger.Utxo.html#2669" class="Field">UTxOState.deposits</a> <a id="11026" href="Ledger.Utxo.html#10882" class="Bound">s</a><a id="11027" class="Symbol">)</a>
                               <a id="11060" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11062" href="Ledger.Utxo.html#2695" class="Field">UTxOState.donations</a> <a id="11082" href="Ledger.Utxo.html#10882" class="Bound">s</a>

<a id="coinPolicies"></a><a id="11085" href="Ledger.Utxo.html#11085" class="Function">coinPolicies</a> <a id="11098" class="Symbol">:</a> <a id="11100" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="11102" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>
<a id="11113" href="Ledger.Utxo.html#11085" class="Function">coinPolicies</a> <a id="11126" class="Symbol">=</a> <a id="11128" href="Ledger.TokenAlgebra.html#902" class="Function">policies</a> <a id="11137" class="Symbol">(</a><a id="11138" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="11145" class="Number">1</a><a id="11146" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="11149" href="Ledger.Utxo.html#11149" class="Function">isAdaOnly</a> <a id="11159" class="Symbol">:</a> <a id="11161" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a> <a id="11167" class="Symbol">→</a> <a id="11169" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11174" href="Ledger.Utxo.html#11149" class="Function">isAdaOnly</a> <a id="11184" href="Ledger.Utxo.html#11184" class="Bound">v</a> <a id="11186" class="Symbol">=</a> <a id="11188" href="Ledger.TokenAlgebra.html#902" class="Function">policies</a> <a id="11197" href="Ledger.Utxo.html#11184" class="Bound">v</a> <a id="11199" href="Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="11202" href="Ledger.Utxo.html#11085" class="Function">coinPolicies</a>


<a id="feesOK"></a><a id="11217" href="Ledger.Utxo.html#11217" class="Function">feesOK</a> <a id="11224" class="Symbol">:</a> <a id="11226" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="11234" class="Symbol">→</a> <a id="11236" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="11239" class="Symbol">→</a> <a id="11241" href="Ledger.Transaction.html#2402" class="Function">UTxO</a> <a id="11246" class="Symbol">→</a> <a id="11248" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11253" href="Ledger.Utxo.html#11217" class="Function">feesOK</a> <a id="11260" href="Ledger.Utxo.html#11260" class="Bound">pp</a> <a id="11263" href="Ledger.Utxo.html#11263" class="Bound">tx</a> <a id="11266" href="Ledger.Utxo.html#11266" class="Bound">utxo</a> <a id="11271" class="Symbol">=</a> <a id="11273" class="Symbol">(</a> <a id="11275" href="Ledger.Utxo.html#3668" class="Function">minfee</a> <a id="11282" href="Ledger.Utxo.html#11260" class="Bound">pp</a> <a id="11285" href="Ledger.Utxo.html#11266" class="Bound">utxo</a> <a id="11290" href="Ledger.Utxo.html#11263" class="Bound">tx</a> <a id="11293" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="11295" href="Ledger.Transaction.html#2821" class="Function">txfee</a> <a id="11301" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11303" class="Symbol">(</a><a id="11304" href="Ledger.Transaction.html#4113" class="Function">txrdmrs</a> <a id="11312" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="11314" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11316" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                      <a id="11340" class="Symbol">→</a> <a id="11342" class="Symbol">(</a> <a id="11344" href="Axiom.Set.html#9724" class="Function">All</a> <a id="11348" class="Symbol">(λ</a> <a id="11351" class="Symbol">(</a><a id="11352" href="Ledger.Utxo.html#11352" class="Bound">addr</a> <a id="11357" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11359" class="Symbol">_)</a> <a id="11362" class="Symbol">→</a> <a id="11364" href="Ledger.Address.html#2579" class="Function">isVKeyAddr</a> <a id="11375" href="Ledger.Utxo.html#11352" class="Bound">addr</a><a id="11379" class="Symbol">)</a> <a id="11381" href="Ledger.Utxo.html#11711" class="Function">collateralRange</a>
                        <a id="11421" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11423" href="Ledger.Utxo.html#11149" class="Function">isAdaOnly</a> <a id="11433" href="Ledger.Utxo.html#11785" class="Function">bal</a>
                        <a id="11461" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11463" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="11468" href="Ledger.Utxo.html#11785" class="Function">bal</a> <a id="11472" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11474" class="Number">100</a> <a id="11478" href="Class.HasOrder.Core.html#822" class="Function Operator">≥</a> <a id="11480" href="Ledger.Transaction.html#2821" class="Function">txfee</a> <a id="11486" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11488" href="Ledger.Utxo.html#11260" class="Bound">pp</a> <a id="11491" class="Symbol">.</a><a id="11492" href="Ledger.PParams.html#2812" class="Field">collateralPercentage</a>
                        <a id="11537" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11539" href="Ledger.Transaction.html#3287" class="Function">collateral</a> <a id="11550" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11552" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                        <a id="11578" class="Symbol">)</a>
                      <a id="11602" class="Symbol">)</a>
                    <a id="11624" class="Symbol">)</a>
  <a id="11628" class="Keyword">where</a>
    <a id="11638" class="Keyword">open</a> <a id="11643" href="Ledger.Transaction.html#4234" class="Module">Tx</a> <a id="11646" href="Ledger.Utxo.html#11263" class="Bound">tx</a><a id="11648" class="Symbol">;</a> <a id="11650" class="Keyword">open</a> <a id="11655" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="11662" href="Ledger.Transaction.html#4266" class="Function">body</a><a id="11666" class="Symbol">;</a> <a id="11668" class="Keyword">open</a> <a id="11673" href="Ledger.Transaction.html#3984" class="Module">TxWitnesses</a> <a id="11685" href="Ledger.Transaction.html#4290" class="Function">wits</a><a id="11689" class="Symbol">;</a> <a id="11691" class="Keyword">open</a> <a id="11696" href="Ledger.PParams.html#1570" class="Module">PParams</a> <a id="11704" href="Ledger.Utxo.html#11260" class="Bound">pp</a>
    <a id="11711" href="Ledger.Utxo.html#11711" class="Function">collateralRange</a>  <a id="11728" class="Symbol">=</a> <a id="11730" href="Class.IsSet.html#959" class="Function">range</a>    <a id="11739" class="Symbol">((</a><a id="11741" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="11751" href="Ledger.Transaction.html#4585" class="Function">txOutHash</a> <a id="11761" href="Ledger.Utxo.html#11266" class="Bound">utxo</a><a id="11765" class="Symbol">)</a> <a id="11767" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="11769" href="Ledger.Transaction.html#3287" class="Function">collateral</a><a id="11779" class="Symbol">)</a>
    <a id="11785" href="Ledger.Utxo.html#11785" class="Function">bal</a>              <a id="11802" class="Symbol">=</a> <a id="11804" href="Ledger.Utxo.html#3410" class="Function">balance</a>  <a id="11813" class="Symbol">(</a><a id="11814" href="Ledger.Utxo.html#11266" class="Bound">utxo</a> <a id="11819" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="11821" href="Ledger.Transaction.html#3287" class="Function">collateral</a><a id="11831" class="Symbol">)</a>


<a id="11835" class="Keyword">module</a> <a id="11842" href="Ledger.Utxo.html#11842" class="Module">_</a> <a id="11844" class="Symbol">(</a><a id="11845" class="Keyword">let</a> <a id="11849" class="Keyword">open</a> <a id="11854" href="Ledger.Utxo.html#2561" class="Module">UTxOState</a><a id="11863" class="Symbol">;</a> <a id="11865" class="Keyword">open</a> <a id="11870" href="Ledger.Transaction.html#2691" class="Module">TxBody</a><a id="11876" class="Symbol">)</a> <a id="11878" class="Keyword">where</a>


  <a id="11888" href="Ledger.Utxo.html#11888" class="Function">depositRefunds</a> <a id="11903" class="Symbol">:</a> <a id="11905" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="11913" class="Symbol">→</a> <a id="11915" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="11925" class="Symbol">→</a> <a id="11927" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="11934" class="Symbol">→</a> <a id="11936" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="11943" href="Ledger.Utxo.html#11888" class="Function">depositRefunds</a> <a id="11958" href="Ledger.Utxo.html#11958" class="Bound">pp</a> <a id="11961" href="Ledger.Utxo.html#11961" class="Bound">st</a> <a id="11964" href="Ledger.Utxo.html#11964" class="Bound">txb</a> <a id="11968" class="Symbol">=</a> <a id="11970" href="Prelude.html#3244" class="Function">negPart</a> <a id="11978" class="Symbol">(</a><a id="11979" href="Ledger.Utxo.html#9560" class="Function">depositsChange</a> <a id="11994" href="Ledger.Utxo.html#11958" class="Bound">pp</a> <a id="11997" href="Ledger.Utxo.html#11964" class="Bound">txb</a> <a id="12001" class="Symbol">(</a><a id="12002" href="Ledger.Utxo.html#11961" class="Bound">st</a> <a id="12005" class="Symbol">.</a><a id="12006" href="Ledger.Utxo.html#2669" class="Field">deposits</a><a id="12014" class="Symbol">))</a>

  <a id="12020" href="Ledger.Utxo.html#12020" class="Function">newDeposits</a> <a id="12032" class="Symbol">:</a> <a id="12034" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="12042" class="Symbol">→</a> <a id="12044" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="12054" class="Symbol">→</a> <a id="12056" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="12063" class="Symbol">→</a> <a id="12065" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12072" href="Ledger.Utxo.html#12020" class="Function">newDeposits</a> <a id="12084" href="Ledger.Utxo.html#12084" class="Bound">pp</a> <a id="12087" href="Ledger.Utxo.html#12087" class="Bound">st</a> <a id="12090" href="Ledger.Utxo.html#12090" class="Bound">txb</a> <a id="12094" class="Symbol">=</a> <a id="12096" href="Prelude.html#3167" class="Function">posPart</a> <a id="12104" class="Symbol">(</a><a id="12105" href="Ledger.Utxo.html#9560" class="Function">depositsChange</a> <a id="12120" href="Ledger.Utxo.html#12084" class="Bound">pp</a> <a id="12123" href="Ledger.Utxo.html#12090" class="Bound">txb</a> <a id="12127" class="Symbol">(</a><a id="12128" href="Ledger.Utxo.html#12087" class="Bound">st</a> <a id="12131" class="Symbol">.</a><a id="12132" href="Ledger.Utxo.html#2669" class="Field">deposits</a><a id="12140" class="Symbol">))</a>

  <a id="12146" href="Ledger.Utxo.html#12146" class="Function">consumed</a> <a id="12155" class="Symbol">:</a> <a id="12157" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="12165" class="Symbol">→</a> <a id="12167" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="12177" class="Symbol">→</a> <a id="12179" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="12186" class="Symbol">→</a> <a id="12188" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="12196" href="Ledger.Utxo.html#12146" class="Function">consumed</a> <a id="12205" href="Ledger.Utxo.html#12205" class="Bound">pp</a> <a id="12208" href="Ledger.Utxo.html#12208" class="Bound">st</a> <a id="12211" href="Ledger.Utxo.html#12211" class="Bound">txb</a>
    <a id="12219" class="Symbol">=</a>  <a id="12222" href="Ledger.Utxo.html#3410" class="Function">balance</a> <a id="12230" class="Symbol">(</a><a id="12231" href="Ledger.Utxo.html#12208" class="Bound">st</a> <a id="12234" class="Symbol">.</a><a id="12235" href="Ledger.Utxo.html#2625" class="Field">utxo</a> <a id="12240" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="12242" href="Ledger.Utxo.html#12211" class="Bound">txb</a> <a id="12246" class="Symbol">.</a><a id="12247" href="Ledger.Transaction.html#2727" class="Field">txins</a><a id="12252" class="Symbol">)</a>
    <a id="12258" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12261" href="Ledger.Utxo.html#12211" class="Bound">txb</a> <a id="12265" class="Symbol">.</a><a id="12266" href="Ledger.Transaction.html#2849" class="Field">mint</a>
    <a id="12275" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12278" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12285" class="Symbol">(</a><a id="12286" href="Ledger.Utxo.html#11888" class="Function">depositRefunds</a> <a id="12301" href="Ledger.Utxo.html#12205" class="Bound">pp</a> <a id="12304" href="Ledger.Utxo.html#12208" class="Bound">st</a> <a id="12307" href="Ledger.Utxo.html#12211" class="Bound">txb</a><a id="12310" class="Symbol">)</a>
    <a id="12316" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12319" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12326" class="Symbol">(</a><a id="12327" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="12335" class="Symbol">(</a><a id="12336" href="Ledger.Utxo.html#12211" class="Bound">txb</a> <a id="12340" class="Symbol">.</a><a id="12341" href="Ledger.Transaction.html#2959" class="Field">txwdrls</a><a id="12348" class="Symbol">))</a>

  <a id="12354" href="Ledger.Utxo.html#12354" class="Function">produced</a> <a id="12363" class="Symbol">:</a> <a id="12365" href="Ledger.PParams.html#1570" class="Record">PParams</a> <a id="12373" class="Symbol">→</a> <a id="12375" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="12385" class="Symbol">→</a> <a id="12387" href="Ledger.Transaction.html#2691" class="Record">TxBody</a> <a id="12394" class="Symbol">→</a> <a id="12396" href="Ledger.TokenAlgebra.html#492" class="Function">Value</a>
  <a id="12404" href="Ledger.Utxo.html#12354" class="Function">produced</a> <a id="12413" href="Ledger.Utxo.html#12413" class="Bound">pp</a> <a id="12416" href="Ledger.Utxo.html#12416" class="Bound">st</a> <a id="12419" href="Ledger.Utxo.html#12419" class="Bound">txb</a> <a id="12423" class="Symbol">=</a> <a id="12425" href="Ledger.Utxo.html#3410" class="Function">balance</a> <a id="12433" class="Symbol">(</a><a id="12434" href="Ledger.Utxo.html#3339" class="Function">outs</a> <a id="12439" href="Ledger.Utxo.html#12419" class="Bound">txb</a><a id="12442" class="Symbol">)</a>
                     <a id="12465" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12467" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12474" class="Symbol">(</a><a id="12475" href="Ledger.Utxo.html#12419" class="Bound">txb</a> <a id="12479" class="Symbol">.</a><a id="12480" href="Ledger.Transaction.html#2821" class="Field">txfee</a><a id="12485" class="Symbol">)</a>
                     <a id="12508" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12510" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12517" class="Symbol">(</a><a id="12518" href="Ledger.Utxo.html#12020" class="Function">newDeposits</a> <a id="12530" href="Ledger.Utxo.html#12413" class="Bound">pp</a> <a id="12533" href="Ledger.Utxo.html#12416" class="Bound">st</a> <a id="12536" href="Ledger.Utxo.html#12419" class="Bound">txb</a><a id="12539" class="Symbol">)</a>
                     <a id="12562" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12564" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="12571" class="Symbol">(</a><a id="12572" href="Ledger.Utxo.html#12419" class="Bound">txb</a> <a id="12576" class="Symbol">.</a><a id="12577" href="Ledger.Transaction.html#3063" class="Field">txdonation</a><a id="12587" class="Symbol">)</a>


<a id="12591" class="Keyword">open</a> <a id="12596" href="Ledger.PParams.html#1570" class="Module">PParams</a>

<a id="12605" class="Keyword">private</a> <a id="12613" class="Keyword">variable</a>
  <a id="12624" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="12626" class="Symbol">:</a> <a id="12628" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a>
  <a id="12638" href="Ledger.Utxo.html#12638" class="Generalizable">s</a> <a id="12640" href="Ledger.Utxo.html#12640" class="Generalizable">s&#39;</a> <a id="12643" class="Symbol">:</a> <a id="12645" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a>
  <a id="12657" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="12660" class="Symbol">:</a> <a id="12662" href="Ledger.Transaction.html#4234" class="Record">Tx</a>
  <a id="12667" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a> <a id="12672" class="Symbol">:</a> <a id="12674" href="Ledger.Transaction.html#2402" class="Function">UTxO</a>
  <a id="12681" href="Ledger.Utxo.html#12681" class="Generalizable">fees</a> <a id="12686" href="Ledger.Utxo.html#12686" class="Generalizable">donations</a> <a id="12696" class="Symbol">:</a> <a id="12698" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12705" href="Ledger.Utxo.html#12705" class="Generalizable">deposits</a> <a id="12714" class="Symbol">:</a> <a id="12716" href="Ledger.Certs.html#573" class="Function">Deposits</a>

<a id="12726" class="Keyword">open</a> <a id="12731" href="Ledger.Utxo.html#2353" class="Module">UTxOEnv</a>

<a id="12740" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="12749" href="Ledger.Utxo.html#12749" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="12764" class="Symbol">:</a> <a id="12766" href="Ledger.Utxo.html#2353" class="Record">UTxOEnv</a> <a id="12774" class="Symbol">→</a> <a id="12776" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="12786" class="Symbol">→</a> <a id="12788" href="Ledger.Transaction.html#4234" class="Record">Tx</a> <a id="12791" class="Symbol">→</a> <a id="12793" href="Ledger.Utxo.html#2561" class="Record">UTxOState</a> <a id="12803" class="Symbol">→</a> <a id="12805" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="12812" class="Keyword">data</a> <a id="12817" href="Ledger.Utxo.html#12749" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="12832" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-Yes"></a><a id="12842" href="Ledger.Utxo.html#12842" class="InductiveConstructor">Scripts-Yes</a> <a id="12854" class="Symbol">:</a>
    <a id="12860" class="Keyword">let</a>  <a id="12865" href="Ledger.Utxo.html#12865" class="Bound">pp</a>         <a id="12876" class="Symbol">=</a> <a id="12878" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="12880" class="Symbol">.</a><a id="12881" href="Ledger.Utxo.html#2407" class="Field">pparams</a>


         <a id="12900" class="Keyword">open</a> <a id="12905" href="Ledger.Transaction.html#4234" class="Module">Tx</a> <a id="12908" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="12911" class="Keyword">renaming</a> <a id="12920" class="Symbol">(</a><a id="12921" href="Ledger.Transaction.html#4266" class="Field">body</a> <a id="12926" class="Symbol">to</a> <a id="12929" class="Field">txb</a><a id="12932" class="Symbol">);</a> <a id="12935" class="Keyword">open</a> <a id="12940" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="12947" href="Ledger.Utxo.html#12929" class="Function">txb</a>


         <a id="12962" href="Ledger.Utxo.html#12962" class="Bound">sLst</a>       <a id="12973" class="Symbol">=</a> <a id="12975" href="Ledger.ScriptValidation.html#5858" class="Function">collectPhaseTwoScriptInputs</a> <a id="13003" href="Ledger.Utxo.html#12865" class="Bound">pp</a> <a id="13006" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="13009" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a>
      <a id="13020" class="Keyword">in</a>
        <a id="13031" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="13033" href="Ledger.Utxo.html#4501" class="Datatype">ValidCertDeposits</a> <a id="13051" href="Ledger.Utxo.html#12865" class="Bound">pp</a> <a id="13054" href="Ledger.Utxo.html#12705" class="Generalizable">deposits</a> <a id="13063" href="Ledger.Transaction.html#2925" class="Function">txcerts</a>
        <a id="13079" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="13081" href="Ledger.ScriptValidation.html#6246" class="Function">evalScripts</a> <a id="13093" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="13096" href="Ledger.Utxo.html#12962" class="Bound">sLst</a> <a id="13101" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13103" href="Ledger.Transaction.html#4319" class="Function">isValid</a>
        <a id="13119" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="13121" href="Ledger.Transaction.html#4319" class="Function">isValid</a> <a id="13129" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13131" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
          <a id="13146" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
          <a id="13189" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="13191" href="Ledger.Utxo.html#12749" class="Datatype Operator">⊢</a> <a id="13193" href="Ledger.Prelude.html#2291" class="Function Operator">⟦</a> <a id="13195" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a> <a id="13200" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13202" href="Ledger.Utxo.html#12681" class="Generalizable">fees</a> <a id="13207" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13209" href="Ledger.Utxo.html#12705" class="Generalizable">deposits</a> <a id="13218" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13220" href="Ledger.Utxo.html#12686" class="Generalizable">donations</a> <a id="13230" href="Ledger.Prelude.html#2291" class="Function Operator">⟧</a> <a id="13232" href="Ledger.Utxo.html#12749" class="Datatype Operator">⇀⦇</a> <a id="13235" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="13238" href="Ledger.Utxo.html#12749" class="Datatype Operator">,UTXOS⦈</a> <a id="13246" href="Ledger.Prelude.html#2291" class="Function Operator">⟦</a> <a id="13248" class="Symbol">(</a><a id="13249" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a> <a id="13254" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="13256" href="Ledger.Transaction.html#2727" class="Function">txins</a> <a id="13262" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="13263" class="Symbol">)</a> <a id="13265" href="Axiom.Set.Map.html#6320" class="Function Operator">∪ˡ</a> <a id="13268" class="Symbol">(</a><a id="13269" href="Ledger.Utxo.html#3339" class="Function">outs</a> <a id="13274" href="Ledger.Utxo.html#12929" class="Function">txb</a><a id="13277" class="Symbol">)</a> <a id="13279" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13281" href="Ledger.Utxo.html#12681" class="Generalizable">fees</a> <a id="13286" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13288" href="Ledger.Transaction.html#2821" class="Function">txfee</a> <a id="13294" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13296" href="Ledger.Utxo.html#9153" class="Function">updateDeposits</a> <a id="13311" href="Ledger.Utxo.html#12865" class="Bound">pp</a> <a id="13314" href="Ledger.Utxo.html#12929" class="Function">txb</a> <a id="13318" href="Ledger.Utxo.html#12705" class="Generalizable">deposits</a> <a id="13327" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13329" href="Ledger.Utxo.html#12686" class="Generalizable">donations</a> <a id="13339" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13341" href="Ledger.Transaction.html#3063" class="Function">txdonation</a> <a id="13352" href="Ledger.Prelude.html#2291" class="Function Operator">⟧</a>
  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-No"></a><a id="13356" href="Ledger.Utxo.html#13356" class="InductiveConstructor">Scripts-No</a> <a id="13367" class="Symbol">:</a>
    <a id="13373" class="Keyword">let</a>  <a id="13378" href="Ledger.Utxo.html#13378" class="Bound">pp</a>         <a id="13389" class="Symbol">=</a> <a id="13391" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="13393" class="Symbol">.</a><a id="13394" href="Ledger.Utxo.html#2407" class="Field">pparams</a>


         <a id="13413" class="Keyword">open</a> <a id="13418" href="Ledger.Transaction.html#4234" class="Module">Tx</a> <a id="13421" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="13424" class="Keyword">renaming</a> <a id="13433" class="Symbol">(</a><a id="13434" href="Ledger.Transaction.html#4266" class="Field">body</a> <a id="13439" class="Symbol">to</a> <a id="13442" class="Field">txb</a><a id="13445" class="Symbol">);</a> <a id="13448" class="Keyword">open</a> <a id="13453" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="13460" href="Ledger.Utxo.html#13442" class="Function">txb</a>


         <a id="13475" href="Ledger.Utxo.html#13475" class="Bound">sLst</a>       <a id="13486" class="Symbol">=</a> <a id="13488" href="Ledger.ScriptValidation.html#5858" class="Function">collectPhaseTwoScriptInputs</a> <a id="13516" href="Ledger.Utxo.html#13378" class="Bound">pp</a> <a id="13519" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="13522" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a>
      <a id="13533" class="Keyword">in</a>
        <a id="13544" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="13546" href="Ledger.ScriptValidation.html#6246" class="Function">evalScripts</a> <a id="13558" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="13561" href="Ledger.Utxo.html#13475" class="Bound">sLst</a> <a id="13566" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13568" href="Ledger.Transaction.html#4319" class="Function">isValid</a>
        <a id="13584" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="13586" href="Ledger.Transaction.html#4319" class="Function">isValid</a> <a id="13594" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13596" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
          <a id="13612" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
          <a id="13655" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="13657" href="Ledger.Utxo.html#12749" class="Datatype Operator">⊢</a> <a id="13659" href="Ledger.Prelude.html#2291" class="Function Operator">⟦</a> <a id="13661" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a> <a id="13666" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13668" href="Ledger.Utxo.html#12681" class="Generalizable">fees</a> <a id="13673" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13675" href="Ledger.Utxo.html#12705" class="Generalizable">deposits</a> <a id="13684" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13686" href="Ledger.Utxo.html#12686" class="Generalizable">donations</a> <a id="13696" href="Ledger.Prelude.html#2291" class="Function Operator">⟧</a> <a id="13698" href="Ledger.Utxo.html#12749" class="Datatype Operator">⇀⦇</a> <a id="13701" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="13704" href="Ledger.Utxo.html#12749" class="Datatype Operator">,UTXOS⦈</a> <a id="13712" href="Ledger.Prelude.html#2291" class="Function Operator">⟦</a> <a id="13714" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a> <a id="13719" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="13721" href="Ledger.Transaction.html#3287" class="Function">collateral</a> <a id="13732" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a> <a id="13734" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13736" href="Ledger.Utxo.html#12681" class="Generalizable">fees</a> <a id="13741" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13743" href="Ledger.Utxo.html#3499" class="Function">cbalance</a> <a id="13752" class="Symbol">(</a><a id="13753" href="Ledger.Utxo.html#12667" class="Generalizable">utxo</a> <a id="13758" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="13760" href="Ledger.Transaction.html#3287" class="Function">collateral</a><a id="13770" class="Symbol">)</a> <a id="13772" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13774" href="Ledger.Utxo.html#12705" class="Generalizable">deposits</a> <a id="13783" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13785" href="Ledger.Utxo.html#12686" class="Generalizable">donations</a> <a id="13795" href="Ledger.Prelude.html#2291" class="Function Operator">⟧</a>


<a id="13799" class="Keyword">unquoteDecl</a> <a id="Scripts-Yes-premises"></a><a id="13811" href="Ledger.Utxo.html#13811" class="Function">Scripts-Yes-premises</a> <a id="13832" class="Symbol">=</a> <a id="13834" href="Tactic.Premises.html#1544" class="Function">genPremises</a> <a id="13846" href="Ledger.Utxo.html#13811" class="Function">Scripts-Yes-premises</a> <a id="13867" class="Symbol">(</a><a id="13868" class="Keyword">quote</a> <a id="13874" href="Ledger.Utxo.html#12842" class="InductiveConstructor">Scripts-Yes</a><a id="13885" class="Symbol">)</a>
<a id="13887" class="Keyword">unquoteDecl</a> <a id="Scripts-No-premises"></a><a id="13899" href="Ledger.Utxo.html#13899" class="Function">Scripts-No-premises</a>  <a id="13920" class="Symbol">=</a> <a id="13922" href="Tactic.Premises.html#1544" class="Function">genPremises</a> <a id="13934" href="Ledger.Utxo.html#13899" class="Function">Scripts-No-premises</a>  <a id="13955" class="Symbol">(</a><a id="13956" class="Keyword">quote</a> <a id="13962" href="Ledger.Utxo.html#13356" class="InductiveConstructor">Scripts-No</a><a id="13972" class="Symbol">)</a>

<a id="13975" class="Keyword">data</a> <a id="13980" href="Ledger.Utxo.html#3206" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="13994" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO-inductive"></a><a id="14004" href="Ledger.Utxo.html#14004" class="InductiveConstructor">UTXO-inductive</a> <a id="14019" class="Symbol">:</a>
    <a id="14025" class="Keyword">let</a> <a id="14029" href="Ledger.Utxo.html#14029" class="Bound">pp</a>        <a id="14039" class="Symbol">=</a> <a id="14041" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="14043" class="Symbol">.</a><a id="14044" href="Ledger.Utxo.html#2407" class="Field">pparams</a>
        <a id="14060" href="Ledger.Utxo.html#14060" class="Bound">slot</a>      <a id="14070" class="Symbol">=</a> <a id="14072" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="14074" class="Symbol">.</a><a id="14075" href="Ledger.Utxo.html#2386" class="Field">slot</a>
        <a id="14088" href="Ledger.Utxo.html#14088" class="Bound">treasury</a>  <a id="14098" class="Symbol">=</a> <a id="14100" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="14102" class="Symbol">.</a><a id="14103" href="Ledger.Utxo.html#2431" class="Field">treasury</a>
        <a id="14120" href="Ledger.Utxo.html#14120" class="Bound">utxo</a>      <a id="14130" class="Symbol">=</a> <a id="14132" href="Ledger.Utxo.html#12638" class="Generalizable">s</a> <a id="14134" class="Symbol">.</a><a id="14135" href="Ledger.Utxo.html#2625" class="Field">UTxOState.utxo</a>


        <a id="14160" class="Keyword">open</a> <a id="14165" href="Ledger.Transaction.html#4234" class="Module">Tx</a> <a id="14168" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="14171" class="Keyword">renaming</a> <a id="14180" class="Symbol">(</a><a id="14181" href="Ledger.Transaction.html#4266" class="Field">body</a> <a id="14186" class="Symbol">to</a> <a id="14189" class="Field">txb</a><a id="14192" class="Symbol">);</a> <a id="14195" class="Keyword">open</a> <a id="14200" href="Ledger.Transaction.html#2691" class="Module">TxBody</a> <a id="14207" href="Ledger.Utxo.html#14189" class="Function">txb</a>


        <a id="14221" href="Ledger.Utxo.html#14221" class="Bound">txoutsʰ</a>   <a id="14231" class="Symbol">=</a> <a id="14233" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="14243" href="Ledger.Transaction.html#4585" class="Function">txOutHash</a> <a id="14253" href="Ledger.Transaction.html#2787" class="Function">txouts</a>
        <a id="14268" href="Ledger.Utxo.html#14268" class="Bound">overhead</a>  <a id="14278" class="Symbol">=</a> <a id="14280" class="Number">160</a>
    <a id="14288" class="Keyword">in</a>
    <a id="14295" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="14297" href="Ledger.Transaction.html#2727" class="Function">txins</a> <a id="14303" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14305" href="Class.HasEmptySet.html#287" class="Field">∅</a>                              <a id="14336" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14338" href="Ledger.Transaction.html#2727" class="Function">txins</a> <a id="14344" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="14346" href="Ledger.Transaction.html#2757" class="Function">refInputs</a> <a id="14356" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="14358" href="Class.IsSet.html#916" class="Function">dom</a> <a id="14362" href="Ledger.Utxo.html#14120" class="Bound">utxo</a>
    <a id="14371" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14373" href="Ledger.Transaction.html#2727" class="Function">txins</a> <a id="14379" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="14381" href="Ledger.Transaction.html#2757" class="Function">refInputs</a> <a id="14391" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14393" href="Class.HasEmptySet.html#287" class="Field">∅</a>                  <a id="14412" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14414" href="Ledger.Utxo.html#9711" class="Datatype">inInterval</a> <a id="14425" href="Ledger.Utxo.html#14060" class="Bound">slot</a> <a id="14430" href="Ledger.Transaction.html#2878" class="Function">txvldt</a>
    <a id="14441" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14443" href="Ledger.Utxo.html#11217" class="Function">feesOK</a> <a id="14450" href="Ledger.Utxo.html#14029" class="Bound">pp</a> <a id="14453" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="14456" href="Ledger.Utxo.html#14120" class="Bound">utxo</a>                      <a id="14482" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14484" href="Ledger.Utxo.html#12146" class="Function">consumed</a> <a id="14493" href="Ledger.Utxo.html#14029" class="Bound">pp</a> <a id="14496" href="Ledger.Utxo.html#12638" class="Generalizable">s</a> <a id="14498" href="Ledger.Utxo.html#14189" class="Function">txb</a> <a id="14502" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14504" href="Ledger.Utxo.html#12354" class="Function">produced</a> <a id="14513" href="Ledger.Utxo.html#14029" class="Bound">pp</a> <a id="14516" href="Ledger.Utxo.html#12638" class="Generalizable">s</a> <a id="14518" href="Ledger.Utxo.html#14189" class="Function">txb</a>
    <a id="14526" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14528" href="Ledger.TokenAlgebra.html#812" class="Function">coin</a> <a id="14533" href="Ledger.Transaction.html#2849" class="Function">mint</a> <a id="14538" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14540" class="Number">0</a>                          <a id="14567" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14569" href="Ledger.Transaction.html#3234" class="Function">txsize</a> <a id="14576" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14578" href="Ledger.PParams.html#1651" class="Field">maxTxSize</a> <a id="14588" href="Ledger.Utxo.html#14029" class="Bound">pp</a>
    <a id="14595" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14597" href="Ledger.Utxo.html#3565" class="Function">refScriptsSize</a> <a id="14612" href="Ledger.Utxo.html#14120" class="Bound">utxo</a> <a id="14617" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="14620" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14622" href="Ledger.Utxo.html#14029" class="Bound">pp</a> <a id="14625" class="Symbol">.</a><a id="14626" href="Ledger.PParams.html#2440" class="Field">maxRefScriptSizePerTx</a>
    <a id="14652" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14654" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14657" href="Ledger.Utxo.html#14657" class="Bound">(_</a> <a id="14660" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14662" href="Ledger.Utxo.html#14662" class="Bound">txout</a><a id="14667" href="Ledger.Utxo.html#14657" class="Bound">)</a> <a id="14669" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14671" href="Ledger.Prelude.html#2393" class="Function Operator">∣</a> <a id="14673" href="Ledger.Utxo.html#14221" class="Bound">txoutsʰ</a> <a id="14681" href="Ledger.Prelude.html#2393" class="Function Operator">∣</a> <a id="14683" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14693" href="Ledger.TokenAlgebra.html#857" class="Function">inject</a> <a id="14700" class="Symbol">((</a><a id="14702" href="Ledger.Utxo.html#14268" class="Bound">overhead</a> <a id="14711" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="14713" href="Ledger.Utxo.html#2226" class="Function">utxoEntrySize</a> <a id="14727" href="Ledger.Utxo.html#14662" class="Bound">txout</a><a id="14732" class="Symbol">)</a> <a id="14734" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="14736" href="Ledger.PParams.html#2306" class="Field">coinsPerUTxOByte</a> <a id="14753" href="Ledger.Utxo.html#14029" class="Bound">pp</a><a id="14755" class="Symbol">)</a> <a id="14757" href="Ledger.TokenAlgebra.html#1008" class="Function Operator">≤ᵗ</a> <a id="14760" href="Ledger.Transaction.html#4674" class="Function">getValueʰ</a> <a id="14770" href="Ledger.Utxo.html#14662" class="Bound">txout</a>
    <a id="14780" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14782" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14785" href="Ledger.Utxo.html#14785" class="Bound">(_</a> <a id="14788" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14790" href="Ledger.Utxo.html#14790" class="Bound">txout</a><a id="14795" href="Ledger.Utxo.html#14785" class="Bound">)</a> <a id="14797" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14799" href="Ledger.Prelude.html#2393" class="Function Operator">∣</a> <a id="14801" href="Ledger.Utxo.html#14221" class="Bound">txoutsʰ</a> <a id="14809" href="Ledger.Prelude.html#2393" class="Function Operator">∣</a> <a id="14811" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14821" href="Ledger.Abstract.html#664" class="Field">serSize</a> <a id="14829" class="Symbol">(</a><a id="14830" href="Ledger.Transaction.html#4674" class="Function">getValueʰ</a> <a id="14840" href="Ledger.Utxo.html#14790" class="Bound">txout</a><a id="14845" class="Symbol">)</a> <a id="14847" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14849" href="Ledger.PParams.html#1831" class="Field">maxValSize</a> <a id="14860" href="Ledger.Utxo.html#14029" class="Bound">pp</a>
    <a id="14867" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14869" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14872" href="Ledger.Utxo.html#14872" class="Bound">(</a><a id="14873" href="Ledger.Utxo.html#14873" class="Bound">a</a> <a id="14875" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14877" href="Ledger.Utxo.html#14872" class="Bound">_)</a> <a id="14880" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14882" href="Class.IsSet.html#959" class="Function">range</a> <a id="14888" href="Ledger.Utxo.html#14221" class="Bound">txoutsʰ</a> <a id="14896" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14906" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="14914" class="Symbol">(</a><a id="14915" href="Function.Base.html#725" class="Function">const</a> <a id="14921" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="14922" class="Symbol">)</a> <a id="14924" class="Symbol">(λ</a> <a id="14927" href="Ledger.Utxo.html#14927" class="Bound">a</a> <a id="14929" class="Symbol">→</a> <a id="14931" href="Ledger.Utxo.html#14927" class="Bound">a</a> <a id="14933" class="Symbol">.</a><a id="14934" href="Ledger.Address.html#1313" class="Field">BootstrapAddr.attrsSize</a> <a id="14958" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14960" class="Number">64</a><a id="14962" class="Symbol">)</a> <a id="14964" href="Ledger.Utxo.html#14873" class="Bound">a</a>
    <a id="14970" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="14972" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14975" href="Ledger.Utxo.html#14975" class="Bound">(</a><a id="14976" href="Ledger.Utxo.html#14976" class="Bound">a</a> <a id="14978" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14980" href="Ledger.Utxo.html#14975" class="Bound">_)</a> <a id="14983" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14985" href="Class.IsSet.html#959" class="Function">range</a> <a id="14991" href="Ledger.Utxo.html#14221" class="Bound">txoutsʰ</a> <a id="14999" href="Class.IsSet.html#576" class="Function">]</a>  <a id="15002" href="Ledger.Address.html#2548" class="Function">netId</a> <a id="15008" href="Ledger.Utxo.html#14976" class="Bound">a</a>         <a id="15018" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15020" href="Ledger.Types.Epoch.html#2154" class="Function">NetworkId</a>
    <a id="15034" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15036" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15039" href="Ledger.Utxo.html#15039" class="Bound">a</a> <a id="15041" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15043" href="Class.IsSet.html#916" class="Function">dom</a> <a id="15047" href="Ledger.Transaction.html#2959" class="Function">txwdrls</a> <a id="15055" href="Class.IsSet.html#576" class="Function">]</a>          <a id="15066" href="Ledger.Address.html#1542" class="Field">NetworkIdOf</a> <a id="15078" href="Ledger.Utxo.html#15039" class="Bound">a</a> <a id="15080" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15082" href="Ledger.Types.Epoch.html#2154" class="Function">NetworkId</a>
    <a id="15096" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15098" href="Ledger.Transaction.html#3163" class="Function">txNetworkId</a>  <a id="15111" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15113" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15118" href="Ledger.Types.Epoch.html#2154" class="Function">NetworkId</a>
    <a id="15132" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15134" href="Ledger.Transaction.html#3200" class="Function">curTreasury</a>  <a id="15147" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15149" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15154" href="Ledger.Utxo.html#14088" class="Bound">treasury</a>
    <a id="15167" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="15169" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="15171" href="Ledger.Utxo.html#12749" class="Datatype Operator">⊢</a> <a id="15173" href="Ledger.Utxo.html#12638" class="Generalizable">s</a> <a id="15175" href="Ledger.Utxo.html#12749" class="Datatype Operator">⇀⦇</a> <a id="15178" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="15181" href="Ledger.Utxo.html#12749" class="Datatype Operator">,UTXOS⦈</a> <a id="15189" href="Ledger.Utxo.html#12640" class="Generalizable">s&#39;</a>
      <a id="15198" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="15237" href="Ledger.Utxo.html#12624" class="Generalizable">Γ</a> <a id="15239" href="Ledger.Utxo.html#3206" class="Datatype Operator">⊢</a> <a id="15241" href="Ledger.Utxo.html#12638" class="Generalizable">s</a> <a id="15243" href="Ledger.Utxo.html#3206" class="Datatype Operator">⇀⦇</a> <a id="15246" href="Ledger.Utxo.html#12657" class="Generalizable">tx</a> <a id="15249" href="Ledger.Utxo.html#3206" class="Datatype Operator">,UTXO⦈</a> <a id="15256" href="Ledger.Utxo.html#12640" class="Generalizable">s&#39;</a>


<a id="15261" class="Keyword">pattern</a> <a id="UTXO-inductive⋯"></a><a id="15269" href="Ledger.Utxo.html#15269" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="15285" href="Ledger.Utxo.html#15367" class="Bound">tx</a> <a id="15288" href="Ledger.Utxo.html#15350" class="Bound">Γ</a> <a id="15290" href="Ledger.Utxo.html#15358" class="Bound">s</a> <a id="15292" href="Ledger.Utxo.html#15372" class="Bound">x</a> <a id="15294" href="Ledger.Utxo.html#15376" class="Bound">y</a> <a id="15296" href="Ledger.Utxo.html#15380" class="Bound">z</a> <a id="15298" href="Ledger.Utxo.html#15384" class="Bound">w</a> <a id="15300" href="Ledger.Utxo.html#15388" class="Bound">k</a> <a id="15302" href="Ledger.Utxo.html#15392" class="Bound">l</a> <a id="15304" href="Ledger.Utxo.html#15396" class="Bound">m</a> <a id="15306" href="Ledger.Utxo.html#15400" class="Bound">v</a> <a id="15308" href="Ledger.Utxo.html#15404" class="Bound">j</a> <a id="15310" href="Ledger.Utxo.html#15408" class="Bound">n</a> <a id="15312" href="Ledger.Utxo.html#15412" class="Bound">o</a> <a id="15314" href="Ledger.Utxo.html#15416" class="Bound">p</a> <a id="15316" href="Ledger.Utxo.html#15420" class="Bound">q</a> <a id="15318" href="Ledger.Utxo.html#15424" class="Bound">r</a> <a id="15320" href="Ledger.Utxo.html#15428" class="Bound">t</a> <a id="15322" href="Ledger.Utxo.html#15432" class="Bound">u</a> <a id="15324" href="Ledger.Utxo.html#15436" class="Bound">h</a>
  <a id="15328" class="Symbol">=</a> <a id="15330" href="Ledger.Utxo.html#14004" class="InductiveConstructor">UTXO-inductive</a> <a id="15345" class="Symbol">{</a><a id="15346" class="Argument">Γ</a> <a id="15348" class="Symbol">=</a> <a id="15350" href="Ledger.Utxo.html#15350" class="Bound">Γ</a><a id="15351" class="Symbol">}</a> <a id="15353" class="Symbol">{</a><a id="15354" class="Argument">s</a> <a id="15356" class="Symbol">=</a> <a id="15358" href="Ledger.Utxo.html#15358" class="Bound">s</a><a id="15359" class="Symbol">}</a> <a id="15361" class="Symbol">{</a><a id="15362" class="Argument">tx</a> <a id="15365" class="Symbol">=</a> <a id="15367" href="Ledger.Utxo.html#15367" class="Bound">tx</a><a id="15369" class="Symbol">}</a> <a id="15371" class="Symbol">(</a><a id="15372" href="Ledger.Utxo.html#15372" class="Bound">x</a> <a id="15374" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15376" href="Ledger.Utxo.html#15376" class="Bound">y</a> <a id="15378" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15380" href="Ledger.Utxo.html#15380" class="Bound">z</a> <a id="15382" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15384" href="Ledger.Utxo.html#15384" class="Bound">w</a> <a id="15386" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15388" href="Ledger.Utxo.html#15388" class="Bound">k</a> <a id="15390" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15392" href="Ledger.Utxo.html#15392" class="Bound">l</a> <a id="15394" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15396" href="Ledger.Utxo.html#15396" class="Bound">m</a> <a id="15398" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15400" href="Ledger.Utxo.html#15400" class="Bound">v</a> <a id="15402" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15404" href="Ledger.Utxo.html#15404" class="Bound">j</a> <a id="15406" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15408" href="Ledger.Utxo.html#15408" class="Bound">n</a> <a id="15410" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15412" href="Ledger.Utxo.html#15412" class="Bound">o</a> <a id="15414" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15416" href="Ledger.Utxo.html#15416" class="Bound">p</a> <a id="15418" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15420" href="Ledger.Utxo.html#15420" class="Bound">q</a> <a id="15422" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15424" href="Ledger.Utxo.html#15424" class="Bound">r</a> <a id="15426" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15428" href="Ledger.Utxo.html#15428" class="Bound">t</a> <a id="15430" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15432" href="Ledger.Utxo.html#15432" class="Bound">u</a> <a id="15434" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15436" href="Ledger.Utxo.html#15436" class="Bound">h</a><a id="15437" class="Symbol">)</a>
<a id="15439" class="Keyword">unquoteDecl</a> <a id="UTXO-premises"></a><a id="15451" href="Ledger.Utxo.html#15451" class="Function">UTXO-premises</a> <a id="15465" class="Symbol">=</a> <a id="15467" href="Tactic.Premises.html#1544" class="Function">genPremises</a> <a id="15479" href="Ledger.Utxo.html#15451" class="Function">UTXO-premises</a> <a id="15493" class="Symbol">(</a><a id="15494" class="Keyword">quote</a> <a id="15500" href="Ledger.Utxo.html#14004" class="InductiveConstructor">UTXO-inductive</a><a id="15514" class="Symbol">)</a>

</pre></body></html>