<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Script</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.Morphism.html" class="Module">Algebra.Morphism</a>
<a id="55" class="Keyword">open</a> <a id="60" class="Keyword">import</a> <a id="67" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="96" class="Keyword">using</a> <a id="102" class="Symbol">(</a><a id="103" href="Data.List.Relation.Unary.All.html#1644" class="Datatype">All</a><a id="106" class="Symbol">;</a> <a id="108" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor">[]</a><a id="110" class="Symbol">;</a> <a id="112" href="Data.List.Relation.Unary.All.html#1724" class="InductiveConstructor Operator">_∷_</a><a id="115" class="Symbol">;</a> <a id="117" href="Data.List.Relation.Unary.All.html#6425" class="Function">all?</a><a id="121" class="Symbol">;</a> <a id="123" href="Data.List.Relation.Unary.All.html#2478" class="Function">uncons</a><a id="129" class="Symbol">)</a>
<a id="131" class="Keyword">open</a> <a id="136" class="Keyword">import</a> <a id="143" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a>
<a id="172" class="Keyword">open</a> <a id="177" class="Keyword">import</a> <a id="184" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="204" class="Keyword">using</a> <a id="210" class="Symbol">(</a><a id="211" href="Data.Nat.Properties.html#17331" class="Function">+-0-commutativeMonoid</a><a id="232" class="Symbol">;</a> <a id="234" href="Data.Nat.Properties.html#3266" class="Function">suc-injective</a><a id="247" class="Symbol">)</a>

<a id="250" class="Keyword">open</a> <a id="255" class="Keyword">import</a> <a id="262" href="stdlib.Data.List.Relation.Unary.MOf.html" class="Module">stdlib.Data.List.Relation.Unary.MOf</a>

<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>
<a id="331" class="Keyword">open</a> <a id="336" class="Keyword">import</a> <a id="343" href="Tactic.Inline.html" class="Module">Tactic.Inline</a>

<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="385" class="Keyword">hiding</a> <a id="392" class="Symbol">(</a><a id="393" href="Axiom.Set.html#9724" class="Function">All</a><a id="396" class="Symbol">;</a> <a id="398" href="Axiom.Set.html#9793" class="Function">Any</a><a id="401" class="Symbol">;</a> <a id="403" href="Axiom.Set.html#10821" class="Function">all?</a><a id="407" class="Symbol">;</a> <a id="409" href="Axiom.Set.html#10895" class="Function">any?</a><a id="413" class="Symbol">;</a> <a id="415" href="Data.List.Base.html#7451" class="Function Operator">_∷ʳ_</a><a id="419" class="Symbol">;</a> <a id="421" href="Data.List.Base.html#8345" class="Function">uncons</a><a id="427" class="Symbol">;</a> <a id="429" href="Interface.HasSubset.html#158" class="Field Operator">_⊆_</a><a id="432" class="Symbol">)</a>
<a id="434" class="Keyword">open</a> <a id="439" class="Keyword">import</a> <a id="446" href="Ledger.Conway.Crypto.html" class="Module">Ledger.Conway.Crypto</a>
<a id="467" class="Keyword">open</a> <a id="472" class="Keyword">import</a> <a id="479" href="Ledger.Conway.Types.Epoch.html" class="Module">Ledger.Conway.Types.Epoch</a>

<a id="506" class="Keyword">import</a> <a id="513" href="Ledger.Conway.Script.html" class="Module">Ledger.Conway.Script</a>

<a id="535" class="Keyword">module</a> <a id="542" href="Ledger.Conway.Conformance.Script.html" class="Module">Ledger.Conway.Conformance.Script</a>
  <a id="577" class="Symbol">(</a><a id="578" href="Ledger.Conway.Conformance.Script.html#578" class="Bound">crypto</a> <a id="585" class="Symbol">:</a> <a id="587" class="Symbol">_)</a> <a id="590" class="Symbol">(</a><a id="591" class="Keyword">open</a> <a id="596" href="Ledger.Conway.Crypto.html#1050" class="Module">Crypto</a> <a id="603" href="Ledger.Conway.Conformance.Script.html#578" class="Bound">crypto</a><a id="609" class="Symbol">)</a>
  <a id="613" class="Symbol">(</a><a id="614" href="Ledger.Conway.Conformance.Script.html#614" class="Bound">es</a>     <a id="621" class="Symbol">:</a> <a id="623" class="Symbol">_)</a> <a id="626" class="Symbol">(</a><a id="627" class="Keyword">open</a> <a id="632" href="Ledger.Conway.Types.Epoch.html#524" class="Module">EpochStructure</a> <a id="647" href="Ledger.Conway.Conformance.Script.html#614" class="Bound">es</a><a id="649" class="Symbol">)</a>
  <a id="653" class="Keyword">where</a>

<a id="660" class="Keyword">open</a> <a id="665" href="Ledger.Conway.Script.html" class="Module">Ledger.Conway.Script</a> <a id="686" href="Ledger.Conway.Conformance.Script.html#578" class="Bound">crypto</a> <a id="693" href="Ledger.Conway.Conformance.Script.html#614" class="Bound">es</a>

<a id="697" class="Keyword">record</a> <a id="HSTimelock"></a><a id="704" href="Ledger.Conway.Conformance.Script.html#704" class="Record">HSTimelock</a> <a id="715" class="Symbol">:</a> <a id="717" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="722" class="Keyword">where</a>
  <a id="730" class="Keyword">field</a>
    <a id="HSTimelock.timelock"></a><a id="740" href="Ledger.Conway.Conformance.Script.html#740" class="Field">timelock</a>     <a id="753" class="Symbol">:</a> <a id="755" href="Ledger.Conway.Script.html#2071" class="Datatype">Timelock</a>
    <a id="HSTimelock.tlScriptHash"></a><a id="768" href="Ledger.Conway.Conformance.Script.html#768" class="Field">tlScriptHash</a> <a id="781" class="Symbol">:</a> <a id="783" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
    <a id="HSTimelock.tlScriptSize"></a><a id="798" href="Ledger.Conway.Conformance.Script.html#798" class="Field">tlScriptSize</a> <a id="811" class="Symbol">:</a> <a id="813" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="816" class="Keyword">instance</a>
  <a id="Hashable-HSTimelock"></a><a id="827" href="Ledger.Conway.Conformance.Script.html#827" class="Function">Hashable-HSTimelock</a> <a id="847" class="Symbol">:</a> <a id="849" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="858" href="Ledger.Conway.Conformance.Script.html#704" class="Record">HSTimelock</a> <a id="869" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
  <a id="882" href="Ledger.Conway.Conformance.Script.html#827" class="Function">Hashable-HSTimelock</a> <a id="902" class="Symbol">.</a><a id="903" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="908" class="Symbol">=</a> <a id="910" href="Ledger.Conway.Conformance.Script.html#768" class="Field">HSTimelock.tlScriptHash</a>

<a id="935" class="Keyword">unquoteDecl</a> <a id="DecEq-HSTimelock"></a><a id="947" href="Ledger.Conway.Conformance.Script.html#947" class="Function">DecEq-HSTimelock</a> <a id="964" class="Symbol">=</a> <a id="966" href="Tactic.Derive.DecEq.html#3519" class="Function">derive-DecEq</a> <a id="979" class="Symbol">((</a><a id="981" class="Keyword">quote</a> <a id="987" href="Ledger.Conway.Conformance.Script.html#704" class="Record">HSTimelock</a> <a id="998" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1000" href="Ledger.Conway.Conformance.Script.html#947" class="Function">DecEq-HSTimelock</a><a id="1016" class="Symbol">)</a> <a id="1018" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1020" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1022" class="Symbol">)</a>

<a id="1025" class="Keyword">record</a> <a id="HSPlutusScript"></a><a id="1032" href="Ledger.Conway.Conformance.Script.html#1032" class="Record">HSPlutusScript</a> <a id="1047" class="Symbol">:</a> <a id="1049" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1054" class="Keyword">where</a>
  <a id="1062" class="Keyword">constructor</a> <a id="MkHSPlutusScript"></a><a id="1074" href="Ledger.Conway.Conformance.Script.html#1074" class="InductiveConstructor">MkHSPlutusScript</a>
  <a id="1093" class="Keyword">field</a> <a id="HSPlutusScript.psScriptHash"></a><a id="1099" href="Ledger.Conway.Conformance.Script.html#1099" class="Field">psScriptHash</a> <a id="1112" class="Symbol">:</a> <a id="1114" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
        <a id="HSPlutusScript.psScriptSize"></a><a id="1133" href="Ledger.Conway.Conformance.Script.html#1133" class="Field">psScriptSize</a> <a id="1146" class="Symbol">:</a> <a id="1148" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="1151" class="Keyword">instance</a>
  <a id="Hashable-HSPlutusScript"></a><a id="1162" href="Ledger.Conway.Conformance.Script.html#1162" class="Function">Hashable-HSPlutusScript</a> <a id="1186" class="Symbol">:</a> <a id="1188" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="1197" href="Ledger.Conway.Conformance.Script.html#1032" class="Record">HSPlutusScript</a> <a id="1212" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
  <a id="1225" href="Ledger.Conway.Conformance.Script.html#1162" class="Function">Hashable-HSPlutusScript</a> <a id="1249" class="Symbol">.</a><a id="1250" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="1255" class="Symbol">=</a> <a id="1257" href="Ledger.Conway.Conformance.Script.html#1099" class="Field">HSPlutusScript.psScriptHash</a>

<a id="P1ScriptStructure-HTL"></a><a id="1286" href="Ledger.Conway.Conformance.Script.html#1286" class="Function">P1ScriptStructure-HTL</a> <a id="1308" class="Symbol">:</a> <a id="1310" href="Ledger.Conway.Script.html#626" class="Record">P1ScriptStructure</a>
<a id="1328" href="Ledger.Conway.Conformance.Script.html#1286" class="Function">P1ScriptStructure-HTL</a> <a id="1350" class="Symbol">=</a> <a id="1352" class="Keyword">record</a>
  <a id="1361" class="Symbol">{</a> <a id="1363" href="Ledger.Conway.Script.html#666" class="Field">P1Script</a> <a id="1372" class="Symbol">=</a> <a id="1374" href="Ledger.Conway.Conformance.Script.html#704" class="Record">HSTimelock</a>
  <a id="1387" class="Symbol">;</a> <a id="1389" href="Ledger.Conway.Script.html#690" class="Field">validP1Script</a> <a id="1403" class="Symbol">=</a> <a id="1405" class="Symbol">λ</a> <a id="1407" href="Ledger.Conway.Conformance.Script.html#1407" class="Bound">x</a> <a id="1409" href="Ledger.Conway.Conformance.Script.html#1409" class="Bound">y</a> <a id="1411" class="Symbol">→</a> <a id="1413" href="Ledger.Conway.Script.html#2710" class="Datatype">evalTimelock</a> <a id="1426" href="Ledger.Conway.Conformance.Script.html#1407" class="Bound">x</a> <a id="1428" href="Ledger.Conway.Conformance.Script.html#1409" class="Bound">y</a> <a id="1430" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1432" href="Ledger.Conway.Conformance.Script.html#740" class="Field">HSTimelock.timelock</a> <a id="1452" class="Symbol">}</a>

</pre></body></html>