<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Script</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.Morphism.html" class="Module">Algebra.Morphism</a>
<a id="55" class="Keyword">open</a> <a id="60" class="Keyword">import</a> <a id="67" href="Data.List.Relation.Unary.All.html" class="Module">Data.List.Relation.Unary.All</a> <a id="96" class="Keyword">using</a> <a id="102" class="Symbol">(</a><a id="103" href="Data.List.Relation.Unary.All.html#1644" class="Datatype">All</a><a id="106" class="Symbol">;</a> <a id="108" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor">[]</a><a id="110" class="Symbol">;</a> <a id="112" href="Data.List.Relation.Unary.All.html#1724" class="InductiveConstructor Operator">_∷_</a><a id="115" class="Symbol">;</a> <a id="117" href="Data.List.Relation.Unary.All.html#6425" class="Function">all?</a><a id="121" class="Symbol">;</a> <a id="123" href="Data.List.Relation.Unary.All.html#2478" class="Function">uncons</a><a id="129" class="Symbol">)</a>
<a id="131" class="Keyword">open</a> <a id="136" class="Keyword">import</a> <a id="143" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a>
<a id="172" class="Keyword">open</a> <a id="177" class="Keyword">import</a> <a id="184" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="204" class="Keyword">using</a> <a id="210" class="Symbol">(</a><a id="211" href="Data.Nat.Properties.html#17331" class="Function">+-0-commutativeMonoid</a><a id="232" class="Symbol">;</a> <a id="234" href="Data.Nat.Properties.html#3266" class="Function">suc-injective</a><a id="247" class="Symbol">)</a>

<a id="250" class="Keyword">open</a> <a id="255" class="Keyword">import</a> <a id="262" href="stdlib.Data.List.Relation.Unary.MOf.html" class="Module">stdlib.Data.List.Relation.Unary.MOf</a>


<a id="300" class="Keyword">open</a> <a id="305" class="Keyword">import</a> <a id="312" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="327" class="Keyword">hiding</a> <a id="334" class="Symbol">(</a><a id="335" href="Axiom.Set.html#9724" class="Function">All</a><a id="338" class="Symbol">;</a> <a id="340" href="Axiom.Set.html#9793" class="Function">Any</a><a id="343" class="Symbol">;</a> <a id="345" href="Axiom.Set.html#10821" class="Function">all?</a><a id="349" class="Symbol">;</a> <a id="351" href="Axiom.Set.html#10895" class="Function">any?</a><a id="355" class="Symbol">;</a> <a id="357" href="Data.List.Base.html#7451" class="Function Operator">_∷ʳ_</a><a id="361" class="Symbol">;</a> <a id="363" href="Data.List.Base.html#8345" class="Function">uncons</a><a id="369" class="Symbol">;</a> <a id="371" href="Interface.HasSubset.html#158" class="Field Operator">_⊆_</a><a id="374" class="Symbol">)</a>
<a id="376" class="Keyword">open</a> <a id="381" class="Keyword">import</a> <a id="388" href="Ledger.Conway.Crypto.html" class="Module">Ledger.Conway.Crypto</a>
<a id="409" class="Keyword">open</a> <a id="414" class="Keyword">import</a> <a id="421" href="Ledger.Conway.Types.Epoch.html" class="Module">Ledger.Conway.Types.Epoch</a>

<a id="448" class="Keyword">import</a> <a id="455" href="Ledger.Conway.Script.html" class="Module">Ledger.Conway.Script</a>

<a id="477" class="Keyword">module</a> <a id="484" href="Ledger.Conway.Conformance.Script.html" class="Module">Ledger.Conway.Conformance.Script</a>
  <a id="519" class="Symbol">(</a><a id="520" href="Ledger.Conway.Conformance.Script.html#520" class="Bound">crypto</a> <a id="527" class="Symbol">:</a> <a id="529" class="Symbol">_)</a> <a id="532" class="Symbol">(</a><a id="533" class="Keyword">open</a> <a id="538" href="Ledger.Conway.Crypto.html#1050" class="Module">Crypto</a> <a id="545" href="Ledger.Conway.Conformance.Script.html#520" class="Bound">crypto</a><a id="551" class="Symbol">)</a>
  <a id="555" class="Symbol">(</a><a id="556" href="Ledger.Conway.Conformance.Script.html#556" class="Bound">es</a>     <a id="563" class="Symbol">:</a> <a id="565" class="Symbol">_)</a> <a id="568" class="Symbol">(</a><a id="569" class="Keyword">open</a> <a id="574" href="Ledger.Conway.Types.Epoch.html#524" class="Module">EpochStructure</a> <a id="589" href="Ledger.Conway.Conformance.Script.html#556" class="Bound">es</a><a id="591" class="Symbol">)</a>
  <a id="595" class="Keyword">where</a>

<a id="602" class="Keyword">open</a> <a id="607" href="Ledger.Conway.Script.html" class="Module">Ledger.Conway.Script</a> <a id="628" href="Ledger.Conway.Conformance.Script.html#520" class="Bound">crypto</a> <a id="635" href="Ledger.Conway.Conformance.Script.html#556" class="Bound">es</a>

<a id="639" class="Keyword">record</a> <a id="HSTimelock"></a><a id="646" href="Ledger.Conway.Conformance.Script.html#646" class="Record">HSTimelock</a> <a id="657" class="Symbol">:</a> <a id="659" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="664" class="Keyword">where</a>
  <a id="672" class="Keyword">field</a>
    <a id="HSTimelock.timelock"></a><a id="682" href="Ledger.Conway.Conformance.Script.html#682" class="Field">timelock</a>     <a id="695" class="Symbol">:</a> <a id="697" href="Ledger.Conway.Script.Timelock.html#536" class="Datatype">Timelock</a>
    <a id="HSTimelock.tlScriptHash"></a><a id="710" href="Ledger.Conway.Conformance.Script.html#710" class="Field">tlScriptHash</a> <a id="723" class="Symbol">:</a> <a id="725" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
    <a id="HSTimelock.tlScriptSize"></a><a id="740" href="Ledger.Conway.Conformance.Script.html#740" class="Field">tlScriptSize</a> <a id="753" class="Symbol">:</a> <a id="755" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="758" class="Keyword">instance</a>
  <a id="Hashable-HSTimelock"></a><a id="769" href="Ledger.Conway.Conformance.Script.html#769" class="Function">Hashable-HSTimelock</a> <a id="789" class="Symbol">:</a> <a id="791" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="800" href="Ledger.Conway.Conformance.Script.html#646" class="Record">HSTimelock</a> <a id="811" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
  <a id="824" href="Ledger.Conway.Conformance.Script.html#769" class="Function">Hashable-HSTimelock</a> <a id="844" class="Symbol">.</a><a id="845" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="850" class="Symbol">=</a> <a id="852" href="Ledger.Conway.Conformance.Script.html#710" class="Field">HSTimelock.tlScriptHash</a>

<a id="877" class="Keyword">unquoteDecl</a> <a id="DecEq-HSTimelock"></a><a id="889" href="Ledger.Conway.Conformance.Script.html#889" class="Function">DecEq-HSTimelock</a> <a id="906" class="Symbol">=</a> <a id="908" href="Tactic.Derive.DecEq.html#3519" class="Function">derive-DecEq</a> <a id="921" class="Symbol">((</a><a id="923" class="Keyword">quote</a> <a id="929" href="Ledger.Conway.Conformance.Script.html#646" class="Record">HSTimelock</a> <a id="940" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="942" href="Ledger.Conway.Conformance.Script.html#889" class="Function">DecEq-HSTimelock</a><a id="958" class="Symbol">)</a> <a id="960" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="962" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="964" class="Symbol">)</a>

<a id="967" class="Keyword">record</a> <a id="HSPlutusScript"></a><a id="974" href="Ledger.Conway.Conformance.Script.html#974" class="Record">HSPlutusScript</a> <a id="989" class="Symbol">:</a> <a id="991" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="996" class="Keyword">where</a>
  <a id="1004" class="Keyword">constructor</a> <a id="MkHSPlutusScript"></a><a id="1016" href="Ledger.Conway.Conformance.Script.html#1016" class="InductiveConstructor">MkHSPlutusScript</a>
  <a id="1035" class="Keyword">field</a> <a id="HSPlutusScript.psScriptHash"></a><a id="1041" href="Ledger.Conway.Conformance.Script.html#1041" class="Field">psScriptHash</a> <a id="1054" class="Symbol">:</a> <a id="1056" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
        <a id="HSPlutusScript.psScriptSize"></a><a id="1075" href="Ledger.Conway.Conformance.Script.html#1075" class="Field">psScriptSize</a> <a id="1088" class="Symbol">:</a> <a id="1090" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

<a id="1093" class="Keyword">instance</a>
  <a id="Hashable-HSPlutusScript"></a><a id="1104" href="Ledger.Conway.Conformance.Script.html#1104" class="Function">Hashable-HSPlutusScript</a> <a id="1128" class="Symbol">:</a> <a id="1130" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="1139" href="Ledger.Conway.Conformance.Script.html#974" class="Record">HSPlutusScript</a> <a id="1154" href="Ledger.Conway.Crypto.html#1173" class="Field">ScriptHash</a>
  <a id="1167" href="Ledger.Conway.Conformance.Script.html#1104" class="Function">Hashable-HSPlutusScript</a> <a id="1191" class="Symbol">.</a><a id="1192" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="1197" class="Symbol">=</a> <a id="1199" href="Ledger.Conway.Conformance.Script.html#1041" class="Field">HSPlutusScript.psScriptHash</a>

<a id="P1ScriptStructure-HTL"></a><a id="1228" href="Ledger.Conway.Conformance.Script.html#1228" class="Function">P1ScriptStructure-HTL</a> <a id="1250" class="Symbol">:</a> <a id="1252" href="Ledger.Conway.Script.Base.html#572" class="Record">P1ScriptStructure</a>
<a id="1270" href="Ledger.Conway.Conformance.Script.html#1228" class="Function">P1ScriptStructure-HTL</a> <a id="1292" class="Symbol">=</a> <a id="1294" class="Keyword">record</a>
  <a id="1303" class="Symbol">{</a> <a id="1305" href="Ledger.Conway.Script.Base.html#612" class="Field">P1Script</a> <a id="1314" class="Symbol">=</a> <a id="1316" href="Ledger.Conway.Conformance.Script.html#646" class="Record">HSTimelock</a>
  <a id="1329" class="Symbol">;</a> <a id="1331" href="Ledger.Conway.Script.Base.html#636" class="Field">validP1Script</a> <a id="1345" class="Symbol">=</a> <a id="1347" class="Symbol">λ</a> <a id="1349" href="Ledger.Conway.Conformance.Script.html#1349" class="Bound">x</a> <a id="1351" href="Ledger.Conway.Conformance.Script.html#1351" class="Bound">y</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Ledger.Conway.Script.Timelock.html#1175" class="Datatype">evalTimelock</a> <a id="1368" href="Ledger.Conway.Conformance.Script.html#1349" class="Bound">x</a> <a id="1370" href="Ledger.Conway.Conformance.Script.html#1351" class="Bound">y</a> <a id="1372" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1374" href="Ledger.Conway.Conformance.Script.html#682" class="Field">HSTimelock.timelock</a> <a id="1394" class="Symbol">}</a>

</pre></body></html>