<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Test.Examples.MultiSigV2.OffChain.Open</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Test.Examples.MultiSigV2.OffChain.Open.html" class="Module">Test.Examples.MultiSigV2.OffChain.Open</a> <a id="71" class="Keyword">where</a>

<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="105" class="Keyword">open</a> <a id="110" class="Keyword">import</a> <a id="117" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="158" class="Keyword">open</a> <a id="163" class="Keyword">import</a> <a id="170" href="Test.Examples.MultiSigV2.Datum.html" class="Module">Test.Examples.MultiSigV2.Datum</a>
<a id="201" class="Keyword">open</a> <a id="206" class="Keyword">import</a> <a id="213" href="Test.Examples.MultiSigV2.OffChain.Lib.html" class="Module">Test.Examples.MultiSigV2.OffChain.Lib</a>
<a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="Test.Examples.MultiSigV2.Validator.html" class="Module">Test.Examples.MultiSigV2.Validator</a>
<a id="298" class="Keyword">open</a> <a id="303" class="Keyword">import</a> <a id="310" href="Test.Prelude.html" class="Module">Test.Prelude</a> <a id="323" href="Test.Examples.MultiSigV2.Datum.html#572" class="Function">MultiSigData</a>
<a id="336" class="Keyword">open</a> <a id="341" class="Keyword">import</a> <a id="348" href="Test.SymbolicData.html" class="Module">Test.SymbolicData</a> <a id="366" href="Test.Examples.MultiSigV2.Datum.html#572" class="Function">MultiSigData</a>
<a id="379" class="Keyword">open</a> <a id="384" class="Keyword">import</a> <a id="391" href="Test.LedgerImplementation.html" class="Module">Test.LedgerImplementation</a> <a id="417" href="Test.SymbolicData.html#240" class="Function">SData</a> <a id="423" href="Test.SymbolicData.html#240" class="Function">SData</a>
<a id="429" class="Keyword">open</a> <a id="434" class="Keyword">import</a> <a id="441" href="Test.AbstractImplementation.html" class="Module">Test.AbstractImplementation</a> <a id="469" href="Test.SymbolicData.html#2904" class="Function">valContext</a>
<a id="480" class="Keyword">open</a> <a id="485" class="Keyword">import</a> <a id="492" href="Test.Lib.html" class="Module">Test.Lib</a> <a id="501" href="Test.SymbolicData.html#2904" class="Function">valContext</a>

<a id="513" class="Keyword">open</a> <a id="518" class="Keyword">import</a> <a id="525" href="Ledger.Conway.Specification.Script.Validation.html" class="Module">Ledger.Conway.Specification.Script.Validation</a> <a id="571" href="Test.LedgerImplementation.html#4277" class="Function">SVTransactionStructure</a> <a id="594" href="Test.AbstractImplementation.html#673" class="Function">SVAbstractFunctions</a>
<a id="614" class="Keyword">open</a> <a id="619" class="Keyword">import</a> <a id="626" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>
<a id="666" class="Keyword">open</a> <a id="671" class="Keyword">import</a> <a id="678" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="711" href="Test.LedgerImplementation.html#4277" class="Function">SVTransactionStructure</a> <a id="734" href="Test.AbstractImplementation.html#673" class="Function">SVAbstractFunctions</a>

<a id="755" class="Keyword">open</a> <a id="760" href="Ledger.Conway.Specification.Transaction.html#991" class="Module">TransactionStructure</a> <a id="781" href="Test.LedgerImplementation.html#4277" class="Function">SVTransactionStructure</a>
<a id="804" class="Keyword">open</a> <a id="809" href="Test.LedgerImplementation.html#1058" class="Module">Implementation</a>

<a id="openTxOut"></a><a id="825" href="Test.Examples.MultiSigV2.OffChain.Open.html#825" class="Function">openTxOut</a> <a id="835" class="Symbol">:</a> <a id="837" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="843" class="Symbol">→</a> <a id="845" href="Test.LedgerImplementation.html#1452" class="Function">PlutusScript</a> <a id="858" class="Symbol">→</a> <a id="860" href="Ledger.Conway.Specification.Transaction.html#2624" class="Function">TxOut</a>
<a id="866" href="Test.Examples.MultiSigV2.OffChain.Open.html#825" class="Function">openTxOut</a> <a id="876" href="Test.Examples.MultiSigV2.OffChain.Open.html#876" class="Bound">v</a> <a id="878" href="Test.Examples.MultiSigV2.OffChain.Open.html#878" class="Bound">script</a> <a id="885" class="Symbol">=</a> <a id="887" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="892" class="Symbol">(</a><a id="893" class="Keyword">record</a> <a id="900" class="Symbol">{</a> <a id="902" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="906" class="Symbol">=</a> <a id="908" class="Number">0</a> <a id="910" class="Symbol">;</a>
                           <a id="939" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="943" class="Symbol">=</a> <a id="945" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="955" class="Symbol">(</a><a id="956" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="962" href="Test.Examples.MultiSigV2.OffChain.Open.html#878" class="Bound">script</a><a id="968" class="Symbol">)</a> <a id="970" class="Symbol">;</a>
                           <a id="999" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="1005" class="Symbol">=</a> <a id="1007" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1012" class="Symbol">(</a><a id="1013" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="1023" class="Symbol">(</a><a id="1024" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1030" href="Test.Examples.MultiSigV2.OffChain.Open.html#878" class="Bound">script</a><a id="1036" class="Symbol">))</a> <a id="1039" class="Symbol">})</a>
                           <a id="1069" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1071" href="Test.Examples.MultiSigV2.OffChain.Open.html#876" class="Bound">v</a>
                           <a id="1100" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1102" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1107" class="Symbol">(</a><a id="1108" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1113" class="Symbol">(</a><a id="1114" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1119" class="Symbol">(</a><a id="1120" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1125" href="Test.Examples.MultiSigV2.Datum.html#197" class="InductiveConstructor">Holding</a><a id="1132" class="Symbol">)))</a> <a id="1136" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1138" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="1147" class="Comment">-- txid, wallet, value at script, script index</a>
<a id="openTx"></a><a id="1194" href="Test.Examples.MultiSigV2.OffChain.Open.html#1194" class="Function">openTx</a> <a id="1201" class="Symbol">:</a> <a id="1203" class="Symbol">(</a><a id="1204" href="Test.Examples.MultiSigV2.OffChain.Open.html#1204" class="Bound">id</a> <a id="1207" href="Test.Examples.MultiSigV2.OffChain.Open.html#1207" class="Bound">w</a> <a id="1209" href="Test.Examples.MultiSigV2.OffChain.Open.html#1209" class="Bound">v</a> <a id="1211" href="Test.Examples.MultiSigV2.OffChain.Open.html#1211" class="Bound">tw</a> <a id="1214" class="Symbol">:</a> <a id="1216" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1217" class="Symbol">)</a> <a id="1219" class="Symbol">→</a> <a id="1221" href="Test.LedgerImplementation.html#1452" class="Function">PlutusScript</a> <a id="1234" class="Symbol">→</a> <a id="1236" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a>
<a id="1239" href="Test.Examples.MultiSigV2.OffChain.Open.html#1194" class="Function">openTx</a> <a id="1246" href="Test.Examples.MultiSigV2.OffChain.Open.html#1246" class="Bound">id</a> <a id="1249" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a> <a id="1251" href="Test.Examples.MultiSigV2.OffChain.Open.html#1251" class="Bound">v</a> <a id="1253" href="Test.Examples.MultiSigV2.OffChain.Open.html#1253" class="Bound">tw</a> <a id="1256" href="Test.Examples.MultiSigV2.OffChain.Open.html#1256" class="Bound">script</a> <a id="1263" class="Symbol">=</a> <a id="1265" class="Keyword">record</a> <a id="1272" class="Symbol">{</a> <a id="1274" href="Ledger.Conway.Specification.Transaction.html#4700" class="Field">body</a> <a id="1279" class="Symbol">=</a> <a id="1281" class="Keyword">record</a> <a id="1288" href="Test.Examples.MultiSigV2.OffChain.Lib.html#841" class="Function">defaultTxBody</a>
                         <a id="1327" class="Symbol">{</a> <a id="1329" href="Ledger.Conway.Specification.Transaction.html#3018" class="Field">txIns</a> <a id="1335" class="Symbol">=</a> <a id="1337" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="1361" class="Symbol">((</a><a id="1363" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a> <a id="1365" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1367" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a><a id="1368" class="Symbol">)</a> <a id="1370" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1372" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1374" class="Symbol">)</a>
                         <a id="1401" class="Symbol">;</a> <a id="1403" href="Ledger.Conway.Specification.Transaction.html#3126" class="Field">txOuts</a> <a id="1410" class="Symbol">=</a> <a id="1412" href="Test.Lib.html#5515" class="Function">fromListIx</a> <a id="1423" class="Symbol">((</a><a id="1425" href="Test.Examples.MultiSigV2.OffChain.Open.html#1253" class="Bound">tw</a> <a id="1428" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1430" href="Test.Examples.MultiSigV2.OffChain.Open.html#825" class="Function">openTxOut</a> <a id="1440" href="Test.Examples.MultiSigV2.OffChain.Open.html#1251" class="Bound">v</a> <a id="1442" href="Test.Examples.MultiSigV2.OffChain.Open.html#1256" class="Bound">script</a><a id="1448" class="Symbol">)</a>
                                               <a id="1497" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1499" class="Symbol">(</a><a id="1500" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a>
                                                 <a id="1551" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1553" class="Symbol">((</a><a id="1555" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1560" class="Symbol">(</a><a id="1561" class="Keyword">record</a> <a id="1568" class="Symbol">{</a> <a id="1570" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="1574" class="Symbol">=</a> <a id="1576" class="Number">0</a> <a id="1578" class="Symbol">;</a>
                                                                    <a id="1648" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="1652" class="Symbol">=</a> <a id="1654" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1665" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a> <a id="1667" class="Symbol">;</a>
                                                                    <a id="1737" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="1743" class="Symbol">=</a> <a id="1745" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1750" class="Symbol">(</a><a id="1751" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1762" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a><a id="1763" class="Symbol">)</a> <a id="1765" class="Symbol">}))</a>
                                               <a id="1816" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1818" class="Symbol">((</a><a id="1820" class="Number">1000000000000</a> <a id="1834" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1836" class="Number">10000000000</a><a id="1847" class="Symbol">)</a> <a id="1849" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="1851" href="Test.Examples.MultiSigV2.OffChain.Open.html#1251" class="Bound">v</a><a id="1852" class="Symbol">)</a> <a id="1854" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1856" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="1864" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1866" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="1873" class="Symbol">))</a>
                                               <a id="1923" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1925" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1927" class="Symbol">)</a>
                         <a id="1954" class="Symbol">;</a> <a id="1956" href="Ledger.Conway.Specification.Transaction.html#3166" class="Field">txId</a> <a id="1961" class="Symbol">=</a> <a id="1963" href="Test.Examples.MultiSigV2.OffChain.Open.html#1246" class="Bound">id</a>
                         <a id="1991" class="Symbol">;</a> <a id="1993" href="Ledger.Conway.Specification.Transaction.html#3090" class="Field">collateralInputs</a> <a id="2010" class="Symbol">=</a> <a id="2012" href="Axiom.Set.html#5903" class="Function">Ledger.Prelude.fromList</a> <a id="2036" class="Symbol">((</a><a id="2038" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a> <a id="2040" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2042" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a><a id="2043" class="Symbol">)</a> <a id="2045" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2047" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2049" class="Symbol">)</a>
                         <a id="2076" class="Symbol">}</a> <a id="2078" class="Symbol">;</a>
                <a id="2096" href="Ledger.Conway.Specification.Transaction.html#4724" class="Field">wits</a> <a id="2101" class="Symbol">=</a> <a id="2103" class="Keyword">record</a> <a id="2110" class="Symbol">{</a> <a id="2112" href="Ledger.Conway.Specification.Transaction.html#4464" class="Field">vkSigs</a> <a id="2119" class="Symbol">=</a> <a id="2121" href="Axiom.Set.Map.html#2713" class="Function">fromListᵐ</a> <a id="2131" class="Symbol">((</a><a id="2133" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a> <a id="2135" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2137" class="Symbol">(</a><a id="2138" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="2142" class="Symbol">{{</a><a id="2144" href="Ledger.Core.Specification.TokenAlgebra.Base.html#1272" class="Function">addValue</a><a id="2152" class="Symbol">}}</a> <a id="2155" href="Test.Examples.MultiSigV2.OffChain.Open.html#1249" class="Bound">w</a> <a id="2157" href="Test.Examples.MultiSigV2.OffChain.Open.html#1246" class="Bound">id</a><a id="2159" class="Symbol">))</a> <a id="2162" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2164" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2166" class="Symbol">)</a> <a id="2168" class="Symbol">;</a>
                                <a id="2202" href="Ledger.Conway.Specification.Transaction.html#4492" class="Field">scripts</a> <a id="2210" class="Symbol">=</a> <a id="2212" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2214" class="Symbol">;</a>
                                <a id="2248" href="Ledger.Conway.Specification.Transaction.html#4518" class="Field">txdats</a> <a id="2255" class="Symbol">=</a> <a id="2257" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2259" class="Symbol">;</a>
                                <a id="2293" href="Ledger.Conway.Specification.Transaction.html#4543" class="Field">txrdmrs</a> <a id="2301" class="Symbol">=</a> <a id="2303" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2305" class="Symbol">}</a> <a id="2307" class="Symbol">;</a>

                <a id="2326" href="Ledger.Conway.Specification.Transaction.html#4753" class="Field">txsize</a> <a id="2333" class="Symbol">=</a> <a id="2335" class="Number">10</a> <a id="2338" class="Symbol">;</a>
                <a id="2356" href="Ledger.Conway.Specification.Transaction.html#4772" class="Field">isValid</a> <a id="2364" class="Symbol">=</a> <a id="2366" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="2371" class="Symbol">;</a>
                <a id="2389" href="Ledger.Conway.Specification.Transaction.html#4794" class="Field">txAD</a> <a id="2394" class="Symbol">=</a> <a id="2396" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2404" class="Symbol">}</a>
</pre></body></html>