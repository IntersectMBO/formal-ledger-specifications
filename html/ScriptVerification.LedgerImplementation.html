<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>ScriptVerification.LedgerImplementation</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="ScriptVerification.Prelude.html" class="Module">ScriptVerification.Prelude</a>
<a id="40" class="Keyword">open</a> <a id="45" class="Keyword">import</a> <a id="52" href="Prelude.html" class="Module">Prelude</a> <a id="60" class="Keyword">using</a> <a id="66" class="Symbol">(</a><a id="67" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="71" class="Symbol">)</a>

<a id="74" class="Keyword">module</a> <a id="81" href="ScriptVerification.LedgerImplementation.html" class="Module">ScriptVerification.LedgerImplementation</a>
  <a id="123" class="Symbol">(</a><a id="124" href="ScriptVerification.LedgerImplementation.html#124" class="Bound">T</a> <a id="126" href="ScriptVerification.LedgerImplementation.html#126" class="Bound">D</a> <a id="128" class="Symbol">:</a> <a id="130" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="134" class="Symbol">)</a>
  <a id="138" class="Symbol">(</a><a id="139" href="ScriptVerification.LedgerImplementation.html#139" class="Bound">scriptImp</a> <a id="149" class="Symbol">:</a> <a id="151" href="ScriptVerification.Prelude.html#118" class="Record">ScriptImplementation</a> <a id="172" href="ScriptVerification.LedgerImplementation.html#124" class="Bound">T</a> <a id="174" href="ScriptVerification.LedgerImplementation.html#126" class="Bound">D</a><a id="175" class="Symbol">)</a> <a id="177" class="Symbol">(</a><a id="178" class="Keyword">open</a> <a id="183" href="ScriptVerification.Prelude.html#118" class="Module">ScriptImplementation</a> <a id="204" href="ScriptVerification.LedgerImplementation.html#139" class="Bound">scriptImp</a><a id="213" class="Symbol">)</a>
  <a id="217" class="Keyword">where</a>

<a id="224" class="Keyword">open</a> <a id="229" class="Keyword">import</a> <a id="236" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="251" class="Keyword">hiding</a> <a id="258" class="Symbol">(</a><a id="259" href="Axiom.Set.html#5718" class="Function">fromList</a><a id="267" class="Symbol">;</a> <a id="269" href="Class.Monoid.Core.html#186" class="Field">ε</a><a id="270" class="Symbol">);</a> <a id="273" class="Keyword">open</a> <a id="278" href="Interface.ComputationalRelation.html#2799" class="Module">Computational</a>
<a id="292" class="Keyword">open</a> <a id="297" class="Keyword">import</a> <a id="304" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="318" class="Keyword">using</a> <a id="324" class="Symbol">(</a><a id="325" href="Data.Rational.Base.html#4325" class="Function">0ℚ</a><a id="327" class="Symbol">;</a> <a id="329" href="Data.Rational.Base.html#4367" class="Function">½</a><a id="330" class="Symbol">)</a>
<a id="332" class="Keyword">open</a> <a id="337" class="Keyword">import</a> <a id="344" href="Algebra.Morphism.html" class="Module">Algebra.Morphism</a>    <a id="364" class="Keyword">using</a> <a id="370" class="Symbol">(</a><a id="371" class="Keyword">module</a> <a id="378" href="Algebra.Morphism.Structures.html#4053" class="Module">MonoidMorphisms</a><a id="393" class="Symbol">)</a>
<a id="395" class="Keyword">open</a> <a id="400" class="Keyword">import</a> <a id="407" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="427" class="Keyword">using</a> <a id="433" class="Symbol">(</a><a id="434" href="Data.Nat.Properties.html#17135" class="Function">+-0-commutativeMonoid</a><a id="455" class="Symbol">;</a> <a id="457" href="Data.Nat.Properties.html#16532" class="Function">+-0-isCommutativeMonoid</a><a id="480" class="Symbol">)</a>
<a id="482" class="Keyword">open</a> <a id="487" class="Keyword">import</a> <a id="494" href="Relation.Binary.Morphism.Structures.html" class="Module">Relation.Binary.Morphism.Structures</a>
<a id="530" class="Keyword">open</a> <a id="535" class="Keyword">import</a> <a id="542" href="Foreign.Convertible.html" class="Module">Foreign.Convertible</a>
<a id="562" class="Keyword">import</a> <a id="569" href="Foreign.Haskell.html" class="Module">Foreign.Haskell</a> <a id="585" class="Symbol">as</a> <a id="588" class="Module">F</a>
<a id="590" class="Keyword">open</a> <a id="595" class="Keyword">import</a> <a id="602" href="Ledger.Crypto.html" class="Module">Ledger.Crypto</a>
<a id="616" class="Keyword">open</a> <a id="621" class="Keyword">import</a> <a id="628" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a>
<a id="647" class="Keyword">open</a> <a id="652" class="Keyword">import</a> <a id="659" href="Ledger.Types.Epoch.html" class="Module">Ledger.Types.Epoch</a>
<a id="678" class="Keyword">open</a> <a id="683" class="Keyword">import</a> <a id="690" href="Ledger.Types.GovStructure.html" class="Module">Ledger.Types.GovStructure</a>

<a id="717" class="Keyword">module</a> <a id="724" href="ScriptVerification.LedgerImplementation.html#724" class="Module">_</a> <a id="726" class="Symbol">{</a><a id="727" href="ScriptVerification.LedgerImplementation.html#727" class="Bound">A</a> <a id="729" class="Symbol">:</a> <a id="731" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="735" class="Symbol">}</a> <a id="737" class="Symbol">⦃</a> <a id="739" href="ScriptVerification.LedgerImplementation.html#739" class="Bound">_</a> <a id="741" class="Symbol">:</a> <a id="743" href="Class.DecEq.Core.html#117" class="Record">DecEq</a> <a id="749" href="ScriptVerification.LedgerImplementation.html#727" class="Bound">A</a> <a id="751" class="Symbol">⦄</a> <a id="753" class="Symbol">⦃</a> <a id="755" href="ScriptVerification.LedgerImplementation.html#755" class="Bound">_</a> <a id="757" class="Symbol">:</a> <a id="759" href="Class.Show.Core.html#116" class="Record">Show</a> <a id="764" href="ScriptVerification.LedgerImplementation.html#727" class="Bound">A</a> <a id="766" class="Symbol">⦄</a> <a id="768" class="Keyword">where</a> <a id="774" class="Keyword">instance</a>
  <a id="785" href="ScriptVerification.LedgerImplementation.html#785" class="Function">∀Hashable</a> <a id="795" class="Symbol">:</a> <a id="797" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="806" href="ScriptVerification.LedgerImplementation.html#727" class="Bound">A</a> <a id="808" href="ScriptVerification.LedgerImplementation.html#727" class="Bound">A</a>
  <a id="812" href="ScriptVerification.LedgerImplementation.html#785" class="Function">∀Hashable</a> <a id="822" class="Symbol">=</a> <a id="824" class="Symbol">λ</a> <a id="826" class="Keyword">where</a> <a id="832" class="Symbol">.</a><a id="833" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="838" class="Symbol">→</a> <a id="840" href="Function.Base.html#704" class="Function">id</a>

  <a id="846" href="ScriptVerification.LedgerImplementation.html#846" class="Function">∀isHashableSet</a> <a id="861" class="Symbol">:</a> <a id="863" href="Ledger.Crypto.html#99" class="Record">isHashableSet</a> <a id="877" href="ScriptVerification.LedgerImplementation.html#727" class="Bound">A</a>
  <a id="881" href="ScriptVerification.LedgerImplementation.html#846" class="Function">∀isHashableSet</a> <a id="896" class="Symbol">=</a> <a id="898" href="Ledger.Crypto.html#152" class="InductiveConstructor">mkIsHashableSet</a> <a id="914" href="ScriptVerification.LedgerImplementation.html#727" class="Bound">A</a>

<a id="917" class="Keyword">instance</a>
  <a id="Hashable-⊤"></a><a id="928" href="ScriptVerification.LedgerImplementation.html#928" class="Function">Hashable-⊤</a> <a id="939" class="Symbol">:</a> <a id="941" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="950" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="952" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="956" href="ScriptVerification.LedgerImplementation.html#928" class="Function">Hashable-⊤</a> <a id="967" class="Symbol">=</a> <a id="969" class="Symbol">λ</a> <a id="971" class="Keyword">where</a> <a id="977" class="Symbol">.</a><a id="978" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="983" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="986" class="Symbol">→</a> <a id="988" class="Number">0</a>

<a id="991" class="Keyword">module</a> <a id="Implementation"></a><a id="998" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a> <a id="1013" class="Keyword">where</a>
  <a id="Implementation.Network"></a><a id="1021" href="ScriptVerification.LedgerImplementation.html#1021" class="Function">Network</a>          <a id="1038" class="Symbol">=</a> <a id="1040" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.SlotsPerEpochᶜ"></a><a id="1044" href="ScriptVerification.LedgerImplementation.html#1044" class="Function">SlotsPerEpochᶜ</a>   <a id="1061" class="Symbol">=</a> <a id="1063" class="Number">100</a>
  <a id="Implementation.StabilityWindowᶜ"></a><a id="1069" href="ScriptVerification.LedgerImplementation.html#1069" class="Function">StabilityWindowᶜ</a> <a id="1086" class="Symbol">=</a> <a id="1088" class="Number">10</a>
  <a id="Implementation.Quorum"></a><a id="1093" href="ScriptVerification.LedgerImplementation.html#1093" class="Function">Quorum</a>           <a id="1110" class="Symbol">=</a> <a id="1112" class="Number">1</a>
  <a id="Implementation.NetworkId"></a><a id="1116" href="ScriptVerification.LedgerImplementation.html#1116" class="Function">NetworkId</a>        <a id="1133" class="Symbol">=</a> <a id="1135" class="Number">0</a>

  <a id="Implementation.SKey"></a><a id="1140" href="ScriptVerification.LedgerImplementation.html#1140" class="Function">SKey</a> <a id="1145" class="Symbol">=</a> <a id="1147" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.VKey"></a><a id="1151" href="ScriptVerification.LedgerImplementation.html#1151" class="Function">VKey</a> <a id="1156" class="Symbol">=</a> <a id="1158" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.Sig"></a><a id="1162" href="ScriptVerification.LedgerImplementation.html#1162" class="Function">Sig</a>  <a id="1167" class="Symbol">=</a> <a id="1169" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.Ser"></a><a id="1173" href="ScriptVerification.LedgerImplementation.html#1173" class="Function">Ser</a>  <a id="1178" class="Symbol">=</a> <a id="1180" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

  <a id="Implementation.isKeyPair"></a><a id="1185" href="ScriptVerification.LedgerImplementation.html#1185" class="Function">isKeyPair</a>  <a id="1196" class="Symbol">=</a> <a id="1198" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a>
  <a id="Implementation.sign"></a><a id="1204" href="ScriptVerification.LedgerImplementation.html#1204" class="Function">sign</a>       <a id="1215" class="Symbol">=</a> <a id="1217" href="Class.HasAdd.Core.html#136" class="Field Operator">_+_</a>

  <a id="Implementation.Data"></a><a id="1224" href="ScriptVerification.LedgerImplementation.html#1224" class="Function">Data</a>         <a id="1237" class="Symbol">=</a> <a id="1239" href="ScriptVerification.LedgerImplementation.html#126" class="Bound">D</a>
  <a id="Implementation.Dataʰ"></a><a id="1243" href="ScriptVerification.LedgerImplementation.html#1243" class="Function">Dataʰ</a>        <a id="1256" class="Symbol">=</a> <a id="1258" href="Ledger.Crypto.html#422" class="InductiveConstructor">mkHashableSet</a> <a id="1272" href="ScriptVerification.LedgerImplementation.html#1224" class="Function">Data</a>
  <a id="Implementation.toData"></a><a id="1279" href="ScriptVerification.LedgerImplementation.html#1279" class="Function">toData</a> <a id="1286" class="Symbol">:</a> <a id="1288" class="Symbol">∀</a> <a id="1290" class="Symbol">{</a><a id="1291" href="ScriptVerification.LedgerImplementation.html#1291" class="Bound">A</a> <a id="1293" class="Symbol">:</a> <a id="1295" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="1299" class="Symbol">}</a> <a id="1301" class="Symbol">→</a> <a id="1303" href="ScriptVerification.LedgerImplementation.html#1291" class="Bound">A</a> <a id="1305" class="Symbol">→</a> <a id="1307" href="ScriptVerification.LedgerImplementation.html#126" class="Bound">D</a>
  <a id="1311" href="ScriptVerification.LedgerImplementation.html#1279" class="Function">toData</a> <a id="1318" class="Symbol">=</a> <a id="1320" href="ScriptVerification.Prelude.html#234" class="Field">toData&#39;</a> <a id="1328" class="Comment">-- fix this</a>

  <a id="Implementation.PlutusScript"></a><a id="1343" href="ScriptVerification.LedgerImplementation.html#1343" class="Function">PlutusScript</a> <a id="1356" class="Symbol">=</a> <a id="1358" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1360" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1362" class="Symbol">(</a><a id="1363" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1368" href="ScriptVerification.LedgerImplementation.html#1224" class="Function">Data</a> <a id="1373" class="Symbol">→</a> <a id="1375" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="1379" class="Symbol">)</a>
  <a id="Implementation.ScriptHash"></a><a id="1383" href="ScriptVerification.LedgerImplementation.html#1383" class="Function">ScriptHash</a> <a id="1394" class="Symbol">=</a> <a id="1396" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

  <a id="Implementation.ExUnits"></a><a id="1401" href="ScriptVerification.LedgerImplementation.html#1401" class="Function">ExUnits</a>      <a id="1414" class="Symbol">=</a> <a id="1416" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1418" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1420" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.ExUnit-CommutativeMonoid"></a><a id="1424" href="ScriptVerification.LedgerImplementation.html#1424" class="Function">ExUnit-CommutativeMonoid</a> <a id="1449" class="Symbol">=</a> <a id="1451" href="Class.CommutativeMonoid.Core.html#189" class="Record">CommutativeMonoid</a> <a id="1469" href="Level.html#521" class="Function">0ℓ</a> <a id="1472" href="Level.html#521" class="Function">0ℓ</a> <a id="1475" href="ScriptVerification.LedgerImplementation.html#1401" class="Function">ExUnits</a> <a id="1483" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="1485" class="Symbol">(</a><a id="1486" href="Class.CommutativeMonoid.Core.html#637" class="Function">Conversion.fromBundle</a> <a id="1508" class="Keyword">record</a>
    <a id="1519" class="Symbol">{</a> <a id="1521" href="Algebra.Bundles.html#7976" class="Field">Carrier</a> <a id="1529" class="Symbol">=</a> <a id="1531" href="ScriptVerification.LedgerImplementation.html#1401" class="Function">ExUnits</a>
    <a id="1543" class="Symbol">;</a> <a id="1545" href="Algebra.Bundles.html#8008" class="Field Operator">_≈_</a> <a id="1549" class="Symbol">=</a> <a id="1551" href="Algebra.PairOp.html#316" class="Function Operator">_≈ᵖ_</a>
    <a id="1560" class="Symbol">;</a> <a id="1562" href="Algebra.Bundles.html#8048" class="Field Operator">_∙_</a> <a id="1566" class="Symbol">=</a> <a id="1568" href="Algebra.PairOp.html#241" class="Function Operator">_∙ᵖ_</a>
    <a id="1577" class="Symbol">;</a> <a id="1579" href="Algebra.Bundles.html#8086" class="Field">ε</a> <a id="1581" class="Symbol">=</a> <a id="1583" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="1588" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1590" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>
    <a id="1599" class="Symbol">;</a> <a id="1601" href="Algebra.Bundles.html#8120" class="Field">isCommutativeMonoid</a> <a id="1621" class="Symbol">=</a> <a id="1623" href="Algebra.PairOp.html#1805" class="Function">pairOpRespectsComm</a> <a id="1642" href="Data.Nat.Properties.html#16532" class="Function">+-0-isCommutativeMonoid</a>
    <a id="1670" class="Symbol">})</a> <a id="1673" class="Keyword">where</a> <a id="1679" class="Keyword">open</a> <a id="1684" class="Keyword">import</a> <a id="1691" href="Algebra.PairOp.html" class="Module">Algebra.PairOp</a> <a id="1706" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1708" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="1713" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a> <a id="1717" href="Class.HasAdd.Core.html#136" class="Field Operator">_+_</a>
  <a id="Implementation._≥ᵉ_"></a><a id="1723" href="ScriptVerification.LedgerImplementation.html#1723" class="Function Operator">_≥ᵉ_</a> <a id="1728" class="Symbol">:</a> <a id="1730" href="ScriptVerification.LedgerImplementation.html#1401" class="Function">ExUnits</a> <a id="1738" class="Symbol">→</a> <a id="1740" href="ScriptVerification.LedgerImplementation.html#1401" class="Function">ExUnits</a> <a id="1748" class="Symbol">→</a> <a id="1750" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="1757" href="ScriptVerification.LedgerImplementation.html#1723" class="Function Operator">_≥ᵉ_</a> <a id="1762" class="Symbol">=</a> <a id="1764" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a>
  <a id="1770" class="Keyword">instance</a>
    <a id="Implementation.Show-ExUnits"></a><a id="1783" href="ScriptVerification.LedgerImplementation.html#1783" class="Function">Show-ExUnits</a> <a id="1796" class="Symbol">:</a> <a id="1798" href="Class.Show.Core.html#116" class="Record">Show</a> <a id="1803" href="ScriptVerification.LedgerImplementation.html#1401" class="Function">ExUnits</a>
    <a id="1815" href="ScriptVerification.LedgerImplementation.html#1783" class="Function">Show-ExUnits</a> <a id="1828" class="Symbol">=</a> <a id="1830" href="Class.Show.Instances.html#221" class="Function">Show-×</a>

  <a id="Implementation.CostModel"></a><a id="1840" href="ScriptVerification.LedgerImplementation.html#1840" class="Function">CostModel</a>    <a id="1853" class="Symbol">=</a> <a id="1855" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="1857" class="Comment">-- changed from ⊥</a>
  <a id="Implementation.Language"></a><a id="1877" href="ScriptVerification.LedgerImplementation.html#1877" class="Function">Language</a>     <a id="1890" class="Symbol">=</a> <a id="1892" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="Implementation.LangDepView"></a><a id="1896" href="ScriptVerification.LedgerImplementation.html#1896" class="Function">LangDepView</a>  <a id="1909" class="Symbol">=</a> <a id="1911" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="Implementation.Prices"></a><a id="1915" href="ScriptVerification.LedgerImplementation.html#1915" class="Function">Prices</a>       <a id="1928" class="Symbol">=</a> <a id="1930" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
  <a id="1934" class="Keyword">open</a> <a id="1939" class="Keyword">import</a> <a id="1946" href="Ledger.TokenAlgebra.html" class="Module">Ledger.TokenAlgebra</a> <a id="1966" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.coinTokenAlgebra"></a><a id="1970" href="ScriptVerification.LedgerImplementation.html#1970" class="Function">coinTokenAlgebra</a> <a id="1987" class="Symbol">:</a> <a id="1989" href="Ledger.TokenAlgebra.html#453" class="Record">TokenAlgebra</a>
  <a id="2004" href="ScriptVerification.LedgerImplementation.html#1970" class="Function">coinTokenAlgebra</a> <a id="2021" class="Symbol">=</a> <a id="2023" class="Symbol">λ</a> <a id="2025" class="Keyword">where</a>
    <a id="2035" class="Symbol">.</a><a id="2036" href="Ledger.TokenAlgebra.html#492" class="Field">Value</a>                      <a id="2063" class="Symbol">→</a> <a id="2065" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
    <a id="2071" class="Symbol">.</a><a id="2072" href="Ledger.TokenAlgebra.html#510" class="Field">Value-CommutativeMonoid</a>    <a id="2099" class="Symbol">→</a> <a id="2101" href="Function.Base.html#4736" class="Function">it</a>
      <a id="2110" class="Comment">-- ^ Agda bug? Without this line, `coinIsMonoidHomomorphism` doesn&#39;t type check anymore</a>
    <a id="2202" class="Symbol">.</a><a id="2203" href="Ledger.TokenAlgebra.html#812" class="Field">coin</a>                       <a id="2230" class="Symbol">→</a> <a id="2232" href="Function.Base.html#704" class="Function">id</a>
    <a id="2239" class="Symbol">.</a><a id="2240" href="Ledger.TokenAlgebra.html#857" class="Field">inject</a>                     <a id="2267" class="Symbol">→</a> <a id="2269" href="Function.Base.html#704" class="Function">id</a>
    <a id="2276" class="Symbol">.</a><a id="2277" href="Ledger.TokenAlgebra.html#902" class="Field">policies</a>                   <a id="2304" class="Symbol">→</a> <a id="2306" class="Symbol">λ</a> <a id="2308" href="ScriptVerification.LedgerImplementation.html#2308" class="Bound">_</a> <a id="2310" class="Symbol">→</a> <a id="2312" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="2318" class="Symbol">.</a><a id="2319" href="Ledger.TokenAlgebra.html#953" class="Field">size</a>                       <a id="2346" class="Symbol">→</a> <a id="2348" class="Symbol">λ</a> <a id="2350" href="ScriptVerification.LedgerImplementation.html#2350" class="Bound">x</a> <a id="2352" class="Symbol">→</a> <a id="2354" class="Number">1</a> <a id="2356" class="Comment">-- there is only ada in this token algebra</a>
    <a id="2403" class="Symbol">.</a><a id="2404" href="Ledger.TokenAlgebra.html#1008" class="Field Operator">_≤ᵗ_</a>                       <a id="2431" class="Symbol">→</a> <a id="2433" href="Class.HasOrder.Core.html#551" class="Field Operator">_≤_</a>
    <a id="2441" class="Symbol">.</a><a id="2442" href="Ledger.TokenAlgebra.html#1061" class="Field">AssetName</a>                  <a id="2469" class="Symbol">→</a> <a id="2471" href="Agda.Builtin.String.html#335" class="Postulate">String</a>
    <a id="2482" class="Symbol">.</a><a id="2483" href="Ledger.TokenAlgebra.html#1097" class="Field">specialAsset</a>               <a id="2510" class="Symbol">→</a> <a id="2512" class="String">&quot;Ada&quot;</a>
    <a id="2522" class="Symbol">.</a><a id="2523" href="Ledger.TokenAlgebra.html#1139" class="Field">property</a>                   <a id="2550" class="Symbol">→</a> <a id="2552" class="Symbol">λ</a> <a id="2554" href="ScriptVerification.LedgerImplementation.html#2554" class="Bound">_</a> <a id="2556" class="Symbol">→</a> <a id="2558" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
    <a id="2567" class="Symbol">.</a><a id="2568" href="Ledger.TokenAlgebra.html#1208" class="Field">coinIsMonoidHomomorphism</a>   <a id="2595" class="Symbol">→</a> <a id="2597" href="Algebra.Morphism.Construct.Identity.html#1950" class="Function">Id.isMonoidHomomorphism</a> <a id="2621" class="Symbol">_</a> <a id="2623" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
   <a id="2631" class="Keyword">where</a> <a id="2637" class="Keyword">open</a> <a id="2642" href="Ledger.TokenAlgebra.html#453" class="Module">TokenAlgebra</a>
         <a id="2664" class="Keyword">open</a> <a id="2669" href="Algebra.Morphism.Structures.html#4393" class="Module">Algebra.Morphism.IsMonoidHomomorphism</a>
         <a id="2716" class="Keyword">open</a> <a id="2721" href="Algebra.Morphism.Structures.html#2757" class="Module">Algebra.Morphism.IsMagmaHomomorphism</a>
         <a id="2767" class="Keyword">import</a> <a id="2774" href="Algebra.Morphism.Construct.Identity.html" class="Module">Algebra.Morphism.Construct.Identity</a> <a id="2810" class="Symbol">as</a> <a id="2813" class="Module">Id</a>

  <a id="Implementation.TxId"></a><a id="2819" href="ScriptVerification.LedgerImplementation.html#2819" class="Function">TxId</a>            <a id="2835" class="Symbol">=</a> <a id="2837" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.Ix"></a><a id="2841" href="ScriptVerification.LedgerImplementation.html#2841" class="Function">Ix</a>              <a id="2857" class="Symbol">=</a> <a id="2859" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.AuxiliaryData"></a><a id="2863" href="ScriptVerification.LedgerImplementation.html#2863" class="Function">AuxiliaryData</a>   <a id="2879" class="Symbol">=</a> <a id="2881" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.DocHash"></a><a id="2885" href="ScriptVerification.LedgerImplementation.html#2885" class="Function">DocHash</a>         <a id="2901" class="Symbol">=</a> <a id="2903" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="Implementation.tokenAlgebra"></a><a id="2907" href="ScriptVerification.LedgerImplementation.html#2907" class="Function">tokenAlgebra</a>    <a id="2923" class="Symbol">=</a> <a id="2925" href="ScriptVerification.LedgerImplementation.html#1970" class="Function">coinTokenAlgebra</a>

<a id="SVGlobalConstants"></a><a id="2943" href="ScriptVerification.LedgerImplementation.html#2943" class="Function">SVGlobalConstants</a> <a id="2961" class="Symbol">=</a> <a id="2963" href="Ledger.Types.Epoch.html#1895" class="Record">GlobalConstants</a> <a id="2979" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="2981" class="Keyword">record</a> <a id="2988" class="Symbol">{</a><a id="2989" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a><a id="3003" class="Symbol">}</a>
<a id="SVEpochStructure"></a><a id="3005" href="ScriptVerification.LedgerImplementation.html#3005" class="Function">SVEpochStructure</a>  <a id="3023" class="Symbol">=</a> <a id="3025" href="Ledger.Types.Epoch.html#408" class="Record">EpochStructure</a>  <a id="3041" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="3043" href="Ledger.Types.Epoch.html#2307" class="Function">ℕEpochStructure</a> <a id="3059" href="ScriptVerification.LedgerImplementation.html#2943" class="Function">SVGlobalConstants</a>
<a id="3077" class="Keyword">instance</a> <a id="3086" href="ScriptVerification.LedgerImplementation.html#3086" class="Function">_</a> <a id="3088" class="Symbol">=</a> <a id="3090" href="ScriptVerification.LedgerImplementation.html#3005" class="Function">SVEpochStructure</a>

<a id="SVCrypto"></a><a id="3108" href="ScriptVerification.LedgerImplementation.html#3108" class="Function">SVCrypto</a> <a id="3117" class="Symbol">:</a> <a id="3119" href="Ledger.Crypto.html#1043" class="Record">Crypto</a>
<a id="3126" href="ScriptVerification.LedgerImplementation.html#3108" class="Function">SVCrypto</a> <a id="3135" class="Symbol">=</a> <a id="3137" class="Keyword">record</a>
  <a id="3146" class="Symbol">{</a> <a id="3148" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a>
  <a id="3165" class="Symbol">;</a> <a id="3167" href="Ledger.Crypto.html#1072" class="Field">pkk</a> <a id="3171" class="Symbol">=</a> <a id="3173" href="ScriptVerification.LedgerImplementation.html#3236" class="Function">SVPKKScheme</a>
  <a id="3187" class="Symbol">}</a>
  <a id="3191" class="Keyword">where</a>
  <a id="3199" class="Comment">-- Dummy private key crypto scheme</a>
  <a id="3236" href="ScriptVerification.LedgerImplementation.html#3236" class="Function">SVPKKScheme</a> <a id="3248" class="Symbol">:</a> <a id="3250" href="Ledger.Crypto.html#539" class="Record">PKKScheme</a>
  <a id="3262" href="ScriptVerification.LedgerImplementation.html#3236" class="Function">SVPKKScheme</a> <a id="3274" class="Symbol">=</a> <a id="3276" class="Keyword">record</a>
    <a id="3287" class="Symbol">{</a> <a id="3289" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a>
    <a id="3308" class="Symbol">;</a> <a id="3310" href="Ledger.Crypto.html#651" class="Field">isSigned</a>         <a id="3327" class="Symbol">=</a> <a id="3329" class="Symbol">λ</a> <a id="3331" href="ScriptVerification.LedgerImplementation.html#3331" class="Bound">a</a> <a id="3333" href="ScriptVerification.LedgerImplementation.html#3333" class="Bound">b</a> <a id="3335" href="ScriptVerification.LedgerImplementation.html#3335" class="Bound">m</a> <a id="3337" class="Symbol">→</a> <a id="3339" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="3345" class="Symbol">;</a> <a id="3347" href="Ledger.Crypto.html#700" class="Field">sign</a>             <a id="3364" class="Symbol">=</a> <a id="3366" class="Symbol">λ</a> <a id="3368" href="ScriptVerification.LedgerImplementation.html#3368" class="Bound">_</a> <a id="3370" href="ScriptVerification.LedgerImplementation.html#3370" class="Bound">_</a> <a id="3372" class="Symbol">→</a> <a id="3374" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>
    <a id="3383" class="Symbol">;</a> <a id="3385" href="Ledger.Crypto.html#849" class="Field">isSigned-correct</a> <a id="3402" class="Symbol">=</a> <a id="3404" class="Symbol">λ</a> <a id="3406" class="Keyword">where</a> <a id="3412" class="Symbol">(</a><a id="3413" href="ScriptVerification.LedgerImplementation.html#3413" class="Bound">sk</a> <a id="3416" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3418" href="ScriptVerification.LedgerImplementation.html#3413" class="Bound">sk</a> <a id="3421" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3423" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="3427" class="Symbol">)</a> <a id="3429" class="Symbol">_</a> <a id="3431" class="Symbol">_</a> <a id="3433" href="ScriptVerification.LedgerImplementation.html#3433" class="Bound">h</a> <a id="3435" class="Symbol">→</a> <a id="3437" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
    <a id="3444" class="Symbol">}</a>

<a id="3447" class="Keyword">instance</a> <a id="3456" href="ScriptVerification.LedgerImplementation.html#3456" class="Function">_</a> <a id="3458" class="Symbol">=</a> <a id="3460" href="ScriptVerification.LedgerImplementation.html#3108" class="Function">SVCrypto</a>

<a id="3470" class="Keyword">open</a> <a id="3475" class="Keyword">import</a> <a id="3482" href="Ledger.Script.html" class="Module">Ledger.Script</a> <a id="3496" href="Function.Base.html#4736" class="Function">it</a> <a id="3499" href="Function.Base.html#4736" class="Function">it</a>
<a id="3502" class="Keyword">open</a> <a id="3507" class="Keyword">import</a> <a id="3514" href="Ledger.Conway.Conformance.Script.html" class="Module">Ledger.Conway.Conformance.Script</a> <a id="3547" href="Function.Base.html#4736" class="Function">it</a> <a id="3550" href="Function.Base.html#4736" class="Function">it</a>

<a id="SVScriptStructure"></a><a id="3554" href="ScriptVerification.LedgerImplementation.html#3554" class="Function">SVScriptStructure</a> <a id="3572" class="Symbol">:</a> <a id="3574" href="Ledger.Script.html#5001" class="Record">ScriptStructure</a>
<a id="3590" href="ScriptVerification.LedgerImplementation.html#3554" class="Function">SVScriptStructure</a> <a id="3608" class="Symbol">=</a> <a id="3610" class="Keyword">record</a>
  <a id="3619" class="Symbol">{</a> <a id="3621" href="Ledger.Script.html#5040" class="Field">p1s</a> <a id="3625" class="Symbol">=</a> <a id="3627" href="Ledger.Conway.Conformance.Script.html#1251" class="Function">P1ScriptStructure-HTL</a>
  <a id="3651" class="Symbol">;</a> <a id="3653" href="Ledger.Script.html#5110" class="Field">hashRespectsUnion</a> <a id="3671" class="Symbol">=</a> <a id="3673" href="ScriptVerification.LedgerImplementation.html#3883" class="Function">hashRespectsUnion</a>
  <a id="3693" class="Symbol">;</a> <a id="3695" href="Ledger.Script.html#5227" class="Field">ps</a> <a id="3698" class="Symbol">=</a> <a id="3700" href="ScriptVerification.LedgerImplementation.html#4096" class="Function">SVP2ScriptStructure</a>
  <a id="3722" class="Symbol">}</a>
  <a id="3726" class="Keyword">where</a>

    <a id="3737" class="Keyword">instance</a> <a id="3746" href="ScriptVerification.LedgerImplementation.html#3746" class="Function">Hashable-PlutusScript</a> <a id="3768" class="Symbol">:</a> <a id="3770" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="3779" href="ScriptVerification.LedgerImplementation.html#1343" class="Function">Implementation.PlutusScript</a> <a id="3807" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
             <a id="3822" href="ScriptVerification.LedgerImplementation.html#3746" class="Function">Hashable-PlutusScript</a> <a id="3844" class="Symbol">=</a> <a id="3846" class="Keyword">record</a> <a id="3853" class="Symbol">{</a> <a id="3855" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="3860" class="Symbol">=</a> <a id="3862" class="Symbol">λ</a> <a id="3864" href="ScriptVerification.LedgerImplementation.html#3864" class="Bound">x</a> <a id="3866" class="Symbol">→</a> <a id="3868" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3874" href="ScriptVerification.LedgerImplementation.html#3864" class="Bound">x</a> <a id="3876" class="Symbol">}</a>

    <a id="3883" href="ScriptVerification.LedgerImplementation.html#3883" class="Function">hashRespectsUnion</a> <a id="3901" class="Symbol">:</a> <a id="3903" class="Symbol">∀</a> <a id="3905" class="Symbol">{</a><a id="3906" href="ScriptVerification.LedgerImplementation.html#3906" class="Bound">A</a> <a id="3908" href="ScriptVerification.LedgerImplementation.html#3908" class="Bound">B</a> <a id="3910" href="ScriptVerification.LedgerImplementation.html#3910" class="Bound">ℍ</a><a id="3911" class="Symbol">}</a>
      <a id="3919" class="Symbol">→</a> <a id="3921" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="3930" href="ScriptVerification.LedgerImplementation.html#3906" class="Bound">A</a> <a id="3932" href="ScriptVerification.LedgerImplementation.html#3910" class="Bound">ℍ</a> <a id="3934" class="Symbol">→</a> <a id="3936" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="3945" href="ScriptVerification.LedgerImplementation.html#3908" class="Bound">B</a> <a id="3947" href="ScriptVerification.LedgerImplementation.html#3910" class="Bound">ℍ</a>
      <a id="3955" class="Symbol">→</a> <a id="3957" href="Interface.Hashable.html#158" class="Record">Hashable</a> <a id="3966" class="Symbol">(</a><a id="3967" href="ScriptVerification.LedgerImplementation.html#3906" class="Bound">A</a> <a id="3969" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="3971" href="ScriptVerification.LedgerImplementation.html#3908" class="Bound">B</a><a id="3972" class="Symbol">)</a> <a id="3974" href="ScriptVerification.LedgerImplementation.html#3910" class="Bound">ℍ</a>
    <a id="3980" href="ScriptVerification.LedgerImplementation.html#3883" class="Function">hashRespectsUnion</a> <a id="3998" href="ScriptVerification.LedgerImplementation.html#3998" class="Bound">ha</a> <a id="4001" href="ScriptVerification.LedgerImplementation.html#4001" class="Bound">hb</a> <a id="4004" class="Symbol">=</a> <a id="4006" class="Keyword">record</a> <a id="4013" class="Symbol">{</a> <a id="4015" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="4020" class="Symbol">=</a> <a id="4022" class="Symbol">λ</a> <a id="4024" class="Symbol">{</a> <a id="4026" class="Symbol">(</a><a id="4027" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="4032" href="ScriptVerification.LedgerImplementation.html#4032" class="Bound">x</a><a id="4033" class="Symbol">)</a> <a id="4035" class="Symbol">→</a> <a id="4037" href="Interface.Hashable.html#205" class="Field">Hashable.hash</a> <a id="4051" href="ScriptVerification.LedgerImplementation.html#3998" class="Bound">ha</a> <a id="4054" href="ScriptVerification.LedgerImplementation.html#4032" class="Bound">x</a> <a id="4056" class="Symbol">;</a> <a id="4058" class="Symbol">(</a><a id="4059" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="4064" href="ScriptVerification.LedgerImplementation.html#4064" class="Bound">y</a><a id="4065" class="Symbol">)</a> <a id="4067" class="Symbol">→</a> <a id="4069" href="Interface.Hashable.html#205" class="Field">Hashable.hash</a> <a id="4083" href="ScriptVerification.LedgerImplementation.html#4001" class="Bound">hb</a> <a id="4086" href="ScriptVerification.LedgerImplementation.html#4064" class="Bound">y</a> <a id="4088" class="Symbol">}}</a>

    <a id="4096" href="ScriptVerification.LedgerImplementation.html#4096" class="Function">SVP2ScriptStructure</a> <a id="4116" class="Symbol">:</a> <a id="4118" href="Ledger.Script.html#897" class="Record">PlutusStructure</a>
    <a id="4138" href="ScriptVerification.LedgerImplementation.html#4096" class="Function">SVP2ScriptStructure</a> <a id="4158" class="Symbol">=</a>  <a id="4161" class="Keyword">record</a>
      <a id="4174" class="Symbol">{</a> <a id="4176" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a>
      <a id="4197" class="Symbol">;</a> <a id="4199" href="Ledger.Script.html#1809" class="Field">validPlutusScript</a> <a id="4217" class="Symbol">=</a> <a id="4219" class="Symbol">λ</a> <a id="4221" href="ScriptVerification.LedgerImplementation.html#4221" class="Bound">_</a> <a id="4223" href="ScriptVerification.LedgerImplementation.html#4223" class="Bound">_</a> <a id="4225" href="ScriptVerification.LedgerImplementation.html#4225" class="Bound">_</a> <a id="4227" href="ScriptVerification.LedgerImplementation.html#4227" class="Bound">_</a> <a id="4229" class="Symbol">→</a> <a id="4231" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
      <a id="4239" class="Symbol">}</a>

<a id="4242" class="Keyword">instance</a> <a id="4251" href="ScriptVerification.LedgerImplementation.html#4251" class="Function">_</a> <a id="4253" class="Symbol">=</a> <a id="4255" href="ScriptVerification.LedgerImplementation.html#3554" class="Function">SVScriptStructure</a>

<a id="4274" class="Keyword">open</a> <a id="4279" class="Keyword">import</a> <a id="4286" href="Ledger.PParams.html" class="Module">Ledger.PParams</a> <a id="4301" href="Function.Base.html#4736" class="Function">it</a> <a id="4304" href="Function.Base.html#4736" class="Function">it</a> <a id="4307" href="Function.Base.html#4736" class="Function">it</a> <a id="4310" class="Keyword">hiding</a> <a id="4317" class="Symbol">(</a><a id="4318" href="Ledger.PParams.html#1389" class="Record">PParams</a><a id="4325" class="Symbol">)</a>

<a id="SVGovParams"></a><a id="4328" href="ScriptVerification.LedgerImplementation.html#4328" class="Function">SVGovParams</a> <a id="4340" class="Symbol">:</a> <a id="4342" href="Ledger.PParams.html#13316" class="Record">GovParams</a>
<a id="4352" href="ScriptVerification.LedgerImplementation.html#4328" class="Function">SVGovParams</a> <a id="4364" class="Symbol">=</a> <a id="4366" class="Keyword">record</a>
  <a id="4375" class="Symbol">{</a> <a id="4377" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a>
  <a id="4394" class="Symbol">;</a> <a id="4396" href="Ledger.PParams.html#13348" class="Field">ppUpd</a> <a id="4402" class="Symbol">=</a> <a id="4404" class="Keyword">let</a> <a id="4408" class="Keyword">open</a> <a id="4413" href="Ledger.PParams.html#12921" class="Module">PParamsDiff</a> <a id="4425" class="Keyword">in</a> <a id="4428" class="Symbol">λ</a> <a id="4430" class="Keyword">where</a>
      <a id="4442" class="Symbol">.</a><a id="4443" href="Ledger.PParams.html#12961" class="Field">UpdateT</a>                <a id="4466" class="Symbol">→</a> <a id="4468" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
      <a id="4476" class="Symbol">.</a><a id="4477" href="Ledger.PParams.html#13026" class="Field">updateGroups</a>           <a id="4500" class="Symbol">→</a> <a id="4502" class="Symbol">λ</a> <a id="4504" href="ScriptVerification.LedgerImplementation.html#4504" class="Bound">_</a> <a id="4506" class="Symbol">→</a> <a id="4508" href="Class.HasEmptySet.html#287" class="Field">∅</a>
      <a id="4516" class="Symbol">.</a><a id="4517" href="Ledger.PParams.html#12980" class="Field">applyUpdate</a>            <a id="4540" class="Symbol">→</a> <a id="4542" class="Symbol">λ</a> <a id="4544" href="ScriptVerification.LedgerImplementation.html#4544" class="Bound">p</a> <a id="4546" href="ScriptVerification.LedgerImplementation.html#4546" class="Bound">_</a> <a id="4548" class="Symbol">→</a> <a id="4550" href="ScriptVerification.LedgerImplementation.html#4544" class="Bound">p</a>
      <a id="4558" class="Symbol">.</a><a id="4559" href="Ledger.PParams.html#13074" class="Field">ppWF?</a>                  <a id="4582" class="Symbol">→</a> <a id="4584" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="4586" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="4590" class="Symbol">λ</a> <a id="4592" href="ScriptVerification.LedgerImplementation.html#4592" class="Bound">_</a> <a id="4594" class="Symbol">→</a> <a id="4596" href="Function.Base.html#704" class="Function">id</a>
  <a id="4601" class="Symbol">}</a>

<a id="SVGovStructure"></a><a id="4604" href="ScriptVerification.LedgerImplementation.html#4604" class="Function">SVGovStructure</a> <a id="4619" class="Symbol">:</a> <a id="4621" href="Ledger.Types.GovStructure.html#235" class="Record">GovStructure</a>
<a id="4634" href="ScriptVerification.LedgerImplementation.html#4604" class="Function">SVGovStructure</a> <a id="4649" class="Symbol">=</a> <a id="4651" class="Keyword">record</a>
  <a id="4660" class="Symbol">{</a> <a id="4662" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a>
  <a id="4679" class="Symbol">;</a> <a id="4681" href="Ledger.Types.GovStructure.html#383" class="Field">epochStructure</a>  <a id="4697" class="Symbol">=</a> <a id="4699" href="ScriptVerification.LedgerImplementation.html#3005" class="Function">SVEpochStructure</a>
  <a id="4718" class="Symbol">;</a> <a id="4720" href="Ledger.Types.GovStructure.html#634" class="Field">govParams</a>       <a id="4736" class="Symbol">=</a> <a id="4738" href="ScriptVerification.LedgerImplementation.html#4328" class="Function">SVGovParams</a>
  <a id="4752" class="Symbol">;</a> <a id="4754" href="Ledger.Types.GovStructure.html#335" class="Field">crypto</a>          <a id="4770" class="Symbol">=</a> <a id="4772" href="ScriptVerification.LedgerImplementation.html#3108" class="Function">SVCrypto</a>
  <a id="4783" class="Symbol">;</a> <a id="4785" href="Ledger.Types.GovStructure.html#699" class="Field">globalConstants</a> <a id="4801" class="Symbol">=</a> <a id="4803" href="ScriptVerification.LedgerImplementation.html#2943" class="Function">SVGlobalConstants</a>
  <a id="4823" class="Symbol">}</a>
<a id="4825" class="Keyword">instance</a> <a id="4834" href="ScriptVerification.LedgerImplementation.html#4834" class="Function">_</a> <a id="4836" class="Symbol">=</a> <a id="4838" href="ScriptVerification.LedgerImplementation.html#4604" class="Function">SVGovStructure</a>

<a id="4854" class="Keyword">open</a> <a id="4859" class="Keyword">import</a> <a id="4866" href="Ledger.GovernanceActions.html" class="Module">Ledger.GovernanceActions</a> <a id="4891" href="Function.Base.html#4736" class="Function">it</a> <a id="4894" class="Keyword">hiding</a> <a id="4901" class="Symbol">(</a><a id="4902" href="Ledger.GovernanceActions.html#1881" class="Datatype">Vote</a><a id="4906" class="Symbol">;</a> <a id="4908" href="Ledger.GovernanceActions.html#346" class="Datatype">GovRole</a><a id="4915" class="Symbol">;</a> <a id="4917" href="Ledger.GovernanceActions.html#458" class="Datatype">VDeleg</a><a id="4923" class="Symbol">;</a> <a id="4925" href="Ledger.GovernanceActions.html#642" class="Record">Anchor</a><a id="4931" class="Symbol">)</a>
<a id="4933" class="Keyword">open</a> <a id="4938" class="Keyword">import</a> <a id="4945" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="4977" href="Function.Base.html#4736" class="Function">it</a> <a id="4980" class="Keyword">hiding</a> <a id="4987" class="Symbol">(</a><a id="4988" href="Ledger.Certs.html#687" class="Record">PoolParams</a><a id="4998" class="Symbol">;</a> <a id="5000" href="Ledger.Certs.html#754" class="Datatype">DCert</a><a id="5005" class="Symbol">)</a>

<a id="SVTransactionStructure"></a><a id="5008" href="ScriptVerification.LedgerImplementation.html#5008" class="Function">SVTransactionStructure</a> <a id="5031" class="Symbol">:</a> <a id="5033" href="Ledger.Transaction.html#867" class="Record">TransactionStructure</a>
<a id="5054" href="ScriptVerification.LedgerImplementation.html#5008" class="Function">SVTransactionStructure</a> <a id="5077" class="Symbol">=</a> <a id="5079" class="Keyword">record</a>
  <a id="5088" class="Symbol">{</a> <a id="5090" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a>
  <a id="5107" class="Symbol">;</a> <a id="5109" href="Ledger.Transaction.html#1385" class="Field">epochStructure</a>  <a id="5125" class="Symbol">=</a> <a id="5127" href="ScriptVerification.LedgerImplementation.html#3005" class="Function">SVEpochStructure</a>
  <a id="5146" class="Symbol">;</a> <a id="5148" href="Ledger.Transaction.html#1140" class="Field">globalConstants</a> <a id="5164" class="Symbol">=</a> <a id="5166" href="ScriptVerification.LedgerImplementation.html#2943" class="Function">SVGlobalConstants</a>
  <a id="5186" class="Symbol">;</a> <a id="5188" href="Ledger.Transaction.html#1014" class="Field">adHashingScheme</a> <a id="5204" class="Symbol">=</a> <a id="5206" href="Function.Base.html#4736" class="Function">it</a>
  <a id="5211" class="Symbol">;</a> <a id="5213" href="Ledger.Transaction.html#1215" class="Field">crypto</a>          <a id="5229" class="Symbol">=</a> <a id="5231" href="ScriptVerification.LedgerImplementation.html#3108" class="Function">SVCrypto</a>
  <a id="5242" class="Symbol">;</a> <a id="5244" href="Ledger.Transaction.html#1649" class="Field">govParams</a>       <a id="5260" class="Symbol">=</a> <a id="5262" href="ScriptVerification.LedgerImplementation.html#4328" class="Function">SVGovParams</a>
  <a id="5276" class="Symbol">;</a> <a id="5278" href="Ledger.Transaction.html#1783" class="Field">txidBytes</a>       <a id="5294" class="Symbol">=</a> <a id="5296" href="Function.Base.html#704" class="Function">id</a>
  <a id="5301" class="Symbol">;</a> <a id="5303" href="Ledger.Transaction.html#1507" class="Field">scriptStructure</a> <a id="5319" class="Symbol">=</a> <a id="5321" href="ScriptVerification.LedgerImplementation.html#3554" class="Function">SVScriptStructure</a>
  <a id="5341" class="Symbol">}</a>
<a id="5343" class="Keyword">instance</a> <a id="5352" href="ScriptVerification.LedgerImplementation.html#5352" class="Function">_</a> <a id="5354" class="Symbol">=</a> <a id="5356" href="ScriptVerification.LedgerImplementation.html#5008" class="Function">SVTransactionStructure</a>

<a id="5380" class="Keyword">open</a> <a id="5385" class="Keyword">import</a> <a id="5392" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a> <a id="5408" href="Function.Base.html#4736" class="Function">it</a>
<a id="5411" class="Keyword">open</a> <a id="5416" class="Keyword">import</a> <a id="5423" href="Ledger.Gov.html" class="Module">Ledger.Gov</a> <a id="5434" href="Function.Base.html#4736" class="Function">it</a>

<a id="5438" class="Keyword">open</a> <a id="5443" href="Ledger.Transaction.html#867" class="Module">TransactionStructure</a> <a id="5464" href="Function.Base.html#4736" class="Function">it</a>

<a id="indexOfTxInImp"></a><a id="5468" href="ScriptVerification.LedgerImplementation.html#5468" class="Function">indexOfTxInImp</a> <a id="5483" class="Symbol">:</a> <a id="5485" href="Ledger.Transaction.html#2311" class="Function">TxIn</a> <a id="5490" class="Symbol">→</a> <a id="5492" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5494" href="Ledger.Transaction.html#2311" class="Function">TxIn</a> <a id="5499" class="Symbol">→</a> <a id="5501" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="5507" href="Ledger.Transaction.html#916" class="Function">Ix</a>
<a id="5510" href="ScriptVerification.LedgerImplementation.html#5468" class="Function">indexOfTxInImp</a> <a id="5525" href="ScriptVerification.LedgerImplementation.html#5525" class="Bound">x</a> <a id="5527" href="ScriptVerification.LedgerImplementation.html#5527" class="Bound">y</a> <a id="5529" class="Symbol">=</a> <a id="5531" href="Axiom.Set.Map.html#13670" class="Function">lookupᵐ?</a> <a id="5540" class="Symbol">(</a><a id="5541" href="Axiom.Set.Map.html#2713" class="Function">fromListᵐ</a> <a id="5551" class="Symbol">(</a><a id="5552" href="abstract-set-theory.FiniteSetTheory.html#2463" class="Function">setToList</a> <a id="5562" href="ScriptVerification.LedgerImplementation.html#5527" class="Bound">y</a><a id="5563" class="Symbol">))</a> <a id="5566" class="Symbol">(</a><a id="5567" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="5573" href="ScriptVerification.LedgerImplementation.html#5525" class="Bound">x</a><a id="5574" class="Symbol">)</a>

<a id="SVAbstractFunctions"></a><a id="5577" href="ScriptVerification.LedgerImplementation.html#5577" class="Function">SVAbstractFunctions</a> <a id="5597" class="Symbol">:</a> <a id="5599" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a>
<a id="5617" href="ScriptVerification.LedgerImplementation.html#5577" class="Function">SVAbstractFunctions</a> <a id="5637" class="Symbol">=</a> <a id="5639" class="Keyword">record</a>
  <a id="5648" class="Symbol">{</a> <a id="5650" href="ScriptVerification.LedgerImplementation.html#998" class="Module">Implementation</a>
  <a id="5667" class="Symbol">;</a> <a id="5669" href="Ledger.Abstract.html#617" class="Field">txscriptfee</a> <a id="5681" class="Symbol">=</a> <a id="5683" class="Symbol">λ</a> <a id="5685" href="ScriptVerification.LedgerImplementation.html#5685" class="Bound">tt</a> <a id="5688" href="ScriptVerification.LedgerImplementation.html#5688" class="Bound">y</a> <a id="5690" class="Symbol">→</a> <a id="5692" class="Number">0</a>
  <a id="5696" class="Symbol">;</a> <a id="5698" href="Ledger.Abstract.html#664" class="Field">serSize</a>     <a id="5710" class="Symbol">=</a> <a id="5712" class="Symbol">λ</a> <a id="5714" href="ScriptVerification.LedgerImplementation.html#5714" class="Bound">v</a> <a id="5716" class="Symbol">→</a> <a id="5718" class="Number">0</a> <a id="5720" class="Comment">-- changed to 0</a>
  <a id="5738" class="Symbol">;</a> <a id="5740" href="Ledger.Abstract.html#710" class="Field">indexOfImp</a>  <a id="5752" class="Symbol">=</a> <a id="5754" class="Keyword">record</a>
    <a id="5765" class="Symbol">{</a> <a id="5767" href="Ledger.Abstract.html#252" class="Field">indexOfDCert</a>    <a id="5783" class="Symbol">=</a> <a id="5785" class="Symbol">λ</a> <a id="5787" href="ScriptVerification.LedgerImplementation.html#5787" class="Bound">_</a> <a id="5789" href="ScriptVerification.LedgerImplementation.html#5789" class="Bound">_</a> <a id="5791" class="Symbol">→</a> <a id="5793" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="5805" class="Symbol">;</a> <a id="5807" href="Ledger.Abstract.html#304" class="Field">indexOfRwdAddr</a>  <a id="5823" class="Symbol">=</a> <a id="5825" class="Symbol">λ</a> <a id="5827" href="ScriptVerification.LedgerImplementation.html#5827" class="Bound">_</a> <a id="5829" href="ScriptVerification.LedgerImplementation.html#5829" class="Bound">_</a> <a id="5831" class="Symbol">→</a> <a id="5833" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="5845" class="Symbol">;</a> <a id="5847" href="Ledger.Abstract.html#352" class="Field">indexOfTxIn</a>     <a id="5863" class="Symbol">=</a> <a id="5865" href="ScriptVerification.LedgerImplementation.html#5468" class="Function">indexOfTxInImp</a>
    <a id="5884" class="Symbol">;</a> <a id="5886" href="Ledger.Abstract.html#399" class="Field">indexOfPolicyId</a> <a id="5902" class="Symbol">=</a> <a id="5904" class="Symbol">λ</a> <a id="5906" href="ScriptVerification.LedgerImplementation.html#5906" class="Bound">_</a> <a id="5908" href="ScriptVerification.LedgerImplementation.html#5908" class="Bound">_</a> <a id="5910" class="Symbol">→</a> <a id="5912" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="5924" class="Symbol">;</a> <a id="5926" href="Ledger.Abstract.html#458" class="Field">indexOfVote</a>     <a id="5942" class="Symbol">=</a> <a id="5944" class="Symbol">λ</a> <a id="5946" href="ScriptVerification.LedgerImplementation.html#5946" class="Bound">_</a> <a id="5948" href="ScriptVerification.LedgerImplementation.html#5948" class="Bound">_</a> <a id="5950" class="Symbol">→</a> <a id="5952" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="5964" class="Symbol">;</a> <a id="5966" href="Ledger.Abstract.html#510" class="Field">indexOfProposal</a> <a id="5982" class="Symbol">=</a> <a id="5984" class="Symbol">λ</a> <a id="5986" href="ScriptVerification.LedgerImplementation.html#5986" class="Bound">_</a> <a id="5988" href="ScriptVerification.LedgerImplementation.html#5988" class="Bound">_</a> <a id="5990" class="Symbol">→</a> <a id="5992" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
    <a id="6004" class="Symbol">}</a>
  <a id="6008" class="Symbol">;</a> <a id="6010" href="Ledger.Abstract.html#741" class="Field">runPLCScript</a> <a id="6023" class="Symbol">=</a> <a id="6025" class="Symbol">λ</a> <a id="6027" class="Symbol">{</a> <a id="6029" href="ScriptVerification.LedgerImplementation.html#6029" class="Bound">x</a> <a id="6031" href="ScriptVerification.LedgerImplementation.html#6031" class="Bound">x₁</a> <a id="6034" href="ScriptVerification.LedgerImplementation.html#6034" class="Bound">x₂</a> <a id="6037" href="ScriptVerification.LedgerImplementation.html#6037" class="Bound">x₃</a> <a id="6040" class="Symbol">→</a> <a id="6042" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="6048" href="ScriptVerification.LedgerImplementation.html#6031" class="Bound">x₁</a> <a id="6051" href="ScriptVerification.LedgerImplementation.html#6037" class="Bound">x₃</a> <a id="6054" class="Symbol">}</a>
  <a id="6058" class="Symbol">;</a> <a id="6060" href="Ledger.Abstract.html#814" class="Field">scriptSize</a> <a id="6071" class="Symbol">=</a> <a id="6073" class="Symbol">λ</a> <a id="6075" href="ScriptVerification.LedgerImplementation.html#6075" class="Bound">_</a> <a id="6077" class="Symbol">→</a> <a id="6079" class="Number">0</a>
  <a id="6083" class="Symbol">}</a>
<a id="6085" class="Keyword">instance</a> <a id="6094" href="ScriptVerification.LedgerImplementation.html#6094" class="Function">_</a> <a id="6096" class="Symbol">=</a> <a id="6098" href="ScriptVerification.LedgerImplementation.html#5577" class="Function">SVAbstractFunctions</a>
</pre></body></html>