<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Core.Specification.Epoch</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">module</a> <a id="33" href="Ledger.Core.Specification.Epoch.html" class="Module">Ledger.Core.Specification.Epoch</a> <a id="65" class="Keyword">where</a>

<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="99" class="Keyword">hiding</a> <a id="106" class="Symbol">(</a><a id="107" href="Data.Nat.Base.html#9190" class="Function">compare</a><a id="114" class="Symbol">;</a> <a id="116" href="Axiom.Set.Rel.html#1312" class="Function">Rel</a><a id="119" class="Symbol">)</a>

<a id="122" class="Keyword">open</a> <a id="127" class="Keyword">import</a> <a id="134" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="155" class="Keyword">open</a> <a id="160" class="Keyword">import</a> <a id="167" href="Algebra.html" class="Module">Algebra</a> <a id="175" class="Keyword">using</a> <a id="181" class="Symbol">(</a><a id="182" href="Algebra.Bundles.html#18455" class="Record">Semiring</a><a id="190" class="Symbol">)</a>
<a id="192" class="Keyword">open</a> <a id="197" class="Keyword">import</a> <a id="204" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="224" class="Keyword">using</a> <a id="230" class="Symbol">(</a><a id="231" href="Data.Nat.Properties.html#20062" class="Function">+-monoˡ-≤</a><a id="240" class="Symbol">;</a> <a id="242" href="Data.Nat.Properties.html#18976" class="Function">+-cancelˡ-&lt;</a><a id="253" class="Symbol">;</a> <a id="255" href="Data.Nat.Properties.html#25252" class="Function">+-*-semiring</a><a id="267" class="Symbol">;</a> <a id="269" href="Data.Nat.Properties.html#3485" class="Function">suc-injective</a><a id="282" class="Symbol">)</a>
<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="310" class="Keyword">using</a> <a id="316" class="Symbol">(</a><a id="317" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="318" class="Symbol">)</a>
<a id="320" class="Keyword">import</a>      <a id="332" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="346" class="Symbol">as</a> <a id="349" class="Module">ℚ</a>
<a id="351" class="Keyword">import</a>      <a id="363" href="Data.Rational.Properties.html" class="Module">Data.Rational.Properties</a> <a id="388" class="Symbol">as</a> <a id="391" class="Module">ℚ</a>
<a id="393" class="Keyword">open</a> <a id="398" class="Keyword">import</a> <a id="405" href="Data.Sum.html" class="Module">Data.Sum</a> <a id="414" class="Keyword">using</a> <a id="420" class="Symbol">(</a><a id="421" href="Data.Sum.Base.html#980" class="Function Operator">[_,_]′</a><a id="427" class="Symbol">)</a>

<a id="additionVia"></a><a id="430" href="Ledger.Core.Specification.Epoch.html#430" class="Function">additionVia</a> <a id="442" class="Symbol">:</a> <a id="444" class="Symbol">∀{</a><a id="446" href="Ledger.Core.Specification.Epoch.html#446" class="Bound">A</a> <a id="448" class="Symbol">:</a> <a id="450" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="453" class="Symbol">}</a> <a id="455" class="Symbol">→</a> <a id="457" class="Symbol">(</a><a id="458" href="Ledger.Core.Specification.Epoch.html#446" class="Bound">A</a> <a id="460" class="Symbol">→</a> <a id="462" href="Ledger.Core.Specification.Epoch.html#446" class="Bound">A</a><a id="463" class="Symbol">)</a> <a id="465" class="Symbol">→</a> <a id="467" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="469" class="Symbol">→</a> <a id="471" href="Ledger.Core.Specification.Epoch.html#446" class="Bound">A</a> <a id="473" class="Symbol">→</a> <a id="475" href="Ledger.Core.Specification.Epoch.html#446" class="Bound">A</a>
<a id="477" href="Ledger.Core.Specification.Epoch.html#430" class="Function">additionVia</a> <a id="489" href="Ledger.Core.Specification.Epoch.html#489" class="Bound">sucFun</a> <a id="496" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a> <a id="501" href="Ledger.Core.Specification.Epoch.html#501" class="Bound">r</a> <a id="503" class="Symbol">=</a> <a id="505" href="Ledger.Core.Specification.Epoch.html#501" class="Bound">r</a>
<a id="507" href="Ledger.Core.Specification.Epoch.html#430" class="Function">additionVia</a> <a id="519" href="Ledger.Core.Specification.Epoch.html#519" class="Bound">sucFun</a> <a id="526" class="Symbol">(</a><a id="527" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="531" href="Ledger.Core.Specification.Epoch.html#531" class="Bound">l</a><a id="532" class="Symbol">)</a> <a id="534" href="Ledger.Core.Specification.Epoch.html#534" class="Bound">r</a> <a id="536" class="Symbol">=</a> <a id="538" href="Ledger.Core.Specification.Epoch.html#519" class="Bound">sucFun</a> <a id="545" class="Symbol">(</a><a id="546" href="Ledger.Core.Specification.Epoch.html#430" class="Function">additionVia</a> <a id="558" href="Ledger.Core.Specification.Epoch.html#519" class="Bound">sucFun</a> <a id="565" href="Ledger.Core.Specification.Epoch.html#531" class="Bound">l</a> <a id="567" href="Ledger.Core.Specification.Epoch.html#534" class="Bound">r</a><a id="568" class="Symbol">)</a>

<a id="571" class="Keyword">record</a> <a id="EpochStructure"></a><a id="578" href="Ledger.Core.Specification.Epoch.html#578" class="Record">EpochStructure</a> <a id="593" class="Symbol">:</a> <a id="595" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="601" class="Keyword">where</a>
  <a id="609" class="Keyword">field</a> <a id="EpochStructure.Slotʳ"></a><a id="615" href="Ledger.Core.Specification.Epoch.html#615" class="Field">Slotʳ</a> <a id="621" class="Symbol">:</a> <a id="623" href="Algebra.Bundles.html#18455" class="Record">Semiring</a> <a id="632" href="Level.html#521" class="Function">0ℓ</a> <a id="635" href="Level.html#521" class="Function">0ℓ</a>
        <a id="EpochStructure.Epoch"></a><a id="646" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a> <a id="652" class="Symbol">:</a> <a id="654" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="658" class="Symbol">;</a> <a id="660" class="Symbol">⦃</a> <a id="EpochStructure.DecEq-Epoch"></a><a id="662" href="Ledger.Core.Specification.Epoch.html#662" class="Field">DecEq-Epoch</a> <a id="674" class="Symbol">⦄</a> <a id="676" class="Symbol">:</a> <a id="678" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="684" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a><a id="689" class="Symbol">;</a> <a id="691" class="Symbol">⦃</a> <a id="EpochStructure.Show-Epoch"></a><a id="693" href="Ledger.Core.Specification.Epoch.html#693" class="Field">Show-Epoch</a> <a id="704" class="Symbol">⦄</a> <a id="706" class="Symbol">:</a> <a id="708" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="713" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>

  <a id="EpochStructure.Slot"></a><a id="722" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="727" class="Symbol">=</a> <a id="729" href="Algebra.Bundles.html#18551" class="Field">Semiring.Carrier</a> <a id="746" href="Ledger.Core.Specification.Epoch.html#615" class="Field">Slotʳ</a>

  <a id="755" class="Keyword">field</a> <a id="761" class="Symbol">⦃</a> <a id="EpochStructure.DecPo-Slot"></a><a id="763" href="Ledger.Core.Specification.Epoch.html#763" class="Field">DecPo-Slot</a> <a id="774" class="Symbol">⦄</a>   <a id="778" class="Symbol">:</a> <a id="780" href="Class.HasOrder.Core.html#3921" class="Function">HasDecPartialOrder≡</a> <a id="800" class="Symbol">{</a><a id="801" class="Argument">A</a> <a id="803" class="Symbol">=</a> <a id="805" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="809" class="Symbol">}</a>
        <a id="819" class="Symbol">⦃</a> <a id="EpochStructure.DecEq-Slot"></a><a id="821" href="Ledger.Core.Specification.Epoch.html#821" class="Field">DecEq-Slot</a> <a id="832" class="Symbol">⦄</a>   <a id="836" class="Symbol">:</a> <a id="838" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="844" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>

        <a id="EpochStructure.epoch"></a><a id="858" href="Ledger.Core.Specification.Epoch.html#858" class="Field">epoch</a>                         <a id="888" class="Symbol">:</a> <a id="890" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="895" class="Symbol">→</a> <a id="897" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>
        <a id="EpochStructure.firstSlot"></a><a id="911" href="Ledger.Core.Specification.Epoch.html#911" class="Field">firstSlot</a>                     <a id="941" class="Symbol">:</a> <a id="943" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a> <a id="949" class="Symbol">→</a> <a id="951" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
        <a id="EpochStructure.RandomnessStabilisationWindow"></a><a id="964" href="Ledger.Core.Specification.Epoch.html#964" class="Field">RandomnessStabilisationWindow</a> <a id="994" class="Symbol">:</a> <a id="996" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
        <a id="EpochStructure.StabilityWindow"></a><a id="1009" href="Ledger.Core.Specification.Epoch.html#1009" class="Field">StabilityWindow</a>               <a id="1039" class="Symbol">:</a> <a id="1041" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
        <a id="EpochStructure.sucᵉ"></a><a id="1054" href="Ledger.Core.Specification.Epoch.html#1054" class="Field">sucᵉ</a>                          <a id="1084" class="Symbol">:</a> <a id="1086" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a> <a id="1092" class="Symbol">→</a> <a id="1094" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>

  <a id="EpochStructure._+ᵉ_"></a><a id="1103" href="Ledger.Core.Specification.Epoch.html#1103" class="Function Operator">_+ᵉ_</a> <a id="1108" class="Symbol">=</a> <a id="1110" href="Ledger.Core.Specification.Epoch.html#430" class="Function">additionVia</a> <a id="1122" href="Ledger.Core.Specification.Epoch.html#1054" class="Field">sucᵉ</a>

  <a id="1130" class="Keyword">field</a>
        <a id="EpochStructure._+ᵉ&#39;_"></a><a id="1144" href="Ledger.Core.Specification.Epoch.html#1144" class="Field Operator">_+ᵉ&#39;_</a>           <a id="1160" class="Symbol">:</a> <a id="1162" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1164" class="Symbol">→</a> <a id="1166" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a> <a id="1172" class="Symbol">→</a> <a id="1174" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>
        <a id="EpochStructure.+ᵉ≡+ᵉ&#39;"></a><a id="1188" href="Ledger.Core.Specification.Epoch.html#1188" class="Field">+ᵉ≡+ᵉ&#39;</a>          <a id="1204" class="Symbol">:</a> <a id="1206" class="Symbol">∀</a> <a id="1208" class="Symbol">{</a><a id="1209" href="Ledger.Core.Specification.Epoch.html#1209" class="Bound">a</a> <a id="1211" href="Ledger.Core.Specification.Epoch.html#1211" class="Bound">b</a><a id="1212" class="Symbol">}</a> <a id="1214" class="Symbol">→</a> <a id="1216" href="Ledger.Core.Specification.Epoch.html#1209" class="Bound">a</a> <a id="1218" href="Ledger.Core.Specification.Epoch.html#1103" class="Function Operator">+ᵉ</a> <a id="1221" href="Ledger.Core.Specification.Epoch.html#1211" class="Bound">b</a> <a id="1223" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1225" href="Ledger.Core.Specification.Epoch.html#1209" class="Bound">a</a> <a id="1227" href="Ledger.Core.Specification.Epoch.html#1144" class="Field Operator">+ᵉ&#39;</a> <a id="1231" href="Ledger.Core.Specification.Epoch.html#1211" class="Bound">b</a>

  <a id="1236" class="Comment">-- preorders and partial orders</a>

  <a id="1271" class="Keyword">instance</a>
    <a id="EpochStructure.preoEpoch"></a><a id="1284" href="Ledger.Core.Specification.Epoch.html#1284" class="Function">preoEpoch</a> <a id="1294" class="Symbol">:</a> <a id="1296" href="Class.HasOrder.Core.html#536" class="Record">HasPreorder</a>
    <a id="1312" href="Ledger.Core.Specification.Epoch.html#1284" class="Function">preoEpoch</a> <a id="1322" class="Symbol">=</a> <a id="1324" href="Class.HasOrder.Core.html#5455" class="Function">hasPreorderFromStrictPartialOrder</a> <a id="1358" class="Symbol">{</a><a id="1359" class="Argument">_&lt;_</a> <a id="1363" class="Symbol">=</a> <a id="1365" href="Class.HasOrder.Core.html#646" class="Field Operator">_&lt;_</a> <a id="1369" href="Function.Base.html#6228" class="Function Operator">on</a> <a id="1372" href="Ledger.Core.Specification.Epoch.html#911" class="Field">firstSlot</a><a id="1381" class="Symbol">}</a>
      <a id="1389" class="Keyword">record</a>
        <a id="1404" class="Symbol">{</a> <a id="1406" href="Relation.Binary.Structures.html#4842" class="Field">isEquivalence</a> <a id="1420" class="Symbol">=</a> <a id="1422" href="Relation.Binary.PropositionalEquality.Properties.html#5530" class="Function">isEquivalence</a>
        <a id="1444" class="Symbol">;</a> <a id="1446" href="Relation.Binary.Structures.html#4876" class="Field">irrefl</a> <a id="1453" class="Symbol">=</a> <a id="1455" class="Symbol">λ</a> <a id="1457" class="Keyword">where</a> <a id="1463" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1468" class="Symbol">→</a> <a id="1470" href="Class.HasOrder.Core.html#722" class="Field">&lt;-irrefl</a> <a id="1479" class="Symbol">{</a><a id="1480" class="Argument">A</a> <a id="1482" class="Symbol">=</a> <a id="1484" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="1488" class="Symbol">}</a> <a id="1490" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
        <a id="1503" class="Symbol">;</a> <a id="1505" href="Relation.Binary.Structures.html#4916" class="Field">trans</a>  <a id="1512" class="Symbol">=</a> <a id="1514" href="Class.HasOrder.Core.html#2224" class="Function">&lt;-trans</a> <a id="1522" class="Symbol">{</a><a id="1523" class="Argument">A</a> <a id="1525" class="Symbol">=</a> <a id="1527" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="1531" class="Symbol">}</a>
        <a id="1541" class="Symbol">;</a> <a id="1543" href="Relation.Binary.Structures.html#4951" class="Field">&lt;-resp-≈</a> <a id="1552" class="Symbol">=</a> <a id="1554" class="Symbol">(λ</a> <a id="1557" class="Keyword">where</a> <a id="1563" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1568" class="Symbol">→</a> <a id="1570" href="Function.Base.html#704" class="Function">id</a><a id="1572" class="Symbol">)</a> <a id="1574" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1576" class="Symbol">(λ</a> <a id="1579" class="Keyword">where</a> <a id="1585" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1590" class="Symbol">→</a> <a id="1592" href="Function.Base.html#704" class="Function">id</a><a id="1594" class="Symbol">)</a>
        <a id="1604" class="Symbol">}</a>

  <a id="1609" class="Keyword">field</a>
    <a id="EpochStructure.e&lt;sucᵉ"></a><a id="1619" href="Ledger.Core.Specification.Epoch.html#1619" class="Field">e&lt;sucᵉ</a> <a id="1626" class="Symbol">:</a> <a id="1628" class="Symbol">∀</a> <a id="1630" class="Symbol">{</a><a id="1631" href="Ledger.Core.Specification.Epoch.html#1631" class="Bound">e</a> <a id="1633" class="Symbol">:</a> <a id="1635" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a><a id="1640" class="Symbol">}</a> <a id="1642" class="Symbol">→</a> <a id="1644" href="Ledger.Core.Specification.Epoch.html#1631" class="Bound">e</a> <a id="1646" href="Class.HasOrder.Core.html#646" class="Field Operator">&lt;</a> <a id="1648" href="Ledger.Core.Specification.Epoch.html#1054" class="Field">sucᵉ</a> <a id="1653" href="Ledger.Core.Specification.Epoch.html#1631" class="Bound">e</a>
    <a id="EpochStructure.≤-predᵉ"></a><a id="1659" href="Ledger.Core.Specification.Epoch.html#1659" class="Field">≤-predᵉ</a> <a id="1667" class="Symbol">:</a> <a id="1669" class="Symbol">∀</a> <a id="1671" class="Symbol">{</a><a id="1672" href="Ledger.Core.Specification.Epoch.html#1672" class="Bound">e</a> <a id="1674" href="Ledger.Core.Specification.Epoch.html#1674" class="Bound">e&#39;</a> <a id="1677" class="Symbol">:</a> <a id="1679" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a><a id="1684" class="Symbol">}</a> <a id="1686" class="Symbol">→</a> <a id="1688" href="Ledger.Core.Specification.Epoch.html#1054" class="Field">sucᵉ</a> <a id="1693" href="Ledger.Core.Specification.Epoch.html#1672" class="Bound">e</a> <a id="1695" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="1697" href="Ledger.Core.Specification.Epoch.html#1054" class="Field">sucᵉ</a> <a id="1702" href="Ledger.Core.Specification.Epoch.html#1674" class="Bound">e&#39;</a> <a id="1705" class="Symbol">→</a> <a id="1707" href="Ledger.Core.Specification.Epoch.html#1672" class="Bound">e</a> <a id="1709" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="1711" href="Ledger.Core.Specification.Epoch.html#1674" class="Bound">e&#39;</a>

  <a id="1717" href="Ledger.Core.Specification.Epoch.html#1717" class="Function">_</a> <a id="1719" class="Symbol">=</a> <a id="1721" href="Class.HasOrder.Core.html#646" class="Field Operator">_&lt;_</a> <a id="1725" class="Symbol">{</a><a id="1726" class="Argument">A</a> <a id="1728" class="Symbol">=</a> <a id="1730" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="1734" class="Symbol">}</a>  <a id="1737" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a> <a id="1740" href="Function.Base.html#4505" class="Function Operator">∋</a> <a id="1742" href="Function.Base.html#4755" class="Function">it</a>
  <a id="1747" href="Ledger.Core.Specification.Epoch.html#1747" class="Function">_</a> <a id="1749" class="Symbol">=</a> <a id="1751" href="Class.HasOrder.Core.html#613" class="Field Operator">_≤_</a> <a id="1755" class="Symbol">{</a><a id="1756" class="Argument">A</a> <a id="1758" class="Symbol">=</a> <a id="1760" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="1764" class="Symbol">}</a>  <a id="1767" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a> <a id="1770" href="Function.Base.html#4505" class="Function Operator">∋</a> <a id="1772" href="Function.Base.html#4755" class="Function">it</a>
  <a id="1777" href="Ledger.Core.Specification.Epoch.html#1777" class="Function">_</a> <a id="1779" class="Symbol">=</a> <a id="1781" href="Class.HasOrder.Core.html#646" class="Field Operator">_&lt;_</a> <a id="1785" class="Symbol">{</a><a id="1786" class="Argument">A</a> <a id="1788" class="Symbol">=</a> <a id="1790" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a><a id="1795" class="Symbol">}</a> <a id="1797" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a> <a id="1800" href="Function.Base.html#4505" class="Function Operator">∋</a> <a id="1802" href="Function.Base.html#4755" class="Function">it</a>
  <a id="1807" href="Ledger.Core.Specification.Epoch.html#1807" class="Function">_</a> <a id="1809" class="Symbol">=</a> <a id="1811" href="Class.HasOrder.Core.html#613" class="Field Operator">_≤_</a> <a id="1815" class="Symbol">{</a><a id="1816" class="Argument">A</a> <a id="1818" class="Symbol">=</a> <a id="1820" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a><a id="1825" class="Symbol">}</a> <a id="1827" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a> <a id="1830" href="Function.Base.html#4505" class="Function Operator">∋</a> <a id="1832" href="Function.Base.html#4755" class="Function">it</a>

  <a id="1838" class="Comment">-- addition</a>

  <a id="1853" class="Keyword">open</a> <a id="1858" href="Algebra.Bundles.html#18455" class="Module">Semiring</a> <a id="1867" href="Ledger.Core.Specification.Epoch.html#615" class="Field">Slotʳ</a> <a id="1873" class="Keyword">renaming</a> <a id="1882" class="Symbol">(</a><a id="1883" href="Algebra.Bundles.html#18605" class="Field Operator">_+_</a> <a id="1887" class="Symbol">to</a> <a id="1890" class="Field Operator">_+ˢ_</a><a id="1894" class="Symbol">)</a>

  <a id="EpochStructure.ℕtoEpoch"></a><a id="1899" href="Ledger.Core.Specification.Epoch.html#1899" class="Function">ℕtoEpoch</a> <a id="1908" class="Symbol">:</a> <a id="1910" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="1912" class="Symbol">→</a> <a id="1914" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>
  <a id="1922" href="Ledger.Core.Specification.Epoch.html#1899" class="Function">ℕtoEpoch</a> <a id="1931" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a>    <a id="1939" class="Symbol">=</a> <a id="1941" href="Ledger.Core.Specification.Epoch.html#858" class="Field">epoch</a> <a id="1947" href="Algebra.Bundles.html#18663" class="Function">0#</a>
  <a id="1952" href="Ledger.Core.Specification.Epoch.html#1899" class="Function">ℕtoEpoch</a> <a id="1961" class="Symbol">(</a><a id="1962" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="1966" href="Ledger.Core.Specification.Epoch.html#1966" class="Bound">n</a><a id="1967" class="Symbol">)</a> <a id="1969" class="Symbol">=</a> <a id="1971" href="Ledger.Core.Specification.Epoch.html#1054" class="Field">sucᵉ</a> <a id="1976" class="Symbol">(</a><a id="1977" href="Ledger.Core.Specification.Epoch.html#1899" class="Function">ℕtoEpoch</a> <a id="1986" href="Ledger.Core.Specification.Epoch.html#1966" class="Bound">n</a><a id="1987" class="Symbol">)</a>

  <a id="1992" class="Keyword">instance</a>
    <a id="EpochStructure.addSlot"></a><a id="2005" href="Ledger.Core.Specification.Epoch.html#2005" class="Function">addSlot</a> <a id="2013" class="Symbol">:</a> <a id="2015" href="Class.HasAdd.Core.html#104" class="Record">HasAdd</a> <a id="2022" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="2031" href="Ledger.Core.Specification.Epoch.html#2005" class="Function">addSlot</a> <a id="2039" class="Symbol">.</a><a id="2040" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="2044" class="Symbol">=</a> <a id="2046" href="Ledger.Core.Specification.Epoch.html#1890" class="Function Operator">_+ˢ_</a>

    <a id="EpochStructure.addEpoch"></a><a id="2056" href="Ledger.Core.Specification.Epoch.html#2056" class="Function">addEpoch</a> <a id="2065" class="Symbol">:</a> <a id="2067" href="Class.HasAdd.Core.html#104" class="Record">HasAdd</a> <a id="2074" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>
    <a id="2084" href="Ledger.Core.Specification.Epoch.html#2056" class="Function">addEpoch</a> <a id="2093" class="Symbol">.</a><a id="2094" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="2098" href="Ledger.Core.Specification.Epoch.html#2098" class="Bound">e</a> <a id="2100" href="Ledger.Core.Specification.Epoch.html#2100" class="Bound">e&#39;</a> <a id="2103" class="Symbol">=</a> <a id="2105" href="Ledger.Core.Specification.Epoch.html#858" class="Field">epoch</a> <a id="2111" class="Symbol">(</a><a id="2112" href="Ledger.Core.Specification.Epoch.html#911" class="Field">firstSlot</a> <a id="2122" href="Ledger.Core.Specification.Epoch.html#2098" class="Bound">e</a> <a id="2124" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2126" href="Ledger.Core.Specification.Epoch.html#911" class="Field">firstSlot</a> <a id="2136" href="Ledger.Core.Specification.Epoch.html#2100" class="Bound">e&#39;</a><a id="2138" class="Symbol">)</a>

    <a id="EpochStructure.Number-Epoch"></a><a id="2145" href="Ledger.Core.Specification.Epoch.html#2145" class="Function">Number-Epoch</a> <a id="2158" class="Symbol">:</a> <a id="2160" href="Agda.Builtin.FromNat.html#196" class="Record">Number</a> <a id="2167" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>
    <a id="2177" href="Ledger.Core.Specification.Epoch.html#2145" class="Function">Number-Epoch</a> <a id="2190" class="Symbol">.</a><a id="2191" href="Agda.Builtin.FromNat.html#252" class="Field">Number.Constraint</a> <a id="2209" class="Symbol">_</a> <a id="2211" class="Symbol">=</a> <a id="2213" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
    <a id="2219" href="Ledger.Core.Specification.Epoch.html#2145" class="Function">Number-Epoch</a> <a id="2232" class="Symbol">.</a><a id="2233" href="Agda.Builtin.FromNat.html#281" class="Field">Number.fromNat</a>    <a id="2251" href="Ledger.Core.Specification.Epoch.html#2251" class="Bound">x</a> <a id="2253" class="Symbol">=</a> <a id="2255" href="Ledger.Core.Specification.Epoch.html#1899" class="Function">ℕtoEpoch</a> <a id="2264" href="Ledger.Core.Specification.Epoch.html#2251" class="Bound">x</a>

<a id="2267" class="Keyword">record</a> <a id="GlobalConstants"></a><a id="2274" href="Ledger.Core.Specification.Epoch.html#2274" class="Record">GlobalConstants</a> <a id="2290" class="Symbol">:</a> <a id="2292" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="2298" class="Keyword">where</a>
  <a id="2306" class="Keyword">field</a>  <a id="GlobalConstants.Network"></a><a id="2313" href="Ledger.Core.Specification.Epoch.html#2313" class="Field">Network</a> <a id="2321" class="Symbol">:</a> <a id="2323" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="2327" class="Symbol">;</a> <a id="2329" class="Symbol">⦃</a> <a id="GlobalConstants.DecEq-Netw"></a><a id="2331" href="Ledger.Core.Specification.Epoch.html#2331" class="Field">DecEq-Netw</a> <a id="2342" class="Symbol">⦄</a> <a id="2344" class="Symbol">:</a> <a id="2346" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="2352" href="Ledger.Core.Specification.Epoch.html#2313" class="Field">Network</a><a id="2359" class="Symbol">;</a> <a id="2361" class="Symbol">⦃</a> <a id="GlobalConstants.Show-Network"></a><a id="2363" href="Ledger.Core.Specification.Epoch.html#2363" class="Field">Show-Network</a> <a id="2376" class="Symbol">⦄</a> <a id="2378" class="Symbol">:</a> <a id="2380" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="2385" href="Ledger.Core.Specification.Epoch.html#2313" class="Field">Network</a>
         <a id="GlobalConstants.SlotsPerEpochᶜ"></a><a id="2402" href="Ledger.Core.Specification.Epoch.html#2402" class="Field">SlotsPerEpochᶜ</a>   <a id="2419" class="Symbol">:</a> <a id="2421" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="2422" class="Symbol">;</a> <a id="2424" class="Symbol">⦃</a> <a id="GlobalConstants.NonZero-SlotsPerEpochᶜ"></a><a id="2426" href="Ledger.Core.Specification.Epoch.html#2426" class="Field">NonZero-SlotsPerEpochᶜ</a> <a id="2449" class="Symbol">⦄</a> <a id="2451" class="Symbol">:</a> <a id="2453" href="Data.Nat.Base.html#3266" class="Record">NonZero</a> <a id="2461" href="Ledger.Core.Specification.Epoch.html#2402" class="Field">SlotsPerEpochᶜ</a>
         <a id="GlobalConstants.ActiveSlotCoeff"></a><a id="2485" href="Ledger.Core.Specification.Epoch.html#2485" class="Field">ActiveSlotCoeff</a>  <a id="2502" class="Symbol">:</a> <a id="2504" href="Data.Rational.Base.html#1421" class="Record">ℚ</a><a id="2505" class="Symbol">;</a> <a id="2507" class="Symbol">⦃</a> <a id="GlobalConstants.Positive-ActiveSlotCoeff"></a><a id="2509" href="Ledger.Core.Specification.Epoch.html#2509" class="Field">Positive-ActiveSlotCoeff</a> <a id="2534" class="Symbol">⦄</a> <a id="2536" class="Symbol">:</a> <a id="2538" href="Data.Rational.Base.html#4630" class="Function">ℚ.Positive</a> <a id="2549" href="Ledger.Core.Specification.Epoch.html#2485" class="Field">ActiveSlotCoeff</a>
         <a id="GlobalConstants.RandomnessStabilisationWindowᶜ"></a><a id="2574" href="Ledger.Core.Specification.Epoch.html#2574" class="Field">RandomnessStabilisationWindowᶜ</a> <a id="2605" class="Symbol">:</a> <a id="2607" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
         <a id="GlobalConstants.StabilityWindowᶜ"></a><a id="2618" href="Ledger.Core.Specification.Epoch.html#2618" class="Field">StabilityWindowᶜ</a> <a id="2635" class="Symbol">:</a> <a id="2637" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
         <a id="GlobalConstants.MaxLovelaceSupplyᶜ"></a><a id="2648" href="Ledger.Core.Specification.Epoch.html#2648" class="Field">MaxLovelaceSupplyᶜ</a> <a id="2667" class="Symbol">:</a> <a id="2669" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
         <a id="GlobalConstants.Quorum"></a><a id="2683" href="Ledger.Core.Specification.Epoch.html#2683" class="Field">Quorum</a> <a id="2690" class="Symbol">:</a> <a id="2692" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
         <a id="GlobalConstants.NetworkId"></a><a id="2703" href="Ledger.Core.Specification.Epoch.html#2703" class="Field">NetworkId</a> <a id="2713" class="Symbol">:</a> <a id="2715" href="Ledger.Core.Specification.Epoch.html#2313" class="Field">Network</a>

  <a id="2726" class="Keyword">instance</a>
    <a id="GlobalConstants.NonZero-ActiveSlotCoeff"></a><a id="2739" href="Ledger.Core.Specification.Epoch.html#2739" class="Function">NonZero-ActiveSlotCoeff</a> <a id="2763" class="Symbol">:</a> <a id="2765" href="Data.Rational.Base.html#4577" class="Function">ℚ.NonZero</a> <a id="2775" href="Ledger.Core.Specification.Epoch.html#2485" class="Field">ActiveSlotCoeff</a>
    <a id="2795" href="Ledger.Core.Specification.Epoch.html#2739" class="Function">NonZero-ActiveSlotCoeff</a> <a id="2819" class="Symbol">=</a> <a id="2821" href="Data.Rational.Base.html#5293" class="Function">ℚ.&gt;-nonZero</a> <a id="2833" class="Symbol">(</a><a id="2834" href="Data.Rational.Properties.html#26962" class="Function">ℚ.positive⁻¹</a> <a id="2847" href="Ledger.Core.Specification.Epoch.html#2485" class="Field">ActiveSlotCoeff</a><a id="2862" class="Symbol">)</a>

  <a id="GlobalConstants.ℕ+ᵉ≡+ᵉ&#39;"></a><a id="2867" href="Ledger.Core.Specification.Epoch.html#2867" class="Function">ℕ+ᵉ≡+ᵉ&#39;</a> <a id="2875" class="Symbol">:</a> <a id="2877" class="Symbol">∀</a> <a id="2879" class="Symbol">{</a><a id="2880" href="Ledger.Core.Specification.Epoch.html#2880" class="Bound">a</a> <a id="2882" href="Ledger.Core.Specification.Epoch.html#2882" class="Bound">b</a><a id="2883" class="Symbol">}</a> <a id="2885" class="Symbol">→</a> <a id="2887" href="Ledger.Core.Specification.Epoch.html#430" class="Function">additionVia</a> <a id="2899" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2903" href="Ledger.Core.Specification.Epoch.html#2880" class="Bound">a</a> <a id="2905" href="Ledger.Core.Specification.Epoch.html#2882" class="Bound">b</a> <a id="2907" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2909" href="Ledger.Core.Specification.Epoch.html#2880" class="Bound">a</a> <a id="2911" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2913" href="Ledger.Core.Specification.Epoch.html#2882" class="Bound">b</a>
  <a id="2917" href="Ledger.Core.Specification.Epoch.html#2867" class="Function">ℕ+ᵉ≡+ᵉ&#39;</a> <a id="2925" class="Symbol">{</a><a id="2926" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="2930" class="Symbol">}</a> <a id="2932" class="Symbol">{</a><a id="2933" href="Ledger.Core.Specification.Epoch.html#2933" class="Bound">b</a><a id="2934" class="Symbol">}</a> <a id="2936" class="Symbol">=</a> <a id="2938" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="2945" href="Ledger.Core.Specification.Epoch.html#2867" class="Function">ℕ+ᵉ≡+ᵉ&#39;</a> <a id="2953" class="Symbol">{</a><a id="2954" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2958" href="Ledger.Core.Specification.Epoch.html#2958" class="Bound">a</a><a id="2959" class="Symbol">}</a> <a id="2961" class="Symbol">{</a><a id="2962" href="Ledger.Core.Specification.Epoch.html#2962" class="Bound">b</a><a id="2963" class="Symbol">}</a> <a id="2965" class="Symbol">=</a> <a id="2967" href="Relation.Binary.PropositionalEquality.Core.html#1481" class="Function">cong</a> <a id="2972" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="2976" class="Symbol">(</a><a id="2977" href="Ledger.Core.Specification.Epoch.html#2867" class="Function">ℕ+ᵉ≡+ᵉ&#39;</a> <a id="2985" class="Symbol">{</a><a id="2986" href="Ledger.Core.Specification.Epoch.html#2958" class="Bound">a</a><a id="2987" class="Symbol">}</a> <a id="2989" class="Symbol">{</a><a id="2990" href="Ledger.Core.Specification.Epoch.html#2962" class="Bound">b</a><a id="2991" class="Symbol">})</a>

  <a id="GlobalConstants.ℕEpochStructure"></a><a id="2997" href="Ledger.Core.Specification.Epoch.html#2997" class="Function">ℕEpochStructure</a> <a id="3013" class="Symbol">:</a> <a id="3015" href="Ledger.Core.Specification.Epoch.html#578" class="Record">EpochStructure</a>
  <a id="3032" href="Ledger.Core.Specification.Epoch.html#2997" class="Function">ℕEpochStructure</a> <a id="3048" class="Symbol">=</a> <a id="3050" class="Symbol">λ</a> <a id="3052" class="Keyword">where</a>
    <a id="3062" class="Symbol">.</a><a id="3063" href="Ledger.Core.Specification.Epoch.html#615" class="Field">Slotʳ</a>                         <a id="3093" class="Symbol">→</a> <a id="3095" href="Data.Nat.Properties.html#25252" class="Function">+-*-semiring</a>
    <a id="3112" class="Symbol">.</a><a id="3113" href="Ledger.Core.Specification.Epoch.html#763" class="Field">DecPo-Slot</a>                    <a id="3143" class="Symbol">→</a> <a id="3145" href="Class.HasOrder.Instances.html#653" class="Function">ℕ-hasDecPartialOrder</a>
    <a id="3170" class="Symbol">.</a><a id="3171" href="Ledger.Core.Specification.Epoch.html#646" class="Field">Epoch</a>                         <a id="3201" class="Symbol">→</a> <a id="3203" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
    <a id="3209" class="Symbol">.</a><a id="3210" href="Ledger.Core.Specification.Epoch.html#858" class="Field">epoch</a> <a id="3216" href="Ledger.Core.Specification.Epoch.html#3216" class="Bound">slot</a>                    <a id="3240" class="Symbol">→</a> <a id="3242" href="Ledger.Core.Specification.Epoch.html#3216" class="Bound">slot</a> <a id="3247" href="Data.Nat.Base.html#7102" class="Function Operator">/</a> <a id="3249" href="Ledger.Core.Specification.Epoch.html#2402" class="Field">SlotsPerEpochᶜ</a>
    <a id="3268" class="Symbol">.</a><a id="3269" href="Ledger.Core.Specification.Epoch.html#911" class="Field">firstSlot</a> <a id="3279" href="Ledger.Core.Specification.Epoch.html#3279" class="Bound">e</a>                   <a id="3299" class="Symbol">→</a> <a id="3301" href="Ledger.Core.Specification.Epoch.html#3279" class="Bound">e</a> <a id="3303" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3305" href="Ledger.Core.Specification.Epoch.html#2402" class="Field">SlotsPerEpochᶜ</a>
    <a id="3324" class="Symbol">.</a><a id="3325" href="Ledger.Core.Specification.Epoch.html#964" class="Field">RandomnessStabilisationWindow</a> <a id="3355" class="Symbol">→</a> <a id="3357" href="Ledger.Core.Specification.Epoch.html#2574" class="Field">RandomnessStabilisationWindowᶜ</a>
    <a id="3392" class="Symbol">.</a><a id="3393" href="Ledger.Core.Specification.Epoch.html#1009" class="Field">StabilityWindow</a>               <a id="3423" class="Symbol">→</a> <a id="3425" href="Ledger.Core.Specification.Epoch.html#2618" class="Field">StabilityWindowᶜ</a>
    <a id="3446" class="Symbol">.</a><a id="3447" href="Ledger.Core.Specification.Epoch.html#1054" class="Field">sucᵉ</a>                          <a id="3477" class="Symbol">→</a> <a id="3479" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a>
    <a id="3487" class="Symbol">.</a><a id="3488" href="Ledger.Core.Specification.Epoch.html#1619" class="Field">e&lt;sucᵉ</a>                        <a id="3518" class="Symbol">→</a> <a id="3520" href="Data.Nat.Properties.html#20062" class="Function">+-monoˡ-≤</a> <a id="3530" class="Symbol">_</a> <a id="3532" class="Symbol">(</a><a id="3533" href="Data.Nat.Base.html#3677" class="Function">&gt;-nonZero⁻¹</a> <a id="3545" href="Ledger.Core.Specification.Epoch.html#2402" class="Field">SlotsPerEpochᶜ</a><a id="3559" class="Symbol">)</a>
    <a id="3565" class="Symbol">.</a><a id="3566" href="Ledger.Core.Specification.Epoch.html#1659" class="Field">≤-predᵉ</a>                       <a id="3596" class="Symbol">→</a> <a id="3598" href="Data.Sum.Base.html#980" class="Function Operator">[</a> <a id="3600" class="Symbol">(λ</a> <a id="3603" href="Ledger.Core.Specification.Epoch.html#3603" class="Bound">p</a> <a id="3605" class="Symbol">→</a> <a id="3607" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="3612" class="Symbol">(</a><a id="3613" href="Data.Nat.Properties.html#18976" class="Function">+-cancelˡ-&lt;</a> <a id="3625" class="Symbol">_</a> <a id="3627" class="Symbol">_</a> <a id="3629" class="Symbol">_</a> <a id="3631" href="Ledger.Core.Specification.Epoch.html#3603" class="Bound">p</a><a id="3632" class="Symbol">))</a> <a id="3635" href="Data.Sum.Base.html#980" class="Function Operator">,</a> <a id="3637" class="Symbol">(λ</a> <a id="3640" href="Ledger.Core.Specification.Epoch.html#3640" class="Bound">p</a> <a id="3642" class="Symbol">→</a> <a id="3644" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="3649" class="Symbol">(</a><a id="3650" href="Data.Nat.Properties.html#3485" class="Function">suc-injective</a> <a id="3664" href="Ledger.Core.Specification.Epoch.html#3640" class="Bound">p</a><a id="3665" class="Symbol">))</a> <a id="3668" href="Data.Sum.Base.html#980" class="Function Operator">]′</a>
    <a id="3675" class="Symbol">.</a><a id="3676" href="Ledger.Core.Specification.Epoch.html#1144" class="Field Operator">_+ᵉ&#39;_</a>                         <a id="3706" class="Symbol">→</a> <a id="3708" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a>
    <a id="3716" class="Symbol">.</a><a id="3717" href="Ledger.Core.Specification.Epoch.html#1188" class="Field">+ᵉ≡+ᵉ&#39;</a> <a id="3724" class="Symbol">{</a><a id="3725" href="Ledger.Core.Specification.Epoch.html#3725" class="Bound">a</a><a id="3726" class="Symbol">}</a> <a id="3728" class="Symbol">{</a><a id="3729" href="Ledger.Core.Specification.Epoch.html#3729" class="Bound">b</a><a id="3730" class="Symbol">}</a>                <a id="3747" class="Symbol">→</a> <a id="3749" href="Ledger.Core.Specification.Epoch.html#2867" class="Function">ℕ+ᵉ≡+ᵉ&#39;</a> <a id="3757" class="Symbol">{</a><a id="3758" href="Ledger.Core.Specification.Epoch.html#3725" class="Bound">a</a><a id="3759" class="Symbol">}</a> <a id="3761" class="Symbol">{</a><a id="3762" href="Ledger.Core.Specification.Epoch.html#3729" class="Bound">b</a><a id="3763" class="Symbol">}</a>

   <a id="3769" class="Keyword">where</a> <a id="3775" class="Keyword">open</a> <a id="3780" href="Ledger.Core.Specification.Epoch.html#578" class="Module">EpochStructure</a>

<a id="3796" class="Keyword">open</a> <a id="3801" href="Ledger.Core.Specification.Epoch.html#2274" class="Module">GlobalConstants</a> <a id="3817" class="Keyword">using</a> <a id="3823" class="Symbol">(</a><a id="3824" href="Ledger.Core.Specification.Epoch.html#2997" class="Function">ℕEpochStructure</a><a id="3839" class="Symbol">)</a> <a id="3841" class="Keyword">public</a>

</pre></body></html>