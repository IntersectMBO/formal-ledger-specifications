<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Dijkstra.Specification.Utxow</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="53" class="Keyword">open</a> <a id="58" class="Keyword">import</a> <a id="65" href="Ledger.Dijkstra.Specification.Abstract.html" class="Module">Ledger.Dijkstra.Specification.Abstract</a>
<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="Ledger.Dijkstra.Specification.Transaction.html" class="Module">Ledger.Dijkstra.Specification.Transaction</a>

<a id="159" class="Keyword">module</a> <a id="166" href="Ledger.Dijkstra.Specification.Utxow.html" class="Module">Ledger.Dijkstra.Specification.Utxow</a>
  <a id="204" class="Symbol">(</a><a id="205" href="Ledger.Dijkstra.Specification.Utxow.html#205" class="Bound">txs</a> <a id="209" class="Symbol">:</a> <a id="211" class="Symbol">_)</a> <a id="214" class="Symbol">(</a><a id="215" class="Keyword">open</a> <a id="220" href="Ledger.Dijkstra.Specification.Transaction.html#1329" class="Module">TransactionStructure</a> <a id="241" href="Ledger.Dijkstra.Specification.Utxow.html#205" class="Bound">txs</a><a id="244" class="Symbol">)</a>
  <a id="248" class="Symbol">(</a><a id="249" href="Ledger.Dijkstra.Specification.Utxow.html#249" class="Bound">abs</a> <a id="253" class="Symbol">:</a> <a id="255" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Record">AbstractFunctions</a> <a id="273" href="Ledger.Dijkstra.Specification.Utxow.html#205" class="Bound">txs</a><a id="276" class="Symbol">)</a> <a id="278" class="Symbol">(</a><a id="279" class="Keyword">open</a> <a id="284" href="Ledger.Dijkstra.Specification.Abstract.html#912" class="Module">AbstractFunctions</a> <a id="302" href="Ledger.Dijkstra.Specification.Utxow.html#249" class="Bound">abs</a><a id="305" class="Symbol">)</a>
  <a id="309" class="Keyword">where</a>

<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Ledger.Dijkstra.Specification.Utxo.html" class="Module">Ledger.Dijkstra.Specification.Utxo</a> <a id="363" href="Ledger.Dijkstra.Specification.Utxow.html#205" class="Bound">txs</a> <a id="367" href="Ledger.Dijkstra.Specification.Utxow.html#249" class="Bound">abs</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Ledger.Dijkstra.Specification.Script.Validation.html" class="Module">Ledger.Dijkstra.Specification.Script.Validation</a> <a id="431" href="Ledger.Dijkstra.Specification.Utxow.html#205" class="Bound">txs</a> <a id="435" href="Ledger.Dijkstra.Specification.Utxow.html#249" class="Bound">abs</a>

<a id="440" class="Keyword">private</a> <a id="448" class="Keyword">variable</a>
  <a id="459" href="Ledger.Dijkstra.Specification.Utxow.html#459" class="Generalizable">ℓ</a> <a id="461" class="Symbol">:</a> <a id="463" href="Ledger.Dijkstra.Specification.Transaction.html#768" class="Datatype">TxLevel</a>
  <a id="473" href="Ledger.Dijkstra.Specification.Utxow.html#473" class="Generalizable">A</a>  <a id="476" class="Symbol">:</a> <a id="478" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="485" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a>  <a id="488" class="Symbol">:</a> <a id="490" href="Ledger.Dijkstra.Specification.Utxow.html#473" class="Generalizable">A</a>
  <a id="494" href="Ledger.Dijkstra.Specification.Utxow.html#494" class="Generalizable">s</a> <a id="496" href="Ledger.Dijkstra.Specification.Utxow.html#496" class="Generalizable">s&#39;</a> <a id="499" class="Symbol">:</a> <a id="501" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a>
  <a id="513" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a> <a id="516" class="Symbol">:</a> <a id="518" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a>
  <a id="531" href="Ledger.Dijkstra.Specification.Utxow.html#531" class="Generalizable">stx</a> <a id="535" class="Symbol">:</a> <a id="537" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a>


<a id="550" class="Keyword">module</a> <a id="557" href="Ledger.Dijkstra.Specification.Utxow.html#557" class="Module">_</a> <a id="559" class="Symbol">(</a><a id="560" href="Ledger.Dijkstra.Specification.Utxow.html#560" class="Bound">tx</a> <a id="563" class="Symbol">:</a> <a id="565" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a><a id="575" class="Symbol">)</a> <a id="577" class="Keyword">where</a>
  <a id="585" class="Keyword">open</a> <a id="590" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Module">Tx</a> <a id="593" href="Ledger.Dijkstra.Specification.Utxow.html#560" class="Bound">tx</a>
  <a id="598" class="Keyword">open</a> <a id="603" href="Ledger.Dijkstra.Specification.Transaction.html#3794" class="Module">TxBody</a> <a id="610" href="Ledger.Dijkstra.Specification.Transaction.html#3594" class="Field">txBody</a>

  <a id="620" class="Keyword">module</a> <a id="627" href="Ledger.Dijkstra.Specification.Utxow.html#627" class="Module">_</a> <a id="629" class="Symbol">(</a><a id="630" href="Ledger.Dijkstra.Specification.Utxow.html#630" class="Bound">utxo</a> <a id="635" class="Symbol">:</a> <a id="637" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a><a id="641" class="Symbol">)</a> <a id="643" class="Keyword">where</a>
    <a id="653" href="Ledger.Dijkstra.Specification.Utxow.html#653" class="Function">UsesBootstrapAddress</a> <a id="674" class="Symbol">:</a> <a id="676" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="685" href="Ledger.Dijkstra.Specification.Utxow.html#653" class="Function">UsesBootstrapAddress</a> <a id="706" class="Symbol">=</a> <a id="708" href="Class.IsSet.html#736" class="Function">∃[</a> <a id="711" href="Ledger.Dijkstra.Specification.Utxow.html#711" class="Bound">o</a> <a id="713" href="Class.IsSet.html#736" class="Function">∈</a> <a id="715" class="Symbol">(</a><a id="716" href="Class.IsSet.html#959" class="Function">range</a> <a id="722" href="Ledger.Dijkstra.Specification.Transaction.html#4005" class="Function">txOuts</a><a id="728" class="Symbol">)</a> <a id="730" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="732" href="Class.IsSet.html#959" class="Function">range</a> <a id="738" class="Symbol">(</a><a id="739" href="Ledger.Dijkstra.Specification.Utxow.html#630" class="Bound">utxo</a> <a id="744" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="746" class="Symbol">(</a><a id="747" href="Ledger.Dijkstra.Specification.Transaction.html#3870" class="Function">txIns</a> <a id="753" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="755" href="Ledger.Dijkstra.Specification.Transaction.html#3908" class="Function">referenceInputs</a><a id="770" class="Symbol">))</a> <a id="773" href="Class.IsSet.html#736" class="Function">]</a> <a id="775" href="Ledger.Core.Specification.Address.html#3584" class="Datatype">isBootstrapAddr</a> <a id="791" class="Symbol">(</a><a id="792" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="798" href="Ledger.Dijkstra.Specification.Utxow.html#711" class="Bound">o</a><a id="799" class="Symbol">)</a>

    <a id="806" href="Ledger.Dijkstra.Specification.Utxow.html#806" class="Function">HasInlineDatum</a> <a id="821" class="Symbol">:</a> <a id="823" href="Ledger.Dijkstra.Specification.Transaction.html#3077" class="Function">TxOut</a> <a id="829" class="Symbol">→</a> <a id="831" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="840" href="Ledger.Dijkstra.Specification.Utxow.html#806" class="Function">HasInlineDatum</a> <a id="855" href="Ledger.Dijkstra.Specification.Utxow.html#855" class="Bound">txout</a> <a id="861" class="Symbol">=</a> <a id="863" href="Data.Maybe.html#845" class="Function">Is-just</a> <a id="871" class="Symbol">(</a><a id="872" href="Ledger.Dijkstra.Specification.Transaction.html#14740" class="Function">txOutToDatum</a> <a id="885" href="Ledger.Dijkstra.Specification.Utxow.html#855" class="Bound">txout</a><a id="890" class="Symbol">)</a>

    <a id="897" href="Ledger.Dijkstra.Specification.Utxow.html#897" class="Function">UsesV2Features</a> <a id="912" class="Symbol">:</a> <a id="914" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="923" href="Ledger.Dijkstra.Specification.Utxow.html#897" class="Function">UsesV2Features</a> <a id="938" class="Symbol">=</a> <a id="940" href="Class.IsSet.html#736" class="Function">∃[</a> <a id="943" href="Ledger.Dijkstra.Specification.Utxow.html#943" class="Bound">o</a> <a id="945" href="Class.IsSet.html#736" class="Function">∈</a> <a id="947" class="Symbol">(</a><a id="948" href="Class.IsSet.html#959" class="Function">range</a> <a id="954" href="Ledger.Dijkstra.Specification.Transaction.html#4005" class="Function">txOuts</a><a id="960" class="Symbol">)</a> <a id="962" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="964" href="Class.IsSet.html#959" class="Function">range</a> <a id="970" class="Symbol">(</a><a id="971" href="Ledger.Dijkstra.Specification.Utxow.html#630" class="Bound">utxo</a> <a id="976" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="978" class="Symbol">(</a><a id="979" href="Ledger.Dijkstra.Specification.Transaction.html#3870" class="Function">txIns</a> <a id="985" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="987" href="Ledger.Dijkstra.Specification.Transaction.html#3908" class="Function">referenceInputs</a><a id="1002" class="Symbol">))</a> <a id="1005" href="Class.IsSet.html#736" class="Function">]</a> <a id="1007" href="Ledger.Dijkstra.Specification.Utxow.html#806" class="Function">HasInlineDatum</a> <a id="1022" href="Ledger.Dijkstra.Specification.Utxow.html#943" class="Bound">o</a>

  <a id="1027" class="Keyword">data</a> <a id="1032" href="Ledger.Dijkstra.Specification.Utxow.html#1032" class="Datatype">UsesV3Features</a> <a id="1047" class="Symbol">:</a> <a id="1049" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1053" class="Keyword">where</a>
    <a id="1063" href="Ledger.Dijkstra.Specification.Utxow.html#1063" class="InductiveConstructor">hasVotes</a>     <a id="1076" class="Symbol">:</a> <a id="1078" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="1080" class="Symbol">(</a><a id="1081" href="stdlib.Data.List.html#154" class="Function">Is-[]</a> <a id="1087" href="Ledger.Dijkstra.Specification.Transaction.html#4363" class="Function">txGovVotes</a><a id="1097" class="Symbol">)</a>     <a id="1103" class="Symbol">→</a> <a id="1105" href="Ledger.Dijkstra.Specification.Utxow.html#1032" class="Datatype">UsesV3Features</a>
    <a id="1124" href="Ledger.Dijkstra.Specification.Utxow.html#1124" class="InductiveConstructor">hasProposals</a> <a id="1137" class="Symbol">:</a> <a id="1139" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="1141" class="Symbol">(</a><a id="1142" href="stdlib.Data.List.html#154" class="Function">Is-[]</a> <a id="1148" href="Ledger.Dijkstra.Specification.Transaction.html#4407" class="Function">txGovProposals</a><a id="1162" class="Symbol">)</a> <a id="1164" class="Symbol">→</a> <a id="1166" href="Ledger.Dijkstra.Specification.Utxow.html#1032" class="Datatype">UsesV3Features</a>
    <a id="1185" href="Ledger.Dijkstra.Specification.Utxow.html#1185" class="InductiveConstructor">hasDonation</a>  <a id="1198" class="Symbol">:</a> <a id="1200" href="Data.Nat.Base.html#3266" class="Record">NonZero</a> <a id="1208" href="Ledger.Dijkstra.Specification.Transaction.html#4322" class="Function">txDonation</a>       <a id="1225" class="Symbol">→</a> <a id="1227" href="Ledger.Dijkstra.Specification.Utxow.html#1032" class="Datatype">UsesV3Features</a>
    <a id="1246" href="Ledger.Dijkstra.Specification.Utxow.html#1246" class="InductiveConstructor">hasTreasure</a>  <a id="1259" class="Symbol">:</a> <a id="1261" href="Data.Maybe.html#845" class="Function">Is-just</a> <a id="1269" href="Ledger.Dijkstra.Specification.Transaction.html#4500" class="Function">currentTreasury</a>  <a id="1286" class="Symbol">→</a> <a id="1288" href="Ledger.Dijkstra.Specification.Utxow.html#1032" class="Datatype">UsesV3Features</a>

  <a id="1306" class="Keyword">data</a> <a id="1311" href="Ledger.Dijkstra.Specification.Utxow.html#1311" class="Datatype">UsesV4Features</a> <a id="1326" class="Symbol">:</a> <a id="1328" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1332" class="Keyword">where</a>
    <a id="1342" href="Ledger.Dijkstra.Specification.Utxow.html#1342" class="InductiveConstructor">hasSubtransactions</a>  <a id="1362" class="Symbol">:</a> <a id="1364" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="1366" class="Symbol">(</a><a id="1367" href="stdlib.Data.List.html#154" class="Function">Is-[]</a> <a id="1373" href="Ledger.Dijkstra.Specification.Transaction.html#4658" class="Function">txSubTransactions</a><a id="1390" class="Symbol">)</a> <a id="1392" class="Symbol">→</a> <a id="1394" href="Ledger.Dijkstra.Specification.Utxow.html#1311" class="Datatype">UsesV4Features</a>
    <a id="1413" href="Ledger.Dijkstra.Specification.Utxow.html#1413" class="InductiveConstructor">hasGuards</a>           <a id="1433" class="Symbol">:</a> <a id="1435" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="1437" class="Symbol">(</a><a id="1438" href="Ledger.Prelude.html#2882" class="Function">Is-∅</a> <a id="1443" href="Ledger.Dijkstra.Specification.Transaction.html#4736" class="Function">txGuards</a><a id="1451" class="Symbol">)</a>           <a id="1463" class="Symbol">→</a> <a id="1465" href="Ledger.Dijkstra.Specification.Utxow.html#1311" class="Datatype">UsesV4Features</a>


<a id="1482" class="Keyword">module</a> <a id="1489" href="Ledger.Dijkstra.Specification.Utxow.html#1489" class="Module">_</a> <a id="1491" class="Symbol">{</a><a id="1492" href="Ledger.Dijkstra.Specification.Utxow.html#1492" class="Bound">tx</a> <a id="1495" class="Symbol">:</a> <a id="1497" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a><a id="1507" class="Symbol">}</a> <a id="1509" class="Keyword">where</a>
  <a id="1517" class="Keyword">open</a> <a id="1522" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Module">Tx</a> <a id="1525" href="Ledger.Dijkstra.Specification.Utxow.html#1492" class="Bound">tx</a>
  <a id="1530" class="Keyword">open</a> <a id="1535" href="Ledger.Dijkstra.Specification.Transaction.html#3794" class="Module">TxBody</a> <a id="1542" href="Ledger.Dijkstra.Specification.Transaction.html#3594" class="Field">txBody</a>

  <a id="1552" class="Keyword">instance</a>
    <a id="1565" href="Ledger.Dijkstra.Specification.Utxow.html#1565" class="Function">Dec-UsesV3Features</a> <a id="1584" class="Symbol">:</a> <a id="1586" href="Ledger.Dijkstra.Specification.Utxow.html#1032" class="Datatype">UsesV3Features</a> <a id="1601" href="Ledger.Dijkstra.Specification.Utxow.html#1492" class="Bound">tx</a> <a id="1604" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
    <a id="1610" href="Ledger.Dijkstra.Specification.Utxow.html#1565" class="Function">Dec-UsesV3Features</a> <a id="1629" class="Symbol">.</a><a id="1630" href="Class.Decidable.Core.html#273" class="Field">dec</a>
      <a id="1640" class="Keyword">with</a> <a id="1645" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1647" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="1649" class="Symbol">(</a><a id="1650" href="stdlib.Data.List.html#154" class="Function">Is-[]</a> <a id="1656" href="Ledger.Dijkstra.Specification.Transaction.html#4363" class="Function">txGovVotes</a><a id="1666" class="Symbol">)</a> <a id="1668" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1670" class="Symbol">|</a> <a id="1672" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1674" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="1676" class="Symbol">(</a><a id="1677" href="stdlib.Data.List.html#154" class="Function">Is-[]</a> <a id="1683" href="Ledger.Dijkstra.Specification.Transaction.html#4407" class="Function">txGovProposals</a><a id="1697" class="Symbol">)</a> <a id="1699" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
         <a id="1710" class="Symbol">|</a> <a id="1712" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1714" href="Data.Nat.Base.html#3266" class="Record">NonZero</a> <a id="1722" href="Ledger.Dijkstra.Specification.Transaction.html#4322" class="Function">txDonation</a>   <a id="1735" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1737" class="Symbol">|</a> <a id="1739" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="1741" href="Data.Maybe.html#845" class="Function">Is-just</a> <a id="1749" href="Ledger.Dijkstra.Specification.Transaction.html#4500" class="Function">currentTreasury</a>  <a id="1766" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
    <a id="1772" class="Symbol">...</a> <a id="1776" class="Symbol">|</a> <a id="1778" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1782" href="Ledger.Dijkstra.Specification.Utxow.html#1782" class="Bound">p</a> <a id="1784" class="Symbol">|</a> <a id="1786" class="Symbol">_</a> <a id="1788" class="Symbol">|</a> <a id="1790" class="Symbol">_</a> <a id="1792" class="Symbol">|</a> <a id="1794" class="Symbol">_</a> <a id="1796" class="Symbol">=</a> <a id="1798" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1802" class="Symbol">(</a><a id="1803" href="Ledger.Dijkstra.Specification.Utxow.html#1063" class="InductiveConstructor">hasVotes</a> <a id="1812" href="Ledger.Dijkstra.Specification.Utxow.html#1782" class="Bound">p</a><a id="1813" class="Symbol">)</a>
    <a id="1819" class="CatchallClause Symbol">...</a><a id="1822" class="CatchallClause"> </a><a id="1823" class="CatchallClause Symbol">|</a><a id="1824" class="CatchallClause"> </a><a id="1825" class="CatchallClause Symbol">_</a><a id="1826" class="CatchallClause"> </a><a id="1827" class="CatchallClause Symbol">|</a><a id="1828" class="CatchallClause"> </a><a id="1829" href="Relation.Nullary.Decidable.Core.html#2099" class="CatchallClause InductiveConstructor">yes</a><a id="1832" class="CatchallClause"> </a><a id="1833" href="Ledger.Dijkstra.Specification.Utxow.html#1833" class="CatchallClause Bound">p</a><a id="1834" class="CatchallClause"> </a><a id="1835" class="CatchallClause Symbol">|</a><a id="1836" class="CatchallClause"> </a><a id="1837" class="CatchallClause Symbol">_</a><a id="1838" class="CatchallClause"> </a><a id="1839" class="CatchallClause Symbol">|</a><a id="1840" class="CatchallClause"> </a><a id="1841" class="CatchallClause Symbol">_</a> <a id="1843" class="Symbol">=</a> <a id="1845" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1849" class="Symbol">(</a><a id="1850" href="Ledger.Dijkstra.Specification.Utxow.html#1124" class="InductiveConstructor">hasProposals</a> <a id="1863" href="Ledger.Dijkstra.Specification.Utxow.html#1833" class="Bound">p</a><a id="1864" class="Symbol">)</a>
    <a id="1870" class="CatchallClause Symbol">...</a><a id="1873" class="CatchallClause"> </a><a id="1874" class="CatchallClause Symbol">|</a><a id="1875" class="CatchallClause"> </a><a id="1876" class="CatchallClause Symbol">_</a><a id="1877" class="CatchallClause"> </a><a id="1878" class="CatchallClause Symbol">|</a><a id="1879" class="CatchallClause"> </a><a id="1880" class="CatchallClause Symbol">_</a><a id="1881" class="CatchallClause"> </a><a id="1882" class="CatchallClause Symbol">|</a><a id="1883" class="CatchallClause"> </a><a id="1884" href="Relation.Nullary.Decidable.Core.html#2099" class="CatchallClause InductiveConstructor">yes</a><a id="1887" class="CatchallClause"> </a><a id="1888" href="Ledger.Dijkstra.Specification.Utxow.html#1888" class="CatchallClause Bound">p</a><a id="1889" class="CatchallClause"> </a><a id="1890" class="CatchallClause Symbol">|</a><a id="1891" class="CatchallClause"> </a><a id="1892" class="CatchallClause Symbol">_</a> <a id="1894" class="Symbol">=</a> <a id="1896" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1900" class="Symbol">(</a><a id="1901" href="Ledger.Dijkstra.Specification.Utxow.html#1185" class="InductiveConstructor">hasDonation</a> <a id="1913" href="Ledger.Dijkstra.Specification.Utxow.html#1888" class="Bound">p</a><a id="1914" class="Symbol">)</a>
    <a id="1920" class="CatchallClause Symbol">...</a><a id="1923" class="CatchallClause"> </a><a id="1924" class="CatchallClause Symbol">|</a><a id="1925" class="CatchallClause"> </a><a id="1926" class="CatchallClause Symbol">_</a><a id="1927" class="CatchallClause"> </a><a id="1928" class="CatchallClause Symbol">|</a><a id="1929" class="CatchallClause"> </a><a id="1930" class="CatchallClause Symbol">_</a><a id="1931" class="CatchallClause"> </a><a id="1932" class="CatchallClause Symbol">|</a><a id="1933" class="CatchallClause"> </a><a id="1934" class="CatchallClause Symbol">_</a><a id="1935" class="CatchallClause"> </a><a id="1936" class="CatchallClause Symbol">|</a><a id="1937" class="CatchallClause"> </a><a id="1938" href="Relation.Nullary.Decidable.Core.html#2099" class="CatchallClause InductiveConstructor">yes</a><a id="1941" class="CatchallClause"> </a><a id="1942" href="Ledger.Dijkstra.Specification.Utxow.html#1942" class="CatchallClause Bound">p</a> <a id="1944" class="Symbol">=</a> <a id="1946" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="1950" class="Symbol">(</a><a id="1951" href="Ledger.Dijkstra.Specification.Utxow.html#1246" class="InductiveConstructor">hasTreasure</a> <a id="1963" href="Ledger.Dijkstra.Specification.Utxow.html#1942" class="Bound">p</a><a id="1964" class="Symbol">)</a>
    <a id="1970" class="Symbol">...</a> <a id="1974" class="Symbol">|</a> <a id="1976" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1979" href="Ledger.Dijkstra.Specification.Utxow.html#1979" class="Bound">p₁</a> <a id="1982" class="Symbol">|</a> <a id="1984" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1987" href="Ledger.Dijkstra.Specification.Utxow.html#1987" class="Bound">p₂</a> <a id="1990" class="Symbol">|</a> <a id="1992" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1995" href="Ledger.Dijkstra.Specification.Utxow.html#1995" class="Bound">p₃</a> <a id="1998" class="Symbol">|</a> <a id="2000" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2003" href="Ledger.Dijkstra.Specification.Utxow.html#2003" class="Bound">p₄</a>
      <a id="2012" class="Symbol">=</a> <a id="2014" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2017" class="Symbol">λ</a> <a id="2019" class="Symbol">{</a> <a id="2021" class="Symbol">(</a><a id="2022" href="Ledger.Dijkstra.Specification.Utxow.html#1063" class="InductiveConstructor">hasVotes</a> <a id="2031" href="Ledger.Dijkstra.Specification.Utxow.html#2031" class="Bound">x</a><a id="2032" class="Symbol">)</a> <a id="2034" class="Symbol">→</a> <a id="2036" href="Ledger.Dijkstra.Specification.Utxow.html#1979" class="Bound">p₁</a> <a id="2039" href="Ledger.Dijkstra.Specification.Utxow.html#2031" class="Bound">x</a> <a id="2041" class="Symbol">;</a> <a id="2043" class="Symbol">(</a><a id="2044" href="Ledger.Dijkstra.Specification.Utxow.html#1124" class="InductiveConstructor">hasProposals</a> <a id="2057" href="Ledger.Dijkstra.Specification.Utxow.html#2057" class="Bound">x</a><a id="2058" class="Symbol">)</a> <a id="2060" class="Symbol">→</a> <a id="2062" href="Ledger.Dijkstra.Specification.Utxow.html#1987" class="Bound">p₂</a> <a id="2065" href="Ledger.Dijkstra.Specification.Utxow.html#2057" class="Bound">x</a> <a id="2067" class="Symbol">;</a> <a id="2069" class="Symbol">(</a><a id="2070" href="Ledger.Dijkstra.Specification.Utxow.html#1185" class="InductiveConstructor">hasDonation</a> <a id="2082" href="Ledger.Dijkstra.Specification.Utxow.html#2082" class="Bound">x</a><a id="2083" class="Symbol">)</a> <a id="2085" class="Symbol">→</a> <a id="2087" href="Ledger.Dijkstra.Specification.Utxow.html#1995" class="Bound">p₃</a> <a id="2090" href="Ledger.Dijkstra.Specification.Utxow.html#2082" class="Bound">x</a> <a id="2092" class="Symbol">;</a> <a id="2094" class="Symbol">(</a><a id="2095" href="Ledger.Dijkstra.Specification.Utxow.html#1246" class="InductiveConstructor">hasTreasure</a> <a id="2107" href="Ledger.Dijkstra.Specification.Utxow.html#2107" class="Bound">x</a><a id="2108" class="Symbol">)</a> <a id="2110" class="Symbol">→</a> <a id="2112" href="Ledger.Dijkstra.Specification.Utxow.html#2003" class="Bound">p₄</a> <a id="2115" href="Ledger.Dijkstra.Specification.Utxow.html#2107" class="Bound">x</a><a id="2116" class="Symbol">}</a>

<a id="2119" class="Keyword">module</a> <a id="2126" href="Ledger.Dijkstra.Specification.Utxow.html#2126" class="Module">_</a> <a id="2128" class="Symbol">{</a><a id="2129" href="Ledger.Dijkstra.Specification.Utxow.html#2129" class="Bound">tx</a> <a id="2132" class="Symbol">:</a> <a id="2134" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a><a id="2144" class="Symbol">}</a> <a id="2146" class="Keyword">where</a>
  <a id="2154" class="Keyword">open</a> <a id="2159" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Module">Tx</a> <a id="2162" href="Ledger.Dijkstra.Specification.Utxow.html#2129" class="Bound">tx</a>
  <a id="2167" class="Keyword">open</a> <a id="2172" href="Ledger.Dijkstra.Specification.Transaction.html#3794" class="Module">TxBody</a> <a id="2179" href="Ledger.Dijkstra.Specification.Transaction.html#3594" class="Field">txBody</a>

  <a id="2189" class="Keyword">instance</a>
    <a id="2202" href="Ledger.Dijkstra.Specification.Utxow.html#2202" class="Function">Dec-UsesV4Features</a> <a id="2221" class="Symbol">:</a> <a id="2223" href="Ledger.Dijkstra.Specification.Utxow.html#1311" class="Datatype">UsesV4Features</a> <a id="2238" href="Ledger.Dijkstra.Specification.Utxow.html#2129" class="Bound">tx</a> <a id="2241" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
    <a id="2247" href="Ledger.Dijkstra.Specification.Utxow.html#2202" class="Function">Dec-UsesV4Features</a> <a id="2266" class="Symbol">.</a><a id="2267" href="Class.Decidable.Core.html#273" class="Field">dec</a>
      <a id="2277" class="Keyword">with</a> <a id="2282" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2284" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="2286" class="Symbol">(</a><a id="2287" href="stdlib.Data.List.html#154" class="Function">Is-[]</a> <a id="2293" href="Ledger.Dijkstra.Specification.Transaction.html#4658" class="Function">txSubTransactions</a><a id="2310" class="Symbol">)</a> <a id="2312" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2314" class="Symbol">|</a> <a id="2316" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2318" href="Relation.Nullary.Negation.Core.html#677" class="Function Operator">¬</a> <a id="2320" class="Symbol">(</a><a id="2321" href="Ledger.Prelude.html#2882" class="Function">Is-∅</a> <a id="2326" href="Ledger.Dijkstra.Specification.Transaction.html#4736" class="Function">txGuards</a><a id="2334" class="Symbol">)</a> <a id="2336" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
    <a id="2342" class="Symbol">...</a> <a id="2346" class="Symbol">|</a> <a id="2348" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2352" href="Ledger.Dijkstra.Specification.Utxow.html#2352" class="Bound">p</a> <a id="2354" class="Symbol">|</a> <a id="2356" class="Symbol">_</a> <a id="2358" class="Symbol">=</a> <a id="2360" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2364" class="Symbol">(</a><a id="2365" href="Ledger.Dijkstra.Specification.Utxow.html#1342" class="InductiveConstructor">hasSubtransactions</a> <a id="2384" href="Ledger.Dijkstra.Specification.Utxow.html#2352" class="Bound">p</a><a id="2385" class="Symbol">)</a>
    <a id="2391" class="CatchallClause Symbol">...</a><a id="2394" class="CatchallClause"> </a><a id="2395" class="CatchallClause Symbol">|</a><a id="2396" class="CatchallClause"> </a><a id="2397" class="CatchallClause Symbol">_</a><a id="2398" class="CatchallClause"> </a><a id="2399" class="CatchallClause Symbol">|</a><a id="2400" class="CatchallClause"> </a><a id="2401" href="Relation.Nullary.Decidable.Core.html#2099" class="CatchallClause InductiveConstructor">yes</a><a id="2404" class="CatchallClause"> </a><a id="2405" href="Ledger.Dijkstra.Specification.Utxow.html#2405" class="CatchallClause Bound">p</a> <a id="2407" class="Symbol">=</a> <a id="2409" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="2413" class="Symbol">(</a><a id="2414" href="Ledger.Dijkstra.Specification.Utxow.html#1413" class="InductiveConstructor">hasGuards</a> <a id="2424" href="Ledger.Dijkstra.Specification.Utxow.html#2405" class="Bound">p</a><a id="2425" class="Symbol">)</a>
    <a id="2431" class="Symbol">...</a> <a id="2435" class="Symbol">|</a> <a id="2437" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2440" href="Ledger.Dijkstra.Specification.Utxow.html#2440" class="Bound">p₁</a> <a id="2443" class="Symbol">|</a> <a id="2445" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2448" href="Ledger.Dijkstra.Specification.Utxow.html#2448" class="Bound">p₂</a>
      <a id="2457" class="Symbol">=</a> <a id="2459" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2462" class="Symbol">λ</a> <a id="2464" class="Symbol">{</a> <a id="2466" class="Symbol">(</a><a id="2467" href="Ledger.Dijkstra.Specification.Utxow.html#1342" class="InductiveConstructor">hasSubtransactions</a> <a id="2486" href="Ledger.Dijkstra.Specification.Utxow.html#2486" class="Bound">x</a><a id="2487" class="Symbol">)</a> <a id="2489" class="Symbol">→</a> <a id="2491" href="Ledger.Dijkstra.Specification.Utxow.html#2440" class="Bound">p₁</a> <a id="2494" href="Ledger.Dijkstra.Specification.Utxow.html#2486" class="Bound">x</a> <a id="2496" class="Symbol">;</a> <a id="2498" class="Symbol">(</a><a id="2499" href="Ledger.Dijkstra.Specification.Utxow.html#1413" class="InductiveConstructor">hasGuards</a> <a id="2509" href="Ledger.Dijkstra.Specification.Utxow.html#2509" class="Bound">x</a><a id="2510" class="Symbol">)</a> <a id="2512" class="Symbol">→</a> <a id="2514" href="Ledger.Dijkstra.Specification.Utxow.html#2448" class="Bound">p₂</a> <a id="2517" href="Ledger.Dijkstra.Specification.Utxow.html#2509" class="Bound">x</a><a id="2518" class="Symbol">}</a>


<a id="languages"></a><a id="2522" href="Ledger.Dijkstra.Specification.Utxow.html#2522" class="Function">languages</a> <a id="2532" class="Symbol">:</a>  <a id="2535" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2537" href="Ledger.Dijkstra.Specification.Script.Base.html#2432" class="Function">P2Script</a> <a id="2546" class="Symbol">→</a> <a id="2548" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2550" href="Ledger.Dijkstra.Specification.Script.Base.html#972" class="Function">Language</a>
<a id="2559" href="Ledger.Dijkstra.Specification.Utxow.html#2522" class="Function">languages</a> <a id="2569" href="Ledger.Dijkstra.Specification.Utxow.html#2569" class="Bound">p2Scripts</a> <a id="2579" class="Symbol">=</a> <a id="2581" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="2586" href="Ledger.Dijkstra.Specification.Script.Base.html#2029" class="Function">language</a> <a id="2595" href="Ledger.Dijkstra.Specification.Utxow.html#2569" class="Bound">p2Scripts</a>

<a id="allowedLanguages"></a><a id="2606" href="Ledger.Dijkstra.Specification.Utxow.html#2606" class="Function">allowedLanguages</a> <a id="2623" class="Symbol">:</a> <a id="2625" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="2636" class="Symbol">→</a> <a id="2638" href="Ledger.Dijkstra.Specification.Transaction.html#3158" class="Function">UTxO</a> <a id="2643" class="Symbol">→</a> <a id="2645" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2647" href="Ledger.Dijkstra.Specification.Script.Base.html#972" class="Function">Language</a>
<a id="2656" href="Ledger.Dijkstra.Specification.Utxow.html#2606" class="Function">allowedLanguages</a> <a id="2673" href="Ledger.Dijkstra.Specification.Utxow.html#2673" class="Bound">tx</a> <a id="2676" href="Ledger.Dijkstra.Specification.Utxow.html#2676" class="Bound">utxo</a> <a id="2681" class="Symbol">=</a>
  <a id="2685" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="2688" href="Ledger.Dijkstra.Specification.Utxow.html#653" class="Function">UsesBootstrapAddress</a> <a id="2709" href="Ledger.Dijkstra.Specification.Utxow.html#2673" class="Bound">tx</a> <a id="2712" href="Ledger.Dijkstra.Specification.Utxow.html#2676" class="Bound">utxo</a>
    <a id="2721" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="2726" href="Class.HasEmptySet.html#287" class="Field">∅</a>
    <a id="2732" href="Class.ToBool.html#342" class="Function Operator">else</a>
  <a id="2739" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="2742" href="Ledger.Dijkstra.Specification.Utxow.html#1311" class="Datatype">UsesV4Features</a> <a id="2757" href="Ledger.Dijkstra.Specification.Utxow.html#2673" class="Bound">tx</a>
    <a id="2764" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="2769" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2778" class="Symbol">(</a><a id="2779" href="Ledger.Dijkstra.Specification.Script.Base.html#1073" class="Function">PlutusV4</a> <a id="2788" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2790" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2792" class="Symbol">)</a>
    <a id="2798" href="Class.ToBool.html#342" class="Function Operator">else</a>
  <a id="2805" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="2808" href="Ledger.Dijkstra.Specification.Utxow.html#1032" class="Datatype">UsesV3Features</a> <a id="2823" href="Ledger.Dijkstra.Specification.Utxow.html#2673" class="Bound">tx</a>
    <a id="2830" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="2835" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2844" class="Symbol">(</a><a id="2845" href="Ledger.Dijkstra.Specification.Script.Base.html#1073" class="Function">PlutusV4</a> <a id="2854" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2856" href="Ledger.Dijkstra.Specification.Script.Base.html#1064" class="Function">PlutusV3</a> <a id="2865" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2867" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2869" class="Symbol">)</a>
    <a id="2875" href="Class.ToBool.html#342" class="Function Operator">else</a>
  <a id="2882" href="Class.ToBool.html#342" class="Function Operator">if</a> <a id="2885" href="Ledger.Dijkstra.Specification.Utxow.html#897" class="Function">UsesV2Features</a> <a id="2900" href="Ledger.Dijkstra.Specification.Utxow.html#2673" class="Bound">tx</a> <a id="2903" href="Ledger.Dijkstra.Specification.Utxow.html#2676" class="Bound">utxo</a>
    <a id="2912" href="Class.ToBool.html#342" class="Function Operator">then</a> <a id="2917" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2926" class="Symbol">(</a><a id="2927" href="Ledger.Dijkstra.Specification.Script.Base.html#1073" class="Function">PlutusV4</a> <a id="2936" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2938" href="Ledger.Dijkstra.Specification.Script.Base.html#1064" class="Function">PlutusV3</a> <a id="2947" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2949" href="Ledger.Dijkstra.Specification.Script.Base.html#1055" class="Function">PlutusV2</a> <a id="2958" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2960" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="2962" class="Symbol">)</a>
    <a id="2968" href="Class.ToBool.html#342" class="Function Operator">else</a> <a id="2973" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2982" class="Symbol">(</a><a id="2983" href="Ledger.Dijkstra.Specification.Script.Base.html#1073" class="Function">PlutusV4</a> <a id="2992" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2994" href="Ledger.Dijkstra.Specification.Script.Base.html#1064" class="Function">PlutusV3</a> <a id="3003" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3005" href="Ledger.Dijkstra.Specification.Script.Base.html#1055" class="Function">PlutusV2</a> <a id="3014" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3016" href="Ledger.Dijkstra.Specification.Script.Base.html#1046" class="Function">PlutusV1</a> <a id="3025" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3027" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="3029" class="Symbol">)</a>


<a id="3033" class="Keyword">data</a> <a id="_⊢_⇀⦇_,SUBUTXOW⦈_"></a><a id="3038" href="Ledger.Dijkstra.Specification.Utxow.html#3038" class="Datatype Operator">_⊢_⇀⦇_,SUBUTXOW⦈_</a> <a id="3056" class="Symbol">:</a> <a id="3058" href="Ledger.Dijkstra.Specification.Utxo.html#1264" class="Record">SubUTxOEnv</a> <a id="3069" class="Symbol">→</a> <a id="3071" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="3081" class="Symbol">→</a> <a id="3083" href="Ledger.Dijkstra.Specification.Transaction.html#5370" class="Function">SubLevelTx</a> <a id="3094" class="Symbol">→</a> <a id="3096" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="3106" class="Symbol">→</a> <a id="3108" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3113" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,SUBUTXOW⦈_.SUBUTXOW"></a><a id="3122" href="Ledger.Dijkstra.Specification.Utxow.html#3122" class="InductiveConstructor">SUBUTXOW</a> <a id="3131" class="Symbol">:</a>
    <a id="3137" class="Keyword">let</a>
         <a id="3150" class="Keyword">open</a> <a id="3155" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Module">Tx</a> <a id="3158" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a>
         <a id="3170" class="Keyword">open</a> <a id="3175" href="Ledger.Dijkstra.Specification.Transaction.html#3794" class="Module">TxBody</a> <a id="3182" href="Ledger.Dijkstra.Specification.Transaction.html#3594" class="Function">txBody</a>
         <a id="3198" class="Keyword">open</a> <a id="3203" href="Ledger.Dijkstra.Specification.Transaction.html#5008" class="Module">TxWitnesses</a> <a id="3215" href="Ledger.Dijkstra.Specification.Transaction.html#3632" class="Function">txWitnesses</a>
         <a id="3236" class="Keyword">open</a> <a id="3241" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Module">UTxOEnv</a>

         <a id="3259" href="Ledger.Dijkstra.Specification.Utxow.html#3259" class="Bound">utxo₀</a>               <a id="3279" class="Symbol">=</a> <a id="3281" href="Ledger.Dijkstra.Specification.Transaction.html#3454" class="Field">UTxOOf</a> <a id="3288" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a>
         <a id="3299" href="Ledger.Dijkstra.Specification.Utxow.html#3299" class="Bound">utxo</a>                <a id="3319" class="Symbol">=</a> <a id="3321" href="Ledger.Dijkstra.Specification.Transaction.html#3454" class="Field">UTxOOf</a> <a id="3328" href="Ledger.Dijkstra.Specification.Utxow.html#494" class="Generalizable">s</a>

         <a id="3340" href="Ledger.Dijkstra.Specification.Utxow.html#3340" class="Bound">witsKeyHashes</a>       <a id="3360" class="Symbol">:</a> <a id="3362" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3364" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
         <a id="3381" href="Ledger.Dijkstra.Specification.Utxow.html#3340" class="Bound">witsKeyHashes</a>       <a id="3401" class="Symbol">=</a> <a id="3403" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3408" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="3413" class="Symbol">(</a><a id="3414" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3418" href="Ledger.Dijkstra.Specification.Transaction.html#5089" class="Function">vKeySigs</a><a id="3426" class="Symbol">)</a>

         <a id="3438" href="Ledger.Dijkstra.Specification.Utxow.html#3438" class="Bound">p1Scripts</a> <a id="3448" class="Symbol">:</a> <a id="3450" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3452" href="Ledger.Dijkstra.Specification.Script.Base.html#647" class="Function">P1Script</a>
         <a id="3470" href="Ledger.Dijkstra.Specification.Utxow.html#3438" class="Bound">p1Scripts</a> <a id="3480" class="Symbol">=</a> <a id="3482" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3493" href="Ledger.Dijkstra.Specification.Script.Base.html#3042" class="Function">toP1Script</a> <a id="3504" class="Symbol">(</a><a id="3505" href="Ledger.Dijkstra.Specification.Utxo.html#2106" class="Field">ScriptPoolOf</a> <a id="3518" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a><a id="3519" class="Symbol">)</a>

         <a id="3531" href="Ledger.Dijkstra.Specification.Utxow.html#3531" class="Bound">p2Scripts</a> <a id="3541" class="Symbol">:</a> <a id="3543" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3545" href="Ledger.Dijkstra.Specification.Script.Base.html#2432" class="Function">P2Script</a>
         <a id="3563" href="Ledger.Dijkstra.Specification.Utxow.html#3531" class="Bound">p2Scripts</a> <a id="3573" class="Symbol">=</a> <a id="3575" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3586" href="Ledger.Dijkstra.Specification.Script.Base.html#3285" class="Function">toP2Script</a> <a id="3597" class="Symbol">(</a><a id="3598" href="Ledger.Dijkstra.Specification.Utxo.html#2106" class="Field">ScriptPoolOf</a> <a id="3611" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a><a id="3612" class="Symbol">)</a>

         <a id="3624" href="Ledger.Dijkstra.Specification.Utxow.html#3624" class="Bound">neededScriptHashes</a>  <a id="3644" class="Symbol">:</a> <a id="3646" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3648" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
         <a id="3668" href="Ledger.Dijkstra.Specification.Utxow.html#3624" class="Bound">neededScriptHashes</a>  <a id="3688" class="Symbol">=</a> <a id="3690" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3701" class="Symbol">(</a><a id="3702" href="Ledger.Core.Specification.Address.html#765" class="Function">isScriptObj</a>  <a id="3715" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3717" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3722" class="Symbol">)</a> <a id="3724" class="Symbol">(</a><a id="3725" href="Ledger.Dijkstra.Specification.Script.Validation.html#4832" class="Function">credsNeeded</a> <a id="3737" href="Ledger.Dijkstra.Specification.Utxow.html#3259" class="Bound">utxo₀</a> <a id="3743" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a><a id="3745" class="Symbol">)</a>

         <a id="3757" href="Ledger.Dijkstra.Specification.Utxow.html#3757" class="Bound">neededVKeyHashes</a> <a id="3774" class="Symbol">:</a> <a id="3776" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3778" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
         <a id="3795" href="Ledger.Dijkstra.Specification.Utxow.html#3757" class="Bound">neededVKeyHashes</a> <a id="3812" class="Symbol">=</a> <a id="3814" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3825" class="Symbol">(</a><a id="3826" href="Ledger.Core.Specification.Address.html#484" class="Function">isKeyHashObj</a> <a id="3839" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3841" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="3846" class="Symbol">)</a> <a id="3848" class="Symbol">(</a><a id="3849" href="Ledger.Dijkstra.Specification.Script.Validation.html#4832" class="Function">credsNeeded</a> <a id="3861" href="Ledger.Dijkstra.Specification.Utxow.html#3259" class="Bound">utxo₀</a> <a id="3867" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a><a id="3869" class="Symbol">)</a>

         <a id="3881" href="Ledger.Dijkstra.Specification.Utxow.html#3881" class="Bound">neededDataHashes</a> <a id="3898" class="Symbol">:</a> <a id="3900" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3902" href="Ledger.Dijkstra.Specification.Script.Base.html#1788" class="Function">DataHash</a>
         <a id="3920" href="Ledger.Dijkstra.Specification.Utxow.html#3881" class="Bound">neededDataHashes</a> <a id="3937" class="Symbol">=</a> <a id="3939" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="3950" class="Symbol">(λ</a> <a id="3953" href="Ledger.Dijkstra.Specification.Utxow.html#3953" class="Bound">txOut</a><a id="3958" class="Symbol">@(</a><a id="3960" href="Ledger.Dijkstra.Specification.Utxow.html#3960" class="Bound">a</a> <a id="3962" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3964" class="Symbol">_</a> <a id="3966" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3968" href="Ledger.Dijkstra.Specification.Utxow.html#3968" class="Bound">d</a> <a id="3970" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3972" class="Symbol">_)</a> <a id="3975" class="Symbol">→</a> <a id="3977" class="Keyword">do</a> <a id="3980" href="Ledger.Dijkstra.Specification.Utxow.html#3980" class="Bound">sh</a> <a id="3983" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="3985" href="Ledger.Core.Specification.Address.html#765" class="Function">isScriptObj</a> <a id="3997" class="Symbol">(</a><a id="3998" href="Ledger.Core.Specification.Address.html#3056" class="Function">payCred</a> <a id="4006" href="Ledger.Dijkstra.Specification.Utxow.html#3960" class="Bound">a</a><a id="4007" class="Symbol">)</a>
                                                                     <a id="4078" class="Symbol">_</a>  <a id="4081" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4083" href="Ledger.Prelude.html#2672" class="Function">lookupHash</a> <a id="4094" href="Ledger.Dijkstra.Specification.Utxow.html#3980" class="Bound">sh</a> <a id="4097" href="Ledger.Dijkstra.Specification.Utxow.html#3531" class="Bound">p2Scripts</a>
                                                                     <a id="4176" href="Ledger.Dijkstra.Specification.Utxow.html#3968" class="Bound">d</a> <a id="4178" href="Class.Monad.Core.html#337" class="Field Operator">&gt;&gt;=</a> <a id="4182" href="Data.Sum.html#870" class="Function">isInj₂</a><a id="4188" class="Symbol">)</a>
                                       <a id="4229" class="Symbol">(</a><a id="4230" href="Class.IsSet.html#959" class="Function">range</a> <a id="4236" class="Symbol">(</a><a id="4237" href="Ledger.Dijkstra.Specification.Utxow.html#3259" class="Bound">utxo₀</a> <a id="4243" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="4245" href="Ledger.Dijkstra.Specification.Transaction.html#3870" class="Function">txIns</a><a id="4250" class="Symbol">))</a>

    <a id="4258" class="Keyword">in</a>
    <a id="4265" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a>  <a id="4268" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="4271" href="Ledger.Dijkstra.Specification.Utxow.html#4271" class="Bound">(</a><a id="4272" href="Ledger.Dijkstra.Specification.Utxow.html#4272" class="Bound">vk</a> <a id="4275" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4277" href="Ledger.Dijkstra.Specification.Utxow.html#4277" class="Bound">σ</a><a id="4278" href="Ledger.Dijkstra.Specification.Utxow.html#4271" class="Bound">)</a> <a id="4280" href="Class.IsSet.html#576" class="Function">∈</a> <a id="4282" href="Ledger.Dijkstra.Specification.Transaction.html#5089" class="Function">vKeySigs</a> <a id="4291" href="Class.IsSet.html#576" class="Function">]</a> <a id="4293" href="Ledger.Core.Specification.Crypto.html#719" class="Function">isSigned</a> <a id="4302" href="Ledger.Dijkstra.Specification.Utxow.html#4272" class="Bound">vk</a> <a id="4305" class="Symbol">(</a><a id="4306" href="Ledger.Dijkstra.Specification.Transaction.html#2389" class="Field">txidBytes</a> <a id="4316" href="Ledger.Dijkstra.Specification.Transaction.html#4047" class="Function">txId</a><a id="4320" class="Symbol">)</a> <a id="4322" href="Ledger.Dijkstra.Specification.Utxow.html#4277" class="Bound">σ</a>
    <a id="4328" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4331" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="4334" href="Ledger.Dijkstra.Specification.Utxow.html#4334" class="Bound">s</a> <a id="4336" href="Class.IsSet.html#576" class="Function">∈</a> <a id="4338" href="Ledger.Dijkstra.Specification.Utxow.html#3438" class="Bound">p1Scripts</a> <a id="4348" href="Class.IsSet.html#576" class="Function">]</a> <a id="4350" class="Symbol">(</a><a id="4351" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="4356" href="Ledger.Dijkstra.Specification.Utxow.html#4334" class="Bound">s</a> <a id="4358" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="4360" href="Ledger.Dijkstra.Specification.Utxow.html#3624" class="Bound">neededScriptHashes</a> <a id="4379" class="Symbol">→</a> <a id="4381" href="Ledger.Dijkstra.Specification.Script.Base.html#671" class="Function">validP1Script</a> <a id="4395" href="Ledger.Dijkstra.Specification.Utxow.html#3340" class="Bound">witsKeyHashes</a> <a id="4409" href="Ledger.Dijkstra.Specification.Transaction.html#4223" class="Function">txVldt</a> <a id="4416" href="Ledger.Dijkstra.Specification.Utxow.html#4334" class="Bound">s</a><a id="4417" class="Symbol">)</a>
    <a id="4423" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4426" href="Ledger.Dijkstra.Specification.Utxow.html#3757" class="Bound">neededVKeyHashes</a> <a id="4443" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="4445" href="Ledger.Dijkstra.Specification.Utxow.html#3340" class="Bound">witsKeyHashes</a>
    <a id="4463" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4466" href="Ledger.Dijkstra.Specification.Utxow.html#3624" class="Bound">neededScriptHashes</a> <a id="4485" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="4487" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="4492" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="4497" href="Ledger.Dijkstra.Specification.Utxow.html#3438" class="Bound">p1Scripts</a> <a id="4507" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="4509" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="4514" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="4519" href="Ledger.Dijkstra.Specification.Utxow.html#3531" class="Bound">p2Scripts</a>
    <a id="4533" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4536" href="Ledger.Dijkstra.Specification.Utxow.html#3881" class="Bound">neededDataHashes</a> <a id="4553" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="4555" href="Class.IsSet.html#916" class="Function">dom</a> <a id="4559" class="Symbol">(</a><a id="4560" href="Ledger.Dijkstra.Specification.Utxo.html#2226" class="Field">DataPoolOf</a> <a id="4571" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a><a id="4572" class="Symbol">)</a>
    <a id="4578" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4581" href="Ledger.Dijkstra.Specification.Transaction.html#4278" class="Function">txADhash</a> <a id="4590" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4592" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="4596" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="4601" href="Ledger.Dijkstra.Specification.Transaction.html#3747" class="Function">txAuxData</a>
    <a id="4615" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="4618" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a> <a id="4620" href="Ledger.Dijkstra.Specification.Utxo.html#8648" class="Datatype Operator">⊢</a> <a id="4622" href="Ledger.Dijkstra.Specification.Utxow.html#494" class="Generalizable">s</a> <a id="4624" href="Ledger.Dijkstra.Specification.Utxo.html#8648" class="Datatype Operator">⇀⦇</a> <a id="4627" href="Ledger.Dijkstra.Specification.Utxow.html#531" class="Generalizable">stx</a> <a id="4631" href="Ledger.Dijkstra.Specification.Utxo.html#8648" class="Datatype Operator">,SUBUTXO⦈</a> <a id="4641" href="Ledger.Dijkstra.Specification.Utxow.html#496" class="Generalizable">s&#39;</a>
      <a id="4650" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
       <a id="4690" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a> <a id="4692" href="Ledger.Dijkstra.Specification.Utxow.html#3038" class="Datatype Operator">⊢</a> <a id="4694" href="Ledger.Dijkstra.Specification.Utxow.html#494" class="Generalizable">s</a> <a id="4696" href="Ledger.Dijkstra.Specification.Utxow.html#3038" class="Datatype Operator">⇀⦇</a> <a id="4699" href="Ledger.Dijkstra.Specification.Utxow.html#531" class="Generalizable">stx</a> <a id="4703" href="Ledger.Dijkstra.Specification.Utxow.html#3038" class="Datatype Operator">,SUBUTXOW⦈</a> <a id="4714" href="Ledger.Dijkstra.Specification.Utxow.html#496" class="Generalizable">s&#39;</a>

<a id="4718" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOW⦈_"></a><a id="4723" href="Ledger.Dijkstra.Specification.Utxow.html#4723" class="Datatype Operator">_⊢_⇀⦇_,UTXOW⦈_</a> <a id="4738" class="Symbol">:</a> <a id="4740" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Record">UTxOEnv</a> <a id="4748" class="Symbol">→</a> <a id="4750" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="4760" class="Symbol">→</a> <a id="4762" href="Ledger.Dijkstra.Specification.Transaction.html#5320" class="Function">TopLevelTx</a> <a id="4773" class="Symbol">→</a> <a id="4775" href="Ledger.Dijkstra.Specification.Utxo.html#1524" class="Record">UTxOState</a> <a id="4785" class="Symbol">→</a> <a id="4787" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4792" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXOW⦈_.UTXOW"></a><a id="4801" href="Ledger.Dijkstra.Specification.Utxow.html#4801" class="InductiveConstructor">UTXOW</a> <a id="4807" class="Symbol">:</a>
    <a id="4813" class="Keyword">let</a>
         <a id="4826" class="Keyword">open</a> <a id="4831" href="Ledger.Dijkstra.Specification.Transaction.html#3522" class="Module">Tx</a> <a id="4834" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a>
         <a id="4846" class="Keyword">open</a> <a id="4851" href="Ledger.Dijkstra.Specification.Transaction.html#3794" class="Module">TxBody</a> <a id="4858" href="Ledger.Dijkstra.Specification.Transaction.html#3594" class="Function">txBody</a>
         <a id="4874" class="Keyword">open</a> <a id="4879" href="Ledger.Dijkstra.Specification.Transaction.html#5008" class="Module">TxWitnesses</a> <a id="4891" href="Ledger.Dijkstra.Specification.Transaction.html#3632" class="Function">txWitnesses</a>
         <a id="4912" class="Keyword">open</a> <a id="4917" href="Ledger.Dijkstra.Specification.Utxo.html#1004" class="Module">UTxOEnv</a>

         <a id="4935" href="Ledger.Dijkstra.Specification.Utxow.html#4935" class="Bound">utxo₀</a>               <a id="4955" class="Symbol">=</a> <a id="4957" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a> <a id="4959" class="Symbol">.</a><a id="4960" href="Ledger.Dijkstra.Specification.Utxo.html#1131" class="Field">utxo₀</a>
         <a id="4975" href="Ledger.Dijkstra.Specification.Utxow.html#4975" class="Bound">utxo</a>                <a id="4995" class="Symbol">=</a> <a id="4997" href="Ledger.Dijkstra.Specification.Utxow.html#494" class="Generalizable">s</a> <a id="4999" class="Symbol">.</a><a id="5000" href="Ledger.Dijkstra.Specification.Utxo.html#1584" class="Field">UTxOState.utxo</a>

         <a id="5025" href="Ledger.Dijkstra.Specification.Utxow.html#5025" class="Bound">witsKeyHashes</a>       <a id="5045" class="Symbol">:</a> <a id="5047" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5049" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
         <a id="5066" href="Ledger.Dijkstra.Specification.Utxow.html#5025" class="Bound">witsKeyHashes</a>       <a id="5086" class="Symbol">=</a> <a id="5088" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="5093" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="5098" class="Symbol">(</a><a id="5099" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5103" href="Ledger.Dijkstra.Specification.Transaction.html#5089" class="Function">vKeySigs</a><a id="5111" class="Symbol">)</a>

         <a id="5123" href="Ledger.Dijkstra.Specification.Utxow.html#5123" class="Bound">p1Scripts</a> <a id="5133" class="Symbol">:</a> <a id="5135" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5137" href="Ledger.Dijkstra.Specification.Script.Base.html#647" class="Function">P1Script</a>
         <a id="5155" href="Ledger.Dijkstra.Specification.Utxow.html#5123" class="Bound">p1Scripts</a> <a id="5165" class="Symbol">=</a> <a id="5167" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="5178" href="Ledger.Dijkstra.Specification.Script.Base.html#3042" class="Function">toP1Script</a> <a id="5189" class="Symbol">(</a><a id="5190" href="Ledger.Dijkstra.Specification.Utxo.html#2106" class="Field">ScriptPoolOf</a> <a id="5203" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a><a id="5204" class="Symbol">)</a>

         <a id="5216" href="Ledger.Dijkstra.Specification.Utxow.html#5216" class="Bound">p2Scripts</a> <a id="5226" class="Symbol">:</a> <a id="5228" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5230" href="Ledger.Dijkstra.Specification.Script.Base.html#2432" class="Function">P2Script</a>
         <a id="5248" href="Ledger.Dijkstra.Specification.Utxow.html#5216" class="Bound">p2Scripts</a> <a id="5258" class="Symbol">=</a> <a id="5260" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="5271" href="Ledger.Dijkstra.Specification.Script.Base.html#3285" class="Function">toP2Script</a> <a id="5282" class="Symbol">(</a><a id="5283" href="Ledger.Dijkstra.Specification.Utxo.html#2106" class="Field">ScriptPoolOf</a> <a id="5296" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a><a id="5297" class="Symbol">)</a>

         <a id="5309" href="Ledger.Dijkstra.Specification.Utxow.html#5309" class="Bound">neededScriptHashes</a>  <a id="5329" class="Symbol">:</a> <a id="5331" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5333" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
         <a id="5353" href="Ledger.Dijkstra.Specification.Utxow.html#5309" class="Bound">neededScriptHashes</a>  <a id="5373" class="Symbol">=</a> <a id="5375" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="5386" class="Symbol">(</a><a id="5387" href="Ledger.Core.Specification.Address.html#765" class="Function">isScriptObj</a>  <a id="5400" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="5402" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="5407" class="Symbol">)</a> <a id="5409" class="Symbol">(</a><a id="5410" href="Ledger.Dijkstra.Specification.Script.Validation.html#4832" class="Function">credsNeeded</a> <a id="5422" href="Ledger.Dijkstra.Specification.Utxow.html#4935" class="Bound">utxo₀</a> <a id="5428" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a><a id="5430" class="Symbol">)</a>

         <a id="5442" href="Ledger.Dijkstra.Specification.Utxow.html#5442" class="Bound">neededVKeyHashes</a> <a id="5459" class="Symbol">:</a> <a id="5461" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5463" href="Ledger.Core.Specification.Crypto.html#1386" class="Function">KeyHash</a>
         <a id="5480" href="Ledger.Dijkstra.Specification.Utxow.html#5442" class="Bound">neededVKeyHashes</a> <a id="5497" class="Symbol">=</a> <a id="5499" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="5510" class="Symbol">(</a><a id="5511" href="Ledger.Core.Specification.Address.html#484" class="Function">isKeyHashObj</a> <a id="5524" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="5526" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="5531" class="Symbol">)</a> <a id="5533" class="Symbol">(</a><a id="5534" href="Ledger.Dijkstra.Specification.Script.Validation.html#4832" class="Function">credsNeeded</a> <a id="5546" href="Ledger.Dijkstra.Specification.Utxow.html#4935" class="Bound">utxo₀</a> <a id="5552" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a><a id="5554" class="Symbol">)</a>

         <a id="5566" href="Ledger.Dijkstra.Specification.Utxow.html#5566" class="Bound">neededDataHashes</a> <a id="5583" class="Symbol">:</a> <a id="5585" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="5587" href="Ledger.Dijkstra.Specification.Script.Base.html#1788" class="Function">DataHash</a>
         <a id="5605" href="Ledger.Dijkstra.Specification.Utxow.html#5566" class="Bound">neededDataHashes</a> <a id="5622" class="Symbol">=</a> <a id="5624" href="Axiom.Set.html#7990" class="Function">mapPartial</a> <a id="5635" class="Symbol">(λ</a> <a id="5638" href="Ledger.Dijkstra.Specification.Utxow.html#5638" class="Bound">txOut</a><a id="5643" class="Symbol">@(</a><a id="5645" href="Ledger.Dijkstra.Specification.Utxow.html#5645" class="Bound">a</a> <a id="5647" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5649" class="Symbol">_</a> <a id="5651" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5653" href="Ledger.Dijkstra.Specification.Utxow.html#5653" class="Bound">d</a> <a id="5655" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5657" class="Symbol">_)</a> <a id="5660" class="Symbol">→</a> <a id="5662" class="Keyword">do</a> <a id="5665" href="Ledger.Dijkstra.Specification.Utxow.html#5665" class="Bound">sh</a> <a id="5668" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5670" href="Ledger.Core.Specification.Address.html#765" class="Function">isScriptObj</a> <a id="5682" class="Symbol">(</a><a id="5683" href="Ledger.Core.Specification.Address.html#3056" class="Function">payCred</a> <a id="5691" href="Ledger.Dijkstra.Specification.Utxow.html#5645" class="Bound">a</a><a id="5692" class="Symbol">)</a>
                                                                     <a id="5763" class="Symbol">_</a>  <a id="5766" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5768" href="Ledger.Prelude.html#2672" class="Function">lookupHash</a> <a id="5779" href="Ledger.Dijkstra.Specification.Utxow.html#5665" class="Bound">sh</a> <a id="5782" href="Ledger.Dijkstra.Specification.Utxow.html#5216" class="Bound">p2Scripts</a>
                                                                     <a id="5861" href="Ledger.Dijkstra.Specification.Utxow.html#5653" class="Bound">d</a> <a id="5863" href="Class.Monad.Core.html#337" class="Field Operator">&gt;&gt;=</a> <a id="5867" href="Data.Sum.html#870" class="Function">isInj₂</a><a id="5873" class="Symbol">)</a>
                                       <a id="5914" class="Symbol">(</a><a id="5915" href="Class.IsSet.html#959" class="Function">range</a> <a id="5921" class="Symbol">(</a><a id="5922" href="Ledger.Dijkstra.Specification.Utxow.html#4935" class="Bound">utxo₀</a> <a id="5928" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="5930" href="Ledger.Dijkstra.Specification.Transaction.html#3870" class="Function">txIns</a><a id="5935" class="Symbol">))</a>

    <a id="5943" class="Keyword">in</a>
    <a id="5950" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a>  <a id="5953" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="5956" href="Ledger.Dijkstra.Specification.Utxow.html#5956" class="Bound">(</a><a id="5957" href="Ledger.Dijkstra.Specification.Utxow.html#5957" class="Bound">vk</a> <a id="5960" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5962" href="Ledger.Dijkstra.Specification.Utxow.html#5962" class="Bound">σ</a><a id="5963" href="Ledger.Dijkstra.Specification.Utxow.html#5956" class="Bound">)</a> <a id="5965" href="Class.IsSet.html#576" class="Function">∈</a> <a id="5967" href="Ledger.Dijkstra.Specification.Transaction.html#5089" class="Function">vKeySigs</a> <a id="5976" href="Class.IsSet.html#576" class="Function">]</a> <a id="5978" href="Ledger.Core.Specification.Crypto.html#719" class="Function">isSigned</a> <a id="5987" href="Ledger.Dijkstra.Specification.Utxow.html#5957" class="Bound">vk</a> <a id="5990" class="Symbol">(</a><a id="5991" href="Ledger.Dijkstra.Specification.Transaction.html#2389" class="Field">txidBytes</a> <a id="6001" href="Ledger.Dijkstra.Specification.Transaction.html#4047" class="Function">txId</a><a id="6005" class="Symbol">)</a> <a id="6007" href="Ledger.Dijkstra.Specification.Utxow.html#5962" class="Bound">σ</a>
    <a id="6013" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="6016" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="6019" href="Ledger.Dijkstra.Specification.Utxow.html#6019" class="Bound">s</a> <a id="6021" href="Class.IsSet.html#576" class="Function">∈</a> <a id="6023" href="Ledger.Dijkstra.Specification.Utxow.html#5123" class="Bound">p1Scripts</a> <a id="6033" href="Class.IsSet.html#576" class="Function">]</a> <a id="6035" class="Symbol">(</a><a id="6036" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="6041" href="Ledger.Dijkstra.Specification.Utxow.html#6019" class="Bound">s</a> <a id="6043" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="6045" href="Ledger.Dijkstra.Specification.Utxow.html#5309" class="Bound">neededScriptHashes</a> <a id="6064" class="Symbol">→</a> <a id="6066" href="Ledger.Dijkstra.Specification.Script.Base.html#671" class="Function">validP1Script</a> <a id="6080" href="Ledger.Dijkstra.Specification.Utxow.html#5025" class="Bound">witsKeyHashes</a> <a id="6094" href="Ledger.Dijkstra.Specification.Transaction.html#4223" class="Function">txVldt</a> <a id="6101" href="Ledger.Dijkstra.Specification.Utxow.html#6019" class="Bound">s</a><a id="6102" class="Symbol">)</a>
    <a id="6108" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="6111" href="Ledger.Dijkstra.Specification.Utxow.html#5442" class="Bound">neededVKeyHashes</a> <a id="6128" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="6130" href="Ledger.Dijkstra.Specification.Utxow.html#5025" class="Bound">witsKeyHashes</a>
    <a id="6148" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="6151" href="Ledger.Dijkstra.Specification.Utxow.html#5309" class="Bound">neededScriptHashes</a> <a id="6170" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="6172" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="6177" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="6182" href="Ledger.Dijkstra.Specification.Utxow.html#5123" class="Bound">p1Scripts</a> <a id="6192" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="6194" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="6199" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="6204" href="Ledger.Dijkstra.Specification.Utxow.html#5216" class="Bound">p2Scripts</a>
    <a id="6218" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="6221" href="Ledger.Dijkstra.Specification.Utxow.html#5566" class="Bound">neededDataHashes</a> <a id="6238" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="6240" href="Class.IsSet.html#916" class="Function">dom</a> <a id="6244" class="Symbol">(</a><a id="6245" href="Ledger.Dijkstra.Specification.Utxo.html#2226" class="Field">DataPoolOf</a> <a id="6256" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a><a id="6257" class="Symbol">)</a>
    <a id="6263" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="6266" href="Ledger.Dijkstra.Specification.Utxow.html#2522" class="Function">languages</a> <a id="6276" href="Ledger.Dijkstra.Specification.Utxow.html#5216" class="Bound">p2Scripts</a> <a id="6286" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="6288" href="Class.IsSet.html#916" class="Function">dom</a> <a id="6292" class="Symbol">(</a><a id="6293" href="Ledger.Dijkstra.Specification.PParams.html#3673" class="Function">PParams.costmdls</a> <a id="6310" class="Symbol">(</a><a id="6311" href="Ledger.Dijkstra.Specification.PParams.html#4454" class="Field">PParamsOf</a> <a id="6321" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a><a id="6322" class="Symbol">))</a> <a id="6325" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="6327" href="Ledger.Dijkstra.Specification.Utxow.html#2606" class="Function">allowedLanguages</a> <a id="6344" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a> <a id="6347" href="Ledger.Dijkstra.Specification.Utxow.html#4975" class="Bound">utxo</a>
    <a id="6356" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="6359" href="Ledger.Dijkstra.Specification.Transaction.html#4278" class="Function">txADhash</a> <a id="6368" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6370" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="6374" href="Interface.TypeClasses.Hashable.html#219" class="Field">hash</a> <a id="6379" href="Ledger.Dijkstra.Specification.Transaction.html#3747" class="Function">txAuxData</a>
    <a id="6393" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a>  <a id="6396" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a> <a id="6398" href="Ledger.Dijkstra.Specification.Utxo.html#9158" class="Datatype Operator">⊢</a> <a id="6400" href="Ledger.Dijkstra.Specification.Utxow.html#494" class="Generalizable">s</a> <a id="6402" href="Ledger.Dijkstra.Specification.Utxo.html#9158" class="Datatype Operator">⇀⦇</a> <a id="6405" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a> <a id="6408" href="Ledger.Dijkstra.Specification.Utxo.html#9158" class="Datatype Operator">,UTXO⦈</a> <a id="6415" href="Ledger.Dijkstra.Specification.Utxow.html#496" class="Generalizable">s&#39;</a>
      <a id="6424" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="6463" href="Ledger.Dijkstra.Specification.Utxow.html#485" class="Generalizable">Γ</a> <a id="6465" href="Ledger.Dijkstra.Specification.Utxow.html#4723" class="Datatype Operator">⊢</a> <a id="6467" href="Ledger.Dijkstra.Specification.Utxow.html#494" class="Generalizable">s</a> <a id="6469" href="Ledger.Dijkstra.Specification.Utxow.html#4723" class="Datatype Operator">⇀⦇</a> <a id="6472" href="Ledger.Dijkstra.Specification.Utxow.html#513" class="Generalizable">tx</a> <a id="6475" href="Ledger.Dijkstra.Specification.Utxow.html#4723" class="Datatype Operator">,UTXOW⦈</a> <a id="6483" href="Ledger.Dijkstra.Specification.Utxow.html#496" class="Generalizable">s&#39;</a>

</pre></body></html>