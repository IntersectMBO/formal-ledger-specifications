<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Utxo</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.html" class="Module">Algebra</a>              <a id="59" class="Keyword">using</a> <a id="65" class="Symbol">(</a><a id="66" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a><a id="83" class="Symbol">)</a>
<a id="85" class="Keyword">open</a> <a id="90" class="Keyword">import</a> <a id="97" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>  <a id="118" class="Keyword">using</a> <a id="124" class="Symbol">(</a><a id="125" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="135" class="Symbol">)</a>
<a id="137" class="Keyword">import</a> <a id="144" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="155" class="Symbol">as</a> <a id="158" class="Module">M</a>
<a id="160" class="Keyword">import</a> <a id="167" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="195" class="Symbol">as</a> <a id="198" class="Module">Sum</a>
<a id="202" class="Keyword">import</a> <a id="209" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="222" class="Symbol">as</a> <a id="225" class="Module">ℤ</a>
<a id="227" class="Keyword">import</a> <a id="234" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="248" class="Symbol">as</a> <a id="251" class="Module">ℚ</a>

<a id="254" class="Keyword">open</a> <a id="259" class="Keyword">import</a> <a id="266" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="330" class="Keyword">open</a> <a id="335" class="Keyword">import</a> <a id="342" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="383" class="Keyword">module</a> <a id="390" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a>
  <a id="425" class="Symbol">(</a><a id="426" href="Ledger.Conway.Specification.Utxo.html#426" class="Bound">txs</a> <a id="430" class="Symbol">:</a> <a id="432" class="Symbol">_)</a> <a id="435" class="Symbol">(</a><a id="436" class="Keyword">open</a> <a id="441" href="Ledger.Conway.Specification.Transaction.html#999" class="Module">TransactionStructure</a> <a id="462" href="Ledger.Conway.Specification.Utxo.html#426" class="Bound">txs</a><a id="465" class="Symbol">)</a>
  <a id="469" class="Symbol">(</a><a id="470" href="Ledger.Conway.Specification.Utxo.html#470" class="Bound">abs</a> <a id="474" class="Symbol">:</a> <a id="476" href="Ledger.Conway.Specification.Abstract.html#830" class="Record">AbstractFunctions</a> <a id="494" href="Ledger.Conway.Specification.Utxo.html#426" class="Bound">txs</a><a id="497" class="Symbol">)</a> <a id="499" class="Symbol">(</a><a id="500" class="Keyword">open</a> <a id="505" href="Ledger.Conway.Specification.Abstract.html#830" class="Module">AbstractFunctions</a> <a id="523" href="Ledger.Conway.Specification.Utxo.html#470" class="Bound">abs</a><a id="526" class="Symbol">)</a>
  <a id="530" class="Keyword">where</a>

<a id="537" class="Keyword">open</a> <a id="542" class="Keyword">import</a> <a id="549" href="Ledger.Conway.Specification.Script.Validation.html" class="Module">Ledger.Conway.Specification.Script.Validation</a> <a id="595" href="Ledger.Conway.Specification.Utxo.html#426" class="Bound">txs</a> <a id="599" href="Ledger.Conway.Specification.Utxo.html#470" class="Bound">abs</a>
<a id="603" class="Keyword">open</a> <a id="608" class="Keyword">import</a> <a id="615" href="Ledger.Conway.Specification.Fees.html" class="Module">Ledger.Conway.Specification.Fees</a> <a id="648" class="Keyword">using</a> <a id="654" class="Symbol">(</a><a id="655" href="Ledger.Conway.Specification.Fees.html#998" class="Function">scriptsCost</a><a id="666" class="Symbol">)</a>
<a id="668" class="Keyword">open</a> <a id="673" class="Keyword">import</a> <a id="680" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="714" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>

<a id="728" class="Keyword">instance</a>
  <a id="739" href="Ledger.Conway.Specification.Utxo.html#739" class="Function">_</a> <a id="741" class="Symbol">=</a> <a id="743" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a>


<a id="totExUnits"></a><a id="756" href="Ledger.Conway.Specification.Utxo.html#756" class="Function">totExUnits</a> <a id="767" class="Symbol">:</a> <a id="769" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="772" class="Symbol">→</a> <a id="774" href="Ledger.Conway.Specification.Script.Base.html#1018" class="Function">ExUnits</a>
<a id="782" href="Ledger.Conway.Specification.Utxo.html#756" class="Function">totExUnits</a> <a id="793" href="Ledger.Conway.Specification.Utxo.html#793" class="Bound">tx</a> <a id="796" class="Symbol">=</a> <a id="798" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">∑[</a> <a id="801" href="Ledger.Conway.Specification.Utxo.html#801" class="Bound">(_</a> <a id="804" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="806" href="Ledger.Conway.Specification.Utxo.html#806" class="Bound">eu</a><a id="808" href="Ledger.Conway.Specification.Utxo.html#801" class="Bound">)</a> <a id="810" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">←</a> <a id="812" href="Ledger.Conway.Specification.Utxo.html#793" class="Bound">tx</a> <a id="815" class="Symbol">.</a><a id="816" href="Ledger.Conway.Specification.Transaction.html#4738" class="Field">wits</a> <a id="821" class="Symbol">.</a><a id="822" href="Ledger.Conway.Specification.Transaction.html#4557" class="Field">txrdmrs</a> <a id="830" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">]</a> <a id="832" href="Ledger.Conway.Specification.Utxo.html#806" class="Bound">eu</a>


  <a id="839" class="Keyword">where</a> <a id="845" class="Keyword">open</a> <a id="850" href="Ledger.Conway.Specification.Transaction.html#4682" class="Module">Tx</a><a id="852" class="Symbol">;</a> <a id="854" class="Keyword">open</a> <a id="859" href="Ledger.Conway.Specification.Transaction.html#4437" class="Module">TxWitnesses</a>

<a id="872" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="920" href="Ledger.Conway.Specification.Utxo.html#920" class="Function">utxoEntrySizeWithoutVal</a> <a id="944" class="Symbol">:</a> <a id="946" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#429" class="Function">MemoryEstimate</a>
<a id="961" href="Ledger.Conway.Specification.Utxo.html#920" class="Function">utxoEntrySizeWithoutVal</a> <a id="985" class="Symbol">=</a> <a id="987" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="990" href="Ledger.Conway.Specification.Utxo.html#990" class="Function">utxoEntrySize</a> <a id="1004" class="Symbol">:</a> <a id="1006" href="Ledger.Conway.Specification.Transaction.html#5661" class="Function">TxOutʰ</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#429" class="Function">MemoryEstimate</a>
<a id="1030" href="Ledger.Conway.Specification.Utxo.html#990" class="Function">utxoEntrySize</a> <a id="1044" href="Ledger.Conway.Specification.Utxo.html#1044" class="Bound">o</a> <a id="1046" class="Symbol">=</a> <a id="1048" href="Ledger.Conway.Specification.Utxo.html#920" class="Function">utxoEntrySizeWithoutVal</a> <a id="1072" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1074" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#978" class="Function">size</a> <a id="1079" class="Symbol">(</a><a id="1080" href="Ledger.Conway.Specification.Transaction.html#5821" class="Function">getValueʰ</a> <a id="1090" href="Ledger.Conway.Specification.Utxo.html#1044" class="Bound">o</a><a id="1091" class="Symbol">)</a>

<a id="1094" class="Keyword">open</a> <a id="1099" href="Ledger.Conway.Specification.PParams.html#1779" class="Module">PParams</a>



<a id="1110" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="1117" href="Ledger.Conway.Specification.Utxo.html#1117" class="Record">UTxOEnv</a> <a id="1125" class="Symbol">:</a> <a id="1127" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1132" class="Keyword">where</a>
  <a id="1140" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="1150" href="Ledger.Conway.Specification.Utxo.html#1150" class="Field">slot</a>      <a id="1160" class="Symbol">:</a> <a id="1162" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="1171" href="Ledger.Conway.Specification.Utxo.html#1171" class="Field">pparams</a>   <a id="1181" class="Symbol">:</a> <a id="1183" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="1195" href="Ledger.Conway.Specification.Utxo.html#1195" class="Field">treasury</a>  <a id="1205" class="Symbol">:</a> <a id="1207" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>



<a id="1219" class="Keyword">record</a> <a id="UTxOState"></a><a id="1226" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="1236" class="Symbol">:</a> <a id="1238" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1243" class="Keyword">where</a>


  <a id="1253" class="Keyword">constructor</a> <a id="⟦_,_,_,_⟧ᵘ"></a><a id="1265" href="Ledger.Conway.Specification.Utxo.html#1265" class="InductiveConstructor Operator">⟦_,_,_,_⟧ᵘ</a>


  <a id="1280" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="1290" href="Ledger.Conway.Specification.Utxo.html#1290" class="Field">utxo</a>       <a id="1301" class="Symbol">:</a> <a id="1303" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="1312" href="Ledger.Conway.Specification.Utxo.html#1312" class="Field">fees</a>       <a id="1323" class="Symbol">:</a> <a id="1325" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
    <a id="UTxOState.deposits"></a><a id="1334" href="Ledger.Conway.Specification.Utxo.html#1334" class="Field">deposits</a>   <a id="1345" class="Symbol">:</a> <a id="1347" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a>
    <a id="UTxOState.donations"></a><a id="1360" href="Ledger.Conway.Specification.Utxo.html#1360" class="Field">donations</a>  <a id="1371" class="Symbol">:</a> <a id="1373" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>


<a id="1385" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="1392" href="Ledger.Conway.Specification.Utxo.html#1392" class="Record">HasUTxOState</a> <a id="1405" class="Symbol">{</a><a id="1406" href="Ledger.Conway.Specification.Utxo.html#1406" class="Bound">a</a><a id="1407" class="Symbol">}</a> <a id="1409" class="Symbol">(</a><a id="1410" href="Ledger.Conway.Specification.Utxo.html#1410" class="Bound">A</a> <a id="1412" class="Symbol">:</a> <a id="1414" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1419" href="Ledger.Conway.Specification.Utxo.html#1406" class="Bound">a</a><a id="1420" class="Symbol">)</a> <a id="1422" class="Symbol">:</a> <a id="1424" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1429" href="Ledger.Conway.Specification.Utxo.html#1406" class="Bound">a</a> <a id="1431" class="Keyword">where</a>
  <a id="1439" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="1445" href="Ledger.Conway.Specification.Utxo.html#1445" class="Field">UTxOStateOf</a> <a id="1457" class="Symbol">:</a> <a id="1459" href="Ledger.Conway.Specification.Utxo.html#1410" class="Bound">A</a> <a id="1461" class="Symbol">→</a> <a id="1463" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a>
<a id="1473" class="Keyword">open</a> <a id="1478" href="Ledger.Conway.Specification.Utxo.html#1392" class="Module">HasUTxOState</a> <a id="1491" class="Symbol">⦃...⦄</a> <a id="1497" class="Keyword">public</a>

<a id="1505" class="Keyword">instance</a>
  <a id="HasPParams-UTxOEnv"></a><a id="1516" href="Ledger.Conway.Specification.Utxo.html#1516" class="Function">HasPParams-UTxOEnv</a> <a id="1535" class="Symbol">:</a> <a id="1537" href="Ledger.Conway.Specification.PParams.html#3632" class="Record">HasPParams</a> <a id="1548" href="Ledger.Conway.Specification.Utxo.html#1117" class="Record">UTxOEnv</a>
  <a id="1558" href="Ledger.Conway.Specification.Utxo.html#1516" class="Function">HasPParams-UTxOEnv</a> <a id="1577" class="Symbol">.</a><a id="1578" href="Ledger.Conway.Specification.PParams.html#3683" class="Field">PParamsOf</a> <a id="1588" class="Symbol">=</a> <a id="1590" href="Ledger.Conway.Specification.Utxo.html#1171" class="Field">UTxOEnv.pparams</a>

  <a id="HasUTxO-UTxOState"></a><a id="1609" href="Ledger.Conway.Specification.Utxo.html#1609" class="Function">HasUTxO-UTxOState</a> <a id="1627" class="Symbol">:</a> <a id="1629" href="Ledger.Conway.Specification.Transaction.html#2889" class="Record">HasUTxO</a> <a id="1637" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a>
  <a id="1649" href="Ledger.Conway.Specification.Utxo.html#1609" class="Function">HasUTxO-UTxOState</a> <a id="1667" class="Symbol">.</a><a id="1668" href="Ledger.Conway.Specification.Transaction.html#2939" class="Field">UTxOOf</a> <a id="1675" class="Symbol">=</a> <a id="1677" href="Ledger.Conway.Specification.Utxo.html#1290" class="Field">UTxOState.utxo</a>

  <a id="HasFee-UTxOState"></a><a id="1695" href="Ledger.Conway.Specification.Utxo.html#1695" class="Function">HasFee-UTxOState</a> <a id="1712" class="Symbol">:</a> <a id="1714" href="Ledger.Prelude.Base.html#621" class="Record">HasFees</a> <a id="1722" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a>
  <a id="1734" href="Ledger.Conway.Specification.Utxo.html#1695" class="Function">HasFee-UTxOState</a> <a id="1751" class="Symbol">.</a><a id="1752" href="Ledger.Prelude.Base.html#669" class="Field">FeesOf</a> <a id="1759" class="Symbol">=</a> <a id="1761" href="Ledger.Conway.Specification.Utxo.html#1312" class="Field">UTxOState.fees</a>

  <a id="HasDeposits-UTxOState"></a><a id="1779" href="Ledger.Conway.Specification.Utxo.html#1779" class="Function">HasDeposits-UTxOState</a> <a id="1801" class="Symbol">:</a> <a id="1803" href="Ledger.Conway.Specification.Certs.html#870" class="Record">HasDeposits</a> <a id="1815" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a>
  <a id="1827" href="Ledger.Conway.Specification.Utxo.html#1779" class="Function">HasDeposits-UTxOState</a> <a id="1849" class="Symbol">.</a><a id="1850" href="Ledger.Conway.Specification.Certs.html#922" class="Field">DepositsOf</a> <a id="1861" class="Symbol">=</a> <a id="1863" href="Ledger.Conway.Specification.Utxo.html#1334" class="Field">UTxOState.deposits</a>

  <a id="HasDonations-UTxOState"></a><a id="1885" href="Ledger.Conway.Specification.Utxo.html#1885" class="Function">HasDonations-UTxOState</a> <a id="1908" class="Symbol">:</a> <a id="1910" href="Ledger.Prelude.Base.html#501" class="Record">HasDonations</a> <a id="1923" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a>
  <a id="1935" href="Ledger.Conway.Specification.Utxo.html#1885" class="Function">HasDonations-UTxOState</a> <a id="1958" class="Symbol">.</a><a id="1959" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="1971" class="Symbol">=</a> <a id="1973" href="Ledger.Conway.Specification.Utxo.html#1360" class="Field">UTxOState.donations</a>

  <a id="1996" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="2008" href="Ledger.Conway.Specification.Utxo.html#2008" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="2024" href="Ledger.Conway.Specification.Utxo.html#2024" class="Function">HasCast-UTxOState</a> <a id="2042" class="Symbol">=</a> <a id="2044" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="2063" class="Symbol">(</a> <a id="2065" class="Symbol">(</a><a id="2066" class="Keyword">quote</a> <a id="2072" href="Ledger.Conway.Specification.Utxo.html#1117" class="Record">UTxOEnv</a>   <a id="2082" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2084" href="Ledger.Conway.Specification.Utxo.html#2008" class="Function">HasCast-UTxOEnv</a>  <a id="2101" class="Symbol">)</a> <a id="2103" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="2109" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="2111" class="Symbol">(</a><a id="2112" class="Keyword">quote</a> <a id="2118" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="2128" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2130" href="Ledger.Conway.Specification.Utxo.html#2024" class="Function">HasCast-UTxOState</a><a id="2147" class="Symbol">)</a> <a id="2149" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="2150" class="Symbol">)</a>


<a id="2154" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="2159" href="Ledger.Conway.Specification.Utxo.html#2159" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="2173" class="Symbol">:</a> <a id="2175" href="Ledger.Conway.Specification.Utxo.html#1117" class="Record">UTxOEnv</a> <a id="2183" class="Symbol">→</a> <a id="2185" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="2195" class="Symbol">→</a> <a id="2197" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="2200" class="Symbol">→</a> <a id="2202" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="2212" class="Symbol">→</a> <a id="2214" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="2221" class="Keyword">module</a> <a id="2228" href="Ledger.Conway.Specification.Utxo.html#2228" class="Module">_</a> <a id="2230" class="Symbol">(</a><a id="2231" class="Keyword">let</a> <a id="2235" class="Keyword">open</a> <a id="2240" href="Ledger.Conway.Specification.Transaction.html#4682" class="Module">Tx</a><a id="2242" class="Symbol">;</a> <a id="2244" class="Keyword">open</a> <a id="2249" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a><a id="2255" class="Symbol">;</a> <a id="2257" class="Keyword">open</a> <a id="2262" href="Ledger.Conway.Specification.Transaction.html#4437" class="Module">TxWitnesses</a><a id="2273" class="Symbol">)</a> <a id="2275" class="Keyword">where</a> <a id="2281" class="Keyword">opaque</a>


  <a id="2292" href="Ledger.Conway.Specification.Utxo.html#2292" class="Function">outs</a> <a id="2297" class="Symbol">:</a> <a id="2299" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="2306" class="Symbol">→</a> <a id="2308" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a>
  <a id="2315" href="Ledger.Conway.Specification.Utxo.html#2292" class="Function">outs</a> <a id="2320" href="Ledger.Conway.Specification.Utxo.html#2320" class="Bound">tx</a> <a id="2323" class="Symbol">=</a> <a id="2325" href="Axiom.Set.Map.html#6936" class="Function">mapKeys</a> <a id="2333" class="Symbol">(</a><a id="2334" href="Ledger.Conway.Specification.Utxo.html#2320" class="Bound">tx</a> <a id="2337" class="Symbol">.</a><a id="2338" href="Ledger.Conway.Specification.Transaction.html#3180" class="Field">txId</a> <a id="2343" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="2345" class="Symbol">)</a> <a id="2347" class="Symbol">(</a><a id="2348" href="Ledger.Conway.Specification.Utxo.html#2320" class="Bound">tx</a> <a id="2351" class="Symbol">.</a><a id="2352" href="Ledger.Conway.Specification.Transaction.html#3140" class="Field">txOuts</a><a id="2358" class="Symbol">)</a>

  <a id="2363" href="Ledger.Conway.Specification.Utxo.html#2363" class="Function">balance</a> <a id="2371" class="Symbol">:</a> <a id="2373" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a> <a id="2378" class="Symbol">→</a> <a id="2380" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="2388" href="Ledger.Conway.Specification.Utxo.html#2363" class="Function">balance</a> <a id="2396" href="Ledger.Conway.Specification.Utxo.html#2396" class="Bound">utxo</a> <a id="2401" class="Symbol">=</a> <a id="2403" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">∑[</a> <a id="2406" href="Ledger.Conway.Specification.Utxo.html#2406" class="Bound">x</a> <a id="2408" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">←</a> <a id="2410" href="Axiom.Set.Map.html#7108" class="Function">mapValues</a> <a id="2420" href="Ledger.Conway.Specification.Transaction.html#5732" class="Function">txOutHash</a> <a id="2430" href="Ledger.Conway.Specification.Utxo.html#2396" class="Bound">utxo</a> <a id="2435" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">]</a> <a id="2437" href="Ledger.Conway.Specification.Transaction.html#5821" class="Function">getValueʰ</a> <a id="2447" href="Ledger.Conway.Specification.Utxo.html#2406" class="Bound">x</a>

  <a id="2452" href="Ledger.Conway.Specification.Utxo.html#2452" class="Function">cbalance</a> <a id="2461" class="Symbol">:</a> <a id="2463" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a> <a id="2468" class="Symbol">→</a> <a id="2470" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="2477" href="Ledger.Conway.Specification.Utxo.html#2452" class="Function">cbalance</a> <a id="2486" href="Ledger.Conway.Specification.Utxo.html#2486" class="Bound">utxo</a> <a id="2491" class="Symbol">=</a> <a id="2493" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="2498" class="Symbol">(</a><a id="2499" href="Ledger.Conway.Specification.Utxo.html#2363" class="Function">balance</a> <a id="2507" href="Ledger.Conway.Specification.Utxo.html#2486" class="Bound">utxo</a><a id="2511" class="Symbol">)</a>

  <a id="2516" href="Ledger.Conway.Specification.Utxo.html#2516" class="Function">refScriptsSize</a> <a id="2531" class="Symbol">:</a> <a id="2533" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a> <a id="2538" class="Symbol">→</a> <a id="2540" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="2543" class="Symbol">→</a> <a id="2545" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="2549" href="Ledger.Conway.Specification.Utxo.html#2516" class="Function">refScriptsSize</a> <a id="2564" href="Ledger.Conway.Specification.Utxo.html#2564" class="Bound">utxo</a> <a id="2569" href="Ledger.Conway.Specification.Utxo.html#2569" class="Bound">tx</a> <a id="2572" class="Symbol">=</a> <a id="2574" href="Data.Nat.ListAction.html#612" class="Function">sum</a> <a id="2578" class="Symbol">(</a><a id="2579" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2583" href="Ledger.Conway.Specification.Abstract.html#1066" class="Field">scriptSize</a> <a id="2594" class="Symbol">(</a><a id="2595" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="2605" class="Symbol">(</a><a id="2606" href="Ledger.Conway.Specification.Transaction.html#6190" class="Function">refScripts</a> <a id="2617" href="Ledger.Conway.Specification.Utxo.html#2569" class="Bound">tx</a> <a id="2620" href="Ledger.Conway.Specification.Utxo.html#2564" class="Bound">utxo</a><a id="2624" class="Symbol">)))</a>

  <a id="2631" href="Ledger.Conway.Specification.Utxo.html#2631" class="Function">minfee</a> <a id="2638" class="Symbol">:</a> <a id="2640" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="2648" class="Symbol">→</a> <a id="2650" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a> <a id="2655" class="Symbol">→</a> <a id="2657" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="2660" class="Symbol">→</a> <a id="2662" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="2669" href="Ledger.Conway.Specification.Utxo.html#2631" class="Function">minfee</a> <a id="2676" href="Ledger.Conway.Specification.Utxo.html#2676" class="Bound">pp</a> <a id="2679" href="Ledger.Conway.Specification.Utxo.html#2679" class="Bound">utxo</a> <a id="2684" href="Ledger.Conway.Specification.Utxo.html#2684" class="Bound">tx</a>  <a id="2688" class="Symbol">=</a> <a id="2690" href="Ledger.Conway.Specification.Utxo.html#2676" class="Bound">pp</a> <a id="2693" class="Symbol">.</a><a id="2694" href="Ledger.Conway.Specification.PParams.html#2201" class="Field">a</a> <a id="2696" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="2698" href="Ledger.Conway.Specification.Utxo.html#2684" class="Bound">tx</a> <a id="2701" class="Symbol">.</a><a id="2702" href="Ledger.Conway.Specification.Transaction.html#4767" class="Field">txsize</a> <a id="2709" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2711" href="Ledger.Conway.Specification.Utxo.html#2676" class="Bound">pp</a> <a id="2714" class="Symbol">.</a><a id="2715" href="Ledger.Conway.Specification.PParams.html#2243" class="Field">b</a>
                     <a id="2738" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2740" href="Ledger.Conway.Specification.Abstract.html#869" class="Field">txscriptfee</a> <a id="2752" class="Symbol">(</a><a id="2753" href="Ledger.Conway.Specification.Utxo.html#2676" class="Bound">pp</a> <a id="2756" class="Symbol">.</a><a id="2757" href="Ledger.Conway.Specification.PParams.html#2560" class="Field">prices</a><a id="2763" class="Symbol">)</a> <a id="2765" class="Symbol">(</a><a id="2766" href="Ledger.Conway.Specification.Utxo.html#756" class="Function">totExUnits</a> <a id="2777" href="Ledger.Conway.Specification.Utxo.html#2684" class="Bound">tx</a><a id="2779" class="Symbol">)</a>
                     <a id="2802" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2804" href="Ledger.Conway.Specification.Fees.html#998" class="Function">scriptsCost</a> <a id="2816" href="Ledger.Conway.Specification.Utxo.html#2676" class="Bound">pp</a> <a id="2819" class="Symbol">(</a><a id="2820" href="Ledger.Conway.Specification.Utxo.html#2516" class="Function">refScriptsSize</a> <a id="2835" href="Ledger.Conway.Specification.Utxo.html#2679" class="Bound">utxo</a> <a id="2840" href="Ledger.Conway.Specification.Utxo.html#2684" class="Bound">tx</a><a id="2842" class="Symbol">)</a>


<a id="2846" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="2857" href="Ledger.Conway.Specification.Utxo.html#2857" class="Function">HasCoin-UTxO</a> <a id="2870" class="Symbol">:</a> <a id="2872" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="2880" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a>
  <a id="2887" href="Ledger.Conway.Specification.Utxo.html#2857" class="Function">HasCoin-UTxO</a> <a id="2900" class="Symbol">.</a><a id="2901" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="2909" class="Symbol">=</a> <a id="2911" href="Ledger.Conway.Specification.Utxo.html#2452" class="Function">cbalance</a>


<a id="certDeposit"></a><a id="2922" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="2934" class="Symbol">:</a> <a id="2936" href="Ledger.Conway.Specification.Certs.html#2116" class="Datatype">DCert</a> <a id="2942" class="Symbol">→</a> <a id="2944" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="2952" class="Symbol">→</a> <a id="2954" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a>
<a id="2963" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="2975" class="Symbol">(</a><a id="2976" href="Ledger.Conway.Specification.Certs.html#2137" class="InductiveConstructor">delegate</a> <a id="2985" href="Ledger.Conway.Specification.Utxo.html#2985" class="Bound">c</a> <a id="2987" class="Symbol">_</a> <a id="2989" class="Symbol">_</a> <a id="2991" href="Ledger.Conway.Specification.Utxo.html#2991" class="Bound">v</a><a id="2992" class="Symbol">)</a> <a id="2994" class="Symbol">_</a>   <a id="2998" class="Symbol">=</a> <a id="3000" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3002" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="3020" href="Ledger.Conway.Specification.Utxo.html#2985" class="Bound">c</a> <a id="3022" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3024" href="Ledger.Conway.Specification.Utxo.html#2991" class="Bound">v</a> <a id="3026" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3028" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="3040" class="Symbol">(</a><a id="3041" href="Ledger.Conway.Specification.Certs.html#2829" class="InductiveConstructor">reg</a> <a id="3045" href="Ledger.Conway.Specification.Utxo.html#3045" class="Bound">c</a> <a id="3047" class="Symbol">_)</a>          <a id="3059" href="Ledger.Conway.Specification.Utxo.html#3059" class="Bound">pp</a>  <a id="3063" class="Symbol">=</a> <a id="3065" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3067" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="3085" href="Ledger.Conway.Specification.Utxo.html#3045" class="Bound">c</a> <a id="3087" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3089" href="Ledger.Conway.Specification.Utxo.html#3059" class="Bound">pp</a> <a id="3092" class="Symbol">.</a><a id="3093" href="Ledger.Conway.Specification.PParams.html#2285" class="Field">keyDeposit</a> <a id="3104" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3106" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="3118" class="Symbol">(</a><a id="3119" href="Ledger.Conway.Specification.Certs.html#2258" class="InductiveConstructor">regpool</a> <a id="3127" href="Ledger.Conway.Specification.Utxo.html#3127" class="Bound">kh</a> <a id="3130" class="Symbol">_)</a>     <a id="3137" href="Ledger.Conway.Specification.Utxo.html#3137" class="Bound">pp</a>  <a id="3141" class="Symbol">=</a> <a id="3143" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3145" href="Ledger.Conway.Specification.Certs.html#654" class="InductiveConstructor">PoolDeposit</a> <a id="3157" href="Ledger.Conway.Specification.Utxo.html#3127" class="Bound">kh</a> <a id="3160" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3162" href="Ledger.Conway.Specification.Utxo.html#3137" class="Bound">pp</a> <a id="3165" class="Symbol">.</a><a id="3166" href="Ledger.Conway.Specification.PParams.html#2330" class="Field">poolDeposit</a> <a id="3178" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3180" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="3192" class="Symbol">(</a><a id="3193" href="Ledger.Conway.Specification.Certs.html#2348" class="InductiveConstructor">regdrep</a> <a id="3201" href="Ledger.Conway.Specification.Utxo.html#3201" class="Bound">c</a> <a id="3203" href="Ledger.Conway.Specification.Utxo.html#3203" class="Bound">v</a> <a id="3205" class="Symbol">_)</a>    <a id="3211" class="Symbol">_</a>   <a id="3215" class="Symbol">=</a> <a id="3217" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3219" href="Ledger.Conway.Specification.Certs.html#707" class="InductiveConstructor">DRepDeposit</a> <a id="3231" href="Ledger.Conway.Specification.Utxo.html#3201" class="Bound">c</a> <a id="3233" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3235" href="Ledger.Conway.Specification.Utxo.html#3203" class="Bound">v</a> <a id="3237" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3239" href="Ledger.Conway.Specification.Utxo.html#2922" class="CatchallClause Function">certDeposit</a><a id="3250" class="CatchallClause"> </a><a id="3251" class="CatchallClause Symbol">_</a><a id="3252" class="CatchallClause">                  </a><a id="3270" class="CatchallClause Symbol">_</a>   <a id="3274" class="Symbol">=</a> <a id="3276" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="certRefund"></a><a id="3279" href="Ledger.Conway.Specification.Utxo.html#3279" class="Function">certRefund</a> <a id="3290" class="Symbol">:</a> <a id="3292" href="Ledger.Conway.Specification.Certs.html#2116" class="Datatype">DCert</a> <a id="3298" class="Symbol">→</a> <a id="3300" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3302" href="Ledger.Conway.Specification.Certs.html#571" class="Datatype">DepositPurpose</a>
<a id="3317" href="Ledger.Conway.Specification.Utxo.html#3279" class="Function">certRefund</a> <a id="3328" class="Symbol">(</a><a id="3329" href="Ledger.Conway.Specification.Certs.html#2210" class="InductiveConstructor">dereg</a> <a id="3335" href="Ledger.Conway.Specification.Utxo.html#3335" class="Bound">c</a> <a id="3337" class="Symbol">_)</a>      <a id="3345" class="Symbol">=</a> <a id="3347" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3349" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="3367" href="Ledger.Conway.Specification.Utxo.html#3335" class="Bound">c</a> <a id="3369" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3371" href="Ledger.Conway.Specification.Utxo.html#3279" class="Function">certRefund</a> <a id="3382" class="Symbol">(</a><a id="3383" href="Ledger.Conway.Specification.Certs.html#2399" class="InductiveConstructor">deregdrep</a> <a id="3393" href="Ledger.Conway.Specification.Utxo.html#3393" class="Bound">c</a> <a id="3395" class="Symbol">_)</a>  <a id="3399" class="Symbol">=</a> <a id="3401" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3403" href="Ledger.Conway.Specification.Certs.html#707" class="InductiveConstructor">DRepDeposit</a> <a id="3415" href="Ledger.Conway.Specification.Utxo.html#3393" class="Bound">c</a> <a id="3417" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3419" href="Ledger.Conway.Specification.Utxo.html#3279" class="CatchallClause Function">certRefund</a><a id="3429" class="CatchallClause"> </a><a id="3430" class="CatchallClause Symbol">_</a>                <a id="3447" class="Symbol">=</a> <a id="3449" href="Class.HasEmptySet.html#287" class="Field">∅</a>


<a id="3453" class="Keyword">data</a> <a id="ValidCertDeposits"></a><a id="3458" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="3476" class="Symbol">(</a><a id="3477" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="3480" class="Symbol">:</a> <a id="3482" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a><a id="3489" class="Symbol">)</a> <a id="3491" class="Symbol">(</a><a id="3492" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="3497" class="Symbol">:</a> <a id="3499" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a><a id="3507" class="Symbol">)</a> <a id="3509" class="Symbol">:</a> <a id="3511" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3516" href="Ledger.Conway.Specification.Certs.html#2116" class="Datatype">DCert</a> <a id="3522" class="Symbol">→</a> <a id="3524" href="Agda.Primitive.html#388" class="Primitive">Set</a>


  <a id="3532" class="Keyword">where</a>
  <a id="ValidCertDeposits.[]"></a><a id="3540" href="Ledger.Conway.Specification.Utxo.html#3540" class="InductiveConstructor">[]</a>         <a id="3551" class="Symbol">:</a> <a id="3553" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="3571" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="3574" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="3579" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="ValidCertDeposits.delegate"></a><a id="3584" href="Ledger.Conway.Specification.Utxo.html#3584" class="InductiveConstructor">delegate</a>   <a id="3595" class="Symbol">:</a> <a id="3597" class="Symbol">∀</a> <a id="3599" class="Symbol">{</a><a id="3600" href="Ledger.Conway.Specification.Utxo.html#3600" class="Bound">c</a> <a id="3602" href="Ledger.Conway.Specification.Utxo.html#3602" class="Bound">del</a> <a id="3606" href="Ledger.Conway.Specification.Utxo.html#3606" class="Bound">kh</a> <a id="3609" href="Ledger.Conway.Specification.Utxo.html#3609" class="Bound">v</a> <a id="3611" href="Ledger.Conway.Specification.Utxo.html#3611" class="Bound">certs</a><a id="3616" class="Symbol">}</a>
             <a id="3631" class="Symbol">→</a> <a id="3633" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="3651" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="3654" class="Symbol">(</a><a id="3655" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="3660" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="3663" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3665" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="3683" href="Ledger.Conway.Specification.Utxo.html#3600" class="Bound">c</a> <a id="3685" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3687" href="Ledger.Conway.Specification.Utxo.html#3609" class="Bound">v</a> <a id="3689" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="3690" class="Symbol">)</a> <a id="3692" href="Ledger.Conway.Specification.Utxo.html#3611" class="Bound">certs</a>
             <a id="3711" class="Symbol">→</a> <a id="3713" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="3731" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="3734" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="3739" class="Symbol">(</a><a id="3740" href="Ledger.Conway.Specification.Certs.html#2137" class="InductiveConstructor">delegate</a> <a id="3749" href="Ledger.Conway.Specification.Utxo.html#3600" class="Bound">c</a> <a id="3751" href="Ledger.Conway.Specification.Utxo.html#3602" class="Bound">del</a> <a id="3755" href="Ledger.Conway.Specification.Utxo.html#3606" class="Bound">kh</a> <a id="3758" href="Ledger.Conway.Specification.Utxo.html#3609" class="Bound">v</a> <a id="3760" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3762" href="Ledger.Conway.Specification.Utxo.html#3611" class="Bound">certs</a><a id="3767" class="Symbol">)</a>
  <a id="ValidCertDeposits.regpool"></a><a id="3771" href="Ledger.Conway.Specification.Utxo.html#3771" class="InductiveConstructor">regpool</a>    <a id="3782" class="Symbol">:</a> <a id="3784" class="Symbol">∀</a> <a id="3786" class="Symbol">{</a><a id="3787" href="Ledger.Conway.Specification.Utxo.html#3787" class="Bound">kh</a> <a id="3790" href="Ledger.Conway.Specification.Utxo.html#3790" class="Bound">p</a> <a id="3792" href="Ledger.Conway.Specification.Utxo.html#3792" class="Bound">certs</a><a id="3797" class="Symbol">}</a>
             <a id="3812" class="Symbol">→</a> <a id="3814" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="3832" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="3835" class="Symbol">(</a><a id="3836" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="3841" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="3844" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3846" href="Ledger.Conway.Specification.Certs.html#654" class="InductiveConstructor">PoolDeposit</a> <a id="3858" href="Ledger.Conway.Specification.Utxo.html#3787" class="Bound">kh</a> <a id="3861" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3863" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="3866" class="Symbol">.</a><a id="3867" href="Ledger.Conway.Specification.PParams.html#2330" class="Field">poolDeposit</a> <a id="3879" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="3880" class="Symbol">)</a> <a id="3882" href="Ledger.Conway.Specification.Utxo.html#3792" class="Bound">certs</a>
             <a id="3901" class="Symbol">→</a> <a id="3903" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="3921" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="3924" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="3929" class="Symbol">(</a><a id="3930" href="Ledger.Conway.Specification.Certs.html#2258" class="InductiveConstructor">regpool</a> <a id="3938" href="Ledger.Conway.Specification.Utxo.html#3787" class="Bound">kh</a> <a id="3941" href="Ledger.Conway.Specification.Utxo.html#3790" class="Bound">p</a> <a id="3943" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3945" href="Ledger.Conway.Specification.Utxo.html#3792" class="Bound">certs</a><a id="3950" class="Symbol">)</a>
  <a id="ValidCertDeposits.regdrep"></a><a id="3954" href="Ledger.Conway.Specification.Utxo.html#3954" class="InductiveConstructor">regdrep</a>    <a id="3965" class="Symbol">:</a> <a id="3967" class="Symbol">∀</a> <a id="3969" class="Symbol">{</a><a id="3970" href="Ledger.Conway.Specification.Utxo.html#3970" class="Bound">c</a> <a id="3972" href="Ledger.Conway.Specification.Utxo.html#3972" class="Bound">v</a> <a id="3974" href="Ledger.Conway.Specification.Utxo.html#3974" class="Bound">a</a> <a id="3976" href="Ledger.Conway.Specification.Utxo.html#3976" class="Bound">certs</a><a id="3981" class="Symbol">}</a>
             <a id="3996" class="Symbol">→</a> <a id="3998" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4016" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4019" class="Symbol">(</a><a id="4020" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4025" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="4028" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4030" href="Ledger.Conway.Specification.Certs.html#707" class="InductiveConstructor">DRepDeposit</a> <a id="4042" href="Ledger.Conway.Specification.Utxo.html#3970" class="Bound">c</a> <a id="4044" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4046" href="Ledger.Conway.Specification.Utxo.html#3972" class="Bound">v</a> <a id="4048" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4049" class="Symbol">)</a> <a id="4051" href="Ledger.Conway.Specification.Utxo.html#3976" class="Bound">certs</a>
             <a id="4070" class="Symbol">→</a> <a id="4072" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4090" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4093" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4098" class="Symbol">(</a><a id="4099" href="Ledger.Conway.Specification.Certs.html#2348" class="InductiveConstructor">regdrep</a> <a id="4107" href="Ledger.Conway.Specification.Utxo.html#3970" class="Bound">c</a> <a id="4109" href="Ledger.Conway.Specification.Utxo.html#3972" class="Bound">v</a> <a id="4111" href="Ledger.Conway.Specification.Utxo.html#3974" class="Bound">a</a> <a id="4113" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4115" href="Ledger.Conway.Specification.Utxo.html#3976" class="Bound">certs</a><a id="4120" class="Symbol">)</a>
  <a id="ValidCertDeposits.reg"></a><a id="4124" href="Ledger.Conway.Specification.Utxo.html#4124" class="InductiveConstructor">reg</a>        <a id="4135" class="Symbol">:</a> <a id="4137" class="Symbol">∀</a> <a id="4139" class="Symbol">{</a><a id="4140" href="Ledger.Conway.Specification.Utxo.html#4140" class="Bound">c</a> <a id="4142" href="Ledger.Conway.Specification.Utxo.html#4142" class="Bound">v</a> <a id="4144" href="Ledger.Conway.Specification.Utxo.html#4144" class="Bound">certs</a><a id="4149" class="Symbol">}</a>
             <a id="4164" class="Symbol">→</a> <a id="4166" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4184" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4187" class="Symbol">(</a><a id="4188" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4193" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="4196" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4198" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="4216" href="Ledger.Conway.Specification.Utxo.html#4140" class="Bound">c</a> <a id="4218" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4220" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4223" class="Symbol">.</a><a id="4224" href="Ledger.Conway.Specification.PParams.html#2285" class="Field">keyDeposit</a> <a id="4235" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4236" class="Symbol">)</a> <a id="4238" href="Ledger.Conway.Specification.Utxo.html#4144" class="Bound">certs</a>
             <a id="4257" class="Symbol">→</a> <a id="4259" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4277" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4280" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4285" class="Symbol">(</a><a id="4286" href="Ledger.Conway.Specification.Certs.html#2829" class="InductiveConstructor">reg</a> <a id="4290" href="Ledger.Conway.Specification.Utxo.html#4140" class="Bound">c</a> <a id="4292" href="Ledger.Conway.Specification.Utxo.html#4142" class="Bound">v</a> <a id="4294" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4296" href="Ledger.Conway.Specification.Utxo.html#4144" class="Bound">certs</a><a id="4301" class="Symbol">)</a>
  <a id="ValidCertDeposits.dereg"></a><a id="4305" href="Ledger.Conway.Specification.Utxo.html#4305" class="InductiveConstructor">dereg</a>      <a id="4316" class="Symbol">:</a> <a id="4318" class="Symbol">∀</a> <a id="4320" class="Symbol">{</a><a id="4321" href="Ledger.Conway.Specification.Utxo.html#4321" class="Bound">c</a> <a id="4323" href="Ledger.Conway.Specification.Utxo.html#4323" class="Bound">md</a> <a id="4326" href="Ledger.Conway.Specification.Utxo.html#4326" class="Bound">d</a> <a id="4328" href="Ledger.Conway.Specification.Utxo.html#4328" class="Bound">certs</a><a id="4333" class="Symbol">}</a>
             <a id="4348" class="Symbol">→</a> <a id="4350" class="Symbol">(</a><a id="4351" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="4369" href="Ledger.Conway.Specification.Utxo.html#4321" class="Bound">c</a> <a id="4371" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4373" href="Ledger.Conway.Specification.Utxo.html#4326" class="Bound">d</a><a id="4374" class="Symbol">)</a> <a id="4376" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="4378" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a>
             <a id="4396" class="Symbol">→</a> <a id="4398" href="Ledger.Conway.Specification.Utxo.html#4323" class="Bound">md</a> <a id="4401" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4403" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="4411" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4413" href="Ledger.Conway.Specification.Utxo.html#4323" class="Bound">md</a> <a id="4416" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4418" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4423" href="Ledger.Conway.Specification.Utxo.html#4326" class="Bound">d</a>
             <a id="4438" class="Symbol">→</a> <a id="4440" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4458" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4461" class="Symbol">(</a><a id="4462" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4467" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="4469" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4471" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="4489" href="Ledger.Conway.Specification.Utxo.html#4321" class="Bound">c</a> <a id="4491" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="4493" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="4494" class="Symbol">)</a> <a id="4496" href="Ledger.Conway.Specification.Utxo.html#4328" class="Bound">certs</a>
             <a id="4515" class="Symbol">→</a> <a id="4517" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4535" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4538" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4543" class="Symbol">(</a><a id="4544" href="Ledger.Conway.Specification.Certs.html#2210" class="InductiveConstructor">dereg</a> <a id="4550" href="Ledger.Conway.Specification.Utxo.html#4321" class="Bound">c</a> <a id="4552" href="Ledger.Conway.Specification.Utxo.html#4323" class="Bound">md</a> <a id="4555" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4557" href="Ledger.Conway.Specification.Utxo.html#4328" class="Bound">certs</a><a id="4562" class="Symbol">)</a>
  <a id="ValidCertDeposits.deregdrep"></a><a id="4566" href="Ledger.Conway.Specification.Utxo.html#4566" class="InductiveConstructor">deregdrep</a>  <a id="4577" class="Symbol">:</a> <a id="4579" class="Symbol">∀</a> <a id="4581" class="Symbol">{</a><a id="4582" href="Ledger.Conway.Specification.Utxo.html#4582" class="Bound">c</a> <a id="4584" href="Ledger.Conway.Specification.Utxo.html#4584" class="Bound">d</a> <a id="4586" href="Ledger.Conway.Specification.Utxo.html#4586" class="Bound">certs</a><a id="4591" class="Symbol">}</a>
             <a id="4606" class="Symbol">→</a> <a id="4608" class="Symbol">(</a><a id="4609" href="Ledger.Conway.Specification.Certs.html#707" class="InductiveConstructor">DRepDeposit</a> <a id="4621" href="Ledger.Conway.Specification.Utxo.html#4582" class="Bound">c</a> <a id="4623" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4625" href="Ledger.Conway.Specification.Utxo.html#4584" class="Bound">d</a><a id="4626" class="Symbol">)</a> <a id="4628" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="4630" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a>
             <a id="4648" class="Symbol">→</a> <a id="4650" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4668" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4671" class="Symbol">(</a><a id="4672" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4677" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="4679" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4681" href="Ledger.Conway.Specification.Certs.html#707" class="InductiveConstructor">DRepDeposit</a> <a id="4693" href="Ledger.Conway.Specification.Utxo.html#4582" class="Bound">c</a> <a id="4695" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="4697" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="4698" class="Symbol">)</a> <a id="4700" href="Ledger.Conway.Specification.Utxo.html#4586" class="Bound">certs</a>
             <a id="4719" class="Symbol">→</a> <a id="4721" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4739" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4742" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4747" class="Symbol">(</a><a id="4748" href="Ledger.Conway.Specification.Certs.html#2399" class="InductiveConstructor">deregdrep</a> <a id="4758" href="Ledger.Conway.Specification.Utxo.html#4582" class="Bound">c</a> <a id="4760" href="Ledger.Conway.Specification.Utxo.html#4584" class="Bound">d</a> <a id="4762" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4764" href="Ledger.Conway.Specification.Utxo.html#4586" class="Bound">certs</a><a id="4769" class="Symbol">)</a>
  <a id="ValidCertDeposits.ccreghot"></a><a id="4773" href="Ledger.Conway.Specification.Utxo.html#4773" class="InductiveConstructor">ccreghot</a>   <a id="4784" class="Symbol">:</a> <a id="4786" class="Symbol">∀</a> <a id="4788" class="Symbol">{</a><a id="4789" href="Ledger.Conway.Specification.Utxo.html#4789" class="Bound">c</a> <a id="4791" href="Ledger.Conway.Specification.Utxo.html#4791" class="Bound">v</a> <a id="4793" href="Ledger.Conway.Specification.Utxo.html#4793" class="Bound">certs</a><a id="4798" class="Symbol">}</a>
             <a id="4813" class="Symbol">→</a> <a id="4815" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4833" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4836" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4841" href="Ledger.Conway.Specification.Utxo.html#4793" class="Bound">certs</a>
             <a id="4860" class="Symbol">→</a> <a id="4862" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4880" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4883" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4888" class="Symbol">(</a><a id="4889" href="Ledger.Conway.Specification.Certs.html#2441" class="InductiveConstructor">ccreghot</a> <a id="4898" href="Ledger.Conway.Specification.Utxo.html#4789" class="Bound">c</a> <a id="4900" href="Ledger.Conway.Specification.Utxo.html#4791" class="Bound">v</a> <a id="4902" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4904" href="Ledger.Conway.Specification.Utxo.html#4793" class="Bound">certs</a><a id="4909" class="Symbol">)</a>
  <a id="ValidCertDeposits.retirepool"></a><a id="4913" href="Ledger.Conway.Specification.Utxo.html#4913" class="InductiveConstructor">retirepool</a> <a id="4924" class="Symbol">:</a> <a id="4926" class="Symbol">∀</a> <a id="4928" class="Symbol">{</a><a id="4929" href="Ledger.Conway.Specification.Utxo.html#4929" class="Bound">kh</a> <a id="4932" href="Ledger.Conway.Specification.Utxo.html#4932" class="Bound">e</a> <a id="4934" href="Ledger.Conway.Specification.Utxo.html#4934" class="Bound">certs</a><a id="4939" class="Symbol">}</a>
             <a id="4954" class="Symbol">→</a> <a id="4956" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="4974" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="4977" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="4982" href="Ledger.Conway.Specification.Utxo.html#4934" class="Bound">certs</a>
             <a id="5001" class="Symbol">→</a> <a id="5003" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="5021" href="Ledger.Conway.Specification.Utxo.html#3477" class="Bound">pp</a> <a id="5024" href="Ledger.Conway.Specification.Utxo.html#3492" class="Bound">deps</a> <a id="5029" class="Symbol">(</a><a id="5030" href="Ledger.Conway.Specification.Certs.html#2308" class="InductiveConstructor">retirepool</a> <a id="5041" href="Ledger.Conway.Specification.Utxo.html#4929" class="Bound">kh</a> <a id="5044" href="Ledger.Conway.Specification.Utxo.html#4932" class="Bound">e</a>  <a id="5047" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5049" href="Ledger.Conway.Specification.Utxo.html#4934" class="Bound">certs</a><a id="5054" class="Symbol">)</a>

<a id="5057" class="Keyword">private</a>
  <a id="validCertDeposits?"></a><a id="5067" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5086" class="Symbol">:</a> <a id="5088" class="Symbol">∀</a> <a id="5090" class="Symbol">{</a><a id="5091" href="Ledger.Conway.Specification.Utxo.html#5091" class="Bound">pp</a><a id="5093" class="Symbol">}</a> <a id="5095" href="Ledger.Conway.Specification.Utxo.html#5095" class="Bound">deps</a> <a id="5100" href="Ledger.Conway.Specification.Utxo.html#5100" class="Bound">certs</a> <a id="5106" class="Symbol">→</a> <a id="5108" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="5112" class="Symbol">(</a><a id="5113" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="5131" href="Ledger.Conway.Specification.Utxo.html#5091" class="Bound">pp</a> <a id="5134" href="Ledger.Conway.Specification.Utxo.html#5095" class="Bound">deps</a> <a id="5139" href="Ledger.Conway.Specification.Utxo.html#5100" class="Bound">certs</a><a id="5144" class="Symbol">)</a>
  <a id="5148" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5167" href="Ledger.Conway.Specification.Utxo.html#5167" class="Bound">deps</a> <a id="5172" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="5175" class="Symbol">=</a> <a id="5177" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5181" href="Ledger.Conway.Specification.Utxo.html#3540" class="InductiveConstructor">[]</a>
  <a id="5186" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5205" href="Ledger.Conway.Specification.Utxo.html#5205" class="Bound">deps</a> <a id="5210" class="Symbol">(</a><a id="5211" href="Ledger.Conway.Specification.Certs.html#2137" class="InductiveConstructor">delegate</a> <a id="5220" class="Symbol">_</a> <a id="5222" class="Symbol">_</a> <a id="5224" class="Symbol">_</a> <a id="5226" class="Symbol">_</a> <a id="5228" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5230" href="Ledger.Conway.Specification.Utxo.html#5230" class="Bound">certs</a><a id="5235" class="Symbol">)</a> <a id="5237" class="Symbol">=</a>
    <a id="5243" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5250" href="Ledger.Conway.Specification.Utxo.html#3584" class="InductiveConstructor">delegate</a> <a id="5259" class="Symbol">(λ</a> <a id="5262" class="Keyword">where</a> <a id="5268" class="Symbol">(</a><a id="5269" href="Ledger.Conway.Specification.Utxo.html#3584" class="InductiveConstructor">delegate</a> <a id="5278" href="Ledger.Conway.Specification.Utxo.html#5278" class="Bound">p</a><a id="5279" class="Symbol">)</a> <a id="5281" class="Symbol">→</a> <a id="5283" href="Ledger.Conway.Specification.Utxo.html#5278" class="Bound">p</a><a id="5284" class="Symbol">)</a> <a id="5286" class="Symbol">(</a><a id="5287" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5306" class="Symbol">_</a> <a id="5308" class="Symbol">_)</a>
  <a id="5313" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5332" href="Ledger.Conway.Specification.Utxo.html#5332" class="Bound">deps</a> <a id="5337" class="Symbol">(</a><a id="5338" href="Ledger.Conway.Specification.Certs.html#2258" class="InductiveConstructor">regpool</a> <a id="5346" class="Symbol">_</a> <a id="5348" class="Symbol">_</a> <a id="5350" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5352" href="Ledger.Conway.Specification.Utxo.html#5352" class="Bound">certs</a><a id="5357" class="Symbol">)</a> <a id="5359" class="Symbol">=</a>
    <a id="5365" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5372" href="Ledger.Conway.Specification.Utxo.html#3771" class="InductiveConstructor">regpool</a> <a id="5380" class="Symbol">(λ</a> <a id="5383" class="Keyword">where</a> <a id="5389" class="Symbol">(</a><a id="5390" href="Ledger.Conway.Specification.Utxo.html#3771" class="InductiveConstructor">regpool</a> <a id="5398" href="Ledger.Conway.Specification.Utxo.html#5398" class="Bound">p</a><a id="5399" class="Symbol">)</a> <a id="5401" class="Symbol">→</a> <a id="5403" href="Ledger.Conway.Specification.Utxo.html#5398" class="Bound">p</a><a id="5404" class="Symbol">)</a> <a id="5406" class="Symbol">(</a><a id="5407" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5426" class="Symbol">_</a> <a id="5428" class="Symbol">_)</a>
  <a id="5433" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5452" href="Ledger.Conway.Specification.Utxo.html#5452" class="Bound">deps</a> <a id="5457" class="Symbol">(</a><a id="5458" href="Ledger.Conway.Specification.Certs.html#2348" class="InductiveConstructor">regdrep</a> <a id="5466" class="Symbol">_</a> <a id="5468" class="Symbol">_</a> <a id="5470" class="Symbol">_</a> <a id="5472" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5474" href="Ledger.Conway.Specification.Utxo.html#5474" class="Bound">certs</a><a id="5479" class="Symbol">)</a> <a id="5481" class="Symbol">=</a>
    <a id="5487" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5494" href="Ledger.Conway.Specification.Utxo.html#3954" class="InductiveConstructor">regdrep</a> <a id="5502" class="Symbol">(λ</a> <a id="5505" class="Keyword">where</a> <a id="5511" class="Symbol">(</a><a id="5512" href="Ledger.Conway.Specification.Utxo.html#3954" class="InductiveConstructor">regdrep</a> <a id="5520" href="Ledger.Conway.Specification.Utxo.html#5520" class="Bound">p</a><a id="5521" class="Symbol">)</a> <a id="5523" class="Symbol">→</a> <a id="5525" href="Ledger.Conway.Specification.Utxo.html#5520" class="Bound">p</a><a id="5526" class="Symbol">)</a> <a id="5528" class="Symbol">(</a><a id="5529" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5548" class="Symbol">_</a> <a id="5550" class="Symbol">_)</a>
  <a id="5555" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5574" href="Ledger.Conway.Specification.Utxo.html#5574" class="Bound">deps</a> <a id="5579" class="Symbol">(</a><a id="5580" href="Ledger.Conway.Specification.Certs.html#2308" class="InductiveConstructor">retirepool</a> <a id="5591" class="Symbol">_</a> <a id="5593" class="Symbol">_</a> <a id="5595" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5597" href="Ledger.Conway.Specification.Utxo.html#5597" class="Bound">certs</a><a id="5602" class="Symbol">)</a> <a id="5604" class="Symbol">=</a>
    <a id="5610" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5617" href="Ledger.Conway.Specification.Utxo.html#4913" class="InductiveConstructor">retirepool</a> <a id="5628" class="Symbol">(λ</a> <a id="5631" class="Keyword">where</a> <a id="5637" class="Symbol">(</a><a id="5638" href="Ledger.Conway.Specification.Utxo.html#4913" class="InductiveConstructor">retirepool</a> <a id="5649" href="Ledger.Conway.Specification.Utxo.html#5649" class="Bound">p</a><a id="5650" class="Symbol">)</a> <a id="5652" class="Symbol">→</a> <a id="5654" href="Ledger.Conway.Specification.Utxo.html#5649" class="Bound">p</a><a id="5655" class="Symbol">)</a> <a id="5657" class="Symbol">(</a><a id="5658" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5677" class="Symbol">_</a> <a id="5679" class="Symbol">_)</a>
  <a id="5684" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5703" href="Ledger.Conway.Specification.Utxo.html#5703" class="Bound">deps</a> <a id="5708" class="Symbol">(</a><a id="5709" href="Ledger.Conway.Specification.Certs.html#2441" class="InductiveConstructor">ccreghot</a> <a id="5718" class="Symbol">_</a> <a id="5720" class="Symbol">_</a> <a id="5722" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5724" href="Ledger.Conway.Specification.Utxo.html#5724" class="Bound">certs</a><a id="5729" class="Symbol">)</a> <a id="5731" class="Symbol">=</a>
    <a id="5737" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5744" href="Ledger.Conway.Specification.Utxo.html#4773" class="InductiveConstructor">ccreghot</a> <a id="5753" class="Symbol">(λ</a> <a id="5756" class="Keyword">where</a> <a id="5762" class="Symbol">(</a><a id="5763" href="Ledger.Conway.Specification.Utxo.html#4773" class="InductiveConstructor">ccreghot</a> <a id="5772" href="Ledger.Conway.Specification.Utxo.html#5772" class="Bound">p</a><a id="5773" class="Symbol">)</a> <a id="5775" class="Symbol">→</a> <a id="5777" href="Ledger.Conway.Specification.Utxo.html#5772" class="Bound">p</a><a id="5778" class="Symbol">)</a> <a id="5780" class="Symbol">(</a><a id="5781" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5800" class="Symbol">_</a> <a id="5802" class="Symbol">_)</a>
  <a id="5807" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5826" href="Ledger.Conway.Specification.Utxo.html#5826" class="Bound">deps</a> <a id="5831" class="Symbol">(</a><a id="5832" href="Ledger.Conway.Specification.Certs.html#2829" class="InductiveConstructor">reg</a> <a id="5836" class="Symbol">_</a> <a id="5838" class="Symbol">_</a> <a id="5840" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5842" href="Ledger.Conway.Specification.Utxo.html#5842" class="Bound">certs</a><a id="5847" class="Symbol">)</a> <a id="5849" class="Symbol">=</a>
    <a id="5855" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5862" href="Ledger.Conway.Specification.Utxo.html#4124" class="InductiveConstructor">reg</a> <a id="5866" class="Symbol">(λ</a> <a id="5869" class="Keyword">where</a> <a id="5875" class="Symbol">(</a><a id="5876" href="Ledger.Conway.Specification.Utxo.html#4124" class="InductiveConstructor">reg</a> <a id="5880" href="Ledger.Conway.Specification.Utxo.html#5880" class="Bound">p</a><a id="5881" class="Symbol">)</a> <a id="5883" class="Symbol">→</a> <a id="5885" href="Ledger.Conway.Specification.Utxo.html#5880" class="Bound">p</a><a id="5886" class="Symbol">)</a> <a id="5888" class="Symbol">(</a><a id="5889" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5908" class="Symbol">_</a> <a id="5910" class="Symbol">_)</a>
  <a id="5915" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="5934" href="Ledger.Conway.Specification.Utxo.html#5934" class="Bound">deps</a> <a id="5939" class="Symbol">(</a><a id="5940" href="Ledger.Conway.Specification.Certs.html#2210" class="InductiveConstructor">dereg</a> <a id="5946" href="Ledger.Conway.Specification.Utxo.html#5946" class="Bound">c</a> <a id="5948" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5956" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5958" href="Ledger.Conway.Specification.Utxo.html#5958" class="Bound">certs</a><a id="5963" class="Symbol">)</a> <a id="5965" class="Keyword">with</a> <a id="5970" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="5972" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="5990" href="Ledger.Conway.Specification.Utxo.html#5946" class="Bound">c</a> <a id="5992" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5994" href="Class.IsSet.html#916" class="Function">dom</a> <a id="5998" href="Ledger.Conway.Specification.Utxo.html#5934" class="Bound">deps</a> <a id="6003" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="6007" class="Symbol">...</a> <a id="6011" class="Symbol">|</a> <a id="6013" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6017" href="Ledger.Conway.Specification.Utxo.html#6017" class="Bound">p</a> <a id="6019" class="Symbol">=</a> <a id="6021" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6028" class="Symbol">(</a><a id="6029" href="Ledger.Conway.Specification.Utxo.html#4305" class="InductiveConstructor">dereg</a> <a id="6035" class="Symbol">(</a><a id="6036" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="6042" class="Symbol">(</a><a id="6043" href="Function.Bundles.html#4832" class="Field">Equivalence.from</a> <a id="6060" href="Axiom.Set.Rel.html#2687" class="Function">dom∈</a> <a id="6065" href="Ledger.Conway.Specification.Utxo.html#6017" class="Bound">p</a><a id="6066" class="Symbol">))</a> <a id="6069" class="Symbol">(</a><a id="6070" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="6075" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="6079" class="Symbol">))</a> <a id="6082" class="Symbol">(λ</a> <a id="6085" class="Symbol">{</a> <a id="6087" class="Symbol">(</a><a id="6088" href="Ledger.Conway.Specification.Utxo.html#4305" class="InductiveConstructor">dereg</a> <a id="6094" class="Symbol">_</a> <a id="6096" class="Symbol">_</a> <a id="6098" href="Ledger.Conway.Specification.Utxo.html#6098" class="Bound">p</a><a id="6099" class="Symbol">)</a> <a id="6101" class="Symbol">→</a> <a id="6103" href="Ledger.Conway.Specification.Utxo.html#6098" class="Bound">p</a> <a id="6105" class="Symbol">})</a> <a id="6108" class="Symbol">(</a><a id="6109" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="6128" class="Symbol">_</a> <a id="6130" class="Symbol">_)</a>
  <a id="6135" class="Symbol">...</a> <a id="6139" class="Symbol">|</a> <a id="6141" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6144" href="Ledger.Conway.Specification.Utxo.html#6144" class="Bound">¬p</a> <a id="6147" class="Symbol">=</a> <a id="6149" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6152" class="Symbol">λ</a> <a id="6154" class="Symbol">{</a> <a id="6156" class="Symbol">(</a><a id="6157" href="Ledger.Conway.Specification.Utxo.html#4305" class="InductiveConstructor">dereg</a> <a id="6163" href="Ledger.Conway.Specification.Utxo.html#6163" class="Bound">x</a> <a id="6165" class="Symbol">_</a> <a id="6167" class="Symbol">_)</a> <a id="6170" class="Symbol">→</a> <a id="6172" href="Ledger.Conway.Specification.Utxo.html#6144" class="Bound">¬p</a> <a id="6175" class="Symbol">(</a><a id="6176" href="Function.Bundles.html#4808" class="Field">Equivalence.to</a> <a id="6191" href="Axiom.Set.Rel.html#2687" class="Function">dom∈</a> <a id="6196" class="Symbol">(_</a> <a id="6199" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6201" href="Ledger.Conway.Specification.Utxo.html#6163" class="Bound">x</a><a id="6202" class="Symbol">))</a> <a id="6205" class="Symbol">}</a>
  <a id="6209" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="6228" href="Ledger.Conway.Specification.Utxo.html#6228" class="Bound">deps</a> <a id="6233" class="Symbol">(</a><a id="6234" href="Ledger.Conway.Specification.Certs.html#2210" class="InductiveConstructor">dereg</a> <a id="6240" href="Ledger.Conway.Specification.Utxo.html#6240" class="Bound">c</a> <a id="6242" class="Symbol">(</a><a id="6243" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6248" href="Ledger.Conway.Specification.Utxo.html#6248" class="Bound">d</a><a id="6249" class="Symbol">)</a> <a id="6251" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6253" href="Ledger.Conway.Specification.Utxo.html#6253" class="Bound">certs</a><a id="6258" class="Symbol">)</a> <a id="6260" class="Keyword">with</a> <a id="6265" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="6267" class="Symbol">(</a><a id="6268" href="Ledger.Conway.Specification.Certs.html#601" class="InductiveConstructor">CredentialDeposit</a> <a id="6286" href="Ledger.Conway.Specification.Utxo.html#6240" class="Bound">c</a> <a id="6288" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6290" href="Ledger.Conway.Specification.Utxo.html#6248" class="Bound">d</a><a id="6291" class="Symbol">)</a> <a id="6293" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="6295" href="Ledger.Conway.Specification.Utxo.html#6228" class="Bound">deps</a> <a id="6300" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="6304" class="Symbol">...</a> <a id="6308" class="Symbol">|</a> <a id="6310" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6314" href="Ledger.Conway.Specification.Utxo.html#6314" class="Bound">p</a> <a id="6316" class="Symbol">=</a> <a id="6318" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6325" class="Symbol">(</a><a id="6326" href="Ledger.Conway.Specification.Utxo.html#4305" class="InductiveConstructor">dereg</a> <a id="6332" href="Ledger.Conway.Specification.Utxo.html#6314" class="Bound">p</a> <a id="6334" class="Symbol">(</a><a id="6335" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6340" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="6344" class="Symbol">))</a> <a id="6347" class="Symbol">(λ</a> <a id="6350" class="Symbol">{</a> <a id="6352" class="Symbol">(</a><a id="6353" href="Ledger.Conway.Specification.Utxo.html#4305" class="InductiveConstructor">dereg</a> <a id="6359" class="Symbol">_</a> <a id="6361" class="Symbol">_</a> <a id="6363" href="Ledger.Conway.Specification.Utxo.html#6363" class="Bound">p</a><a id="6364" class="Symbol">)</a> <a id="6366" class="Symbol">→</a> <a id="6368" href="Ledger.Conway.Specification.Utxo.html#6363" class="Bound">p</a> <a id="6370" class="Symbol">})</a> <a id="6373" class="Symbol">(</a><a id="6374" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="6393" class="Symbol">_</a> <a id="6395" class="Symbol">_)</a>
  <a id="6400" class="Symbol">...</a> <a id="6404" class="Symbol">|</a> <a id="6406" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6409" href="Ledger.Conway.Specification.Utxo.html#6409" class="Bound">¬p</a> <a id="6412" class="Symbol">=</a> <a id="6414" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6417" class="Symbol">λ</a> <a id="6419" class="Symbol">{</a> <a id="6421" class="Symbol">(</a><a id="6422" href="Ledger.Conway.Specification.Utxo.html#4305" class="InductiveConstructor">dereg</a> <a id="6428" href="Ledger.Conway.Specification.Utxo.html#6428" class="Bound">x</a> <a id="6430" class="Symbol">(</a><a id="6431" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6436" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="6440" class="Symbol">)</a> <a id="6442" class="Symbol">_)</a> <a id="6445" class="Symbol">→</a> <a id="6447" href="Ledger.Conway.Specification.Utxo.html#6409" class="Bound">¬p</a> <a id="6450" href="Ledger.Conway.Specification.Utxo.html#6428" class="Bound">x</a> <a id="6452" class="Symbol">}</a>
  <a id="6456" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="6475" href="Ledger.Conway.Specification.Utxo.html#6475" class="Bound">deps</a> <a id="6480" class="Symbol">(</a><a id="6481" href="Ledger.Conway.Specification.Certs.html#2399" class="InductiveConstructor">deregdrep</a> <a id="6491" href="Ledger.Conway.Specification.Utxo.html#6491" class="Bound">c</a> <a id="6493" href="Ledger.Conway.Specification.Utxo.html#6493" class="Bound">d</a> <a id="6495" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6497" href="Ledger.Conway.Specification.Utxo.html#6497" class="Bound">certs</a><a id="6502" class="Symbol">)</a> <a id="6504" class="Keyword">with</a> <a id="6509" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="6511" class="Symbol">(</a><a id="6512" href="Ledger.Conway.Specification.Certs.html#707" class="InductiveConstructor">DRepDeposit</a> <a id="6524" href="Ledger.Conway.Specification.Utxo.html#6491" class="Bound">c</a> <a id="6526" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6528" href="Ledger.Conway.Specification.Utxo.html#6493" class="Bound">d</a><a id="6529" class="Symbol">)</a> <a id="6531" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="6533" href="Ledger.Conway.Specification.Utxo.html#6475" class="Bound">deps</a> <a id="6538" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="6542" class="Symbol">...</a> <a id="6546" class="Symbol">|</a> <a id="6548" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6552" href="Ledger.Conway.Specification.Utxo.html#6552" class="Bound">p</a> <a id="6554" class="Symbol">=</a> <a id="6556" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6563" class="Symbol">(</a><a id="6564" href="Ledger.Conway.Specification.Utxo.html#4566" class="InductiveConstructor">deregdrep</a> <a id="6574" href="Ledger.Conway.Specification.Utxo.html#6552" class="Bound">p</a><a id="6575" class="Symbol">)</a>  <a id="6578" class="Symbol">(λ</a> <a id="6581" class="Keyword">where</a> <a id="6587" class="Symbol">(</a><a id="6588" href="Ledger.Conway.Specification.Utxo.html#4566" class="InductiveConstructor">deregdrep</a> <a id="6598" class="Symbol">_</a> <a id="6600" href="Ledger.Conway.Specification.Utxo.html#6600" class="Bound">v</a><a id="6601" class="Symbol">)</a> <a id="6603" class="Symbol">→</a> <a id="6605" href="Ledger.Conway.Specification.Utxo.html#6600" class="Bound">v</a><a id="6606" class="Symbol">)</a> <a id="6608" class="Symbol">(</a><a id="6609" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="6628" class="Symbol">_</a> <a id="6630" class="Symbol">_)</a>
  <a id="6635" class="Symbol">...</a> <a id="6639" class="Symbol">|</a> <a id="6641" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6644" href="Ledger.Conway.Specification.Utxo.html#6644" class="Bound">¬p</a> <a id="6647" class="Symbol">=</a> <a id="6649" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6652" class="Symbol">(λ</a> <a id="6655" class="Keyword">where</a> <a id="6661" class="Symbol">(</a><a id="6662" href="Ledger.Conway.Specification.Utxo.html#4566" class="InductiveConstructor">deregdrep</a> <a id="6672" href="Ledger.Conway.Specification.Utxo.html#6672" class="Bound">p</a> <a id="6674" class="Symbol">_)</a> <a id="6677" class="Symbol">→</a> <a id="6679" href="Ledger.Conway.Specification.Utxo.html#6644" class="Bound">¬p</a> <a id="6682" href="Ledger.Conway.Specification.Utxo.html#6672" class="Bound">p</a><a id="6683" class="Symbol">)</a>

<a id="6686" class="Keyword">instance</a>
  <a id="Dec-ValidCertDeposits"></a><a id="6697" href="Ledger.Conway.Specification.Utxo.html#6697" class="Function">Dec-ValidCertDeposits</a> <a id="6719" class="Symbol">:</a> <a id="6721" class="Symbol">∀</a> <a id="6723" class="Symbol">{</a><a id="6724" href="Ledger.Conway.Specification.Utxo.html#6724" class="Bound">pp</a> <a id="6727" href="Ledger.Conway.Specification.Utxo.html#6727" class="Bound">deps</a> <a id="6732" href="Ledger.Conway.Specification.Utxo.html#6732" class="Bound">certs</a><a id="6737" class="Symbol">}</a> <a id="6739" class="Symbol">→</a> <a id="6741" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="6759" href="Ledger.Conway.Specification.Utxo.html#6724" class="Bound">pp</a> <a id="6762" href="Ledger.Conway.Specification.Utxo.html#6727" class="Bound">deps</a> <a id="6767" href="Ledger.Conway.Specification.Utxo.html#6732" class="Bound">certs</a> <a id="6773" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
  <a id="6777" href="Ledger.Conway.Specification.Utxo.html#6697" class="Function">Dec-ValidCertDeposits</a> <a id="6799" class="Symbol">=</a> <a id="6801" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="6803" class="Symbol">(</a><a id="6804" href="Ledger.Conway.Specification.Utxo.html#5067" class="Function">validCertDeposits?</a> <a id="6823" class="Symbol">_</a> <a id="6825" class="Symbol">_)</a>


<a id="updateCertDeposits"></a><a id="6830" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a>  <a id="6850" class="Symbol">:</a> <a id="6852" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="6860" class="Symbol">→</a> <a id="6862" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6867" href="Ledger.Conway.Specification.Certs.html#2116" class="Datatype">DCert</a> <a id="6873" class="Symbol">→</a> <a id="6875" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a> <a id="6884" class="Symbol">→</a> <a id="6886" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a>
<a id="6895" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="6914" href="Ledger.Conway.Specification.Utxo.html#6914" class="Bound">pp</a> <a id="6917" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="6920" href="Ledger.Conway.Specification.Utxo.html#6920" class="Bound">deposits</a> <a id="6929" class="Symbol">=</a> <a id="6931" href="Ledger.Conway.Specification.Utxo.html#6920" class="Bound">deposits</a>


<a id="6942" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="6961" href="Ledger.Conway.Specification.Utxo.html#6961" class="Bound">pp</a> <a id="6964" class="Symbol">(</a><a id="6965" href="Ledger.Conway.Specification.Certs.html#2829" class="InductiveConstructor">reg</a> <a id="6969" href="Ledger.Conway.Specification.Utxo.html#6969" class="Bound">c</a> <a id="6971" href="Ledger.Conway.Specification.Utxo.html#6971" class="Bound">v</a> <a id="6973" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6975" href="Ledger.Conway.Specification.Utxo.html#6975" class="Bound">certs</a><a id="6980" class="Symbol">)</a> <a id="6982" href="Ledger.Conway.Specification.Utxo.html#6982" class="Bound">deposits</a>
  <a id="6993" class="Symbol">=</a> <a id="6995" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7014" href="Ledger.Conway.Specification.Utxo.html#6961" class="Bound">pp</a> <a id="7017" href="Ledger.Conway.Specification.Utxo.html#6975" class="Bound">certs</a> <a id="7023" class="Symbol">(</a><a id="7024" href="Ledger.Conway.Specification.Utxo.html#6982" class="Bound">deposits</a> <a id="7033" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="7036" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="7048" class="Symbol">(</a><a id="7049" href="Ledger.Conway.Specification.Certs.html#2829" class="InductiveConstructor">reg</a> <a id="7053" href="Ledger.Conway.Specification.Utxo.html#6969" class="Bound">c</a> <a id="7055" href="Ledger.Conway.Specification.Utxo.html#6971" class="Bound">v</a><a id="7056" class="Symbol">)</a> <a id="7058" href="Ledger.Conway.Specification.Utxo.html#6961" class="Bound">pp</a><a id="7060" class="Symbol">)</a>


<a id="7064" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7083" href="Ledger.Conway.Specification.Utxo.html#7083" class="Bound">pp</a> <a id="7086" class="Symbol">(</a><a id="7087" href="Ledger.Conway.Specification.Certs.html#2137" class="InductiveConstructor">delegate</a> <a id="7096" href="Ledger.Conway.Specification.Utxo.html#7096" class="Bound">c</a> <a id="7098" href="Ledger.Conway.Specification.Utxo.html#7098" class="Bound">vd</a> <a id="7101" href="Ledger.Conway.Specification.Utxo.html#7101" class="Bound">khs</a> <a id="7105" href="Ledger.Conway.Specification.Utxo.html#7105" class="Bound">v</a> <a id="7107" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7109" href="Ledger.Conway.Specification.Utxo.html#7109" class="Bound">certs</a><a id="7114" class="Symbol">)</a> <a id="7116" href="Ledger.Conway.Specification.Utxo.html#7116" class="Bound">deposits</a>
  <a id="7127" class="Symbol">=</a> <a id="7129" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7148" href="Ledger.Conway.Specification.Utxo.html#7083" class="Bound">pp</a> <a id="7151" href="Ledger.Conway.Specification.Utxo.html#7109" class="Bound">certs</a> <a id="7157" class="Symbol">(</a><a id="7158" href="Ledger.Conway.Specification.Utxo.html#7116" class="Bound">deposits</a> <a id="7167" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="7170" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="7182" class="Symbol">(</a><a id="7183" href="Ledger.Conway.Specification.Certs.html#2137" class="InductiveConstructor">delegate</a> <a id="7192" href="Ledger.Conway.Specification.Utxo.html#7096" class="Bound">c</a> <a id="7194" href="Ledger.Conway.Specification.Utxo.html#7098" class="Bound">vd</a> <a id="7197" href="Ledger.Conway.Specification.Utxo.html#7101" class="Bound">khs</a> <a id="7201" href="Ledger.Conway.Specification.Utxo.html#7105" class="Bound">v</a><a id="7202" class="Symbol">)</a> <a id="7204" href="Ledger.Conway.Specification.Utxo.html#7083" class="Bound">pp</a><a id="7206" class="Symbol">)</a>
<a id="7208" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7227" href="Ledger.Conway.Specification.Utxo.html#7227" class="Bound">pp</a> <a id="7230" class="Symbol">(</a><a id="7231" href="Ledger.Conway.Specification.Certs.html#2258" class="InductiveConstructor">regpool</a> <a id="7239" href="Ledger.Conway.Specification.Utxo.html#7239" class="Bound">kh</a> <a id="7242" href="Ledger.Conway.Specification.Utxo.html#7242" class="Bound">p</a> <a id="7244" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7246" href="Ledger.Conway.Specification.Utxo.html#7246" class="Bound">certs</a><a id="7251" class="Symbol">)</a> <a id="7253" href="Ledger.Conway.Specification.Utxo.html#7253" class="Bound">deposits</a>
  <a id="7264" class="Comment">-- pool deposits are not added a second time if they are already present</a>
  <a id="7339" class="Comment">-- (reregistrations or duplicate certificates).</a>
  <a id="7389" class="Symbol">=</a> <a id="7391" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7410" href="Ledger.Conway.Specification.Utxo.html#7227" class="Bound">pp</a> <a id="7413" href="Ledger.Conway.Specification.Utxo.html#7246" class="Bound">certs</a> <a id="7419" class="Symbol">(</a><a id="7420" href="Ledger.Conway.Specification.Utxo.html#7253" class="Bound">deposits</a> <a id="7429" href="Axiom.Set.Map.html#7640" class="Function Operator">∪ˡ</a> <a id="7432" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="7444" class="Symbol">(</a><a id="7445" href="Ledger.Conway.Specification.Certs.html#2258" class="InductiveConstructor">regpool</a> <a id="7453" href="Ledger.Conway.Specification.Utxo.html#7239" class="Bound">kh</a> <a id="7456" href="Ledger.Conway.Specification.Utxo.html#7242" class="Bound">p</a><a id="7457" class="Symbol">)</a> <a id="7459" href="Ledger.Conway.Specification.Utxo.html#7227" class="Bound">pp</a><a id="7461" class="Symbol">)</a>
<a id="7463" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7482" href="Ledger.Conway.Specification.Utxo.html#7482" class="Bound">pp</a> <a id="7485" class="Symbol">(</a><a id="7486" href="Ledger.Conway.Specification.Certs.html#2348" class="InductiveConstructor">regdrep</a> <a id="7494" href="Ledger.Conway.Specification.Utxo.html#7494" class="Bound">c</a> <a id="7496" href="Ledger.Conway.Specification.Utxo.html#7496" class="Bound">v</a> <a id="7498" href="Ledger.Conway.Specification.Utxo.html#7498" class="Bound">a</a> <a id="7500" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7502" href="Ledger.Conway.Specification.Utxo.html#7502" class="Bound">certs</a><a id="7507" class="Symbol">)</a> <a id="7509" href="Ledger.Conway.Specification.Utxo.html#7509" class="Bound">deposits</a>
  <a id="7520" class="Symbol">=</a> <a id="7522" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7541" href="Ledger.Conway.Specification.Utxo.html#7482" class="Bound">pp</a> <a id="7544" href="Ledger.Conway.Specification.Utxo.html#7502" class="Bound">certs</a> <a id="7550" class="Symbol">(</a><a id="7551" href="Ledger.Conway.Specification.Utxo.html#7509" class="Bound">deposits</a> <a id="7560" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="7563" href="Ledger.Conway.Specification.Utxo.html#2922" class="Function">certDeposit</a> <a id="7575" class="Symbol">(</a><a id="7576" href="Ledger.Conway.Specification.Certs.html#2348" class="InductiveConstructor">regdrep</a> <a id="7584" href="Ledger.Conway.Specification.Utxo.html#7494" class="Bound">c</a> <a id="7586" href="Ledger.Conway.Specification.Utxo.html#7496" class="Bound">v</a> <a id="7588" href="Ledger.Conway.Specification.Utxo.html#7498" class="Bound">a</a><a id="7589" class="Symbol">)</a> <a id="7591" href="Ledger.Conway.Specification.Utxo.html#7482" class="Bound">pp</a><a id="7593" class="Symbol">)</a>
<a id="7595" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7614" href="Ledger.Conway.Specification.Utxo.html#7614" class="Bound">pp</a> <a id="7617" class="Symbol">(</a><a id="7618" href="Ledger.Conway.Specification.Certs.html#2210" class="InductiveConstructor">dereg</a> <a id="7624" href="Ledger.Conway.Specification.Utxo.html#7624" class="Bound">c</a> <a id="7626" href="Ledger.Conway.Specification.Utxo.html#7626" class="Bound">v</a> <a id="7628" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7630" href="Ledger.Conway.Specification.Utxo.html#7630" class="Bound">certs</a><a id="7635" class="Symbol">)</a> <a id="7637" href="Ledger.Conway.Specification.Utxo.html#7637" class="Bound">deposits</a>
  <a id="7648" class="Symbol">=</a> <a id="7650" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7669" href="Ledger.Conway.Specification.Utxo.html#7614" class="Bound">pp</a> <a id="7672" href="Ledger.Conway.Specification.Utxo.html#7630" class="Bound">certs</a> <a id="7678" class="Symbol">(</a><a id="7679" href="Ledger.Conway.Specification.Utxo.html#7637" class="Bound">deposits</a> <a id="7688" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="7690" href="Ledger.Conway.Specification.Utxo.html#3279" class="Function">certRefund</a> <a id="7701" class="Symbol">(</a><a id="7702" href="Ledger.Conway.Specification.Certs.html#2210" class="InductiveConstructor">dereg</a> <a id="7708" href="Ledger.Conway.Specification.Utxo.html#7624" class="Bound">c</a> <a id="7710" href="Ledger.Conway.Specification.Utxo.html#7626" class="Bound">v</a><a id="7711" class="Symbol">)</a><a id="7712" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="7713" class="Symbol">)</a>
<a id="7715" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7734" href="Ledger.Conway.Specification.Utxo.html#7734" class="Bound">pp</a> <a id="7737" class="Symbol">(</a><a id="7738" href="Ledger.Conway.Specification.Certs.html#2399" class="InductiveConstructor">deregdrep</a> <a id="7748" href="Ledger.Conway.Specification.Utxo.html#7748" class="Bound">c</a> <a id="7750" href="Ledger.Conway.Specification.Utxo.html#7750" class="Bound">v</a> <a id="7752" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7754" href="Ledger.Conway.Specification.Utxo.html#7754" class="Bound">certs</a><a id="7759" class="Symbol">)</a> <a id="7761" href="Ledger.Conway.Specification.Utxo.html#7761" class="Bound">deposits</a>
  <a id="7772" class="Symbol">=</a> <a id="7774" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7793" href="Ledger.Conway.Specification.Utxo.html#7734" class="Bound">pp</a> <a id="7796" href="Ledger.Conway.Specification.Utxo.html#7754" class="Bound">certs</a> <a id="7802" class="Symbol">(</a><a id="7803" href="Ledger.Conway.Specification.Utxo.html#7761" class="Bound">deposits</a> <a id="7812" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="7814" href="Ledger.Conway.Specification.Utxo.html#3279" class="Function">certRefund</a> <a id="7825" class="Symbol">(</a><a id="7826" href="Ledger.Conway.Specification.Certs.html#2399" class="InductiveConstructor">deregdrep</a> <a id="7836" href="Ledger.Conway.Specification.Utxo.html#7748" class="Bound">c</a> <a id="7838" href="Ledger.Conway.Specification.Utxo.html#7750" class="Bound">v</a><a id="7839" class="Symbol">)</a><a id="7840" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="7841" class="Symbol">)</a>
<a id="7843" href="Ledger.Conway.Specification.Utxo.html#6830" class="CatchallClause Function">updateCertDeposits</a><a id="7861" class="CatchallClause"> </a><a id="7862" href="Ledger.Conway.Specification.Utxo.html#7862" class="CatchallClause Bound">pp</a><a id="7864" class="CatchallClause"> </a><a id="7865" class="CatchallClause Symbol">(_</a><a id="7867" class="CatchallClause"> </a><a id="7868" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="7869" class="CatchallClause"> </a><a id="7870" href="Ledger.Conway.Specification.Utxo.html#7870" class="CatchallClause Bound">certs</a><a id="7875" class="CatchallClause Symbol">)</a><a id="7876" class="CatchallClause"> </a><a id="7877" href="Ledger.Conway.Specification.Utxo.html#7877" class="CatchallClause Bound">deposits</a>
  <a id="7888" class="Symbol">=</a> <a id="7890" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="7909" href="Ledger.Conway.Specification.Utxo.html#7862" class="Bound">pp</a> <a id="7912" href="Ledger.Conway.Specification.Utxo.html#7870" class="Bound">certs</a> <a id="7918" href="Ledger.Conway.Specification.Utxo.html#7877" class="Bound">deposits</a>

<a id="updateProposalDeposits"></a><a id="7928" href="Ledger.Conway.Specification.Utxo.html#7928" class="Function">updateProposalDeposits</a> <a id="7951" class="Symbol">:</a> <a id="7953" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="7958" href="Ledger.Conway.Specification.Gov.Actions.html#3603" class="Record">GovProposal</a> <a id="7970" class="Symbol">→</a> <a id="7972" href="Ledger.Conway.Specification.Transaction.html#1051" class="Field">TxId</a> <a id="7977" class="Symbol">→</a> <a id="7979" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a> <a id="7984" class="Symbol">→</a> <a id="7986" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a> <a id="7995" class="Symbol">→</a> <a id="7997" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a>
<a id="8006" href="Ledger.Conway.Specification.Utxo.html#7928" class="Function">updateProposalDeposits</a> <a id="8029" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="8039" class="Symbol">_</a>     <a id="8045" class="Symbol">_</a>      <a id="8052" href="Ledger.Conway.Specification.Utxo.html#8052" class="Bound">deposits</a>  <a id="8062" class="Symbol">=</a> <a id="8064" href="Ledger.Conway.Specification.Utxo.html#8052" class="Bound">deposits</a>
<a id="8073" href="Ledger.Conway.Specification.Utxo.html#7928" class="Function">updateProposalDeposits</a> <a id="8096" class="Symbol">(_</a> <a id="8099" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8101" href="Ledger.Conway.Specification.Utxo.html#8101" class="Bound">ps</a><a id="8103" class="Symbol">)</a>  <a id="8106" href="Ledger.Conway.Specification.Utxo.html#8106" class="Bound">txid</a>  <a id="8112" href="Ledger.Conway.Specification.Utxo.html#8112" class="Bound">gaDep</a>  <a id="8119" href="Ledger.Conway.Specification.Utxo.html#8119" class="Bound">deposits</a>  <a id="8129" class="Symbol">=</a>
  <a id="8133" href="Ledger.Conway.Specification.Utxo.html#7928" class="Function">updateProposalDeposits</a> <a id="8156" href="Ledger.Conway.Specification.Utxo.html#8101" class="Bound">ps</a> <a id="8159" href="Ledger.Conway.Specification.Utxo.html#8106" class="Bound">txid</a> <a id="8164" href="Ledger.Conway.Specification.Utxo.html#8112" class="Bound">gaDep</a> <a id="8170" href="Ledger.Conway.Specification.Utxo.html#8119" class="Bound">deposits</a>
  <a id="8181" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="8184" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="8186" href="Ledger.Conway.Specification.Certs.html#760" class="InductiveConstructor">GovActionDeposit</a> <a id="8203" class="Symbol">(</a><a id="8204" href="Ledger.Conway.Specification.Utxo.html#8106" class="Bound">txid</a> <a id="8209" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8211" href="Data.List.Base.html#4746" class="Function">length</a> <a id="8218" href="Ledger.Conway.Specification.Utxo.html#8101" class="Bound">ps</a><a id="8220" class="Symbol">)</a> <a id="8222" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8224" href="Ledger.Conway.Specification.Utxo.html#8112" class="Bound">gaDep</a> <a id="8230" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>

<a id="updateDeposits"></a><a id="8233" href="Ledger.Conway.Specification.Utxo.html#8233" class="Function">updateDeposits</a> <a id="8248" class="Symbol">:</a> <a id="8250" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="8258" class="Symbol">→</a> <a id="8260" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="8267" class="Symbol">→</a> <a id="8269" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a> <a id="8278" class="Symbol">→</a> <a id="8280" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a>
<a id="8289" href="Ledger.Conway.Specification.Utxo.html#8233" class="Function">updateDeposits</a> <a id="8304" href="Ledger.Conway.Specification.Utxo.html#8304" class="Bound">pp</a> <a id="8307" href="Ledger.Conway.Specification.Utxo.html#8307" class="Bound">txb</a> <a id="8311" class="Symbol">=</a> <a id="8313" href="Ledger.Conway.Specification.Utxo.html#6830" class="Function">updateCertDeposits</a> <a id="8332" href="Ledger.Conway.Specification.Utxo.html#8304" class="Bound">pp</a> <a id="8335" href="Ledger.Conway.Specification.Transaction.html#3214" class="Field">txCerts</a>
                        <a id="8367" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8369" href="Ledger.Conway.Specification.Utxo.html#7928" class="Function">updateProposalDeposits</a> <a id="8392" href="Ledger.Conway.Specification.Transaction.html#3505" class="Field">txGovProposals</a> <a id="8407" href="Ledger.Conway.Specification.Transaction.html#3180" class="Field">txId</a> <a id="8412" class="Symbol">(</a><a id="8413" href="Ledger.Conway.Specification.Utxo.html#8304" class="Bound">pp</a> <a id="8416" class="Symbol">.</a><a id="8417" href="Ledger.Conway.Specification.PParams.html#3423" class="Field">govActionDeposit</a><a id="8433" class="Symbol">)</a>


  <a id="8439" class="Keyword">where</a> <a id="8445" class="Keyword">open</a> <a id="8450" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a> <a id="8457" href="Ledger.Conway.Specification.Utxo.html#8307" class="Bound">txb</a>

<a id="proposalDepositsΔ"></a><a id="8462" href="Ledger.Conway.Specification.Utxo.html#8462" class="Function">proposalDepositsΔ</a> <a id="8480" class="Symbol">:</a> <a id="8482" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8487" href="Ledger.Conway.Specification.Gov.Actions.html#3603" class="Record">GovProposal</a> <a id="8499" class="Symbol">→</a> <a id="8501" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="8509" class="Symbol">→</a> <a id="8511" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="8518" class="Symbol">→</a> <a id="8520" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a>
<a id="8529" href="Ledger.Conway.Specification.Utxo.html#8462" class="Function">proposalDepositsΔ</a> <a id="8547" href="Ledger.Conway.Specification.Utxo.html#8547" class="Bound">props</a> <a id="8553" href="Ledger.Conway.Specification.Utxo.html#8553" class="Bound">pp</a> <a id="8556" href="Ledger.Conway.Specification.Utxo.html#8556" class="Bound">txb</a> <a id="8560" class="Symbol">=</a> <a id="8562" href="Ledger.Conway.Specification.Utxo.html#7928" class="Function">updateProposalDeposits</a> <a id="8585" href="Ledger.Conway.Specification.Utxo.html#8547" class="Bound">props</a> <a id="8591" href="Ledger.Conway.Specification.Transaction.html#3180" class="Field">txId</a> <a id="8596" class="Symbol">(</a><a id="8597" href="Ledger.Conway.Specification.Utxo.html#8553" class="Bound">pp</a> <a id="8600" class="Symbol">.</a><a id="8601" href="Ledger.Conway.Specification.PParams.html#3423" class="Field">govActionDeposit</a><a id="8617" class="Symbol">)</a> <a id="8619" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="8623" class="Keyword">where</a> <a id="8629" class="Keyword">open</a> <a id="8634" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a> <a id="8641" href="Ledger.Conway.Specification.Utxo.html#8556" class="Bound">txb</a>


<a id="depositsChange"></a><a id="8647" href="Ledger.Conway.Specification.Utxo.html#8647" class="Function">depositsChange</a> <a id="8662" class="Symbol">:</a> <a id="8664" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="8672" class="Symbol">→</a> <a id="8674" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="8681" class="Symbol">→</a> <a id="8683" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a> <a id="8692" class="Symbol">→</a> <a id="8694" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
<a id="8696" href="Ledger.Conway.Specification.Utxo.html#8647" class="Function">depositsChange</a> <a id="8711" href="Ledger.Conway.Specification.Utxo.html#8711" class="Bound">pp</a> <a id="8714" href="Ledger.Conway.Specification.Utxo.html#8714" class="Bound">txb</a> <a id="8718" href="Ledger.Conway.Specification.Utxo.html#8718" class="Bound">deposits</a> <a id="8727" class="Symbol">=</a>
  <a id="8731" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="8739" class="Symbol">(</a><a id="8740" href="Ledger.Conway.Specification.Utxo.html#8233" class="Function">updateDeposits</a> <a id="8755" href="Ledger.Conway.Specification.Utxo.html#8711" class="Bound">pp</a> <a id="8758" href="Ledger.Conway.Specification.Utxo.html#8714" class="Bound">txb</a> <a id="8762" href="Ledger.Conway.Specification.Utxo.html#8718" class="Bound">deposits</a><a id="8770" class="Symbol">)</a> <a id="8772" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="8774" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="8782" href="Ledger.Conway.Specification.Utxo.html#8718" class="Bound">deposits</a>

<a id="8792" class="Keyword">data</a> <a id="inInterval"></a><a id="8797" href="Ledger.Conway.Specification.Utxo.html#8797" class="Datatype">inInterval</a> <a id="8808" class="Symbol">(</a><a id="8809" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="8814" class="Symbol">:</a> <a id="8816" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="8820" class="Symbol">)</a> <a id="8822" class="Symbol">:</a> <a id="8824" class="Symbol">(</a><a id="8825" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8831" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="8836" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8838" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8844" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="8848" class="Symbol">)</a> <a id="8850" class="Symbol">→</a> <a id="8852" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="8857" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="8865" href="Ledger.Conway.Specification.Utxo.html#8865" class="InductiveConstructor">both</a>   <a id="8872" class="Symbol">:</a> <a id="8874" class="Symbol">∀</a> <a id="8876" class="Symbol">{</a><a id="8877" href="Ledger.Conway.Specification.Utxo.html#8877" class="Bound">l</a> <a id="8879" href="Ledger.Conway.Specification.Utxo.html#8879" class="Bound">r</a><a id="8880" class="Symbol">}</a>  <a id="8883" class="Symbol">→</a> <a id="8885" href="Ledger.Conway.Specification.Utxo.html#8877" class="Bound">l</a> <a id="8887" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="8889" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="8894" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8896" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="8901" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="8903" href="Ledger.Conway.Specification.Utxo.html#8879" class="Bound">r</a>  <a id="8906" class="Symbol">→</a>  <a id="8909" href="Ledger.Conway.Specification.Utxo.html#8797" class="Datatype">inInterval</a> <a id="8920" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="8925" class="Symbol">(</a><a id="8926" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8931" href="Ledger.Conway.Specification.Utxo.html#8877" class="Bound">l</a>   <a id="8935" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8937" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="8942" href="Ledger.Conway.Specification.Utxo.html#8879" class="Bound">r</a><a id="8943" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="8947" href="Ledger.Conway.Specification.Utxo.html#8947" class="InductiveConstructor">lower</a>  <a id="8954" class="Symbol">:</a> <a id="8956" class="Symbol">∀</a> <a id="8958" class="Symbol">{</a><a id="8959" href="Ledger.Conway.Specification.Utxo.html#8959" class="Bound">l</a><a id="8960" class="Symbol">}</a>    <a id="8965" class="Symbol">→</a> <a id="8967" href="Ledger.Conway.Specification.Utxo.html#8959" class="Bound">l</a> <a id="8969" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="8971" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a>             <a id="8988" class="Symbol">→</a>  <a id="8991" href="Ledger.Conway.Specification.Utxo.html#8797" class="Datatype">inInterval</a> <a id="9002" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="9007" class="Symbol">(</a><a id="9008" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9013" href="Ledger.Conway.Specification.Utxo.html#8959" class="Bound">l</a>   <a id="9017" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9019" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9026" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="9030" href="Ledger.Conway.Specification.Utxo.html#9030" class="InductiveConstructor">upper</a>  <a id="9037" class="Symbol">:</a> <a id="9039" class="Symbol">∀</a> <a id="9041" class="Symbol">{</a><a id="9042" href="Ledger.Conway.Specification.Utxo.html#9042" class="Bound">r</a><a id="9043" class="Symbol">}</a>    <a id="9048" class="Symbol">→</a> <a id="9050" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="9055" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9057" href="Ledger.Conway.Specification.Utxo.html#9042" class="Bound">r</a>             <a id="9071" class="Symbol">→</a>  <a id="9074" href="Ledger.Conway.Specification.Utxo.html#8797" class="Datatype">inInterval</a> <a id="9085" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="9090" class="Symbol">(</a><a id="9091" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="9100" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9102" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9107" href="Ledger.Conway.Specification.Utxo.html#9042" class="Bound">r</a><a id="9108" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="9112" href="Ledger.Conway.Specification.Utxo.html#9112" class="InductiveConstructor">none</a>   <a id="9119" class="Symbol">:</a>                                    <a id="9156" href="Ledger.Conway.Specification.Utxo.html#8797" class="Datatype">inInterval</a> <a id="9167" href="Ledger.Conway.Specification.Utxo.html#8809" class="Bound">slot</a> <a id="9172" class="Symbol">(</a><a id="9173" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="9182" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9184" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9191" class="Symbol">)</a>


<a id="9195" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="9265" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="9276" href="Ledger.Conway.Specification.Utxo.html#9276" class="Function">Dec-inInterval</a> <a id="9291" class="Symbol">:</a> <a id="9293" href="Ledger.Conway.Specification.Utxo.html#8797" class="Datatype">inInterval</a> <a id="9304" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a>
  <a id="9309" href="Ledger.Conway.Specification.Utxo.html#9276" class="Function">Dec-inInterval</a> <a id="9324" class="Symbol">{</a><a id="9325" href="Ledger.Conway.Specification.Utxo.html#9325" class="Bound">slot</a><a id="9329" class="Symbol">}</a> <a id="9331" class="Symbol">{</a><a id="9332" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9337" href="Ledger.Conway.Specification.Utxo.html#9337" class="Bound">x</a>  <a id="9340" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9342" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9347" href="Ledger.Conway.Specification.Utxo.html#9347" class="Bound">y</a> <a id="9349" class="Symbol">}</a> <a id="9351" class="Symbol">.</a><a id="9352" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9356" class="Keyword">with</a> <a id="9361" href="Ledger.Conway.Specification.Utxo.html#9337" class="Bound">x</a> <a id="9363" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9366" href="Ledger.Conway.Specification.Utxo.html#9325" class="Bound">slot</a> <a id="9371" class="Symbol">|</a> <a id="9373" href="Ledger.Conway.Specification.Utxo.html#9325" class="Bound">slot</a> <a id="9378" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9381" href="Ledger.Conway.Specification.Utxo.html#9347" class="Bound">y</a>
  <a id="9385" class="Symbol">...</a> <a id="9389" class="Symbol">|</a> <a id="9391" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9394" href="Ledger.Conway.Specification.Utxo.html#9394" class="Bound">¬p₁</a> <a id="9398" class="Symbol">|</a> <a id="9400" class="Symbol">_</a>      <a id="9407" class="Symbol">=</a> <a id="9409" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9412" class="Symbol">λ</a> <a id="9414" class="Keyword">where</a> <a id="9420" class="Symbol">(</a><a id="9421" href="Ledger.Conway.Specification.Utxo.html#8865" class="InductiveConstructor">both</a> <a id="9426" class="Symbol">(</a><a id="9427" href="Ledger.Conway.Specification.Utxo.html#9427" class="Bound">h₁</a> <a id="9430" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9432" href="Ledger.Conway.Specification.Utxo.html#9432" class="Bound">h₂</a><a id="9434" class="Symbol">))</a> <a id="9437" class="Symbol">→</a> <a id="9439" href="Ledger.Conway.Specification.Utxo.html#9394" class="Bound">¬p₁</a> <a id="9443" href="Ledger.Conway.Specification.Utxo.html#9427" class="Bound">h₁</a>
  <a id="9448" class="Symbol">...</a> <a id="9452" class="Symbol">|</a> <a id="9454" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9458" href="Ledger.Conway.Specification.Utxo.html#9458" class="Bound">p₁</a> <a id="9461" class="Symbol">|</a> <a id="9463" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9466" href="Ledger.Conway.Specification.Utxo.html#9466" class="Bound">¬p₂</a> <a id="9470" class="Symbol">=</a> <a id="9472" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9475" class="Symbol">λ</a> <a id="9477" class="Keyword">where</a> <a id="9483" class="Symbol">(</a><a id="9484" href="Ledger.Conway.Specification.Utxo.html#8865" class="InductiveConstructor">both</a> <a id="9489" class="Symbol">(</a><a id="9490" href="Ledger.Conway.Specification.Utxo.html#9490" class="Bound">h₁</a> <a id="9493" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9495" href="Ledger.Conway.Specification.Utxo.html#9495" class="Bound">h₂</a><a id="9497" class="Symbol">))</a> <a id="9500" class="Symbol">→</a> <a id="9502" href="Ledger.Conway.Specification.Utxo.html#9466" class="Bound">¬p₂</a> <a id="9506" href="Ledger.Conway.Specification.Utxo.html#9495" class="Bound">h₂</a>
  <a id="9511" class="Symbol">...</a> <a id="9515" class="Symbol">|</a> <a id="9517" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9521" href="Ledger.Conway.Specification.Utxo.html#9521" class="Bound">p₁</a> <a id="9524" class="Symbol">|</a> <a id="9526" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9530" href="Ledger.Conway.Specification.Utxo.html#9530" class="Bound">p₂</a> <a id="9533" class="Symbol">=</a> <a id="9535" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9539" class="Symbol">(</a><a id="9540" href="Ledger.Conway.Specification.Utxo.html#8865" class="InductiveConstructor">both</a> <a id="9545" class="Symbol">(</a><a id="9546" href="Ledger.Conway.Specification.Utxo.html#9521" class="Bound">p₁</a> <a id="9549" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9551" href="Ledger.Conway.Specification.Utxo.html#9530" class="Bound">p₂</a><a id="9553" class="Symbol">))</a>
  <a id="9558" href="Ledger.Conway.Specification.Utxo.html#9276" class="Function">Dec-inInterval</a> <a id="9573" class="Symbol">{</a><a id="9574" href="Ledger.Conway.Specification.Utxo.html#9574" class="Bound">slot</a><a id="9578" class="Symbol">}</a> <a id="9580" class="Symbol">{</a><a id="9581" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9586" href="Ledger.Conway.Specification.Utxo.html#9586" class="Bound">x</a>  <a id="9589" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9591" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9598" class="Symbol">}</a> <a id="9600" class="Symbol">.</a><a id="9601" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9605" class="Keyword">with</a> <a id="9610" href="Ledger.Conway.Specification.Utxo.html#9586" class="Bound">x</a> <a id="9612" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9615" href="Ledger.Conway.Specification.Utxo.html#9574" class="Bound">slot</a>
  <a id="9622" class="Symbol">...</a> <a id="9626" class="Symbol">|</a> <a id="9628" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9631" href="Ledger.Conway.Specification.Utxo.html#9631" class="Bound">¬p</a> <a id="9634" class="Symbol">=</a> <a id="9636" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="9640" class="Symbol">(λ</a> <a id="9643" class="Keyword">where</a> <a id="9649" class="Symbol">(</a><a id="9650" href="Ledger.Conway.Specification.Utxo.html#8947" class="InductiveConstructor">lower</a> <a id="9656" href="Ledger.Conway.Specification.Utxo.html#9656" class="Bound">h</a><a id="9657" class="Symbol">)</a> <a id="9659" class="Symbol">→</a> <a id="9661" href="Ledger.Conway.Specification.Utxo.html#9631" class="Bound">¬p</a> <a id="9664" href="Ledger.Conway.Specification.Utxo.html#9656" class="Bound">h</a><a id="9665" class="Symbol">)</a>
  <a id="9669" class="Symbol">...</a> <a id="9673" class="Symbol">|</a> <a id="9675" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9679" href="Ledger.Conway.Specification.Utxo.html#9679" class="Bound">p</a> <a id="9681" class="Symbol">=</a> <a id="9683" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9687" class="Symbol">(</a><a id="9688" href="Ledger.Conway.Specification.Utxo.html#8947" class="InductiveConstructor">lower</a> <a id="9694" href="Ledger.Conway.Specification.Utxo.html#9679" class="Bound">p</a><a id="9695" class="Symbol">)</a>
  <a id="9699" href="Ledger.Conway.Specification.Utxo.html#9276" class="Function">Dec-inInterval</a> <a id="9714" class="Symbol">{</a><a id="9715" href="Ledger.Conway.Specification.Utxo.html#9715" class="Bound">slot</a><a id="9719" class="Symbol">}</a> <a id="9721" class="Symbol">{</a><a id="9722" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9730" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9732" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9737" href="Ledger.Conway.Specification.Utxo.html#9737" class="Bound">x</a> <a id="9739" class="Symbol">}</a> <a id="9741" class="Symbol">.</a><a id="9742" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9746" class="Keyword">with</a> <a id="9751" href="Ledger.Conway.Specification.Utxo.html#9715" class="Bound">slot</a> <a id="9756" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9759" href="Ledger.Conway.Specification.Utxo.html#9737" class="Bound">x</a>
  <a id="9763" class="Symbol">...</a> <a id="9767" class="Symbol">|</a> <a id="9769" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9772" href="Ledger.Conway.Specification.Utxo.html#9772" class="Bound">¬p</a> <a id="9775" class="Symbol">=</a> <a id="9777" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="9781" class="Symbol">(λ</a> <a id="9784" class="Keyword">where</a> <a id="9790" class="Symbol">(</a><a id="9791" href="Ledger.Conway.Specification.Utxo.html#9030" class="InductiveConstructor">upper</a> <a id="9797" href="Ledger.Conway.Specification.Utxo.html#9797" class="Bound">h</a><a id="9798" class="Symbol">)</a> <a id="9800" class="Symbol">→</a> <a id="9802" href="Ledger.Conway.Specification.Utxo.html#9772" class="Bound">¬p</a> <a id="9805" href="Ledger.Conway.Specification.Utxo.html#9797" class="Bound">h</a><a id="9806" class="Symbol">)</a>
  <a id="9810" class="Symbol">...</a> <a id="9814" class="Symbol">|</a> <a id="9816" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9820" href="Ledger.Conway.Specification.Utxo.html#9820" class="Bound">p</a> <a id="9822" class="Symbol">=</a> <a id="9824" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9828" class="Symbol">(</a><a id="9829" href="Ledger.Conway.Specification.Utxo.html#9030" class="InductiveConstructor">upper</a> <a id="9835" href="Ledger.Conway.Specification.Utxo.html#9820" class="Bound">p</a><a id="9836" class="Symbol">)</a>
  <a id="9840" href="Ledger.Conway.Specification.Utxo.html#9276" class="Function">Dec-inInterval</a> <a id="9855" class="Symbol">{</a><a id="9856" href="Ledger.Conway.Specification.Utxo.html#9856" class="Bound">slot</a><a id="9860" class="Symbol">}</a> <a id="9862" class="Symbol">{</a><a id="9863" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9871" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9873" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9880" class="Symbol">}</a> <a id="9882" class="Symbol">.</a><a id="9883" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9887" class="Symbol">=</a> <a id="9889" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9893" href="Ledger.Conway.Specification.Utxo.html#9112" class="InductiveConstructor">none</a>

  <a id="HasCoin-UTxOState"></a><a id="9901" href="Ledger.Conway.Specification.Utxo.html#9901" class="Function">HasCoin-UTxOState</a> <a id="9919" class="Symbol">:</a> <a id="9921" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="9929" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a>
  <a id="9941" href="Ledger.Conway.Specification.Utxo.html#9901" class="Function">HasCoin-UTxOState</a> <a id="9959" class="Symbol">.</a><a id="9960" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="9968" href="Ledger.Conway.Specification.Utxo.html#9968" class="Bound">s</a> <a id="9970" class="Symbol">=</a> <a id="9972" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="9980" class="Symbol">(</a><a id="9981" href="Ledger.Conway.Specification.Utxo.html#1290" class="Field">UTxOState.utxo</a> <a id="9996" href="Ledger.Conway.Specification.Utxo.html#9968" class="Bound">s</a><a id="9997" class="Symbol">)</a>
                               <a id="10030" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10032" class="Symbol">(</a><a id="10033" href="Ledger.Conway.Specification.Utxo.html#1312" class="Field">UTxOState.fees</a> <a id="10048" href="Ledger.Conway.Specification.Utxo.html#9968" class="Bound">s</a><a id="10049" class="Symbol">)</a>
                               <a id="10082" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10084" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="10092" class="Symbol">(</a><a id="10093" href="Ledger.Conway.Specification.Utxo.html#1334" class="Field">UTxOState.deposits</a> <a id="10112" href="Ledger.Conway.Specification.Utxo.html#9968" class="Bound">s</a><a id="10113" class="Symbol">)</a>
                               <a id="10146" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10148" href="Ledger.Conway.Specification.Utxo.html#1360" class="Field">UTxOState.donations</a> <a id="10168" href="Ledger.Conway.Specification.Utxo.html#9968" class="Bound">s</a>

<a id="coinPolicies"></a><a id="10171" href="Ledger.Conway.Specification.Utxo.html#10171" class="Function">coinPolicies</a> <a id="10184" class="Symbol">:</a> <a id="10186" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="10188" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
<a id="10199" href="Ledger.Conway.Specification.Utxo.html#10171" class="Function">coinPolicies</a> <a id="10212" class="Symbol">=</a> <a id="10214" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="10223" class="Symbol">(</a><a id="10224" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="10231" class="Number">1</a><a id="10232" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="10235" href="Ledger.Conway.Specification.Utxo.html#10235" class="Function">isAdaOnly</a> <a id="10245" class="Symbol">:</a> <a id="10247" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a> <a id="10253" class="Symbol">→</a> <a id="10255" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="10260" href="Ledger.Conway.Specification.Utxo.html#10235" class="Function">isAdaOnly</a> <a id="10270" href="Ledger.Conway.Specification.Utxo.html#10270" class="Bound">v</a> <a id="10272" class="Symbol">=</a> <a id="10274" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#927" class="Function">policies</a> <a id="10283" href="Ledger.Conway.Specification.Utxo.html#10270" class="Bound">v</a> <a id="10285" href="Axiom.Set.html#2772" class="Function Operator">≡ᵉ</a> <a id="10288" href="Ledger.Conway.Specification.Utxo.html#10171" class="Function">coinPolicies</a>


<a id="collateralCheck"></a><a id="10303" href="Ledger.Conway.Specification.Utxo.html#10303" class="Function">collateralCheck</a> <a id="10319" class="Symbol">:</a> <a id="10321" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="10329" class="Symbol">→</a> <a id="10331" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="10334" class="Symbol">→</a> <a id="10336" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a> <a id="10341" class="Symbol">→</a> <a id="10343" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="10348" href="Ledger.Conway.Specification.Utxo.html#10303" class="Function">collateralCheck</a> <a id="10364" href="Ledger.Conway.Specification.Utxo.html#10364" class="Bound">pp</a> <a id="10367" href="Ledger.Conway.Specification.Utxo.html#10367" class="Bound">tx</a> <a id="10370" href="Ledger.Conway.Specification.Utxo.html#10370" class="Bound">utxo</a> <a id="10375" class="Symbol">=</a>
  <a id="10379" href="Axiom.Set.html#9909" class="Function">All</a> <a id="10383" class="Symbol">(λ</a> <a id="10386" class="Symbol">(</a><a id="10387" href="Ledger.Conway.Specification.Utxo.html#10387" class="Bound">addr</a> <a id="10392" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10394" class="Symbol">_)</a> <a id="10397" class="Symbol">→</a> <a id="10399" href="Ledger.Core.Specification.Address.html#3161" class="Function">isVKeyAddr</a> <a id="10410" href="Ledger.Conway.Specification.Utxo.html#10387" class="Bound">addr</a><a id="10414" class="Symbol">)</a> <a id="10416" class="Symbol">(</a><a id="10417" href="Class.IsSet.html#959" class="Function">range</a> <a id="10423" class="Symbol">(</a><a id="10424" href="Ledger.Conway.Specification.Utxo.html#10370" class="Bound">utxo</a> <a id="10429" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="10431" href="Ledger.Conway.Specification.Transaction.html#3104" class="Function">collateralInputs</a><a id="10447" class="Symbol">))</a>
  <a id="10452" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10454" href="Ledger.Conway.Specification.Utxo.html#10235" class="Function">isAdaOnly</a> <a id="10464" href="Ledger.Conway.Specification.Utxo.html#10602" class="Function">balance′</a>
  <a id="10475" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10477" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="10482" href="Ledger.Conway.Specification.Utxo.html#10602" class="Function">balance′</a> <a id="10491" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="10493" class="Number">100</a> <a id="10497" href="Class.HasOrder.Core.html#827" class="Function Operator">≥</a> <a id="10499" href="Ledger.Conway.Specification.Transaction.html#3254" class="Function">txFee</a> <a id="10505" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="10507" href="Ledger.Conway.Specification.Utxo.html#10364" class="Bound">pp</a> <a id="10510" class="Symbol">.</a><a id="10511" href="Ledger.Conway.Specification.PParams.html#3022" class="Field">collateralPercentage</a>
  <a id="10534" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10536" href="Ledger.Conway.Specification.Transaction.html#3104" class="Function">collateralInputs</a> <a id="10553" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="10555" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="10559" class="Keyword">where</a>
    <a id="10569" class="Keyword">open</a> <a id="10574" href="Ledger.Conway.Specification.Transaction.html#4682" class="Module">Tx</a> <a id="10577" href="Ledger.Conway.Specification.Utxo.html#10367" class="Bound">tx</a><a id="10579" class="Symbol">;</a> <a id="10581" class="Keyword">open</a> <a id="10586" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a> <a id="10593" href="Ledger.Conway.Specification.Transaction.html#4714" class="Function">body</a>
    <a id="10602" href="Ledger.Conway.Specification.Utxo.html#10602" class="Function">balance′</a> <a id="10611" class="Symbol">=</a> <a id="10613" href="Ledger.Conway.Specification.Utxo.html#2363" class="Function">balance</a> <a id="10621" class="Symbol">(</a><a id="10622" href="Ledger.Conway.Specification.Utxo.html#10370" class="Bound">utxo</a> <a id="10627" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="10629" href="Ledger.Conway.Specification.Transaction.html#3104" class="Function">collateralInputs</a><a id="10645" class="Symbol">)</a>


<a id="10649" class="Keyword">module</a> <a id="10656" href="Ledger.Conway.Specification.Utxo.html#10656" class="Module">_</a> <a id="10658" class="Symbol">(</a><a id="10659" class="Keyword">let</a> <a id="10663" class="Keyword">open</a> <a id="10668" href="Ledger.Conway.Specification.Utxo.html#1226" class="Module">UTxOState</a><a id="10677" class="Symbol">;</a> <a id="10679" class="Keyword">open</a> <a id="10684" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a><a id="10690" class="Symbol">)</a> <a id="10692" class="Keyword">where</a>


  <a id="10702" href="Ledger.Conway.Specification.Utxo.html#10702" class="Function">depositRefunds</a> <a id="10717" class="Symbol">:</a> <a id="10719" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="10727" class="Symbol">→</a> <a id="10729" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="10739" class="Symbol">→</a> <a id="10741" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="10748" class="Symbol">→</a> <a id="10750" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="10757" href="Ledger.Conway.Specification.Utxo.html#10702" class="Function">depositRefunds</a> <a id="10772" href="Ledger.Conway.Specification.Utxo.html#10772" class="Bound">pp</a> <a id="10775" href="Ledger.Conway.Specification.Utxo.html#10775" class="Bound">st</a> <a id="10778" href="Ledger.Conway.Specification.Utxo.html#10778" class="Bound">txb</a> <a id="10782" class="Symbol">=</a> <a id="10784" href="Prelude.html#3409" class="Function">negPart</a> <a id="10792" class="Symbol">(</a><a id="10793" href="Ledger.Conway.Specification.Utxo.html#8647" class="Function">depositsChange</a> <a id="10808" href="Ledger.Conway.Specification.Utxo.html#10772" class="Bound">pp</a> <a id="10811" href="Ledger.Conway.Specification.Utxo.html#10778" class="Bound">txb</a> <a id="10815" class="Symbol">(</a><a id="10816" href="Ledger.Conway.Specification.Utxo.html#10775" class="Bound">st</a> <a id="10819" class="Symbol">.</a><a id="10820" href="Ledger.Conway.Specification.Utxo.html#1334" class="Field">deposits</a><a id="10828" class="Symbol">))</a>

  <a id="10834" href="Ledger.Conway.Specification.Utxo.html#10834" class="Function">newDeposits</a> <a id="10846" class="Symbol">:</a> <a id="10848" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="10856" class="Symbol">→</a> <a id="10858" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="10868" class="Symbol">→</a> <a id="10870" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="10877" class="Symbol">→</a> <a id="10879" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="10886" href="Ledger.Conway.Specification.Utxo.html#10834" class="Function">newDeposits</a> <a id="10898" href="Ledger.Conway.Specification.Utxo.html#10898" class="Bound">pp</a> <a id="10901" href="Ledger.Conway.Specification.Utxo.html#10901" class="Bound">st</a> <a id="10904" href="Ledger.Conway.Specification.Utxo.html#10904" class="Bound">txb</a> <a id="10908" class="Symbol">=</a> <a id="10910" href="Prelude.html#3332" class="Function">posPart</a> <a id="10918" class="Symbol">(</a><a id="10919" href="Ledger.Conway.Specification.Utxo.html#8647" class="Function">depositsChange</a> <a id="10934" href="Ledger.Conway.Specification.Utxo.html#10898" class="Bound">pp</a> <a id="10937" href="Ledger.Conway.Specification.Utxo.html#10904" class="Bound">txb</a> <a id="10941" class="Symbol">(</a><a id="10942" href="Ledger.Conway.Specification.Utxo.html#10901" class="Bound">st</a> <a id="10945" class="Symbol">.</a><a id="10946" href="Ledger.Conway.Specification.Utxo.html#1334" class="Field">deposits</a><a id="10954" class="Symbol">))</a>

  <a id="10960" href="Ledger.Conway.Specification.Utxo.html#10960" class="Function">consumed</a> <a id="10969" class="Symbol">:</a> <a id="10971" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="10979" class="Symbol">→</a> <a id="10981" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="10991" class="Symbol">→</a> <a id="10993" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="11000" class="Symbol">→</a> <a id="11002" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="11010" href="Ledger.Conway.Specification.Utxo.html#10960" class="Function">consumed</a> <a id="11019" href="Ledger.Conway.Specification.Utxo.html#11019" class="Bound">pp</a> <a id="11022" href="Ledger.Conway.Specification.Utxo.html#11022" class="Bound">st</a> <a id="11025" href="Ledger.Conway.Specification.Utxo.html#11025" class="Bound">txb</a>
    <a id="11033" class="Symbol">=</a>  <a id="11036" href="Ledger.Conway.Specification.Utxo.html#2363" class="Function">balance</a> <a id="11044" class="Symbol">(</a><a id="11045" href="Ledger.Conway.Specification.Utxo.html#11022" class="Bound">st</a> <a id="11048" class="Symbol">.</a><a id="11049" href="Ledger.Conway.Specification.Utxo.html#1290" class="Field">utxo</a> <a id="11054" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="11056" href="Ledger.Conway.Specification.Utxo.html#11025" class="Bound">txb</a> <a id="11060" class="Symbol">.</a><a id="11061" href="Ledger.Conway.Specification.Transaction.html#3032" class="Field">txIns</a><a id="11066" class="Symbol">)</a>
    <a id="11072" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="11075" href="Ledger.Conway.Specification.Utxo.html#11025" class="Bound">txb</a> <a id="11079" class="Symbol">.</a><a id="11080" href="Ledger.Conway.Specification.Transaction.html#3638" class="Field">mint</a>
    <a id="11089" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="11092" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="11099" class="Symbol">(</a><a id="11100" href="Ledger.Conway.Specification.Utxo.html#10702" class="Function">depositRefunds</a> <a id="11115" href="Ledger.Conway.Specification.Utxo.html#11019" class="Bound">pp</a> <a id="11118" href="Ledger.Conway.Specification.Utxo.html#11022" class="Bound">st</a> <a id="11121" href="Ledger.Conway.Specification.Utxo.html#11025" class="Bound">txb</a><a id="11124" class="Symbol">)</a>
    <a id="11130" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="11133" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="11140" class="Symbol">(</a><a id="11141" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="11149" class="Symbol">(</a><a id="11150" href="Ledger.Conway.Specification.Utxo.html#11025" class="Bound">txb</a> <a id="11154" class="Symbol">.</a><a id="11155" href="Ledger.Conway.Specification.Transaction.html#3288" class="Field">txWithdrawals</a><a id="11168" class="Symbol">))</a>

  <a id="11174" href="Ledger.Conway.Specification.Utxo.html#11174" class="Function">produced</a> <a id="11183" class="Symbol">:</a> <a id="11185" href="Ledger.Conway.Specification.PParams.html#1779" class="Record">PParams</a> <a id="11193" class="Symbol">→</a> <a id="11195" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="11205" class="Symbol">→</a> <a id="11207" href="Ledger.Conway.Specification.Transaction.html#2996" class="Record">TxBody</a> <a id="11214" class="Symbol">→</a> <a id="11216" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#517" class="Function">Value</a>
  <a id="11224" href="Ledger.Conway.Specification.Utxo.html#11174" class="Function">produced</a> <a id="11233" href="Ledger.Conway.Specification.Utxo.html#11233" class="Bound">pp</a> <a id="11236" href="Ledger.Conway.Specification.Utxo.html#11236" class="Bound">st</a> <a id="11239" href="Ledger.Conway.Specification.Utxo.html#11239" class="Bound">txb</a> <a id="11243" class="Symbol">=</a> <a id="11245" href="Ledger.Conway.Specification.Utxo.html#2363" class="Function">balance</a> <a id="11253" class="Symbol">(</a><a id="11254" href="Ledger.Conway.Specification.Utxo.html#2292" class="Function">outs</a> <a id="11259" href="Ledger.Conway.Specification.Utxo.html#11239" class="Bound">txb</a><a id="11262" class="Symbol">)</a>
                     <a id="11285" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11287" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="11294" class="Symbol">(</a><a id="11295" href="Ledger.Conway.Specification.Utxo.html#11239" class="Bound">txb</a> <a id="11299" class="Symbol">.</a><a id="11300" href="Ledger.Conway.Specification.Transaction.html#3254" class="Field">txFee</a><a id="11305" class="Symbol">)</a>
                     <a id="11328" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11330" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="11337" class="Symbol">(</a><a id="11338" href="Ledger.Conway.Specification.Utxo.html#10834" class="Function">newDeposits</a> <a id="11350" href="Ledger.Conway.Specification.Utxo.html#11233" class="Bound">pp</a> <a id="11353" href="Ledger.Conway.Specification.Utxo.html#11236" class="Bound">st</a> <a id="11356" href="Ledger.Conway.Specification.Utxo.html#11239" class="Bound">txb</a><a id="11359" class="Symbol">)</a>
                     <a id="11382" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11384" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="11391" class="Symbol">(</a><a id="11392" href="Ledger.Conway.Specification.Utxo.html#11239" class="Bound">txb</a> <a id="11396" class="Symbol">.</a><a id="11397" href="Ledger.Conway.Specification.Transaction.html#3424" class="Field">txDonation</a><a id="11407" class="Symbol">)</a>


<a id="11411" class="Keyword">open</a> <a id="11416" href="Ledger.Conway.Specification.PParams.html#1779" class="Module">PParams</a>
<a id="11424" class="Keyword">private</a> <a id="11432" class="Keyword">variable</a>
  <a id="11443" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="11445" class="Symbol">:</a> <a id="11447" href="Ledger.Conway.Specification.Utxo.html#1117" class="Record">UTxOEnv</a>
  <a id="11457" href="Ledger.Conway.Specification.Utxo.html#11457" class="Generalizable">s</a> <a id="11459" href="Ledger.Conway.Specification.Utxo.html#11459" class="Generalizable">s&#39;</a> <a id="11462" class="Symbol">:</a> <a id="11464" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a>
  <a id="11476" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="11479" class="Symbol">:</a> <a id="11481" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a>
  <a id="11486" href="Ledger.Conway.Specification.Utxo.html#11486" class="Generalizable">utxo</a> <a id="11491" class="Symbol">:</a> <a id="11493" href="Ledger.Conway.Specification.Transaction.html#2716" class="Function">UTxO</a>
  <a id="11500" href="Ledger.Conway.Specification.Utxo.html#11500" class="Generalizable">fees</a> <a id="11505" class="Symbol">:</a> <a id="11507" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
  <a id="11514" href="Ledger.Conway.Specification.Utxo.html#11514" class="Generalizable">donations</a> <a id="11524" class="Symbol">:</a> <a id="11526" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>
  <a id="11538" href="Ledger.Conway.Specification.Utxo.html#11538" class="Generalizable">deposits</a> <a id="11547" class="Symbol">:</a> <a id="11549" href="Ledger.Conway.Specification.Certs.html#812" class="Function">Deposits</a>

<a id="11559" class="Keyword">open</a> <a id="11564" href="Ledger.Conway.Specification.Utxo.html#1117" class="Module">UTxOEnv</a>


<a id="11574" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="11579" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="11594" class="Symbol">:</a> <a id="11596" href="Ledger.Conway.Specification.Utxo.html#1117" class="Record">UTxOEnv</a> <a id="11604" class="Symbol">→</a> <a id="11606" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="11616" class="Symbol">→</a> <a id="11618" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="11621" class="Symbol">→</a> <a id="11623" href="Ledger.Conway.Specification.Utxo.html#1226" class="Record">UTxOState</a> <a id="11633" class="Symbol">→</a> <a id="11635" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="11640" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-Yes"></a><a id="11649" href="Ledger.Conway.Specification.Utxo.html#11649" class="InductiveConstructor">Scripts-Yes</a> <a id="11661" class="Symbol">:</a>
    <a id="11667" class="Keyword">let</a>  <a id="11672" href="Ledger.Conway.Specification.Utxo.html#11672" class="Bound">pp</a>         <a id="11683" class="Symbol">=</a> <a id="11685" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="11687" class="Symbol">.</a><a id="11688" href="Ledger.Conway.Specification.Utxo.html#1171" class="Field">pparams</a>


         <a id="11707" class="Keyword">open</a> <a id="11712" href="Ledger.Conway.Specification.Transaction.html#4682" class="Module">Tx</a> <a id="11715" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="11718" class="Keyword">renaming</a> <a id="11727" class="Symbol">(</a><a id="11728" href="Ledger.Conway.Specification.Transaction.html#4714" class="Field">body</a> <a id="11733" class="Symbol">to</a> <a id="11736" class="Field">txb</a><a id="11739" class="Symbol">);</a> <a id="11742" class="Keyword">open</a> <a id="11747" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a> <a id="11754" href="Ledger.Conway.Specification.Utxo.html#11736" class="Function">txb</a>


         <a id="11769" href="Ledger.Conway.Specification.Utxo.html#11769" class="Bound">p2Scripts</a>  <a id="11780" class="Symbol">=</a> <a id="11782" href="Ledger.Conway.Specification.Script.Validation.html#3046" class="Function">collectP2ScriptsWithContext</a> <a id="11810" href="Ledger.Conway.Specification.Utxo.html#11672" class="Bound">pp</a> <a id="11813" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="11816" href="Ledger.Conway.Specification.Utxo.html#11486" class="Generalizable">utxo</a>
      <a id="11827" class="Keyword">in</a>
        <a id="11838" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="11840" href="Ledger.Conway.Specification.Utxo.html#3458" class="Datatype">ValidCertDeposits</a> <a id="11858" href="Ledger.Conway.Specification.Utxo.html#11672" class="Bound">pp</a> <a id="11861" href="Ledger.Conway.Specification.Utxo.html#11538" class="Generalizable">deposits</a> <a id="11870" href="Ledger.Conway.Specification.Transaction.html#3214" class="Function">txCerts</a>
        <a id="11886" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="11888" href="Ledger.Conway.Specification.Script.Validation.html#3937" class="Function">evalP2Scripts</a> <a id="11902" href="Ledger.Conway.Specification.Utxo.html#11769" class="Bound">p2Scripts</a> <a id="11912" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11914" href="Ledger.Conway.Specification.Transaction.html#4786" class="Function">isValid</a>
        <a id="11930" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="11932" href="Ledger.Conway.Specification.Transaction.html#4786" class="Function">isValid</a> <a id="11940" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11942" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
          <a id="11957" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
          <a id="12000" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="12002" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Utxo.html#11486}{\htmlId{12006}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11500}{\htmlId{12013}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11538}{\htmlId{12020}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11514}{\htmlId{12031}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="12043" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">⇀⦇</a> <a id="12046" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="12049" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{12059}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#11486}{\htmlId{12060}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12065}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3032}{\htmlId{12067}{\htmlClass{Function}{\text{txIns}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12073}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,\,\htmlId{12074}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#7640}{\htmlId{12076}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, \,\htmlId{12079}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#2292}{\htmlId{12080}{\htmlClass{Function}{\text{outs}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11736}{\htmlId{12085}{\htmlClass{Function}{\text{txb}}}}\,\,\htmlId{12088}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11500}{\htmlId{12092}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{12097}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3254}{\htmlId{12099}{\htmlClass{Function}{\text{txFee}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#8233}{\htmlId{12107}{\htmlClass{Function}{\text{updateDeposits}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11672}{\htmlId{12122}{\htmlClass{Bound}{\text{pp}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11736}{\htmlId{12125}{\htmlClass{Function}{\text{txb}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11538}{\htmlId{12129}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11514}{\htmlId{12140}{\htmlClass{Generalizable}{\text{donations}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{12150}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3424}{\htmlId{12152}{\htmlClass{Function}{\text{txDonation}}}}\, \end{pmatrix}$</a>
  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-No"></a><a id="12167" href="Ledger.Conway.Specification.Utxo.html#12167" class="InductiveConstructor">Scripts-No</a> <a id="12178" class="Symbol">:</a>
    <a id="12184" class="Keyword">let</a>  <a id="12189" href="Ledger.Conway.Specification.Utxo.html#12189" class="Bound">pp</a>         <a id="12200" class="Symbol">=</a> <a id="12202" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="12204" class="Symbol">.</a><a id="12205" href="Ledger.Conway.Specification.Utxo.html#1171" class="Field">pparams</a>


         <a id="12224" class="Keyword">open</a> <a id="12229" href="Ledger.Conway.Specification.Transaction.html#4682" class="Module">Tx</a> <a id="12232" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="12235" class="Keyword">renaming</a> <a id="12244" class="Symbol">(</a><a id="12245" href="Ledger.Conway.Specification.Transaction.html#4714" class="Field">body</a> <a id="12250" class="Symbol">to</a> <a id="12253" class="Field">txb</a><a id="12256" class="Symbol">);</a> <a id="12259" class="Keyword">open</a> <a id="12264" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a> <a id="12271" href="Ledger.Conway.Specification.Utxo.html#12253" class="Function">txb</a>


         <a id="12286" href="Ledger.Conway.Specification.Utxo.html#12286" class="Bound">p2Scripts</a>  <a id="12297" class="Symbol">=</a> <a id="12299" href="Ledger.Conway.Specification.Script.Validation.html#3046" class="Function">collectP2ScriptsWithContext</a> <a id="12327" href="Ledger.Conway.Specification.Utxo.html#12189" class="Bound">pp</a> <a id="12330" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="12333" href="Ledger.Conway.Specification.Utxo.html#11486" class="Generalizable">utxo</a>
    <a id="12342" class="Keyword">in</a>
        <a id="12353" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="12355" href="Ledger.Conway.Specification.Script.Validation.html#3937" class="Function">evalP2Scripts</a> <a id="12369" href="Ledger.Conway.Specification.Utxo.html#12286" class="Bound">p2Scripts</a> <a id="12379" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12381" href="Ledger.Conway.Specification.Transaction.html#4786" class="Function">isValid</a>
        <a id="12397" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="12399" href="Ledger.Conway.Specification.Transaction.html#4786" class="Function">isValid</a> <a id="12407" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12409" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
          <a id="12425" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
          <a id="12468" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="12470" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Utxo.html#11486}{\htmlId{12474}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11500}{\htmlId{12481}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11538}{\htmlId{12488}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11514}{\htmlId{12499}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="12511" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">⇀⦇</a> <a id="12514" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="12517" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Utxo.html#11486}{\htmlId{12527}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12532}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3104}{\htmlId{12534}{\htmlClass{Function}{\text{collateralInputs}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12551}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11500}{\htmlId{12555}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{12560}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#2452}{\htmlId{12562}{\htmlClass{Function}{\text{cbalance}}}}\, \,\htmlId{12571}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#11486}{\htmlId{12572}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13536}{\htmlId{12577}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3104}{\htmlId{12579}{\htmlClass{Function}{\text{collateralInputs}}}}\,\,\htmlId{12595}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11538}{\htmlId{12599}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11514}{\htmlId{12610}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a>


<a id="12624" class="Keyword">unquoteDecl</a> <a id="Scripts-Yes-premises"></a><a id="12636" href="Ledger.Conway.Specification.Utxo.html#12636" class="Function">Scripts-Yes-premises</a> <a id="12657" class="Symbol">=</a> <a id="12659" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="12671" href="Ledger.Conway.Specification.Utxo.html#12636" class="Function">Scripts-Yes-premises</a> <a id="12692" class="Symbol">(</a><a id="12693" class="Keyword">quote</a> <a id="12699" href="Ledger.Conway.Specification.Utxo.html#11649" class="InductiveConstructor">Scripts-Yes</a><a id="12710" class="Symbol">)</a>
<a id="12712" class="Keyword">unquoteDecl</a> <a id="Scripts-No-premises"></a><a id="12724" href="Ledger.Conway.Specification.Utxo.html#12724" class="Function">Scripts-No-premises</a>  <a id="12745" class="Symbol">=</a> <a id="12747" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="12759" href="Ledger.Conway.Specification.Utxo.html#12724" class="Function">Scripts-No-premises</a>  <a id="12780" class="Symbol">(</a><a id="12781" class="Keyword">quote</a> <a id="12787" href="Ledger.Conway.Specification.Utxo.html#12167" class="InductiveConstructor">Scripts-No</a><a id="12797" class="Symbol">)</a>


<a id="12801" class="Keyword">data</a> <a id="12806" href="Ledger.Conway.Specification.Utxo.html#2159" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="12820" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO-inductive"></a><a id="12829" href="Ledger.Conway.Specification.Utxo.html#12829" class="InductiveConstructor">UTXO-inductive</a> <a id="12844" class="Symbol">:</a>
    <a id="12850" class="Keyword">let</a> <a id="12854" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a>        <a id="12864" class="Symbol">=</a> <a id="12866" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="12868" class="Symbol">.</a><a id="12869" href="Ledger.Conway.Specification.Utxo.html#1171" class="Field">pparams</a>
        <a id="12885" href="Ledger.Conway.Specification.Utxo.html#12885" class="Bound">slot</a>      <a id="12895" class="Symbol">=</a> <a id="12897" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="12899" class="Symbol">.</a><a id="12900" href="Ledger.Conway.Specification.Utxo.html#1150" class="Field">slot</a>
        <a id="12913" href="Ledger.Conway.Specification.Utxo.html#12913" class="Bound">treasury</a>  <a id="12923" class="Symbol">=</a> <a id="12925" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="12927" class="Symbol">.</a><a id="12928" href="Ledger.Conway.Specification.Utxo.html#1195" class="Field">treasury</a>
        <a id="12945" href="Ledger.Conway.Specification.Utxo.html#12945" class="Bound">utxo</a>      <a id="12955" class="Symbol">=</a> <a id="12957" href="Ledger.Conway.Specification.Utxo.html#11457" class="Generalizable">s</a> <a id="12959" class="Symbol">.</a><a id="12960" href="Ledger.Conway.Specification.Utxo.html#1290" class="Field">UTxOState.utxo</a>


        <a id="12985" class="Keyword">open</a> <a id="12990" href="Ledger.Conway.Specification.Transaction.html#4682" class="Module">Tx</a> <a id="12993" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="12996" class="Keyword">renaming</a> <a id="13005" class="Symbol">(</a><a id="13006" href="Ledger.Conway.Specification.Transaction.html#4714" class="Field">body</a> <a id="13011" class="Symbol">to</a> <a id="13014" class="Field">txb</a><a id="13017" class="Symbol">);</a> <a id="13020" class="Keyword">open</a> <a id="13025" href="Ledger.Conway.Specification.Transaction.html#2996" class="Module">TxBody</a> <a id="13032" href="Ledger.Conway.Specification.Utxo.html#13014" class="Function">txb</a>
        <a id="13044" class="Keyword">open</a> <a id="13049" href="Ledger.Conway.Specification.Transaction.html#4437" class="Module">TxWitnesses</a> <a id="13061" href="Ledger.Conway.Specification.Transaction.html#4738" class="Function">wits</a>


        <a id="13076" href="Ledger.Conway.Specification.Utxo.html#13076" class="Bound">txOutsʰ</a>   <a id="13086" class="Symbol">=</a> <a id="13088" href="Axiom.Set.Map.html#7108" class="Function">mapValues</a> <a id="13098" href="Ledger.Conway.Specification.Transaction.html#5732" class="Function">txOutHash</a> <a id="13108" href="Ledger.Conway.Specification.Transaction.html#3140" class="Function">txOuts</a>
        <a id="13123" href="Ledger.Conway.Specification.Utxo.html#13123" class="Bound">overhead</a>  <a id="13133" class="Symbol">=</a> <a id="13135" class="Number">160</a>
    <a id="13143" class="Keyword">in</a>
    <a id="13150" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="13152" href="Ledger.Conway.Specification.Transaction.html#3032" class="Function">txIns</a> <a id="13158" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="13160" href="Class.HasEmptySet.html#287" class="Field">∅</a>                              <a id="13191" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13193" href="Ledger.Conway.Specification.Transaction.html#3032" class="Function">txIns</a> <a id="13199" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="13201" href="Ledger.Conway.Specification.Transaction.html#3068" class="Function">refInputs</a> <a id="13211" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="13213" href="Class.IsSet.html#916" class="Function">dom</a> <a id="13217" href="Ledger.Conway.Specification.Utxo.html#12945" class="Bound">utxo</a>
    <a id="13226" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13228" href="Ledger.Conway.Specification.Transaction.html#3032" class="Function">txIns</a> <a id="13234" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="13236" href="Ledger.Conway.Specification.Transaction.html#3068" class="Function">refInputs</a> <a id="13246" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13248" href="Class.HasEmptySet.html#287" class="Field">∅</a>                  <a id="13267" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13269" href="Ledger.Conway.Specification.Utxo.html#8797" class="Datatype">inInterval</a> <a id="13280" href="Ledger.Conway.Specification.Utxo.html#12885" class="Bound">slot</a> <a id="13285" href="Ledger.Conway.Specification.Transaction.html#3329" class="Function">txVldt</a>
    <a id="13296" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13298" href="Ledger.Conway.Specification.Utxo.html#2631" class="Function">minfee</a> <a id="13305" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a> <a id="13308" href="Ledger.Conway.Specification.Utxo.html#12945" class="Bound">utxo</a> <a id="13313" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="13316" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13318" href="Ledger.Conway.Specification.Transaction.html#3254" class="Function">txFee</a>              <a id="13337" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13339" class="Symbol">(</a><a id="13340" href="Ledger.Conway.Specification.Transaction.html#4557" class="Function">txrdmrs</a> <a id="13348" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="13350" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="13352" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="13354" class="Symbol">→</a> <a id="13356" href="Ledger.Conway.Specification.Utxo.html#10303" class="Function">collateralCheck</a> <a id="13372" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a> <a id="13375" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="13378" href="Ledger.Conway.Specification.Utxo.html#12945" class="Bound">utxo</a><a id="13382" class="Symbol">)</a>
    <a id="13388" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13390" href="Ledger.Conway.Specification.Utxo.html#10960" class="Function">consumed</a> <a id="13399" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a> <a id="13402" href="Ledger.Conway.Specification.Utxo.html#11457" class="Generalizable">s</a> <a id="13404" href="Ledger.Conway.Specification.Utxo.html#13014" class="Function">txb</a> <a id="13408" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13410" href="Ledger.Conway.Specification.Utxo.html#11174" class="Function">produced</a> <a id="13419" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a> <a id="13422" href="Ledger.Conway.Specification.Utxo.html#11457" class="Generalizable">s</a> <a id="13424" href="Ledger.Conway.Specification.Utxo.html#13014" class="Function">txb</a>  <a id="13429" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13431" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#837" class="Function">coin</a> <a id="13436" href="Ledger.Conway.Specification.Transaction.html#3638" class="Function">mint</a> <a id="13441" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13443" class="Number">0</a>
    <a id="13449" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13451" href="Ledger.Conway.Specification.Transaction.html#4767" class="Function">txsize</a> <a id="13458" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13460" href="Ledger.Conway.Specification.PParams.html#1860" class="Field">maxTxSize</a> <a id="13470" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a>
    <a id="13477" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13479" href="Ledger.Conway.Specification.Utxo.html#2516" class="Function">refScriptsSize</a> <a id="13494" href="Ledger.Conway.Specification.Utxo.html#12945" class="Bound">utxo</a> <a id="13499" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="13502" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13504" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a> <a id="13507" class="Symbol">.</a><a id="13508" href="Ledger.Conway.Specification.PParams.html#2649" class="Field">maxRefScriptSizePerTx</a>
    <a id="13534" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13536" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13539" href="Ledger.Conway.Specification.Utxo.html#13539" class="Bound">(_</a> <a id="13542" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13544" href="Ledger.Conway.Specification.Utxo.html#13544" class="Bound">txout</a><a id="13549" href="Ledger.Conway.Specification.Utxo.html#13539" class="Bound">)</a> <a id="13551" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13553" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13555" href="Ledger.Conway.Specification.Utxo.html#13076" class="Bound">txOutsʰ</a> <a id="13563" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13565" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="13575" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#882" class="Function">inject</a> <a id="13582" class="Symbol">((</a><a id="13584" href="Ledger.Conway.Specification.Utxo.html#13123" class="Bound">overhead</a> <a id="13593" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13595" href="Ledger.Conway.Specification.Utxo.html#990" class="Function">utxoEntrySize</a> <a id="13609" href="Ledger.Conway.Specification.Utxo.html#13544" class="Bound">txout</a><a id="13614" class="Symbol">)</a> <a id="13616" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="13618" href="Ledger.Conway.Specification.PParams.html#2515" class="Field">coinsPerUTxOByte</a> <a id="13635" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a><a id="13637" class="Symbol">)</a> <a id="13639" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1033" class="Function Operator">≤ᵗ</a> <a id="13642" href="Ledger.Conway.Specification.Transaction.html#5821" class="Function">getValueʰ</a> <a id="13652" href="Ledger.Conway.Specification.Utxo.html#13544" class="Bound">txout</a>
    <a id="13662" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13664" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13667" href="Ledger.Conway.Specification.Utxo.html#13667" class="Bound">(_</a> <a id="13670" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13672" href="Ledger.Conway.Specification.Utxo.html#13672" class="Bound">txout</a><a id="13677" href="Ledger.Conway.Specification.Utxo.html#13667" class="Bound">)</a> <a id="13679" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13681" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13683" href="Ledger.Conway.Specification.Utxo.html#13076" class="Bound">txOutsʰ</a> <a id="13691" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13693" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="13703" href="Ledger.Conway.Specification.Abstract.html#916" class="Field">serSize</a> <a id="13711" class="Symbol">(</a><a id="13712" href="Ledger.Conway.Specification.Transaction.html#5821" class="Function">getValueʰ</a> <a id="13722" href="Ledger.Conway.Specification.Utxo.html#13672" class="Bound">txout</a><a id="13727" class="Symbol">)</a> <a id="13729" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13731" href="Ledger.Conway.Specification.PParams.html#2040" class="Field">maxValSize</a> <a id="13742" href="Ledger.Conway.Specification.Utxo.html#12854" class="Bound">pp</a>
    <a id="13749" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13751" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13754" href="Ledger.Conway.Specification.Utxo.html#13754" class="Bound">(</a><a id="13755" href="Ledger.Conway.Specification.Utxo.html#13755" class="Bound">a</a> <a id="13757" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13759" href="Ledger.Conway.Specification.Utxo.html#13754" class="Bound">_)</a> <a id="13762" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13764" href="Class.IsSet.html#959" class="Function">range</a> <a id="13770" href="Ledger.Conway.Specification.Utxo.html#13076" class="Bound">txOutsʰ</a> <a id="13778" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="13788" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="13796" class="Symbol">(</a><a id="13797" href="Function.Base.html#725" class="Function">const</a> <a id="13803" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="13804" class="Symbol">)</a> <a id="13806" class="Symbol">(λ</a> <a id="13809" href="Ledger.Conway.Specification.Utxo.html#13809" class="Bound">a</a> <a id="13811" class="Symbol">→</a> <a id="13813" href="Ledger.Conway.Specification.Utxo.html#13809" class="Bound">a</a> <a id="13815" class="Symbol">.</a><a id="13816" href="Ledger.Core.Specification.Address.html#1290" class="Field">BootstrapAddr.attrsSize</a> <a id="13840" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13842" class="Number">64</a><a id="13844" class="Symbol">)</a> <a id="13846" href="Ledger.Conway.Specification.Utxo.html#13755" class="Bound">a</a>
    <a id="13852" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13854" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13857" href="Ledger.Conway.Specification.Utxo.html#13857" class="Bound">(</a><a id="13858" href="Ledger.Conway.Specification.Utxo.html#13858" class="Bound">a</a> <a id="13860" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13862" href="Ledger.Conway.Specification.Utxo.html#13857" class="Bound">_)</a> <a id="13865" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13867" href="Class.IsSet.html#959" class="Function">range</a> <a id="13873" href="Ledger.Conway.Specification.Utxo.html#13076" class="Bound">txOutsʰ</a> <a id="13881" href="Class.IsSet.html#576" class="Function">]</a>  <a id="13884" href="Ledger.Core.Specification.Address.html#3130" class="Function">netId</a> <a id="13890" href="Ledger.Conway.Specification.Utxo.html#13858" class="Bound">a</a>        <a id="13899" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13901" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="13915" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13917" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13920" href="Ledger.Conway.Specification.Utxo.html#13920" class="Bound">a</a> <a id="13922" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13924" href="Class.IsSet.html#916" class="Function">dom</a> <a id="13928" href="Ledger.Conway.Specification.Transaction.html#3288" class="Function">txWithdrawals</a> <a id="13942" href="Class.IsSet.html#576" class="Function">]</a>    <a id="13947" href="Ledger.Core.Specification.Address.html#1580" class="Field">NetworkIdOf</a> <a id="13959" href="Ledger.Conway.Specification.Utxo.html#13920" class="Bound">a</a>  <a id="13962" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13964" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="13978" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13980" href="Ledger.Conway.Specification.Transaction.html#3551" class="Function">txNetworkId</a>  <a id="13993" href="Prelude.html#2945" class="Function Operator">~</a> <a id="13995" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="14000" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="14014" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="14016" href="Ledger.Conway.Specification.Transaction.html#3594" class="Function">currentTreasury</a>  <a id="14033" href="Prelude.html#2945" class="Function Operator">~</a> <a id="14035" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="14040" href="Ledger.Conway.Specification.Utxo.html#12913" class="Bound">treasury</a>
    <a id="14053" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="14055" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="14057" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">⊢</a> <a id="14059" href="Ledger.Conway.Specification.Utxo.html#11457" class="Generalizable">s</a> <a id="14061" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">⇀⦇</a> <a id="14064" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="14067" href="Ledger.Conway.Specification.Utxo.html#11579" class="Datatype Operator">,UTXOS⦈</a> <a id="14075" href="Ledger.Conway.Specification.Utxo.html#11459" class="Generalizable">s&#39;</a>
      <a id="14084" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="14123" href="Ledger.Conway.Specification.Utxo.html#11443" class="Generalizable">Γ</a> <a id="14125" href="Ledger.Conway.Specification.Utxo.html#2159" class="Datatype Operator">⊢</a> <a id="14127" href="Ledger.Conway.Specification.Utxo.html#11457" class="Generalizable">s</a> <a id="14129" href="Ledger.Conway.Specification.Utxo.html#2159" class="Datatype Operator">⇀⦇</a> <a id="14132" href="Ledger.Conway.Specification.Utxo.html#11476" class="Generalizable">tx</a> <a id="14135" href="Ledger.Conway.Specification.Utxo.html#2159" class="Datatype Operator">,UTXO⦈</a> <a id="14142" href="Ledger.Conway.Specification.Utxo.html#11459" class="Generalizable">s&#39;</a>


<a id="14147" class="Keyword">pattern</a> <a id="UTXO-inductive⋯"></a><a id="14155" href="Ledger.Conway.Specification.Utxo.html#14155" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="14171" href="Ledger.Conway.Specification.Utxo.html#14255" class="Bound">tx</a> <a id="14174" href="Ledger.Conway.Specification.Utxo.html#14238" class="Bound">Γ</a> <a id="14176" href="Ledger.Conway.Specification.Utxo.html#14246" class="Bound">s</a> <a id="14178" href="Ledger.Conway.Specification.Utxo.html#14260" class="Bound">x</a> <a id="14180" href="Ledger.Conway.Specification.Utxo.html#14264" class="Bound">y</a> <a id="14182" href="Ledger.Conway.Specification.Utxo.html#14268" class="Bound">z</a> <a id="14184" href="Ledger.Conway.Specification.Utxo.html#14272" class="Bound">w</a> <a id="14186" href="Ledger.Conway.Specification.Utxo.html#14276" class="Bound">k</a> <a id="14188" href="Ledger.Conway.Specification.Utxo.html#14280" class="Bound">l</a> <a id="14190" href="Ledger.Conway.Specification.Utxo.html#14284" class="Bound">m</a> <a id="14192" href="Ledger.Conway.Specification.Utxo.html#14288" class="Bound">c</a> <a id="14194" href="Ledger.Conway.Specification.Utxo.html#14292" class="Bound">v</a> <a id="14196" href="Ledger.Conway.Specification.Utxo.html#14296" class="Bound">j</a> <a id="14198" href="Ledger.Conway.Specification.Utxo.html#14300" class="Bound">n</a> <a id="14200" href="Ledger.Conway.Specification.Utxo.html#14304" class="Bound">o</a> <a id="14202" href="Ledger.Conway.Specification.Utxo.html#14308" class="Bound">p</a> <a id="14204" href="Ledger.Conway.Specification.Utxo.html#14312" class="Bound">q</a> <a id="14206" href="Ledger.Conway.Specification.Utxo.html#14316" class="Bound">r</a> <a id="14208" href="Ledger.Conway.Specification.Utxo.html#14320" class="Bound">t</a> <a id="14210" href="Ledger.Conway.Specification.Utxo.html#14324" class="Bound">u</a> <a id="14212" href="Ledger.Conway.Specification.Utxo.html#14328" class="Bound">h</a>
  <a id="14216" class="Symbol">=</a> <a id="14218" href="Ledger.Conway.Specification.Utxo.html#12829" class="InductiveConstructor">UTXO-inductive</a> <a id="14233" class="Symbol">{</a><a id="14234" class="Argument">Γ</a> <a id="14236" class="Symbol">=</a> <a id="14238" href="Ledger.Conway.Specification.Utxo.html#14238" class="Bound">Γ</a><a id="14239" class="Symbol">}</a> <a id="14241" class="Symbol">{</a><a id="14242" class="Argument">s</a> <a id="14244" class="Symbol">=</a> <a id="14246" href="Ledger.Conway.Specification.Utxo.html#14246" class="Bound">s</a><a id="14247" class="Symbol">}</a> <a id="14249" class="Symbol">{</a><a id="14250" class="Argument">tx</a> <a id="14253" class="Symbol">=</a> <a id="14255" href="Ledger.Conway.Specification.Utxo.html#14255" class="Bound">tx</a><a id="14257" class="Symbol">}</a> <a id="14259" class="Symbol">(</a><a id="14260" href="Ledger.Conway.Specification.Utxo.html#14260" class="Bound">x</a> <a id="14262" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14264" href="Ledger.Conway.Specification.Utxo.html#14264" class="Bound">y</a> <a id="14266" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14268" href="Ledger.Conway.Specification.Utxo.html#14268" class="Bound">z</a> <a id="14270" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14272" href="Ledger.Conway.Specification.Utxo.html#14272" class="Bound">w</a> <a id="14274" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14276" href="Ledger.Conway.Specification.Utxo.html#14276" class="Bound">k</a> <a id="14278" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14280" href="Ledger.Conway.Specification.Utxo.html#14280" class="Bound">l</a> <a id="14282" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14284" href="Ledger.Conway.Specification.Utxo.html#14284" class="Bound">m</a> <a id="14286" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14288" href="Ledger.Conway.Specification.Utxo.html#14288" class="Bound">c</a> <a id="14290" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14292" href="Ledger.Conway.Specification.Utxo.html#14292" class="Bound">v</a> <a id="14294" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14296" href="Ledger.Conway.Specification.Utxo.html#14296" class="Bound">j</a> <a id="14298" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14300" href="Ledger.Conway.Specification.Utxo.html#14300" class="Bound">n</a> <a id="14302" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14304" href="Ledger.Conway.Specification.Utxo.html#14304" class="Bound">o</a> <a id="14306" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14308" href="Ledger.Conway.Specification.Utxo.html#14308" class="Bound">p</a> <a id="14310" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14312" href="Ledger.Conway.Specification.Utxo.html#14312" class="Bound">q</a> <a id="14314" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14316" href="Ledger.Conway.Specification.Utxo.html#14316" class="Bound">r</a> <a id="14318" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14320" href="Ledger.Conway.Specification.Utxo.html#14320" class="Bound">t</a> <a id="14322" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14324" href="Ledger.Conway.Specification.Utxo.html#14324" class="Bound">u</a> <a id="14326" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14328" href="Ledger.Conway.Specification.Utxo.html#14328" class="Bound">h</a><a id="14329" class="Symbol">)</a>
<a id="14331" class="Keyword">unquoteDecl</a> <a id="UTXO-premises"></a><a id="14343" href="Ledger.Conway.Specification.Utxo.html#14343" class="Function">UTXO-premises</a> <a id="14357" class="Symbol">=</a> <a id="14359" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="14371" href="Ledger.Conway.Specification.Utxo.html#14343" class="Function">UTXO-premises</a> <a id="14385" class="Symbol">(</a><a id="14386" class="Keyword">quote</a> <a id="14392" href="Ledger.Conway.Specification.Utxo.html#12829" class="InductiveConstructor">UTXO-inductive</a><a id="14406" class="Symbol">)</a>

</pre></body></html>