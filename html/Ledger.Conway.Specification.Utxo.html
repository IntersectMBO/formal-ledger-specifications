<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Utxo</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Core.Specification.Abstract.html" class="Module">Ledger.Core.Specification.Abstract</a>
<a id="73" class="Keyword">open</a> <a id="78" class="Keyword">import</a> <a id="85" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="126" class="Keyword">module</a> <a id="133" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a>
  <a id="168" class="Symbol">(</a><a id="169" href="Ledger.Conway.Specification.Utxo.html#169" class="Bound">txs</a> <a id="173" class="Symbol">:</a> <a id="175" href="Ledger.Conway.Specification.Transaction.html#991" class="Record">TransactionStructure</a><a id="195" class="Symbol">)</a> <a id="197" class="Symbol">(</a><a id="198" class="Keyword">open</a> <a id="203" href="Ledger.Conway.Specification.Transaction.html#991" class="Module">TransactionStructure</a> <a id="224" href="Ledger.Conway.Specification.Utxo.html#169" class="Bound">txs</a><a id="227" class="Symbol">)</a>
  <a id="231" class="Symbol">(</a><a id="232" href="Ledger.Conway.Specification.Utxo.html#232" class="Bound">abs</a> <a id="236" class="Symbol">:</a> <a id="238" href="Ledger.Core.Specification.Abstract.html#828" class="Record">AbstractFunctions</a> <a id="256" href="Ledger.Conway.Specification.Utxo.html#169" class="Bound">txs</a><a id="259" class="Symbol">)</a> <a id="261" class="Symbol">(</a><a id="262" class="Keyword">open</a> <a id="267" href="Ledger.Core.Specification.Abstract.html#828" class="Module">AbstractFunctions</a> <a id="285" href="Ledger.Conway.Specification.Utxo.html#232" class="Bound">abs</a><a id="288" class="Symbol">)</a>
  <a id="292" class="Keyword">where</a>

<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Algebra.html" class="Module">Algebra</a>              <a id="332" class="Keyword">using</a> <a id="338" class="Symbol">(</a><a id="339" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a><a id="356" class="Symbol">)</a>
<a id="358" class="Keyword">open</a> <a id="363" class="Keyword">import</a> <a id="370" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>  <a id="391" class="Keyword">using</a> <a id="397" class="Symbol">(</a><a id="398" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="408" class="Symbol">)</a>
<a id="410" class="Keyword">import</a> <a id="417" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="430" class="Symbol">as</a> <a id="433" class="Module">ℤ</a>
<a id="435" class="Keyword">import</a> <a id="442" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="453" class="Symbol">as</a> <a id="456" class="Module">M</a>
<a id="458" class="Keyword">import</a> <a id="465" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="479" class="Symbol">as</a> <a id="482" class="Module">ℚ</a>
<a id="484" class="Keyword">import</a> <a id="491" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="519" class="Symbol">as</a> <a id="522" class="Module">Sum</a>

<a id="527" class="Keyword">open</a> <a id="532" class="Keyword">import</a> <a id="539" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="555" class="Keyword">open</a> <a id="560" class="Keyword">import</a> <a id="567" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="601" href="Ledger.Conway.Specification.Transaction.html#2065" class="Function">govStructure</a>
<a id="614" class="Keyword">open</a> <a id="619" class="Keyword">import</a> <a id="626" href="Ledger.Conway.Specification.Fees.html" class="Module">Ledger.Conway.Specification.Fees</a> <a id="659" href="Ledger.Conway.Specification.Utxo.html#169" class="Bound">txs</a> <a id="663" class="Keyword">using</a> <a id="669" class="Symbol">(</a><a id="670" href="Ledger.Conway.Specification.Fees.html#774" class="Function">scriptsCost</a><a id="681" class="Symbol">)</a>
<a id="683" class="Keyword">open</a> <a id="688" class="Keyword">import</a> <a id="695" href="Ledger.Conway.Specification.Script.Validation.html" class="Module">Ledger.Conway.Specification.Script.Validation</a> <a id="741" href="Ledger.Conway.Specification.Utxo.html#169" class="Bound">txs</a> <a id="745" href="Ledger.Conway.Specification.Utxo.html#232" class="Bound">abs</a>
<a id="749" class="Keyword">open</a> <a id="754" class="Keyword">import</a> <a id="761" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="802" class="Keyword">instance</a>
  <a id="813" href="Ledger.Conway.Specification.Utxo.html#813" class="Function">_</a> <a id="815" class="Symbol">=</a> <a id="817" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a>


<a id="totExUnits"></a><a id="830" href="Ledger.Conway.Specification.Utxo.html#830" class="Function">totExUnits</a> <a id="841" class="Symbol">:</a> <a id="843" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a> <a id="846" class="Symbol">→</a> <a id="848" href="Ledger.Core.Specification.Script.Base.html#1016" class="Function">ExUnits</a>
<a id="856" href="Ledger.Conway.Specification.Utxo.html#830" class="Function">totExUnits</a> <a id="867" href="Ledger.Conway.Specification.Utxo.html#867" class="Bound">tx</a> <a id="870" class="Symbol">=</a> <a id="872" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">∑[</a> <a id="875" href="Ledger.Conway.Specification.Utxo.html#875" class="Bound">(_</a> <a id="878" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="880" href="Ledger.Conway.Specification.Utxo.html#880" class="Bound">eu</a><a id="882" href="Ledger.Conway.Specification.Utxo.html#875" class="Bound">)</a> <a id="884" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">←</a> <a id="886" href="Ledger.Conway.Specification.Utxo.html#867" class="Bound">tx</a> <a id="889" class="Symbol">.</a><a id="890" href="Ledger.Conway.Specification.Transaction.html#4724" class="Field">wits</a> <a id="895" class="Symbol">.</a><a id="896" href="Ledger.Conway.Specification.Transaction.html#4543" class="Field">txrdmrs</a> <a id="904" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">]</a> <a id="906" href="Ledger.Conway.Specification.Utxo.html#880" class="Bound">eu</a>


  <a id="913" class="Keyword">where</a> <a id="919" class="Keyword">open</a> <a id="924" href="Ledger.Conway.Specification.Transaction.html#4668" class="Module">Tx</a><a id="926" class="Symbol">;</a> <a id="928" class="Keyword">open</a> <a id="933" href="Ledger.Conway.Specification.Transaction.html#4423" class="Module">TxWitnesses</a>

<a id="946" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="994" href="Ledger.Conway.Specification.Utxo.html#994" class="Function">utxoEntrySizeWithoutVal</a> <a id="1018" class="Symbol">:</a> <a id="1020" href="Ledger.Core.Specification.TokenAlgebra.Base.html#427" class="Function">MemoryEstimate</a>
<a id="1035" href="Ledger.Conway.Specification.Utxo.html#994" class="Function">utxoEntrySizeWithoutVal</a> <a id="1059" class="Symbol">=</a> <a id="1061" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="1064" href="Ledger.Conway.Specification.Utxo.html#1064" class="Function">utxoEntrySize</a> <a id="1078" class="Symbol">:</a> <a id="1080" href="Ledger.Conway.Specification.Transaction.html#5647" class="Function">TxOutʰ</a> <a id="1087" class="Symbol">→</a> <a id="1089" href="Ledger.Core.Specification.TokenAlgebra.Base.html#427" class="Function">MemoryEstimate</a>
<a id="1104" href="Ledger.Conway.Specification.Utxo.html#1064" class="Function">utxoEntrySize</a> <a id="1118" href="Ledger.Conway.Specification.Utxo.html#1118" class="Bound">o</a> <a id="1120" class="Symbol">=</a> <a id="1122" href="Ledger.Conway.Specification.Utxo.html#994" class="Function">utxoEntrySizeWithoutVal</a> <a id="1146" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1148" href="Ledger.Core.Specification.TokenAlgebra.Base.html#976" class="Function">size</a> <a id="1153" class="Symbol">(</a><a id="1154" href="Ledger.Conway.Specification.Transaction.html#5807" class="Function">getValueʰ</a> <a id="1164" href="Ledger.Conway.Specification.Utxo.html#1118" class="Bound">o</a><a id="1165" class="Symbol">)</a>

<a id="1168" class="Keyword">open</a> <a id="1173" href="Ledger.Conway.Specification.PParams.html#1687" class="Module">PParams</a>



<a id="1184" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="1191" href="Ledger.Conway.Specification.Utxo.html#1191" class="Record">UTxOEnv</a> <a id="1199" class="Symbol">:</a> <a id="1201" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1206" class="Keyword">where</a>
  <a id="1214" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="1224" href="Ledger.Conway.Specification.Utxo.html#1224" class="Field">slot</a>      <a id="1234" class="Symbol">:</a> <a id="1236" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="1245" href="Ledger.Conway.Specification.Utxo.html#1245" class="Field">pparams</a>   <a id="1255" class="Symbol">:</a> <a id="1257" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="1269" href="Ledger.Conway.Specification.Utxo.html#1269" class="Field">treasury</a>  <a id="1279" class="Symbol">:</a> <a id="1281" href="Ledger.Prelude.Base.html#200" class="Function">Treasury</a>



<a id="1293" class="Keyword">record</a> <a id="UTxOState"></a><a id="1300" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="1310" class="Symbol">:</a> <a id="1312" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1317" class="Keyword">where</a>


  <a id="1327" class="Keyword">constructor</a> <a id="⟦_,_,_,_⟧ᵘ"></a><a id="1339" href="Ledger.Conway.Specification.Utxo.html#1339" class="InductiveConstructor Operator">⟦_,_,_,_⟧ᵘ</a>


  <a id="1354" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="1364" href="Ledger.Conway.Specification.Utxo.html#1364" class="Field">utxo</a>       <a id="1375" class="Symbol">:</a> <a id="1377" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="1386" href="Ledger.Conway.Specification.Utxo.html#1386" class="Field">fees</a>       <a id="1397" class="Symbol">:</a> <a id="1399" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
    <a id="UTxOState.deposits"></a><a id="1408" href="Ledger.Conway.Specification.Utxo.html#1408" class="Field">deposits</a>   <a id="1419" class="Symbol">:</a> <a id="1421" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a>
    <a id="UTxOState.donations"></a><a id="1434" href="Ledger.Conway.Specification.Utxo.html#1434" class="Field">donations</a>  <a id="1445" class="Symbol">:</a> <a id="1447" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>


<a id="1459" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="1466" href="Ledger.Conway.Specification.Utxo.html#1466" class="Record">HasUTxOState</a> <a id="1479" class="Symbol">{</a><a id="1480" href="Ledger.Conway.Specification.Utxo.html#1480" class="Bound">a</a><a id="1481" class="Symbol">}</a> <a id="1483" class="Symbol">(</a><a id="1484" href="Ledger.Conway.Specification.Utxo.html#1484" class="Bound">A</a> <a id="1486" class="Symbol">:</a> <a id="1488" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1493" href="Ledger.Conway.Specification.Utxo.html#1480" class="Bound">a</a><a id="1494" class="Symbol">)</a> <a id="1496" class="Symbol">:</a> <a id="1498" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1503" href="Ledger.Conway.Specification.Utxo.html#1480" class="Bound">a</a> <a id="1505" class="Keyword">where</a>
  <a id="1513" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="1519" href="Ledger.Conway.Specification.Utxo.html#1519" class="Field">UTxOStateOf</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Ledger.Conway.Specification.Utxo.html#1484" class="Bound">A</a> <a id="1535" class="Symbol">→</a> <a id="1537" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a>
<a id="1547" class="Keyword">open</a> <a id="1552" href="Ledger.Conway.Specification.Utxo.html#1466" class="Module">HasUTxOState</a> <a id="1565" class="Symbol">⦃...⦄</a> <a id="1571" class="Keyword">public</a>

<a id="1579" class="Keyword">instance</a>
  <a id="HasPParams-UTxOEnv"></a><a id="1590" href="Ledger.Conway.Specification.Utxo.html#1590" class="Function">HasPParams-UTxOEnv</a> <a id="1609" class="Symbol">:</a> <a id="1611" href="Ledger.Conway.Specification.PParams.html#3491" class="Record">HasPParams</a> <a id="1622" href="Ledger.Conway.Specification.Utxo.html#1191" class="Record">UTxOEnv</a>
  <a id="1632" href="Ledger.Conway.Specification.Utxo.html#1590" class="Function">HasPParams-UTxOEnv</a> <a id="1651" class="Symbol">.</a><a id="1652" href="Ledger.Conway.Specification.PParams.html#3542" class="Field">PParamsOf</a> <a id="1662" class="Symbol">=</a> <a id="1664" href="Ledger.Conway.Specification.Utxo.html#1245" class="Field">UTxOEnv.pparams</a>

  <a id="HasUTxO-UTxOState"></a><a id="1683" href="Ledger.Conway.Specification.Utxo.html#1683" class="Function">HasUTxO-UTxOState</a> <a id="1701" class="Symbol">:</a> <a id="1703" href="Ledger.Conway.Specification.Transaction.html#2875" class="Record">HasUTxO</a> <a id="1711" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a>
  <a id="1723" href="Ledger.Conway.Specification.Utxo.html#1683" class="Function">HasUTxO-UTxOState</a> <a id="1741" class="Symbol">.</a><a id="1742" href="Ledger.Conway.Specification.Transaction.html#2925" class="Field">UTxOOf</a> <a id="1749" class="Symbol">=</a> <a id="1751" href="Ledger.Conway.Specification.Utxo.html#1364" class="Field">UTxOState.utxo</a>

  <a id="HasFee-UTxOState"></a><a id="1769" href="Ledger.Conway.Specification.Utxo.html#1769" class="Function">HasFee-UTxOState</a> <a id="1786" class="Symbol">:</a> <a id="1788" href="Ledger.Prelude.Base.html#621" class="Record">HasFees</a> <a id="1796" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a>
  <a id="1808" href="Ledger.Conway.Specification.Utxo.html#1769" class="Function">HasFee-UTxOState</a> <a id="1825" class="Symbol">.</a><a id="1826" href="Ledger.Prelude.Base.html#669" class="Field">FeesOf</a> <a id="1833" class="Symbol">=</a> <a id="1835" href="Ledger.Conway.Specification.Utxo.html#1386" class="Field">UTxOState.fees</a>

  <a id="HasDeposits-UTxOState"></a><a id="1853" href="Ledger.Conway.Specification.Utxo.html#1853" class="Function">HasDeposits-UTxOState</a> <a id="1875" class="Symbol">:</a> <a id="1877" href="Ledger.Core.Specification.Certs.html#833" class="Record">HasDeposits</a> <a id="1889" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a>
  <a id="1901" href="Ledger.Conway.Specification.Utxo.html#1853" class="Function">HasDeposits-UTxOState</a> <a id="1923" class="Symbol">.</a><a id="1924" href="Ledger.Core.Specification.Certs.html#885" class="Field">DepositsOf</a> <a id="1935" class="Symbol">=</a> <a id="1937" href="Ledger.Conway.Specification.Utxo.html#1408" class="Field">UTxOState.deposits</a>

  <a id="HasDonations-UTxOState"></a><a id="1959" href="Ledger.Conway.Specification.Utxo.html#1959" class="Function">HasDonations-UTxOState</a> <a id="1982" class="Symbol">:</a> <a id="1984" href="Ledger.Prelude.Base.html#501" class="Record">HasDonations</a> <a id="1997" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a>
  <a id="2009" href="Ledger.Conway.Specification.Utxo.html#1959" class="Function">HasDonations-UTxOState</a> <a id="2032" class="Symbol">.</a><a id="2033" href="Ledger.Prelude.Base.html#554" class="Field">DonationsOf</a> <a id="2045" class="Symbol">=</a> <a id="2047" href="Ledger.Conway.Specification.Utxo.html#1434" class="Field">UTxOState.donations</a>

  <a id="2070" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="2082" href="Ledger.Conway.Specification.Utxo.html#2082" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="2098" href="Ledger.Conway.Specification.Utxo.html#2098" class="Function">HasCast-UTxOState</a> <a id="2116" class="Symbol">=</a> <a id="2118" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="2137" class="Symbol">(</a> <a id="2139" class="Symbol">(</a><a id="2140" class="Keyword">quote</a> <a id="2146" href="Ledger.Conway.Specification.Utxo.html#1191" class="Record">UTxOEnv</a>   <a id="2156" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2158" href="Ledger.Conway.Specification.Utxo.html#2082" class="Function">HasCast-UTxOEnv</a>  <a id="2175" class="Symbol">)</a> <a id="2177" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="2183" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="2185" class="Symbol">(</a><a id="2186" class="Keyword">quote</a> <a id="2192" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="2202" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2204" href="Ledger.Conway.Specification.Utxo.html#2098" class="Function">HasCast-UTxOState</a><a id="2221" class="Symbol">)</a> <a id="2223" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="2224" class="Symbol">)</a>


<a id="2228" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="2233" href="Ledger.Conway.Specification.Utxo.html#2233" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="2247" class="Symbol">:</a> <a id="2249" href="Ledger.Conway.Specification.Utxo.html#1191" class="Record">UTxOEnv</a> <a id="2257" class="Symbol">→</a> <a id="2259" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="2269" class="Symbol">→</a> <a id="2271" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a> <a id="2274" class="Symbol">→</a> <a id="2276" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="2286" class="Symbol">→</a> <a id="2288" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="2295" class="Keyword">module</a> <a id="2302" href="Ledger.Conway.Specification.Utxo.html#2302" class="Module">_</a> <a id="2304" class="Symbol">(</a><a id="2305" class="Keyword">let</a> <a id="2309" class="Keyword">open</a> <a id="2314" href="Ledger.Conway.Specification.Transaction.html#4668" class="Module">Tx</a><a id="2316" class="Symbol">;</a> <a id="2318" class="Keyword">open</a> <a id="2323" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a><a id="2329" class="Symbol">;</a> <a id="2331" class="Keyword">open</a> <a id="2336" href="Ledger.Conway.Specification.Transaction.html#4423" class="Module">TxWitnesses</a><a id="2347" class="Symbol">)</a> <a id="2349" class="Keyword">where</a> <a id="2355" class="Keyword">opaque</a>


  <a id="2366" href="Ledger.Conway.Specification.Utxo.html#2366" class="Function">outs</a> <a id="2371" class="Symbol">:</a> <a id="2373" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="2380" class="Symbol">→</a> <a id="2382" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a>
  <a id="2389" href="Ledger.Conway.Specification.Utxo.html#2366" class="Function">outs</a> <a id="2394" href="Ledger.Conway.Specification.Utxo.html#2394" class="Bound">tx</a> <a id="2397" class="Symbol">=</a> <a id="2399" href="Axiom.Set.Map.html#6936" class="Function">mapKeys</a> <a id="2407" class="Symbol">(</a><a id="2408" href="Ledger.Conway.Specification.Utxo.html#2394" class="Bound">tx</a> <a id="2411" class="Symbol">.</a><a id="2412" href="Ledger.Conway.Specification.Transaction.html#3166" class="Field">txId</a> <a id="2417" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="2419" class="Symbol">)</a> <a id="2421" class="Symbol">(</a><a id="2422" href="Ledger.Conway.Specification.Utxo.html#2394" class="Bound">tx</a> <a id="2425" class="Symbol">.</a><a id="2426" href="Ledger.Conway.Specification.Transaction.html#3126" class="Field">txOuts</a><a id="2432" class="Symbol">)</a>

  <a id="2437" href="Ledger.Conway.Specification.Utxo.html#2437" class="Function">balance</a> <a id="2445" class="Symbol">:</a> <a id="2447" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a> <a id="2452" class="Symbol">→</a> <a id="2454" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a>
  <a id="2462" href="Ledger.Conway.Specification.Utxo.html#2437" class="Function">balance</a> <a id="2470" href="Ledger.Conway.Specification.Utxo.html#2470" class="Bound">utxo</a> <a id="2475" class="Symbol">=</a> <a id="2477" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">∑[</a> <a id="2480" href="Ledger.Conway.Specification.Utxo.html#2480" class="Bound">x</a> <a id="2482" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">←</a> <a id="2484" href="Axiom.Set.Map.html#7108" class="Function">mapValues</a> <a id="2494" href="Ledger.Conway.Specification.Transaction.html#5718" class="Function">txOutHash</a> <a id="2504" href="Ledger.Conway.Specification.Utxo.html#2470" class="Bound">utxo</a> <a id="2509" href="abstract-set-theory.FiniteSetTheory.html#4373" class="Function">]</a> <a id="2511" href="Ledger.Conway.Specification.Transaction.html#5807" class="Function">getValueʰ</a> <a id="2521" href="Ledger.Conway.Specification.Utxo.html#2480" class="Bound">x</a>

  <a id="2526" href="Ledger.Conway.Specification.Utxo.html#2526" class="Function">cbalance</a> <a id="2535" class="Symbol">:</a> <a id="2537" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a> <a id="2542" class="Symbol">→</a> <a id="2544" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="2551" href="Ledger.Conway.Specification.Utxo.html#2526" class="Function">cbalance</a> <a id="2560" href="Ledger.Conway.Specification.Utxo.html#2560" class="Bound">utxo</a> <a id="2565" class="Symbol">=</a> <a id="2567" href="Ledger.Core.Specification.TokenAlgebra.Base.html#835" class="Function">coin</a> <a id="2572" class="Symbol">(</a><a id="2573" href="Ledger.Conway.Specification.Utxo.html#2437" class="Function">balance</a> <a id="2581" href="Ledger.Conway.Specification.Utxo.html#2560" class="Bound">utxo</a><a id="2585" class="Symbol">)</a>

  <a id="2590" href="Ledger.Conway.Specification.Utxo.html#2590" class="Function">refScriptsSize</a> <a id="2605" class="Symbol">:</a> <a id="2607" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a> <a id="2612" class="Symbol">→</a> <a id="2614" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a> <a id="2617" class="Symbol">→</a> <a id="2619" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="2623" href="Ledger.Conway.Specification.Utxo.html#2590" class="Function">refScriptsSize</a> <a id="2638" href="Ledger.Conway.Specification.Utxo.html#2638" class="Bound">utxo</a> <a id="2643" href="Ledger.Conway.Specification.Utxo.html#2643" class="Bound">tx</a> <a id="2646" class="Symbol">=</a> <a id="2648" href="Data.Nat.ListAction.html#612" class="Function">sum</a> <a id="2652" class="Symbol">(</a><a id="2653" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2657" href="Ledger.Core.Specification.Abstract.html#1064" class="Field">scriptSize</a> <a id="2668" class="Symbol">(</a><a id="2669" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="2679" class="Symbol">(</a><a id="2680" href="Ledger.Conway.Specification.Transaction.html#6176" class="Function">refScripts</a> <a id="2691" href="Ledger.Conway.Specification.Utxo.html#2643" class="Bound">tx</a> <a id="2694" href="Ledger.Conway.Specification.Utxo.html#2638" class="Bound">utxo</a><a id="2698" class="Symbol">)))</a>

  <a id="2705" href="Ledger.Conway.Specification.Utxo.html#2705" class="Function">minfee</a> <a id="2712" class="Symbol">:</a> <a id="2714" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="2722" class="Symbol">→</a> <a id="2724" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a> <a id="2729" class="Symbol">→</a> <a id="2731" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a> <a id="2734" class="Symbol">→</a> <a id="2736" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="2743" href="Ledger.Conway.Specification.Utxo.html#2705" class="Function">minfee</a> <a id="2750" href="Ledger.Conway.Specification.Utxo.html#2750" class="Bound">pp</a> <a id="2753" href="Ledger.Conway.Specification.Utxo.html#2753" class="Bound">utxo</a> <a id="2758" href="Ledger.Conway.Specification.Utxo.html#2758" class="Bound">tx</a>  <a id="2762" class="Symbol">=</a> <a id="2764" href="Ledger.Conway.Specification.Utxo.html#2750" class="Bound">pp</a> <a id="2767" class="Symbol">.</a><a id="2768" href="Ledger.Conway.Specification.PParams.html#2109" class="Field">a</a> <a id="2770" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="2772" href="Ledger.Conway.Specification.Utxo.html#2758" class="Bound">tx</a> <a id="2775" class="Symbol">.</a><a id="2776" href="Ledger.Conway.Specification.Transaction.html#4753" class="Field">txsize</a> <a id="2783" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2785" href="Ledger.Conway.Specification.Utxo.html#2750" class="Bound">pp</a> <a id="2788" class="Symbol">.</a><a id="2789" href="Ledger.Conway.Specification.PParams.html#2151" class="Field">b</a>
                     <a id="2812" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2814" href="Ledger.Core.Specification.Abstract.html#867" class="Field">txscriptfee</a> <a id="2826" class="Symbol">(</a><a id="2827" href="Ledger.Conway.Specification.Utxo.html#2750" class="Bound">pp</a> <a id="2830" class="Symbol">.</a><a id="2831" href="Ledger.Conway.Specification.PParams.html#2468" class="Field">prices</a><a id="2837" class="Symbol">)</a> <a id="2839" class="Symbol">(</a><a id="2840" href="Ledger.Conway.Specification.Utxo.html#830" class="Function">totExUnits</a> <a id="2851" href="Ledger.Conway.Specification.Utxo.html#2758" class="Bound">tx</a><a id="2853" class="Symbol">)</a>
                     <a id="2876" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2878" href="Ledger.Conway.Specification.Fees.html#774" class="Function">scriptsCost</a> <a id="2890" href="Ledger.Conway.Specification.Utxo.html#2750" class="Bound">pp</a> <a id="2893" class="Symbol">(</a><a id="2894" href="Ledger.Conway.Specification.Utxo.html#2590" class="Function">refScriptsSize</a> <a id="2909" href="Ledger.Conway.Specification.Utxo.html#2753" class="Bound">utxo</a> <a id="2914" href="Ledger.Conway.Specification.Utxo.html#2758" class="Bound">tx</a><a id="2916" class="Symbol">)</a>


<a id="2920" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="2931" href="Ledger.Conway.Specification.Utxo.html#2931" class="Function">HasCoin-UTxO</a> <a id="2944" class="Symbol">:</a> <a id="2946" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="2954" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a>
  <a id="2961" href="Ledger.Conway.Specification.Utxo.html#2931" class="Function">HasCoin-UTxO</a> <a id="2974" class="Symbol">.</a><a id="2975" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="2983" class="Symbol">=</a> <a id="2985" href="Ledger.Conway.Specification.Utxo.html#2526" class="Function">cbalance</a>


<a id="certDeposit"></a><a id="2996" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="3008" class="Symbol">:</a> <a id="3010" href="Ledger.Core.Specification.Certs.html#2079" class="Datatype">DCert</a> <a id="3016" class="Symbol">→</a> <a id="3018" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="3026" class="Symbol">→</a> <a id="3028" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a>
<a id="3037" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="3049" class="Symbol">(</a><a id="3050" href="Ledger.Core.Specification.Certs.html#2100" class="InductiveConstructor">delegate</a> <a id="3059" href="Ledger.Conway.Specification.Utxo.html#3059" class="Bound">c</a> <a id="3061" class="Symbol">_</a> <a id="3063" class="Symbol">_</a> <a id="3065" href="Ledger.Conway.Specification.Utxo.html#3065" class="Bound">v</a><a id="3066" class="Symbol">)</a> <a id="3068" class="Symbol">_</a>   <a id="3072" class="Symbol">=</a> <a id="3074" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3076" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="3094" href="Ledger.Conway.Specification.Utxo.html#3059" class="Bound">c</a> <a id="3096" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3098" href="Ledger.Conway.Specification.Utxo.html#3065" class="Bound">v</a> <a id="3100" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3102" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="3114" class="Symbol">(</a><a id="3115" href="Ledger.Core.Specification.Certs.html#2792" class="InductiveConstructor">reg</a> <a id="3119" href="Ledger.Conway.Specification.Utxo.html#3119" class="Bound">c</a> <a id="3121" class="Symbol">_)</a>          <a id="3133" href="Ledger.Conway.Specification.Utxo.html#3133" class="Bound">pp</a>  <a id="3137" class="Symbol">=</a> <a id="3139" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3141" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="3159" href="Ledger.Conway.Specification.Utxo.html#3119" class="Bound">c</a> <a id="3161" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3163" href="Ledger.Conway.Specification.Utxo.html#3133" class="Bound">pp</a> <a id="3166" class="Symbol">.</a><a id="3167" href="Ledger.Conway.Specification.PParams.html#2193" class="Field">keyDeposit</a> <a id="3178" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3180" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="3192" class="Symbol">(</a><a id="3193" href="Ledger.Core.Specification.Certs.html#2221" class="InductiveConstructor">regpool</a> <a id="3201" href="Ledger.Conway.Specification.Utxo.html#3201" class="Bound">kh</a> <a id="3204" class="Symbol">_)</a>     <a id="3211" href="Ledger.Conway.Specification.Utxo.html#3211" class="Bound">pp</a>  <a id="3215" class="Symbol">=</a> <a id="3217" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3219" href="Ledger.Core.Specification.Certs.html#617" class="InductiveConstructor">PoolDeposit</a> <a id="3231" href="Ledger.Conway.Specification.Utxo.html#3201" class="Bound">kh</a> <a id="3234" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3236" href="Ledger.Conway.Specification.Utxo.html#3211" class="Bound">pp</a> <a id="3239" class="Symbol">.</a><a id="3240" href="Ledger.Conway.Specification.PParams.html#2238" class="Field">poolDeposit</a> <a id="3252" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3254" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="3266" class="Symbol">(</a><a id="3267" href="Ledger.Core.Specification.Certs.html#2311" class="InductiveConstructor">regdrep</a> <a id="3275" href="Ledger.Conway.Specification.Utxo.html#3275" class="Bound">c</a> <a id="3277" href="Ledger.Conway.Specification.Utxo.html#3277" class="Bound">v</a> <a id="3279" class="Symbol">_)</a>    <a id="3285" class="Symbol">_</a>   <a id="3289" class="Symbol">=</a> <a id="3291" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3293" href="Ledger.Core.Specification.Certs.html#670" class="InductiveConstructor">DRepDeposit</a> <a id="3305" href="Ledger.Conway.Specification.Utxo.html#3275" class="Bound">c</a> <a id="3307" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3309" href="Ledger.Conway.Specification.Utxo.html#3277" class="Bound">v</a> <a id="3311" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3313" href="Ledger.Conway.Specification.Utxo.html#2996" class="CatchallClause Function">certDeposit</a><a id="3324" class="CatchallClause"> </a><a id="3325" class="CatchallClause Symbol">_</a><a id="3326" class="CatchallClause">                  </a><a id="3344" class="CatchallClause Symbol">_</a>   <a id="3348" class="Symbol">=</a> <a id="3350" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="certRefund"></a><a id="3353" href="Ledger.Conway.Specification.Utxo.html#3353" class="Function">certRefund</a> <a id="3364" class="Symbol">:</a> <a id="3366" href="Ledger.Core.Specification.Certs.html#2079" class="Datatype">DCert</a> <a id="3372" class="Symbol">→</a> <a id="3374" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3376" href="Ledger.Core.Specification.Certs.html#534" class="Datatype">DepositPurpose</a>
<a id="3391" href="Ledger.Conway.Specification.Utxo.html#3353" class="Function">certRefund</a> <a id="3402" class="Symbol">(</a><a id="3403" href="Ledger.Core.Specification.Certs.html#2173" class="InductiveConstructor">dereg</a> <a id="3409" href="Ledger.Conway.Specification.Utxo.html#3409" class="Bound">c</a> <a id="3411" class="Symbol">_)</a>      <a id="3419" class="Symbol">=</a> <a id="3421" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3423" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="3441" href="Ledger.Conway.Specification.Utxo.html#3409" class="Bound">c</a> <a id="3443" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3445" href="Ledger.Conway.Specification.Utxo.html#3353" class="Function">certRefund</a> <a id="3456" class="Symbol">(</a><a id="3457" href="Ledger.Core.Specification.Certs.html#2362" class="InductiveConstructor">deregdrep</a> <a id="3467" href="Ledger.Conway.Specification.Utxo.html#3467" class="Bound">c</a> <a id="3469" class="Symbol">_)</a>  <a id="3473" class="Symbol">=</a> <a id="3475" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3477" href="Ledger.Core.Specification.Certs.html#670" class="InductiveConstructor">DRepDeposit</a> <a id="3489" href="Ledger.Conway.Specification.Utxo.html#3467" class="Bound">c</a> <a id="3491" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="3493" href="Ledger.Conway.Specification.Utxo.html#3353" class="CatchallClause Function">certRefund</a><a id="3503" class="CatchallClause"> </a><a id="3504" class="CatchallClause Symbol">_</a>                <a id="3521" class="Symbol">=</a> <a id="3523" href="Class.HasEmptySet.html#287" class="Field">∅</a>


<a id="3527" class="Keyword">data</a> <a id="ValidCertDeposits"></a><a id="3532" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="3550" class="Symbol">(</a><a id="3551" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="3554" class="Symbol">:</a> <a id="3556" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a><a id="3563" class="Symbol">)</a> <a id="3565" class="Symbol">(</a><a id="3566" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="3571" class="Symbol">:</a> <a id="3573" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a><a id="3581" class="Symbol">)</a> <a id="3583" class="Symbol">:</a> <a id="3585" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3590" href="Ledger.Core.Specification.Certs.html#2079" class="Datatype">DCert</a> <a id="3596" class="Symbol">→</a> <a id="3598" href="Agda.Primitive.html#388" class="Primitive">Set</a>


  <a id="3606" class="Keyword">where</a>
  <a id="ValidCertDeposits.[]"></a><a id="3614" href="Ledger.Conway.Specification.Utxo.html#3614" class="InductiveConstructor">[]</a>         <a id="3625" class="Symbol">:</a> <a id="3627" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="3645" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="3648" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="3653" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="ValidCertDeposits.delegate"></a><a id="3658" href="Ledger.Conway.Specification.Utxo.html#3658" class="InductiveConstructor">delegate</a>   <a id="3669" class="Symbol">:</a> <a id="3671" class="Symbol">∀</a> <a id="3673" class="Symbol">{</a><a id="3674" href="Ledger.Conway.Specification.Utxo.html#3674" class="Bound">c</a> <a id="3676" href="Ledger.Conway.Specification.Utxo.html#3676" class="Bound">del</a> <a id="3680" href="Ledger.Conway.Specification.Utxo.html#3680" class="Bound">kh</a> <a id="3683" href="Ledger.Conway.Specification.Utxo.html#3683" class="Bound">v</a> <a id="3685" href="Ledger.Conway.Specification.Utxo.html#3685" class="Bound">certs</a><a id="3690" class="Symbol">}</a>
             <a id="3705" class="Symbol">→</a> <a id="3707" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="3725" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="3728" class="Symbol">(</a><a id="3729" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="3734" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="3737" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3739" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="3757" href="Ledger.Conway.Specification.Utxo.html#3674" class="Bound">c</a> <a id="3759" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3761" href="Ledger.Conway.Specification.Utxo.html#3683" class="Bound">v</a> <a id="3763" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="3764" class="Symbol">)</a> <a id="3766" href="Ledger.Conway.Specification.Utxo.html#3685" class="Bound">certs</a>
             <a id="3785" class="Symbol">→</a> <a id="3787" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="3805" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="3808" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="3813" class="Symbol">(</a><a id="3814" href="Ledger.Core.Specification.Certs.html#2100" class="InductiveConstructor">delegate</a> <a id="3823" href="Ledger.Conway.Specification.Utxo.html#3674" class="Bound">c</a> <a id="3825" href="Ledger.Conway.Specification.Utxo.html#3676" class="Bound">del</a> <a id="3829" href="Ledger.Conway.Specification.Utxo.html#3680" class="Bound">kh</a> <a id="3832" href="Ledger.Conway.Specification.Utxo.html#3683" class="Bound">v</a> <a id="3834" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3836" href="Ledger.Conway.Specification.Utxo.html#3685" class="Bound">certs</a><a id="3841" class="Symbol">)</a>
  <a id="ValidCertDeposits.regpool"></a><a id="3845" href="Ledger.Conway.Specification.Utxo.html#3845" class="InductiveConstructor">regpool</a>    <a id="3856" class="Symbol">:</a> <a id="3858" class="Symbol">∀</a> <a id="3860" class="Symbol">{</a><a id="3861" href="Ledger.Conway.Specification.Utxo.html#3861" class="Bound">kh</a> <a id="3864" href="Ledger.Conway.Specification.Utxo.html#3864" class="Bound">p</a> <a id="3866" href="Ledger.Conway.Specification.Utxo.html#3866" class="Bound">certs</a><a id="3871" class="Symbol">}</a>
             <a id="3886" class="Symbol">→</a> <a id="3888" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="3906" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="3909" class="Symbol">(</a><a id="3910" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="3915" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="3918" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3920" href="Ledger.Core.Specification.Certs.html#617" class="InductiveConstructor">PoolDeposit</a> <a id="3932" href="Ledger.Conway.Specification.Utxo.html#3861" class="Bound">kh</a> <a id="3935" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3937" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="3940" class="Symbol">.</a><a id="3941" href="Ledger.Conway.Specification.PParams.html#2238" class="Field">poolDeposit</a> <a id="3953" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="3954" class="Symbol">)</a> <a id="3956" href="Ledger.Conway.Specification.Utxo.html#3866" class="Bound">certs</a>
             <a id="3975" class="Symbol">→</a> <a id="3977" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="3995" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="3998" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4003" class="Symbol">(</a><a id="4004" href="Ledger.Core.Specification.Certs.html#2221" class="InductiveConstructor">regpool</a> <a id="4012" href="Ledger.Conway.Specification.Utxo.html#3861" class="Bound">kh</a> <a id="4015" href="Ledger.Conway.Specification.Utxo.html#3864" class="Bound">p</a> <a id="4017" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4019" href="Ledger.Conway.Specification.Utxo.html#3866" class="Bound">certs</a><a id="4024" class="Symbol">)</a>
  <a id="ValidCertDeposits.regdrep"></a><a id="4028" href="Ledger.Conway.Specification.Utxo.html#4028" class="InductiveConstructor">regdrep</a>    <a id="4039" class="Symbol">:</a> <a id="4041" class="Symbol">∀</a> <a id="4043" class="Symbol">{</a><a id="4044" href="Ledger.Conway.Specification.Utxo.html#4044" class="Bound">c</a> <a id="4046" href="Ledger.Conway.Specification.Utxo.html#4046" class="Bound">v</a> <a id="4048" href="Ledger.Conway.Specification.Utxo.html#4048" class="Bound">a</a> <a id="4050" href="Ledger.Conway.Specification.Utxo.html#4050" class="Bound">certs</a><a id="4055" class="Symbol">}</a>
             <a id="4070" class="Symbol">→</a> <a id="4072" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4090" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4093" class="Symbol">(</a><a id="4094" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4099" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="4102" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4104" href="Ledger.Core.Specification.Certs.html#670" class="InductiveConstructor">DRepDeposit</a> <a id="4116" href="Ledger.Conway.Specification.Utxo.html#4044" class="Bound">c</a> <a id="4118" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4120" href="Ledger.Conway.Specification.Utxo.html#4046" class="Bound">v</a> <a id="4122" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4123" class="Symbol">)</a> <a id="4125" href="Ledger.Conway.Specification.Utxo.html#4050" class="Bound">certs</a>
             <a id="4144" class="Symbol">→</a> <a id="4146" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4164" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4167" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4172" class="Symbol">(</a><a id="4173" href="Ledger.Core.Specification.Certs.html#2311" class="InductiveConstructor">regdrep</a> <a id="4181" href="Ledger.Conway.Specification.Utxo.html#4044" class="Bound">c</a> <a id="4183" href="Ledger.Conway.Specification.Utxo.html#4046" class="Bound">v</a> <a id="4185" href="Ledger.Conway.Specification.Utxo.html#4048" class="Bound">a</a> <a id="4187" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4189" href="Ledger.Conway.Specification.Utxo.html#4050" class="Bound">certs</a><a id="4194" class="Symbol">)</a>
  <a id="ValidCertDeposits.reg"></a><a id="4198" href="Ledger.Conway.Specification.Utxo.html#4198" class="InductiveConstructor">reg</a>        <a id="4209" class="Symbol">:</a> <a id="4211" class="Symbol">∀</a> <a id="4213" class="Symbol">{</a><a id="4214" href="Ledger.Conway.Specification.Utxo.html#4214" class="Bound">c</a> <a id="4216" href="Ledger.Conway.Specification.Utxo.html#4216" class="Bound">v</a> <a id="4218" href="Ledger.Conway.Specification.Utxo.html#4218" class="Bound">certs</a><a id="4223" class="Symbol">}</a>
             <a id="4238" class="Symbol">→</a> <a id="4240" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4258" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4261" class="Symbol">(</a><a id="4262" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4267" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="4270" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4272" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="4290" href="Ledger.Conway.Specification.Utxo.html#4214" class="Bound">c</a> <a id="4292" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4294" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4297" class="Symbol">.</a><a id="4298" href="Ledger.Conway.Specification.PParams.html#2193" class="Field">keyDeposit</a> <a id="4309" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4310" class="Symbol">)</a> <a id="4312" href="Ledger.Conway.Specification.Utxo.html#4218" class="Bound">certs</a>
             <a id="4331" class="Symbol">→</a> <a id="4333" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4351" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4354" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4359" class="Symbol">(</a><a id="4360" href="Ledger.Core.Specification.Certs.html#2792" class="InductiveConstructor">reg</a> <a id="4364" href="Ledger.Conway.Specification.Utxo.html#4214" class="Bound">c</a> <a id="4366" href="Ledger.Conway.Specification.Utxo.html#4216" class="Bound">v</a> <a id="4368" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4370" href="Ledger.Conway.Specification.Utxo.html#4218" class="Bound">certs</a><a id="4375" class="Symbol">)</a>
  <a id="ValidCertDeposits.dereg"></a><a id="4379" href="Ledger.Conway.Specification.Utxo.html#4379" class="InductiveConstructor">dereg</a>      <a id="4390" class="Symbol">:</a> <a id="4392" class="Symbol">∀</a> <a id="4394" class="Symbol">{</a><a id="4395" href="Ledger.Conway.Specification.Utxo.html#4395" class="Bound">c</a> <a id="4397" href="Ledger.Conway.Specification.Utxo.html#4397" class="Bound">md</a> <a id="4400" href="Ledger.Conway.Specification.Utxo.html#4400" class="Bound">d</a> <a id="4402" href="Ledger.Conway.Specification.Utxo.html#4402" class="Bound">certs</a><a id="4407" class="Symbol">}</a>
             <a id="4422" class="Symbol">→</a> <a id="4424" class="Symbol">(</a><a id="4425" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="4443" href="Ledger.Conway.Specification.Utxo.html#4395" class="Bound">c</a> <a id="4445" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4447" href="Ledger.Conway.Specification.Utxo.html#4400" class="Bound">d</a><a id="4448" class="Symbol">)</a> <a id="4450" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="4452" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a>
             <a id="4470" class="Symbol">→</a> <a id="4472" href="Ledger.Conway.Specification.Utxo.html#4397" class="Bound">md</a> <a id="4475" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4477" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="4485" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4487" href="Ledger.Conway.Specification.Utxo.html#4397" class="Bound">md</a> <a id="4490" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="4492" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="4497" href="Ledger.Conway.Specification.Utxo.html#4400" class="Bound">d</a>
             <a id="4512" class="Symbol">→</a> <a id="4514" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4532" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4535" class="Symbol">(</a><a id="4536" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4541" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="4543" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4545" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="4563" href="Ledger.Conway.Specification.Utxo.html#4395" class="Bound">c</a> <a id="4565" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="4567" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="4568" class="Symbol">)</a> <a id="4570" href="Ledger.Conway.Specification.Utxo.html#4402" class="Bound">certs</a>
             <a id="4589" class="Symbol">→</a> <a id="4591" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4609" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4612" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4617" class="Symbol">(</a><a id="4618" href="Ledger.Core.Specification.Certs.html#2173" class="InductiveConstructor">dereg</a> <a id="4624" href="Ledger.Conway.Specification.Utxo.html#4395" class="Bound">c</a> <a id="4626" href="Ledger.Conway.Specification.Utxo.html#4397" class="Bound">md</a> <a id="4629" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4631" href="Ledger.Conway.Specification.Utxo.html#4402" class="Bound">certs</a><a id="4636" class="Symbol">)</a>
  <a id="ValidCertDeposits.deregdrep"></a><a id="4640" href="Ledger.Conway.Specification.Utxo.html#4640" class="InductiveConstructor">deregdrep</a>  <a id="4651" class="Symbol">:</a> <a id="4653" class="Symbol">∀</a> <a id="4655" class="Symbol">{</a><a id="4656" href="Ledger.Conway.Specification.Utxo.html#4656" class="Bound">c</a> <a id="4658" href="Ledger.Conway.Specification.Utxo.html#4658" class="Bound">d</a> <a id="4660" href="Ledger.Conway.Specification.Utxo.html#4660" class="Bound">certs</a><a id="4665" class="Symbol">}</a>
             <a id="4680" class="Symbol">→</a> <a id="4682" class="Symbol">(</a><a id="4683" href="Ledger.Core.Specification.Certs.html#670" class="InductiveConstructor">DRepDeposit</a> <a id="4695" href="Ledger.Conway.Specification.Utxo.html#4656" class="Bound">c</a> <a id="4697" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4699" href="Ledger.Conway.Specification.Utxo.html#4658" class="Bound">d</a><a id="4700" class="Symbol">)</a> <a id="4702" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="4704" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a>
             <a id="4722" class="Symbol">→</a> <a id="4724" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4742" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4745" class="Symbol">(</a><a id="4746" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4751" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="4753" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4755" href="Ledger.Core.Specification.Certs.html#670" class="InductiveConstructor">DRepDeposit</a> <a id="4767" href="Ledger.Conway.Specification.Utxo.html#4656" class="Bound">c</a> <a id="4769" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="4771" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="4772" class="Symbol">)</a> <a id="4774" href="Ledger.Conway.Specification.Utxo.html#4660" class="Bound">certs</a>
             <a id="4793" class="Symbol">→</a> <a id="4795" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4813" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4816" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4821" class="Symbol">(</a><a id="4822" href="Ledger.Core.Specification.Certs.html#2362" class="InductiveConstructor">deregdrep</a> <a id="4832" href="Ledger.Conway.Specification.Utxo.html#4656" class="Bound">c</a> <a id="4834" href="Ledger.Conway.Specification.Utxo.html#4658" class="Bound">d</a> <a id="4836" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4838" href="Ledger.Conway.Specification.Utxo.html#4660" class="Bound">certs</a><a id="4843" class="Symbol">)</a>
  <a id="ValidCertDeposits.ccreghot"></a><a id="4847" href="Ledger.Conway.Specification.Utxo.html#4847" class="InductiveConstructor">ccreghot</a>   <a id="4858" class="Symbol">:</a> <a id="4860" class="Symbol">∀</a> <a id="4862" class="Symbol">{</a><a id="4863" href="Ledger.Conway.Specification.Utxo.html#4863" class="Bound">c</a> <a id="4865" href="Ledger.Conway.Specification.Utxo.html#4865" class="Bound">v</a> <a id="4867" href="Ledger.Conway.Specification.Utxo.html#4867" class="Bound">certs</a><a id="4872" class="Symbol">}</a>
             <a id="4887" class="Symbol">→</a> <a id="4889" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4907" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4910" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4915" href="Ledger.Conway.Specification.Utxo.html#4867" class="Bound">certs</a>
             <a id="4934" class="Symbol">→</a> <a id="4936" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="4954" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="4957" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="4962" class="Symbol">(</a><a id="4963" href="Ledger.Core.Specification.Certs.html#2404" class="InductiveConstructor">ccreghot</a> <a id="4972" href="Ledger.Conway.Specification.Utxo.html#4863" class="Bound">c</a> <a id="4974" href="Ledger.Conway.Specification.Utxo.html#4865" class="Bound">v</a> <a id="4976" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4978" href="Ledger.Conway.Specification.Utxo.html#4867" class="Bound">certs</a><a id="4983" class="Symbol">)</a>
  <a id="ValidCertDeposits.retirepool"></a><a id="4987" href="Ledger.Conway.Specification.Utxo.html#4987" class="InductiveConstructor">retirepool</a> <a id="4998" class="Symbol">:</a> <a id="5000" class="Symbol">∀</a> <a id="5002" class="Symbol">{</a><a id="5003" href="Ledger.Conway.Specification.Utxo.html#5003" class="Bound">kh</a> <a id="5006" href="Ledger.Conway.Specification.Utxo.html#5006" class="Bound">e</a> <a id="5008" href="Ledger.Conway.Specification.Utxo.html#5008" class="Bound">certs</a><a id="5013" class="Symbol">}</a>
             <a id="5028" class="Symbol">→</a> <a id="5030" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="5048" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="5051" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="5056" href="Ledger.Conway.Specification.Utxo.html#5008" class="Bound">certs</a>
             <a id="5075" class="Symbol">→</a> <a id="5077" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="5095" href="Ledger.Conway.Specification.Utxo.html#3551" class="Bound">pp</a> <a id="5098" href="Ledger.Conway.Specification.Utxo.html#3566" class="Bound">deps</a> <a id="5103" class="Symbol">(</a><a id="5104" href="Ledger.Core.Specification.Certs.html#2271" class="InductiveConstructor">retirepool</a> <a id="5115" href="Ledger.Conway.Specification.Utxo.html#5003" class="Bound">kh</a> <a id="5118" href="Ledger.Conway.Specification.Utxo.html#5006" class="Bound">e</a>  <a id="5121" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5123" href="Ledger.Conway.Specification.Utxo.html#5008" class="Bound">certs</a><a id="5128" class="Symbol">)</a>

<a id="5131" class="Keyword">private</a>
  <a id="validCertDeposits?"></a><a id="5141" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5160" class="Symbol">:</a> <a id="5162" class="Symbol">∀</a> <a id="5164" class="Symbol">{</a><a id="5165" href="Ledger.Conway.Specification.Utxo.html#5165" class="Bound">pp</a><a id="5167" class="Symbol">}</a> <a id="5169" href="Ledger.Conway.Specification.Utxo.html#5169" class="Bound">deps</a> <a id="5174" href="Ledger.Conway.Specification.Utxo.html#5174" class="Bound">certs</a> <a id="5180" class="Symbol">→</a> <a id="5182" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="5186" class="Symbol">(</a><a id="5187" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="5205" href="Ledger.Conway.Specification.Utxo.html#5165" class="Bound">pp</a> <a id="5208" href="Ledger.Conway.Specification.Utxo.html#5169" class="Bound">deps</a> <a id="5213" href="Ledger.Conway.Specification.Utxo.html#5174" class="Bound">certs</a><a id="5218" class="Symbol">)</a>
  <a id="5222" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5241" href="Ledger.Conway.Specification.Utxo.html#5241" class="Bound">deps</a> <a id="5246" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="5249" class="Symbol">=</a> <a id="5251" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="5255" href="Ledger.Conway.Specification.Utxo.html#3614" class="InductiveConstructor">[]</a>
  <a id="5260" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5279" href="Ledger.Conway.Specification.Utxo.html#5279" class="Bound">deps</a> <a id="5284" class="Symbol">(</a><a id="5285" href="Ledger.Core.Specification.Certs.html#2100" class="InductiveConstructor">delegate</a> <a id="5294" class="Symbol">_</a> <a id="5296" class="Symbol">_</a> <a id="5298" class="Symbol">_</a> <a id="5300" class="Symbol">_</a> <a id="5302" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5304" href="Ledger.Conway.Specification.Utxo.html#5304" class="Bound">certs</a><a id="5309" class="Symbol">)</a> <a id="5311" class="Symbol">=</a>
    <a id="5317" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5324" href="Ledger.Conway.Specification.Utxo.html#3658" class="InductiveConstructor">delegate</a> <a id="5333" class="Symbol">(λ</a> <a id="5336" class="Keyword">where</a> <a id="5342" class="Symbol">(</a><a id="5343" href="Ledger.Conway.Specification.Utxo.html#3658" class="InductiveConstructor">delegate</a> <a id="5352" href="Ledger.Conway.Specification.Utxo.html#5352" class="Bound">p</a><a id="5353" class="Symbol">)</a> <a id="5355" class="Symbol">→</a> <a id="5357" href="Ledger.Conway.Specification.Utxo.html#5352" class="Bound">p</a><a id="5358" class="Symbol">)</a> <a id="5360" class="Symbol">(</a><a id="5361" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5380" class="Symbol">_</a> <a id="5382" class="Symbol">_)</a>
  <a id="5387" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5406" href="Ledger.Conway.Specification.Utxo.html#5406" class="Bound">deps</a> <a id="5411" class="Symbol">(</a><a id="5412" href="Ledger.Core.Specification.Certs.html#2221" class="InductiveConstructor">regpool</a> <a id="5420" class="Symbol">_</a> <a id="5422" class="Symbol">_</a> <a id="5424" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5426" href="Ledger.Conway.Specification.Utxo.html#5426" class="Bound">certs</a><a id="5431" class="Symbol">)</a> <a id="5433" class="Symbol">=</a>
    <a id="5439" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5446" href="Ledger.Conway.Specification.Utxo.html#3845" class="InductiveConstructor">regpool</a> <a id="5454" class="Symbol">(λ</a> <a id="5457" class="Keyword">where</a> <a id="5463" class="Symbol">(</a><a id="5464" href="Ledger.Conway.Specification.Utxo.html#3845" class="InductiveConstructor">regpool</a> <a id="5472" href="Ledger.Conway.Specification.Utxo.html#5472" class="Bound">p</a><a id="5473" class="Symbol">)</a> <a id="5475" class="Symbol">→</a> <a id="5477" href="Ledger.Conway.Specification.Utxo.html#5472" class="Bound">p</a><a id="5478" class="Symbol">)</a> <a id="5480" class="Symbol">(</a><a id="5481" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5500" class="Symbol">_</a> <a id="5502" class="Symbol">_)</a>
  <a id="5507" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5526" href="Ledger.Conway.Specification.Utxo.html#5526" class="Bound">deps</a> <a id="5531" class="Symbol">(</a><a id="5532" href="Ledger.Core.Specification.Certs.html#2311" class="InductiveConstructor">regdrep</a> <a id="5540" class="Symbol">_</a> <a id="5542" class="Symbol">_</a> <a id="5544" class="Symbol">_</a> <a id="5546" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5548" href="Ledger.Conway.Specification.Utxo.html#5548" class="Bound">certs</a><a id="5553" class="Symbol">)</a> <a id="5555" class="Symbol">=</a>
    <a id="5561" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5568" href="Ledger.Conway.Specification.Utxo.html#4028" class="InductiveConstructor">regdrep</a> <a id="5576" class="Symbol">(λ</a> <a id="5579" class="Keyword">where</a> <a id="5585" class="Symbol">(</a><a id="5586" href="Ledger.Conway.Specification.Utxo.html#4028" class="InductiveConstructor">regdrep</a> <a id="5594" href="Ledger.Conway.Specification.Utxo.html#5594" class="Bound">p</a><a id="5595" class="Symbol">)</a> <a id="5597" class="Symbol">→</a> <a id="5599" href="Ledger.Conway.Specification.Utxo.html#5594" class="Bound">p</a><a id="5600" class="Symbol">)</a> <a id="5602" class="Symbol">(</a><a id="5603" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5622" class="Symbol">_</a> <a id="5624" class="Symbol">_)</a>
  <a id="5629" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5648" href="Ledger.Conway.Specification.Utxo.html#5648" class="Bound">deps</a> <a id="5653" class="Symbol">(</a><a id="5654" href="Ledger.Core.Specification.Certs.html#2271" class="InductiveConstructor">retirepool</a> <a id="5665" class="Symbol">_</a> <a id="5667" class="Symbol">_</a> <a id="5669" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5671" href="Ledger.Conway.Specification.Utxo.html#5671" class="Bound">certs</a><a id="5676" class="Symbol">)</a> <a id="5678" class="Symbol">=</a>
    <a id="5684" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5691" href="Ledger.Conway.Specification.Utxo.html#4987" class="InductiveConstructor">retirepool</a> <a id="5702" class="Symbol">(λ</a> <a id="5705" class="Keyword">where</a> <a id="5711" class="Symbol">(</a><a id="5712" href="Ledger.Conway.Specification.Utxo.html#4987" class="InductiveConstructor">retirepool</a> <a id="5723" href="Ledger.Conway.Specification.Utxo.html#5723" class="Bound">p</a><a id="5724" class="Symbol">)</a> <a id="5726" class="Symbol">→</a> <a id="5728" href="Ledger.Conway.Specification.Utxo.html#5723" class="Bound">p</a><a id="5729" class="Symbol">)</a> <a id="5731" class="Symbol">(</a><a id="5732" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5751" class="Symbol">_</a> <a id="5753" class="Symbol">_)</a>
  <a id="5758" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5777" href="Ledger.Conway.Specification.Utxo.html#5777" class="Bound">deps</a> <a id="5782" class="Symbol">(</a><a id="5783" href="Ledger.Core.Specification.Certs.html#2404" class="InductiveConstructor">ccreghot</a> <a id="5792" class="Symbol">_</a> <a id="5794" class="Symbol">_</a> <a id="5796" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5798" href="Ledger.Conway.Specification.Utxo.html#5798" class="Bound">certs</a><a id="5803" class="Symbol">)</a> <a id="5805" class="Symbol">=</a>
    <a id="5811" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5818" href="Ledger.Conway.Specification.Utxo.html#4847" class="InductiveConstructor">ccreghot</a> <a id="5827" class="Symbol">(λ</a> <a id="5830" class="Keyword">where</a> <a id="5836" class="Symbol">(</a><a id="5837" href="Ledger.Conway.Specification.Utxo.html#4847" class="InductiveConstructor">ccreghot</a> <a id="5846" href="Ledger.Conway.Specification.Utxo.html#5846" class="Bound">p</a><a id="5847" class="Symbol">)</a> <a id="5849" class="Symbol">→</a> <a id="5851" href="Ledger.Conway.Specification.Utxo.html#5846" class="Bound">p</a><a id="5852" class="Symbol">)</a> <a id="5854" class="Symbol">(</a><a id="5855" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5874" class="Symbol">_</a> <a id="5876" class="Symbol">_)</a>
  <a id="5881" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5900" href="Ledger.Conway.Specification.Utxo.html#5900" class="Bound">deps</a> <a id="5905" class="Symbol">(</a><a id="5906" href="Ledger.Core.Specification.Certs.html#2792" class="InductiveConstructor">reg</a> <a id="5910" class="Symbol">_</a> <a id="5912" class="Symbol">_</a> <a id="5914" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5916" href="Ledger.Conway.Specification.Utxo.html#5916" class="Bound">certs</a><a id="5921" class="Symbol">)</a> <a id="5923" class="Symbol">=</a>
    <a id="5929" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="5936" href="Ledger.Conway.Specification.Utxo.html#4198" class="InductiveConstructor">reg</a> <a id="5940" class="Symbol">(λ</a> <a id="5943" class="Keyword">where</a> <a id="5949" class="Symbol">(</a><a id="5950" href="Ledger.Conway.Specification.Utxo.html#4198" class="InductiveConstructor">reg</a> <a id="5954" href="Ledger.Conway.Specification.Utxo.html#5954" class="Bound">p</a><a id="5955" class="Symbol">)</a> <a id="5957" class="Symbol">→</a> <a id="5959" href="Ledger.Conway.Specification.Utxo.html#5954" class="Bound">p</a><a id="5960" class="Symbol">)</a> <a id="5962" class="Symbol">(</a><a id="5963" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="5982" class="Symbol">_</a> <a id="5984" class="Symbol">_)</a>
  <a id="5989" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="6008" href="Ledger.Conway.Specification.Utxo.html#6008" class="Bound">deps</a> <a id="6013" class="Symbol">(</a><a id="6014" href="Ledger.Core.Specification.Certs.html#2173" class="InductiveConstructor">dereg</a> <a id="6020" href="Ledger.Conway.Specification.Utxo.html#6020" class="Bound">c</a> <a id="6022" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="6030" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6032" href="Ledger.Conway.Specification.Utxo.html#6032" class="Bound">certs</a><a id="6037" class="Symbol">)</a> <a id="6039" class="Keyword">with</a> <a id="6044" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="6046" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="6064" href="Ledger.Conway.Specification.Utxo.html#6020" class="Bound">c</a> <a id="6066" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="6068" href="Class.IsSet.html#916" class="Function">dom</a> <a id="6072" href="Ledger.Conway.Specification.Utxo.html#6008" class="Bound">deps</a> <a id="6077" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="6081" class="Symbol">...</a> <a id="6085" class="Symbol">|</a> <a id="6087" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6091" href="Ledger.Conway.Specification.Utxo.html#6091" class="Bound">p</a> <a id="6093" class="Symbol">=</a> <a id="6095" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6102" class="Symbol">(</a><a id="6103" href="Ledger.Conway.Specification.Utxo.html#4379" class="InductiveConstructor">dereg</a> <a id="6109" class="Symbol">(</a><a id="6110" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="6116" class="Symbol">(</a><a id="6117" href="Function.Bundles.html#4832" class="Field">Equivalence.from</a> <a id="6134" href="Axiom.Set.Rel.html#2687" class="Function">dom∈</a> <a id="6139" href="Ledger.Conway.Specification.Utxo.html#6091" class="Bound">p</a><a id="6140" class="Symbol">))</a> <a id="6143" class="Symbol">(</a><a id="6144" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="6149" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="6153" class="Symbol">))</a> <a id="6156" class="Symbol">(λ</a> <a id="6159" class="Symbol">{</a> <a id="6161" class="Symbol">(</a><a id="6162" href="Ledger.Conway.Specification.Utxo.html#4379" class="InductiveConstructor">dereg</a> <a id="6168" class="Symbol">_</a> <a id="6170" class="Symbol">_</a> <a id="6172" href="Ledger.Conway.Specification.Utxo.html#6172" class="Bound">p</a><a id="6173" class="Symbol">)</a> <a id="6175" class="Symbol">→</a> <a id="6177" href="Ledger.Conway.Specification.Utxo.html#6172" class="Bound">p</a> <a id="6179" class="Symbol">})</a> <a id="6182" class="Symbol">(</a><a id="6183" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="6202" class="Symbol">_</a> <a id="6204" class="Symbol">_)</a>
  <a id="6209" class="Symbol">...</a> <a id="6213" class="Symbol">|</a> <a id="6215" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6218" href="Ledger.Conway.Specification.Utxo.html#6218" class="Bound">¬p</a> <a id="6221" class="Symbol">=</a> <a id="6223" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6226" class="Symbol">λ</a> <a id="6228" class="Symbol">{</a> <a id="6230" class="Symbol">(</a><a id="6231" href="Ledger.Conway.Specification.Utxo.html#4379" class="InductiveConstructor">dereg</a> <a id="6237" href="Ledger.Conway.Specification.Utxo.html#6237" class="Bound">x</a> <a id="6239" class="Symbol">_</a> <a id="6241" class="Symbol">_)</a> <a id="6244" class="Symbol">→</a> <a id="6246" href="Ledger.Conway.Specification.Utxo.html#6218" class="Bound">¬p</a> <a id="6249" class="Symbol">(</a><a id="6250" href="Function.Bundles.html#4808" class="Field">Equivalence.to</a> <a id="6265" href="Axiom.Set.Rel.html#2687" class="Function">dom∈</a> <a id="6270" class="Symbol">(_</a> <a id="6273" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6275" href="Ledger.Conway.Specification.Utxo.html#6237" class="Bound">x</a><a id="6276" class="Symbol">))</a> <a id="6279" class="Symbol">}</a>
  <a id="6283" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="6302" href="Ledger.Conway.Specification.Utxo.html#6302" class="Bound">deps</a> <a id="6307" class="Symbol">(</a><a id="6308" href="Ledger.Core.Specification.Certs.html#2173" class="InductiveConstructor">dereg</a> <a id="6314" href="Ledger.Conway.Specification.Utxo.html#6314" class="Bound">c</a> <a id="6316" class="Symbol">(</a><a id="6317" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="6322" href="Ledger.Conway.Specification.Utxo.html#6322" class="Bound">d</a><a id="6323" class="Symbol">)</a> <a id="6325" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6327" href="Ledger.Conway.Specification.Utxo.html#6327" class="Bound">certs</a><a id="6332" class="Symbol">)</a> <a id="6334" class="Keyword">with</a> <a id="6339" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="6341" class="Symbol">(</a><a id="6342" href="Ledger.Core.Specification.Certs.html#564" class="InductiveConstructor">CredentialDeposit</a> <a id="6360" href="Ledger.Conway.Specification.Utxo.html#6314" class="Bound">c</a> <a id="6362" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6364" href="Ledger.Conway.Specification.Utxo.html#6322" class="Bound">d</a><a id="6365" class="Symbol">)</a> <a id="6367" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="6369" href="Ledger.Conway.Specification.Utxo.html#6302" class="Bound">deps</a> <a id="6374" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="6378" class="Symbol">...</a> <a id="6382" class="Symbol">|</a> <a id="6384" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6388" href="Ledger.Conway.Specification.Utxo.html#6388" class="Bound">p</a> <a id="6390" class="Symbol">=</a> <a id="6392" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6399" class="Symbol">(</a><a id="6400" href="Ledger.Conway.Specification.Utxo.html#4379" class="InductiveConstructor">dereg</a> <a id="6406" href="Ledger.Conway.Specification.Utxo.html#6388" class="Bound">p</a> <a id="6408" class="Symbol">(</a><a id="6409" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6414" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="6418" class="Symbol">))</a> <a id="6421" class="Symbol">(λ</a> <a id="6424" class="Symbol">{</a> <a id="6426" class="Symbol">(</a><a id="6427" href="Ledger.Conway.Specification.Utxo.html#4379" class="InductiveConstructor">dereg</a> <a id="6433" class="Symbol">_</a> <a id="6435" class="Symbol">_</a> <a id="6437" href="Ledger.Conway.Specification.Utxo.html#6437" class="Bound">p</a><a id="6438" class="Symbol">)</a> <a id="6440" class="Symbol">→</a> <a id="6442" href="Ledger.Conway.Specification.Utxo.html#6437" class="Bound">p</a> <a id="6444" class="Symbol">})</a> <a id="6447" class="Symbol">(</a><a id="6448" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="6467" class="Symbol">_</a> <a id="6469" class="Symbol">_)</a>
  <a id="6474" class="Symbol">...</a> <a id="6478" class="Symbol">|</a> <a id="6480" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6483" href="Ledger.Conway.Specification.Utxo.html#6483" class="Bound">¬p</a> <a id="6486" class="Symbol">=</a> <a id="6488" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6491" class="Symbol">λ</a> <a id="6493" class="Symbol">{</a> <a id="6495" class="Symbol">(</a><a id="6496" href="Ledger.Conway.Specification.Utxo.html#4379" class="InductiveConstructor">dereg</a> <a id="6502" href="Ledger.Conway.Specification.Utxo.html#6502" class="Bound">x</a> <a id="6504" class="Symbol">(</a><a id="6505" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="6510" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="6514" class="Symbol">)</a> <a id="6516" class="Symbol">_)</a> <a id="6519" class="Symbol">→</a> <a id="6521" href="Ledger.Conway.Specification.Utxo.html#6483" class="Bound">¬p</a> <a id="6524" href="Ledger.Conway.Specification.Utxo.html#6502" class="Bound">x</a> <a id="6526" class="Symbol">}</a>
  <a id="6530" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="6549" href="Ledger.Conway.Specification.Utxo.html#6549" class="Bound">deps</a> <a id="6554" class="Symbol">(</a><a id="6555" href="Ledger.Core.Specification.Certs.html#2362" class="InductiveConstructor">deregdrep</a> <a id="6565" href="Ledger.Conway.Specification.Utxo.html#6565" class="Bound">c</a> <a id="6567" href="Ledger.Conway.Specification.Utxo.html#6567" class="Bound">d</a> <a id="6569" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6571" href="Ledger.Conway.Specification.Utxo.html#6571" class="Bound">certs</a><a id="6576" class="Symbol">)</a> <a id="6578" class="Keyword">with</a> <a id="6583" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="6585" class="Symbol">(</a><a id="6586" href="Ledger.Core.Specification.Certs.html#670" class="InductiveConstructor">DRepDeposit</a> <a id="6598" href="Ledger.Conway.Specification.Utxo.html#6565" class="Bound">c</a> <a id="6600" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6602" href="Ledger.Conway.Specification.Utxo.html#6567" class="Bound">d</a><a id="6603" class="Symbol">)</a> <a id="6605" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="6607" href="Ledger.Conway.Specification.Utxo.html#6549" class="Bound">deps</a> <a id="6612" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a>
  <a id="6616" class="Symbol">...</a> <a id="6620" class="Symbol">|</a> <a id="6622" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="6626" href="Ledger.Conway.Specification.Utxo.html#6626" class="Bound">p</a> <a id="6628" class="Symbol">=</a> <a id="6630" href="Relation.Nullary.Decidable.Core.html#6309" class="Function">mapDec</a> <a id="6637" class="Symbol">(</a><a id="6638" href="Ledger.Conway.Specification.Utxo.html#4640" class="InductiveConstructor">deregdrep</a> <a id="6648" href="Ledger.Conway.Specification.Utxo.html#6626" class="Bound">p</a><a id="6649" class="Symbol">)</a>  <a id="6652" class="Symbol">(λ</a> <a id="6655" class="Keyword">where</a> <a id="6661" class="Symbol">(</a><a id="6662" href="Ledger.Conway.Specification.Utxo.html#4640" class="InductiveConstructor">deregdrep</a> <a id="6672" class="Symbol">_</a> <a id="6674" href="Ledger.Conway.Specification.Utxo.html#6674" class="Bound">v</a><a id="6675" class="Symbol">)</a> <a id="6677" class="Symbol">→</a> <a id="6679" href="Ledger.Conway.Specification.Utxo.html#6674" class="Bound">v</a><a id="6680" class="Symbol">)</a> <a id="6682" class="Symbol">(</a><a id="6683" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="6702" class="Symbol">_</a> <a id="6704" class="Symbol">_)</a>
  <a id="6709" class="Symbol">...</a> <a id="6713" class="Symbol">|</a> <a id="6715" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6718" href="Ledger.Conway.Specification.Utxo.html#6718" class="Bound">¬p</a> <a id="6721" class="Symbol">=</a> <a id="6723" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="6726" class="Symbol">(λ</a> <a id="6729" class="Keyword">where</a> <a id="6735" class="Symbol">(</a><a id="6736" href="Ledger.Conway.Specification.Utxo.html#4640" class="InductiveConstructor">deregdrep</a> <a id="6746" href="Ledger.Conway.Specification.Utxo.html#6746" class="Bound">p</a> <a id="6748" class="Symbol">_)</a> <a id="6751" class="Symbol">→</a> <a id="6753" href="Ledger.Conway.Specification.Utxo.html#6718" class="Bound">¬p</a> <a id="6756" href="Ledger.Conway.Specification.Utxo.html#6746" class="Bound">p</a><a id="6757" class="Symbol">)</a>

<a id="6760" class="Keyword">instance</a>
  <a id="Dec-ValidCertDeposits"></a><a id="6771" href="Ledger.Conway.Specification.Utxo.html#6771" class="Function">Dec-ValidCertDeposits</a> <a id="6793" class="Symbol">:</a> <a id="6795" class="Symbol">∀</a> <a id="6797" class="Symbol">{</a><a id="6798" href="Ledger.Conway.Specification.Utxo.html#6798" class="Bound">pp</a> <a id="6801" href="Ledger.Conway.Specification.Utxo.html#6801" class="Bound">deps</a> <a id="6806" href="Ledger.Conway.Specification.Utxo.html#6806" class="Bound">certs</a><a id="6811" class="Symbol">}</a> <a id="6813" class="Symbol">→</a> <a id="6815" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="6833" href="Ledger.Conway.Specification.Utxo.html#6798" class="Bound">pp</a> <a id="6836" href="Ledger.Conway.Specification.Utxo.html#6801" class="Bound">deps</a> <a id="6841" href="Ledger.Conway.Specification.Utxo.html#6806" class="Bound">certs</a> <a id="6847" href="Class.Decidable.Core.html#217" class="Record Operator">⁇</a>
  <a id="6851" href="Ledger.Conway.Specification.Utxo.html#6771" class="Function">Dec-ValidCertDeposits</a> <a id="6873" class="Symbol">=</a> <a id="6875" href="Class.Decidable.Core.html#262" class="InductiveConstructor Operator">⁇</a> <a id="6877" class="Symbol">(</a><a id="6878" href="Ledger.Conway.Specification.Utxo.html#5141" class="Function">validCertDeposits?</a> <a id="6897" class="Symbol">_</a> <a id="6899" class="Symbol">_)</a>


<a id="updateCertDeposits"></a><a id="6904" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a>  <a id="6924" class="Symbol">:</a> <a id="6926" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="6934" class="Symbol">→</a> <a id="6936" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6941" href="Ledger.Core.Specification.Certs.html#2079" class="Datatype">DCert</a> <a id="6947" class="Symbol">→</a> <a id="6949" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a> <a id="6958" class="Symbol">→</a> <a id="6960" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a>
<a id="6969" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="6988" href="Ledger.Conway.Specification.Utxo.html#6988" class="Bound">pp</a> <a id="6991" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="6994" href="Ledger.Conway.Specification.Utxo.html#6994" class="Bound">deposits</a> <a id="7003" class="Symbol">=</a> <a id="7005" href="Ledger.Conway.Specification.Utxo.html#6994" class="Bound">deposits</a>


<a id="7016" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7035" href="Ledger.Conway.Specification.Utxo.html#7035" class="Bound">pp</a> <a id="7038" class="Symbol">(</a><a id="7039" href="Ledger.Core.Specification.Certs.html#2792" class="InductiveConstructor">reg</a> <a id="7043" href="Ledger.Conway.Specification.Utxo.html#7043" class="Bound">c</a> <a id="7045" href="Ledger.Conway.Specification.Utxo.html#7045" class="Bound">v</a> <a id="7047" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7049" href="Ledger.Conway.Specification.Utxo.html#7049" class="Bound">certs</a><a id="7054" class="Symbol">)</a> <a id="7056" href="Ledger.Conway.Specification.Utxo.html#7056" class="Bound">deposits</a>
  <a id="7067" class="Symbol">=</a> <a id="7069" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7088" href="Ledger.Conway.Specification.Utxo.html#7035" class="Bound">pp</a> <a id="7091" href="Ledger.Conway.Specification.Utxo.html#7049" class="Bound">certs</a> <a id="7097" class="Symbol">(</a><a id="7098" href="Ledger.Conway.Specification.Utxo.html#7056" class="Bound">deposits</a> <a id="7107" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="7110" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="7122" class="Symbol">(</a><a id="7123" href="Ledger.Core.Specification.Certs.html#2792" class="InductiveConstructor">reg</a> <a id="7127" href="Ledger.Conway.Specification.Utxo.html#7043" class="Bound">c</a> <a id="7129" href="Ledger.Conway.Specification.Utxo.html#7045" class="Bound">v</a><a id="7130" class="Symbol">)</a> <a id="7132" href="Ledger.Conway.Specification.Utxo.html#7035" class="Bound">pp</a><a id="7134" class="Symbol">)</a>


<a id="7138" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7157" href="Ledger.Conway.Specification.Utxo.html#7157" class="Bound">pp</a> <a id="7160" class="Symbol">(</a><a id="7161" href="Ledger.Core.Specification.Certs.html#2100" class="InductiveConstructor">delegate</a> <a id="7170" href="Ledger.Conway.Specification.Utxo.html#7170" class="Bound">c</a> <a id="7172" href="Ledger.Conway.Specification.Utxo.html#7172" class="Bound">vd</a> <a id="7175" href="Ledger.Conway.Specification.Utxo.html#7175" class="Bound">khs</a> <a id="7179" href="Ledger.Conway.Specification.Utxo.html#7179" class="Bound">v</a> <a id="7181" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7183" href="Ledger.Conway.Specification.Utxo.html#7183" class="Bound">certs</a><a id="7188" class="Symbol">)</a> <a id="7190" href="Ledger.Conway.Specification.Utxo.html#7190" class="Bound">deposits</a>
  <a id="7201" class="Symbol">=</a> <a id="7203" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7222" href="Ledger.Conway.Specification.Utxo.html#7157" class="Bound">pp</a> <a id="7225" href="Ledger.Conway.Specification.Utxo.html#7183" class="Bound">certs</a> <a id="7231" class="Symbol">(</a><a id="7232" href="Ledger.Conway.Specification.Utxo.html#7190" class="Bound">deposits</a> <a id="7241" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="7244" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="7256" class="Symbol">(</a><a id="7257" href="Ledger.Core.Specification.Certs.html#2100" class="InductiveConstructor">delegate</a> <a id="7266" href="Ledger.Conway.Specification.Utxo.html#7170" class="Bound">c</a> <a id="7268" href="Ledger.Conway.Specification.Utxo.html#7172" class="Bound">vd</a> <a id="7271" href="Ledger.Conway.Specification.Utxo.html#7175" class="Bound">khs</a> <a id="7275" href="Ledger.Conway.Specification.Utxo.html#7179" class="Bound">v</a><a id="7276" class="Symbol">)</a> <a id="7278" href="Ledger.Conway.Specification.Utxo.html#7157" class="Bound">pp</a><a id="7280" class="Symbol">)</a>
<a id="7282" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7301" href="Ledger.Conway.Specification.Utxo.html#7301" class="Bound">pp</a> <a id="7304" class="Symbol">(</a><a id="7305" href="Ledger.Core.Specification.Certs.html#2221" class="InductiveConstructor">regpool</a> <a id="7313" href="Ledger.Conway.Specification.Utxo.html#7313" class="Bound">kh</a> <a id="7316" href="Ledger.Conway.Specification.Utxo.html#7316" class="Bound">p</a> <a id="7318" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7320" href="Ledger.Conway.Specification.Utxo.html#7320" class="Bound">certs</a><a id="7325" class="Symbol">)</a> <a id="7327" href="Ledger.Conway.Specification.Utxo.html#7327" class="Bound">deposits</a>
  <a id="7338" class="Comment">-- pool deposits are not added a second time if they are already present</a>
  <a id="7413" class="Comment">-- (reregistrations or duplicate certificates).</a>
  <a id="7463" class="Symbol">=</a> <a id="7465" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7484" href="Ledger.Conway.Specification.Utxo.html#7301" class="Bound">pp</a> <a id="7487" href="Ledger.Conway.Specification.Utxo.html#7320" class="Bound">certs</a> <a id="7493" class="Symbol">(</a><a id="7494" href="Ledger.Conway.Specification.Utxo.html#7327" class="Bound">deposits</a> <a id="7503" href="Axiom.Set.Map.html#7640" class="Function Operator">∪ˡ</a> <a id="7506" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="7518" class="Symbol">(</a><a id="7519" href="Ledger.Core.Specification.Certs.html#2221" class="InductiveConstructor">regpool</a> <a id="7527" href="Ledger.Conway.Specification.Utxo.html#7313" class="Bound">kh</a> <a id="7530" href="Ledger.Conway.Specification.Utxo.html#7316" class="Bound">p</a><a id="7531" class="Symbol">)</a> <a id="7533" href="Ledger.Conway.Specification.Utxo.html#7301" class="Bound">pp</a><a id="7535" class="Symbol">)</a>
<a id="7537" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7556" href="Ledger.Conway.Specification.Utxo.html#7556" class="Bound">pp</a> <a id="7559" class="Symbol">(</a><a id="7560" href="Ledger.Core.Specification.Certs.html#2311" class="InductiveConstructor">regdrep</a> <a id="7568" href="Ledger.Conway.Specification.Utxo.html#7568" class="Bound">c</a> <a id="7570" href="Ledger.Conway.Specification.Utxo.html#7570" class="Bound">v</a> <a id="7572" href="Ledger.Conway.Specification.Utxo.html#7572" class="Bound">a</a> <a id="7574" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7576" href="Ledger.Conway.Specification.Utxo.html#7576" class="Bound">certs</a><a id="7581" class="Symbol">)</a> <a id="7583" href="Ledger.Conway.Specification.Utxo.html#7583" class="Bound">deposits</a>
  <a id="7594" class="Symbol">=</a> <a id="7596" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7615" href="Ledger.Conway.Specification.Utxo.html#7556" class="Bound">pp</a> <a id="7618" href="Ledger.Conway.Specification.Utxo.html#7576" class="Bound">certs</a> <a id="7624" class="Symbol">(</a><a id="7625" href="Ledger.Conway.Specification.Utxo.html#7583" class="Bound">deposits</a> <a id="7634" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="7637" href="Ledger.Conway.Specification.Utxo.html#2996" class="Function">certDeposit</a> <a id="7649" class="Symbol">(</a><a id="7650" href="Ledger.Core.Specification.Certs.html#2311" class="InductiveConstructor">regdrep</a> <a id="7658" href="Ledger.Conway.Specification.Utxo.html#7568" class="Bound">c</a> <a id="7660" href="Ledger.Conway.Specification.Utxo.html#7570" class="Bound">v</a> <a id="7662" href="Ledger.Conway.Specification.Utxo.html#7572" class="Bound">a</a><a id="7663" class="Symbol">)</a> <a id="7665" href="Ledger.Conway.Specification.Utxo.html#7556" class="Bound">pp</a><a id="7667" class="Symbol">)</a>
<a id="7669" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7688" href="Ledger.Conway.Specification.Utxo.html#7688" class="Bound">pp</a> <a id="7691" class="Symbol">(</a><a id="7692" href="Ledger.Core.Specification.Certs.html#2173" class="InductiveConstructor">dereg</a> <a id="7698" href="Ledger.Conway.Specification.Utxo.html#7698" class="Bound">c</a> <a id="7700" href="Ledger.Conway.Specification.Utxo.html#7700" class="Bound">v</a> <a id="7702" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7704" href="Ledger.Conway.Specification.Utxo.html#7704" class="Bound">certs</a><a id="7709" class="Symbol">)</a> <a id="7711" href="Ledger.Conway.Specification.Utxo.html#7711" class="Bound">deposits</a>
  <a id="7722" class="Symbol">=</a> <a id="7724" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7743" href="Ledger.Conway.Specification.Utxo.html#7688" class="Bound">pp</a> <a id="7746" href="Ledger.Conway.Specification.Utxo.html#7704" class="Bound">certs</a> <a id="7752" class="Symbol">(</a><a id="7753" href="Ledger.Conway.Specification.Utxo.html#7711" class="Bound">deposits</a> <a id="7762" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="7764" href="Ledger.Conway.Specification.Utxo.html#3353" class="Function">certRefund</a> <a id="7775" class="Symbol">(</a><a id="7776" href="Ledger.Core.Specification.Certs.html#2173" class="InductiveConstructor">dereg</a> <a id="7782" href="Ledger.Conway.Specification.Utxo.html#7698" class="Bound">c</a> <a id="7784" href="Ledger.Conway.Specification.Utxo.html#7700" class="Bound">v</a><a id="7785" class="Symbol">)</a><a id="7786" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="7787" class="Symbol">)</a>
<a id="7789" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7808" href="Ledger.Conway.Specification.Utxo.html#7808" class="Bound">pp</a> <a id="7811" class="Symbol">(</a><a id="7812" href="Ledger.Core.Specification.Certs.html#2362" class="InductiveConstructor">deregdrep</a> <a id="7822" href="Ledger.Conway.Specification.Utxo.html#7822" class="Bound">c</a> <a id="7824" href="Ledger.Conway.Specification.Utxo.html#7824" class="Bound">v</a> <a id="7826" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7828" href="Ledger.Conway.Specification.Utxo.html#7828" class="Bound">certs</a><a id="7833" class="Symbol">)</a> <a id="7835" href="Ledger.Conway.Specification.Utxo.html#7835" class="Bound">deposits</a>
  <a id="7846" class="Symbol">=</a> <a id="7848" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7867" href="Ledger.Conway.Specification.Utxo.html#7808" class="Bound">pp</a> <a id="7870" href="Ledger.Conway.Specification.Utxo.html#7828" class="Bound">certs</a> <a id="7876" class="Symbol">(</a><a id="7877" href="Ledger.Conway.Specification.Utxo.html#7835" class="Bound">deposits</a> <a id="7886" href="Axiom.Set.Map.html#13606" class="Function Operator">∣</a> <a id="7888" href="Ledger.Conway.Specification.Utxo.html#3353" class="Function">certRefund</a> <a id="7899" class="Symbol">(</a><a id="7900" href="Ledger.Core.Specification.Certs.html#2362" class="InductiveConstructor">deregdrep</a> <a id="7910" href="Ledger.Conway.Specification.Utxo.html#7822" class="Bound">c</a> <a id="7912" href="Ledger.Conway.Specification.Utxo.html#7824" class="Bound">v</a><a id="7913" class="Symbol">)</a><a id="7914" href="Axiom.Set.Map.html#13606" class="Function Operator">ᶜ</a><a id="7915" class="Symbol">)</a>
<a id="7917" href="Ledger.Conway.Specification.Utxo.html#6904" class="CatchallClause Function">updateCertDeposits</a><a id="7935" class="CatchallClause"> </a><a id="7936" href="Ledger.Conway.Specification.Utxo.html#7936" class="CatchallClause Bound">pp</a><a id="7938" class="CatchallClause"> </a><a id="7939" class="CatchallClause Symbol">(_</a><a id="7941" class="CatchallClause"> </a><a id="7942" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="7943" class="CatchallClause"> </a><a id="7944" href="Ledger.Conway.Specification.Utxo.html#7944" class="CatchallClause Bound">certs</a><a id="7949" class="CatchallClause Symbol">)</a><a id="7950" class="CatchallClause"> </a><a id="7951" href="Ledger.Conway.Specification.Utxo.html#7951" class="CatchallClause Bound">deposits</a>
  <a id="7962" class="Symbol">=</a> <a id="7964" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="7983" href="Ledger.Conway.Specification.Utxo.html#7936" class="Bound">pp</a> <a id="7986" href="Ledger.Conway.Specification.Utxo.html#7944" class="Bound">certs</a> <a id="7992" href="Ledger.Conway.Specification.Utxo.html#7951" class="Bound">deposits</a>

<a id="updateProposalDeposits"></a><a id="8002" href="Ledger.Conway.Specification.Utxo.html#8002" class="Function">updateProposalDeposits</a> <a id="8025" class="Symbol">:</a> <a id="8027" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8032" href="Ledger.Core.Specification.Gov.Actions.html#3599" class="Record">GovProposal</a> <a id="8044" class="Symbol">→</a> <a id="8046" href="Ledger.Conway.Specification.Transaction.html#1043" class="Field">TxId</a> <a id="8051" class="Symbol">→</a> <a id="8053" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a> <a id="8058" class="Symbol">→</a> <a id="8060" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a> <a id="8069" class="Symbol">→</a> <a id="8071" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a>
<a id="8080" href="Ledger.Conway.Specification.Utxo.html#8002" class="Function">updateProposalDeposits</a> <a id="8103" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="8113" class="Symbol">_</a>     <a id="8119" class="Symbol">_</a>      <a id="8126" href="Ledger.Conway.Specification.Utxo.html#8126" class="Bound">deposits</a>  <a id="8136" class="Symbol">=</a> <a id="8138" href="Ledger.Conway.Specification.Utxo.html#8126" class="Bound">deposits</a>
<a id="8147" href="Ledger.Conway.Specification.Utxo.html#8002" class="Function">updateProposalDeposits</a> <a id="8170" class="Symbol">(_</a> <a id="8173" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8175" href="Ledger.Conway.Specification.Utxo.html#8175" class="Bound">ps</a><a id="8177" class="Symbol">)</a>  <a id="8180" href="Ledger.Conway.Specification.Utxo.html#8180" class="Bound">txid</a>  <a id="8186" href="Ledger.Conway.Specification.Utxo.html#8186" class="Bound">gaDep</a>  <a id="8193" href="Ledger.Conway.Specification.Utxo.html#8193" class="Bound">deposits</a>  <a id="8203" class="Symbol">=</a>
  <a id="8207" href="Ledger.Conway.Specification.Utxo.html#8002" class="Function">updateProposalDeposits</a> <a id="8230" href="Ledger.Conway.Specification.Utxo.html#8175" class="Bound">ps</a> <a id="8233" href="Ledger.Conway.Specification.Utxo.html#8180" class="Bound">txid</a> <a id="8238" href="Ledger.Conway.Specification.Utxo.html#8186" class="Bound">gaDep</a> <a id="8244" href="Ledger.Conway.Specification.Utxo.html#8193" class="Bound">deposits</a>
  <a id="8255" href="Axiom.Set.Map.Dec.html#2149" class="Function Operator">∪⁺</a> <a id="8258" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="8260" href="Ledger.Core.Specification.Certs.html#723" class="InductiveConstructor">GovActionDeposit</a> <a id="8277" class="Symbol">(</a><a id="8278" href="Ledger.Conway.Specification.Utxo.html#8180" class="Bound">txid</a> <a id="8283" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8285" href="Data.List.Base.html#4746" class="Function">length</a> <a id="8292" href="Ledger.Conway.Specification.Utxo.html#8175" class="Bound">ps</a><a id="8294" class="Symbol">)</a> <a id="8296" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="8298" href="Ledger.Conway.Specification.Utxo.html#8186" class="Bound">gaDep</a> <a id="8304" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>

<a id="updateDeposits"></a><a id="8307" href="Ledger.Conway.Specification.Utxo.html#8307" class="Function">updateDeposits</a> <a id="8322" class="Symbol">:</a> <a id="8324" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="8332" class="Symbol">→</a> <a id="8334" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="8341" class="Symbol">→</a> <a id="8343" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a> <a id="8352" class="Symbol">→</a> <a id="8354" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a>
<a id="8363" href="Ledger.Conway.Specification.Utxo.html#8307" class="Function">updateDeposits</a> <a id="8378" href="Ledger.Conway.Specification.Utxo.html#8378" class="Bound">pp</a> <a id="8381" href="Ledger.Conway.Specification.Utxo.html#8381" class="Bound">txb</a> <a id="8385" class="Symbol">=</a> <a id="8387" href="Ledger.Conway.Specification.Utxo.html#6904" class="Function">updateCertDeposits</a> <a id="8406" href="Ledger.Conway.Specification.Utxo.html#8378" class="Bound">pp</a> <a id="8409" href="Ledger.Conway.Specification.Transaction.html#3200" class="Field">txCerts</a>
                        <a id="8441" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="8443" href="Ledger.Conway.Specification.Utxo.html#8002" class="Function">updateProposalDeposits</a> <a id="8466" href="Ledger.Conway.Specification.Transaction.html#3491" class="Field">txGovProposals</a> <a id="8481" href="Ledger.Conway.Specification.Transaction.html#3166" class="Field">txId</a> <a id="8486" class="Symbol">(</a><a id="8487" href="Ledger.Conway.Specification.Utxo.html#8378" class="Bound">pp</a> <a id="8490" class="Symbol">.</a><a id="8491" href="Ledger.Conway.Specification.PParams.html#3354" class="Field">govActionDeposit</a><a id="8507" class="Symbol">)</a>


  <a id="8513" class="Keyword">where</a> <a id="8519" class="Keyword">open</a> <a id="8524" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a> <a id="8531" href="Ledger.Conway.Specification.Utxo.html#8381" class="Bound">txb</a>

<a id="proposalDepositsΔ"></a><a id="8536" href="Ledger.Conway.Specification.Utxo.html#8536" class="Function">proposalDepositsΔ</a> <a id="8554" class="Symbol">:</a> <a id="8556" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8561" href="Ledger.Core.Specification.Gov.Actions.html#3599" class="Record">GovProposal</a> <a id="8573" class="Symbol">→</a> <a id="8575" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="8583" class="Symbol">→</a> <a id="8585" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="8592" class="Symbol">→</a> <a id="8594" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a>
<a id="8603" href="Ledger.Conway.Specification.Utxo.html#8536" class="Function">proposalDepositsΔ</a> <a id="8621" href="Ledger.Conway.Specification.Utxo.html#8621" class="Bound">props</a> <a id="8627" href="Ledger.Conway.Specification.Utxo.html#8627" class="Bound">pp</a> <a id="8630" href="Ledger.Conway.Specification.Utxo.html#8630" class="Bound">txb</a> <a id="8634" class="Symbol">=</a> <a id="8636" href="Ledger.Conway.Specification.Utxo.html#8002" class="Function">updateProposalDeposits</a> <a id="8659" href="Ledger.Conway.Specification.Utxo.html#8621" class="Bound">props</a> <a id="8665" href="Ledger.Conway.Specification.Transaction.html#3166" class="Field">txId</a> <a id="8670" class="Symbol">(</a><a id="8671" href="Ledger.Conway.Specification.Utxo.html#8627" class="Bound">pp</a> <a id="8674" class="Symbol">.</a><a id="8675" href="Ledger.Conway.Specification.PParams.html#3354" class="Field">govActionDeposit</a><a id="8691" class="Symbol">)</a> <a id="8693" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="8697" class="Keyword">where</a> <a id="8703" class="Keyword">open</a> <a id="8708" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a> <a id="8715" href="Ledger.Conway.Specification.Utxo.html#8630" class="Bound">txb</a>


<a id="depositsChange"></a><a id="8721" href="Ledger.Conway.Specification.Utxo.html#8721" class="Function">depositsChange</a> <a id="8736" class="Symbol">:</a> <a id="8738" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="8746" class="Symbol">→</a> <a id="8748" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="8755" class="Symbol">→</a> <a id="8757" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a> <a id="8766" class="Symbol">→</a> <a id="8768" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
<a id="8770" href="Ledger.Conway.Specification.Utxo.html#8721" class="Function">depositsChange</a> <a id="8785" href="Ledger.Conway.Specification.Utxo.html#8785" class="Bound">pp</a> <a id="8788" href="Ledger.Conway.Specification.Utxo.html#8788" class="Bound">txb</a> <a id="8792" href="Ledger.Conway.Specification.Utxo.html#8792" class="Bound">deposits</a> <a id="8801" class="Symbol">=</a>
  <a id="8805" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="8813" class="Symbol">(</a><a id="8814" href="Ledger.Conway.Specification.Utxo.html#8307" class="Function">updateDeposits</a> <a id="8829" href="Ledger.Conway.Specification.Utxo.html#8785" class="Bound">pp</a> <a id="8832" href="Ledger.Conway.Specification.Utxo.html#8788" class="Bound">txb</a> <a id="8836" href="Ledger.Conway.Specification.Utxo.html#8792" class="Bound">deposits</a><a id="8844" class="Symbol">)</a> <a id="8846" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="8848" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="8856" href="Ledger.Conway.Specification.Utxo.html#8792" class="Bound">deposits</a>

<a id="8866" class="Keyword">data</a> <a id="inInterval"></a><a id="8871" href="Ledger.Conway.Specification.Utxo.html#8871" class="Datatype">inInterval</a> <a id="8882" class="Symbol">(</a><a id="8883" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="8888" class="Symbol">:</a> <a id="8890" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="8894" class="Symbol">)</a> <a id="8896" class="Symbol">:</a> <a id="8898" class="Symbol">(</a><a id="8899" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8905" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a> <a id="8910" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8912" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="8918" href="Ledger.Core.Specification.Epoch.html#722" class="Function">Slot</a><a id="8922" class="Symbol">)</a> <a id="8924" class="Symbol">→</a> <a id="8926" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="8931" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="8939" href="Ledger.Conway.Specification.Utxo.html#8939" class="InductiveConstructor">both</a>   <a id="8946" class="Symbol">:</a> <a id="8948" class="Symbol">∀</a> <a id="8950" class="Symbol">{</a><a id="8951" href="Ledger.Conway.Specification.Utxo.html#8951" class="Bound">l</a> <a id="8953" href="Ledger.Conway.Specification.Utxo.html#8953" class="Bound">r</a><a id="8954" class="Symbol">}</a>  <a id="8957" class="Symbol">→</a> <a id="8959" href="Ledger.Conway.Specification.Utxo.html#8951" class="Bound">l</a> <a id="8961" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="8963" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="8968" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="8970" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="8975" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="8977" href="Ledger.Conway.Specification.Utxo.html#8953" class="Bound">r</a>  <a id="8980" class="Symbol">→</a>  <a id="8983" href="Ledger.Conway.Specification.Utxo.html#8871" class="Datatype">inInterval</a> <a id="8994" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="8999" class="Symbol">(</a><a id="9000" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9005" href="Ledger.Conway.Specification.Utxo.html#8951" class="Bound">l</a>   <a id="9009" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9011" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9016" href="Ledger.Conway.Specification.Utxo.html#8953" class="Bound">r</a><a id="9017" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="9021" href="Ledger.Conway.Specification.Utxo.html#9021" class="InductiveConstructor">lower</a>  <a id="9028" class="Symbol">:</a> <a id="9030" class="Symbol">∀</a> <a id="9032" class="Symbol">{</a><a id="9033" href="Ledger.Conway.Specification.Utxo.html#9033" class="Bound">l</a><a id="9034" class="Symbol">}</a>    <a id="9039" class="Symbol">→</a> <a id="9041" href="Ledger.Conway.Specification.Utxo.html#9033" class="Bound">l</a> <a id="9043" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9045" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a>             <a id="9062" class="Symbol">→</a>  <a id="9065" href="Ledger.Conway.Specification.Utxo.html#8871" class="Datatype">inInterval</a> <a id="9076" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="9081" class="Symbol">(</a><a id="9082" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9087" href="Ledger.Conway.Specification.Utxo.html#9033" class="Bound">l</a>   <a id="9091" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9093" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9100" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="9104" href="Ledger.Conway.Specification.Utxo.html#9104" class="InductiveConstructor">upper</a>  <a id="9111" class="Symbol">:</a> <a id="9113" class="Symbol">∀</a> <a id="9115" class="Symbol">{</a><a id="9116" href="Ledger.Conway.Specification.Utxo.html#9116" class="Bound">r</a><a id="9117" class="Symbol">}</a>    <a id="9122" class="Symbol">→</a> <a id="9124" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="9129" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="9131" href="Ledger.Conway.Specification.Utxo.html#9116" class="Bound">r</a>             <a id="9145" class="Symbol">→</a>  <a id="9148" href="Ledger.Conway.Specification.Utxo.html#8871" class="Datatype">inInterval</a> <a id="9159" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="9164" class="Symbol">(</a><a id="9165" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="9174" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9176" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9181" href="Ledger.Conway.Specification.Utxo.html#9116" class="Bound">r</a><a id="9182" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="9186" href="Ledger.Conway.Specification.Utxo.html#9186" class="InductiveConstructor">none</a>   <a id="9193" class="Symbol">:</a>                                    <a id="9230" href="Ledger.Conway.Specification.Utxo.html#8871" class="Datatype">inInterval</a> <a id="9241" href="Ledger.Conway.Specification.Utxo.html#8883" class="Bound">slot</a> <a id="9246" class="Symbol">(</a><a id="9247" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="9256" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9258" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9265" class="Symbol">)</a>


<a id="9269" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="9339" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="9350" href="Ledger.Conway.Specification.Utxo.html#9350" class="Function">Dec-inInterval</a> <a id="9365" class="Symbol">:</a> <a id="9367" href="Ledger.Conway.Specification.Utxo.html#8871" class="Datatype">inInterval</a> <a id="9378" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a>
  <a id="9383" href="Ledger.Conway.Specification.Utxo.html#9350" class="Function">Dec-inInterval</a> <a id="9398" class="Symbol">{</a><a id="9399" href="Ledger.Conway.Specification.Utxo.html#9399" class="Bound">slot</a><a id="9403" class="Symbol">}</a> <a id="9405" class="Symbol">{</a><a id="9406" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9411" href="Ledger.Conway.Specification.Utxo.html#9411" class="Bound">x</a>  <a id="9414" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9416" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9421" href="Ledger.Conway.Specification.Utxo.html#9421" class="Bound">y</a> <a id="9423" class="Symbol">}</a> <a id="9425" class="Symbol">.</a><a id="9426" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9430" class="Keyword">with</a> <a id="9435" href="Ledger.Conway.Specification.Utxo.html#9411" class="Bound">x</a> <a id="9437" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9440" href="Ledger.Conway.Specification.Utxo.html#9399" class="Bound">slot</a> <a id="9445" class="Symbol">|</a> <a id="9447" href="Ledger.Conway.Specification.Utxo.html#9399" class="Bound">slot</a> <a id="9452" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9455" href="Ledger.Conway.Specification.Utxo.html#9421" class="Bound">y</a>
  <a id="9459" class="Symbol">...</a> <a id="9463" class="Symbol">|</a> <a id="9465" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9468" href="Ledger.Conway.Specification.Utxo.html#9468" class="Bound">¬p₁</a> <a id="9472" class="Symbol">|</a> <a id="9474" class="Symbol">_</a>      <a id="9481" class="Symbol">=</a> <a id="9483" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9486" class="Symbol">λ</a> <a id="9488" class="Keyword">where</a> <a id="9494" class="Symbol">(</a><a id="9495" href="Ledger.Conway.Specification.Utxo.html#8939" class="InductiveConstructor">both</a> <a id="9500" class="Symbol">(</a><a id="9501" href="Ledger.Conway.Specification.Utxo.html#9501" class="Bound">h₁</a> <a id="9504" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9506" href="Ledger.Conway.Specification.Utxo.html#9506" class="Bound">h₂</a><a id="9508" class="Symbol">))</a> <a id="9511" class="Symbol">→</a> <a id="9513" href="Ledger.Conway.Specification.Utxo.html#9468" class="Bound">¬p₁</a> <a id="9517" href="Ledger.Conway.Specification.Utxo.html#9501" class="Bound">h₁</a>
  <a id="9522" class="Symbol">...</a> <a id="9526" class="Symbol">|</a> <a id="9528" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9532" href="Ledger.Conway.Specification.Utxo.html#9532" class="Bound">p₁</a> <a id="9535" class="Symbol">|</a> <a id="9537" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9540" href="Ledger.Conway.Specification.Utxo.html#9540" class="Bound">¬p₂</a> <a id="9544" class="Symbol">=</a> <a id="9546" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9549" class="Symbol">λ</a> <a id="9551" class="Keyword">where</a> <a id="9557" class="Symbol">(</a><a id="9558" href="Ledger.Conway.Specification.Utxo.html#8939" class="InductiveConstructor">both</a> <a id="9563" class="Symbol">(</a><a id="9564" href="Ledger.Conway.Specification.Utxo.html#9564" class="Bound">h₁</a> <a id="9567" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9569" href="Ledger.Conway.Specification.Utxo.html#9569" class="Bound">h₂</a><a id="9571" class="Symbol">))</a> <a id="9574" class="Symbol">→</a> <a id="9576" href="Ledger.Conway.Specification.Utxo.html#9540" class="Bound">¬p₂</a> <a id="9580" href="Ledger.Conway.Specification.Utxo.html#9569" class="Bound">h₂</a>
  <a id="9585" class="Symbol">...</a> <a id="9589" class="Symbol">|</a> <a id="9591" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9595" href="Ledger.Conway.Specification.Utxo.html#9595" class="Bound">p₁</a> <a id="9598" class="Symbol">|</a> <a id="9600" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9604" href="Ledger.Conway.Specification.Utxo.html#9604" class="Bound">p₂</a> <a id="9607" class="Symbol">=</a> <a id="9609" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9613" class="Symbol">(</a><a id="9614" href="Ledger.Conway.Specification.Utxo.html#8939" class="InductiveConstructor">both</a> <a id="9619" class="Symbol">(</a><a id="9620" href="Ledger.Conway.Specification.Utxo.html#9595" class="Bound">p₁</a> <a id="9623" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9625" href="Ledger.Conway.Specification.Utxo.html#9604" class="Bound">p₂</a><a id="9627" class="Symbol">))</a>
  <a id="9632" href="Ledger.Conway.Specification.Utxo.html#9350" class="Function">Dec-inInterval</a> <a id="9647" class="Symbol">{</a><a id="9648" href="Ledger.Conway.Specification.Utxo.html#9648" class="Bound">slot</a><a id="9652" class="Symbol">}</a> <a id="9654" class="Symbol">{</a><a id="9655" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9660" href="Ledger.Conway.Specification.Utxo.html#9660" class="Bound">x</a>  <a id="9663" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9665" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9672" class="Symbol">}</a> <a id="9674" class="Symbol">.</a><a id="9675" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9679" class="Keyword">with</a> <a id="9684" href="Ledger.Conway.Specification.Utxo.html#9660" class="Bound">x</a> <a id="9686" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9689" href="Ledger.Conway.Specification.Utxo.html#9648" class="Bound">slot</a>
  <a id="9696" class="Symbol">...</a> <a id="9700" class="Symbol">|</a> <a id="9702" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9705" href="Ledger.Conway.Specification.Utxo.html#9705" class="Bound">¬p</a> <a id="9708" class="Symbol">=</a> <a id="9710" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="9714" class="Symbol">(λ</a> <a id="9717" class="Keyword">where</a> <a id="9723" class="Symbol">(</a><a id="9724" href="Ledger.Conway.Specification.Utxo.html#9021" class="InductiveConstructor">lower</a> <a id="9730" href="Ledger.Conway.Specification.Utxo.html#9730" class="Bound">h</a><a id="9731" class="Symbol">)</a> <a id="9733" class="Symbol">→</a> <a id="9735" href="Ledger.Conway.Specification.Utxo.html#9705" class="Bound">¬p</a> <a id="9738" href="Ledger.Conway.Specification.Utxo.html#9730" class="Bound">h</a><a id="9739" class="Symbol">)</a>
  <a id="9743" class="Symbol">...</a> <a id="9747" class="Symbol">|</a> <a id="9749" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9753" href="Ledger.Conway.Specification.Utxo.html#9753" class="Bound">p</a> <a id="9755" class="Symbol">=</a> <a id="9757" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9761" class="Symbol">(</a><a id="9762" href="Ledger.Conway.Specification.Utxo.html#9021" class="InductiveConstructor">lower</a> <a id="9768" href="Ledger.Conway.Specification.Utxo.html#9753" class="Bound">p</a><a id="9769" class="Symbol">)</a>
  <a id="9773" href="Ledger.Conway.Specification.Utxo.html#9350" class="Function">Dec-inInterval</a> <a id="9788" class="Symbol">{</a><a id="9789" href="Ledger.Conway.Specification.Utxo.html#9789" class="Bound">slot</a><a id="9793" class="Symbol">}</a> <a id="9795" class="Symbol">{</a><a id="9796" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9804" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9806" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="9811" href="Ledger.Conway.Specification.Utxo.html#9811" class="Bound">x</a> <a id="9813" class="Symbol">}</a> <a id="9815" class="Symbol">.</a><a id="9816" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9820" class="Keyword">with</a> <a id="9825" href="Ledger.Conway.Specification.Utxo.html#9789" class="Bound">slot</a> <a id="9830" href="Class.HasOrder.Core.html#1016" class="Function Operator">≤?</a> <a id="9833" href="Ledger.Conway.Specification.Utxo.html#9811" class="Bound">x</a>
  <a id="9837" class="Symbol">...</a> <a id="9841" class="Symbol">|</a> <a id="9843" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="9846" href="Ledger.Conway.Specification.Utxo.html#9846" class="Bound">¬p</a> <a id="9849" class="Symbol">=</a> <a id="9851" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a>  <a id="9855" class="Symbol">(λ</a> <a id="9858" class="Keyword">where</a> <a id="9864" class="Symbol">(</a><a id="9865" href="Ledger.Conway.Specification.Utxo.html#9104" class="InductiveConstructor">upper</a> <a id="9871" href="Ledger.Conway.Specification.Utxo.html#9871" class="Bound">h</a><a id="9872" class="Symbol">)</a> <a id="9874" class="Symbol">→</a> <a id="9876" href="Ledger.Conway.Specification.Utxo.html#9846" class="Bound">¬p</a> <a id="9879" href="Ledger.Conway.Specification.Utxo.html#9871" class="Bound">h</a><a id="9880" class="Symbol">)</a>
  <a id="9884" class="Symbol">...</a> <a id="9888" class="Symbol">|</a> <a id="9890" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9894" href="Ledger.Conway.Specification.Utxo.html#9894" class="Bound">p</a> <a id="9896" class="Symbol">=</a> <a id="9898" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9902" class="Symbol">(</a><a id="9903" href="Ledger.Conway.Specification.Utxo.html#9104" class="InductiveConstructor">upper</a> <a id="9909" href="Ledger.Conway.Specification.Utxo.html#9894" class="Bound">p</a><a id="9910" class="Symbol">)</a>
  <a id="9914" href="Ledger.Conway.Specification.Utxo.html#9350" class="Function">Dec-inInterval</a> <a id="9929" class="Symbol">{</a><a id="9930" href="Ledger.Conway.Specification.Utxo.html#9930" class="Bound">slot</a><a id="9934" class="Symbol">}</a> <a id="9936" class="Symbol">{</a><a id="9937" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="9945" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9947" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="9954" class="Symbol">}</a> <a id="9956" class="Symbol">.</a><a id="9957" href="Class.Decidable.Core.html#273" class="Field">dec</a> <a id="9961" class="Symbol">=</a> <a id="9963" href="Relation.Nullary.Decidable.Core.html#2099" class="InductiveConstructor">yes</a> <a id="9967" href="Ledger.Conway.Specification.Utxo.html#9186" class="InductiveConstructor">none</a>

  <a id="HasCoin-UTxOState"></a><a id="9975" href="Ledger.Conway.Specification.Utxo.html#9975" class="Function">HasCoin-UTxOState</a> <a id="9993" class="Symbol">:</a> <a id="9995" href="Ledger.Prelude.HasCoin.html#123" class="Record">HasCoin</a> <a id="10003" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a>
  <a id="10015" href="Ledger.Conway.Specification.Utxo.html#9975" class="Function">HasCoin-UTxOState</a> <a id="10033" class="Symbol">.</a><a id="10034" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="10042" href="Ledger.Conway.Specification.Utxo.html#10042" class="Bound">s</a> <a id="10044" class="Symbol">=</a> <a id="10046" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="10054" class="Symbol">(</a><a id="10055" href="Ledger.Conway.Specification.Utxo.html#1364" class="Field">UTxOState.utxo</a> <a id="10070" href="Ledger.Conway.Specification.Utxo.html#10042" class="Bound">s</a><a id="10071" class="Symbol">)</a>
                               <a id="10104" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10106" class="Symbol">(</a><a id="10107" href="Ledger.Conway.Specification.Utxo.html#1386" class="Field">UTxOState.fees</a> <a id="10122" href="Ledger.Conway.Specification.Utxo.html#10042" class="Bound">s</a><a id="10123" class="Symbol">)</a>
                               <a id="10156" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10158" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="10166" class="Symbol">(</a><a id="10167" href="Ledger.Conway.Specification.Utxo.html#1408" class="Field">UTxOState.deposits</a> <a id="10186" href="Ledger.Conway.Specification.Utxo.html#10042" class="Bound">s</a><a id="10187" class="Symbol">)</a>
                               <a id="10220" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="10222" href="Ledger.Conway.Specification.Utxo.html#1434" class="Field">UTxOState.donations</a> <a id="10242" href="Ledger.Conway.Specification.Utxo.html#10042" class="Bound">s</a>

<a id="coinPolicies"></a><a id="10245" href="Ledger.Conway.Specification.Utxo.html#10245" class="Function">coinPolicies</a> <a id="10258" class="Symbol">:</a> <a id="10260" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="10262" href="Ledger.Core.Specification.Crypto.html#1242" class="Function">ScriptHash</a>
<a id="10273" href="Ledger.Conway.Specification.Utxo.html#10245" class="Function">coinPolicies</a> <a id="10286" class="Symbol">=</a> <a id="10288" href="Ledger.Core.Specification.TokenAlgebra.Base.html#925" class="Function">policies</a> <a id="10297" class="Symbol">(</a><a id="10298" href="Ledger.Core.Specification.TokenAlgebra.Base.html#880" class="Function">inject</a> <a id="10305" class="Number">1</a><a id="10306" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="10309" href="Ledger.Conway.Specification.Utxo.html#10309" class="Function">isAdaOnly</a> <a id="10319" class="Symbol">:</a> <a id="10321" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a> <a id="10327" class="Symbol">→</a> <a id="10329" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="10334" href="Ledger.Conway.Specification.Utxo.html#10309" class="Function">isAdaOnly</a> <a id="10344" href="Ledger.Conway.Specification.Utxo.html#10344" class="Bound">v</a> <a id="10346" class="Symbol">=</a> <a id="10348" href="Ledger.Core.Specification.TokenAlgebra.Base.html#925" class="Function">policies</a> <a id="10357" href="Ledger.Conway.Specification.Utxo.html#10344" class="Bound">v</a> <a id="10359" href="Axiom.Set.html#2772" class="Function Operator">≡ᵉ</a> <a id="10362" href="Ledger.Conway.Specification.Utxo.html#10245" class="Function">coinPolicies</a>


<a id="collateralCheck"></a><a id="10377" href="Ledger.Conway.Specification.Utxo.html#10377" class="Function">collateralCheck</a> <a id="10393" class="Symbol">:</a> <a id="10395" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="10403" class="Symbol">→</a> <a id="10405" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a> <a id="10408" class="Symbol">→</a> <a id="10410" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a> <a id="10415" class="Symbol">→</a> <a id="10417" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="10422" href="Ledger.Conway.Specification.Utxo.html#10377" class="Function">collateralCheck</a> <a id="10438" href="Ledger.Conway.Specification.Utxo.html#10438" class="Bound">pp</a> <a id="10441" href="Ledger.Conway.Specification.Utxo.html#10441" class="Bound">tx</a> <a id="10444" href="Ledger.Conway.Specification.Utxo.html#10444" class="Bound">utxo</a> <a id="10449" class="Symbol">=</a>
  <a id="10453" href="Axiom.Set.html#9909" class="Function">All</a> <a id="10457" class="Symbol">(λ</a> <a id="10460" class="Symbol">(</a><a id="10461" href="Ledger.Conway.Specification.Utxo.html#10461" class="Bound">addr</a> <a id="10466" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10468" class="Symbol">_)</a> <a id="10471" class="Symbol">→</a> <a id="10473" href="Ledger.Core.Specification.Address.html#2790" class="Function">isVKeyAddr</a> <a id="10484" href="Ledger.Conway.Specification.Utxo.html#10461" class="Bound">addr</a><a id="10488" class="Symbol">)</a> <a id="10490" class="Symbol">(</a><a id="10491" href="Class.IsSet.html#959" class="Function">range</a> <a id="10497" class="Symbol">(</a><a id="10498" href="Ledger.Conway.Specification.Utxo.html#10444" class="Bound">utxo</a> <a id="10503" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="10505" href="Ledger.Conway.Specification.Transaction.html#3090" class="Function">collateralInputs</a><a id="10521" class="Symbol">))</a>
  <a id="10526" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10528" href="Ledger.Conway.Specification.Utxo.html#10309" class="Function">isAdaOnly</a> <a id="10538" href="Ledger.Conway.Specification.Utxo.html#10676" class="Function">balance′</a>
  <a id="10549" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10551" href="Ledger.Core.Specification.TokenAlgebra.Base.html#835" class="Function">coin</a> <a id="10556" href="Ledger.Conway.Specification.Utxo.html#10676" class="Function">balance′</a> <a id="10565" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="10567" class="Number">100</a> <a id="10571" href="Class.HasOrder.Core.html#827" class="Function Operator">≥</a> <a id="10573" href="Ledger.Conway.Specification.Transaction.html#3240" class="Function">txFee</a> <a id="10579" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="10581" href="Ledger.Conway.Specification.Utxo.html#10438" class="Bound">pp</a> <a id="10584" class="Symbol">.</a><a id="10585" href="Ledger.Conway.Specification.PParams.html#2930" class="Field">collateralPercentage</a>
  <a id="10608" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10610" href="Ledger.Conway.Specification.Transaction.html#3090" class="Function">collateralInputs</a> <a id="10627" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="10629" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="10633" class="Keyword">where</a>
    <a id="10643" class="Keyword">open</a> <a id="10648" href="Ledger.Conway.Specification.Transaction.html#4668" class="Module">Tx</a> <a id="10651" href="Ledger.Conway.Specification.Utxo.html#10441" class="Bound">tx</a><a id="10653" class="Symbol">;</a> <a id="10655" class="Keyword">open</a> <a id="10660" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a> <a id="10667" href="Ledger.Conway.Specification.Transaction.html#4700" class="Function">body</a>
    <a id="10676" href="Ledger.Conway.Specification.Utxo.html#10676" class="Function">balance′</a> <a id="10685" class="Symbol">=</a> <a id="10687" href="Ledger.Conway.Specification.Utxo.html#2437" class="Function">balance</a> <a id="10695" class="Symbol">(</a><a id="10696" href="Ledger.Conway.Specification.Utxo.html#10444" class="Bound">utxo</a> <a id="10701" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="10703" href="Ledger.Conway.Specification.Transaction.html#3090" class="Function">collateralInputs</a><a id="10719" class="Symbol">)</a>


<a id="10723" class="Keyword">module</a> <a id="10730" href="Ledger.Conway.Specification.Utxo.html#10730" class="Module">_</a> <a id="10732" class="Symbol">(</a><a id="10733" class="Keyword">let</a> <a id="10737" class="Keyword">open</a> <a id="10742" href="Ledger.Conway.Specification.Utxo.html#1300" class="Module">UTxOState</a><a id="10751" class="Symbol">;</a> <a id="10753" class="Keyword">open</a> <a id="10758" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a><a id="10764" class="Symbol">)</a> <a id="10766" class="Keyword">where</a>


  <a id="10776" href="Ledger.Conway.Specification.Utxo.html#10776" class="Function">depositRefunds</a> <a id="10791" class="Symbol">:</a> <a id="10793" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="10801" class="Symbol">→</a> <a id="10803" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="10813" class="Symbol">→</a> <a id="10815" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="10822" class="Symbol">→</a> <a id="10824" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="10831" href="Ledger.Conway.Specification.Utxo.html#10776" class="Function">depositRefunds</a> <a id="10846" href="Ledger.Conway.Specification.Utxo.html#10846" class="Bound">pp</a> <a id="10849" href="Ledger.Conway.Specification.Utxo.html#10849" class="Bound">st</a> <a id="10852" href="Ledger.Conway.Specification.Utxo.html#10852" class="Bound">txb</a> <a id="10856" class="Symbol">=</a> <a id="10858" href="Prelude.html#3357" class="Function">negPart</a> <a id="10866" class="Symbol">(</a><a id="10867" href="Ledger.Conway.Specification.Utxo.html#8721" class="Function">depositsChange</a> <a id="10882" href="Ledger.Conway.Specification.Utxo.html#10846" class="Bound">pp</a> <a id="10885" href="Ledger.Conway.Specification.Utxo.html#10852" class="Bound">txb</a> <a id="10889" class="Symbol">(</a><a id="10890" href="Ledger.Conway.Specification.Utxo.html#10849" class="Bound">st</a> <a id="10893" class="Symbol">.</a><a id="10894" href="Ledger.Conway.Specification.Utxo.html#1408" class="Field">deposits</a><a id="10902" class="Symbol">))</a>

  <a id="10908" href="Ledger.Conway.Specification.Utxo.html#10908" class="Function">newDeposits</a> <a id="10920" class="Symbol">:</a> <a id="10922" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="10930" class="Symbol">→</a> <a id="10932" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="10942" class="Symbol">→</a> <a id="10944" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="10951" class="Symbol">→</a> <a id="10953" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="10960" href="Ledger.Conway.Specification.Utxo.html#10908" class="Function">newDeposits</a> <a id="10972" href="Ledger.Conway.Specification.Utxo.html#10972" class="Bound">pp</a> <a id="10975" href="Ledger.Conway.Specification.Utxo.html#10975" class="Bound">st</a> <a id="10978" href="Ledger.Conway.Specification.Utxo.html#10978" class="Bound">txb</a> <a id="10982" class="Symbol">=</a> <a id="10984" href="Prelude.html#3280" class="Function">posPart</a> <a id="10992" class="Symbol">(</a><a id="10993" href="Ledger.Conway.Specification.Utxo.html#8721" class="Function">depositsChange</a> <a id="11008" href="Ledger.Conway.Specification.Utxo.html#10972" class="Bound">pp</a> <a id="11011" href="Ledger.Conway.Specification.Utxo.html#10978" class="Bound">txb</a> <a id="11015" class="Symbol">(</a><a id="11016" href="Ledger.Conway.Specification.Utxo.html#10975" class="Bound">st</a> <a id="11019" class="Symbol">.</a><a id="11020" href="Ledger.Conway.Specification.Utxo.html#1408" class="Field">deposits</a><a id="11028" class="Symbol">))</a>

  <a id="11034" href="Ledger.Conway.Specification.Utxo.html#11034" class="Function">consumed</a> <a id="11043" class="Symbol">:</a> <a id="11045" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="11053" class="Symbol">→</a> <a id="11055" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="11065" class="Symbol">→</a> <a id="11067" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="11074" class="Symbol">→</a> <a id="11076" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a>
  <a id="11084" href="Ledger.Conway.Specification.Utxo.html#11034" class="Function">consumed</a> <a id="11093" href="Ledger.Conway.Specification.Utxo.html#11093" class="Bound">pp</a> <a id="11096" href="Ledger.Conway.Specification.Utxo.html#11096" class="Bound">st</a> <a id="11099" href="Ledger.Conway.Specification.Utxo.html#11099" class="Bound">txb</a>
    <a id="11107" class="Symbol">=</a>  <a id="11110" href="Ledger.Conway.Specification.Utxo.html#2437" class="Function">balance</a> <a id="11118" class="Symbol">(</a><a id="11119" href="Ledger.Conway.Specification.Utxo.html#11096" class="Bound">st</a> <a id="11122" class="Symbol">.</a><a id="11123" href="Ledger.Conway.Specification.Utxo.html#1364" class="Field">utxo</a> <a id="11128" href="Axiom.Set.Map.html#13536" class="Function Operator">∣</a> <a id="11130" href="Ledger.Conway.Specification.Utxo.html#11099" class="Bound">txb</a> <a id="11134" class="Symbol">.</a><a id="11135" href="Ledger.Conway.Specification.Transaction.html#3018" class="Field">txIns</a><a id="11140" class="Symbol">)</a>
    <a id="11146" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="11149" href="Ledger.Conway.Specification.Utxo.html#11099" class="Bound">txb</a> <a id="11153" class="Symbol">.</a><a id="11154" href="Ledger.Conway.Specification.Transaction.html#3624" class="Field">mint</a>
    <a id="11163" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="11166" href="Ledger.Core.Specification.TokenAlgebra.Base.html#880" class="Function">inject</a> <a id="11173" class="Symbol">(</a><a id="11174" href="Ledger.Conway.Specification.Utxo.html#10776" class="Function">depositRefunds</a> <a id="11189" href="Ledger.Conway.Specification.Utxo.html#11093" class="Bound">pp</a> <a id="11192" href="Ledger.Conway.Specification.Utxo.html#11096" class="Bound">st</a> <a id="11195" href="Ledger.Conway.Specification.Utxo.html#11099" class="Bound">txb</a><a id="11198" class="Symbol">)</a>
    <a id="11204" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="11207" href="Ledger.Core.Specification.TokenAlgebra.Base.html#880" class="Function">inject</a> <a id="11214" class="Symbol">(</a><a id="11215" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="11223" class="Symbol">(</a><a id="11224" href="Ledger.Conway.Specification.Utxo.html#11099" class="Bound">txb</a> <a id="11228" class="Symbol">.</a><a id="11229" href="Ledger.Conway.Specification.Transaction.html#3274" class="Field">txWithdrawals</a><a id="11242" class="Symbol">))</a>

  <a id="11248" href="Ledger.Conway.Specification.Utxo.html#11248" class="Function">produced</a> <a id="11257" class="Symbol">:</a> <a id="11259" href="Ledger.Conway.Specification.PParams.html#1687" class="Record">PParams</a> <a id="11267" class="Symbol">→</a> <a id="11269" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="11279" class="Symbol">→</a> <a id="11281" href="Ledger.Conway.Specification.Transaction.html#2982" class="Record">TxBody</a> <a id="11288" class="Symbol">→</a> <a id="11290" href="Ledger.Core.Specification.TokenAlgebra.Base.html#515" class="Function">Value</a>
  <a id="11298" href="Ledger.Conway.Specification.Utxo.html#11248" class="Function">produced</a> <a id="11307" href="Ledger.Conway.Specification.Utxo.html#11307" class="Bound">pp</a> <a id="11310" href="Ledger.Conway.Specification.Utxo.html#11310" class="Bound">st</a> <a id="11313" href="Ledger.Conway.Specification.Utxo.html#11313" class="Bound">txb</a> <a id="11317" class="Symbol">=</a> <a id="11319" href="Ledger.Conway.Specification.Utxo.html#2437" class="Function">balance</a> <a id="11327" class="Symbol">(</a><a id="11328" href="Ledger.Conway.Specification.Utxo.html#2366" class="Function">outs</a> <a id="11333" href="Ledger.Conway.Specification.Utxo.html#11313" class="Bound">txb</a><a id="11336" class="Symbol">)</a>
                     <a id="11359" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11361" href="Ledger.Core.Specification.TokenAlgebra.Base.html#880" class="Function">inject</a> <a id="11368" class="Symbol">(</a><a id="11369" href="Ledger.Conway.Specification.Utxo.html#11313" class="Bound">txb</a> <a id="11373" class="Symbol">.</a><a id="11374" href="Ledger.Conway.Specification.Transaction.html#3240" class="Field">txFee</a><a id="11379" class="Symbol">)</a>
                     <a id="11402" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11404" href="Ledger.Core.Specification.TokenAlgebra.Base.html#880" class="Function">inject</a> <a id="11411" class="Symbol">(</a><a id="11412" href="Ledger.Conway.Specification.Utxo.html#10908" class="Function">newDeposits</a> <a id="11424" href="Ledger.Conway.Specification.Utxo.html#11307" class="Bound">pp</a> <a id="11427" href="Ledger.Conway.Specification.Utxo.html#11310" class="Bound">st</a> <a id="11430" href="Ledger.Conway.Specification.Utxo.html#11313" class="Bound">txb</a><a id="11433" class="Symbol">)</a>
                     <a id="11456" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11458" href="Ledger.Core.Specification.TokenAlgebra.Base.html#880" class="Function">inject</a> <a id="11465" class="Symbol">(</a><a id="11466" href="Ledger.Conway.Specification.Utxo.html#11313" class="Bound">txb</a> <a id="11470" class="Symbol">.</a><a id="11471" href="Ledger.Conway.Specification.Transaction.html#3410" class="Field">txDonation</a><a id="11481" class="Symbol">)</a>


<a id="11485" class="Keyword">open</a> <a id="11490" href="Ledger.Conway.Specification.PParams.html#1687" class="Module">PParams</a>
<a id="11498" class="Keyword">private</a> <a id="11506" class="Keyword">variable</a>
  <a id="11517" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="11519" class="Symbol">:</a> <a id="11521" href="Ledger.Conway.Specification.Utxo.html#1191" class="Record">UTxOEnv</a>
  <a id="11531" href="Ledger.Conway.Specification.Utxo.html#11531" class="Generalizable">s</a> <a id="11533" href="Ledger.Conway.Specification.Utxo.html#11533" class="Generalizable">s&#39;</a> <a id="11536" class="Symbol">:</a> <a id="11538" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a>
  <a id="11550" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="11553" class="Symbol">:</a> <a id="11555" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a>
  <a id="11560" href="Ledger.Conway.Specification.Utxo.html#11560" class="Generalizable">utxo</a> <a id="11565" class="Symbol">:</a> <a id="11567" href="Ledger.Conway.Specification.Transaction.html#2702" class="Function">UTxO</a>
  <a id="11574" href="Ledger.Conway.Specification.Utxo.html#11574" class="Generalizable">fees</a> <a id="11579" class="Symbol">:</a> <a id="11581" href="Ledger.Prelude.Base.html#186" class="Function">Fees</a>
  <a id="11588" href="Ledger.Conway.Specification.Utxo.html#11588" class="Generalizable">donations</a> <a id="11598" class="Symbol">:</a> <a id="11600" href="Ledger.Prelude.Base.html#176" class="Function">Donations</a>
  <a id="11612" href="Ledger.Conway.Specification.Utxo.html#11612" class="Generalizable">deposits</a> <a id="11621" class="Symbol">:</a> <a id="11623" href="Ledger.Core.Specification.Certs.html#775" class="Function">Deposits</a>

<a id="11633" class="Keyword">open</a> <a id="11638" href="Ledger.Conway.Specification.Utxo.html#1191" class="Module">UTxOEnv</a>


<a id="11648" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="11653" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="11668" class="Symbol">:</a> <a id="11670" href="Ledger.Conway.Specification.Utxo.html#1191" class="Record">UTxOEnv</a> <a id="11678" class="Symbol">→</a> <a id="11680" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="11690" class="Symbol">→</a> <a id="11692" href="Ledger.Conway.Specification.Transaction.html#4668" class="Record">Tx</a> <a id="11695" class="Symbol">→</a> <a id="11697" href="Ledger.Conway.Specification.Utxo.html#1300" class="Record">UTxOState</a> <a id="11707" class="Symbol">→</a> <a id="11709" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="11714" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-Yes"></a><a id="11723" href="Ledger.Conway.Specification.Utxo.html#11723" class="InductiveConstructor">Scripts-Yes</a> <a id="11735" class="Symbol">:</a>
    <a id="11741" class="Keyword">let</a>  <a id="11746" href="Ledger.Conway.Specification.Utxo.html#11746" class="Bound">pp</a>         <a id="11757" class="Symbol">=</a> <a id="11759" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="11761" class="Symbol">.</a><a id="11762" href="Ledger.Conway.Specification.Utxo.html#1245" class="Field">pparams</a>


         <a id="11781" class="Keyword">open</a> <a id="11786" href="Ledger.Conway.Specification.Transaction.html#4668" class="Module">Tx</a> <a id="11789" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="11792" class="Keyword">renaming</a> <a id="11801" class="Symbol">(</a><a id="11802" href="Ledger.Conway.Specification.Transaction.html#4700" class="Field">body</a> <a id="11807" class="Symbol">to</a> <a id="11810" class="Field">txb</a><a id="11813" class="Symbol">);</a> <a id="11816" class="Keyword">open</a> <a id="11821" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a> <a id="11828" href="Ledger.Conway.Specification.Utxo.html#11810" class="Function">txb</a>


         <a id="11843" href="Ledger.Conway.Specification.Utxo.html#11843" class="Bound">p2Scripts</a>  <a id="11854" class="Symbol">=</a> <a id="11856" href="Ledger.Conway.Specification.Script.Validation.html#3027" class="Function">collectP2ScriptsWithContext</a> <a id="11884" href="Ledger.Conway.Specification.Utxo.html#11746" class="Bound">pp</a> <a id="11887" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="11890" href="Ledger.Conway.Specification.Utxo.html#11560" class="Generalizable">utxo</a>
      <a id="11901" class="Keyword">in</a>
        <a id="11912" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="11914" href="Ledger.Conway.Specification.Utxo.html#3532" class="Datatype">ValidCertDeposits</a> <a id="11932" href="Ledger.Conway.Specification.Utxo.html#11746" class="Bound">pp</a> <a id="11935" href="Ledger.Conway.Specification.Utxo.html#11612" class="Generalizable">deposits</a> <a id="11944" href="Ledger.Conway.Specification.Transaction.html#3200" class="Function">txCerts</a>
        <a id="11960" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="11962" href="Ledger.Conway.Specification.Script.Validation.html#3896" class="Function">evalP2Scripts</a> <a id="11976" href="Ledger.Conway.Specification.Utxo.html#11843" class="Bound">p2Scripts</a> <a id="11986" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="11988" href="Ledger.Conway.Specification.Transaction.html#4772" class="Function">isValid</a>
        <a id="12004" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="12006" href="Ledger.Conway.Specification.Transaction.html#4772" class="Function">isValid</a> <a id="12014" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12016" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
          <a id="12031" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
          <a id="12074" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="12076" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Utxo.html#11560}{\htmlId{12080}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11574}{\htmlId{12087}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11612}{\htmlId{12094}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11588}{\htmlId{12105}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="12117" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">⇀⦇</a> <a id="12120" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="12123" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{12133}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#11560}{\htmlId{12134}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12139}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3018}{\htmlId{12141}{\htmlClass{Function}{\text{txIns}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12147}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,\,\htmlId{12148}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#7640}{\htmlId{12150}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, \,\htmlId{12153}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#2366}{\htmlId{12154}{\htmlClass{Function}{\text{outs}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11810}{\htmlId{12159}{\htmlClass{Function}{\text{txb}}}}\,\,\htmlId{12162}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11574}{\htmlId{12166}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{12171}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3240}{\htmlId{12173}{\htmlClass{Function}{\text{txFee}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#8307}{\htmlId{12181}{\htmlClass{Function}{\text{updateDeposits}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11746}{\htmlId{12196}{\htmlClass{Bound}{\text{pp}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11810}{\htmlId{12199}{\htmlClass{Function}{\text{txb}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#11612}{\htmlId{12203}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11588}{\htmlId{12214}{\htmlClass{Generalizable}{\text{donations}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{12224}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3410}{\htmlId{12226}{\htmlClass{Function}{\text{txDonation}}}}\, \end{pmatrix}$</a>
  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-No"></a><a id="12241" href="Ledger.Conway.Specification.Utxo.html#12241" class="InductiveConstructor">Scripts-No</a> <a id="12252" class="Symbol">:</a>
    <a id="12258" class="Keyword">let</a>  <a id="12263" href="Ledger.Conway.Specification.Utxo.html#12263" class="Bound">pp</a>         <a id="12274" class="Symbol">=</a> <a id="12276" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="12278" class="Symbol">.</a><a id="12279" href="Ledger.Conway.Specification.Utxo.html#1245" class="Field">pparams</a>


         <a id="12298" class="Keyword">open</a> <a id="12303" href="Ledger.Conway.Specification.Transaction.html#4668" class="Module">Tx</a> <a id="12306" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="12309" class="Keyword">renaming</a> <a id="12318" class="Symbol">(</a><a id="12319" href="Ledger.Conway.Specification.Transaction.html#4700" class="Field">body</a> <a id="12324" class="Symbol">to</a> <a id="12327" class="Field">txb</a><a id="12330" class="Symbol">);</a> <a id="12333" class="Keyword">open</a> <a id="12338" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a> <a id="12345" href="Ledger.Conway.Specification.Utxo.html#12327" class="Function">txb</a>


         <a id="12360" href="Ledger.Conway.Specification.Utxo.html#12360" class="Bound">p2Scripts</a>  <a id="12371" class="Symbol">=</a> <a id="12373" href="Ledger.Conway.Specification.Script.Validation.html#3027" class="Function">collectP2ScriptsWithContext</a> <a id="12401" href="Ledger.Conway.Specification.Utxo.html#12263" class="Bound">pp</a> <a id="12404" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="12407" href="Ledger.Conway.Specification.Utxo.html#11560" class="Generalizable">utxo</a>
    <a id="12416" class="Keyword">in</a>
        <a id="12427" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="12429" href="Ledger.Conway.Specification.Script.Validation.html#3896" class="Function">evalP2Scripts</a> <a id="12443" href="Ledger.Conway.Specification.Utxo.html#12360" class="Bound">p2Scripts</a> <a id="12453" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12455" href="Ledger.Conway.Specification.Transaction.html#4772" class="Function">isValid</a>
        <a id="12471" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="12473" href="Ledger.Conway.Specification.Transaction.html#4772" class="Function">isValid</a> <a id="12481" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="12483" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
          <a id="12499" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
          <a id="12542" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="12544" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Utxo.html#11560}{\htmlId{12548}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11574}{\htmlId{12555}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11612}{\htmlId{12562}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11588}{\htmlId{12573}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="12585" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">⇀⦇</a> <a id="12588" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="12591" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Utxo.html#11560}{\htmlId{12601}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12606}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3090}{\htmlId{12608}{\htmlClass{Function}{\text{collateralInputs}}}}\, \,\href{Axiom.Set.Map.html#13606}{\htmlId{12625}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11574}{\htmlId{12629}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{12634}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Utxo.html#2526}{\htmlId{12636}{\htmlClass{Function}{\text{cbalance}}}}\, \,\htmlId{12645}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#11560}{\htmlId{12646}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#13536}{\htmlId{12651}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Transaction.html#3090}{\htmlId{12653}{\htmlClass{Function}{\text{collateralInputs}}}}\,\,\htmlId{12669}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11612}{\htmlId{12673}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Specification.Utxo.html#11588}{\htmlId{12684}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a>


<a id="12698" class="Keyword">unquoteDecl</a> <a id="Scripts-Yes-premises"></a><a id="12710" href="Ledger.Conway.Specification.Utxo.html#12710" class="Function">Scripts-Yes-premises</a> <a id="12731" class="Symbol">=</a> <a id="12733" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="12745" href="Ledger.Conway.Specification.Utxo.html#12710" class="Function">Scripts-Yes-premises</a> <a id="12766" class="Symbol">(</a><a id="12767" class="Keyword">quote</a> <a id="12773" href="Ledger.Conway.Specification.Utxo.html#11723" class="InductiveConstructor">Scripts-Yes</a><a id="12784" class="Symbol">)</a>
<a id="12786" class="Keyword">unquoteDecl</a> <a id="Scripts-No-premises"></a><a id="12798" href="Ledger.Conway.Specification.Utxo.html#12798" class="Function">Scripts-No-premises</a>  <a id="12819" class="Symbol">=</a> <a id="12821" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="12833" href="Ledger.Conway.Specification.Utxo.html#12798" class="Function">Scripts-No-premises</a>  <a id="12854" class="Symbol">(</a><a id="12855" class="Keyword">quote</a> <a id="12861" href="Ledger.Conway.Specification.Utxo.html#12241" class="InductiveConstructor">Scripts-No</a><a id="12871" class="Symbol">)</a>


<a id="12875" class="Keyword">data</a> <a id="12880" href="Ledger.Conway.Specification.Utxo.html#2233" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="12894" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO-inductive"></a><a id="12903" href="Ledger.Conway.Specification.Utxo.html#12903" class="InductiveConstructor">UTXO-inductive</a> <a id="12918" class="Symbol">:</a>
    <a id="12924" class="Keyword">let</a> <a id="12928" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a>        <a id="12938" class="Symbol">=</a> <a id="12940" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="12942" class="Symbol">.</a><a id="12943" href="Ledger.Conway.Specification.Utxo.html#1245" class="Field">pparams</a>
        <a id="12959" href="Ledger.Conway.Specification.Utxo.html#12959" class="Bound">slot</a>      <a id="12969" class="Symbol">=</a> <a id="12971" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="12973" class="Symbol">.</a><a id="12974" href="Ledger.Conway.Specification.Utxo.html#1224" class="Field">slot</a>
        <a id="12987" href="Ledger.Conway.Specification.Utxo.html#12987" class="Bound">treasury</a>  <a id="12997" class="Symbol">=</a> <a id="12999" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="13001" class="Symbol">.</a><a id="13002" href="Ledger.Conway.Specification.Utxo.html#1269" class="Field">treasury</a>
        <a id="13019" href="Ledger.Conway.Specification.Utxo.html#13019" class="Bound">utxo</a>      <a id="13029" class="Symbol">=</a> <a id="13031" href="Ledger.Conway.Specification.Utxo.html#11531" class="Generalizable">s</a> <a id="13033" class="Symbol">.</a><a id="13034" href="Ledger.Conway.Specification.Utxo.html#1364" class="Field">UTxOState.utxo</a>


        <a id="13059" class="Keyword">open</a> <a id="13064" href="Ledger.Conway.Specification.Transaction.html#4668" class="Module">Tx</a> <a id="13067" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="13070" class="Keyword">renaming</a> <a id="13079" class="Symbol">(</a><a id="13080" href="Ledger.Conway.Specification.Transaction.html#4700" class="Field">body</a> <a id="13085" class="Symbol">to</a> <a id="13088" class="Field">txb</a><a id="13091" class="Symbol">);</a> <a id="13094" class="Keyword">open</a> <a id="13099" href="Ledger.Conway.Specification.Transaction.html#2982" class="Module">TxBody</a> <a id="13106" href="Ledger.Conway.Specification.Utxo.html#13088" class="Function">txb</a>
        <a id="13118" class="Keyword">open</a> <a id="13123" href="Ledger.Conway.Specification.Transaction.html#4423" class="Module">TxWitnesses</a> <a id="13135" href="Ledger.Conway.Specification.Transaction.html#4724" class="Function">wits</a>


        <a id="13150" href="Ledger.Conway.Specification.Utxo.html#13150" class="Bound">txOutsʰ</a>   <a id="13160" class="Symbol">=</a> <a id="13162" href="Axiom.Set.Map.html#7108" class="Function">mapValues</a> <a id="13172" href="Ledger.Conway.Specification.Transaction.html#5718" class="Function">txOutHash</a> <a id="13182" href="Ledger.Conway.Specification.Transaction.html#3126" class="Function">txOuts</a>
        <a id="13197" href="Ledger.Conway.Specification.Utxo.html#13197" class="Bound">overhead</a>  <a id="13207" class="Symbol">=</a> <a id="13209" class="Number">160</a>
    <a id="13217" class="Keyword">in</a>
    <a id="13224" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="13226" href="Ledger.Conway.Specification.Transaction.html#3018" class="Function">txIns</a> <a id="13232" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="13234" href="Class.HasEmptySet.html#287" class="Field">∅</a>                              <a id="13265" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13267" href="Ledger.Conway.Specification.Transaction.html#3018" class="Function">txIns</a> <a id="13273" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="13275" href="Ledger.Conway.Specification.Transaction.html#3054" class="Function">refInputs</a> <a id="13285" href="Interface.TypeClasses.HasSubset.html#172" class="Field Operator">⊆</a> <a id="13287" href="Class.IsSet.html#916" class="Function">dom</a> <a id="13291" href="Ledger.Conway.Specification.Utxo.html#13019" class="Bound">utxo</a>
    <a id="13300" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13302" href="Ledger.Conway.Specification.Transaction.html#3018" class="Function">txIns</a> <a id="13308" href="Axiom.Set.html#9477" class="Function Operator">∩</a> <a id="13310" href="Ledger.Conway.Specification.Transaction.html#3054" class="Function">refInputs</a> <a id="13320" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13322" href="Class.HasEmptySet.html#287" class="Field">∅</a>                  <a id="13341" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13343" href="Ledger.Conway.Specification.Utxo.html#8871" class="Datatype">inInterval</a> <a id="13354" href="Ledger.Conway.Specification.Utxo.html#12959" class="Bound">slot</a> <a id="13359" href="Ledger.Conway.Specification.Transaction.html#3315" class="Function">txVldt</a>
    <a id="13370" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13372" href="Ledger.Conway.Specification.Utxo.html#2705" class="Function">minfee</a> <a id="13379" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a> <a id="13382" href="Ledger.Conway.Specification.Utxo.html#13019" class="Bound">utxo</a> <a id="13387" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="13390" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13392" href="Ledger.Conway.Specification.Transaction.html#3240" class="Function">txFee</a>              <a id="13411" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13413" class="Symbol">(</a><a id="13414" href="Ledger.Conway.Specification.Transaction.html#4543" class="Function">txrdmrs</a> <a id="13422" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="13424" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="13426" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="13428" class="Symbol">→</a> <a id="13430" href="Ledger.Conway.Specification.Utxo.html#10377" class="Function">collateralCheck</a> <a id="13446" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a> <a id="13449" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="13452" href="Ledger.Conway.Specification.Utxo.html#13019" class="Bound">utxo</a><a id="13456" class="Symbol">)</a>
    <a id="13462" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13464" href="Ledger.Conway.Specification.Utxo.html#11034" class="Function">consumed</a> <a id="13473" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a> <a id="13476" href="Ledger.Conway.Specification.Utxo.html#11531" class="Generalizable">s</a> <a id="13478" href="Ledger.Conway.Specification.Utxo.html#13088" class="Function">txb</a> <a id="13482" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13484" href="Ledger.Conway.Specification.Utxo.html#11248" class="Function">produced</a> <a id="13493" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a> <a id="13496" href="Ledger.Conway.Specification.Utxo.html#11531" class="Generalizable">s</a> <a id="13498" href="Ledger.Conway.Specification.Utxo.html#13088" class="Function">txb</a>  <a id="13503" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13505" href="Ledger.Core.Specification.TokenAlgebra.Base.html#835" class="Function">coin</a> <a id="13510" href="Ledger.Conway.Specification.Transaction.html#3624" class="Function">mint</a> <a id="13515" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13517" class="Number">0</a>
    <a id="13523" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13525" href="Ledger.Conway.Specification.Transaction.html#4753" class="Function">txsize</a> <a id="13532" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13534" href="Ledger.Conway.Specification.PParams.html#1768" class="Field">maxTxSize</a> <a id="13544" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a>
    <a id="13551" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13553" href="Ledger.Conway.Specification.Utxo.html#2590" class="Function">refScriptsSize</a> <a id="13568" href="Ledger.Conway.Specification.Utxo.html#13019" class="Bound">utxo</a> <a id="13573" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="13576" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13578" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a> <a id="13581" class="Symbol">.</a><a id="13582" href="Ledger.Conway.Specification.PParams.html#2557" class="Field">maxRefScriptSizePerTx</a>
    <a id="13608" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13610" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13613" href="Ledger.Conway.Specification.Utxo.html#13613" class="Bound">(_</a> <a id="13616" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13618" href="Ledger.Conway.Specification.Utxo.html#13618" class="Bound">txout</a><a id="13623" href="Ledger.Conway.Specification.Utxo.html#13613" class="Bound">)</a> <a id="13625" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13627" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13629" href="Ledger.Conway.Specification.Utxo.html#13150" class="Bound">txOutsʰ</a> <a id="13637" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13639" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="13649" href="Ledger.Core.Specification.TokenAlgebra.Base.html#880" class="Function">inject</a> <a id="13656" class="Symbol">((</a><a id="13658" href="Ledger.Conway.Specification.Utxo.html#13197" class="Bound">overhead</a> <a id="13667" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="13669" href="Ledger.Conway.Specification.Utxo.html#1064" class="Function">utxoEntrySize</a> <a id="13683" href="Ledger.Conway.Specification.Utxo.html#13618" class="Bound">txout</a><a id="13688" class="Symbol">)</a> <a id="13690" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="13692" href="Ledger.Conway.Specification.PParams.html#2423" class="Field">coinsPerUTxOByte</a> <a id="13709" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a><a id="13711" class="Symbol">)</a> <a id="13713" href="Ledger.Core.Specification.TokenAlgebra.Base.html#1031" class="Function Operator">≤ᵗ</a> <a id="13716" href="Ledger.Conway.Specification.Transaction.html#5807" class="Function">getValueʰ</a> <a id="13726" href="Ledger.Conway.Specification.Utxo.html#13618" class="Bound">txout</a>
    <a id="13736" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13738" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13741" href="Ledger.Conway.Specification.Utxo.html#13741" class="Bound">(_</a> <a id="13744" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13746" href="Ledger.Conway.Specification.Utxo.html#13746" class="Bound">txout</a><a id="13751" href="Ledger.Conway.Specification.Utxo.html#13741" class="Bound">)</a> <a id="13753" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13755" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13757" href="Ledger.Conway.Specification.Utxo.html#13150" class="Bound">txOutsʰ</a> <a id="13765" href="Ledger.Prelude.html#2302" class="Function Operator">∣</a> <a id="13767" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="13777" href="Ledger.Core.Specification.Abstract.html#914" class="Field">serSize</a> <a id="13785" class="Symbol">(</a><a id="13786" href="Ledger.Conway.Specification.Transaction.html#5807" class="Function">getValueʰ</a> <a id="13796" href="Ledger.Conway.Specification.Utxo.html#13746" class="Bound">txout</a><a id="13801" class="Symbol">)</a> <a id="13803" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13805" href="Ledger.Conway.Specification.PParams.html#1948" class="Field">maxValSize</a> <a id="13816" href="Ledger.Conway.Specification.Utxo.html#12928" class="Bound">pp</a>
    <a id="13823" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13825" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13828" href="Ledger.Conway.Specification.Utxo.html#13828" class="Bound">(</a><a id="13829" href="Ledger.Conway.Specification.Utxo.html#13829" class="Bound">a</a> <a id="13831" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13833" href="Ledger.Conway.Specification.Utxo.html#13828" class="Bound">_)</a> <a id="13836" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13838" href="Class.IsSet.html#959" class="Function">range</a> <a id="13844" href="Ledger.Conway.Specification.Utxo.html#13150" class="Bound">txOutsʰ</a> <a id="13852" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="13862" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="13870" class="Symbol">(</a><a id="13871" href="Function.Base.html#725" class="Function">const</a> <a id="13877" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="13878" class="Symbol">)</a> <a id="13880" class="Symbol">(λ</a> <a id="13883" href="Ledger.Conway.Specification.Utxo.html#13883" class="Bound">a</a> <a id="13885" class="Symbol">→</a> <a id="13887" href="Ledger.Conway.Specification.Utxo.html#13883" class="Bound">a</a> <a id="13889" class="Symbol">.</a><a id="13890" href="Ledger.Core.Specification.Address.html#1290" class="Field">BootstrapAddr.attrsSize</a> <a id="13914" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="13916" class="Number">64</a><a id="13918" class="Symbol">)</a> <a id="13920" href="Ledger.Conway.Specification.Utxo.html#13829" class="Bound">a</a>
    <a id="13926" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13928" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13931" href="Ledger.Conway.Specification.Utxo.html#13931" class="Bound">(</a><a id="13932" href="Ledger.Conway.Specification.Utxo.html#13932" class="Bound">a</a> <a id="13934" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="13936" href="Ledger.Conway.Specification.Utxo.html#13931" class="Bound">_)</a> <a id="13939" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13941" href="Class.IsSet.html#959" class="Function">range</a> <a id="13947" href="Ledger.Conway.Specification.Utxo.html#13150" class="Bound">txOutsʰ</a> <a id="13955" href="Class.IsSet.html#576" class="Function">]</a>  <a id="13958" href="Ledger.Core.Specification.Address.html#2759" class="Function">netId</a> <a id="13964" href="Ledger.Conway.Specification.Utxo.html#13932" class="Bound">a</a>        <a id="13973" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13975" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="13989" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="13991" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="13994" href="Ledger.Conway.Specification.Utxo.html#13994" class="Bound">a</a> <a id="13996" href="Class.IsSet.html#576" class="Function">∈</a> <a id="13998" href="Class.IsSet.html#916" class="Function">dom</a> <a id="14002" href="Ledger.Conway.Specification.Transaction.html#3274" class="Function">txWithdrawals</a> <a id="14016" href="Class.IsSet.html#576" class="Function">]</a>    <a id="14021" href="Ledger.Core.Specification.Address.html#1580" class="Field">NetworkIdOf</a> <a id="14033" href="Ledger.Conway.Specification.Utxo.html#13994" class="Bound">a</a>  <a id="14036" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14038" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="14052" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="14054" href="Ledger.Conway.Specification.Transaction.html#3537" class="Function">txNetworkId</a>  <a id="14067" href="Prelude.html#2893" class="Function Operator">~</a> <a id="14069" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="14074" href="Ledger.Core.Specification.Epoch.html#2703" class="Function">NetworkId</a>
    <a id="14088" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="14090" href="Ledger.Conway.Specification.Transaction.html#3580" class="Function">currentTreasury</a>  <a id="14107" href="Prelude.html#2893" class="Function Operator">~</a> <a id="14109" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="14114" href="Ledger.Conway.Specification.Utxo.html#12987" class="Bound">treasury</a>
    <a id="14127" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="14129" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="14131" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">⊢</a> <a id="14133" href="Ledger.Conway.Specification.Utxo.html#11531" class="Generalizable">s</a> <a id="14135" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">⇀⦇</a> <a id="14138" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="14141" href="Ledger.Conway.Specification.Utxo.html#11653" class="Datatype Operator">,UTXOS⦈</a> <a id="14149" href="Ledger.Conway.Specification.Utxo.html#11533" class="Generalizable">s&#39;</a>
      <a id="14158" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="14197" href="Ledger.Conway.Specification.Utxo.html#11517" class="Generalizable">Γ</a> <a id="14199" href="Ledger.Conway.Specification.Utxo.html#2233" class="Datatype Operator">⊢</a> <a id="14201" href="Ledger.Conway.Specification.Utxo.html#11531" class="Generalizable">s</a> <a id="14203" href="Ledger.Conway.Specification.Utxo.html#2233" class="Datatype Operator">⇀⦇</a> <a id="14206" href="Ledger.Conway.Specification.Utxo.html#11550" class="Generalizable">tx</a> <a id="14209" href="Ledger.Conway.Specification.Utxo.html#2233" class="Datatype Operator">,UTXO⦈</a> <a id="14216" href="Ledger.Conway.Specification.Utxo.html#11533" class="Generalizable">s&#39;</a>


<a id="14221" class="Keyword">pattern</a> <a id="UTXO-inductive⋯"></a><a id="14229" href="Ledger.Conway.Specification.Utxo.html#14229" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="14245" href="Ledger.Conway.Specification.Utxo.html#14329" class="Bound">tx</a> <a id="14248" href="Ledger.Conway.Specification.Utxo.html#14312" class="Bound">Γ</a> <a id="14250" href="Ledger.Conway.Specification.Utxo.html#14320" class="Bound">s</a> <a id="14252" href="Ledger.Conway.Specification.Utxo.html#14334" class="Bound">x</a> <a id="14254" href="Ledger.Conway.Specification.Utxo.html#14338" class="Bound">y</a> <a id="14256" href="Ledger.Conway.Specification.Utxo.html#14342" class="Bound">z</a> <a id="14258" href="Ledger.Conway.Specification.Utxo.html#14346" class="Bound">w</a> <a id="14260" href="Ledger.Conway.Specification.Utxo.html#14350" class="Bound">k</a> <a id="14262" href="Ledger.Conway.Specification.Utxo.html#14354" class="Bound">l</a> <a id="14264" href="Ledger.Conway.Specification.Utxo.html#14358" class="Bound">m</a> <a id="14266" href="Ledger.Conway.Specification.Utxo.html#14362" class="Bound">c</a> <a id="14268" href="Ledger.Conway.Specification.Utxo.html#14366" class="Bound">v</a> <a id="14270" href="Ledger.Conway.Specification.Utxo.html#14370" class="Bound">j</a> <a id="14272" href="Ledger.Conway.Specification.Utxo.html#14374" class="Bound">n</a> <a id="14274" href="Ledger.Conway.Specification.Utxo.html#14378" class="Bound">o</a> <a id="14276" href="Ledger.Conway.Specification.Utxo.html#14382" class="Bound">p</a> <a id="14278" href="Ledger.Conway.Specification.Utxo.html#14386" class="Bound">q</a> <a id="14280" href="Ledger.Conway.Specification.Utxo.html#14390" class="Bound">r</a> <a id="14282" href="Ledger.Conway.Specification.Utxo.html#14394" class="Bound">t</a> <a id="14284" href="Ledger.Conway.Specification.Utxo.html#14398" class="Bound">u</a> <a id="14286" href="Ledger.Conway.Specification.Utxo.html#14402" class="Bound">h</a>
  <a id="14290" class="Symbol">=</a> <a id="14292" href="Ledger.Conway.Specification.Utxo.html#12903" class="InductiveConstructor">UTXO-inductive</a> <a id="14307" class="Symbol">{</a><a id="14308" class="Argument">Γ</a> <a id="14310" class="Symbol">=</a> <a id="14312" href="Ledger.Conway.Specification.Utxo.html#14312" class="Bound">Γ</a><a id="14313" class="Symbol">}</a> <a id="14315" class="Symbol">{</a><a id="14316" class="Argument">s</a> <a id="14318" class="Symbol">=</a> <a id="14320" href="Ledger.Conway.Specification.Utxo.html#14320" class="Bound">s</a><a id="14321" class="Symbol">}</a> <a id="14323" class="Symbol">{</a><a id="14324" class="Argument">tx</a> <a id="14327" class="Symbol">=</a> <a id="14329" href="Ledger.Conway.Specification.Utxo.html#14329" class="Bound">tx</a><a id="14331" class="Symbol">}</a> <a id="14333" class="Symbol">(</a><a id="14334" href="Ledger.Conway.Specification.Utxo.html#14334" class="Bound">x</a> <a id="14336" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14338" href="Ledger.Conway.Specification.Utxo.html#14338" class="Bound">y</a> <a id="14340" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14342" href="Ledger.Conway.Specification.Utxo.html#14342" class="Bound">z</a> <a id="14344" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14346" href="Ledger.Conway.Specification.Utxo.html#14346" class="Bound">w</a> <a id="14348" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14350" href="Ledger.Conway.Specification.Utxo.html#14350" class="Bound">k</a> <a id="14352" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14354" href="Ledger.Conway.Specification.Utxo.html#14354" class="Bound">l</a> <a id="14356" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14358" href="Ledger.Conway.Specification.Utxo.html#14358" class="Bound">m</a> <a id="14360" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14362" href="Ledger.Conway.Specification.Utxo.html#14362" class="Bound">c</a> <a id="14364" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14366" href="Ledger.Conway.Specification.Utxo.html#14366" class="Bound">v</a> <a id="14368" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14370" href="Ledger.Conway.Specification.Utxo.html#14370" class="Bound">j</a> <a id="14372" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14374" href="Ledger.Conway.Specification.Utxo.html#14374" class="Bound">n</a> <a id="14376" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14378" href="Ledger.Conway.Specification.Utxo.html#14378" class="Bound">o</a> <a id="14380" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14382" href="Ledger.Conway.Specification.Utxo.html#14382" class="Bound">p</a> <a id="14384" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14386" href="Ledger.Conway.Specification.Utxo.html#14386" class="Bound">q</a> <a id="14388" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14390" href="Ledger.Conway.Specification.Utxo.html#14390" class="Bound">r</a> <a id="14392" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14394" href="Ledger.Conway.Specification.Utxo.html#14394" class="Bound">t</a> <a id="14396" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14398" href="Ledger.Conway.Specification.Utxo.html#14398" class="Bound">u</a> <a id="14400" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14402" href="Ledger.Conway.Specification.Utxo.html#14402" class="Bound">h</a><a id="14403" class="Symbol">)</a>
<a id="14405" class="Keyword">unquoteDecl</a> <a id="UTXO-premises"></a><a id="14417" href="Ledger.Conway.Specification.Utxo.html#14417" class="Function">UTXO-premises</a> <a id="14431" class="Symbol">=</a> <a id="14433" href="Prelude.STS.GenPremises.html#13070" class="Function">genPremises</a> <a id="14445" href="Ledger.Conway.Specification.Utxo.html#14417" class="Function">UTXO-premises</a> <a id="14459" class="Symbol">(</a><a id="14460" class="Keyword">quote</a> <a id="14466" href="Ledger.Conway.Specification.Utxo.html#12903" class="InductiveConstructor">UTXO-inductive</a><a id="14480" class="Symbol">)</a>

</pre></body></html>