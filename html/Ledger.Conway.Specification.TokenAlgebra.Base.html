<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.TokenAlgebra.Base</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>
<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Prelude.html" class="Module">Prelude</a> <a id="45" class="Keyword">using</a> <a id="51" class="Symbol">(</a><a id="52" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="56" class="Symbol">)</a>
<a id="58" class="Keyword">module</a> <a id="65" href="Ledger.Conway.Specification.TokenAlgebra.Base.html" class="Module">Ledger.Conway.Specification.TokenAlgebra.Base</a> <a id="111" class="Symbol">(</a>


  <a id="117" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#117" class="Bound">PolicyId</a>



  <a id="131" class="Symbol">:</a> <a id="133" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="137" class="Symbol">)</a> <a id="139" class="Keyword">where</a>
<a id="145" class="Keyword">open</a> <a id="150" class="Keyword">import</a> <a id="157" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="173" class="Keyword">open</a> <a id="178" class="Keyword">import</a> <a id="185" href="Algebra.html" class="Module">Algebra</a>              <a id="206" class="Keyword">using</a> <a id="212" class="Symbol">(</a><a id="213" href="Algebra.Bundles.html#7315" class="Record">Monoid</a><a id="219" class="Symbol">)</a>
<a id="221" class="Keyword">open</a> <a id="226" class="Keyword">import</a> <a id="233" href="Algebra.Morphism.html" class="Module">Algebra.Morphism</a>     <a id="254" class="Keyword">using</a> <a id="260" class="Symbol">(</a><a id="261" class="Keyword">module</a> <a id="268" href="Algebra.Morphism.Structures.html#4177" class="Module">MonoidMorphisms</a> <a id="284" class="Symbol">)</a>
<a id="286" class="Keyword">open</a> <a id="291" class="Keyword">import</a> <a id="298" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>  <a id="319" class="Keyword">using</a> <a id="325" class="Symbol">(</a><a id="326" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="336" class="Symbol">)</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Relation.Binary.html" class="Module">Relation.Binary</a>      <a id="371" class="Keyword">using</a> <a id="377" class="Symbol">(</a><a id="378" href="Relation.Binary.Core.html#896" class="Function">Rel</a><a id="381" class="Symbol">)</a>
<a id="383" class="Keyword">open</a> <a id="388" class="Keyword">import</a> <a id="395" href="Relation.Unary.html" class="Module">Relation.Unary</a>       <a id="416" class="Keyword">using</a> <a id="422" class="Symbol">(</a><a id="423" href="Relation.Unary.html#1178" class="Function">Pred</a><a id="427" class="Symbol">)</a>

<a id="MemoryEstimate"></a><a id="430" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#430" class="Function">MemoryEstimate</a> <a id="445" class="Symbol">:</a> <a id="447" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="451" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#430" class="Function">MemoryEstimate</a> <a id="466" class="Symbol">=</a> <a id="468" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>


<a id="472" class="Keyword">record</a> <a id="TokenAlgebra"></a><a id="479" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#479" class="Record">TokenAlgebra</a> <a id="492" class="Symbol">:</a> <a id="494" href="Agda.Primitive.html#388" class="Primitive">Type₁</a> <a id="500" class="Keyword">where</a>
  <a id="508" class="Keyword">field</a>
    <a id="TokenAlgebra.Value"></a><a id="518" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a> <a id="524" class="Symbol">:</a> <a id="526" href="Agda.Primitive.html#388" class="Primitive">Set</a>
    <a id="534" class="Symbol">⦃</a> <a id="TokenAlgebra.Value-CommutativeMonoid"></a><a id="536" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#536" class="Field">Value-CommutativeMonoid</a> <a id="560" class="Symbol">⦄</a> <a id="562" class="Symbol">:</a> <a id="564" href="Class.CommutativeMonoid.Core.html#191" class="Record">CommutativeMonoid</a> <a id="582" href="Level.html#521" class="Function">0ℓ</a> <a id="585" href="Level.html#521" class="Function">0ℓ</a> <a id="588" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a>



  <a id="599" class="Keyword">open</a> <a id="604" href="Algebra.Bundles.html#7886" class="Module">Algebra.CommutativeMonoid</a> <a id="630" class="Symbol">(</a><a id="631" href="Class.CommutativeMonoid.Core.html#507" class="Function">Conversion.toBundle</a> <a id="651" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#536" class="Field">Value-CommutativeMonoid</a><a id="674" class="Symbol">)</a> <a id="676" class="Keyword">public</a>
    <a id="687" class="Keyword">using</a> <a id="693" class="Symbol">(</a><a id="694" href="Algebra.Bundles.html#8008" class="Field Operator">_≈_</a> <a id="698" class="Symbol">;</a> <a id="700" href="Algebra.Bundles.html#8086" class="Field">ε</a> <a id="702" class="Symbol">;</a> <a id="704" href="Algebra.Bundles.html#8230" class="Function">monoid</a> <a id="711" class="Symbol">;</a> <a id="713" href="Algebra.Bundles.html#7708" class="Function">rawMonoid</a><a id="722" class="Symbol">)</a>
    <a id="728" class="Keyword">renaming</a> <a id="737" class="Symbol">(</a><a id="738" href="Algebra.Bundles.html#8048" class="Field Operator">_∙_</a> <a id="742" class="Symbol">to</a> <a id="745" class="Field Operator">_+ᵛ_</a><a id="749" class="Symbol">)</a>

  <a id="754" class="Keyword">open</a> <a id="759" href="Algebra.Morphism.Structures.html#4177" class="Module">MonoidMorphisms</a> <a id="775" class="Symbol">(</a><a id="776" href="Algebra.Bundles.html#7708" class="Function">rawMonoid</a><a id="785" class="Symbol">)</a> <a id="787" class="Symbol">(</a><a id="788" href="Algebra.Bundles.html#7708" class="Function">Monoid.rawMonoid</a> <a id="805" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="815" class="Symbol">)</a> <a id="817" class="Keyword">public</a>
  <a id="826" class="Keyword">field</a>


    <a id="TokenAlgebra.coin"></a><a id="838" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a>                      <a id="864" class="Symbol">:</a> <a id="866" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a> <a id="872" class="Symbol">→</a> <a id="874" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
    <a id="TokenAlgebra.inject"></a><a id="883" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#883" class="Field">inject</a>                    <a id="909" class="Symbol">:</a> <a id="911" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a> <a id="916" class="Symbol">→</a> <a id="918" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a>
    <a id="TokenAlgebra.policies"></a><a id="928" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#928" class="Field">policies</a>                  <a id="954" class="Symbol">:</a> <a id="956" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a> <a id="962" class="Symbol">→</a> <a id="964" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="966" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#117" class="Bound">PolicyId</a>
    <a id="TokenAlgebra.size"></a><a id="979" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#979" class="Field">size</a>                      <a id="1005" class="Symbol">:</a> <a id="1007" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a> <a id="1013" class="Symbol">→</a> <a id="1015" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#430" class="Function">MemoryEstimate</a>
    <a id="TokenAlgebra._≤ᵗ_"></a><a id="1034" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1034" class="Field Operator">_≤ᵗ_</a>                      <a id="1060" class="Symbol">:</a> <a id="1062" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a> <a id="1068" class="Symbol">→</a> <a id="1070" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a> <a id="1076" class="Symbol">→</a> <a id="1078" href="Agda.Primitive.html#388" class="Primitive">Type</a>
    <a id="TokenAlgebra.coin∘inject≗id"></a><a id="1087" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1087" class="Field">coin∘inject≗id</a>            <a id="1113" class="Symbol">:</a> <a id="1115" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1120" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1122" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#883" class="Field">inject</a> <a id="1129" href="Relation.Binary.PropositionalEquality.Core.html#1154" class="Function Operator">≗</a> <a id="1131" href="Function.Base.html#704" class="Function">id</a>
    <a id="TokenAlgebra.coinIsMonoidHomomorphism"></a><a id="1138" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1138" class="Field">coinIsMonoidHomomorphism</a>  <a id="1164" class="Symbol">:</a> <a id="1166" href="Algebra.Morphism.Structures.html#4517" class="Record">IsMonoidHomomorphism</a> <a id="1187" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a>



    <a id="1199" class="Symbol">⦃</a> <a id="TokenAlgebra.DecEq-Value"></a><a id="1201" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1201" class="Field">DecEq-Value</a> <a id="1213" class="Symbol">⦄</a> <a id="1215" class="Symbol">:</a> <a id="1217" href="Class.DecEq.Core.html#126" class="Record">DecEq</a> <a id="1223" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a>
    <a id="1233" class="Symbol">⦃</a> <a id="TokenAlgebra.Dec-≤ᵗ"></a><a id="1235" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1235" class="Field">Dec-≤ᵗ</a> <a id="1242" class="Symbol">⦄</a>      <a id="1249" class="Symbol">:</a> <a id="1251" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1034" class="Field Operator">_≤ᵗ_</a> <a id="1256" href="Class.Decidable.Core.html#590" class="Function Operator">⁇²</a>

  <a id="1262" class="Keyword">instance</a>
    <a id="TokenAlgebra.addValue"></a><a id="1275" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1275" class="Function">addValue</a> <a id="1284" class="Symbol">:</a> <a id="1286" href="Class.HasAdd.Core.html#104" class="Record">HasAdd</a> <a id="1293" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a>
    <a id="1303" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1275" class="Function">addValue</a> <a id="1312" class="Symbol">=</a> <a id="1314" class="Keyword">record</a> <a id="1321" class="Symbol">{</a> <a id="1323" href="Class.HasAdd.Core.html#162" class="Field Operator">_+_</a> <a id="1327" class="Symbol">=</a> <a id="1329" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#745" class="Function Operator">_+ᵛ_</a> <a id="1334" class="Symbol">}</a>

  <a id="TokenAlgebra.coin-inject-lemma"></a><a id="1339" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1339" class="Function">coin-inject-lemma</a> <a id="1357" class="Symbol">:</a> <a id="1359" class="Symbol">∀</a> <a id="1361" class="Symbol">{</a><a id="1362" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1362" class="Bound">val</a><a id="1365" class="Symbol">}</a> <a id="1367" class="Symbol">{</a><a id="1368" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1368" class="Bound">c</a><a id="1369" class="Symbol">}</a> <a id="1371" class="Symbol">→</a> <a id="1373" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1378" class="Symbol">(</a><a id="1379" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1362" class="Bound">val</a> <a id="1383" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1385" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#883" class="Field">inject</a> <a id="1392" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1368" class="Bound">c</a><a id="1393" class="Symbol">)</a> <a id="1395" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1397" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1402" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1362" class="Bound">val</a> <a id="1406" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1408" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1368" class="Bound">c</a>
  <a id="1412" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1339" class="Function">coin-inject-lemma</a> <a id="1430" class="Symbol">{</a><a id="1431" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1431" class="Bound">val</a><a id="1434" class="Symbol">}</a> <a id="1436" class="Symbol">{</a><a id="1437" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1437" class="Bound">c</a><a id="1438" class="Symbol">}</a> <a id="1440" class="Symbol">=</a> <a id="1442" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1452" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1457" class="Symbol">(</a><a id="1458" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1431" class="Bound">val</a> <a id="1462" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1464" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#883" class="Field">inject</a> <a id="1471" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1437" class="Bound">c</a><a id="1472" class="Symbol">)</a>         <a id="1482" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1485" href="Algebra.Morphism.Structures.html#3015" class="Function">homo</a> <a id="1490" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1138" class="Field">coinIsMonoidHomomorphism</a> <a id="1515" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1431" class="Bound">val</a> <a id="1519" class="Symbol">(</a><a id="1520" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#883" class="Field">inject</a> <a id="1527" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1437" class="Bound">c</a><a id="1528" class="Symbol">)</a> <a id="1530" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1536" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1541" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1431" class="Bound">val</a> <a id="1545" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1547" class="Symbol">(</a><a id="1548" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1553" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1555" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#883" class="Field">inject</a><a id="1561" class="Symbol">)</a> <a id="1563" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1437" class="Bound">c</a>  <a id="1566" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1569" href="Relation.Binary.PropositionalEquality.Core.html#1481" class="Function">cong</a> <a id="1574" class="Symbol">(</a><a id="1575" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1580" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1431" class="Bound">val</a> <a id="1584" href="Class.HasAdd.Core.html#162" class="Field Operator">+_</a><a id="1586" class="Symbol">)</a> <a id="1588" class="Symbol">(</a><a id="1589" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1087" class="Field">coin∘inject≗id</a> <a id="1604" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1437" class="Bound">c</a><a id="1605" class="Symbol">)</a> <a id="1607" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1613" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#838" class="Field">coin</a> <a id="1618" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1431" class="Bound">val</a> <a id="1622" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1624" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1437" class="Bound">c</a>                  <a id="1643" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>
    <a id="1649" class="Keyword">where</a>
    <a id="1659" class="Keyword">open</a> <a id="1664" href="Relation.Binary.PropositionalEquality.Properties.html#6850" class="Module">≡-Reasoning</a>
    <a id="1680" class="Keyword">open</a> <a id="1685" href="Algebra.Morphism.Structures.html#4517" class="Module">MonoidMorphisms.IsMonoidHomomorphism</a>


  <a id="TokenAlgebra.sumᵛ"></a><a id="1726" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1726" class="Function">sumᵛ</a> <a id="1731" class="Symbol">:</a> <a id="1733" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1738" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a> <a id="1744" class="Symbol">→</a> <a id="1746" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#518" class="Field">Value</a>
  <a id="1754" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1726" class="Function">sumᵛ</a> <a id="1759" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1762" class="Symbol">=</a> <a id="1764" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#883" class="Field">inject</a> <a id="1771" class="Number">0</a>
  <a id="1775" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1726" class="Function">sumᵛ</a> <a id="1780" class="Symbol">(</a><a id="1781" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1781" class="Bound">x</a> <a id="1783" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1785" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1785" class="Bound">l</a><a id="1786" class="Symbol">)</a> <a id="1788" class="Symbol">=</a> <a id="1790" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1781" class="Bound">x</a> <a id="1792" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="1794" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1726" class="Function">sumᵛ</a> <a id="1799" href="Ledger.Conway.Specification.TokenAlgebra.Base.html#1785" class="Bound">l</a>

</pre></body></html>