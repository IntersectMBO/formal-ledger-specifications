<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Utxo.Properties.PoV</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="75" class="Keyword">open</a> <a id="80" class="Keyword">import</a> <a id="87" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="128" class="Keyword">module</a> <a id="135" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html" class="Module">Ledger.Conway.Specification.Utxo.Properties.PoV</a>
  <a id="185" class="Symbol">(</a><a id="186" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#186" class="Bound">txs</a> <a id="190" class="Symbol">:</a> <a id="192" class="Symbol">_)</a> <a id="195" class="Symbol">(</a><a id="196" class="Keyword">open</a> <a id="201" href="Ledger.Conway.Specification.Transaction.html#1000" class="Module">TransactionStructure</a> <a id="222" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#186" class="Bound">txs</a><a id="225" class="Symbol">)</a>
  <a id="229" class="Symbol">(</a><a id="230" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#230" class="Bound">abs</a> <a id="234" class="Symbol">:</a> <a id="236" href="Ledger.Conway.Specification.Abstract.html#641" class="Record">AbstractFunctions</a> <a id="254" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#186" class="Bound">txs</a><a id="257" class="Symbol">)</a>
  <a id="261" class="Keyword">where</a>


<a id="269" class="Keyword">open</a> <a id="274" class="Keyword">import</a> <a id="281" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="315" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a>
<a id="328" class="Keyword">open</a> <a id="333" class="Keyword">import</a> <a id="340" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="355" class="Keyword">open</a> <a id="360" class="Keyword">import</a> <a id="367" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="400" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#186" class="Bound">txs</a> <a id="404" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#230" class="Bound">abs</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Ledger.Conway.Specification.Utxo.Properties.html" class="Module">Ledger.Conway.Specification.Utxo.Properties</a> <a id="464" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#186" class="Bound">txs</a> <a id="468" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#230" class="Bound">abs</a> <a id="472" class="Keyword">using</a> <a id="478" class="Symbol">(</a><a id="479" href="Ledger.Conway.Specification.Utxo.Properties.html#13678" class="Function">χ</a><a id="480" class="Symbol">;</a> <a id="482" class="Keyword">module</a> <a id="489" href="Ledger.Conway.Specification.Utxo.Properties.html#13725" class="Module">DepositHelpers</a><a id="503" class="Symbol">)</a>
<a id="505" class="Keyword">open</a> <a id="510" href="Ledger.Conway.Specification.Utxo.html#1474" class="Module">UTxOState</a><a id="519" class="Symbol">;</a> <a id="521" class="Keyword">open</a> <a id="526" href="Ledger.Conway.Specification.Transaction.html#4500" class="Module">Tx</a><a id="528" class="Symbol">;</a> <a id="530" class="Keyword">open</a> <a id="535" href="Ledger.Conway.Specification.Transaction.html#2987" class="Module">TxBody</a>


<a id="UTXOpov"></a><a id="544" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#544" class="Function">UTXOpov</a> <a id="552" class="Symbol">:</a> <a id="554" class="Symbol">{</a><a id="555" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#555" class="Bound">Γ</a> <a id="557" class="Symbol">:</a> <a id="559" href="Ledger.Conway.Specification.Utxo.html#1122" class="Record">UTxOEnv</a><a id="566" class="Symbol">}</a> <a id="568" class="Symbol">{</a><a id="569" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#569" class="Bound">tx</a> <a id="572" class="Symbol">:</a> <a id="574" href="Ledger.Conway.Specification.Transaction.html#4500" class="Record">Tx</a><a id="576" class="Symbol">}</a> <a id="578" class="Symbol">{</a><a id="579" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#579" class="Bound">s</a> <a id="581" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#581" class="Bound">s&#39;</a> <a id="584" class="Symbol">:</a> <a id="586" href="Ledger.Conway.Specification.Utxo.html#1474" class="Record">UTxOState</a><a id="595" class="Symbol">}</a>
  <a id="599" class="Symbol">→</a> <a id="601" href="Ledger.Conway.Specification.Transaction.html#4192" class="Field">txidOf</a> <a id="608" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#569" class="Bound">tx</a> <a id="611" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="613" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="618" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="624" class="Symbol">(</a><a id="625" href="Class.IsSet.html#916" class="Function">dom</a> <a id="629" class="Symbol">(</a><a id="630" href="Ledger.Conway.Specification.Transaction.html#2930" class="Field">UTxOOf</a> <a id="637" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#579" class="Bound">s</a><a id="638" class="Symbol">))</a>
  <a id="643" class="Symbol">→</a> <a id="645" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#555" class="Bound">Γ</a> <a id="647" href="Ledger.Conway.Specification.Utxo.html#2119" class="Datatype Operator">⊢</a> <a id="649" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#579" class="Bound">s</a> <a id="651" href="Ledger.Conway.Specification.Utxo.html#2119" class="Datatype Operator">⇀⦇</a> <a id="654" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#569" class="Bound">tx</a> <a id="657" href="Ledger.Conway.Specification.Utxo.html#2119" class="Datatype Operator">,UTXO⦈</a> <a id="664" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#581" class="Bound">s&#39;</a>
  <a id="669" class="Symbol">→</a> <a id="671" href="Ledger.Prelude.HasCoin.html#170" class="Field">getCoin</a> <a id="679" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#579" class="Bound">s</a> <a id="681" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="683" href="Ledger.Prelude.HasCoin.html#170" class="Field">getCoin</a> <a id="691" class="Symbol">(</a><a id="692" href="Ledger.Conway.Specification.Certs.html#3030" class="Field">wdrlsOf</a> <a id="700" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#569" class="Bound">tx</a><a id="702" class="Symbol">)</a> <a id="704" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="706" href="Ledger.Conway.Specification.Utxo.Properties.html#13678" class="Function">χ</a> <a id="708" class="Symbol">(</a><a id="709" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#569" class="Bound">tx</a> <a id="712" class="Symbol">.</a><a id="713" href="Ledger.Conway.Specification.Transaction.html#4604" class="Field">isValid</a><a id="720" class="Symbol">)</a> <a id="722" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="724" href="Ledger.Prelude.HasCoin.html#170" class="Field">getCoin</a> <a id="732" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#581" class="Bound">s&#39;</a>


<a id="737" class="Comment">-- Proof.</a>
<a id="747" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#544" class="Function">UTXOpov</a> <a id="755" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#755" class="Bound">h&#39;</a> <a id="758" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#758" class="Bound">step</a><a id="762" class="Symbol">@(</a><a id="764" href="Ledger.Conway.Specification.Utxo.html#13937" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="780" class="Symbol">_</a> <a id="782" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#782" class="Bound">Γ</a> <a id="784" class="Symbol">_</a> <a id="786" class="Symbol">_</a> <a id="788" class="Symbol">_</a> <a id="790" class="Symbol">_</a> <a id="792" class="Symbol">_</a> <a id="794" class="Symbol">_</a> <a id="796" class="Symbol">_</a> <a id="798" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#798" class="Bound">newBal</a> <a id="805" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#805" class="Bound">noMintAda</a> <a id="815" class="Symbol">_</a> <a id="817" class="Symbol">_</a> <a id="819" class="Symbol">_</a> <a id="821" class="Symbol">_</a> <a id="823" class="Symbol">_</a> <a id="825" class="Symbol">_</a> <a id="827" class="Symbol">_</a> <a id="829" class="Symbol">_</a> <a id="831" class="Symbol">_</a> <a id="833" class="Symbol">(</a><a id="834" href="Ledger.Conway.Specification.Utxo.html#11445" class="InductiveConstructor">Scripts-Yes</a> <a id="846" class="Symbol">(_</a> <a id="849" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="851" class="Symbol">_</a> <a id="853" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="855" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#855" class="Bound">valid</a><a id="860" class="Symbol">)))</a>
  <a id="866" class="Symbol">=</a> <a id="868" href="Ledger.Conway.Specification.Utxo.Properties.html#24967" class="Function">DepositHelpers.pov-scripts</a> <a id="895" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#758" class="Bound">step</a> <a id="900" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#755" class="Bound">h&#39;</a> <a id="903" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="908" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#855" class="Bound">valid</a>

<a id="915" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#544" class="Function">UTXOpov</a> <a id="923" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#923" class="Bound">h&#39;</a> <a id="926" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#926" class="Bound">step</a><a id="930" class="Symbol">@(</a><a id="932" href="Ledger.Conway.Specification.Utxo.html#13937" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="948" class="Symbol">_</a> <a id="950" class="Symbol">_</a> <a id="952" class="Symbol">_</a> <a id="954" class="Symbol">_</a> <a id="956" class="Symbol">_</a> <a id="958" class="Symbol">_</a> <a id="960" class="Symbol">_</a> <a id="962" class="Symbol">_</a> <a id="964" class="Symbol">_</a> <a id="966" class="Symbol">_</a> <a id="968" class="Symbol">_</a> <a id="970" class="Symbol">_</a> <a id="972" class="Symbol">_</a> <a id="974" class="Symbol">_</a> <a id="976" class="Symbol">_</a> <a id="978" class="Symbol">_</a> <a id="980" class="Symbol">_</a> <a id="982" class="Symbol">_</a> <a id="984" class="Symbol">_</a> <a id="986" class="Symbol">_</a> <a id="988" class="Symbol">(</a><a id="989" href="Ledger.Conway.Specification.Utxo.html#11963" class="InductiveConstructor">Scripts-No</a> <a id="1000" class="Symbol">(_</a> <a id="1003" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1005" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#1005" class="Bound">invalid</a><a id="1012" class="Symbol">)))</a>
  <a id="1018" class="Symbol">=</a> <a id="1020" href="Ledger.Conway.Specification.Utxo.Properties.html#25415" class="Function">DepositHelpers.pov-no-scripts</a> <a id="1050" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#926" class="Bound">step</a> <a id="1055" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#923" class="Bound">h&#39;</a> <a id="1058" href="Ledger.Conway.Specification.Utxo.Properties.PoV.html#1005" class="Bound">invalid</a>

</pre></body></html>