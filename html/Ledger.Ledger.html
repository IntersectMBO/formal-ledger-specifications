<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Ledger</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">import</a> <a id="33" href="Data.List.html" class="Module">Data.List</a> <a id="43" class="Symbol">as</a> <a id="46" class="Module">L</a>

<a id="49" class="Keyword">open</a> <a id="54" class="Keyword">import</a> <a id="61" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="76" class="Keyword">open</a> <a id="81" class="Keyword">import</a> <a id="88" href="Ledger.Abstract.html" class="Module">Ledger.Abstract</a>
<a id="104" class="Keyword">open</a> <a id="109" class="Keyword">import</a> <a id="116" href="Ledger.Transaction.html" class="Module">Ledger.Transaction</a> <a id="135" class="Keyword">using</a> <a id="141" class="Symbol">(</a><a id="142" href="Ledger.Transaction.html#867" class="Record">TransactionStructure</a><a id="162" class="Symbol">)</a>

<a id="165" class="Keyword">module</a> <a id="172" href="Ledger.Ledger.html" class="Module">Ledger.Ledger</a>
  <a id="188" class="Symbol">(</a><a id="189" href="Ledger.Ledger.html#189" class="Bound">txs</a> <a id="193" class="Symbol">:</a> <a id="195" class="Symbol">_)</a> <a id="198" class="Symbol">(</a><a id="199" class="Keyword">open</a> <a id="204" href="Ledger.Transaction.html#867" class="Module">TransactionStructure</a> <a id="225" href="Ledger.Ledger.html#189" class="Bound">txs</a><a id="228" class="Symbol">)</a>
  <a id="232" class="Symbol">(</a><a id="233" href="Ledger.Ledger.html#233" class="Bound">abs</a> <a id="237" class="Symbol">:</a> <a id="239" href="Ledger.Abstract.html#578" class="Record">AbstractFunctions</a> <a id="257" href="Ledger.Ledger.html#189" class="Bound">txs</a><a id="260" class="Symbol">)</a> <a id="262" class="Symbol">(</a><a id="263" class="Keyword">open</a> <a id="268" href="Ledger.Abstract.html#578" class="Module">AbstractFunctions</a> <a id="286" href="Ledger.Ledger.html#233" class="Bound">abs</a><a id="289" class="Symbol">)</a>
  <a id="293" class="Keyword">where</a>

<a id="300" class="Keyword">open</a> <a id="305" class="Keyword">import</a> <a id="312" href="Ledger.Enact.html" class="Module">Ledger.Enact</a> <a id="325" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>
<a id="338" class="Keyword">open</a> <a id="343" class="Keyword">import</a> <a id="350" href="Ledger.Gov.html" class="Module">Ledger.Gov</a> <a id="361" href="Ledger.Ledger.html#189" class="Bound">txs</a>
<a id="365" class="Keyword">open</a> <a id="370" class="Keyword">import</a> <a id="377" href="Ledger.Utxo.html" class="Module">Ledger.Utxo</a> <a id="389" href="Ledger.Ledger.html#189" class="Bound">txs</a> <a id="393" href="Ledger.Ledger.html#233" class="Bound">abs</a>
<a id="397" class="Keyword">open</a> <a id="402" class="Keyword">import</a> <a id="409" href="Ledger.Utxow.html" class="Module">Ledger.Utxow</a> <a id="422" href="Ledger.Ledger.html#189" class="Bound">txs</a> <a id="426" href="Ledger.Ledger.html#233" class="Bound">abs</a>
<a id="430" class="Keyword">open</a> <a id="435" class="Keyword">import</a> <a id="442" href="Ledger.Certs.html" class="Module">Ledger.Certs</a> <a id="455" href="Ledger.Transaction.html#1809" class="Function">govStructure</a>

<a id="469" class="Keyword">open</a> <a id="474" href="Ledger.Transaction.html#3538" class="Module">Tx</a>
<a id="477" class="Keyword">open</a> <a id="482" href="Ledger.Certs.html#2681" class="Module">GState</a>
<a id="489" class="Keyword">open</a> <a id="494" href="Ledger.GovernanceActions.html#2096" class="Module">GovActionState</a>
<a id="509" class="Keyword">open</a> <a id="514" href="Ledger.Enact.html#397" class="Module">EnactState</a> <a id="525" class="Keyword">using</a> <a id="531" class="Symbol">(</a><a id="532" href="Ledger.Enact.html#433" class="Field">cc</a><a id="534" class="Symbol">)</a>


<a id="538" class="Keyword">record</a> <a id="LEnv"></a><a id="545" href="Ledger.Ledger.html#545" class="Record">LEnv</a> <a id="550" class="Symbol">:</a> <a id="552" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="557" class="Keyword">where</a>
  <a id="565" class="Keyword">field</a>
    <a id="LEnv.slot"></a><a id="575" href="Ledger.Ledger.html#575" class="Field">slot</a>        <a id="587" class="Symbol">:</a> <a id="589" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a>
    <a id="LEnv.ppolicy"></a><a id="598" href="Ledger.Ledger.html#598" class="Field">ppolicy</a>     <a id="610" class="Symbol">:</a> <a id="612" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="618" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>
    <a id="LEnv.pparams"></a><a id="633" href="Ledger.Ledger.html#633" class="Field">pparams</a>     <a id="645" class="Symbol">:</a> <a id="647" href="Ledger.PParams.html#1389" class="Record">PParams</a>
    <a id="LEnv.enactState"></a><a id="659" href="Ledger.Ledger.html#659" class="Field">enactState</a>  <a id="671" class="Symbol">:</a> <a id="673" href="Ledger.Enact.html#397" class="Record">EnactState</a>
    <a id="LEnv.treasury"></a><a id="688" href="Ledger.Ledger.html#688" class="Field">treasury</a>    <a id="700" class="Symbol">:</a> <a id="702" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>

<a id="708" class="Keyword">record</a> <a id="LState"></a><a id="715" href="Ledger.Ledger.html#715" class="Record">LState</a> <a id="722" class="Symbol">:</a> <a id="724" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="729" class="Keyword">where</a>


  <a id="739" class="Keyword">constructor</a> <a id="⟦_,_,_⟧ˡ"></a><a id="751" href="Ledger.Ledger.html#751" class="InductiveConstructor Operator">⟦_,_,_⟧ˡ</a>


  <a id="764" class="Keyword">field</a>
    <a id="LState.utxoSt"></a><a id="774" href="Ledger.Ledger.html#774" class="Field">utxoSt</a>     <a id="785" class="Symbol">:</a> <a id="787" href="Ledger.Utxo.html#2516" class="Record">UTxOState</a>
    <a id="LState.govSt"></a><a id="801" href="Ledger.Ledger.html#801" class="Field">govSt</a>      <a id="812" class="Symbol">:</a> <a id="814" href="Ledger.Gov.html#1218" class="Function">GovState</a>
    <a id="LState.certState"></a><a id="827" href="Ledger.Ledger.html#827" class="Field">certState</a>  <a id="838" class="Symbol">:</a> <a id="840" href="Ledger.Certs.html#2825" class="Record">CertState</a>



<a id="853" class="Keyword">open</a> <a id="858" href="Ledger.Certs.html#2825" class="Module">CertState</a>
<a id="868" class="Keyword">open</a> <a id="873" href="Ledger.Certs.html#2393" class="Module">DState</a>

<a id="881" class="Keyword">instance</a>
  <a id="892" class="Keyword">unquoteDecl</a> <a id="To-LEnv"></a><a id="904" href="Ledger.Ledger.html#904" class="Function">To-LEnv</a> <a id="To-LState"></a><a id="912" href="Ledger.Ledger.html#912" class="Function">To-LState</a> <a id="922" class="Symbol">=</a> <a id="924" href="Class.To.html#2693" class="Function">derive-To</a>
    <a id="938" class="Symbol">((</a><a id="940" class="Keyword">quote</a> <a id="946" href="Ledger.Ledger.html#545" class="Record">LEnv</a> <a id="951" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="953" href="Ledger.Ledger.html#904" class="Function">To-LEnv</a><a id="960" class="Symbol">)</a> <a id="962" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="964" class="Symbol">(</a><a id="965" class="Keyword">quote</a> <a id="971" href="Ledger.Ledger.html#715" class="Record">LState</a> <a id="978" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="980" href="Ledger.Ledger.html#912" class="Function">To-LState</a><a id="989" class="Symbol">)</a> <a id="991" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="993" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="995" class="Symbol">)</a>


<a id="txgov"></a><a id="999" href="Ledger.Ledger.html#999" class="Function">txgov</a> <a id="1005" class="Symbol">:</a> <a id="1007" href="Ledger.Transaction.html#2584" class="Record">TxBody</a> <a id="1014" class="Symbol">→</a> <a id="1016" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1021" class="Symbol">(</a><a id="1022" href="Ledger.GovernanceActions.html#1738" class="Record">GovVote</a> <a id="1030" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="1032" href="Ledger.GovernanceActions.html#1883" class="Record">GovProposal</a><a id="1043" class="Symbol">)</a>
<a id="1045" href="Ledger.Ledger.html#999" class="Function">txgov</a> <a id="1051" href="Ledger.Ledger.html#1051" class="Bound">txb</a> <a id="1055" class="Symbol">=</a> <a id="1057" href="Class.Functor.Core.html#263" class="Function">map</a> <a id="1061" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1066" href="Ledger.Transaction.html#2916" class="Field">txprop</a> <a id="1073" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="1076" href="Class.Functor.Core.html#263" class="Function">map</a> <a id="1080" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1085" href="Ledger.Transaction.html#2880" class="Field">txvote</a>
  <a id="1094" class="Keyword">where</a> <a id="1100" class="Keyword">open</a> <a id="1105" href="Ledger.Transaction.html#2584" class="Module">TxBody</a> <a id="1112" href="Ledger.Ledger.html#1051" class="Bound">txb</a>

<a id="rmOrphanDRepVotes"></a><a id="1117" href="Ledger.Ledger.html#1117" class="Function">rmOrphanDRepVotes</a> <a id="1135" class="Symbol">:</a> <a id="1137" href="Ledger.Certs.html#2825" class="Record">CertState</a> <a id="1147" class="Symbol">→</a> <a id="1149" href="Ledger.Gov.html#1218" class="Function">GovState</a> <a id="1158" class="Symbol">→</a> <a id="1160" href="Ledger.Gov.html#1218" class="Function">GovState</a>
<a id="1169" href="Ledger.Ledger.html#1117" class="Function">rmOrphanDRepVotes</a> <a id="1187" href="Ledger.Ledger.html#1187" class="Bound">cs</a> <a id="1190" href="Ledger.Ledger.html#1190" class="Bound">govSt</a> <a id="1196" class="Symbol">=</a> <a id="1198" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="1204" class="Symbol">(</a><a id="1205" href="Class.Bifunctor.html#1143" class="Function">map₂</a> <a id="1210" href="Ledger.Ledger.html#1336" class="Function">go</a><a id="1212" class="Symbol">)</a> <a id="1214" href="Ledger.Ledger.html#1190" class="Bound">govSt</a>
  <a id="1222" class="Keyword">where</a>
   <a id="1231" href="Ledger.Ledger.html#1231" class="Function">ifDRepRegistered</a> <a id="1248" class="Symbol">:</a> <a id="1250" href="Ledger.GovernanceActions.html#392" class="Function">Voter</a> <a id="1256" class="Symbol">→</a> <a id="1258" href="Agda.Primitive.html#388" class="Primitive">Type</a>
   <a id="1266" href="Ledger.Ledger.html#1231" class="Function">ifDRepRegistered</a> <a id="1283" class="Symbol">(</a><a id="1284" href="Ledger.Ledger.html#1284" class="Bound">r</a> <a id="1286" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1288" href="Ledger.Ledger.html#1288" class="Bound">c</a><a id="1289" class="Symbol">)</a> <a id="1291" class="Symbol">=</a> <a id="1293" href="Ledger.Ledger.html#1284" class="Bound">r</a> <a id="1295" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1297" href="Ledger.GovernanceActions.html#372" class="InductiveConstructor">DRep</a> <a id="1302" class="Symbol">→</a> <a id="1304" href="Ledger.Ledger.html#1288" class="Bound">c</a> <a id="1306" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="1308" href="Class.IsSet.html#916" class="Function">dom</a> <a id="1312" class="Symbol">(</a><a id="1313" href="Ledger.Ledger.html#1187" class="Bound">cs</a> <a id="1316" class="Symbol">.</a><a id="1317" href="Ledger.Certs.html#2928" class="Field">gState</a> <a id="1324" class="Symbol">.</a><a id="1325" href="Ledger.Certs.html#2738" class="Field">dreps</a><a id="1330" class="Symbol">)</a>

   <a id="1336" href="Ledger.Ledger.html#1336" class="Function">go</a> <a id="1339" class="Symbol">:</a> <a id="1341" href="Ledger.GovernanceActions.html#2096" class="Record">GovActionState</a> <a id="1356" class="Symbol">→</a> <a id="1358" href="Ledger.GovernanceActions.html#2096" class="Record">GovActionState</a>
   <a id="1376" href="Ledger.Ledger.html#1336" class="Function">go</a> <a id="1379" href="Ledger.Ledger.html#1379" class="Bound">gas</a> <a id="1383" class="Symbol">=</a> <a id="1385" class="Keyword">record</a> <a id="1392" href="Ledger.Ledger.html#1379" class="Bound">gas</a> <a id="1396" class="Symbol">{</a> <a id="1398" href="Ledger.GovernanceActions.html#2136" class="Field">votes</a> <a id="1404" class="Symbol">=</a> <a id="1406" href="abstract-set-theory.FiniteSetTheory.html#2989" class="Function">filterKeys</a> <a id="1417" href="Ledger.Ledger.html#1231" class="Function">ifDRepRegistered</a> <a id="1434" class="Symbol">(</a><a id="1435" href="Ledger.Ledger.html#1379" class="Bound">gas</a> <a id="1439" class="Symbol">.</a><a id="1440" href="Ledger.GovernanceActions.html#2136" class="Field">votes</a><a id="1445" class="Symbol">)</a> <a id="1447" class="Symbol">}</a>

<a id="allColdCreds"></a><a id="1450" href="Ledger.Ledger.html#1450" class="Function">allColdCreds</a> <a id="1463" class="Symbol">:</a> <a id="1465" href="Ledger.Gov.html#1218" class="Function">GovState</a> <a id="1474" class="Symbol">→</a> <a id="1476" href="Ledger.Enact.html#397" class="Record">EnactState</a> <a id="1487" class="Symbol">→</a> <a id="1489" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1491" href="Ledger.Address.html#273" class="Datatype">Credential</a>
<a id="1502" href="Ledger.Ledger.html#1450" class="Function">allColdCreds</a> <a id="1515" href="Ledger.Ledger.html#1515" class="Bound">govSt</a> <a id="1521" href="Ledger.Ledger.html#1521" class="Bound">es</a> <a id="1524" class="Symbol">=</a>
  <a id="1528" href="Ledger.Enact.html#788" class="Function">ccCreds</a> <a id="1536" class="Symbol">(</a><a id="1537" href="Ledger.Ledger.html#1521" class="Bound">es</a> <a id="1540" class="Symbol">.</a><a id="1541" href="Ledger.Enact.html#433" class="Field">cc</a><a id="1543" class="Symbol">)</a> <a id="1545" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="1547" href="Axiom.Set.html#7022" class="Function">concatMapˢ</a> <a id="1558" class="Symbol">(λ</a> <a id="1561" class="Symbol">(_</a> <a id="1564" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1566" href="Ledger.Ledger.html#1566" class="Bound">st</a><a id="1568" class="Symbol">)</a> <a id="1570" class="Symbol">→</a> <a id="1572" href="Ledger.GovernanceActions.html#2784" class="Function">proposedCC</a> <a id="1583" class="Symbol">(</a><a id="1584" href="Ledger.Ledger.html#1566" class="Bound">st</a> <a id="1587" class="Symbol">.</a><a id="1588" href="Ledger.GovernanceActions.html#2217" class="Field">action</a><a id="1594" class="Symbol">))</a> <a id="1597" class="Symbol">(</a><a id="1598" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="1607" href="Ledger.Ledger.html#1515" class="Bound">govSt</a><a id="1612" class="Symbol">)</a>


<a id="1616" class="Keyword">private</a> <a id="1624" class="Keyword">variable</a>
  <a id="1635" href="Ledger.Ledger.html#1635" class="Generalizable">Γ</a> <a id="1637" class="Symbol">:</a> <a id="1639" href="Ledger.Ledger.html#545" class="Record">LEnv</a>
  <a id="1646" href="Ledger.Ledger.html#1646" class="Generalizable">s</a> <a id="1648" href="Ledger.Ledger.html#1648" class="Generalizable">s&#39;</a> <a id="1651" href="Ledger.Ledger.html#1651" class="Generalizable">s&#39;&#39;</a> <a id="1655" class="Symbol">:</a> <a id="1657" href="Ledger.Ledger.html#715" class="Record">LState</a>
  <a id="1666" href="Ledger.Ledger.html#1666" class="Generalizable">utxoSt</a> <a id="1673" href="Ledger.Ledger.html#1673" class="Generalizable">utxoSt&#39;</a> <a id="1681" class="Symbol">:</a> <a id="1683" href="Ledger.Utxo.html#2516" class="Record">UTxOState</a>
  <a id="1695" href="Ledger.Ledger.html#1695" class="Generalizable">govSt</a> <a id="1701" href="Ledger.Ledger.html#1701" class="Generalizable">govSt&#39;</a> <a id="1708" class="Symbol">:</a> <a id="1710" href="Ledger.Gov.html#1218" class="Function">GovState</a>
  <a id="1721" href="Ledger.Ledger.html#1721" class="Generalizable">certState</a> <a id="1731" href="Ledger.Ledger.html#1731" class="Generalizable">certState&#39;</a> <a id="1742" class="Symbol">:</a> <a id="1744" href="Ledger.Certs.html#2825" class="Record">CertState</a>
  <a id="1756" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="1759" class="Symbol">:</a> <a id="1761" href="Ledger.Transaction.html#3538" class="Record">Tx</a>
  <a id="1766" href="Ledger.Ledger.html#1766" class="Generalizable">slot</a> <a id="1771" class="Symbol">:</a> <a id="1773" href="Ledger.Types.Epoch.html#552" class="Function">Slot</a>
  <a id="1780" href="Ledger.Ledger.html#1780" class="Generalizable">ppolicy</a> <a id="1788" class="Symbol">:</a> <a id="1790" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1796" href="Ledger.Crypto.html#1166" class="Function">ScriptHash</a>
  <a id="1809" href="Ledger.Ledger.html#1809" class="Generalizable">pp</a> <a id="1812" class="Symbol">:</a> <a id="1814" href="Ledger.PParams.html#1389" class="Record">PParams</a>
  <a id="1824" href="Ledger.Ledger.html#1824" class="Generalizable">enactState</a> <a id="1835" class="Symbol">:</a> <a id="1837" href="Ledger.Enact.html#397" class="Record">EnactState</a>
  <a id="1850" href="Ledger.Ledger.html#1850" class="Generalizable">treasury</a> <a id="1859" class="Symbol">:</a> <a id="1861" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>


<a id="1868" class="Keyword">data</a> <a id="_⊢_⇀⦇_,LEDGER⦈_"></a><a id="1873" href="Ledger.Ledger.html#1873" class="Datatype Operator">_⊢_⇀⦇_,LEDGER⦈_</a> <a id="1889" class="Symbol">:</a> <a id="1891" href="Ledger.Ledger.html#545" class="Record">LEnv</a> <a id="1896" class="Symbol">→</a> <a id="1898" href="Ledger.Ledger.html#715" class="Record">LState</a> <a id="1905" class="Symbol">→</a> <a id="1907" href="Ledger.Transaction.html#3538" class="Record">Tx</a> <a id="1910" class="Symbol">→</a> <a id="1912" href="Ledger.Ledger.html#715" class="Record">LState</a> <a id="1919" class="Symbol">→</a> <a id="1921" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1926" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-V"></a><a id="1935" href="Ledger.Ledger.html#1935" class="InductiveConstructor">LEDGER-V</a> <a id="1944" class="Symbol">:</a>
    <a id="1950" class="Keyword">let</a>  <a id="1955" href="Ledger.Ledger.html#1955" class="Bound">txb</a>         <a id="1967" class="Symbol">=</a> <a id="1969" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="1972" class="Symbol">.</a><a id="1973" href="Ledger.Transaction.html#3570" class="Field">body</a>


         <a id="1989" class="Keyword">open</a> <a id="1994" href="Ledger.Transaction.html#2584" class="Module">TxBody</a> <a id="2001" href="Ledger.Ledger.html#1955" class="Bound">txb</a>


         <a id="2016" href="Ledger.Ledger.html#2016" class="Bound">rewards</a>     <a id="2028" class="Symbol">=</a> <a id="2030" href="Ledger.Ledger.html#1721" class="Generalizable">certState</a> <a id="2040" class="Symbol">.</a><a id="2041" href="Ledger.Certs.html#2888" class="Field">dState</a> <a id="2048" class="Symbol">.</a><a id="2049" href="Ledger.Certs.html#2531" class="Field">rewards</a>
    <a id="2061" class="Keyword">in</a>
    <a id="2068" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="2070" href="Ledger.Transaction.html#3623" class="Field">isValid</a> <a id="2078" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="2081" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2083" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
    <a id="2092" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="2094" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2096" href="Ledger.Ledger.html#1766" class="Generalizable">slot</a> <a id="2101" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2103" href="Ledger.Ledger.html#1809" class="Generalizable">pp</a> <a id="2106" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2108" href="Ledger.Ledger.html#1850" class="Generalizable">treasury</a> <a id="2117" href="Class.To.html#102" class="Field Operator">⟧</a>  <a id="2120" href="Ledger.Utxow.html#3736" class="Datatype Operator">⊢</a> <a id="2122" href="Ledger.Ledger.html#1666" class="Generalizable">utxoSt</a> <a id="2129" href="Ledger.Utxow.html#3736" class="Datatype Operator">⇀⦇</a> <a id="2132" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="2135" href="Ledger.Utxow.html#3736" class="Datatype Operator">,UTXOW⦈</a> <a id="2143" href="Ledger.Ledger.html#1673" class="Generalizable">utxoSt&#39;</a>
    <a id="2155" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="2157" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2159" href="Ledger.Types.Epoch.html#688" class="Function">epoch</a> <a id="2165" href="Ledger.Ledger.html#1766" class="Generalizable">slot</a> <a id="2170" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2172" href="Ledger.Ledger.html#1809" class="Generalizable">pp</a> <a id="2175" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2177" href="Ledger.Transaction.html#2880" class="Function">txvote</a> <a id="2184" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2186" href="Ledger.Transaction.html#2852" class="Function">txwdrls</a> <a id="2194" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2196" href="Ledger.Ledger.html#1450" class="Function">allColdCreds</a> <a id="2209" href="Ledger.Ledger.html#1695" class="Generalizable">govSt</a> <a id="2215" href="Ledger.Ledger.html#1824" class="Generalizable">enactState</a> <a id="2226" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="2228" href="Ledger.Certs.html#5079" class="Function Operator">⊢</a> <a id="2230" href="Ledger.Ledger.html#1721" class="Generalizable">certState</a> <a id="2240" href="Ledger.Certs.html#5079" class="Function Operator">⇀⦇</a> <a id="2243" href="Ledger.Transaction.html#2818" class="Function">txcerts</a> <a id="2251" href="Ledger.Certs.html#5079" class="Function Operator">,CERTS⦈</a> <a id="2259" href="Ledger.Ledger.html#1731" class="Generalizable">certState&#39;</a>
    <a id="2274" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="2276" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2278" href="Ledger.Transaction.html#3152" class="Function">txid</a> <a id="2283" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2285" href="Ledger.Types.Epoch.html#688" class="Function">epoch</a> <a id="2291" href="Ledger.Ledger.html#1766" class="Generalizable">slot</a> <a id="2296" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2298" href="Ledger.Ledger.html#1809" class="Generalizable">pp</a> <a id="2301" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2303" href="Ledger.Ledger.html#1780" class="Generalizable">ppolicy</a> <a id="2311" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2313" href="Ledger.Ledger.html#1824" class="Generalizable">enactState</a> <a id="2324" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2326" href="Ledger.Ledger.html#1731" class="Generalizable">certState&#39;</a> <a id="2337" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2339" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2343" href="Ledger.Ledger.html#2016" class="Bound">rewards</a> <a id="2351" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="2353" href="Ledger.Gov.html#4488" class="Function Operator">⊢</a> <a id="2355" href="Ledger.Ledger.html#1117" class="Function">rmOrphanDRepVotes</a> <a id="2373" href="Ledger.Ledger.html#1731" class="Generalizable">certState&#39;</a> <a id="2384" href="Ledger.Ledger.html#1695" class="Generalizable">govSt</a> <a id="2390" href="Ledger.Gov.html#4488" class="Function Operator">⇀⦇</a> <a id="2393" href="Ledger.Ledger.html#999" class="Function">txgov</a> <a id="2399" href="Ledger.Ledger.html#1955" class="Bound">txb</a> <a id="2403" href="Ledger.Gov.html#4488" class="Function Operator">,GOVS⦈</a> <a id="2410" href="Ledger.Ledger.html#1701" class="Generalizable">govSt&#39;</a>
      <a id="2423" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="2462" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2464" href="Ledger.Ledger.html#1766" class="Generalizable">slot</a> <a id="2469" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2471" href="Ledger.Ledger.html#1780" class="Generalizable">ppolicy</a> <a id="2479" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2481" href="Ledger.Ledger.html#1809" class="Generalizable">pp</a> <a id="2484" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2486" href="Ledger.Ledger.html#1824" class="Generalizable">enactState</a> <a id="2497" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2499" href="Ledger.Ledger.html#1850" class="Generalizable">treasury</a> <a id="2508" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="2510" href="Ledger.Ledger.html#1873" class="Datatype Operator">⊢</a> <a id="2512" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2514" href="Ledger.Ledger.html#1666" class="Generalizable">utxoSt</a> <a id="2521" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2523" href="Ledger.Ledger.html#1695" class="Generalizable">govSt</a> <a id="2529" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2531" href="Ledger.Ledger.html#1721" class="Generalizable">certState</a> <a id="2541" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="2543" href="Ledger.Ledger.html#1873" class="Datatype Operator">⇀⦇</a> <a id="2546" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="2549" href="Ledger.Ledger.html#1873" class="Datatype Operator">,LEDGER⦈</a> <a id="2558" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2560" href="Ledger.Ledger.html#1673" class="Generalizable">utxoSt&#39;</a> <a id="2568" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2570" href="Ledger.Ledger.html#1701" class="Generalizable">govSt&#39;</a> <a id="2577" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2579" href="Ledger.Ledger.html#1731" class="Generalizable">certState&#39;</a> <a id="2590" href="Class.To.html#102" class="Field Operator">⟧</a>

  <a id="_⊢_⇀⦇_,LEDGER⦈_.LEDGER-I"></a><a id="2595" href="Ledger.Ledger.html#2595" class="InductiveConstructor">LEDGER-I</a> <a id="2604" class="Symbol">:</a>
    <a id="2610" href="Interface.STS.html#105" class="Function Operator">∙</a> <a id="2612" href="Ledger.Transaction.html#3623" class="Field">isValid</a> <a id="2620" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="2623" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2625" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
    <a id="2635" href="Interface.STS.html#131" class="Function Operator">∙</a> <a id="2637" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2639" href="Ledger.Ledger.html#1766" class="Generalizable">slot</a> <a id="2644" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2646" href="Ledger.Ledger.html#1809" class="Generalizable">pp</a> <a id="2649" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2651" href="Ledger.Ledger.html#1850" class="Generalizable">treasury</a> <a id="2660" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="2662" href="Ledger.Utxow.html#3736" class="Datatype Operator">⊢</a> <a id="2664" href="Ledger.Ledger.html#1666" class="Generalizable">utxoSt</a> <a id="2671" href="Ledger.Utxow.html#3736" class="Datatype Operator">⇀⦇</a> <a id="2674" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="2677" href="Ledger.Utxow.html#3736" class="Datatype Operator">,UTXOW⦈</a> <a id="2685" href="Ledger.Ledger.html#1673" class="Generalizable">utxoSt&#39;</a>
      <a id="2699" href="Interface.STS.html#350" class="Function Operator">────────────────────────────────</a>
      <a id="2738" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2740" href="Ledger.Ledger.html#1766" class="Generalizable">slot</a> <a id="2745" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2747" href="Ledger.Ledger.html#1780" class="Generalizable">ppolicy</a> <a id="2755" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2757" href="Ledger.Ledger.html#1809" class="Generalizable">pp</a> <a id="2760" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2762" href="Ledger.Ledger.html#1824" class="Generalizable">enactState</a> <a id="2773" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2775" href="Ledger.Ledger.html#1850" class="Generalizable">treasury</a> <a id="2784" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="2786" href="Ledger.Ledger.html#1873" class="Datatype Operator">⊢</a> <a id="2788" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2790" href="Ledger.Ledger.html#1666" class="Generalizable">utxoSt</a> <a id="2797" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2799" href="Ledger.Ledger.html#1695" class="Generalizable">govSt</a> <a id="2805" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2807" href="Ledger.Ledger.html#1721" class="Generalizable">certState</a> <a id="2817" href="Class.To.html#102" class="Field Operator">⟧</a> <a id="2819" href="Ledger.Ledger.html#1873" class="Datatype Operator">⇀⦇</a> <a id="2822" href="Ledger.Ledger.html#1756" class="Generalizable">tx</a> <a id="2825" href="Ledger.Ledger.html#1873" class="Datatype Operator">,LEDGER⦈</a> <a id="2834" href="Class.To.html#102" class="Field Operator">⟦</a> <a id="2836" href="Ledger.Ledger.html#1673" class="Generalizable">utxoSt&#39;</a> <a id="2844" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2846" href="Ledger.Ledger.html#1695" class="Generalizable">govSt</a> <a id="2852" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2854" href="Ledger.Ledger.html#1721" class="Generalizable">certState</a> <a id="2864" href="Class.To.html#102" class="Field Operator">⟧</a>


<a id="2868" class="Keyword">pattern</a> <a id="LEDGER-V⋯"></a><a id="2876" href="Ledger.Ledger.html#2876" class="InductiveConstructor">LEDGER-V⋯</a> <a id="2886" href="Ledger.Ledger.html#2906" class="Bound">w</a> <a id="2888" href="Ledger.Ledger.html#2910" class="Bound">x</a> <a id="2890" href="Ledger.Ledger.html#2914" class="Bound">y</a> <a id="2892" href="Ledger.Ledger.html#2918" class="Bound">z</a> <a id="2894" class="Symbol">=</a> <a id="2896" href="Ledger.Ledger.html#1935" class="InductiveConstructor">LEDGER-V</a> <a id="2905" class="Symbol">(</a><a id="2906" href="Ledger.Ledger.html#2906" class="Bound">w</a> <a id="2908" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2910" href="Ledger.Ledger.html#2910" class="Bound">x</a> <a id="2912" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2914" href="Ledger.Ledger.html#2914" class="Bound">y</a> <a id="2916" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2918" href="Ledger.Ledger.html#2918" class="Bound">z</a><a id="2919" class="Symbol">)</a>
<a id="2921" class="Keyword">pattern</a> <a id="LEDGER-I⋯"></a><a id="2929" href="Ledger.Ledger.html#2929" class="InductiveConstructor">LEDGER-I⋯</a> <a id="2939" href="Ledger.Ledger.html#2959" class="Bound">y</a> <a id="2941" href="Ledger.Ledger.html#2963" class="Bound">z</a>     <a id="2947" class="Symbol">=</a> <a id="2949" href="Ledger.Ledger.html#2595" class="InductiveConstructor">LEDGER-I</a> <a id="2958" class="Symbol">(</a><a id="2959" href="Ledger.Ledger.html#2959" class="Bound">y</a> <a id="2961" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2963" href="Ledger.Ledger.html#2963" class="Bound">z</a><a id="2964" class="Symbol">)</a>


<a id="_⊢_⇀⦇_,LEDGERS⦈_"></a><a id="2968" href="Ledger.Ledger.html#2968" class="Function Operator">_⊢_⇀⦇_,LEDGERS⦈_</a> <a id="2985" class="Symbol">:</a> <a id="2987" href="Ledger.Ledger.html#545" class="Record">LEnv</a> <a id="2992" class="Symbol">→</a> <a id="2994" href="Ledger.Ledger.html#715" class="Record">LState</a> <a id="3001" class="Symbol">→</a> <a id="3003" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3008" href="Ledger.Transaction.html#3538" class="Record">Tx</a> <a id="3011" class="Symbol">→</a> <a id="3013" href="Ledger.Ledger.html#715" class="Record">LState</a> <a id="3020" class="Symbol">→</a> <a id="3022" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="3027" href="Ledger.Ledger.html#2968" class="Function Operator">_⊢_⇀⦇_,LEDGERS⦈_</a> <a id="3044" class="Symbol">=</a> <a id="3046" href="Interface.STS.html#2329" class="Function">ReflexiveTransitiveClosure</a> <a id="3073" class="Symbol">{</a><a id="3074" class="Argument">sts</a> <a id="3078" class="Symbol">=</a> <a id="3080" href="Ledger.Ledger.html#1873" class="Datatype Operator">_⊢_⇀⦇_,LEDGER⦈_</a><a id="3095" class="Symbol">}</a>

</pre></body></html>