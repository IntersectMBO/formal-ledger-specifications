<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Foreign.HSLedger.Gov</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Ledger.Conway.Foreign.HSLedger.Gov.html" class="Module">Ledger.Conway.Foreign.HSLedger.Gov</a> <a id="43" class="Keyword">where</a>

<a id="50" class="Keyword">open</a> <a id="55" class="Keyword">import</a> <a id="62" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a> <a id="77" class="Keyword">using</a> <a id="83" class="Symbol">(</a><a id="84" href="Agda.Primitive.html#388" class="Primitive">Type</a><a id="88" class="Symbol">)</a>

<a id="91" class="Keyword">open</a> <a id="96" class="Keyword">import</a> <a id="103" href="Ledger.Conway.Foreign.HSLedger.Address.html" class="Module">Ledger.Conway.Foreign.HSLedger.Address</a>
<a id="142" class="Keyword">open</a> <a id="147" class="Keyword">import</a> <a id="154" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html" class="Module">Ledger.Conway.Foreign.HSLedger.BaseTypes</a>
<a id="195" class="Keyword">open</a> <a id="200" class="Keyword">import</a> <a id="207" href="Ledger.Conway.Foreign.HSLedger.Enact.html" class="Module">Ledger.Conway.Foreign.HSLedger.Enact</a>
<a id="244" class="Keyword">open</a> <a id="249" class="Keyword">import</a> <a id="256" href="Ledger.Conway.Foreign.HSLedger.PParams.html" class="Module">Ledger.Conway.Foreign.HSLedger.PParams</a>
<a id="295" class="Keyword">open</a> <a id="300" class="Keyword">import</a> <a id="307" href="Ledger.Conway.Foreign.HSLedger.Gov.Core.html" class="Module">Ledger.Conway.Foreign.HSLedger.Gov.Core</a>
<a id="347" class="Keyword">open</a> <a id="352" class="Keyword">import</a> <a id="359" href="Ledger.Conway.Foreign.HSLedger.GovernanceActions.html" class="Module">Ledger.Conway.Foreign.HSLedger.GovernanceActions</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Ledger.Conway.Foreign.HSLedger.Cert.html" class="Module">Ledger.Conway.Foreign.HSLedger.Cert</a>

<a id="457" class="Keyword">open</a> <a id="462" class="Keyword">import</a> <a id="469" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="501" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a>
<a id="514" class="Keyword">open</a> <a id="519" class="Keyword">import</a> <a id="526" href="Ledger.Conway.Enact.html" class="Module">Ledger.Conway.Enact</a> <a id="546" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a>
<a id="559" class="Keyword">open</a> <a id="564" class="Keyword">import</a> <a id="571" href="Ledger.Conway.Conformance.Gov.html" class="Module">Ledger.Conway.Conformance.Gov</a> <a id="601" href="Function.Base.html#4736" class="Function">it</a> <a id="604" href="Function.Base.html#4736" class="Function">it</a>
<a id="607" class="Keyword">import</a> <a id="614" href="Ledger.Conway.Gov.html" class="Module">Ledger.Conway.Gov</a> <a id="632" href="Function.Base.html#4736" class="Function">it</a> <a id="635" class="Symbol">as</a> <a id="L"></a><a id="638" href="Ledger.Conway.Foreign.HSLedger.Gov.html#638" class="Module">L</a>
<a id="640" class="Keyword">open</a> <a id="645" class="Keyword">import</a> <a id="652" href="Ledger.Conway.Gov.Properties.html" class="Module">Ledger.Conway.Gov.Properties</a> <a id="681" href="Function.Base.html#4736" class="Function">it</a>

<a id="685" class="Keyword">instance</a>

  <a id="HsTy-GovEnv"></a><a id="697" href="Ledger.Conway.Foreign.HSLedger.Gov.html#697" class="Function">HsTy-GovEnv</a> <a id="709" class="Symbol">=</a> <a id="711" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">autoHsType</a> <a id="722" href="Ledger.Conway.Conformance.Gov.html#745" class="Record">GovEnv</a> <a id="729" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">⊣</a> <a id="731" href="Foreign.HaskellTypes.Deriving.html#3237" class="Function">withConstructor</a> <a id="747" class="String">&quot;MkGovEnv&quot;</a>
                                  <a id="792" href="Foreign.HaskellTypes.Deriving.html#3523" class="Function Operator">•</a> <a id="794" href="Foreign.HaskellTypes.Deriving.html#3419" class="Function">fieldPrefix</a> <a id="806" class="String">&quot;ge&quot;</a>
  <a id="Conv-GovEnv"></a><a id="813" href="Ledger.Conway.Foreign.HSLedger.Gov.html#813" class="Function">Conv-GovEnv</a> <a id="825" class="Symbol">=</a> <a id="827" href="Foreign.Convertible.Deriving.html#6819" class="Macro">autoConvert</a> <a id="839" href="Ledger.Conway.Conformance.Gov.html#745" class="Record">GovEnv</a>

<a id="847" class="Comment">-- NeedsHash depends on a GovAction, so a little bit of manual work is</a>
<a id="918" class="Comment">-- required to get the types using it into Haskell.</a>

<a id="971" class="Comment">-- First we define to/fromNeedsHash that replaces the ⊤ cases by a</a>
<a id="1038" class="Comment">-- dummy GovActionID.</a>

<a id="toNeedsHash"></a><a id="1061" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1073" class="Symbol">:</a> <a id="1075" class="Symbol">∀</a> <a id="1077" class="Symbol">{</a><a id="1078" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1078" class="Bound">action</a><a id="1084" class="Symbol">}</a> <a id="1086" class="Symbol">→</a> <a id="1088" href="Ledger.Conway.GovernanceActions.html#442" class="Function">GovActionID</a> <a id="1100" class="Symbol">→</a> <a id="1102" href="Ledger.Conway.GovernanceActions.html#1677" class="Function">NeedsHash</a> <a id="1112" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1078" class="Bound">action</a>
<a id="1119" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1131" class="Symbol">{</a><a id="1132" href="Ledger.Conway.GovernanceActions.html#758" class="InductiveConstructor">NoConfidence</a><a id="1144" class="Symbol">}</a>     <a id="1150" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1150" class="Bound">x</a> <a id="1152" class="Symbol">=</a> <a id="1154" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1150" class="Bound">x</a>
<a id="1156" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1168" class="Symbol">{</a><a id="1169" href="Ledger.Conway.GovernanceActions.html#793" class="InductiveConstructor">UpdateCommittee</a><a id="1184" class="Symbol">}</a>  <a id="1187" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1187" class="Bound">x</a> <a id="1189" class="Symbol">=</a> <a id="1191" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1187" class="Bound">x</a>
<a id="1193" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1205" class="Symbol">{</a><a id="1206" href="Ledger.Conway.GovernanceActions.html#828" class="InductiveConstructor">NewConstitution</a><a id="1221" class="Symbol">}</a>  <a id="1224" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1224" class="Bound">x</a> <a id="1226" class="Symbol">=</a> <a id="1228" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1224" class="Bound">x</a>
<a id="1230" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1242" class="Symbol">{</a><a id="1243" href="Ledger.Conway.GovernanceActions.html#863" class="InductiveConstructor">TriggerHF</a><a id="1252" class="Symbol">}</a>        <a id="1261" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1261" class="Bound">x</a> <a id="1263" class="Symbol">=</a> <a id="1265" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1261" class="Bound">x</a>
<a id="1267" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1279" class="Symbol">{</a><a id="1280" href="Ledger.Conway.GovernanceActions.html#898" class="InductiveConstructor">ChangePParams</a><a id="1293" class="Symbol">}</a>    <a id="1298" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1298" class="Bound">x</a> <a id="1300" class="Symbol">=</a> <a id="1302" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1298" class="Bound">x</a>
<a id="1304" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1316" class="Symbol">{</a><a id="1317" href="Ledger.Conway.GovernanceActions.html#933" class="InductiveConstructor">TreasuryWdrl</a><a id="1329" class="Symbol">}</a>     <a id="1335" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1335" class="Bound">x</a> <a id="1337" class="Symbol">=</a> <a id="1339" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>
<a id="1342" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a> <a id="1354" class="Symbol">{</a><a id="1355" href="Ledger.Conway.GovernanceActions.html#968" class="InductiveConstructor">Info</a><a id="1359" class="Symbol">}</a>             <a id="1373" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1373" class="Bound">x</a> <a id="1375" class="Symbol">=</a> <a id="1377" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a>

<a id="fromNeedsHash"></a><a id="1381" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1395" class="Symbol">:</a> <a id="1397" class="Symbol">∀</a> <a id="1399" class="Symbol">{</a><a id="1400" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1400" class="Bound">action</a><a id="1406" class="Symbol">}</a> <a id="1408" class="Symbol">→</a> <a id="1410" href="Ledger.Conway.GovernanceActions.html#1677" class="Function">NeedsHash</a> <a id="1420" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1400" class="Bound">action</a> <a id="1427" class="Symbol">→</a> <a id="1429" href="Ledger.Conway.GovernanceActions.html#442" class="Function">GovActionID</a>
<a id="1441" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1455" class="Symbol">{</a><a id="1456" href="Ledger.Conway.GovernanceActions.html#758" class="InductiveConstructor">NoConfidence</a><a id="1468" class="Symbol">}</a>     <a id="1474" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1474" class="Bound">x</a> <a id="1476" class="Symbol">=</a> <a id="1478" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1474" class="Bound">x</a>
<a id="1480" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1494" class="Symbol">{</a><a id="1495" href="Ledger.Conway.GovernanceActions.html#793" class="InductiveConstructor">UpdateCommittee</a><a id="1510" class="Symbol">}</a>  <a id="1513" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1513" class="Bound">x</a> <a id="1515" class="Symbol">=</a> <a id="1517" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1513" class="Bound">x</a>
<a id="1519" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1533" class="Symbol">{</a><a id="1534" href="Ledger.Conway.GovernanceActions.html#828" class="InductiveConstructor">NewConstitution</a><a id="1549" class="Symbol">}</a>  <a id="1552" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1552" class="Bound">x</a> <a id="1554" class="Symbol">=</a> <a id="1556" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1552" class="Bound">x</a>
<a id="1558" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1572" class="Symbol">{</a><a id="1573" href="Ledger.Conway.GovernanceActions.html#863" class="InductiveConstructor">TriggerHF</a><a id="1582" class="Symbol">}</a>        <a id="1591" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1591" class="Bound">x</a> <a id="1593" class="Symbol">=</a> <a id="1595" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1591" class="Bound">x</a>
<a id="1597" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1611" class="Symbol">{</a><a id="1612" href="Ledger.Conway.GovernanceActions.html#898" class="InductiveConstructor">ChangePParams</a><a id="1625" class="Symbol">}</a>    <a id="1630" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1630" class="Bound">x</a> <a id="1632" class="Symbol">=</a> <a id="1634" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1630" class="Bound">x</a>
<a id="1636" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1650" class="Symbol">{</a><a id="1651" href="Ledger.Conway.GovernanceActions.html#933" class="InductiveConstructor">TreasuryWdrl</a><a id="1663" class="Symbol">}</a>     <a id="1669" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1669" class="Bound">x</a> <a id="1671" class="Symbol">=</a> <a id="1673" class="Number">0</a> <a id="1675" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1677" class="Number">0</a>
<a id="1679" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="1693" class="Symbol">{</a><a id="1694" href="Ledger.Conway.GovernanceActions.html#968" class="InductiveConstructor">Info</a><a id="1698" class="Symbol">}</a>             <a id="1712" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1712" class="Bound">x</a> <a id="1714" class="Symbol">=</a> <a id="1716" class="Number">0</a> <a id="1718" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1720" class="Number">0</a>

<a id="1723" class="Comment">-- Then we define non-dependent versions of the types that use</a>
<a id="1786" class="Comment">-- NeedsHash.</a>

<a id="1801" class="Keyword">record</a> <a id="GovProposal&#39;"></a><a id="1808" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1808" class="Record">GovProposal&#39;</a> <a id="1821" class="Symbol">:</a> <a id="1823" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1828" class="Keyword">where</a>
  <a id="1836" class="Keyword">field</a>
    <a id="GovProposal&#39;.action"></a><a id="1846" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1846" class="Field">action</a>      <a id="1858" class="Symbol">:</a> <a id="1860" href="Ledger.Conway.Foreign.HSLedger.GovernanceActions.html#468" class="Datatype">GovAction&#39;</a>
    <a id="GovProposal&#39;.prevAction"></a><a id="1875" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1875" class="Field">prevAction</a>  <a id="1887" class="Symbol">:</a> <a id="1889" href="Ledger.Conway.GovernanceActions.html#442" class="Function">GovActionID</a>       <a id="1907" class="Comment">-- NeedsHash action</a>
    <a id="GovProposal&#39;.policy"></a><a id="1931" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1931" class="Field">policy</a>      <a id="1943" class="Symbol">:</a> <a id="1945" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1951" href="Ledger.Conway.Crypto.html#1173" class="Function">ScriptHash</a>
    <a id="GovProposal&#39;.deposit"></a><a id="1966" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1966" class="Field">deposit</a>     <a id="1978" class="Symbol">:</a> <a id="1980" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="GovProposal&#39;.returnAddr"></a><a id="1989" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1989" class="Field">returnAddr</a>  <a id="2001" class="Symbol">:</a> <a id="2003" href="Ledger.Conway.Address.html#1344" class="Record">RwdAddr</a>
    <a id="GovProposal&#39;.anchor"></a><a id="2015" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2015" class="Field">anchor</a>      <a id="2027" class="Symbol">:</a> <a id="2029" href="Ledger.Conway.GovernanceActions.html#656" class="Record">Anchor</a>

<a id="2037" class="Keyword">record</a> <a id="GovActionState&#39;"></a><a id="2044" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2044" class="Record">GovActionState&#39;</a> <a id="2060" class="Symbol">:</a> <a id="2062" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2067" class="Keyword">where</a>
  <a id="2075" class="Keyword">field</a>
    <a id="GovActionState&#39;.votes"></a><a id="2085" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2085" class="Field">votes</a>       <a id="2097" class="Symbol">:</a> <a id="2099" href="Ledger.Conway.GovernanceActions.html#406" class="Function">Voter</a> <a id="2105" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="2107" href="Ledger.Conway.GovernanceActions.html#2342" class="Datatype">Vote</a>
    <a id="GovActionState&#39;.returnAddr"></a><a id="2116" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2116" class="Field">returnAddr</a>  <a id="2128" class="Symbol">:</a> <a id="2130" href="Ledger.Conway.Address.html#1344" class="Record">RwdAddr</a>
    <a id="GovActionState&#39;.expiresIn"></a><a id="2142" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2142" class="Field">expiresIn</a>   <a id="2154" class="Symbol">:</a> <a id="2156" href="Ledger.Conway.Types.Epoch.html#592" class="Function">Epoch</a>
    <a id="GovActionState&#39;.action"></a><a id="2166" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2166" class="Field">action</a>      <a id="2178" class="Symbol">:</a> <a id="2180" href="Ledger.Conway.Foreign.HSLedger.GovernanceActions.html#468" class="Datatype">GovAction&#39;</a>
    <a id="GovActionState&#39;.prevAction"></a><a id="2195" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2195" class="Field">prevAction</a>  <a id="2207" class="Symbol">:</a> <a id="2209" href="Ledger.Conway.GovernanceActions.html#442" class="Function">GovActionID</a>       <a id="2227" class="Comment">-- NeedsHash action</a>

<a id="2248" class="Comment">-- We can convert between the dependent and non-dependent versions</a>
<a id="2315" class="Comment">-- using to/fromNeedsHash.</a>

<a id="2343" class="Keyword">private</a>
  <a id="mkGovProposal&#39;"></a><a id="2353" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2353" class="Function">mkGovProposal&#39;</a> <a id="2368" class="Symbol">:</a> <a id="2370" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="2382" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a> <a id="2394" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1808" class="Record">GovProposal&#39;</a>
  <a id="2409" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2353" class="Function">mkGovProposal&#39;</a> <a id="2424" class="Symbol">=</a> <a id="2426" class="Symbol">λ</a> <a id="2428" class="Keyword">where</a>
    <a id="2438" class="Symbol">.</a><a id="2439" href="Foreign.Convertible.html#149" class="Field">to</a>   <a id="2444" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2444" class="Bound">p</a> <a id="2446" class="Symbol">→</a> <a id="2448" class="Keyword">let</a> <a id="2452" class="Keyword">module</a> <a id="p"></a><a id="2459" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2459" class="Module">p</a> <a id="2461" class="Symbol">=</a> <a id="2463" href="Ledger.Conway.GovernanceActions.html#2538" class="Module">GovProposal</a>  <a id="2476" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2444" class="Bound">p</a> <a id="2478" class="Keyword">in</a> <a id="2481" class="Keyword">record</a> <a id="2488" class="Symbol">{</a> <a id="2490" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2459" class="Module">p</a><a id="2491" class="Symbol">;</a> <a id="2493" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1846" class="Field">action</a> <a id="2500" class="Symbol">=</a> <a id="2502" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="2505" href="Ledger.Conway.GovernanceActions.html#2575" class="Field">p.action</a>  <a id="2515" class="Symbol">;</a> <a id="2517" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1875" class="Field">prevAction</a> <a id="2528" class="Symbol">=</a> <a id="2530" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="2544" href="Ledger.Conway.GovernanceActions.html#2603" class="Field">p.prevAction</a> <a id="2557" class="Symbol">}</a>
    <a id="2563" class="Symbol">.</a><a id="2564" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2569" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2569" class="Bound">p</a> <a id="2571" class="Symbol">→</a> <a id="2573" class="Keyword">let</a> <a id="2577" class="Keyword">module</a> <a id="p"></a><a id="2584" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2584" class="Module">p</a> <a id="2586" class="Symbol">=</a> <a id="2588" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1808" class="Module">GovProposal&#39;</a> <a id="2601" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2569" class="Bound">p</a> <a id="2603" class="Keyword">in</a> <a id="2606" class="Keyword">record</a> <a id="2613" class="Symbol">{</a> <a id="2615" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2584" class="Module">p</a><a id="2616" class="Symbol">;</a> <a id="2618" href="Ledger.Conway.GovernanceActions.html#2575" class="Field">action</a> <a id="2625" class="Symbol">=</a> <a id="2627" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2632" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1846" class="Field">p.action</a><a id="2640" class="Symbol">;</a> <a id="2642" href="Ledger.Conway.GovernanceActions.html#2603" class="Field">prevAction</a> <a id="2653" class="Symbol">=</a> <a id="2655" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a>   <a id="2669" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1875" class="Field">p.prevAction</a> <a id="2682" class="Symbol">}</a>

  <a id="mkGovActionState&#39;"></a><a id="2687" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2687" class="Function">mkGovActionState&#39;</a> <a id="2705" class="Symbol">:</a> <a id="2707" href="Foreign.Convertible.html#103" class="Record">Convertible</a> <a id="2719" href="Ledger.Conway.GovernanceActions.html#2760" class="Record">GovActionState</a> <a id="2734" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2044" class="Record">GovActionState&#39;</a>
  <a id="2752" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2687" class="Function">mkGovActionState&#39;</a> <a id="2770" class="Symbol">=</a> <a id="2772" class="Symbol">λ</a> <a id="2774" class="Keyword">where</a>
    <a id="2784" class="Symbol">.</a><a id="2785" href="Foreign.Convertible.html#149" class="Field">to</a>   <a id="2790" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2790" class="Bound">s</a> <a id="2792" class="Symbol">→</a> <a id="2794" class="Keyword">let</a> <a id="2798" class="Keyword">module</a> <a id="s"></a><a id="2805" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2805" class="Module">s</a> <a id="2807" class="Symbol">=</a> <a id="2809" href="Ledger.Conway.GovernanceActions.html#2760" class="Module">GovActionState</a>  <a id="2825" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2790" class="Bound">s</a> <a id="2827" class="Keyword">in</a> <a id="2830" class="Keyword">record</a><a id="2836" class="Symbol">{</a> <a id="2838" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2805" class="Module">s</a><a id="2839" class="Symbol">;</a> <a id="2841" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2166" class="Field">action</a> <a id="2848" class="Symbol">=</a> <a id="2850" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="2853" href="Ledger.Conway.GovernanceActions.html#2881" class="Field">s.action</a>  <a id="2863" class="Symbol">;</a> <a id="2865" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2195" class="Field">prevAction</a> <a id="2876" class="Symbol">=</a> <a id="2878" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1381" class="Function">fromNeedsHash</a> <a id="2892" href="Ledger.Conway.GovernanceActions.html#2909" class="Field">s.prevAction</a> <a id="2905" class="Symbol">}</a>
    <a id="2911" class="Symbol">.</a><a id="2912" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2917" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2917" class="Bound">s</a> <a id="2919" class="Symbol">→</a> <a id="2921" class="Keyword">let</a> <a id="2925" class="Keyword">module</a> <a id="s"></a><a id="2932" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2932" class="Module">s</a> <a id="2934" class="Symbol">=</a> <a id="2936" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2044" class="Module">GovActionState&#39;</a> <a id="2952" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2917" class="Bound">s</a> <a id="2954" class="Keyword">in</a> <a id="2957" class="Keyword">record</a><a id="2963" class="Symbol">{</a> <a id="2965" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2932" class="Module">s</a><a id="2966" class="Symbol">;</a> <a id="2968" href="Ledger.Conway.GovernanceActions.html#2881" class="Field">action</a> <a id="2975" class="Symbol">=</a> <a id="2977" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2982" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2166" class="Field">s.action</a><a id="2990" class="Symbol">;</a> <a id="2992" href="Ledger.Conway.GovernanceActions.html#2909" class="Field">prevAction</a> <a id="3003" class="Symbol">=</a> <a id="3005" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1061" class="Function">toNeedsHash</a>   <a id="3019" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2195" class="Field">s.prevAction</a> <a id="3032" class="Symbol">}</a>

<a id="3035" class="Comment">-- Auto-generated conversions for the non-dependent types</a>

<a id="3094" class="Keyword">instance</a>
  <a id="HsTy-GovProposal&#39;"></a><a id="3105" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3105" class="Function">HsTy-GovProposal&#39;</a> <a id="3123" class="Symbol">=</a> <a id="3125" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">autoHsType</a> <a id="3136" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1808" class="Record">GovProposal&#39;</a> <a id="3149" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">⊣</a> <a id="3151" href="Foreign.HaskellTypes.Deriving.html#3126" class="Function">withName</a> <a id="3160" class="String">&quot;GovProposal&quot;</a>
                                              <a id="3220" href="Foreign.HaskellTypes.Deriving.html#3523" class="Function Operator">•</a> <a id="3222" href="Foreign.HaskellTypes.Deriving.html#3237" class="Function">withConstructor</a> <a id="3238" class="String">&quot;MkGovProposal&quot;</a>
                                              <a id="3300" href="Foreign.HaskellTypes.Deriving.html#3523" class="Function Operator">•</a> <a id="3302" href="Foreign.HaskellTypes.Deriving.html#3419" class="Function">fieldPrefix</a> <a id="3314" class="String">&quot;gp&quot;</a>
  <a id="Conv-GovProposal&#39;"></a><a id="3321" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3321" class="Function">Conv-GovProposal&#39;</a> <a id="3339" class="Symbol">=</a> <a id="3341" href="Foreign.Convertible.Deriving.html#6819" class="Macro">autoConvert</a> <a id="3353" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1808" class="Record">GovProposal&#39;</a>

  <a id="HsTy-GovActionState&#39;"></a><a id="3369" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3369" class="Function">HsTy-GovActionState&#39;</a> <a id="3390" class="Symbol">=</a> <a id="3392" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">autoHsType</a> <a id="3403" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2044" class="Record">GovActionState&#39;</a> <a id="3419" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">⊣</a> <a id="3421" href="Foreign.HaskellTypes.Deriving.html#3126" class="Function">withName</a> <a id="3430" class="String">&quot;GovActionState&quot;</a>
                                                    <a id="3499" href="Foreign.HaskellTypes.Deriving.html#3523" class="Function Operator">•</a> <a id="3501" href="Foreign.HaskellTypes.Deriving.html#3237" class="Function">withConstructor</a> <a id="3517" class="String">&quot;MkGovActionState&quot;</a>
                                                    <a id="3588" href="Foreign.HaskellTypes.Deriving.html#3523" class="Function Operator">•</a> <a id="3590" href="Foreign.HaskellTypes.Deriving.html#3419" class="Function">fieldPrefix</a> <a id="3602" class="String">&quot;gas&quot;</a>
  <a id="Conv-GovActionState&#39;"></a><a id="3610" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3610" class="Function">Conv-GovActionState&#39;</a> <a id="3631" class="Symbol">=</a> <a id="3633" href="Foreign.Convertible.Deriving.html#6819" class="Macro">autoConvert</a> <a id="3645" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2044" class="Record">GovActionState&#39;</a>

<a id="3662" class="Comment">-- And finally we compose everything into conversions for the dependent types</a>

<a id="3741" class="Keyword">instance</a>
  <a id="HsTy-GovProposal"></a><a id="3752" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3752" class="Function">HsTy-GovProposal</a> <a id="3769" class="Symbol">=</a> <a id="3771" href="Foreign.HaskellTypes.html#676" class="Function">MkHsType</a> <a id="3780" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a> <a id="3792" class="Symbol">(</a><a id="3793" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="3800" href="Ledger.Conway.Foreign.HSLedger.Gov.html#1808" class="Record">GovProposal&#39;</a><a id="3812" class="Symbol">)</a>
  <a id="Conv-GovProposal"></a><a id="3816" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3816" class="Function">Conv-GovProposal</a> <a id="3833" class="Symbol">=</a> <a id="3835" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2353" class="Function">mkGovProposal&#39;</a> <a id="3850" href="Foreign.Convertible.html#959" class="Function Operator">⨾</a> <a id="3852" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3321" class="Function">Conv-GovProposal&#39;</a>

  <a id="HsTy-GovActionState"></a><a id="3873" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3873" class="Function">HsTy-GovActionState</a> <a id="3893" class="Symbol">=</a> <a id="3895" href="Foreign.HaskellTypes.html#676" class="Function">MkHsType</a> <a id="3904" href="Ledger.Conway.GovernanceActions.html#2760" class="Record">GovActionState</a> <a id="3919" class="Symbol">(</a><a id="3920" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="3927" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2044" class="Record">GovActionState&#39;</a><a id="3942" class="Symbol">)</a>
  <a id="Conv-GovActionState"></a><a id="3946" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3946" class="Function">Conv-GovActionState</a> <a id="3966" class="Symbol">=</a> <a id="3968" href="Ledger.Conway.Foreign.HSLedger.Gov.html#2687" class="Function">mkGovActionState&#39;</a> <a id="3986" href="Foreign.Convertible.html#959" class="Function Operator">⨾</a> <a id="3988" href="Ledger.Conway.Foreign.HSLedger.Gov.html#3610" class="Function">Conv-GovActionState&#39;</a>

<a id="4010" class="Keyword">unquoteDecl</a> <a id="4022" class="Symbol">=</a> <a id="4024" class="Keyword">do</a>
  hsTypeAlias GovActionID
  hsTypeAlias GovState
  hsTypeAlias Voter

<a id="4097" class="Comment">-- Computational function</a>

<a id="gov-step"></a><a id="4124" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4124" class="Function">gov-step</a> <a id="4133" class="Symbol">:</a> <a id="4135" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="4142" class="Symbol">(</a><a id="4143" href="Ledger.Conway.Conformance.Gov.html#745" class="Record">GovEnv</a> <a id="4150" class="Symbol">→</a> <a id="4152" href="Ledger.Conway.Gov.html#1397" class="Function">GovState</a> <a id="4161" class="Symbol">→</a> <a id="4163" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4168" class="Symbol">(</a><a id="4169" href="Ledger.Conway.GovernanceActions.html#2393" class="Record">GovVote</a> <a id="4177" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="4179" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a><a id="4190" class="Symbol">)</a> <a id="4192" class="Symbol">→</a> <a id="4194" href="Interface.ComputationalRelation.html#235" class="Datatype">ComputationResult</a> <a id="4212" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="4219" href="Ledger.Conway.Gov.html#1397" class="Function">GovState</a><a id="4227" class="Symbol">)</a>
<a id="4229" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4124" class="Function">gov-step</a> <a id="4238" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4238" class="Bound">Γ</a> <a id="4240" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4240" class="Bound">govSt</a> <a id="4246" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4246" class="Bound">gvps</a> <a id="4251" class="Symbol">=</a> <a id="4253" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="4256" class="Symbol">(</a><a id="4257" href="Interface.ComputationalRelation.html#2976" class="Function">compute</a> <a id="4265" href="Ledger.Conway.Gov.Properties.html#7494" class="Function">Computational-GOVS</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Gov.html#777}{\htmlId{4286}{\htmlClass{Function}{\text{txid}}}}\, \\ \,\href{Ledger.Conway.Foreign.HSLedger.Gov.html#4434}{\htmlId{4293}{\htmlClass{Function}{\text{e&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#824}{\htmlId{4298}{\htmlClass{Function}{\text{pparams}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#850}{\htmlId{4308}{\htmlClass{Function}{\text{ppolicy}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#885}{\htmlId{4318}{\htmlClass{Function}{\text{enactState}}}}\, \\ \,\href{Foreign.Convertible.html#149}{\htmlId{4331}{\htmlClass{Field}{\text{to}}}}\, \,\href{Ledger.Conway.Conformance.Gov.html#914}{\htmlId{4334}{\htmlClass{Function}{\text{certState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Gov.html#942}{\htmlId{4346}{\htmlClass{Function}{\text{rewardCreds}}}}\, \end{pmatrix}$</a> <a id="4360" class="Symbol">(</a><a id="4361" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="4366" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4240" class="Bound">govSt</a><a id="4371" class="Symbol">)</a> <a id="4373" class="Symbol">(</a><a id="4374" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="4379" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4246" class="Bound">gvps</a><a id="4383" class="Symbol">))</a>
  <a id="4388" class="Keyword">where</a> <a id="4394" class="Keyword">open</a> <a id="4399" href="Ledger.Conway.Conformance.Gov.html#745" class="Module">GovEnv</a> <a id="4406" class="Symbol">(</a><a id="4407" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="4412" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4238" class="Bound">Γ</a><a id="4413" class="Symbol">)</a> <a id="4415" class="Keyword">renaming</a> <a id="4424" class="Symbol">(</a><a id="4425" href="Ledger.Conway.Conformance.Gov.html#800" class="Field">epoch</a> <a id="4431" class="Symbol">to</a> <a id="4434" class="Field">e&#39;</a><a id="4436" class="Symbol">)</a>

<a id="4439" class="Symbol">{-#</a> <a id="4443" class="Keyword">COMPILE</a> <a id="4451" class="Keyword">GHC</a> <a id="4455" href="Ledger.Conway.Foreign.HSLedger.Gov.html#4124" class="Function">gov-step</a> <a id="4464" class="Pragma">as</a> <a id="4467" class="Pragma">govStep</a> <a id="4475" class="Symbol">#-}</a>
</pre></body></html>