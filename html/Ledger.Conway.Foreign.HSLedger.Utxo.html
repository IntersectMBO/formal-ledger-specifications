<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Foreign.HSLedger.Utxo</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--no-qualified-instances</a> <a id="38" class="Symbol">#-}</a>

<a id="43" class="Keyword">module</a> <a id="50" href="Ledger.Conway.Foreign.HSLedger.Utxo.html" class="Module">Ledger.Conway.Foreign.HSLedger.Utxo</a> <a id="86" class="Keyword">where</a>

<a id="93" class="Keyword">open</a> <a id="98" class="Keyword">import</a> <a id="105" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="121" class="Keyword">open</a> <a id="126" class="Keyword">import</a> <a id="133" href="Ledger.Conway.Foreign.ExternalFunctions.html" class="Module">Ledger.Conway.Foreign.ExternalFunctions</a>

<a id="174" class="Keyword">open</a> <a id="179" class="Keyword">import</a> <a id="186" href="Data.String.Base.html" class="Module">Data.String.Base</a> <a id="203" class="Keyword">renaming</a> <a id="212" class="Symbol">(</a><a id="213" href="Data.String.Base.html#2425" class="Function Operator">_++_</a> <a id="218" class="Symbol">to</a> <a id="221" class="Function Operator">_+ˢ_</a><a id="225" class="Symbol">)</a> <a id="227" class="Keyword">hiding</a> <a id="234" class="Symbol">(</a><a id="235" href="Data.String.Base.html#1626" class="Primitive">show</a><a id="239" class="Symbol">;</a> <a id="241" href="Data.String.Base.html#2489" class="Function">length</a><a id="247" class="Symbol">;</a> <a id="249" href="Data.String.Base.html#5404" class="Function">map</a><a id="252" class="Symbol">;</a> <a id="254" href="Data.String.Base.html#1591" class="Primitive">fromList</a><a id="262" class="Symbol">)</a>

<a id="265" class="Keyword">open</a> <a id="270" class="Keyword">import</a> <a id="277" href="Ledger.Conway.Foreign.HSLedger.Core.html" class="Module">Ledger.Conway.Foreign.HSLedger.Core</a>
<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Ledger.Conway.Foreign.HSLedger.Address.html" class="Module">Ledger.Conway.Foreign.HSLedger.Address</a>
<a id="364" class="Keyword">open</a> <a id="369" class="Keyword">import</a> <a id="376" href="Ledger.Conway.Foreign.HSLedger.Certs.html" class="Module">Ledger.Conway.Foreign.HSLedger.Certs</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Ledger.Conway.Foreign.HSLedger.PParams.html" class="Module">Ledger.Conway.Foreign.HSLedger.PParams</a>
<a id="464" class="Keyword">open</a> <a id="469" class="Keyword">import</a> <a id="476" href="Ledger.Conway.Foreign.HSLedger.Transaction.html" class="Module">Ledger.Conway.Foreign.HSLedger.Transaction</a>

<a id="520" class="Keyword">open</a> <a id="525" class="Keyword">import</a> <a id="532" href="Foreign.Haskell.Coerce.html" class="Module">Foreign.Haskell.Coerce</a>

<a id="556" class="Keyword">open</a> <a id="561" class="Keyword">import</a> <a id="568" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html" class="Module">Ledger.Conway.Foreign.HSLedger.BaseTypes</a> <a id="609" class="Keyword">hiding</a> <a id="616" class="Symbol">(</a><a id="617" href="Ledger.Conway.Transaction.html#4056" class="Record">TxWitnesses</a><a id="628" class="Symbol">;</a> <a id="630" href="Ledger.Conway.Transaction.html#5618" class="Function">refScripts</a><a id="640" class="Symbol">)</a>
<a id="642" class="Keyword">open</a> <a id="647" class="Keyword">import</a> <a id="654" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="685" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html#2207" class="Function">DummyTransactionStructure</a> <a id="711" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html#2262" class="Function">DummyAbstractFunctions</a>
<a id="734" class="Keyword">open</a> <a id="739" class="Keyword">import</a> <a id="746" href="Ledger.Conway.Conformance.Utxow.html" class="Module">Ledger.Conway.Conformance.Utxow</a> <a id="778" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html#2207" class="Function">DummyTransactionStructure</a> <a id="804" href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html#2262" class="Function">DummyAbstractFunctions</a>

<a id="828" class="Keyword">instance</a>
  <a id="HsTy-UTxOEnv"></a><a id="839" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#839" class="Function">HsTy-UTxOEnv</a> <a id="852" class="Symbol">=</a> <a id="854" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">autoHsType</a> <a id="865" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="873" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">⊣</a> <a id="875" href="Foreign.HaskellTypes.Deriving.html#3237" class="Function">withConstructor</a> <a id="891" class="String">&quot;MkUTxOEnv&quot;</a>
                                    <a id="939" href="Foreign.HaskellTypes.Deriving.html#3523" class="Function Operator">•</a> <a id="941" href="Foreign.HaskellTypes.Deriving.html#3419" class="Function">fieldPrefix</a> <a id="953" class="String">&quot;ue&quot;</a>
  <a id="Conv-UTxOEnv"></a><a id="960" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#960" class="Function">Conv-UTxOEnv</a> <a id="973" class="Symbol">=</a> <a id="975" href="Foreign.Convertible.Deriving.html#6819" class="Macro">autoConvert</a> <a id="987" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>

  <a id="HsTy-UTxOState"></a><a id="998" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#998" class="Function">HsTy-UTxOState</a> <a id="1013" class="Symbol">=</a> <a id="1015" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">autoHsType</a> <a id="1026" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="1036" href="Foreign.HaskellTypes.Deriving.html#11530" class="Macro Operator">⊣</a> <a id="1038" href="Foreign.HaskellTypes.Deriving.html#3237" class="Function">withConstructor</a> <a id="1054" class="String">&quot;MkUTxOState&quot;</a>
  <a id="Conv-UTxOState"></a><a id="1070" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1070" class="Function">Conv-UTxOState</a> <a id="1085" class="Symbol">=</a> <a id="1087" href="Foreign.Convertible.Deriving.html#6819" class="Macro">autoConvert</a> <a id="1099" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>

<a id="1110" class="Keyword">unquoteDecl</a> <a id="1122" class="Symbol">=</a> <a id="1124" class="Keyword">do</a>
  hsTypeAlias UTxO
  hsTypeAlias Redeemer

<a id="1170" class="Keyword">module</a> <a id="1177" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1177" class="Module">_</a> <a id="1179" class="Symbol">(</a><a id="1180" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1180" class="Bound">ext</a> <a id="1184" class="Symbol">:</a> <a id="1186" href="Ledger.Conway.Foreign.ExternalFunctions.html#132" class="Record">ExternalFunctions</a><a id="1203" class="Symbol">)</a> <a id="1205" class="Keyword">where</a>
  <a id="1213" class="Keyword">open</a> <a id="1218" class="Keyword">import</a> <a id="1225" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html" class="Module">Ledger.Conway.Foreign.HSLedger.ExternalStructures</a> <a id="1275" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1180" class="Bound">ext</a> <a id="1279" class="Keyword">hiding</a> <a id="1286" class="Symbol">(</a><a id="1287" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a><a id="1289" class="Symbol">;</a> <a id="1291" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a><a id="1297" class="Symbol">;</a> <a id="1299" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a><a id="1305" class="Symbol">)</a>
  <a id="1309" class="Keyword">open</a> <a id="1314" class="Keyword">import</a> <a id="1321" href="Ledger.Conway.Conformance.Utxow.Properties.html" class="Module">Ledger.Conway.Conformance.Utxow.Properties</a> <a id="1364" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2820" class="Function">HSTransactionStructure</a> <a id="1387" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3348" class="Function">HSAbstractFunctions</a>
  <a id="1409" class="Keyword">open</a> <a id="1414" class="Keyword">import</a> <a id="1421" href="Ledger.Conway.Conformance.Utxo.Properties.html" class="Module">Ledger.Conway.Conformance.Utxo.Properties</a> <a id="1463" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#2820" class="Function">HSTransactionStructure</a> <a id="1486" href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html#3348" class="Function">HSAbstractFunctions</a>

  <a id="1509" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1509" class="Function">utxo-step</a> <a id="1519" class="Symbol">:</a> <a id="1521" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="1528" class="Symbol">(</a><a id="1529" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="1537" class="Symbol">→</a> <a id="1539" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="1549" class="Symbol">→</a> <a id="1551" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="1554" class="Symbol">→</a> <a id="1556" href="Interface.ComputationalRelation.html#235" class="Datatype">ComputationResult</a> <a id="1574" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1581" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a><a id="1590" class="Symbol">)</a>
  <a id="1594" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1509" class="Function">utxo-step</a> <a id="1604" class="Symbol">=</a> <a id="1606" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="1609" class="Symbol">(</a><a id="1610" href="Foreign.Haskell.Coerce.html#2740" class="Postulate">coerce</a> <a id="1617" class="Symbol">⦃</a> <a id="1619" href="Foreign.Haskell.Coerce.html#2408" class="InductiveConstructor">TrustMe</a> <a id="1627" class="Symbol">⦄</a> <a id="1629" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1631" href="Interface.ComputationalRelation.html#2976" class="Function">compute</a> <a id="1639" href="Ledger.Conway.Conformance.Utxo.Properties.html#2180" class="Function">Computational-UTXO</a><a id="1657" class="Symbol">)</a>

  <a id="1662" class="Symbol">{-#</a> <a id="1666" class="Keyword">COMPILE</a> <a id="1674" class="Keyword">GHC</a> <a id="1678" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1509" class="Function">utxo-step</a> <a id="1688" class="Pragma">as</a> <a id="1691" class="Pragma">utxoStep</a> <a id="1700" class="Symbol">#-}</a>

  <a id="1707" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1707" class="Function">utxow-step</a> <a id="1718" class="Symbol">:</a> <a id="1720" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="1727" class="Symbol">(</a><a id="1728" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="1736" class="Symbol">→</a> <a id="1738" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="1748" class="Symbol">→</a> <a id="1750" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="1753" class="Symbol">→</a> <a id="1755" href="Interface.ComputationalRelation.html#235" class="Datatype">ComputationResult</a> <a id="1773" href="Agda.Builtin.String.html#335" class="Postulate">String</a> <a id="1780" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a><a id="1789" class="Symbol">)</a>
  <a id="1793" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1707" class="Function">utxow-step</a> <a id="1804" class="Symbol">=</a> <a id="1806" href="Foreign.Convertible.html#149" class="Field">to</a> <a id="1809" class="Symbol">(</a><a id="1810" href="Foreign.Haskell.Coerce.html#2740" class="Postulate">coerce</a> <a id="1817" class="Symbol">⦃</a> <a id="1819" href="Foreign.Haskell.Coerce.html#2408" class="InductiveConstructor">TrustMe</a> <a id="1827" class="Symbol">⦄</a> <a id="1829" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1831" href="Interface.ComputationalRelation.html#2976" class="Function">compute</a> <a id="1839" href="Ledger.Conway.Conformance.Utxow.Properties.html#583" class="Function">Computational-UTXOW</a><a id="1858" class="Symbol">)</a>

  <a id="1863" class="Symbol">{-#</a> <a id="1867" class="Keyword">COMPILE</a> <a id="1875" class="Keyword">GHC</a> <a id="1879" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1707" class="Function">utxow-step</a> <a id="1890" class="Pragma">as</a> <a id="1893" class="Pragma">utxowStep</a> <a id="1903" class="Symbol">#-}</a>

  <a id="1910" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1910" class="Function">utxo-debug</a> <a id="1921" class="Symbol">:</a> <a id="1923" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="1930" class="Symbol">(</a><a id="1931" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="1939" class="Symbol">→</a> <a id="1941" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="1951" class="Symbol">→</a> <a id="1953" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="1956" class="Symbol">→</a> <a id="1958" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="1964" class="Symbol">)</a>
  <a id="1968" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1910" class="Function">utxo-debug</a> <a id="1979" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1979" class="Bound">env</a> <a id="1983" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1983" class="Bound">st</a> <a id="1986" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1986" class="Bound">tx</a> <a id="1989" class="Symbol">=</a>
    <a id="1995" class="Keyword">let</a> <a id="1999" class="Keyword">open</a> <a id="2004" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="2007" class="Symbol">(</a><a id="2008" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2013" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1986" class="Bound">tx</a><a id="2015" class="Symbol">)</a>
        <a id="2025" class="Keyword">open</a> <a id="2030" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="2037" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a>
        <a id="2050" class="Keyword">open</a> <a id="2055" href="Ledger.Conway.Utxo.html#2747" class="Module">UTxOState</a> <a id="2065" class="Symbol">(</a><a id="2066" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2071" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1983" class="Bound">st</a><a id="2073" class="Symbol">)</a>
        <a id="2083" class="Keyword">open</a> <a id="2088" href="Ledger.Conway.Utxo.html#2395" class="Module">UTxOEnv</a> <a id="2096" class="Symbol">(</a><a id="2097" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2102" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1979" class="Bound">env</a><a id="2105" class="Symbol">)</a>
     <a id="2112" class="Keyword">in</a> <a id="2115" href="Data.String.Base.html#2826" class="Function">unlines</a> <a id="2123" href="Function.Base.html#1974" class="Function Operator">$</a>
          <a id="2135" class="String">&quot;Consumed:&quot;</a> <a id="2147" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2159" class="Symbol">(</a><a id="2160" class="String">&quot;\tInputs:      \t&quot;</a> <a id="2180" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2183" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2188" class="Symbol">(</a><a id="2189" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="2197" class="Symbol">(</a><a id="2198" href="Ledger.Conway.Utxo.html#2811" class="Function">utxo</a> <a id="2203" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="2205" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a><a id="2210" class="Symbol">)))</a> <a id="2214" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2226" class="Symbol">(</a><a id="2227" class="String">&quot;\tMint:        \t&quot;</a> <a id="2247" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2250" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2255" href="Ledger.Conway.Transaction.html#2920" class="Function">mint</a><a id="2259" class="Symbol">)</a> <a id="2261" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2273" class="Symbol">(</a><a id="2274" class="String">&quot;\tRefunds:     \t&quot;</a> <a id="2294" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2297" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2302" class="Symbol">(</a><a id="2303" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="2310" class="Symbol">(</a><a id="2311" href="Ledger.Conway.Utxo.html#12074" class="Function">depositRefunds</a> <a id="2326" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="2334" class="Symbol">(</a><a id="2335" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2340" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1983" class="Bound">st</a><a id="2342" class="Symbol">)</a> <a id="2344" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="2348" class="Symbol">)))</a> <a id="2352" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2364" class="Symbol">(</a><a id="2365" class="String">&quot;\tWithdrawals: \t&quot;</a> <a id="2385" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2388" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2393" class="Symbol">(</a><a id="2394" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="2401" class="Symbol">(</a><a id="2402" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="2410" href="Ledger.Conway.Transaction.html#3030" class="Function">txwdrls</a><a id="2417" class="Symbol">)))</a> <a id="2421" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2433" class="Symbol">(</a><a id="2434" class="String">&quot;\tTotal:       \t&quot;</a> <a id="2454" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2457" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2462" class="Symbol">(</a><a id="2463" href="Ledger.Conway.Utxo.html#12332" class="Function">consumed</a> <a id="2472" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="2480" class="Symbol">(</a><a id="2481" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2486" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1983" class="Bound">st</a><a id="2488" class="Symbol">)</a> <a id="2490" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="2494" class="Symbol">))</a> <a id="2497" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2509" class="String">&quot;Produced:&quot;</a> <a id="2521" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2533" class="Symbol">(</a><a id="2534" class="String">&quot;\tOutputs:     \t&quot;</a> <a id="2554" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2557" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2562" class="Symbol">(</a><a id="2563" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="2571" class="Symbol">(</a><a id="2572" href="Ledger.Conway.Utxo.html#3525" class="Function">outs</a> <a id="2577" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="2581" class="Symbol">)))</a> <a id="2585" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2597" class="Symbol">(</a><a id="2598" class="String">&quot;\tDonations:   \t&quot;</a> <a id="2618" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2621" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2626" class="Symbol">(</a><a id="2627" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="2634" href="Ledger.Conway.Transaction.html#3134" class="Function">txdonation</a><a id="2644" class="Symbol">))</a> <a id="2647" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2659" class="Symbol">(</a><a id="2660" class="String">&quot;\tDeposits:    \t&quot;</a> <a id="2680" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2683" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2688" class="Symbol">(</a><a id="2689" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="2696" class="Symbol">(</a><a id="2697" href="Ledger.Conway.Utxo.html#12206" class="Function">newDeposits</a> <a id="2709" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="2717" class="Symbol">(</a><a id="2718" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2723" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1983" class="Bound">st</a><a id="2725" class="Symbol">)</a> <a id="2727" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="2731" class="Symbol">)))</a> <a id="2735" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2747" class="Symbol">(</a><a id="2748" class="String">&quot;\tFees:        \t&quot;</a> <a id="2768" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2771" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2776" class="Symbol">(</a><a id="2777" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="2784" href="Ledger.Conway.Transaction.html#2892" class="Function">txfee</a><a id="2789" class="Symbol">))</a> <a id="2792" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2804" class="Symbol">(</a><a id="2805" class="String">&quot;\tTotal:       \t&quot;</a> <a id="2825" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2828" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2833" class="Symbol">(</a><a id="2834" href="Ledger.Conway.Utxo.html#12540" class="Function">produced</a> <a id="2843" href="Ledger.Conway.Utxo.html#2449" class="Function">pparams</a> <a id="2851" class="Symbol">(</a><a id="2852" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2857" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1983" class="Bound">st</a><a id="2859" class="Symbol">)</a> <a id="2861" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="2865" class="Symbol">))</a> <a id="2868" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2880" class="String">&quot;&quot;</a> <a id="2883" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2895" class="String">&quot;Reference Scripts Info:&quot;</a> <a id="2921" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="2933" class="Symbol">(</a><a id="2934" class="String">&quot;\tTotal size: \t&quot;</a> <a id="2953" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#221" class="Function Operator">+ˢ</a> <a id="2956" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2961" class="Symbol">(</a><a id="2962" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="2977" href="Ledger.Conway.Utxo.html#2811" class="Function">utxo</a> <a id="2982" class="Symbol">(</a><a id="2983" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="2988" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1986" class="Bound">tx</a><a id="2990" class="Symbol">)))</a> <a id="2994" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
          <a id="3006" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

  <a id="3012" class="Symbol">{-#</a> <a id="3016" class="Keyword">COMPILE</a> <a id="3024" class="Keyword">GHC</a> <a id="3028" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#1910" class="Function">utxo-debug</a> <a id="3039" class="Pragma">as</a> <a id="3042" class="Pragma">utxoDebug</a> <a id="3052" class="Symbol">#-}</a>

  <a id="3059" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3059" class="Function">utxow-debug</a> <a id="3071" class="Symbol">:</a> <a id="3073" href="Foreign.HaskellTypes.html#593" class="Function">HsType</a> <a id="3080" class="Symbol">(</a><a id="3081" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="3089" class="Symbol">→</a> <a id="3091" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="3101" class="Symbol">→</a> <a id="3103" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="3106" class="Symbol">→</a> <a id="3108" href="Agda.Builtin.String.html#335" class="Postulate">String</a><a id="3114" class="Symbol">)</a>
  <a id="3118" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3059" class="Function">utxow-debug</a> <a id="3130" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3130" class="Bound">env</a> <a id="3134" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3134" class="Bound">st</a> <a id="3137" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3137" class="Bound">tx</a> <a id="3140" class="Symbol">=</a>
    <a id="3146" class="Keyword">let</a> <a id="3150" class="Keyword">open</a> <a id="3155" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="3158" class="Symbol">(</a><a id="3159" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="3164" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3137" class="Bound">tx</a><a id="3166" class="Symbol">)</a>
        <a id="3176" class="Keyword">open</a> <a id="3181" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="3188" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a>
        <a id="3201" class="Keyword">open</a> <a id="3206" href="Ledger.Conway.Utxo.html#2747" class="Module">UTxOState</a> <a id="3216" class="Symbol">(</a><a id="3217" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="3222" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3134" class="Bound">st</a><a id="3224" class="Symbol">)</a>
        <a id="3234" class="Keyword">open</a> <a id="3239" href="Ledger.Conway.Utxo.html#2395" class="Module">UTxOEnv</a> <a id="3247" class="Symbol">(</a><a id="3248" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="3253" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3130" class="Bound">env</a><a id="3256" class="Symbol">)</a>
        <a id="3266" class="Keyword">open</a> <a id="3271" href="Ledger.Conway.Transaction.html#4056" class="Module">TxWitnesses</a> <a id="3283" class="Symbol">(</a><a id="3284" href="Foreign.Haskell.Coerce.html#2740" class="Postulate">coerce</a> <a id="3291" class="Symbol">⦃</a> <a id="3293" href="Foreign.Haskell.Coerce.html#2408" class="InductiveConstructor">TrustMe</a> <a id="3301" class="Symbol">⦄</a> <a id="3303" href="Ledger.Conway.Transaction.html#4362" class="Function">wits</a><a id="3307" class="Symbol">)</a>
        <a id="3317" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3317" class="Bound">neededHashes</a> <a id="3330" class="Symbol">=</a> <a id="3332" href="Ledger.Conway.Utxow.html#3669" class="Function">scriptsNeeded</a> <a id="3346" href="Ledger.Conway.Utxo.html#2811" class="Function">utxo</a> <a id="3351" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a>
        <a id="3364" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3364" class="Bound">refScriptHashes</a> <a id="3380" class="Symbol">=</a> <a id="3382" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="3391" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3393" href="Class.Functor.Core.html#272" class="Function">map</a>
          <a id="3407" href="Interface.Hashable.html#205" class="Field">hash</a> 
          <a id="3423" class="Symbol">(</a><a id="3424" href="Ledger.Conway.Transaction.html#5618" class="Function">refScripts</a> <a id="3435" class="Symbol">(</a><a id="3436" href="Foreign.Haskell.Coerce.html#2740" class="Postulate">coerce</a> <a id="3443" class="Symbol">⦃</a> <a id="3445" href="Foreign.Haskell.Coerce.html#2408" class="InductiveConstructor">TrustMe</a> <a id="3453" class="Symbol">⦄</a> <a id="3455" class="Symbol">(</a><a id="3456" href="Foreign.Convertible.html#170" class="Field">from</a> <a id="3461" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3137" class="Bound">tx</a><a id="3463" class="Symbol">))</a> <a id="3466" class="Symbol">(</a><a id="3467" href="Foreign.Haskell.Coerce.html#2740" class="Postulate">coerce</a> <a id="3474" class="Symbol">⦃</a> <a id="3476" href="Foreign.Haskell.Coerce.html#2408" class="InductiveConstructor">TrustMe</a> <a id="3484" class="Symbol">⦄</a> <a id="3486" href="Ledger.Conway.Utxo.html#2811" class="Function">utxo</a><a id="3490" class="Symbol">))</a>
        <a id="3501" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3501" class="Bound">witsScriptHashes</a>  <a id="3519" class="Symbol">=</a> <a id="3521" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3526" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="3531" href="Ledger.Conway.Transaction.html#4125" class="Function">scripts</a>
     <a id="3544" class="Keyword">in</a> <a id="3547" href="Data.String.Base.html#2826" class="Function">unlines</a>
       <a id="3562" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3564" class="String">&quot;witsVKeyNeeded utxo txb = &quot;</a>
       <a id="3600" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3602" href="Class.Show.Core.html#187" class="Field">show</a> <a id="3607" class="Symbol">(</a><a id="3608" href="Ledger.Conway.Utxow.html#3572" class="Function">witsVKeyNeeded</a> <a id="3623" href="Ledger.Conway.Utxo.html#2811" class="Function">utxo</a> <a id="3628" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="3632" class="Symbol">)</a>
       <a id="3641" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3643" class="String">&quot;\nwitsKeyHashes = &quot;</a>
       <a id="3671" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3673" href="Class.Show.Core.html#187" class="Field">show</a> <a id="3678" class="Symbol">(</a><a id="3679" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3684" href="Interface.Hashable.html#205" class="Field">hash</a> <a id="3689" class="Symbol">(</a><a id="3690" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3694" href="Ledger.Conway.Transaction.html#4097" class="Function">vkSigs</a><a id="3700" class="Symbol">))</a>
       <a id="3710" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3712" class="String">&quot;\nneededHashes = &quot;</a>
       <a id="3739" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3741" href="Class.Show.Core.html#187" class="Field">show</a> <a id="3746" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3317" class="Bound">neededHashes</a>
       <a id="3766" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3768" class="String">&quot;\nrefScriptHashes = &quot;</a>
       <a id="3798" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3800" href="Class.Show.Core.html#187" class="Field">show</a> <a id="3805" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3364" class="Bound">refScriptHashes</a>
       <a id="3828" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3830" class="String">&quot;\nwitsScriptHashes = &quot;</a>
       <a id="3861" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3863" href="Class.Show.Core.html#187" class="Field">show</a> <a id="3868" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3501" class="Bound">witsScriptHashes</a>
       <a id="3892" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3894" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

  <a id="3900" class="Symbol">{-#</a> <a id="3904" class="Keyword">COMPILE</a> <a id="3912" class="Keyword">GHC</a> <a id="3916" href="Ledger.Conway.Foreign.HSLedger.Utxo.html#3059" class="Function">utxow-debug</a> <a id="3928" class="Pragma">as</a> <a id="3931" class="Pragma">utxowDebug</a> <a id="3942" class="Symbol">#-}</a>
</pre></body></html>