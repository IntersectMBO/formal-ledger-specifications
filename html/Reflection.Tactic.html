<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Reflection.Tactic</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Comment">--------------------------------------------------------------------------------</a>
<a id="117" class="Comment">-- Types &amp; functions for interacting with tactics/metaprograms</a>
<a id="180" class="Comment">--------------------------------------------------------------------------------</a>

<a id="262" class="Keyword">module</a> <a id="269" href="Reflection.Tactic.html" class="Module">Reflection.Tactic</a> <a id="287" class="Keyword">where</a>

<a id="294" class="Keyword">import</a> <a id="301" href="Reflection.html" class="Module">Reflection</a> <a id="312" class="Symbol">as</a> <a id="315" class="Module">R</a>
<a id="317" class="Keyword">open</a> <a id="322" class="Keyword">import</a> <a id="329" href="Class.Monad.html" class="Module">Class.Monad</a> <a id="341" class="Keyword">hiding</a> <a id="348" class="Symbol">(</a><a id="349" href="Class.Monad.Instances.html#229" class="Function">Monad-TC</a><a id="357" class="Symbol">)</a>
<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Class.MonadTC.html" class="Module">Class.MonadTC</a>
<a id="385" class="Keyword">open</a> <a id="390" class="Keyword">import</a> <a id="397" href="Meta.Prelude.html" class="Module">Meta.Prelude</a>
<a id="410" class="Keyword">open</a> <a id="415" class="Keyword">import</a> <a id="422" href="Meta.Init.html" class="Module">Meta.Init</a>

<a id="433" class="Keyword">open</a> <a id="438" href="Class.MonadTC.html#1519" class="Module">MonadTC</a> <a id="446" class="Symbol">⦃...⦄</a>

<a id="Tactic"></a><a id="453" href="Reflection.Tactic.html#453" class="Function">Tactic</a> <a id="460" class="Symbol">=</a> <a id="462" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="467" class="Symbol">→</a> <a id="469" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="474" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="UnquoteDecl"></a><a id="476" href="Reflection.Tactic.html#476" class="Function">UnquoteDecl</a> <a id="488" class="Symbol">=</a> <a id="490" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="495" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="ITactic"></a><a id="498" href="Reflection.Tactic.html#498" class="Function">ITactic</a> <a id="506" class="Symbol">:</a> <a id="508" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="512" href="Reflection.Tactic.html#498" class="Function">ITactic</a> <a id="520" class="Symbol">=</a> <a id="522" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="525" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>

<a id="initTacEnv"></a><a id="528" href="Reflection.Tactic.html#528" class="Function">initTacEnv</a> <a id="539" class="Symbol">:</a> <a id="541" class="Symbol">(</a><a id="542" href="Class.MonadTC.html#818" class="Record">TCEnv</a> <a id="548" class="Symbol">→</a> <a id="550" href="Class.MonadTC.html#818" class="Record">TCEnv</a><a id="555" class="Symbol">)</a> <a id="557" class="Symbol">→</a> <a id="559" href="Reflection.Tactic.html#498" class="Function">ITactic</a> <a id="567" class="Symbol">→</a> <a id="569" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
<a id="576" href="Reflection.Tactic.html#528" class="Function">initTacEnv</a> <a id="587" href="Reflection.Tactic.html#587" class="Bound">f</a> <a id="589" href="Reflection.Tactic.html#589" class="Bound">tac</a> <a id="593" href="Reflection.Tactic.html#593" class="Bound">goal</a> <a id="598" class="Symbol">=</a> <a id="600" class="Symbol">(</a><a id="601" href="Class.MonadTC.html#1120" class="Function">initTCEnvWithGoal</a> <a id="619" href="Reflection.Tactic.html#593" class="Bound">goal</a><a id="623" class="Symbol">)</a> <a id="625" href="Reflection.TCM.Syntax.html#623" class="Function Operator">R.&gt;&gt;=</a> <a id="631" href="Reflection.Tactic.html#589" class="Bound">tac</a> <a id="635" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="637" href="Reflection.Tactic.html#587" class="Bound">f</a>

<a id="initTacOpts"></a><a id="640" href="Reflection.Tactic.html#640" class="Function">initTacOpts</a> <a id="652" class="Symbol">:</a> <a id="654" href="Reflection.Tactic.html#498" class="Function">ITactic</a> <a id="662" class="Symbol">→</a> <a id="664" href="Class.MonadTC.html#620" class="Record">TCOptions</a> <a id="674" class="Symbol">→</a> <a id="676" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
<a id="683" href="Reflection.Tactic.html#640" class="Function">initTacOpts</a> <a id="695" href="Reflection.Tactic.html#695" class="Bound">tac</a> <a id="699" href="Reflection.Tactic.html#699" class="Bound">opts</a> <a id="704" class="Symbol">=</a> <a id="706" href="Reflection.Tactic.html#528" class="Function">initTacEnv</a> <a id="717" class="Symbol">(λ</a> <a id="720" href="Reflection.Tactic.html#720" class="Bound">env</a> <a id="724" class="Symbol">→</a> <a id="726" class="Keyword">record</a> <a id="733" href="Reflection.Tactic.html#720" class="Bound">env</a> <a id="737" class="Symbol">{</a> <a id="739" href="Class.MonadTC.html#1059" class="Field">options</a> <a id="747" class="Symbol">=</a> <a id="749" href="Reflection.Tactic.html#699" class="Bound">opts</a> <a id="754" class="Symbol">})</a> <a id="757" href="Reflection.Tactic.html#695" class="Bound">tac</a>

<a id="762" class="Keyword">module</a> <a id="769" href="Reflection.Tactic.html#769" class="Module">_</a> <a id="771" class="Symbol">⦃</a> <a id="773" href="Reflection.Tactic.html#773" class="Bound">opts</a> <a id="778" class="Symbol">:</a> <a id="780" href="Class.MonadTC.html#620" class="Record">TCOptions</a> <a id="790" class="Symbol">⦄</a> <a id="792" class="Keyword">where</a>

  <a id="801" href="Reflection.Tactic.html#801" class="Function">initTac</a> <a id="809" class="Symbol">:</a> <a id="811" href="Reflection.Tactic.html#498" class="Function">ITactic</a> <a id="819" class="Symbol">→</a> <a id="821" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
  <a id="830" href="Reflection.Tactic.html#801" class="Function">initTac</a> <a id="838" href="Reflection.Tactic.html#838" class="Bound">tac</a> <a id="842" class="Symbol">=</a> <a id="844" href="Reflection.Tactic.html#640" class="Function">initTacOpts</a> <a id="856" href="Reflection.Tactic.html#838" class="Bound">tac</a> <a id="860" href="Reflection.Tactic.html#773" class="Bound">opts</a>

  <a id="868" href="Reflection.Tactic.html#868" class="Function">initUnquoteWithGoal</a> <a id="888" class="Symbol">:</a> <a id="890" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="895" class="Symbol">→</a> <a id="897" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="900" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="902" class="Symbol">→</a> <a id="904" href="Reflection.Tactic.html#476" class="Function">UnquoteDecl</a>
  <a id="918" href="Reflection.Tactic.html#868" class="Function">initUnquoteWithGoal</a> <a id="938" href="Reflection.Tactic.html#938" class="Bound">g</a> <a id="940" href="Reflection.Tactic.html#940" class="Bound">unq</a> <a id="944" class="Symbol">=</a> <a id="946" class="Symbol">(</a><a id="947" href="Class.MonadTC.html#1120" class="Function">initTCEnvWithGoal</a> <a id="965" href="Reflection.Tactic.html#938" class="Bound">g</a><a id="966" class="Symbol">)</a> <a id="968" href="Reflection.TCM.Syntax.html#623" class="Function Operator">R.&gt;&gt;=</a> <a id="974" href="Reflection.Tactic.html#940" class="Bound">unq</a>
                            <a id="1006" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1008" class="Symbol">(λ</a> <a id="1011" href="Reflection.Tactic.html#1011" class="Bound">env</a> <a id="1015" class="Symbol">→</a> <a id="1017" class="Keyword">record</a> <a id="1024" href="Reflection.Tactic.html#1011" class="Bound">env</a> <a id="1028" class="Symbol">{</a> <a id="1030" href="Class.MonadTC.html#1059" class="Field">options</a> <a id="1038" class="Symbol">=</a> <a id="1040" href="Reflection.Tactic.html#773" class="Bound">opts</a> <a id="1045" class="Symbol">})</a>

  <a id="1051" href="Reflection.Tactic.html#1051" class="Function">initUnquote</a> <a id="1063" class="Symbol">:</a> <a id="1065" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="1068" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="Reflection.Tactic.html#476" class="Function">UnquoteDecl</a>
  <a id="1086" href="Reflection.Tactic.html#1051" class="Function">initUnquote</a> <a id="1098" href="Reflection.Tactic.html#1098" class="Bound">unq</a> <a id="1102" class="Symbol">=</a> <a id="1104" href="Reflection.Tactic.html#868" class="Function">initUnquoteWithGoal</a> <a id="1124" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a> <a id="1132" href="Reflection.Tactic.html#1098" class="Bound">unq</a>

  <a id="1139" class="Keyword">macro</a>
    <a id="1149" href="Reflection.Tactic.html#1149" class="Macro">byTC</a> <a id="1154" class="Symbol">:</a> <a id="1156" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="1159" href="Meta.Prelude.html#195" class="Generalizable">A</a> <a id="1161" class="Symbol">→</a> <a id="1163" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
    <a id="1174" href="Reflection.Tactic.html#1149" class="Macro">byTC</a> <a id="1179" href="Reflection.Tactic.html#1179" class="Bound">comp</a> <a id="1184" class="Symbol">=</a> <a id="1186" href="Reflection.Tactic.html#801" class="Function">initTac</a> <a id="1194" class="Symbol">((</a><a id="1196" href="Reflection.Tactic.html#1179" class="Bound">comp</a> <a id="1201" href="Class.Monad.Core.html#337" class="Field Operator">&gt;&gt;=</a> <a id="1205" href="Class.MonadTC.html#1891" class="Field">quoteTC</a><a id="1212" class="Symbol">)</a> <a id="1214" href="Class.Monad.Core.html#337" class="Field Operator">&gt;&gt;=</a> <a id="1218" href="Class.MonadTC.html#12881" class="Function">unifyWithGoal</a><a id="1231" class="Symbol">)</a>

    <a id="1238" href="Reflection.Tactic.html#1238" class="Macro">by</a> <a id="1241" class="Symbol">:</a> <a id="1243" href="Reflection.Tactic.html#498" class="Function">ITactic</a> <a id="1251" class="Symbol">→</a> <a id="1253" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
    <a id="1264" href="Reflection.Tactic.html#1238" class="Macro">by</a> <a id="1267" class="Symbol">=</a> <a id="1269" href="Reflection.Tactic.html#801" class="Function">initTac</a>
</pre></body></html>