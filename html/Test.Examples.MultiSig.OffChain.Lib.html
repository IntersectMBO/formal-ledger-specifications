<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Test.Examples.MultiSig.OffChain.Lib</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">module</a> <a id="32" href="Test.Examples.MultiSig.OffChain.Lib.html" class="Module">Test.Examples.MultiSig.OffChain.Lib</a> <a id="68" class="Keyword">where</a>

<a id="75" class="Keyword">open</a> <a id="80" class="Keyword">import</a> <a id="87" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="102" class="Keyword">open</a> <a id="107" class="Keyword">import</a> <a id="114" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a>

<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Test.Examples.MultiSig.Datum.html" class="Module">Test.Examples.MultiSig.Datum</a>
<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="Test.Examples.MultiSig.Validator.html" class="Module">Test.Examples.MultiSig.Validator</a>
<a id="239" class="Keyword">open</a> <a id="244" class="Keyword">import</a> <a id="251" href="Test.Prelude.html" class="Module">Test.Prelude</a> <a id="264" href="Test.Examples.MultiSig.Datum.html#642" class="Function">MultiSigData</a>
<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Test.SymbolicData.html" class="Module">Test.SymbolicData</a> <a id="307" href="Test.Examples.MultiSig.Datum.html#642" class="Function">MultiSigData</a>
<a id="320" class="Keyword">open</a> <a id="325" class="Keyword">import</a> <a id="332" href="Test.LedgerImplementation.html" class="Module">Test.LedgerImplementation</a> <a id="358" href="Test.SymbolicData.html#240" class="Function">SData</a> <a id="364" href="Test.SymbolicData.html#240" class="Function">SData</a>

<a id="371" class="Keyword">open</a> <a id="376" href="Ledger.Core.Specification.Transaction.html#896" class="Module">TransactionStructure</a> <a id="397" href="Test.LedgerImplementation.html#4275" class="Function">SVTransactionStructure</a>

<a id="421" class="Keyword">open</a> <a id="426" class="Keyword">import</a> <a id="433" href="Data.List.html" class="Module">Data.List</a> <a id="443" class="Keyword">using</a> <a id="449" class="Symbol">(</a><a id="450" href="Data.List.Base.html#10389" class="Function">filter</a><a id="456" class="Symbol">)</a>

<a id="459" class="Keyword">open</a> <a id="464" class="Keyword">import</a> <a id="471" href="Test.AbstractImplementation.html" class="Module">Test.AbstractImplementation</a> <a id="499" href="Test.SymbolicData.html#2902" class="Function">valContext</a>

<a id="511" class="Keyword">open</a> <a id="516" class="Keyword">import</a> <a id="523" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a> <a id="563" href="Test.LedgerImplementation.html#4275" class="Function">SVTransactionStructure</a> <a id="586" href="Test.AbstractImplementation.html#673" class="Function">SVAbstractFunctions</a>

<a id="defaultTxBody"></a><a id="607" href="Test.Examples.MultiSig.OffChain.Lib.html#607" class="Function">defaultTxBody</a> <a id="621" class="Symbol">:</a> <a id="623" href="Ledger.Conway.Specification.Transaction.html#350" class="Record">TxBody</a>
<a id="630" href="Test.Examples.MultiSig.OffChain.Lib.html#607" class="Function">defaultTxBody</a> <a id="644" class="Symbol">=</a> <a id="646" class="Keyword">record</a>
                  <a id="671" class="Symbol">{</a> <a id="673" href="Ledger.Conway.Specification.Transaction.html#382" class="Field">txIns</a> <a id="679" class="Symbol">=</a> <a id="681" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="701" class="Symbol">;</a> <a id="703" href="Ledger.Conway.Specification.Transaction.html#416" class="Field">refInputs</a> <a id="713" class="Symbol">=</a> <a id="715" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="735" class="Symbol">;</a> <a id="737" href="Ledger.Conway.Specification.Transaction.html#450" class="Field">collateralInputs</a> <a id="754" class="Symbol">=</a> <a id="756" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="776" class="Symbol">;</a> <a id="778" href="Ledger.Conway.Specification.Transaction.html#484" class="Field">txOuts</a> <a id="785" class="Symbol">=</a>  <a id="788" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="808" class="Symbol">;</a> <a id="810" href="Ledger.Conway.Specification.Transaction.html#592" class="Field">txFee</a> <a id="816" class="Symbol">=</a> <a id="818" class="Number">10000000000</a>
                  <a id="848" class="Symbol">;</a> <a id="850" href="Ledger.Conway.Specification.Transaction.html#958" class="Field">mint</a> <a id="855" class="Symbol">=</a> <a id="857" class="Number">0</a>
                  <a id="877" class="Symbol">;</a> <a id="879" href="Ledger.Conway.Specification.Transaction.html#663" class="Field">txVldt</a> <a id="886" class="Symbol">=</a> <a id="888" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="896" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="898" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="924" class="Symbol">;</a> <a id="926" href="Ledger.Conway.Specification.Transaction.html#554" class="Field">txCerts</a> <a id="934" class="Symbol">=</a> <a id="936" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
                  <a id="957" class="Symbol">;</a> <a id="959" href="Ledger.Conway.Specification.Transaction.html#624" class="Field">txWithdrawals</a> <a id="973" class="Symbol">=</a> <a id="975" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="995" class="Symbol">;</a> <a id="997" href="Ledger.Conway.Specification.Transaction.html#791" class="Field">txGovVotes</a> <a id="1008" class="Symbol">=</a> <a id="1010" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
                  <a id="1031" class="Symbol">;</a> <a id="1033" href="Ledger.Conway.Specification.Transaction.html#831" class="Field">txGovProposals</a> <a id="1048" class="Symbol">=</a> <a id="1050" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
                  <a id="1071" class="Symbol">;</a> <a id="1073" href="Ledger.Conway.Specification.Transaction.html#754" class="Field">txDonation</a> <a id="1084" class="Symbol">=</a> <a id="1086" class="Number">0</a>
                  <a id="1106" class="Symbol">;</a> <a id="1108" href="Ledger.Conway.Specification.Transaction.html#714" class="Field">txADhash</a> <a id="1117" class="Symbol">=</a> <a id="1119" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="1145" class="Symbol">;</a> <a id="1147" href="Ledger.Conway.Specification.Transaction.html#875" class="Field">txNetworkId</a> <a id="1159" class="Symbol">=</a> <a id="1161" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1166" class="Number">0</a>
                  <a id="1186" class="Symbol">;</a> <a id="1188" href="Ledger.Conway.Specification.Transaction.html#916" class="Field">currentTreasury</a> <a id="1204" class="Symbol">=</a> <a id="1206" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="1232" class="Symbol">;</a> <a id="1234" href="Ledger.Conway.Specification.Transaction.html#522" class="Field">txId</a> <a id="1239" class="Symbol">=</a> <a id="1241" class="Number">0</a>
                  <a id="1261" class="Symbol">;</a> <a id="1263" href="Ledger.Conway.Specification.Transaction.html#991" class="Field">reqSignerHashes</a> <a id="1279" class="Symbol">=</a> <a id="1281" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                  <a id="1301" class="Symbol">;</a> <a id="1303" href="Ledger.Conway.Specification.Transaction.html#1028" class="Field">scriptIntegrityHash</a> <a id="1323" class="Symbol">=</a> <a id="1325" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
                  <a id="1351" class="Symbol">}</a>

<a id="matchScriptAddress"></a><a id="1354" href="Test.Examples.MultiSig.OffChain.Lib.html#1354" class="Function">matchScriptAddress</a> <a id="1373" class="Symbol">:</a> <a id="1375" class="Symbol">(</a><a id="1376" href="Test.Examples.MultiSig.OffChain.Lib.html#1376" class="Bound">scriptHash</a> <a id="1387" class="Symbol">:</a> <a id="1389" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1390" class="Symbol">)</a> <a id="1392" class="Symbol">→</a> <a id="1394" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a> <a id="1405" class="Symbol">→</a> <a id="1407" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1411" href="Test.Examples.MultiSig.OffChain.Lib.html#1354" class="Function">matchScriptAddress</a> <a id="1430" href="Test.Examples.MultiSig.OffChain.Lib.html#1430" class="Bound">sh</a> <a id="1433" class="Symbol">(</a><a id="1434" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1445" href="Test.Examples.MultiSig.OffChain.Lib.html#1445" class="Bound">x</a><a id="1446" class="Symbol">)</a> <a id="1448" class="Symbol">=</a> <a id="1450" href="Data.Empty.html#914" class="Function">⊥</a>
<a id="1452" href="Test.Examples.MultiSig.OffChain.Lib.html#1354" class="Function">matchScriptAddress</a> <a id="1471" href="Test.Examples.MultiSig.OffChain.Lib.html#1471" class="Bound">sh</a> <a id="1474" class="Symbol">(</a><a id="1475" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="1485" href="Test.Examples.MultiSig.OffChain.Lib.html#1485" class="Bound">y</a><a id="1486" class="Symbol">)</a> <a id="1488" class="Symbol">=</a> <a id="1490" href="Relation.Nullary.Decidable.Core.html#4876" class="Function">True</a> <a id="1495" class="Symbol">(</a><a id="1496" href="Test.Examples.MultiSig.OffChain.Lib.html#1471" class="Bound">sh</a> <a id="1499" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="1501" href="Test.Examples.MultiSig.OffChain.Lib.html#1485" class="Bound">y</a><a id="1502" class="Symbol">)</a>

<a id="matchScriptAddress?"></a><a id="1505" href="Test.Examples.MultiSig.OffChain.Lib.html#1505" class="Function">matchScriptAddress?</a> <a id="1525" class="Symbol">:</a> <a id="1527" class="Symbol">(</a><a id="1528" href="Test.Examples.MultiSig.OffChain.Lib.html#1528" class="Bound">sh</a> <a id="1531" class="Symbol">:</a> <a id="1533" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1534" class="Symbol">)</a> <a id="1536" class="Symbol">→</a> <a id="1538" class="Symbol">(</a><a id="1539" href="Test.Examples.MultiSig.OffChain.Lib.html#1539" class="Bound">c</a> <a id="1541" class="Symbol">:</a> <a id="1543" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a><a id="1553" class="Symbol">)</a> <a id="1555" class="Symbol">→</a> <a id="1557" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="1561" class="Symbol">(</a><a id="1562" href="Test.Examples.MultiSig.OffChain.Lib.html#1354" class="Function">matchScriptAddress</a> <a id="1581" href="Test.Examples.MultiSig.OffChain.Lib.html#1528" class="Bound">sh</a> <a id="1584" href="Test.Examples.MultiSig.OffChain.Lib.html#1539" class="Bound">c</a><a id="1585" class="Symbol">)</a>
<a id="1587" href="Test.Examples.MultiSig.OffChain.Lib.html#1505" class="Function">matchScriptAddress?</a> <a id="1607" href="Test.Examples.MultiSig.OffChain.Lib.html#1607" class="Bound">sh</a> <a id="1610" class="Symbol">(</a><a id="1611" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1622" href="Test.Examples.MultiSig.OffChain.Lib.html#1622" class="Bound">x</a><a id="1623" class="Symbol">)</a> <a id="1625" class="Symbol">=</a> <a id="1627" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="1630" class="Symbol">(λ</a> <a id="1633" href="Test.Examples.MultiSig.OffChain.Lib.html#1633" class="Bound">x₁</a> <a id="1636" class="Symbol">→</a> <a id="1638" href="Test.Examples.MultiSig.OffChain.Lib.html#1633" class="Bound">x₁</a><a id="1640" class="Symbol">)</a>
<a id="1642" href="Test.Examples.MultiSig.OffChain.Lib.html#1505" class="Function">matchScriptAddress?</a> <a id="1662" href="Test.Examples.MultiSig.OffChain.Lib.html#1662" class="Bound">sh</a> <a id="1665" class="Symbol">(</a><a id="1666" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="1676" href="Test.Examples.MultiSig.OffChain.Lib.html#1676" class="Bound">y</a><a id="1677" class="Symbol">)</a> <a id="1679" class="Symbol">=</a> <a id="1681" href="Relation.Nullary.Decidable.Core.html#3225" class="Function">T?</a> <a id="1684" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌊</a> <a id="1686" class="Symbol">(</a><a id="1687" href="Test.Examples.MultiSig.OffChain.Lib.html#1662" class="Bound">sh</a> <a id="1690" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="1692" href="Test.Examples.MultiSig.OffChain.Lib.html#1676" class="Bound">y</a><a id="1693" class="Symbol">)</a> <a id="1695" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌋</a>

<a id="getScriptUTxO"></a><a id="1698" href="Test.Examples.MultiSig.OffChain.Lib.html#1698" class="Function">getScriptUTxO</a> <a id="1712" class="Symbol">:</a> <a id="1714" class="Symbol">(</a><a id="1715" href="Test.Examples.MultiSig.OffChain.Lib.html#1715" class="Bound">scriptHash</a> <a id="1726" class="Symbol">:</a> <a id="1728" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1729" class="Symbol">)</a> <a id="1731" class="Symbol">→</a> <a id="1733" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a> <a id="1738" class="Symbol">→</a> <a id="1740" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1746" class="Symbol">(</a><a id="1747" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a> <a id="1752" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="1754" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a><a id="1759" class="Symbol">)</a>
<a id="1761" href="Test.Examples.MultiSig.OffChain.Lib.html#1698" class="Function">getScriptUTxO</a> <a id="1775" href="Test.Examples.MultiSig.OffChain.Lib.html#1775" class="Bound">sh</a> <a id="1778" class="Symbol">(</a><a id="1779" href="Test.Examples.MultiSig.OffChain.Lib.html#1779" class="Bound">utxo</a> <a id="1784" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1786" href="Test.Examples.MultiSig.OffChain.Lib.html#1786" class="Bound">prf</a><a id="1789" class="Symbol">)</a> <a id="1791" class="Symbol">=</a> <a id="1793" href="Data.List.Base.html#8143" class="Function">head</a> <a id="1798" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1800" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="1807" class="Symbol">(λ</a> <a id="1810" class="Symbol">{</a> <a id="1812" class="Symbol">(_</a> <a id="1815" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1817" href="Test.Examples.MultiSig.OffChain.Lib.html#1817" class="Bound">addr</a> <a id="1822" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1824" class="Symbol">_)</a> <a id="1827" class="Symbol">→</a> <a id="1829" href="Test.Examples.MultiSig.OffChain.Lib.html#1505" class="Function">matchScriptAddress?</a> <a id="1849" href="Test.Examples.MultiSig.OffChain.Lib.html#1775" class="Bound">sh</a> <a id="1852" class="Symbol">(</a><a id="1853" href="Ledger.Core.Specification.Address.html#2685" class="Function">payCred</a> <a id="1861" href="Test.Examples.MultiSig.OffChain.Lib.html#1817" class="Bound">addr</a><a id="1865" class="Symbol">)})</a> <a id="1869" class="Symbol">(</a><a id="1870" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="1880" href="Test.Examples.MultiSig.OffChain.Lib.html#1779" class="Bound">utxo</a><a id="1884" class="Symbol">)</a>

<a id="matchWalletHash"></a><a id="1887" href="Test.Examples.MultiSig.OffChain.Lib.html#1887" class="Function">matchWalletHash</a> <a id="1903" class="Symbol">:</a> <a id="1905" class="Symbol">(</a><a id="1906" href="Test.Examples.MultiSig.OffChain.Lib.html#1906" class="Bound">keyHash</a> <a id="1914" class="Symbol">:</a> <a id="1916" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="1917" class="Symbol">)</a> <a id="1919" class="Symbol">→</a> <a id="1921" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a> <a id="1932" class="Symbol">→</a> <a id="1934" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1938" href="Test.Examples.MultiSig.OffChain.Lib.html#1887" class="Function">matchWalletHash</a> <a id="1954" href="Test.Examples.MultiSig.OffChain.Lib.html#1954" class="Bound">kh</a> <a id="1957" class="Symbol">(</a><a id="1958" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="1969" href="Test.Examples.MultiSig.OffChain.Lib.html#1969" class="Bound">x</a><a id="1970" class="Symbol">)</a> <a id="1972" class="Symbol">=</a> <a id="1974" href="Relation.Nullary.Decidable.Core.html#4876" class="Function">True</a> <a id="1979" class="Symbol">(</a><a id="1980" href="Test.Examples.MultiSig.OffChain.Lib.html#1954" class="Bound">kh</a> <a id="1983" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="1985" href="Test.Examples.MultiSig.OffChain.Lib.html#1969" class="Bound">x</a><a id="1986" class="Symbol">)</a>
<a id="1988" href="Test.Examples.MultiSig.OffChain.Lib.html#1887" class="Function">matchWalletHash</a> <a id="2004" href="Test.Examples.MultiSig.OffChain.Lib.html#2004" class="Bound">kh</a> <a id="2007" class="Symbol">(</a><a id="2008" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="2018" href="Test.Examples.MultiSig.OffChain.Lib.html#2018" class="Bound">y</a><a id="2019" class="Symbol">)</a> <a id="2021" class="Symbol">=</a> <a id="2023" href="Data.Empty.html#914" class="Function">⊥</a>

<a id="matchWalletHash?"></a><a id="2026" href="Test.Examples.MultiSig.OffChain.Lib.html#2026" class="Function">matchWalletHash?</a> <a id="2043" class="Symbol">:</a> <a id="2045" class="Symbol">(</a><a id="2046" href="Test.Examples.MultiSig.OffChain.Lib.html#2046" class="Bound">sh</a> <a id="2049" class="Symbol">:</a> <a id="2051" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="2052" class="Symbol">)</a> <a id="2054" class="Symbol">→</a> <a id="2056" class="Symbol">(</a><a id="2057" href="Test.Examples.MultiSig.OffChain.Lib.html#2057" class="Bound">c</a> <a id="2059" class="Symbol">:</a> <a id="2061" href="Ledger.Core.Specification.Address.html#259" class="Datatype">Credential</a><a id="2071" class="Symbol">)</a> <a id="2073" class="Symbol">→</a> <a id="2075" href="Relation.Nullary.Decidable.Core.html#1966" class="Record">Dec</a> <a id="2079" class="Symbol">(</a><a id="2080" href="Test.Examples.MultiSig.OffChain.Lib.html#1887" class="Function">matchWalletHash</a> <a id="2096" href="Test.Examples.MultiSig.OffChain.Lib.html#2046" class="Bound">sh</a> <a id="2099" href="Test.Examples.MultiSig.OffChain.Lib.html#2057" class="Bound">c</a><a id="2100" class="Symbol">)</a>
<a id="2102" href="Test.Examples.MultiSig.OffChain.Lib.html#2026" class="Function">matchWalletHash?</a> <a id="2119" href="Test.Examples.MultiSig.OffChain.Lib.html#2119" class="Bound">kh</a> <a id="2122" class="Symbol">(</a><a id="2123" href="Ledger.Core.Specification.Address.html#285" class="InductiveConstructor">KeyHashObj</a> <a id="2134" href="Test.Examples.MultiSig.OffChain.Lib.html#2134" class="Bound">x</a><a id="2135" class="Symbol">)</a> <a id="2137" class="Symbol">=</a> <a id="2139" href="Relation.Nullary.Decidable.Core.html#3225" class="Function">T?</a> <a id="2142" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌊</a> <a id="2144" class="Symbol">(</a><a id="2145" href="Test.Examples.MultiSig.OffChain.Lib.html#2119" class="Bound">kh</a> <a id="2148" href="Class.DecEq.Core.html#168" class="Field Operator">≟</a> <a id="2150" href="Test.Examples.MultiSig.OffChain.Lib.html#2134" class="Bound">x</a><a id="2151" class="Symbol">)</a> <a id="2153" href="Relation.Nullary.Decidable.Core.html#5031" class="Function Operator">⌋</a>
<a id="2155" href="Test.Examples.MultiSig.OffChain.Lib.html#2026" class="Function">matchWalletHash?</a> <a id="2172" href="Test.Examples.MultiSig.OffChain.Lib.html#2172" class="Bound">kh</a> <a id="2175" class="Symbol">(</a><a id="2176" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="2186" href="Test.Examples.MultiSig.OffChain.Lib.html#2186" class="Bound">y</a><a id="2187" class="Symbol">)</a> <a id="2189" class="Symbol">=</a> <a id="2191" href="Relation.Nullary.Decidable.Core.html#2136" class="InductiveConstructor">no</a> <a id="2194" class="Symbol">(λ</a> <a id="2197" href="Test.Examples.MultiSig.OffChain.Lib.html#2197" class="Bound">x₁</a> <a id="2200" class="Symbol">→</a> <a id="2202" href="Test.Examples.MultiSig.OffChain.Lib.html#2197" class="Bound">x₁</a><a id="2204" class="Symbol">)</a>

<a id="getWalletUTxO"></a><a id="2207" href="Test.Examples.MultiSig.OffChain.Lib.html#2207" class="Function">getWalletUTxO</a> <a id="2221" class="Symbol">:</a> <a id="2223" class="Symbol">(</a><a id="2224" href="Test.Examples.MultiSig.OffChain.Lib.html#2224" class="Bound">scriptHash</a> <a id="2235" class="Symbol">:</a> <a id="2237" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="2238" class="Symbol">)</a> <a id="2240" class="Symbol">→</a> <a id="2242" href="Ledger.Core.Specification.Transaction.html#2607" class="Function">UTxO</a> <a id="2247" class="Symbol">→</a> <a id="2249" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2254" class="Symbol">(</a><a id="2255" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a> <a id="2260" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2262" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a><a id="2267" class="Symbol">)</a>
<a id="2269" href="Test.Examples.MultiSig.OffChain.Lib.html#2207" class="Function">getWalletUTxO</a> <a id="2283" href="Test.Examples.MultiSig.OffChain.Lib.html#2283" class="Bound">sh</a> <a id="2286" class="Symbol">(</a><a id="2287" href="Test.Examples.MultiSig.OffChain.Lib.html#2287" class="Bound">utxo</a> <a id="2292" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2294" href="Test.Examples.MultiSig.OffChain.Lib.html#2294" class="Bound">prf</a><a id="2297" class="Symbol">)</a> <a id="2299" class="Symbol">=</a> <a id="2301" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="2308" class="Symbol">(λ</a> <a id="2311" class="Symbol">{</a> <a id="2313" class="Symbol">(_</a> <a id="2316" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2318" href="Test.Examples.MultiSig.OffChain.Lib.html#2318" class="Bound">addr</a> <a id="2323" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2325" class="Symbol">_)</a> <a id="2328" class="Symbol">→</a> <a id="2330" href="Test.Examples.MultiSig.OffChain.Lib.html#2026" class="Function">matchWalletHash?</a> <a id="2347" href="Test.Examples.MultiSig.OffChain.Lib.html#2283" class="Bound">sh</a> <a id="2350" class="Symbol">(</a><a id="2351" href="Ledger.Core.Specification.Address.html#2685" class="Function">payCred</a> <a id="2359" href="Test.Examples.MultiSig.OffChain.Lib.html#2318" class="Bound">addr</a><a id="2363" class="Symbol">)})</a> <a id="2367" class="Symbol">(</a><a id="2368" href="abstract-set-theory.FiniteSetTheory.html#2617" class="Function">setToList</a> <a id="2378" href="Test.Examples.MultiSig.OffChain.Lib.html#2287" class="Bound">utxo</a><a id="2382" class="Symbol">)</a>

<a id="succeedTxOut&#39;"></a><a id="2385" href="Test.Examples.MultiSig.OffChain.Lib.html#2385" class="Function">succeedTxOut&#39;</a> <a id="2399" class="Symbol">:</a> <a id="2401" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a>
<a id="2407" href="Test.Examples.MultiSig.OffChain.Lib.html#2385" class="Function">succeedTxOut&#39;</a> <a id="2421" class="Symbol">=</a> <a id="2423" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2428" class="Symbol">(</a><a id="2429" class="Keyword">record</a> <a id="2436" class="Symbol">{</a> <a id="2438" href="Ledger.Core.Specification.Address.html#1119" class="Field">net</a> <a id="2442" class="Symbol">=</a> <a id="2444" class="Number">0</a> <a id="2446" class="Symbol">;</a>
                           <a id="2475" href="Ledger.Core.Specification.Address.html#1140" class="Field">pay</a> <a id="2479" class="Symbol">=</a> <a id="2481" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="2491" class="Number">777</a> <a id="2495" class="Symbol">;</a>
                           <a id="2524" href="Ledger.Core.Specification.Address.html#1164" class="Field">stake</a> <a id="2530" class="Symbol">=</a> <a id="2532" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2537" class="Symbol">(</a><a id="2538" href="Ledger.Core.Specification.Address.html#321" class="InductiveConstructor">ScriptObj</a> <a id="2548" class="Number">777</a><a id="2551" class="Symbol">)</a> <a id="2553" class="Symbol">})</a>
                           <a id="2583" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2585" class="Number">700000000000</a> <a id="2598" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2600" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2605" class="Symbol">(</a><a id="2606" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2611" class="Symbol">(</a><a id="2612" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2617" class="Symbol">(</a><a id="2618" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2623" href="Test.Examples.MultiSig.Datum.html#195" class="InductiveConstructor">Holding</a><a id="2630" class="Symbol">)))</a> <a id="2634" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2636" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="getLabel"></a><a id="2645" href="Test.Examples.MultiSig.OffChain.Lib.html#2645" class="Function">getLabel</a> <a id="2654" class="Symbol">:</a> <a id="2656" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a> <a id="2662" class="Symbol">→</a> <a id="2664" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2670" href="Test.Examples.MultiSig.Datum.html#175" class="Datatype">Label</a>
<a id="2676" href="Test.Examples.MultiSig.OffChain.Lib.html#2645" class="Function">getLabel</a> <a id="2685" class="Symbol">(</a><a id="2686" href="Test.Examples.MultiSig.OffChain.Lib.html#2686" class="Bound">fst</a> <a id="2690" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2692" href="Test.Examples.MultiSig.OffChain.Lib.html#2692" class="Bound">fst₁</a> <a id="2697" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2699" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2704" class="Symbol">(</a><a id="2705" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2710" class="Symbol">(</a><a id="2711" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2716" class="Symbol">(</a><a id="2717" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2722" href="Test.Examples.MultiSig.OffChain.Lib.html#2722" class="Bound">x</a><a id="2723" class="Symbol">)))</a> <a id="2727" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2729" href="Test.Examples.MultiSig.OffChain.Lib.html#2729" class="Bound">snd</a><a id="2732" class="Symbol">)</a> <a id="2734" class="Symbol">=</a> <a id="2736" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2741" href="Test.Examples.MultiSig.OffChain.Lib.html#2722" class="Bound">x</a>
<a id="2743" href="Test.Examples.MultiSig.OffChain.Lib.html#2645" class="Function">getLabel</a> <a id="2752" class="Symbol">(</a><a id="2753" href="Test.Examples.MultiSig.OffChain.Lib.html#2753" class="Bound">fst</a> <a id="2757" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2759" href="Test.Examples.MultiSig.OffChain.Lib.html#2759" class="Bound">fst₁</a> <a id="2764" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2766" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2771" class="Symbol">(</a><a id="2772" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2777" class="Symbol">(</a><a id="2778" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2783" class="Symbol">(</a><a id="2784" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2789" href="Test.Examples.MultiSig.OffChain.Lib.html#2789" class="Bound">y</a><a id="2790" class="Symbol">)))</a> <a id="2794" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2796" href="Test.Examples.MultiSig.OffChain.Lib.html#2796" class="Bound">snd</a><a id="2799" class="Symbol">)</a> <a id="2801" class="Symbol">=</a> <a id="2803" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2811" href="Test.Examples.MultiSig.OffChain.Lib.html#2645" class="Function">getLabel</a> <a id="2820" class="Symbol">(</a><a id="2821" href="Test.Examples.MultiSig.OffChain.Lib.html#2821" class="Bound">fst</a> <a id="2825" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2827" href="Test.Examples.MultiSig.OffChain.Lib.html#2827" class="Bound">fst₁</a> <a id="2832" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2834" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2839" class="Symbol">(</a><a id="2840" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="2845" class="Symbol">(</a><a id="2846" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2851" href="Test.Examples.MultiSig.OffChain.Lib.html#2851" class="Bound">y</a><a id="2852" class="Symbol">))</a> <a id="2855" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2857" href="Test.Examples.MultiSig.OffChain.Lib.html#2857" class="Bound">snd</a><a id="2860" class="Symbol">)</a> <a id="2862" class="Symbol">=</a> <a id="2864" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2872" href="Test.Examples.MultiSig.OffChain.Lib.html#2645" class="Function">getLabel</a> <a id="2881" class="Symbol">(</a><a id="2882" href="Test.Examples.MultiSig.OffChain.Lib.html#2882" class="Bound">fst</a> <a id="2886" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2888" href="Test.Examples.MultiSig.OffChain.Lib.html#2888" class="Bound">fst₁</a> <a id="2893" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2895" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2900" class="Symbol">(</a><a id="2901" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="2906" href="Test.Examples.MultiSig.OffChain.Lib.html#2906" class="Bound">y</a><a id="2907" class="Symbol">)</a> <a id="2909" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2911" href="Test.Examples.MultiSig.OffChain.Lib.html#2911" class="Bound">snd</a><a id="2914" class="Symbol">)</a> <a id="2916" class="Symbol">=</a> <a id="2918" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2926" href="Test.Examples.MultiSig.OffChain.Lib.html#2645" class="Function">getLabel</a> <a id="2935" class="Symbol">(</a><a id="2936" href="Test.Examples.MultiSig.OffChain.Lib.html#2936" class="Bound">fst</a> <a id="2940" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2942" href="Test.Examples.MultiSig.OffChain.Lib.html#2942" class="Bound">fst₁</a> <a id="2947" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2949" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2957" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2959" href="Test.Examples.MultiSig.OffChain.Lib.html#2959" class="Bound">snd</a><a id="2962" class="Symbol">)</a> <a id="2964" class="Symbol">=</a> <a id="2966" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>

<a id="2975" class="Comment">-- Assumes a list of filtered waller txins and subtracts a default fee from the head of the list</a>
<a id="makeFeeTxOut"></a><a id="3072" href="Test.Examples.MultiSig.OffChain.Lib.html#3072" class="Function">makeFeeTxOut</a> <a id="3085" class="Symbol">:</a> <a id="3087" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3092" class="Symbol">(</a><a id="3093" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a> <a id="3098" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3100" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a><a id="3105" class="Symbol">)</a> <a id="3107" class="Symbol">→</a> <a id="3109" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3114" class="Symbol">(</a><a id="3115" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="3117" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3119" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a><a id="3124" class="Symbol">)</a>
<a id="3126" href="Test.Examples.MultiSig.OffChain.Lib.html#3072" class="Function">makeFeeTxOut</a> <a id="3139" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="3142" class="Symbol">=</a> <a id="3144" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
<a id="3147" href="Test.Examples.MultiSig.OffChain.Lib.html#3072" class="Function">makeFeeTxOut</a> <a id="3160" class="Symbol">((</a><a id="3162" href="Test.Examples.MultiSig.OffChain.Lib.html#3162" class="Bound">txin</a> <a id="3167" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3169" class="Symbol">(</a><a id="3170" href="Test.Examples.MultiSig.OffChain.Lib.html#3170" class="Bound">fst</a> <a id="3174" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3176" href="Test.Examples.MultiSig.OffChain.Lib.html#3176" class="Bound">txValue</a> <a id="3184" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3186" href="Test.Examples.MultiSig.OffChain.Lib.html#3186" class="Bound">snd</a><a id="3189" class="Symbol">))</a> <a id="3192" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3194" href="Test.Examples.MultiSig.OffChain.Lib.html#3194" class="Bound">utxos</a><a id="3199" class="Symbol">)</a> <a id="3201" class="Symbol">=</a> <a id="3203" class="Symbol">(</a><a id="3204" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3210" href="Test.Examples.MultiSig.OffChain.Lib.html#3162" class="Bound">txin</a> <a id="3215" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3217" href="Test.Examples.MultiSig.OffChain.Lib.html#3170" class="Bound">fst</a> <a id="3221" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3223" href="Test.Examples.MultiSig.OffChain.Lib.html#3176" class="Bound">txValue</a> <a id="3231" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="3233" class="Number">10000000000</a> <a id="3245" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3247" href="Test.Examples.MultiSig.OffChain.Lib.html#3186" class="Bound">snd</a><a id="3250" class="Symbol">)</a> <a id="3252" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3254" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

<a id="3258" class="Comment">-- return id of 0 if no txins</a>
<a id="getTxId"></a><a id="3288" href="Test.Examples.MultiSig.OffChain.Lib.html#3288" class="Function">getTxId</a> <a id="3296" class="Symbol">:</a> <a id="3298" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3303" class="Symbol">(</a><a id="3304" href="Ledger.Core.Specification.Transaction.html#2496" class="Function">TxIn</a> <a id="3309" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3311" href="Ledger.Core.Specification.Transaction.html#2529" class="Function">TxOut</a><a id="3316" class="Symbol">)</a> <a id="3318" class="Symbol">→</a> <a id="3320" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="3322" href="Test.Examples.MultiSig.OffChain.Lib.html#3288" class="Function">getTxId</a> <a id="3330" href="Test.Examples.MultiSig.OffChain.Lib.html#3330" class="Bound">xs</a> <a id="3333" class="Symbol">=</a> <a id="3335" href="Data.Maybe.Base.html#1276" class="Function">maybe</a> <a id="3341" class="Symbol">(λ</a> <a id="3344" href="Test.Examples.MultiSig.OffChain.Lib.html#3344" class="Bound">x</a> <a id="3346" class="Symbol">→</a> <a id="3348" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3354" class="Symbol">(</a><a id="3355" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3361" href="Test.Examples.MultiSig.OffChain.Lib.html#3344" class="Bound">x</a><a id="3362" class="Symbol">))</a> <a id="3365" class="Number">0</a> <a id="3367" class="Symbol">(</a><a id="3368" href="Data.List.Base.html#8143" class="Function">head</a> <a id="3373" href="Test.Examples.MultiSig.OffChain.Lib.html#3330" class="Bound">xs</a><a id="3375" class="Symbol">)</a>

</pre></body></html>