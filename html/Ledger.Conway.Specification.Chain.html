<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Chain</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>
<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>

<a id="128" class="Keyword">module</a> <a id="135" href="Ledger.Conway.Specification.Chain.html" class="Module">Ledger.Conway.Specification.Chain</a>
  <a id="171" class="Symbol">(</a><a id="172" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="176" class="Symbol">:</a> <a id="178" class="Symbol">_)</a> <a id="181" class="Symbol">(</a><a id="182" class="Keyword">open</a> <a id="187" href="Ledger.Conway.Specification.Transaction.html#1000" class="Module">TransactionStructure</a> <a id="208" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="211" class="Symbol">)</a>
  <a id="215" class="Symbol">(</a><a id="216" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a> <a id="220" class="Symbol">:</a> <a id="222" href="Ledger.Conway.Specification.Abstract.html#654" class="Record">AbstractFunctions</a> <a id="240" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="243" class="Symbol">)</a> <a id="245" class="Symbol">(</a><a id="246" class="Keyword">open</a> <a id="251" href="Ledger.Conway.Specification.Abstract.html#654" class="Module">AbstractFunctions</a> <a id="269" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a><a id="272" class="Symbol">)</a>
  <a id="276" class="Keyword">where</a>

<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="329" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a>
<a id="342" class="Keyword">open</a> <a id="347" class="Keyword">import</a> <a id="354" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="388" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a>
<a id="401" class="Keyword">open</a> <a id="406" class="Keyword">import</a> <a id="413" href="Ledger.Conway.Specification.Epoch.html" class="Module">Ledger.Conway.Specification.Epoch</a> <a id="447" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="451" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="455" class="Keyword">open</a> <a id="460" class="Keyword">import</a> <a id="467" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="499" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a>
<a id="503" class="Keyword">open</a> <a id="508" class="Keyword">import</a> <a id="515" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="550" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="554" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="558" class="Keyword">open</a> <a id="563" class="Keyword">import</a> <a id="570" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a><a id="584" class="Symbol">;</a> <a id="586" class="Keyword">open</a> <a id="591" href="Function.Bundles.html#4750" class="Module">Equivalence</a>
<a id="603" class="Keyword">open</a> <a id="608" class="Keyword">import</a> <a id="615" href="Ledger.Conway.Specification.Ratify.html" class="Module">Ledger.Conway.Specification.Ratify</a> <a id="650" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a>
<a id="654" class="Keyword">open</a> <a id="659" class="Keyword">import</a> <a id="666" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="699" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="703" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>

<a id="708" class="Keyword">open</a> <a id="713" class="Keyword">import</a> <a id="720" href="Algebra.html" class="Module">Algebra</a>
<a id="728" class="Keyword">open</a> <a id="733" class="Keyword">import</a> <a id="740" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="760" class="Keyword">using</a> <a id="766" class="Symbol">(</a><a id="767" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="777" class="Symbol">)</a>


<a id="781" class="Keyword">record</a> <a id="ChainState"></a><a id="788" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a> <a id="799" class="Symbol">:</a> <a id="801" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="806" class="Keyword">where</a>
  <a id="814" class="Keyword">field</a>
    <a id="ChainState.newEpochState"></a><a id="824" href="Ledger.Conway.Specification.Chain.html#824" class="Field">newEpochState</a>  <a id="839" class="Symbol">:</a> <a id="841" href="Ledger.Conway.Specification.Epoch.html#3014" class="Record">NewEpochState</a>

<a id="856" class="Keyword">record</a> <a id="Block"></a><a id="863" href="Ledger.Conway.Specification.Chain.html#863" class="Record">Block</a> <a id="869" class="Symbol">:</a> <a id="871" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="876" class="Keyword">where</a>
  <a id="884" class="Keyword">field</a>
    <a id="Block.ts"></a><a id="894" href="Ledger.Conway.Specification.Chain.html#894" class="Field">ts</a>    <a id="900" class="Symbol">:</a> <a id="902" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="907" href="Ledger.Conway.Specification.Transaction.html#4684" class="Record">Tx</a>
    <a id="Block.slot"></a><a id="914" href="Ledger.Conway.Specification.Chain.html#914" class="Field">slot</a>  <a id="920" class="Symbol">:</a> <a id="922" href="Ledger.Core.Specification.Epoch.html#674" class="Function">Slot</a>


<a id="929" class="Keyword">instance</a>
  <a id="HasNewEpochState-ChainState"></a><a id="940" href="Ledger.Conway.Specification.Chain.html#940" class="Function">HasNewEpochState-ChainState</a> <a id="968" class="Symbol">:</a> <a id="970" href="Ledger.Conway.Specification.Epoch.html#3185" class="Record">HasNewEpochState</a> <a id="987" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1000" href="Ledger.Conway.Specification.Chain.html#940" class="Function">HasNewEpochState-ChainState</a> <a id="1028" class="Symbol">.</a><a id="1029" href="Ledger.Conway.Specification.Epoch.html#3242" class="Field">NewEpochStateOf</a> <a id="1045" class="Symbol">=</a> <a id="1047" href="Ledger.Conway.Specification.Chain.html#824" class="Field">ChainState.newEpochState</a>

  <a id="HasLastEpoch-ChainState"></a><a id="1075" href="Ledger.Conway.Specification.Chain.html#1075" class="Function">HasLastEpoch-ChainState</a> <a id="1099" class="Symbol">:</a> <a id="1101" href="Ledger.Conway.Specification.Epoch.html#3320" class="Record">HasLastEpoch</a> <a id="1114" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1127" href="Ledger.Conway.Specification.Chain.html#1075" class="Function">HasLastEpoch-ChainState</a> <a id="1151" class="Symbol">.</a><a id="1152" href="Ledger.Conway.Specification.Epoch.html#3375" class="Field">LastEpochOf</a> <a id="1164" class="Symbol">=</a> <a id="1166" href="Ledger.Conway.Specification.Epoch.html#3375" class="Field">LastEpochOf</a> <a id="1178" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1180" href="Ledger.Conway.Specification.Epoch.html#3242" class="Field">NewEpochStateOf</a>

  <a id="HasEpochState-ChainState"></a><a id="1199" href="Ledger.Conway.Specification.Chain.html#1199" class="Function">HasEpochState-ChainState</a> <a id="1224" class="Symbol">:</a> <a id="1226" href="Ledger.Conway.Specification.Epoch.html#1909" class="Record">HasEpochState</a> <a id="1240" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1253" href="Ledger.Conway.Specification.Chain.html#1199" class="Function">HasEpochState-ChainState</a> <a id="1278" class="Symbol">.</a><a id="1279" href="Ledger.Conway.Specification.Epoch.html#1963" class="Field">EpochStateOf</a> <a id="1292" class="Symbol">=</a> <a id="1294" href="Ledger.Conway.Specification.Epoch.html#1963" class="Field">EpochStateOf</a> <a id="1307" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1309" href="Ledger.Conway.Specification.Epoch.html#3242" class="Field">NewEpochStateOf</a>

  <a id="HasEnactState-ChainState"></a><a id="1328" href="Ledger.Conway.Specification.Chain.html#1328" class="Function">HasEnactState-ChainState</a> <a id="1353" class="Symbol">:</a> <a id="1355" href="Ledger.Conway.Specification.Enact.html#737" class="Record">HasEnactState</a> <a id="1369" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1382" href="Ledger.Conway.Specification.Chain.html#1328" class="Function">HasEnactState-ChainState</a> <a id="1407" class="Symbol">.</a><a id="1408" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1421" class="Symbol">=</a> <a id="1423" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1436" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1438" href="Ledger.Conway.Specification.Epoch.html#1963" class="Field">EpochStateOf</a>

  <a id="HasLState-ChainState"></a><a id="1454" href="Ledger.Conway.Specification.Chain.html#1454" class="Function">HasLState-ChainState</a> <a id="1475" class="Symbol">:</a> <a id="1477" href="Ledger.Conway.Specification.Ledger.html#1126" class="Record">HasLState</a> <a id="1487" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1500" href="Ledger.Conway.Specification.Chain.html#1454" class="Function">HasLState-ChainState</a> <a id="1521" class="Symbol">.</a><a id="1522" href="Ledger.Conway.Specification.Ledger.html#1176" class="Field">LStateOf</a> <a id="1531" class="Symbol">=</a> <a id="1533" href="Ledger.Conway.Specification.Ledger.html#1176" class="Field">LStateOf</a> <a id="1542" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1544" href="Ledger.Conway.Specification.Epoch.html#1963" class="Field">EpochStateOf</a>

  <a id="HasUTxOState-ChainState"></a><a id="1560" href="Ledger.Conway.Specification.Chain.html#1560" class="Function">HasUTxOState-ChainState</a> <a id="1584" class="Symbol">:</a> <a id="1586" href="Ledger.Conway.Specification.Utxo.html#1396" class="Record">HasUTxOState</a> <a id="1599" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1612" href="Ledger.Conway.Specification.Chain.html#1560" class="Function">HasUTxOState-ChainState</a> <a id="1636" class="Symbol">.</a><a id="1637" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a> <a id="1649" class="Symbol">=</a> <a id="1651" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a> <a id="1663" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1665" href="Ledger.Conway.Specification.Ledger.html#1176" class="Field">LStateOf</a>

  <a id="HasCertState-ChainState"></a><a id="1677" href="Ledger.Conway.Specification.Chain.html#1677" class="Function">HasCertState-ChainState</a> <a id="1701" class="Symbol">:</a> <a id="1703" href="Ledger.Conway.Specification.Certs.html#4811" class="Record">HasCertState</a> <a id="1716" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1729" href="Ledger.Conway.Specification.Chain.html#1677" class="Function">HasCertState-ChainState</a> <a id="1753" class="Symbol">.</a><a id="1754" href="Ledger.Conway.Specification.Certs.html#4864" class="Field">CertStateOf</a> <a id="1766" class="Symbol">=</a> <a id="1768" href="Ledger.Conway.Specification.Certs.html#4864" class="Field">CertStateOf</a> <a id="1780" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1782" href="Ledger.Conway.Specification.Ledger.html#1176" class="Field">LStateOf</a>

  <a id="HasDeposits-ChainState"></a><a id="1794" href="Ledger.Conway.Specification.Chain.html#1794" class="Function">HasDeposits-ChainState</a> <a id="1817" class="Symbol">:</a> <a id="1819" href="Ledger.Conway.Specification.Certs.html#847" class="Record">HasDeposits</a> <a id="1831" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1844" href="Ledger.Conway.Specification.Chain.html#1794" class="Function">HasDeposits-ChainState</a> <a id="1867" class="Symbol">.</a><a id="1868" href="Ledger.Conway.Specification.Certs.html#899" class="Field">DepositsOf</a> <a id="1879" class="Symbol">=</a> <a id="1881" href="Ledger.Conway.Specification.Certs.html#899" class="Field">DepositsOf</a> <a id="1892" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1894" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a>

  <a id="HasRewards-ChainState"></a><a id="1909" href="Ledger.Conway.Specification.Chain.html#1909" class="Function">HasRewards-ChainState</a> <a id="1931" class="Symbol">:</a> <a id="1933" href="Ledger.Conway.Specification.Certs.html#1760" class="Record">HasRewards</a> <a id="1944" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="1957" href="Ledger.Conway.Specification.Chain.html#1909" class="Function">HasRewards-ChainState</a> <a id="1979" class="Symbol">.</a><a id="1980" href="Ledger.Conway.Specification.Certs.html#1811" class="Field">RewardsOf</a> <a id="1990" class="Symbol">=</a> <a id="1992" href="Ledger.Conway.Specification.Certs.html#1811" class="Field">RewardsOf</a> <a id="2002" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2004" href="Ledger.Conway.Specification.Certs.html#4864" class="Field">CertStateOf</a>

  <a id="HasPParams-ChainState"></a><a id="2019" href="Ledger.Conway.Specification.Chain.html#2019" class="Function">HasPParams-ChainState</a> <a id="2041" class="Symbol">:</a> <a id="2043" href="Ledger.Conway.Specification.PParams.html#3489" class="Record">HasPParams</a> <a id="2054" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a>
  <a id="2067" href="Ledger.Conway.Specification.Chain.html#2019" class="Function">HasPParams-ChainState</a> <a id="2089" class="Symbol">.</a><a id="2090" href="Ledger.Conway.Specification.PParams.html#3540" class="Field">PParamsOf</a> <a id="2100" class="Symbol">=</a> <a id="2102" href="Ledger.Conway.Specification.PParams.html#3540" class="Field">PParamsOf</a> <a id="2112" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2114" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a>

<a id="totalRefScriptsSize"></a><a id="2128" href="Ledger.Conway.Specification.Chain.html#2128" class="Function">totalRefScriptsSize</a> <a id="2148" class="Symbol">:</a> <a id="2150" href="Ledger.Conway.Specification.Ledger.html#981" class="Record">LState</a> <a id="2157" class="Symbol">→</a> <a id="2159" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2164" href="Ledger.Conway.Specification.Transaction.html#4684" class="Record">Tx</a> <a id="2167" class="Symbol">→</a> <a id="2169" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="2171" href="Ledger.Conway.Specification.Chain.html#2128" class="Function">totalRefScriptsSize</a> <a id="2191" href="Ledger.Conway.Specification.Chain.html#2191" class="Bound">lst</a> <a id="2195" href="Ledger.Conway.Specification.Chain.html#2195" class="Bound">txs</a> <a id="2199" class="Symbol">=</a> <a id="2201" href="Data.Nat.ListAction.html#612" class="Function">sum</a> <a id="2205" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2207" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2211" class="Symbol">(</a><a id="2212" href="Ledger.Conway.Specification.Utxo.html#2520" class="Function">refScriptsSize</a> <a id="2227" href="Ledger.Conway.Specification.Utxo.html#1294" class="Function">utxo</a><a id="2231" class="Symbol">)</a> <a id="2233" href="Ledger.Conway.Specification.Chain.html#2195" class="Bound">txs</a>
  <a id="2239" class="Keyword">where</a> <a id="2245" class="Keyword">open</a> <a id="2250" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">UTxOState</a> <a id="2260" class="Symbol">(</a><a id="2261" href="Ledger.Conway.Specification.Ledger.html#1040" class="Field">LState.utxoSt</a> <a id="2275" href="Ledger.Conway.Specification.Chain.html#2191" class="Bound">lst</a><a id="2278" class="Symbol">)</a>

<a id="2281" class="Keyword">private</a> <a id="2289" class="Keyword">variable</a>
  <a id="2300" href="Ledger.Conway.Specification.Chain.html#2300" class="Generalizable">ls&#39;</a> <a id="2304" class="Symbol">:</a> <a id="2306" href="Ledger.Conway.Specification.Ledger.html#981" class="Record">LState</a> 
<a id="2314" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,CHAIN⦈_"></a><a id="2323" href="Ledger.Conway.Specification.Chain.html#2323" class="Datatype Operator">_⊢_⇀⦇_,CHAIN⦈_</a> <a id="2338" class="Symbol">:</a> <a id="2340" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="2342" class="Symbol">→</a> <a id="2344" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a> <a id="2355" class="Symbol">→</a> <a id="2357" href="Ledger.Conway.Specification.Chain.html#863" class="Record">Block</a> <a id="2363" class="Symbol">→</a> <a id="2365" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a> <a id="2376" class="Symbol">→</a> <a id="2378" href="Agda.Primitive.html#388" class="Primitive">Type</a>


  <a id="2387" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,CHAIN⦈_.CHAIN"></a><a id="2397" href="Ledger.Conway.Specification.Chain.html#2397" class="InductiveConstructor">CHAIN</a> <a id="2403" class="Symbol">:</a> <a id="2405" class="Symbol">{</a><a id="2406" href="Ledger.Conway.Specification.Chain.html#2406" class="Bound">b</a> <a id="2408" class="Symbol">:</a> <a id="2410" href="Ledger.Conway.Specification.Chain.html#863" class="Record">Block</a><a id="2415" class="Symbol">}</a> <a id="2417" class="Symbol">{</a><a id="2418" href="Ledger.Conway.Specification.Chain.html#2418" class="Bound">nes</a> <a id="2422" class="Symbol">:</a> <a id="2424" href="Ledger.Conway.Specification.Epoch.html#3014" class="Record">NewEpochState</a><a id="2437" class="Symbol">}</a> <a id="2439" class="Symbol">{</a><a id="2440" href="Ledger.Conway.Specification.Chain.html#2440" class="Bound">cs</a> <a id="2443" class="Symbol">:</a> <a id="2445" href="Ledger.Conway.Specification.Chain.html#788" class="Record">ChainState</a><a id="2455" class="Symbol">}</a>


    <a id="2463" class="Symbol">→</a> <a id="2465" class="Keyword">let</a> <a id="2469" class="Keyword">open</a> <a id="2474" href="Ledger.Conway.Specification.Chain.html#788" class="Module">ChainState</a> <a id="2485" href="Ledger.Conway.Specification.Chain.html#2440" class="Bound">cs</a><a id="2487" class="Symbol">;</a> <a id="2489" class="Keyword">open</a> <a id="2494" href="Ledger.Conway.Specification.Chain.html#863" class="Module">Block</a> <a id="2500" href="Ledger.Conway.Specification.Chain.html#2406" class="Bound">b</a><a id="2501" class="Symbol">;</a> <a id="2503" class="Keyword">open</a> <a id="2508" href="Ledger.Conway.Specification.Epoch.html#3014" class="Module">NewEpochState</a> <a id="2522" href="Ledger.Conway.Specification.Chain.html#2418" class="Bound">nes</a>
          <a id="2536" class="Keyword">open</a> <a id="2541" href="Ledger.Conway.Specification.Epoch.html#1705" class="Module">EpochState</a> <a id="2552" href="Ledger.Conway.Specification.Epoch.html#3077" class="Function">epochState</a><a id="2562" class="Symbol">;</a> <a id="2564" class="Keyword">open</a> <a id="2569" href="Ledger.Conway.Specification.Enact.html#448" class="Module">EnactState</a> <a id="2580" href="Ledger.Conway.Specification.Epoch.html#1846" class="Function">es</a> <a id="2583" class="Keyword">renaming</a> <a id="2592" class="Symbol">(</a><a id="2593" href="Ledger.Conway.Specification.Enact.html#658" class="Field">pparams</a> <a id="2601" class="Symbol">to</a> <a id="2604" class="Field">pp</a><a id="2606" class="Symbol">)</a>
          <a id="2618" class="Keyword">open</a> <a id="2623" href="Ledger.Conway.Specification.PParams.html#1685" class="Module">PParams</a> <a id="2631" href="Ledger.Prelude.html#2253" class="Function Operator">∣</a> <a id="2633" href="Ledger.Conway.Specification.Chain.html#2604" class="Function">pp</a> <a id="2636" href="Ledger.Prelude.html#2253" class="Function Operator">∣</a> <a id="2638" class="Keyword">using</a> <a id="2644" class="Symbol">(</a><a id="2645" href="Ledger.Conway.Specification.PParams.html#2597" class="Field">maxRefScriptSizePerBlock</a><a id="2669" class="Symbol">)</a> <a id="2671" class="Keyword">in</a>


    <a id="2680" class="Keyword">let</a>  <a id="2685" href="Ledger.Conway.Specification.Chain.html#2685" class="Bound">cs&#39;</a>  <a id="2690" class="Symbol">=</a> <a id="2692" class="Keyword">record</a> <a id="2699" href="Ledger.Conway.Specification.Chain.html#2440" class="Bound">cs</a> <a id="2702" class="Symbol">{</a>  <a id="2705" href="Ledger.Conway.Specification.Chain.html#824" class="Field">newEpochState</a>
                             <a id="2748" class="Symbol">=</a> <a id="2750" class="Keyword">record</a> <a id="2757" href="Ledger.Conway.Specification.Chain.html#2418" class="Bound">nes</a> <a id="2761" class="Symbol">{</a>  <a id="2764" href="Ledger.Conway.Specification.Epoch.html#3077" class="Field">epochState</a>
                                             <a id="2820" class="Symbol">=</a> <a id="2822" class="Keyword">record</a> <a id="2829" href="Ledger.Conway.Specification.Epoch.html#3077" class="Function">epochState</a> <a id="2840" class="Symbol">{</a><a id="2841" href="Ledger.Conway.Specification.Epoch.html#1822" class="Field">ls</a> <a id="2844" class="Symbol">=</a> <a id="2846" href="Ledger.Conway.Specification.Chain.html#2300" class="Generalizable">ls&#39;</a><a id="2849" class="Symbol">}</a> <a id="2851" class="Symbol">}</a> <a id="2853" class="Symbol">}</a>
         <a id="2864" href="Ledger.Conway.Specification.Chain.html#2864" class="Bound">Γ</a>    <a id="2869" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Specification.Chain.html#914}{\htmlId{2873}{\htmlClass{Function}{\text{slot}}}}\, \\ \,\href{Ledger.Prelude.html#2253}{\htmlId{2880}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Enact.html#553}{\htmlId{2882}{\htmlClass{Function}{\text{constitution}}}}\, \,\href{Ledger.Prelude.html#2253}{\htmlId{2895}{\htmlClass{Function Operator}{\text{∣}}}}\, \\ \,\href{Ledger.Prelude.html#2253}{\htmlId{2899}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Chain.html#2604}{\htmlId{2901}{\htmlClass{Function}{\text{pp}}}}\, \,\href{Ledger.Prelude.html#2253}{\htmlId{2904}{\htmlClass{Function Operator}{\text{∣}}}}\, \\ \,\href{Ledger.Conway.Specification.Epoch.html#1846}{\htmlId{2908}{\htmlClass{Function}{\text{es}}}}\, \\ \,\href{Ledger.Prelude.Base.html#889}{\htmlId{2913}{\htmlClass{Field}{\text{TreasuryOf}}}}\, \,\href{Ledger.Conway.Specification.Chain.html#2418}{\htmlId{2924}{\htmlClass{Bound}{\text{nes}}}}\, \end{pmatrix}$</a>
    <a id="2934" class="Keyword">in</a>
    <a id="2941" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="2943" href="Ledger.Conway.Specification.Chain.html#2128" class="Function">totalRefScriptsSize</a> <a id="2963" href="Ledger.Conway.Specification.Epoch.html#1822" class="Function">ls</a> <a id="2966" href="Ledger.Conway.Specification.Chain.html#894" class="Function">ts</a> <a id="2969" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="2971" href="Ledger.Conway.Specification.PParams.html#2597" class="Function">maxRefScriptSizePerBlock</a>
    <a id="3000" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3002" class="Symbol">_</a> <a id="3004" href="Ledger.Conway.Specification.Epoch.html#15935" class="Datatype Operator">⊢</a> <a id="3006" href="Ledger.Conway.Specification.Chain.html#824" class="Field">newEpochState</a> <a id="3020" href="Ledger.Conway.Specification.Epoch.html#15935" class="Datatype Operator">⇀⦇</a> <a id="3023" href="Ledger.Core.Specification.Epoch.html#810" class="Function">epoch</a> <a id="3029" href="Ledger.Conway.Specification.Chain.html#914" class="Function">slot</a> <a id="3034" href="Ledger.Conway.Specification.Epoch.html#15935" class="Datatype Operator">,NEWEPOCH⦈</a> <a id="3045" href="Ledger.Conway.Specification.Chain.html#2418" class="Bound">nes</a>
    <a id="3053" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3055" href="Ledger.Conway.Specification.Chain.html#2864" class="Bound">Γ</a> <a id="3057" href="Ledger.Conway.Specification.Ledger.html#4560" class="Function Operator">⊢</a> <a id="3059" href="Ledger.Conway.Specification.Epoch.html#1822" class="Function">ls</a> <a id="3062" href="Ledger.Conway.Specification.Ledger.html#4560" class="Function Operator">⇀⦇</a> <a id="3065" href="Ledger.Conway.Specification.Chain.html#894" class="Function">ts</a> <a id="3068" href="Ledger.Conway.Specification.Ledger.html#4560" class="Function Operator">,LEDGERS⦈</a> <a id="3078" href="Ledger.Conway.Specification.Chain.html#2300" class="Generalizable">ls&#39;</a>
      <a id="3088" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="3127" class="Symbol">_</a> <a id="3129" href="Ledger.Conway.Specification.Chain.html#2323" class="Datatype Operator">⊢</a> <a id="3131" href="Ledger.Conway.Specification.Chain.html#2440" class="Bound">cs</a> <a id="3134" href="Ledger.Conway.Specification.Chain.html#2323" class="Datatype Operator">⇀⦇</a> <a id="3137" href="Ledger.Conway.Specification.Chain.html#2406" class="Bound">b</a> <a id="3139" href="Ledger.Conway.Specification.Chain.html#2323" class="Datatype Operator">,CHAIN⦈</a> <a id="3147" href="Ledger.Conway.Specification.Chain.html#2685" class="Bound">cs&#39;</a>

</pre></body></html>