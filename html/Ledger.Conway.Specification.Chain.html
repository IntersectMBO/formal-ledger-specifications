<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Chain</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>
<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>

<a id="128" class="Keyword">module</a> <a id="135" href="Ledger.Conway.Specification.Chain.html" class="Module">Ledger.Conway.Specification.Chain</a>
  <a id="171" class="Symbol">(</a><a id="172" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="176" class="Symbol">:</a> <a id="178" class="Symbol">_)</a> <a id="181" class="Symbol">(</a><a id="182" class="Keyword">open</a> <a id="187" href="Ledger.Conway.Specification.Transaction.html#999" class="Module">TransactionStructure</a> <a id="208" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="211" class="Symbol">)</a>
  <a id="215" class="Symbol">(</a><a id="216" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a> <a id="220" class="Symbol">:</a> <a id="222" href="Ledger.Conway.Specification.Abstract.html#654" class="Record">AbstractFunctions</a> <a id="240" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="243" class="Symbol">)</a> <a id="245" class="Symbol">(</a><a id="246" class="Keyword">open</a> <a id="251" href="Ledger.Conway.Specification.Abstract.html#654" class="Module">AbstractFunctions</a> <a id="269" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a><a id="272" class="Symbol">)</a>
  <a id="276" class="Keyword">where</a>

<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Ledger.Conway.Specification.BlockBody.html" class="Module">Ledger.Conway.Specification.BlockBody</a> <a id="333" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="337" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a> <a id="341" class="Keyword">public</a>
<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="394" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>
<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="453" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Ledger.Conway.Specification.Epoch.html" class="Module">Ledger.Conway.Specification.Epoch</a> <a id="512" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="516" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="520" class="Keyword">open</a> <a id="525" class="Keyword">import</a> <a id="532" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="564" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a>
<a id="568" class="Keyword">open</a> <a id="573" class="Keyword">import</a> <a id="580" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="615" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="619" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="623" class="Keyword">open</a> <a id="628" class="Keyword">import</a> <a id="635" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a><a id="649" class="Symbol">;</a> <a id="651" class="Keyword">open</a> <a id="656" href="Function.Bundles.html#4750" class="Module">Equivalence</a>
<a id="668" class="Keyword">open</a> <a id="673" class="Keyword">import</a> <a id="680" href="Ledger.Conway.Specification.Ratify.html" class="Module">Ledger.Conway.Specification.Ratify</a> <a id="715" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a>
<a id="719" class="Keyword">open</a> <a id="724" class="Keyword">import</a> <a id="731" href="Ledger.Conway.Specification.RewardUpdate.html" class="Module">Ledger.Conway.Specification.RewardUpdate</a> <a id="772" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="776" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="780" class="Keyword">open</a> <a id="785" class="Keyword">import</a> <a id="792" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="825" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="829" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>

<a id="834" class="Keyword">open</a> <a id="839" class="Keyword">import</a> <a id="846" href="Algebra.html" class="Module">Algebra</a>
<a id="854" class="Keyword">open</a> <a id="859" class="Keyword">import</a> <a id="866" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="886" class="Keyword">using</a> <a id="892" class="Symbol">(</a><a id="893" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="903" class="Symbol">)</a>


<a id="907" class="Keyword">record</a> <a id="ChainState"></a><a id="914" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a> <a id="925" class="Symbol">:</a> <a id="927" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="932" class="Keyword">where</a>
  <a id="940" class="Keyword">field</a>
    <a id="ChainState.newEpochState"></a><a id="950" href="Ledger.Conway.Specification.Chain.html#950" class="Field">newEpochState</a>  <a id="965" class="Symbol">:</a> <a id="967" href="Ledger.Conway.Specification.Epoch.html#3119" class="Record">NewEpochState</a>



<a id="984" class="Keyword">instance</a>
  <a id="HasNewEpochState-ChainState"></a><a id="995" href="Ledger.Conway.Specification.Chain.html#995" class="Function">HasNewEpochState-ChainState</a> <a id="1023" class="Symbol">:</a> <a id="1025" href="Ledger.Conway.Specification.Epoch.html#3348" class="Record">HasNewEpochState</a> <a id="1042" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1055" href="Ledger.Conway.Specification.Chain.html#995" class="Function">HasNewEpochState-ChainState</a> <a id="1083" class="Symbol">.</a><a id="1084" href="Ledger.Conway.Specification.Epoch.html#3405" class="Field">NewEpochStateOf</a> <a id="1100" class="Symbol">=</a> <a id="1102" href="Ledger.Conway.Specification.Chain.html#950" class="Field">ChainState.newEpochState</a>

  <a id="HasLastEpoch-ChainState"></a><a id="1130" href="Ledger.Conway.Specification.Chain.html#1130" class="Function">HasLastEpoch-ChainState</a> <a id="1154" class="Symbol">:</a> <a id="1156" href="Ledger.Conway.Specification.Epoch.html#3483" class="Record">HasLastEpoch</a> <a id="1169" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1182" href="Ledger.Conway.Specification.Chain.html#1130" class="Function">HasLastEpoch-ChainState</a> <a id="1206" class="Symbol">.</a><a id="1207" href="Ledger.Conway.Specification.Epoch.html#3538" class="Field">LastEpochOf</a> <a id="1219" class="Symbol">=</a> <a id="1221" href="Ledger.Conway.Specification.Epoch.html#3538" class="Field">LastEpochOf</a> <a id="1233" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1235" href="Ledger.Conway.Specification.Epoch.html#3405" class="Field">NewEpochStateOf</a>

  <a id="HasEpochState-ChainState"></a><a id="1254" href="Ledger.Conway.Specification.Chain.html#1254" class="Function">HasEpochState-ChainState</a> <a id="1279" class="Symbol">:</a> <a id="1281" href="Ledger.Conway.Specification.Epoch.html#1906" class="Record">HasEpochState</a> <a id="1295" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1308" href="Ledger.Conway.Specification.Chain.html#1254" class="Function">HasEpochState-ChainState</a> <a id="1333" class="Symbol">.</a><a id="1334" href="Ledger.Conway.Specification.Epoch.html#1960" class="Field">EpochStateOf</a> <a id="1347" class="Symbol">=</a> <a id="1349" href="Ledger.Conway.Specification.Epoch.html#1960" class="Field">EpochStateOf</a> <a id="1362" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1364" href="Ledger.Conway.Specification.Epoch.html#3405" class="Field">NewEpochStateOf</a>

  <a id="HasEnactState-ChainState"></a><a id="1383" href="Ledger.Conway.Specification.Chain.html#1383" class="Function">HasEnactState-ChainState</a> <a id="1408" class="Symbol">:</a> <a id="1410" href="Ledger.Conway.Specification.Enact.html#737" class="Record">HasEnactState</a> <a id="1424" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1437" href="Ledger.Conway.Specification.Chain.html#1383" class="Function">HasEnactState-ChainState</a> <a id="1462" class="Symbol">.</a><a id="1463" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1476" class="Symbol">=</a> <a id="1478" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1491" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1493" href="Ledger.Conway.Specification.Epoch.html#1960" class="Field">EpochStateOf</a>

  <a id="HasLState-ChainState"></a><a id="1509" href="Ledger.Conway.Specification.Chain.html#1509" class="Function">HasLState-ChainState</a> <a id="1530" class="Symbol">:</a> <a id="1532" href="Ledger.Conway.Specification.Ledger.html#1123" class="Record">HasLState</a> <a id="1542" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1555" href="Ledger.Conway.Specification.Chain.html#1509" class="Function">HasLState-ChainState</a> <a id="1576" class="Symbol">.</a><a id="1577" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a> <a id="1586" class="Symbol">=</a> <a id="1588" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a> <a id="1597" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1599" href="Ledger.Conway.Specification.Epoch.html#1960" class="Field">EpochStateOf</a>

  <a id="HasUTxOState-ChainState"></a><a id="1615" href="Ledger.Conway.Specification.Chain.html#1615" class="Function">HasUTxOState-ChainState</a> <a id="1639" class="Symbol">:</a> <a id="1641" href="Ledger.Conway.Specification.Utxo.html#1396" class="Record">HasUTxOState</a> <a id="1654" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1667" href="Ledger.Conway.Specification.Chain.html#1615" class="Function">HasUTxOState-ChainState</a> <a id="1691" class="Symbol">.</a><a id="1692" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a> <a id="1704" class="Symbol">=</a> <a id="1706" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a> <a id="1718" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1720" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a>

  <a id="HasCertState-ChainState"></a><a id="1732" href="Ledger.Conway.Specification.Chain.html#1732" class="Function">HasCertState-ChainState</a> <a id="1756" class="Symbol">:</a> <a id="1758" href="Ledger.Conway.Specification.Certs.html#4829" class="Record">HasCertState</a> <a id="1771" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1784" href="Ledger.Conway.Specification.Chain.html#1732" class="Function">HasCertState-ChainState</a> <a id="1808" class="Symbol">.</a><a id="1809" href="Ledger.Conway.Specification.Certs.html#4882" class="Field">CertStateOf</a> <a id="1821" class="Symbol">=</a> <a id="1823" href="Ledger.Conway.Specification.Certs.html#4882" class="Field">CertStateOf</a> <a id="1835" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1837" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a>

  <a id="HasDeposits-ChainState"></a><a id="1849" href="Ledger.Conway.Specification.Chain.html#1849" class="Function">HasDeposits-ChainState</a> <a id="1872" class="Symbol">:</a> <a id="1874" href="Ledger.Conway.Specification.Certs.html#847" class="Record">HasDeposits</a> <a id="1886" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1899" href="Ledger.Conway.Specification.Chain.html#1849" class="Function">HasDeposits-ChainState</a> <a id="1922" class="Symbol">.</a><a id="1923" href="Ledger.Conway.Specification.Certs.html#899" class="Field">DepositsOf</a> <a id="1934" class="Symbol">=</a> <a id="1936" href="Ledger.Conway.Specification.Certs.html#899" class="Field">DepositsOf</a> <a id="1947" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1949" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a>

  <a id="HasRewards-ChainState"></a><a id="1964" href="Ledger.Conway.Specification.Chain.html#1964" class="Function">HasRewards-ChainState</a> <a id="1986" class="Symbol">:</a> <a id="1988" href="Ledger.Conway.Specification.Certs.html#1777" class="Record">HasRewards</a> <a id="1999" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="2012" href="Ledger.Conway.Specification.Chain.html#1964" class="Function">HasRewards-ChainState</a> <a id="2034" class="Symbol">.</a><a id="2035" href="Ledger.Conway.Specification.Certs.html#1828" class="Field">RewardsOf</a> <a id="2045" class="Symbol">=</a> <a id="2047" href="Ledger.Conway.Specification.Certs.html#1828" class="Field">RewardsOf</a> <a id="2057" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2059" href="Ledger.Conway.Specification.Certs.html#4882" class="Field">CertStateOf</a>

  <a id="HasPParams-ChainState"></a><a id="2074" href="Ledger.Conway.Specification.Chain.html#2074" class="Function">HasPParams-ChainState</a> <a id="2096" class="Symbol">:</a> <a id="2098" href="Ledger.Conway.Specification.PParams.html#3489" class="Record">HasPParams</a> <a id="2109" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="2122" href="Ledger.Conway.Specification.Chain.html#2074" class="Function">HasPParams-ChainState</a> <a id="2144" class="Symbol">.</a><a id="2145" href="Ledger.Conway.Specification.PParams.html#3540" class="Field">PParamsOf</a> <a id="2155" class="Symbol">=</a> <a id="2157" href="Ledger.Conway.Specification.PParams.html#3540" class="Field">PParamsOf</a> <a id="2167" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2169" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a>

<a id="totalRefScriptsSize"></a><a id="2183" href="Ledger.Conway.Specification.Chain.html#2183" class="Function">totalRefScriptsSize</a> <a id="2203" class="Symbol">:</a> <a id="2205" href="Ledger.Conway.Specification.Ledger.html#979" class="Record">LState</a> <a id="2212" class="Symbol">→</a> <a id="2214" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2219" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="2222" class="Symbol">→</a> <a id="2224" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="2226" href="Ledger.Conway.Specification.Chain.html#2183" class="Function">totalRefScriptsSize</a> <a id="2246" href="Ledger.Conway.Specification.Chain.html#2246" class="Bound">lst</a> <a id="2250" href="Ledger.Conway.Specification.Chain.html#2250" class="Bound">txs</a> <a id="2254" class="Symbol">=</a> <a id="2256" href="Data.Nat.ListAction.html#612" class="Function">sum</a> <a id="2260" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2262" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2266" class="Symbol">(</a><a id="2267" href="Ledger.Conway.Specification.Utxo.html#2520" class="Function">refScriptsSize</a> <a id="2282" href="Ledger.Conway.Specification.Utxo.html#1294" class="Function">utxo</a><a id="2286" class="Symbol">)</a> <a id="2288" href="Ledger.Conway.Specification.Chain.html#2250" class="Bound">txs</a>
  <a id="2294" class="Keyword">where</a> <a id="2300" class="Keyword">open</a> <a id="2305" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">UTxOState</a> <a id="2315" class="Symbol">(</a><a id="2316" href="Ledger.Conway.Specification.Ledger.html#1038" class="Field">LState.utxoSt</a> <a id="2330" href="Ledger.Conway.Specification.Chain.html#2246" class="Bound">lst</a><a id="2333" class="Symbol">)</a>

<a id="2336" class="Keyword">private</a> <a id="2344" class="Keyword">variable</a>
  <a id="2355" href="Ledger.Conway.Specification.Chain.html#2355" class="Generalizable">ls&#39;</a> <a id="2359" class="Symbol">:</a> <a id="2361" href="Ledger.Conway.Specification.Ledger.html#979" class="Record">LState</a> 
<a id="2369" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,CHAIN⦈_"></a><a id="2378" href="Ledger.Conway.Specification.Chain.html#2378" class="Datatype Operator">_⊢_⇀⦇_,CHAIN⦈_</a> <a id="2393" class="Symbol">:</a> <a id="2395" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="2397" class="Symbol">→</a> <a id="2399" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a> <a id="2410" class="Symbol">→</a> <a id="2412" href="Ledger.Conway.Specification.BlockBody.html#695" class="Record">Block</a> <a id="2418" class="Symbol">→</a> <a id="2420" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a> <a id="2431" class="Symbol">→</a> <a id="2433" href="Agda.Primitive.html#388" class="Primitive">Type</a>


  <a id="2442" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,CHAIN⦈_.CHAIN"></a><a id="2452" href="Ledger.Conway.Specification.Chain.html#2452" class="InductiveConstructor">CHAIN</a> <a id="2458" class="Symbol">:</a> <a id="2460" class="Symbol">∀</a> <a id="2462" class="Symbol">{</a><a id="2463" href="Ledger.Conway.Specification.Chain.html#2463" class="Bound">bcur&#39;</a><a id="2468" class="Symbol">}</a> <a id="2470" class="Symbol">{</a><a id="2471" href="Ledger.Conway.Specification.Chain.html#2471" class="Bound">b</a> <a id="2473" class="Symbol">:</a> <a id="2475" href="Ledger.Conway.Specification.BlockBody.html#695" class="Record">Block</a><a id="2480" class="Symbol">}</a> <a id="2482" class="Symbol">{</a><a id="2483" href="Ledger.Conway.Specification.Chain.html#2483" class="Bound">nes</a> <a id="2487" class="Symbol">:</a> <a id="2489" href="Ledger.Conway.Specification.Epoch.html#3119" class="Record">NewEpochState</a><a id="2502" class="Symbol">}</a> <a id="2504" class="Symbol">{</a><a id="2505" href="Ledger.Conway.Specification.Chain.html#2505" class="Bound">cs</a> <a id="2508" class="Symbol">:</a> <a id="2510" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a><a id="2520" class="Symbol">}</a>


    <a id="2528" class="Symbol">→</a> <a id="2530" class="Keyword">let</a> <a id="2534" class="Keyword">open</a> <a id="2539" href="Ledger.Conway.Specification.Chain.html#914" class="Module">ChainState</a> <a id="2550" href="Ledger.Conway.Specification.Chain.html#2505" class="Bound">cs</a><a id="2552" class="Symbol">;</a> <a id="2554" class="Keyword">open</a> <a id="2559" href="Ledger.Conway.Specification.BlockBody.html#695" class="Module">Block</a> <a id="2565" href="Ledger.Conway.Specification.Chain.html#2471" class="Bound">b</a><a id="2566" class="Symbol">;</a> <a id="2568" class="Keyword">open</a> <a id="2573" href="Ledger.Conway.Specification.BlockBody.html#621" class="Module">BHeader</a> <a id="2581" href="Ledger.Conway.Specification.BlockBody.html#726" class="Function">bheader</a>
          <a id="2599" class="Keyword">open</a> <a id="2604" href="Ledger.Conway.Specification.BlockBody.html#493" class="Module">BHBody</a> <a id="2611" href="Ledger.Conway.Specification.BlockBody.html#654" class="Function">bhbody</a><a id="2617" class="Symbol">;</a> <a id="2619" class="Keyword">open</a> <a id="2624" href="Ledger.Conway.Specification.Epoch.html#3119" class="Module">NewEpochState</a> <a id="2638" href="Ledger.Conway.Specification.Chain.html#2483" class="Bound">nes</a>
          <a id="2652" class="Keyword">open</a> <a id="2657" href="Ledger.Conway.Specification.Epoch.html#1703" class="Module">EpochState</a> <a id="2668" href="Ledger.Conway.Specification.Epoch.html#3240" class="Function">epochState</a><a id="2678" class="Symbol">;</a> <a id="2680" class="Keyword">open</a> <a id="2685" href="Ledger.Conway.Specification.Enact.html#448" class="Module">EnactState</a> <a id="2696" href="Ledger.Conway.Specification.Epoch.html#1844" class="Function">es</a> <a id="2699" class="Keyword">renaming</a> <a id="2708" class="Symbol">(</a><a id="2709" href="Ledger.Conway.Specification.Enact.html#658" class="Field">pparams</a> <a id="2717" class="Symbol">to</a> <a id="2720" class="Field">pp</a><a id="2722" class="Symbol">)</a>
          <a id="2734" class="Keyword">open</a> <a id="2739" href="Ledger.Conway.Specification.PParams.html#1685" class="Module">PParams</a> <a id="2747" href="Ledger.Prelude.html#2253" class="Function Operator">∣</a> <a id="2749" href="Ledger.Conway.Specification.Chain.html#2720" class="Function">pp</a> <a id="2752" href="Ledger.Prelude.html#2253" class="Function Operator">∣</a> <a id="2754" class="Keyword">using</a> <a id="2760" class="Symbol">(</a><a id="2761" href="Ledger.Conway.Specification.PParams.html#2597" class="Field">maxRefScriptSizePerBlock</a><a id="2785" class="Symbol">)</a> <a id="2787" class="Keyword">in</a>


    <a id="2796" class="Keyword">let</a>  <a id="2801" href="Ledger.Conway.Specification.Chain.html#2801" class="Bound">cs&#39;</a>  <a id="2806" class="Symbol">=</a> <a id="2808" class="Keyword">record</a> <a id="2815" href="Ledger.Conway.Specification.Chain.html#2505" class="Bound">cs</a> <a id="2818" class="Symbol">{</a>  <a id="2821" href="Ledger.Conway.Specification.Chain.html#950" class="Field">newEpochState</a>
                             <a id="2864" class="Symbol">=</a> <a id="2866" class="Keyword">record</a> <a id="2873" href="Ledger.Conway.Specification.Chain.html#2483" class="Bound">nes</a> <a id="2877" class="Symbol">{</a>  <a id="2880" href="Ledger.Conway.Specification.Epoch.html#3211" class="Field">bcur</a> <a id="2885" class="Symbol">=</a> <a id="2887" href="Ledger.Conway.Specification.Chain.html#2463" class="Bound">bcur&#39;</a><a id="2892" class="Symbol">;</a>
                                             <a id="2939" href="Ledger.Conway.Specification.Epoch.html#3240" class="Field">epochState</a>
                                             <a id="2995" class="Symbol">=</a> <a id="2997" class="Keyword">record</a> <a id="3004" href="Ledger.Conway.Specification.Epoch.html#3240" class="Function">epochState</a> <a id="3015" class="Symbol">{</a><a id="3016" href="Ledger.Conway.Specification.Epoch.html#1820" class="Field">ls</a> <a id="3019" class="Symbol">=</a> <a id="3021" href="Ledger.Conway.Specification.Chain.html#2355" class="Generalizable">ls&#39;</a><a id="3024" class="Symbol">}</a> <a id="3026" class="Symbol">}</a> <a id="3028" class="Symbol">}</a>
    <a id="3034" class="Keyword">in</a>
    <a id="3041" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="3043" href="Ledger.Conway.Specification.Chain.html#2183" class="Function">totalRefScriptsSize</a> <a id="3063" href="Ledger.Conway.Specification.Epoch.html#1820" class="Function">ls</a> <a id="3066" href="Ledger.Conway.Specification.BlockBody.html#752" class="Function">ts</a> <a id="3069" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="3071" href="Ledger.Conway.Specification.PParams.html#2597" class="Function">maxRefScriptSizePerBlock</a>
    <a id="3100" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3102" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="3105" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">⊢</a> <a id="3107" href="Ledger.Conway.Specification.Chain.html#950" class="Field">newEpochState</a> <a id="3121" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">⇀⦇</a> <a id="3124" href="Ledger.Conway.Specification.BlockBody.html#560" class="Function">slot</a> <a id="3129" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">,TICK⦈</a> <a id="3136" href="Ledger.Conway.Specification.Chain.html#2483" class="Bound">nes</a>
    <a id="3144" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3146" class="Symbol">(</a><a id="3147" href="Ledger.Conway.Specification.Epoch.html#1844" class="Function">es</a> <a id="3150" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3152" href="Ledger.Conway.Specification.Epoch.html#1771" class="Function">acnt</a><a id="3156" class="Symbol">)</a> <a id="3158" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">⊢</a> <a id="3160" class="Symbol">(</a><a id="3161" href="Ledger.Conway.Specification.Epoch.html#1820" class="Function">ls</a> <a id="3164" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3166" href="Ledger.Conway.Specification.Epoch.html#3211" class="Function">bcur</a><a id="3170" class="Symbol">)</a> <a id="3172" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">⇀⦇</a> <a id="3175" href="Ledger.Conway.Specification.Chain.html#2471" class="Bound">b</a> <a id="3177" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">,BBODY⦈</a> <a id="3185" class="Symbol">(</a><a id="3186" href="Ledger.Conway.Specification.Chain.html#2355" class="Generalizable">ls&#39;</a> <a id="3190" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3192" href="Ledger.Conway.Specification.Chain.html#2463" class="Bound">bcur&#39;</a><a id="3197" class="Symbol">)</a>
      <a id="3205" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="3244" class="Symbol">_</a> <a id="3246" href="Ledger.Conway.Specification.Chain.html#2378" class="Datatype Operator">⊢</a> <a id="3248" href="Ledger.Conway.Specification.Chain.html#2505" class="Bound">cs</a> <a id="3251" href="Ledger.Conway.Specification.Chain.html#2378" class="Datatype Operator">⇀⦇</a> <a id="3254" href="Ledger.Conway.Specification.Chain.html#2471" class="Bound">b</a> <a id="3256" href="Ledger.Conway.Specification.Chain.html#2378" class="Datatype Operator">,CHAIN⦈</a> <a id="3264" href="Ledger.Conway.Specification.Chain.html#2801" class="Bound">cs&#39;</a>

</pre></body></html>