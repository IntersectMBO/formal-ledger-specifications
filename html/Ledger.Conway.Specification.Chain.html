<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Chain</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>
<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>

<a id="128" class="Keyword">module</a> <a id="135" href="Ledger.Conway.Specification.Chain.html" class="Module">Ledger.Conway.Specification.Chain</a>
  <a id="171" class="Symbol">(</a><a id="172" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="176" class="Symbol">:</a> <a id="178" class="Symbol">_)</a> <a id="181" class="Symbol">(</a><a id="182" class="Keyword">open</a> <a id="187" href="Ledger.Conway.Specification.Transaction.html#999" class="Module">TransactionStructure</a> <a id="208" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="211" class="Symbol">)</a>
  <a id="215" class="Symbol">(</a><a id="216" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a> <a id="220" class="Symbol">:</a> <a id="222" href="Ledger.Conway.Specification.Abstract.html#875" class="Record">AbstractFunctions</a> <a id="240" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="243" class="Symbol">)</a> <a id="245" class="Symbol">(</a><a id="246" class="Keyword">open</a> <a id="251" href="Ledger.Conway.Specification.Abstract.html#875" class="Module">AbstractFunctions</a> <a id="269" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a><a id="272" class="Symbol">)</a>
  <a id="276" class="Keyword">where</a>

<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Ledger.Conway.Specification.BlockBody.html" class="Module">Ledger.Conway.Specification.BlockBody</a> <a id="333" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="337" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a> <a id="341" class="Keyword">public</a>
<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="394" href="Ledger.Conway.Specification.Transaction.html#2275" class="Function">govStructure</a>
<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="453" href="Ledger.Conway.Specification.Transaction.html#2275" class="Function">govStructure</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Ledger.Conway.Specification.Epoch.html" class="Module">Ledger.Conway.Specification.Epoch</a> <a id="512" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="516" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="520" class="Keyword">open</a> <a id="525" class="Keyword">import</a> <a id="532" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="564" href="Ledger.Conway.Specification.Transaction.html#2275" class="Function">govStructure</a>
<a id="577" class="Keyword">open</a> <a id="582" class="Keyword">import</a> <a id="589" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="624" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="628" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="632" class="Keyword">open</a> <a id="637" class="Keyword">import</a> <a id="644" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a><a id="658" class="Symbol">;</a> <a id="660" class="Keyword">open</a> <a id="665" href="Function.Bundles.html#4750" class="Module">Equivalence</a>
<a id="677" class="Keyword">open</a> <a id="682" class="Keyword">import</a> <a id="689" href="Ledger.Conway.Specification.Ratify.html" class="Module">Ledger.Conway.Specification.Ratify</a> <a id="724" href="Ledger.Conway.Specification.Transaction.html#2275" class="Function">govStructure</a>
<a id="737" class="Keyword">open</a> <a id="742" class="Keyword">import</a> <a id="749" href="Ledger.Conway.Specification.RewardUpdate.html" class="Module">Ledger.Conway.Specification.RewardUpdate</a> <a id="790" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="794" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="798" class="Keyword">open</a> <a id="803" class="Keyword">import</a> <a id="810" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="843" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="847" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>

<a id="852" class="Keyword">open</a> <a id="857" class="Keyword">import</a> <a id="864" href="Algebra.html" class="Module">Algebra</a>
<a id="872" class="Keyword">open</a> <a id="877" class="Keyword">import</a> <a id="884" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="904" class="Keyword">using</a> <a id="910" class="Symbol">(</a><a id="911" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="921" class="Symbol">)</a>


<a id="925" class="Keyword">record</a> <a id="ChainState"></a><a id="932" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a> <a id="943" class="Symbol">:</a> <a id="945" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="950" class="Keyword">where</a>
  <a id="958" class="Keyword">field</a>
    <a id="ChainState.newEpochState"></a><a id="968" href="Ledger.Conway.Specification.Chain.html#968" class="Field">newEpochState</a>  <a id="983" class="Symbol">:</a> <a id="985" href="Ledger.Conway.Specification.Epoch.html#3606" class="Record">NewEpochState</a>


<a id="1001" class="Keyword">instance</a>
  <a id="HasNewEpochState-ChainState"></a><a id="1012" href="Ledger.Conway.Specification.Chain.html#1012" class="Function">HasNewEpochState-ChainState</a> <a id="1040" class="Symbol">:</a> <a id="1042" href="Ledger.Conway.Specification.Epoch.html#3835" class="Record">HasNewEpochState</a> <a id="1059" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1072" href="Ledger.Conway.Specification.Chain.html#1012" class="Function">HasNewEpochState-ChainState</a> <a id="1100" class="Symbol">.</a><a id="1101" href="Ledger.Conway.Specification.Epoch.html#3892" class="Field">NewEpochStateOf</a> <a id="1117" class="Symbol">=</a> <a id="1119" href="Ledger.Conway.Specification.Chain.html#968" class="Field">ChainState.newEpochState</a>

  <a id="HasLastEpoch-ChainState"></a><a id="1147" href="Ledger.Conway.Specification.Chain.html#1147" class="Function">HasLastEpoch-ChainState</a> <a id="1171" class="Symbol">:</a> <a id="1173" href="Ledger.Conway.Specification.Epoch.html#3970" class="Record">HasLastEpoch</a> <a id="1186" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1199" href="Ledger.Conway.Specification.Chain.html#1147" class="Function">HasLastEpoch-ChainState</a> <a id="1223" class="Symbol">.</a><a id="1224" href="Ledger.Conway.Specification.Epoch.html#4025" class="Field">LastEpochOf</a> <a id="1236" class="Symbol">=</a> <a id="1238" href="Ledger.Conway.Specification.Epoch.html#4025" class="Field">LastEpochOf</a> <a id="1250" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1252" href="Ledger.Conway.Specification.Epoch.html#3892" class="Field">NewEpochStateOf</a>

  <a id="HasEpochState-ChainState"></a><a id="1271" href="Ledger.Conway.Specification.Chain.html#1271" class="Function">HasEpochState-ChainState</a> <a id="1296" class="Symbol">:</a> <a id="1298" href="Ledger.Conway.Specification.Epoch.html#2058" class="Record">HasEpochState</a> <a id="1312" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1325" href="Ledger.Conway.Specification.Chain.html#1271" class="Function">HasEpochState-ChainState</a> <a id="1350" class="Symbol">.</a><a id="1351" href="Ledger.Conway.Specification.Epoch.html#2112" class="Field">EpochStateOf</a> <a id="1364" class="Symbol">=</a> <a id="1366" href="Ledger.Conway.Specification.Epoch.html#2112" class="Field">EpochStateOf</a> <a id="1379" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1381" href="Ledger.Conway.Specification.Epoch.html#3892" class="Field">NewEpochStateOf</a>

  <a id="HasEnactState-ChainState"></a><a id="1400" href="Ledger.Conway.Specification.Chain.html#1400" class="Function">HasEnactState-ChainState</a> <a id="1425" class="Symbol">:</a> <a id="1427" href="Ledger.Conway.Specification.Enact.html#737" class="Record">HasEnactState</a> <a id="1441" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1454" href="Ledger.Conway.Specification.Chain.html#1400" class="Function">HasEnactState-ChainState</a> <a id="1479" class="Symbol">.</a><a id="1480" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1493" class="Symbol">=</a> <a id="1495" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1508" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1510" href="Ledger.Conway.Specification.Epoch.html#2112" class="Field">EpochStateOf</a>

  <a id="HasLState-ChainState"></a><a id="1526" href="Ledger.Conway.Specification.Chain.html#1526" class="Function">HasLState-ChainState</a> <a id="1547" class="Symbol">:</a> <a id="1549" href="Ledger.Conway.Specification.Ledger.html#1132" class="Record">HasLState</a> <a id="1559" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1572" href="Ledger.Conway.Specification.Chain.html#1526" class="Function">HasLState-ChainState</a> <a id="1593" class="Symbol">.</a><a id="1594" href="Ledger.Conway.Specification.Ledger.html#1182" class="Field">LStateOf</a> <a id="1603" class="Symbol">=</a> <a id="1605" href="Ledger.Conway.Specification.Ledger.html#1182" class="Field">LStateOf</a> <a id="1614" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1616" href="Ledger.Conway.Specification.Epoch.html#2112" class="Field">EpochStateOf</a>

  <a id="HasUTxOState-ChainState"></a><a id="1632" href="Ledger.Conway.Specification.Chain.html#1632" class="Function">HasUTxOState-ChainState</a> <a id="1656" class="Symbol">:</a> <a id="1658" href="Ledger.Conway.Specification.Utxo.html#1392" class="Record">HasUTxOState</a> <a id="1671" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1684" href="Ledger.Conway.Specification.Chain.html#1632" class="Function">HasUTxOState-ChainState</a> <a id="1708" class="Symbol">.</a><a id="1709" href="Ledger.Conway.Specification.Utxo.html#1445" class="Field">UTxOStateOf</a> <a id="1721" class="Symbol">=</a> <a id="1723" href="Ledger.Conway.Specification.Utxo.html#1445" class="Field">UTxOStateOf</a> <a id="1735" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1737" href="Ledger.Conway.Specification.Ledger.html#1182" class="Field">LStateOf</a>

  <a id="HasCertState-ChainState"></a><a id="1749" href="Ledger.Conway.Specification.Chain.html#1749" class="Function">HasCertState-ChainState</a> <a id="1773" class="Symbol">:</a> <a id="1775" href="Ledger.Conway.Specification.Certs.html#4729" class="Record">HasCertState</a> <a id="1788" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1801" href="Ledger.Conway.Specification.Chain.html#1749" class="Function">HasCertState-ChainState</a> <a id="1825" class="Symbol">.</a><a id="1826" href="Ledger.Conway.Specification.Certs.html#4782" class="Field">CertStateOf</a> <a id="1838" class="Symbol">=</a> <a id="1840" href="Ledger.Conway.Specification.Certs.html#4782" class="Field">CertStateOf</a> <a id="1852" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1854" href="Ledger.Conway.Specification.Ledger.html#1182" class="Field">LStateOf</a>

  <a id="HasDeposits-ChainState"></a><a id="1866" href="Ledger.Conway.Specification.Chain.html#1866" class="Function">HasDeposits-ChainState</a> <a id="1889" class="Symbol">:</a> <a id="1891" href="Ledger.Conway.Specification.Certs.html#870" class="Record">HasDeposits</a> <a id="1903" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="1916" href="Ledger.Conway.Specification.Chain.html#1866" class="Function">HasDeposits-ChainState</a> <a id="1939" class="Symbol">.</a><a id="1940" href="Ledger.Conway.Specification.Certs.html#922" class="Field">DepositsOf</a> <a id="1951" class="Symbol">=</a> <a id="1953" href="Ledger.Conway.Specification.Certs.html#922" class="Field">DepositsOf</a> <a id="1964" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1966" href="Ledger.Conway.Specification.Utxo.html#1445" class="Field">UTxOStateOf</a>

  <a id="HasRewards-ChainState"></a><a id="1981" href="Ledger.Conway.Specification.Chain.html#1981" class="Function">HasRewards-ChainState</a> <a id="2003" class="Symbol">:</a> <a id="2005" href="Ledger.Conway.Specification.Certs.html#1682" class="Record">HasRewards</a> <a id="2016" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="2029" href="Ledger.Conway.Specification.Chain.html#1981" class="Function">HasRewards-ChainState</a> <a id="2051" class="Symbol">.</a><a id="2052" href="Ledger.Conway.Specification.Certs.html#1733" class="Field">RewardsOf</a> <a id="2062" class="Symbol">=</a> <a id="2064" href="Ledger.Conway.Specification.Certs.html#1733" class="Field">RewardsOf</a> <a id="2074" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2076" href="Ledger.Conway.Specification.Certs.html#4782" class="Field">CertStateOf</a>

  <a id="HasPParams-ChainState"></a><a id="2091" href="Ledger.Conway.Specification.Chain.html#2091" class="Function">HasPParams-ChainState</a> <a id="2113" class="Symbol">:</a> <a id="2115" href="Ledger.Conway.Specification.PParams.html#3632" class="Record">HasPParams</a> <a id="2126" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a>
  <a id="2139" href="Ledger.Conway.Specification.Chain.html#2091" class="Function">HasPParams-ChainState</a> <a id="2161" class="Symbol">.</a><a id="2162" href="Ledger.Conway.Specification.PParams.html#3683" class="Field">PParamsOf</a> <a id="2172" class="Symbol">=</a> <a id="2174" href="Ledger.Conway.Specification.PParams.html#3683" class="Field">PParamsOf</a> <a id="2184" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2186" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a>

<a id="totalRefScriptsSize"></a><a id="2200" href="Ledger.Conway.Specification.Chain.html#2200" class="Function">totalRefScriptsSize</a> <a id="2220" class="Symbol">:</a> <a id="2222" href="Ledger.Conway.Specification.Ledger.html#988" class="Record">LState</a> <a id="2229" class="Symbol">→</a> <a id="2231" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2236" href="Ledger.Conway.Specification.Transaction.html#4880" class="Record">Tx</a> <a id="2239" class="Symbol">→</a> <a id="2241" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="2243" href="Ledger.Conway.Specification.Chain.html#2200" class="Function">totalRefScriptsSize</a> <a id="2263" href="Ledger.Conway.Specification.Chain.html#2263" class="Bound">lst</a> <a id="2267" href="Ledger.Conway.Specification.Chain.html#2267" class="Bound">txs</a> <a id="2271" class="Symbol">=</a> <a id="2273" href="Data.Nat.ListAction.html#612" class="Function">sum</a> <a id="2277" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2279" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2283" class="Symbol">(</a><a id="2284" href="Ledger.Conway.Specification.Utxo.html#2516" class="Function">refScriptsSize</a> <a id="2299" href="Ledger.Conway.Specification.Utxo.html#1290" class="Function">utxo</a><a id="2303" class="Symbol">)</a> <a id="2305" href="Ledger.Conway.Specification.Chain.html#2267" class="Bound">txs</a>
  <a id="2311" class="Keyword">where</a> <a id="2317" class="Keyword">open</a> <a id="2322" href="Ledger.Conway.Specification.Utxo.html#1226" class="Module">UTxOState</a> <a id="2332" class="Symbol">(</a><a id="2333" href="Ledger.Conway.Specification.Ledger.html#1047" class="Field">LState.utxoSt</a> <a id="2347" href="Ledger.Conway.Specification.Chain.html#2263" class="Bound">lst</a><a id="2350" class="Symbol">)</a>

<a id="2353" class="Keyword">private</a> <a id="2361" class="Keyword">variable</a>
  <a id="2372" href="Ledger.Conway.Specification.Chain.html#2372" class="Generalizable">ls&#39;</a> <a id="2376" class="Symbol">:</a> <a id="2378" href="Ledger.Conway.Specification.Ledger.html#988" class="Record">LState</a>


<a id="2387" class="Keyword">data</a> <a id="_⊢_⇀⦇_,CHAIN⦈_"></a><a id="2392" href="Ledger.Conway.Specification.Chain.html#2392" class="Datatype Operator">_⊢_⇀⦇_,CHAIN⦈_</a> <a id="2407" class="Symbol">:</a> <a id="2409" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="2411" class="Symbol">→</a> <a id="2413" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a> <a id="2424" class="Symbol">→</a> <a id="2426" href="Ledger.Conway.Specification.BlockBody.html#695" class="Record">Block</a> <a id="2432" class="Symbol">→</a> <a id="2434" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a> <a id="2445" class="Symbol">→</a> <a id="2447" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2452" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,CHAIN⦈_.CHAIN"></a><a id="2461" href="Ledger.Conway.Specification.Chain.html#2461" class="InductiveConstructor">CHAIN</a> <a id="2467" class="Symbol">:</a> <a id="2469" class="Symbol">∀</a> <a id="2471" class="Symbol">{</a><a id="2472" href="Ledger.Conway.Specification.Chain.html#2472" class="Bound">bcur&#39;</a><a id="2477" class="Symbol">}</a> <a id="2479" class="Symbol">{</a><a id="2480" href="Ledger.Conway.Specification.Chain.html#2480" class="Bound">b</a> <a id="2482" class="Symbol">:</a> <a id="2484" href="Ledger.Conway.Specification.BlockBody.html#695" class="Record">Block</a><a id="2489" class="Symbol">}</a> <a id="2491" class="Symbol">{</a><a id="2492" href="Ledger.Conway.Specification.Chain.html#2492" class="Bound">nes</a> <a id="2496" class="Symbol">:</a> <a id="2498" href="Ledger.Conway.Specification.Epoch.html#3606" class="Record">NewEpochState</a><a id="2511" class="Symbol">}</a> <a id="2513" class="Symbol">{</a><a id="2514" href="Ledger.Conway.Specification.Chain.html#2514" class="Bound">cs</a> <a id="2517" class="Symbol">:</a> <a id="2519" href="Ledger.Conway.Specification.Chain.html#932" class="Record">ChainState</a><a id="2529" class="Symbol">}</a>


    <a id="2537" class="Symbol">→</a> <a id="2539" class="Keyword">let</a> <a id="2543" class="Keyword">open</a> <a id="2548" href="Ledger.Conway.Specification.Chain.html#932" class="Module">ChainState</a> <a id="2559" href="Ledger.Conway.Specification.Chain.html#2514" class="Bound">cs</a><a id="2561" class="Symbol">;</a> <a id="2563" class="Keyword">open</a> <a id="2568" href="Ledger.Conway.Specification.BlockBody.html#695" class="Module">Block</a> <a id="2574" href="Ledger.Conway.Specification.Chain.html#2480" class="Bound">b</a><a id="2575" class="Symbol">;</a> <a id="2577" class="Keyword">open</a> <a id="2582" href="Ledger.Conway.Specification.BlockBody.html#621" class="Module">BHeader</a> <a id="2590" href="Ledger.Conway.Specification.BlockBody.html#726" class="Function">bheader</a>
          <a id="2608" class="Keyword">open</a> <a id="2613" href="Ledger.Conway.Specification.BlockBody.html#493" class="Module">BHBody</a> <a id="2620" href="Ledger.Conway.Specification.BlockBody.html#654" class="Function">bhbody</a><a id="2626" class="Symbol">;</a> <a id="2628" class="Keyword">open</a> <a id="2633" href="Ledger.Conway.Specification.Epoch.html#3606" class="Module">NewEpochState</a> <a id="2647" href="Ledger.Conway.Specification.Chain.html#2492" class="Bound">nes</a>
          <a id="2661" class="Keyword">open</a> <a id="2666" href="Ledger.Conway.Specification.Epoch.html#1855" class="Module">EpochState</a> <a id="2677" href="Ledger.Conway.Specification.Epoch.html#3727" class="Function">epochState</a><a id="2687" class="Symbol">;</a> <a id="2689" class="Keyword">open</a> <a id="2694" href="Ledger.Conway.Specification.Enact.html#448" class="Module">EnactState</a> <a id="2705" href="Ledger.Conway.Specification.Epoch.html#1996" class="Function">es</a> <a id="2708" class="Keyword">renaming</a> <a id="2717" class="Symbol">(</a><a id="2718" href="Ledger.Conway.Specification.Enact.html#658" class="Field">pparams</a> <a id="2726" class="Symbol">to</a> <a id="2729" class="Field">pp</a><a id="2731" class="Symbol">)</a>
          <a id="2743" class="Keyword">open</a> <a id="2748" href="Ledger.Conway.Specification.PParams.html#1779" class="Module">PParams</a> <a id="2756" href="Ledger.Prelude.html#2407" class="Function Operator">∣</a> <a id="2758" href="Ledger.Conway.Specification.Chain.html#2729" class="Function">pp</a> <a id="2761" href="Ledger.Prelude.html#2407" class="Function Operator">∣</a> <a id="2763" class="Keyword">using</a> <a id="2769" class="Symbol">(</a><a id="2770" href="Ledger.Conway.Specification.PParams.html#2691" class="Field">maxRefScriptSizePerBlock</a><a id="2794" class="Symbol">)</a> <a id="2796" class="Keyword">in</a>


    <a id="2805" class="Keyword">let</a>  <a id="2810" href="Ledger.Conway.Specification.Chain.html#2810" class="Bound">cs&#39;</a>  <a id="2815" class="Symbol">=</a> <a id="2817" class="Keyword">record</a> <a id="2824" href="Ledger.Conway.Specification.Chain.html#2514" class="Bound">cs</a> <a id="2827" class="Symbol">{</a>  <a id="2830" href="Ledger.Conway.Specification.Chain.html#968" class="Field">newEpochState</a>
                             <a id="2873" class="Symbol">=</a> <a id="2875" class="Keyword">record</a> <a id="2882" href="Ledger.Conway.Specification.Chain.html#2492" class="Bound">nes</a> <a id="2886" class="Symbol">{</a>  <a id="2889" href="Ledger.Conway.Specification.Epoch.html#3698" class="Field">bcur</a> <a id="2894" class="Symbol">=</a> <a id="2896" href="Ledger.Conway.Specification.Chain.html#2472" class="Bound">bcur&#39;</a><a id="2901" class="Symbol">;</a>
                                             <a id="2948" href="Ledger.Conway.Specification.Epoch.html#3727" class="Field">epochState</a>
                                             <a id="3004" class="Symbol">=</a> <a id="3006" class="Keyword">record</a> <a id="3013" href="Ledger.Conway.Specification.Epoch.html#3727" class="Function">epochState</a> <a id="3024" class="Symbol">{</a><a id="3025" href="Ledger.Conway.Specification.Epoch.html#1972" class="Field">ls</a> <a id="3028" class="Symbol">=</a> <a id="3030" href="Ledger.Conway.Specification.Chain.html#2372" class="Generalizable">ls&#39;</a><a id="3033" class="Symbol">}</a> <a id="3035" class="Symbol">}</a> <a id="3037" class="Symbol">}</a>
    <a id="3043" class="Keyword">in</a>
    <a id="3050" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="3052" href="Ledger.Conway.Specification.Chain.html#2200" class="Function">totalRefScriptsSize</a> <a id="3072" href="Ledger.Conway.Specification.Epoch.html#1972" class="Function">ls</a> <a id="3075" href="Ledger.Conway.Specification.BlockBody.html#752" class="Function">ts</a> <a id="3078" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="3080" href="Ledger.Conway.Specification.PParams.html#2691" class="Function">maxRefScriptSizePerBlock</a>
    <a id="3109" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3111" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="3114" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">⊢</a> <a id="3116" href="Ledger.Conway.Specification.Chain.html#968" class="Field">newEpochState</a> <a id="3130" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">⇀⦇</a> <a id="3133" href="Ledger.Conway.Specification.BlockBody.html#560" class="Function">slot</a> <a id="3138" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">,TICK⦈</a> <a id="3145" href="Ledger.Conway.Specification.Chain.html#2492" class="Bound">nes</a>
    <a id="3153" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3155" class="Symbol">(</a><a id="3156" href="Ledger.Conway.Specification.Epoch.html#1996" class="Function">es</a> <a id="3159" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3161" href="Ledger.Conway.Specification.Epoch.html#1923" class="Function">acnt</a><a id="3165" class="Symbol">)</a> <a id="3167" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">⊢</a> <a id="3169" class="Symbol">(</a><a id="3170" href="Ledger.Conway.Specification.Epoch.html#1972" class="Function">ls</a> <a id="3173" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3175" href="Ledger.Conway.Specification.Epoch.html#3698" class="Function">bcur</a><a id="3179" class="Symbol">)</a> <a id="3181" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">⇀⦇</a> <a id="3184" href="Ledger.Conway.Specification.Chain.html#2480" class="Bound">b</a> <a id="3186" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">,BBODY⦈</a> <a id="3194" class="Symbol">(</a><a id="3195" href="Ledger.Conway.Specification.Chain.html#2372" class="Generalizable">ls&#39;</a> <a id="3199" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3201" href="Ledger.Conway.Specification.Chain.html#2472" class="Bound">bcur&#39;</a><a id="3206" class="Symbol">)</a>
      <a id="3214" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="3253" class="Symbol">_</a> <a id="3255" href="Ledger.Conway.Specification.Chain.html#2392" class="Datatype Operator">⊢</a> <a id="3257" href="Ledger.Conway.Specification.Chain.html#2514" class="Bound">cs</a> <a id="3260" href="Ledger.Conway.Specification.Chain.html#2392" class="Datatype Operator">⇀⦇</a> <a id="3263" href="Ledger.Conway.Specification.Chain.html#2480" class="Bound">b</a> <a id="3265" href="Ledger.Conway.Specification.Chain.html#2392" class="Datatype Operator">,CHAIN⦈</a> <a id="3273" href="Ledger.Conway.Specification.Chain.html#2810" class="Bound">cs&#39;</a>

</pre></body></html>