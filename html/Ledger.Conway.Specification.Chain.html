<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Specification.Chain</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>
<a id="78" class="Keyword">open</a> <a id="83" class="Keyword">import</a> <a id="90" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>

<a id="128" class="Keyword">module</a> <a id="135" href="Ledger.Conway.Specification.Chain.html" class="Module">Ledger.Conway.Specification.Chain</a>
  <a id="171" class="Symbol">(</a><a id="172" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="176" class="Symbol">:</a> <a id="178" class="Symbol">_)</a> <a id="181" class="Symbol">(</a><a id="182" class="Keyword">open</a> <a id="187" href="Ledger.Conway.Specification.Transaction.html#999" class="Module">TransactionStructure</a> <a id="208" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="211" class="Symbol">)</a>
  <a id="215" class="Symbol">(</a><a id="216" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a> <a id="220" class="Symbol">:</a> <a id="222" href="Ledger.Conway.Specification.Abstract.html#655" class="Record">AbstractFunctions</a> <a id="240" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a><a id="243" class="Symbol">)</a> <a id="245" class="Symbol">(</a><a id="246" class="Keyword">open</a> <a id="251" href="Ledger.Conway.Specification.Abstract.html#655" class="Module">AbstractFunctions</a> <a id="269" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a><a id="272" class="Symbol">)</a>
  <a id="276" class="Keyword">where</a>

<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Ledger.Conway.Specification.BlockBody.html" class="Module">Ledger.Conway.Specification.BlockBody</a> <a id="333" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="337" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a> <a id="341" class="Keyword">public</a>
<a id="348" class="Keyword">open</a> <a id="353" class="Keyword">import</a> <a id="360" href="Ledger.Conway.Specification.Certs.html" class="Module">Ledger.Conway.Specification.Certs</a> <a id="394" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>
<a id="407" class="Keyword">open</a> <a id="412" class="Keyword">import</a> <a id="419" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="453" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Ledger.Conway.Specification.Epoch.html" class="Module">Ledger.Conway.Specification.Epoch</a> <a id="512" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="516" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="520" class="Keyword">open</a> <a id="525" class="Keyword">import</a> <a id="532" href="Ledger.Conway.Specification.Gov.html" class="Module">Ledger.Conway.Specification.Gov</a> <a id="564" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a>
<a id="568" class="Keyword">open</a> <a id="573" class="Keyword">import</a> <a id="580" href="Ledger.Conway.Specification.Ledger.html" class="Module">Ledger.Conway.Specification.Ledger</a> <a id="615" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="619" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="623" class="Keyword">open</a> <a id="628" class="Keyword">import</a> <a id="635" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a><a id="649" class="Symbol">;</a> <a id="651" class="Keyword">open</a> <a id="656" href="Function.Bundles.html#4750" class="Module">Equivalence</a>
<a id="668" class="Keyword">open</a> <a id="673" class="Keyword">import</a> <a id="680" href="Ledger.Conway.Specification.Ratify.html" class="Module">Ledger.Conway.Specification.Ratify</a> <a id="715" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a>
<a id="719" class="Keyword">open</a> <a id="724" class="Keyword">import</a> <a id="731" href="Ledger.Conway.Specification.RewardUpdate.html" class="Module">Ledger.Conway.Specification.RewardUpdate</a> <a id="772" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="776" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>
<a id="780" class="Keyword">open</a> <a id="785" class="Keyword">import</a> <a id="792" href="Ledger.Conway.Specification.Utxo.html" class="Module">Ledger.Conway.Specification.Utxo</a> <a id="825" href="Ledger.Conway.Specification.Chain.html#172" class="Bound">txs</a> <a id="829" href="Ledger.Conway.Specification.Chain.html#216" class="Bound">abs</a>

<a id="834" class="Keyword">open</a> <a id="839" class="Keyword">import</a> <a id="846" href="Algebra.html" class="Module">Algebra</a>
<a id="854" class="Keyword">open</a> <a id="859" class="Keyword">import</a> <a id="866" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="886" class="Keyword">using</a> <a id="892" class="Symbol">(</a><a id="893" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="903" class="Symbol">)</a>


<a id="907" class="Keyword">record</a> <a id="ChainState"></a><a id="914" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a> <a id="925" class="Symbol">:</a> <a id="927" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="932" class="Keyword">where</a>
  <a id="940" class="Keyword">field</a>
    <a id="ChainState.newEpochState"></a><a id="950" href="Ledger.Conway.Specification.Chain.html#950" class="Field">newEpochState</a>  <a id="965" class="Symbol">:</a> <a id="967" href="Ledger.Conway.Specification.Epoch.html#3364" class="Record">NewEpochState</a>


<a id="983" class="Keyword">instance</a>
  <a id="HasNewEpochState-ChainState"></a><a id="994" href="Ledger.Conway.Specification.Chain.html#994" class="Function">HasNewEpochState-ChainState</a> <a id="1022" class="Symbol">:</a> <a id="1024" href="Ledger.Conway.Specification.Epoch.html#3593" class="Record">HasNewEpochState</a> <a id="1041" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1054" href="Ledger.Conway.Specification.Chain.html#994" class="Function">HasNewEpochState-ChainState</a> <a id="1082" class="Symbol">.</a><a id="1083" href="Ledger.Conway.Specification.Epoch.html#3650" class="Field">NewEpochStateOf</a> <a id="1099" class="Symbol">=</a> <a id="1101" href="Ledger.Conway.Specification.Chain.html#950" class="Field">ChainState.newEpochState</a>

  <a id="HasLastEpoch-ChainState"></a><a id="1129" href="Ledger.Conway.Specification.Chain.html#1129" class="Function">HasLastEpoch-ChainState</a> <a id="1153" class="Symbol">:</a> <a id="1155" href="Ledger.Conway.Specification.Epoch.html#3728" class="Record">HasLastEpoch</a> <a id="1168" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1181" href="Ledger.Conway.Specification.Chain.html#1129" class="Function">HasLastEpoch-ChainState</a> <a id="1205" class="Symbol">.</a><a id="1206" href="Ledger.Conway.Specification.Epoch.html#3783" class="Field">LastEpochOf</a> <a id="1218" class="Symbol">=</a> <a id="1220" href="Ledger.Conway.Specification.Epoch.html#3783" class="Field">LastEpochOf</a> <a id="1232" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1234" href="Ledger.Conway.Specification.Epoch.html#3650" class="Field">NewEpochStateOf</a>

  <a id="HasEpochState-ChainState"></a><a id="1253" href="Ledger.Conway.Specification.Chain.html#1253" class="Function">HasEpochState-ChainState</a> <a id="1278" class="Symbol">:</a> <a id="1280" href="Ledger.Conway.Specification.Epoch.html#2040" class="Record">HasEpochState</a> <a id="1294" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1307" href="Ledger.Conway.Specification.Chain.html#1253" class="Function">HasEpochState-ChainState</a> <a id="1332" class="Symbol">.</a><a id="1333" href="Ledger.Conway.Specification.Epoch.html#2094" class="Field">EpochStateOf</a> <a id="1346" class="Symbol">=</a> <a id="1348" href="Ledger.Conway.Specification.Epoch.html#2094" class="Field">EpochStateOf</a> <a id="1361" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1363" href="Ledger.Conway.Specification.Epoch.html#3650" class="Field">NewEpochStateOf</a>

  <a id="HasEnactState-ChainState"></a><a id="1382" href="Ledger.Conway.Specification.Chain.html#1382" class="Function">HasEnactState-ChainState</a> <a id="1407" class="Symbol">:</a> <a id="1409" href="Ledger.Conway.Specification.Enact.html#737" class="Record">HasEnactState</a> <a id="1423" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1436" href="Ledger.Conway.Specification.Chain.html#1382" class="Function">HasEnactState-ChainState</a> <a id="1461" class="Symbol">.</a><a id="1462" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1475" class="Symbol">=</a> <a id="1477" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a> <a id="1490" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1492" href="Ledger.Conway.Specification.Epoch.html#2094" class="Field">EpochStateOf</a>

  <a id="HasLState-ChainState"></a><a id="1508" href="Ledger.Conway.Specification.Chain.html#1508" class="Function">HasLState-ChainState</a> <a id="1529" class="Symbol">:</a> <a id="1531" href="Ledger.Conway.Specification.Ledger.html#1123" class="Record">HasLState</a> <a id="1541" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1554" href="Ledger.Conway.Specification.Chain.html#1508" class="Function">HasLState-ChainState</a> <a id="1575" class="Symbol">.</a><a id="1576" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a> <a id="1585" class="Symbol">=</a> <a id="1587" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a> <a id="1596" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1598" href="Ledger.Conway.Specification.Epoch.html#2094" class="Field">EpochStateOf</a>

  <a id="HasUTxOState-ChainState"></a><a id="1614" href="Ledger.Conway.Specification.Chain.html#1614" class="Function">HasUTxOState-ChainState</a> <a id="1638" class="Symbol">:</a> <a id="1640" href="Ledger.Conway.Specification.Utxo.html#1396" class="Record">HasUTxOState</a> <a id="1653" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1666" href="Ledger.Conway.Specification.Chain.html#1614" class="Function">HasUTxOState-ChainState</a> <a id="1690" class="Symbol">.</a><a id="1691" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a> <a id="1703" class="Symbol">=</a> <a id="1705" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a> <a id="1717" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1719" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a>

  <a id="HasCertState-ChainState"></a><a id="1731" href="Ledger.Conway.Specification.Chain.html#1731" class="Function">HasCertState-ChainState</a> <a id="1755" class="Symbol">:</a> <a id="1757" href="Ledger.Conway.Specification.Certs.html#4868" class="Record">HasCertState</a> <a id="1770" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1783" href="Ledger.Conway.Specification.Chain.html#1731" class="Function">HasCertState-ChainState</a> <a id="1807" class="Symbol">.</a><a id="1808" href="Ledger.Conway.Specification.Certs.html#4921" class="Field">CertStateOf</a> <a id="1820" class="Symbol">=</a> <a id="1822" href="Ledger.Conway.Specification.Certs.html#4921" class="Field">CertStateOf</a> <a id="1834" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1836" href="Ledger.Conway.Specification.Ledger.html#1173" class="Field">LStateOf</a>

  <a id="HasDeposits-ChainState"></a><a id="1848" href="Ledger.Conway.Specification.Chain.html#1848" class="Function">HasDeposits-ChainState</a> <a id="1871" class="Symbol">:</a> <a id="1873" href="Ledger.Conway.Specification.Certs.html#864" class="Record">HasDeposits</a> <a id="1885" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="1898" href="Ledger.Conway.Specification.Chain.html#1848" class="Function">HasDeposits-ChainState</a> <a id="1921" class="Symbol">.</a><a id="1922" href="Ledger.Conway.Specification.Certs.html#916" class="Field">DepositsOf</a> <a id="1933" class="Symbol">=</a> <a id="1935" href="Ledger.Conway.Specification.Certs.html#916" class="Field">DepositsOf</a> <a id="1946" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="1948" href="Ledger.Conway.Specification.Utxo.html#1449" class="Field">UTxOStateOf</a>

  <a id="HasRewards-ChainState"></a><a id="1963" href="Ledger.Conway.Specification.Chain.html#1963" class="Function">HasRewards-ChainState</a> <a id="1985" class="Symbol">:</a> <a id="1987" href="Ledger.Conway.Specification.Certs.html#1794" class="Record">HasRewards</a> <a id="1998" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="2011" href="Ledger.Conway.Specification.Chain.html#1963" class="Function">HasRewards-ChainState</a> <a id="2033" class="Symbol">.</a><a id="2034" href="Ledger.Conway.Specification.Certs.html#1845" class="Field">RewardsOf</a> <a id="2044" class="Symbol">=</a> <a id="2046" href="Ledger.Conway.Specification.Certs.html#1845" class="Field">RewardsOf</a> <a id="2056" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2058" href="Ledger.Conway.Specification.Certs.html#4921" class="Field">CertStateOf</a>

  <a id="HasPParams-ChainState"></a><a id="2073" href="Ledger.Conway.Specification.Chain.html#2073" class="Function">HasPParams-ChainState</a> <a id="2095" class="Symbol">:</a> <a id="2097" href="Ledger.Conway.Specification.PParams.html#3493" class="Record">HasPParams</a> <a id="2108" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a>
  <a id="2121" href="Ledger.Conway.Specification.Chain.html#2073" class="Function">HasPParams-ChainState</a> <a id="2143" class="Symbol">.</a><a id="2144" href="Ledger.Conway.Specification.PParams.html#3544" class="Field">PParamsOf</a> <a id="2154" class="Symbol">=</a> <a id="2156" href="Ledger.Conway.Specification.PParams.html#3544" class="Field">PParamsOf</a> <a id="2166" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="2168" href="Ledger.Conway.Specification.Enact.html#791" class="Field">EnactStateOf</a>

<a id="totalRefScriptsSize"></a><a id="2182" href="Ledger.Conway.Specification.Chain.html#2182" class="Function">totalRefScriptsSize</a> <a id="2202" class="Symbol">:</a> <a id="2204" href="Ledger.Conway.Specification.Ledger.html#979" class="Record">LState</a> <a id="2211" class="Symbol">→</a> <a id="2213" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2218" href="Ledger.Conway.Specification.Transaction.html#4682" class="Record">Tx</a> <a id="2221" class="Symbol">→</a> <a id="2223" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
<a id="2225" href="Ledger.Conway.Specification.Chain.html#2182" class="Function">totalRefScriptsSize</a> <a id="2245" href="Ledger.Conway.Specification.Chain.html#2245" class="Bound">lst</a> <a id="2249" href="Ledger.Conway.Specification.Chain.html#2249" class="Bound">txs</a> <a id="2253" class="Symbol">=</a> <a id="2255" href="Data.Nat.ListAction.html#612" class="Function">sum</a> <a id="2259" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2261" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="2265" class="Symbol">(</a><a id="2266" href="Ledger.Conway.Specification.Utxo.html#2520" class="Function">refScriptsSize</a> <a id="2281" href="Ledger.Conway.Specification.Utxo.html#1294" class="Function">utxo</a><a id="2285" class="Symbol">)</a> <a id="2287" href="Ledger.Conway.Specification.Chain.html#2249" class="Bound">txs</a>
  <a id="2293" class="Keyword">where</a> <a id="2299" class="Keyword">open</a> <a id="2304" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">UTxOState</a> <a id="2314" class="Symbol">(</a><a id="2315" href="Ledger.Conway.Specification.Ledger.html#1038" class="Field">LState.utxoSt</a> <a id="2329" href="Ledger.Conway.Specification.Chain.html#2245" class="Bound">lst</a><a id="2332" class="Symbol">)</a>

<a id="2335" class="Keyword">private</a> <a id="2343" class="Keyword">variable</a>
  <a id="2354" href="Ledger.Conway.Specification.Chain.html#2354" class="Generalizable">ls&#39;</a> <a id="2358" class="Symbol">:</a> <a id="2360" href="Ledger.Conway.Specification.Ledger.html#979" class="Record">LState</a>


<a id="2369" class="Keyword">data</a> <a id="_⊢_⇀⦇_,CHAIN⦈_"></a><a id="2374" href="Ledger.Conway.Specification.Chain.html#2374" class="Datatype Operator">_⊢_⇀⦇_,CHAIN⦈_</a> <a id="2389" class="Symbol">:</a> <a id="2391" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="2393" class="Symbol">→</a> <a id="2395" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a> <a id="2406" class="Symbol">→</a> <a id="2408" href="Ledger.Conway.Specification.BlockBody.html#695" class="Record">Block</a> <a id="2414" class="Symbol">→</a> <a id="2416" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a> <a id="2427" class="Symbol">→</a> <a id="2429" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2434" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,CHAIN⦈_.CHAIN"></a><a id="2443" href="Ledger.Conway.Specification.Chain.html#2443" class="InductiveConstructor">CHAIN</a> <a id="2449" class="Symbol">:</a> <a id="2451" class="Symbol">∀</a> <a id="2453" class="Symbol">{</a><a id="2454" href="Ledger.Conway.Specification.Chain.html#2454" class="Bound">bcur&#39;</a><a id="2459" class="Symbol">}</a> <a id="2461" class="Symbol">{</a><a id="2462" href="Ledger.Conway.Specification.Chain.html#2462" class="Bound">b</a> <a id="2464" class="Symbol">:</a> <a id="2466" href="Ledger.Conway.Specification.BlockBody.html#695" class="Record">Block</a><a id="2471" class="Symbol">}</a> <a id="2473" class="Symbol">{</a><a id="2474" href="Ledger.Conway.Specification.Chain.html#2474" class="Bound">nes</a> <a id="2478" class="Symbol">:</a> <a id="2480" href="Ledger.Conway.Specification.Epoch.html#3364" class="Record">NewEpochState</a><a id="2493" class="Symbol">}</a> <a id="2495" class="Symbol">{</a><a id="2496" href="Ledger.Conway.Specification.Chain.html#2496" class="Bound">cs</a> <a id="2499" class="Symbol">:</a> <a id="2501" href="Ledger.Conway.Specification.Chain.html#914" class="Record">ChainState</a><a id="2511" class="Symbol">}</a>


    <a id="2519" class="Symbol">→</a> <a id="2521" class="Keyword">let</a> <a id="2525" class="Keyword">open</a> <a id="2530" href="Ledger.Conway.Specification.Chain.html#914" class="Module">ChainState</a> <a id="2541" href="Ledger.Conway.Specification.Chain.html#2496" class="Bound">cs</a><a id="2543" class="Symbol">;</a> <a id="2545" class="Keyword">open</a> <a id="2550" href="Ledger.Conway.Specification.BlockBody.html#695" class="Module">Block</a> <a id="2556" href="Ledger.Conway.Specification.Chain.html#2462" class="Bound">b</a><a id="2557" class="Symbol">;</a> <a id="2559" class="Keyword">open</a> <a id="2564" href="Ledger.Conway.Specification.BlockBody.html#621" class="Module">BHeader</a> <a id="2572" href="Ledger.Conway.Specification.BlockBody.html#726" class="Function">bheader</a>
          <a id="2590" class="Keyword">open</a> <a id="2595" href="Ledger.Conway.Specification.BlockBody.html#493" class="Module">BHBody</a> <a id="2602" href="Ledger.Conway.Specification.BlockBody.html#654" class="Function">bhbody</a><a id="2608" class="Symbol">;</a> <a id="2610" class="Keyword">open</a> <a id="2615" href="Ledger.Conway.Specification.Epoch.html#3364" class="Module">NewEpochState</a> <a id="2629" href="Ledger.Conway.Specification.Chain.html#2474" class="Bound">nes</a>
          <a id="2643" class="Keyword">open</a> <a id="2648" href="Ledger.Conway.Specification.Epoch.html#1837" class="Module">EpochState</a> <a id="2659" href="Ledger.Conway.Specification.Epoch.html#3485" class="Function">epochState</a><a id="2669" class="Symbol">;</a> <a id="2671" class="Keyword">open</a> <a id="2676" href="Ledger.Conway.Specification.Enact.html#448" class="Module">EnactState</a> <a id="2687" href="Ledger.Conway.Specification.Epoch.html#1978" class="Function">es</a> <a id="2690" class="Keyword">renaming</a> <a id="2699" class="Symbol">(</a><a id="2700" href="Ledger.Conway.Specification.Enact.html#658" class="Field">pparams</a> <a id="2708" class="Symbol">to</a> <a id="2711" class="Field">pp</a><a id="2713" class="Symbol">)</a>
          <a id="2725" class="Keyword">open</a> <a id="2730" href="Ledger.Conway.Specification.PParams.html#1689" class="Module">PParams</a> <a id="2738" href="Ledger.Prelude.html#2254" class="Function Operator">∣</a> <a id="2740" href="Ledger.Conway.Specification.Chain.html#2711" class="Function">pp</a> <a id="2743" href="Ledger.Prelude.html#2254" class="Function Operator">∣</a> <a id="2745" class="Keyword">using</a> <a id="2751" class="Symbol">(</a><a id="2752" href="Ledger.Conway.Specification.PParams.html#2601" class="Field">maxRefScriptSizePerBlock</a><a id="2776" class="Symbol">)</a> <a id="2778" class="Keyword">in</a>


    <a id="2787" class="Keyword">let</a>  <a id="2792" href="Ledger.Conway.Specification.Chain.html#2792" class="Bound">cs&#39;</a>  <a id="2797" class="Symbol">=</a> <a id="2799" class="Keyword">record</a> <a id="2806" href="Ledger.Conway.Specification.Chain.html#2496" class="Bound">cs</a> <a id="2809" class="Symbol">{</a>  <a id="2812" href="Ledger.Conway.Specification.Chain.html#950" class="Field">newEpochState</a>
                             <a id="2855" class="Symbol">=</a> <a id="2857" class="Keyword">record</a> <a id="2864" href="Ledger.Conway.Specification.Chain.html#2474" class="Bound">nes</a> <a id="2868" class="Symbol">{</a>  <a id="2871" href="Ledger.Conway.Specification.Epoch.html#3456" class="Field">bcur</a> <a id="2876" class="Symbol">=</a> <a id="2878" href="Ledger.Conway.Specification.Chain.html#2454" class="Bound">bcur&#39;</a><a id="2883" class="Symbol">;</a>
                                             <a id="2930" href="Ledger.Conway.Specification.Epoch.html#3485" class="Field">epochState</a>
                                             <a id="2986" class="Symbol">=</a> <a id="2988" class="Keyword">record</a> <a id="2995" href="Ledger.Conway.Specification.Epoch.html#3485" class="Function">epochState</a> <a id="3006" class="Symbol">{</a><a id="3007" href="Ledger.Conway.Specification.Epoch.html#1954" class="Field">ls</a> <a id="3010" class="Symbol">=</a> <a id="3012" href="Ledger.Conway.Specification.Chain.html#2354" class="Generalizable">ls&#39;</a><a id="3015" class="Symbol">}</a> <a id="3017" class="Symbol">}</a> <a id="3019" class="Symbol">}</a>
    <a id="3025" class="Keyword">in</a>
    <a id="3032" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="3034" href="Ledger.Conway.Specification.Chain.html#2182" class="Function">totalRefScriptsSize</a> <a id="3054" href="Ledger.Conway.Specification.Epoch.html#1954" class="Function">ls</a> <a id="3057" href="Ledger.Conway.Specification.BlockBody.html#752" class="Function">ts</a> <a id="3060" href="Class.HasOrder.Core.html#613" class="Field Operator">≤</a> <a id="3062" href="Ledger.Conway.Specification.PParams.html#2601" class="Function">maxRefScriptSizePerBlock</a>
    <a id="3091" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3093" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="3096" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">⊢</a> <a id="3098" href="Ledger.Conway.Specification.Chain.html#950" class="Field">newEpochState</a> <a id="3112" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">⇀⦇</a> <a id="3115" href="Ledger.Conway.Specification.BlockBody.html#560" class="Function">slot</a> <a id="3120" href="Ledger.Conway.Specification.RewardUpdate.html#1176" class="Datatype Operator">,TICK⦈</a> <a id="3127" href="Ledger.Conway.Specification.Chain.html#2474" class="Bound">nes</a>
    <a id="3135" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="3137" class="Symbol">(</a><a id="3138" href="Ledger.Conway.Specification.Epoch.html#1978" class="Function">es</a> <a id="3141" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3143" href="Ledger.Conway.Specification.Epoch.html#1905" class="Function">acnt</a><a id="3147" class="Symbol">)</a> <a id="3149" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">⊢</a> <a id="3151" class="Symbol">(</a><a id="3152" href="Ledger.Conway.Specification.Epoch.html#1954" class="Function">ls</a> <a id="3155" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3157" href="Ledger.Conway.Specification.Epoch.html#3456" class="Function">bcur</a><a id="3161" class="Symbol">)</a> <a id="3163" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">⇀⦇</a> <a id="3166" href="Ledger.Conway.Specification.Chain.html#2462" class="Bound">b</a> <a id="3168" href="Ledger.Conway.Specification.BlockBody.html#1150" class="Datatype Operator">,BBODY⦈</a> <a id="3176" class="Symbol">(</a><a id="3177" href="Ledger.Conway.Specification.Chain.html#2354" class="Generalizable">ls&#39;</a> <a id="3181" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3183" href="Ledger.Conway.Specification.Chain.html#2454" class="Bound">bcur&#39;</a><a id="3188" class="Symbol">)</a>
      <a id="3196" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="3235" class="Symbol">_</a> <a id="3237" href="Ledger.Conway.Specification.Chain.html#2374" class="Datatype Operator">⊢</a> <a id="3239" href="Ledger.Conway.Specification.Chain.html#2496" class="Bound">cs</a> <a id="3242" href="Ledger.Conway.Specification.Chain.html#2374" class="Datatype Operator">⇀⦇</a> <a id="3245" href="Ledger.Conway.Specification.Chain.html#2462" class="Bound">b</a> <a id="3247" href="Ledger.Conway.Specification.Chain.html#2374" class="Datatype Operator">,CHAIN⦈</a> <a id="3255" href="Ledger.Conway.Specification.Chain.html#2792" class="Bound">cs&#39;</a>

</pre></body></html>