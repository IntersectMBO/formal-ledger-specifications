<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Epoch</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="74" class="Keyword">open</a> <a id="79" class="Keyword">import</a> <a id="86" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="127" class="Keyword">module</a> <a id="134" href="Ledger.Conway.Conformance.Epoch.html" class="Module">Ledger.Conway.Conformance.Epoch</a>
  <a id="168" class="Symbol">(</a><a id="169" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="173" class="Symbol">:</a> <a id="175" class="Symbol">_)</a> <a id="178" class="Symbol">(</a><a id="179" class="Keyword">open</a> <a id="184" href="Ledger.Conway.Specification.Transaction.html#999" class="Module">TransactionStructure</a> <a id="205" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a><a id="208" class="Symbol">)</a>
  <a id="212" class="Symbol">(</a><a id="213" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a> <a id="217" class="Symbol">:</a> <a id="219" href="Ledger.Conway.Specification.Abstract.html#654" class="Record">AbstractFunctions</a> <a id="237" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a><a id="240" class="Symbol">)</a> <a id="242" class="Symbol">(</a><a id="243" class="Keyword">open</a> <a id="248" href="Ledger.Conway.Specification.Abstract.html#654" class="Module">AbstractFunctions</a> <a id="266" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a><a id="269" class="Symbol">)</a>
  <a id="273" class="Keyword">where</a>

<a id="280" class="Keyword">open</a> <a id="285" class="Keyword">import</a> <a id="292" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="307" class="Keyword">open</a> <a id="312" class="Keyword">import</a> <a id="319" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="332" class="Keyword">using</a> <a id="338" class="Symbol">()</a> <a id="341" class="Keyword">renaming</a> <a id="350" class="Symbol">(</a><a id="351" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">+_</a> <a id="354" class="Symbol">to</a> <a id="357" class="InductiveConstructor">pos</a><a id="360" class="Symbol">)</a>
<a id="362" class="Keyword">import</a> <a id="369" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="382" class="Symbol">as</a> <a id="385" class="Module">ℤ</a>

<a id="388" class="Keyword">open</a> <a id="393" class="Keyword">import</a> <a id="400" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="420" class="Keyword">using</a> <a id="426" class="Symbol">(</a><a id="427" href="Data.Nat.Properties.html#17566" class="Function">+-0-monoid</a><a id="437" class="Symbol">;</a> <a id="439" href="Data.Nat.Properties.html#17645" class="Function">+-0-commutativeMonoid</a><a id="460" class="Symbol">)</a>
<a id="462" class="Keyword">open</a> <a id="467" class="Keyword">import</a> <a id="474" href="Data.List.html" class="Module">Data.List</a> <a id="484" class="Keyword">using</a> <a id="490" class="Symbol">(</a><a id="491" href="Data.List.Base.html#10389" class="Function">filter</a><a id="497" class="Symbol">)</a>

<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>

<a id="534" class="Keyword">open</a> <a id="539" class="Keyword">import</a> <a id="546" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="580" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>
<a id="593" class="Keyword">open</a> <a id="598" class="Keyword">import</a> <a id="605" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="638" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="642" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
<a id="646" class="Keyword">open</a> <a id="651" class="Keyword">import</a> <a id="658" href="Ledger.Conway.Specification.Ratify.html" class="Module">Ledger.Conway.Specification.Ratify</a> <a id="693" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a>
<a id="697" class="Keyword">open</a> <a id="702" class="Keyword">import</a> <a id="709" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="740" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="744" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
<a id="748" class="Keyword">open</a> <a id="753" class="Keyword">import</a> <a id="760" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="792" href="Ledger.Conway.Specification.Transaction.html#2077" class="Function">govStructure</a>
<a id="805" class="Keyword">open</a> <a id="810" class="Keyword">import</a> <a id="817" href="Ledger.Conway.Conformance.Rewards.html" class="Module">Ledger.Conway.Conformance.Rewards</a> <a id="851" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="855" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
<a id="859" class="Keyword">open</a> <a id="864" class="Keyword">import</a> <a id="871" href="Ledger.Conway.Specification.Epoch.html" class="Module">Ledger.Conway.Specification.Epoch</a> <a id="905" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="909" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
  <a id="915" class="Keyword">using</a> <a id="921" class="Symbol">(</a><a id="922" href="Ledger.Conway.Specification.Epoch.html#5107" class="Function">getStakeCred</a><a id="934" class="Symbol">;</a> <a id="936" href="Ledger.Conway.Specification.Epoch.html#12639" class="Function">getOrphans</a><a id="946" class="Symbol">;</a> <a id="948" href="Ledger.Conway.Specification.Epoch.html#11996" class="Function">mkStakeDistrs</a><a id="961" class="Symbol">;</a> <a id="963" href="Ledger.Conway.Specification.Epoch.html#5020" class="Function">toRwdAddr</a><a id="972" class="Symbol">)</a> <a id="974" class="Keyword">public</a>

<a id="982" class="Keyword">record</a> <a id="EpochState"></a><a id="989" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a> <a id="1000" class="Symbol">:</a> <a id="1002" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1007" class="Keyword">where</a>
  <a id="1015" class="Keyword">constructor</a> <a id="⟦_,_,_,_,_⟧ᵉ&#39;"></a><a id="1027" href="Ledger.Conway.Conformance.Epoch.html#1027" class="InductiveConstructor Operator">⟦_,_,_,_,_⟧ᵉ&#39;</a>
  <a id="1043" class="Keyword">field</a>
    <a id="EpochState.acnt"></a><a id="1053" href="Ledger.Conway.Conformance.Epoch.html#1053" class="Field">acnt</a>       <a id="1064" class="Symbol">:</a> <a id="1066" href="Ledger.Conway.Specification.PParams.html#720" class="Record">Acnt</a>
    <a id="EpochState.ss"></a><a id="1075" href="Ledger.Conway.Conformance.Epoch.html#1075" class="Field">ss</a>         <a id="1086" class="Symbol">:</a> <a id="1088" href="Ledger.Conway.Specification.Rewards.html#7745" class="Record">Snapshots</a>
    <a id="EpochState.ls"></a><a id="1102" href="Ledger.Conway.Conformance.Epoch.html#1102" class="Field">ls</a>         <a id="1113" class="Symbol">:</a> <a id="1115" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a>
    <a id="EpochState.es"></a><a id="1126" href="Ledger.Conway.Conformance.Epoch.html#1126" class="Field">es</a>         <a id="1137" class="Symbol">:</a> <a id="1139" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
    <a id="EpochState.fut"></a><a id="1154" href="Ledger.Conway.Conformance.Epoch.html#1154" class="Field">fut</a>        <a id="1165" class="Symbol">:</a> <a id="1167" href="Ledger.Conway.Specification.Ratify.html#3374" class="Record">RatifyState</a>

<a id="1180" class="Keyword">record</a> <a id="NewEpochState"></a><a id="1187" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a> <a id="1201" class="Symbol">:</a> <a id="1203" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1208" class="Keyword">where</a>
  <a id="1216" class="Keyword">field</a>
    <a id="NewEpochState.lastEpoch"></a><a id="1226" href="Ledger.Conway.Conformance.Epoch.html#1226" class="Field">lastEpoch</a>   <a id="1238" class="Symbol">:</a> <a id="1240" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a>
    <a id="NewEpochState.epochState"></a><a id="1250" href="Ledger.Conway.Conformance.Epoch.html#1250" class="Field">epochState</a>  <a id="1262" class="Symbol">:</a> <a id="1264" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a>
    <a id="NewEpochState.ru"></a><a id="1279" href="Ledger.Conway.Conformance.Epoch.html#1279" class="Field">ru</a>          <a id="1291" class="Symbol">:</a> <a id="1293" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1299" href="Ledger.Conway.Specification.Rewards.html#6210" class="Record">RewardUpdate</a>

<a id="1313" class="Keyword">instance</a>
  <a id="1324" class="Keyword">unquoteDecl</a> <a id="HasCast-EpochState"></a><a id="1336" href="Ledger.Conway.Conformance.Epoch.html#1336" class="Function">HasCast-EpochState</a> <a id="HasCast-NewEpochState"></a><a id="1355" href="Ledger.Conway.Conformance.Epoch.html#1355" class="Function">HasCast-NewEpochState</a> <a id="1377" class="Symbol">=</a> <a id="1379" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1398" class="Symbol">(</a> <a id="1400" class="Symbol">(</a><a id="1401" class="Keyword">quote</a> <a id="1407" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a>     <a id="1422" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1424" href="Ledger.Conway.Conformance.Epoch.html#1336" class="Function">HasCast-EpochState</a><a id="1442" class="Symbol">)</a>
    <a id="1448" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1450" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="1452" class="Symbol">(</a><a id="1453" class="Keyword">quote</a> <a id="1459" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a>  <a id="1474" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1476" href="Ledger.Conway.Conformance.Epoch.html#1355" class="Function">HasCast-NewEpochState</a><a id="1497" class="Symbol">)</a><a id="1498" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="1499" class="Symbol">)</a>

<a id="applyRUpd"></a><a id="1502" href="Ledger.Conway.Conformance.Epoch.html#1502" class="Function">applyRUpd</a> <a id="1512" class="Symbol">:</a> <a id="1514" href="Ledger.Conway.Specification.Rewards.html#6210" class="Record">RewardUpdate</a> <a id="1527" class="Symbol">→</a> <a id="1529" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a> <a id="1540" class="Symbol">→</a> <a id="1542" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a>
<a id="1553" href="Ledger.Conway.Conformance.Epoch.html#1502" class="Function">applyRUpd</a> <a id="1563" href="Ledger.Conway.Conformance.Epoch.html#1563" class="Bound">rewardUpdate</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1582}{\htmlId{1582}{\htmlClass{Bound}{\text{treasury}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1593}{\htmlId{1593}{\htmlClass{Bound}{\text{reserves}}}}\, \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1609}{\htmlId{1609}{\htmlClass{Bound}{\text{ss}}}}\,
  \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1620}{\htmlId{1620}{\htmlClass{Bound}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1627}{\htmlId{1627}{\htmlClass{Bound}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1634}{\htmlId{1634}{\htmlClass{Bound}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1645}{\htmlId{1645}{\htmlClass{Bound}{\text{donations}}}}\, \end{pmatrix}
    \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1664}{\htmlId{1664}{\htmlClass{Bound}{\text{govSt}}}}\,
    \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1680}{\htmlId{1680}{\htmlClass{Bound}{\text{voteDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1693}{\htmlId{1693}{\htmlClass{Bound}{\text{stakeDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1707}{\htmlId{1707}{\htmlClass{Bound}{\text{rewards}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1717}{\htmlId{1717}{\htmlClass{Bound}{\text{deposits&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1732}{\htmlId{1732}{\htmlClass{Bound}{\text{pState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1741}{\htmlId{1741}{\htmlClass{Bound}{\text{gState}}}}\, \end{pmatrix} \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1759}{\htmlId{1759}{\htmlClass{Bound}{\text{es}}}}\,
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1766}{\htmlId{1766}{\htmlClass{Bound}{\text{fut}}}}\,
  \end{pmatrix}$</a> <a id="1776" class="Symbol">=</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\href{Prelude.html#3279}{\htmlId{1784}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1792}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1793}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1582}{\htmlId{1797}{\htmlClass{Bound}{\text{treasury}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1806}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#6247}{\htmlId{1808}{\htmlClass{Function}{\text{Δt}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1811}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1813}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2191}{\htmlId{1817}{\htmlClass{Function}{\text{unregRU&#39;}}}}\,\,\htmlId{1825}{\htmlClass{Symbol}{\text{)}}}\,
    \\ \,\href{Prelude.html#3279}{\htmlId{1833}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1841}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1842}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1593}{\htmlId{1846}{\htmlClass{Bound}{\text{reserves}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1855}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#6250}{\htmlId{1857}{\htmlClass{Function}{\text{Δr}}}}\,\,\htmlId{1859}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1609}{\htmlId{1867}{\htmlClass{Bound}{\text{ss}}}}\,
  \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1620}{\htmlId{1878}{\htmlClass{Bound}{\text{utxo}}}}\, \\ \,\href{Prelude.html#3279}{\htmlId{1885}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1893}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1894}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1627}{\htmlId{1898}{\htmlClass{Bound}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1903}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#6253}{\htmlId{1905}{\htmlClass{Function}{\text{Δf}}}}\,\,\htmlId{1907}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1634}{\htmlId{1911}{\htmlClass{Bound}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1645}{\htmlId{1922}{\htmlClass{Bound}{\text{donations}}}}\, \end{pmatrix}
    \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1664}{\htmlId{1940}{\htmlClass{Bound}{\text{govSt}}}}\,
    \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1680}{\htmlId{1956}{\htmlClass{Bound}{\text{voteDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1693}{\htmlId{1969}{\htmlClass{Bound}{\text{stakeDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1707}{\htmlId{1983}{\htmlClass{Bound}{\text{rewards}}}}\, \,\href{Axiom.Set.Map.Dec.html#2052}{\htmlId{1991}{\htmlClass{Function Operator}{\text{∪⁺}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2123}{\htmlId{1994}{\htmlClass{Function}{\text{regRU}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1717}{\htmlId{2002}{\htmlClass{Bound}{\text{deposits&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1732}{\htmlId{2016}{\htmlClass{Bound}{\text{pState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1741}{\htmlId{2025}{\htmlClass{Bound}{\text{gState}}}}\, \end{pmatrix} \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1759}{\htmlId{2040}{\htmlClass{Bound}{\text{es}}}}\,
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1766}{\htmlId{2047}{\htmlClass{Bound}{\text{fut}}}}\, \end{pmatrix}$</a>
  <a id="2055" class="Keyword">where</a>
    <a id="2065" class="Keyword">open</a> <a id="2070" href="Ledger.Conway.Specification.Rewards.html#6210" class="Module">RewardUpdate</a> <a id="2083" href="Ledger.Conway.Conformance.Epoch.html#1563" class="Bound">rewardUpdate</a> <a id="2096" class="Keyword">using</a> <a id="2102" class="Symbol">(</a><a id="2103" href="Ledger.Conway.Specification.Rewards.html#6247" class="Field">Δt</a><a id="2105" class="Symbol">;</a> <a id="2107" href="Ledger.Conway.Specification.Rewards.html#6250" class="Field">Δr</a><a id="2109" class="Symbol">;</a> <a id="2111" href="Ledger.Conway.Specification.Rewards.html#6253" class="Field">Δf</a><a id="2113" class="Symbol">;</a> <a id="2115" href="Ledger.Conway.Specification.Rewards.html#6273" class="Field">rs</a><a id="2117" class="Symbol">)</a>
    <a id="2123" href="Ledger.Conway.Conformance.Epoch.html#2123" class="Function">regRU</a>     <a id="2133" class="Symbol">=</a> <a id="2135" href="Ledger.Conway.Specification.Rewards.html#6273" class="Function">rs</a> <a id="2138" href="Axiom.Set.Map.html#12770" class="Function Operator">∣</a> <a id="2140" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2144" href="Ledger.Conway.Conformance.Epoch.html#1707" class="Bound">rewards</a>
    <a id="2156" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Function">unregRU</a>   <a id="2166" class="Symbol">=</a> <a id="2168" href="Ledger.Conway.Specification.Rewards.html#6273" class="Function">rs</a> <a id="2171" href="Axiom.Set.Map.html#12840" class="Function Operator">∣</a> <a id="2173" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2177" href="Ledger.Conway.Conformance.Epoch.html#1707" class="Bound">rewards</a> <a id="2185" href="Axiom.Set.Map.html#12840" class="Function Operator">ᶜ</a>
    <a id="2191" href="Ledger.Conway.Conformance.Epoch.html#2191" class="Function">unregRU&#39;</a>  <a id="2201" class="Symbol">=</a> <a id="2203" href="abstract-set-theory.FiniteSetTheory.html#3487" class="Function">∑[</a> <a id="2206" href="Ledger.Conway.Conformance.Epoch.html#2206" class="Bound">x</a> <a id="2208" href="abstract-set-theory.FiniteSetTheory.html#3487" class="Function">←</a> <a id="2210" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Function">unregRU</a> <a id="2218" href="abstract-set-theory.FiniteSetTheory.html#3487" class="Function">]</a> <a id="2220" href="Ledger.Conway.Conformance.Epoch.html#2206" class="Bound">x</a>

<a id="2223" class="Keyword">private</a> <a id="2231" class="Keyword">variable</a>
  <a id="2242" href="Ledger.Conway.Conformance.Epoch.html#2242" class="Generalizable">nes</a> <a id="2246" href="Ledger.Conway.Conformance.Epoch.html#2246" class="Generalizable">nes&#39;</a> <a id="2251" class="Symbol">:</a> <a id="2253" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a>
  <a id="2269" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="2271" href="Ledger.Conway.Conformance.Epoch.html#2271" class="Generalizable">lastEpoch</a> <a id="2281" class="Symbol">:</a> <a id="2283" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a>
  <a id="2291" href="Ledger.Conway.Conformance.Epoch.html#2291" class="Generalizable">fut</a> <a id="2295" href="Ledger.Conway.Conformance.Epoch.html#2295" class="Generalizable">fut&#39;</a> <a id="2300" class="Symbol">:</a> <a id="2302" href="Ledger.Conway.Specification.Ratify.html#3374" class="Record">RatifyState</a>
  <a id="2316" href="Ledger.Conway.Conformance.Epoch.html#2316" class="Generalizable">eps</a> <a id="2320" href="Ledger.Conway.Conformance.Epoch.html#2320" class="Generalizable">eps&#39;</a> <a id="2325" href="Ledger.Conway.Conformance.Epoch.html#2325" class="Generalizable">eps&#39;&#39;</a> <a id="2331" class="Symbol">:</a> <a id="2333" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a>
  <a id="2346" href="Ledger.Conway.Conformance.Epoch.html#2346" class="Generalizable">ls</a> <a id="2349" class="Symbol">:</a> <a id="2351" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a>
  <a id="2360" href="Ledger.Conway.Conformance.Epoch.html#2360" class="Generalizable">acnt</a> <a id="2365" class="Symbol">:</a> <a id="2367" href="Ledger.Conway.Specification.PParams.html#720" class="Record">Acnt</a>
  <a id="2374" href="Ledger.Conway.Conformance.Epoch.html#2374" class="Generalizable">es₀</a> <a id="2378" class="Symbol">:</a> <a id="2380" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
  <a id="2393" href="Ledger.Conway.Conformance.Epoch.html#2393" class="Generalizable">mark</a> <a id="2398" href="Ledger.Conway.Conformance.Epoch.html#2398" class="Generalizable">set</a> <a id="2402" href="Ledger.Conway.Conformance.Epoch.html#2402" class="Generalizable">go</a> <a id="2405" class="Symbol">:</a> <a id="2407" href="Ledger.Conway.Specification.Rewards.html#6433" class="Record">Snapshot</a>
  <a id="2418" href="Ledger.Conway.Conformance.Epoch.html#2418" class="Generalizable">feeSS</a> <a id="2424" class="Symbol">:</a> <a id="2426" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="2433" href="Ledger.Conway.Conformance.Epoch.html#2433" class="Generalizable">lstate</a> <a id="2440" class="Symbol">:</a> <a id="2442" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a>
  <a id="2451" href="Ledger.Conway.Conformance.Epoch.html#2451" class="Generalizable">ss</a> <a id="2454" href="Ledger.Conway.Conformance.Epoch.html#2454" class="Generalizable">ss&#39;</a> <a id="2458" class="Symbol">:</a> <a id="2460" href="Ledger.Conway.Specification.Rewards.html#7745" class="Record">Snapshots</a>
  <a id="2472" href="Ledger.Conway.Conformance.Epoch.html#2472" class="Generalizable">ru</a> <a id="2475" class="Symbol">:</a> <a id="2477" href="Ledger.Conway.Specification.Rewards.html#6210" class="Record">RewardUpdate</a>
  <a id="2492" href="Ledger.Conway.Conformance.Epoch.html#2492" class="Generalizable">mru</a> <a id="2496" class="Symbol">:</a> <a id="2498" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2504" href="Ledger.Conway.Specification.Rewards.html#6210" class="Record">RewardUpdate</a>
  <a id="2519" href="Ledger.Conway.Conformance.Epoch.html#2519" class="Generalizable">certState&#39;</a> <a id="2530" class="Symbol">:</a> <a id="2532" href="Ledger.Conway.Conformance.Certs.html#971" class="Record">CertState</a>

<a id="2543" class="Keyword">data</a> <a id="_⊢_⇀⦇_,EPOCH⦈_"></a><a id="2548" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">_⊢_⇀⦇_,EPOCH⦈_</a> <a id="2563" class="Symbol">:</a> <a id="2565" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="2567" class="Symbol">→</a> <a id="2569" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a> <a id="2580" class="Symbol">→</a> <a id="2582" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a> <a id="2588" class="Symbol">→</a> <a id="2590" href="Ledger.Conway.Conformance.Epoch.html#989" class="Record">EpochState</a> <a id="2601" class="Symbol">→</a> <a id="2603" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2608" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,EPOCH⦈_.EPOCH"></a><a id="2617" href="Ledger.Conway.Conformance.Epoch.html#2617" class="InductiveConstructor">EPOCH</a> <a id="2623" class="Symbol">:</a> <a id="2625" class="Keyword">let</a>
      <a id="2635" class="Keyword">open</a> <a id="2640" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">LState</a> <a id="2647" href="Ledger.Conway.Conformance.Epoch.html#2346" class="Generalizable">ls</a>
      <a id="2656" class="Keyword">open</a> <a id="2661" href="Ledger.Conway.Conformance.Certs.html#971" class="Module">CertState</a> <a id="2671" href="Ledger.Conway.Conformance.Ledger.html#887" class="Function">certState</a>
      <a id="2687" class="Keyword">open</a> <a id="2692" href="Ledger.Conway.Specification.Ratify.html#3374" class="Module">RatifyState</a> <a id="2704" href="Ledger.Conway.Conformance.Epoch.html#2291" class="Generalizable">fut</a> <a id="2708" class="Keyword">renaming</a> <a id="2717" class="Symbol">(</a><a id="2718" href="Ledger.Conway.Specification.Ratify.html#3411" class="Field">es</a> <a id="2721" class="Symbol">to</a> <a id="2724" class="Field">esW</a><a id="2727" class="Symbol">)</a>
      <a id="2735" class="Keyword">open</a> <a id="2740" href="Ledger.Conway.Specification.Utxo.html#1230" class="Module">UTxOState</a>
      <a id="2756" class="Keyword">open</a> <a id="2761" href="Ledger.Conway.Specification.Certs.html#4031" class="Module">PState</a><a id="2767" class="Symbol">;</a> <a id="2769" class="Keyword">open</a> <a id="2774" href="Ledger.Conway.Conformance.Certs.html#617" class="Module">DState</a><a id="2780" class="Symbol">;</a> <a id="2782" class="Keyword">open</a> <a id="2787" href="Ledger.Conway.Conformance.Certs.html#803" class="Module">GState</a>
      <a id="2800" class="Keyword">open</a> <a id="2805" href="Ledger.Conway.Specification.PParams.html#720" class="Module">Acnt</a><a id="2809" class="Symbol">;</a> <a id="2811" class="Keyword">open</a> <a id="2816" href="Ledger.Conway.Specification.Enact.html#448" class="Module">EnactState</a><a id="2826" class="Symbol">;</a> <a id="2828" class="Keyword">open</a> <a id="2833" href="Ledger.Conway.Specification.Gov.Actions.html#3768" class="Module">GovActionState</a>

      <a id="2855" href="Ledger.Conway.Conformance.Epoch.html#2855" class="Bound">es</a> <a id="2858" class="Symbol">:</a> <a id="2860" href="Ledger.Conway.Specification.Enact.html#448" class="Record">EnactState</a>
      <a id="2877" href="Ledger.Conway.Conformance.Epoch.html#2855" class="Bound">es</a> <a id="2880" class="Symbol">=</a> <a id="2882" class="Keyword">record</a> <a id="2889" href="Ledger.Conway.Conformance.Epoch.html#2724" class="Function">esW</a> <a id="2893" class="Symbol">{</a> <a id="2895" href="Ledger.Conway.Specification.Enact.html#700" class="Field">withdrawals</a> <a id="2907" class="Symbol">=</a> <a id="2909" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2911" class="Symbol">}</a>

      <a id="2920" href="Ledger.Conway.Conformance.Epoch.html#2920" class="Bound">tmpGovSt</a> <a id="2929" class="Symbol">=</a> <a id="2931" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="2938" class="Symbol">(λ</a> <a id="2941" href="Ledger.Conway.Conformance.Epoch.html#2941" class="Bound">x</a> <a id="2943" class="Symbol">→</a> <a id="2945" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2947" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2953" href="Ledger.Conway.Conformance.Epoch.html#2941" class="Bound">x</a> <a id="2955" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="2957" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="2962" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2968" href="Ledger.Conway.Specification.Ratify.html#3444" class="Function">removed</a> <a id="2976" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a><a id="2977" class="Symbol">)</a> <a id="2979" href="Ledger.Conway.Conformance.Ledger.html#861" class="Function">govSt</a>

      <a id="2992" href="Ledger.Conway.Conformance.Epoch.html#2992" class="Bound">orphans</a> <a id="3000" class="Symbol">:</a> <a id="3002" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3004" class="Symbol">(</a><a id="3005" href="Ledger.Conway.Specification.Gov.Actions.html#798" class="Function">GovActionID</a> <a id="3017" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3019" href="Ledger.Conway.Specification.Gov.Actions.html#3768" class="Record">GovActionState</a><a id="3033" class="Symbol">)</a>
      <a id="3041" href="Ledger.Conway.Conformance.Epoch.html#2992" class="Bound">orphans</a>  <a id="3050" class="Symbol">=</a> <a id="3052" href="Axiom.Set.html#5718" class="Function">fromList</a> <a id="3061" class="Symbol">(</a><a id="3062" href="Ledger.Conway.Specification.Epoch.html#12639" class="Function">getOrphans</a> <a id="3073" href="Ledger.Conway.Conformance.Epoch.html#2855" class="Bound">es</a> <a id="3076" href="Ledger.Conway.Conformance.Epoch.html#2920" class="Bound">tmpGovSt</a><a id="3084" class="Symbol">)</a>

      <a id="3093" href="Ledger.Conway.Conformance.Epoch.html#3093" class="Bound">removed&#39;</a> <a id="3102" class="Symbol">:</a> <a id="3104" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3106" class="Symbol">(</a><a id="3107" href="Ledger.Conway.Specification.Gov.Actions.html#798" class="Function">GovActionID</a> <a id="3119" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3121" href="Ledger.Conway.Specification.Gov.Actions.html#3768" class="Record">GovActionState</a><a id="3135" class="Symbol">)</a>
      <a id="3143" href="Ledger.Conway.Conformance.Epoch.html#3093" class="Bound">removed&#39;</a> <a id="3152" class="Symbol">=</a> <a id="3154" href="Ledger.Conway.Specification.Ratify.html#3444" class="Function">removed</a> <a id="3162" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="3164" href="Ledger.Conway.Conformance.Epoch.html#2992" class="Bound">orphans</a>

      <a id="3179" href="Ledger.Conway.Conformance.Epoch.html#3179" class="Bound">govSt&#39;</a> <a id="3186" class="Symbol">=</a> <a id="3188" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="3195" class="Symbol">(λ</a> <a id="3198" href="Ledger.Conway.Conformance.Epoch.html#3198" class="Bound">x</a> <a id="3200" class="Symbol">→</a> <a id="3202" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="3204" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3210" href="Ledger.Conway.Conformance.Epoch.html#3198" class="Bound">x</a> <a id="3212" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="3214" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3219" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3225" href="Ledger.Conway.Conformance.Epoch.html#3093" class="Bound">removed&#39;</a> <a id="3234" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a><a id="3235" class="Symbol">)</a> <a id="3237" href="Ledger.Conway.Conformance.Ledger.html#861" class="Function">govSt</a>

      <a id="3250" href="Ledger.Conway.Conformance.Epoch.html#3250" class="Bound">removedGovActions</a> <a id="3268" class="Symbol">:</a> <a id="3270" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3272" class="Symbol">(</a><a id="3273" href="Ledger.Core.Specification.Address.html#1324" class="Record">RwdAddr</a> <a id="3281" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3283" href="Ledger.Conway.Specification.Certs.html#548" class="Datatype">DepositPurpose</a> <a id="3298" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3300" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a><a id="3304" class="Symbol">)</a>
      <a id="3312" href="Ledger.Conway.Conformance.Epoch.html#3250" class="Bound">removedGovActions</a> <a id="3330" class="Symbol">=</a>
        <a id="3340" href="Function.Base.html#1657" class="Function">flip</a> <a id="3345" href="Axiom.Set.html#7022" class="Function">concatMapˢ</a> <a id="3356" href="Ledger.Conway.Conformance.Epoch.html#3093" class="Bound">removed&#39;</a> <a id="3365" class="Symbol">λ</a> <a id="3367" class="Symbol">(</a><a id="3368" href="Ledger.Conway.Conformance.Epoch.html#3368" class="Bound">gaid</a> <a id="3373" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3375" href="Ledger.Conway.Conformance.Epoch.html#3375" class="Bound">gaSt</a><a id="3379" class="Symbol">)</a> <a id="3381" class="Symbol">→</a>
          <a id="3393" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a>
            <a id="3410" class="Symbol">(</a><a id="3411" href="Ledger.Conway.Specification.Gov.Actions.html#3835" class="Field">returnAddr</a> <a id="3422" href="Ledger.Conway.Conformance.Epoch.html#3375" class="Bound">gaSt</a> <a id="3427" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3429" class="Symbol">)</a>
            <a id="3443" class="Symbol">((</a><a id="3445" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="3452" class="Symbol">.</a><a id="3453" href="Ledger.Conway.Specification.Utxo.html#1338" class="Field">deposits</a> <a id="3462" href="Axiom.Set.Map.html#12770" class="Function Operator">∣</a> <a id="3464" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3466" href="Ledger.Conway.Specification.Certs.html#737" class="InductiveConstructor">GovActionDeposit</a> <a id="3483" href="Ledger.Conway.Conformance.Epoch.html#3368" class="Bound">gaid</a> <a id="3488" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="3489" class="Symbol">)</a> <a id="3491" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="3492" class="Symbol">)</a>

      <a id="3501" href="Ledger.Conway.Conformance.Epoch.html#3501" class="Bound">govActionReturns</a> <a id="3518" class="Symbol">:</a> <a id="3520" href="Ledger.Core.Specification.Address.html#1324" class="Record">RwdAddr</a> <a id="3528" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="3530" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
      <a id="3541" href="Ledger.Conway.Conformance.Epoch.html#3501" class="Bound">govActionReturns</a> <a id="3558" class="Symbol">=</a>
        <a id="3568" href="Axiom.Set.Map.Dec.html#2130" class="Function">aggregate₊</a> <a id="3579" class="Symbol">(</a><a id="3580" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3585" class="Symbol">(λ</a> <a id="3588" class="Symbol">(</a><a id="3589" href="Ledger.Conway.Conformance.Epoch.html#3589" class="Bound">a</a> <a id="3591" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3593" class="Symbol">_</a> <a id="3595" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3597" href="Ledger.Conway.Conformance.Epoch.html#3597" class="Bound">d</a><a id="3598" class="Symbol">)</a> <a id="3600" class="Symbol">→</a> <a id="3602" href="Ledger.Conway.Conformance.Epoch.html#3589" class="Bound">a</a> <a id="3604" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3606" href="Ledger.Conway.Conformance.Epoch.html#3597" class="Bound">d</a><a id="3607" class="Symbol">)</a> <a id="3609" href="Ledger.Conway.Conformance.Epoch.html#3250" class="Bound">removedGovActions</a> <a id="3627" href="abstract-set-theory.FiniteSetTheory.html#2860" class="Function Operator">ᶠˢ</a><a id="3629" class="Symbol">)</a>

      <a id="3638" href="Ledger.Conway.Conformance.Epoch.html#3638" class="Bound">trWithdrawals</a>   <a id="3654" class="Symbol">=</a> <a id="3656" href="Ledger.Conway.Conformance.Epoch.html#2724" class="Function">esW</a> <a id="3660" class="Symbol">.</a><a id="3661" href="Ledger.Conway.Specification.Enact.html#700" class="Field">withdrawals</a>
      <a id="3679" href="Ledger.Conway.Conformance.Epoch.html#3679" class="Bound">totWithdrawals</a>  <a id="3695" class="Symbol">=</a> <a id="3697" href="abstract-set-theory.FiniteSetTheory.html#3487" class="Function">∑[</a> <a id="3700" href="Ledger.Conway.Conformance.Epoch.html#3700" class="Bound">x</a> <a id="3702" href="abstract-set-theory.FiniteSetTheory.html#3487" class="Function">←</a> <a id="3704" href="Ledger.Conway.Conformance.Epoch.html#3638" class="Bound">trWithdrawals</a> <a id="3718" href="abstract-set-theory.FiniteSetTheory.html#3487" class="Function">]</a> <a id="3720" href="Ledger.Conway.Conformance.Epoch.html#3700" class="Bound">x</a>

      <a id="3729" href="Ledger.Conway.Conformance.Epoch.html#3729" class="Bound">retired</a>    <a id="3740" class="Symbol">=</a> <a id="3742" class="Symbol">(</a><a id="3743" href="Ledger.Conway.Conformance.Certs.html#1050" class="Function">pState</a> <a id="3750" class="Symbol">.</a><a id="3751" href="Ledger.Conway.Specification.Certs.html#4085" class="Field">retiring</a><a id="3759" class="Symbol">)</a> <a id="3761" href="Axiom.Set.Map.html#17191" class="Function Operator">⁻¹</a> <a id="3764" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a>
      <a id="3772" href="Ledger.Conway.Conformance.Epoch.html#3772" class="Bound">payout</a>     <a id="3783" class="Symbol">=</a> <a id="3785" href="Ledger.Conway.Conformance.Epoch.html#3501" class="Bound">govActionReturns</a> <a id="3802" href="Axiom.Set.Map.Dec.html#2052" class="Function Operator">∪⁺</a> <a id="3805" href="Ledger.Conway.Conformance.Epoch.html#3638" class="Bound">trWithdrawals</a>
      <a id="3825" href="Ledger.Conway.Conformance.Epoch.html#3825" class="Bound">refunds</a>    <a id="3836" class="Symbol">=</a> <a id="3838" href="Axiom.Set.Map.html#16752" class="Function">pullbackMap</a> <a id="3850" href="Ledger.Conway.Conformance.Epoch.html#3772" class="Bound">payout</a> <a id="3857" href="Ledger.Conway.Specification.Epoch.html#5020" class="Function">toRwdAddr</a> <a id="3867" class="Symbol">(</a><a id="3868" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3872" class="Symbol">(</a><a id="3873" href="Ledger.Conway.Conformance.Certs.html#1030" class="Function">dState</a> <a id="3880" class="Symbol">.</a><a id="3881" href="Ledger.Conway.Conformance.Certs.html#744" class="Field">rewards</a><a id="3888" class="Symbol">))</a>
      <a id="3897" href="Ledger.Conway.Conformance.Epoch.html#3897" class="Bound">unclaimed</a>  <a id="3908" class="Symbol">=</a> <a id="3910" href="Ledger.Prelude.HasCoin.html#170" class="Field">getCoin</a> <a id="3918" href="Ledger.Conway.Conformance.Epoch.html#3772" class="Bound">payout</a> <a id="3925" href="Interface.HasSubtract.html#209" class="Field Operator">-</a> <a id="3927" href="Ledger.Prelude.HasCoin.html#170" class="Field">getCoin</a> <a id="3935" href="Ledger.Conway.Conformance.Epoch.html#3825" class="Bound">refunds</a>
      <a id="3949" href="Ledger.Conway.Conformance.Epoch.html#3949" class="Bound">vDeposits</a>  <a id="3960" class="Symbol">=</a> <a id="3962" href="Ledger.Conway.Conformance.Certs.html#1070" class="Function">gState</a> <a id="3969" class="Symbol">.</a><a id="3970" href="Ledger.Conway.Conformance.Certs.html#941" class="Field">deposits</a>

      <a id="3986" href="Ledger.Conway.Conformance.Epoch.html#3986" class="Bound">dState&#39;</a> <a id="3994" class="Symbol">:</a> <a id="3996" href="Ledger.Conway.Conformance.Certs.html#617" class="Record">DState</a>
      <a id="4009" href="Ledger.Conway.Conformance.Epoch.html#3986" class="Bound">dState&#39;</a> <a id="4017" class="Symbol">=</a> <a id="4019" class="Keyword">record</a> <a id="4026" href="Ledger.Conway.Conformance.Certs.html#1030" class="Function">dState</a> <a id="4033" class="Symbol">{</a> <a id="4035" href="Ledger.Conway.Conformance.Certs.html#744" class="Field">rewards</a> <a id="4043" class="Symbol">=</a> <a id="4045" href="Ledger.Conway.Conformance.Certs.html#1030" class="Function">dState</a> <a id="4052" class="Symbol">.</a><a id="4053" href="Ledger.Conway.Conformance.Certs.html#744" class="Field">rewards</a> <a id="4061" href="Axiom.Set.Map.Dec.html#2052" class="Function Operator">∪⁺</a> <a id="4064" href="Ledger.Conway.Conformance.Epoch.html#3825" class="Bound">refunds</a> <a id="4072" class="Symbol">}</a>

      <a id="4081" href="Ledger.Conway.Conformance.Epoch.html#4081" class="Bound">pState&#39;</a> <a id="4089" class="Symbol">:</a> <a id="4091" href="Ledger.Conway.Specification.Certs.html#4031" class="Record">PState</a>
      <a id="4104" href="Ledger.Conway.Conformance.Epoch.html#4081" class="Bound">pState&#39;</a> <a id="4112" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{4116}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1050}{\htmlId{4117}{\htmlClass{Function}{\text{pState}}}}\, \,\htmlId{4124}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Certs.html#4063}{\htmlId{4125}{\htmlClass{Field}{\text{pools}}}}\,\,\htmlId{4130}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#12840}{\htmlId{4132}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3729}{\htmlId{4134}{\htmlClass{Bound}{\text{retired}}}}\, \,\href{Axiom.Set.Map.html#12840}{\htmlId{4142}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\htmlId{4146}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1050}{\htmlId{4147}{\htmlClass{Function}{\text{pState}}}}\, \,\htmlId{4154}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Certs.html#4085}{\htmlId{4155}{\htmlClass{Field}{\text{retiring}}}}\,\,\htmlId{4163}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#12840}{\htmlId{4165}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3729}{\htmlId{4167}{\htmlClass{Bound}{\text{retired}}}}\, \,\href{Axiom.Set.Map.html#12840}{\htmlId{4175}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \end{pmatrix}$</a>

      <a id="4186" href="Ledger.Conway.Conformance.Epoch.html#4186" class="Bound">gState&#39;</a> <a id="4194" class="Symbol">:</a> <a id="4196" href="Ledger.Conway.Conformance.Certs.html#803" class="Record">GState</a>
      <a id="4209" href="Ledger.Conway.Conformance.Epoch.html#4186" class="Bound">gState&#39;</a> <a id="4217" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{4221}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Class.ToBool.html#342}{\htmlId{4222}{\htmlClass{Function Operator}{\text{if}}}}\, \,\href{Data.List.Base.html#4681}{\htmlId{4225}{\htmlClass{Function}{\text{null}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3179}{\htmlId{4230}{\htmlClass{Bound}{\text{govSt&#39;}}}}\, \,\href{Class.ToBool.html#342}{\htmlId{4237}{\htmlClass{Function Operator}{\text{then}}}}\, \,\href{Axiom.Set.Map.html#7106}{\htmlId{4242}{\htmlClass{Function}{\text{mapValues}}}}\, \,\htmlId{4252}{\htmlClass{Symbol}{\text{(}}}\,\,\htmlId{4253}{\htmlClass{Number}{\text{1}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{4255}{\htmlClass{Field Operator}{\text{+\_}}}}\,\,\htmlId{4257}{\htmlClass{Symbol}{\text{)}}}\, \,\htmlId{4259}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1070}{\htmlId{4260}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{4267}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#858}{\htmlId{4268}{\htmlClass{Field}{\text{dreps}}}}\,\,\htmlId{4273}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Class.ToBool.html#342}{\htmlId{4275}{\htmlClass{Function Operator}{\text{else}}}}\, \,\htmlId{4280}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1070}{\htmlId{4281}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{4288}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#858}{\htmlId{4289}{\htmlClass{Field}{\text{dreps}}}}\,\,\htmlId{4294}{\htmlClass{Symbol}{\text{))}}}\,
                , \,\htmlId{4315}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1070}{\htmlId{4316}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{4323}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#894}{\htmlId{4324}{\htmlClass{Field}{\text{ccHotKeys}}}}\,\,\htmlId{4333}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#12770}{\htmlId{4335}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Enact.html#1366}{\htmlId{4337}{\htmlClass{Function}{\text{ccCreds}}}}\, \,\htmlId{4345}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#2855}{\htmlId{4346}{\htmlClass{Bound}{\text{es}}}}\, \,\htmlId{4349}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Enact.html#484}{\htmlId{4350}{\htmlClass{Field}{\text{cc}}}}\,\,\htmlId{4352}{\htmlClass{Symbol}{\text{)}}}\,
                , \,\href{Ledger.Conway.Conformance.Epoch.html#3949}{\htmlId{4372}{\htmlClass{Bound}{\text{vDeposits}}}}\,
                \end{pmatrix}$</a>

      <a id="4407" href="Ledger.Conway.Conformance.Epoch.html#4407" class="Bound">certState&#39;</a> <a id="4418" class="Symbol">:</a> <a id="4420" href="Ledger.Conway.Conformance.Certs.html#971" class="Record">CertState</a>
      <a id="4436" href="Ledger.Conway.Conformance.Epoch.html#4407" class="Bound">certState&#39;</a> <a id="4447" class="Symbol">=</a> <a id="4449" class="Keyword">record</a> <a id="4456" class="Symbol">{</a> <a id="4458" href="Ledger.Conway.Conformance.Certs.html#1030" class="Field">dState</a> <a id="4465" class="Symbol">=</a> <a id="4467" href="Ledger.Conway.Conformance.Epoch.html#3986" class="Bound">dState&#39;</a> <a id="4475" class="Symbol">;</a> <a id="4477" href="Ledger.Conway.Conformance.Certs.html#1050" class="Field">pState</a> <a id="4484" class="Symbol">=</a> <a id="4486" href="Ledger.Conway.Conformance.Epoch.html#4081" class="Bound">pState&#39;</a> <a id="4494" class="Symbol">;</a> <a id="4496" href="Ledger.Conway.Conformance.Certs.html#1070" class="Field">gState</a> <a id="4503" class="Symbol">=</a> <a id="4505" href="Ledger.Conway.Conformance.Epoch.html#4186" class="Bound">gState&#39;</a> <a id="4513" class="Symbol">}</a>

      <a id="4522" href="Ledger.Conway.Conformance.Epoch.html#4522" class="Bound">utxoSt&#39;</a> <a id="4530" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{4534}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4541}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1294}{\htmlId{4542}{\htmlClass{Field}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{4549}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4556}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1316}{\htmlId{4557}{\htmlClass{Field}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{4564}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4571}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1338}{\htmlId{4572}{\htmlClass{Field}{\text{deposits}}}}\, \,\href{Axiom.Set.Map.html#12840}{\htmlId{4581}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{abstract-set-theory.FiniteSetTheory.html#519}{\htmlId{4583}{\htmlClass{Function}{\text{mapˢ}}}}\, \,\htmlId{4588}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Data.Product.Base.html#636}{\htmlId{4589}{\htmlClass{Field}{\text{proj₁}}}}\, \,\href{Function.Base.html#1134}{\htmlId{4595}{\htmlClass{Function Operator}{\text{∘}}}}\, \,\href{Data.Product.Base.html#650}{\htmlId{4597}{\htmlClass{Field}{\text{proj₂}}}}\,\,\htmlId{4602}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3250}{\htmlId{4604}{\htmlClass{Bound}{\text{removedGovActions}}}}\, \,\href{Axiom.Set.Map.html#12840}{\htmlId{4622}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\htmlId{4626}{\htmlClass{Number}{\text{0}}}\, \end{pmatrix}$</a>

      <a id="4637" href="Ledger.Conway.Conformance.Epoch.html#4637" class="Bound">acnt&#39;</a> <a id="4643" class="Symbol">=</a> <a id="4645" class="Keyword">record</a> <a id="4652" href="Ledger.Conway.Conformance.Epoch.html#2360" class="Generalizable">acnt</a>
        <a id="4665" class="Symbol">{</a> <a id="4667" href="Ledger.Conway.Specification.PParams.html#775" class="Field">treasury</a>  <a id="4677" class="Symbol">=</a> <a id="4679" href="Ledger.Conway.Conformance.Epoch.html#2360" class="Generalizable">acnt</a> <a id="4684" class="Symbol">.</a><a id="4685" href="Ledger.Conway.Specification.PParams.html#775" class="Field">treasury</a> <a id="4694" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="4696" href="Ledger.Conway.Conformance.Epoch.html#3679" class="Bound">totWithdrawals</a> <a id="4711" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4713" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="4720" class="Symbol">.</a><a id="4721" href="Ledger.Conway.Specification.Utxo.html#1364" class="Field">donations</a> <a id="4731" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4733" href="Ledger.Conway.Conformance.Epoch.html#3897" class="Bound">unclaimed</a> <a id="4743" class="Symbol">}</a>

      <a id="4752" href="Ledger.Conway.Conformance.Epoch.html#4752" class="Bound">stakeDistrs</a> <a id="4764" class="Symbol">:</a> <a id="4766" href="Ledger.Conway.Specification.Ratify.html#2963" class="Record">StakeDistrs</a>
      <a id="4784" href="Ledger.Conway.Conformance.Epoch.html#4752" class="Bound">stakeDistrs</a> <a id="4796" class="Symbol">=</a> <a id="4798" href="Ledger.Conway.Specification.Epoch.html#11996" class="Function">mkStakeDistrs</a> <a id="4812" class="Symbol">(</a><a id="4813" href="Ledger.Conway.Specification.Rewards.html#7779" class="Field">Snapshots.mark</a> <a id="4828" href="Ledger.Conway.Conformance.Epoch.html#2454" class="Generalizable">ss&#39;</a><a id="4831" class="Symbol">)</a> <a id="4833" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="4835" href="Ledger.Conway.Conformance.Epoch.html#4522" class="Bound">utxoSt&#39;</a> <a id="4843" href="Ledger.Conway.Conformance.Epoch.html#3179" class="Bound">govSt&#39;</a> <a id="4850" class="Symbol">(</a><a id="4851" class="Keyword">record</a> <a id="4858" class="Symbol">{</a> <a id="4860" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Module">GState</a> <a id="4867" class="Symbol">(</a><a id="4868" href="Ledger.Conway.Conformance.Certs.html#1070" class="Field">CertState.gState</a> <a id="4885" class="Symbol">(</a><a id="4886" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">LState.certState</a> <a id="4903" href="Ledger.Conway.Conformance.Epoch.html#2346" class="Generalizable">ls</a><a id="4905" class="Symbol">))</a> <a id="4908" class="Symbol">})</a>
                                                                        <a id="4983" class="Symbol">(</a><a id="4984" class="Keyword">record</a> <a id="4991" class="Symbol">{</a> <a id="4993" href="Ledger.Conway.Conformance.Epoch.html#4993" class="Module">DState</a> <a id="5000" class="Symbol">(</a><a id="5001" href="Ledger.Conway.Conformance.Certs.html#1030" class="Field">CertState.dState</a> <a id="5018" class="Symbol">(</a><a id="5019" href="Ledger.Conway.Conformance.Ledger.html#887" class="Field">LState.certState</a> <a id="5036" href="Ledger.Conway.Conformance.Epoch.html#2346" class="Generalizable">ls</a><a id="5038" class="Symbol">))</a> <a id="5041" class="Symbol">})</a>

    <a id="5049" class="Keyword">in</a>
    <a id="5056" class="Keyword">record</a> <a id="5063" class="Symbol">{</a> <a id="5065" href="Ledger.Conway.Specification.Ratify.html#3149" class="Field">currentEpoch</a> <a id="5078" class="Symbol">=</a> <a id="5080" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a>
           <a id="5093" class="Symbol">;</a> <a id="5095" href="Ledger.Conway.Specification.Ratify.html#3117" class="Field">stakeDistrs</a> <a id="5107" class="Symbol">=</a> <a id="5109" href="Ledger.Conway.Conformance.Epoch.html#4752" class="Bound">stakeDistrs</a>
           <a id="5132" class="Symbol">;</a> <a id="5134" href="Ledger.Conway.Specification.Ratify.html#3264" class="Field">treasury</a> <a id="5143" class="Symbol">=</a> <a id="5145" href="Ledger.Conway.Conformance.Epoch.html#2360" class="Generalizable">acnt</a> <a id="5150" class="Symbol">.</a><a id="5151" href="Ledger.Conway.Specification.PParams.html#775" class="Field">treasury</a> <a id="5160" class="Symbol">;</a> <a id="5162" href="Ledger.Conway.Conformance.Epoch.html#5162" class="Module">GState</a> <a id="5169" href="Ledger.Conway.Conformance.Certs.html#1070" class="Function">gState</a>
           <a id="5187" class="Symbol">;</a> <a id="5189" href="Ledger.Conway.Specification.Ratify.html#3293" class="Field">pools</a> <a id="5195" class="Symbol">=</a> <a id="5197" href="Ledger.Conway.Conformance.Certs.html#1050" class="Function">pState</a> <a id="5204" class="Symbol">.</a><a id="5205" href="Ledger.Conway.Specification.Certs.html#4063" class="Field">pools</a> <a id="5211" class="Symbol">;</a> <a id="5213" href="Ledger.Conway.Specification.Ratify.html#3339" class="Field">delegatees</a> <a id="5224" class="Symbol">=</a> <a id="5226" href="Ledger.Conway.Conformance.Certs.html#1030" class="Function">dState</a> <a id="5233" class="Symbol">.</a><a id="5234" href="Ledger.Conway.Conformance.Certs.html#674" class="Field">voteDelegs</a> <a id="5245" class="Symbol">}</a>
        <a id="5255" href="Ledger.Conway.Specification.Ratify.html#11729" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2855}{\htmlId{5259}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Class.HasEmptySet.html#287}{\htmlId{5264}{\htmlClass{Field}{\text{∅}}}}\, \\ \,\href{Agda.Builtin.Bool.html#192}{\htmlId{5268}{\htmlClass{InductiveConstructor}{\text{false}}}}\, \end{pmatrix}$</a> <a id="5276" href="Ledger.Conway.Specification.Ratify.html#11729" class="Function Operator">⇀⦇</a> <a id="5279" href="Ledger.Conway.Conformance.Epoch.html#3179" class="Bound">govSt&#39;</a> <a id="5286" href="Ledger.Conway.Specification.Ratify.html#11729" class="Function Operator">,RATIFIES⦈</a> <a id="5297" href="Ledger.Conway.Conformance.Epoch.html#2295" class="Generalizable">fut&#39;</a>
      <a id="5308" class="Symbol">→</a> <a id="5310" href="Ledger.Conway.Conformance.Epoch.html#2346" class="Generalizable">ls</a> <a id="5313" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">⊢</a> <a id="5315" href="Ledger.Conway.Conformance.Epoch.html#2451" class="Generalizable">ss</a> <a id="5318" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">⇀⦇</a> <a id="5321" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="5324" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">,SNAP⦈</a> <a id="5331" href="Ledger.Conway.Conformance.Epoch.html#2454" class="Generalizable">ss&#39;</a>
    <a id="5339" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
    <a id="5376" class="Symbol">_</a> <a id="5378" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2360}{\htmlId{5382}{\htmlClass{Generalizable}{\text{acnt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2451}{\htmlId{5389}{\htmlClass{Generalizable}{\text{ss}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2346}{\htmlId{5394}{\htmlClass{Generalizable}{\text{ls}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2374}{\htmlId{5399}{\htmlClass{Generalizable}{\text{es₀}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2291}{\htmlId{5405}{\htmlClass{Generalizable}{\text{fut}}}}\, \end{pmatrix}$</a> <a id="5411" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">⇀⦇</a> <a id="5414" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="5416" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">,EPOCH⦈</a>
        <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#4637}{\htmlId{5434}{\htmlClass{Bound}{\text{acnt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2454}{\htmlId{5442}{\htmlClass{Generalizable}{\text{ss&#39;}}}}\, \\ \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#4522}{\htmlId{5450}{\htmlClass{Bound}{\text{utxoSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#3179}{\htmlId{5460}{\htmlClass{Bound}{\text{govSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#4407}{\htmlId{5469}{\htmlClass{Bound}{\text{certState&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2855}{\htmlId{5484}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2295}{\htmlId{5489}{\htmlClass{Generalizable}{\text{fut&#39;}}}}\, \end{pmatrix}$</a>

<a id="5497" class="Keyword">data</a> <a id="_⊢_⇀⦇_,NEWEPOCH⦈_"></a><a id="5502" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">_⊢_⇀⦇_,NEWEPOCH⦈_</a> <a id="5520" class="Symbol">:</a> <a id="5522" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="5524" class="Symbol">→</a> <a id="5526" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a> <a id="5540" class="Symbol">→</a> <a id="5542" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a> <a id="5548" class="Symbol">→</a> <a id="5550" href="Ledger.Conway.Conformance.Epoch.html#1187" class="Record">NewEpochState</a> <a id="5564" class="Symbol">→</a> <a id="5566" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5571" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-New"></a><a id="5580" href="Ledger.Conway.Conformance.Epoch.html#5580" class="InductiveConstructor">NEWEPOCH-New</a> <a id="5593" class="Symbol">:</a> <a id="5595" class="Keyword">let</a>
      <a id="5605" href="Ledger.Conway.Conformance.Epoch.html#5605" class="Bound">eps&#39;</a> <a id="5610" class="Symbol">=</a> <a id="5612" href="Ledger.Conway.Conformance.Epoch.html#1502" class="Function">applyRUpd</a> <a id="5622" href="Ledger.Conway.Conformance.Epoch.html#2472" class="Generalizable">ru</a> <a id="5625" href="Ledger.Conway.Conformance.Epoch.html#2316" class="Generalizable">eps</a>
    <a id="5633" class="Keyword">in</a>
    <a id="5640" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5642" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="5644" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5646" href="Ledger.Conway.Conformance.Epoch.html#2271" class="Generalizable">lastEpoch</a> <a id="5656" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5658" class="Number">1</a>
    <a id="5664" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="5666" class="Symbol">_</a> <a id="5668" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">⊢</a> <a id="5670" href="Ledger.Conway.Conformance.Epoch.html#5605" class="Bound">eps&#39;</a> <a id="5675" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">⇀⦇</a> <a id="5678" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="5680" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">,EPOCH⦈</a> <a id="5688" href="Ledger.Conway.Conformance.Epoch.html#2325" class="Generalizable">eps&#39;&#39;</a>
      <a id="5700" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="5739" class="Symbol">_</a> <a id="5741" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2271}{\htmlId{5745}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2316}{\htmlId{5757}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#173}{\htmlId{5763}{\htmlClass{InductiveConstructor}{\text{just}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2472}{\htmlId{5768}{\htmlClass{Generalizable}{\text{ru}}}}\, \end{pmatrix}$</a> <a id="5773" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⇀⦇</a> <a id="5776" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="5778" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2269}{\htmlId{5791}{\htmlClass{Generalizable}{\text{e}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2325}{\htmlId{5795}{\htmlClass{Generalizable}{\text{eps&#39;&#39;}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{5803}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-Not-New"></a><a id="5816" href="Ledger.Conway.Conformance.Epoch.html#5816" class="InductiveConstructor">NEWEPOCH-Not-New</a> <a id="5833" class="Symbol">:</a>
    <a id="5839" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5841" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="5843" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="5845" href="Ledger.Conway.Conformance.Epoch.html#2271" class="Generalizable">lastEpoch</a> <a id="5855" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5857" class="Number">1</a>
      <a id="5865" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="5904" class="Symbol">_</a> <a id="5906" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2271}{\htmlId{5910}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2316}{\htmlId{5922}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2492}{\htmlId{5928}{\htmlClass{Generalizable}{\text{mru}}}}\, \end{pmatrix}$</a> <a id="5934" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⇀⦇</a> <a id="5937" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="5939" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2271}{\htmlId{5952}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2316}{\htmlId{5964}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2492}{\htmlId{5970}{\htmlClass{Generalizable}{\text{mru}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-No-Reward-Update"></a><a id="5979" href="Ledger.Conway.Conformance.Epoch.html#5979" class="InductiveConstructor">NEWEPOCH-No-Reward-Update</a> <a id="6005" class="Symbol">:</a>
    <a id="6011" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="6013" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="6015" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6017" href="Ledger.Conway.Conformance.Epoch.html#2271" class="Generalizable">lastEpoch</a> <a id="6027" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="6029" class="Number">1</a>
    <a id="6035" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="6037" class="Symbol">_</a> <a id="6039" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">⊢</a> <a id="6041" href="Ledger.Conway.Conformance.Epoch.html#2316" class="Generalizable">eps</a> <a id="6045" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">⇀⦇</a> <a id="6048" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="6050" href="Ledger.Conway.Conformance.Epoch.html#2548" class="Datatype Operator">,EPOCH⦈</a> <a id="6058" href="Ledger.Conway.Conformance.Epoch.html#2320" class="Generalizable">eps&#39;</a>
      <a id="6069" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="6108" class="Symbol">_</a> <a id="6110" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2271}{\htmlId{6114}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2316}{\htmlId{6126}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{6132}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a> <a id="6142" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">⇀⦇</a> <a id="6145" href="Ledger.Conway.Conformance.Epoch.html#2269" class="Generalizable">e</a> <a id="6147" href="Ledger.Conway.Conformance.Epoch.html#5502" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2269}{\htmlId{6160}{\htmlClass{Generalizable}{\text{e}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2320}{\htmlId{6164}{\htmlClass{Generalizable}{\text{eps&#39;}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{6171}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a>
</pre></body></html>