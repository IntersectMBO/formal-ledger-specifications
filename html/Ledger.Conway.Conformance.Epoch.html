<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Epoch</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Core.Specification.Abstract.html" class="Module">Ledger.Core.Specification.Abstract</a>
<a id="72" class="Keyword">open</a> <a id="77" class="Keyword">import</a> <a id="84" href="Ledger.Core.Specification.Transaction.html" class="Module">Ledger.Core.Specification.Transaction</a>

<a id="123" class="Keyword">module</a> <a id="130" href="Ledger.Conway.Conformance.Epoch.html" class="Module">Ledger.Conway.Conformance.Epoch</a>
  <a id="164" class="Symbol">(</a><a id="165" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a> <a id="169" class="Symbol">:</a> <a id="171" href="Ledger.Core.Specification.Transaction.html#896" class="Record">TransactionStructure</a><a id="191" class="Symbol">)</a> <a id="193" class="Symbol">(</a><a id="194" class="Keyword">open</a> <a id="199" href="Ledger.Core.Specification.Transaction.html#896" class="Module">TransactionStructure</a> <a id="220" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a><a id="223" class="Symbol">)</a>
  <a id="227" class="Symbol">(</a><a id="228" href="Ledger.Conway.Conformance.Epoch.html#228" class="Bound">abs</a> <a id="232" class="Symbol">:</a> <a id="234" href="Ledger.Core.Specification.Abstract.html#651" class="Record">AbstractFunctions</a> <a id="252" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a><a id="255" class="Symbol">)</a>
  <a id="259" class="Keyword">where</a>

<a id="266" class="Keyword">open</a> <a id="271" class="Keyword">import</a> <a id="278" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="324" class="Keyword">using</a> <a id="330" class="Symbol">()</a> <a id="333" class="Keyword">renaming</a> <a id="342" class="Symbol">(</a><a id="343" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">+_</a> <a id="346" class="Symbol">to</a> <a id="349" class="InductiveConstructor">pos</a><a id="352" class="Symbol">)</a>
<a id="354" class="Keyword">open</a> <a id="359" class="Keyword">import</a> <a id="366" href="Data.List.html" class="Module">Data.List</a> <a id="376" class="Keyword">using</a> <a id="382" class="Symbol">(</a><a id="383" href="Data.List.Base.html#10389" class="Function">filter</a><a id="389" class="Symbol">)</a>

<a id="392" class="Keyword">open</a> <a id="397" class="Keyword">import</a> <a id="404" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>

<a id="420" class="Keyword">open</a> <a id="425" class="Keyword">import</a> <a id="432" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="464" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="522" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a> <a id="526" href="Ledger.Conway.Conformance.Epoch.html#228" class="Bound">abs</a>
<a id="530" class="Keyword">open</a> <a id="535" class="Keyword">import</a> <a id="542" href="Ledger.Conway.Conformance.Rewards.html" class="Module">Ledger.Conway.Conformance.Rewards</a> <a id="576" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a> <a id="580" href="Ledger.Conway.Conformance.Epoch.html#228" class="Bound">abs</a>
<a id="584" class="Keyword">open</a> <a id="589" class="Keyword">import</a> <a id="596" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="627" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a> <a id="631" href="Ledger.Conway.Conformance.Epoch.html#228" class="Bound">abs</a>

<a id="636" class="Keyword">open</a> <a id="641" class="Keyword">import</a> <a id="648" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="682" href="Ledger.Core.Specification.Transaction.html#1970" class="Function">govStructure</a>
<a id="695" class="Keyword">open</a> <a id="700" class="Keyword">import</a> <a id="707" href="Ledger.Conway.Specification.Epoch.html" class="Module">Ledger.Conway.Specification.Epoch</a> <a id="741" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a> <a id="745" href="Ledger.Conway.Conformance.Epoch.html#228" class="Bound">abs</a>
  <a id="751" class="Keyword">using</a> <a id="757" class="Symbol">(</a><a id="758" href="Ledger.Conway.Specification.Epoch.html#5348" class="Function">getStakeCred</a><a id="770" class="Symbol">;</a> <a id="772" href="Ledger.Conway.Specification.Epoch.html#13057" class="Function">getOrphans</a><a id="782" class="Symbol">;</a> <a id="784" href="Ledger.Conway.Specification.Epoch.html#12366" class="Function">mkStakeDistrs</a><a id="797" class="Symbol">;</a> <a id="799" href="Ledger.Conway.Specification.Epoch.html#5261" class="Function">toRwdAddr</a><a id="808" class="Symbol">)</a> <a id="810" class="Keyword">public</a>
<a id="817" class="Keyword">open</a> <a id="822" class="Keyword">import</a> <a id="829" href="Ledger.Conway.Specification.Ratify.html" class="Module">Ledger.Conway.Specification.Ratify</a> <a id="864" href="Ledger.Conway.Conformance.Epoch.html#165" class="Bound">txs</a>

<a id="869" class="Keyword">record</a> <a id="EpochState"></a><a id="876" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a> <a id="887" class="Symbol">:</a> <a id="889" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="894" class="Keyword">where</a>
  <a id="902" class="Keyword">constructor</a> <a id="⟦_,_,_,_,_⟧ᵉ&#39;"></a><a id="914" href="Ledger.Conway.Conformance.Epoch.html#914" class="InductiveConstructor Operator">⟦_,_,_,_,_⟧ᵉ&#39;</a>
  <a id="930" class="Keyword">field</a>
    <a id="EpochState.acnt"></a><a id="940" href="Ledger.Conway.Conformance.Epoch.html#940" class="Field">acnt</a>       <a id="951" class="Symbol">:</a> <a id="953" href="Ledger.Conway.Specification.PParams.html#718" class="Record">Acnt</a>
    <a id="EpochState.ss"></a><a id="962" href="Ledger.Conway.Conformance.Epoch.html#962" class="Field">ss</a>         <a id="973" class="Symbol">:</a> <a id="975" href="Ledger.Conway.Specification.Rewards.html#7734" class="Record">Snapshots</a>
    <a id="EpochState.ls"></a><a id="989" href="Ledger.Conway.Conformance.Epoch.html#989" class="Field">ls</a>         <a id="1000" class="Symbol">:</a> <a id="1002" href="Ledger.Conway.Conformance.Ledger.html#738" class="Record">LState</a>
    <a id="EpochState.es"></a><a id="1013" href="Ledger.Conway.Conformance.Epoch.html#1013" class="Field">es</a>         <a id="1024" class="Symbol">:</a> <a id="1026" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a>
    <a id="EpochState.fut"></a><a id="1041" href="Ledger.Conway.Conformance.Epoch.html#1041" class="Field">fut</a>        <a id="1052" class="Symbol">:</a> <a id="1054" href="Ledger.Conway.Specification.Ratify.html#3526" class="Record">RatifyState</a>

<a id="1067" class="Keyword">record</a> <a id="NewEpochState"></a><a id="1074" href="Ledger.Conway.Conformance.Epoch.html#1074" class="Record">NewEpochState</a> <a id="1088" class="Symbol">:</a> <a id="1090" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1095" class="Keyword">where</a>
  <a id="1103" class="Keyword">field</a>
    <a id="NewEpochState.lastEpoch"></a><a id="1113" href="Ledger.Conway.Conformance.Epoch.html#1113" class="Field">lastEpoch</a>   <a id="1125" class="Symbol">:</a> <a id="1127" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a>
    <a id="NewEpochState.epochState"></a><a id="1137" href="Ledger.Conway.Conformance.Epoch.html#1137" class="Field">epochState</a>  <a id="1149" class="Symbol">:</a> <a id="1151" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a>
    <a id="NewEpochState.ru"></a><a id="1166" href="Ledger.Conway.Conformance.Epoch.html#1166" class="Field">ru</a>          <a id="1178" class="Symbol">:</a> <a id="1180" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1186" href="Ledger.Conway.Specification.Rewards.html#6264" class="Record">RewardUpdate</a>

<a id="1200" class="Keyword">instance</a>
  <a id="1211" class="Keyword">unquoteDecl</a> <a id="HasCast-EpochState"></a><a id="1223" href="Ledger.Conway.Conformance.Epoch.html#1223" class="Function">HasCast-EpochState</a> <a id="HasCast-NewEpochState"></a><a id="1242" href="Ledger.Conway.Conformance.Epoch.html#1242" class="Function">HasCast-NewEpochState</a> <a id="1264" class="Symbol">=</a> <a id="1266" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1285" class="Symbol">(</a> <a id="1287" class="Symbol">(</a><a id="1288" class="Keyword">quote</a> <a id="1294" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a>     <a id="1309" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1311" href="Ledger.Conway.Conformance.Epoch.html#1223" class="Function">HasCast-EpochState</a><a id="1329" class="Symbol">)</a>
    <a id="1335" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1337" href="Data.List.Base.html#4907" class="Function Operator">[</a> <a id="1339" class="Symbol">(</a><a id="1340" class="Keyword">quote</a> <a id="1346" href="Ledger.Conway.Conformance.Epoch.html#1074" class="Record">NewEpochState</a>  <a id="1361" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1363" href="Ledger.Conway.Conformance.Epoch.html#1242" class="Function">HasCast-NewEpochState</a><a id="1384" class="Symbol">)</a><a id="1385" href="Data.List.Base.html#4907" class="Function Operator">]</a><a id="1386" class="Symbol">)</a>

<a id="applyRUpd"></a><a id="1389" href="Ledger.Conway.Conformance.Epoch.html#1389" class="Function">applyRUpd</a> <a id="1399" class="Symbol">:</a> <a id="1401" href="Ledger.Conway.Specification.Rewards.html#6264" class="Record">RewardUpdate</a> <a id="1414" class="Symbol">→</a> <a id="1416" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a> <a id="1427" class="Symbol">→</a> <a id="1429" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a>
<a id="1440" href="Ledger.Conway.Conformance.Epoch.html#1389" class="Function">applyRUpd</a> <a id="1450" href="Ledger.Conway.Conformance.Epoch.html#1450" class="Bound">rewardUpdate</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1469}{\htmlId{1469}{\htmlClass{Bound}{\text{treasury}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1480}{\htmlId{1480}{\htmlClass{Bound}{\text{reserves}}}}\, \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1496}{\htmlId{1496}{\htmlClass{Bound}{\text{ss}}}}\,
  \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1507}{\htmlId{1507}{\htmlClass{Bound}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1514}{\htmlId{1514}{\htmlClass{Bound}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1521}{\htmlId{1521}{\htmlClass{Bound}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1532}{\htmlId{1532}{\htmlClass{Bound}{\text{donations}}}}\, \end{pmatrix}
    \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1551}{\htmlId{1551}{\htmlClass{Bound}{\text{govSt}}}}\,
    \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1567}{\htmlId{1567}{\htmlClass{Bound}{\text{voteDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1580}{\htmlId{1580}{\htmlClass{Bound}{\text{stakeDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1594}{\htmlId{1594}{\htmlClass{Bound}{\text{rewards}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1604}{\htmlId{1604}{\htmlClass{Bound}{\text{deposits&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1619}{\htmlId{1619}{\htmlClass{Bound}{\text{pState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1628}{\htmlId{1628}{\htmlClass{Bound}{\text{gState}}}}\, \end{pmatrix} \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1646}{\htmlId{1646}{\htmlClass{Bound}{\text{es}}}}\,
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1653}{\htmlId{1653}{\htmlClass{Bound}{\text{fut}}}}\,
  \end{pmatrix}$</a> <a id="1663" class="Symbol">=</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\href{Prelude.html#3280}{\htmlId{1671}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1679}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#349}{\htmlId{1680}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1469}{\htmlId{1684}{\htmlClass{Bound}{\text{treasury}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1693}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#6301}{\htmlId{1695}{\htmlClass{Function}{\text{Δt}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1698}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#349}{\htmlId{1700}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2078}{\htmlId{1704}{\htmlClass{Function}{\text{unregRU&#39;}}}}\,\,\htmlId{1712}{\htmlClass{Symbol}{\text{)}}}\,
    \\ \,\href{Prelude.html#3280}{\htmlId{1720}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1728}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#349}{\htmlId{1729}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1480}{\htmlId{1733}{\htmlClass{Bound}{\text{reserves}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1742}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#6304}{\htmlId{1744}{\htmlClass{Function}{\text{Δr}}}}\,\,\htmlId{1746}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1496}{\htmlId{1754}{\htmlClass{Bound}{\text{ss}}}}\,
  \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1507}{\htmlId{1765}{\htmlClass{Bound}{\text{utxo}}}}\, \\ \,\href{Prelude.html#3280}{\htmlId{1772}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1780}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#349}{\htmlId{1781}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1514}{\htmlId{1785}{\htmlClass{Bound}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1790}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#6307}{\htmlId{1792}{\htmlClass{Function}{\text{Δf}}}}\,\,\htmlId{1794}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1521}{\htmlId{1798}{\htmlClass{Bound}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1532}{\htmlId{1809}{\htmlClass{Bound}{\text{donations}}}}\, \end{pmatrix}
    \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1551}{\htmlId{1827}{\htmlClass{Bound}{\text{govSt}}}}\,
    \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1567}{\htmlId{1843}{\htmlClass{Bound}{\text{voteDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1580}{\htmlId{1856}{\htmlClass{Bound}{\text{stakeDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1594}{\htmlId{1870}{\htmlClass{Bound}{\text{rewards}}}}\, \,\href{Axiom.Set.Map.Dec.html#2052}{\htmlId{1878}{\htmlClass{Function Operator}{\text{∪⁺}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2010}{\htmlId{1881}{\htmlClass{Function}{\text{regRU}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1604}{\htmlId{1889}{\htmlClass{Bound}{\text{deposits&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1619}{\htmlId{1903}{\htmlClass{Bound}{\text{pState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1628}{\htmlId{1912}{\htmlClass{Bound}{\text{gState}}}}\, \end{pmatrix} \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1646}{\htmlId{1927}{\htmlClass{Bound}{\text{es}}}}\,
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1653}{\htmlId{1934}{\htmlClass{Bound}{\text{fut}}}}\, \end{pmatrix}$</a>
  <a id="1942" class="Keyword">where</a>
    <a id="1952" class="Keyword">open</a> <a id="1957" href="Ledger.Conway.Specification.Rewards.html#6264" class="Module">RewardUpdate</a> <a id="1970" href="Ledger.Conway.Conformance.Epoch.html#1450" class="Bound">rewardUpdate</a> <a id="1983" class="Keyword">using</a> <a id="1989" class="Symbol">(</a><a id="1990" href="Ledger.Conway.Specification.Rewards.html#6301" class="Field">Δt</a><a id="1992" class="Symbol">;</a> <a id="1994" href="Ledger.Conway.Specification.Rewards.html#6304" class="Field">Δr</a><a id="1996" class="Symbol">;</a> <a id="1998" href="Ledger.Conway.Specification.Rewards.html#6307" class="Field">Δf</a><a id="2000" class="Symbol">;</a> <a id="2002" href="Ledger.Conway.Specification.Rewards.html#6327" class="Field">rs</a><a id="2004" class="Symbol">)</a>
    <a id="2010" href="Ledger.Conway.Conformance.Epoch.html#2010" class="Function">regRU</a>     <a id="2020" class="Symbol">=</a> <a id="2022" href="Ledger.Conway.Specification.Rewards.html#6327" class="Function">rs</a> <a id="2025" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="2027" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2031" href="Ledger.Conway.Conformance.Epoch.html#1594" class="Bound">rewards</a>
    <a id="2043" href="Ledger.Conway.Conformance.Epoch.html#2043" class="Function">unregRU</a>   <a id="2053" class="Symbol">=</a> <a id="2055" href="Ledger.Conway.Specification.Rewards.html#6327" class="Function">rs</a> <a id="2058" href="Axiom.Set.Map.html#13604" class="Function Operator">∣</a> <a id="2060" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2064" href="Ledger.Conway.Conformance.Epoch.html#1594" class="Bound">rewards</a> <a id="2072" href="Axiom.Set.Map.html#13604" class="Function Operator">ᶜ</a>
    <a id="2078" href="Ledger.Conway.Conformance.Epoch.html#2078" class="Function">unregRU&#39;</a>  <a id="2088" class="Symbol">=</a> <a id="2090" href="abstract-set-theory.FiniteSetTheory.html#4312" class="Function">∑[</a> <a id="2093" href="Ledger.Conway.Conformance.Epoch.html#2093" class="Bound">x</a> <a id="2095" href="abstract-set-theory.FiniteSetTheory.html#4312" class="Function">←</a> <a id="2097" href="Ledger.Conway.Conformance.Epoch.html#2043" class="Function">unregRU</a> <a id="2105" href="abstract-set-theory.FiniteSetTheory.html#4312" class="Function">]</a> <a id="2107" href="Ledger.Conway.Conformance.Epoch.html#2093" class="Bound">x</a>

<a id="2110" class="Keyword">private</a> <a id="2118" class="Keyword">variable</a>
  <a id="2129" href="Ledger.Conway.Conformance.Epoch.html#2129" class="Generalizable">nes</a> <a id="2133" href="Ledger.Conway.Conformance.Epoch.html#2133" class="Generalizable">nes&#39;</a> <a id="2138" class="Symbol">:</a> <a id="2140" href="Ledger.Conway.Conformance.Epoch.html#1074" class="Record">NewEpochState</a>
  <a id="2156" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="2158" href="Ledger.Conway.Conformance.Epoch.html#2158" class="Generalizable">lastEpoch</a> <a id="2168" class="Symbol">:</a> <a id="2170" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a>
  <a id="2178" href="Ledger.Conway.Conformance.Epoch.html#2178" class="Generalizable">fut</a> <a id="2182" href="Ledger.Conway.Conformance.Epoch.html#2182" class="Generalizable">fut&#39;</a> <a id="2187" class="Symbol">:</a> <a id="2189" href="Ledger.Conway.Specification.Ratify.html#3526" class="Record">RatifyState</a>
  <a id="2203" href="Ledger.Conway.Conformance.Epoch.html#2203" class="Generalizable">eps</a> <a id="2207" href="Ledger.Conway.Conformance.Epoch.html#2207" class="Generalizable">eps&#39;</a> <a id="2212" href="Ledger.Conway.Conformance.Epoch.html#2212" class="Generalizable">eps&#39;&#39;</a> <a id="2218" class="Symbol">:</a> <a id="2220" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a>
  <a id="2233" href="Ledger.Conway.Conformance.Epoch.html#2233" class="Generalizable">ls</a> <a id="2236" class="Symbol">:</a> <a id="2238" href="Ledger.Conway.Conformance.Ledger.html#738" class="Record">LState</a>
  <a id="2247" href="Ledger.Conway.Conformance.Epoch.html#2247" class="Generalizable">acnt</a> <a id="2252" class="Symbol">:</a> <a id="2254" href="Ledger.Conway.Specification.PParams.html#718" class="Record">Acnt</a>
  <a id="2261" href="Ledger.Conway.Conformance.Epoch.html#2261" class="Generalizable">es₀</a> <a id="2265" class="Symbol">:</a> <a id="2267" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a>
  <a id="2280" href="Ledger.Conway.Conformance.Epoch.html#2280" class="Generalizable">mark</a> <a id="2285" href="Ledger.Conway.Conformance.Epoch.html#2285" class="Generalizable">set</a> <a id="2289" href="Ledger.Conway.Conformance.Epoch.html#2289" class="Generalizable">go</a> <a id="2292" class="Symbol">:</a> <a id="2294" href="Ledger.Conway.Specification.Rewards.html#6487" class="Record">Snapshot</a>
  <a id="2305" href="Ledger.Conway.Conformance.Epoch.html#2305" class="Generalizable">feeSS</a> <a id="2311" class="Symbol">:</a> <a id="2313" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
  <a id="2320" href="Ledger.Conway.Conformance.Epoch.html#2320" class="Generalizable">lstate</a> <a id="2327" class="Symbol">:</a> <a id="2329" href="Ledger.Conway.Conformance.Ledger.html#738" class="Record">LState</a>
  <a id="2338" href="Ledger.Conway.Conformance.Epoch.html#2338" class="Generalizable">ss</a> <a id="2341" href="Ledger.Conway.Conformance.Epoch.html#2341" class="Generalizable">ss&#39;</a> <a id="2345" class="Symbol">:</a> <a id="2347" href="Ledger.Conway.Specification.Rewards.html#7734" class="Record">Snapshots</a>
  <a id="2359" href="Ledger.Conway.Conformance.Epoch.html#2359" class="Generalizable">ru</a> <a id="2362" class="Symbol">:</a> <a id="2364" href="Ledger.Conway.Specification.Rewards.html#6264" class="Record">RewardUpdate</a>
  <a id="2379" href="Ledger.Conway.Conformance.Epoch.html#2379" class="Generalizable">mru</a> <a id="2383" class="Symbol">:</a> <a id="2385" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2391" href="Ledger.Conway.Specification.Rewards.html#6264" class="Record">RewardUpdate</a>
  <a id="2406" href="Ledger.Conway.Conformance.Epoch.html#2406" class="Generalizable">certState&#39;</a> <a id="2417" class="Symbol">:</a> <a id="2419" href="Ledger.Conway.Conformance.Certs.html#952" class="Record">CertState</a>

<a id="2430" class="Keyword">data</a> <a id="_⊢_⇀⦇_,EPOCH⦈_"></a><a id="2435" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">_⊢_⇀⦇_,EPOCH⦈_</a> <a id="2450" class="Symbol">:</a> <a id="2452" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="2454" class="Symbol">→</a> <a id="2456" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a> <a id="2467" class="Symbol">→</a> <a id="2469" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a> <a id="2475" class="Symbol">→</a> <a id="2477" href="Ledger.Conway.Conformance.Epoch.html#876" class="Record">EpochState</a> <a id="2488" class="Symbol">→</a> <a id="2490" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2495" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,EPOCH⦈_.EPOCH"></a><a id="2504" href="Ledger.Conway.Conformance.Epoch.html#2504" class="InductiveConstructor">EPOCH</a> <a id="2510" class="Symbol">:</a> <a id="2512" class="Keyword">let</a>
      <a id="2522" class="Keyword">open</a> <a id="2527" href="Ledger.Conway.Conformance.Ledger.html#738" class="Module">LState</a> <a id="2534" href="Ledger.Conway.Conformance.Epoch.html#2233" class="Generalizable">ls</a>
      <a id="2543" class="Keyword">open</a> <a id="2548" href="Ledger.Conway.Conformance.Certs.html#952" class="Module">CertState</a> <a id="2558" href="Ledger.Conway.Conformance.Ledger.html#846" class="Function">certState</a>
      <a id="2574" class="Keyword">open</a> <a id="2579" href="Ledger.Conway.Specification.Ratify.html#3526" class="Module">RatifyState</a> <a id="2591" href="Ledger.Conway.Conformance.Epoch.html#2178" class="Generalizable">fut</a> <a id="2595" class="Keyword">renaming</a> <a id="2604" class="Symbol">(</a><a id="2605" href="Ledger.Conway.Specification.Ratify.html#3563" class="Field">es</a> <a id="2608" class="Symbol">to</a> <a id="2611" class="Field">esW</a><a id="2614" class="Symbol">)</a>
      <a id="2622" class="Keyword">open</a> <a id="2627" href="Ledger.Conway.Specification.Utxo.html#1306" class="Module">UTxOState</a>
      <a id="2643" class="Keyword">open</a> <a id="2648" href="Ledger.Core.Specification.Certs.html#4017" class="Module">PState</a><a id="2654" class="Symbol">;</a> <a id="2656" class="Keyword">open</a> <a id="2661" href="Ledger.Conway.Conformance.Certs.html#598" class="Module">DState</a><a id="2667" class="Symbol">;</a> <a id="2669" class="Keyword">open</a> <a id="2674" href="Ledger.Conway.Conformance.Certs.html#784" class="Module">GState</a>
      <a id="2687" class="Keyword">open</a> <a id="2692" href="Ledger.Conway.Specification.PParams.html#718" class="Module">Acnt</a><a id="2696" class="Symbol">;</a> <a id="2698" class="Keyword">open</a> <a id="2703" href="Ledger.Conway.Specification.Enact.html#444" class="Module">EnactState</a><a id="2713" class="Symbol">;</a> <a id="2715" class="Keyword">open</a> <a id="2720" href="Ledger.Core.Specification.Gov.Actions.html#3811" class="Module">GovActionState</a>

      <a id="2742" href="Ledger.Conway.Conformance.Epoch.html#2742" class="Bound">es</a> <a id="2745" class="Symbol">:</a> <a id="2747" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a>
      <a id="2764" href="Ledger.Conway.Conformance.Epoch.html#2742" class="Bound">es</a> <a id="2767" class="Symbol">=</a> <a id="2769" class="Keyword">record</a> <a id="2776" href="Ledger.Conway.Conformance.Epoch.html#2611" class="Function">esW</a> <a id="2780" class="Symbol">{</a> <a id="2782" href="Ledger.Conway.Specification.Enact.html#696" class="Field">withdrawals</a> <a id="2794" class="Symbol">=</a> <a id="2796" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="2798" class="Symbol">}</a>

      <a id="2807" href="Ledger.Conway.Conformance.Epoch.html#2807" class="Bound">tmpGovSt</a> <a id="2816" class="Symbol">=</a> <a id="2818" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="2825" class="Symbol">(λ</a> <a id="2828" href="Ledger.Conway.Conformance.Epoch.html#2828" class="Bound">x</a> <a id="2830" class="Symbol">→</a> <a id="2832" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="2834" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2840" href="Ledger.Conway.Conformance.Epoch.html#2828" class="Bound">x</a> <a id="2842" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="2844" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="2849" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2855" href="Ledger.Conway.Specification.Ratify.html#3589" class="Function">removed</a> <a id="2863" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a><a id="2864" class="Symbol">)</a> <a id="2866" href="Ledger.Conway.Conformance.Ledger.html#820" class="Function">govSt</a>

      <a id="2879" href="Ledger.Conway.Conformance.Epoch.html#2879" class="Bound">orphans</a> <a id="2887" class="Symbol">:</a> <a id="2889" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2891" class="Symbol">(</a><a id="2892" href="Ledger.Core.Specification.Gov.Actions.html#1975" class="Function">GovActionID</a> <a id="2904" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2906" href="Ledger.Core.Specification.Gov.Actions.html#3811" class="Record">GovActionState</a><a id="2920" class="Symbol">)</a>
      <a id="2928" href="Ledger.Conway.Conformance.Epoch.html#2879" class="Bound">orphans</a>  <a id="2937" class="Symbol">=</a> <a id="2939" href="Axiom.Set.html#5903" class="Function">fromList</a> <a id="2948" class="Symbol">(</a><a id="2949" href="Ledger.Conway.Specification.Epoch.html#13057" class="Function">getOrphans</a> <a id="2960" href="Ledger.Conway.Conformance.Epoch.html#2742" class="Bound">es</a> <a id="2963" href="Ledger.Conway.Conformance.Epoch.html#2807" class="Bound">tmpGovSt</a><a id="2971" class="Symbol">)</a>

      <a id="2980" href="Ledger.Conway.Conformance.Epoch.html#2980" class="Bound">removed&#39;</a> <a id="2989" class="Symbol">:</a> <a id="2991" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="2993" class="Symbol">(</a><a id="2994" href="Ledger.Core.Specification.Gov.Actions.html#1975" class="Function">GovActionID</a> <a id="3006" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3008" href="Ledger.Core.Specification.Gov.Actions.html#3811" class="Record">GovActionState</a><a id="3022" class="Symbol">)</a>
      <a id="3030" href="Ledger.Conway.Conformance.Epoch.html#2980" class="Bound">removed&#39;</a> <a id="3039" class="Symbol">=</a> <a id="3041" href="Ledger.Conway.Specification.Ratify.html#3589" class="Function">removed</a> <a id="3049" href="Axiom.Set.html#9137" class="Function Operator">∪</a> <a id="3051" href="Ledger.Conway.Conformance.Epoch.html#2879" class="Bound">orphans</a>

      <a id="3066" href="Ledger.Conway.Conformance.Epoch.html#3066" class="Bound">govSt&#39;</a> <a id="3073" class="Symbol">=</a> <a id="3075" href="Data.List.Base.html#10389" class="Function">filter</a> <a id="3082" class="Symbol">(λ</a> <a id="3085" href="Ledger.Conway.Conformance.Epoch.html#3085" class="Bound">x</a> <a id="3087" class="Symbol">→</a> <a id="3089" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a> <a id="3091" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3097" href="Ledger.Conway.Conformance.Epoch.html#3085" class="Bound">x</a> <a id="3099" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="3101" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3106" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3112" href="Ledger.Conway.Conformance.Epoch.html#2980" class="Bound">removed&#39;</a> <a id="3121" href="Class.Decidable.Core.html#470" class="Function Operator">¿</a><a id="3122" class="Symbol">)</a> <a id="3124" href="Ledger.Conway.Conformance.Ledger.html#820" class="Function">govSt</a>

      <a id="3137" href="Ledger.Conway.Conformance.Epoch.html#3137" class="Bound">removedGovActions</a> <a id="3155" class="Symbol">:</a> <a id="3157" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="3159" class="Symbol">(</a><a id="3160" href="Ledger.Core.Specification.Address.html#1313" class="Record">RwdAddr</a> <a id="3168" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3170" href="Ledger.Core.Specification.Certs.html#534" class="Datatype">DepositPurpose</a> <a id="3185" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3187" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a><a id="3191" class="Symbol">)</a>
      <a id="3199" href="Ledger.Conway.Conformance.Epoch.html#3137" class="Bound">removedGovActions</a> <a id="3217" class="Symbol">=</a>
        <a id="3227" href="Function.Base.html#1657" class="Function">flip</a> <a id="3232" href="Axiom.Set.html#7207" class="Function">concatMapˢ</a> <a id="3243" href="Ledger.Conway.Conformance.Epoch.html#2980" class="Bound">removed&#39;</a> <a id="3252" class="Symbol">λ</a> <a id="3254" class="Symbol">(</a><a id="3255" href="Ledger.Conway.Conformance.Epoch.html#3255" class="Bound">gaid</a> <a id="3260" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3262" href="Ledger.Conway.Conformance.Epoch.html#3262" class="Bound">gaSt</a><a id="3266" class="Symbol">)</a> <a id="3268" class="Symbol">→</a>
          <a id="3280" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a>
            <a id="3297" class="Symbol">(</a><a id="3298" href="Ledger.Core.Specification.Gov.Actions.html#3878" class="Field">returnAddr</a> <a id="3309" href="Ledger.Conway.Conformance.Epoch.html#3262" class="Bound">gaSt</a> <a id="3314" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3316" class="Symbol">)</a>
            <a id="3330" class="Symbol">((</a><a id="3332" href="Ledger.Conway.Conformance.Ledger.html#793" class="Function">utxoSt</a> <a id="3339" class="Symbol">.</a><a id="3340" href="Ledger.Conway.Specification.Utxo.html#1414" class="Field">deposits</a> <a id="3349" href="Axiom.Set.Map.html#13534" class="Function Operator">∣</a> <a id="3351" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="3353" href="Ledger.Core.Specification.Certs.html#723" class="InductiveConstructor">GovActionDeposit</a> <a id="3370" href="Ledger.Conway.Conformance.Epoch.html#3255" class="Bound">gaid</a> <a id="3375" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="3376" class="Symbol">)</a> <a id="3378" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="3379" class="Symbol">)</a>

      <a id="3388" href="Ledger.Conway.Conformance.Epoch.html#3388" class="Bound">govActionReturns</a> <a id="3405" class="Symbol">:</a> <a id="3407" href="Ledger.Core.Specification.Address.html#1313" class="Record">RwdAddr</a> <a id="3415" href="abstract-set-theory.FiniteSetTheory.html#633" class="Function Operator">⇀</a> <a id="3417" href="Ledger.Prelude.Base.html#154" class="Function">Coin</a>
      <a id="3428" href="Ledger.Conway.Conformance.Epoch.html#3388" class="Bound">govActionReturns</a> <a id="3445" class="Symbol">=</a>
        <a id="3455" href="Axiom.Set.Map.Dec.html#2130" class="Function">aggregate₊</a> <a id="3466" class="Symbol">(</a><a id="3467" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3472" class="Symbol">(λ</a> <a id="3475" class="Symbol">(</a><a id="3476" href="Ledger.Conway.Conformance.Epoch.html#3476" class="Bound">a</a> <a id="3478" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3480" class="Symbol">_</a> <a id="3482" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3484" href="Ledger.Conway.Conformance.Epoch.html#3484" class="Bound">d</a><a id="3485" class="Symbol">)</a> <a id="3487" class="Symbol">→</a> <a id="3489" href="Ledger.Conway.Conformance.Epoch.html#3476" class="Bound">a</a> <a id="3491" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3493" href="Ledger.Conway.Conformance.Epoch.html#3484" class="Bound">d</a><a id="3494" class="Symbol">)</a> <a id="3496" href="Ledger.Conway.Conformance.Epoch.html#3137" class="Bound">removedGovActions</a> <a id="3514" href="abstract-set-theory.FiniteSetTheory.html#2860" class="Function Operator">ᶠˢ</a><a id="3516" class="Symbol">)</a>

      <a id="3525" href="Ledger.Conway.Conformance.Epoch.html#3525" class="Bound">trWithdrawals</a>   <a id="3541" class="Symbol">=</a> <a id="3543" href="Ledger.Conway.Conformance.Epoch.html#2611" class="Function">esW</a> <a id="3547" class="Symbol">.</a><a id="3548" href="Ledger.Conway.Specification.Enact.html#696" class="Field">withdrawals</a>
      <a id="3566" href="Ledger.Conway.Conformance.Epoch.html#3566" class="Bound">totWithdrawals</a>  <a id="3582" class="Symbol">=</a> <a id="3584" href="abstract-set-theory.FiniteSetTheory.html#4312" class="Function">∑[</a> <a id="3587" href="Ledger.Conway.Conformance.Epoch.html#3587" class="Bound">x</a> <a id="3589" href="abstract-set-theory.FiniteSetTheory.html#4312" class="Function">←</a> <a id="3591" href="Ledger.Conway.Conformance.Epoch.html#3525" class="Bound">trWithdrawals</a> <a id="3605" href="abstract-set-theory.FiniteSetTheory.html#4312" class="Function">]</a> <a id="3607" href="Ledger.Conway.Conformance.Epoch.html#3587" class="Bound">x</a>

      <a id="3616" href="Ledger.Conway.Conformance.Epoch.html#3616" class="Bound">retired</a>    <a id="3627" class="Symbol">=</a> <a id="3629" class="Symbol">(</a><a id="3630" href="Ledger.Conway.Conformance.Certs.html#1031" class="Function">pState</a> <a id="3637" class="Symbol">.</a><a id="3638" href="Ledger.Core.Specification.Certs.html#4093" class="Field">retiring</a><a id="3646" class="Symbol">)</a> <a id="3648" href="Axiom.Set.Map.html#17955" class="Function Operator">⁻¹</a> <a id="3651" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a>
      <a id="3659" href="Ledger.Conway.Conformance.Epoch.html#3659" class="Bound">payout</a>     <a id="3670" class="Symbol">=</a> <a id="3672" href="Ledger.Conway.Conformance.Epoch.html#3388" class="Bound">govActionReturns</a> <a id="3689" href="Axiom.Set.Map.Dec.html#2052" class="Function Operator">∪⁺</a> <a id="3692" href="Ledger.Conway.Conformance.Epoch.html#3525" class="Bound">trWithdrawals</a>
      <a id="3712" href="Ledger.Conway.Conformance.Epoch.html#3712" class="Bound">refunds</a>    <a id="3723" class="Symbol">=</a> <a id="3725" href="Axiom.Set.Map.html#17516" class="Function">pullbackMap</a> <a id="3737" href="Ledger.Conway.Conformance.Epoch.html#3659" class="Bound">payout</a> <a id="3744" href="Ledger.Conway.Specification.Epoch.html#5261" class="Function">toRwdAddr</a> <a id="3754" class="Symbol">(</a><a id="3755" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3759" class="Symbol">(</a><a id="3760" href="Ledger.Conway.Conformance.Certs.html#1011" class="Function">dState</a> <a id="3767" class="Symbol">.</a><a id="3768" href="Ledger.Conway.Conformance.Certs.html#725" class="Field">rewards</a><a id="3775" class="Symbol">))</a>
      <a id="3784" href="Ledger.Conway.Conformance.Epoch.html#3784" class="Bound">unclaimed</a>  <a id="3795" class="Symbol">=</a> <a id="3797" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="3805" href="Ledger.Conway.Conformance.Epoch.html#3659" class="Bound">payout</a> <a id="3812" href="Interface.TypeClasses.HasSubtract.html#223" class="Field Operator">-</a> <a id="3814" href="Ledger.Prelude.HasCoin.html#171" class="Field">getCoin</a> <a id="3822" href="Ledger.Conway.Conformance.Epoch.html#3712" class="Bound">refunds</a>
      <a id="3836" href="Ledger.Conway.Conformance.Epoch.html#3836" class="Bound">vDeposits</a>  <a id="3847" class="Symbol">=</a> <a id="3849" href="Ledger.Conway.Conformance.Certs.html#1051" class="Function">gState</a> <a id="3856" class="Symbol">.</a><a id="3857" href="Ledger.Conway.Conformance.Certs.html#922" class="Field">deposits</a>

      <a id="3873" href="Ledger.Conway.Conformance.Epoch.html#3873" class="Bound">dState&#39;</a> <a id="3881" class="Symbol">:</a> <a id="3883" href="Ledger.Conway.Conformance.Certs.html#598" class="Record">DState</a>
      <a id="3896" href="Ledger.Conway.Conformance.Epoch.html#3873" class="Bound">dState&#39;</a> <a id="3904" class="Symbol">=</a> <a id="3906" class="Keyword">record</a> <a id="3913" href="Ledger.Conway.Conformance.Certs.html#1011" class="Function">dState</a> <a id="3920" class="Symbol">{</a> <a id="3922" href="Ledger.Conway.Conformance.Certs.html#725" class="Field">rewards</a> <a id="3930" class="Symbol">=</a> <a id="3932" href="Ledger.Conway.Conformance.Certs.html#1011" class="Function">dState</a> <a id="3939" class="Symbol">.</a><a id="3940" href="Ledger.Conway.Conformance.Certs.html#725" class="Field">rewards</a> <a id="3948" href="Axiom.Set.Map.Dec.html#2052" class="Function Operator">∪⁺</a> <a id="3951" href="Ledger.Conway.Conformance.Epoch.html#3712" class="Bound">refunds</a> <a id="3959" class="Symbol">}</a>

      <a id="3968" href="Ledger.Conway.Conformance.Epoch.html#3968" class="Bound">pState&#39;</a> <a id="3976" class="Symbol">:</a> <a id="3978" href="Ledger.Core.Specification.Certs.html#4017" class="Record">PState</a>
      <a id="3991" href="Ledger.Conway.Conformance.Epoch.html#3968" class="Bound">pState&#39;</a> <a id="3999" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{4003}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1031}{\htmlId{4004}{\htmlClass{Function}{\text{pState}}}}\, \,\htmlId{4011}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Core.Specification.Certs.html#4049}{\htmlId{4012}{\htmlClass{Field}{\text{pools}}}}\,\,\htmlId{4017}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4019}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3616}{\htmlId{4021}{\htmlClass{Bound}{\text{retired}}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4029}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,
                \\ \,\htmlId{4049}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1031}{\htmlId{4050}{\htmlClass{Function}{\text{pState}}}}\, \,\htmlId{4057}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Core.Specification.Certs.html#4071}{\htmlId{4058}{\htmlClass{Field}{\text{fPools}}}}\,\,\htmlId{4064}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4066}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3616}{\htmlId{4068}{\htmlClass{Bound}{\text{retired}}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4076}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,
                \\ \,\htmlId{4096}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1031}{\htmlId{4097}{\htmlClass{Function}{\text{pState}}}}\, \,\htmlId{4104}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Core.Specification.Certs.html#4093}{\htmlId{4105}{\htmlClass{Field}{\text{retiring}}}}\,\,\htmlId{4113}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4115}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3616}{\htmlId{4117}{\htmlClass{Bound}{\text{retired}}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4125}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,
                \end{pmatrix}$</a>

      <a id="4152" href="Ledger.Conway.Conformance.Epoch.html#4152" class="Bound">gState&#39;</a> <a id="4160" class="Symbol">:</a> <a id="4162" href="Ledger.Conway.Conformance.Certs.html#784" class="Record">GState</a>
      <a id="4175" href="Ledger.Conway.Conformance.Epoch.html#4152" class="Bound">gState&#39;</a> <a id="4183" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{4187}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Class.ToBool.html#342}{\htmlId{4188}{\htmlClass{Function Operator}{\text{if}}}}\, \,\href{Data.List.Base.html#4681}{\htmlId{4191}{\htmlClass{Function}{\text{null}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3066}{\htmlId{4196}{\htmlClass{Bound}{\text{govSt&#39;}}}}\, \,\href{Class.ToBool.html#342}{\htmlId{4203}{\htmlClass{Function Operator}{\text{then}}}}\, \,\href{Axiom.Set.Map.html#7106}{\htmlId{4208}{\htmlClass{Function}{\text{mapValues}}}}\, \,\htmlId{4218}{\htmlClass{Symbol}{\text{(}}}\,\,\htmlId{4219}{\htmlClass{Number}{\text{1}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{4221}{\htmlClass{Field Operator}{\text{+\_}}}}\,\,\htmlId{4223}{\htmlClass{Symbol}{\text{)}}}\, \,\htmlId{4225}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1051}{\htmlId{4226}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{4233}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#839}{\htmlId{4234}{\htmlClass{Field}{\text{dreps}}}}\,\,\htmlId{4239}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Class.ToBool.html#342}{\htmlId{4241}{\htmlClass{Function Operator}{\text{else}}}}\, \,\htmlId{4246}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1051}{\htmlId{4247}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{4254}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#839}{\htmlId{4255}{\htmlClass{Field}{\text{dreps}}}}\,\,\htmlId{4260}{\htmlClass{Symbol}{\text{))}}}\,
                , \,\htmlId{4281}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1051}{\htmlId{4282}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{4289}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#875}{\htmlId{4290}{\htmlClass{Field}{\text{ccHotKeys}}}}\,\,\htmlId{4299}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#13534}{\htmlId{4301}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Enact.html#1362}{\htmlId{4303}{\htmlClass{Function}{\text{ccCreds}}}}\, \,\htmlId{4311}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#2742}{\htmlId{4312}{\htmlClass{Bound}{\text{es}}}}\, \,\htmlId{4315}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Enact.html#480}{\htmlId{4316}{\htmlClass{Field}{\text{cc}}}}\,\,\htmlId{4318}{\htmlClass{Symbol}{\text{)}}}\,
                , \,\href{Ledger.Conway.Conformance.Epoch.html#3836}{\htmlId{4338}{\htmlClass{Bound}{\text{vDeposits}}}}\,
                \end{pmatrix}$</a>

      <a id="4373" href="Ledger.Conway.Conformance.Epoch.html#4373" class="Bound">certState&#39;</a> <a id="4384" class="Symbol">:</a> <a id="4386" href="Ledger.Conway.Conformance.Certs.html#952" class="Record">CertState</a>
      <a id="4402" href="Ledger.Conway.Conformance.Epoch.html#4373" class="Bound">certState&#39;</a> <a id="4413" class="Symbol">=</a> <a id="4415" class="Keyword">record</a> <a id="4422" class="Symbol">{</a> <a id="4424" href="Ledger.Conway.Conformance.Certs.html#1011" class="Field">dState</a> <a id="4431" class="Symbol">=</a> <a id="4433" href="Ledger.Conway.Conformance.Epoch.html#3873" class="Bound">dState&#39;</a> <a id="4441" class="Symbol">;</a> <a id="4443" href="Ledger.Conway.Conformance.Certs.html#1031" class="Field">pState</a> <a id="4450" class="Symbol">=</a> <a id="4452" href="Ledger.Conway.Conformance.Epoch.html#3968" class="Bound">pState&#39;</a> <a id="4460" class="Symbol">;</a> <a id="4462" href="Ledger.Conway.Conformance.Certs.html#1051" class="Field">gState</a> <a id="4469" class="Symbol">=</a> <a id="4471" href="Ledger.Conway.Conformance.Epoch.html#4152" class="Bound">gState&#39;</a> <a id="4479" class="Symbol">}</a>

      <a id="4488" href="Ledger.Conway.Conformance.Epoch.html#4488" class="Bound">utxoSt&#39;</a> <a id="4496" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Ledger.html#793}{\htmlId{4500}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4507}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1370}{\htmlId{4508}{\htmlClass{Field}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#793}{\htmlId{4515}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4522}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1392}{\htmlId{4523}{\htmlClass{Field}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#793}{\htmlId{4530}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4537}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1414}{\htmlId{4538}{\htmlClass{Field}{\text{deposits}}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4547}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{abstract-set-theory.FiniteSetTheory.html#519}{\htmlId{4549}{\htmlClass{Function}{\text{mapˢ}}}}\, \,\htmlId{4554}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Data.Product.Base.html#636}{\htmlId{4555}{\htmlClass{Field}{\text{proj₁}}}}\, \,\href{Function.Base.html#1134}{\htmlId{4561}{\htmlClass{Function Operator}{\text{∘}}}}\, \,\href{Data.Product.Base.html#650}{\htmlId{4563}{\htmlClass{Field}{\text{proj₂}}}}\,\,\htmlId{4568}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3137}{\htmlId{4570}{\htmlClass{Bound}{\text{removedGovActions}}}}\, \,\href{Axiom.Set.Map.html#13604}{\htmlId{4588}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\htmlId{4592}{\htmlClass{Number}{\text{0}}}\, \end{pmatrix}$</a>

      <a id="4603" href="Ledger.Conway.Conformance.Epoch.html#4603" class="Bound">acnt&#39;</a> <a id="4609" class="Symbol">=</a> <a id="4611" class="Keyword">record</a> <a id="4618" href="Ledger.Conway.Conformance.Epoch.html#2247" class="Generalizable">acnt</a>
        <a id="4631" class="Symbol">{</a> <a id="4633" href="Ledger.Conway.Specification.PParams.html#773" class="Field">treasury</a>  <a id="4643" class="Symbol">=</a> <a id="4645" href="Ledger.Conway.Conformance.Epoch.html#2247" class="Generalizable">acnt</a> <a id="4650" class="Symbol">.</a><a id="4651" href="Ledger.Conway.Specification.PParams.html#773" class="Field">treasury</a> <a id="4660" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="4662" href="Ledger.Conway.Conformance.Epoch.html#3566" class="Bound">totWithdrawals</a> <a id="4677" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4679" href="Ledger.Conway.Conformance.Ledger.html#793" class="Function">utxoSt</a> <a id="4686" class="Symbol">.</a><a id="4687" href="Ledger.Conway.Specification.Utxo.html#1440" class="Field">donations</a> <a id="4697" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4699" href="Ledger.Conway.Conformance.Epoch.html#3784" class="Bound">unclaimed</a> <a id="4709" class="Symbol">}</a>

      <a id="4718" href="Ledger.Conway.Conformance.Epoch.html#4718" class="Bound">stakeDistrs</a> <a id="4730" class="Symbol">:</a> <a id="4732" href="Ledger.Conway.Specification.Ratify.html#3115" class="Record">StakeDistrs</a>
      <a id="4750" href="Ledger.Conway.Conformance.Epoch.html#4718" class="Bound">stakeDistrs</a> <a id="4762" class="Symbol">=</a> <a id="4764" href="Ledger.Conway.Specification.Epoch.html#12366" class="Function">mkStakeDistrs</a> <a id="4778" class="Symbol">(</a><a id="4779" href="Ledger.Conway.Specification.Rewards.html#7768" class="Field">Snapshots.mark</a> <a id="4794" href="Ledger.Conway.Conformance.Epoch.html#2341" class="Generalizable">ss&#39;</a><a id="4797" class="Symbol">)</a> <a id="4799" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="4801" href="Ledger.Conway.Conformance.Epoch.html#4488" class="Bound">utxoSt&#39;</a> <a id="4809" href="Ledger.Conway.Conformance.Epoch.html#3066" class="Bound">govSt&#39;</a> <a id="4816" class="Symbol">(</a><a id="4817" class="Keyword">record</a> <a id="4824" class="Symbol">{</a> <a id="4826" href="Ledger.Conway.Conformance.Epoch.html#4826" class="Module">GState</a> <a id="4833" class="Symbol">(</a><a id="4834" href="Ledger.Conway.Conformance.Certs.html#1051" class="Field">CertState.gState</a> <a id="4851" class="Symbol">(</a><a id="4852" href="Ledger.Conway.Conformance.Ledger.html#846" class="Field">LState.certState</a> <a id="4869" href="Ledger.Conway.Conformance.Epoch.html#2233" class="Generalizable">ls</a><a id="4871" class="Symbol">))</a> <a id="4874" class="Symbol">})</a>
                                                                        <a id="4949" class="Symbol">(</a><a id="4950" class="Keyword">record</a> <a id="4957" class="Symbol">{</a> <a id="4959" href="Ledger.Conway.Conformance.Epoch.html#4959" class="Module">DState</a> <a id="4966" class="Symbol">(</a><a id="4967" href="Ledger.Conway.Conformance.Certs.html#1011" class="Field">CertState.dState</a> <a id="4984" class="Symbol">(</a><a id="4985" href="Ledger.Conway.Conformance.Ledger.html#846" class="Field">LState.certState</a> <a id="5002" href="Ledger.Conway.Conformance.Epoch.html#2233" class="Generalizable">ls</a><a id="5004" class="Symbol">))</a> <a id="5007" class="Symbol">})</a>

    <a id="5015" class="Keyword">in</a>
    <a id="5022" class="Keyword">record</a> <a id="5029" class="Symbol">{</a> <a id="5031" href="Ledger.Conway.Specification.Ratify.html#3301" class="Field">currentEpoch</a> <a id="5044" class="Symbol">=</a> <a id="5046" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a>
           <a id="5059" class="Symbol">;</a> <a id="5061" href="Ledger.Conway.Specification.Ratify.html#3269" class="Field">stakeDistrs</a> <a id="5073" class="Symbol">=</a> <a id="5075" href="Ledger.Conway.Conformance.Epoch.html#4718" class="Bound">stakeDistrs</a>
           <a id="5098" class="Symbol">;</a> <a id="5100" href="Ledger.Conway.Specification.Ratify.html#3416" class="Field">treasury</a> <a id="5109" class="Symbol">=</a> <a id="5111" href="Ledger.Conway.Conformance.Epoch.html#2247" class="Generalizable">acnt</a> <a id="5116" class="Symbol">.</a><a id="5117" href="Ledger.Conway.Specification.PParams.html#773" class="Field">treasury</a> <a id="5126" class="Symbol">;</a> <a id="5128" href="Ledger.Conway.Conformance.Epoch.html#5128" class="Module">GState</a> <a id="5135" href="Ledger.Conway.Conformance.Certs.html#1051" class="Function">gState</a>
           <a id="5153" class="Symbol">;</a> <a id="5155" href="Ledger.Conway.Specification.Ratify.html#3445" class="Field">pools</a> <a id="5161" class="Symbol">=</a> <a id="5163" href="Ledger.Conway.Conformance.Certs.html#1031" class="Function">pState</a> <a id="5170" class="Symbol">.</a><a id="5171" href="Ledger.Core.Specification.Certs.html#4049" class="Field">pools</a> <a id="5177" class="Symbol">;</a> <a id="5179" href="Ledger.Conway.Specification.Ratify.html#3491" class="Field">delegatees</a> <a id="5190" class="Symbol">=</a> <a id="5192" href="Ledger.Conway.Conformance.Certs.html#1011" class="Function">dState</a> <a id="5199" class="Symbol">.</a><a id="5200" href="Ledger.Conway.Conformance.Certs.html#655" class="Field">voteDelegs</a> <a id="5211" class="Symbol">}</a>
        <a id="5221" href="Ledger.Conway.Specification.Ratify.html#13443" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2742}{\htmlId{5225}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Class.HasEmptySet.html#287}{\htmlId{5230}{\htmlClass{Field}{\text{∅}}}}\, \\ \,\href{Agda.Builtin.Bool.html#192}{\htmlId{5234}{\htmlClass{InductiveConstructor}{\text{false}}}}\, \end{pmatrix}$</a> <a id="5242" href="Ledger.Conway.Specification.Ratify.html#13443" class="Function Operator">⇀⦇</a> <a id="5245" href="Ledger.Conway.Conformance.Epoch.html#3066" class="Bound">govSt&#39;</a> <a id="5252" href="Ledger.Conway.Specification.Ratify.html#13443" class="Function Operator">,RATIFIES⦈</a> <a id="5263" href="Ledger.Conway.Conformance.Epoch.html#2182" class="Generalizable">fut&#39;</a>
      <a id="5274" class="Symbol">→</a> <a id="5276" href="Ledger.Conway.Conformance.Epoch.html#2233" class="Generalizable">ls</a> <a id="5279" href="Ledger.Conway.Conformance.Rewards.html#628" class="Datatype Operator">⊢</a> <a id="5281" href="Ledger.Conway.Conformance.Epoch.html#2338" class="Generalizable">ss</a> <a id="5284" href="Ledger.Conway.Conformance.Rewards.html#628" class="Datatype Operator">⇀⦇</a> <a id="5287" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="5290" href="Ledger.Conway.Conformance.Rewards.html#628" class="Datatype Operator">,SNAP⦈</a> <a id="5297" href="Ledger.Conway.Conformance.Epoch.html#2341" class="Generalizable">ss&#39;</a>
    <a id="5305" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
    <a id="5342" class="Symbol">_</a> <a id="5344" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2247}{\htmlId{5348}{\htmlClass{Generalizable}{\text{acnt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2338}{\htmlId{5355}{\htmlClass{Generalizable}{\text{ss}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2233}{\htmlId{5360}{\htmlClass{Generalizable}{\text{ls}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2261}{\htmlId{5365}{\htmlClass{Generalizable}{\text{es₀}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2178}{\htmlId{5371}{\htmlClass{Generalizable}{\text{fut}}}}\, \end{pmatrix}$</a> <a id="5377" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">⇀⦇</a> <a id="5380" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="5382" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">,EPOCH⦈</a>
        <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#4603}{\htmlId{5400}{\htmlClass{Bound}{\text{acnt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2341}{\htmlId{5408}{\htmlClass{Generalizable}{\text{ss&#39;}}}}\, \\ \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#4488}{\htmlId{5416}{\htmlClass{Bound}{\text{utxoSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#3066}{\htmlId{5426}{\htmlClass{Bound}{\text{govSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#4373}{\htmlId{5435}{\htmlClass{Bound}{\text{certState&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2742}{\htmlId{5450}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2182}{\htmlId{5455}{\htmlClass{Generalizable}{\text{fut&#39;}}}}\, \end{pmatrix}$</a>

<a id="5463" class="Keyword">data</a> <a id="_⊢_⇀⦇_,NEWEPOCH⦈_"></a><a id="5468" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">_⊢_⇀⦇_,NEWEPOCH⦈_</a> <a id="5486" class="Symbol">:</a> <a id="5488" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="5490" class="Symbol">→</a> <a id="5492" href="Ledger.Conway.Conformance.Epoch.html#1074" class="Record">NewEpochState</a> <a id="5506" class="Symbol">→</a> <a id="5508" href="Ledger.Core.Specification.Epoch.html#646" class="Function">Epoch</a> <a id="5514" class="Symbol">→</a> <a id="5516" href="Ledger.Conway.Conformance.Epoch.html#1074" class="Record">NewEpochState</a> <a id="5530" class="Symbol">→</a> <a id="5532" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5537" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-New"></a><a id="5546" href="Ledger.Conway.Conformance.Epoch.html#5546" class="InductiveConstructor">NEWEPOCH-New</a> <a id="5559" class="Symbol">:</a> <a id="5561" class="Keyword">let</a>
      <a id="5571" href="Ledger.Conway.Conformance.Epoch.html#5571" class="Bound">eps&#39;</a> <a id="5576" class="Symbol">=</a> <a id="5578" href="Ledger.Conway.Conformance.Epoch.html#1389" class="Function">applyRUpd</a> <a id="5588" href="Ledger.Conway.Conformance.Epoch.html#2359" class="Generalizable">ru</a> <a id="5591" href="Ledger.Conway.Conformance.Epoch.html#2203" class="Generalizable">eps</a>
    <a id="5599" class="Keyword">in</a>
    <a id="5606" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5608" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="5610" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5612" href="Ledger.Conway.Conformance.Epoch.html#2158" class="Generalizable">lastEpoch</a> <a id="5622" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5624" class="Number">1</a>
    <a id="5630" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="5632" class="Symbol">_</a> <a id="5634" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">⊢</a> <a id="5636" href="Ledger.Conway.Conformance.Epoch.html#5571" class="Bound">eps&#39;</a> <a id="5641" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">⇀⦇</a> <a id="5644" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="5646" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">,EPOCH⦈</a> <a id="5654" href="Ledger.Conway.Conformance.Epoch.html#2212" class="Generalizable">eps&#39;&#39;</a>
      <a id="5666" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="5705" class="Symbol">_</a> <a id="5707" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2158}{\htmlId{5711}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2203}{\htmlId{5723}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#173}{\htmlId{5729}{\htmlClass{InductiveConstructor}{\text{just}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2359}{\htmlId{5734}{\htmlClass{Generalizable}{\text{ru}}}}\, \end{pmatrix}$</a> <a id="5739" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">⇀⦇</a> <a id="5742" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="5744" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2156}{\htmlId{5757}{\htmlClass{Generalizable}{\text{e}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2212}{\htmlId{5761}{\htmlClass{Generalizable}{\text{eps&#39;&#39;}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{5769}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-Not-New"></a><a id="5782" href="Ledger.Conway.Conformance.Epoch.html#5782" class="InductiveConstructor">NEWEPOCH-Not-New</a> <a id="5799" class="Symbol">:</a>
    <a id="5805" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5807" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="5809" href="Relation.Binary.PropositionalEquality.Core.html#1000" class="Function Operator">≢</a> <a id="5811" href="Ledger.Conway.Conformance.Epoch.html#2158" class="Generalizable">lastEpoch</a> <a id="5821" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5823" class="Number">1</a>
      <a id="5831" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="5870" class="Symbol">_</a> <a id="5872" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2158}{\htmlId{5876}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2203}{\htmlId{5888}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2379}{\htmlId{5894}{\htmlClass{Generalizable}{\text{mru}}}}\, \end{pmatrix}$</a> <a id="5900" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">⇀⦇</a> <a id="5903" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="5905" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2158}{\htmlId{5918}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2203}{\htmlId{5930}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2379}{\htmlId{5936}{\htmlClass{Generalizable}{\text{mru}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-No-Reward-Update"></a><a id="5945" href="Ledger.Conway.Conformance.Epoch.html#5945" class="InductiveConstructor">NEWEPOCH-No-Reward-Update</a> <a id="5971" class="Symbol">:</a>
    <a id="5977" href="Prelude.InferenceRules.html#56075" class="Function Operator">∙</a> <a id="5979" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="5981" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5983" href="Ledger.Conway.Conformance.Epoch.html#2158" class="Generalizable">lastEpoch</a> <a id="5993" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5995" class="Number">1</a>
    <a id="6001" href="Prelude.InferenceRules.html#56006" class="Function Operator">∙</a> <a id="6003" class="Symbol">_</a> <a id="6005" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">⊢</a> <a id="6007" href="Ledger.Conway.Conformance.Epoch.html#2203" class="Generalizable">eps</a> <a id="6011" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">⇀⦇</a> <a id="6014" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="6016" href="Ledger.Conway.Conformance.Epoch.html#2435" class="Datatype Operator">,EPOCH⦈</a> <a id="6024" href="Ledger.Conway.Conformance.Epoch.html#2207" class="Generalizable">eps&#39;</a>
      <a id="6035" href="Prelude.InferenceRules.html#13694" class="Function Operator">────────────────────────────────</a>
      <a id="6074" class="Symbol">_</a> <a id="6076" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2158}{\htmlId{6080}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2203}{\htmlId{6092}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{6098}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a> <a id="6108" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">⇀⦇</a> <a id="6111" href="Ledger.Conway.Conformance.Epoch.html#2156" class="Generalizable">e</a> <a id="6113" href="Ledger.Conway.Conformance.Epoch.html#5468" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2156}{\htmlId{6126}{\htmlClass{Generalizable}{\text{e}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2207}{\htmlId{6130}{\htmlClass{Generalizable}{\text{eps&#39;}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{6137}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a>
</pre></body></html>