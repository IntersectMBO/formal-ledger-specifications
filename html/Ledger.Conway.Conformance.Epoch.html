<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Conformance.Epoch</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Keyword">open</a> <a id="30" class="Keyword">import</a> <a id="37" href="Ledger.Conway.Specification.Abstract.html" class="Module">Ledger.Conway.Specification.Abstract</a>
<a id="74" class="Keyword">open</a> <a id="79" class="Keyword">import</a> <a id="86" href="Ledger.Conway.Specification.Transaction.html" class="Module">Ledger.Conway.Specification.Transaction</a>

<a id="127" class="Keyword">module</a> <a id="134" href="Ledger.Conway.Conformance.Epoch.html" class="Module">Ledger.Conway.Conformance.Epoch</a>
  <a id="168" class="Symbol">(</a><a id="169" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="173" class="Symbol">:</a> <a id="175" class="Symbol">_)</a> <a id="178" class="Symbol">(</a><a id="179" class="Keyword">open</a> <a id="184" href="Ledger.Conway.Specification.Transaction.html#1000" class="Module">TransactionStructure</a> <a id="205" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a><a id="208" class="Symbol">)</a>
  <a id="212" class="Symbol">(</a><a id="213" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a> <a id="217" class="Symbol">:</a> <a id="219" href="Ledger.Conway.Specification.Abstract.html#641" class="Record">AbstractFunctions</a> <a id="237" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a><a id="240" class="Symbol">)</a> <a id="242" class="Symbol">(</a><a id="243" class="Keyword">open</a> <a id="248" href="Ledger.Conway.Specification.Abstract.html#641" class="Module">AbstractFunctions</a> <a id="266" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a><a id="269" class="Symbol">)</a>
  <a id="273" class="Keyword">where</a>

<a id="280" class="Keyword">open</a> <a id="285" class="Keyword">import</a> <a id="292" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="307" class="Keyword">open</a> <a id="312" class="Keyword">import</a> <a id="319" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="332" class="Keyword">using</a> <a id="338" class="Symbol">()</a> <a id="341" class="Keyword">renaming</a> <a id="350" class="Symbol">(</a><a id="351" href="Agda.Builtin.Int.html#263" class="InductiveConstructor">+_</a> <a id="354" class="Symbol">to</a> <a id="357" class="InductiveConstructor">pos</a><a id="360" class="Symbol">)</a>
<a id="362" class="Keyword">import</a> <a id="369" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="382" class="Symbol">as</a> <a id="385" class="Module">ℤ</a>

<a id="388" class="Keyword">open</a> <a id="393" class="Keyword">import</a> <a id="400" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="420" class="Keyword">using</a> <a id="426" class="Symbol">(</a><a id="427" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a><a id="437" class="Symbol">;</a> <a id="439" href="Data.Nat.Properties.html#17331" class="Function">+-0-commutativeMonoid</a><a id="460" class="Symbol">)</a>
<a id="462" class="Keyword">open</a> <a id="467" class="Keyword">import</a> <a id="474" href="Data.List.html" class="Module">Data.List</a> <a id="484" class="Keyword">using</a> <a id="490" class="Symbol">(</a><a id="491" href="Data.List.Base.html#10687" class="Function">filter</a><a id="497" class="Symbol">)</a>

<a id="500" class="Keyword">open</a> <a id="505" class="Keyword">import</a> <a id="512" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>

<a id="534" class="Keyword">open</a> <a id="539" class="Keyword">import</a> <a id="546" href="Ledger.Conway.Specification.Enact.html" class="Module">Ledger.Conway.Specification.Enact</a> <a id="580" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a>
<a id="593" class="Keyword">open</a> <a id="598" class="Keyword">import</a> <a id="605" href="Ledger.Conway.Conformance.Ledger.html" class="Module">Ledger.Conway.Conformance.Ledger</a> <a id="638" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="642" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
<a id="646" class="Keyword">open</a> <a id="651" class="Keyword">import</a> <a id="658" href="Ledger.Conway.Specification.Ratify.html" class="Module">Ledger.Conway.Specification.Ratify</a> <a id="693" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a>
<a id="697" class="Keyword">open</a> <a id="702" class="Keyword">import</a> <a id="709" href="Ledger.Conway.Conformance.Utxo.html" class="Module">Ledger.Conway.Conformance.Utxo</a> <a id="740" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="744" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
<a id="748" class="Keyword">open</a> <a id="753" class="Keyword">import</a> <a id="760" href="Ledger.Conway.Conformance.Certs.html" class="Module">Ledger.Conway.Conformance.Certs</a> <a id="792" href="Ledger.Conway.Specification.Transaction.html#2079" class="Function">govStructure</a>
<a id="805" class="Keyword">open</a> <a id="810" class="Keyword">import</a> <a id="817" href="Ledger.Conway.Conformance.Rewards.html" class="Module">Ledger.Conway.Conformance.Rewards</a> <a id="851" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="855" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
<a id="859" class="Keyword">open</a> <a id="864" class="Keyword">import</a> <a id="871" href="Ledger.Conway.Specification.Epoch.html" class="Module">Ledger.Conway.Specification.Epoch</a> <a id="905" href="Ledger.Conway.Conformance.Epoch.html#169" class="Bound">txs</a> <a id="909" href="Ledger.Conway.Conformance.Epoch.html#213" class="Bound">abs</a>
  <a id="915" class="Keyword">using</a> <a id="921" class="Symbol">(</a><a id="922" href="Ledger.Conway.Specification.Epoch.html#4257" class="Function">getStakeCred</a><a id="934" class="Symbol">;</a> <a id="936" href="Ledger.Conway.Specification.Epoch.html#8611" class="Function">mkStakeDistrs</a><a id="949" class="Symbol">;</a> <a id="951" href="Ledger.Conway.Specification.Epoch.html#4170" class="Function">toRwdAddr</a><a id="960" class="Symbol">)</a> <a id="962" class="Keyword">public</a>

<a id="970" class="Keyword">record</a> <a id="EpochState"></a><a id="977" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a> <a id="988" class="Symbol">:</a> <a id="990" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="995" class="Keyword">where</a>
  <a id="1003" class="Keyword">constructor</a> <a id="⟦_,_,_,_,_⟧ᵉ&#39;"></a><a id="1015" href="Ledger.Conway.Conformance.Epoch.html#1015" class="InductiveConstructor Operator">⟦_,_,_,_,_⟧ᵉ&#39;</a>
  <a id="1031" class="Keyword">field</a>
    <a id="EpochState.acnt"></a><a id="1041" href="Ledger.Conway.Conformance.Epoch.html#1041" class="Field">acnt</a>       <a id="1052" class="Symbol">:</a> <a id="1054" href="Ledger.Conway.Specification.PParams.html#720" class="Record">Acnt</a>
    <a id="EpochState.ss"></a><a id="1063" href="Ledger.Conway.Conformance.Epoch.html#1063" class="Field">ss</a>         <a id="1074" class="Symbol">:</a> <a id="1076" href="Ledger.Conway.Specification.Rewards.html#7214" class="Record">Snapshots</a>
    <a id="EpochState.ls"></a><a id="1090" href="Ledger.Conway.Conformance.Epoch.html#1090" class="Field">ls</a>         <a id="1101" class="Symbol">:</a> <a id="1103" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a>
    <a id="EpochState.es"></a><a id="1114" href="Ledger.Conway.Conformance.Epoch.html#1114" class="Field">es</a>         <a id="1125" class="Symbol">:</a> <a id="1127" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a>
    <a id="EpochState.fut"></a><a id="1142" href="Ledger.Conway.Conformance.Epoch.html#1142" class="Field">fut</a>        <a id="1153" class="Symbol">:</a> <a id="1155" href="Ledger.Conway.Specification.Ratify.html#3383" class="Record">RatifyState</a>

<a id="1168" class="Keyword">record</a> <a id="NewEpochState"></a><a id="1175" href="Ledger.Conway.Conformance.Epoch.html#1175" class="Record">NewEpochState</a> <a id="1189" class="Symbol">:</a> <a id="1191" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1196" class="Keyword">where</a>
  <a id="1204" class="Keyword">field</a>
    <a id="NewEpochState.lastEpoch"></a><a id="1214" href="Ledger.Conway.Conformance.Epoch.html#1214" class="Field">lastEpoch</a>   <a id="1226" class="Symbol">:</a> <a id="1228" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a>
    <a id="NewEpochState.epochState"></a><a id="1238" href="Ledger.Conway.Conformance.Epoch.html#1238" class="Field">epochState</a>  <a id="1250" class="Symbol">:</a> <a id="1252" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a>
    <a id="NewEpochState.ru"></a><a id="1267" href="Ledger.Conway.Conformance.Epoch.html#1267" class="Field">ru</a>          <a id="1279" class="Symbol">:</a> <a id="1281" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1287" href="Ledger.Conway.Specification.Rewards.html#5822" class="Record">RewardUpdate</a>

<a id="1301" class="Keyword">instance</a>
  <a id="1312" class="Keyword">unquoteDecl</a> <a id="HasCast-EpochState"></a><a id="1324" href="Ledger.Conway.Conformance.Epoch.html#1324" class="Function">HasCast-EpochState</a> <a id="HasCast-NewEpochState"></a><a id="1343" href="Ledger.Conway.Conformance.Epoch.html#1343" class="Function">HasCast-NewEpochState</a> <a id="1365" class="Symbol">=</a> <a id="1367" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="1386" class="Symbol">(</a> <a id="1388" class="Symbol">(</a><a id="1389" class="Keyword">quote</a> <a id="1395" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a>     <a id="1410" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1412" href="Ledger.Conway.Conformance.Epoch.html#1324" class="Function">HasCast-EpochState</a><a id="1430" class="Symbol">)</a>
    <a id="1436" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1438" href="Data.List.Base.html#5205" class="Function Operator">[</a> <a id="1440" class="Symbol">(</a><a id="1441" class="Keyword">quote</a> <a id="1447" href="Ledger.Conway.Conformance.Epoch.html#1175" class="Record">NewEpochState</a>  <a id="1462" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1464" href="Ledger.Conway.Conformance.Epoch.html#1343" class="Function">HasCast-NewEpochState</a><a id="1485" class="Symbol">)</a><a id="1486" href="Data.List.Base.html#5205" class="Function Operator">]</a><a id="1487" class="Symbol">)</a>

<a id="applyRUpd"></a><a id="1490" href="Ledger.Conway.Conformance.Epoch.html#1490" class="Function">applyRUpd</a> <a id="1500" class="Symbol">:</a> <a id="1502" href="Ledger.Conway.Specification.Rewards.html#5822" class="Record">RewardUpdate</a> <a id="1515" class="Symbol">→</a> <a id="1517" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a> <a id="1528" class="Symbol">→</a> <a id="1530" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a>
<a id="1541" href="Ledger.Conway.Conformance.Epoch.html#1490" class="Function">applyRUpd</a> <a id="1551" href="Ledger.Conway.Conformance.Epoch.html#1551" class="Bound">rewardUpdate</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1570}{\htmlId{1570}{\htmlClass{Bound}{\text{treasury}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1581}{\htmlId{1581}{\htmlClass{Bound}{\text{reserves}}}}\, \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1597}{\htmlId{1597}{\htmlClass{Bound}{\text{ss}}}}\,
  \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1608}{\htmlId{1608}{\htmlClass{Bound}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1615}{\htmlId{1615}{\htmlClass{Bound}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1622}{\htmlId{1622}{\htmlClass{Bound}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1633}{\htmlId{1633}{\htmlClass{Bound}{\text{donations}}}}\, \end{pmatrix}
    \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1652}{\htmlId{1652}{\htmlClass{Bound}{\text{govSt}}}}\,
    \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1668}{\htmlId{1668}{\htmlClass{Bound}{\text{voteDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1681}{\htmlId{1681}{\htmlClass{Bound}{\text{stakeDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1695}{\htmlId{1695}{\htmlClass{Bound}{\text{rewards}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1705}{\htmlId{1705}{\htmlClass{Bound}{\text{deposits&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1720}{\htmlId{1720}{\htmlClass{Bound}{\text{pState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1729}{\htmlId{1729}{\htmlClass{Bound}{\text{gState}}}}\, \end{pmatrix} \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1747}{\htmlId{1747}{\htmlClass{Bound}{\text{es}}}}\,
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1754}{\htmlId{1754}{\htmlClass{Bound}{\text{fut}}}}\,
  \end{pmatrix}$</a> <a id="1764" class="Symbol">=</a>
  <a class="AgdaKaTeX">$\begin{pmatrix} \begin{pmatrix} \,\href{Prelude.html#3167}{\htmlId{1772}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1780}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1781}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1570}{\htmlId{1785}{\htmlClass{Bound}{\text{treasury}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1794}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#5859}{\htmlId{1796}{\htmlClass{Function}{\text{Δt}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1799}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1801}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2179}{\htmlId{1805}{\htmlClass{Function}{\text{unregRU&#39;}}}}\,\,\htmlId{1813}{\htmlClass{Symbol}{\text{)}}}\,
    \\ \,\href{Prelude.html#3167}{\htmlId{1821}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1829}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1830}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1581}{\htmlId{1834}{\htmlClass{Bound}{\text{reserves}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1843}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#5862}{\htmlId{1845}{\htmlClass{Function}{\text{Δr}}}}\,\,\htmlId{1847}{\htmlClass{Symbol}{\text{)}}}\, \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1597}{\htmlId{1855}{\htmlClass{Bound}{\text{ss}}}}\,
  \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1608}{\htmlId{1866}{\htmlClass{Bound}{\text{utxo}}}}\, \\ \,\href{Prelude.html#3167}{\htmlId{1873}{\htmlClass{Function}{\text{posPart}}}}\, \,\htmlId{1881}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#357}{\htmlId{1882}{\htmlClass{InductiveConstructor}{\text{pos}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#1615}{\htmlId{1886}{\htmlClass{Bound}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{1891}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Specification.Rewards.html#5865}{\htmlId{1893}{\htmlClass{Function}{\text{Δf}}}}\,\,\htmlId{1895}{\htmlClass{Symbol}{\text{)}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1622}{\htmlId{1899}{\htmlClass{Bound}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1633}{\htmlId{1910}{\htmlClass{Bound}{\text{donations}}}}\, \end{pmatrix}
    \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1652}{\htmlId{1928}{\htmlClass{Bound}{\text{govSt}}}}\,
    \\ \begin{pmatrix} \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#1668}{\htmlId{1944}{\htmlClass{Bound}{\text{voteDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1681}{\htmlId{1957}{\htmlClass{Bound}{\text{stakeDelegs}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1695}{\htmlId{1971}{\htmlClass{Bound}{\text{rewards}}}}\, \,\href{Axiom.Set.Map.Dec.html#1854}{\htmlId{1979}{\htmlClass{Function Operator}{\text{∪⁺}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2111}{\htmlId{1982}{\htmlClass{Function}{\text{regRU}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1705}{\htmlId{1990}{\htmlClass{Bound}{\text{deposits&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1720}{\htmlId{2004}{\htmlClass{Bound}{\text{pState}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1729}{\htmlId{2013}{\htmlClass{Bound}{\text{gState}}}}\, \end{pmatrix} \end{pmatrix}
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1747}{\htmlId{2028}{\htmlClass{Bound}{\text{es}}}}\,
  \\ \,\href{Ledger.Conway.Conformance.Epoch.html#1754}{\htmlId{2035}{\htmlClass{Bound}{\text{fut}}}}\, \end{pmatrix}$</a>
  <a id="2043" class="Keyword">where</a>
    <a id="2053" class="Keyword">open</a> <a id="2058" href="Ledger.Conway.Specification.Rewards.html#5822" class="Module">RewardUpdate</a> <a id="2071" href="Ledger.Conway.Conformance.Epoch.html#1551" class="Bound">rewardUpdate</a> <a id="2084" class="Keyword">using</a> <a id="2090" class="Symbol">(</a><a id="2091" href="Ledger.Conway.Specification.Rewards.html#5859" class="Field">Δt</a><a id="2093" class="Symbol">;</a> <a id="2095" href="Ledger.Conway.Specification.Rewards.html#5862" class="Field">Δr</a><a id="2097" class="Symbol">;</a> <a id="2099" href="Ledger.Conway.Specification.Rewards.html#5865" class="Field">Δf</a><a id="2101" class="Symbol">;</a> <a id="2103" href="Ledger.Conway.Specification.Rewards.html#5885" class="Field">rs</a><a id="2105" class="Symbol">)</a>
    <a id="2111" href="Ledger.Conway.Conformance.Epoch.html#2111" class="Function">regRU</a>     <a id="2121" class="Symbol">=</a> <a id="2123" href="Ledger.Conway.Specification.Rewards.html#5885" class="Function">rs</a> <a id="2126" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="2128" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2132" href="Ledger.Conway.Conformance.Epoch.html#1695" class="Bound">rewards</a>
    <a id="2144" href="Ledger.Conway.Conformance.Epoch.html#2144" class="Function">unregRU</a>   <a id="2154" class="Symbol">=</a> <a id="2156" href="Ledger.Conway.Specification.Rewards.html#5885" class="Function">rs</a> <a id="2159" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="2161" href="Class.IsSet.html#916" class="Function">dom</a> <a id="2165" href="Ledger.Conway.Conformance.Epoch.html#1695" class="Bound">rewards</a> <a id="2173" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a>
    <a id="2179" href="Ledger.Conway.Conformance.Epoch.html#2179" class="Function">unregRU&#39;</a>  <a id="2189" class="Symbol">=</a> <a id="2191" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="2194" href="Ledger.Conway.Conformance.Epoch.html#2194" class="Bound">x</a> <a id="2196" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="2198" href="Ledger.Conway.Conformance.Epoch.html#2144" class="Function">unregRU</a> <a id="2206" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="2208" href="Ledger.Conway.Conformance.Epoch.html#2194" class="Bound">x</a>

<a id="2211" class="Keyword">private</a> <a id="2219" class="Keyword">variable</a>
  <a id="2230" href="Ledger.Conway.Conformance.Epoch.html#2230" class="Generalizable">nes</a> <a id="2234" href="Ledger.Conway.Conformance.Epoch.html#2234" class="Generalizable">nes&#39;</a> <a id="2239" class="Symbol">:</a> <a id="2241" href="Ledger.Conway.Conformance.Epoch.html#1175" class="Record">NewEpochState</a>
  <a id="2257" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="2259" href="Ledger.Conway.Conformance.Epoch.html#2259" class="Generalizable">lastEpoch</a> <a id="2269" class="Symbol">:</a> <a id="2271" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a>
  <a id="2279" href="Ledger.Conway.Conformance.Epoch.html#2279" class="Generalizable">fut</a> <a id="2283" href="Ledger.Conway.Conformance.Epoch.html#2283" class="Generalizable">fut&#39;</a> <a id="2288" class="Symbol">:</a> <a id="2290" href="Ledger.Conway.Specification.Ratify.html#3383" class="Record">RatifyState</a>
  <a id="2304" href="Ledger.Conway.Conformance.Epoch.html#2304" class="Generalizable">eps</a> <a id="2308" href="Ledger.Conway.Conformance.Epoch.html#2308" class="Generalizable">eps&#39;</a> <a id="2313" href="Ledger.Conway.Conformance.Epoch.html#2313" class="Generalizable">eps&#39;&#39;</a> <a id="2319" class="Symbol">:</a> <a id="2321" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a>
  <a id="2334" href="Ledger.Conway.Conformance.Epoch.html#2334" class="Generalizable">ls</a> <a id="2337" class="Symbol">:</a> <a id="2339" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a>
  <a id="2348" href="Ledger.Conway.Conformance.Epoch.html#2348" class="Generalizable">acnt</a> <a id="2353" class="Symbol">:</a> <a id="2355" href="Ledger.Conway.Specification.PParams.html#720" class="Record">Acnt</a>
  <a id="2362" href="Ledger.Conway.Conformance.Epoch.html#2362" class="Generalizable">es₀</a> <a id="2366" class="Symbol">:</a> <a id="2368" href="Ledger.Conway.Specification.Enact.html#444" class="Record">EnactState</a>
  <a id="2381" href="Ledger.Conway.Conformance.Epoch.html#2381" class="Generalizable">mark</a> <a id="2386" href="Ledger.Conway.Conformance.Epoch.html#2386" class="Generalizable">set</a> <a id="2390" href="Ledger.Conway.Conformance.Epoch.html#2390" class="Generalizable">go</a> <a id="2393" class="Symbol">:</a> <a id="2395" href="Ledger.Conway.Specification.Rewards.html#6058" class="Record">Snapshot</a>
  <a id="2406" href="Ledger.Conway.Conformance.Epoch.html#2406" class="Generalizable">feeSS</a> <a id="2412" class="Symbol">:</a> <a id="2414" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="2421" href="Ledger.Conway.Conformance.Epoch.html#2421" class="Generalizable">lstate</a> <a id="2428" class="Symbol">:</a> <a id="2430" href="Ledger.Conway.Conformance.Ledger.html#779" class="Record">LState</a>
  <a id="2439" href="Ledger.Conway.Conformance.Epoch.html#2439" class="Generalizable">ss</a> <a id="2442" href="Ledger.Conway.Conformance.Epoch.html#2442" class="Generalizable">ss&#39;</a> <a id="2446" class="Symbol">:</a> <a id="2448" href="Ledger.Conway.Specification.Rewards.html#7214" class="Record">Snapshots</a>
  <a id="2460" href="Ledger.Conway.Conformance.Epoch.html#2460" class="Generalizable">ru</a> <a id="2463" class="Symbol">:</a> <a id="2465" href="Ledger.Conway.Specification.Rewards.html#5822" class="Record">RewardUpdate</a>
  <a id="2480" href="Ledger.Conway.Conformance.Epoch.html#2480" class="Generalizable">mru</a> <a id="2484" class="Symbol">:</a> <a id="2486" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2492" href="Ledger.Conway.Specification.Rewards.html#5822" class="Record">RewardUpdate</a>
  <a id="2507" href="Ledger.Conway.Conformance.Epoch.html#2507" class="Generalizable">certState&#39;</a> <a id="2518" class="Symbol">:</a> <a id="2520" href="Ledger.Conway.Conformance.Certs.html#970" class="Record">CertState</a>

<a id="2531" class="Keyword">data</a> <a id="_⊢_⇀⦇_,EPOCH⦈_"></a><a id="2536" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">_⊢_⇀⦇_,EPOCH⦈_</a> <a id="2551" class="Symbol">:</a> <a id="2553" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="2555" class="Symbol">→</a> <a id="2557" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a> <a id="2568" class="Symbol">→</a> <a id="2570" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a> <a id="2576" class="Symbol">→</a> <a id="2578" href="Ledger.Conway.Conformance.Epoch.html#977" class="Record">EpochState</a> <a id="2589" class="Symbol">→</a> <a id="2591" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2596" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,EPOCH⦈_.EPOCH"></a><a id="2605" href="Ledger.Conway.Conformance.Epoch.html#2605" class="InductiveConstructor">EPOCH</a> <a id="2611" class="Symbol">:</a> <a id="2613" class="Keyword">let</a>
      <a id="2623" class="Keyword">open</a> <a id="2628" href="Ledger.Conway.Conformance.Ledger.html#779" class="Module">LState</a> <a id="2635" href="Ledger.Conway.Conformance.Epoch.html#2334" class="Generalizable">ls</a>
      <a id="2644" class="Keyword">open</a> <a id="2649" href="Ledger.Conway.Conformance.Certs.html#970" class="Module">CertState</a> <a id="2659" href="Ledger.Conway.Conformance.Ledger.html#887" class="Function">certState</a>
      <a id="2675" class="Keyword">open</a> <a id="2680" href="Ledger.Conway.Specification.Ratify.html#3383" class="Module">RatifyState</a> <a id="2692" href="Ledger.Conway.Conformance.Epoch.html#2279" class="Generalizable">fut</a>
      <a id="2702" class="Keyword">open</a> <a id="2707" href="Ledger.Conway.Specification.Utxo.html#1474" class="Module">UTxOState</a>
      <a id="2723" class="Keyword">open</a> <a id="2728" href="Ledger.Conway.Specification.Certs.html#3808" class="Module">PState</a><a id="2734" class="Symbol">;</a> <a id="2736" class="Keyword">open</a> <a id="2741" href="Ledger.Conway.Conformance.Certs.html#597" class="Module">DState</a><a id="2747" class="Symbol">;</a> <a id="2749" class="Keyword">open</a> <a id="2754" href="Ledger.Conway.Conformance.Certs.html#802" class="Module">GState</a>
      <a id="2767" class="Keyword">open</a> <a id="2772" href="Ledger.Conway.Specification.PParams.html#720" class="Module">Acnt</a><a id="2776" class="Symbol">;</a> <a id="2778" class="Keyword">open</a> <a id="2783" href="Ledger.Conway.Specification.Enact.html#444" class="Module">EnactState</a><a id="2793" class="Symbol">;</a> <a id="2795" class="Keyword">open</a> <a id="2800" href="Ledger.Conway.Specification.Gov.Actions.html#2740" class="Module">GovActionState</a>


      <a id="2823" href="Ledger.Conway.Conformance.Epoch.html#2823" class="Bound">removedGovActions</a> <a id="2841" class="Symbol">=</a> <a id="2843" href="Function.Base.html#1638" class="Function">flip</a> <a id="2848" href="Axiom.Set.html#7022" class="Function">concatMapˢ</a> <a id="2859" href="Ledger.Conway.Specification.Ratify.html#3453" class="Function">removed</a> <a id="2867" class="Symbol">λ</a> <a id="2869" class="Symbol">(</a><a id="2870" href="Ledger.Conway.Conformance.Epoch.html#2870" class="Bound">gaid</a> <a id="2875" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2877" href="Ledger.Conway.Conformance.Epoch.html#2877" class="Bound">gaSt</a><a id="2881" class="Symbol">)</a> <a id="2883" class="Symbol">→</a>
        <a id="2893" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="2898" class="Symbol">(</a><a id="2899" href="Ledger.Conway.Specification.Gov.Actions.html#2811" class="Field">returnAddr</a> <a id="2910" href="Ledger.Conway.Conformance.Epoch.html#2877" class="Bound">gaSt</a> <a id="2915" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="2917" class="Symbol">)</a> <a id="2919" class="Symbol">((</a><a id="2921" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="2928" class="Symbol">.</a><a id="2929" href="Ledger.Conway.Specification.Utxo.html#1582" class="Field">deposits</a> <a id="2938" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="2940" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="2942" href="Ledger.Conway.Specification.Certs.html#538" class="InductiveConstructor">GovActionDeposit</a> <a id="2959" href="Ledger.Conway.Conformance.Epoch.html#2870" class="Bound">gaid</a> <a id="2964" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="2965" class="Symbol">)</a> <a id="2967" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a><a id="2968" class="Symbol">)</a>
      <a id="2976" href="Ledger.Conway.Conformance.Epoch.html#2976" class="Bound">govActionReturns</a> <a id="2993" class="Symbol">=</a> <a id="2995" href="Axiom.Set.Map.Dec.html#1932" class="Function">aggregate₊</a> <a id="3006" class="Symbol">(</a><a id="3007" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3012" class="Symbol">(λ</a> <a id="3015" class="Symbol">(</a><a id="3016" href="Ledger.Conway.Conformance.Epoch.html#3016" class="Bound">a</a> <a id="3018" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3020" class="Symbol">_</a> <a id="3022" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3024" href="Ledger.Conway.Conformance.Epoch.html#3024" class="Bound">d</a><a id="3025" class="Symbol">)</a> <a id="3027" class="Symbol">→</a> <a id="3029" href="Ledger.Conway.Conformance.Epoch.html#3016" class="Bound">a</a> <a id="3031" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3033" href="Ledger.Conway.Conformance.Epoch.html#3024" class="Bound">d</a><a id="3034" class="Symbol">)</a> <a id="3036" href="Ledger.Conway.Conformance.Epoch.html#2823" class="Bound">removedGovActions</a> <a id="3054" href="abstract-set-theory.FiniteSetTheory.html#2767" class="Function Operator">ᶠˢ</a><a id="3056" class="Symbol">)</a>

      <a id="3065" href="Ledger.Conway.Conformance.Epoch.html#3065" class="Bound">trWithdrawals</a>   <a id="3081" class="Symbol">=</a> <a id="3083" href="Ledger.Conway.Specification.Ratify.html#3420" class="Function">es</a> <a id="3086" class="Symbol">.</a><a id="3087" href="Ledger.Conway.Specification.Enact.html#696" class="Field">withdrawals</a>
      <a id="3105" href="Ledger.Conway.Conformance.Epoch.html#3105" class="Bound">totWithdrawals</a>  <a id="3121" class="Symbol">=</a> <a id="3123" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="3126" href="Ledger.Conway.Conformance.Epoch.html#3126" class="Bound">x</a> <a id="3128" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="3130" href="Ledger.Conway.Conformance.Epoch.html#3065" class="Bound">trWithdrawals</a> <a id="3144" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="3146" href="Ledger.Conway.Conformance.Epoch.html#3126" class="Bound">x</a>

      <a id="3155" href="Ledger.Conway.Conformance.Epoch.html#3155" class="Bound">es</a>         <a id="3166" class="Symbol">=</a> <a id="3168" class="Keyword">record</a> <a id="3175" href="Ledger.Conway.Specification.Ratify.html#3420" class="Function">es</a> <a id="3178" class="Symbol">{</a> <a id="3180" href="Ledger.Conway.Specification.Enact.html#696" class="Field">withdrawals</a> <a id="3192" class="Symbol">=</a> <a id="3194" href="Class.HasEmptySet.html#287" class="Field">∅</a> <a id="3196" class="Symbol">}</a>
      <a id="3204" href="Ledger.Conway.Conformance.Epoch.html#3204" class="Bound">retired</a>    <a id="3215" class="Symbol">=</a> <a id="3217" class="Symbol">(</a><a id="3218" href="Ledger.Conway.Conformance.Certs.html#1049" class="Function">pState</a> <a id="3225" class="Symbol">.</a><a id="3226" href="Ledger.Conway.Specification.Certs.html#3882" class="Field">retiring</a><a id="3234" class="Symbol">)</a> <a id="3236" href="Axiom.Set.Map.html#14230" class="Function Operator">⁻¹</a> <a id="3239" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a>
      <a id="3247" href="Ledger.Conway.Conformance.Epoch.html#3247" class="Bound">payout</a>     <a id="3258" class="Symbol">=</a> <a id="3260" href="Ledger.Conway.Conformance.Epoch.html#2976" class="Bound">govActionReturns</a> <a id="3277" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="3280" href="Ledger.Conway.Conformance.Epoch.html#3065" class="Bound">trWithdrawals</a>
      <a id="3300" href="Ledger.Conway.Conformance.Epoch.html#3300" class="Bound">refunds</a>    <a id="3311" class="Symbol">=</a> <a id="3313" href="Axiom.Set.Map.html#13791" class="Function">pullbackMap</a> <a id="3325" href="Ledger.Conway.Conformance.Epoch.html#3247" class="Bound">payout</a> <a id="3332" href="Ledger.Conway.Specification.Epoch.html#4170" class="Function">toRwdAddr</a> <a id="3342" class="Symbol">(</a><a id="3343" href="Class.IsSet.html#916" class="Function">dom</a> <a id="3347" class="Symbol">(</a><a id="3348" href="Ledger.Conway.Conformance.Certs.html#1029" class="Function">dState</a> <a id="3355" class="Symbol">.</a><a id="3356" href="Ledger.Conway.Conformance.Certs.html#733" class="Field">rewards</a><a id="3363" class="Symbol">))</a>
      <a id="3372" href="Ledger.Conway.Conformance.Epoch.html#3372" class="Bound">unclaimed</a>  <a id="3383" class="Symbol">=</a> <a id="3385" href="Ledger.Prelude.HasCoin.html#170" class="Field">getCoin</a> <a id="3393" href="Ledger.Conway.Conformance.Epoch.html#3247" class="Bound">payout</a> <a id="3400" href="Interface.HasSubtract.html#209" class="Field Operator">-</a> <a id="3402" href="Ledger.Prelude.HasCoin.html#170" class="Field">getCoin</a> <a id="3410" href="Ledger.Conway.Conformance.Epoch.html#3300" class="Bound">refunds</a>
      <a id="3424" href="Ledger.Conway.Conformance.Epoch.html#3424" class="Bound">vDeposits</a>  <a id="3435" class="Symbol">=</a> <a id="3437" href="Ledger.Conway.Conformance.Certs.html#1069" class="Function">gState</a> <a id="3444" class="Symbol">.</a><a id="3445" href="Ledger.Conway.Conformance.Certs.html#940" class="Field">deposits</a>

      <a id="3461" href="Ledger.Conway.Conformance.Epoch.html#3461" class="Bound">govSt&#39;</a> <a id="3468" class="Symbol">=</a> <a id="3470" href="Data.List.Base.html#10687" class="Function">filter</a> <a id="3477" class="Symbol">(λ</a> <a id="3480" href="Ledger.Conway.Conformance.Epoch.html#3480" class="Bound">x</a> <a id="3482" class="Symbol">→</a> <a id="3484" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="3486" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3492" href="Ledger.Conway.Conformance.Epoch.html#3480" class="Bound">x</a> <a id="3494" href="Class.IsSet.html#462" class="Function Operator">∉</a> <a id="3496" href="abstract-set-theory.FiniteSetTheory.html#519" class="Function">mapˢ</a> <a id="3501" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3507" href="Ledger.Conway.Specification.Ratify.html#3453" class="Function">removed</a> <a id="3515" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a><a id="3516" class="Symbol">)</a> <a id="3518" href="Ledger.Conway.Conformance.Ledger.html#861" class="Function">govSt</a>

      <a id="3531" href="Ledger.Conway.Conformance.Epoch.html#3531" class="Bound">dState&#39;</a> <a id="3539" class="Symbol">:</a> <a id="3541" href="Ledger.Conway.Conformance.Certs.html#597" class="Record">DState</a>
      <a id="3554" href="Ledger.Conway.Conformance.Epoch.html#3531" class="Bound">dState&#39;</a> <a id="3562" class="Symbol">=</a> <a id="3564" class="Keyword">record</a> <a id="3571" href="Ledger.Conway.Conformance.Certs.html#1029" class="Function">dState</a> <a id="3578" class="Symbol">{</a> <a id="3580" href="Ledger.Conway.Conformance.Certs.html#733" class="Field">rewards</a> <a id="3588" class="Symbol">=</a> <a id="3590" href="Ledger.Conway.Conformance.Certs.html#1029" class="Function">dState</a> <a id="3597" class="Symbol">.</a><a id="3598" href="Ledger.Conway.Conformance.Certs.html#733" class="Field">rewards</a> <a id="3606" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="3609" href="Ledger.Conway.Conformance.Epoch.html#3300" class="Bound">refunds</a> <a id="3617" class="Symbol">}</a>

      <a id="3626" href="Ledger.Conway.Conformance.Epoch.html#3626" class="Bound">pState&#39;</a> <a id="3634" class="Symbol">:</a> <a id="3636" href="Ledger.Conway.Specification.Certs.html#3808" class="Record">PState</a>
      <a id="3649" href="Ledger.Conway.Conformance.Epoch.html#3626" class="Bound">pState&#39;</a> <a id="3657" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{3661}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1049}{\htmlId{3662}{\htmlClass{Function}{\text{pState}}}}\, \,\htmlId{3669}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Certs.html#3840}{\htmlId{3670}{\htmlClass{Field}{\text{pools}}}}\,\,\htmlId{3675}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{3677}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3204}{\htmlId{3679}{\htmlClass{Bound}{\text{retired}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{3687}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\htmlId{3691}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1049}{\htmlId{3692}{\htmlClass{Function}{\text{pState}}}}\, \,\htmlId{3699}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Certs.html#3882}{\htmlId{3700}{\htmlClass{Field}{\text{retiring}}}}\,\,\htmlId{3708}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{3710}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3204}{\htmlId{3712}{\htmlClass{Bound}{\text{retired}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{3720}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \end{pmatrix}$</a>

      <a id="3731" href="Ledger.Conway.Conformance.Epoch.html#3731" class="Bound">gState&#39;</a> <a id="3739" class="Symbol">:</a> <a id="3741" href="Ledger.Conway.Conformance.Certs.html#802" class="Record">GState</a>
      <a id="3754" href="Ledger.Conway.Conformance.Epoch.html#3731" class="Bound">gState&#39;</a> <a id="3762" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\htmlId{3766}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Class.ToBool.html#389}{\htmlId{3767}{\htmlClass{Function Operator}{\text{if}}}}\, \,\href{Data.List.Base.html#4703}{\htmlId{3770}{\htmlClass{Function}{\text{null}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#3461}{\htmlId{3775}{\htmlClass{Bound}{\text{govSt&#39;}}}}\, \,\href{Class.ToBool.html#389}{\htmlId{3782}{\htmlClass{Function Operator}{\text{then}}}}\, \,\href{Axiom.Set.Map.html#6068}{\htmlId{3787}{\htmlClass{Function}{\text{mapValues}}}}\, \,\htmlId{3797}{\htmlClass{Symbol}{\text{(}}}\,\,\htmlId{3798}{\htmlClass{Number}{\text{1}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{3800}{\htmlClass{Field Operator}{\text{+\_}}}}\,\,\htmlId{3802}{\htmlClass{Symbol}{\text{)}}}\, \,\htmlId{3804}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1069}{\htmlId{3805}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{3812}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#857}{\htmlId{3813}{\htmlClass{Field}{\text{dreps}}}}\,\,\htmlId{3818}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Class.ToBool.html#389}{\htmlId{3820}{\htmlClass{Function Operator}{\text{else}}}}\, \,\htmlId{3825}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1069}{\htmlId{3826}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{3833}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#857}{\htmlId{3834}{\htmlClass{Field}{\text{dreps}}}}\,\,\htmlId{3839}{\htmlClass{Symbol}{\text{))}}}\,
                , \,\htmlId{3860}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#1069}{\htmlId{3861}{\htmlClass{Function}{\text{gState}}}}\, \,\htmlId{3868}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Conformance.Certs.html#893}{\htmlId{3869}{\htmlClass{Field}{\text{ccHotKeys}}}}\,\,\htmlId{3878}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Axiom.Set.Map.html#10678}{\htmlId{3880}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Specification.Enact.html#1241}{\htmlId{3882}{\htmlClass{Function}{\text{ccCreds}}}}\, \,\htmlId{3890}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Ledger.Conway.Conformance.Epoch.html#3155}{\htmlId{3891}{\htmlClass{Bound}{\text{es}}}}\, \,\htmlId{3894}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Enact.html#480}{\htmlId{3895}{\htmlClass{Field}{\text{cc}}}}\,\,\htmlId{3897}{\htmlClass{Symbol}{\text{)}}}\,
                , \,\href{Ledger.Conway.Conformance.Epoch.html#3424}{\htmlId{3917}{\htmlClass{Bound}{\text{vDeposits}}}}\,
                \end{pmatrix}$</a>

      <a id="3952" href="Ledger.Conway.Conformance.Epoch.html#3952" class="Bound">certState&#39;</a> <a id="3963" class="Symbol">:</a> <a id="3965" href="Ledger.Conway.Conformance.Certs.html#970" class="Record">CertState</a>
      <a id="3981" href="Ledger.Conway.Conformance.Epoch.html#3952" class="Bound">certState&#39;</a> <a id="3992" class="Symbol">=</a> <a id="3994" class="Keyword">record</a> <a id="4001" class="Symbol">{</a> <a id="4003" href="Ledger.Conway.Conformance.Certs.html#1029" class="Field">dState</a> <a id="4010" class="Symbol">=</a> <a id="4012" href="Ledger.Conway.Conformance.Epoch.html#3531" class="Bound">dState&#39;</a> <a id="4020" class="Symbol">;</a> <a id="4022" href="Ledger.Conway.Conformance.Certs.html#1049" class="Field">pState</a> <a id="4029" class="Symbol">=</a> <a id="4031" href="Ledger.Conway.Conformance.Epoch.html#3626" class="Bound">pState&#39;</a> <a id="4039" class="Symbol">;</a> <a id="4041" href="Ledger.Conway.Conformance.Certs.html#1069" class="Field">gState</a> <a id="4048" class="Symbol">=</a> <a id="4050" href="Ledger.Conway.Conformance.Epoch.html#3731" class="Bound">gState&#39;</a> <a id="4058" class="Symbol">}</a>

      <a id="4067" href="Ledger.Conway.Conformance.Epoch.html#4067" class="Bound">utxoSt&#39;</a> <a id="4075" class="Symbol">=</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{4079}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4086}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1538}{\htmlId{4087}{\htmlClass{Field}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{4094}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4101}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1560}{\htmlId{4102}{\htmlClass{Field}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Conformance.Ledger.html#834}{\htmlId{4109}{\htmlClass{Function}{\text{utxoSt}}}}\, \,\htmlId{4116}{\htmlClass{Symbol}{\text{.}}}\,\,\href{Ledger.Conway.Specification.Utxo.html#1582}{\htmlId{4117}{\htmlClass{Field}{\text{deposits}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{4126}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{abstract-set-theory.FiniteSetTheory.html#519}{\htmlId{4128}{\htmlClass{Function}{\text{mapˢ}}}}\, \,\htmlId{4133}{\htmlClass{Symbol}{\text{(}}}\,\,\href{Data.Product.Base.html#636}{\htmlId{4134}{\htmlClass{Field}{\text{proj₁}}}}\, \,\href{Function.Base.html#1115}{\htmlId{4140}{\htmlClass{Function Operator}{\text{∘}}}}\, \,\href{Data.Product.Base.html#650}{\htmlId{4142}{\htmlClass{Field}{\text{proj₂}}}}\,\,\htmlId{4147}{\htmlClass{Symbol}{\text{)}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2823}{\htmlId{4149}{\htmlClass{Bound}{\text{removedGovActions}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{4167}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\htmlId{4171}{\htmlClass{Number}{\text{0}}}\, \end{pmatrix}$</a>

      <a id="4182" href="Ledger.Conway.Conformance.Epoch.html#4182" class="Bound">acnt&#39;</a> <a id="4188" class="Symbol">=</a> <a id="4190" class="Keyword">record</a> <a id="4197" href="Ledger.Conway.Conformance.Epoch.html#2348" class="Generalizable">acnt</a>
        <a id="4210" class="Symbol">{</a> <a id="4212" href="Ledger.Conway.Specification.PParams.html#775" class="Field">treasury</a>  <a id="4222" class="Symbol">=</a> <a id="4224" href="Ledger.Conway.Conformance.Epoch.html#2348" class="Generalizable">acnt</a> <a id="4229" class="Symbol">.</a><a id="4230" href="Ledger.Conway.Specification.PParams.html#775" class="Field">treasury</a> <a id="4239" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="4241" href="Ledger.Conway.Conformance.Epoch.html#3105" class="Bound">totWithdrawals</a> <a id="4256" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4258" href="Ledger.Conway.Conformance.Ledger.html#834" class="Function">utxoSt</a> <a id="4265" class="Symbol">.</a><a id="4266" href="Ledger.Conway.Specification.Utxo.html#1608" class="Field">donations</a> <a id="4276" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4278" href="Ledger.Conway.Conformance.Epoch.html#3372" class="Bound">unclaimed</a> <a id="4288" class="Symbol">}</a>
    <a id="4294" class="Keyword">in</a>
    <a id="4301" class="Keyword">record</a> <a id="4308" class="Symbol">{</a> <a id="4310" href="Ledger.Conway.Specification.Ratify.html#3153" class="Field">currentEpoch</a> <a id="4323" class="Symbol">=</a> <a id="4325" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a>
           <a id="4338" class="Symbol">;</a> <a id="4340" href="Ledger.Conway.Specification.Ratify.html#3121" class="Field">stakeDistrs</a> <a id="4352" class="Symbol">=</a> <a id="4354" href="Ledger.Conway.Specification.Epoch.html#8611" class="Function">mkStakeDistrs</a>  <a id="4369" class="Symbol">(</a><a id="4370" href="Ledger.Conway.Specification.Rewards.html#7248" class="Field">Snapshots.mark</a> <a id="4385" href="Ledger.Conway.Conformance.Epoch.html#2442" class="Generalizable">ss&#39;</a><a id="4388" class="Symbol">)</a> <a id="4390" href="Ledger.Conway.Conformance.Epoch.html#3461" class="Bound">govSt&#39;</a>
                                          <a id="4439" class="Symbol">(</a><a id="4440" href="Ledger.Conway.Conformance.Epoch.html#4067" class="Bound">utxoSt&#39;</a> <a id="4448" class="Symbol">.</a><a id="4449" href="Ledger.Conway.Specification.Utxo.html#1582" class="Field">deposits</a><a id="4457" class="Symbol">)</a> <a id="4459" class="Symbol">(</a><a id="4460" href="Ledger.Conway.Conformance.Certs.html#654" class="Field">voteDelegs</a> <a id="4471" href="Ledger.Conway.Conformance.Certs.html#1029" class="Function">dState</a><a id="4477" class="Symbol">)</a>
           <a id="4490" class="Symbol">;</a> <a id="4492" href="Ledger.Conway.Specification.Ratify.html#3268" class="Field">treasury</a> <a id="4501" class="Symbol">=</a> <a id="4503" href="Ledger.Conway.Conformance.Epoch.html#2348" class="Generalizable">acnt</a> <a id="4508" class="Symbol">.</a><a id="4509" href="Ledger.Conway.Specification.PParams.html#775" class="Field">treasury</a> <a id="4518" class="Symbol">;</a> <a id="4520" href="Ledger.Conway.Conformance.Epoch.html#4520" class="Module">GState</a> <a id="4527" href="Ledger.Conway.Conformance.Certs.html#1069" class="Function">gState</a>
           <a id="4545" class="Symbol">;</a> <a id="4547" href="Ledger.Conway.Specification.Ratify.html#3293" class="Field">pools</a> <a id="4553" class="Symbol">=</a> <a id="4555" href="Ledger.Conway.Conformance.Certs.html#1049" class="Function">pState</a> <a id="4562" class="Symbol">.</a><a id="4563" href="Ledger.Conway.Specification.Certs.html#3840" class="Field">pools</a> <a id="4569" class="Symbol">;</a> <a id="4571" href="Ledger.Conway.Specification.Ratify.html#3339" class="Field">delegatees</a> <a id="4582" class="Symbol">=</a> <a id="4584" href="Ledger.Conway.Conformance.Certs.html#1029" class="Function">dState</a> <a id="4591" class="Symbol">.</a><a id="4592" href="Ledger.Conway.Conformance.Certs.html#654" class="Field">voteDelegs</a> <a id="4603" class="Symbol">}</a>
        <a id="4613" href="Ledger.Conway.Specification.Ratify.html#11181" class="Function Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#3155}{\htmlId{4617}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Class.HasEmptySet.html#287}{\htmlId{4622}{\htmlClass{Field}{\text{∅}}}}\, \\ \,\href{Agda.Builtin.Bool.html#192}{\htmlId{4626}{\htmlClass{InductiveConstructor}{\text{false}}}}\, \end{pmatrix}$</a> <a id="4634" href="Ledger.Conway.Specification.Ratify.html#11181" class="Function Operator">⇀⦇</a> <a id="4637" href="Ledger.Conway.Conformance.Epoch.html#3461" class="Bound">govSt&#39;</a> <a id="4644" href="Ledger.Conway.Specification.Ratify.html#11181" class="Function Operator">,RATIFIES⦈</a> <a id="4655" href="Ledger.Conway.Conformance.Epoch.html#2283" class="Generalizable">fut&#39;</a>
      <a id="4666" class="Symbol">→</a> <a id="4668" href="Ledger.Conway.Conformance.Epoch.html#2334" class="Generalizable">ls</a> <a id="4671" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">⊢</a> <a id="4673" href="Ledger.Conway.Conformance.Epoch.html#2439" class="Generalizable">ss</a> <a id="4676" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">⇀⦇</a> <a id="4679" href="Agda.Builtin.Unit.html#212" class="InductiveConstructor">tt</a> <a id="4682" href="Ledger.Conway.Conformance.Rewards.html#613" class="Datatype Operator">,SNAP⦈</a> <a id="4689" href="Ledger.Conway.Conformance.Epoch.html#2442" class="Generalizable">ss&#39;</a>
    <a id="4697" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
    <a id="4734" class="Symbol">_</a> <a id="4736" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2348}{\htmlId{4740}{\htmlClass{Generalizable}{\text{acnt}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2439}{\htmlId{4747}{\htmlClass{Generalizable}{\text{ss}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2334}{\htmlId{4752}{\htmlClass{Generalizable}{\text{ls}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2362}{\htmlId{4757}{\htmlClass{Generalizable}{\text{es₀}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2279}{\htmlId{4763}{\htmlClass{Generalizable}{\text{fut}}}}\, \end{pmatrix}$</a> <a id="4769" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">⇀⦇</a> <a id="4772" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="4774" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">,EPOCH⦈</a>
        <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#4182}{\htmlId{4792}{\htmlClass{Bound}{\text{acnt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2442}{\htmlId{4800}{\htmlClass{Generalizable}{\text{ss&#39;}}}}\, \\ \begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#4067}{\htmlId{4808}{\htmlClass{Bound}{\text{utxoSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#3461}{\htmlId{4818}{\htmlClass{Bound}{\text{govSt&#39;}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#3952}{\htmlId{4827}{\htmlClass{Bound}{\text{certState&#39;}}}}\, \end{pmatrix} \\ \,\href{Ledger.Conway.Conformance.Epoch.html#3155}{\htmlId{4842}{\htmlClass{Bound}{\text{es}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2283}{\htmlId{4847}{\htmlClass{Generalizable}{\text{fut&#39;}}}}\, \end{pmatrix}$</a>

<a id="4855" class="Keyword">data</a> <a id="_⊢_⇀⦇_,NEWEPOCH⦈_"></a><a id="4860" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">_⊢_⇀⦇_,NEWEPOCH⦈_</a> <a id="4878" class="Symbol">:</a> <a id="4880" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a> <a id="4882" class="Symbol">→</a> <a id="4884" href="Ledger.Conway.Conformance.Epoch.html#1175" class="Record">NewEpochState</a> <a id="4898" class="Symbol">→</a> <a id="4900" href="Ledger.Core.Specification.Epoch.html#598" class="Function">Epoch</a> <a id="4906" class="Symbol">→</a> <a id="4908" href="Ledger.Conway.Conformance.Epoch.html#1175" class="Record">NewEpochState</a> <a id="4922" class="Symbol">→</a> <a id="4924" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="4929" class="Keyword">where</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-New"></a><a id="4938" href="Ledger.Conway.Conformance.Epoch.html#4938" class="InductiveConstructor">NEWEPOCH-New</a> <a id="4951" class="Symbol">:</a> <a id="4953" class="Keyword">let</a>
      <a id="4963" href="Ledger.Conway.Conformance.Epoch.html#4963" class="Bound">eps&#39;</a> <a id="4968" class="Symbol">=</a> <a id="4970" href="Ledger.Conway.Conformance.Epoch.html#1490" class="Function">applyRUpd</a> <a id="4980" href="Ledger.Conway.Conformance.Epoch.html#2460" class="Generalizable">ru</a> <a id="4983" href="Ledger.Conway.Conformance.Epoch.html#2304" class="Generalizable">eps</a>
    <a id="4991" class="Keyword">in</a>
    <a id="4998" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="5000" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5002" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5004" href="Ledger.Conway.Conformance.Epoch.html#2259" class="Generalizable">lastEpoch</a> <a id="5014" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5016" class="Number">1</a>
    <a id="5022" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="5024" class="Symbol">_</a> <a id="5026" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">⊢</a> <a id="5028" href="Ledger.Conway.Conformance.Epoch.html#4963" class="Bound">eps&#39;</a> <a id="5033" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">⇀⦇</a> <a id="5036" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5038" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">,EPOCH⦈</a> <a id="5046" href="Ledger.Conway.Conformance.Epoch.html#2313" class="Generalizable">eps&#39;&#39;</a>
      <a id="5058" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
      <a id="5097" class="Symbol">_</a> <a id="5099" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2259}{\htmlId{5103}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2304}{\htmlId{5115}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#173}{\htmlId{5121}{\htmlClass{InductiveConstructor}{\text{just}}}}\, \,\href{Ledger.Conway.Conformance.Epoch.html#2460}{\htmlId{5126}{\htmlClass{Generalizable}{\text{ru}}}}\, \end{pmatrix}$</a> <a id="5131" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">⇀⦇</a> <a id="5134" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5136" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2257}{\htmlId{5149}{\htmlClass{Generalizable}{\text{e}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2313}{\htmlId{5153}{\htmlClass{Generalizable}{\text{eps&#39;&#39;}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{5161}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-Not-New"></a><a id="5174" href="Ledger.Conway.Conformance.Epoch.html#5174" class="InductiveConstructor">NEWEPOCH-Not-New</a> <a id="5191" class="Symbol">:</a>
    <a id="5197" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="5199" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5201" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="5203" href="Ledger.Conway.Conformance.Epoch.html#2259" class="Generalizable">lastEpoch</a> <a id="5213" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5215" class="Number">1</a>
      <a id="5223" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
      <a id="5262" class="Symbol">_</a> <a id="5264" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2259}{\htmlId{5268}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2304}{\htmlId{5280}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2480}{\htmlId{5286}{\htmlClass{Generalizable}{\text{mru}}}}\, \end{pmatrix}$</a> <a id="5292" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">⇀⦇</a> <a id="5295" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5297" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2259}{\htmlId{5310}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2304}{\htmlId{5322}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2480}{\htmlId{5328}{\htmlClass{Generalizable}{\text{mru}}}}\, \end{pmatrix}$</a>

  <a id="_⊢_⇀⦇_,NEWEPOCH⦈_.NEWEPOCH-No-Reward-Update"></a><a id="5337" href="Ledger.Conway.Conformance.Epoch.html#5337" class="InductiveConstructor">NEWEPOCH-No-Reward-Update</a> <a id="5363" class="Symbol">:</a>
    <a id="5369" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="5371" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5373" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5375" href="Ledger.Conway.Conformance.Epoch.html#2259" class="Generalizable">lastEpoch</a> <a id="5385" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="5387" class="Number">1</a>
    <a id="5393" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="5395" class="Symbol">_</a> <a id="5397" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">⊢</a> <a id="5399" href="Ledger.Conway.Conformance.Epoch.html#2304" class="Generalizable">eps</a> <a id="5403" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">⇀⦇</a> <a id="5406" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5408" href="Ledger.Conway.Conformance.Epoch.html#2536" class="Datatype Operator">,EPOCH⦈</a> <a id="5416" href="Ledger.Conway.Conformance.Epoch.html#2308" class="Generalizable">eps&#39;</a>
      <a id="5427" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
      <a id="5466" class="Symbol">_</a> <a id="5468" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2259}{\htmlId{5472}{\htmlClass{Generalizable}{\text{lastEpoch}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2304}{\htmlId{5484}{\htmlClass{Generalizable}{\text{eps}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{5490}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a> <a id="5500" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">⇀⦇</a> <a id="5503" href="Ledger.Conway.Conformance.Epoch.html#2257" class="Generalizable">e</a> <a id="5505" href="Ledger.Conway.Conformance.Epoch.html#4860" class="Datatype Operator">,NEWEPOCH⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Conformance.Epoch.html#2257}{\htmlId{5518}{\htmlClass{Generalizable}{\text{e}}}}\, \\ \,\href{Ledger.Conway.Conformance.Epoch.html#2308}{\htmlId{5522}{\htmlClass{Generalizable}{\text{eps&#39;}}}}\, \\ \,\href{Agda.Builtin.Maybe.html#194}{\htmlId{5529}{\htmlClass{InductiveConstructor}{\text{nothing}}}}\, \end{pmatrix}$</a>
</pre></body></html>