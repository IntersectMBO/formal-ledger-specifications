<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Types.Numeric.UnitInterval</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Symbol">#-}</a>

<a id="25" class="Comment">-- Rational number in the unit interval.</a>
<a id="66" class="Keyword">module</a> <a id="73" href="Ledger.Types.Numeric.UnitInterval.html" class="Module">Ledger.Types.Numeric.UnitInterval</a> <a id="107" class="Keyword">where</a>

<a id="114" class="Keyword">open</a> <a id="119" class="Keyword">import</a> <a id="126" href="Prelude.html" class="Module">Prelude</a>
  <a id="136" class="Keyword">hiding</a> <a id="143" class="Symbol">(</a><a id="144" href="Data.Sum.Base.html#811" class="Function Operator">[_,_]</a><a id="149" class="Symbol">;</a> <a id="151" href="Data.List.Base.html#5205" class="Function Operator">[_]</a><a id="154" class="Symbol">;</a> <a id="156" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">_*_</a><a id="159" class="Symbol">)</a>

<a id="162" class="Keyword">open</a> <a id="167" class="Keyword">import</a> <a id="174" href="Agda.Builtin.FromNat.html" class="Module">Agda.Builtin.FromNat</a>
<a id="195" class="Keyword">open</a> <a id="200" class="Keyword">import</a> <a id="207" href="Class.Show.html" class="Module">Class.Show</a> <a id="218" class="Keyword">using</a> <a id="224" class="Symbol">(</a><a id="225" href="Class.Show.Core.html#125" class="Record">Show</a><a id="229" class="Symbol">;</a> <a id="231" href="Class.Show.Core.html#187" class="Field">show</a><a id="235" class="Symbol">)</a>
<a id="237" class="Keyword">open</a> <a id="242" class="Keyword">import</a> <a id="249" href="Data.Irrelevant.html" class="Module">Data.Irrelevant</a> <a id="265" class="Keyword">using</a> <a id="271" class="Symbol">(</a><a id="272" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[_]</a><a id="275" class="Symbol">)</a>
<a id="277" class="Keyword">import</a> <a id="284" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="298" class="Symbol">as</a> <a id="301" class="Module">ℚ</a>
<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Data.Rational.Properties.html" class="Module">Data.Rational.Properties</a>
<a id="340" class="Keyword">import</a> <a id="347" href="Data.Rational.Show.html" class="Module">Data.Rational.Show</a> <a id="366" class="Symbol">as</a> <a id="369" class="Module">ℚshow</a>
<a id="375" class="Keyword">open</a> <a id="380" class="Keyword">import</a> <a id="387" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="401" class="Keyword">using</a> <a id="407" class="Symbol">(</a><a id="408" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="409" class="Symbol">;</a> <a id="411" href="Data.Rational.Base.html#2465" class="Datatype Operator">_≤_</a><a id="414" class="Symbol">;</a> <a id="416" href="Data.Rational.Properties.html#19360" class="Function Operator">_≤?_</a><a id="420" class="Symbol">;</a> <a id="422" href="Data.Rational.Base.html#6315" class="Function Operator">_*_</a><a id="425" class="Symbol">)</a>
<a id="427" class="Keyword">open</a> <a id="432" class="Keyword">import</a> <a id="439" href="Data.Refinement.html" class="Module">Data.Refinement</a> <a id="455" class="Keyword">using</a> <a id="461" class="Symbol">(</a><a id="462" href="Data.Refinement.Base.html#1052" class="Function">Refinement-syntax</a><a id="479" class="Symbol">;</a> <a id="481" href="Data.Refinement.Base.html#759" class="Field">value</a><a id="486" class="Symbol">;</a> <a id="488" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">_,_</a><a id="491" class="Symbol">)</a>

<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Tactic.EquationalReasoning.html" class="Module">Tactic.EquationalReasoning</a> <a id="533" class="Keyword">using</a> <a id="539" class="Symbol">(</a><a id="540" class="Keyword">module</a> <a id="547" href="Tactic.EquationalReasoning.html#418" class="Module">≡-Reasoning</a><a id="558" class="Symbol">)</a>
<a id="560" class="Keyword">open</a> <a id="565" href="Data.Rational.Properties.html#26177" class="Module">≤-Reasoning</a>

<a id="578" class="Comment">-- inUnitInterval predicate</a>
<a id="inUnitInterval"></a><a id="606" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="621" class="Symbol">:</a> <a id="623" class="Symbol">(</a><a id="624" href="Ledger.Types.Numeric.UnitInterval.html#624" class="Bound">x</a> <a id="626" class="Symbol">:</a> <a id="628" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="629" class="Symbol">)</a> <a id="631" class="Symbol">→</a> <a id="633" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="638" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="653" href="Ledger.Types.Numeric.UnitInterval.html#653" class="Bound">x</a> <a id="655" class="Symbol">=</a> <a id="657" class="Symbol">(</a><a id="658" class="Number">0</a> <a id="660" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="662" href="Ledger.Types.Numeric.UnitInterval.html#653" class="Bound">x</a><a id="663" class="Symbol">)</a> <a id="665" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="667" class="Symbol">(</a><a id="668" href="Ledger.Types.Numeric.UnitInterval.html#653" class="Bound">x</a> <a id="670" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="672" class="Number">1</a><a id="673" class="Symbol">)</a>

<a id="676" class="Comment">-- Decide whether a rational number is in the unit interval.</a>
<a id="isInUnitInterval"></a><a id="737" href="Ledger.Types.Numeric.UnitInterval.html#737" class="Function">isInUnitInterval</a> <a id="754" class="Symbol">:</a> <a id="756" class="Symbol">(</a><a id="757" href="Ledger.Types.Numeric.UnitInterval.html#757" class="Bound">x</a> <a id="759" class="Symbol">:</a> <a id="761" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="762" class="Symbol">)</a> <a id="764" class="Symbol">→</a> <a id="766" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="770" class="Symbol">(</a><a id="771" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="786" href="Ledger.Types.Numeric.UnitInterval.html#757" class="Bound">x</a><a id="787" class="Symbol">)</a>
<a id="789" href="Ledger.Types.Numeric.UnitInterval.html#737" class="Function">isInUnitInterval</a> <a id="806" href="Ledger.Types.Numeric.UnitInterval.html#806" class="Bound">x</a> <a id="808" class="Symbol">=</a> <a id="810" class="Symbol">(</a><a id="811" class="Number">0</a> <a id="813" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="816" href="Ledger.Types.Numeric.UnitInterval.html#806" class="Bound">x</a><a id="817" class="Symbol">)</a> <a id="819" href="Relation.Nullary.Decidable.Core.html#3103" class="Function Operator">×-dec</a> <a id="825" class="Symbol">(</a><a id="826" href="Ledger.Types.Numeric.UnitInterval.html#806" class="Bound">x</a> <a id="828" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="831" class="Number">1</a><a id="832" class="Symbol">)</a>

<a id="835" class="Comment">-- Multiplying with a number from the unit interval only decreases.</a>
<a id="inUnitInterval-*-≤y"></a><a id="903" href="Ledger.Types.Numeric.UnitInterval.html#903" class="Function">inUnitInterval-*-≤y</a> <a id="923" class="Symbol">:</a> <a id="925" class="Symbol">∀</a> <a id="927" class="Symbol">(</a><a id="928" href="Ledger.Types.Numeric.UnitInterval.html#928" class="Bound">x</a> <a id="930" href="Ledger.Types.Numeric.UnitInterval.html#930" class="Bound">y</a> <a id="932" class="Symbol">:</a> <a id="934" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="935" class="Symbol">)</a> <a id="937" class="Symbol">→</a> <a id="939" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="954" href="Ledger.Types.Numeric.UnitInterval.html#928" class="Bound">x</a> <a id="956" class="Symbol">→</a> <a id="958" class="Number">0</a> <a id="960" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="962" href="Ledger.Types.Numeric.UnitInterval.html#930" class="Bound">y</a> <a id="964" class="Symbol">→</a> <a id="966" href="Ledger.Types.Numeric.UnitInterval.html#928" class="Bound">x</a> <a id="968" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="970" href="Ledger.Types.Numeric.UnitInterval.html#930" class="Bound">y</a> <a id="972" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="974" href="Ledger.Types.Numeric.UnitInterval.html#930" class="Bound">y</a>
<a id="976" href="Ledger.Types.Numeric.UnitInterval.html#903" class="Function">inUnitInterval-*-≤y</a> <a id="996" href="Ledger.Types.Numeric.UnitInterval.html#996" class="Bound">x</a> <a id="998" href="Ledger.Types.Numeric.UnitInterval.html#998" class="Bound">y</a> <a id="1000" class="Symbol">(</a><a id="1001" href="Ledger.Types.Numeric.UnitInterval.html#1001" class="Bound">0≤x</a> <a id="1005" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1007" href="Ledger.Types.Numeric.UnitInterval.html#1007" class="Bound">x≤1</a><a id="1010" class="Symbol">)</a> <a id="1012" href="Ledger.Types.Numeric.UnitInterval.html#1012" class="Bound">0≤y</a> <a id="1016" class="Symbol">=</a>
  <a id="1020" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1030" href="Ledger.Types.Numeric.UnitInterval.html#996" class="Bound">x</a> <a id="1032" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1034" href="Ledger.Types.Numeric.UnitInterval.html#998" class="Bound">y</a>  <a id="1037" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1040" href="Data.Rational.Properties.html#47711" class="Function">*-monoʳ-≤-nonNeg</a> <a id="1057" href="Ledger.Types.Numeric.UnitInterval.html#998" class="Bound">y</a> <a id="1059" class="Symbol">⦃</a> <a id="1061" href="Data.Rational.Base.html#5785" class="Function">ℚ.nonNegative</a> <a id="1075" href="Ledger.Types.Numeric.UnitInterval.html#1012" class="Bound">0≤y</a> <a id="1079" class="Symbol">⦄</a> <a id="1081" href="Ledger.Types.Numeric.UnitInterval.html#1007" class="Bound">x≤1</a> <a id="1085" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1091" class="Number">1</a> <a id="1093" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1095" href="Ledger.Types.Numeric.UnitInterval.html#998" class="Bound">y</a>  <a id="1098" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1101" href="Data.Rational.Properties.html#42576" class="Function">*-identityˡ</a> <a id="1113" class="Symbol">_</a> <a id="1115" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1121" href="Ledger.Types.Numeric.UnitInterval.html#998" class="Bound">y</a>      <a id="1128" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1131" class="Comment">-- Left multiplication by unit interval element preserves non-negativity.</a>
<a id="inUnitInterval-*-0≤"></a><a id="1205" href="Ledger.Types.Numeric.UnitInterval.html#1205" class="Function">inUnitInterval-*-0≤</a> <a id="1225" class="Symbol">:</a> <a id="1227" class="Symbol">∀</a> <a id="1229" class="Symbol">(</a><a id="1230" href="Ledger.Types.Numeric.UnitInterval.html#1230" class="Bound">x</a> <a id="1232" href="Ledger.Types.Numeric.UnitInterval.html#1232" class="Bound">y</a> <a id="1234" class="Symbol">:</a> <a id="1236" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="1237" class="Symbol">)</a> <a id="1239" class="Symbol">→</a> <a id="1241" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="1256" href="Ledger.Types.Numeric.UnitInterval.html#1230" class="Bound">x</a> <a id="1258" class="Symbol">→</a> <a id="1260" class="Number">0</a> <a id="1262" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1264" href="Ledger.Types.Numeric.UnitInterval.html#1232" class="Bound">y</a> <a id="1266" class="Symbol">→</a> <a id="1268" class="Number">0</a> <a id="1270" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1272" href="Ledger.Types.Numeric.UnitInterval.html#1230" class="Bound">x</a> <a id="1274" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1276" href="Ledger.Types.Numeric.UnitInterval.html#1232" class="Bound">y</a>
<a id="1278" href="Ledger.Types.Numeric.UnitInterval.html#1205" class="Function">inUnitInterval-*-0≤</a> <a id="1298" href="Ledger.Types.Numeric.UnitInterval.html#1298" class="Bound">x</a> <a id="1300" href="Ledger.Types.Numeric.UnitInterval.html#1300" class="Bound">y</a> <a id="1302" class="Symbol">(</a><a id="1303" href="Ledger.Types.Numeric.UnitInterval.html#1303" class="Bound">0≤x</a> <a id="1307" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1309" href="Ledger.Types.Numeric.UnitInterval.html#1309" class="Bound">x≤1</a><a id="1312" class="Symbol">)</a> <a id="1314" href="Ledger.Types.Numeric.UnitInterval.html#1314" class="Bound">0≤y</a> <a id="1318" class="Symbol">=</a>
  <a id="1322" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1332" class="Number">0</a>      <a id="1339" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1342" href="Relation.Binary.PropositionalEquality.Core.html#1893" class="Function">sym</a> <a id="1346" class="Symbol">(</a><a id="1347" href="Data.Rational.Properties.html#42957" class="Function">*-zeroʳ</a> <a id="1355" href="Ledger.Types.Numeric.UnitInterval.html#1298" class="Bound">x</a><a id="1356" class="Symbol">)</a> <a id="1358" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1364" href="Ledger.Types.Numeric.UnitInterval.html#1298" class="Bound">x</a> <a id="1366" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1368" class="Number">0</a>  <a id="1371" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1374" href="Data.Rational.Properties.html#48056" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1391" href="Ledger.Types.Numeric.UnitInterval.html#1298" class="Bound">x</a> <a id="1393" class="Symbol">⦃</a> <a id="1395" href="Data.Rational.Base.html#5785" class="Function">ℚ.nonNegative</a> <a id="1409" href="Ledger.Types.Numeric.UnitInterval.html#1303" class="Bound">0≤x</a> <a id="1413" class="Symbol">⦄</a> <a id="1415" href="Ledger.Types.Numeric.UnitInterval.html#1314" class="Bound">0≤y</a> <a id="1419" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1425" href="Ledger.Types.Numeric.UnitInterval.html#1298" class="Bound">x</a> <a id="1427" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1429" href="Ledger.Types.Numeric.UnitInterval.html#1300" class="Bound">y</a>  <a id="1432" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1435" class="Comment">-- Left multiplication by unit interval element preserves being upper boundeded by 1.</a>
<a id="inUnitInterval-*-≤1"></a><a id="1521" href="Ledger.Types.Numeric.UnitInterval.html#1521" class="Function">inUnitInterval-*-≤1</a> <a id="1541" class="Symbol">:</a> <a id="1543" class="Symbol">∀</a> <a id="1545" class="Symbol">(</a><a id="1546" href="Ledger.Types.Numeric.UnitInterval.html#1546" class="Bound">x</a> <a id="1548" href="Ledger.Types.Numeric.UnitInterval.html#1548" class="Bound">y</a> <a id="1550" class="Symbol">:</a> <a id="1552" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="1553" class="Symbol">)</a> <a id="1555" class="Symbol">→</a> <a id="1557" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="1572" href="Ledger.Types.Numeric.UnitInterval.html#1546" class="Bound">x</a> <a id="1574" class="Symbol">→</a> <a id="1576" href="Ledger.Types.Numeric.UnitInterval.html#1548" class="Bound">y</a> <a id="1578" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1580" class="Number">1</a> <a id="1582" class="Symbol">→</a> <a id="1584" href="Ledger.Types.Numeric.UnitInterval.html#1546" class="Bound">x</a> <a id="1586" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1588" href="Ledger.Types.Numeric.UnitInterval.html#1548" class="Bound">y</a> <a id="1590" href="Data.Rational.Base.html#2465" class="Datatype Operator">≤</a> <a id="1592" class="Number">1</a>
<a id="1594" href="Ledger.Types.Numeric.UnitInterval.html#1521" class="Function">inUnitInterval-*-≤1</a> <a id="1614" href="Ledger.Types.Numeric.UnitInterval.html#1614" class="Bound">x</a> <a id="1616" href="Ledger.Types.Numeric.UnitInterval.html#1616" class="Bound">y</a> <a id="1618" class="Symbol">(</a><a id="1619" href="Ledger.Types.Numeric.UnitInterval.html#1619" class="Bound">0≤x</a> <a id="1623" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1625" href="Ledger.Types.Numeric.UnitInterval.html#1625" class="Bound">x≤1</a><a id="1628" class="Symbol">)</a> <a id="1630" href="Ledger.Types.Numeric.UnitInterval.html#1630" class="Bound">y≤1</a> <a id="1634" class="Symbol">=</a>
  <a id="1638" href="Relation.Binary.Reasoning.Syntax.html#1572" class="Function Operator">begin</a>
    <a id="1648" href="Ledger.Types.Numeric.UnitInterval.html#1614" class="Bound">x</a> <a id="1650" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1652" href="Ledger.Types.Numeric.UnitInterval.html#1616" class="Bound">y</a>  <a id="1655" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1658" href="Data.Rational.Properties.html#48056" class="Function">*-monoˡ-≤-nonNeg</a> <a id="1675" href="Ledger.Types.Numeric.UnitInterval.html#1614" class="Bound">x</a> <a id="1677" class="Symbol">⦃</a> <a id="1679" href="Data.Rational.Base.html#5785" class="Function">ℚ.nonNegative</a> <a id="1693" href="Ledger.Types.Numeric.UnitInterval.html#1619" class="Bound">0≤x</a> <a id="1697" class="Symbol">⦄</a> <a id="1699" href="Ledger.Types.Numeric.UnitInterval.html#1630" class="Bound">y≤1</a> <a id="1703" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1709" href="Ledger.Types.Numeric.UnitInterval.html#1614" class="Bound">x</a> <a id="1711" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1713" class="Number">1</a>  <a id="1716" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">≡⟨</a> <a id="1719" href="Data.Rational.Properties.html#42682" class="Function">*-identityʳ</a> <a id="1731" class="Symbol">_</a> <a id="1733" href="Relation.Binary.Reasoning.Syntax.html#11048" class="Function">⟩</a>
    <a id="1739" href="Ledger.Types.Numeric.UnitInterval.html#1614" class="Bound">x</a>      <a id="1746" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">≤⟨</a> <a id="1749" href="Ledger.Types.Numeric.UnitInterval.html#1625" class="Bound">x≤1</a> <a id="1753" href="Relation.Binary.Reasoning.Syntax.html#5544" class="Function">⟩</a>
    <a id="1759" class="Number">1</a>      <a id="1766" href="Relation.Binary.Reasoning.Syntax.html#12345" class="Function Operator">∎</a>

<a id="1769" class="Comment">-- The product of two numbers from the unit interval is also in the unit interval.</a>
<a id="inUnitInterval-*"></a><a id="1852" href="Ledger.Types.Numeric.UnitInterval.html#1852" class="Function">inUnitInterval-*</a> <a id="1869" class="Symbol">:</a> <a id="1871" class="Symbol">∀</a> <a id="1873" class="Symbol">(</a><a id="1874" href="Ledger.Types.Numeric.UnitInterval.html#1874" class="Bound">x</a> <a id="1876" href="Ledger.Types.Numeric.UnitInterval.html#1876" class="Bound">y</a> <a id="1878" class="Symbol">:</a> <a id="1880" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="1881" class="Symbol">)</a>
  <a id="1885" class="Symbol">→</a> <a id="1887" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="1902" href="Ledger.Types.Numeric.UnitInterval.html#1874" class="Bound">x</a> <a id="1904" class="Symbol">→</a> <a id="1906" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="1921" href="Ledger.Types.Numeric.UnitInterval.html#1876" class="Bound">y</a> <a id="1923" class="Symbol">→</a> <a id="1925" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="1940" class="Symbol">(</a><a id="1941" href="Ledger.Types.Numeric.UnitInterval.html#1874" class="Bound">x</a> <a id="1943" href="Data.Rational.Base.html#6315" class="Function Operator">*</a> <a id="1945" href="Ledger.Types.Numeric.UnitInterval.html#1876" class="Bound">y</a><a id="1946" class="Symbol">)</a>
<a id="1948" href="Ledger.Types.Numeric.UnitInterval.html#1852" class="Function">inUnitInterval-*</a> <a id="1965" href="Ledger.Types.Numeric.UnitInterval.html#1965" class="Bound">x</a> <a id="1967" href="Ledger.Types.Numeric.UnitInterval.html#1967" class="Bound">y</a> <a id="1969" href="Ledger.Types.Numeric.UnitInterval.html#1969" class="Bound">ux</a> <a id="1972" class="Symbol">(</a><a id="1973" href="Ledger.Types.Numeric.UnitInterval.html#1973" class="Bound">0≤y</a> <a id="1977" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1979" href="Ledger.Types.Numeric.UnitInterval.html#1979" class="Bound">y≤1</a><a id="1982" class="Symbol">)</a> <a id="1984" class="Symbol">=</a>
  <a id="1988" href="Ledger.Types.Numeric.UnitInterval.html#1205" class="Function">inUnitInterval-*-0≤</a> <a id="2008" href="Ledger.Types.Numeric.UnitInterval.html#1965" class="Bound">x</a> <a id="2010" href="Ledger.Types.Numeric.UnitInterval.html#1967" class="Bound">y</a> <a id="2012" href="Ledger.Types.Numeric.UnitInterval.html#1969" class="Bound">ux</a> <a id="2015" href="Ledger.Types.Numeric.UnitInterval.html#1973" class="Bound">0≤y</a>
  <a id="2021" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2023" href="Ledger.Types.Numeric.UnitInterval.html#1521" class="Function">inUnitInterval-*-≤1</a> <a id="2043" href="Ledger.Types.Numeric.UnitInterval.html#1965" class="Bound">x</a> <a id="2045" href="Ledger.Types.Numeric.UnitInterval.html#1967" class="Bound">y</a> <a id="2047" href="Ledger.Types.Numeric.UnitInterval.html#1969" class="Bound">ux</a> <a id="2050" href="Ledger.Types.Numeric.UnitInterval.html#1979" class="Bound">y≤1</a>

<a id="2055" class="Comment">-- UnitInterval: rational number in the unit interval [0, 1].</a>
<a id="UnitInterval"></a><a id="2117" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a> <a id="2130" class="Symbol">:</a> <a id="2132" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="2137" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a> <a id="2150" class="Symbol">=</a> <a id="2152" href="Data.Refinement.Base.html#1052" class="Function">[</a> <a id="2154" href="Ledger.Types.Numeric.UnitInterval.html#2154" class="Bound">x</a> <a id="2156" href="Data.Refinement.Base.html#1052" class="Function">∈</a> <a id="2158" href="Data.Rational.Base.html#1342" class="Record">ℚ</a> <a id="2160" href="Data.Refinement.Base.html#1052" class="Function">∣</a> <a id="2162" href="Ledger.Types.Numeric.UnitInterval.html#606" class="Function">inUnitInterval</a> <a id="2177" href="Ledger.Types.Numeric.UnitInterval.html#2154" class="Bound">x</a> <a id="2179" href="Data.Refinement.Base.html#1052" class="Function">]</a>

<a id="2182" class="Keyword">instance</a>
  <a id="Show-UnitInterval"></a><a id="2193" href="Ledger.Types.Numeric.UnitInterval.html#2193" class="Function">Show-UnitInterval</a> <a id="2211" class="Symbol">:</a> <a id="2213" href="Class.Show.Core.html#125" class="Record">Show</a> <a id="2218" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a>
  <a id="2233" href="Ledger.Types.Numeric.UnitInterval.html#2193" class="Function">Show-UnitInterval</a> <a id="2251" class="Symbol">.</a><a id="2252" href="Class.Show.Core.html#187" class="Field">show</a> <a id="2257" class="Symbol">=</a> <a id="2259" href="Data.Rational.Show.html#398" class="Function">ℚshow.show</a> <a id="2270" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2272" href="Data.Refinement.Base.html#759" class="Field">value</a>

<a id="2279" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="2314" class="Comment">--  unboundRational</a>
<a id="fromUnitInterval"></a><a id="2334" href="Ledger.Types.Numeric.UnitInterval.html#2334" class="Function">fromUnitInterval</a> <a id="2351" class="Symbol">:</a> <a id="2353" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a> <a id="2366" class="Symbol">→</a> <a id="2368" href="Data.Rational.Base.html#1342" class="Record">ℚ</a>
<a id="2370" href="Ledger.Types.Numeric.UnitInterval.html#2334" class="Function">fromUnitInterval</a> <a id="2387" class="Symbol">=</a> <a id="2389" href="Data.Refinement.Base.html#759" class="Field">value</a>

<a id="2396" class="Comment">-- In the cardano-ledger codebase:</a>
<a id="2431" class="Comment">--  unboundRational</a>
<a id="toUnitInterval"></a><a id="2451" href="Ledger.Types.Numeric.UnitInterval.html#2451" class="Function">toUnitInterval</a> <a id="2466" class="Symbol">:</a> <a id="2468" href="Data.Rational.Base.html#1342" class="Record">ℚ</a> <a id="2470" class="Symbol">→</a> <a id="2472" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="2478" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a>
<a id="2491" href="Ledger.Types.Numeric.UnitInterval.html#2451" class="Function">toUnitInterval</a> <a id="2506" href="Ledger.Types.Numeric.UnitInterval.html#2506" class="Bound">x</a> <a id="2508" class="Keyword">with</a> <a id="2513" href="Ledger.Types.Numeric.UnitInterval.html#737" class="Function">isInUnitInterval</a> <a id="2530" href="Ledger.Types.Numeric.UnitInterval.html#2506" class="Bound">x</a>
<a id="2532" class="Symbol">...</a> <a id="2536" class="Symbol">|</a> <a id="2538" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="2541" href="Ledger.Types.Numeric.UnitInterval.html#2541" class="Bound">¬p</a> <a id="2544" class="Symbol">=</a> <a id="2546" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>
<a id="2554" class="Symbol">...</a> <a id="2558" class="Symbol">|</a> <a id="2560" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="2564" href="Ledger.Types.Numeric.UnitInterval.html#2564" class="Bound">p</a> <a id="2566" class="Symbol">=</a> <a id="2568" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2573" class="Symbol">(</a><a id="2574" class="Bound">x</a> <a id="2576" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="2578" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2580" href="Ledger.Types.Numeric.UnitInterval.html#2564" class="Bound">p</a> <a id="2582" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="2583" class="Symbol">)</a>

<a id="2586" class="Comment">-- Helper function to make an element of the Refinement type</a>
<a id="2647" class="Comment">-- that is useful in the case where Agda can infer the evidence</a>
<a id="2711" class="Comment">-- automatically by computation.</a>
<a id="2744" class="Comment">-- Usage example:  mkUnitInterval (+ 2 / 10)</a>
<a id="mkUnitInterval"></a><a id="2789" href="Ledger.Types.Numeric.UnitInterval.html#2789" class="Function">mkUnitInterval</a> <a id="2804" class="Symbol">:</a> <a id="2806" class="Symbol">∀</a> <a id="2808" class="Symbol">(</a><a id="2809" href="Ledger.Types.Numeric.UnitInterval.html#2809" class="Bound">x</a> <a id="2811" class="Symbol">:</a> <a id="2813" href="Data.Rational.Base.html#1342" class="Record">ℚ</a><a id="2814" class="Symbol">)</a> <a id="2816" class="Symbol">→</a> <a id="2818" class="Symbol">{</a><a id="2819" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="2821" class="Symbol">(</a><a id="2822" href="Relation.Nullary.Decidable.Core.html#1927" class="Field">does</a> <a id="2827" class="Symbol">(</a><a id="2828" href="Ledger.Types.Numeric.UnitInterval.html#737" class="Function">isInUnitInterval</a> <a id="2845" href="Ledger.Types.Numeric.UnitInterval.html#2809" class="Bound">x</a><a id="2846" class="Symbol">))}</a> <a id="2850" class="Symbol">→</a> <a id="2852" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a>
<a id="2865" href="Ledger.Types.Numeric.UnitInterval.html#2789" class="Function">mkUnitInterval</a> <a id="2880" href="Ledger.Types.Numeric.UnitInterval.html#2880" class="Bound">x</a> <a id="2882" class="Symbol">{</a><a id="2883" href="Ledger.Types.Numeric.UnitInterval.html#2883" class="Bound">evidence</a><a id="2891" class="Symbol">}</a> <a id="2893" class="Keyword">with</a> <a id="2898" href="Ledger.Types.Numeric.UnitInterval.html#737" class="Function">isInUnitInterval</a> <a id="2915" href="Ledger.Types.Numeric.UnitInterval.html#2880" class="Bound">x</a> <a id="2917" class="Keyword">in</a> <a id="2920" class="Argument">eq</a>
<a id="2923" class="Symbol">...</a> <a id="2927" class="Symbol">|</a> <a id="2929" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="2933" class="Symbol">_</a> <a id="2935" class="Keyword">rewrite</a> <a id="2943" href="Relation.Binary.PropositionalEquality.Core.html#1339" class="Function">cong</a> <a id="2948" href="Relation.Nullary.Decidable.Core.html#1927" class="Field">does</a> <a id="2953" href="Ledger.Types.Numeric.UnitInterval.html#2920" class="Bound">eq</a> <a id="2956" class="Symbol">=</a> <a id="2958" href="Data.Empty.html#1069" class="Function">⊥-elim</a> <a id="2965" class="Bound">evidence</a>
<a id="2974" class="Symbol">...</a> <a id="2978" class="Symbol">|</a> <a id="2980" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="2984" href="Ledger.Types.Numeric.UnitInterval.html#2984" class="Bound">p</a> <a id="2986" class="Symbol">=</a> <a id="2988" class="Bound">x</a> <a id="2990" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="2992" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="2994" href="Ledger.Types.Numeric.UnitInterval.html#2984" class="Bound">p</a> <a id="2996" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a>

<a id="2999" class="Comment">-- Clamp a rational number to the unit interval.</a>
<a id="3048" class="Comment">-- Values below 0 or above 1 are set to 0 or 1, respectively.</a>
<a id="clamp"></a><a id="3110" href="Ledger.Types.Numeric.UnitInterval.html#3110" class="Function">clamp</a> <a id="3116" class="Symbol">:</a> <a id="3118" href="Data.Rational.Base.html#1342" class="Record">ℚ</a> <a id="3120" class="Symbol">→</a> <a id="3122" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a>
<a id="3135" href="Ledger.Types.Numeric.UnitInterval.html#3110" class="Function">clamp</a> <a id="3141" href="Ledger.Types.Numeric.UnitInterval.html#3141" class="Bound">x</a> <a id="3143" class="Keyword">with</a> <a id="3148" class="Number">0</a> <a id="3150" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="3153" href="Ledger.Types.Numeric.UnitInterval.html#3141" class="Bound">x</a>
<a id="3155" class="Symbol">...</a> <a id="3159" class="Symbol">|</a> <a id="3161" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="3165" class="Symbol">_</a> <a id="3167" class="Symbol">=</a> <a id="3169" href="Ledger.Types.Numeric.UnitInterval.html#2789" class="Function">mkUnitInterval</a> <a id="3184" class="Number">0</a>
<a id="3186" class="Symbol">...</a> <a id="3190" class="Symbol">|</a> <a id="3192" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="3196" href="Ledger.Types.Numeric.UnitInterval.html#3196" class="Bound">0≤x</a> <a id="3200" class="Keyword">with</a> <a id="3205" class="Bound">x</a> <a id="3207" href="Data.Rational.Properties.html#19360" class="Function Operator">≤?</a> <a id="3210" class="Number">1</a>
<a id="3212" class="Symbol">...</a>     <a id="3220" class="Symbol">|</a> <a id="3222" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="3226" class="Symbol">_</a>   <a id="3230" class="Symbol">=</a> <a id="3232" href="Ledger.Types.Numeric.UnitInterval.html#2789" class="Function">mkUnitInterval</a> <a id="3247" class="Number">1</a>
<a id="3249" class="Symbol">...</a>     <a id="3257" class="Symbol">|</a> <a id="3259" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="3263" href="Ledger.Types.Numeric.UnitInterval.html#3263" class="Bound">x≤1</a> <a id="3267" class="Symbol">=</a> <a id="3269" class="Symbol">(</a><a id="3270" class="Bound">x</a> <a id="3272" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="3274" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3276" class="Bound">0≤x</a> <a id="3280" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3282" href="Ledger.Types.Numeric.UnitInterval.html#3263" class="Bound">x≤1</a> <a id="3286" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3287" class="Symbol">)</a>

<a id="3290" class="Comment">-- UnitInterval Properties</a>

<a id="3318" class="Comment">-- to/from is the identity</a>
<a id="prop-toUnitInterval-fromUnitInterval"></a><a id="3345" href="Ledger.Types.Numeric.UnitInterval.html#3345" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3382" class="Symbol">:</a> <a id="3384" class="Symbol">∀</a> <a id="3386" class="Symbol">(</a><a id="3387" href="Ledger.Types.Numeric.UnitInterval.html#3387" class="Bound">x</a> <a id="3389" class="Symbol">:</a> <a id="3391" href="Ledger.Types.Numeric.UnitInterval.html#2117" class="Function">UnitInterval</a><a id="3403" class="Symbol">)</a>
  <a id="3407" class="Symbol">→</a> <a id="3409" href="Ledger.Types.Numeric.UnitInterval.html#2451" class="Function">toUnitInterval</a> <a id="3424" class="Symbol">(</a><a id="3425" href="Ledger.Types.Numeric.UnitInterval.html#2334" class="Function">fromUnitInterval</a> <a id="3442" href="Ledger.Types.Numeric.UnitInterval.html#3387" class="Bound">x</a><a id="3443" class="Symbol">)</a> <a id="3445" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3447" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="3452" href="Ledger.Types.Numeric.UnitInterval.html#3387" class="Bound">x</a>

<a id="3455" href="Ledger.Types.Numeric.UnitInterval.html#3345" class="Function">prop-toUnitInterval-fromUnitInterval</a> <a id="3492" class="Symbol">(</a><a id="3493" href="Ledger.Types.Numeric.UnitInterval.html#3493" class="Bound">x</a> <a id="3495" href="Data.Refinement.Base.html#747" class="InductiveConstructor Operator">,</a> <a id="3497" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">[</a> <a id="3499" href="Ledger.Types.Numeric.UnitInterval.html#3499" class="Bound">p0</a> <a id="3502" href="Data.Irrelevant.html#776" class="InductiveConstructor Operator">]</a><a id="3503" class="Symbol">)</a> <a id="3505" class="Keyword">with</a> <a id="3510" href="Ledger.Types.Numeric.UnitInterval.html#737" class="Function">isInUnitInterval</a> <a id="3527" href="Ledger.Types.Numeric.UnitInterval.html#3493" class="Bound">x</a>
<a id="3529" class="Symbol">...</a> <a id="3533" class="Symbol">|</a> <a id="3535" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="3538" href="Ledger.Types.Numeric.UnitInterval.html#3538" class="Bound">¬p</a> <a id="3541" class="Symbol">=</a> <a id="3543" href="Data.Empty.html#1129" class="Function">⊥-elim-irr</a> <a id="3554" class="Symbol">(</a><a id="3555" href="Ledger.Types.Numeric.UnitInterval.html#3538" class="Bound">¬p</a> <a id="3558" class="Bound">p0</a><a id="3560" class="Symbol">)</a>
<a id="3562" class="Symbol">...</a> <a id="3566" class="Symbol">|</a> <a id="3568" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="3572" href="Ledger.Types.Numeric.UnitInterval.html#3572" class="Bound">p</a> <a id="3574" class="Symbol">=</a> <a id="3576" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre></body></html>