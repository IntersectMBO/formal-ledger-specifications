<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Utxo</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.html" class="Module">Algebra</a>              <a id="59" class="Keyword">using</a> <a id="65" class="Symbol">(</a><a id="66" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a><a id="83" class="Symbol">)</a>
<a id="85" class="Keyword">open</a> <a id="90" class="Keyword">import</a> <a id="97" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>  <a id="118" class="Keyword">using</a> <a id="124" class="Symbol">(</a><a id="125" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a><a id="135" class="Symbol">)</a>
<a id="137" class="Keyword">import</a> <a id="144" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="155" class="Symbol">as</a> <a id="158" class="Module">M</a>
<a id="160" class="Keyword">import</a> <a id="167" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="195" class="Symbol">as</a> <a id="198" class="Module">Sum</a>

<a id="203" class="Keyword">import</a> <a id="210" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="223" class="Symbol">as</a> <a id="226" class="Module">ℤ</a>
<a id="228" class="Keyword">import</a> <a id="235" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="249" class="Symbol">as</a> <a id="252" class="Module">ℚ</a>

<a id="255" class="Keyword">open</a> <a id="260" class="Keyword">import</a> <a id="267" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>
<a id="350" class="Keyword">open</a> <a id="355" class="Keyword">import</a> <a id="362" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>

<a id="389" class="Keyword">module</a> <a id="396" href="Ledger.Conway.Utxo.html" class="Module">Ledger.Conway.Utxo</a>
  <a id="417" class="Symbol">(</a><a id="418" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a> <a id="422" class="Symbol">:</a> <a id="424" class="Symbol">_)</a> <a id="427" class="Symbol">(</a><a id="428" class="Keyword">open</a> <a id="433" href="Ledger.Conway.Transaction.html#910" class="Module">TransactionStructure</a> <a id="454" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a><a id="457" class="Symbol">)</a>
  <a id="461" class="Symbol">(</a><a id="462" href="Ledger.Conway.Utxo.html#462" class="Bound">abs</a> <a id="466" class="Symbol">:</a> <a id="468" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="486" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a><a id="489" class="Symbol">)</a> <a id="491" class="Symbol">(</a><a id="492" class="Keyword">open</a> <a id="497" href="Ledger.Conway.Abstract.html#599" class="Module">AbstractFunctions</a> <a id="515" href="Ledger.Conway.Utxo.html#462" class="Bound">abs</a><a id="518" class="Symbol">)</a>
  <a id="522" class="Keyword">where</a>

<a id="529" class="Keyword">open</a> <a id="534" class="Keyword">import</a> <a id="541" href="Ledger.Conway.ScriptValidation.html" class="Module">Ledger.Conway.ScriptValidation</a> <a id="572" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a> <a id="576" href="Ledger.Conway.Utxo.html#462" class="Bound">abs</a>
<a id="580" class="Keyword">open</a> <a id="585" class="Keyword">import</a> <a id="592" href="Ledger.Conway.Fees.html" class="Module">Ledger.Conway.Fees</a> <a id="611" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a> <a id="615" class="Keyword">using</a> <a id="621" class="Symbol">(</a><a id="622" href="Ledger.Conway.Fees.html#738" class="Function">scriptsCost</a><a id="633" class="Symbol">)</a>
<a id="635" class="Keyword">open</a> <a id="640" class="Keyword">import</a> <a id="647" href="Ledger.Conway.Certs.html" class="Module">Ledger.Conway.Certs</a> <a id="667" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a>

<a id="681" class="Keyword">instance</a>
  <a id="692" href="Ledger.Conway.Utxo.html#692" class="Function">_</a> <a id="694" class="Symbol">=</a> <a id="696" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a>


<a id="isTwoPhaseScriptAddress"></a><a id="709" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="733" class="Symbol">:</a> <a id="735" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="738" class="Symbol">→</a> <a id="740" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="745" class="Symbol">→</a> <a id="747" href="Ledger.Conway.Address.html#2332" class="Function">Addr</a> <a id="752" class="Symbol">→</a> <a id="754" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="759" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="783" href="Ledger.Conway.Utxo.html#783" class="Bound">tx</a> <a id="786" href="Ledger.Conway.Utxo.html#786" class="Bound">utxo</a> <a id="791" href="Ledger.Conway.Utxo.html#791" class="Bound">a</a> <a id="793" class="Symbol">=</a>
  <a id="797" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="800" href="Ledger.Conway.Address.html#2615" class="Function">isScriptAddr</a> <a id="813" href="Ledger.Conway.Utxo.html#791" class="Bound">a</a> <a id="815" href="Class.ToBool.html#389" class="Function Operator">then</a>
    <a id="824" class="Symbol">(λ</a> <a id="827" class="Symbol">{</a><a id="828" href="Ledger.Conway.Utxo.html#828" class="Bound">p</a><a id="829" class="Symbol">}</a> <a id="831" class="Symbol">→</a> <a id="833" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="836" href="Ledger.Conway.Transaction.html#5930" class="Function">lookupScriptHash</a> <a id="853" class="Symbol">(</a><a id="854" href="Ledger.Conway.Address.html#3734" class="Function">getScriptHash</a> <a id="868" href="Ledger.Conway.Utxo.html#791" class="Bound">a</a> <a id="870" href="Ledger.Conway.Utxo.html#828" class="Bound">p</a><a id="871" class="Symbol">)</a> <a id="873" href="Ledger.Conway.Utxo.html#783" class="Bound">tx</a> <a id="876" href="Ledger.Conway.Utxo.html#786" class="Bound">utxo</a>
                 <a id="898" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="903" class="Symbol">(λ</a> <a id="906" class="Symbol">{</a><a id="907" href="Ledger.Conway.Utxo.html#907" class="Bound">s</a><a id="908" class="Symbol">}</a> <a id="910" class="Symbol">→</a> <a id="912" href="Ledger.Conway.Transaction.html#6170" class="Function">isP2Script</a> <a id="923" href="Ledger.Conway.Utxo.html#907" class="Bound">s</a><a id="924" class="Symbol">)</a>
                 <a id="943" href="Class.ToBool.html#389" class="Function Operator">else</a> <a id="948" href="Data.Empty.html#914" class="Function">⊥</a><a id="949" class="Symbol">)</a>
  <a id="953" href="Class.ToBool.html#389" class="Function Operator">else</a>
    <a id="962" href="Data.Empty.html#914" class="Function">⊥</a>


<a id="isTwoPhaseScriptAddress?"></a><a id="966" href="Ledger.Conway.Utxo.html#966" class="Function">isTwoPhaseScriptAddress?</a> <a id="991" class="Symbol">:</a> <a id="993" class="Symbol">∀</a> <a id="995" class="Symbol">{</a><a id="996" href="Ledger.Conway.Utxo.html#996" class="Bound">tx</a> <a id="999" href="Ledger.Conway.Utxo.html#999" class="Bound">utxo</a> <a id="1004" href="Ledger.Conway.Utxo.html#1004" class="Bound">a</a><a id="1005" class="Symbol">}</a> <a id="1007" class="Symbol">→</a> <a id="1009" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="1033" href="Ledger.Conway.Utxo.html#996" class="Bound">tx</a> <a id="1036" href="Ledger.Conway.Utxo.html#999" class="Bound">utxo</a> <a id="1041" href="Ledger.Conway.Utxo.html#1004" class="Bound">a</a> <a id="1043" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
<a id="1045" href="Ledger.Conway.Utxo.html#966" class="Function">isTwoPhaseScriptAddress?</a> <a id="1070" class="Symbol">{</a><a id="1071" href="Ledger.Conway.Utxo.html#1071" class="Bound">tx</a><a id="1073" class="Symbol">}</a> <a id="1075" class="Symbol">{</a><a id="1076" href="Ledger.Conway.Utxo.html#1076" class="Bound">utxo</a><a id="1080" class="Symbol">}</a> <a id="1082" class="Symbol">{</a><a id="1083" href="Ledger.Conway.Utxo.html#1083" class="Bound">a</a><a id="1084" class="Symbol">}</a> <a id="1086" class="Symbol">.</a><a id="1087" href="Class.Decidable.Core.html#264" class="Field">dec</a>
  <a id="1093" class="Keyword">with</a> <a id="1098" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1105" class="Symbol">(</a><a id="1106" href="Ledger.Conway.Address.html#2615" class="Function">isScriptAddr</a> <a id="1119" href="Ledger.Conway.Utxo.html#1083" class="Bound">a</a><a id="1120" class="Symbol">)</a>
<a id="1122" class="Symbol">...</a> <a id="1126" class="Symbol">|</a> <a id="1128" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1133" class="Symbol">_</a> <a id="1135" class="Symbol">=</a> <a id="1137" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1140" class="Symbol">λ</a> <a id="1142" class="Symbol">()</a>
<a id="1145" class="Symbol">...</a> <a id="1149" class="Symbol">|</a> <a id="1151" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1156" href="Ledger.Conway.Utxo.html#1156" class="Bound">p</a>
  <a id="1160" class="Keyword">with</a> <a id="1165" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1172" class="Symbol">(</a><a id="1173" href="Ledger.Conway.Transaction.html#5930" class="Function">lookupScriptHash</a> <a id="1190" class="Symbol">(</a><a id="1191" href="Ledger.Conway.Address.html#3734" class="Function">getScriptHash</a> <a id="1205" class="Bound">a</a> <a id="1207" href="Ledger.Conway.Utxo.html#1156" class="Bound">p</a><a id="1208" class="Symbol">)</a> <a id="1210" class="Bound">tx</a> <a id="1213" class="Bound">utxo</a><a id="1217" class="Symbol">)</a>
<a id="1219" class="Symbol">...</a> <a id="1223" class="Symbol">|</a> <a id="1225" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1230" class="Symbol">_</a> <a id="1232" class="Symbol">=</a> <a id="1234" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1237" class="Symbol">λ</a> <a id="1239" class="Symbol">()</a>
<a id="1242" class="Symbol">...</a> <a id="1246" class="Symbol">|</a> <a id="1248" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1253" href="Ledger.Conway.Utxo.html#1253" class="Bound">s</a> <a id="1255" class="Symbol">=</a> <a id="1257" href="Ledger.Conway.Transaction.html#6236" class="Function">isP2Script?</a> <a id="1269" class="Symbol">{</a><a id="1270" href="Ledger.Conway.Utxo.html#1253" class="Bound">s</a><a id="1271" class="Symbol">}</a> <a id="1273" class="Symbol">.</a><a id="1274" href="Class.Decidable.Core.html#264" class="Field">dec</a>

<a id="1279" class="Keyword">record</a> <a id="isTwoPhaseScriptAddress′"></a><a id="1286" href="Ledger.Conway.Utxo.html#1286" class="Record">isTwoPhaseScriptAddress′</a> <a id="1311" class="Symbol">(</a><a id="1312" href="Ledger.Conway.Utxo.html#1312" class="Bound">tx</a> <a id="1315" class="Symbol">:</a> <a id="1317" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a><a id="1319" class="Symbol">)</a> <a id="1321" class="Symbol">(</a><a id="1322" href="Ledger.Conway.Utxo.html#1322" class="Bound">utxo</a> <a id="1327" class="Symbol">:</a> <a id="1329" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a><a id="1333" class="Symbol">)</a> <a id="1335" class="Symbol">(</a><a id="1336" href="Ledger.Conway.Utxo.html#1336" class="Bound">a</a> <a id="1338" class="Symbol">:</a> <a id="1340" href="Ledger.Conway.Address.html#2332" class="Function">Addr</a><a id="1344" class="Symbol">)</a> <a id="1346" class="Symbol">:</a> <a id="1348" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1353" class="Keyword">where</a>
  <a id="1361" class="Keyword">constructor</a> <a id="wrap"></a><a id="1373" href="Ledger.Conway.Utxo.html#1373" class="InductiveConstructor">wrap</a>
  <a id="1380" class="Keyword">field</a> <a id="isTwoPhaseScriptAddress′.unwrap"></a><a id="1386" href="Ledger.Conway.Utxo.html#1386" class="Field">unwrap</a> <a id="1393" class="Symbol">:</a> <a id="1395" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="1419" href="Ledger.Conway.Utxo.html#1312" class="Bound">tx</a> <a id="1422" href="Ledger.Conway.Utxo.html#1322" class="Bound">utxo</a> <a id="1427" href="Ledger.Conway.Utxo.html#1336" class="Bound">a</a>

<a id="1430" class="Keyword">instance</a>
  <a id="isTwoPhaseScriptAddress′?"></a><a id="1441" href="Ledger.Conway.Utxo.html#1441" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1467" class="Symbol">:</a> <a id="1469" class="Symbol">∀</a> <a id="1471" class="Symbol">{</a><a id="1472" href="Ledger.Conway.Utxo.html#1472" class="Bound">tx</a> <a id="1475" href="Ledger.Conway.Utxo.html#1475" class="Bound">utxo</a> <a id="1480" href="Ledger.Conway.Utxo.html#1480" class="Bound">a</a><a id="1481" class="Symbol">}</a> <a id="1483" class="Symbol">→</a> <a id="1485" href="Ledger.Conway.Utxo.html#1286" class="Record">isTwoPhaseScriptAddress′</a> <a id="1510" href="Ledger.Conway.Utxo.html#1472" class="Bound">tx</a> <a id="1513" href="Ledger.Conway.Utxo.html#1475" class="Bound">utxo</a> <a id="1518" href="Ledger.Conway.Utxo.html#1480" class="Bound">a</a> <a id="1520" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="1524" href="Ledger.Conway.Utxo.html#1441" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1550" class="Symbol">{</a><a id="1551" href="Ledger.Conway.Utxo.html#1551" class="Bound">tx</a><a id="1553" class="Symbol">}</a> <a id="1555" class="Symbol">{</a><a id="1556" href="Ledger.Conway.Utxo.html#1556" class="Bound">utxo</a><a id="1560" class="Symbol">}</a> <a id="1562" class="Symbol">{</a><a id="1563" href="Ledger.Conway.Utxo.html#1563" class="Bound">a</a><a id="1564" class="Symbol">}</a> <a id="1566" class="Symbol">=</a> <a id="1568" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1570" class="Symbol">(</a><a id="1571" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">map′</a> <a id="1576" href="Ledger.Conway.Utxo.html#1373" class="InductiveConstructor">wrap</a> <a id="1581" href="Ledger.Conway.Utxo.html#1386" class="Field">unwrap</a> <a id="1588" class="Symbol">(</a><a id="1589" href="Ledger.Conway.Utxo.html#966" class="Function">isTwoPhaseScriptAddress?</a> <a id="1614" class="Symbol">{</a><a id="1615" href="Ledger.Conway.Utxo.html#1551" class="Bound">tx</a><a id="1617" class="Symbol">}</a> <a id="1619" class="Symbol">{</a><a id="1620" href="Ledger.Conway.Utxo.html#1556" class="Bound">utxo</a><a id="1624" class="Symbol">}</a> <a id="1626" class="Symbol">{</a><a id="1627" href="Ledger.Conway.Utxo.html#1563" class="Bound">a</a><a id="1628" class="Symbol">}</a> <a id="1630" class="Symbol">.</a><a id="1631" href="Class.Decidable.Core.html#264" class="Field">dec</a><a id="1634" class="Symbol">))</a>
    <a id="1641" class="Keyword">where</a> <a id="1647" class="Keyword">open</a> <a id="1652" href="Ledger.Conway.Utxo.html#1286" class="Module">isTwoPhaseScriptAddress′</a>


<a id="1679" class="Keyword">opaque</a>


  <a id="getDataHashes"></a><a id="1690" href="Ledger.Conway.Utxo.html#1690" class="Function">getDataHashes</a> <a id="1704" class="Symbol">:</a> <a id="1706" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1708" href="Ledger.Conway.Transaction.html#2405" class="Function">TxOut</a> <a id="1714" class="Symbol">→</a> <a id="1716" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1718" href="Ledger.Conway.Script.html#1747" class="Function">DataHash</a>
  <a id="1729" href="Ledger.Conway.Utxo.html#1690" class="Function">getDataHashes</a> <a id="1743" href="Ledger.Conway.Utxo.html#1743" class="Bound">txo</a> <a id="1747" class="Symbol">=</a> <a id="1749" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1760" href="Data.Sum.html#870" class="Function">isInj₂</a> <a id="1767" class="Symbol">(</a><a id="1768" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1779" class="Symbol">(</a><a id="1780" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1786" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1788" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1794" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1796" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="1801" class="Symbol">)</a> <a id="1803" href="Ledger.Conway.Utxo.html#1743" class="Bound">txo</a><a id="1806" class="Symbol">)</a>

  <a id="getInputHashes"></a><a id="1811" href="Ledger.Conway.Utxo.html#1811" class="Function">getInputHashes</a> <a id="1826" class="Symbol">:</a> <a id="1828" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="1831" class="Symbol">→</a> <a id="1833" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="1838" class="Symbol">→</a> <a id="1840" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1842" href="Ledger.Conway.Script.html#1747" class="Function">DataHash</a>
  <a id="1853" href="Ledger.Conway.Utxo.html#1811" class="Function">getInputHashes</a> <a id="1868" href="Ledger.Conway.Utxo.html#1868" class="Bound">tx</a> <a id="1871" href="Ledger.Conway.Utxo.html#1871" class="Bound">utxo</a> <a id="1876" class="Symbol">=</a> <a id="1878" href="Ledger.Conway.Utxo.html#1690" class="Function">getDataHashes</a>
    <a id="1896" class="Symbol">(</a><a id="1897" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="1905" class="Symbol">(λ</a> <a id="1908" class="Symbol">(</a><a id="1909" href="Ledger.Conway.Utxo.html#1909" class="Bound">a</a> <a id="1911" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1913" class="Symbol">_</a> <a id="1915" class="Symbol">)</a> <a id="1917" class="Symbol">→</a> <a id="1919" href="Ledger.Conway.Utxo.html#1286" class="Record">isTwoPhaseScriptAddress′</a> <a id="1944" href="Ledger.Conway.Utxo.html#1868" class="Bound">tx</a> <a id="1947" href="Ledger.Conway.Utxo.html#1871" class="Bound">utxo</a> <a id="1952" href="Ledger.Conway.Utxo.html#1909" class="Bound">a</a><a id="1953" class="Symbol">)</a>
             <a id="1968" class="Symbol">(</a><a id="1969" href="Class.IsSet.html#959" class="Function">range</a> <a id="1975" class="Symbol">(</a><a id="1976" href="Ledger.Conway.Utxo.html#1871" class="Bound">utxo</a> <a id="1981" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="1983" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a><a id="1988" class="Symbol">)))</a>
    <a id="1996" class="Keyword">where</a> <a id="2002" class="Keyword">open</a> <a id="2007" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a><a id="2009" class="Symbol">;</a> <a id="2011" class="Keyword">open</a> <a id="2016" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="2023" class="Symbol">(</a><a id="2024" href="Ledger.Conway.Utxo.html#1868" class="Bound">tx</a> <a id="2027" class="Symbol">.</a><a id="2028" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a><a id="2032" class="Symbol">)</a>

<a id="totExUnits"></a><a id="2035" href="Ledger.Conway.Utxo.html#2035" class="Function">totExUnits</a> <a id="2046" class="Symbol">:</a> <a id="2048" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="2051" class="Symbol">→</a> <a id="2053" href="Ledger.Conway.Script.html#1042" class="Function">ExUnits</a>
<a id="2061" href="Ledger.Conway.Utxo.html#2035" class="Function">totExUnits</a> <a id="2072" href="Ledger.Conway.Utxo.html#2072" class="Bound">tx</a> <a id="2075" class="Symbol">=</a> <a id="2077" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="2080" href="Ledger.Conway.Utxo.html#2080" class="Bound">(_</a> <a id="2083" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2085" href="Ledger.Conway.Utxo.html#2085" class="Bound">eu</a><a id="2087" href="Ledger.Conway.Utxo.html#2080" class="Bound">)</a> <a id="2089" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="2091" href="Ledger.Conway.Utxo.html#2072" class="Bound">tx</a> <a id="2094" class="Symbol">.</a><a id="2095" href="Ledger.Conway.Transaction.html#4362" class="Field">wits</a> <a id="2100" class="Symbol">.</a><a id="2101" href="Ledger.Conway.Transaction.html#4185" class="Field">txrdmrs</a> <a id="2109" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="2111" href="Ledger.Conway.Utxo.html#2085" class="Bound">eu</a>
  <a id="2116" class="Keyword">where</a> <a id="2122" class="Keyword">open</a> <a id="2127" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a><a id="2129" class="Symbol">;</a> <a id="2131" class="Keyword">open</a> <a id="2136" href="Ledger.Conway.Transaction.html#4056" class="Module">TxWitnesses</a>


<a id="2150" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="2198" href="Ledger.Conway.Utxo.html#2198" class="Function">utxoEntrySizeWithoutVal</a> <a id="2222" class="Symbol">:</a> <a id="2224" href="Ledger.Conway.TokenAlgebra.html#411" class="Function">MemoryEstimate</a>
<a id="2239" href="Ledger.Conway.Utxo.html#2198" class="Function">utxoEntrySizeWithoutVal</a> <a id="2263" class="Symbol">=</a> <a id="2265" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="2268" href="Ledger.Conway.Utxo.html#2268" class="Function">utxoEntrySize</a> <a id="2282" class="Symbol">:</a> <a id="2284" href="Ledger.Conway.Transaction.html#5089" class="Function">TxOutʰ</a> <a id="2291" class="Symbol">→</a> <a id="2293" href="Ledger.Conway.TokenAlgebra.html#411" class="Function">MemoryEstimate</a>
<a id="2308" href="Ledger.Conway.Utxo.html#2268" class="Function">utxoEntrySize</a> <a id="2322" href="Ledger.Conway.Utxo.html#2322" class="Bound">o</a> <a id="2324" class="Symbol">=</a> <a id="2326" href="Ledger.Conway.Utxo.html#2198" class="Function">utxoEntrySizeWithoutVal</a> <a id="2350" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2352" href="Ledger.Conway.TokenAlgebra.html#960" class="Function">size</a> <a id="2357" class="Symbol">(</a><a id="2358" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="2368" href="Ledger.Conway.Utxo.html#2322" class="Bound">o</a><a id="2369" class="Symbol">)</a>


<a id="2373" class="Keyword">open</a> <a id="2378" href="Ledger.Conway.PParams.html#1721" class="Module">PParams</a>


<a id="2388" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="2395" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="2403" class="Symbol">:</a> <a id="2405" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2410" class="Keyword">where</a>
  <a id="2418" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="2428" href="Ledger.Conway.Utxo.html#2428" class="Field">slot</a>      <a id="2438" class="Symbol">:</a> <a id="2440" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="2449" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>   <a id="2459" class="Symbol">:</a> <a id="2461" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="2473" href="Ledger.Conway.Utxo.html#2473" class="Field">treasury</a>  <a id="2483" class="Symbol">:</a> <a id="2485" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2493" class="Keyword">instance</a>
  <a id="HasPParams-UTxOEnv"></a><a id="2504" href="Ledger.Conway.Utxo.html#2504" class="Function">HasPParams-UTxOEnv</a> <a id="2523" class="Symbol">:</a> <a id="2525" href="Ledger.Conway.PParams.html#3525" class="Record">HasPParams</a> <a id="2536" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>
  <a id="2546" href="Ledger.Conway.Utxo.html#2504" class="Function">HasPParams-UTxOEnv</a> <a id="2565" class="Symbol">.</a><a id="2566" href="Ledger.Conway.PParams.html#3576" class="Field">PParamsOf</a> <a id="2576" class="Symbol">=</a> <a id="2578" href="Ledger.Conway.Utxo.html#2449" class="Field">UTxOEnv.pparams</a>

  <a id="HasgovActionDeposit-UTxOEnv"></a><a id="2597" href="Ledger.Conway.Utxo.html#2597" class="Function">HasgovActionDeposit-UTxOEnv</a> <a id="2625" class="Symbol">:</a> <a id="2627" href="Ledger.Conway.PParams.html#3636" class="Record">HasgovActionDeposit</a> <a id="2647" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>
  <a id="2657" href="Ledger.Conway.Utxo.html#2597" class="Function">HasgovActionDeposit-UTxOEnv</a> <a id="2685" class="Symbol">.</a><a id="2686" href="Ledger.Conway.PParams.html#3696" class="Field">govActionDepositOf</a> <a id="2705" class="Symbol">=</a> <a id="2707" href="Ledger.Conway.PParams.html#3696" class="Field">govActionDepositOf</a> <a id="2726" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2728" href="Ledger.Conway.PParams.html#3576" class="Field">PParamsOf</a>


<a id="2740" class="Keyword">record</a> <a id="UTxOState"></a><a id="2747" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="2757" class="Symbol">:</a> <a id="2759" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2764" class="Keyword">where</a>


  <a id="2774" class="Keyword">constructor</a> <a id="⟦_,_,_,_⟧ᵘ"></a><a id="2786" href="Ledger.Conway.Utxo.html#2786" class="InductiveConstructor Operator">⟦_,_,_,_⟧ᵘ</a>


  <a id="2801" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="2811" href="Ledger.Conway.Utxo.html#2811" class="Field">utxo</a>       <a id="2822" class="Symbol">:</a> <a id="2824" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="2833" href="Ledger.Conway.Utxo.html#2833" class="Field">fees</a>       <a id="2844" class="Symbol">:</a> <a id="2846" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="UTxOState.deposits"></a><a id="2855" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a>   <a id="2866" class="Symbol">:</a> <a id="2868" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
    <a id="UTxOState.donations"></a><a id="2881" href="Ledger.Conway.Utxo.html#2881" class="Field">donations</a>  <a id="2892" class="Symbol">:</a> <a id="2894" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2902" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="2909" href="Ledger.Conway.Utxo.html#2909" class="Record">HasUTxOState</a> <a id="2922" class="Symbol">{</a><a id="2923" href="Ledger.Conway.Utxo.html#2923" class="Bound">a</a><a id="2924" class="Symbol">}</a> <a id="2926" class="Symbol">(</a><a id="2927" href="Ledger.Conway.Utxo.html#2927" class="Bound">A</a> <a id="2929" class="Symbol">:</a> <a id="2931" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2936" href="Ledger.Conway.Utxo.html#2923" class="Bound">a</a><a id="2937" class="Symbol">)</a> <a id="2939" class="Symbol">:</a> <a id="2941" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2946" href="Ledger.Conway.Utxo.html#2923" class="Bound">a</a> <a id="2948" class="Keyword">where</a>
  <a id="2956" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="2962" href="Ledger.Conway.Utxo.html#2962" class="Field">UTxOStateOf</a> <a id="2974" class="Symbol">:</a> <a id="2976" href="Ledger.Conway.Utxo.html#2927" class="Bound">A</a> <a id="2978" class="Symbol">→</a> <a id="2980" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
<a id="2990" class="Keyword">open</a> <a id="2995" href="Ledger.Conway.Utxo.html#2909" class="Module">HasUTxOState</a> <a id="3008" class="Symbol">⦃...⦄</a> <a id="3014" class="Keyword">public</a>

<a id="3022" class="Keyword">instance</a>
  <a id="HasDeposits-UTxOState"></a><a id="3033" href="Ledger.Conway.Utxo.html#3033" class="Function">HasDeposits-UTxOState</a> <a id="3055" class="Symbol">:</a> <a id="3057" href="Ledger.Conway.Certs.html#705" class="Record">HasDeposits</a> <a id="3069" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="3081" href="Ledger.Conway.Utxo.html#3033" class="Function">HasDeposits-UTxOState</a> <a id="3103" class="Symbol">.</a><a id="3104" href="Ledger.Conway.Certs.html#757" class="Field">DepositsOf</a> <a id="3115" class="Symbol">=</a> <a id="3117" href="Ledger.Conway.Utxo.html#2855" class="Field">UTxOState.deposits</a>

  <a id="HasUTxO-UTxOState"></a><a id="3139" href="Ledger.Conway.Utxo.html#3139" class="Function">HasUTxO-UTxOState</a> <a id="3157" class="Symbol">:</a> <a id="3159" href="Ledger.Conway.Transaction.html#2655" class="Record">HasUTxO</a> <a id="3167" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="3179" href="Ledger.Conway.Utxo.html#3139" class="Function">HasUTxO-UTxOState</a> <a id="3197" class="Symbol">.</a><a id="3198" href="Ledger.Conway.Transaction.html#2705" class="Field">UTxOOf</a> <a id="3205" class="Symbol">=</a> <a id="3207" href="Ledger.Conway.Utxo.html#2811" class="Field">UTxOState.utxo</a>

  <a id="3225" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="3237" href="Ledger.Conway.Utxo.html#3237" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="3253" href="Ledger.Conway.Utxo.html#3253" class="Function">HasCast-UTxOState</a> <a id="3271" class="Symbol">=</a> <a id="3273" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="3292" class="Symbol">(</a> <a id="3294" class="Symbol">(</a><a id="3295" class="Keyword">quote</a> <a id="3301" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>   <a id="3311" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3313" href="Ledger.Conway.Utxo.html#3237" class="Function">HasCast-UTxOEnv</a>  <a id="3330" class="Symbol">)</a> <a id="3332" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="3338" href="Data.List.Base.html#5205" class="Function Operator">[</a> <a id="3340" class="Symbol">(</a><a id="3341" class="Keyword">quote</a> <a id="3347" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="3357" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3359" href="Ledger.Conway.Utxo.html#3253" class="Function">HasCast-UTxOState</a><a id="3376" class="Symbol">)</a> <a id="3378" href="Data.List.Base.html#5205" class="Function Operator">]</a><a id="3379" class="Symbol">)</a>


<a id="3383" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="3392" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="3406" class="Symbol">:</a> <a id="3408" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="3416" class="Symbol">→</a> <a id="3418" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="3428" class="Symbol">→</a> <a id="3430" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="3433" class="Symbol">→</a> <a id="3435" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="3445" class="Symbol">→</a> <a id="3447" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="3454" class="Keyword">module</a> <a id="3461" href="Ledger.Conway.Utxo.html#3461" class="Module">_</a> <a id="3463" class="Symbol">(</a><a id="3464" class="Keyword">let</a> <a id="3468" class="Keyword">open</a> <a id="3473" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a><a id="3475" class="Symbol">;</a> <a id="3477" class="Keyword">open</a> <a id="3482" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a><a id="3488" class="Symbol">;</a> <a id="3490" class="Keyword">open</a> <a id="3495" href="Ledger.Conway.Transaction.html#4056" class="Module">TxWitnesses</a><a id="3506" class="Symbol">)</a> <a id="3508" class="Keyword">where</a> <a id="3514" class="Keyword">opaque</a>


  <a id="3525" href="Ledger.Conway.Utxo.html#3525" class="Function">outs</a> <a id="3530" class="Symbol">:</a> <a id="3532" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="3539" class="Symbol">→</a> <a id="3541" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
  <a id="3548" href="Ledger.Conway.Utxo.html#3525" class="Function">outs</a> <a id="3553" href="Ledger.Conway.Utxo.html#3553" class="Bound">tx</a> <a id="3556" class="Symbol">=</a> <a id="3558" href="Axiom.Set.Map.html#5896" class="Function">mapKeys</a> <a id="3566" class="Symbol">(</a><a id="3567" href="Ledger.Conway.Utxo.html#3553" class="Bound">tx</a> <a id="3570" class="Symbol">.</a><a id="3571" href="Ledger.Conway.Transaction.html#3330" class="Field">txid</a> <a id="3576" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3578" class="Symbol">)</a> <a id="3580" class="Symbol">(</a><a id="3581" href="Ledger.Conway.Utxo.html#3553" class="Bound">tx</a> <a id="3584" class="Symbol">.</a><a id="3585" href="Ledger.Conway.Transaction.html#2858" class="Field">txouts</a><a id="3591" class="Symbol">)</a>

  <a id="3596" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="3604" class="Symbol">:</a> <a id="3606" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3611" class="Symbol">→</a> <a id="3613" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a>
  <a id="3621" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="3629" href="Ledger.Conway.Utxo.html#3629" class="Bound">utxo</a> <a id="3634" class="Symbol">=</a> <a id="3636" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="3639" href="Ledger.Conway.Utxo.html#3639" class="Bound">x</a> <a id="3641" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="3643" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="3653" href="Ledger.Conway.Transaction.html#5160" class="Function">txOutHash</a> <a id="3663" href="Ledger.Conway.Utxo.html#3629" class="Bound">utxo</a> <a id="3668" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="3670" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="3680" href="Ledger.Conway.Utxo.html#3639" class="Bound">x</a>

  <a id="3685" href="Ledger.Conway.Utxo.html#3685" class="Function">cbalance</a> <a id="3694" class="Symbol">:</a> <a id="3696" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3701" class="Symbol">→</a> <a id="3703" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3710" href="Ledger.Conway.Utxo.html#3685" class="Function">cbalance</a> <a id="3719" href="Ledger.Conway.Utxo.html#3719" class="Bound">utxo</a> <a id="3724" class="Symbol">=</a> <a id="3726" href="Ledger.Conway.TokenAlgebra.html#819" class="Function">coin</a> <a id="3731" class="Symbol">(</a><a id="3732" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="3740" href="Ledger.Conway.Utxo.html#3719" class="Bound">utxo</a><a id="3744" class="Symbol">)</a>



  <a id="3751" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="3766" class="Symbol">:</a> <a id="3768" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3773" class="Symbol">→</a> <a id="3775" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="3778" class="Symbol">→</a> <a id="3780" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="3784" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="3799" href="Ledger.Conway.Utxo.html#3799" class="Bound">utxo</a> <a id="3804" href="Ledger.Conway.Utxo.html#3804" class="Bound">tx</a> <a id="3807" class="Symbol">=</a> <a id="3809" href="Data.List.Base.html#4964" class="Function">sum</a> <a id="3813" class="Symbol">(</a><a id="3814" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3818" href="Ledger.Conway.Abstract.html#835" class="Field">scriptSize</a> <a id="3829" class="Symbol">(</a><a id="3830" href="abstract-set-theory.FiniteSetTheory.html#2463" class="Function">setToList</a> <a id="3840" class="Symbol">(</a><a id="3841" href="Ledger.Conway.Transaction.html#5618" class="Function">refScripts</a> <a id="3852" href="Ledger.Conway.Utxo.html#3804" class="Bound">tx</a> <a id="3855" href="Ledger.Conway.Utxo.html#3799" class="Bound">utxo</a><a id="3859" class="Symbol">)))</a>

  <a id="3866" href="Ledger.Conway.Utxo.html#3866" class="Function">minfee</a> <a id="3873" class="Symbol">:</a> <a id="3875" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="3883" class="Symbol">→</a> <a id="3885" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3890" class="Symbol">→</a> <a id="3892" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="3895" class="Symbol">→</a> <a id="3897" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3904" href="Ledger.Conway.Utxo.html#3866" class="Function">minfee</a> <a id="3911" href="Ledger.Conway.Utxo.html#3911" class="Bound">pp</a> <a id="3914" href="Ledger.Conway.Utxo.html#3914" class="Bound">utxo</a> <a id="3919" href="Ledger.Conway.Utxo.html#3919" class="Bound">tx</a>  <a id="3923" class="Symbol">=</a> <a id="3925" href="Ledger.Conway.Utxo.html#3911" class="Bound">pp</a> <a id="3928" class="Symbol">.</a><a id="3929" href="Ledger.Conway.PParams.html#2143" class="Field">a</a> <a id="3931" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3933" href="Ledger.Conway.Utxo.html#3919" class="Bound">tx</a> <a id="3936" class="Symbol">.</a><a id="3937" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="3942" class="Symbol">.</a><a id="3943" href="Ledger.Conway.Transaction.html#3305" class="Field">txsize</a> <a id="3950" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3952" href="Ledger.Conway.Utxo.html#3911" class="Bound">pp</a> <a id="3955" class="Symbol">.</a><a id="3956" href="Ledger.Conway.PParams.html#2185" class="Field">b</a>
                     <a id="3979" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3981" href="Ledger.Conway.Abstract.html#638" class="Field">txscriptfee</a> <a id="3993" class="Symbol">(</a><a id="3994" href="Ledger.Conway.Utxo.html#3911" class="Bound">pp</a> <a id="3997" class="Symbol">.</a><a id="3998" href="Ledger.Conway.PParams.html#2502" class="Field">prices</a><a id="4004" class="Symbol">)</a> <a id="4006" class="Symbol">(</a><a id="4007" href="Ledger.Conway.Utxo.html#2035" class="Function">totExUnits</a> <a id="4018" href="Ledger.Conway.Utxo.html#3919" class="Bound">tx</a><a id="4020" class="Symbol">)</a>
                     <a id="4043" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4045" href="Ledger.Conway.Fees.html#738" class="Function">scriptsCost</a> <a id="4057" href="Ledger.Conway.Utxo.html#3911" class="Bound">pp</a> <a id="4060" class="Symbol">(</a><a id="4061" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="4076" href="Ledger.Conway.Utxo.html#3914" class="Bound">utxo</a> <a id="4081" href="Ledger.Conway.Utxo.html#3919" class="Bound">tx</a><a id="4083" class="Symbol">)</a>



<a id="4088" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="4099" href="Ledger.Conway.Utxo.html#4099" class="Function">HasCoin-UTxO</a> <a id="4112" class="Symbol">:</a> <a id="4114" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="4122" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
  <a id="4129" href="Ledger.Conway.Utxo.html#4099" class="Function">HasCoin-UTxO</a> <a id="4142" class="Symbol">.</a><a id="4143" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="4151" class="Symbol">=</a> <a id="4153" href="Ledger.Conway.Utxo.html#3685" class="Function">cbalance</a>


<a id="certDeposit"></a><a id="4164" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="4176" class="Symbol">:</a> <a id="4178" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="4184" class="Symbol">→</a> <a id="4186" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="4194" class="Symbol">→</a> <a id="4196" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="4205" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="4217" class="Symbol">(</a><a id="4218" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="4227" href="Ledger.Conway.Utxo.html#4227" class="Bound">c</a> <a id="4229" class="Symbol">_</a> <a id="4231" class="Symbol">_</a> <a id="4233" href="Ledger.Conway.Utxo.html#4233" class="Bound">v</a><a id="4234" class="Symbol">)</a> <a id="4236" class="Symbol">_</a>   <a id="4240" class="Symbol">=</a> <a id="4242" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4244" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4262" href="Ledger.Conway.Utxo.html#4227" class="Bound">c</a> <a id="4264" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4266" href="Ledger.Conway.Utxo.html#4233" class="Bound">v</a> <a id="4268" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4270" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="4282" class="Symbol">(</a><a id="4283" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="4287" href="Ledger.Conway.Utxo.html#4287" class="Bound">c</a> <a id="4289" class="Symbol">_)</a>          <a id="4301" href="Ledger.Conway.Utxo.html#4301" class="Bound">pp</a>  <a id="4305" class="Symbol">=</a> <a id="4307" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4309" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4327" href="Ledger.Conway.Utxo.html#4287" class="Bound">c</a> <a id="4329" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4331" href="Ledger.Conway.Utxo.html#4301" class="Bound">pp</a> <a id="4334" class="Symbol">.</a><a id="4335" href="Ledger.Conway.PParams.html#2227" class="Field">keyDeposit</a> <a id="4346" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4348" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="4360" class="Symbol">(</a><a id="4361" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="4369" href="Ledger.Conway.Utxo.html#4369" class="Bound">kh</a> <a id="4372" class="Symbol">_)</a>     <a id="4379" href="Ledger.Conway.Utxo.html#4379" class="Bound">pp</a>  <a id="4383" class="Symbol">=</a> <a id="4385" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4387" href="Ledger.Conway.Certs.html#443" class="InductiveConstructor">PoolDeposit</a> <a id="4399" href="Ledger.Conway.Utxo.html#4369" class="Bound">kh</a> <a id="4402" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4404" href="Ledger.Conway.Utxo.html#4379" class="Bound">pp</a> <a id="4407" class="Symbol">.</a><a id="4408" href="Ledger.Conway.PParams.html#2272" class="Field">poolDeposit</a> <a id="4420" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4422" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="4434" class="Symbol">(</a><a id="4435" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="4443" href="Ledger.Conway.Utxo.html#4443" class="Bound">c</a> <a id="4445" href="Ledger.Conway.Utxo.html#4445" class="Bound">v</a> <a id="4447" class="Symbol">_)</a>    <a id="4453" class="Symbol">_</a>   <a id="4457" class="Symbol">=</a> <a id="4459" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4461" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="4473" href="Ledger.Conway.Utxo.html#4443" class="Bound">c</a> <a id="4475" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4477" href="Ledger.Conway.Utxo.html#4445" class="Bound">v</a> <a id="4479" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4481" href="Ledger.Conway.Utxo.html#4164" class="CatchallClause Function">certDeposit</a><a id="4492" class="CatchallClause"> </a><a id="4493" class="CatchallClause Symbol">_</a><a id="4494" class="CatchallClause">                  </a><a id="4512" class="CatchallClause Symbol">_</a>   <a id="4516" class="Symbol">=</a> <a id="4518" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="certRefund"></a><a id="4521" href="Ledger.Conway.Utxo.html#4521" class="Function">certRefund</a> <a id="4532" class="Symbol">:</a> <a id="4534" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="4540" class="Symbol">→</a> <a id="4542" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4544" href="Ledger.Conway.Certs.html#360" class="Datatype">DepositPurpose</a>
<a id="4559" href="Ledger.Conway.Utxo.html#4521" class="Function">certRefund</a> <a id="4570" class="Symbol">(</a><a id="4571" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="4577" href="Ledger.Conway.Utxo.html#4577" class="Bound">c</a> <a id="4579" class="Symbol">_)</a>      <a id="4587" class="Symbol">=</a> <a id="4589" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4591" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4609" href="Ledger.Conway.Utxo.html#4577" class="Bound">c</a> <a id="4611" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4613" href="Ledger.Conway.Utxo.html#4521" class="Function">certRefund</a> <a id="4624" class="Symbol">(</a><a id="4625" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="4635" href="Ledger.Conway.Utxo.html#4635" class="Bound">c</a> <a id="4637" class="Symbol">_)</a>  <a id="4641" class="Symbol">=</a> <a id="4643" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4645" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="4657" href="Ledger.Conway.Utxo.html#4635" class="Bound">c</a> <a id="4659" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4661" href="Ledger.Conway.Utxo.html#4521" class="CatchallClause Function">certRefund</a><a id="4671" class="CatchallClause"> </a><a id="4672" class="CatchallClause Symbol">_</a>                <a id="4689" class="Symbol">=</a> <a id="4691" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="4694" class="Keyword">data</a> <a id="ValidCertDeposits"></a><a id="4699" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="4717" class="Symbol">(</a><a id="4718" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="4721" class="Symbol">:</a> <a id="4723" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a><a id="4730" class="Symbol">)</a> <a id="4732" class="Symbol">(</a><a id="4733" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="4738" class="Symbol">:</a> <a id="4740" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a><a id="4748" class="Symbol">)</a> <a id="4750" class="Symbol">:</a> <a id="4752" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4757" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="4763" class="Symbol">→</a> <a id="4765" href="Agda.Primitive.html#388" class="Primitive">Set</a>


  <a id="4773" class="Keyword">where</a>
  <a id="ValidCertDeposits.[]"></a><a id="4781" href="Ledger.Conway.Utxo.html#4781" class="InductiveConstructor">[]</a>         <a id="4792" class="Symbol">:</a> <a id="4794" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="4812" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="4815" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="4820" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="ValidCertDeposits.delegate"></a><a id="4825" href="Ledger.Conway.Utxo.html#4825" class="InductiveConstructor">delegate</a>   <a id="4836" class="Symbol">:</a> <a id="4838" class="Symbol">∀</a> <a id="4840" class="Symbol">{</a><a id="4841" href="Ledger.Conway.Utxo.html#4841" class="Bound">c</a> <a id="4843" href="Ledger.Conway.Utxo.html#4843" class="Bound">del</a> <a id="4847" href="Ledger.Conway.Utxo.html#4847" class="Bound">kh</a> <a id="4850" href="Ledger.Conway.Utxo.html#4850" class="Bound">v</a> <a id="4852" href="Ledger.Conway.Utxo.html#4852" class="Bound">certs</a><a id="4857" class="Symbol">}</a>
             <a id="4872" class="Symbol">→</a> <a id="4874" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="4892" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="4895" class="Symbol">(</a><a id="4896" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="4901" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="4904" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4906" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4924" href="Ledger.Conway.Utxo.html#4841" class="Bound">c</a> <a id="4926" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4928" href="Ledger.Conway.Utxo.html#4850" class="Bound">v</a> <a id="4930" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4931" class="Symbol">)</a> <a id="4933" href="Ledger.Conway.Utxo.html#4852" class="Bound">certs</a>
             <a id="4952" class="Symbol">→</a> <a id="4954" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="4972" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="4975" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="4980" class="Symbol">(</a><a id="4981" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="4990" href="Ledger.Conway.Utxo.html#4841" class="Bound">c</a> <a id="4992" href="Ledger.Conway.Utxo.html#4843" class="Bound">del</a> <a id="4996" href="Ledger.Conway.Utxo.html#4847" class="Bound">kh</a> <a id="4999" href="Ledger.Conway.Utxo.html#4850" class="Bound">v</a> <a id="5001" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5003" href="Ledger.Conway.Utxo.html#4852" class="Bound">certs</a><a id="5008" class="Symbol">)</a>
  <a id="ValidCertDeposits.regpool"></a><a id="5012" href="Ledger.Conway.Utxo.html#5012" class="InductiveConstructor">regpool</a>    <a id="5023" class="Symbol">:</a> <a id="5025" class="Symbol">∀</a> <a id="5027" class="Symbol">{</a><a id="5028" href="Ledger.Conway.Utxo.html#5028" class="Bound">kh</a> <a id="5031" href="Ledger.Conway.Utxo.html#5031" class="Bound">p</a> <a id="5033" href="Ledger.Conway.Utxo.html#5033" class="Bound">certs</a><a id="5038" class="Symbol">}</a>
             <a id="5053" class="Symbol">→</a> <a id="5055" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5073" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5076" class="Symbol">(</a><a id="5077" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5082" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5085" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5087" href="Ledger.Conway.Certs.html#443" class="InductiveConstructor">PoolDeposit</a> <a id="5099" href="Ledger.Conway.Utxo.html#5028" class="Bound">kh</a> <a id="5102" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5104" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5107" class="Symbol">.</a><a id="5108" href="Ledger.Conway.PParams.html#2272" class="Field">poolDeposit</a> <a id="5120" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5121" class="Symbol">)</a> <a id="5123" href="Ledger.Conway.Utxo.html#5033" class="Bound">certs</a>
             <a id="5142" class="Symbol">→</a> <a id="5144" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5162" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5165" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5170" class="Symbol">(</a><a id="5171" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="5179" href="Ledger.Conway.Utxo.html#5028" class="Bound">kh</a> <a id="5182" href="Ledger.Conway.Utxo.html#5031" class="Bound">p</a> <a id="5184" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5186" href="Ledger.Conway.Utxo.html#5033" class="Bound">certs</a><a id="5191" class="Symbol">)</a>
  <a id="ValidCertDeposits.regdrep"></a><a id="5195" href="Ledger.Conway.Utxo.html#5195" class="InductiveConstructor">regdrep</a>    <a id="5206" class="Symbol">:</a> <a id="5208" class="Symbol">∀</a> <a id="5210" class="Symbol">{</a><a id="5211" href="Ledger.Conway.Utxo.html#5211" class="Bound">c</a> <a id="5213" href="Ledger.Conway.Utxo.html#5213" class="Bound">v</a> <a id="5215" href="Ledger.Conway.Utxo.html#5215" class="Bound">a</a> <a id="5217" href="Ledger.Conway.Utxo.html#5217" class="Bound">certs</a><a id="5222" class="Symbol">}</a>
             <a id="5237" class="Symbol">→</a> <a id="5239" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5257" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5260" class="Symbol">(</a><a id="5261" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5266" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5269" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5271" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="5283" href="Ledger.Conway.Utxo.html#5211" class="Bound">c</a> <a id="5285" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5287" href="Ledger.Conway.Utxo.html#5213" class="Bound">v</a> <a id="5289" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5290" class="Symbol">)</a> <a id="5292" href="Ledger.Conway.Utxo.html#5217" class="Bound">certs</a>
             <a id="5311" class="Symbol">→</a> <a id="5313" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5331" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5334" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5339" class="Symbol">(</a><a id="5340" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="5348" href="Ledger.Conway.Utxo.html#5211" class="Bound">c</a> <a id="5350" href="Ledger.Conway.Utxo.html#5213" class="Bound">v</a> <a id="5352" href="Ledger.Conway.Utxo.html#5215" class="Bound">a</a> <a id="5354" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5356" href="Ledger.Conway.Utxo.html#5217" class="Bound">certs</a><a id="5361" class="Symbol">)</a>
  <a id="ValidCertDeposits.reg"></a><a id="5365" href="Ledger.Conway.Utxo.html#5365" class="InductiveConstructor">reg</a>        <a id="5376" class="Symbol">:</a> <a id="5378" class="Symbol">∀</a> <a id="5380" class="Symbol">{</a><a id="5381" href="Ledger.Conway.Utxo.html#5381" class="Bound">c</a> <a id="5383" href="Ledger.Conway.Utxo.html#5383" class="Bound">v</a> <a id="5385" href="Ledger.Conway.Utxo.html#5385" class="Bound">certs</a><a id="5390" class="Symbol">}</a>
             <a id="5405" class="Symbol">→</a> <a id="5407" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5425" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5428" class="Symbol">(</a><a id="5429" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5434" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5437" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5439" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="5457" href="Ledger.Conway.Utxo.html#5381" class="Bound">c</a> <a id="5459" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5461" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5464" class="Symbol">.</a><a id="5465" href="Ledger.Conway.PParams.html#2227" class="Field">keyDeposit</a> <a id="5476" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5477" class="Symbol">)</a> <a id="5479" href="Ledger.Conway.Utxo.html#5385" class="Bound">certs</a>
             <a id="5498" class="Symbol">→</a> <a id="5500" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5518" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5521" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5526" class="Symbol">(</a><a id="5527" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="5531" href="Ledger.Conway.Utxo.html#5381" class="Bound">c</a> <a id="5533" href="Ledger.Conway.Utxo.html#5383" class="Bound">v</a> <a id="5535" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5537" href="Ledger.Conway.Utxo.html#5385" class="Bound">certs</a><a id="5542" class="Symbol">)</a>
  <a id="ValidCertDeposits.dereg"></a><a id="5546" href="Ledger.Conway.Utxo.html#5546" class="InductiveConstructor">dereg</a>      <a id="5557" class="Symbol">:</a> <a id="5559" class="Symbol">∀</a> <a id="5561" class="Symbol">{</a><a id="5562" href="Ledger.Conway.Utxo.html#5562" class="Bound">c</a> <a id="5564" href="Ledger.Conway.Utxo.html#5564" class="Bound">md</a> <a id="5567" href="Ledger.Conway.Utxo.html#5567" class="Bound">d</a> <a id="5569" href="Ledger.Conway.Utxo.html#5569" class="Bound">certs</a><a id="5574" class="Symbol">}</a>
             <a id="5589" class="Symbol">→</a> <a id="5591" class="Symbol">(</a><a id="5592" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="5610" href="Ledger.Conway.Utxo.html#5562" class="Bound">c</a> <a id="5612" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5614" href="Ledger.Conway.Utxo.html#5567" class="Bound">d</a><a id="5615" class="Symbol">)</a> <a id="5617" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5619" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a>
             <a id="5637" class="Symbol">→</a> <a id="5639" href="Ledger.Conway.Utxo.html#5564" class="Bound">md</a> <a id="5642" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5644" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5652" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5654" href="Ledger.Conway.Utxo.html#5564" class="Bound">md</a> <a id="5657" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5659" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5664" href="Ledger.Conway.Utxo.html#5567" class="Bound">d</a>
             <a id="5679" class="Symbol">→</a> <a id="5681" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5699" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5702" class="Symbol">(</a><a id="5703" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5708" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5710" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5712" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="5730" href="Ledger.Conway.Utxo.html#5562" class="Bound">c</a> <a id="5732" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5734" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5735" class="Symbol">)</a> <a id="5737" href="Ledger.Conway.Utxo.html#5569" class="Bound">certs</a>
             <a id="5756" class="Symbol">→</a> <a id="5758" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5776" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5779" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5784" class="Symbol">(</a><a id="5785" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="5791" href="Ledger.Conway.Utxo.html#5562" class="Bound">c</a> <a id="5793" href="Ledger.Conway.Utxo.html#5564" class="Bound">md</a> <a id="5796" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5798" href="Ledger.Conway.Utxo.html#5569" class="Bound">certs</a><a id="5803" class="Symbol">)</a>
  <a id="ValidCertDeposits.deregdrep"></a><a id="5807" href="Ledger.Conway.Utxo.html#5807" class="InductiveConstructor">deregdrep</a>  <a id="5818" class="Symbol">:</a> <a id="5820" class="Symbol">∀</a> <a id="5822" class="Symbol">{</a><a id="5823" href="Ledger.Conway.Utxo.html#5823" class="Bound">c</a> <a id="5825" href="Ledger.Conway.Utxo.html#5825" class="Bound">d</a> <a id="5827" href="Ledger.Conway.Utxo.html#5827" class="Bound">certs</a><a id="5832" class="Symbol">}</a>
             <a id="5847" class="Symbol">→</a> <a id="5849" class="Symbol">(</a><a id="5850" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="5862" href="Ledger.Conway.Utxo.html#5823" class="Bound">c</a> <a id="5864" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5866" href="Ledger.Conway.Utxo.html#5825" class="Bound">d</a><a id="5867" class="Symbol">)</a> <a id="5869" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5871" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a>
             <a id="5889" class="Symbol">→</a> <a id="5891" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5909" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5912" class="Symbol">(</a><a id="5913" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5918" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5920" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5922" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="5934" href="Ledger.Conway.Utxo.html#5823" class="Bound">c</a> <a id="5936" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5938" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5939" class="Symbol">)</a> <a id="5941" href="Ledger.Conway.Utxo.html#5827" class="Bound">certs</a>
             <a id="5960" class="Symbol">→</a> <a id="5962" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="5980" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="5983" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="5988" class="Symbol">(</a><a id="5989" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="5999" href="Ledger.Conway.Utxo.html#5823" class="Bound">c</a> <a id="6001" href="Ledger.Conway.Utxo.html#5825" class="Bound">d</a> <a id="6003" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6005" href="Ledger.Conway.Utxo.html#5827" class="Bound">certs</a><a id="6010" class="Symbol">)</a>
  <a id="ValidCertDeposits.ccreghot"></a><a id="6014" href="Ledger.Conway.Utxo.html#6014" class="InductiveConstructor">ccreghot</a>   <a id="6025" class="Symbol">:</a> <a id="6027" class="Symbol">∀</a> <a id="6029" class="Symbol">{</a><a id="6030" href="Ledger.Conway.Utxo.html#6030" class="Bound">c</a> <a id="6032" href="Ledger.Conway.Utxo.html#6032" class="Bound">v</a> <a id="6034" href="Ledger.Conway.Utxo.html#6034" class="Bound">certs</a><a id="6039" class="Symbol">}</a>
             <a id="6054" class="Symbol">→</a> <a id="6056" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="6074" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="6077" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="6082" href="Ledger.Conway.Utxo.html#6034" class="Bound">certs</a>
             <a id="6101" class="Symbol">→</a> <a id="6103" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="6121" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="6124" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="6129" class="Symbol">(</a><a id="6130" href="Ledger.Conway.Certs.html#1672" class="InductiveConstructor">ccreghot</a> <a id="6139" href="Ledger.Conway.Utxo.html#6030" class="Bound">c</a> <a id="6141" href="Ledger.Conway.Utxo.html#6032" class="Bound">v</a> <a id="6143" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6145" href="Ledger.Conway.Utxo.html#6034" class="Bound">certs</a><a id="6150" class="Symbol">)</a>
  <a id="ValidCertDeposits.retirepool"></a><a id="6154" href="Ledger.Conway.Utxo.html#6154" class="InductiveConstructor">retirepool</a> <a id="6165" class="Symbol">:</a> <a id="6167" class="Symbol">∀</a> <a id="6169" class="Symbol">{</a><a id="6170" href="Ledger.Conway.Utxo.html#6170" class="Bound">kh</a> <a id="6173" href="Ledger.Conway.Utxo.html#6173" class="Bound">e</a> <a id="6175" href="Ledger.Conway.Utxo.html#6175" class="Bound">certs</a><a id="6180" class="Symbol">}</a>
             <a id="6195" class="Symbol">→</a> <a id="6197" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="6215" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="6218" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="6223" href="Ledger.Conway.Utxo.html#6175" class="Bound">certs</a>
             <a id="6242" class="Symbol">→</a> <a id="6244" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="6262" href="Ledger.Conway.Utxo.html#4718" class="Bound">pp</a> <a id="6265" href="Ledger.Conway.Utxo.html#4733" class="Bound">deps</a> <a id="6270" class="Symbol">(</a><a id="6271" href="Ledger.Conway.Certs.html#1539" class="InductiveConstructor">retirepool</a> <a id="6282" href="Ledger.Conway.Utxo.html#6170" class="Bound">kh</a> <a id="6285" href="Ledger.Conway.Utxo.html#6173" class="Bound">e</a>  <a id="6288" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6290" href="Ledger.Conway.Utxo.html#6175" class="Bound">certs</a><a id="6295" class="Symbol">)</a>

<a id="6298" class="Keyword">private</a>
  <a id="validCertDeposits?"></a><a id="6308" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6327" class="Symbol">:</a> <a id="6329" class="Symbol">∀</a> <a id="6331" class="Symbol">{</a><a id="6332" href="Ledger.Conway.Utxo.html#6332" class="Bound">pp</a><a id="6334" class="Symbol">}</a> <a id="6336" href="Ledger.Conway.Utxo.html#6336" class="Bound">deps</a> <a id="6341" href="Ledger.Conway.Utxo.html#6341" class="Bound">certs</a> <a id="6347" class="Symbol">→</a> <a id="6349" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="6353" class="Symbol">(</a><a id="6354" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="6372" href="Ledger.Conway.Utxo.html#6332" class="Bound">pp</a> <a id="6375" href="Ledger.Conway.Utxo.html#6336" class="Bound">deps</a> <a id="6380" href="Ledger.Conway.Utxo.html#6341" class="Bound">certs</a><a id="6385" class="Symbol">)</a>
  <a id="6389" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6408" href="Ledger.Conway.Utxo.html#6408" class="Bound">deps</a> <a id="6413" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="6416" class="Symbol">=</a> <a id="6418" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6422" href="Ledger.Conway.Utxo.html#4781" class="InductiveConstructor">[]</a>
  <a id="6427" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6446" href="Ledger.Conway.Utxo.html#6446" class="Bound">deps</a> <a id="6451" class="Symbol">(</a><a id="6452" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="6461" class="Symbol">_</a> <a id="6463" class="Symbol">_</a> <a id="6465" class="Symbol">_</a> <a id="6467" class="Symbol">_</a> <a id="6469" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6471" href="Ledger.Conway.Utxo.html#6471" class="Bound">certs</a><a id="6476" class="Symbol">)</a> <a id="6478" class="Symbol">=</a>
    <a id="6484" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6491" href="Ledger.Conway.Utxo.html#4825" class="InductiveConstructor">delegate</a> <a id="6500" class="Symbol">(λ</a> <a id="6503" class="Keyword">where</a> <a id="6509" class="Symbol">(</a><a id="6510" href="Ledger.Conway.Utxo.html#4825" class="InductiveConstructor">delegate</a> <a id="6519" href="Ledger.Conway.Utxo.html#6519" class="Bound">p</a><a id="6520" class="Symbol">)</a> <a id="6522" class="Symbol">→</a> <a id="6524" href="Ledger.Conway.Utxo.html#6519" class="Bound">p</a><a id="6525" class="Symbol">)</a> <a id="6527" class="Symbol">(</a><a id="6528" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6547" class="Symbol">_</a> <a id="6549" class="Symbol">_)</a>
  <a id="6554" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6573" href="Ledger.Conway.Utxo.html#6573" class="Bound">deps</a> <a id="6578" class="Symbol">(</a><a id="6579" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="6587" class="Symbol">_</a> <a id="6589" class="Symbol">_</a> <a id="6591" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6593" href="Ledger.Conway.Utxo.html#6593" class="Bound">certs</a><a id="6598" class="Symbol">)</a> <a id="6600" class="Symbol">=</a>
    <a id="6606" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6613" href="Ledger.Conway.Utxo.html#5012" class="InductiveConstructor">regpool</a> <a id="6621" class="Symbol">(λ</a> <a id="6624" class="Keyword">where</a> <a id="6630" class="Symbol">(</a><a id="6631" href="Ledger.Conway.Utxo.html#5012" class="InductiveConstructor">regpool</a> <a id="6639" href="Ledger.Conway.Utxo.html#6639" class="Bound">p</a><a id="6640" class="Symbol">)</a> <a id="6642" class="Symbol">→</a> <a id="6644" href="Ledger.Conway.Utxo.html#6639" class="Bound">p</a><a id="6645" class="Symbol">)</a> <a id="6647" class="Symbol">(</a><a id="6648" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6667" class="Symbol">_</a> <a id="6669" class="Symbol">_)</a>
  <a id="6674" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6693" href="Ledger.Conway.Utxo.html#6693" class="Bound">deps</a> <a id="6698" class="Symbol">(</a><a id="6699" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="6707" class="Symbol">_</a> <a id="6709" class="Symbol">_</a> <a id="6711" class="Symbol">_</a> <a id="6713" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6715" href="Ledger.Conway.Utxo.html#6715" class="Bound">certs</a><a id="6720" class="Symbol">)</a> <a id="6722" class="Symbol">=</a>
    <a id="6728" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6735" href="Ledger.Conway.Utxo.html#5195" class="InductiveConstructor">regdrep</a> <a id="6743" class="Symbol">(λ</a> <a id="6746" class="Keyword">where</a> <a id="6752" class="Symbol">(</a><a id="6753" href="Ledger.Conway.Utxo.html#5195" class="InductiveConstructor">regdrep</a> <a id="6761" href="Ledger.Conway.Utxo.html#6761" class="Bound">p</a><a id="6762" class="Symbol">)</a> <a id="6764" class="Symbol">→</a> <a id="6766" href="Ledger.Conway.Utxo.html#6761" class="Bound">p</a><a id="6767" class="Symbol">)</a> <a id="6769" class="Symbol">(</a><a id="6770" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6789" class="Symbol">_</a> <a id="6791" class="Symbol">_)</a>
  <a id="6796" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6815" href="Ledger.Conway.Utxo.html#6815" class="Bound">deps</a> <a id="6820" class="Symbol">(</a><a id="6821" href="Ledger.Conway.Certs.html#1539" class="InductiveConstructor">retirepool</a> <a id="6832" class="Symbol">_</a> <a id="6834" class="Symbol">_</a> <a id="6836" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6838" href="Ledger.Conway.Utxo.html#6838" class="Bound">certs</a><a id="6843" class="Symbol">)</a> <a id="6845" class="Symbol">=</a>
    <a id="6851" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6858" href="Ledger.Conway.Utxo.html#6154" class="InductiveConstructor">retirepool</a> <a id="6869" class="Symbol">(λ</a> <a id="6872" class="Keyword">where</a> <a id="6878" class="Symbol">(</a><a id="6879" href="Ledger.Conway.Utxo.html#6154" class="InductiveConstructor">retirepool</a> <a id="6890" href="Ledger.Conway.Utxo.html#6890" class="Bound">p</a><a id="6891" class="Symbol">)</a> <a id="6893" class="Symbol">→</a> <a id="6895" href="Ledger.Conway.Utxo.html#6890" class="Bound">p</a><a id="6896" class="Symbol">)</a> <a id="6898" class="Symbol">(</a><a id="6899" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6918" class="Symbol">_</a> <a id="6920" class="Symbol">_)</a>
  <a id="6925" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="6944" href="Ledger.Conway.Utxo.html#6944" class="Bound">deps</a> <a id="6949" class="Symbol">(</a><a id="6950" href="Ledger.Conway.Certs.html#1672" class="InductiveConstructor">ccreghot</a> <a id="6959" class="Symbol">_</a> <a id="6961" class="Symbol">_</a> <a id="6963" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6965" href="Ledger.Conway.Utxo.html#6965" class="Bound">certs</a><a id="6970" class="Symbol">)</a> <a id="6972" class="Symbol">=</a>
    <a id="6978" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6985" href="Ledger.Conway.Utxo.html#6014" class="InductiveConstructor">ccreghot</a> <a id="6994" class="Symbol">(λ</a> <a id="6997" class="Keyword">where</a> <a id="7003" class="Symbol">(</a><a id="7004" href="Ledger.Conway.Utxo.html#6014" class="InductiveConstructor">ccreghot</a> <a id="7013" href="Ledger.Conway.Utxo.html#7013" class="Bound">p</a><a id="7014" class="Symbol">)</a> <a id="7016" class="Symbol">→</a> <a id="7018" href="Ledger.Conway.Utxo.html#7013" class="Bound">p</a><a id="7019" class="Symbol">)</a> <a id="7021" class="Symbol">(</a><a id="7022" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7041" class="Symbol">_</a> <a id="7043" class="Symbol">_)</a>
  <a id="7048" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7067" href="Ledger.Conway.Utxo.html#7067" class="Bound">deps</a> <a id="7072" class="Symbol">(</a><a id="7073" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="7077" class="Symbol">_</a> <a id="7079" class="Symbol">_</a> <a id="7081" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7083" href="Ledger.Conway.Utxo.html#7083" class="Bound">certs</a><a id="7088" class="Symbol">)</a> <a id="7090" class="Symbol">=</a>
    <a id="7096" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7103" href="Ledger.Conway.Utxo.html#5365" class="InductiveConstructor">reg</a> <a id="7107" class="Symbol">(λ</a> <a id="7110" class="Keyword">where</a> <a id="7116" class="Symbol">(</a><a id="7117" href="Ledger.Conway.Utxo.html#5365" class="InductiveConstructor">reg</a> <a id="7121" href="Ledger.Conway.Utxo.html#7121" class="Bound">p</a><a id="7122" class="Symbol">)</a> <a id="7124" class="Symbol">→</a> <a id="7126" href="Ledger.Conway.Utxo.html#7121" class="Bound">p</a><a id="7127" class="Symbol">)</a> <a id="7129" class="Symbol">(</a><a id="7130" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7149" class="Symbol">_</a> <a id="7151" class="Symbol">_)</a>
  <a id="7156" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7175" href="Ledger.Conway.Utxo.html#7175" class="Bound">deps</a> <a id="7180" class="Symbol">(</a><a id="7181" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="7187" href="Ledger.Conway.Utxo.html#7187" class="Bound">c</a> <a id="7189" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="7197" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7199" href="Ledger.Conway.Utxo.html#7199" class="Bound">certs</a><a id="7204" class="Symbol">)</a> <a id="7206" class="Keyword">with</a> <a id="7211" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7213" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="7231" href="Ledger.Conway.Utxo.html#7187" class="Bound">c</a> <a id="7233" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7235" href="Class.IsSet.html#916" class="Function">dom</a> <a id="7239" href="Ledger.Conway.Utxo.html#7175" class="Bound">deps</a> <a id="7244" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7249" class="Symbol">...</a> <a id="7253" class="Symbol">|</a> <a id="7255" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7259" href="Ledger.Conway.Utxo.html#7259" class="Bound">p</a> <a id="7261" class="Symbol">=</a> <a id="7263" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7270" class="Symbol">(</a><a id="7271" href="Ledger.Conway.Utxo.html#5546" class="InductiveConstructor">dereg</a> <a id="7277" class="Symbol">(</a><a id="7278" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="7284" class="Symbol">(</a><a id="7285" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7302" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7307" href="Ledger.Conway.Utxo.html#7259" class="Bound">p</a><a id="7308" class="Symbol">))</a> <a id="7311" class="Symbol">(</a><a id="7312" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7317" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7321" class="Symbol">))</a> <a id="7324" class="Symbol">(λ</a> <a id="7327" class="Symbol">{</a> <a id="7329" class="Symbol">(</a><a id="7330" href="Ledger.Conway.Utxo.html#5546" class="InductiveConstructor">dereg</a> <a id="7336" class="Symbol">_</a> <a id="7338" class="Symbol">_</a> <a id="7340" href="Ledger.Conway.Utxo.html#7340" class="Bound">p</a><a id="7341" class="Symbol">)</a> <a id="7343" class="Symbol">→</a> <a id="7345" href="Ledger.Conway.Utxo.html#7340" class="Bound">p</a> <a id="7347" class="Symbol">})</a> <a id="7350" class="Symbol">(</a><a id="7351" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7370" class="Symbol">_</a> <a id="7372" class="Symbol">_)</a>
  <a id="7377" class="Symbol">...</a> <a id="7381" class="Symbol">|</a> <a id="7383" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7386" href="Ledger.Conway.Utxo.html#7386" class="Bound">¬p</a> <a id="7389" class="Symbol">=</a> <a id="7391" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7394" class="Symbol">λ</a> <a id="7396" class="Symbol">{</a> <a id="7398" class="Symbol">(</a><a id="7399" href="Ledger.Conway.Utxo.html#5546" class="InductiveConstructor">dereg</a> <a id="7405" href="Ledger.Conway.Utxo.html#7405" class="Bound">x</a> <a id="7407" class="Symbol">_</a> <a id="7409" class="Symbol">_)</a> <a id="7412" class="Symbol">→</a> <a id="7414" href="Ledger.Conway.Utxo.html#7386" class="Bound">¬p</a> <a id="7417" class="Symbol">(</a><a id="7418" href="Function.Bundles.html#4810" class="Field">Equivalence.to</a> <a id="7433" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7438" class="Symbol">(_</a> <a id="7441" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7443" href="Ledger.Conway.Utxo.html#7405" class="Bound">x</a><a id="7444" class="Symbol">))</a> <a id="7447" class="Symbol">}</a>
  <a id="7451" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7470" href="Ledger.Conway.Utxo.html#7470" class="Bound">deps</a> <a id="7475" class="Symbol">(</a><a id="7476" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="7482" href="Ledger.Conway.Utxo.html#7482" class="Bound">c</a> <a id="7484" class="Symbol">(</a><a id="7485" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7490" href="Ledger.Conway.Utxo.html#7490" class="Bound">d</a><a id="7491" class="Symbol">)</a> <a id="7493" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7495" href="Ledger.Conway.Utxo.html#7495" class="Bound">certs</a><a id="7500" class="Symbol">)</a> <a id="7502" class="Keyword">with</a> <a id="7507" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7509" class="Symbol">(</a><a id="7510" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="7528" href="Ledger.Conway.Utxo.html#7482" class="Bound">c</a> <a id="7530" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7532" href="Ledger.Conway.Utxo.html#7490" class="Bound">d</a><a id="7533" class="Symbol">)</a> <a id="7535" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7537" href="Ledger.Conway.Utxo.html#7470" class="Bound">deps</a> <a id="7542" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7547" class="Symbol">...</a> <a id="7551" class="Symbol">|</a> <a id="7553" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7557" href="Ledger.Conway.Utxo.html#7557" class="Bound">p</a> <a id="7559" class="Symbol">=</a> <a id="7561" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7568" class="Symbol">(</a><a id="7569" href="Ledger.Conway.Utxo.html#5546" class="InductiveConstructor">dereg</a> <a id="7575" href="Ledger.Conway.Utxo.html#7557" class="Bound">p</a> <a id="7577" class="Symbol">(</a><a id="7578" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7583" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7587" class="Symbol">))</a> <a id="7590" class="Symbol">(λ</a> <a id="7593" class="Symbol">{</a> <a id="7595" class="Symbol">(</a><a id="7596" href="Ledger.Conway.Utxo.html#5546" class="InductiveConstructor">dereg</a> <a id="7602" class="Symbol">_</a> <a id="7604" class="Symbol">_</a> <a id="7606" href="Ledger.Conway.Utxo.html#7606" class="Bound">p</a><a id="7607" class="Symbol">)</a> <a id="7609" class="Symbol">→</a> <a id="7611" href="Ledger.Conway.Utxo.html#7606" class="Bound">p</a> <a id="7613" class="Symbol">})</a> <a id="7616" class="Symbol">(</a><a id="7617" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7636" class="Symbol">_</a> <a id="7638" class="Symbol">_)</a>
  <a id="7643" class="Symbol">...</a> <a id="7647" class="Symbol">|</a> <a id="7649" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7652" href="Ledger.Conway.Utxo.html#7652" class="Bound">¬p</a> <a id="7655" class="Symbol">=</a> <a id="7657" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7660" class="Symbol">λ</a> <a id="7662" class="Symbol">{</a> <a id="7664" class="Symbol">(</a><a id="7665" href="Ledger.Conway.Utxo.html#5546" class="InductiveConstructor">dereg</a> <a id="7671" href="Ledger.Conway.Utxo.html#7671" class="Bound">x</a> <a id="7673" class="Symbol">(</a><a id="7674" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7679" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7683" class="Symbol">)</a> <a id="7685" class="Symbol">_)</a> <a id="7688" class="Symbol">→</a> <a id="7690" href="Ledger.Conway.Utxo.html#7652" class="Bound">¬p</a> <a id="7693" href="Ledger.Conway.Utxo.html#7671" class="Bound">x</a> <a id="7695" class="Symbol">}</a>
  <a id="7699" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7718" href="Ledger.Conway.Utxo.html#7718" class="Bound">deps</a> <a id="7723" class="Symbol">(</a><a id="7724" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="7734" href="Ledger.Conway.Utxo.html#7734" class="Bound">c</a> <a id="7736" href="Ledger.Conway.Utxo.html#7736" class="Bound">d</a> <a id="7738" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7740" href="Ledger.Conway.Utxo.html#7740" class="Bound">certs</a><a id="7745" class="Symbol">)</a> <a id="7747" class="Keyword">with</a> <a id="7752" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7754" class="Symbol">(</a><a id="7755" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="7767" href="Ledger.Conway.Utxo.html#7734" class="Bound">c</a> <a id="7769" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7771" href="Ledger.Conway.Utxo.html#7736" class="Bound">d</a><a id="7772" class="Symbol">)</a> <a id="7774" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7776" href="Ledger.Conway.Utxo.html#7718" class="Bound">deps</a> <a id="7781" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a>
  <a id="7785" class="Symbol">...</a> <a id="7789" class="Symbol">|</a> <a id="7791" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7795" href="Ledger.Conway.Utxo.html#7795" class="Bound">p</a> <a id="7797" class="Symbol">=</a> <a id="7799" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7806" class="Symbol">(</a><a id="7807" href="Ledger.Conway.Utxo.html#5807" class="InductiveConstructor">deregdrep</a> <a id="7817" href="Ledger.Conway.Utxo.html#7795" class="Bound">p</a><a id="7818" class="Symbol">)</a>  <a id="7821" class="Symbol">(λ</a> <a id="7824" class="Keyword">where</a> <a id="7830" class="Symbol">(</a><a id="7831" href="Ledger.Conway.Utxo.html#5807" class="InductiveConstructor">deregdrep</a> <a id="7841" class="Symbol">_</a> <a id="7843" href="Ledger.Conway.Utxo.html#7843" class="Bound">v</a><a id="7844" class="Symbol">)</a> <a id="7846" class="Symbol">→</a> <a id="7848" href="Ledger.Conway.Utxo.html#7843" class="Bound">v</a><a id="7849" class="Symbol">)</a> <a id="7851" class="Symbol">(</a><a id="7852" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="7871" class="Symbol">_</a> <a id="7873" class="Symbol">_)</a>
  <a id="7878" class="Symbol">...</a> <a id="7882" class="Symbol">|</a> <a id="7884" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7887" href="Ledger.Conway.Utxo.html#7887" class="Bound">¬p</a> <a id="7890" class="Symbol">=</a> <a id="7892" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7895" class="Symbol">(λ</a> <a id="7898" class="Keyword">where</a> <a id="7904" class="Symbol">(</a><a id="7905" href="Ledger.Conway.Utxo.html#5807" class="InductiveConstructor">deregdrep</a> <a id="7915" href="Ledger.Conway.Utxo.html#7915" class="Bound">p</a> <a id="7917" class="Symbol">_)</a> <a id="7920" class="Symbol">→</a> <a id="7922" href="Ledger.Conway.Utxo.html#7887" class="Bound">¬p</a> <a id="7925" href="Ledger.Conway.Utxo.html#7915" class="Bound">p</a><a id="7926" class="Symbol">)</a>

<a id="7929" class="Keyword">instance</a>
  <a id="Dec-ValidCertDeposits"></a><a id="7940" href="Ledger.Conway.Utxo.html#7940" class="Function">Dec-ValidCertDeposits</a> <a id="7962" class="Symbol">:</a> <a id="7964" class="Symbol">∀</a> <a id="7966" class="Symbol">{</a><a id="7967" href="Ledger.Conway.Utxo.html#7967" class="Bound">pp</a> <a id="7970" href="Ledger.Conway.Utxo.html#7970" class="Bound">deps</a> <a id="7975" href="Ledger.Conway.Utxo.html#7975" class="Bound">certs</a><a id="7980" class="Symbol">}</a> <a id="7982" class="Symbol">→</a> <a id="7984" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="8002" href="Ledger.Conway.Utxo.html#7967" class="Bound">pp</a> <a id="8005" href="Ledger.Conway.Utxo.html#7970" class="Bound">deps</a> <a id="8010" href="Ledger.Conway.Utxo.html#7975" class="Bound">certs</a> <a id="8016" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="8020" href="Ledger.Conway.Utxo.html#7940" class="Function">Dec-ValidCertDeposits</a> <a id="8042" class="Symbol">=</a> <a id="8044" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="8046" class="Symbol">(</a><a id="8047" href="Ledger.Conway.Utxo.html#6308" class="Function">validCertDeposits?</a> <a id="8066" class="Symbol">_</a> <a id="8068" class="Symbol">_)</a>


<a id="updateCertDeposits"></a><a id="8073" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a>  <a id="8093" class="Symbol">:</a> <a id="8095" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="8103" class="Symbol">→</a> <a id="8105" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8110" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="8116" class="Symbol">→</a> <a id="8118" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="8127" class="Symbol">→</a> <a id="8129" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="8138" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8157" href="Ledger.Conway.Utxo.html#8157" class="Bound">pp</a> <a id="8160" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="8163" href="Ledger.Conway.Utxo.html#8163" class="Bound">deposits</a> <a id="8172" class="Symbol">=</a> <a id="8174" href="Ledger.Conway.Utxo.html#8163" class="Bound">deposits</a>


<a id="8185" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8204" href="Ledger.Conway.Utxo.html#8204" class="Bound">pp</a> <a id="8207" class="Symbol">(</a><a id="8208" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="8212" href="Ledger.Conway.Utxo.html#8212" class="Bound">c</a> <a id="8214" href="Ledger.Conway.Utxo.html#8214" class="Bound">v</a> <a id="8216" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8218" href="Ledger.Conway.Utxo.html#8218" class="Bound">certs</a><a id="8223" class="Symbol">)</a> <a id="8225" href="Ledger.Conway.Utxo.html#8225" class="Bound">deposits</a>
  <a id="8236" class="Symbol">=</a> <a id="8238" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8257" href="Ledger.Conway.Utxo.html#8204" class="Bound">pp</a> <a id="8260" href="Ledger.Conway.Utxo.html#8218" class="Bound">certs</a> <a id="8266" class="Symbol">(</a><a id="8267" href="Ledger.Conway.Utxo.html#8225" class="Bound">deposits</a> <a id="8276" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8279" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="8291" class="Symbol">(</a><a id="8292" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="8296" href="Ledger.Conway.Utxo.html#8212" class="Bound">c</a> <a id="8298" href="Ledger.Conway.Utxo.html#8214" class="Bound">v</a><a id="8299" class="Symbol">)</a> <a id="8301" href="Ledger.Conway.Utxo.html#8204" class="Bound">pp</a><a id="8303" class="Symbol">)</a>


<a id="8307" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8326" href="Ledger.Conway.Utxo.html#8326" class="Bound">pp</a> <a id="8329" class="Symbol">(</a><a id="8330" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="8339" href="Ledger.Conway.Utxo.html#8339" class="Bound">c</a> <a id="8341" href="Ledger.Conway.Utxo.html#8341" class="Bound">vd</a> <a id="8344" href="Ledger.Conway.Utxo.html#8344" class="Bound">khs</a> <a id="8348" href="Ledger.Conway.Utxo.html#8348" class="Bound">v</a> <a id="8350" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8352" href="Ledger.Conway.Utxo.html#8352" class="Bound">certs</a><a id="8357" class="Symbol">)</a> <a id="8359" href="Ledger.Conway.Utxo.html#8359" class="Bound">deposits</a>
  <a id="8370" class="Symbol">=</a> <a id="8372" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8391" href="Ledger.Conway.Utxo.html#8326" class="Bound">pp</a> <a id="8394" href="Ledger.Conway.Utxo.html#8352" class="Bound">certs</a> <a id="8400" class="Symbol">(</a><a id="8401" href="Ledger.Conway.Utxo.html#8359" class="Bound">deposits</a> <a id="8410" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8413" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="8425" class="Symbol">(</a><a id="8426" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="8435" href="Ledger.Conway.Utxo.html#8339" class="Bound">c</a> <a id="8437" href="Ledger.Conway.Utxo.html#8341" class="Bound">vd</a> <a id="8440" href="Ledger.Conway.Utxo.html#8344" class="Bound">khs</a> <a id="8444" href="Ledger.Conway.Utxo.html#8348" class="Bound">v</a><a id="8445" class="Symbol">)</a> <a id="8447" href="Ledger.Conway.Utxo.html#8326" class="Bound">pp</a><a id="8449" class="Symbol">)</a>
<a id="8451" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8470" href="Ledger.Conway.Utxo.html#8470" class="Bound">pp</a> <a id="8473" class="Symbol">(</a><a id="8474" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="8482" href="Ledger.Conway.Utxo.html#8482" class="Bound">kh</a> <a id="8485" href="Ledger.Conway.Utxo.html#8485" class="Bound">p</a> <a id="8487" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8489" href="Ledger.Conway.Utxo.html#8489" class="Bound">certs</a><a id="8494" class="Symbol">)</a> <a id="8496" href="Ledger.Conway.Utxo.html#8496" class="Bound">deposits</a>
  <a id="8507" class="Symbol">=</a> <a id="8509" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8528" href="Ledger.Conway.Utxo.html#8470" class="Bound">pp</a> <a id="8531" href="Ledger.Conway.Utxo.html#8489" class="Bound">certs</a> <a id="8537" class="Symbol">(</a><a id="8538" href="Ledger.Conway.Utxo.html#8496" class="Bound">deposits</a> <a id="8547" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8550" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="8562" class="Symbol">(</a><a id="8563" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="8571" href="Ledger.Conway.Utxo.html#8482" class="Bound">kh</a> <a id="8574" href="Ledger.Conway.Utxo.html#8485" class="Bound">p</a><a id="8575" class="Symbol">)</a> <a id="8577" href="Ledger.Conway.Utxo.html#8470" class="Bound">pp</a><a id="8579" class="Symbol">)</a>
<a id="8581" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8600" href="Ledger.Conway.Utxo.html#8600" class="Bound">pp</a> <a id="8603" class="Symbol">(</a><a id="8604" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="8612" href="Ledger.Conway.Utxo.html#8612" class="Bound">c</a> <a id="8614" href="Ledger.Conway.Utxo.html#8614" class="Bound">v</a> <a id="8616" href="Ledger.Conway.Utxo.html#8616" class="Bound">a</a> <a id="8618" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8620" href="Ledger.Conway.Utxo.html#8620" class="Bound">certs</a><a id="8625" class="Symbol">)</a> <a id="8627" href="Ledger.Conway.Utxo.html#8627" class="Bound">deposits</a>
  <a id="8638" class="Symbol">=</a> <a id="8640" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8659" href="Ledger.Conway.Utxo.html#8600" class="Bound">pp</a> <a id="8662" href="Ledger.Conway.Utxo.html#8620" class="Bound">certs</a> <a id="8668" class="Symbol">(</a><a id="8669" href="Ledger.Conway.Utxo.html#8627" class="Bound">deposits</a> <a id="8678" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8681" href="Ledger.Conway.Utxo.html#4164" class="Function">certDeposit</a> <a id="8693" class="Symbol">(</a><a id="8694" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="8702" href="Ledger.Conway.Utxo.html#8612" class="Bound">c</a> <a id="8704" href="Ledger.Conway.Utxo.html#8614" class="Bound">v</a> <a id="8706" href="Ledger.Conway.Utxo.html#8616" class="Bound">a</a><a id="8707" class="Symbol">)</a> <a id="8709" href="Ledger.Conway.Utxo.html#8600" class="Bound">pp</a><a id="8711" class="Symbol">)</a>
<a id="8713" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8732" href="Ledger.Conway.Utxo.html#8732" class="Bound">pp</a> <a id="8735" class="Symbol">(</a><a id="8736" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="8742" href="Ledger.Conway.Utxo.html#8742" class="Bound">c</a> <a id="8744" href="Ledger.Conway.Utxo.html#8744" class="Bound">v</a> <a id="8746" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8748" href="Ledger.Conway.Utxo.html#8748" class="Bound">certs</a><a id="8753" class="Symbol">)</a> <a id="8755" href="Ledger.Conway.Utxo.html#8755" class="Bound">deposits</a>
  <a id="8766" class="Symbol">=</a> <a id="8768" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8787" href="Ledger.Conway.Utxo.html#8732" class="Bound">pp</a> <a id="8790" href="Ledger.Conway.Utxo.html#8748" class="Bound">certs</a> <a id="8796" class="Symbol">(</a><a id="8797" href="Ledger.Conway.Utxo.html#8755" class="Bound">deposits</a> <a id="8806" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8808" href="Ledger.Conway.Utxo.html#4521" class="Function">certRefund</a> <a id="8819" class="Symbol">(</a><a id="8820" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="8826" href="Ledger.Conway.Utxo.html#8742" class="Bound">c</a> <a id="8828" href="Ledger.Conway.Utxo.html#8744" class="Bound">v</a><a id="8829" class="Symbol">)</a><a id="8830" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8831" class="Symbol">)</a>
<a id="8833" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8852" href="Ledger.Conway.Utxo.html#8852" class="Bound">pp</a> <a id="8855" class="Symbol">(</a><a id="8856" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="8866" href="Ledger.Conway.Utxo.html#8866" class="Bound">c</a> <a id="8868" href="Ledger.Conway.Utxo.html#8868" class="Bound">v</a> <a id="8870" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8872" href="Ledger.Conway.Utxo.html#8872" class="Bound">certs</a><a id="8877" class="Symbol">)</a> <a id="8879" href="Ledger.Conway.Utxo.html#8879" class="Bound">deposits</a>
  <a id="8890" class="Symbol">=</a> <a id="8892" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="8911" href="Ledger.Conway.Utxo.html#8852" class="Bound">pp</a> <a id="8914" href="Ledger.Conway.Utxo.html#8872" class="Bound">certs</a> <a id="8920" class="Symbol">(</a><a id="8921" href="Ledger.Conway.Utxo.html#8879" class="Bound">deposits</a> <a id="8930" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8932" href="Ledger.Conway.Utxo.html#4521" class="Function">certRefund</a> <a id="8943" class="Symbol">(</a><a id="8944" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="8954" href="Ledger.Conway.Utxo.html#8866" class="Bound">c</a> <a id="8956" href="Ledger.Conway.Utxo.html#8868" class="Bound">v</a><a id="8957" class="Symbol">)</a><a id="8958" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8959" class="Symbol">)</a>
<a id="8961" href="Ledger.Conway.Utxo.html#8073" class="CatchallClause Function">updateCertDeposits</a><a id="8979" class="CatchallClause"> </a><a id="8980" href="Ledger.Conway.Utxo.html#8980" class="CatchallClause Bound">pp</a><a id="8982" class="CatchallClause"> </a><a id="8983" class="CatchallClause Symbol">(_</a><a id="8985" class="CatchallClause"> </a><a id="8986" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="8987" class="CatchallClause"> </a><a id="8988" href="Ledger.Conway.Utxo.html#8988" class="CatchallClause Bound">certs</a><a id="8993" class="CatchallClause Symbol">)</a><a id="8994" class="CatchallClause"> </a><a id="8995" href="Ledger.Conway.Utxo.html#8995" class="CatchallClause Bound">deposits</a>
  <a id="9006" class="Symbol">=</a> <a id="9008" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="9027" href="Ledger.Conway.Utxo.html#8980" class="Bound">pp</a> <a id="9030" href="Ledger.Conway.Utxo.html#8988" class="Bound">certs</a> <a id="9036" href="Ledger.Conway.Utxo.html#8995" class="Bound">deposits</a>

<a id="updateProposalDeposits"></a><a id="9046" href="Ledger.Conway.Utxo.html#9046" class="Function">updateProposalDeposits</a> <a id="9069" class="Symbol">:</a> <a id="9071" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9076" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a> <a id="9088" class="Symbol">→</a> <a id="9090" href="Ledger.Conway.Transaction.html#962" class="Field">TxId</a> <a id="9095" class="Symbol">→</a> <a id="9097" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="9102" class="Symbol">→</a> <a id="9104" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="9113" class="Symbol">→</a> <a id="9115" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="9124" href="Ledger.Conway.Utxo.html#9046" class="Function">updateProposalDeposits</a> <a id="9147" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="9157" class="Symbol">_</a>     <a id="9163" class="Symbol">_</a>      <a id="9170" href="Ledger.Conway.Utxo.html#9170" class="Bound">deposits</a>  <a id="9180" class="Symbol">=</a> <a id="9182" href="Ledger.Conway.Utxo.html#9170" class="Bound">deposits</a>
<a id="9191" href="Ledger.Conway.Utxo.html#9046" class="Function">updateProposalDeposits</a> <a id="9214" class="Symbol">(_</a> <a id="9217" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9219" href="Ledger.Conway.Utxo.html#9219" class="Bound">ps</a><a id="9221" class="Symbol">)</a>  <a id="9224" href="Ledger.Conway.Utxo.html#9224" class="Bound">txid</a>  <a id="9230" href="Ledger.Conway.Utxo.html#9230" class="Bound">gaDep</a>  <a id="9237" href="Ledger.Conway.Utxo.html#9237" class="Bound">deposits</a>  <a id="9247" class="Symbol">=</a>
  <a id="9251" href="Ledger.Conway.Utxo.html#9046" class="Function">updateProposalDeposits</a> <a id="9274" href="Ledger.Conway.Utxo.html#9219" class="Bound">ps</a> <a id="9277" href="Ledger.Conway.Utxo.html#9224" class="Bound">txid</a> <a id="9282" href="Ledger.Conway.Utxo.html#9230" class="Bound">gaDep</a> <a id="9288" href="Ledger.Conway.Utxo.html#9237" class="Bound">deposits</a>
  <a id="9299" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="9302" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="9304" href="Ledger.Conway.Certs.html#549" class="InductiveConstructor">GovActionDeposit</a> <a id="9321" class="Symbol">(</a><a id="9322" href="Ledger.Conway.Utxo.html#9224" class="Bound">txid</a> <a id="9327" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9329" href="Data.List.Base.html#5044" class="Function">length</a> <a id="9336" href="Ledger.Conway.Utxo.html#9219" class="Bound">ps</a><a id="9338" class="Symbol">)</a> <a id="9340" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9342" href="Ledger.Conway.Utxo.html#9230" class="Bound">gaDep</a> <a id="9348" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>

<a id="updateDeposits"></a><a id="9351" href="Ledger.Conway.Utxo.html#9351" class="Function">updateDeposits</a> <a id="9366" class="Symbol">:</a> <a id="9368" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="9376" class="Symbol">→</a> <a id="9378" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="9385" class="Symbol">→</a> <a id="9387" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="9396" class="Symbol">→</a> <a id="9398" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="9407" href="Ledger.Conway.Utxo.html#9351" class="Function">updateDeposits</a> <a id="9422" href="Ledger.Conway.Utxo.html#9422" class="Bound">pp</a> <a id="9425" href="Ledger.Conway.Utxo.html#9425" class="Bound">txb</a> <a id="9429" class="Symbol">=</a> <a id="9431" href="Ledger.Conway.Utxo.html#8073" class="Function">updateCertDeposits</a> <a id="9450" href="Ledger.Conway.Utxo.html#9422" class="Bound">pp</a> <a id="9453" href="Ledger.Conway.Transaction.html#2996" class="Field">txcerts</a>
                        <a id="9485" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="9487" href="Ledger.Conway.Utxo.html#9046" class="Function">updateProposalDeposits</a> <a id="9510" href="Ledger.Conway.Transaction.html#3094" class="Field">txprop</a> <a id="9517" href="Ledger.Conway.Transaction.html#3330" class="Field">txid</a> <a id="9522" class="Symbol">(</a><a id="9523" href="Ledger.Conway.Utxo.html#9422" class="Bound">pp</a> <a id="9526" class="Symbol">.</a><a id="9527" href="Ledger.Conway.PParams.html#3388" class="Field">govActionDeposit</a><a id="9543" class="Symbol">)</a>


  <a id="9549" class="Keyword">where</a> <a id="9555" class="Keyword">open</a> <a id="9560" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="9567" href="Ledger.Conway.Utxo.html#9425" class="Bound">txb</a>

<a id="proposalDepositsΔ"></a><a id="9572" href="Ledger.Conway.Utxo.html#9572" class="Function">proposalDepositsΔ</a> <a id="9590" class="Symbol">:</a> <a id="9592" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9597" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a> <a id="9609" class="Symbol">→</a> <a id="9611" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="9619" class="Symbol">→</a> <a id="9621" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="9628" class="Symbol">→</a> <a id="9630" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="9639" href="Ledger.Conway.Utxo.html#9572" class="Function">proposalDepositsΔ</a> <a id="9657" href="Ledger.Conway.Utxo.html#9657" class="Bound">props</a> <a id="9663" href="Ledger.Conway.Utxo.html#9663" class="Bound">pp</a> <a id="9666" href="Ledger.Conway.Utxo.html#9666" class="Bound">txb</a> <a id="9670" class="Symbol">=</a> <a id="9672" href="Ledger.Conway.Utxo.html#9046" class="Function">updateProposalDeposits</a> <a id="9695" href="Ledger.Conway.Utxo.html#9657" class="Bound">props</a> <a id="9701" href="Ledger.Conway.Transaction.html#3330" class="Field">txid</a> <a id="9706" class="Symbol">(</a><a id="9707" href="Ledger.Conway.Utxo.html#9663" class="Bound">pp</a> <a id="9710" class="Symbol">.</a><a id="9711" href="Ledger.Conway.PParams.html#3388" class="Field">govActionDeposit</a><a id="9727" class="Symbol">)</a> <a id="9729" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="9733" class="Keyword">where</a> <a id="9739" class="Keyword">open</a> <a id="9744" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="9751" href="Ledger.Conway.Utxo.html#9666" class="Bound">txb</a>



<a id="depositsChange"></a><a id="9758" href="Ledger.Conway.Utxo.html#9758" class="Function">depositsChange</a> <a id="9773" class="Symbol">:</a> <a id="9775" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="9783" class="Symbol">→</a> <a id="9785" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="9792" class="Symbol">→</a> <a id="9794" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="9803" class="Symbol">→</a> <a id="9805" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
<a id="9807" href="Ledger.Conway.Utxo.html#9758" class="Function">depositsChange</a> <a id="9822" href="Ledger.Conway.Utxo.html#9822" class="Bound">pp</a> <a id="9825" href="Ledger.Conway.Utxo.html#9825" class="Bound">txb</a> <a id="9829" href="Ledger.Conway.Utxo.html#9829" class="Bound">deposits</a> <a id="9838" class="Symbol">=</a>
  <a id="9842" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9850" class="Symbol">(</a><a id="9851" href="Ledger.Conway.Utxo.html#9351" class="Function">updateDeposits</a> <a id="9866" href="Ledger.Conway.Utxo.html#9822" class="Bound">pp</a> <a id="9869" href="Ledger.Conway.Utxo.html#9825" class="Bound">txb</a> <a id="9873" href="Ledger.Conway.Utxo.html#9829" class="Bound">deposits</a><a id="9881" class="Symbol">)</a> <a id="9883" href="Interface.HasSubtract.html#209" class="Field Operator">-</a> <a id="9885" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9893" href="Ledger.Conway.Utxo.html#9829" class="Bound">deposits</a>


<a id="9904" class="Keyword">data</a> <a id="inInterval"></a><a id="9909" href="Ledger.Conway.Utxo.html#9909" class="Datatype">inInterval</a> <a id="9920" class="Symbol">(</a><a id="9921" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="9926" class="Symbol">:</a> <a id="9928" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a><a id="9932" class="Symbol">)</a> <a id="9934" class="Symbol">:</a> <a id="9936" class="Symbol">(</a><a id="9937" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9943" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a> <a id="9948" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9950" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9956" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a><a id="9960" class="Symbol">)</a> <a id="9962" class="Symbol">→</a> <a id="9964" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="9969" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="9977" href="Ledger.Conway.Utxo.html#9977" class="InductiveConstructor">both</a>   <a id="9984" class="Symbol">:</a> <a id="9986" class="Symbol">∀</a> <a id="9988" class="Symbol">{</a><a id="9989" href="Ledger.Conway.Utxo.html#9989" class="Bound">l</a> <a id="9991" href="Ledger.Conway.Utxo.html#9991" class="Bound">r</a><a id="9992" class="Symbol">}</a>  <a id="9995" class="Symbol">→</a> <a id="9997" href="Ledger.Conway.Utxo.html#9989" class="Bound">l</a> <a id="9999" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10001" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="10006" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="10008" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="10013" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10015" href="Ledger.Conway.Utxo.html#9991" class="Bound">r</a>  <a id="10018" class="Symbol">→</a>  <a id="10021" href="Ledger.Conway.Utxo.html#9909" class="Datatype">inInterval</a> <a id="10032" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="10037" class="Symbol">(</a><a id="10038" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10043" href="Ledger.Conway.Utxo.html#9989" class="Bound">l</a>   <a id="10047" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10049" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10054" href="Ledger.Conway.Utxo.html#9991" class="Bound">r</a><a id="10055" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="10059" href="Ledger.Conway.Utxo.html#10059" class="InductiveConstructor">lower</a>  <a id="10066" class="Symbol">:</a> <a id="10068" class="Symbol">∀</a> <a id="10070" class="Symbol">{</a><a id="10071" href="Ledger.Conway.Utxo.html#10071" class="Bound">l</a><a id="10072" class="Symbol">}</a>    <a id="10077" class="Symbol">→</a> <a id="10079" href="Ledger.Conway.Utxo.html#10071" class="Bound">l</a> <a id="10081" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10083" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a>             <a id="10100" class="Symbol">→</a>  <a id="10103" href="Ledger.Conway.Utxo.html#9909" class="Datatype">inInterval</a> <a id="10114" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="10119" class="Symbol">(</a><a id="10120" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10125" href="Ledger.Conway.Utxo.html#10071" class="Bound">l</a>   <a id="10129" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10131" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10138" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="10142" href="Ledger.Conway.Utxo.html#10142" class="InductiveConstructor">upper</a>  <a id="10149" class="Symbol">:</a> <a id="10151" class="Symbol">∀</a> <a id="10153" class="Symbol">{</a><a id="10154" href="Ledger.Conway.Utxo.html#10154" class="Bound">r</a><a id="10155" class="Symbol">}</a>    <a id="10160" class="Symbol">→</a> <a id="10162" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="10167" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10169" href="Ledger.Conway.Utxo.html#10154" class="Bound">r</a>             <a id="10183" class="Symbol">→</a>  <a id="10186" href="Ledger.Conway.Utxo.html#9909" class="Datatype">inInterval</a> <a id="10197" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="10202" class="Symbol">(</a><a id="10203" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10212" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10214" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10219" href="Ledger.Conway.Utxo.html#10154" class="Bound">r</a><a id="10220" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="10224" href="Ledger.Conway.Utxo.html#10224" class="InductiveConstructor">none</a>   <a id="10231" class="Symbol">:</a>                                    <a id="10268" href="Ledger.Conway.Utxo.html#9909" class="Datatype">inInterval</a> <a id="10279" href="Ledger.Conway.Utxo.html#9921" class="Bound">slot</a> <a id="10284" class="Symbol">(</a><a id="10285" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10294" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10296" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10303" class="Symbol">)</a>


<a id="10307" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="10377" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="10388" href="Ledger.Conway.Utxo.html#10388" class="Function">Dec-inInterval</a> <a id="10403" class="Symbol">:</a> <a id="10405" href="Ledger.Conway.Utxo.html#9909" class="Datatype">inInterval</a> <a id="10416" href="Class.Decidable.Core.html#773" class="Function Operator">⁇²</a>
  <a id="10421" href="Ledger.Conway.Utxo.html#10388" class="Function">Dec-inInterval</a> <a id="10436" class="Symbol">{</a><a id="10437" href="Ledger.Conway.Utxo.html#10437" class="Bound">slot</a><a id="10441" class="Symbol">}</a> <a id="10443" class="Symbol">{</a><a id="10444" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10449" href="Ledger.Conway.Utxo.html#10449" class="Bound">x</a>  <a id="10452" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10454" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10459" href="Ledger.Conway.Utxo.html#10459" class="Bound">y</a> <a id="10461" class="Symbol">}</a> <a id="10463" class="Symbol">.</a><a id="10464" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10468" class="Keyword">with</a> <a id="10473" href="Ledger.Conway.Utxo.html#10449" class="Bound">x</a> <a id="10475" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10478" href="Ledger.Conway.Utxo.html#10437" class="Bound">slot</a> <a id="10483" class="Symbol">|</a> <a id="10485" href="Ledger.Conway.Utxo.html#10437" class="Bound">slot</a> <a id="10490" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10493" href="Ledger.Conway.Utxo.html#10459" class="Bound">y</a>
  <a id="10497" class="Symbol">...</a> <a id="10501" class="Symbol">|</a> <a id="10503" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10506" href="Ledger.Conway.Utxo.html#10506" class="Bound">¬p₁</a> <a id="10510" class="Symbol">|</a> <a id="10512" class="Symbol">_</a>      <a id="10519" class="Symbol">=</a> <a id="10521" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10524" class="Symbol">λ</a> <a id="10526" class="Keyword">where</a> <a id="10532" class="Symbol">(</a><a id="10533" href="Ledger.Conway.Utxo.html#9977" class="InductiveConstructor">both</a> <a id="10538" class="Symbol">(</a><a id="10539" href="Ledger.Conway.Utxo.html#10539" class="Bound">h₁</a> <a id="10542" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10544" href="Ledger.Conway.Utxo.html#10544" class="Bound">h₂</a><a id="10546" class="Symbol">))</a> <a id="10549" class="Symbol">→</a> <a id="10551" href="Ledger.Conway.Utxo.html#10506" class="Bound">¬p₁</a> <a id="10555" href="Ledger.Conway.Utxo.html#10539" class="Bound">h₁</a>
  <a id="10560" class="Symbol">...</a> <a id="10564" class="Symbol">|</a> <a id="10566" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10570" href="Ledger.Conway.Utxo.html#10570" class="Bound">p₁</a> <a id="10573" class="Symbol">|</a> <a id="10575" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10578" href="Ledger.Conway.Utxo.html#10578" class="Bound">¬p₂</a> <a id="10582" class="Symbol">=</a> <a id="10584" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10587" class="Symbol">λ</a> <a id="10589" class="Keyword">where</a> <a id="10595" class="Symbol">(</a><a id="10596" href="Ledger.Conway.Utxo.html#9977" class="InductiveConstructor">both</a> <a id="10601" class="Symbol">(</a><a id="10602" href="Ledger.Conway.Utxo.html#10602" class="Bound">h₁</a> <a id="10605" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10607" href="Ledger.Conway.Utxo.html#10607" class="Bound">h₂</a><a id="10609" class="Symbol">))</a> <a id="10612" class="Symbol">→</a> <a id="10614" href="Ledger.Conway.Utxo.html#10578" class="Bound">¬p₂</a> <a id="10618" href="Ledger.Conway.Utxo.html#10607" class="Bound">h₂</a>
  <a id="10623" class="Symbol">...</a> <a id="10627" class="Symbol">|</a> <a id="10629" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10633" href="Ledger.Conway.Utxo.html#10633" class="Bound">p₁</a> <a id="10636" class="Symbol">|</a> <a id="10638" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10642" href="Ledger.Conway.Utxo.html#10642" class="Bound">p₂</a> <a id="10645" class="Symbol">=</a> <a id="10647" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10651" class="Symbol">(</a><a id="10652" href="Ledger.Conway.Utxo.html#9977" class="InductiveConstructor">both</a> <a id="10657" class="Symbol">(</a><a id="10658" href="Ledger.Conway.Utxo.html#10633" class="Bound">p₁</a> <a id="10661" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10663" href="Ledger.Conway.Utxo.html#10642" class="Bound">p₂</a><a id="10665" class="Symbol">))</a>
  <a id="10670" href="Ledger.Conway.Utxo.html#10388" class="Function">Dec-inInterval</a> <a id="10685" class="Symbol">{</a><a id="10686" href="Ledger.Conway.Utxo.html#10686" class="Bound">slot</a><a id="10690" class="Symbol">}</a> <a id="10692" class="Symbol">{</a><a id="10693" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10698" href="Ledger.Conway.Utxo.html#10698" class="Bound">x</a>  <a id="10701" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10703" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10710" class="Symbol">}</a> <a id="10712" class="Symbol">.</a><a id="10713" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10717" class="Keyword">with</a> <a id="10722" href="Ledger.Conway.Utxo.html#10698" class="Bound">x</a> <a id="10724" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10727" href="Ledger.Conway.Utxo.html#10686" class="Bound">slot</a>
  <a id="10734" class="Symbol">...</a> <a id="10738" class="Symbol">|</a> <a id="10740" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10743" href="Ledger.Conway.Utxo.html#10743" class="Bound">¬p</a> <a id="10746" class="Symbol">=</a> <a id="10748" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10752" class="Symbol">(λ</a> <a id="10755" class="Keyword">where</a> <a id="10761" class="Symbol">(</a><a id="10762" href="Ledger.Conway.Utxo.html#10059" class="InductiveConstructor">lower</a> <a id="10768" href="Ledger.Conway.Utxo.html#10768" class="Bound">h</a><a id="10769" class="Symbol">)</a> <a id="10771" class="Symbol">→</a> <a id="10773" href="Ledger.Conway.Utxo.html#10743" class="Bound">¬p</a> <a id="10776" href="Ledger.Conway.Utxo.html#10768" class="Bound">h</a><a id="10777" class="Symbol">)</a>
  <a id="10781" class="Symbol">...</a> <a id="10785" class="Symbol">|</a> <a id="10787" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10791" href="Ledger.Conway.Utxo.html#10791" class="Bound">p</a> <a id="10793" class="Symbol">=</a> <a id="10795" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10799" class="Symbol">(</a><a id="10800" href="Ledger.Conway.Utxo.html#10059" class="InductiveConstructor">lower</a> <a id="10806" href="Ledger.Conway.Utxo.html#10791" class="Bound">p</a><a id="10807" class="Symbol">)</a>
  <a id="10811" href="Ledger.Conway.Utxo.html#10388" class="Function">Dec-inInterval</a> <a id="10826" class="Symbol">{</a><a id="10827" href="Ledger.Conway.Utxo.html#10827" class="Bound">slot</a><a id="10831" class="Symbol">}</a> <a id="10833" class="Symbol">{</a><a id="10834" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10842" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10844" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10849" href="Ledger.Conway.Utxo.html#10849" class="Bound">x</a> <a id="10851" class="Symbol">}</a> <a id="10853" class="Symbol">.</a><a id="10854" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10858" class="Keyword">with</a> <a id="10863" href="Ledger.Conway.Utxo.html#10827" class="Bound">slot</a> <a id="10868" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10871" href="Ledger.Conway.Utxo.html#10849" class="Bound">x</a>
  <a id="10875" class="Symbol">...</a> <a id="10879" class="Symbol">|</a> <a id="10881" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10884" href="Ledger.Conway.Utxo.html#10884" class="Bound">¬p</a> <a id="10887" class="Symbol">=</a> <a id="10889" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10893" class="Symbol">(λ</a> <a id="10896" class="Keyword">where</a> <a id="10902" class="Symbol">(</a><a id="10903" href="Ledger.Conway.Utxo.html#10142" class="InductiveConstructor">upper</a> <a id="10909" href="Ledger.Conway.Utxo.html#10909" class="Bound">h</a><a id="10910" class="Symbol">)</a> <a id="10912" class="Symbol">→</a> <a id="10914" href="Ledger.Conway.Utxo.html#10884" class="Bound">¬p</a> <a id="10917" href="Ledger.Conway.Utxo.html#10909" class="Bound">h</a><a id="10918" class="Symbol">)</a>
  <a id="10922" class="Symbol">...</a> <a id="10926" class="Symbol">|</a> <a id="10928" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10932" href="Ledger.Conway.Utxo.html#10932" class="Bound">p</a> <a id="10934" class="Symbol">=</a> <a id="10936" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10940" class="Symbol">(</a><a id="10941" href="Ledger.Conway.Utxo.html#10142" class="InductiveConstructor">upper</a> <a id="10947" href="Ledger.Conway.Utxo.html#10932" class="Bound">p</a><a id="10948" class="Symbol">)</a>
  <a id="10952" href="Ledger.Conway.Utxo.html#10388" class="Function">Dec-inInterval</a> <a id="10967" class="Symbol">{</a><a id="10968" href="Ledger.Conway.Utxo.html#10968" class="Bound">slot</a><a id="10972" class="Symbol">}</a> <a id="10974" class="Symbol">{</a><a id="10975" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10983" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10985" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10992" class="Symbol">}</a> <a id="10994" class="Symbol">.</a><a id="10995" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10999" class="Symbol">=</a> <a id="11001" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="11005" href="Ledger.Conway.Utxo.html#10224" class="InductiveConstructor">none</a>

  <a id="HasCoin-UTxOState"></a><a id="11013" href="Ledger.Conway.Utxo.html#11013" class="Function">HasCoin-UTxOState</a> <a id="11031" class="Symbol">:</a> <a id="11033" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="11041" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="11053" href="Ledger.Conway.Utxo.html#11013" class="Function">HasCoin-UTxOState</a> <a id="11071" class="Symbol">.</a><a id="11072" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11080" href="Ledger.Conway.Utxo.html#11080" class="Bound">s</a> <a id="11082" class="Symbol">=</a> <a id="11084" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11092" class="Symbol">(</a><a id="11093" href="Ledger.Conway.Utxo.html#2811" class="Field">UTxOState.utxo</a> <a id="11108" href="Ledger.Conway.Utxo.html#11080" class="Bound">s</a><a id="11109" class="Symbol">)</a>
                               <a id="11142" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11144" class="Symbol">(</a><a id="11145" href="Ledger.Conway.Utxo.html#2833" class="Field">UTxOState.fees</a> <a id="11160" href="Ledger.Conway.Utxo.html#11080" class="Bound">s</a><a id="11161" class="Symbol">)</a>
                               <a id="11194" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11196" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11204" class="Symbol">(</a><a id="11205" href="Ledger.Conway.Utxo.html#2855" class="Field">UTxOState.deposits</a> <a id="11224" href="Ledger.Conway.Utxo.html#11080" class="Bound">s</a><a id="11225" class="Symbol">)</a>
                               <a id="11258" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11260" href="Ledger.Conway.Utxo.html#2881" class="Field">UTxOState.donations</a> <a id="11280" href="Ledger.Conway.Utxo.html#11080" class="Bound">s</a>

<a id="coinPolicies"></a><a id="11283" href="Ledger.Conway.Utxo.html#11283" class="Function">coinPolicies</a> <a id="11296" class="Symbol">:</a> <a id="11298" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="11300" href="Ledger.Conway.Crypto.html#1173" class="Function">ScriptHash</a>
<a id="11311" href="Ledger.Conway.Utxo.html#11283" class="Function">coinPolicies</a> <a id="11324" class="Symbol">=</a> <a id="11326" href="Ledger.Conway.TokenAlgebra.html#909" class="Function">policies</a> <a id="11335" class="Symbol">(</a><a id="11336" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="11343" class="Number">1</a><a id="11344" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="11347" href="Ledger.Conway.Utxo.html#11347" class="Function">isAdaOnly</a> <a id="11357" class="Symbol">:</a> <a id="11359" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a> <a id="11365" class="Symbol">→</a> <a id="11367" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11372" href="Ledger.Conway.Utxo.html#11347" class="Function">isAdaOnly</a> <a id="11382" href="Ledger.Conway.Utxo.html#11382" class="Bound">v</a> <a id="11384" class="Symbol">=</a> <a id="11386" href="Ledger.Conway.TokenAlgebra.html#909" class="Function">policies</a> <a id="11395" href="Ledger.Conway.Utxo.html#11382" class="Bound">v</a> <a id="11397" href="Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="11400" href="Ledger.Conway.Utxo.html#11283" class="Function">coinPolicies</a>


<a id="feesOK"></a><a id="11415" href="Ledger.Conway.Utxo.html#11415" class="Function">feesOK</a> <a id="11422" class="Symbol">:</a> <a id="11424" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="11432" class="Symbol">→</a> <a id="11434" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="11437" class="Symbol">→</a> <a id="11439" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="11444" class="Symbol">→</a> <a id="11446" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11451" href="Ledger.Conway.Utxo.html#11415" class="Function">feesOK</a> <a id="11458" href="Ledger.Conway.Utxo.html#11458" class="Bound">pp</a> <a id="11461" href="Ledger.Conway.Utxo.html#11461" class="Bound">tx</a> <a id="11464" href="Ledger.Conway.Utxo.html#11464" class="Bound">utxo</a> <a id="11469" class="Symbol">=</a> <a id="11471" class="Symbol">(</a> <a id="11473" href="Ledger.Conway.Utxo.html#3866" class="Function">minfee</a> <a id="11480" href="Ledger.Conway.Utxo.html#11458" class="Bound">pp</a> <a id="11483" href="Ledger.Conway.Utxo.html#11464" class="Bound">utxo</a> <a id="11488" href="Ledger.Conway.Utxo.html#11461" class="Bound">tx</a> <a id="11491" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="11493" href="Ledger.Conway.Transaction.html#2892" class="Function">txfee</a> <a id="11499" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11501" class="Symbol">(</a><a id="11502" href="Ledger.Conway.Transaction.html#4185" class="Function">txrdmrs</a> <a id="11510" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="11512" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11514" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                      <a id="11538" class="Symbol">→</a> <a id="11540" class="Symbol">(</a> <a id="11542" href="Axiom.Set.html#9724" class="Function">All</a> <a id="11546" class="Symbol">(λ</a> <a id="11549" class="Symbol">(</a><a id="11550" href="Ledger.Conway.Utxo.html#11550" class="Bound">addr</a> <a id="11555" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11557" class="Symbol">_)</a> <a id="11560" class="Symbol">→</a> <a id="11562" href="Ledger.Conway.Address.html#2587" class="Function">isVKeyAddr</a> <a id="11573" href="Ledger.Conway.Utxo.html#11550" class="Bound">addr</a><a id="11577" class="Symbol">)</a> <a id="11579" href="Ledger.Conway.Utxo.html#11909" class="Function">collateralRange</a>
                        <a id="11619" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11621" href="Ledger.Conway.Utxo.html#11347" class="Function">isAdaOnly</a> <a id="11631" href="Ledger.Conway.Utxo.html#11983" class="Function">bal</a>
                        <a id="11659" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11661" href="Ledger.Conway.TokenAlgebra.html#819" class="Function">coin</a> <a id="11666" href="Ledger.Conway.Utxo.html#11983" class="Function">bal</a> <a id="11670" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11672" class="Number">100</a> <a id="11676" href="Class.HasOrder.Core.html#822" class="Function Operator">≥</a> <a id="11678" href="Ledger.Conway.Transaction.html#2892" class="Function">txfee</a> <a id="11684" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11686" href="Ledger.Conway.Utxo.html#11458" class="Bound">pp</a> <a id="11689" class="Symbol">.</a><a id="11690" href="Ledger.Conway.PParams.html#2964" class="Field">collateralPercentage</a>
                        <a id="11735" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11737" href="Ledger.Conway.Transaction.html#3358" class="Function">collateral</a> <a id="11748" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11750" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                        <a id="11776" class="Symbol">)</a>
                      <a id="11800" class="Symbol">)</a>
                    <a id="11822" class="Symbol">)</a>
  <a id="11826" class="Keyword">where</a>
    <a id="11836" class="Keyword">open</a> <a id="11841" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="11844" href="Ledger.Conway.Utxo.html#11461" class="Bound">tx</a><a id="11846" class="Symbol">;</a> <a id="11848" class="Keyword">open</a> <a id="11853" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="11860" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="11864" class="Symbol">;</a> <a id="11866" class="Keyword">open</a> <a id="11871" href="Ledger.Conway.Transaction.html#4056" class="Module">TxWitnesses</a> <a id="11883" href="Ledger.Conway.Transaction.html#4362" class="Function">wits</a><a id="11887" class="Symbol">;</a> <a id="11889" class="Keyword">open</a> <a id="11894" href="Ledger.Conway.PParams.html#1721" class="Module">PParams</a> <a id="11902" href="Ledger.Conway.Utxo.html#11458" class="Bound">pp</a>
    <a id="11909" href="Ledger.Conway.Utxo.html#11909" class="Function">collateralRange</a>  <a id="11926" class="Symbol">=</a> <a id="11928" href="Class.IsSet.html#959" class="Function">range</a>    <a id="11937" class="Symbol">((</a><a id="11939" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="11949" href="Ledger.Conway.Transaction.html#5160" class="Function">txOutHash</a> <a id="11959" href="Ledger.Conway.Utxo.html#11464" class="Bound">utxo</a><a id="11963" class="Symbol">)</a> <a id="11965" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="11967" href="Ledger.Conway.Transaction.html#3358" class="Function">collateral</a><a id="11977" class="Symbol">)</a>
    <a id="11983" href="Ledger.Conway.Utxo.html#11983" class="Function">bal</a>              <a id="12000" class="Symbol">=</a> <a id="12002" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a>  <a id="12011" class="Symbol">(</a><a id="12012" href="Ledger.Conway.Utxo.html#11464" class="Bound">utxo</a> <a id="12017" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="12019" href="Ledger.Conway.Transaction.html#3358" class="Function">collateral</a><a id="12029" class="Symbol">)</a>


<a id="12033" class="Keyword">module</a> <a id="12040" href="Ledger.Conway.Utxo.html#12040" class="Module">_</a> <a id="12042" class="Symbol">(</a><a id="12043" class="Keyword">let</a> <a id="12047" class="Keyword">open</a> <a id="12052" href="Ledger.Conway.Utxo.html#2747" class="Module">UTxOState</a><a id="12061" class="Symbol">;</a> <a id="12063" class="Keyword">open</a> <a id="12068" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a><a id="12074" class="Symbol">)</a> <a id="12076" class="Keyword">where</a>


  <a id="12086" href="Ledger.Conway.Utxo.html#12086" class="Function">depositRefunds</a> <a id="12101" class="Symbol">:</a> <a id="12103" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12111" class="Symbol">→</a> <a id="12113" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12123" class="Symbol">→</a> <a id="12125" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12132" class="Symbol">→</a> <a id="12134" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12141" href="Ledger.Conway.Utxo.html#12086" class="Function">depositRefunds</a> <a id="12156" href="Ledger.Conway.Utxo.html#12156" class="Bound">pp</a> <a id="12159" href="Ledger.Conway.Utxo.html#12159" class="Bound">st</a> <a id="12162" href="Ledger.Conway.Utxo.html#12162" class="Bound">txb</a> <a id="12166" class="Symbol">=</a> <a id="12168" href="Prelude.html#3244" class="Function">negPart</a> <a id="12176" class="Symbol">(</a><a id="12177" href="Ledger.Conway.Utxo.html#9758" class="Function">depositsChange</a> <a id="12192" href="Ledger.Conway.Utxo.html#12156" class="Bound">pp</a> <a id="12195" href="Ledger.Conway.Utxo.html#12162" class="Bound">txb</a> <a id="12199" class="Symbol">(</a><a id="12200" href="Ledger.Conway.Utxo.html#12159" class="Bound">st</a> <a id="12203" class="Symbol">.</a><a id="12204" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="12212" class="Symbol">))</a>

  <a id="12218" href="Ledger.Conway.Utxo.html#12218" class="Function">newDeposits</a> <a id="12230" class="Symbol">:</a> <a id="12232" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12240" class="Symbol">→</a> <a id="12242" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12252" class="Symbol">→</a> <a id="12254" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12261" class="Symbol">→</a> <a id="12263" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12270" href="Ledger.Conway.Utxo.html#12218" class="Function">newDeposits</a> <a id="12282" href="Ledger.Conway.Utxo.html#12282" class="Bound">pp</a> <a id="12285" href="Ledger.Conway.Utxo.html#12285" class="Bound">st</a> <a id="12288" href="Ledger.Conway.Utxo.html#12288" class="Bound">txb</a> <a id="12292" class="Symbol">=</a> <a id="12294" href="Prelude.html#3167" class="Function">posPart</a> <a id="12302" class="Symbol">(</a><a id="12303" href="Ledger.Conway.Utxo.html#9758" class="Function">depositsChange</a> <a id="12318" href="Ledger.Conway.Utxo.html#12282" class="Bound">pp</a> <a id="12321" href="Ledger.Conway.Utxo.html#12288" class="Bound">txb</a> <a id="12325" class="Symbol">(</a><a id="12326" href="Ledger.Conway.Utxo.html#12285" class="Bound">st</a> <a id="12329" class="Symbol">.</a><a id="12330" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="12338" class="Symbol">))</a>

  <a id="12344" href="Ledger.Conway.Utxo.html#12344" class="Function">consumed</a> <a id="12353" class="Symbol">:</a> <a id="12355" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12363" class="Symbol">→</a> <a id="12365" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12375" class="Symbol">→</a> <a id="12377" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12384" class="Symbol">→</a> <a id="12386" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a>
  <a id="12394" href="Ledger.Conway.Utxo.html#12344" class="Function">consumed</a> <a id="12403" href="Ledger.Conway.Utxo.html#12403" class="Bound">pp</a> <a id="12406" href="Ledger.Conway.Utxo.html#12406" class="Bound">st</a> <a id="12409" href="Ledger.Conway.Utxo.html#12409" class="Bound">txb</a>
    <a id="12417" class="Symbol">=</a>  <a id="12420" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="12428" class="Symbol">(</a><a id="12429" href="Ledger.Conway.Utxo.html#12406" class="Bound">st</a> <a id="12432" class="Symbol">.</a><a id="12433" href="Ledger.Conway.Utxo.html#2811" class="Field">utxo</a> <a id="12438" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="12440" href="Ledger.Conway.Utxo.html#12409" class="Bound">txb</a> <a id="12444" class="Symbol">.</a><a id="12445" href="Ledger.Conway.Transaction.html#2798" class="Field">txins</a><a id="12450" class="Symbol">)</a>
    <a id="12456" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12459" href="Ledger.Conway.Utxo.html#12409" class="Bound">txb</a> <a id="12463" class="Symbol">.</a><a id="12464" href="Ledger.Conway.Transaction.html#2920" class="Field">mint</a>
    <a id="12473" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12476" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12483" class="Symbol">(</a><a id="12484" href="Ledger.Conway.Utxo.html#12086" class="Function">depositRefunds</a> <a id="12499" href="Ledger.Conway.Utxo.html#12403" class="Bound">pp</a> <a id="12502" href="Ledger.Conway.Utxo.html#12406" class="Bound">st</a> <a id="12505" href="Ledger.Conway.Utxo.html#12409" class="Bound">txb</a><a id="12508" class="Symbol">)</a>
    <a id="12514" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12517" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12524" class="Symbol">(</a><a id="12525" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="12533" class="Symbol">(</a><a id="12534" href="Ledger.Conway.Utxo.html#12409" class="Bound">txb</a> <a id="12538" class="Symbol">.</a><a id="12539" href="Ledger.Conway.Transaction.html#3030" class="Field">txwdrls</a><a id="12546" class="Symbol">))</a>

  <a id="12552" href="Ledger.Conway.Utxo.html#12552" class="Function">produced</a> <a id="12561" class="Symbol">:</a> <a id="12563" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12571" class="Symbol">→</a> <a id="12573" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12583" class="Symbol">→</a> <a id="12585" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12592" class="Symbol">→</a> <a id="12594" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a>
  <a id="12602" href="Ledger.Conway.Utxo.html#12552" class="Function">produced</a> <a id="12611" href="Ledger.Conway.Utxo.html#12611" class="Bound">pp</a> <a id="12614" href="Ledger.Conway.Utxo.html#12614" class="Bound">st</a> <a id="12617" href="Ledger.Conway.Utxo.html#12617" class="Bound">txb</a> <a id="12621" class="Symbol">=</a> <a id="12623" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="12631" class="Symbol">(</a><a id="12632" href="Ledger.Conway.Utxo.html#3525" class="Function">outs</a> <a id="12637" href="Ledger.Conway.Utxo.html#12617" class="Bound">txb</a><a id="12640" class="Symbol">)</a>
                     <a id="12663" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12665" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12672" class="Symbol">(</a><a id="12673" href="Ledger.Conway.Utxo.html#12617" class="Bound">txb</a> <a id="12677" class="Symbol">.</a><a id="12678" href="Ledger.Conway.Transaction.html#2892" class="Field">txfee</a><a id="12683" class="Symbol">)</a>
                     <a id="12706" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12708" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12715" class="Symbol">(</a><a id="12716" href="Ledger.Conway.Utxo.html#12218" class="Function">newDeposits</a> <a id="12728" href="Ledger.Conway.Utxo.html#12611" class="Bound">pp</a> <a id="12731" href="Ledger.Conway.Utxo.html#12614" class="Bound">st</a> <a id="12734" href="Ledger.Conway.Utxo.html#12617" class="Bound">txb</a><a id="12737" class="Symbol">)</a>
                     <a id="12760" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12762" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12769" class="Symbol">(</a><a id="12770" href="Ledger.Conway.Utxo.html#12617" class="Bound">txb</a> <a id="12774" class="Symbol">.</a><a id="12775" href="Ledger.Conway.Transaction.html#3134" class="Field">txdonation</a><a id="12785" class="Symbol">)</a>


<a id="12789" class="Keyword">open</a> <a id="12794" href="Ledger.Conway.PParams.html#1721" class="Module">PParams</a>

<a id="12803" class="Keyword">private</a> <a id="12811" class="Keyword">variable</a>
  <a id="12822" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="12824" class="Symbol">:</a> <a id="12826" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>
  <a id="12836" href="Ledger.Conway.Utxo.html#12836" class="Generalizable">s</a> <a id="12838" href="Ledger.Conway.Utxo.html#12838" class="Generalizable">s&#39;</a> <a id="12841" class="Symbol">:</a> <a id="12843" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="12855" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="12858" class="Symbol">:</a> <a id="12860" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a>
  <a id="12865" href="Ledger.Conway.Utxo.html#12865" class="Generalizable">utxo</a> <a id="12870" class="Symbol">:</a> <a id="12872" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
  <a id="12879" href="Ledger.Conway.Utxo.html#12879" class="Generalizable">fees</a> <a id="12884" href="Ledger.Conway.Utxo.html#12884" class="Generalizable">donations</a> <a id="12894" class="Symbol">:</a> <a id="12896" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12903" href="Ledger.Conway.Utxo.html#12903" class="Generalizable">deposits</a> <a id="12912" class="Symbol">:</a> <a id="12914" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>

<a id="12924" class="Keyword">open</a> <a id="12929" href="Ledger.Conway.Utxo.html#2395" class="Module">UTxOEnv</a>

<a id="12938" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="12943" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="12958" class="Symbol">:</a> <a id="12960" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="12968" class="Symbol">→</a> <a id="12970" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12980" class="Symbol">→</a> <a id="12982" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="12985" class="Symbol">→</a> <a id="12987" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12997" class="Symbol">→</a> <a id="12999" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="13004" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-Yes"></a><a id="13014" href="Ledger.Conway.Utxo.html#13014" class="InductiveConstructor">Scripts-Yes</a> <a id="13026" class="Symbol">:</a>
    <a id="13032" class="Keyword">let</a>  <a id="13037" href="Ledger.Conway.Utxo.html#13037" class="Bound">pp</a>         <a id="13048" class="Symbol">=</a> <a id="13050" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="13052" class="Symbol">.</a><a id="13053" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>


         <a id="13072" class="Keyword">open</a> <a id="13077" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="13080" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13083" class="Keyword">renaming</a> <a id="13092" class="Symbol">(</a><a id="13093" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="13098" class="Symbol">to</a> <a id="13101" class="Field">txb</a><a id="13104" class="Symbol">);</a> <a id="13107" class="Keyword">open</a> <a id="13112" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="13119" href="Ledger.Conway.Utxo.html#13101" class="Function">txb</a>


         <a id="13134" href="Ledger.Conway.Utxo.html#13134" class="Bound">sLst</a>       <a id="13145" class="Symbol">=</a> <a id="13147" href="Ledger.Conway.ScriptValidation.html#5893" class="Function">collectPhaseTwoScriptInputs</a> <a id="13175" href="Ledger.Conway.Utxo.html#13037" class="Bound">pp</a> <a id="13178" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13181" href="Ledger.Conway.Utxo.html#12865" class="Generalizable">utxo</a>
      <a id="13192" class="Keyword">in</a>
        <a id="13203" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="13205" href="Ledger.Conway.Utxo.html#4699" class="Datatype">ValidCertDeposits</a> <a id="13223" href="Ledger.Conway.Utxo.html#13037" class="Bound">pp</a> <a id="13226" href="Ledger.Conway.Utxo.html#12903" class="Generalizable">deposits</a> <a id="13235" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a>
        <a id="13251" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="13253" href="Ledger.Conway.ScriptValidation.html#6281" class="Function">evalScripts</a> <a id="13265" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13268" href="Ledger.Conway.Utxo.html#13134" class="Bound">sLst</a> <a id="13273" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13275" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a>
        <a id="13291" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="13293" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a> <a id="13301" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13303" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
          <a id="13318" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
          <a id="13361" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="13363" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Utxo.html#12865}{\htmlId{13367}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12879}{\htmlId{13374}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12903}{\htmlId{13381}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12884}{\htmlId{13392}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="13404" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">⇀⦇</a> <a id="13407" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13410" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} (\,\href{Ledger.Conway.Utxo.html#12865}{\htmlId{13421}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13426}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Transaction.html#2798}{\htmlId{13428}{\htmlClass{Function}{\text{txins}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13434}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,) \,\href{Axiom.Set.Map.html#6320}{\htmlId{13437}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, (\,\href{Ledger.Conway.Utxo.html#3525}{\htmlId{13441}{\htmlClass{Function}{\text{outs}}}}\, \,\href{Ledger.Conway.Utxo.html#13101}{\htmlId{13446}{\htmlClass{Function}{\text{txb}}}}\,) \\ \,\href{Ledger.Conway.Utxo.html#12879}{\htmlId{13453}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{13458}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Transaction.html#2892}{\htmlId{13460}{\htmlClass{Function}{\text{txfee}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#9351}{\htmlId{13468}{\htmlClass{Function}{\text{updateDeposits}}}}\, \,\href{Ledger.Conway.Utxo.html#13037}{\htmlId{13483}{\htmlClass{Bound}{\text{pp}}}}\, \,\href{Ledger.Conway.Utxo.html#13101}{\htmlId{13486}{\htmlClass{Function}{\text{txb}}}}\, \,\href{Ledger.Conway.Utxo.html#12903}{\htmlId{13490}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12884}{\htmlId{13501}{\htmlClass{Generalizable}{\text{donations}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{13511}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Transaction.html#3134}{\htmlId{13513}{\htmlClass{Function}{\text{txdonation}}}}\, \end{pmatrix}$</a>
  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-No"></a><a id="13528" href="Ledger.Conway.Utxo.html#13528" class="InductiveConstructor">Scripts-No</a> <a id="13539" class="Symbol">:</a>
    <a id="13545" class="Keyword">let</a>  <a id="13550" href="Ledger.Conway.Utxo.html#13550" class="Bound">pp</a>         <a id="13561" class="Symbol">=</a> <a id="13563" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="13565" class="Symbol">.</a><a id="13566" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>


         <a id="13585" class="Keyword">open</a> <a id="13590" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="13593" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13596" class="Keyword">renaming</a> <a id="13605" class="Symbol">(</a><a id="13606" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="13611" class="Symbol">to</a> <a id="13614" class="Field">txb</a><a id="13617" class="Symbol">);</a> <a id="13620" class="Keyword">open</a> <a id="13625" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="13632" href="Ledger.Conway.Utxo.html#13614" class="Function">txb</a>


         <a id="13647" href="Ledger.Conway.Utxo.html#13647" class="Bound">sLst</a>       <a id="13658" class="Symbol">=</a> <a id="13660" href="Ledger.Conway.ScriptValidation.html#5893" class="Function">collectPhaseTwoScriptInputs</a> <a id="13688" href="Ledger.Conway.Utxo.html#13550" class="Bound">pp</a> <a id="13691" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13694" href="Ledger.Conway.Utxo.html#12865" class="Generalizable">utxo</a>
      <a id="13705" class="Keyword">in</a>
        <a id="13716" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="13718" href="Ledger.Conway.ScriptValidation.html#6281" class="Function">evalScripts</a> <a id="13730" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13733" href="Ledger.Conway.Utxo.html#13647" class="Bound">sLst</a> <a id="13738" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13740" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a>
        <a id="13756" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="13758" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a> <a id="13766" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13768" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
          <a id="13784" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
          <a id="13827" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="13829" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Utxo.html#12865}{\htmlId{13833}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12879}{\htmlId{13840}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12903}{\htmlId{13847}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12884}{\htmlId{13858}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="13870" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">⇀⦇</a> <a id="13873" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="13876" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Utxo.html#12865}{\htmlId{13886}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13891}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Transaction.html#3358}{\htmlId{13893}{\htmlClass{Function}{\text{collateral}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13904}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12879}{\htmlId{13908}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{13913}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Utxo.html#3685}{\htmlId{13915}{\htmlClass{Function}{\text{cbalance}}}}\, (\,\href{Ledger.Conway.Utxo.html#12865}{\htmlId{13925}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#10678}{\htmlId{13930}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Transaction.html#3358}{\htmlId{13932}{\htmlClass{Function}{\text{collateral}}}}\,) \\ \,\href{Ledger.Conway.Utxo.html#12903}{\htmlId{13946}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12884}{\htmlId{13957}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a>


<a id="13971" class="Keyword">unquoteDecl</a> <a id="Scripts-Yes-premises"></a><a id="13983" href="Ledger.Conway.Utxo.html#13983" class="Function">Scripts-Yes-premises</a> <a id="14004" class="Symbol">=</a> <a id="14006" href="iog-prelude.Tactic.Premises.html#2289" class="Function">genPremises</a> <a id="14018" href="Ledger.Conway.Utxo.html#13983" class="Function">Scripts-Yes-premises</a> <a id="14039" class="Symbol">(</a><a id="14040" class="Keyword">quote</a> <a id="14046" href="Ledger.Conway.Utxo.html#13014" class="InductiveConstructor">Scripts-Yes</a><a id="14057" class="Symbol">)</a>
<a id="14059" class="Keyword">unquoteDecl</a> <a id="Scripts-No-premises"></a><a id="14071" href="Ledger.Conway.Utxo.html#14071" class="Function">Scripts-No-premises</a>  <a id="14092" class="Symbol">=</a> <a id="14094" href="iog-prelude.Tactic.Premises.html#2289" class="Function">genPremises</a> <a id="14106" href="Ledger.Conway.Utxo.html#14071" class="Function">Scripts-No-premises</a>  <a id="14127" class="Symbol">(</a><a id="14128" class="Keyword">quote</a> <a id="14134" href="Ledger.Conway.Utxo.html#13528" class="InductiveConstructor">Scripts-No</a><a id="14144" class="Symbol">)</a>

<a id="14147" class="Keyword">data</a> <a id="14152" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="14166" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO-inductive"></a><a id="14176" href="Ledger.Conway.Utxo.html#14176" class="InductiveConstructor">UTXO-inductive</a> <a id="14191" class="Symbol">:</a>
    <a id="14197" class="Keyword">let</a> <a id="14201" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a>        <a id="14211" class="Symbol">=</a> <a id="14213" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="14215" class="Symbol">.</a><a id="14216" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>
        <a id="14232" href="Ledger.Conway.Utxo.html#14232" class="Bound">slot</a>      <a id="14242" class="Symbol">=</a> <a id="14244" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="14246" class="Symbol">.</a><a id="14247" href="Ledger.Conway.Utxo.html#2428" class="Field">slot</a>
        <a id="14260" href="Ledger.Conway.Utxo.html#14260" class="Bound">treasury</a>  <a id="14270" class="Symbol">=</a> <a id="14272" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="14274" class="Symbol">.</a><a id="14275" href="Ledger.Conway.Utxo.html#2473" class="Field">treasury</a>
        <a id="14292" href="Ledger.Conway.Utxo.html#14292" class="Bound">utxo</a>      <a id="14302" class="Symbol">=</a> <a id="14304" href="Ledger.Conway.Utxo.html#12836" class="Generalizable">s</a> <a id="14306" class="Symbol">.</a><a id="14307" href="Ledger.Conway.Utxo.html#2811" class="Field">UTxOState.utxo</a>


        <a id="14332" class="Keyword">open</a> <a id="14337" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="14340" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="14343" class="Keyword">renaming</a> <a id="14352" class="Symbol">(</a><a id="14353" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="14358" class="Symbol">to</a> <a id="14361" class="Field">txb</a><a id="14364" class="Symbol">);</a> <a id="14367" class="Keyword">open</a> <a id="14372" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="14379" href="Ledger.Conway.Utxo.html#14361" class="Function">txb</a>


        <a id="14393" href="Ledger.Conway.Utxo.html#14393" class="Bound">txoutsʰ</a>   <a id="14403" class="Symbol">=</a> <a id="14405" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="14415" href="Ledger.Conway.Transaction.html#5160" class="Function">txOutHash</a> <a id="14425" href="Ledger.Conway.Transaction.html#2858" class="Function">txouts</a>
        <a id="14440" href="Ledger.Conway.Utxo.html#14440" class="Bound">overhead</a>  <a id="14450" class="Symbol">=</a> <a id="14452" class="Number">160</a>
    <a id="14460" class="Keyword">in</a>
    <a id="14467" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="14469" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a> <a id="14475" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14477" href="Class.HasEmptySet.html#287" class="Field">∅</a>                              <a id="14508" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14510" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a> <a id="14516" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="14518" href="Ledger.Conway.Transaction.html#2828" class="Function">refInputs</a> <a id="14528" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="14530" href="Class.IsSet.html#916" class="Function">dom</a> <a id="14534" href="Ledger.Conway.Utxo.html#14292" class="Bound">utxo</a>
    <a id="14543" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14545" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a> <a id="14551" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="14553" href="Ledger.Conway.Transaction.html#2828" class="Function">refInputs</a> <a id="14563" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14565" href="Class.HasEmptySet.html#287" class="Field">∅</a>                  <a id="14584" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14586" href="Ledger.Conway.Utxo.html#9909" class="Datatype">inInterval</a> <a id="14597" href="Ledger.Conway.Utxo.html#14232" class="Bound">slot</a> <a id="14602" href="Ledger.Conway.Transaction.html#2949" class="Function">txvldt</a>
    <a id="14613" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14615" href="Ledger.Conway.Utxo.html#11415" class="Function">feesOK</a> <a id="14622" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a> <a id="14625" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="14628" href="Ledger.Conway.Utxo.html#14292" class="Bound">utxo</a>                      <a id="14654" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14656" href="Ledger.Conway.Utxo.html#12344" class="Function">consumed</a> <a id="14665" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a> <a id="14668" href="Ledger.Conway.Utxo.html#12836" class="Generalizable">s</a> <a id="14670" href="Ledger.Conway.Utxo.html#14361" class="Function">txb</a> <a id="14674" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14676" href="Ledger.Conway.Utxo.html#12552" class="Function">produced</a> <a id="14685" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a> <a id="14688" href="Ledger.Conway.Utxo.html#12836" class="Generalizable">s</a> <a id="14690" href="Ledger.Conway.Utxo.html#14361" class="Function">txb</a>
    <a id="14698" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14700" href="Ledger.Conway.TokenAlgebra.html#819" class="Function">coin</a> <a id="14705" href="Ledger.Conway.Transaction.html#2920" class="Function">mint</a> <a id="14710" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14712" class="Number">0</a>                          <a id="14739" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14741" href="Ledger.Conway.Transaction.html#3305" class="Function">txsize</a> <a id="14748" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14750" href="Ledger.Conway.PParams.html#1802" class="Field">maxTxSize</a> <a id="14760" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a>
    <a id="14767" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14769" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="14784" href="Ledger.Conway.Utxo.html#14292" class="Bound">utxo</a> <a id="14789" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="14792" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14794" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a> <a id="14797" class="Symbol">.</a><a id="14798" href="Ledger.Conway.PParams.html#2591" class="Field">maxRefScriptSizePerTx</a>
    <a id="14824" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14826" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14829" href="Ledger.Conway.Utxo.html#14829" class="Bound">(_</a> <a id="14832" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14834" href="Ledger.Conway.Utxo.html#14834" class="Bound">txout</a><a id="14839" href="Ledger.Conway.Utxo.html#14829" class="Bound">)</a> <a id="14841" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14843" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14845" href="Ledger.Conway.Utxo.html#14393" class="Bound">txoutsʰ</a> <a id="14853" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14855" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14865" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="14872" class="Symbol">((</a><a id="14874" href="Ledger.Conway.Utxo.html#14440" class="Bound">overhead</a> <a id="14883" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="14885" href="Ledger.Conway.Utxo.html#2268" class="Function">utxoEntrySize</a> <a id="14899" href="Ledger.Conway.Utxo.html#14834" class="Bound">txout</a><a id="14904" class="Symbol">)</a> <a id="14906" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="14908" href="Ledger.Conway.PParams.html#2457" class="Field">coinsPerUTxOByte</a> <a id="14925" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a><a id="14927" class="Symbol">)</a> <a id="14929" href="Ledger.Conway.TokenAlgebra.html#1015" class="Function Operator">≤ᵗ</a> <a id="14932" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="14942" href="Ledger.Conway.Utxo.html#14834" class="Bound">txout</a>
    <a id="14952" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14954" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14957" href="Ledger.Conway.Utxo.html#14957" class="Bound">(_</a> <a id="14960" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14962" href="Ledger.Conway.Utxo.html#14962" class="Bound">txout</a><a id="14967" href="Ledger.Conway.Utxo.html#14957" class="Bound">)</a> <a id="14969" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14971" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14973" href="Ledger.Conway.Utxo.html#14393" class="Bound">txoutsʰ</a> <a id="14981" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14983" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14993" href="Ledger.Conway.Abstract.html#685" class="Field">serSize</a> <a id="15001" class="Symbol">(</a><a id="15002" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="15012" href="Ledger.Conway.Utxo.html#14962" class="Bound">txout</a><a id="15017" class="Symbol">)</a> <a id="15019" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="15021" href="Ledger.Conway.PParams.html#1982" class="Field">maxValSize</a> <a id="15032" href="Ledger.Conway.Utxo.html#14201" class="Bound">pp</a>
    <a id="15039" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15041" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15044" href="Ledger.Conway.Utxo.html#15044" class="Bound">(</a><a id="15045" href="Ledger.Conway.Utxo.html#15045" class="Bound">a</a> <a id="15047" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15049" href="Ledger.Conway.Utxo.html#15044" class="Bound">_)</a> <a id="15052" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15054" href="Class.IsSet.html#959" class="Function">range</a> <a id="15060" href="Ledger.Conway.Utxo.html#14393" class="Bound">txoutsʰ</a> <a id="15068" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="15078" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="15086" class="Symbol">(</a><a id="15087" href="Function.Base.html#725" class="Function">const</a> <a id="15093" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="15094" class="Symbol">)</a> <a id="15096" class="Symbol">(λ</a> <a id="15099" href="Ledger.Conway.Utxo.html#15099" class="Bound">a</a> <a id="15101" class="Symbol">→</a> <a id="15103" href="Ledger.Conway.Utxo.html#15099" class="Bound">a</a> <a id="15105" class="Symbol">.</a><a id="15106" href="Ledger.Conway.Address.html#1321" class="Field">BootstrapAddr.attrsSize</a> <a id="15130" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="15132" class="Number">64</a><a id="15134" class="Symbol">)</a> <a id="15136" href="Ledger.Conway.Utxo.html#15045" class="Bound">a</a>
    <a id="15142" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15144" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15147" href="Ledger.Conway.Utxo.html#15147" class="Bound">(</a><a id="15148" href="Ledger.Conway.Utxo.html#15148" class="Bound">a</a> <a id="15150" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15152" href="Ledger.Conway.Utxo.html#15147" class="Bound">_)</a> <a id="15155" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15157" href="Class.IsSet.html#959" class="Function">range</a> <a id="15163" href="Ledger.Conway.Utxo.html#14393" class="Bound">txoutsʰ</a> <a id="15171" href="Class.IsSet.html#576" class="Function">]</a>  <a id="15174" href="Ledger.Conway.Address.html#2556" class="Function">netId</a> <a id="15180" href="Ledger.Conway.Utxo.html#15148" class="Bound">a</a>         <a id="15190" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15192" href="Ledger.Conway.Types.Epoch.html#2361" class="Function">NetworkId</a>
    <a id="15206" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15208" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15211" href="Ledger.Conway.Utxo.html#15211" class="Bound">a</a> <a id="15213" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15215" href="Class.IsSet.html#916" class="Function">dom</a> <a id="15219" href="Ledger.Conway.Transaction.html#3030" class="Function">txwdrls</a> <a id="15227" href="Class.IsSet.html#576" class="Function">]</a>          <a id="15238" href="Ledger.Conway.Address.html#1550" class="Field">NetworkIdOf</a> <a id="15250" href="Ledger.Conway.Utxo.html#15211" class="Bound">a</a> <a id="15252" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15254" href="Ledger.Conway.Types.Epoch.html#2361" class="Function">NetworkId</a>
    <a id="15268" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15270" href="Ledger.Conway.Transaction.html#3234" class="Function">txNetworkId</a>  <a id="15283" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15285" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15290" href="Ledger.Conway.Types.Epoch.html#2361" class="Function">NetworkId</a>
    <a id="15304" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15306" href="Ledger.Conway.Transaction.html#3271" class="Function">curTreasury</a>  <a id="15319" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15321" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15326" href="Ledger.Conway.Utxo.html#14260" class="Bound">treasury</a>
    <a id="15339" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15341" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="15343" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">⊢</a> <a id="15345" href="Ledger.Conway.Utxo.html#12836" class="Generalizable">s</a> <a id="15347" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">⇀⦇</a> <a id="15350" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="15353" href="Ledger.Conway.Utxo.html#12943" class="Datatype Operator">,UTXOS⦈</a> <a id="15361" href="Ledger.Conway.Utxo.html#12838" class="Generalizable">s&#39;</a>
      <a id="15370" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
      <a id="15409" href="Ledger.Conway.Utxo.html#12822" class="Generalizable">Γ</a> <a id="15411" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">⊢</a> <a id="15413" href="Ledger.Conway.Utxo.html#12836" class="Generalizable">s</a> <a id="15415" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">⇀⦇</a> <a id="15418" href="Ledger.Conway.Utxo.html#12855" class="Generalizable">tx</a> <a id="15421" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">,UTXO⦈</a> <a id="15428" href="Ledger.Conway.Utxo.html#12838" class="Generalizable">s&#39;</a>


<a id="15433" class="Keyword">pattern</a> <a id="UTXO-inductive⋯"></a><a id="15441" href="Ledger.Conway.Utxo.html#15441" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="15457" href="Ledger.Conway.Utxo.html#15539" class="Bound">tx</a> <a id="15460" href="Ledger.Conway.Utxo.html#15522" class="Bound">Γ</a> <a id="15462" href="Ledger.Conway.Utxo.html#15530" class="Bound">s</a> <a id="15464" href="Ledger.Conway.Utxo.html#15544" class="Bound">x</a> <a id="15466" href="Ledger.Conway.Utxo.html#15548" class="Bound">y</a> <a id="15468" href="Ledger.Conway.Utxo.html#15552" class="Bound">z</a> <a id="15470" href="Ledger.Conway.Utxo.html#15556" class="Bound">w</a> <a id="15472" href="Ledger.Conway.Utxo.html#15560" class="Bound">k</a> <a id="15474" href="Ledger.Conway.Utxo.html#15564" class="Bound">l</a> <a id="15476" href="Ledger.Conway.Utxo.html#15568" class="Bound">m</a> <a id="15478" href="Ledger.Conway.Utxo.html#15572" class="Bound">v</a> <a id="15480" href="Ledger.Conway.Utxo.html#15576" class="Bound">j</a> <a id="15482" href="Ledger.Conway.Utxo.html#15580" class="Bound">n</a> <a id="15484" href="Ledger.Conway.Utxo.html#15584" class="Bound">o</a> <a id="15486" href="Ledger.Conway.Utxo.html#15588" class="Bound">p</a> <a id="15488" href="Ledger.Conway.Utxo.html#15592" class="Bound">q</a> <a id="15490" href="Ledger.Conway.Utxo.html#15596" class="Bound">r</a> <a id="15492" href="Ledger.Conway.Utxo.html#15600" class="Bound">t</a> <a id="15494" href="Ledger.Conway.Utxo.html#15604" class="Bound">u</a> <a id="15496" href="Ledger.Conway.Utxo.html#15608" class="Bound">h</a>
  <a id="15500" class="Symbol">=</a> <a id="15502" href="Ledger.Conway.Utxo.html#14176" class="InductiveConstructor">UTXO-inductive</a> <a id="15517" class="Symbol">{</a><a id="15518" class="Argument">Γ</a> <a id="15520" class="Symbol">=</a> <a id="15522" href="Ledger.Conway.Utxo.html#15522" class="Bound">Γ</a><a id="15523" class="Symbol">}</a> <a id="15525" class="Symbol">{</a><a id="15526" class="Argument">s</a> <a id="15528" class="Symbol">=</a> <a id="15530" href="Ledger.Conway.Utxo.html#15530" class="Bound">s</a><a id="15531" class="Symbol">}</a> <a id="15533" class="Symbol">{</a><a id="15534" class="Argument">tx</a> <a id="15537" class="Symbol">=</a> <a id="15539" href="Ledger.Conway.Utxo.html#15539" class="Bound">tx</a><a id="15541" class="Symbol">}</a> <a id="15543" class="Symbol">(</a><a id="15544" href="Ledger.Conway.Utxo.html#15544" class="Bound">x</a> <a id="15546" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15548" href="Ledger.Conway.Utxo.html#15548" class="Bound">y</a> <a id="15550" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15552" href="Ledger.Conway.Utxo.html#15552" class="Bound">z</a> <a id="15554" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15556" href="Ledger.Conway.Utxo.html#15556" class="Bound">w</a> <a id="15558" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15560" href="Ledger.Conway.Utxo.html#15560" class="Bound">k</a> <a id="15562" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15564" href="Ledger.Conway.Utxo.html#15564" class="Bound">l</a> <a id="15566" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15568" href="Ledger.Conway.Utxo.html#15568" class="Bound">m</a> <a id="15570" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15572" href="Ledger.Conway.Utxo.html#15572" class="Bound">v</a> <a id="15574" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15576" href="Ledger.Conway.Utxo.html#15576" class="Bound">j</a> <a id="15578" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15580" href="Ledger.Conway.Utxo.html#15580" class="Bound">n</a> <a id="15582" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15584" href="Ledger.Conway.Utxo.html#15584" class="Bound">o</a> <a id="15586" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15588" href="Ledger.Conway.Utxo.html#15588" class="Bound">p</a> <a id="15590" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15592" href="Ledger.Conway.Utxo.html#15592" class="Bound">q</a> <a id="15594" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15596" href="Ledger.Conway.Utxo.html#15596" class="Bound">r</a> <a id="15598" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15600" href="Ledger.Conway.Utxo.html#15600" class="Bound">t</a> <a id="15602" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15604" href="Ledger.Conway.Utxo.html#15604" class="Bound">u</a> <a id="15606" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15608" href="Ledger.Conway.Utxo.html#15608" class="Bound">h</a><a id="15609" class="Symbol">)</a>
<a id="15611" class="Keyword">unquoteDecl</a> <a id="UTXO-premises"></a><a id="15623" href="Ledger.Conway.Utxo.html#15623" class="Function">UTXO-premises</a> <a id="15637" class="Symbol">=</a> <a id="15639" href="iog-prelude.Tactic.Premises.html#2289" class="Function">genPremises</a> <a id="15651" href="Ledger.Conway.Utxo.html#15623" class="Function">UTXO-premises</a> <a id="15665" class="Symbol">(</a><a id="15666" class="Keyword">quote</a> <a id="15672" href="Ledger.Conway.Utxo.html#14176" class="InductiveConstructor">UTXO-inductive</a><a id="15686" class="Symbol">)</a>

</pre></body></html>