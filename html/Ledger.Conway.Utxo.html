<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Ledger.Conway.Utxo</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css"><link rel="stylesheet" href="Agda.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js"></script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js"></script><script src="AgdaKaTeX.js" defer=""></script></head><body><pre class="Agda">
<a id="2" class="Symbol">{-#</a> <a id="6" class="Keyword">OPTIONS</a> <a id="14" class="Pragma">--safe</a> <a id="21" class="Symbol">#-}</a>

<a id="26" class="Keyword">open</a> <a id="31" class="Keyword">import</a> <a id="38" href="Algebra.html" class="Module">Algebra</a>              <a id="59" class="Keyword">using</a> <a id="65" class="Symbol">(</a><a id="66" href="Algebra.Bundles.html#7886" class="Record">CommutativeMonoid</a><a id="83" class="Symbol">)</a>
<a id="85" class="Keyword">open</a> <a id="90" class="Keyword">import</a> <a id="97" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>  <a id="118" class="Keyword">using</a> <a id="124" class="Symbol">(</a><a id="125" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a><a id="135" class="Symbol">)</a>
<a id="137" class="Keyword">import</a> <a id="144" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="155" class="Symbol">as</a> <a id="158" class="Module">M</a>
<a id="160" class="Keyword">import</a> <a id="167" href="Data.Sum.Relation.Unary.All.html" class="Module">Data.Sum.Relation.Unary.All</a> <a id="195" class="Symbol">as</a> <a id="198" class="Module">Sum</a>

<a id="203" class="Keyword">import</a> <a id="210" href="Data.Integer.html" class="Module">Data.Integer</a> <a id="223" class="Symbol">as</a> <a id="226" class="Module">ℤ</a>
<a id="228" class="Keyword">import</a> <a id="235" href="Data.Rational.html" class="Module">Data.Rational</a> <a id="249" class="Symbol">as</a> <a id="252" class="Module">ℚ</a>

<a id="255" class="Keyword">open</a> <a id="260" class="Keyword">import</a> <a id="267" href="Tactic.Derive.DecEq.html" class="Module">Tactic.Derive.DecEq</a>

<a id="288" class="Keyword">open</a> <a id="293" class="Keyword">import</a> <a id="300" href="Ledger.Prelude.html" class="Module">Ledger.Prelude</a>
<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Ledger.Conway.Abstract.html" class="Module">Ledger.Conway.Abstract</a>
<a id="350" class="Keyword">open</a> <a id="355" class="Keyword">import</a> <a id="362" href="Ledger.Conway.Transaction.html" class="Module">Ledger.Conway.Transaction</a>

<a id="389" class="Keyword">module</a> <a id="396" href="Ledger.Conway.Utxo.html" class="Module">Ledger.Conway.Utxo</a>
  <a id="417" class="Symbol">(</a><a id="418" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a> <a id="422" class="Symbol">:</a> <a id="424" class="Symbol">_)</a> <a id="427" class="Symbol">(</a><a id="428" class="Keyword">open</a> <a id="433" href="Ledger.Conway.Transaction.html#910" class="Module">TransactionStructure</a> <a id="454" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a><a id="457" class="Symbol">)</a>
  <a id="461" class="Symbol">(</a><a id="462" href="Ledger.Conway.Utxo.html#462" class="Bound">abs</a> <a id="466" class="Symbol">:</a> <a id="468" href="Ledger.Conway.Abstract.html#599" class="Record">AbstractFunctions</a> <a id="486" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a><a id="489" class="Symbol">)</a> <a id="491" class="Symbol">(</a><a id="492" class="Keyword">open</a> <a id="497" href="Ledger.Conway.Abstract.html#599" class="Module">AbstractFunctions</a> <a id="515" href="Ledger.Conway.Utxo.html#462" class="Bound">abs</a><a id="518" class="Symbol">)</a>
  <a id="522" class="Keyword">where</a>

<a id="529" class="Keyword">open</a> <a id="534" class="Keyword">import</a> <a id="541" href="Ledger.Conway.ScriptValidation.html" class="Module">Ledger.Conway.ScriptValidation</a> <a id="572" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a> <a id="576" href="Ledger.Conway.Utxo.html#462" class="Bound">abs</a>
<a id="580" class="Keyword">open</a> <a id="585" class="Keyword">import</a> <a id="592" href="Ledger.Conway.Fees.html" class="Module">Ledger.Conway.Fees</a> <a id="611" href="Ledger.Conway.Utxo.html#418" class="Bound">txs</a> <a id="615" class="Keyword">using</a> <a id="621" class="Symbol">(</a><a id="622" href="Ledger.Conway.Fees.html#738" class="Function">scriptsCost</a><a id="633" class="Symbol">)</a>
<a id="635" class="Keyword">open</a> <a id="640" class="Keyword">import</a> <a id="647" href="Ledger.Conway.Certs.html" class="Module">Ledger.Conway.Certs</a> <a id="667" href="Ledger.Conway.Transaction.html#1880" class="Function">govStructure</a>

<a id="681" class="Keyword">instance</a>
  <a id="692" href="Ledger.Conway.Utxo.html#692" class="Function">_</a> <a id="694" class="Symbol">=</a> <a id="696" href="Data.Nat.Properties.html#17252" class="Function">+-0-monoid</a>


<a id="isTwoPhaseScriptAddress"></a><a id="709" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="733" class="Symbol">:</a> <a id="735" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="738" class="Symbol">→</a> <a id="740" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="745" class="Symbol">→</a> <a id="747" href="Ledger.Conway.Address.html#2332" class="Function">Addr</a> <a id="752" class="Symbol">→</a> <a id="754" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="759" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="783" href="Ledger.Conway.Utxo.html#783" class="Bound">tx</a> <a id="786" href="Ledger.Conway.Utxo.html#786" class="Bound">utxo</a> <a id="791" href="Ledger.Conway.Utxo.html#791" class="Bound">a</a> <a id="793" class="Symbol">=</a>
  <a id="797" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="800" href="Ledger.Conway.Address.html#2615" class="Function">isScriptAddr</a> <a id="813" href="Ledger.Conway.Utxo.html#791" class="Bound">a</a> <a id="815" href="Class.ToBool.html#389" class="Function Operator">then</a>
    <a id="824" class="Symbol">(λ</a> <a id="827" class="Symbol">{</a><a id="828" href="Ledger.Conway.Utxo.html#828" class="Bound">p</a><a id="829" class="Symbol">}</a> <a id="831" class="Symbol">→</a> <a id="833" href="Class.ToBool.html#389" class="Function Operator">if</a> <a id="836" href="Ledger.Conway.Transaction.html#5954" class="Function">lookupScriptHash</a> <a id="853" class="Symbol">(</a><a id="854" href="Ledger.Conway.Address.html#3734" class="Function">getScriptHash</a> <a id="868" href="Ledger.Conway.Utxo.html#791" class="Bound">a</a> <a id="870" href="Ledger.Conway.Utxo.html#828" class="Bound">p</a><a id="871" class="Symbol">)</a> <a id="873" href="Ledger.Conway.Utxo.html#783" class="Bound">tx</a> <a id="876" href="Ledger.Conway.Utxo.html#786" class="Bound">utxo</a>
                 <a id="898" href="Class.ToBool.html#389" class="Function Operator">then</a> <a id="903" class="Symbol">(λ</a> <a id="906" class="Symbol">{</a><a id="907" href="Ledger.Conway.Utxo.html#907" class="Bound">s</a><a id="908" class="Symbol">}</a> <a id="910" class="Symbol">→</a> <a id="912" href="Ledger.Conway.Transaction.html#6194" class="Function">isP2Script</a> <a id="923" href="Ledger.Conway.Utxo.html#907" class="Bound">s</a><a id="924" class="Symbol">)</a>
                 <a id="943" href="Class.ToBool.html#389" class="Function Operator">else</a> <a id="948" href="Data.Empty.html#914" class="Function">⊥</a><a id="949" class="Symbol">)</a>
  <a id="953" href="Class.ToBool.html#389" class="Function Operator">else</a>
    <a id="962" href="Data.Empty.html#914" class="Function">⊥</a>


<a id="isTwoPhaseScriptAddress?"></a><a id="966" href="Ledger.Conway.Utxo.html#966" class="Function">isTwoPhaseScriptAddress?</a> <a id="991" class="Symbol">:</a> <a id="993" class="Symbol">∀</a> <a id="995" class="Symbol">{</a><a id="996" href="Ledger.Conway.Utxo.html#996" class="Bound">tx</a> <a id="999" href="Ledger.Conway.Utxo.html#999" class="Bound">utxo</a> <a id="1004" href="Ledger.Conway.Utxo.html#1004" class="Bound">a</a><a id="1005" class="Symbol">}</a> <a id="1007" class="Symbol">→</a> <a id="1009" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="1033" href="Ledger.Conway.Utxo.html#996" class="Bound">tx</a> <a id="1036" href="Ledger.Conway.Utxo.html#999" class="Bound">utxo</a> <a id="1041" href="Ledger.Conway.Utxo.html#1004" class="Bound">a</a> <a id="1043" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
<a id="1045" href="Ledger.Conway.Utxo.html#966" class="Function">isTwoPhaseScriptAddress?</a> <a id="1070" class="Symbol">{</a><a id="1071" href="Ledger.Conway.Utxo.html#1071" class="Bound">tx</a><a id="1073" class="Symbol">}</a> <a id="1075" class="Symbol">{</a><a id="1076" href="Ledger.Conway.Utxo.html#1076" class="Bound">utxo</a><a id="1080" class="Symbol">}</a> <a id="1082" class="Symbol">{</a><a id="1083" href="Ledger.Conway.Utxo.html#1083" class="Bound">a</a><a id="1084" class="Symbol">}</a> <a id="1086" class="Symbol">.</a><a id="1087" href="Class.Decidable.Core.html#264" class="Field">dec</a>
  <a id="1093" class="Keyword">with</a> <a id="1098" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1105" class="Symbol">(</a><a id="1106" href="Ledger.Conway.Address.html#2615" class="Function">isScriptAddr</a> <a id="1119" href="Ledger.Conway.Utxo.html#1083" class="Bound">a</a><a id="1120" class="Symbol">)</a>
<a id="1122" class="Symbol">...</a> <a id="1126" class="Symbol">|</a> <a id="1128" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1133" class="Symbol">_</a> <a id="1135" class="Symbol">=</a> <a id="1137" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1140" class="Symbol">λ</a> <a id="1142" class="Symbol">()</a>
<a id="1145" class="Symbol">...</a> <a id="1149" class="Symbol">|</a> <a id="1151" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1156" href="Ledger.Conway.Utxo.html#1156" class="Bound">p</a>
  <a id="1160" class="Keyword">with</a> <a id="1165" href="Class.ToBool.html#321" class="Field">decide</a> <a id="1172" class="Symbol">(</a><a id="1173" href="Ledger.Conway.Transaction.html#5954" class="Function">lookupScriptHash</a> <a id="1190" class="Symbol">(</a><a id="1191" href="Ledger.Conway.Address.html#3734" class="Function">getScriptHash</a> <a id="1205" class="Bound">a</a> <a id="1207" href="Ledger.Conway.Utxo.html#1156" class="Bound">p</a><a id="1208" class="Symbol">)</a> <a id="1210" class="Bound">tx</a> <a id="1213" class="Bound">utxo</a><a id="1217" class="Symbol">)</a>
<a id="1219" class="Symbol">...</a> <a id="1223" class="Symbol">|</a> <a id="1225" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1230" class="Symbol">_</a> <a id="1232" class="Symbol">=</a> <a id="1234" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="1237" class="Symbol">λ</a> <a id="1239" class="Symbol">()</a>
<a id="1242" class="Symbol">...</a> <a id="1246" class="Symbol">|</a> <a id="1248" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1253" href="Ledger.Conway.Utxo.html#1253" class="Bound">s</a> <a id="1255" class="Symbol">=</a> <a id="1257" href="Ledger.Conway.Transaction.html#6260" class="Function">isP2Script?</a> <a id="1269" class="Symbol">{</a><a id="1270" href="Ledger.Conway.Utxo.html#1253" class="Bound">s</a><a id="1271" class="Symbol">}</a> <a id="1273" class="Symbol">.</a><a id="1274" href="Class.Decidable.Core.html#264" class="Field">dec</a>

<a id="1279" class="Keyword">record</a> <a id="isTwoPhaseScriptAddress′"></a><a id="1286" href="Ledger.Conway.Utxo.html#1286" class="Record">isTwoPhaseScriptAddress′</a> <a id="1311" class="Symbol">(</a><a id="1312" href="Ledger.Conway.Utxo.html#1312" class="Bound">tx</a> <a id="1315" class="Symbol">:</a> <a id="1317" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a><a id="1319" class="Symbol">)</a> <a id="1321" class="Symbol">(</a><a id="1322" href="Ledger.Conway.Utxo.html#1322" class="Bound">utxo</a> <a id="1327" class="Symbol">:</a> <a id="1329" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a><a id="1333" class="Symbol">)</a> <a id="1335" class="Symbol">(</a><a id="1336" href="Ledger.Conway.Utxo.html#1336" class="Bound">a</a> <a id="1338" class="Symbol">:</a> <a id="1340" href="Ledger.Conway.Address.html#2332" class="Function">Addr</a><a id="1344" class="Symbol">)</a> <a id="1346" class="Symbol">:</a> <a id="1348" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1353" class="Keyword">where</a>
  <a id="1361" class="Keyword">constructor</a> <a id="wrap"></a><a id="1373" href="Ledger.Conway.Utxo.html#1373" class="InductiveConstructor">wrap</a>
  <a id="1380" class="Keyword">field</a> <a id="isTwoPhaseScriptAddress′.unwrap"></a><a id="1386" href="Ledger.Conway.Utxo.html#1386" class="Field">unwrap</a> <a id="1393" class="Symbol">:</a> <a id="1395" href="Ledger.Conway.Utxo.html#709" class="Function">isTwoPhaseScriptAddress</a> <a id="1419" href="Ledger.Conway.Utxo.html#1312" class="Bound">tx</a> <a id="1422" href="Ledger.Conway.Utxo.html#1322" class="Bound">utxo</a> <a id="1427" href="Ledger.Conway.Utxo.html#1336" class="Bound">a</a>

<a id="1430" class="Keyword">instance</a>
  <a id="isTwoPhaseScriptAddress′?"></a><a id="1441" href="Ledger.Conway.Utxo.html#1441" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1467" class="Symbol">:</a> <a id="1469" class="Symbol">∀</a> <a id="1471" class="Symbol">{</a><a id="1472" href="Ledger.Conway.Utxo.html#1472" class="Bound">tx</a> <a id="1475" href="Ledger.Conway.Utxo.html#1475" class="Bound">utxo</a> <a id="1480" href="Ledger.Conway.Utxo.html#1480" class="Bound">a</a><a id="1481" class="Symbol">}</a> <a id="1483" class="Symbol">→</a> <a id="1485" href="Ledger.Conway.Utxo.html#1286" class="Record">isTwoPhaseScriptAddress′</a> <a id="1510" href="Ledger.Conway.Utxo.html#1472" class="Bound">tx</a> <a id="1513" href="Ledger.Conway.Utxo.html#1475" class="Bound">utxo</a> <a id="1518" href="Ledger.Conway.Utxo.html#1480" class="Bound">a</a> <a id="1520" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="1524" href="Ledger.Conway.Utxo.html#1441" class="Function">isTwoPhaseScriptAddress′?</a> <a id="1550" class="Symbol">{</a><a id="1551" href="Ledger.Conway.Utxo.html#1551" class="Bound">tx</a><a id="1553" class="Symbol">}</a> <a id="1555" class="Symbol">{</a><a id="1556" href="Ledger.Conway.Utxo.html#1556" class="Bound">utxo</a><a id="1560" class="Symbol">}</a> <a id="1562" class="Symbol">{</a><a id="1563" href="Ledger.Conway.Utxo.html#1563" class="Bound">a</a><a id="1564" class="Symbol">}</a> <a id="1566" class="Symbol">=</a> <a id="1568" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="1570" class="Symbol">(</a><a id="1571" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">map′</a> <a id="1576" href="Ledger.Conway.Utxo.html#1373" class="InductiveConstructor">wrap</a> <a id="1581" href="Ledger.Conway.Utxo.html#1386" class="Field">unwrap</a> <a id="1588" class="Symbol">(</a><a id="1589" href="Ledger.Conway.Utxo.html#966" class="Function">isTwoPhaseScriptAddress?</a> <a id="1614" class="Symbol">{</a><a id="1615" href="Ledger.Conway.Utxo.html#1551" class="Bound">tx</a><a id="1617" class="Symbol">}</a> <a id="1619" class="Symbol">{</a><a id="1620" href="Ledger.Conway.Utxo.html#1556" class="Bound">utxo</a><a id="1624" class="Symbol">}</a> <a id="1626" class="Symbol">{</a><a id="1627" href="Ledger.Conway.Utxo.html#1563" class="Bound">a</a><a id="1628" class="Symbol">}</a> <a id="1630" class="Symbol">.</a><a id="1631" href="Class.Decidable.Core.html#264" class="Field">dec</a><a id="1634" class="Symbol">))</a>
    <a id="1641" class="Keyword">where</a> <a id="1647" class="Keyword">open</a> <a id="1652" href="Ledger.Conway.Utxo.html#1286" class="Module">isTwoPhaseScriptAddress′</a>


<a id="1679" class="Keyword">opaque</a>


  <a id="getDataHashes"></a><a id="1690" href="Ledger.Conway.Utxo.html#1690" class="Function">getDataHashes</a> <a id="1704" class="Symbol">:</a> <a id="1706" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1708" href="Ledger.Conway.Transaction.html#2405" class="Function">TxOut</a> <a id="1714" class="Symbol">→</a> <a id="1716" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1718" href="Ledger.Conway.Script.html#1747" class="Function">DataHash</a>
  <a id="1729" href="Ledger.Conway.Utxo.html#1690" class="Function">getDataHashes</a> <a id="1743" href="Ledger.Conway.Utxo.html#1743" class="Bound">txo</a> <a id="1747" class="Symbol">=</a> <a id="1749" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1760" href="Data.Sum.html#870" class="Function">isInj₂</a> <a id="1767" class="Symbol">(</a><a id="1768" href="Axiom.Set.html#7805" class="Function">mapPartial</a> <a id="1779" class="Symbol">(</a><a id="1780" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="1786" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1788" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="1794" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1796" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="1801" class="Symbol">)</a> <a id="1803" href="Ledger.Conway.Utxo.html#1743" class="Bound">txo</a><a id="1806" class="Symbol">)</a>

  <a id="getInputHashes"></a><a id="1811" href="Ledger.Conway.Utxo.html#1811" class="Function">getInputHashes</a> <a id="1826" class="Symbol">:</a> <a id="1828" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="1831" class="Symbol">→</a> <a id="1833" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="1838" class="Symbol">→</a> <a id="1840" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="1842" href="Ledger.Conway.Script.html#1747" class="Function">DataHash</a>
  <a id="1853" href="Ledger.Conway.Utxo.html#1811" class="Function">getInputHashes</a> <a id="1868" href="Ledger.Conway.Utxo.html#1868" class="Bound">tx</a> <a id="1871" href="Ledger.Conway.Utxo.html#1871" class="Bound">utxo</a> <a id="1876" class="Symbol">=</a> <a id="1878" href="Ledger.Conway.Utxo.html#1690" class="Function">getDataHashes</a>
    <a id="1896" class="Symbol">(</a><a id="1897" href="abstract-set-theory.FiniteSetTheory.html#2813" class="Function">filterˢ</a> <a id="1905" class="Symbol">(λ</a> <a id="1908" class="Symbol">(</a><a id="1909" href="Ledger.Conway.Utxo.html#1909" class="Bound">a</a> <a id="1911" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1913" class="Symbol">_</a> <a id="1915" class="Symbol">)</a> <a id="1917" class="Symbol">→</a> <a id="1919" href="Ledger.Conway.Utxo.html#1286" class="Record">isTwoPhaseScriptAddress′</a> <a id="1944" href="Ledger.Conway.Utxo.html#1868" class="Bound">tx</a> <a id="1947" href="Ledger.Conway.Utxo.html#1871" class="Bound">utxo</a> <a id="1952" href="Ledger.Conway.Utxo.html#1909" class="Bound">a</a><a id="1953" class="Symbol">)</a>
             <a id="1968" class="Symbol">(</a><a id="1969" href="Class.IsSet.html#959" class="Function">range</a> <a id="1975" class="Symbol">(</a><a id="1976" href="Ledger.Conway.Utxo.html#1871" class="Bound">utxo</a> <a id="1981" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="1983" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a><a id="1988" class="Symbol">)))</a>
    <a id="1996" class="Keyword">where</a> <a id="2002" class="Keyword">open</a> <a id="2007" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a><a id="2009" class="Symbol">;</a> <a id="2011" class="Keyword">open</a> <a id="2016" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="2023" class="Symbol">(</a><a id="2024" href="Ledger.Conway.Utxo.html#1868" class="Bound">tx</a> <a id="2027" class="Symbol">.</a><a id="2028" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a><a id="2032" class="Symbol">)</a>

<a id="totExUnits"></a><a id="2035" href="Ledger.Conway.Utxo.html#2035" class="Function">totExUnits</a> <a id="2046" class="Symbol">:</a> <a id="2048" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="2051" class="Symbol">→</a> <a id="2053" href="Ledger.Conway.Script.html#1042" class="Function">ExUnits</a>
<a id="2061" href="Ledger.Conway.Utxo.html#2035" class="Function">totExUnits</a> <a id="2072" href="Ledger.Conway.Utxo.html#2072" class="Bound">tx</a> <a id="2075" class="Symbol">=</a> <a id="2077" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="2080" href="Ledger.Conway.Utxo.html#2080" class="Bound">(_</a> <a id="2083" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2085" href="Ledger.Conway.Utxo.html#2085" class="Bound">eu</a><a id="2087" href="Ledger.Conway.Utxo.html#2080" class="Bound">)</a> <a id="2089" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="2091" href="Ledger.Conway.Utxo.html#2072" class="Bound">tx</a> <a id="2094" class="Symbol">.</a><a id="2095" href="Ledger.Conway.Transaction.html#4362" class="Field">wits</a> <a id="2100" class="Symbol">.</a><a id="2101" href="Ledger.Conway.Transaction.html#4185" class="Field">txrdmrs</a> <a id="2109" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="2111" href="Ledger.Conway.Utxo.html#2085" class="Bound">eu</a>
  <a id="2116" class="Keyword">where</a> <a id="2122" class="Keyword">open</a> <a id="2127" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a><a id="2129" class="Symbol">;</a> <a id="2131" class="Keyword">open</a> <a id="2136" href="Ledger.Conway.Transaction.html#4056" class="Module">TxWitnesses</a>


<a id="2150" class="Comment">-- utxoEntrySizeWithoutVal = 27 words (8 bytes)</a>
<a id="utxoEntrySizeWithoutVal"></a><a id="2198" href="Ledger.Conway.Utxo.html#2198" class="Function">utxoEntrySizeWithoutVal</a> <a id="2222" class="Symbol">:</a> <a id="2224" href="Ledger.Conway.TokenAlgebra.html#411" class="Function">MemoryEstimate</a>
<a id="2239" href="Ledger.Conway.Utxo.html#2198" class="Function">utxoEntrySizeWithoutVal</a> <a id="2263" class="Symbol">=</a> <a id="2265" class="Number">8</a>

<a id="utxoEntrySize"></a><a id="2268" href="Ledger.Conway.Utxo.html#2268" class="Function">utxoEntrySize</a> <a id="2282" class="Symbol">:</a> <a id="2284" href="Ledger.Conway.Transaction.html#5089" class="Function">TxOutʰ</a> <a id="2291" class="Symbol">→</a> <a id="2293" href="Ledger.Conway.TokenAlgebra.html#411" class="Function">MemoryEstimate</a>
<a id="2308" href="Ledger.Conway.Utxo.html#2268" class="Function">utxoEntrySize</a> <a id="2322" href="Ledger.Conway.Utxo.html#2322" class="Bound">o</a> <a id="2324" class="Symbol">=</a> <a id="2326" href="Ledger.Conway.Utxo.html#2198" class="Function">utxoEntrySizeWithoutVal</a> <a id="2350" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="2352" href="Ledger.Conway.TokenAlgebra.html#960" class="Function">size</a> <a id="2357" class="Symbol">(</a><a id="2358" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="2368" href="Ledger.Conway.Utxo.html#2322" class="Bound">o</a><a id="2369" class="Symbol">)</a>


<a id="2373" class="Keyword">open</a> <a id="2378" href="Ledger.Conway.PParams.html#1721" class="Module">PParams</a>


<a id="2388" class="Keyword">record</a> <a id="UTxOEnv"></a><a id="2395" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="2403" class="Symbol">:</a> <a id="2405" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2410" class="Keyword">where</a>
  <a id="2418" class="Keyword">field</a>
    <a id="UTxOEnv.slot"></a><a id="2428" href="Ledger.Conway.Utxo.html#2428" class="Field">slot</a>      <a id="2438" class="Symbol">:</a> <a id="2440" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a>
    <a id="UTxOEnv.pparams"></a><a id="2449" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>   <a id="2459" class="Symbol">:</a> <a id="2461" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a>
    <a id="UTxOEnv.treasury"></a><a id="2473" href="Ledger.Conway.Utxo.html#2473" class="Field">treasury</a>  <a id="2483" class="Symbol">:</a> <a id="2485" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2493" class="Keyword">instance</a>
  <a id="HasPParams-UTxOEnv"></a><a id="2504" href="Ledger.Conway.Utxo.html#2504" class="Function">HasPParams-UTxOEnv</a> <a id="2523" class="Symbol">:</a> <a id="2525" href="Ledger.Conway.PParams.html#3525" class="Record">HasPParams</a> <a id="2536" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>
  <a id="2546" href="Ledger.Conway.Utxo.html#2504" class="Function">HasPParams-UTxOEnv</a> <a id="2565" class="Symbol">.</a><a id="2566" href="Ledger.Conway.PParams.html#3576" class="Field">PParamsOf</a> <a id="2576" class="Symbol">=</a> <a id="2578" href="Ledger.Conway.Utxo.html#2449" class="Field">UTxOEnv.pparams</a>

  <a id="HasgovActionDeposit-UTxOEnv"></a><a id="2597" href="Ledger.Conway.Utxo.html#2597" class="Function">HasgovActionDeposit-UTxOEnv</a> <a id="2625" class="Symbol">:</a> <a id="2627" href="Ledger.Conway.PParams.html#3636" class="Record">HasgovActionDeposit</a> <a id="2647" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>
  <a id="2657" href="Ledger.Conway.Utxo.html#2597" class="Function">HasgovActionDeposit-UTxOEnv</a> <a id="2685" class="Symbol">.</a><a id="2686" href="Ledger.Conway.PParams.html#3696" class="Field">govActionDepositOf</a> <a id="2705" class="Symbol">=</a> <a id="2707" href="Ledger.Conway.PParams.html#3696" class="Field">govActionDepositOf</a> <a id="2726" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2728" href="Ledger.Conway.PParams.html#3576" class="Field">PParamsOf</a>


<a id="2740" class="Keyword">record</a> <a id="UTxOState"></a><a id="2747" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="2757" class="Symbol">:</a> <a id="2759" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2764" class="Keyword">where</a>


  <a id="2774" class="Keyword">constructor</a> <a id="⟦_,_,_,_⟧ᵘ"></a><a id="2786" href="Ledger.Conway.Utxo.html#2786" class="InductiveConstructor Operator">⟦_,_,_,_⟧ᵘ</a>


  <a id="2801" class="Keyword">field</a>
    <a id="UTxOState.utxo"></a><a id="2811" href="Ledger.Conway.Utxo.html#2811" class="Field">utxo</a>       <a id="2822" class="Symbol">:</a> <a id="2824" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
    <a id="UTxOState.fees"></a><a id="2833" href="Ledger.Conway.Utxo.html#2833" class="Field">fees</a>       <a id="2844" class="Symbol">:</a> <a id="2846" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
    <a id="UTxOState.deposits"></a><a id="2855" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a>   <a id="2866" class="Symbol">:</a> <a id="2868" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
    <a id="UTxOState.donations"></a><a id="2881" href="Ledger.Conway.Utxo.html#2881" class="Field">donations</a>  <a id="2892" class="Symbol">:</a> <a id="2894" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>



<a id="2902" class="Keyword">record</a> <a id="HasUTxOState"></a><a id="2909" href="Ledger.Conway.Utxo.html#2909" class="Record">HasUTxOState</a> <a id="2922" class="Symbol">{</a><a id="2923" href="Ledger.Conway.Utxo.html#2923" class="Bound">a</a><a id="2924" class="Symbol">}</a> <a id="2926" class="Symbol">(</a><a id="2927" href="Ledger.Conway.Utxo.html#2927" class="Bound">A</a> <a id="2929" class="Symbol">:</a> <a id="2931" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2936" href="Ledger.Conway.Utxo.html#2923" class="Bound">a</a><a id="2937" class="Symbol">)</a> <a id="2939" class="Symbol">:</a> <a id="2941" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="2946" href="Ledger.Conway.Utxo.html#2923" class="Bound">a</a> <a id="2948" class="Keyword">where</a>
  <a id="2956" class="Keyword">field</a> <a id="HasUTxOState.UTxOStateOf"></a><a id="2962" href="Ledger.Conway.Utxo.html#2962" class="Field">UTxOStateOf</a> <a id="2974" class="Symbol">:</a> <a id="2976" href="Ledger.Conway.Utxo.html#2927" class="Bound">A</a> <a id="2978" class="Symbol">→</a> <a id="2980" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
<a id="2990" class="Keyword">open</a> <a id="2995" href="Ledger.Conway.Utxo.html#2909" class="Module">HasUTxOState</a> <a id="3008" class="Symbol">⦃...⦄</a> <a id="3014" class="Keyword">public</a>

<a id="3022" class="Keyword">instance</a>
  <a id="HasDeposits-UTxOState"></a><a id="3033" href="Ledger.Conway.Utxo.html#3033" class="Function">HasDeposits-UTxOState</a> <a id="3055" class="Symbol">:</a> <a id="3057" href="Ledger.Conway.Certs.html#705" class="Record">HasDeposits</a> <a id="3069" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="3081" href="Ledger.Conway.Utxo.html#3033" class="Function">HasDeposits-UTxOState</a> <a id="3103" class="Symbol">.</a><a id="3104" href="Ledger.Conway.Certs.html#757" class="Field">DepositsOf</a> <a id="3115" class="Symbol">=</a> <a id="3117" href="Ledger.Conway.Utxo.html#2855" class="Field">UTxOState.deposits</a>

  <a id="HasUTxO-UTxOState"></a><a id="3139" href="Ledger.Conway.Utxo.html#3139" class="Function">HasUTxO-UTxOState</a> <a id="3157" class="Symbol">:</a> <a id="3159" href="Ledger.Conway.Transaction.html#2655" class="Record">HasUTxO</a> <a id="3167" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="3179" href="Ledger.Conway.Utxo.html#3139" class="Function">HasUTxO-UTxOState</a> <a id="3197" class="Symbol">.</a><a id="3198" href="Ledger.Conway.Transaction.html#2705" class="Field">UTxOOf</a> <a id="3205" class="Symbol">=</a> <a id="3207" href="Ledger.Conway.Utxo.html#2811" class="Field">UTxOState.utxo</a>

  <a id="3225" class="Keyword">unquoteDecl</a> <a id="HasCast-UTxOEnv"></a><a id="3237" href="Ledger.Conway.Utxo.html#3237" class="Function">HasCast-UTxOEnv</a> <a id="HasCast-UTxOState"></a><a id="3253" href="Ledger.Conway.Utxo.html#3253" class="Function">HasCast-UTxOState</a> <a id="3271" class="Symbol">=</a> <a id="3273" href="stdlib-classes.Class.HasCast.Derive.html#2690" class="Function">derive-HasCast</a>
    <a id="3292" class="Symbol">(</a> <a id="3294" class="Symbol">(</a><a id="3295" class="Keyword">quote</a> <a id="3301" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>   <a id="3311" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3313" href="Ledger.Conway.Utxo.html#3237" class="Function">HasCast-UTxOEnv</a>  <a id="3330" class="Symbol">)</a> <a id="3332" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a>
    <a id="3338" href="Data.List.Base.html#5205" class="Function Operator">[</a> <a id="3340" class="Symbol">(</a><a id="3341" class="Keyword">quote</a> <a id="3347" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="3357" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3359" href="Ledger.Conway.Utxo.html#3253" class="Function">HasCast-UTxOState</a><a id="3376" class="Symbol">)</a> <a id="3378" href="Data.List.Base.html#5205" class="Function Operator">]</a><a id="3379" class="Symbol">)</a>


<a id="3383" class="Keyword">data</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_"></a><a id="3392" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="3406" class="Symbol">:</a> <a id="3408" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="3416" class="Symbol">→</a> <a id="3418" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="3428" class="Symbol">→</a> <a id="3430" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="3433" class="Symbol">→</a> <a id="3435" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="3445" class="Symbol">→</a> <a id="3447" href="Agda.Primitive.html#388" class="Primitive">Type</a>


<a id="3454" class="Keyword">module</a> <a id="3461" href="Ledger.Conway.Utxo.html#3461" class="Module">_</a> <a id="3463" class="Symbol">(</a><a id="3464" class="Keyword">let</a> <a id="3468" class="Keyword">open</a> <a id="3473" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a><a id="3475" class="Symbol">;</a> <a id="3477" class="Keyword">open</a> <a id="3482" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a><a id="3488" class="Symbol">;</a> <a id="3490" class="Keyword">open</a> <a id="3495" href="Ledger.Conway.Transaction.html#4056" class="Module">TxWitnesses</a><a id="3506" class="Symbol">)</a> <a id="3508" class="Keyword">where</a> <a id="3514" class="Keyword">opaque</a>


  <a id="3525" href="Ledger.Conway.Utxo.html#3525" class="Function">outs</a> <a id="3530" class="Symbol">:</a> <a id="3532" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="3539" class="Symbol">→</a> <a id="3541" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
  <a id="3548" href="Ledger.Conway.Utxo.html#3525" class="Function">outs</a> <a id="3553" href="Ledger.Conway.Utxo.html#3553" class="Bound">tx</a> <a id="3556" class="Symbol">=</a> <a id="3558" href="Axiom.Set.Map.html#5896" class="Function">mapKeys</a> <a id="3566" class="Symbol">(</a><a id="3567" href="Ledger.Conway.Utxo.html#3553" class="Bound">tx</a> <a id="3570" class="Symbol">.</a><a id="3571" href="Ledger.Conway.Transaction.html#3330" class="Field">txid</a> <a id="3576" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,_</a><a id="3578" class="Symbol">)</a> <a id="3580" class="Symbol">(</a><a id="3581" href="Ledger.Conway.Utxo.html#3553" class="Bound">tx</a> <a id="3584" class="Symbol">.</a><a id="3585" href="Ledger.Conway.Transaction.html#2858" class="Field">txouts</a><a id="3591" class="Symbol">)</a>

  <a id="3596" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="3604" class="Symbol">:</a> <a id="3606" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3611" class="Symbol">→</a> <a id="3613" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a>
  <a id="3621" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="3629" href="Ledger.Conway.Utxo.html#3629" class="Bound">utxo</a> <a id="3634" class="Symbol">=</a> <a id="3636" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">∑[</a> <a id="3639" href="Ledger.Conway.Utxo.html#3639" class="Bound">x</a> <a id="3641" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">←</a> <a id="3643" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="3653" href="Ledger.Conway.Transaction.html#5160" class="Function">txOutHash</a> <a id="3663" href="Ledger.Conway.Utxo.html#3629" class="Bound">utxo</a> <a id="3668" href="abstract-set-theory.FiniteSetTheory.html#3166" class="Function">]</a> <a id="3670" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="3680" href="Ledger.Conway.Utxo.html#3639" class="Bound">x</a>

  <a id="3685" href="Ledger.Conway.Utxo.html#3685" class="Function">cbalance</a> <a id="3694" class="Symbol">:</a> <a id="3696" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3701" class="Symbol">→</a> <a id="3703" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3710" href="Ledger.Conway.Utxo.html#3685" class="Function">cbalance</a> <a id="3719" href="Ledger.Conway.Utxo.html#3719" class="Bound">utxo</a> <a id="3724" class="Symbol">=</a> <a id="3726" href="Ledger.Conway.TokenAlgebra.html#819" class="Function">coin</a> <a id="3731" class="Symbol">(</a><a id="3732" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="3740" href="Ledger.Conway.Utxo.html#3719" class="Bound">utxo</a><a id="3744" class="Symbol">)</a>



  <a id="3751" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="3766" class="Symbol">:</a> <a id="3768" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3773" class="Symbol">→</a> <a id="3775" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="3778" class="Symbol">→</a> <a id="3780" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="3784" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="3799" href="Ledger.Conway.Utxo.html#3799" class="Bound">utxo</a> <a id="3804" href="Ledger.Conway.Utxo.html#3804" class="Bound">tx</a> <a id="3807" class="Symbol">=</a> <a id="3809" href="Data.List.Base.html#4964" class="Function">sum</a> <a id="3813" class="Symbol">(</a><a id="3814" href="Class.Functor.Core.html#272" class="Function">map</a> <a id="3818" href="Ledger.Conway.Abstract.html#835" class="Field">scriptSize</a> <a id="3829" class="Symbol">(</a><a id="3830" href="Ledger.Conway.Transaction.html#5618" class="Function">refScripts</a> <a id="3841" href="Ledger.Conway.Utxo.html#3804" class="Bound">tx</a> <a id="3844" href="Ledger.Conway.Utxo.html#3799" class="Bound">utxo</a><a id="3848" class="Symbol">))</a>

  <a id="3854" href="Ledger.Conway.Utxo.html#3854" class="Function">minfee</a> <a id="3861" class="Symbol">:</a> <a id="3863" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="3871" class="Symbol">→</a> <a id="3873" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="3878" class="Symbol">→</a> <a id="3880" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="3883" class="Symbol">→</a> <a id="3885" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="3892" href="Ledger.Conway.Utxo.html#3854" class="Function">minfee</a> <a id="3899" href="Ledger.Conway.Utxo.html#3899" class="Bound">pp</a> <a id="3902" href="Ledger.Conway.Utxo.html#3902" class="Bound">utxo</a> <a id="3907" href="Ledger.Conway.Utxo.html#3907" class="Bound">tx</a>  <a id="3911" class="Symbol">=</a> <a id="3913" href="Ledger.Conway.Utxo.html#3899" class="Bound">pp</a> <a id="3916" class="Symbol">.</a><a id="3917" href="Ledger.Conway.PParams.html#2143" class="Field">a</a> <a id="3919" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="3921" href="Ledger.Conway.Utxo.html#3907" class="Bound">tx</a> <a id="3924" class="Symbol">.</a><a id="3925" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="3930" class="Symbol">.</a><a id="3931" href="Ledger.Conway.Transaction.html#3305" class="Field">txsize</a> <a id="3938" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3940" href="Ledger.Conway.Utxo.html#3899" class="Bound">pp</a> <a id="3943" class="Symbol">.</a><a id="3944" href="Ledger.Conway.PParams.html#2185" class="Field">b</a>
                     <a id="3967" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="3969" href="Ledger.Conway.Abstract.html#638" class="Field">txscriptfee</a> <a id="3981" class="Symbol">(</a><a id="3982" href="Ledger.Conway.Utxo.html#3899" class="Bound">pp</a> <a id="3985" class="Symbol">.</a><a id="3986" href="Ledger.Conway.PParams.html#2502" class="Field">prices</a><a id="3992" class="Symbol">)</a> <a id="3994" class="Symbol">(</a><a id="3995" href="Ledger.Conway.Utxo.html#2035" class="Function">totExUnits</a> <a id="4006" href="Ledger.Conway.Utxo.html#3907" class="Bound">tx</a><a id="4008" class="Symbol">)</a>
                     <a id="4031" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="4033" href="Ledger.Conway.Fees.html#738" class="Function">scriptsCost</a> <a id="4045" href="Ledger.Conway.Utxo.html#3899" class="Bound">pp</a> <a id="4048" class="Symbol">(</a><a id="4049" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="4064" href="Ledger.Conway.Utxo.html#3902" class="Bound">utxo</a> <a id="4069" href="Ledger.Conway.Utxo.html#3907" class="Bound">tx</a><a id="4071" class="Symbol">)</a>



<a id="4076" class="Keyword">instance</a>
  <a id="HasCoin-UTxO"></a><a id="4087" href="Ledger.Conway.Utxo.html#4087" class="Function">HasCoin-UTxO</a> <a id="4100" class="Symbol">:</a> <a id="4102" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="4110" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
  <a id="4117" href="Ledger.Conway.Utxo.html#4087" class="Function">HasCoin-UTxO</a> <a id="4130" class="Symbol">.</a><a id="4131" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="4139" class="Symbol">=</a> <a id="4141" href="Ledger.Conway.Utxo.html#3685" class="Function">cbalance</a>


<a id="certDeposit"></a><a id="4152" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="4164" class="Symbol">:</a> <a id="4166" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="4172" class="Symbol">→</a> <a id="4174" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="4182" class="Symbol">→</a> <a id="4184" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="4193" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="4205" class="Symbol">(</a><a id="4206" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="4215" href="Ledger.Conway.Utxo.html#4215" class="Bound">c</a> <a id="4217" class="Symbol">_</a> <a id="4219" class="Symbol">_</a> <a id="4221" href="Ledger.Conway.Utxo.html#4221" class="Bound">v</a><a id="4222" class="Symbol">)</a> <a id="4224" class="Symbol">_</a>   <a id="4228" class="Symbol">=</a> <a id="4230" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4232" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4250" href="Ledger.Conway.Utxo.html#4215" class="Bound">c</a> <a id="4252" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4254" href="Ledger.Conway.Utxo.html#4221" class="Bound">v</a> <a id="4256" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4258" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="4270" class="Symbol">(</a><a id="4271" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="4275" href="Ledger.Conway.Utxo.html#4275" class="Bound">c</a> <a id="4277" class="Symbol">_)</a>          <a id="4289" href="Ledger.Conway.Utxo.html#4289" class="Bound">pp</a>  <a id="4293" class="Symbol">=</a> <a id="4295" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4297" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4315" href="Ledger.Conway.Utxo.html#4275" class="Bound">c</a> <a id="4317" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4319" href="Ledger.Conway.Utxo.html#4289" class="Bound">pp</a> <a id="4322" class="Symbol">.</a><a id="4323" href="Ledger.Conway.PParams.html#2227" class="Field">keyDeposit</a> <a id="4334" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4336" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="4348" class="Symbol">(</a><a id="4349" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="4357" href="Ledger.Conway.Utxo.html#4357" class="Bound">kh</a> <a id="4360" class="Symbol">_)</a>     <a id="4367" href="Ledger.Conway.Utxo.html#4367" class="Bound">pp</a>  <a id="4371" class="Symbol">=</a> <a id="4373" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4375" href="Ledger.Conway.Certs.html#443" class="InductiveConstructor">PoolDeposit</a> <a id="4387" href="Ledger.Conway.Utxo.html#4357" class="Bound">kh</a> <a id="4390" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4392" href="Ledger.Conway.Utxo.html#4367" class="Bound">pp</a> <a id="4395" class="Symbol">.</a><a id="4396" href="Ledger.Conway.PParams.html#2272" class="Field">poolDeposit</a> <a id="4408" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4410" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="4422" class="Symbol">(</a><a id="4423" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="4431" href="Ledger.Conway.Utxo.html#4431" class="Bound">c</a> <a id="4433" href="Ledger.Conway.Utxo.html#4433" class="Bound">v</a> <a id="4435" class="Symbol">_)</a>    <a id="4441" class="Symbol">_</a>   <a id="4445" class="Symbol">=</a> <a id="4447" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4449" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="4461" href="Ledger.Conway.Utxo.html#4431" class="Bound">c</a> <a id="4463" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4465" href="Ledger.Conway.Utxo.html#4433" class="Bound">v</a> <a id="4467" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4469" href="Ledger.Conway.Utxo.html#4152" class="CatchallClause Function">certDeposit</a><a id="4480" class="CatchallClause"> </a><a id="4481" class="CatchallClause Symbol">_</a><a id="4482" class="CatchallClause">                  </a><a id="4500" class="CatchallClause Symbol">_</a>   <a id="4504" class="Symbol">=</a> <a id="4506" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="certRefund"></a><a id="4509" href="Ledger.Conway.Utxo.html#4509" class="Function">certRefund</a> <a id="4520" class="Symbol">:</a> <a id="4522" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="4528" class="Symbol">→</a> <a id="4530" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="4532" href="Ledger.Conway.Certs.html#360" class="Datatype">DepositPurpose</a>
<a id="4547" href="Ledger.Conway.Utxo.html#4509" class="Function">certRefund</a> <a id="4558" class="Symbol">(</a><a id="4559" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="4565" href="Ledger.Conway.Utxo.html#4565" class="Bound">c</a> <a id="4567" class="Symbol">_)</a>      <a id="4575" class="Symbol">=</a> <a id="4577" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4579" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4597" href="Ledger.Conway.Utxo.html#4565" class="Bound">c</a> <a id="4599" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4601" href="Ledger.Conway.Utxo.html#4509" class="Function">certRefund</a> <a id="4612" class="Symbol">(</a><a id="4613" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="4623" href="Ledger.Conway.Utxo.html#4623" class="Bound">c</a> <a id="4625" class="Symbol">_)</a>  <a id="4629" class="Symbol">=</a> <a id="4631" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4633" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="4645" href="Ledger.Conway.Utxo.html#4623" class="Bound">c</a> <a id="4647" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>
<a id="4649" href="Ledger.Conway.Utxo.html#4509" class="CatchallClause Function">certRefund</a><a id="4659" class="CatchallClause"> </a><a id="4660" class="CatchallClause Symbol">_</a>                <a id="4677" class="Symbol">=</a> <a id="4679" href="Class.HasEmptySet.html#287" class="Field">∅</a>

<a id="4682" class="Keyword">data</a> <a id="ValidCertDeposits"></a><a id="4687" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="4705" class="Symbol">(</a><a id="4706" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="4709" class="Symbol">:</a> <a id="4711" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a><a id="4718" class="Symbol">)</a> <a id="4720" class="Symbol">(</a><a id="4721" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="4726" class="Symbol">:</a> <a id="4728" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a><a id="4736" class="Symbol">)</a> <a id="4738" class="Symbol">:</a> <a id="4740" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4745" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="4751" class="Symbol">→</a> <a id="4753" href="Agda.Primitive.html#388" class="Primitive">Set</a>


  <a id="4761" class="Keyword">where</a>
  <a id="ValidCertDeposits.[]"></a><a id="4769" href="Ledger.Conway.Utxo.html#4769" class="InductiveConstructor">[]</a>         <a id="4780" class="Symbol">:</a> <a id="4782" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="4800" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="4803" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="4808" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="ValidCertDeposits.delegate"></a><a id="4813" href="Ledger.Conway.Utxo.html#4813" class="InductiveConstructor">delegate</a>   <a id="4824" class="Symbol">:</a> <a id="4826" class="Symbol">∀</a> <a id="4828" class="Symbol">{</a><a id="4829" href="Ledger.Conway.Utxo.html#4829" class="Bound">c</a> <a id="4831" href="Ledger.Conway.Utxo.html#4831" class="Bound">del</a> <a id="4835" href="Ledger.Conway.Utxo.html#4835" class="Bound">kh</a> <a id="4838" href="Ledger.Conway.Utxo.html#4838" class="Bound">v</a> <a id="4840" href="Ledger.Conway.Utxo.html#4840" class="Bound">certs</a><a id="4845" class="Symbol">}</a>
             <a id="4860" class="Symbol">→</a> <a id="4862" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="4880" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="4883" class="Symbol">(</a><a id="4884" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="4889" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="4892" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="4894" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="4912" href="Ledger.Conway.Utxo.html#4829" class="Bound">c</a> <a id="4914" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4916" href="Ledger.Conway.Utxo.html#4838" class="Bound">v</a> <a id="4918" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="4919" class="Symbol">)</a> <a id="4921" href="Ledger.Conway.Utxo.html#4840" class="Bound">certs</a>
             <a id="4940" class="Symbol">→</a> <a id="4942" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="4960" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="4963" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="4968" class="Symbol">(</a><a id="4969" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="4978" href="Ledger.Conway.Utxo.html#4829" class="Bound">c</a> <a id="4980" href="Ledger.Conway.Utxo.html#4831" class="Bound">del</a> <a id="4984" href="Ledger.Conway.Utxo.html#4835" class="Bound">kh</a> <a id="4987" href="Ledger.Conway.Utxo.html#4838" class="Bound">v</a> <a id="4989" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4991" href="Ledger.Conway.Utxo.html#4840" class="Bound">certs</a><a id="4996" class="Symbol">)</a>
  <a id="ValidCertDeposits.regpool"></a><a id="5000" href="Ledger.Conway.Utxo.html#5000" class="InductiveConstructor">regpool</a>    <a id="5011" class="Symbol">:</a> <a id="5013" class="Symbol">∀</a> <a id="5015" class="Symbol">{</a><a id="5016" href="Ledger.Conway.Utxo.html#5016" class="Bound">kh</a> <a id="5019" href="Ledger.Conway.Utxo.html#5019" class="Bound">p</a> <a id="5021" href="Ledger.Conway.Utxo.html#5021" class="Bound">certs</a><a id="5026" class="Symbol">}</a>
             <a id="5041" class="Symbol">→</a> <a id="5043" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5061" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5064" class="Symbol">(</a><a id="5065" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5070" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5073" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5075" href="Ledger.Conway.Certs.html#443" class="InductiveConstructor">PoolDeposit</a> <a id="5087" href="Ledger.Conway.Utxo.html#5016" class="Bound">kh</a> <a id="5090" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5092" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5095" class="Symbol">.</a><a id="5096" href="Ledger.Conway.PParams.html#2272" class="Field">poolDeposit</a> <a id="5108" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5109" class="Symbol">)</a> <a id="5111" href="Ledger.Conway.Utxo.html#5021" class="Bound">certs</a>
             <a id="5130" class="Symbol">→</a> <a id="5132" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5150" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5153" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5158" class="Symbol">(</a><a id="5159" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="5167" href="Ledger.Conway.Utxo.html#5016" class="Bound">kh</a> <a id="5170" href="Ledger.Conway.Utxo.html#5019" class="Bound">p</a> <a id="5172" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5174" href="Ledger.Conway.Utxo.html#5021" class="Bound">certs</a><a id="5179" class="Symbol">)</a>
  <a id="ValidCertDeposits.regdrep"></a><a id="5183" href="Ledger.Conway.Utxo.html#5183" class="InductiveConstructor">regdrep</a>    <a id="5194" class="Symbol">:</a> <a id="5196" class="Symbol">∀</a> <a id="5198" class="Symbol">{</a><a id="5199" href="Ledger.Conway.Utxo.html#5199" class="Bound">c</a> <a id="5201" href="Ledger.Conway.Utxo.html#5201" class="Bound">v</a> <a id="5203" href="Ledger.Conway.Utxo.html#5203" class="Bound">a</a> <a id="5205" href="Ledger.Conway.Utxo.html#5205" class="Bound">certs</a><a id="5210" class="Symbol">}</a>
             <a id="5225" class="Symbol">→</a> <a id="5227" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5245" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5248" class="Symbol">(</a><a id="5249" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5254" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5257" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5259" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="5271" href="Ledger.Conway.Utxo.html#5199" class="Bound">c</a> <a id="5273" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5275" href="Ledger.Conway.Utxo.html#5201" class="Bound">v</a> <a id="5277" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5278" class="Symbol">)</a> <a id="5280" href="Ledger.Conway.Utxo.html#5205" class="Bound">certs</a>
             <a id="5299" class="Symbol">→</a> <a id="5301" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5319" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5322" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5327" class="Symbol">(</a><a id="5328" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="5336" href="Ledger.Conway.Utxo.html#5199" class="Bound">c</a> <a id="5338" href="Ledger.Conway.Utxo.html#5201" class="Bound">v</a> <a id="5340" href="Ledger.Conway.Utxo.html#5203" class="Bound">a</a> <a id="5342" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5344" href="Ledger.Conway.Utxo.html#5205" class="Bound">certs</a><a id="5349" class="Symbol">)</a>
  <a id="ValidCertDeposits.reg"></a><a id="5353" href="Ledger.Conway.Utxo.html#5353" class="InductiveConstructor">reg</a>        <a id="5364" class="Symbol">:</a> <a id="5366" class="Symbol">∀</a> <a id="5368" class="Symbol">{</a><a id="5369" href="Ledger.Conway.Utxo.html#5369" class="Bound">c</a> <a id="5371" href="Ledger.Conway.Utxo.html#5371" class="Bound">v</a> <a id="5373" href="Ledger.Conway.Utxo.html#5373" class="Bound">certs</a><a id="5378" class="Symbol">}</a>
             <a id="5393" class="Symbol">→</a> <a id="5395" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5413" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5416" class="Symbol">(</a><a id="5417" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5422" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="5425" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5427" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="5445" href="Ledger.Conway.Utxo.html#5369" class="Bound">c</a> <a id="5447" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5449" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5452" class="Symbol">.</a><a id="5453" href="Ledger.Conway.PParams.html#2227" class="Field">keyDeposit</a> <a id="5464" href="Class.HasSingleton.html#288" class="Field Operator">❵</a><a id="5465" class="Symbol">)</a> <a id="5467" href="Ledger.Conway.Utxo.html#5373" class="Bound">certs</a>
             <a id="5486" class="Symbol">→</a> <a id="5488" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5506" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5509" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5514" class="Symbol">(</a><a id="5515" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="5519" href="Ledger.Conway.Utxo.html#5369" class="Bound">c</a> <a id="5521" href="Ledger.Conway.Utxo.html#5371" class="Bound">v</a> <a id="5523" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5525" href="Ledger.Conway.Utxo.html#5373" class="Bound">certs</a><a id="5530" class="Symbol">)</a>
  <a id="ValidCertDeposits.dereg"></a><a id="5534" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">dereg</a>      <a id="5545" class="Symbol">:</a> <a id="5547" class="Symbol">∀</a> <a id="5549" class="Symbol">{</a><a id="5550" href="Ledger.Conway.Utxo.html#5550" class="Bound">c</a> <a id="5552" href="Ledger.Conway.Utxo.html#5552" class="Bound">md</a> <a id="5555" href="Ledger.Conway.Utxo.html#5555" class="Bound">d</a> <a id="5557" href="Ledger.Conway.Utxo.html#5557" class="Bound">certs</a><a id="5562" class="Symbol">}</a>
             <a id="5577" class="Symbol">→</a> <a id="5579" class="Symbol">(</a><a id="5580" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="5598" href="Ledger.Conway.Utxo.html#5550" class="Bound">c</a> <a id="5600" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5602" href="Ledger.Conway.Utxo.html#5555" class="Bound">d</a><a id="5603" class="Symbol">)</a> <a id="5605" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5607" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a>
             <a id="5625" class="Symbol">→</a> <a id="5627" href="Ledger.Conway.Utxo.html#5552" class="Bound">md</a> <a id="5630" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5632" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="5640" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="5642" href="Ledger.Conway.Utxo.html#5552" class="Bound">md</a> <a id="5645" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5647" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="5652" href="Ledger.Conway.Utxo.html#5555" class="Bound">d</a>
             <a id="5667" class="Symbol">→</a> <a id="5669" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5687" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5690" class="Symbol">(</a><a id="5691" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5696" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5698" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5700" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="5718" href="Ledger.Conway.Utxo.html#5550" class="Bound">c</a> <a id="5720" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5722" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5723" class="Symbol">)</a> <a id="5725" href="Ledger.Conway.Utxo.html#5557" class="Bound">certs</a>
             <a id="5744" class="Symbol">→</a> <a id="5746" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5764" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5767" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5772" class="Symbol">(</a><a id="5773" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="5779" href="Ledger.Conway.Utxo.html#5550" class="Bound">c</a> <a id="5781" href="Ledger.Conway.Utxo.html#5552" class="Bound">md</a> <a id="5784" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5786" href="Ledger.Conway.Utxo.html#5557" class="Bound">certs</a><a id="5791" class="Symbol">)</a>
  <a id="ValidCertDeposits.deregdrep"></a><a id="5795" href="Ledger.Conway.Utxo.html#5795" class="InductiveConstructor">deregdrep</a>  <a id="5806" class="Symbol">:</a> <a id="5808" class="Symbol">∀</a> <a id="5810" class="Symbol">{</a><a id="5811" href="Ledger.Conway.Utxo.html#5811" class="Bound">c</a> <a id="5813" href="Ledger.Conway.Utxo.html#5813" class="Bound">d</a> <a id="5815" href="Ledger.Conway.Utxo.html#5815" class="Bound">certs</a><a id="5820" class="Symbol">}</a>
             <a id="5835" class="Symbol">→</a> <a id="5837" class="Symbol">(</a><a id="5838" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="5850" href="Ledger.Conway.Utxo.html#5811" class="Bound">c</a> <a id="5852" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5854" href="Ledger.Conway.Utxo.html#5813" class="Bound">d</a><a id="5855" class="Symbol">)</a> <a id="5857" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="5859" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a>
             <a id="5877" class="Symbol">→</a> <a id="5879" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5897" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5900" class="Symbol">(</a><a id="5901" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5906" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="5908" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="5910" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="5922" href="Ledger.Conway.Utxo.html#5811" class="Bound">c</a> <a id="5924" href="Class.HasSingleton.html#288" class="Field Operator">❵</a> <a id="5926" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="5927" class="Symbol">)</a> <a id="5929" href="Ledger.Conway.Utxo.html#5815" class="Bound">certs</a>
             <a id="5948" class="Symbol">→</a> <a id="5950" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="5968" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="5971" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="5976" class="Symbol">(</a><a id="5977" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="5987" href="Ledger.Conway.Utxo.html#5811" class="Bound">c</a> <a id="5989" href="Ledger.Conway.Utxo.html#5813" class="Bound">d</a> <a id="5991" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5993" href="Ledger.Conway.Utxo.html#5815" class="Bound">certs</a><a id="5998" class="Symbol">)</a>
  <a id="ValidCertDeposits.ccreghot"></a><a id="6002" href="Ledger.Conway.Utxo.html#6002" class="InductiveConstructor">ccreghot</a>   <a id="6013" class="Symbol">:</a> <a id="6015" class="Symbol">∀</a> <a id="6017" class="Symbol">{</a><a id="6018" href="Ledger.Conway.Utxo.html#6018" class="Bound">c</a> <a id="6020" href="Ledger.Conway.Utxo.html#6020" class="Bound">v</a> <a id="6022" href="Ledger.Conway.Utxo.html#6022" class="Bound">certs</a><a id="6027" class="Symbol">}</a>
             <a id="6042" class="Symbol">→</a> <a id="6044" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="6062" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="6065" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="6070" href="Ledger.Conway.Utxo.html#6022" class="Bound">certs</a>
             <a id="6089" class="Symbol">→</a> <a id="6091" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="6109" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="6112" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="6117" class="Symbol">(</a><a id="6118" href="Ledger.Conway.Certs.html#1672" class="InductiveConstructor">ccreghot</a> <a id="6127" href="Ledger.Conway.Utxo.html#6018" class="Bound">c</a> <a id="6129" href="Ledger.Conway.Utxo.html#6020" class="Bound">v</a> <a id="6131" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6133" href="Ledger.Conway.Utxo.html#6022" class="Bound">certs</a><a id="6138" class="Symbol">)</a>
  <a id="ValidCertDeposits.retirepool"></a><a id="6142" href="Ledger.Conway.Utxo.html#6142" class="InductiveConstructor">retirepool</a> <a id="6153" class="Symbol">:</a> <a id="6155" class="Symbol">∀</a> <a id="6157" class="Symbol">{</a><a id="6158" href="Ledger.Conway.Utxo.html#6158" class="Bound">kh</a> <a id="6161" href="Ledger.Conway.Utxo.html#6161" class="Bound">e</a> <a id="6163" href="Ledger.Conway.Utxo.html#6163" class="Bound">certs</a><a id="6168" class="Symbol">}</a>
             <a id="6183" class="Symbol">→</a> <a id="6185" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="6203" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="6206" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="6211" href="Ledger.Conway.Utxo.html#6163" class="Bound">certs</a>
             <a id="6230" class="Symbol">→</a> <a id="6232" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="6250" href="Ledger.Conway.Utxo.html#4706" class="Bound">pp</a> <a id="6253" href="Ledger.Conway.Utxo.html#4721" class="Bound">deps</a> <a id="6258" class="Symbol">(</a><a id="6259" href="Ledger.Conway.Certs.html#1539" class="InductiveConstructor">retirepool</a> <a id="6270" href="Ledger.Conway.Utxo.html#6158" class="Bound">kh</a> <a id="6273" href="Ledger.Conway.Utxo.html#6161" class="Bound">e</a>  <a id="6276" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6278" href="Ledger.Conway.Utxo.html#6163" class="Bound">certs</a><a id="6283" class="Symbol">)</a>

<a id="6286" class="Keyword">private</a>
  <a id="validCertDeposits?"></a><a id="6296" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6315" class="Symbol">:</a> <a id="6317" class="Symbol">∀</a> <a id="6319" class="Symbol">{</a><a id="6320" href="Ledger.Conway.Utxo.html#6320" class="Bound">pp</a><a id="6322" class="Symbol">}</a> <a id="6324" href="Ledger.Conway.Utxo.html#6324" class="Bound">deps</a> <a id="6329" href="Ledger.Conway.Utxo.html#6329" class="Bound">certs</a> <a id="6335" class="Symbol">→</a> <a id="6337" href="Relation.Nullary.Decidable.Core.html#1861" class="Record">Dec</a> <a id="6341" class="Symbol">(</a><a id="6342" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="6360" href="Ledger.Conway.Utxo.html#6320" class="Bound">pp</a> <a id="6363" href="Ledger.Conway.Utxo.html#6324" class="Bound">deps</a> <a id="6368" href="Ledger.Conway.Utxo.html#6329" class="Bound">certs</a><a id="6373" class="Symbol">)</a>
  <a id="6377" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6396" href="Ledger.Conway.Utxo.html#6396" class="Bound">deps</a> <a id="6401" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="6404" class="Symbol">=</a> <a id="6406" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="6410" href="Ledger.Conway.Utxo.html#4769" class="InductiveConstructor">[]</a>
  <a id="6415" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6434" href="Ledger.Conway.Utxo.html#6434" class="Bound">deps</a> <a id="6439" class="Symbol">(</a><a id="6440" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="6449" class="Symbol">_</a> <a id="6451" class="Symbol">_</a> <a id="6453" class="Symbol">_</a> <a id="6455" class="Symbol">_</a> <a id="6457" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6459" href="Ledger.Conway.Utxo.html#6459" class="Bound">certs</a><a id="6464" class="Symbol">)</a> <a id="6466" class="Symbol">=</a>
    <a id="6472" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6479" href="Ledger.Conway.Utxo.html#4813" class="InductiveConstructor">delegate</a> <a id="6488" class="Symbol">(λ</a> <a id="6491" class="Keyword">where</a> <a id="6497" class="Symbol">(</a><a id="6498" href="Ledger.Conway.Utxo.html#4813" class="InductiveConstructor">delegate</a> <a id="6507" href="Ledger.Conway.Utxo.html#6507" class="Bound">p</a><a id="6508" class="Symbol">)</a> <a id="6510" class="Symbol">→</a> <a id="6512" href="Ledger.Conway.Utxo.html#6507" class="Bound">p</a><a id="6513" class="Symbol">)</a> <a id="6515" class="Symbol">(</a><a id="6516" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6535" class="Symbol">_</a> <a id="6537" class="Symbol">_)</a>
  <a id="6542" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6561" href="Ledger.Conway.Utxo.html#6561" class="Bound">deps</a> <a id="6566" class="Symbol">(</a><a id="6567" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="6575" class="Symbol">_</a> <a id="6577" class="Symbol">_</a> <a id="6579" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6581" href="Ledger.Conway.Utxo.html#6581" class="Bound">certs</a><a id="6586" class="Symbol">)</a> <a id="6588" class="Symbol">=</a>
    <a id="6594" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6601" href="Ledger.Conway.Utxo.html#5000" class="InductiveConstructor">regpool</a> <a id="6609" class="Symbol">(λ</a> <a id="6612" class="Keyword">where</a> <a id="6618" class="Symbol">(</a><a id="6619" href="Ledger.Conway.Utxo.html#5000" class="InductiveConstructor">regpool</a> <a id="6627" href="Ledger.Conway.Utxo.html#6627" class="Bound">p</a><a id="6628" class="Symbol">)</a> <a id="6630" class="Symbol">→</a> <a id="6632" href="Ledger.Conway.Utxo.html#6627" class="Bound">p</a><a id="6633" class="Symbol">)</a> <a id="6635" class="Symbol">(</a><a id="6636" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6655" class="Symbol">_</a> <a id="6657" class="Symbol">_)</a>
  <a id="6662" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6681" href="Ledger.Conway.Utxo.html#6681" class="Bound">deps</a> <a id="6686" class="Symbol">(</a><a id="6687" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="6695" class="Symbol">_</a> <a id="6697" class="Symbol">_</a> <a id="6699" class="Symbol">_</a> <a id="6701" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6703" href="Ledger.Conway.Utxo.html#6703" class="Bound">certs</a><a id="6708" class="Symbol">)</a> <a id="6710" class="Symbol">=</a>
    <a id="6716" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6723" href="Ledger.Conway.Utxo.html#5183" class="InductiveConstructor">regdrep</a> <a id="6731" class="Symbol">(λ</a> <a id="6734" class="Keyword">where</a> <a id="6740" class="Symbol">(</a><a id="6741" href="Ledger.Conway.Utxo.html#5183" class="InductiveConstructor">regdrep</a> <a id="6749" href="Ledger.Conway.Utxo.html#6749" class="Bound">p</a><a id="6750" class="Symbol">)</a> <a id="6752" class="Symbol">→</a> <a id="6754" href="Ledger.Conway.Utxo.html#6749" class="Bound">p</a><a id="6755" class="Symbol">)</a> <a id="6757" class="Symbol">(</a><a id="6758" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6777" class="Symbol">_</a> <a id="6779" class="Symbol">_)</a>
  <a id="6784" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6803" href="Ledger.Conway.Utxo.html#6803" class="Bound">deps</a> <a id="6808" class="Symbol">(</a><a id="6809" href="Ledger.Conway.Certs.html#1539" class="InductiveConstructor">retirepool</a> <a id="6820" class="Symbol">_</a> <a id="6822" class="Symbol">_</a> <a id="6824" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6826" href="Ledger.Conway.Utxo.html#6826" class="Bound">certs</a><a id="6831" class="Symbol">)</a> <a id="6833" class="Symbol">=</a>
    <a id="6839" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6846" href="Ledger.Conway.Utxo.html#6142" class="InductiveConstructor">retirepool</a> <a id="6857" class="Symbol">(λ</a> <a id="6860" class="Keyword">where</a> <a id="6866" class="Symbol">(</a><a id="6867" href="Ledger.Conway.Utxo.html#6142" class="InductiveConstructor">retirepool</a> <a id="6878" href="Ledger.Conway.Utxo.html#6878" class="Bound">p</a><a id="6879" class="Symbol">)</a> <a id="6881" class="Symbol">→</a> <a id="6883" href="Ledger.Conway.Utxo.html#6878" class="Bound">p</a><a id="6884" class="Symbol">)</a> <a id="6886" class="Symbol">(</a><a id="6887" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6906" class="Symbol">_</a> <a id="6908" class="Symbol">_)</a>
  <a id="6913" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="6932" href="Ledger.Conway.Utxo.html#6932" class="Bound">deps</a> <a id="6937" class="Symbol">(</a><a id="6938" href="Ledger.Conway.Certs.html#1672" class="InductiveConstructor">ccreghot</a> <a id="6947" class="Symbol">_</a> <a id="6949" class="Symbol">_</a> <a id="6951" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6953" href="Ledger.Conway.Utxo.html#6953" class="Bound">certs</a><a id="6958" class="Symbol">)</a> <a id="6960" class="Symbol">=</a>
    <a id="6966" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="6973" href="Ledger.Conway.Utxo.html#6002" class="InductiveConstructor">ccreghot</a> <a id="6982" class="Symbol">(λ</a> <a id="6985" class="Keyword">where</a> <a id="6991" class="Symbol">(</a><a id="6992" href="Ledger.Conway.Utxo.html#6002" class="InductiveConstructor">ccreghot</a> <a id="7001" href="Ledger.Conway.Utxo.html#7001" class="Bound">p</a><a id="7002" class="Symbol">)</a> <a id="7004" class="Symbol">→</a> <a id="7006" href="Ledger.Conway.Utxo.html#7001" class="Bound">p</a><a id="7007" class="Symbol">)</a> <a id="7009" class="Symbol">(</a><a id="7010" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7029" class="Symbol">_</a> <a id="7031" class="Symbol">_)</a>
  <a id="7036" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7055" href="Ledger.Conway.Utxo.html#7055" class="Bound">deps</a> <a id="7060" class="Symbol">(</a><a id="7061" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="7065" class="Symbol">_</a> <a id="7067" class="Symbol">_</a> <a id="7069" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7071" href="Ledger.Conway.Utxo.html#7071" class="Bound">certs</a><a id="7076" class="Symbol">)</a> <a id="7078" class="Symbol">=</a>
    <a id="7084" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7091" href="Ledger.Conway.Utxo.html#5353" class="InductiveConstructor">reg</a> <a id="7095" class="Symbol">(λ</a> <a id="7098" class="Keyword">where</a> <a id="7104" class="Symbol">(</a><a id="7105" href="Ledger.Conway.Utxo.html#5353" class="InductiveConstructor">reg</a> <a id="7109" href="Ledger.Conway.Utxo.html#7109" class="Bound">p</a><a id="7110" class="Symbol">)</a> <a id="7112" class="Symbol">→</a> <a id="7114" href="Ledger.Conway.Utxo.html#7109" class="Bound">p</a><a id="7115" class="Symbol">)</a> <a id="7117" class="Symbol">(</a><a id="7118" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7137" class="Symbol">_</a> <a id="7139" class="Symbol">_)</a>
  <a id="7144" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7163" href="Ledger.Conway.Utxo.html#7163" class="Bound">deps</a> <a id="7168" class="Symbol">(</a><a id="7169" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="7175" href="Ledger.Conway.Utxo.html#7175" class="Bound">c</a> <a id="7177" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="7185" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7187" href="Ledger.Conway.Utxo.html#7187" class="Bound">certs</a><a id="7192" class="Symbol">)</a> <a id="7194" class="Keyword">with</a> <a id="7199" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7201" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="7219" href="Ledger.Conway.Utxo.html#7175" class="Bound">c</a> <a id="7221" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7223" href="Class.IsSet.html#916" class="Function">dom</a> <a id="7227" href="Ledger.Conway.Utxo.html#7163" class="Bound">deps</a> <a id="7232" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7237" class="Symbol">...</a> <a id="7241" class="Symbol">|</a> <a id="7243" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7247" href="Ledger.Conway.Utxo.html#7247" class="Bound">p</a> <a id="7249" class="Symbol">=</a> <a id="7251" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7258" class="Symbol">(</a><a id="7259" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">dereg</a> <a id="7265" class="Symbol">(</a><a id="7266" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="7272" class="Symbol">(</a><a id="7273" href="Function.Bundles.html#4834" class="Field">Equivalence.from</a> <a id="7290" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7295" href="Ledger.Conway.Utxo.html#7247" class="Bound">p</a><a id="7296" class="Symbol">))</a> <a id="7299" class="Symbol">(</a><a id="7300" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="7305" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7309" class="Symbol">))</a> <a id="7312" class="Symbol">(λ</a> <a id="7315" class="Symbol">{</a> <a id="7317" class="Symbol">(</a><a id="7318" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">dereg</a> <a id="7324" class="Symbol">_</a> <a id="7326" class="Symbol">_</a> <a id="7328" href="Ledger.Conway.Utxo.html#7328" class="Bound">p</a><a id="7329" class="Symbol">)</a> <a id="7331" class="Symbol">→</a> <a id="7333" href="Ledger.Conway.Utxo.html#7328" class="Bound">p</a> <a id="7335" class="Symbol">})</a> <a id="7338" class="Symbol">(</a><a id="7339" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7358" class="Symbol">_</a> <a id="7360" class="Symbol">_)</a>
  <a id="7365" class="Symbol">...</a> <a id="7369" class="Symbol">|</a> <a id="7371" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7374" href="Ledger.Conway.Utxo.html#7374" class="Bound">¬p</a> <a id="7377" class="Symbol">=</a> <a id="7379" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7382" class="Symbol">λ</a> <a id="7384" class="Symbol">{</a> <a id="7386" class="Symbol">(</a><a id="7387" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">dereg</a> <a id="7393" href="Ledger.Conway.Utxo.html#7393" class="Bound">x</a> <a id="7395" class="Symbol">_</a> <a id="7397" class="Symbol">_)</a> <a id="7400" class="Symbol">→</a> <a id="7402" href="Ledger.Conway.Utxo.html#7374" class="Bound">¬p</a> <a id="7405" class="Symbol">(</a><a id="7406" href="Function.Bundles.html#4810" class="Field">Equivalence.to</a> <a id="7421" href="Axiom.Set.Rel.html#2472" class="Function">dom∈</a> <a id="7426" class="Symbol">(_</a> <a id="7429" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7431" href="Ledger.Conway.Utxo.html#7393" class="Bound">x</a><a id="7432" class="Symbol">))</a> <a id="7435" class="Symbol">}</a>
  <a id="7439" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7458" href="Ledger.Conway.Utxo.html#7458" class="Bound">deps</a> <a id="7463" class="Symbol">(</a><a id="7464" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="7470" href="Ledger.Conway.Utxo.html#7470" class="Bound">c</a> <a id="7472" class="Symbol">(</a><a id="7473" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="7478" href="Ledger.Conway.Utxo.html#7478" class="Bound">d</a><a id="7479" class="Symbol">)</a> <a id="7481" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7483" href="Ledger.Conway.Utxo.html#7483" class="Bound">certs</a><a id="7488" class="Symbol">)</a> <a id="7490" class="Keyword">with</a> <a id="7495" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7497" class="Symbol">(</a><a id="7498" href="Ledger.Conway.Certs.html#390" class="InductiveConstructor">CredentialDeposit</a> <a id="7516" href="Ledger.Conway.Utxo.html#7470" class="Bound">c</a> <a id="7518" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7520" href="Ledger.Conway.Utxo.html#7478" class="Bound">d</a><a id="7521" class="Symbol">)</a> <a id="7523" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7525" href="Ledger.Conway.Utxo.html#7458" class="Bound">deps</a> <a id="7530" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> 
  <a id="7535" class="Symbol">...</a> <a id="7539" class="Symbol">|</a> <a id="7541" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7545" href="Ledger.Conway.Utxo.html#7545" class="Bound">p</a> <a id="7547" class="Symbol">=</a> <a id="7549" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7556" class="Symbol">(</a><a id="7557" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">dereg</a> <a id="7563" href="Ledger.Conway.Utxo.html#7545" class="Bound">p</a> <a id="7565" class="Symbol">(</a><a id="7566" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7571" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7575" class="Symbol">))</a> <a id="7578" class="Symbol">(λ</a> <a id="7581" class="Symbol">{</a> <a id="7583" class="Symbol">(</a><a id="7584" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">dereg</a> <a id="7590" class="Symbol">_</a> <a id="7592" class="Symbol">_</a> <a id="7594" href="Ledger.Conway.Utxo.html#7594" class="Bound">p</a><a id="7595" class="Symbol">)</a> <a id="7597" class="Symbol">→</a> <a id="7599" href="Ledger.Conway.Utxo.html#7594" class="Bound">p</a> <a id="7601" class="Symbol">})</a> <a id="7604" class="Symbol">(</a><a id="7605" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7624" class="Symbol">_</a> <a id="7626" class="Symbol">_)</a>
  <a id="7631" class="Symbol">...</a> <a id="7635" class="Symbol">|</a> <a id="7637" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7640" href="Ledger.Conway.Utxo.html#7640" class="Bound">¬p</a> <a id="7643" class="Symbol">=</a> <a id="7645" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7648" class="Symbol">λ</a> <a id="7650" class="Symbol">{</a> <a id="7652" class="Symbol">(</a><a id="7653" href="Ledger.Conway.Utxo.html#5534" class="InductiveConstructor">dereg</a> <a id="7659" href="Ledger.Conway.Utxo.html#7659" class="Bound">x</a> <a id="7661" class="Symbol">(</a><a id="7662" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="7667" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7671" class="Symbol">)</a> <a id="7673" class="Symbol">_)</a> <a id="7676" class="Symbol">→</a> <a id="7678" href="Ledger.Conway.Utxo.html#7640" class="Bound">¬p</a> <a id="7681" href="Ledger.Conway.Utxo.html#7659" class="Bound">x</a> <a id="7683" class="Symbol">}</a>
  <a id="7687" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7706" href="Ledger.Conway.Utxo.html#7706" class="Bound">deps</a> <a id="7711" class="Symbol">(</a><a id="7712" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="7722" href="Ledger.Conway.Utxo.html#7722" class="Bound">c</a> <a id="7724" href="Ledger.Conway.Utxo.html#7724" class="Bound">d</a> <a id="7726" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="7728" href="Ledger.Conway.Utxo.html#7728" class="Bound">certs</a><a id="7733" class="Symbol">)</a> <a id="7735" class="Keyword">with</a> <a id="7740" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a> <a id="7742" class="Symbol">(</a><a id="7743" href="Ledger.Conway.Certs.html#496" class="InductiveConstructor">DRepDeposit</a> <a id="7755" href="Ledger.Conway.Utxo.html#7722" class="Bound">c</a> <a id="7757" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7759" href="Ledger.Conway.Utxo.html#7724" class="Bound">d</a><a id="7760" class="Symbol">)</a> <a id="7762" href="Class.IsSet.html#458" class="Function Operator">∈</a> <a id="7764" href="Ledger.Conway.Utxo.html#7706" class="Bound">deps</a> <a id="7769" href="Class.Decidable.Core.html#461" class="Function Operator">¿</a>
  <a id="7773" class="Symbol">...</a> <a id="7777" class="Symbol">|</a> <a id="7779" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="7783" href="Ledger.Conway.Utxo.html#7783" class="Bound">p</a> <a id="7785" class="Symbol">=</a> <a id="7787" href="Relation.Nullary.Decidable.Core.html#5914" class="Function">mapDec</a> <a id="7794" class="Symbol">(</a><a id="7795" href="Ledger.Conway.Utxo.html#5795" class="InductiveConstructor">deregdrep</a> <a id="7805" href="Ledger.Conway.Utxo.html#7783" class="Bound">p</a><a id="7806" class="Symbol">)</a>  <a id="7809" class="Symbol">(λ</a> <a id="7812" class="Keyword">where</a> <a id="7818" class="Symbol">(</a><a id="7819" href="Ledger.Conway.Utxo.html#5795" class="InductiveConstructor">deregdrep</a> <a id="7829" class="Symbol">_</a> <a id="7831" href="Ledger.Conway.Utxo.html#7831" class="Bound">v</a><a id="7832" class="Symbol">)</a> <a id="7834" class="Symbol">→</a> <a id="7836" href="Ledger.Conway.Utxo.html#7831" class="Bound">v</a><a id="7837" class="Symbol">)</a> <a id="7839" class="Symbol">(</a><a id="7840" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="7859" class="Symbol">_</a> <a id="7861" class="Symbol">_)</a>
  <a id="7866" class="Symbol">...</a> <a id="7870" class="Symbol">|</a> <a id="7872" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7875" href="Ledger.Conway.Utxo.html#7875" class="Bound">¬p</a> <a id="7878" class="Symbol">=</a> <a id="7880" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="7883" class="Symbol">(λ</a> <a id="7886" class="Keyword">where</a> <a id="7892" class="Symbol">(</a><a id="7893" href="Ledger.Conway.Utxo.html#5795" class="InductiveConstructor">deregdrep</a> <a id="7903" href="Ledger.Conway.Utxo.html#7903" class="Bound">p</a> <a id="7905" class="Symbol">_)</a> <a id="7908" class="Symbol">→</a> <a id="7910" href="Ledger.Conway.Utxo.html#7875" class="Bound">¬p</a> <a id="7913" href="Ledger.Conway.Utxo.html#7903" class="Bound">p</a><a id="7914" class="Symbol">)</a>

<a id="7917" class="Keyword">instance</a>
  <a id="Dec-ValidCertDeposits"></a><a id="7928" href="Ledger.Conway.Utxo.html#7928" class="Function">Dec-ValidCertDeposits</a> <a id="7950" class="Symbol">:</a> <a id="7952" class="Symbol">∀</a> <a id="7954" class="Symbol">{</a><a id="7955" href="Ledger.Conway.Utxo.html#7955" class="Bound">pp</a> <a id="7958" href="Ledger.Conway.Utxo.html#7958" class="Bound">deps</a> <a id="7963" href="Ledger.Conway.Utxo.html#7963" class="Bound">certs</a><a id="7968" class="Symbol">}</a> <a id="7970" class="Symbol">→</a> <a id="7972" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="7990" href="Ledger.Conway.Utxo.html#7955" class="Bound">pp</a> <a id="7993" href="Ledger.Conway.Utxo.html#7958" class="Bound">deps</a> <a id="7998" href="Ledger.Conway.Utxo.html#7963" class="Bound">certs</a> <a id="8004" href="Class.Decidable.Core.html#208" class="Record Operator">⁇</a>
  <a id="8008" href="Ledger.Conway.Utxo.html#7928" class="Function">Dec-ValidCertDeposits</a> <a id="8030" class="Symbol">=</a> <a id="8032" href="Class.Decidable.Core.html#253" class="InductiveConstructor Operator">⁇</a> <a id="8034" class="Symbol">(</a><a id="8035" href="Ledger.Conway.Utxo.html#6296" class="Function">validCertDeposits?</a> <a id="8054" class="Symbol">_</a> <a id="8056" class="Symbol">_)</a>


<a id="updateCertDeposits"></a><a id="8061" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a>  <a id="8081" class="Symbol">:</a> <a id="8083" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="8091" class="Symbol">→</a> <a id="8093" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="8098" href="Ledger.Conway.Certs.html#1352" class="Datatype">DCert</a> <a id="8104" class="Symbol">→</a> <a id="8106" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="8115" class="Symbol">→</a> <a id="8117" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="8126" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8145" href="Ledger.Conway.Utxo.html#8145" class="Bound">pp</a> <a id="8148" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="8151" href="Ledger.Conway.Utxo.html#8151" class="Bound">deposits</a> <a id="8160" class="Symbol">=</a> <a id="8162" href="Ledger.Conway.Utxo.html#8151" class="Bound">deposits</a>


<a id="8173" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8192" href="Ledger.Conway.Utxo.html#8192" class="Bound">pp</a> <a id="8195" class="Symbol">(</a><a id="8196" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="8200" href="Ledger.Conway.Utxo.html#8200" class="Bound">c</a> <a id="8202" href="Ledger.Conway.Utxo.html#8202" class="Bound">v</a> <a id="8204" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8206" href="Ledger.Conway.Utxo.html#8206" class="Bound">certs</a><a id="8211" class="Symbol">)</a> <a id="8213" href="Ledger.Conway.Utxo.html#8213" class="Bound">deposits</a>
  <a id="8224" class="Symbol">=</a> <a id="8226" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8245" href="Ledger.Conway.Utxo.html#8192" class="Bound">pp</a> <a id="8248" href="Ledger.Conway.Utxo.html#8206" class="Bound">certs</a> <a id="8254" class="Symbol">(</a><a id="8255" href="Ledger.Conway.Utxo.html#8213" class="Bound">deposits</a> <a id="8264" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8267" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="8279" class="Symbol">(</a><a id="8280" href="Ledger.Conway.Certs.html#2059" class="InductiveConstructor">reg</a> <a id="8284" href="Ledger.Conway.Utxo.html#8200" class="Bound">c</a> <a id="8286" href="Ledger.Conway.Utxo.html#8202" class="Bound">v</a><a id="8287" class="Symbol">)</a> <a id="8289" href="Ledger.Conway.Utxo.html#8192" class="Bound">pp</a><a id="8291" class="Symbol">)</a>


<a id="8295" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8314" href="Ledger.Conway.Utxo.html#8314" class="Bound">pp</a> <a id="8317" class="Symbol">(</a><a id="8318" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="8327" href="Ledger.Conway.Utxo.html#8327" class="Bound">c</a> <a id="8329" href="Ledger.Conway.Utxo.html#8329" class="Bound">vd</a> <a id="8332" href="Ledger.Conway.Utxo.html#8332" class="Bound">khs</a> <a id="8336" href="Ledger.Conway.Utxo.html#8336" class="Bound">v</a> <a id="8338" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8340" href="Ledger.Conway.Utxo.html#8340" class="Bound">certs</a><a id="8345" class="Symbol">)</a> <a id="8347" href="Ledger.Conway.Utxo.html#8347" class="Bound">deposits</a>
  <a id="8358" class="Symbol">=</a> <a id="8360" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8379" href="Ledger.Conway.Utxo.html#8314" class="Bound">pp</a> <a id="8382" href="Ledger.Conway.Utxo.html#8340" class="Bound">certs</a> <a id="8388" class="Symbol">(</a><a id="8389" href="Ledger.Conway.Utxo.html#8347" class="Bound">deposits</a> <a id="8398" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8401" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="8413" class="Symbol">(</a><a id="8414" href="Ledger.Conway.Certs.html#1373" class="InductiveConstructor">delegate</a> <a id="8423" href="Ledger.Conway.Utxo.html#8327" class="Bound">c</a> <a id="8425" href="Ledger.Conway.Utxo.html#8329" class="Bound">vd</a> <a id="8428" href="Ledger.Conway.Utxo.html#8332" class="Bound">khs</a> <a id="8432" href="Ledger.Conway.Utxo.html#8336" class="Bound">v</a><a id="8433" class="Symbol">)</a> <a id="8435" href="Ledger.Conway.Utxo.html#8314" class="Bound">pp</a><a id="8437" class="Symbol">)</a>
<a id="8439" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8458" href="Ledger.Conway.Utxo.html#8458" class="Bound">pp</a> <a id="8461" class="Symbol">(</a><a id="8462" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="8470" href="Ledger.Conway.Utxo.html#8470" class="Bound">kh</a> <a id="8473" href="Ledger.Conway.Utxo.html#8473" class="Bound">p</a> <a id="8475" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8477" href="Ledger.Conway.Utxo.html#8477" class="Bound">certs</a><a id="8482" class="Symbol">)</a> <a id="8484" href="Ledger.Conway.Utxo.html#8484" class="Bound">deposits</a>
  <a id="8495" class="Symbol">=</a> <a id="8497" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8516" href="Ledger.Conway.Utxo.html#8458" class="Bound">pp</a> <a id="8519" href="Ledger.Conway.Utxo.html#8477" class="Bound">certs</a> <a id="8525" class="Symbol">(</a><a id="8526" href="Ledger.Conway.Utxo.html#8484" class="Bound">deposits</a> <a id="8535" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8538" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="8550" class="Symbol">(</a><a id="8551" href="Ledger.Conway.Certs.html#1494" class="InductiveConstructor">regpool</a> <a id="8559" href="Ledger.Conway.Utxo.html#8470" class="Bound">kh</a> <a id="8562" href="Ledger.Conway.Utxo.html#8473" class="Bound">p</a><a id="8563" class="Symbol">)</a> <a id="8565" href="Ledger.Conway.Utxo.html#8458" class="Bound">pp</a><a id="8567" class="Symbol">)</a>
<a id="8569" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8588" href="Ledger.Conway.Utxo.html#8588" class="Bound">pp</a> <a id="8591" class="Symbol">(</a><a id="8592" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="8600" href="Ledger.Conway.Utxo.html#8600" class="Bound">c</a> <a id="8602" href="Ledger.Conway.Utxo.html#8602" class="Bound">v</a> <a id="8604" href="Ledger.Conway.Utxo.html#8604" class="Bound">a</a> <a id="8606" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8608" href="Ledger.Conway.Utxo.html#8608" class="Bound">certs</a><a id="8613" class="Symbol">)</a> <a id="8615" href="Ledger.Conway.Utxo.html#8615" class="Bound">deposits</a>
  <a id="8626" class="Symbol">=</a> <a id="8628" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8647" href="Ledger.Conway.Utxo.html#8588" class="Bound">pp</a> <a id="8650" href="Ledger.Conway.Utxo.html#8608" class="Bound">certs</a> <a id="8656" class="Symbol">(</a><a id="8657" href="Ledger.Conway.Utxo.html#8615" class="Bound">deposits</a> <a id="8666" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="8669" href="Ledger.Conway.Utxo.html#4152" class="Function">certDeposit</a> <a id="8681" class="Symbol">(</a><a id="8682" href="Ledger.Conway.Certs.html#1579" class="InductiveConstructor">regdrep</a> <a id="8690" href="Ledger.Conway.Utxo.html#8600" class="Bound">c</a> <a id="8692" href="Ledger.Conway.Utxo.html#8602" class="Bound">v</a> <a id="8694" href="Ledger.Conway.Utxo.html#8604" class="Bound">a</a><a id="8695" class="Symbol">)</a> <a id="8697" href="Ledger.Conway.Utxo.html#8588" class="Bound">pp</a><a id="8699" class="Symbol">)</a>
<a id="8701" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8720" href="Ledger.Conway.Utxo.html#8720" class="Bound">pp</a> <a id="8723" class="Symbol">(</a><a id="8724" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="8730" href="Ledger.Conway.Utxo.html#8730" class="Bound">c</a> <a id="8732" href="Ledger.Conway.Utxo.html#8732" class="Bound">v</a> <a id="8734" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8736" href="Ledger.Conway.Utxo.html#8736" class="Bound">certs</a><a id="8741" class="Symbol">)</a> <a id="8743" href="Ledger.Conway.Utxo.html#8743" class="Bound">deposits</a>
  <a id="8754" class="Symbol">=</a> <a id="8756" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8775" href="Ledger.Conway.Utxo.html#8720" class="Bound">pp</a> <a id="8778" href="Ledger.Conway.Utxo.html#8736" class="Bound">certs</a> <a id="8784" class="Symbol">(</a><a id="8785" href="Ledger.Conway.Utxo.html#8743" class="Bound">deposits</a> <a id="8794" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8796" href="Ledger.Conway.Utxo.html#4509" class="Function">certRefund</a> <a id="8807" class="Symbol">(</a><a id="8808" href="Ledger.Conway.Certs.html#1446" class="InductiveConstructor">dereg</a> <a id="8814" href="Ledger.Conway.Utxo.html#8730" class="Bound">c</a> <a id="8816" href="Ledger.Conway.Utxo.html#8732" class="Bound">v</a><a id="8817" class="Symbol">)</a><a id="8818" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8819" class="Symbol">)</a>
<a id="8821" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8840" href="Ledger.Conway.Utxo.html#8840" class="Bound">pp</a> <a id="8843" class="Symbol">(</a><a id="8844" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="8854" href="Ledger.Conway.Utxo.html#8854" class="Bound">c</a> <a id="8856" href="Ledger.Conway.Utxo.html#8856" class="Bound">v</a> <a id="8858" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="8860" href="Ledger.Conway.Utxo.html#8860" class="Bound">certs</a><a id="8865" class="Symbol">)</a> <a id="8867" href="Ledger.Conway.Utxo.html#8867" class="Bound">deposits</a>
  <a id="8878" class="Symbol">=</a> <a id="8880" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="8899" href="Ledger.Conway.Utxo.html#8840" class="Bound">pp</a> <a id="8902" href="Ledger.Conway.Utxo.html#8860" class="Bound">certs</a> <a id="8908" class="Symbol">(</a><a id="8909" href="Ledger.Conway.Utxo.html#8867" class="Bound">deposits</a> <a id="8918" href="Axiom.Set.Map.html#10748" class="Function Operator">∣</a> <a id="8920" href="Ledger.Conway.Utxo.html#4509" class="Function">certRefund</a> <a id="8931" class="Symbol">(</a><a id="8932" href="Ledger.Conway.Certs.html#1630" class="InductiveConstructor">deregdrep</a> <a id="8942" href="Ledger.Conway.Utxo.html#8854" class="Bound">c</a> <a id="8944" href="Ledger.Conway.Utxo.html#8856" class="Bound">v</a><a id="8945" class="Symbol">)</a><a id="8946" href="Axiom.Set.Map.html#10748" class="Function Operator">ᶜ</a><a id="8947" class="Symbol">)</a>
<a id="8949" href="Ledger.Conway.Utxo.html#8061" class="CatchallClause Function">updateCertDeposits</a><a id="8967" class="CatchallClause"> </a><a id="8968" href="Ledger.Conway.Utxo.html#8968" class="CatchallClause Bound">pp</a><a id="8970" class="CatchallClause"> </a><a id="8971" class="CatchallClause Symbol">(_</a><a id="8973" class="CatchallClause"> </a><a id="8974" href="Agda.Builtin.List.html#199" class="CatchallClause InductiveConstructor Operator">∷</a><a id="8975" class="CatchallClause"> </a><a id="8976" href="Ledger.Conway.Utxo.html#8976" class="CatchallClause Bound">certs</a><a id="8981" class="CatchallClause Symbol">)</a><a id="8982" class="CatchallClause"> </a><a id="8983" href="Ledger.Conway.Utxo.html#8983" class="CatchallClause Bound">deposits</a>
  <a id="8994" class="Symbol">=</a> <a id="8996" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="9015" href="Ledger.Conway.Utxo.html#8968" class="Bound">pp</a> <a id="9018" href="Ledger.Conway.Utxo.html#8976" class="Bound">certs</a> <a id="9024" href="Ledger.Conway.Utxo.html#8983" class="Bound">deposits</a>

<a id="updateProposalDeposits"></a><a id="9034" href="Ledger.Conway.Utxo.html#9034" class="Function">updateProposalDeposits</a> <a id="9057" class="Symbol">:</a> <a id="9059" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9064" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a> <a id="9076" class="Symbol">→</a> <a id="9078" href="Ledger.Conway.Transaction.html#962" class="Field">TxId</a> <a id="9083" class="Symbol">→</a> <a id="9085" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a> <a id="9090" class="Symbol">→</a> <a id="9092" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="9101" class="Symbol">→</a> <a id="9103" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="9112" href="Ledger.Conway.Utxo.html#9034" class="Function">updateProposalDeposits</a> <a id="9135" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>        <a id="9145" class="Symbol">_</a>     <a id="9151" class="Symbol">_</a>      <a id="9158" href="Ledger.Conway.Utxo.html#9158" class="Bound">deposits</a>  <a id="9168" class="Symbol">=</a> <a id="9170" href="Ledger.Conway.Utxo.html#9158" class="Bound">deposits</a>
<a id="9179" href="Ledger.Conway.Utxo.html#9034" class="Function">updateProposalDeposits</a> <a id="9202" class="Symbol">(_</a> <a id="9205" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="9207" href="Ledger.Conway.Utxo.html#9207" class="Bound">ps</a><a id="9209" class="Symbol">)</a>  <a id="9212" href="Ledger.Conway.Utxo.html#9212" class="Bound">txid</a>  <a id="9218" href="Ledger.Conway.Utxo.html#9218" class="Bound">gaDep</a>  <a id="9225" href="Ledger.Conway.Utxo.html#9225" class="Bound">deposits</a>  <a id="9235" class="Symbol">=</a>
  <a id="9239" href="Ledger.Conway.Utxo.html#9034" class="Function">updateProposalDeposits</a> <a id="9262" href="Ledger.Conway.Utxo.html#9207" class="Bound">ps</a> <a id="9265" href="Ledger.Conway.Utxo.html#9212" class="Bound">txid</a> <a id="9270" href="Ledger.Conway.Utxo.html#9218" class="Bound">gaDep</a> <a id="9276" href="Ledger.Conway.Utxo.html#9225" class="Bound">deposits</a>
  <a id="9287" href="Axiom.Set.Map.Dec.html#1854" class="Function Operator">∪⁺</a> <a id="9290" href="Class.HasSingleton.html#288" class="Field Operator">❴</a> <a id="9292" href="Ledger.Conway.Certs.html#549" class="InductiveConstructor">GovActionDeposit</a> <a id="9309" class="Symbol">(</a><a id="9310" href="Ledger.Conway.Utxo.html#9212" class="Bound">txid</a> <a id="9315" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9317" href="Data.List.Base.html#5044" class="Function">length</a> <a id="9324" href="Ledger.Conway.Utxo.html#9207" class="Bound">ps</a><a id="9326" class="Symbol">)</a> <a id="9328" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9330" href="Ledger.Conway.Utxo.html#9218" class="Bound">gaDep</a> <a id="9336" href="Class.HasSingleton.html#288" class="Field Operator">❵</a>

<a id="updateDeposits"></a><a id="9339" href="Ledger.Conway.Utxo.html#9339" class="Function">updateDeposits</a> <a id="9354" class="Symbol">:</a> <a id="9356" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="9364" class="Symbol">→</a> <a id="9366" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="9373" class="Symbol">→</a> <a id="9375" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="9384" class="Symbol">→</a> <a id="9386" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="9395" href="Ledger.Conway.Utxo.html#9339" class="Function">updateDeposits</a> <a id="9410" href="Ledger.Conway.Utxo.html#9410" class="Bound">pp</a> <a id="9413" href="Ledger.Conway.Utxo.html#9413" class="Bound">txb</a> <a id="9417" class="Symbol">=</a> <a id="9419" href="Ledger.Conway.Utxo.html#8061" class="Function">updateCertDeposits</a> <a id="9438" href="Ledger.Conway.Utxo.html#9410" class="Bound">pp</a> <a id="9441" href="Ledger.Conway.Transaction.html#2996" class="Field">txcerts</a>
                        <a id="9473" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="9475" href="Ledger.Conway.Utxo.html#9034" class="Function">updateProposalDeposits</a> <a id="9498" href="Ledger.Conway.Transaction.html#3094" class="Field">txprop</a> <a id="9505" href="Ledger.Conway.Transaction.html#3330" class="Field">txid</a> <a id="9510" class="Symbol">(</a><a id="9511" href="Ledger.Conway.Utxo.html#9410" class="Bound">pp</a> <a id="9514" class="Symbol">.</a><a id="9515" href="Ledger.Conway.PParams.html#3388" class="Field">govActionDeposit</a><a id="9531" class="Symbol">)</a>


  <a id="9537" class="Keyword">where</a> <a id="9543" class="Keyword">open</a> <a id="9548" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="9555" href="Ledger.Conway.Utxo.html#9413" class="Bound">txb</a>

<a id="proposalDepositsΔ"></a><a id="9560" href="Ledger.Conway.Utxo.html#9560" class="Function">proposalDepositsΔ</a> <a id="9578" class="Symbol">:</a> <a id="9580" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="9585" href="Ledger.Conway.GovernanceActions.html#2538" class="Record">GovProposal</a> <a id="9597" class="Symbol">→</a> <a id="9599" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="9607" class="Symbol">→</a> <a id="9609" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="9616" class="Symbol">→</a> <a id="9618" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>
<a id="9627" href="Ledger.Conway.Utxo.html#9560" class="Function">proposalDepositsΔ</a> <a id="9645" href="Ledger.Conway.Utxo.html#9645" class="Bound">props</a> <a id="9651" href="Ledger.Conway.Utxo.html#9651" class="Bound">pp</a> <a id="9654" href="Ledger.Conway.Utxo.html#9654" class="Bound">txb</a> <a id="9658" class="Symbol">=</a> <a id="9660" href="Ledger.Conway.Utxo.html#9034" class="Function">updateProposalDeposits</a> <a id="9683" href="Ledger.Conway.Utxo.html#9645" class="Bound">props</a> <a id="9689" href="Ledger.Conway.Transaction.html#3330" class="Field">txid</a> <a id="9694" class="Symbol">(</a><a id="9695" href="Ledger.Conway.Utxo.html#9651" class="Bound">pp</a> <a id="9698" class="Symbol">.</a><a id="9699" href="Ledger.Conway.PParams.html#3388" class="Field">govActionDeposit</a><a id="9715" class="Symbol">)</a> <a id="9717" href="Class.HasEmptySet.html#287" class="Field">∅</a>
  <a id="9721" class="Keyword">where</a> <a id="9727" class="Keyword">open</a> <a id="9732" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="9739" href="Ledger.Conway.Utxo.html#9654" class="Bound">txb</a>



<a id="depositsChange"></a><a id="9746" href="Ledger.Conway.Utxo.html#9746" class="Function">depositsChange</a> <a id="9761" class="Symbol">:</a> <a id="9763" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="9771" class="Symbol">→</a> <a id="9773" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="9780" class="Symbol">→</a> <a id="9782" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a> <a id="9791" class="Symbol">→</a> <a id="9793" href="Agda.Builtin.Int.html#245" class="Datatype">ℤ</a>
<a id="9795" href="Ledger.Conway.Utxo.html#9746" class="Function">depositsChange</a> <a id="9810" href="Ledger.Conway.Utxo.html#9810" class="Bound">pp</a> <a id="9813" href="Ledger.Conway.Utxo.html#9813" class="Bound">txb</a> <a id="9817" href="Ledger.Conway.Utxo.html#9817" class="Bound">deposits</a> <a id="9826" class="Symbol">=</a>
  <a id="9830" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9838" class="Symbol">(</a><a id="9839" href="Ledger.Conway.Utxo.html#9339" class="Function">updateDeposits</a> <a id="9854" href="Ledger.Conway.Utxo.html#9810" class="Bound">pp</a> <a id="9857" href="Ledger.Conway.Utxo.html#9813" class="Bound">txb</a> <a id="9861" href="Ledger.Conway.Utxo.html#9817" class="Bound">deposits</a><a id="9869" class="Symbol">)</a> <a id="9871" href="Interface.HasSubtract.html#209" class="Field Operator">-</a> <a id="9873" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="9881" href="Ledger.Conway.Utxo.html#9817" class="Bound">deposits</a>


<a id="9892" class="Keyword">data</a> <a id="inInterval"></a><a id="9897" href="Ledger.Conway.Utxo.html#9897" class="Datatype">inInterval</a> <a id="9908" class="Symbol">(</a><a id="9909" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="9914" class="Symbol">:</a> <a id="9916" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a><a id="9920" class="Symbol">)</a> <a id="9922" class="Symbol">:</a> <a id="9924" class="Symbol">(</a><a id="9925" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9931" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a> <a id="9936" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9938" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="9944" href="Ledger.Conway.Types.Epoch.html#668" class="Function">Slot</a><a id="9948" class="Symbol">)</a> <a id="9950" class="Symbol">→</a> <a id="9952" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="9957" class="Keyword">where</a>
  <a id="inInterval.both"></a><a id="9965" href="Ledger.Conway.Utxo.html#9965" class="InductiveConstructor">both</a>   <a id="9972" class="Symbol">:</a> <a id="9974" class="Symbol">∀</a> <a id="9976" class="Symbol">{</a><a id="9977" href="Ledger.Conway.Utxo.html#9977" class="Bound">l</a> <a id="9979" href="Ledger.Conway.Utxo.html#9979" class="Bound">r</a><a id="9980" class="Symbol">}</a>  <a id="9983" class="Symbol">→</a> <a id="9985" href="Ledger.Conway.Utxo.html#9977" class="Bound">l</a> <a id="9987" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="9989" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="9994" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="9996" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="10001" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10003" href="Ledger.Conway.Utxo.html#9979" class="Bound">r</a>  <a id="10006" class="Symbol">→</a>  <a id="10009" href="Ledger.Conway.Utxo.html#9897" class="Datatype">inInterval</a> <a id="10020" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="10025" class="Symbol">(</a><a id="10026" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10031" href="Ledger.Conway.Utxo.html#9977" class="Bound">l</a>   <a id="10035" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10037" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10042" href="Ledger.Conway.Utxo.html#9979" class="Bound">r</a><a id="10043" class="Symbol">)</a>
  <a id="inInterval.lower"></a><a id="10047" href="Ledger.Conway.Utxo.html#10047" class="InductiveConstructor">lower</a>  <a id="10054" class="Symbol">:</a> <a id="10056" class="Symbol">∀</a> <a id="10058" class="Symbol">{</a><a id="10059" href="Ledger.Conway.Utxo.html#10059" class="Bound">l</a><a id="10060" class="Symbol">}</a>    <a id="10065" class="Symbol">→</a> <a id="10067" href="Ledger.Conway.Utxo.html#10059" class="Bound">l</a> <a id="10069" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10071" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a>             <a id="10088" class="Symbol">→</a>  <a id="10091" href="Ledger.Conway.Utxo.html#9897" class="Datatype">inInterval</a> <a id="10102" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="10107" class="Symbol">(</a><a id="10108" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10113" href="Ledger.Conway.Utxo.html#10059" class="Bound">l</a>   <a id="10117" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10119" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10126" class="Symbol">)</a>
  <a id="inInterval.upper"></a><a id="10130" href="Ledger.Conway.Utxo.html#10130" class="InductiveConstructor">upper</a>  <a id="10137" class="Symbol">:</a> <a id="10139" class="Symbol">∀</a> <a id="10141" class="Symbol">{</a><a id="10142" href="Ledger.Conway.Utxo.html#10142" class="Bound">r</a><a id="10143" class="Symbol">}</a>    <a id="10148" class="Symbol">→</a> <a id="10150" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="10155" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="10157" href="Ledger.Conway.Utxo.html#10142" class="Bound">r</a>             <a id="10171" class="Symbol">→</a>  <a id="10174" href="Ledger.Conway.Utxo.html#9897" class="Datatype">inInterval</a> <a id="10185" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="10190" class="Symbol">(</a><a id="10191" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10200" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10202" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10207" href="Ledger.Conway.Utxo.html#10142" class="Bound">r</a><a id="10208" class="Symbol">)</a>
  <a id="inInterval.none"></a><a id="10212" href="Ledger.Conway.Utxo.html#10212" class="InductiveConstructor">none</a>   <a id="10219" class="Symbol">:</a>                                    <a id="10256" href="Ledger.Conway.Utxo.html#9897" class="Datatype">inInterval</a> <a id="10267" href="Ledger.Conway.Utxo.html#9909" class="Bound">slot</a> <a id="10272" class="Symbol">(</a><a id="10273" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a>  <a id="10282" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10284" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10291" class="Symbol">)</a>


<a id="10295" class="Comment">-- Note: inInterval has to be a type definition for inference to work</a>
<a id="10365" class="Keyword">instance</a>
  <a id="Dec-inInterval"></a><a id="10376" href="Ledger.Conway.Utxo.html#10376" class="Function">Dec-inInterval</a> <a id="10391" class="Symbol">:</a> <a id="10393" href="Ledger.Conway.Utxo.html#9897" class="Datatype">inInterval</a> <a id="10404" href="Class.Decidable.Core.html#773" class="Function Operator">⁇²</a>
  <a id="10409" href="Ledger.Conway.Utxo.html#10376" class="Function">Dec-inInterval</a> <a id="10424" class="Symbol">{</a><a id="10425" href="Ledger.Conway.Utxo.html#10425" class="Bound">slot</a><a id="10429" class="Symbol">}</a> <a id="10431" class="Symbol">{</a><a id="10432" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10437" href="Ledger.Conway.Utxo.html#10437" class="Bound">x</a>  <a id="10440" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10442" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10447" href="Ledger.Conway.Utxo.html#10447" class="Bound">y</a> <a id="10449" class="Symbol">}</a> <a id="10451" class="Symbol">.</a><a id="10452" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10456" class="Keyword">with</a> <a id="10461" href="Ledger.Conway.Utxo.html#10437" class="Bound">x</a> <a id="10463" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10466" href="Ledger.Conway.Utxo.html#10425" class="Bound">slot</a> <a id="10471" class="Symbol">|</a> <a id="10473" href="Ledger.Conway.Utxo.html#10425" class="Bound">slot</a> <a id="10478" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10481" href="Ledger.Conway.Utxo.html#10447" class="Bound">y</a>
  <a id="10485" class="Symbol">...</a> <a id="10489" class="Symbol">|</a> <a id="10491" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10494" href="Ledger.Conway.Utxo.html#10494" class="Bound">¬p₁</a> <a id="10498" class="Symbol">|</a> <a id="10500" class="Symbol">_</a>      <a id="10507" class="Symbol">=</a> <a id="10509" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10512" class="Symbol">λ</a> <a id="10514" class="Keyword">where</a> <a id="10520" class="Symbol">(</a><a id="10521" href="Ledger.Conway.Utxo.html#9965" class="InductiveConstructor">both</a> <a id="10526" class="Symbol">(</a><a id="10527" href="Ledger.Conway.Utxo.html#10527" class="Bound">h₁</a> <a id="10530" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10532" href="Ledger.Conway.Utxo.html#10532" class="Bound">h₂</a><a id="10534" class="Symbol">))</a> <a id="10537" class="Symbol">→</a> <a id="10539" href="Ledger.Conway.Utxo.html#10494" class="Bound">¬p₁</a> <a id="10543" href="Ledger.Conway.Utxo.html#10527" class="Bound">h₁</a>
  <a id="10548" class="Symbol">...</a> <a id="10552" class="Symbol">|</a> <a id="10554" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10558" href="Ledger.Conway.Utxo.html#10558" class="Bound">p₁</a> <a id="10561" class="Symbol">|</a> <a id="10563" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10566" href="Ledger.Conway.Utxo.html#10566" class="Bound">¬p₂</a> <a id="10570" class="Symbol">=</a> <a id="10572" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10575" class="Symbol">λ</a> <a id="10577" class="Keyword">where</a> <a id="10583" class="Symbol">(</a><a id="10584" href="Ledger.Conway.Utxo.html#9965" class="InductiveConstructor">both</a> <a id="10589" class="Symbol">(</a><a id="10590" href="Ledger.Conway.Utxo.html#10590" class="Bound">h₁</a> <a id="10593" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10595" href="Ledger.Conway.Utxo.html#10595" class="Bound">h₂</a><a id="10597" class="Symbol">))</a> <a id="10600" class="Symbol">→</a> <a id="10602" href="Ledger.Conway.Utxo.html#10566" class="Bound">¬p₂</a> <a id="10606" href="Ledger.Conway.Utxo.html#10595" class="Bound">h₂</a>
  <a id="10611" class="Symbol">...</a> <a id="10615" class="Symbol">|</a> <a id="10617" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10621" href="Ledger.Conway.Utxo.html#10621" class="Bound">p₁</a> <a id="10624" class="Symbol">|</a> <a id="10626" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10630" href="Ledger.Conway.Utxo.html#10630" class="Bound">p₂</a> <a id="10633" class="Symbol">=</a> <a id="10635" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10639" class="Symbol">(</a><a id="10640" href="Ledger.Conway.Utxo.html#9965" class="InductiveConstructor">both</a> <a id="10645" class="Symbol">(</a><a id="10646" href="Ledger.Conway.Utxo.html#10621" class="Bound">p₁</a> <a id="10649" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10651" href="Ledger.Conway.Utxo.html#10630" class="Bound">p₂</a><a id="10653" class="Symbol">))</a>
  <a id="10658" href="Ledger.Conway.Utxo.html#10376" class="Function">Dec-inInterval</a> <a id="10673" class="Symbol">{</a><a id="10674" href="Ledger.Conway.Utxo.html#10674" class="Bound">slot</a><a id="10678" class="Symbol">}</a> <a id="10680" class="Symbol">{</a><a id="10681" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10686" href="Ledger.Conway.Utxo.html#10686" class="Bound">x</a>  <a id="10689" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10691" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10698" class="Symbol">}</a> <a id="10700" class="Symbol">.</a><a id="10701" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10705" class="Keyword">with</a> <a id="10710" href="Ledger.Conway.Utxo.html#10686" class="Bound">x</a> <a id="10712" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10715" href="Ledger.Conway.Utxo.html#10674" class="Bound">slot</a>
  <a id="10722" class="Symbol">...</a> <a id="10726" class="Symbol">|</a> <a id="10728" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10731" href="Ledger.Conway.Utxo.html#10731" class="Bound">¬p</a> <a id="10734" class="Symbol">=</a> <a id="10736" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10740" class="Symbol">(λ</a> <a id="10743" class="Keyword">where</a> <a id="10749" class="Symbol">(</a><a id="10750" href="Ledger.Conway.Utxo.html#10047" class="InductiveConstructor">lower</a> <a id="10756" href="Ledger.Conway.Utxo.html#10756" class="Bound">h</a><a id="10757" class="Symbol">)</a> <a id="10759" class="Symbol">→</a> <a id="10761" href="Ledger.Conway.Utxo.html#10731" class="Bound">¬p</a> <a id="10764" href="Ledger.Conway.Utxo.html#10756" class="Bound">h</a><a id="10765" class="Symbol">)</a>
  <a id="10769" class="Symbol">...</a> <a id="10773" class="Symbol">|</a> <a id="10775" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10779" href="Ledger.Conway.Utxo.html#10779" class="Bound">p</a> <a id="10781" class="Symbol">=</a> <a id="10783" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10787" class="Symbol">(</a><a id="10788" href="Ledger.Conway.Utxo.html#10047" class="InductiveConstructor">lower</a> <a id="10794" href="Ledger.Conway.Utxo.html#10779" class="Bound">p</a><a id="10795" class="Symbol">)</a>
  <a id="10799" href="Ledger.Conway.Utxo.html#10376" class="Function">Dec-inInterval</a> <a id="10814" class="Symbol">{</a><a id="10815" href="Ledger.Conway.Utxo.html#10815" class="Bound">slot</a><a id="10819" class="Symbol">}</a> <a id="10821" class="Symbol">{</a><a id="10822" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10830" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10832" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="10837" href="Ledger.Conway.Utxo.html#10837" class="Bound">x</a> <a id="10839" class="Symbol">}</a> <a id="10841" class="Symbol">.</a><a id="10842" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10846" class="Keyword">with</a> <a id="10851" href="Ledger.Conway.Utxo.html#10815" class="Bound">slot</a> <a id="10856" href="Class.HasOrder.Core.html#1011" class="Function Operator">≤?</a> <a id="10859" href="Ledger.Conway.Utxo.html#10837" class="Bound">x</a>
  <a id="10863" class="Symbol">...</a> <a id="10867" class="Symbol">|</a> <a id="10869" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a> <a id="10872" href="Ledger.Conway.Utxo.html#10872" class="Bound">¬p</a> <a id="10875" class="Symbol">=</a> <a id="10877" href="Relation.Nullary.Decidable.Core.html#2031" class="InductiveConstructor">no</a>  <a id="10881" class="Symbol">(λ</a> <a id="10884" class="Keyword">where</a> <a id="10890" class="Symbol">(</a><a id="10891" href="Ledger.Conway.Utxo.html#10130" class="InductiveConstructor">upper</a> <a id="10897" href="Ledger.Conway.Utxo.html#10897" class="Bound">h</a><a id="10898" class="Symbol">)</a> <a id="10900" class="Symbol">→</a> <a id="10902" href="Ledger.Conway.Utxo.html#10872" class="Bound">¬p</a> <a id="10905" href="Ledger.Conway.Utxo.html#10897" class="Bound">h</a><a id="10906" class="Symbol">)</a>
  <a id="10910" class="Symbol">...</a> <a id="10914" class="Symbol">|</a> <a id="10916" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10920" href="Ledger.Conway.Utxo.html#10920" class="Bound">p</a> <a id="10922" class="Symbol">=</a> <a id="10924" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10928" class="Symbol">(</a><a id="10929" href="Ledger.Conway.Utxo.html#10130" class="InductiveConstructor">upper</a> <a id="10935" href="Ledger.Conway.Utxo.html#10920" class="Bound">p</a><a id="10936" class="Symbol">)</a>
  <a id="10940" href="Ledger.Conway.Utxo.html#10376" class="Function">Dec-inInterval</a> <a id="10955" class="Symbol">{</a><a id="10956" href="Ledger.Conway.Utxo.html#10956" class="Bound">slot</a><a id="10960" class="Symbol">}</a> <a id="10962" class="Symbol">{</a><a id="10963" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="10971" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="10973" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="10980" class="Symbol">}</a> <a id="10982" class="Symbol">.</a><a id="10983" href="Class.Decidable.Core.html#264" class="Field">dec</a> <a id="10987" class="Symbol">=</a> <a id="10989" href="Relation.Nullary.Decidable.Core.html#1994" class="InductiveConstructor">yes</a> <a id="10993" href="Ledger.Conway.Utxo.html#10212" class="InductiveConstructor">none</a>

  <a id="HasCoin-UTxOState"></a><a id="11001" href="Ledger.Conway.Utxo.html#11001" class="Function">HasCoin-UTxOState</a> <a id="11019" class="Symbol">:</a> <a id="11021" href="Ledger.Interface.HasCoin.html#124" class="Record">HasCoin</a> <a id="11029" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="11041" href="Ledger.Conway.Utxo.html#11001" class="Function">HasCoin-UTxOState</a> <a id="11059" class="Symbol">.</a><a id="11060" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11068" href="Ledger.Conway.Utxo.html#11068" class="Bound">s</a> <a id="11070" class="Symbol">=</a> <a id="11072" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11080" class="Symbol">(</a><a id="11081" href="Ledger.Conway.Utxo.html#2811" class="Field">UTxOState.utxo</a> <a id="11096" href="Ledger.Conway.Utxo.html#11068" class="Bound">s</a><a id="11097" class="Symbol">)</a>
                               <a id="11130" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11132" class="Symbol">(</a><a id="11133" href="Ledger.Conway.Utxo.html#2833" class="Field">UTxOState.fees</a> <a id="11148" href="Ledger.Conway.Utxo.html#11068" class="Bound">s</a><a id="11149" class="Symbol">)</a>
                               <a id="11182" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11184" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="11192" class="Symbol">(</a><a id="11193" href="Ledger.Conway.Utxo.html#2855" class="Field">UTxOState.deposits</a> <a id="11212" href="Ledger.Conway.Utxo.html#11068" class="Bound">s</a><a id="11213" class="Symbol">)</a>
                               <a id="11246" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="11248" href="Ledger.Conway.Utxo.html#2881" class="Field">UTxOState.donations</a> <a id="11268" href="Ledger.Conway.Utxo.html#11068" class="Bound">s</a>

<a id="coinPolicies"></a><a id="11271" href="Ledger.Conway.Utxo.html#11271" class="Function">coinPolicies</a> <a id="11284" class="Symbol">:</a> <a id="11286" href="abstract-set-theory.FiniteSetTheory.html#488" class="Function Operator">ℙ</a> <a id="11288" href="Ledger.Conway.Crypto.html#1173" class="Function">ScriptHash</a>
<a id="11299" href="Ledger.Conway.Utxo.html#11271" class="Function">coinPolicies</a> <a id="11312" class="Symbol">=</a> <a id="11314" href="Ledger.Conway.TokenAlgebra.html#909" class="Function">policies</a> <a id="11323" class="Symbol">(</a><a id="11324" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="11331" class="Number">1</a><a id="11332" class="Symbol">)</a>

<a id="isAdaOnly"></a><a id="11335" href="Ledger.Conway.Utxo.html#11335" class="Function">isAdaOnly</a> <a id="11345" class="Symbol">:</a> <a id="11347" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a> <a id="11353" class="Symbol">→</a> <a id="11355" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11360" href="Ledger.Conway.Utxo.html#11335" class="Function">isAdaOnly</a> <a id="11370" href="Ledger.Conway.Utxo.html#11370" class="Bound">v</a> <a id="11372" class="Symbol">=</a> <a id="11374" href="Ledger.Conway.TokenAlgebra.html#909" class="Function">policies</a> <a id="11383" href="Ledger.Conway.Utxo.html#11370" class="Bound">v</a> <a id="11385" href="Axiom.Set.html#2587" class="Function Operator">≡ᵉ</a> <a id="11388" href="Ledger.Conway.Utxo.html#11271" class="Function">coinPolicies</a>


<a id="feesOK"></a><a id="11403" href="Ledger.Conway.Utxo.html#11403" class="Function">feesOK</a> <a id="11410" class="Symbol">:</a> <a id="11412" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="11420" class="Symbol">→</a> <a id="11422" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="11425" class="Symbol">→</a> <a id="11427" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a> <a id="11432" class="Symbol">→</a> <a id="11434" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="11439" href="Ledger.Conway.Utxo.html#11403" class="Function">feesOK</a> <a id="11446" href="Ledger.Conway.Utxo.html#11446" class="Bound">pp</a> <a id="11449" href="Ledger.Conway.Utxo.html#11449" class="Bound">tx</a> <a id="11452" href="Ledger.Conway.Utxo.html#11452" class="Bound">utxo</a> <a id="11457" class="Symbol">=</a> <a id="11459" class="Symbol">(</a> <a id="11461" href="Ledger.Conway.Utxo.html#3854" class="Function">minfee</a> <a id="11468" href="Ledger.Conway.Utxo.html#11446" class="Bound">pp</a> <a id="11471" href="Ledger.Conway.Utxo.html#11452" class="Bound">utxo</a> <a id="11476" href="Ledger.Conway.Utxo.html#11449" class="Bound">tx</a> <a id="11479" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="11481" href="Ledger.Conway.Transaction.html#2892" class="Function">txfee</a> <a id="11487" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11489" class="Symbol">(</a><a id="11490" href="Ledger.Conway.Transaction.html#4185" class="Function">txrdmrs</a> <a id="11498" href="Axiom.Set.Map.html#2293" class="Function Operator">ˢ</a> <a id="11500" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11502" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                      <a id="11526" class="Symbol">→</a> <a id="11528" class="Symbol">(</a> <a id="11530" href="Axiom.Set.html#9724" class="Function">All</a> <a id="11534" class="Symbol">(λ</a> <a id="11537" class="Symbol">(</a><a id="11538" href="Ledger.Conway.Utxo.html#11538" class="Bound">addr</a> <a id="11543" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="11545" class="Symbol">_)</a> <a id="11548" class="Symbol">→</a> <a id="11550" href="Ledger.Conway.Address.html#2587" class="Function">isVKeyAddr</a> <a id="11561" href="Ledger.Conway.Utxo.html#11538" class="Bound">addr</a><a id="11565" class="Symbol">)</a> <a id="11567" href="Ledger.Conway.Utxo.html#11897" class="Function">collateralRange</a>
                        <a id="11607" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11609" href="Ledger.Conway.Utxo.html#11335" class="Function">isAdaOnly</a> <a id="11619" href="Ledger.Conway.Utxo.html#11971" class="Function">bal</a>
                        <a id="11647" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11649" href="Ledger.Conway.TokenAlgebra.html#819" class="Function">coin</a> <a id="11654" href="Ledger.Conway.Utxo.html#11971" class="Function">bal</a> <a id="11658" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11660" class="Number">100</a> <a id="11664" href="Class.HasOrder.Core.html#822" class="Function Operator">≥</a> <a id="11666" href="Ledger.Conway.Transaction.html#2892" class="Function">txfee</a> <a id="11672" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="11674" href="Ledger.Conway.Utxo.html#11446" class="Bound">pp</a> <a id="11677" class="Symbol">.</a><a id="11678" href="Ledger.Conway.PParams.html#2964" class="Field">collateralPercentage</a>
                        <a id="11723" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="11725" href="Ledger.Conway.Transaction.html#3358" class="Function">collateral</a> <a id="11736" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="11738" href="Class.HasEmptySet.html#287" class="Field">∅</a>
                        <a id="11764" class="Symbol">)</a>
                      <a id="11788" class="Symbol">)</a>
                    <a id="11810" class="Symbol">)</a>
  <a id="11814" class="Keyword">where</a>
    <a id="11824" class="Keyword">open</a> <a id="11829" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="11832" href="Ledger.Conway.Utxo.html#11449" class="Bound">tx</a><a id="11834" class="Symbol">;</a> <a id="11836" class="Keyword">open</a> <a id="11841" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="11848" href="Ledger.Conway.Transaction.html#4338" class="Function">body</a><a id="11852" class="Symbol">;</a> <a id="11854" class="Keyword">open</a> <a id="11859" href="Ledger.Conway.Transaction.html#4056" class="Module">TxWitnesses</a> <a id="11871" href="Ledger.Conway.Transaction.html#4362" class="Function">wits</a><a id="11875" class="Symbol">;</a> <a id="11877" class="Keyword">open</a> <a id="11882" href="Ledger.Conway.PParams.html#1721" class="Module">PParams</a> <a id="11890" href="Ledger.Conway.Utxo.html#11446" class="Bound">pp</a>
    <a id="11897" href="Ledger.Conway.Utxo.html#11897" class="Function">collateralRange</a>  <a id="11914" class="Symbol">=</a> <a id="11916" href="Class.IsSet.html#959" class="Function">range</a>    <a id="11925" class="Symbol">((</a><a id="11927" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="11937" href="Ledger.Conway.Transaction.html#5160" class="Function">txOutHash</a> <a id="11947" href="Ledger.Conway.Utxo.html#11452" class="Bound">utxo</a><a id="11951" class="Symbol">)</a> <a id="11953" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="11955" href="Ledger.Conway.Transaction.html#3358" class="Function">collateral</a><a id="11965" class="Symbol">)</a>
    <a id="11971" href="Ledger.Conway.Utxo.html#11971" class="Function">bal</a>              <a id="11988" class="Symbol">=</a> <a id="11990" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a>  <a id="11999" class="Symbol">(</a><a id="12000" href="Ledger.Conway.Utxo.html#11452" class="Bound">utxo</a> <a id="12005" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="12007" href="Ledger.Conway.Transaction.html#3358" class="Function">collateral</a><a id="12017" class="Symbol">)</a>


<a id="12021" class="Keyword">module</a> <a id="12028" href="Ledger.Conway.Utxo.html#12028" class="Module">_</a> <a id="12030" class="Symbol">(</a><a id="12031" class="Keyword">let</a> <a id="12035" class="Keyword">open</a> <a id="12040" href="Ledger.Conway.Utxo.html#2747" class="Module">UTxOState</a><a id="12049" class="Symbol">;</a> <a id="12051" class="Keyword">open</a> <a id="12056" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a><a id="12062" class="Symbol">)</a> <a id="12064" class="Keyword">where</a>


  <a id="12074" href="Ledger.Conway.Utxo.html#12074" class="Function">depositRefunds</a> <a id="12089" class="Symbol">:</a> <a id="12091" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12099" class="Symbol">→</a> <a id="12101" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12111" class="Symbol">→</a> <a id="12113" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12120" class="Symbol">→</a> <a id="12122" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12129" href="Ledger.Conway.Utxo.html#12074" class="Function">depositRefunds</a> <a id="12144" href="Ledger.Conway.Utxo.html#12144" class="Bound">pp</a> <a id="12147" href="Ledger.Conway.Utxo.html#12147" class="Bound">st</a> <a id="12150" href="Ledger.Conway.Utxo.html#12150" class="Bound">txb</a> <a id="12154" class="Symbol">=</a> <a id="12156" href="Prelude.html#3244" class="Function">negPart</a> <a id="12164" class="Symbol">(</a><a id="12165" href="Ledger.Conway.Utxo.html#9746" class="Function">depositsChange</a> <a id="12180" href="Ledger.Conway.Utxo.html#12144" class="Bound">pp</a> <a id="12183" href="Ledger.Conway.Utxo.html#12150" class="Bound">txb</a> <a id="12187" class="Symbol">(</a><a id="12188" href="Ledger.Conway.Utxo.html#12147" class="Bound">st</a> <a id="12191" class="Symbol">.</a><a id="12192" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="12200" class="Symbol">))</a>

  <a id="12206" href="Ledger.Conway.Utxo.html#12206" class="Function">newDeposits</a> <a id="12218" class="Symbol">:</a> <a id="12220" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12228" class="Symbol">→</a> <a id="12230" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12240" class="Symbol">→</a> <a id="12242" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12249" class="Symbol">→</a> <a id="12251" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12258" href="Ledger.Conway.Utxo.html#12206" class="Function">newDeposits</a> <a id="12270" href="Ledger.Conway.Utxo.html#12270" class="Bound">pp</a> <a id="12273" href="Ledger.Conway.Utxo.html#12273" class="Bound">st</a> <a id="12276" href="Ledger.Conway.Utxo.html#12276" class="Bound">txb</a> <a id="12280" class="Symbol">=</a> <a id="12282" href="Prelude.html#3167" class="Function">posPart</a> <a id="12290" class="Symbol">(</a><a id="12291" href="Ledger.Conway.Utxo.html#9746" class="Function">depositsChange</a> <a id="12306" href="Ledger.Conway.Utxo.html#12270" class="Bound">pp</a> <a id="12309" href="Ledger.Conway.Utxo.html#12276" class="Bound">txb</a> <a id="12313" class="Symbol">(</a><a id="12314" href="Ledger.Conway.Utxo.html#12273" class="Bound">st</a> <a id="12317" class="Symbol">.</a><a id="12318" href="Ledger.Conway.Utxo.html#2855" class="Field">deposits</a><a id="12326" class="Symbol">))</a>

  <a id="12332" href="Ledger.Conway.Utxo.html#12332" class="Function">consumed</a> <a id="12341" class="Symbol">:</a> <a id="12343" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12351" class="Symbol">→</a> <a id="12353" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12363" class="Symbol">→</a> <a id="12365" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12372" class="Symbol">→</a> <a id="12374" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a>
  <a id="12382" href="Ledger.Conway.Utxo.html#12332" class="Function">consumed</a> <a id="12391" href="Ledger.Conway.Utxo.html#12391" class="Bound">pp</a> <a id="12394" href="Ledger.Conway.Utxo.html#12394" class="Bound">st</a> <a id="12397" href="Ledger.Conway.Utxo.html#12397" class="Bound">txb</a>
    <a id="12405" class="Symbol">=</a>  <a id="12408" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="12416" class="Symbol">(</a><a id="12417" href="Ledger.Conway.Utxo.html#12394" class="Bound">st</a> <a id="12420" class="Symbol">.</a><a id="12421" href="Ledger.Conway.Utxo.html#2811" class="Field">utxo</a> <a id="12426" href="Axiom.Set.Map.html#10678" class="Function Operator">∣</a> <a id="12428" href="Ledger.Conway.Utxo.html#12397" class="Bound">txb</a> <a id="12432" class="Symbol">.</a><a id="12433" href="Ledger.Conway.Transaction.html#2798" class="Field">txins</a><a id="12438" class="Symbol">)</a>
    <a id="12444" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12447" href="Ledger.Conway.Utxo.html#12397" class="Bound">txb</a> <a id="12451" class="Symbol">.</a><a id="12452" href="Ledger.Conway.Transaction.html#2920" class="Field">mint</a>
    <a id="12461" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12464" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12471" class="Symbol">(</a><a id="12472" href="Ledger.Conway.Utxo.html#12074" class="Function">depositRefunds</a> <a id="12487" href="Ledger.Conway.Utxo.html#12391" class="Bound">pp</a> <a id="12490" href="Ledger.Conway.Utxo.html#12394" class="Bound">st</a> <a id="12493" href="Ledger.Conway.Utxo.html#12397" class="Bound">txb</a><a id="12496" class="Symbol">)</a>
    <a id="12502" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a>  <a id="12505" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12512" class="Symbol">(</a><a id="12513" href="Ledger.Interface.HasCoin.html#172" class="Field">getCoin</a> <a id="12521" class="Symbol">(</a><a id="12522" href="Ledger.Conway.Utxo.html#12397" class="Bound">txb</a> <a id="12526" class="Symbol">.</a><a id="12527" href="Ledger.Conway.Transaction.html#3030" class="Field">txwdrls</a><a id="12534" class="Symbol">))</a>

  <a id="12540" href="Ledger.Conway.Utxo.html#12540" class="Function">produced</a> <a id="12549" class="Symbol">:</a> <a id="12551" href="Ledger.Conway.PParams.html#1721" class="Record">PParams</a> <a id="12559" class="Symbol">→</a> <a id="12561" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12571" class="Symbol">→</a> <a id="12573" href="Ledger.Conway.Transaction.html#2762" class="Record">TxBody</a> <a id="12580" class="Symbol">→</a> <a id="12582" href="Ledger.Conway.TokenAlgebra.html#499" class="Function">Value</a>
  <a id="12590" href="Ledger.Conway.Utxo.html#12540" class="Function">produced</a> <a id="12599" href="Ledger.Conway.Utxo.html#12599" class="Bound">pp</a> <a id="12602" href="Ledger.Conway.Utxo.html#12602" class="Bound">st</a> <a id="12605" href="Ledger.Conway.Utxo.html#12605" class="Bound">txb</a> <a id="12609" class="Symbol">=</a> <a id="12611" href="Ledger.Conway.Utxo.html#3596" class="Function">balance</a> <a id="12619" class="Symbol">(</a><a id="12620" href="Ledger.Conway.Utxo.html#3525" class="Function">outs</a> <a id="12625" href="Ledger.Conway.Utxo.html#12605" class="Bound">txb</a><a id="12628" class="Symbol">)</a>
                     <a id="12651" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12653" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12660" class="Symbol">(</a><a id="12661" href="Ledger.Conway.Utxo.html#12605" class="Bound">txb</a> <a id="12665" class="Symbol">.</a><a id="12666" href="Ledger.Conway.Transaction.html#2892" class="Field">txfee</a><a id="12671" class="Symbol">)</a>
                     <a id="12694" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12696" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12703" class="Symbol">(</a><a id="12704" href="Ledger.Conway.Utxo.html#12206" class="Function">newDeposits</a> <a id="12716" href="Ledger.Conway.Utxo.html#12599" class="Bound">pp</a> <a id="12719" href="Ledger.Conway.Utxo.html#12602" class="Bound">st</a> <a id="12722" href="Ledger.Conway.Utxo.html#12605" class="Bound">txb</a><a id="12725" class="Symbol">)</a>
                     <a id="12748" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="12750" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="12757" class="Symbol">(</a><a id="12758" href="Ledger.Conway.Utxo.html#12605" class="Bound">txb</a> <a id="12762" class="Symbol">.</a><a id="12763" href="Ledger.Conway.Transaction.html#3134" class="Field">txdonation</a><a id="12773" class="Symbol">)</a>


<a id="12777" class="Keyword">open</a> <a id="12782" href="Ledger.Conway.PParams.html#1721" class="Module">PParams</a>

<a id="12791" class="Keyword">private</a> <a id="12799" class="Keyword">variable</a>
  <a id="12810" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="12812" class="Symbol">:</a> <a id="12814" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a>
  <a id="12824" href="Ledger.Conway.Utxo.html#12824" class="Generalizable">s</a> <a id="12826" href="Ledger.Conway.Utxo.html#12826" class="Generalizable">s&#39;</a> <a id="12829" class="Symbol">:</a> <a id="12831" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a>
  <a id="12843" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="12846" class="Symbol">:</a> <a id="12848" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a>
  <a id="12853" href="Ledger.Conway.Utxo.html#12853" class="Generalizable">utxo</a> <a id="12858" class="Symbol">:</a> <a id="12860" href="Ledger.Conway.Transaction.html#2473" class="Function">UTxO</a>
  <a id="12867" href="Ledger.Conway.Utxo.html#12867" class="Generalizable">fees</a> <a id="12872" href="Ledger.Conway.Utxo.html#12872" class="Generalizable">donations</a> <a id="12882" class="Symbol">:</a> <a id="12884" href="Ledger.Prelude.Base.html#81" class="Function">Coin</a>
  <a id="12891" href="Ledger.Conway.Utxo.html#12891" class="Generalizable">deposits</a> <a id="12900" class="Symbol">:</a> <a id="12902" href="Ledger.Conway.Certs.html#601" class="Function">Deposits</a>

<a id="12912" class="Keyword">open</a> <a id="12917" href="Ledger.Conway.Utxo.html#2395" class="Module">UTxOEnv</a>

<a id="12926" class="Keyword">data</a> <a id="_⊢_⇀⦇_,UTXOS⦈_"></a><a id="12931" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">_⊢_⇀⦇_,UTXOS⦈_</a> <a id="12946" class="Symbol">:</a> <a id="12948" href="Ledger.Conway.Utxo.html#2395" class="Record">UTxOEnv</a> <a id="12956" class="Symbol">→</a> <a id="12958" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12968" class="Symbol">→</a> <a id="12970" href="Ledger.Conway.Transaction.html#4306" class="Record">Tx</a> <a id="12973" class="Symbol">→</a> <a id="12975" href="Ledger.Conway.Utxo.html#2747" class="Record">UTxOState</a> <a id="12985" class="Symbol">→</a> <a id="12987" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="12992" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-Yes"></a><a id="13002" href="Ledger.Conway.Utxo.html#13002" class="InductiveConstructor">Scripts-Yes</a> <a id="13014" class="Symbol">:</a>
    <a id="13020" class="Keyword">let</a>  <a id="13025" href="Ledger.Conway.Utxo.html#13025" class="Bound">pp</a>         <a id="13036" class="Symbol">=</a> <a id="13038" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="13040" class="Symbol">.</a><a id="13041" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>


         <a id="13060" class="Keyword">open</a> <a id="13065" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="13068" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13071" class="Keyword">renaming</a> <a id="13080" class="Symbol">(</a><a id="13081" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="13086" class="Symbol">to</a> <a id="13089" class="Field">txb</a><a id="13092" class="Symbol">);</a> <a id="13095" class="Keyword">open</a> <a id="13100" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="13107" href="Ledger.Conway.Utxo.html#13089" class="Function">txb</a>


         <a id="13122" href="Ledger.Conway.Utxo.html#13122" class="Bound">sLst</a>       <a id="13133" class="Symbol">=</a> <a id="13135" href="Ledger.Conway.ScriptValidation.html#5893" class="Function">collectPhaseTwoScriptInputs</a> <a id="13163" href="Ledger.Conway.Utxo.html#13025" class="Bound">pp</a> <a id="13166" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13169" href="Ledger.Conway.Utxo.html#12853" class="Generalizable">utxo</a>
      <a id="13180" class="Keyword">in</a>
        <a id="13191" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="13193" href="Ledger.Conway.Utxo.html#4687" class="Datatype">ValidCertDeposits</a> <a id="13211" href="Ledger.Conway.Utxo.html#13025" class="Bound">pp</a> <a id="13214" href="Ledger.Conway.Utxo.html#12891" class="Generalizable">deposits</a> <a id="13223" href="Ledger.Conway.Transaction.html#2996" class="Function">txcerts</a>
        <a id="13239" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="13241" href="Ledger.Conway.ScriptValidation.html#6281" class="Function">evalScripts</a> <a id="13253" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13256" href="Ledger.Conway.Utxo.html#13122" class="Bound">sLst</a> <a id="13261" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13263" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a>
        <a id="13279" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="13281" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a> <a id="13289" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13291" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
          <a id="13306" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
          <a id="13349" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="13351" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Utxo.html#12853}{\htmlId{13355}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12867}{\htmlId{13362}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12891}{\htmlId{13369}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12872}{\htmlId{13380}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="13392" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">⇀⦇</a> <a id="13395" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13398" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} (\,\href{Ledger.Conway.Utxo.html#12853}{\htmlId{13409}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13414}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Transaction.html#2798}{\htmlId{13416}{\htmlClass{Function}{\text{txins}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13422}{\htmlClass{Function Operator}{\text{ᶜ}}}}\,) \,\href{Axiom.Set.Map.html#6320}{\htmlId{13425}{\htmlClass{Function Operator}{\text{∪ˡ}}}}\, (\,\href{Ledger.Conway.Utxo.html#3525}{\htmlId{13429}{\htmlClass{Function}{\text{outs}}}}\, \,\href{Ledger.Conway.Utxo.html#13089}{\htmlId{13434}{\htmlClass{Function}{\text{txb}}}}\,) \\ \,\href{Ledger.Conway.Utxo.html#12867}{\htmlId{13441}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{13446}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Transaction.html#2892}{\htmlId{13448}{\htmlClass{Function}{\text{txfee}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#9339}{\htmlId{13456}{\htmlClass{Function}{\text{updateDeposits}}}}\, \,\href{Ledger.Conway.Utxo.html#13025}{\htmlId{13471}{\htmlClass{Bound}{\text{pp}}}}\, \,\href{Ledger.Conway.Utxo.html#13089}{\htmlId{13474}{\htmlClass{Function}{\text{txb}}}}\, \,\href{Ledger.Conway.Utxo.html#12891}{\htmlId{13478}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12872}{\htmlId{13489}{\htmlClass{Generalizable}{\text{donations}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{13499}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Transaction.html#3134}{\htmlId{13501}{\htmlClass{Function}{\text{txdonation}}}}\, \end{pmatrix}$</a>
  <a id="_⊢_⇀⦇_,UTXOS⦈_.Scripts-No"></a><a id="13516" href="Ledger.Conway.Utxo.html#13516" class="InductiveConstructor">Scripts-No</a> <a id="13527" class="Symbol">:</a>
    <a id="13533" class="Keyword">let</a>  <a id="13538" href="Ledger.Conway.Utxo.html#13538" class="Bound">pp</a>         <a id="13549" class="Symbol">=</a> <a id="13551" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="13553" class="Symbol">.</a><a id="13554" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>


         <a id="13573" class="Keyword">open</a> <a id="13578" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="13581" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13584" class="Keyword">renaming</a> <a id="13593" class="Symbol">(</a><a id="13594" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="13599" class="Symbol">to</a> <a id="13602" class="Field">txb</a><a id="13605" class="Symbol">);</a> <a id="13608" class="Keyword">open</a> <a id="13613" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="13620" href="Ledger.Conway.Utxo.html#13602" class="Function">txb</a>


         <a id="13635" href="Ledger.Conway.Utxo.html#13635" class="Bound">sLst</a>       <a id="13646" class="Symbol">=</a> <a id="13648" href="Ledger.Conway.ScriptValidation.html#5893" class="Function">collectPhaseTwoScriptInputs</a> <a id="13676" href="Ledger.Conway.Utxo.html#13538" class="Bound">pp</a> <a id="13679" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13682" href="Ledger.Conway.Utxo.html#12853" class="Generalizable">utxo</a>
      <a id="13693" class="Keyword">in</a>
        <a id="13704" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="13706" href="Ledger.Conway.ScriptValidation.html#6281" class="Function">evalScripts</a> <a id="13718" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13721" href="Ledger.Conway.Utxo.html#13635" class="Bound">sLst</a> <a id="13726" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13728" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a>
        <a id="13744" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="13746" href="Ledger.Conway.Transaction.html#4391" class="Function">isValid</a> <a id="13754" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="13756" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
          <a id="13772" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
          <a id="13815" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="13817" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">⊢</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Utxo.html#12853}{\htmlId{13821}{\htmlClass{Generalizable}{\text{utxo}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12867}{\htmlId{13828}{\htmlClass{Generalizable}{\text{fees}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12891}{\htmlId{13835}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12872}{\htmlId{13846}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a> <a id="13858" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">⇀⦇</a> <a id="13861" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="13864" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">,UTXOS⦈</a> <a class="AgdaKaTeX">$\begin{pmatrix} \,\href{Ledger.Conway.Utxo.html#12853}{\htmlId{13874}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13879}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Transaction.html#3358}{\htmlId{13881}{\htmlClass{Function}{\text{collateral}}}}\, \,\href{Axiom.Set.Map.html#10748}{\htmlId{13892}{\htmlClass{Function Operator}{\text{ᶜ}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12867}{\htmlId{13896}{\htmlClass{Generalizable}{\text{fees}}}}\, \,\href{Class.HasAdd.Core.html#162}{\htmlId{13901}{\htmlClass{Field Operator}{\text{+}}}}\, \,\href{Ledger.Conway.Utxo.html#3685}{\htmlId{13903}{\htmlClass{Function}{\text{cbalance}}}}\, (\,\href{Ledger.Conway.Utxo.html#12853}{\htmlId{13913}{\htmlClass{Generalizable}{\text{utxo}}}}\, \,\href{Axiom.Set.Map.html#10678}{\htmlId{13918}{\htmlClass{Function Operator}{\text{∣}}}}\, \,\href{Ledger.Conway.Transaction.html#3358}{\htmlId{13920}{\htmlClass{Function}{\text{collateral}}}}\,) \\ \,\href{Ledger.Conway.Utxo.html#12891}{\htmlId{13934}{\htmlClass{Generalizable}{\text{deposits}}}}\, \\ \,\href{Ledger.Conway.Utxo.html#12872}{\htmlId{13945}{\htmlClass{Generalizable}{\text{donations}}}}\, \end{pmatrix}$</a>


<a id="13959" class="Keyword">unquoteDecl</a> <a id="Scripts-Yes-premises"></a><a id="13971" href="Ledger.Conway.Utxo.html#13971" class="Function">Scripts-Yes-premises</a> <a id="13992" class="Symbol">=</a> <a id="13994" href="iog-prelude.Tactic.Premises.html#2289" class="Function">genPremises</a> <a id="14006" href="Ledger.Conway.Utxo.html#13971" class="Function">Scripts-Yes-premises</a> <a id="14027" class="Symbol">(</a><a id="14028" class="Keyword">quote</a> <a id="14034" href="Ledger.Conway.Utxo.html#13002" class="InductiveConstructor">Scripts-Yes</a><a id="14045" class="Symbol">)</a>
<a id="14047" class="Keyword">unquoteDecl</a> <a id="Scripts-No-premises"></a><a id="14059" href="Ledger.Conway.Utxo.html#14059" class="Function">Scripts-No-premises</a>  <a id="14080" class="Symbol">=</a> <a id="14082" href="iog-prelude.Tactic.Premises.html#2289" class="Function">genPremises</a> <a id="14094" href="Ledger.Conway.Utxo.html#14059" class="Function">Scripts-No-premises</a>  <a id="14115" class="Symbol">(</a><a id="14116" class="Keyword">quote</a> <a id="14122" href="Ledger.Conway.Utxo.html#13516" class="InductiveConstructor">Scripts-No</a><a id="14132" class="Symbol">)</a>

<a id="14135" class="Keyword">data</a> <a id="14140" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">_⊢_⇀⦇_,UTXO⦈_</a> <a id="14154" class="Keyword">where</a>


  <a id="_⊢_⇀⦇_,UTXO⦈_.UTXO-inductive"></a><a id="14164" href="Ledger.Conway.Utxo.html#14164" class="InductiveConstructor">UTXO-inductive</a> <a id="14179" class="Symbol">:</a>
    <a id="14185" class="Keyword">let</a> <a id="14189" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a>        <a id="14199" class="Symbol">=</a> <a id="14201" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="14203" class="Symbol">.</a><a id="14204" href="Ledger.Conway.Utxo.html#2449" class="Field">pparams</a>
        <a id="14220" href="Ledger.Conway.Utxo.html#14220" class="Bound">slot</a>      <a id="14230" class="Symbol">=</a> <a id="14232" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="14234" class="Symbol">.</a><a id="14235" href="Ledger.Conway.Utxo.html#2428" class="Field">slot</a>
        <a id="14248" href="Ledger.Conway.Utxo.html#14248" class="Bound">treasury</a>  <a id="14258" class="Symbol">=</a> <a id="14260" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="14262" class="Symbol">.</a><a id="14263" href="Ledger.Conway.Utxo.html#2473" class="Field">treasury</a>
        <a id="14280" href="Ledger.Conway.Utxo.html#14280" class="Bound">utxo</a>      <a id="14290" class="Symbol">=</a> <a id="14292" href="Ledger.Conway.Utxo.html#12824" class="Generalizable">s</a> <a id="14294" class="Symbol">.</a><a id="14295" href="Ledger.Conway.Utxo.html#2811" class="Field">UTxOState.utxo</a>


        <a id="14320" class="Keyword">open</a> <a id="14325" href="Ledger.Conway.Transaction.html#4306" class="Module">Tx</a> <a id="14328" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="14331" class="Keyword">renaming</a> <a id="14340" class="Symbol">(</a><a id="14341" href="Ledger.Conway.Transaction.html#4338" class="Field">body</a> <a id="14346" class="Symbol">to</a> <a id="14349" class="Field">txb</a><a id="14352" class="Symbol">);</a> <a id="14355" class="Keyword">open</a> <a id="14360" href="Ledger.Conway.Transaction.html#2762" class="Module">TxBody</a> <a id="14367" href="Ledger.Conway.Utxo.html#14349" class="Function">txb</a>


        <a id="14381" href="Ledger.Conway.Utxo.html#14381" class="Bound">txoutsʰ</a>   <a id="14391" class="Symbol">=</a> <a id="14393" href="Axiom.Set.Map.html#6068" class="Function">mapValues</a> <a id="14403" href="Ledger.Conway.Transaction.html#5160" class="Function">txOutHash</a> <a id="14413" href="Ledger.Conway.Transaction.html#2858" class="Function">txouts</a>
        <a id="14428" href="Ledger.Conway.Utxo.html#14428" class="Bound">overhead</a>  <a id="14438" class="Symbol">=</a> <a id="14440" class="Number">160</a>
    <a id="14448" class="Keyword">in</a>
    <a id="14455" href="Prelude.InferenceRules.html#56074" class="Function Operator">∙</a> <a id="14457" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a> <a id="14463" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="14465" href="Class.HasEmptySet.html#287" class="Field">∅</a>                              <a id="14496" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14498" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a> <a id="14504" href="Axiom.Set.html#8952" class="Function Operator">∪</a> <a id="14506" href="Ledger.Conway.Transaction.html#2828" class="Function">refInputs</a> <a id="14516" href="Interface.HasSubset.html#158" class="Field Operator">⊆</a> <a id="14518" href="Class.IsSet.html#916" class="Function">dom</a> <a id="14522" href="Ledger.Conway.Utxo.html#14280" class="Bound">utxo</a>
    <a id="14531" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14533" href="Ledger.Conway.Transaction.html#2798" class="Function">txins</a> <a id="14539" href="Axiom.Set.html#9292" class="Function Operator">∩</a> <a id="14541" href="Ledger.Conway.Transaction.html#2828" class="Function">refInputs</a> <a id="14551" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14553" href="Class.HasEmptySet.html#287" class="Field">∅</a>                  <a id="14572" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14574" href="Ledger.Conway.Utxo.html#9897" class="Datatype">inInterval</a> <a id="14585" href="Ledger.Conway.Utxo.html#14220" class="Bound">slot</a> <a id="14590" href="Ledger.Conway.Transaction.html#2949" class="Function">txvldt</a>
    <a id="14601" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14603" href="Ledger.Conway.Utxo.html#11403" class="Function">feesOK</a> <a id="14610" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a> <a id="14613" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="14616" href="Ledger.Conway.Utxo.html#14280" class="Bound">utxo</a>                      <a id="14642" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14644" href="Ledger.Conway.Utxo.html#12332" class="Function">consumed</a> <a id="14653" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a> <a id="14656" href="Ledger.Conway.Utxo.html#12824" class="Generalizable">s</a> <a id="14658" href="Ledger.Conway.Utxo.html#14349" class="Function">txb</a> <a id="14662" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14664" href="Ledger.Conway.Utxo.html#12540" class="Function">produced</a> <a id="14673" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a> <a id="14676" href="Ledger.Conway.Utxo.html#12824" class="Generalizable">s</a> <a id="14678" href="Ledger.Conway.Utxo.html#14349" class="Function">txb</a>
    <a id="14686" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14688" href="Ledger.Conway.TokenAlgebra.html#819" class="Function">coin</a> <a id="14693" href="Ledger.Conway.Transaction.html#2920" class="Function">mint</a> <a id="14698" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="14700" class="Number">0</a>                          <a id="14727" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14729" href="Ledger.Conway.Transaction.html#3305" class="Function">txsize</a> <a id="14736" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14738" href="Ledger.Conway.PParams.html#1802" class="Field">maxTxSize</a> <a id="14748" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a>
    <a id="14755" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14757" href="Ledger.Conway.Utxo.html#3751" class="Function">refScriptsSize</a> <a id="14772" href="Ledger.Conway.Utxo.html#14280" class="Bound">utxo</a> <a id="14777" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="14780" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="14782" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a> <a id="14785" class="Symbol">.</a><a id="14786" href="Ledger.Conway.PParams.html#2591" class="Field">maxRefScriptSizePerTx</a>
    <a id="14812" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14814" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14817" href="Ledger.Conway.Utxo.html#14817" class="Bound">(_</a> <a id="14820" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14822" href="Ledger.Conway.Utxo.html#14822" class="Bound">txout</a><a id="14827" href="Ledger.Conway.Utxo.html#14817" class="Bound">)</a> <a id="14829" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14831" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14833" href="Ledger.Conway.Utxo.html#14381" class="Bound">txoutsʰ</a> <a id="14841" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14843" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14853" href="Ledger.Conway.TokenAlgebra.html#864" class="Function">inject</a> <a id="14860" class="Symbol">((</a><a id="14862" href="Ledger.Conway.Utxo.html#14428" class="Bound">overhead</a> <a id="14871" href="Class.HasAdd.Core.html#162" class="Field Operator">+</a> <a id="14873" href="Ledger.Conway.Utxo.html#2268" class="Function">utxoEntrySize</a> <a id="14887" href="Ledger.Conway.Utxo.html#14822" class="Bound">txout</a><a id="14892" class="Symbol">)</a> <a id="14894" href="Agda.Builtin.Nat.html#539" class="Primitive Operator">*</a> <a id="14896" href="Ledger.Conway.PParams.html#2457" class="Field">coinsPerUTxOByte</a> <a id="14913" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a><a id="14915" class="Symbol">)</a> <a id="14917" href="Ledger.Conway.TokenAlgebra.html#1015" class="Function Operator">≤ᵗ</a> <a id="14920" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="14930" href="Ledger.Conway.Utxo.html#14822" class="Bound">txout</a>
    <a id="14940" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="14942" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="14945" href="Ledger.Conway.Utxo.html#14945" class="Bound">(_</a> <a id="14948" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="14950" href="Ledger.Conway.Utxo.html#14950" class="Bound">txout</a><a id="14955" href="Ledger.Conway.Utxo.html#14945" class="Bound">)</a> <a id="14957" href="Class.IsSet.html#576" class="Function">∈</a> <a id="14959" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14961" href="Ledger.Conway.Utxo.html#14381" class="Bound">txoutsʰ</a> <a id="14969" href="Ledger.Prelude.html#2543" class="Function Operator">∣</a> <a id="14971" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="14981" href="Ledger.Conway.Abstract.html#685" class="Field">serSize</a> <a id="14989" class="Symbol">(</a><a id="14990" href="Ledger.Conway.Transaction.html#5249" class="Function">getValueʰ</a> <a id="15000" href="Ledger.Conway.Utxo.html#14950" class="Bound">txout</a><a id="15005" class="Symbol">)</a> <a id="15007" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="15009" href="Ledger.Conway.PParams.html#1982" class="Field">maxValSize</a> <a id="15020" href="Ledger.Conway.Utxo.html#14189" class="Bound">pp</a>
    <a id="15027" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15029" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15032" href="Ledger.Conway.Utxo.html#15032" class="Bound">(</a><a id="15033" href="Ledger.Conway.Utxo.html#15033" class="Bound">a</a> <a id="15035" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15037" href="Ledger.Conway.Utxo.html#15032" class="Bound">_)</a> <a id="15040" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15042" href="Class.IsSet.html#959" class="Function">range</a> <a id="15048" href="Ledger.Conway.Utxo.html#14381" class="Bound">txoutsʰ</a> <a id="15056" href="Class.IsSet.html#576" class="Function">]</a>
        <a id="15066" href="Data.Sum.Relation.Unary.All.html#626" class="Datatype">Sum.All</a> <a id="15074" class="Symbol">(</a><a id="15075" href="Function.Base.html#725" class="Function">const</a> <a id="15081" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="15082" class="Symbol">)</a> <a id="15084" class="Symbol">(λ</a> <a id="15087" href="Ledger.Conway.Utxo.html#15087" class="Bound">a</a> <a id="15089" class="Symbol">→</a> <a id="15091" href="Ledger.Conway.Utxo.html#15087" class="Bound">a</a> <a id="15093" class="Symbol">.</a><a id="15094" href="Ledger.Conway.Address.html#1321" class="Field">BootstrapAddr.attrsSize</a> <a id="15118" href="Class.HasOrder.Core.html#608" class="Field Operator">≤</a> <a id="15120" class="Number">64</a><a id="15122" class="Symbol">)</a> <a id="15124" href="Ledger.Conway.Utxo.html#15033" class="Bound">a</a>
    <a id="15130" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15132" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15135" href="Ledger.Conway.Utxo.html#15135" class="Bound">(</a><a id="15136" href="Ledger.Conway.Utxo.html#15136" class="Bound">a</a> <a id="15138" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15140" href="Ledger.Conway.Utxo.html#15135" class="Bound">_)</a> <a id="15143" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15145" href="Class.IsSet.html#959" class="Function">range</a> <a id="15151" href="Ledger.Conway.Utxo.html#14381" class="Bound">txoutsʰ</a> <a id="15159" href="Class.IsSet.html#576" class="Function">]</a>  <a id="15162" href="Ledger.Conway.Address.html#2556" class="Function">netId</a> <a id="15168" href="Ledger.Conway.Utxo.html#15136" class="Bound">a</a>         <a id="15178" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15180" href="Ledger.Conway.Types.Epoch.html#2361" class="Function">NetworkId</a>
    <a id="15194" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15196" href="Class.IsSet.html#576" class="Function">∀[</a> <a id="15199" href="Ledger.Conway.Utxo.html#15199" class="Bound">a</a> <a id="15201" href="Class.IsSet.html#576" class="Function">∈</a> <a id="15203" href="Class.IsSet.html#916" class="Function">dom</a> <a id="15207" href="Ledger.Conway.Transaction.html#3030" class="Function">txwdrls</a> <a id="15215" href="Class.IsSet.html#576" class="Function">]</a>          <a id="15226" href="Ledger.Conway.Address.html#1550" class="Field">NetworkIdOf</a> <a id="15238" href="Ledger.Conway.Utxo.html#15199" class="Bound">a</a> <a id="15240" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="15242" href="Ledger.Conway.Types.Epoch.html#2361" class="Function">NetworkId</a>
    <a id="15256" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15258" href="Ledger.Conway.Transaction.html#3234" class="Function">txNetworkId</a>  <a id="15271" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15273" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15278" href="Ledger.Conway.Types.Epoch.html#2361" class="Function">NetworkId</a>
    <a id="15292" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15294" href="Ledger.Conway.Transaction.html#3271" class="Function">curTreasury</a>  <a id="15307" href="Prelude.html#2780" class="Function Operator">~</a> <a id="15309" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="15314" href="Ledger.Conway.Utxo.html#14248" class="Bound">treasury</a>
    <a id="15327" href="iog-prelude.Prelude.InferenceRules.html#583" class="Function Operator">∙</a> <a id="15329" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="15331" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">⊢</a> <a id="15333" href="Ledger.Conway.Utxo.html#12824" class="Generalizable">s</a> <a id="15335" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">⇀⦇</a> <a id="15338" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="15341" href="Ledger.Conway.Utxo.html#12931" class="Datatype Operator">,UTXOS⦈</a> <a id="15349" href="Ledger.Conway.Utxo.html#12826" class="Generalizable">s&#39;</a>
      <a id="15358" href="iog-prelude.Prelude.InferenceRules.html#217" class="Function Operator">────────────────────────────────</a>
      <a id="15397" href="Ledger.Conway.Utxo.html#12810" class="Generalizable">Γ</a> <a id="15399" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">⊢</a> <a id="15401" href="Ledger.Conway.Utxo.html#12824" class="Generalizable">s</a> <a id="15403" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">⇀⦇</a> <a id="15406" href="Ledger.Conway.Utxo.html#12843" class="Generalizable">tx</a> <a id="15409" href="Ledger.Conway.Utxo.html#3392" class="Datatype Operator">,UTXO⦈</a> <a id="15416" href="Ledger.Conway.Utxo.html#12826" class="Generalizable">s&#39;</a>


<a id="15421" class="Keyword">pattern</a> <a id="UTXO-inductive⋯"></a><a id="15429" href="Ledger.Conway.Utxo.html#15429" class="InductiveConstructor">UTXO-inductive⋯</a> <a id="15445" href="Ledger.Conway.Utxo.html#15527" class="Bound">tx</a> <a id="15448" href="Ledger.Conway.Utxo.html#15510" class="Bound">Γ</a> <a id="15450" href="Ledger.Conway.Utxo.html#15518" class="Bound">s</a> <a id="15452" href="Ledger.Conway.Utxo.html#15532" class="Bound">x</a> <a id="15454" href="Ledger.Conway.Utxo.html#15536" class="Bound">y</a> <a id="15456" href="Ledger.Conway.Utxo.html#15540" class="Bound">z</a> <a id="15458" href="Ledger.Conway.Utxo.html#15544" class="Bound">w</a> <a id="15460" href="Ledger.Conway.Utxo.html#15548" class="Bound">k</a> <a id="15462" href="Ledger.Conway.Utxo.html#15552" class="Bound">l</a> <a id="15464" href="Ledger.Conway.Utxo.html#15556" class="Bound">m</a> <a id="15466" href="Ledger.Conway.Utxo.html#15560" class="Bound">v</a> <a id="15468" href="Ledger.Conway.Utxo.html#15564" class="Bound">j</a> <a id="15470" href="Ledger.Conway.Utxo.html#15568" class="Bound">n</a> <a id="15472" href="Ledger.Conway.Utxo.html#15572" class="Bound">o</a> <a id="15474" href="Ledger.Conway.Utxo.html#15576" class="Bound">p</a> <a id="15476" href="Ledger.Conway.Utxo.html#15580" class="Bound">q</a> <a id="15478" href="Ledger.Conway.Utxo.html#15584" class="Bound">r</a> <a id="15480" href="Ledger.Conway.Utxo.html#15588" class="Bound">t</a> <a id="15482" href="Ledger.Conway.Utxo.html#15592" class="Bound">u</a> <a id="15484" href="Ledger.Conway.Utxo.html#15596" class="Bound">h</a>
  <a id="15488" class="Symbol">=</a> <a id="15490" href="Ledger.Conway.Utxo.html#14164" class="InductiveConstructor">UTXO-inductive</a> <a id="15505" class="Symbol">{</a><a id="15506" class="Argument">Γ</a> <a id="15508" class="Symbol">=</a> <a id="15510" href="Ledger.Conway.Utxo.html#15510" class="Bound">Γ</a><a id="15511" class="Symbol">}</a> <a id="15513" class="Symbol">{</a><a id="15514" class="Argument">s</a> <a id="15516" class="Symbol">=</a> <a id="15518" href="Ledger.Conway.Utxo.html#15518" class="Bound">s</a><a id="15519" class="Symbol">}</a> <a id="15521" class="Symbol">{</a><a id="15522" class="Argument">tx</a> <a id="15525" class="Symbol">=</a> <a id="15527" href="Ledger.Conway.Utxo.html#15527" class="Bound">tx</a><a id="15529" class="Symbol">}</a> <a id="15531" class="Symbol">(</a><a id="15532" href="Ledger.Conway.Utxo.html#15532" class="Bound">x</a> <a id="15534" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15536" href="Ledger.Conway.Utxo.html#15536" class="Bound">y</a> <a id="15538" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15540" href="Ledger.Conway.Utxo.html#15540" class="Bound">z</a> <a id="15542" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15544" href="Ledger.Conway.Utxo.html#15544" class="Bound">w</a> <a id="15546" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15548" href="Ledger.Conway.Utxo.html#15548" class="Bound">k</a> <a id="15550" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15552" href="Ledger.Conway.Utxo.html#15552" class="Bound">l</a> <a id="15554" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15556" href="Ledger.Conway.Utxo.html#15556" class="Bound">m</a> <a id="15558" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15560" href="Ledger.Conway.Utxo.html#15560" class="Bound">v</a> <a id="15562" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15564" href="Ledger.Conway.Utxo.html#15564" class="Bound">j</a> <a id="15566" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15568" href="Ledger.Conway.Utxo.html#15568" class="Bound">n</a> <a id="15570" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15572" href="Ledger.Conway.Utxo.html#15572" class="Bound">o</a> <a id="15574" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15576" href="Ledger.Conway.Utxo.html#15576" class="Bound">p</a> <a id="15578" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15580" href="Ledger.Conway.Utxo.html#15580" class="Bound">q</a> <a id="15582" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15584" href="Ledger.Conway.Utxo.html#15584" class="Bound">r</a> <a id="15586" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15588" href="Ledger.Conway.Utxo.html#15588" class="Bound">t</a> <a id="15590" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15592" href="Ledger.Conway.Utxo.html#15592" class="Bound">u</a> <a id="15594" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="15596" href="Ledger.Conway.Utxo.html#15596" class="Bound">h</a><a id="15597" class="Symbol">)</a>
<a id="15599" class="Keyword">unquoteDecl</a> <a id="UTXO-premises"></a><a id="15611" href="Ledger.Conway.Utxo.html#15611" class="Function">UTXO-premises</a> <a id="15625" class="Symbol">=</a> <a id="15627" href="iog-prelude.Tactic.Premises.html#2289" class="Function">genPremises</a> <a id="15639" href="Ledger.Conway.Utxo.html#15611" class="Function">UTXO-premises</a> <a id="15653" class="Symbol">(</a><a id="15654" class="Keyword">quote</a> <a id="15660" href="Ledger.Conway.Utxo.html#14164" class="InductiveConstructor">UTXO-inductive</a><a id="15674" class="Symbol">)</a>

</pre></body></html>