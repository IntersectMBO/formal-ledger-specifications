\usepackage{longtable}
\usepackage[margin=2.5cm]{geometry}
\usepackage{float}
\floatstyle{boxed}
\restylefloat{figure}

\usepackage{iohk}
\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue
 }

%%
%% Agda-specific macros (usually defined in agda-latex-macros.sty)
%%
\usepackage[links]{agda}
\usepackage{agda-latex-macros}

\setlength{\mathindent}{10pt}

\usepackage[utf8]{inputenc} % For UTF-8 encoding (recommended)
%% \usepackage[style=abbrv, backend=biber]{biblatex}
\usepackage[
  %% style=alphabetic,
  style=numeric-comp,
  %% style=authortitle,
  %% style=authortitle-terse,
  %% style=authortitle-comp,
  %% style=authoryear-comp,
  %% style=authoryear-icomp,
  %% style=authoryear-ibid,
  %% style=authoryear-terse,
  backend=biber,
  ibidtracker=constrict,
  pagetracker=page,
  datamodel=software,
  ]{biblatex}
%% \usepackage[style=alphabeticnumeric-comp, backend=biber]{biblatex}
  %% style=alphabetic,
  %% sorting=ynt
\usepackage{software-biblatex}
\addbibresource{references.bib}

%%
%% For more consistent and robust cross references...
%%
\usepackage[capitalize]{cleveref}
%% Wherever we previously used \ref, we now use \cref instead
%% (except at the beginning of a sentence, where we use \Cref) so we
%% no longer need to explicitly name the kind of thing being referenced.
%% + Use "\cref{eq1}" instead of "Eq.~(\ref{eq1})".
%% + For a range of labels, use the \crefrange command:
%%   `\crefrange{eq1}{eq5}` produces "Eqs.~(1) to~(5)".
%% + To refer to multiple things at once, combine them all into one:
%%   `\cref{eq2,eq1,eq3,eq5,thm2,def1}` produces:
%%   "Eqs.~(1) to~(3) and~(5), Theorem~5, and Definition~1".

\usepackage{fontspec}

%%
%% Math fonts, unicode symbols, and new theorem environments
%%
\usepackage{unicode-math}
\setsansfont{XITSMath-Regular.otf}
\setmathfont{XITSMath-Regular.otf}
\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newunicodechar{Ë¢}{\ensuremath{}}
\newtheorem{property}{Property}[section]

%%
%% For typesetting defined terms consistently...
%%
\newcommand{\defn}[1]{\textit{#1}}   %  defined terms are typeset in italics
%% \newcommand{\defn}[1]{\textbf{#1}}   %  defined terms are typeset in bold
%%  ^^^^^^ Set the desired typeface for new/defined terms;
%%         at first occurrence of a term, enclose it in `\defn{...}`.

%%
%% For consistent references to our GitHub repo and Agda modules...
%%
\newcommand{\repourl}{https://github.com/IntersectMBO/formal-ledger-specifications}
\newcommand{\modulenote}[1]{Code in this section is part of the #1 module
                            of the \href{\repourl}{formal ledger specification}.}
\newcommand{\modulefootnotetext}[1]{\footnotetext{\modulenote{#1}}}

%%
%% For highlighting text with a yellow background...
%%
\newcommand{\hldiff}[1]{\colorbox{yellow}{#1}}

%%
%% Macros for consistent referencing
%%
\ExplSyntaxOn
\NewDocumentCommand\hrefCIP{m}{%
  \clist_if_in:nnTF {0069,1694} {#1}
  {\href{\detokenize{https://cips.cardano.org/cip/CIP-#1}}{CIP-#1}}%
  {\msg_warning:nnn {agda-latex-macros} {invalid-cip} {#1}
    CIP-#1 % Still prints the text but without a hyperlink
  }%
}
\msg_new:nnn {agda-latex-macros} {invalid-cip}
  {CIP-#1 is not a known CIP. The hyperlink will not be created.}
\ExplSyntaxOff

\NewDocumentCommand{\hrefAgdaWiki}{O{Agda Wiki}}{%
  \href{https://wiki.portal.chalmers.se/agda/pmwiki.php}{#1}%
}

\NewDocumentCommand{\hrefAgdaDocs}{O{} O{Agda documentation}}{%
  \href{https://agda.readthedocs.io/en/\AgdaVersion/#1}{#2}%
}
% For a link to the main Agda documentation website, just use \hrefAgdaDocs{}.
% For a link to a specific section of the Agda docs, use
% \hrefAgdaDocs[URLsuffix]{Link text}.
% For example, \hrefAgdaDocs[language/record-types.html][agda.readthedocs.io/record-types],
% produces a link to url https://agda.readthedocs.io/en/\AgdaVersion/language/record-types.html
% with link text "agda.readthedocs.io/record-types".

%%
%% Miscellaneous Functions
%%
\newcommand{\outs}[1]{\fun{outs}~ \var{#1}}
\newcommand{\balance}[1]{\fun{balance}~ \var{#1}}
\newcommand{\txfee}[1]{\fun{txfee}~ \var{#1}}

\NewDocumentCommand{\sectionname}{}{Section}
\crefname{section}{\sectionname}{\sectionname{}s}
%% The above help enforce consistency among citations that mention sections;
%% for example, instead of \cite[Section~11.6]{shelley-ledger-spec}
%%              use        \cite[\sectionname~11.6]{shelley-ledger-spec}
