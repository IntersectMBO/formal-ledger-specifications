\usepackage{longtable}
\usepackage[margin=2.5cm]{geometry}
\usepackage{float}
\floatstyle{boxed}
\restylefloat{figure}
\usepackage{bussproofs}

\usepackage[bookmarksopen=true]{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue
 }

\usepackage[links]{agda}

\setlength{\mathindent}{10pt}

\usepackage[
  style=ieee,
  backend=biber,
  ibidtracker=constrict,
  pagetracker=page,
  datamodel=software,
  ]{biblatex}
\usepackage{software-biblatex}
\addbibresource{references.bib}

\usepackage{fontspec}

%%
%% Math fonts, unicode symbols, and new theorem environments
%%
\usepackage{unicode-math}
\setsansfont{XITSMath-Regular.otf}
\setmathfont{XITSMath-Regular.otf}
\setmonofont{DejaVu Sans Mono}[Scale=MatchLowercase]

\usepackage{macros}

\usepackage{enumitem}
\setlist[itemize]{itemsep=1pt}
\setlist[enumerate]{itemsep=1pt}
% \setlist[description]{itemsep=2pt, topsep=4pt}

%%
%% for diagrams
%%
\usepackage{pgfplots}
\usepackage[tikz]{bclogo}
\usepackage{tikz-cd}
\usetikzlibrary{ arrows.meta
               , backgrounds
               , calc
               , decorations.pathreplacing
               , fit
               , positioning
               , shadows
               , shapes.geometric
               , shapes.misc
               }
\usepackage[dvipsnames]{xcolor}
\usepackage{caption}
\def\AlonzoColor{Periwinkle}
\def\BabbageColor{Tan}
\def\ConwayColor{yellow!50}
\def\ShelleyColor{lightgray}
\newcommand{\legendbox}[1]{%
  \textcolor{#1}{\rule{\fontcharht\font`X}{\fontcharht\font`X}}%
}
%%
%% cleveref (for more consistent and robust cross references)
%%
\usepackage[capitalize,nameinlink]{cleveref}
%% Wherever we previously used \ref, we now use \cref instead
%% (except at the beginning of a sentence, where we use \Cref) so we
%% no longer need to explicitly name the kind of thing being referenced.
%% + Use "\cref{eq1}" instead of "Eq.~(\ref{eq1})".
%% + For a range of labels, use the \crefrange command:
%%   `\crefrange{eq1}{eq5}` produces "Eqs.~(1) to~(5)".
%% + To refer to multiple things at once, combine them all into one:
%%   `\cref{eq2,eq1,eq3,eq5,thm2,def1}` produces:
%%   "Eqs.~(1) to~(3) and~(5), Theorem~5, and Definition~1".
\Crefname{thetheorem}{Theorem}{Theorems}
\Crefname{theclaim}{Claim}{Claims}
\Crefname{figure}{Fig.}{Figs.}
\Crefname{equation}{Eq.}{Eqs.}
\Crefname{tabular}{Tab.}{Tabs.}
\NewDocumentCommand{\sectionname}{}{Sec}
\crefname{section}{\sectionname.}{\sectionname{}s.}
\Crefname{section}{\sectionname.}{\sectionname{}s.}
%% The above help enforce consistency among citations that mention sections;
%% for example, instead of \cite[Section~11.6]{shelley-ledger-spec}
%%              use        \cite[\sectionname~11.6]{shelley-ledger-spec}

%%
%% Environments
%%
\usepackage{amsthm}
\theoremstyle{definition}

\newcounter{theproperty} \setcounter{theproperty}{1}
\newenvironment{property}[1][]{\bigskip\noindent%
\begin{minipage}{\textwidth}%
{\textbf{Property \arabic{theproperty}. (#1)} \stepcounter{theproperty} \rm}%
}{\end{minipage}\medskip}

%% Use claim for properties we have yet to prove.
\newcounter{theclaim} \setcounter{theclaim}{1}
\newenvironment{claim}[1][]{\bigskip\noindent%
\refstepcounter{theclaim}%  % Step the counter and make it referenceable
\begin{minipage}{\textwidth}%
{\textbf{Claim \arabic{theclaim}. (#1)} \stepcounter{theclaim} \rm}%
}{\end{minipage}\medskip}

\newcounter{thetheorem} \setcounter{thetheorem}{1}
\newenvironment{theorem}[1][]{\bigskip\noindent%
\refstepcounter{thetheorem}%  % Step the counter and make it referenceable
\begin{minipage}{\textwidth}%
{\textbf{Theorem \arabic{thetheorem}. (#1)} \label{thm:\arabic{thetheorem}} \rm}% % Add a default label
}{\end{minipage}\medskip}

\newenvironment{question}
  {\begin{bclogo}[logo=\bcquestion, couleur=orange!10, arrondi=0.2]{ QUESTION}}
  {\end{bclogo}}
\newenvironment{note}
  {\begin{bclogo}[logo=\bcattention, couleur=orange!10, arrondi=0.2]{ NOTE}}
  {\end{bclogo}}
