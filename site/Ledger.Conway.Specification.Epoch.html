
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Formal ledger specification and documentation.">
      
      
        <meta name="author" content="Formal Methods Ledger Team">
      
      
        <link rel="canonical" href="https://intersectmbo.github.io/formal-ledger-specifications/Ledger.Conway.Specification.Epoch.html">
      
      
        <link rel="prev" href="Ledger.Conway.Specification.Enact.Properties.Computational.html">
      
      
        <link rel="next" href="Ledger.Conway.Specification.Epoch.Properties.html">
      
      
      <link rel="icon" href="img/Cardano-RGB_Logo-Icon-White.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Epoch - Formal Ledger Specification</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CSource+Code+Pro:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Open Sans";--md-code-font:"Source Code Pro"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    
      <link rel="stylesheet" href="css/custom.css">
    
      <link rel="stylesheet" href="css/Agda.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sec:epoch-boundary" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Formal Ledger Specification" class="md-header__button md-logo" aria-label="Formal Ledger Specification" data-md-component="logo">
      
  <img src="img/Cardano-RGB_Logo-Icon-Blue.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Formal Ledger Specification
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Epoch
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/IntersectMBO/formal-ledger-specifications" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="index.html" class="md-tabs__link">
          
  
  
  Navigation

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Formal Ledger Specification" class="md-nav__button md-logo" aria-label="Formal Ledger Specification" data-md-component="logo">
      
  <img src="img/Cardano-RGB_Logo-Icon-Blue.svg" alt="logo">

    </a>
    Formal Ledger Specification
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/IntersectMBO/formal-ledger-specifications" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Navigation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Navigation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="guide.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Guide for Contributors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Preliminaries
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Preliminaries
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Notation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Notation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ledger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" checked>
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Ledger/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Ledger/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prelude
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Introduction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_4" >
        
          
          <label class="md-nav__link" for="__nav_1_5_4" id="__nav_1_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Prelude/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_4">
            <span class="md-nav__icon md-icon"></span>
            Prelude/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.Base.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_4_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_4_2" id="__nav_1_5_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Foreign/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_4_2">
            <span class="md-nav__icon md-icon"></span>
            Foreign/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.Foreign.HSTypes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HSTypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.Foreign.Util.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Util
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.HasCoin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HasCoin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.Instances.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.Numeric.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Numeric
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_4_6" >
        
          
          <label class="md-nav__link" for="__nav_1_5_4_6" id="__nav_1_5_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Numeric/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_4_6">
            <span class="md-nav__icon md-icon"></span>
            Numeric/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.Numeric.PositiveNat.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PositiveNat
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Prelude.Numeric.UnitInterval.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UnitInterval
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5_5" id="__nav_1_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_5">
            <span class="md-nav__icon md-icon"></span>
            Core/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_5_1" >
        
          
          <label class="md-nav__link" for="__nav_1_5_5_1" id="__nav_1_5_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Specification/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_5_1">
            <span class="md-nav__icon md-icon"></span>
            Specification/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Core.Specification.Address.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Address
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Core.Specification.Crypto.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Crypto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Core.Specification.Epoch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Epoch
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7" checked>
        
          
          <label class="md-nav__link" for="__nav_1_5_7" id="__nav_1_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Conway/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_5_7">
            <span class="md-nav__icon md-icon"></span>
            Conway/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2" checked>
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2" id="__nav_1_5_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Specification/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_7_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_5_7_2">
            <span class="md-nav__icon md-icon"></span>
            Specification/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Abstract.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Abstract
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.BlockBody.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BlockBody
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_3" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_3" id="__nav_1_5_7_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    BlockBody/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_3">
            <span class="md-nav__icon md-icon"></span>
            BlockBody/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.BlockBody.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_3_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_3_2" id="__nav_1_5_7_2_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_3_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.BlockBody.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Certs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Certs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_5" id="__nav_1_5_7_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Certs/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_5">
            <span class="md-nav__icon md-icon"></span>
            Certs/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Certs.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_5_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_5_2" id="__nav_1_5_7_2_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_5_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Certs.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Certs.Properties.PoV.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PoV
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Certs.Properties.PoVLemmas.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PoVLemmas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Certs.Properties.VoteDelegsVDeleg.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VoteDelegsVDeleg
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Chain.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_7" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_7" id="__nav_1_5_7_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chain/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_7">
            <span class="md-nav__icon md-icon"></span>
            Chain/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Chain.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_7_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_7_2" id="__nav_1_5_7_2_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_7_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Chain.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Chain.Properties.CredDepsEqualDomRwds.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CredDepsEqualDomRwds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Chain.Properties.EpochStep.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EpochStep
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Chain.Properties.GovDepsMatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GovDepsMatch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Chain.Properties.PParamsWellFormed.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PParamsWellFormed
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Enact.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enact
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_9" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_9" id="__nav_1_5_7_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Enact/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_9">
            <span class="md-nav__icon md-icon"></span>
            Enact/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Enact.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_9_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_9_2" id="__nav_1_5_7_2_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_9_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Enact.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Epoch
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="Ledger.Conway.Specification.Epoch.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Epoch
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#epoch-and-newepoch-transition-system-types" class="md-nav__link">
    <span class="md-ellipsis">
      EPOCH and NEWEPOCH Transition System Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rewardupdate" class="md-nav__link">
    <span class="md-ellipsis">
      RewardUpdate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RewardUpdate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computing-rewardupdate" class="md-nav__link">
    <span class="md-ellipsis">
      Computing RewardUpdate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying-rewardupdate" class="md-nav__link">
    <span class="md-ellipsis">
      Applying RewardUpdate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stake-distributions" class="md-nav__link">
    <span class="md-ellipsis">
      Stake Distributions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#epoch-transition-system" class="md-nav__link">
    <span class="md-ellipsis">
      EPOCH Transition System
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EPOCH Transition System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Helper Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Update Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transition-rule" class="md-nav__link">
    <span class="md-ellipsis">
      Transition Rule
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#newepoch-transition-system" class="md-nav__link">
    <span class="md-ellipsis">
      NEWEPOCH Transition System
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_11" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_11" id="__nav_1_5_7_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Epoch/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_11">
            <span class="md-nav__icon md-icon"></span>
            Epoch/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Epoch.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_11_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_11_2" id="__nav_1_5_7_2_11_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_11_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_11_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Epoch.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Epoch.Properties.ConstRwds.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ConstRwds
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Epoch.Properties.GovDepsMatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GovDepsMatch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Epoch.Properties.NoPropSameDReps.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NoPropSameDReps
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Fees.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fees
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Gov.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gov
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_14" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_14" id="__nav_1_5_7_2_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gov/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_14">
            <span class="md-nav__icon md-icon"></span>
            Gov/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Gov.Base.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Gov.Actions.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Actions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Gov.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_14_4" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_14_4" id="__nav_1_5_7_2_14_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_14_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_14_4">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Gov.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Gov.Properties.ChangePPGroup.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ChangePPGroup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ledger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ledger.Ledger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_16" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_16" id="__nav_1_5_7_2_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ledger.Ledger/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_16">
            <span class="md-nav__icon md-icon"></span>
            Ledger.Ledger/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ledger.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_16_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_16_2" id="__nav_1_5_7_2_16_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_16_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_16_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ledger.Properties.Base.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ledger.Properties.Computational.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ledger.Properties.GovDepsMatch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GovDepsMatch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ledger.Properties.PoV.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PoV
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.PoolReap.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PoolReap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.PParams.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PParams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Properties.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ratify.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ratify
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_21" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_21" id="__nav_1_5_7_2_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ratify/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_21">
            <span class="md-nav__icon md-icon"></span>
            Ratify/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ratify.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_21_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_21_2" id="__nav_1_5_7_2_21_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_21_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_21_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Ratify.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Rewards.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rewards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.RewardUpdate.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RewardUpdate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_24" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_24" id="__nav_1_5_7_2_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    RewardUpdate/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_24">
            <span class="md-nav__icon md-icon"></span>
            RewardUpdate/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.RewardUpdate.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_24_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_24_2" id="__nav_1_5_7_2_24_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_24_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_24_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.RewardUpdate.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Script.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Script
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_26" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_26" id="__nav_1_5_7_2_26_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Script/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_26_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_26">
            <span class="md-nav__icon md-icon"></span>
            Script/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Script.Base.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Script.Timelock.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timelock
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Script.Validation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_27" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_27" id="__nav_1_5_7_2_27_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    TokenAlgebra/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_27_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_27">
            <span class="md-nav__icon md-icon"></span>
            TokenAlgebra/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.TokenAlgebra.Base.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.TokenAlgebra.Coin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.TokenAlgebra.ValueSet.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ValueSet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.TokenAlgebra.ValueVector.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ValueVector
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Transaction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transaction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utxo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_30" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_30" id="__nav_1_5_7_2_30_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utxo/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_30_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_30">
            <span class="md-nav__icon md-icon"></span>
            Utxo/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxo.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_30_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_30_2" id="__nav_1_5_7_2_30_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_30_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_30_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxo.Properties.Base.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxo.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxo.Properties.GenMinSpend.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GenMinspend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxo.Properties.MinSpend.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MinSpend
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxo.Properties.PoV.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PoV
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxow.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utxow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_32" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_32" id="__nav_1_5_7_2_32_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utxow/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_32_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_32">
            <span class="md-nav__icon md-icon"></span>
            Utxow/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxow.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_32_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_32_2" id="__nav_1_5_7_2_32_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Properties/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_32_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_32_2">
            <span class="md-nav__icon md-icon"></span>
            Properties/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Utxow.Properties.Computational.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Computational
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_33" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_33" id="__nav_1_5_7_2_33_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Test
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_33_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_33">
            <span class="md-nav__icon md-icon"></span>
            Test
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Test.Examples.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_33_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_33_2" id="__nav_1_5_7_2_33_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Examples/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_2_33_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_33_2">
            <span class="md-nav__icon md-icon"></span>
            Examples/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Test.Examples.HelloWorld.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HelloWorld
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Test.Examples.SucceedIfNumber.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SucceedIfNumber
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Test.LedgerImplementation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LedgerImplementation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Test.Lib.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Test.Prelude.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prelude
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Test.StructuredContracts.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    StructuredContracts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_2_34" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_2_34" id="__nav_1_5_7_2_34_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Types/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_2_34_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_2_34">
            <span class="md-nav__icon md-icon"></span>
            Types/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Specification.Types.GovStructure.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GovStructure
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_3" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_3" id="__nav_1_5_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bootstrap/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_3">
            <span class="md-nav__icon md-icon"></span>
            Bootstrap/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ConwayBootstrap.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ConwayBootstrap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ConwayBootstrapEnact.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ConwayBootstrapEnact
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_4" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_4" id="__nav_1_5_7_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Foreign/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_7_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_4">
            <span class="md-nav__icon md-icon"></span>
            Foreign/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.ExternalFunctions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExternalFunctions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HSLedger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_4_3" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_4_3" id="__nav_1_5_7_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    HSLedger/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_4_3">
            <span class="md-nav__icon md-icon"></span>
            HSLedger/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Address.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Address
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.BaseTypes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BaseTypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Cert.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cert
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Certs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Certs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Chain.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Enact.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Enact
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Epoch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Epoch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.ExternalStructures.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ExternalStructures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Gov.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gov
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_4_3_11" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_4_3_11" id="__nav_1_5_7_4_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gov/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="6" aria-labelledby="__nav_1_5_7_4_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_4_3_11">
            <span class="md-nav__icon md-icon"></span>
            Gov/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Gov.Core.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Gov.Actions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Actions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Ledger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ledger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.NewEpoch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NewEpoch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.PParams.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PParams
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Ratify.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ratify
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Rewards.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rewards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Transaction.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transaction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Foreign.HSLedger.Utxo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utxo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conformance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6" id="__nav_1_5_7_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Conformance/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_7_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6">
            <span class="md-nav__icon md-icon"></span>
            Conformance/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Certs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Certs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6_2" id="__nav_1_5_7_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Certs/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6_2">
            <span class="md-nav__icon md-icon"></span>
            Certs/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Certs.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Chain.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6_4" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6_4" id="__nav_1_5_7_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chain/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6_4">
            <span class="md-nav__icon md-icon"></span>
            Chain/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Chain.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Epoch.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Epoch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6_6" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6_6" id="__nav_1_5_7_6_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Epoch/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_6_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6_6">
            <span class="md-nav__icon md-icon"></span>
            Epoch/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Epoch.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Equivalence.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Equivalence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6_8" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6_8" id="__nav_1_5_7_6_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Equivalence/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_6_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6_8">
            <span class="md-nav__icon md-icon"></span>
            Equivalence/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Equivalence.Bisimilarity.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bisimilarity
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Equivalence.Certs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Certs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Equivalence.Convert.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Convert
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Equivalence.Deposits.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deposits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Equivalence.Map.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Map
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Equivalence.Utxo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utxo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Gov.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gov
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Ledger.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ledger
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6_11" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6_11" id="__nav_1_5_7_6_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ledger/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_6_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6_11">
            <span class="md-nav__icon md-icon"></span>
            Ledger/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Ledger.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Rewards.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rewards
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Script.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Script
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Utxo.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utxo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6_16" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6_16" id="__nav_1_5_7_6_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utxo/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_6_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6_16">
            <span class="md-nav__icon md-icon"></span>
            Utxo/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Utxo.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Utxow.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utxow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_7_6_18" >
        
          
          <label class="md-nav__link" for="__nav_1_5_7_6_18" id="__nav_1_5_7_6_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utxow/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_7_6_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_7_6_18">
            <span class="md-nav__icon md-icon"></span>
            Utxow/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.Conway.Conformance.Utxow.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PreConway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_9" >
        
          
          <label class="md-nav__link" for="__nav_1_5_9" id="__nav_1_5_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    PreConway/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_5_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_9">
            <span class="md-nav__icon md-icon"></span>
            PreConway/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_9_1" >
        
          
          <label class="md-nav__link" for="__nav_1_5_9_1" id="__nav_1_5_9_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Conformance
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_9_1">
            <span class="md-nav__icon md-icon"></span>
            Conformance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.Conformance.NewPP.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NewPP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_9_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_5_9_1_2" id="__nav_1_5_9_1_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    NewPP/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_9_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_9_1_2">
            <span class="md-nav__icon md-icon"></span>
            NewPP/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.Conformance.NewPP.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.Conformance.PPUp.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PPUp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_9_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_5_9_1_4" id="__nav_1_5_9_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    PPUp/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_5_9_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_9_1_4">
            <span class="md-nav__icon md-icon"></span>
            PPUp/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.Conformance.PPUp.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.NewPP.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NewPP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_9_3" >
        
          
          <label class="md-nav__link" for="__nav_1_5_9_3" id="__nav_1_5_9_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    NewPP/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_9_3">
            <span class="md-nav__icon md-icon"></span>
            NewPP/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.NewPP.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.PPUp.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PPUp
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5_9_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5_9_5" id="__nav_1_5_9_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    PPUp/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_5_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5_9_5">
            <span class="md-nav__icon md-icon"></span>
            PPUp/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Ledger.PreConway.PPUp.Properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Foreign/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Foreign/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Foreign.Convertible.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Convertible
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_2" >
        
          
          <label class="md-nav__link" for="__nav_1_6_2" id="__nav_1_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Convertible/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_2">
            <span class="md-nav__icon md-icon"></span>
            Convertible/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Foreign.Convertible.Deriving.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deriving
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Foreign.Convertible.DerivingTest.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DerivingTest
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Foreign.HaskellTypes.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HaskellTypes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6_4" >
        
          
          <label class="md-nav__link" for="__nav_1_6_4" id="__nav_1_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    HaskellTypes/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6_4">
            <span class="md-nav__icon md-icon"></span>
            HaskellTypes/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Foreign.HaskellTypes.Deriving.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deriving
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Appendix/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            Appendix/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Definitions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Definitions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Prelude.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agda Prelude
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_3" >
        
          
          <label class="md-nav__link" for="__nav_1_7_3" id="__nav_1_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Type Classes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7_3">
            <span class="md-nav__icon md-icon"></span>
            Type Classes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_3_1" >
        
          
          <label class="md-nav__link" for="__nav_1_7_3_1" id="__nav_1_7_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Interface
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_7_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7_3_1">
            <span class="md-nav__icon md-icon"></span>
            Interface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Interface.ComputationalRelation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ComputationalRelation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Interface.HasSubset.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HasSubset
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Interface.HasSubtract.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HasSubtract
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7_3_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_7_3_1_4" id="__nav_1_7_3_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    HasSubtract/
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_7_3_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7_3_1_4">
            <span class="md-nav__icon md-icon"></span>
            HasSubtract/
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Interface.HasSubtract.Instances.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instance
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Interface.Hashable.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hashable
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="Interface.STS.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    STS
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="MyDebugOptions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MyDebugOptions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#epoch-and-newepoch-transition-system-types" class="md-nav__link">
    <span class="md-ellipsis">
      EPOCH and NEWEPOCH Transition System Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rewardupdate" class="md-nav__link">
    <span class="md-ellipsis">
      RewardUpdate
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RewardUpdate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#computing-rewardupdate" class="md-nav__link">
    <span class="md-ellipsis">
      Computing RewardUpdate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying-rewardupdate" class="md-nav__link">
    <span class="md-ellipsis">
      Applying RewardUpdate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stake-distributions" class="md-nav__link">
    <span class="md-ellipsis">
      Stake Distributions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#epoch-transition-system" class="md-nav__link">
    <span class="md-ellipsis">
      EPOCH Transition System
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EPOCH Transition System">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Helper Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Update Functions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transition-rule" class="md-nav__link">
    <span class="md-ellipsis">
      Transition Rule
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#newepoch-transition-system" class="md-nav__link">
    <span class="md-ellipsis">
      NEWEPOCH Transition System
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  




  <a href="https://github.com/IntersectMBO/formal-ledger-specifications/blob/master/src/Ledger/Conway/Specification/Epoch.lagda.md?plain=1"
     class="md-content__button md-icon"
     title="View the source of this page"
     aria-label="View the source of this page">
    
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </a>


<h1 id="sec:epoch-boundary">Epoch Boundary<a class="headerlink" href="#sec:epoch-boundary" title="Permanent link">&para;</a></h1>
<p>This module introduces the epoch boundary transition system and the related
reward calculation.</p>
<!--
<div class="highlight"><pre><span></span><code><span class="cm">{-# OPTIONS --safe #-}</span>

<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Data.Integer</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">()</span><span class="w"> </span><span class="kr">renaming</span><span class="w"> </span><span class="o">(</span>+_<span class="w"> </span>to<span class="w"> </span>pos<span class="o">)</span>
<span class="kr">import</span><span class="w">      </span><span class="n">Data.Integer</span><span class="w"> </span>as<span class="w"> </span>ℤ
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Data.Integer.Properties</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span><span class="kr">module</span><span class="w"> </span>≤-<span class="n">Reasoning</span>;<span class="w"> </span>+-mono-≤;<span class="w"> </span>neg-mono-≤;<span class="w"> </span>+-identityˡ<span class="o">)</span>
<span class="w">                                    </span><span class="kr">renaming</span><span class="w"> </span><span class="o">(</span>nonNegative⁻¹<span class="w"> </span>to<span class="w"> </span>nonNegative⁻¹ℤ<span class="o">)</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Data.Nat.GeneralisedArithmetic</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>iterate<span class="o">)</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Data.Rational</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>ℚ;<span class="w"> </span>floor;<span class="w"> </span>_*_;<span class="w"> </span>_÷_;<span class="w"> </span>_/_;<span class="w"> </span>_⊓_;<span class="w"> </span>_≟_;<span class="w"> </span>≢-nonZero<span class="o">)</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Data.Rational.Literals</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>number;<span class="w"> </span>fromℤ<span class="o">)</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Data.Rational.Properties</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>nonNegative⁻¹;<span class="w"> </span>pos⇒nonNeg;<span class="w"> </span>⊓-glb<span class="o">)</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">stdlib.Data.Rational.Properties</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span>≤⇒0≤floor;<span class="w"> </span>÷-0≤⇒0≤;<span class="w"> </span>fromℕ-0≤;<span class="w"> </span>*-0≤⇒0≤;<span class="w"> </span>fromℤ-0≤<span class="o">)</span>

<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Data.Integer.Tactic.RingSolver</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>solve-∀<span class="o">)</span>

<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Agda.Builtin.FromNat</span>

<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Prelude</span><span class="w"> </span><span class="kr">hiding</span><span class="w"> </span><span class="o">(</span>iterate;<span class="w"> </span>_/_;<span class="w"> </span>_*_;<span class="w"> </span>_⊓_;<span class="w"> </span>_≟_;<span class="w"> </span>≢-nonZero<span class="o">)</span>
<span class="kr">open</span><span class="w"> </span>Filter<span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>filter<span class="o">)</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Abstract</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Transaction</span>
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Prelude.Numeric.UnitInterval</span><span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>fromUnitInterval;<span class="w"> </span>UnitInterval-*-0≤<span class="o">)</span>

<span class="kr">open</span><span class="w"> </span>Number<span class="w"> </span>number<span class="w"> </span><span class="kr">renaming</span><span class="w"> </span><span class="o">(</span>fromNat<span class="w"> </span>to<span class="w"> </span>fromℕ<span class="o">)</span>

<span class="kr">module</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Epoch</span>
<span class="w">  </span><span class="o">(</span>txs<span class="w"> </span><span class="ow">:</span><span class="w"> </span>_<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="kr">open</span><span class="w"> </span>TransactionStructure<span class="w"> </span>txs<span class="o">)</span>
<span class="w">  </span><span class="o">(</span>abs<span class="w"> </span><span class="ow">:</span><span class="w"> </span>AbstractFunctions<span class="w"> </span>txs<span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="kr">open</span><span class="w"> </span>AbstractFunctions<span class="w"> </span>abs<span class="o">)</span>
<span class="w">  </span><span class="kr">where</span>

<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Certs</span><span class="w"> </span>govStructure
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Enact</span><span class="w"> </span>govStructure
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Gov</span><span class="w"> </span>txs
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Ledger</span><span class="w"> </span>txs<span class="w"> </span>abs
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.PoolReap</span><span class="w"> </span>txs<span class="w"> </span>abs
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Ratify</span><span class="w"> </span>txs
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Rewards</span><span class="w"> </span>txs<span class="w"> </span>abs
<span class="kr">open</span><span class="w"> </span><span class="kr">import</span><span class="w"> </span><span class="n">Ledger.Conway.Specification.Utxo</span><span class="w"> </span>txs<span class="w"> </span>abs
</code></pre></div>
-->

<h2 id="epoch-and-newepoch-transition-system-types"><span class="AgdaDatatype">EPOCH</span> and <span class="AgdaDatatype">NEWEPOCH</span> Transition System Types<a class="headerlink" href="#epoch-and-newepoch-transition-system-types" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kr">record</span><span class="w"> </span>EpochState<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span><span class="kr">where</span>
</code></pre></div>
<!--
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kr">constructor</span><span class="w"> </span>⟦_,_,_,_,_⟧ᵉ&#39;
</code></pre></div>
-->
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kr">field</span>
<span class="w">    </span><span class="nf">acnt</span><span class="w">       </span><span class="ow">:</span><span class="w"> </span>Acnt
<span class="w">    </span><span class="nf">ss</span><span class="w">         </span><span class="ow">:</span><span class="w"> </span>Snapshots
<span class="w">    </span><span class="nf">ls</span><span class="w">         </span><span class="ow">:</span><span class="w"> </span>LState
<span class="w">    </span><span class="nf">es</span><span class="w">         </span><span class="ow">:</span><span class="w"> </span>EnactState
<span class="w">    </span><span class="nf">fut</span><span class="w">        </span><span class="ow">:</span><span class="w"> </span>RatifyState
</code></pre></div>
<!--
<div class="highlight"><pre><span></span><code><span class="kr">record</span><span class="w"> </span>HasEpochState<span class="w"> </span><span class="o">{</span>a<span class="o">}</span><span class="w"> </span><span class="o">(</span>A<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span>a<span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">field</span><span class="w"> </span>EpochStateOf<span class="w"> </span><span class="ow">:</span><span class="w"> </span>A<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EpochState
<span class="kr">open</span><span class="w"> </span>HasEpochState<span class="w"> </span>⦃...⦄<span class="w"> </span>public

<span class="kr">instance</span>
<span class="w">  </span><span class="nf">HasSnapshots-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasSnapshots<span class="w"> </span>EpochState
<span class="w">  </span>HasSnapshots-EpochState<span class="w"> </span><span class="ow">.</span>SnapshotsOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>EpochState.ss

<span class="w">  </span><span class="nf">HasLState-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasLState<span class="w"> </span>EpochState
<span class="w">  </span>HasLState-EpochState<span class="w"> </span><span class="ow">.</span>LStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>EpochState.ls

<span class="w">  </span><span class="nf">HasEnactState-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasEnactState<span class="w"> </span>EpochState
<span class="w">  </span>HasEnactState-EpochState<span class="w"> </span><span class="ow">.</span>EnactStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>EpochState.es

<span class="w">  </span><span class="nf">HasDeposits-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasDeposits<span class="w"> </span>EpochState
<span class="w">  </span>HasDeposits-EpochState<span class="w"> </span><span class="ow">.</span>DepositsOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>DepositsOf<span class="w"> </span>∘<span class="w"> </span>LStateOf

<span class="w">  </span><span class="nf">HasTreasury-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasTreasury<span class="w"> </span>EpochState
<span class="w">  </span>HasTreasury-EpochState<span class="w"> </span><span class="ow">.</span>TreasuryOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>Acnt.treasury<span class="w"> </span>∘<span class="w"> </span>EpochState.acnt

<span class="w">  </span><span class="nf">HasReserves-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasReserves<span class="w"> </span>EpochState
<span class="w">  </span>HasReserves-EpochState<span class="w"> </span><span class="ow">.</span>ReservesOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>Acnt.reserves<span class="w"> </span>∘<span class="w"> </span>EpochState.acnt

<span class="w">  </span><span class="nf">HasPParams-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasPParams<span class="w"> </span>EpochState
<span class="w">  </span>HasPParams-EpochState<span class="w"> </span><span class="ow">.</span>PParamsOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>PParamsOf<span class="w"> </span>∘<span class="w"> </span>EnactStateOf

<span class="w">  </span><span class="nf">HasRatifyState-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasRatifyState<span class="w"> </span>EpochState
<span class="w">  </span>HasRatifyState-EpochState<span class="w"> </span><span class="ow">.</span>RatifyStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>EpochState.fut

<span class="w">  </span><span class="nf">HasPState-EpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasPState<span class="w"> </span>EpochState
<span class="w">  </span>HasPState-EpochState<span class="w"> </span><span class="ow">.</span>PStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>PStateOf<span class="w"> </span>∘<span class="w"> </span>CertStateOf<span class="w"> </span>∘<span class="w"> </span>LStateOf
</code></pre></div>
-->

<div class="highlight"><pre><span></span><code><span class="nf">PoolDelegatedStake</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type
PoolDelegatedStake<span class="w"> </span><span class="ow">=</span><span class="w"> </span>KeyHash<span class="w"> </span>⇀<span class="w"> </span>Coin

<span class="kr">record</span><span class="w"> </span>NewEpochState<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">field</span>
<span class="w">    </span><span class="nf">lastEpoch</span><span class="w">   </span><span class="ow">:</span><span class="w"> </span>Epoch
<span class="w">    </span><span class="nf">bprev</span><span class="w">       </span><span class="ow">:</span><span class="w"> </span>BlocksMade
<span class="w">    </span><span class="nf">bcur</span><span class="w">        </span><span class="ow">:</span><span class="w"> </span>BlocksMade
<span class="w">    </span><span class="nf">epochState</span><span class="w">  </span><span class="ow">:</span><span class="w"> </span>EpochState
<span class="w">    </span><span class="nf">ru</span><span class="w">          </span><span class="ow">:</span><span class="w"> </span>Maybe<span class="w"> </span>RewardUpdate
<span class="w">    </span><span class="nf">pd</span><span class="w">          </span><span class="ow">:</span><span class="w"> </span>PoolDelegatedStake
</code></pre></div>
<details class="info">
<summary>Differences with the Shelley Specification</summary>
<p>The formal specification utilizes the type <code class="AgdaDatatype">PoolDelegatedStake</code>
in lieu of the derived type <code class="AgdaDatatype">PoolDistr</code> (Figure 5, Shelley
specification <a href="#shelley-ledger-spec">CVG19</a>). The latter can be computed from the
former by divinding the associated <code class="AgdaDatatype">Coin</code> to each <code class="AgdaDatatype">KeyHash</code>
by the total stake in the map.</p>
<p>In addition, the formal specification omits the VRF key hashes in the
codomain of <code class="AgdaDatatype">PoolDelegatedStake</code> as they are not implemented at
the moment.</p>
</details>
<!--
<div class="highlight"><pre><span></span><code><span class="kr">record</span><span class="w"> </span>HasNewEpochState<span class="w"> </span><span class="o">{</span>a<span class="o">}</span><span class="w"> </span><span class="o">(</span>A<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span>a<span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">field</span><span class="w"> </span>NewEpochStateOf<span class="w"> </span><span class="ow">:</span><span class="w"> </span>A<span class="w"> </span><span class="ow">→</span><span class="w"> </span>NewEpochState
<span class="kr">open</span><span class="w"> </span>HasNewEpochState<span class="w"> </span>⦃...⦄<span class="w"> </span>public
<span class="kr">record</span><span class="w"> </span>HasLastEpoch<span class="w">     </span><span class="o">{</span>a<span class="o">}</span><span class="w"> </span><span class="o">(</span>A<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span>a<span class="o">)</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span>a<span class="w"> </span><span class="kr">where</span><span class="w"> </span><span class="kr">field</span><span class="w"> </span>LastEpochOf<span class="w">     </span><span class="ow">:</span><span class="w"> </span>A<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Epoch
<span class="kr">open</span><span class="w"> </span>HasLastEpoch<span class="w">     </span>⦃...⦄<span class="w"> </span>public

<span class="kr">instance</span>
<span class="w">  </span><span class="nf">HasLastEpoch-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasLastEpoch<span class="w"> </span>NewEpochState
<span class="w">  </span>HasLastEpoch-NewEpochState<span class="w"> </span><span class="ow">.</span>LastEpochOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>NewEpochState.lastEpoch

<span class="w">  </span><span class="nf">HasEpochState-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasEpochState<span class="w"> </span>NewEpochState
<span class="w">  </span>HasEpochState-NewEpochState<span class="w"> </span><span class="ow">.</span>EpochStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>NewEpochState.epochState

<span class="w">  </span><span class="nf">HasEnactState-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasEnactState<span class="w"> </span>NewEpochState
<span class="w">  </span>HasEnactState-NewEpochState<span class="w"> </span><span class="ow">.</span>EnactStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>EnactStateOf<span class="w"> </span>∘<span class="w"> </span>EpochStateOf

<span class="w">  </span><span class="nf">Hastreasury-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasTreasury<span class="w"> </span>NewEpochState
<span class="w">  </span>Hastreasury-NewEpochState<span class="w"> </span><span class="ow">.</span>TreasuryOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>TreasuryOf<span class="w"> </span>∘<span class="w"> </span>EpochStateOf

<span class="w">  </span><span class="nf">HasLState-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasLState<span class="w"> </span>NewEpochState
<span class="w">  </span>HasLState-NewEpochState<span class="w"> </span><span class="ow">.</span>LStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>LStateOf<span class="w"> </span>∘<span class="w"> </span>EpochStateOf

<span class="w">  </span><span class="nf">HasGovState-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasGovState<span class="w"> </span>NewEpochState
<span class="w">  </span>HasGovState-NewEpochState<span class="w"> </span><span class="ow">.</span>GovStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>GovStateOf<span class="w"> </span>∘<span class="w"> </span>LStateOf

<span class="w">  </span><span class="nf">HasCertState-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasCertState<span class="w"> </span>NewEpochState
<span class="w">  </span>HasCertState-NewEpochState<span class="w"> </span><span class="ow">.</span>CertStateOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>CertStateOf<span class="w"> </span>∘<span class="w"> </span>LStateOf

<span class="w">  </span><span class="nf">HasDReps-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasDReps<span class="w"> </span>NewEpochState
<span class="w">  </span>HasDReps-NewEpochState<span class="w"> </span><span class="ow">.</span>DRepsOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>DRepsOf<span class="w"> </span>∘<span class="w"> </span>CertStateOf

<span class="w">  </span><span class="nf">HasRewards-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasRewards<span class="w"> </span>NewEpochState
<span class="w">  </span>HasRewards-NewEpochState<span class="w"> </span><span class="ow">.</span>RewardsOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>RewardsOf<span class="w"> </span>∘<span class="w"> </span>CertStateOf

<span class="w">  </span><span class="nf">HasPParams-NewEpochState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>HasPParams<span class="w"> </span>NewEpochState
<span class="w">  </span>HasPParams-NewEpochState<span class="w"> </span><span class="ow">.</span>PParamsOf<span class="w"> </span><span class="ow">=</span><span class="w"> </span>PParamsOf<span class="w"> </span>∘<span class="w"> </span>EpochStateOf

<span class="w">  </span><span class="kr">unquoteDecl</span><span class="w"> </span>HasCast-EpochState<span class="w"> </span>HasCast-NewEpochState<span class="w"> </span><span class="ow">=</span><span class="w"> </span>derive-HasCast
<span class="w">    </span><span class="o">(</span><span class="w"> </span><span class="o">(</span><span class="kr">quote</span><span class="w"> </span>EpochState<span class="w">     </span>,<span class="w"> </span>HasCast-EpochState<span class="o">)</span>
<span class="w">    </span>∷<span class="w"> </span>[<span class="w"> </span><span class="o">(</span><span class="kr">quote</span><span class="w"> </span>NewEpochState<span class="w">  </span>,<span class="w"> </span>HasCast-NewEpochState<span class="o">)</span>]<span class="o">)</span>

<span class="nf">toRwdAddr</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Credential<span class="w"> </span><span class="ow">→</span><span class="w"> </span>RwdAddr
toRwdAddr<span class="w"> </span>x<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">record</span><span class="w"> </span><span class="o">{</span><span class="w"> </span>net<span class="w"> </span><span class="ow">=</span><span class="w"> </span>NetworkId<span class="w"> </span>;<span class="w"> </span>stake<span class="w"> </span><span class="ow">=</span><span class="w"> </span>x<span class="w"> </span><span class="o">}</span>

<span class="nf">getStakeCred</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>TxOut<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Maybe<span class="w"> </span>Credential
getStakeCred<span class="w"> </span><span class="o">(</span>a<span class="w"> </span>,<span class="w"> </span>_<span class="w"> </span>,<span class="w"> </span>_<span class="w"> </span>,<span class="w"> </span>_<span class="o">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span>stakeCred<span class="w"> </span>a

<span class="kr">open</span><span class="w"> </span>GovActionState<span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>returnAddr<span class="o">)</span>

<span class="kr">opaque</span>
</code></pre></div>
-->

<h2 id="rewardupdate"><span class="AgdaDatatype">RewardUpdate</span><a class="headerlink" href="#rewardupdate" title="Permanent link">&para;</a></h2>
<h3 id="computing-rewardupdate">Computing <span class="AgdaDatatype">RewardUpdate</span><a class="headerlink" href="#computing-rewardupdate" title="Permanent link">&para;</a></h3>
<p>This section defines the function <code class="AgdaFunction">createRUpd</code> which creates a
<code class="AgdaRecord">RewardUpdate</code>, i.e. the net flow of Ada due to paying out rewards
after an epoch:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">createRUpd</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℕ<span class="w"> </span><span class="ow">→</span><span class="w"> </span>BlocksMade<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EpochState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Coin<span class="w"> </span><span class="ow">→</span><span class="w"> </span>RewardUpdate
<span class="w">  </span>createRUpd<span class="w"> </span>slotsPerEpoch<span class="w"> </span>b<span class="w"> </span>es<span class="w"> </span>total<span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="kr">record</span><span class="w">  </span><span class="o">{</span><span class="w"> </span>Δt<span class="w"> </span><span class="ow">=</span><span class="w"> </span>Δt₁
<span class="w">            </span>;<span class="w"> </span>Δr<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>-<span class="w"> </span>Δr₁<span class="w"> </span>+<span class="w"> </span>Δr₂
<span class="w">            </span>;<span class="w"> </span>Δf<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>-<span class="w"> </span>pos<span class="w"> </span>feeSS
<span class="w">            </span>;<span class="w"> </span>rs<span class="w"> </span><span class="ow">=</span><span class="w"> </span>rs
</code></pre></div>
<!--
<div class="highlight"><pre><span></span><code><span class="w">            </span>;<span class="w"> </span>flowConservation<span class="w"> </span><span class="ow">=</span><span class="w"> </span>flowConservation
<span class="w">            </span>;<span class="w"> </span>Δt-nonnegative<span class="w"> </span><span class="ow">=</span><span class="w"> </span>Δt-nonneg
<span class="w">            </span>;<span class="w"> </span>Δf-nonpositive<span class="w"> </span><span class="ow">=</span><span class="w"> </span>Δf-nonpos
</code></pre></div>
-->
<div class="highlight"><pre><span></span><code><span class="w">            </span><span class="o">}</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="nf">prevPp</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>PParams
<span class="w">      </span>prevPp<span class="w"> </span><span class="ow">=</span><span class="w"> </span>PParamsOf<span class="w"> </span>es

<span class="w">      </span><span class="nf">reserves</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Reserves
<span class="w">      </span>reserves<span class="w"> </span><span class="ow">=</span><span class="w"> </span>ReservesOf<span class="w"> </span>es

<span class="w">      </span><span class="nf">pstakego</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Snapshot
<span class="w">      </span>pstakego<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="o">(</span>SnapshotsOf<span class="w"> </span>es<span class="o">)</span><span class="w"> </span><span class="ow">.</span>Snapshots.go

<span class="w">      </span><span class="nf">feeSS</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Fees
<span class="w">      </span>feeSS<span class="w"> </span><span class="ow">=</span><span class="w"> </span>FeesOf<span class="w"> </span><span class="o">(</span>SnapshotsOf<span class="w"> </span>es<span class="o">)</span>

<span class="w">      </span><span class="nf">stake</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Stake
<span class="w">      </span>stake<span class="w"> </span><span class="ow">=</span><span class="w"> </span>StakeOf<span class="w"> </span>pstakego

<span class="w">      </span><span class="nf">delegs</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>StakeDelegs
<span class="w">      </span>delegs<span class="w"> </span><span class="ow">=</span><span class="w"> </span>StakeDelegsOf<span class="w"> </span>pstakego

<span class="w">      </span><span class="nf">poolParams</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Pools
<span class="w">      </span>poolParams<span class="w"> </span><span class="ow">=</span><span class="w"> </span>PoolsOf<span class="w"> </span>pstakego

<span class="w">      </span><span class="nf">blocksMade</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℕ
<span class="w">      </span>blocksMade<span class="w"> </span><span class="ow">=</span><span class="w"> </span>∑[<span class="w"> </span>m<span class="w"> </span>←<span class="w"> </span>b<span class="w"> </span>]<span class="w"> </span>m

<span class="w">      </span>ρ<span class="w"> </span>η<span class="w"> </span>τ<span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℚ
<span class="w">      </span>ρ<span class="w"> </span><span class="ow">=</span><span class="w"> </span>fromUnitInterval<span class="w"> </span><span class="o">(</span>prevPp<span class="w"> </span><span class="ow">.</span>PParams.monetaryExpansion<span class="o">)</span>
<span class="w">      </span>η<span class="w"> </span><span class="ow">=</span><span class="w"> </span>fromℕ<span class="w"> </span>blocksMade<span class="w"> </span>÷₀<span class="w"> </span><span class="o">(</span>fromℕ<span class="w"> </span>slotsPerEpoch<span class="w"> </span>*<span class="w"> </span>ActiveSlotCoeff<span class="o">)</span>
<span class="w">      </span>τ<span class="w"> </span><span class="ow">=</span><span class="w"> </span>fromUnitInterval<span class="w"> </span><span class="o">(</span>prevPp<span class="w"> </span><span class="ow">.</span>PParams.treasuryCut<span class="o">)</span>

<span class="w">      </span>Δr₁<span class="w"> </span>rewardPot<span class="w"> </span>Δt₁<span class="w"> </span>R<span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℤ
<span class="w">      </span>Δr₁<span class="w"> </span><span class="ow">=</span><span class="w"> </span>floor<span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span>⊓<span class="w"> </span>η<span class="w"> </span>*<span class="w"> </span>ρ<span class="w"> </span>*<span class="w"> </span>fromℕ<span class="w"> </span>reserves<span class="o">)</span>
<span class="w">      </span>rewardPot<span class="w"> </span><span class="ow">=</span><span class="w"> </span>pos<span class="w"> </span>feeSS<span class="w"> </span>+<span class="w"> </span>Δr₁
<span class="w">      </span>Δt₁<span class="w"> </span><span class="ow">=</span><span class="w"> </span>floor<span class="w"> </span><span class="o">(</span>fromℤ<span class="w"> </span>rewardPot<span class="w"> </span>*<span class="w"> </span>τ<span class="o">)</span>
<span class="w">      </span>R<span class="w"> </span><span class="ow">=</span><span class="w"> </span>rewardPot<span class="w"> </span>-<span class="w"> </span>Δt₁

<span class="w">      </span><span class="nf">circulation</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Coin
<span class="w">      </span>circulation<span class="w"> </span><span class="ow">=</span><span class="w"> </span>total<span class="w"> </span>-<span class="w"> </span>reserves

<span class="w">      </span><span class="nf">rs</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Rewards
<span class="w">      </span>rs<span class="w"> </span><span class="ow">=</span><span class="w"> </span>reward<span class="w"> </span>prevPp<span class="w"> </span>b<span class="w"> </span><span class="o">(</span>posPart<span class="w"> </span>R<span class="o">)</span><span class="w"> </span>poolParams<span class="w"> </span>stake<span class="w"> </span>delegs<span class="w"> </span>circulation

<span class="w">      </span><span class="nf">Δr₂</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℤ
<span class="w">      </span>Δr₂<span class="w"> </span><span class="ow">=</span><span class="w"> </span>R<span class="w"> </span>-<span class="w"> </span>pos<span class="w"> </span><span class="o">(</span>∑[<span class="w"> </span>c<span class="w"> </span>←<span class="w"> </span>rs<span class="w"> </span>]<span class="w"> </span>c<span class="o">)</span>
</code></pre></div>
<!--
<div class="highlight"><pre><span></span><code><span class="w">      </span><span class="c1">-- Proofs</span>
<span class="w">      </span><span class="c1">-- Note: Overloading of + and - seems to interfere with</span>
<span class="w">      </span><span class="c1">-- the ring solver.</span>
<span class="w">      </span><span class="nf">lemmaFlow</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">(</span>t₁<span class="w"> </span>r₁<span class="w"> </span>f<span class="w"> </span>z<span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℤ<span class="o">)</span>
<span class="w">        </span><span class="ow">→</span><span class="w"> </span><span class="o">(</span>t₁<span class="w"> </span>ℤ.+<span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span>ℤ.-<span class="w"> </span>r₁<span class="w"> </span>ℤ.+<span class="w"> </span><span class="o">((</span>f<span class="w"> </span>ℤ.+<span class="w"> </span>r₁<span class="w"> </span>ℤ.-<span class="w"> </span>t₁<span class="o">)</span><span class="w"> </span>ℤ.-<span class="w"> </span>z<span class="o">))</span><span class="w"> </span>ℤ.+<span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span>ℤ.-<span class="w"> </span>f<span class="o">)</span><span class="w"> </span>ℤ.+<span class="w"> </span>z<span class="o">)</span><span class="w"> </span>≡<span class="w"> </span><span class="mi">0</span>
<span class="w">      </span>lemmaFlow<span class="w"> </span><span class="ow">=</span><span class="w"> </span>solve-∀
<span class="w">      </span><span class="nf">flowConservation</span><span class="w"> </span><span class="ow">:</span>
<span class="w">        </span><span class="kr">let</span><span class="w"> </span>t₁<span class="w"> </span><span class="ow">=</span><span class="w"> </span>Δt₁
<span class="w">            </span>r₁<span class="w"> </span><span class="ow">=</span><span class="w"> </span>Δr₁
<span class="w">            </span>f<span class="w">  </span><span class="ow">=</span><span class="w"> </span>pos<span class="w"> </span>feeSS
<span class="w">            </span>z<span class="w">  </span><span class="ow">=</span><span class="w"> </span>pos<span class="w"> </span><span class="o">(</span>∑[<span class="w"> </span>c<span class="w"> </span>←<span class="w"> </span>rs<span class="w"> </span>]<span class="w"> </span>c<span class="o">)</span>
<span class="w">         </span><span class="kr">in</span>
<span class="w">            </span><span class="o">(</span>t₁<span class="w"> </span>ℤ.+<span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span>ℤ.-<span class="w"> </span>r₁<span class="w"> </span>ℤ.+<span class="w"> </span><span class="o">((</span>f<span class="w"> </span>ℤ.+<span class="w"> </span>r₁<span class="w"> </span>ℤ.-<span class="w"> </span>t₁<span class="o">)</span><span class="w"> </span>ℤ.-<span class="w"> </span>z<span class="o">))</span><span class="w"> </span>ℤ.+<span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span>ℤ.-<span class="w"> </span>f<span class="o">)</span><span class="w"> </span>ℤ.+<span class="w"> </span>z<span class="o">)</span><span class="w"> </span>≡<span class="w"> </span><span class="mi">0</span>
<span class="w">      </span>flowConservation<span class="w"> </span><span class="ow">=</span><span class="w"> </span>lemmaFlow<span class="w"> </span>Δt₁<span class="w"> </span>Δr₁<span class="w"> </span><span class="o">(</span>pos<span class="w"> </span>feeSS<span class="o">)</span><span class="w"> </span><span class="o">(</span>pos<span class="w"> </span><span class="o">(</span>∑[<span class="w"> </span>c<span class="w"> </span>←<span class="w"> </span>rs<span class="w"> </span>]<span class="w"> </span>c<span class="o">))</span>

<span class="w">      </span><span class="nf">÷₀-0≤⇒0≤</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">(</span>x<span class="w"> </span>y<span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℚ<span class="o">)</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span>x<span class="w"> </span><span class="ow">→</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span>y<span class="w"> </span><span class="ow">→</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span><span class="o">(</span>x<span class="w"> </span>÷₀<span class="w"> </span>y<span class="o">)</span>
<span class="w">      </span>÷₀-0≤⇒0≤<span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="mi">0</span>≤x<span class="w"> </span><span class="mi">0</span>≤y<span class="w"> </span><span class="kr">with</span><span class="w"> </span>y<span class="w"> </span>≟<span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="ow">...</span><span class="w"> </span><span class="ow">|</span><span class="w"> </span><span class="o">(</span>yes<span class="w"> </span>y≡0<span class="o">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span>nonNegative⁻¹<span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="ow">...</span><span class="w"> </span><span class="ow">|</span><span class="w"> </span><span class="o">(</span>no<span class="w"> </span>y≢0<span class="o">)</span><span class="w">  </span><span class="ow">=</span><span class="w"> </span>÷-0≤⇒0≤<span class="w"> </span>x<span class="w"> </span>y<span class="w"> </span><span class="o">{{</span>≢-nonZero<span class="w"> </span>y≢0<span class="o">}}</span><span class="w"> </span><span class="mi">0</span>≤x<span class="w"> </span><span class="mi">0</span>≤y

<span class="w">      </span><span class="nf">η-nonneg</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span>η
<span class="w">      </span>η-nonneg<span class="w"> </span><span class="ow">=</span><span class="w"> </span>÷₀-0≤⇒0≤<span class="w"> </span>_<span class="w"> </span>_<span class="w"> </span><span class="o">(</span>fromℕ-0≤<span class="w"> </span>blocksMade<span class="o">)</span>
<span class="w">        </span><span class="o">(</span>*-0≤⇒0≤<span class="w"> </span>_<span class="w"> </span>_
<span class="w">          </span><span class="o">(</span>fromℕ-0≤<span class="w"> </span>slotsPerEpoch<span class="o">)</span>
<span class="w">          </span><span class="o">(</span>nonNegative⁻¹<span class="w"> </span>ActiveSlotCoeff<span class="w"> </span><span class="o">{{</span>pos⇒nonNeg<span class="w"> </span>ActiveSlotCoeff<span class="o">}}))</span>

<span class="w">      </span><span class="nf">min1η-nonneg</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span><span class="mi">1</span><span class="w"> </span>⊓<span class="w"> </span>η
<span class="w">      </span>min1η-nonneg<span class="w"> </span><span class="ow">=</span><span class="w"> </span>⊓-glb<span class="w"> </span><span class="o">(</span>nonNegative⁻¹<span class="w"> </span><span class="mi">1</span><span class="o">)</span><span class="w"> </span>η-nonneg

<span class="w">      </span><span class="nf">Δr₁-nonneg</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span>Δr₁
<span class="w">      </span>Δr₁-nonneg<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span>≤⇒0≤floor<span class="w"> </span>_
<span class="w">        </span><span class="o">(</span>*-0≤⇒0≤<span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span>⊓<span class="w"> </span>η<span class="w"> </span>*<span class="w"> </span>ρ<span class="o">)</span><span class="w"> </span><span class="o">(</span>fromℕ<span class="w"> </span>reserves<span class="o">)</span>
<span class="w">          </span><span class="o">(</span>UnitInterval-*-0≤<span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span>⊓<span class="w"> </span>η<span class="o">)</span><span class="w"> </span><span class="o">(</span>prevPp<span class="w"> </span><span class="ow">.</span>PParams.monetaryExpansion<span class="o">)</span><span class="w"> </span>min1η-nonneg<span class="o">)</span>
<span class="w">          </span><span class="o">(</span>fromℕ-0≤<span class="w"> </span>reserves<span class="o">))</span>

<span class="w">      </span><span class="nf">rewardPot-nonneg</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span>rewardPot
<span class="w">      </span>rewardPot-nonneg<span class="w"> </span><span class="ow">=</span><span class="w"> </span>+-mono-≤<span class="w"> </span><span class="o">(</span>nonNegative⁻¹ℤ<span class="w"> </span><span class="o">(</span>pos<span class="w"> </span>feeSS<span class="o">))</span><span class="w"> </span>Δr₁-nonneg

<span class="w">      </span><span class="nf">Δt-nonneg</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span>≤<span class="w"> </span>Δt₁
<span class="w">      </span>Δt-nonneg<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span>≤⇒0≤floor<span class="w"> </span>_
<span class="w">        </span><span class="o">(</span>UnitInterval-*-0≤<span class="w"> </span><span class="o">(</span>fromℤ<span class="w"> </span>rewardPot<span class="o">)</span><span class="w"> </span><span class="o">(</span>prevPp<span class="w"> </span><span class="ow">.</span>PParams.treasuryCut<span class="o">)</span>
<span class="w">          </span><span class="o">(</span>fromℤ-0≤<span class="w"> </span>rewardPot<span class="w"> </span>rewardPot-nonneg<span class="o">))</span>

<span class="w">      </span><span class="nf">Δf-nonpos</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="o">(</span><span class="mi">0</span><span class="w"> </span>-<span class="w"> </span>pos<span class="w"> </span>feeSS<span class="o">)</span><span class="w"> </span>≤<span class="w"> </span><span class="mi">0</span>
<span class="w">      </span>Δf-nonpos<span class="w"> </span><span class="ow">=</span><span class="w"> </span>begin
<span class="w">          </span><span class="mi">0</span><span class="w"> </span>-<span class="w"> </span>pos<span class="w"> </span>feeSS<span class="w"> </span>≡⟨<span class="w"> </span>+-identityˡ<span class="w"> </span>_<span class="w"> </span>⟩
<span class="w">          </span>ℤ.-<span class="w"> </span>pos<span class="w"> </span>feeSS<span class="w"> </span>≤⟨<span class="w"> </span>neg-mono-≤<span class="w"> </span><span class="o">(</span>ℤ.+≤+<span class="w"> </span>z≤n<span class="o">)</span><span class="w"> </span>⟩
<span class="w">          </span><span class="mi">0</span><span class="w">             </span>∎
<span class="w">        </span><span class="kr">where</span><span class="w"> </span><span class="kr">open</span><span class="w"> </span>≤-Reasoning
</code></pre></div>
-->

<p>Relevant quantities are:</p>
<ul>
<li>
<p><code class="AgdaFunction">prevPp</code>: Previous protocol parameters, which
  correspond to the parameters during the epoch for which we are
  creating rewards.</p>
</li>
<li>
<p><code class="AgdaFunction">ActiveSlotCoeff</code>: Global constant, equal to the
  probability that a party holding all the stake will be selected to be
  a leader for given slot. Equals <span class="arithmatex">\(1/20\)</span> during the Shelley era on the
  Cardano Mainnet.</p>
</li>
<li>
<p><code class="AgdaFunction">Δr₁</code>: Ada taken out of the reserves for paying
  rewards, as determined by the <code class="AgdaField">monetaryExpansion</code> protocol
  parameter.</p>
</li>
<li>
<p><code class="AgdaFunction">rewardPot</code>: Total amount of coin available for rewards
  this epoch, as described in <a href="#shelley-delegation-design">Team18</a>.</p>
</li>
<li>
<p><code class="AgdaFunction">feeSS</code>: The fee pot which, together with the reserves,
  funds the <code class="AgdaFunction">rewardPot</code>. We use the fee pot that
  accumulated during the epoch for which we now compute block production
  rewards. Note that fees are not explicitly removed from any account:
  the fees come from transactions paying them and are accounted for
  whenever transactions are processed.</p>
</li>
<li>
<p><code class="AgdaFunction">Δt₁</code>: The proportion of the reward pot that will move
  to the treasury, as determined by the <code class="AgdaField">treasuryCut</code>
  protocol parameter. The remaining pot is called the
  <code class="AgdaFunction">R</code>, just as in <a href="#shelley-delegation-design">Team18</a>.</p>
</li>
<li>
<p><code class="AgdaFunction">pstakego</code>: Stake distribution used for calculating the
  rewards. This is the oldest stake distribution snapshot, labeled
  <code class="AgdaField">go</code>.</p>
</li>
<li>
<p><code class="AgdaFunction">rs</code>: The rewards, as calculated by the function
  <code class="AgdaFunction">reward</code>.</p>
</li>
<li>
<p><code class="AgdaFunction">Δr₂</code>: The difference between the maximal amount of
  rewards that could have been paid out if pools had been optimal, and
  the actual rewards paid out. This difference is returned to the
  reserves.</p>
</li>
<li>
<p><code class="AgdaFunction">÷₀</code>: Division operator that returns zero when the
  denominator is zero.</p>
</li>
</ul>
<h2 id="applying-rewardupdate">Applying <span class="AgdaDatatype">RewardUpdate</span><a class="headerlink" href="#applying-rewardupdate" title="Permanent link">&para;</a></h2>
<p>This section defines the function <code class="AgdaFunction">applyRUpd</code>, which applies a
<code class="AgdaDatatype">RewardUpdate</code> to the <code class="AgdaFunction">EpochState</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nf">applyRUpd</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>RewardUpdate<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EpochState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EpochState
applyRUpd<span class="w"> </span>rewardUpdate<span class="w"> </span>⟦<span class="w"> </span>⟦<span class="w"> </span>treasury<span class="w"> </span>,<span class="w"> </span>reserves<span class="w"> </span>⟧ᵃ
<span class="w">                       </span>,<span class="w"> </span>ss
<span class="w">                       </span>,<span class="w"> </span>⟦<span class="w"> </span>⟦<span class="w"> </span>utxo<span class="w"> </span>,<span class="w"> </span>fees<span class="w"> </span>,<span class="w"> </span>deposits<span class="w"> </span>,<span class="w"> </span>donations<span class="w"> </span>⟧ᵘ
<span class="w">                         </span>,<span class="w"> </span>govSt
<span class="w">                         </span>,<span class="w"> </span>⟦<span class="w"> </span>⟦<span class="w"> </span>voteDelegs<span class="w"> </span>,<span class="w"> </span>stakeDelegs<span class="w"> </span>,<span class="w"> </span>rewards<span class="w"> </span>⟧ᵈ<span class="w"> </span>,<span class="w"> </span>pState<span class="w"> </span>,<span class="w"> </span>gState<span class="w"> </span>⟧ᶜˢ<span class="w"> </span>⟧ˡ
<span class="w">                       </span>,<span class="w"> </span>es
<span class="w">                       </span>,<span class="w"> </span>fut
<span class="w">                       </span>⟧ᵉ&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span>⟦<span class="w"> </span>⟦<span class="w"> </span>posPart<span class="w"> </span><span class="o">(</span>pos<span class="w"> </span>treasury<span class="w"> </span>+<span class="w"> </span>Δt<span class="w"> </span>+<span class="w"> </span>pos<span class="w"> </span>unregRU&#39;<span class="o">)</span>
<span class="w">                               </span>,<span class="w"> </span>posPart<span class="w"> </span><span class="o">(</span>pos<span class="w"> </span>reserves<span class="w"> </span>+<span class="w"> </span>Δr<span class="o">)</span><span class="w"> </span>⟧
<span class="w">                             </span>,<span class="w"> </span>ss
<span class="w">                             </span>,<span class="w"> </span>⟦<span class="w"> </span>⟦<span class="w"> </span>utxo<span class="w"> </span>,<span class="w"> </span>posPart<span class="w"> </span><span class="o">(</span>pos<span class="w"> </span>fees<span class="w"> </span>+<span class="w"> </span>Δf<span class="o">)</span><span class="w"> </span>,<span class="w"> </span>deposits<span class="w"> </span>,<span class="w"> </span>donations<span class="w"> </span>⟧
<span class="w">                               </span>,<span class="w"> </span>govSt
<span class="w">                               </span>,<span class="w"> </span>⟦<span class="w"> </span>⟦<span class="w"> </span>voteDelegs<span class="w"> </span>,<span class="w"> </span>stakeDelegs<span class="w"> </span>,<span class="w"> </span>rewards<span class="w"> </span>∪⁺<span class="w"> </span>regRU<span class="w"> </span>⟧<span class="w"> </span>,<span class="w"> </span>pState<span class="w"> </span>,<span class="w"> </span>gState<span class="w"> </span>⟧<span class="w"> </span>⟧
<span class="w">                             </span>,<span class="w"> </span>es
<span class="w">                             </span>,<span class="w"> </span>fut<span class="w"> </span>⟧
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">open</span><span class="w"> </span>RewardUpdate<span class="w"> </span>rewardUpdate<span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>Δt;<span class="w"> </span>Δr;<span class="w"> </span>Δf;<span class="w"> </span>rs<span class="o">)</span>
<span class="w">    </span>regRU<span class="w">     </span><span class="ow">=</span><span class="w"> </span>rs<span class="w"> </span>∣<span class="w"> </span>dom<span class="w"> </span>rewards
<span class="w">    </span>unregRU<span class="w">   </span><span class="ow">=</span><span class="w"> </span>rs<span class="w"> </span>∣<span class="w"> </span>dom<span class="w"> </span>rewards<span class="w"> </span>ᶜ
<span class="w">    </span>unregRU&#39;<span class="w">  </span><span class="ow">=</span><span class="w"> </span>∑[<span class="w"> </span>x<span class="w"> </span>←<span class="w"> </span>unregRU<span class="w"> </span>]<span class="w"> </span>x
</code></pre></div>
<h2 id="stake-distributions">Stake Distributions<a class="headerlink" href="#stake-distributions" title="Permanent link">&para;</a></h2>
<p>This section defines the functions
<code class="AgdaFunction">calculatePoolDelegatedState</code>,
<code class="AgdaFunction">calculateVDelegDelegatedStake</code>, and
<code class="AgdaFunction">mkStakeDistrs</code>, which calculates stake distributions
for voting purposes.</p>
<!--
<div class="highlight"><pre><span></span><code><span class="kr">open</span><span class="w"> </span>RwdAddr<span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>stake<span class="o">)</span>
<span class="kr">opaque</span>
</code></pre></div>
-->
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">calculatePoolDelegatedStake</span>
<span class="w">    </span><span class="ow">:</span><span class="w"> </span>Snapshot
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>PoolDelegatedStake
<span class="w">  </span>calculatePoolDelegatedStake<span class="w"> </span>ss<span class="w"> </span><span class="ow">=</span>
<span class="w">      </span><span class="c1">-- Shelley spec: the output map must contain keys appearing in both</span>
<span class="w">      </span><span class="c1">-- sd and the pool parameters.</span>
<span class="w">      </span>sd<span class="w"> </span>∣<span class="w"> </span>dom<span class="w"> </span><span class="o">(</span>PoolsOf<span class="w"> </span>ss<span class="o">)</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="c1">-- stake credentials delegating to each pool</span>
<span class="w">      </span><span class="nf">stakeCredentialsPerPool</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Rel<span class="w"> </span>KeyHash<span class="w"> </span>Credential
<span class="w">      </span>stakeCredentialsPerPool<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="o">(</span>StakeDelegsOf<span class="w"> </span>ss<span class="w"> </span>ˢ<span class="o">)</span><span class="w"> </span>⁻¹ʳ

<span class="w">      </span><span class="c1">-- delegated stake per pool</span>
<span class="w">      </span><span class="nf">sd</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>KeyHash<span class="w"> </span>⇀<span class="w"> </span>Coin
<span class="w">      </span>sd<span class="w"> </span><span class="ow">=</span><span class="w"> </span>aggregate₊<span class="w"> </span><span class="o">((</span>stakeCredentialsPerPool<span class="w"> </span>∘ʳ<span class="w"> </span><span class="o">(</span>StakeOf<span class="w"> </span>ss<span class="w"> </span>ˢ<span class="o">))</span><span class="w"> </span>ᶠˢ<span class="o">)</span>
</code></pre></div>
<p>The function <code class="AgdaFunction">calculatePoolDelegatedState</code> calculates the
delegated stake to SPO{.AgdaFunction}s. This function is used both in the
<code class="AgdaDatatype">EPOCH</code> rule (via
<code class="AgdaFunction">calculatePoolDelegatedStateForVoting</code>, see below) and in the
<code class="AgdaDatatype">NEWEPOCH</code> rule.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">stakeFromGADeposits</span>
<span class="w">    </span><span class="ow">:</span><span class="w"> </span>GovState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>UTxOState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>Stake
<span class="w">  </span>stakeFromGADeposits<span class="w"> </span>govSt<span class="w"> </span>utxoSt<span class="w"> </span><span class="ow">=</span><span class="w"> </span>aggregateBy
<span class="w">     </span><span class="o">(</span>mapˢ<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span><span class="o">(</span>gaid<span class="w"> </span>,<span class="w"> </span>addr<span class="o">)</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span><span class="o">(</span>gaid<span class="w"> </span>,<span class="w"> </span>addr<span class="o">)</span><span class="w"> </span>,<span class="w"> </span>stake<span class="w"> </span>addr<span class="o">)</span><span class="w"> </span>govSt&#39;<span class="o">)</span>
<span class="w">     </span><span class="o">(</span>mapFromPartialFun<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span><span class="o">(</span>gaid<span class="w"> </span>,<span class="w"> </span>_<span class="o">)</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>lookupᵐ?<span class="w"> </span>deposits<span class="w"> </span><span class="o">(</span>GovActionDeposit<span class="w"> </span>gaid<span class="o">))</span><span class="w"> </span>govSt&#39;<span class="o">)</span>
<span class="w">     </span><span class="kr">where</span>
<span class="w">       </span><span class="kr">open</span><span class="w"> </span>UTxOState<span class="w"> </span>utxoSt

<span class="w">       </span><span class="nf">govSt&#39;</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℙ<span class="w"> </span><span class="o">(</span>GovActionID<span class="w"> </span>×<span class="w"> </span>RwdAddr<span class="o">)</span>
<span class="w">       </span>govSt&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span>mapˢ<span class="w"> </span><span class="o">(</span>map₂<span class="w"> </span>returnAddr<span class="o">)</span><span class="w"> </span><span class="o">(</span>fromList<span class="w"> </span>govSt<span class="o">)</span>
</code></pre></div>
<p>The function <code class="AgdaFunction">stakeFromGADeposits</code> computes the stake
pertaining to governance action deposits. It returns a map which, for
each governance action, maps its <code>returnAddr</code> (as a staking
credential) to the deposit.</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">calculateVDelegDelegatedStake</span>
<span class="w">    </span><span class="ow">:</span><span class="w"> </span>Epoch
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>UTxOState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>GovState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>GState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>DState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>VDeleg<span class="w"> </span>⇀<span class="w"> </span>Coin
<span class="w">  </span>calculateVDelegDelegatedStake<span class="w"> </span>currentEpoch<span class="w"> </span>utxoSt<span class="w"> </span>govSt<span class="w"> </span>gState<span class="w"> </span>dState
<span class="w">    </span><span class="ow">=</span><span class="w"> </span>aggregate₊<span class="w"> </span><span class="o">(((</span>activeVoteDelegs<span class="w"> </span>ˢ<span class="o">)</span><span class="w"> </span>⁻¹ʳ
<span class="w">                  </span>∘ʳ<span class="w"> </span><span class="o">(</span>stakePerCredential<span class="w"> </span>∪⁺<span class="w"> </span>stakeFromGADeposits<span class="w"> </span>govSt<span class="w"> </span>utxoSt<span class="o">)</span><span class="w"> </span>ˢ<span class="o">)</span><span class="w"> </span>ᶠˢ<span class="o">)</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="kr">open</span><span class="w"> </span>UTxOState<span class="w"> </span>utxoSt
<span class="w">      </span><span class="kr">open</span><span class="w"> </span>DState<span class="w"> </span>dState
<span class="w">      </span><span class="kr">open</span><span class="w"> </span>GState<span class="w"> </span>gState

<span class="w">      </span><span class="c1">-- active DReps</span>
<span class="w">      </span><span class="nf">activeDReps</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℙ<span class="w"> </span>Credential
<span class="w">      </span>activeDReps<span class="w"> </span><span class="ow">=</span><span class="w"> </span>dom<span class="w"> </span><span class="o">(</span>filterᵐ<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span><span class="o">(</span>_<span class="w"> </span>,<span class="w"> </span>e<span class="o">)</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>currentEpoch<span class="w"> </span>≤<span class="w"> </span>e<span class="o">)</span><span class="w"> </span>dreps<span class="o">)</span>

<span class="w">      </span><span class="c1">-- active vote delegations</span>
<span class="w">      </span><span class="nf">activeVoteDelegs</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>VoteDelegs
<span class="w">      </span>activeVoteDelegs<span class="w"> </span><span class="ow">=</span><span class="w"> </span>voteDelegs<span class="w"> </span>∣^<span class="w"> </span><span class="o">((</span>mapˢ<span class="w"> </span>vDelegCredential<span class="w"> </span>activeDReps<span class="o">)</span>
<span class="w">                                        </span>∪<span class="w"> </span>❴<span class="w"> </span>vDelegNoConfidence<span class="w"> </span>❵<span class="w"> </span>∪<span class="w"> </span>❴<span class="w"> </span>vDelegAbstain<span class="w"> </span>❵<span class="o">)</span>

<span class="w">      </span><span class="c1">-- stake per delegated credential</span>
<span class="w">      </span><span class="nf">stakePerCredential</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Stake
<span class="w">      </span>stakePerCredential<span class="w"> </span><span class="ow">=</span><span class="w"> </span>mapFromFun<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span>c<span class="w"> </span><span class="ow">→</span><span class="w"> </span>cbalance<span class="w"> </span><span class="o">(</span>utxo<span class="w"> </span>∣^&#39;<span class="w"> </span><span class="ow">λ</span><span class="w"> </span>txout<span class="w"> </span><span class="ow">→</span><span class="w"> </span>getStakeCred<span class="w"> </span>txout<span class="w"> </span>≡<span class="w"> </span>just<span class="w"> </span>c<span class="o">))</span>
<span class="w">                                      </span><span class="o">(</span>dom<span class="w"> </span>activeVoteDelegs<span class="o">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">calculatePoolDelegatedStakeForVoting</span>
<span class="w">    </span><span class="ow">:</span><span class="w"> </span>Snapshot
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>UTxOState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>GovState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>GState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>DState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>KeyHash<span class="w"> </span>⇀<span class="w"> </span>Coin
<span class="w">  </span>calculatePoolDelegatedStakeForVoting<span class="w"> </span>ss<span class="w"> </span>utxoSt<span class="w"> </span>govSt<span class="w"> </span>gState<span class="w"> </span>dState
<span class="w">    </span><span class="ow">=</span><span class="w"> </span>calculatePoolDelegatedStake<span class="w"> </span>ss<span class="w"> </span>∪⁺<span class="w"> </span><span class="o">(</span>stakeFromDeposits<span class="w"> </span>∣<span class="w"> </span>dom<span class="w"> </span><span class="o">(</span>PoolsOf<span class="w"> </span>ss<span class="o">))</span>
<span class="w">    </span><span class="kr">where</span>
<span class="w">      </span><span class="nf">stakeFromDeposits</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>KeyHash<span class="w"> </span>⇀<span class="w"> </span>Coin
<span class="w">      </span>stakeFromDeposits<span class="w"> </span><span class="ow">=</span><span class="w"> </span>aggregate₊<span class="w"> </span><span class="o">(((</span>StakeDelegsOf<span class="w"> </span>ss<span class="w"> </span>ˢ<span class="o">)</span><span class="w"> </span>⁻¹ʳ
<span class="w">                                      </span>∘ʳ<span class="w"> </span><span class="o">(</span>stakeFromGADeposits<span class="w"> </span>govSt<span class="w"> </span>utxoSt<span class="w"> </span>ˢ<span class="o">))</span><span class="w"> </span>ᶠˢ<span class="o">)</span>
</code></pre></div>
<p>The function <code class="AgdaFunction">calculatePoolDelegatedStakeForVoting</code>
computes the delegated stake to <code class="AgdaInductiveConstructor">SPO</code>s that
will be used for counting votes. It complements the result of
<code class="AgdaFunction">calculatePoolDelegatedStake</code> with the deposits made to
governance actions.</p>
<details class="erratum">
<summary>Erratum</summary>
<p><a href="https://cips.cardano.org/cip/CIP-1694">CIP-1694</a> specifies that
deposits of governance actions should count towards the stake for
voting purposes:</p>
<blockquote>
<p>The deposit amount will be added to the deposit pot, similar to
stake key deposits. It will also be counted towards the stake of
the reward address it will be paid back to, to not reduce the
submitter's voting power to vote on their own (and competing)
actions.</p>
</blockquote>
<p>While originally <em>intended</em> for <code class="AgdaInductiveConstructor">DRep</code>s
only, the Haskell implementation and the formal specification
count deposits on governance actions towards the stake of
<code class="AgdaInductiveConstructor">SPO</code>s as well.</p>
</details>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">mkStakeDistrs</span>
<span class="w">    </span><span class="ow">:</span><span class="w"> </span>Snapshot
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>Epoch
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>UTxOState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>GovState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>GState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>DState
<span class="w">    </span><span class="ow">→</span><span class="w"> </span>StakeDistrs
<span class="w">  </span>mkStakeDistrs<span class="w"> </span>ss<span class="w"> </span>currentEpoch<span class="w"> </span>utxoSt<span class="w"> </span>govSt<span class="w"> </span>gState<span class="w"> </span>dState<span class="w"> </span><span class="ow">=</span>
<span class="w">    </span>⟦<span class="w"> </span>calculateVDelegDelegatedStake<span class="w"> </span>currentEpoch<span class="w"> </span>utxoSt<span class="w"> </span>govSt<span class="w"> </span>gState<span class="w"> </span>dState
<span class="w">    </span>,<span class="w"> </span>calculatePoolDelegatedStakeForVoting<span class="w"> </span>ss<span class="w"> </span>utxoSt<span class="w"> </span>govSt<span class="w"> </span>gState<span class="w"> </span>dState<span class="w"> </span>⟧
</code></pre></div>
<!--
<div class="highlight"><pre><span></span><code><span class="kr">private</span><span class="w"> </span><span class="kr">variable</span>
<span class="w">  </span>e<span class="w"> </span>lastEpoch<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Epoch
<span class="w">  </span>fut<span class="w"> </span>fut&#39;<span class="w"> </span><span class="ow">:</span><span class="w"> </span>RatifyState
<span class="w">  </span><span class="nf">poolReapState</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>PoolReapState
<span class="w">  </span>eps<span class="w"> </span>eps&#39;<span class="w"> </span>eps&#39;&#39;<span class="w"> </span><span class="ow">:</span><span class="w"> </span>EpochState
<span class="w">  </span><span class="nf">ls</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>LState
<span class="w">  </span><span class="nf">es₀</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>EnactState
<span class="w">  </span>mark<span class="w"> </span>set<span class="w"> </span>go<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Snapshot
<span class="w">  </span><span class="nf">feeSS</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Fees
<span class="w">  </span><span class="nf">lstate</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>LState
<span class="w">  </span>ss<span class="w"> </span>ss&#39;<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Snapshots
<span class="w">  </span><span class="nf">ru</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>RewardUpdate
<span class="w">  </span><span class="nf">mru</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Maybe<span class="w"> </span>RewardUpdate
<span class="w">  </span><span class="nf">pd</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>PoolDelegatedStake
</code></pre></div>
-->

<h2 id="epoch-transition-system"><span class="AgdaDatatype">EPOCH</span> Transition System<a class="headerlink" href="#epoch-transition-system" title="Permanent link">&para;</a></h2>
<p>The <code class="AgdaDatatype">EPOCH</code> transition has a few updates that are encapsulated
in the following functions. We need these functions to bring them in scope for
some proofs about <code class="AgdaDatatype">EPOCH</code>.</p>
<h3 id="helper-functions">Helper Functions<a class="headerlink" href="#helper-functions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nf">getOrphans</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>EnactState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>GovState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>GovState
getOrphans<span class="w"> </span>es<span class="w"> </span>govSt<span class="w"> </span><span class="ow">=</span><span class="w"> </span>proj₁<span class="w"> </span>$<span class="w"> </span>iterate<span class="w"> </span>step<span class="w"> </span><span class="o">(</span>[]<span class="w"> </span>,<span class="w"> </span>govSt<span class="o">)</span><span class="w"> </span><span class="o">(</span>length<span class="w"> </span>govSt<span class="o">)</span>
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="nf">step</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>GovState<span class="w"> </span>×<span class="w"> </span>GovState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>GovState<span class="w"> </span>×<span class="w"> </span>GovState
<span class="w">    </span>step<span class="w"> </span><span class="o">(</span>orps<span class="w"> </span>,<span class="w"> </span>govSt<span class="o">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">      </span><span class="kr">let</span>
<span class="w">        </span>isOrphan?<span class="w"> </span>a<span class="w"> </span>prev<span class="w"> </span><span class="ow">=</span><span class="w"> </span>¬?<span class="w"> </span><span class="o">(</span>hasParent?<span class="w"> </span>es<span class="w"> </span>govSt<span class="w"> </span>a<span class="w"> </span>prev<span class="o">)</span>
<span class="w">        </span><span class="o">(</span>orps&#39;<span class="w"> </span>,<span class="w"> </span>govSt&#39;<span class="o">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span>partition
<span class="w">          </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span><span class="o">(</span>_<span class="w"> </span>,<span class="w"> </span><span class="kr">record</span><span class="w"> </span><span class="o">{</span>action<span class="w"> </span><span class="ow">=</span><span class="w"> </span>a<span class="w"> </span>;<span class="w"> </span>prevAction<span class="w"> </span><span class="ow">=</span><span class="w"> </span>prev<span class="o">})</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>isOrphan?<span class="w"> </span><span class="o">(</span>a<span class="w"> </span><span class="ow">.</span>gaType<span class="o">)</span><span class="w"> </span>prev<span class="o">)</span>
<span class="w">          </span>govSt
<span class="w">      </span><span class="kr">in</span>
<span class="w">        </span><span class="o">(</span>orps<span class="w"> </span>++<span class="w"> </span>orps&#39;<span class="w"> </span>,<span class="w"> </span>govSt&#39;<span class="o">)</span>
</code></pre></div>
<h3 id="update-functions">Update Functions<a class="headerlink" href="#update-functions" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kr">record</span><span class="w"> </span>EPOCH-Updates0<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">constructor</span><span class="w"> </span>EPOCHUpdates0
<span class="w">  </span><span class="kr">field</span>
<span class="w">    </span><span class="nf">es</span><span class="w">             </span><span class="ow">:</span><span class="w"> </span>EnactState
<span class="w">    </span><span class="nf">govSt&#39;</span><span class="w">         </span><span class="ow">:</span><span class="w"> </span>GovState
<span class="w">    </span><span class="nf">payout</span><span class="w">         </span><span class="ow">:</span><span class="w"> </span>Withdrawals
<span class="w">    </span><span class="nf">gState&#39;</span><span class="w">        </span><span class="ow">:</span><span class="w"> </span>GState
<span class="w">    </span><span class="nf">utxoSt&#39;</span><span class="w">        </span><span class="ow">:</span><span class="w"> </span>UTxOState
<span class="w">    </span><span class="nf">totWithdrawals</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Coin

<span class="nf">EPOCH-updates0</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>RatifyState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>LState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EPOCH-Updates0
EPOCH-updates0<span class="w"> </span>fut<span class="w"> </span>ls<span class="w"> </span><span class="ow">=</span>
<span class="w">    </span>EPOCHUpdates0<span class="w"> </span>es<span class="w"> </span>govSt&#39;<span class="w"> </span>payout<span class="w"> </span>gState&#39;<span class="w"> </span>utxoSt&#39;<span class="w"> </span>totWithdrawals
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">open</span><span class="w"> </span>LState<span class="w"> </span>ls<span class="w"> </span>public
<span class="w">    </span><span class="kr">open</span><span class="w"> </span>CertState<span class="w"> </span>certState<span class="w"> </span><span class="kr">using</span><span class="w"> </span><span class="o">(</span>gState<span class="o">)</span><span class="w"> </span>public
<span class="w">    </span><span class="kr">open</span><span class="w"> </span>RatifyState<span class="w"> </span>fut<span class="w"> </span><span class="kr">renaming</span><span class="w"> </span><span class="o">(</span>es<span class="w"> </span>to<span class="w"> </span>esW<span class="o">)</span>

<span class="w">    </span><span class="nf">es</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>EnactState
<span class="w">    </span>es<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">record</span><span class="w"> </span>esW<span class="w"> </span><span class="o">{</span><span class="w"> </span>withdrawals<span class="w"> </span><span class="ow">=</span><span class="w"> </span>∅<span class="w"> </span><span class="o">}</span>

<span class="w">    </span><span class="nf">tmpGovSt</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>GovState
<span class="w">    </span>tmpGovSt<span class="w"> </span><span class="ow">=</span><span class="w"> </span>filter<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span>x<span class="w"> </span><span class="ow">→</span><span class="w"> </span>proj₁<span class="w"> </span>x<span class="w"> </span>∉<span class="w"> </span>mapˢ<span class="w"> </span>proj₁<span class="w"> </span>removed<span class="o">)</span><span class="w"> </span>govSt

<span class="w">    </span><span class="nf">orphans</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℙ<span class="w"> </span><span class="o">(</span>GovActionID<span class="w"> </span>×<span class="w"> </span>GovActionState<span class="o">)</span>
<span class="w">    </span>orphans<span class="w">  </span><span class="ow">=</span><span class="w"> </span>fromList<span class="w"> </span><span class="o">(</span>getOrphans<span class="w"> </span>es<span class="w"> </span>tmpGovSt<span class="o">)</span>

<span class="w">    </span><span class="nf">removed&#39;</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℙ<span class="w"> </span><span class="o">(</span>GovActionID<span class="w"> </span>×<span class="w"> </span>GovActionState<span class="o">)</span>
<span class="w">    </span>removed&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span>removed<span class="w"> </span>∪<span class="w"> </span>orphans

<span class="w">    </span><span class="nf">govSt&#39;</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>GovState
<span class="w">    </span>govSt&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span>filter<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span>x<span class="w"> </span><span class="ow">→</span><span class="w"> </span>proj₁<span class="w"> </span>x<span class="w"> </span>∉<span class="w"> </span>mapˢ<span class="w"> </span>proj₁<span class="w"> </span>removed&#39;<span class="o">)</span><span class="w"> </span>govSt

<span class="w">    </span><span class="nf">removedGovActions</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>ℙ<span class="w"> </span><span class="o">(</span>RwdAddr<span class="w"> </span>×<span class="w"> </span>DepositPurpose<span class="w"> </span>×<span class="w"> </span>Coin<span class="o">)</span>
<span class="w">    </span>removedGovActions<span class="w"> </span><span class="ow">=</span>
<span class="w">      </span>flip<span class="w"> </span>concatMapˢ<span class="w"> </span>removed&#39;<span class="w"> </span><span class="ow">λ</span><span class="w"> </span><span class="o">(</span>gaid<span class="w"> </span>,<span class="w"> </span>gaSt<span class="o">)</span><span class="w"> </span><span class="ow">→</span>
<span class="w">        </span>mapˢ
<span class="w">          </span><span class="o">(</span>returnAddr<span class="w"> </span>gaSt<span class="w"> </span>,_<span class="o">)</span>
<span class="w">          </span><span class="o">((</span>DepositsOf<span class="w"> </span>utxoSt<span class="w"> </span>∣<span class="w"> </span>❴<span class="w"> </span>GovActionDeposit<span class="w"> </span>gaid<span class="w"> </span>❵<span class="o">)</span><span class="w"> </span>ˢ<span class="o">)</span>

<span class="w">    </span><span class="nf">govActionReturns</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>RwdAddr<span class="w"> </span>⇀<span class="w"> </span>Coin
<span class="w">    </span>govActionReturns<span class="w"> </span><span class="ow">=</span>
<span class="w">      </span>aggregate₊<span class="w"> </span><span class="o">(</span>mapˢ<span class="w"> </span><span class="o">(</span><span class="ow">λ</span><span class="w"> </span><span class="o">(</span>a<span class="w"> </span>,<span class="w"> </span>_<span class="w"> </span>,<span class="w"> </span>d<span class="o">)</span><span class="w"> </span><span class="ow">→</span><span class="w"> </span>a<span class="w"> </span>,<span class="w"> </span>d<span class="o">)</span><span class="w"> </span>removedGovActions<span class="w"> </span>ᶠˢ<span class="o">)</span>

<span class="w">    </span><span class="nf">payout</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>RwdAddr<span class="w"> </span>⇀<span class="w"> </span>Coin
<span class="w">    </span>payout<span class="w"> </span><span class="ow">=</span><span class="w"> </span>govActionReturns<span class="w"> </span>∪⁺<span class="w"> </span>WithdrawalsOf<span class="w"> </span>esW

<span class="w">    </span><span class="nf">gState&#39;</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>GState
<span class="w">    </span>gState&#39;<span class="w"> </span><span class="ow">=</span>
<span class="w">      </span>⟦<span class="w"> </span><span class="o">(</span>if<span class="w"> </span>null<span class="w"> </span>govSt&#39;<span class="w"> </span>then<span class="w"> </span>mapValues<span class="w"> </span><span class="o">(</span><span class="mi">1</span><span class="w"> </span>+_<span class="o">)</span><span class="w"> </span><span class="o">(</span>DRepsOf<span class="w"> </span>gState<span class="o">)</span><span class="w"> </span>else<span class="w"> </span>DRepsOf<span class="w"> </span>gState<span class="o">)</span>
<span class="w">      </span>,<span class="w"> </span>CCHotKeysOf<span class="w"> </span>gState<span class="w"> </span>∣<span class="w"> </span>ccCreds<span class="w"> </span><span class="o">(</span>EnactState.cc<span class="w"> </span>es<span class="o">)</span>
<span class="w">      </span>⟧

<span class="w">    </span><span class="nf">utxoSt&#39;</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>UTxOState
<span class="w">    </span>utxoSt&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">record</span><span class="w"> </span>utxoSt
<span class="w">      </span><span class="o">{</span><span class="w"> </span>deposits<span class="w"> </span><span class="ow">=</span><span class="w"> </span>DepositsOf<span class="w"> </span>utxoSt<span class="w"> </span>∣<span class="w"> </span>mapˢ<span class="w"> </span><span class="o">(</span>proj₁<span class="w"> </span>∘<span class="w"> </span>proj₂<span class="o">)</span><span class="w"> </span>removedGovActions<span class="w"> </span>ᶜ
<span class="w">      </span>;<span class="w"> </span>donations<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="o">}</span>

<span class="w">    </span><span class="nf">totWithdrawals</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Coin
<span class="w">    </span>totWithdrawals<span class="w"> </span><span class="ow">=</span><span class="w"> </span>∑[<span class="w"> </span>x<span class="w"> </span>←<span class="w"> </span>WithdrawalsOf<span class="w"> </span>esW<span class="w"> </span>]<span class="w"> </span>x

<span class="kr">record</span><span class="w"> </span>EPOCH-Updates<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Type<span class="w"> </span><span class="kr">where</span>
<span class="w">  </span><span class="kr">constructor</span><span class="w"> </span>EPOCHUpdates
<span class="w">  </span><span class="kr">field</span>
<span class="w">    </span><span class="nf">es</span><span class="w">             </span><span class="ow">:</span><span class="w"> </span>EnactState
<span class="w">    </span><span class="nf">govSt&#39;</span><span class="w">         </span><span class="ow">:</span><span class="w"> </span>GovState
<span class="w">    </span><span class="nf">dState&#39;&#39;</span><span class="w">       </span><span class="ow">:</span><span class="w"> </span>DState
<span class="w">    </span><span class="nf">gState&#39;</span><span class="w">        </span><span class="ow">:</span><span class="w"> </span>GState
<span class="w">    </span><span class="nf">utxoSt&#39;</span><span class="w">        </span><span class="ow">:</span><span class="w"> </span>UTxOState
<span class="w">    </span><span class="nf">acnt&#39;&#39;</span><span class="w">         </span><span class="ow">:</span><span class="w"> </span>Acnt

<span class="nf">EPOCH-updates</span>
<span class="w">  </span><span class="ow">:</span><span class="w"> </span>RatifyState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>LState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>DState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Acnt<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EPOCH-Updates
EPOCH-updates<span class="w"> </span>fut<span class="w"> </span>ls<span class="w"> </span>dState&#39;<span class="w"> </span>acnt&#39;<span class="w"> </span><span class="ow">=</span>
<span class="w">    </span>EPOCHUpdates<span class="w"> </span><span class="o">(</span>u0<span class="w"> </span><span class="ow">.</span>es<span class="o">)</span><span class="w"> </span><span class="o">(</span>u0<span class="w"> </span><span class="ow">.</span>govSt&#39;<span class="o">)</span><span class="w"> </span>dState&#39;&#39;<span class="w"> </span><span class="o">(</span>u0<span class="w"> </span><span class="ow">.</span>gState&#39;<span class="o">)</span><span class="w"> </span><span class="o">(</span>u0<span class="w"> </span><span class="ow">.</span>utxoSt&#39;<span class="o">)</span><span class="w"> </span>acnt&#39;&#39;
<span class="w">  </span><span class="kr">where</span>
<span class="w">    </span><span class="kr">open</span><span class="w"> </span>LState
<span class="w">    </span><span class="kr">open</span><span class="w"> </span>EPOCH-Updates0

<span class="w">    </span>u0<span class="w"> </span><span class="ow">=</span><span class="w"> </span>EPOCH-updates0<span class="w"> </span>fut<span class="w"> </span>ls

<span class="w">    </span><span class="nf">refunds</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Credential<span class="w"> </span>⇀<span class="w"> </span>Coin
<span class="w">    </span>refunds<span class="w"> </span><span class="ow">=</span><span class="w"> </span>pullbackMap<span class="w"> </span><span class="o">(</span>u0<span class="w"> </span><span class="ow">.</span>payout<span class="o">)</span><span class="w"> </span>toRwdAddr<span class="w"> </span><span class="o">(</span>dom<span class="w"> </span><span class="o">(</span>RewardsOf<span class="w"> </span>dState&#39;<span class="o">))</span>

<span class="w">    </span><span class="nf">dState&#39;&#39;</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>DState
<span class="w">    </span>dState&#39;&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">record</span><span class="w"> </span>dState&#39;<span class="w"> </span><span class="o">{</span><span class="w"> </span>rewards<span class="w"> </span><span class="ow">=</span><span class="w"> </span>RewardsOf<span class="w"> </span>dState&#39;<span class="w"> </span>∪⁺<span class="w"> </span>refunds<span class="w"> </span><span class="o">}</span>

<span class="w">    </span><span class="nf">unclaimed</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Coin
<span class="w">    </span>unclaimed<span class="w"> </span><span class="ow">=</span><span class="w"> </span>getCoin<span class="w"> </span><span class="o">(</span>u0<span class="w"> </span><span class="ow">.</span>payout<span class="o">)</span><span class="w"> </span>-<span class="w"> </span>getCoin<span class="w"> </span>refunds

<span class="w">    </span><span class="nf">acnt&#39;&#39;</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>Acnt
<span class="w">    </span>acnt&#39;&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="kr">record</span><span class="w"> </span>acnt&#39;
<span class="w">      </span><span class="o">{</span><span class="w"> </span>treasury<span class="w"> </span><span class="ow">=</span>
<span class="w">          </span>TreasuryOf<span class="w"> </span>acnt&#39;<span class="w"> </span>∸<span class="w"> </span>u0<span class="w"> </span><span class="ow">.</span>totWithdrawals<span class="w"> </span>+<span class="w"> </span>DonationsOf<span class="w"> </span>ls<span class="w"> </span>+<span class="w"> </span>unclaimed
<span class="w">      </span><span class="o">}</span>
</code></pre></div>
<h3 id="transition-rule">Transition Rule<a class="headerlink" href="#transition-rule" title="Permanent link">&para;</a></h3>
<p>This section defines the <code class="AgdaDatatype">EPOCH</code> transition rule. </p>
<p>In Conway, the <code class="AgdaDatatype">EPOCH</code> rule invokes <code class="AgdaDatatype">RATIFIES</code>,
and carries out the following tasks:</p>
<ul>
<li>
<p>Payout all the enacted treasury withdrawals.</p>
</li>
<li>
<p>Remove expired and enacted governance actions, and refund deposits.</p>
</li>
<li>
<p>If <code class="AgdaBound">govSt’</code> is empty, increment the activity counter for
  <code class="AgdaInductiveConstructor">DRep</code>s.</p>
</li>
<li>
<p>Remove all hot keys from the constitutional committee delegation map
  that do not belong to currently elected members.</p>
</li>
<li>
<p>Apply the resulting enact state from the previous epoch boundary
  <code class="AgdaBound">fut</code> and store the resulting enact state
  <code class="AgdaBound">fut’</code>.</p>
</li>
</ul>
<p><div class="highlight"><pre><span></span><code><span class="kr">data</span><span class="w"> </span>_⊢_⇀⦇_,EPOCH⦈_<span class="w"> </span><span class="ow">:</span><span class="w"> </span>⊤<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EpochState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Epoch<span class="w"> </span><span class="ow">→</span><span class="w"> </span>EpochState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Type<span class="w"> </span><span class="kr">where</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nf">EPOCH</span><span class="w"> </span><span class="ow">:</span>
</code></pre></div></p>
<!--
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>acnt<span class="w"> </span><span class="ow">:</span><span class="w"> </span>Acnt<span class="o">}</span><span class="w"> </span><span class="o">{</span>utxoSt&#39;&#39;<span class="w"> </span><span class="ow">:</span><span class="w"> </span>UTxOState<span class="o">}</span><span class="w"> </span><span class="o">{</span>acnt&#39;<span class="w"> </span>dState&#39;<span class="w"> </span>pState&#39;<span class="o">}</span><span class="w"> </span><span class="ow">→</span>
</code></pre></div>
-->
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="kr">let</span>
<span class="w">      </span>EPOCHUpdates<span class="w"> </span>es<span class="w"> </span>govSt&#39;<span class="w"> </span>dState&#39;&#39;<span class="w"> </span>gState&#39;<span class="w"> </span>utxoSt&#39;<span class="w"> </span>acnt&#39;&#39;<span class="w"> </span><span class="ow">=</span>
<span class="w">        </span>EPOCH-updates<span class="w"> </span>fut<span class="w"> </span>ls<span class="w"> </span>dState&#39;<span class="w"> </span>acnt&#39;

<span class="w">      </span><span class="nf">stakeDistrs</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>StakeDistrs
<span class="w">      </span>stakeDistrs<span class="w"> </span><span class="ow">=</span><span class="w"> </span>mkStakeDistrs<span class="w"> </span><span class="o">(</span>Snapshots.mark<span class="w"> </span>ss&#39;<span class="o">)</span><span class="w"> </span>e<span class="w"> </span>utxoSt&#39;
<span class="w">                                  </span>govSt&#39;<span class="w"> </span><span class="o">(</span>GStateOf<span class="w"> </span>ls<span class="o">)</span><span class="w"> </span><span class="o">(</span>DStateOf<span class="w"> </span>ls<span class="o">)</span>

<span class="w">      </span><span class="nf">Γ</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span>RatifyEnv
<span class="w">      </span>Γ<span class="w"> </span><span class="ow">=</span><span class="w"> </span>⟦<span class="w"> </span>stakeDistrs<span class="w"> </span>,<span class="w"> </span>e<span class="w"> </span>,<span class="w"> </span>DRepsOf<span class="w"> </span>ls<span class="w"> </span>,<span class="w"> </span>CCHotKeysOf<span class="w"> </span>ls<span class="w"> </span>,<span class="w"> </span>TreasuryOf<span class="w"> </span>acnt<span class="w"> </span>,<span class="w"> </span>PoolsOf<span class="w"> </span>ls<span class="w"> </span>,<span class="w"> </span>VoteDelegsOf<span class="w"> </span>ls<span class="w"> </span>⟧

<span class="w">    </span><span class="kr">in</span>
<span class="w">        </span>ls<span class="w"> </span>⊢<span class="w"> </span>ss<span class="w"> </span>⇀⦇<span class="w"> </span>tt<span class="w"> </span>,SNAP⦈<span class="w"> </span>ss&#39;
<span class="w">      </span>∙<span class="w"> </span>Γ<span class="w">  </span>⊢<span class="w"> </span>⟦<span class="w"> </span>es<span class="w"> </span>,<span class="w"> </span>∅<span class="w"> </span>,<span class="w"> </span>false<span class="w"> </span>⟧<span class="w"> </span>⇀⦇<span class="w"> </span>govSt&#39;<span class="w"> </span>,RATIFIES⦈<span class="w"> </span>fut&#39;
<span class="w">      </span>∙<span class="w"> </span>_<span class="w">  </span>⊢<span class="w"> </span>⟦<span class="w"> </span>utxoSt&#39;<span class="w"> </span>,<span class="w"> </span>acnt<span class="w"> </span>,<span class="w"> </span>DStateOf<span class="w"> </span>ls<span class="w"> </span>,<span class="w"> </span>PStateOf<span class="w"> </span>ls<span class="w"> </span>⟧<span class="w"> </span>⇀⦇<span class="w"> </span>e<span class="w"> </span>,POOLREAP⦈<span class="w"> </span>⟦<span class="w"> </span>utxoSt&#39;&#39;<span class="w"> </span>,<span class="w"> </span>acnt&#39;<span class="w"> </span>,<span class="w"> </span>dState&#39;<span class="w"> </span>,<span class="w"> </span>pState&#39;<span class="w"> </span>⟧
<span class="w">      </span>──────────────────────────────────────────────
<span class="w">      </span>_<span class="w"> </span>⊢<span class="w"> </span>⟦<span class="w"> </span>acnt<span class="w"> </span>,<span class="w"> </span>ss<span class="w"> </span>,<span class="w"> </span>ls<span class="w"> </span>,<span class="w"> </span>es₀<span class="w"> </span>,<span class="w"> </span>fut<span class="w"> </span>⟧<span class="w"> </span>⇀⦇<span class="w"> </span>e<span class="w"> </span>,EPOCH⦈<span class="w"> </span>⟦<span class="w"> </span>acnt&#39;&#39;<span class="w"> </span>,<span class="w"> </span>ss&#39;<span class="w"> </span>,<span class="w"> </span>⟦<span class="w"> </span>utxoSt&#39;&#39;<span class="w"> </span>,<span class="w"> </span>govSt&#39;<span class="w"> </span>,<span class="w"> </span>⟦<span class="w"> </span>dState&#39;&#39;<span class="w"> </span>,<span class="w"> </span>pState&#39;<span class="w"> </span>,<span class="w"> </span>gState&#39;<span class="w"> </span>⟧ᶜˢ<span class="w"> </span>⟧<span class="w"> </span>,<span class="w"> </span>es<span class="w"> </span>,<span class="w"> </span>fut&#39;<span class="w"> </span>⟧
</code></pre></div>
<h2 id="newepoch-transition-system"><span class="AgdaDatatype">NEWEPOCH</span> Transition System<a class="headerlink" href="#newepoch-transition-system" title="Permanent link">&para;</a></h2>
<p>This section defines the <code class="AgdaDatatype">NEWEPOCH</code> transition system.</p>
<div class="highlight"><pre><span></span><code><span class="kr">data</span><span class="w"> </span>_⊢_⇀⦇_,NEWEPOCH⦈_<span class="w"> </span><span class="ow">:</span><span class="w"> </span>⊤<span class="w"> </span><span class="ow">→</span><span class="w"> </span>NewEpochState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Epoch<span class="w"> </span><span class="ow">→</span><span class="w"> </span>NewEpochState<span class="w"> </span><span class="ow">→</span><span class="w"> </span>Type<span class="w"> </span><span class="kr">where</span>

<span class="w">  </span><span class="nf">NEWEPOCH-New</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>bprev<span class="w"> </span>bcur<span class="w"> </span><span class="ow">:</span><span class="w"> </span>BlocksMade<span class="o">}</span><span class="w"> </span><span class="ow">→</span>
<span class="w">    </span><span class="kr">let</span>
<span class="w">      </span>eps&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span>applyRUpd<span class="w"> </span>ru<span class="w"> </span>eps
<span class="w">      </span>ss<span class="w">   </span><span class="ow">=</span><span class="w"> </span>EpochState.ss<span class="w"> </span>eps&#39;&#39;
<span class="w">      </span>pd&#39;<span class="w">  </span><span class="ow">=</span><span class="w"> </span>calculatePoolDelegatedStake<span class="w"> </span><span class="o">(</span>Snapshots.set<span class="w"> </span>ss<span class="o">)</span>
<span class="w">    </span><span class="kr">in</span>
<span class="w">      </span>∙<span class="w"> </span>e<span class="w"> </span>≡<span class="w"> </span>lastEpoch<span class="w"> </span>+<span class="w"> </span><span class="mi">1</span>
<span class="w">      </span>∙<span class="w"> </span>_<span class="w"> </span>⊢<span class="w"> </span>eps&#39;<span class="w"> </span>⇀⦇<span class="w"> </span>e<span class="w"> </span>,EPOCH⦈<span class="w"> </span>eps&#39;&#39;
<span class="w">      </span>──────────────────────────────────────────────
<span class="w">      </span>_<span class="w"> </span>⊢<span class="w"> </span>⟦<span class="w"> </span>lastEpoch<span class="w"> </span>,<span class="w"> </span>bprev<span class="w"> </span>,<span class="w"> </span>bcur<span class="w"> </span>,<span class="w"> </span>eps<span class="w"> </span>,<span class="w"> </span>just<span class="w"> </span>ru<span class="w"> </span>,<span class="w"> </span>pd<span class="w"> </span>⟧<span class="w"> </span>⇀⦇<span class="w"> </span>e<span class="w"> </span>,NEWEPOCH⦈<span class="w"> </span>⟦<span class="w"> </span>e<span class="w"> </span>,<span class="w"> </span>bcur<span class="w"> </span>,<span class="w"> </span>∅ᵐ<span class="w">  </span>,<span class="w"> </span>eps&#39;&#39;<span class="w"> </span>,<span class="w"> </span>nothing<span class="w"> </span>,<span class="w"> </span>pd&#39;<span class="w"> </span>⟧

<span class="w">  </span><span class="nf">NEWEPOCH-Not-New</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>bprev<span class="w"> </span>bcur<span class="w"> </span><span class="ow">:</span><span class="w"> </span>BlocksMade<span class="o">}</span><span class="w"> </span><span class="ow">→</span>
<span class="w">    </span>∙<span class="w"> </span>e<span class="w"> </span>≢<span class="w"> </span>lastEpoch<span class="w"> </span>+<span class="w"> </span><span class="mi">1</span>
<span class="w">      </span>──────────────────────────────────────────────
<span class="w">      </span>_<span class="w"> </span>⊢<span class="w"> </span>⟦<span class="w"> </span>lastEpoch<span class="w"> </span>,<span class="w"> </span>bprev<span class="w"> </span>,<span class="w"> </span>bcur<span class="w"> </span>,<span class="w"> </span>eps<span class="w"> </span>,<span class="w"> </span>mru<span class="w"> </span>,<span class="w"> </span>pd<span class="w"> </span>⟧<span class="w"> </span>⇀⦇<span class="w"> </span>e<span class="w"> </span>,NEWEPOCH⦈<span class="w"> </span>⟦<span class="w"> </span>lastEpoch<span class="w"> </span>,<span class="w"> </span>bprev<span class="w"> </span>,<span class="w"> </span>bcur<span class="w"> </span>,<span class="w"> </span>eps<span class="w"> </span>,<span class="w"> </span>mru<span class="w"> </span>,<span class="w"> </span>pd<span class="w"> </span>⟧

<span class="w">  </span><span class="nf">NEWEPOCH-No-Reward-Update</span><span class="w"> </span><span class="ow">:</span><span class="w"> </span><span class="ow">∀</span><span class="w"> </span><span class="o">{</span>bprev<span class="w"> </span>bcur<span class="w"> </span><span class="ow">:</span><span class="w"> </span>BlocksMade<span class="o">}</span><span class="w"> </span><span class="ow">→</span>
<span class="w">    </span><span class="kr">let</span>
<span class="w">      </span>ss<span class="w">  </span><span class="ow">=</span><span class="w"> </span>EpochState.ss<span class="w"> </span>eps&#39;
<span class="w">      </span>pd&#39;<span class="w"> </span><span class="ow">=</span><span class="w"> </span>calculatePoolDelegatedStake<span class="w"> </span><span class="o">(</span>Snapshots.set<span class="w"> </span>ss<span class="o">)</span>
<span class="w">    </span><span class="kr">in</span>
<span class="w">      </span>∙<span class="w"> </span>e<span class="w"> </span>≡<span class="w"> </span>lastEpoch<span class="w"> </span>+<span class="w"> </span><span class="mi">1</span>
<span class="w">      </span>∙<span class="w"> </span>_<span class="w"> </span>⊢<span class="w"> </span>eps<span class="w"> </span>⇀⦇<span class="w"> </span>e<span class="w"> </span>,EPOCH⦈<span class="w"> </span>eps&#39;
<span class="w">      </span>──────────────────────────────────────────────
<span class="w">      </span>_<span class="w"> </span>⊢<span class="w"> </span>⟦<span class="w"> </span>lastEpoch<span class="w"> </span>,<span class="w"> </span>bprev<span class="w"> </span>,<span class="w"> </span>bcur<span class="w"> </span>,<span class="w"> </span>eps<span class="w"> </span>,<span class="w"> </span>nothing<span class="w"> </span>,<span class="w"> </span>pd<span class="w"> </span>⟧<span class="w"> </span>⇀⦇<span class="w"> </span>e<span class="w"> </span>,NEWEPOCH⦈<span class="w"> </span>⟦<span class="w"> </span>e<span class="w"> </span>,<span class="w"> </span>bcur<span class="w"> </span>,<span class="w"> </span>∅ᵐ<span class="w"> </span>,<span class="w"> </span>eps&#39;<span class="w"> </span>,<span class="w"> </span>nothing<span class="w"> </span>,<span class="w"> </span>pd&#39;<span class="w"> </span>⟧
</code></pre></div>
<h1 class="unnumbered" id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h1>
<p><strong>[CVG19]</strong> <span id="shelley-ledger-spec"
label="shelley-ledger-spec"></span> Jared Corduan and Polina Vinogradova
and Matthias Güdemann. <em>A Formal Specification of the Cardano Ledger</em>.
2019.</p>
<p><strong>[Team18]</strong> <span id="shelley-delegation-design"
label="shelley-delegation-design"></span> IOHK Formal Methods Team.
<em>Design Specification for Delegation and Incentives in Cardano, IOHK
Deliverable SL-D1</em>. 2018.</p>
<!-- Properties -->







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="Ledger.Conway.Specification.Enact.Properties.Computational.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Computational">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Computational
              </div>
            </div>
          </a>
        
        
          
          <a href="Ledger.Conway.Specification.Epoch.Properties.html" class="md-footer__link md-footer__link--next" aria-label="Next: Properties">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Properties
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["toc.follow", "content.tooltips", "content.code.copy", "content.action.view", "navigation.footer", "navigation.sections", "navigation.tabs"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
      
        <script src="js/katex-config.js"></script>
      
        <script src="AgdaKaTeX.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      
        <script src="js/custom.js"></script>
      
    
  </body>
</html>